!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.pip||(t.pip={})).services=e()}}(function(){var define,module,exports;return function e(t,r,n){function o(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var l=r[a]={exports:{}};t[a][0].call(l.exports,function(e){var r=t[a][1][e];return o(r||e)},l,l.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(require,module,exports){(function(process,global){!function(e,t){"object"==typeof exports&&void 0!==module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.async=e.async||{})}(this,function(exports){"use strict";function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function overRest$1(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=nativeMax(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),apply(e,this,s)}}function identity(e){return e}function rest(e,t){return overRest$1(e,t,identity)}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function asyncify(e){return initialParams(function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}isObject(n)&&"function"==typeof n.then?n.then(function(e){r(null,e)},function(e){r(e.message?e:new Error(e))}):r(null,n)})}function supportsAsync(){var supported;try{supported=isAsync(eval("(async function () {})"))}catch(e){supported=!1}return supported}function isAsync(e){return supportsSymbol&&"AsyncFunction"===e[Symbol.toStringTag]}function wrapAsync(e){return isAsync(e)?asyncify(e):e}function applyEach$1(e){return rest(function(t,r){var n=initialParams(function(r,n){var o=this;return e(t,function(e,t){wrapAsync$1(e).apply(o,r.concat(t))},n)});return r.length?n.apply(this,r):n})}function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0}catch(e){}var n=nativeObjectToString.call(e);return t?e[symToStringTag$1]=r:delete e[symToStringTag$1],n}function objectToString(e){return nativeObjectToString$1.call(e)}function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:(e=Object(e),symToStringTag&&symToStringTag in e?getRawTag(e):objectToString(e))}function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function noop(){}function once(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function isObjectLike(e){return null!=e&&"object"==typeof e}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag}function stubFalse(){return!1}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER$1:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(t){return e(t)}}function arrayLikeKeys(e,t){var r=isArray(e),n=!r&&isArguments(e),o=!r&&!n&&isBuffer(e),i=!r&&!n&&!o&&isTypedArray(e),a=r||n||o||i,s=a?baseTimes(e.length,String):[],u=s.length;for(var c in e)!t&&!hasOwnProperty$1.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||isIndex(c,u))||s.push(c);return s}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$5)}function overArg(e,t){return function(r){return e(t(r))}}function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$3.call(e,r)&&"constructor"!=r&&t.push(r);return t}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function createArrayIterator(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}function createES2015Iterator(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}function createObjectIterator(e){var t=keys(e),r=-1,n=t.length;return function(){var o=t[++r];return r<n?{value:e[o],key:o}:null}}function iterator(e){if(isArrayLike(e))return createArrayIterator(e);var t=getIterator(e);return t?createES2015Iterator(t):createObjectIterator(e)}function onlyOnce(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function _eachOfLimit(e){return function(t,r,n){function o(e,t){if(u-=1,e)s=!0,n(e);else{if(t===breakLoop||s&&u<=0)return s=!0,n(null);i()}}function i(){for(;u<e&&!s;){var t=a();if(null===t)return s=!0,void(u<=0&&n(null));u+=1,r(t.value,t.key,onlyOnce(o))}}if(n=once(n||noop),e<=0||!t)return n(null);var a=iterator(t),s=!1,u=0;i()}}function eachOfLimit(e,t,r,n){_eachOfLimit(t)(e,wrapAsync$1(r),n)}function doLimit(e,t){return function(r,n,o){return e(r,t,n,o)}}function eachOfArrayLike(e,t,r){function n(e,t){e?r(e):++i!==a&&t!==breakLoop||r(null)}r=once(r||noop);var o=0,i=0,a=e.length;for(0===a&&r(null);o<a;o++)t(e[o],o,onlyOnce(n))}function doParallel(e){return function(t,r,n){return e(eachOf,t,wrapAsync$1(r),n)}}function _asyncMap(e,t,r,n){n=n||noop,t=t||[];var o=[],i=0,a=wrapAsync$1(r);e(t,function(e,t,r){var n=i++;a(e,function(e,t){o[n]=t,r(e)})},function(e){n(e,o)})}function doParallelLimit(e){return function(t,r,n,o){return e(_eachOfLimit(r),t,wrapAsync$1(n),o)}}function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function createBaseFor(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),s=a.length;s--;){var u=a[e?s:++o];if(!1===r(i[u],u,i))break}return t}}function baseForOwn(e,t){return e&&baseFor(e,t,keys)}function baseFindIndex(e,t,r,n){for(var o=e.length,i=r+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}function baseIsNaN(e){return e!==e}function strictIndexOf(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}function baseIndexOf(e,t,r){return t===t?strictIndexOf(e,t,r):baseFindIndex(e,baseIsNaN,r)}function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag}function baseToString(e){if("string"==typeof e)return e;if(isArray(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function baseSlice(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:baseSlice(e,t,r)}function charsEndIndex(e,t){for(var r=e.length;r--&&baseIndexOf(t,e[r],0)>-1;);return r}function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&baseIndexOf(t,e[r],0)>-1;);return r}function asciiToArray(e){return e.split("")}function hasUnicode(e){return reHasUnicode.test(e)}function unicodeToArray(e){return e.match(reUnicode)||[]}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function toString(e){return null==e?"":baseToString(e)}function trim(e,t,r){if((e=toString(e))&&(r||void 0===t))return e.replace(reTrim,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e),o=stringToArray(t);return castSlice(n,charsStartIndex(n,o),charsEndIndex(n,o)+1).join("")}function parseParams(e){return e=e.toString().replace(STRIP_COMMENTS,""),e=e.match(FN_ARGS)[2].replace(" ",""),e=e?e.split(FN_ARG_SPLIT):[],e=e.map(function(e){return trim(e.replace(FN_ARG,""))})}function autoInject(e,t){var r={};baseForOwn(e,function(e,t){function n(t,r){var n=arrayMap(o,function(e){return t[e]});n.push(r),wrapAsync$1(e).apply(null,n)}var o,i=isAsync(e),a=!i&&1===e.length||i&&0===e.length;if(isArray(e))o=e.slice(0,-1),e=e[e.length-1],r[t]=o.concat(o.length>0?n:e);else if(a)r[t]=e;else{if(o=parseParams(e),0===e.length&&!i&&0===o.length)throw new Error("autoInject task functions require explicit parameters.");i||o.pop(),r[t]=o.concat(n)}}),auto(r,t)}function fallback(e){setTimeout(e,0)}function wrap(e){return rest(function(t,r){e(function(){t.apply(null,r)})})}function DLL(){this.head=this.tail=null,this.length=0}function setInitial(e,t){e.length=1,e.head=e.tail=t}function queue(e,t,r){function n(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(c.started=!0,isArray(e)||(e=[e]),0===e.length&&c.idle())return setImmediate$1(function(){c.drain()});for(var n=0,o=e.length;n<o;n++){var i={data:e[n],callback:r||noop};t?c._tasks.unshift(i):c._tasks.push(i)}setImmediate$1(c.process)}function o(e){return rest(function(t){a-=1;for(var r=0,n=e.length;r<n;r++){var o=e[r],i=baseIndexOf(s,o,0);i>=0&&s.splice(i),o.callback.apply(o,t),null!=t[0]&&c.error(t[0],o.data)}a<=c.concurrency-c.buffer&&c.unsaturated(),c.idle()&&c.drain(),c.process()})}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var i=wrapAsync$1(e),a=0,s=[],u=!1,c={_tasks:new DLL,concurrency:t,payload:r,saturated:noop,unsaturated:noop,buffer:t/4,empty:noop,drain:noop,error:noop,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){c.drain=noop,c._tasks.empty()},unshift:function(e,t){n(e,!0,t)},process:function(){if(!u){for(u=!0;!c.paused&&a<c.concurrency&&c._tasks.length;){var e=[],t=[],r=c._tasks.length;c.payload&&(r=Math.min(r,c.payload));for(var n=0;n<r;n++){var l=c._tasks.shift();e.push(l),t.push(l.data)}0===c._tasks.length&&c.empty(),a+=1,s.push(e[0]),a===c.concurrency&&c.saturated();var p=onlyOnce(o(e));i(t,p)}u=!1}},length:function(){return c._tasks.length},running:function(){return a},workersList:function(){return s},idle:function(){return c._tasks.length+a===0},pause:function(){c.paused=!0},resume:function(){!1!==c.paused&&(c.paused=!1,setImmediate$1(c.process))}};return c}function cargo(e,t){return queue(e,1,t)}function reduce(e,t,r,n){n=once(n||noop);var o=wrapAsync$1(r);eachOfSeries(e,function(e,r,n){o(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})}function concat$1(e,t,r,n){var o=[];e(t,function(e,t,n){r(e,function(e,t){o=o.concat(t||[]),n(e)})},function(e){n(e,o)})}function doSeries(e){return function(t,r,n){return e(eachOfSeries,t,wrapAsync$1(r),n)}}function _createTester(e,t){return function(r,n,o,i){i=i||noop;var a,s=!1;r(n,function(r,n,i){o(r,function(n,o){n?i(n):e(o)&&!a?(s=!0,a=t(!0,r),i(null,breakLoop)):i()})},function(e){e?i(e):i(null,s?a:t(!1))})}}function _findGetResult(e,t){return t}function consoleFunc(e){return rest(function(t,r){wrapAsync$1(t).apply(null,r.concat(rest(function(t,r){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&arrayEach(r,function(t){console[e](t)}))})))})}function doDuring(e,t,r){function n(e,t){return e?r(e):t?void o(a):r(null)}r=onlyOnce(r||noop);var o=wrapAsync$1(e),i=wrapAsync$1(t),a=rest(function(e,t){if(e)return r(e);t.push(n),i.apply(this,t)});n(null,!0)}function doWhilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync$1(e),o=rest(function(e,i){return e?r(e):t.apply(this,i)?n(o):void r.apply(null,[null].concat(i))});n(o)}function doUntil(e,t,r){doWhilst(e,function(){return!t.apply(this,arguments)},r)}function during(e,t,r){function n(e){if(e)return r(e);a(o)}function o(e,t){return e?r(e):t?void i(n):r(null)}r=onlyOnce(r||noop);var i=wrapAsync$1(t),a=wrapAsync$1(e);a(o)}function _withoutIndex(e){return function(t,r,n){return e(t,n)}}function eachLimit(e,t,r){eachOf(e,_withoutIndex(wrapAsync$1(t)),r)}function eachLimit$1(e,t,r,n){_eachOfLimit(t)(e,_withoutIndex(wrapAsync$1(r)),n)}function ensureAsync(e){return isAsync(e)?e:initialParams(function(t,r){var n=!0;t.push(function(){var e=arguments;n?setImmediate$1(function(){r.apply(null,e)}):r.apply(null,e)}),e.apply(this,t),n=!1})}function notId(e){return!e}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function filterArray(e,t,r,n){var o=new Array(t.length);e(t,function(e,t,n){r(e,function(e,r){o[t]=!!r,n(e)})},function(e){if(e)return n(e);for(var r=[],i=0;i<t.length;i++)o[i]&&r.push(t[i]);n(null,r)})}function filterGeneric(e,t,r,n){var o=[];e(t,function(e,t,n){r(e,function(r,i){r?n(r):(i&&o.push({index:t,value:e}),n())})},function(e){e?n(e):n(null,arrayMap(o.sort(function(e,t){return e.index-t.index}),baseProperty("value")))})}function _filter(e,t,r,n){(isArrayLike(t)?filterArray:filterGeneric)(e,t,wrapAsync$1(r),n||noop)}function forever(e,t){function r(e){if(e)return n(e);o(r)}var n=onlyOnce(t||noop),o=wrapAsync$1(ensureAsync(e));r()}function mapValuesLimit(e,t,r,n){n=once(n||noop);var o={},i=wrapAsync$1(r);eachOfLimit(e,t,function(e,t,r){i(e,t,function(e,n){if(e)return r(e);o[t]=n,r()})},function(e){n(e,o)})}function has(e,t){return t in e}function memoize(e,t){var r=Object.create(null),n=Object.create(null);t=t||identity;var o=wrapAsync$1(e),i=initialParams(function(e,i){var a=t.apply(null,e);has(r,a)?setImmediate$1(function(){i.apply(null,r[a])}):has(n,a)?n[a].push(i):(n[a]=[i],o.apply(null,e.concat(rest(function(e){r[a]=e;var t=n[a];delete n[a];for(var o=0,i=t.length;o<i;o++)t[o].apply(null,e)}))))});return i.memo=r,i.unmemoized=e,i}function _parallel(e,t,r){r=r||noop;var n=isArrayLike(t)?[]:{};e(t,function(e,t,r){wrapAsync$1(e)(rest(function(e,o){o.length<=1&&(o=o[0]),n[t]=o,r(e)}))},function(e){r(e,n)})}function parallelLimit(e,t){_parallel(eachOf,e,t)}function parallelLimit$1(e,t,r){_parallel(_eachOfLimit(t),e,r)}function race(e,t){if(t=once(t||noop),!isArray(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var r=0,n=e.length;r<n;r++)wrapAsync$1(e[r])(t)}function reduceRight(e,t,r,n){reduce(slice.call(e).reverse(),t,r,n)}function reflect(e){var t=wrapAsync$1(e);return initialParams(function(e,r){return e.push(rest(function(e,t){if(e)r(null,{error:e});else{var n=null;1===t.length?n=t[0]:t.length>1&&(n=t),r(null,{value:n})}})),t.apply(this,e)})}function reject$1(e,t,r,n){_filter(e,t,function(e,t){r(e,function(e,r){t(e,!r)})},n)}function reflectAll(e){var t;return isArray(e)?t=arrayMap(e,reflect):(t={},baseForOwn(e,function(e,r){t[r]=reflect.call(this,e)})),t}function constant$1(e){return function(){return e}}function retry(e,t,r){function n(){s(function(e){e&&u++<a.times&&("function"!=typeof a.errorFilter||a.errorFilter(e))?setTimeout(n,a.intervalFunc(u)):r.apply(null,arguments)})}var o=5,i=0,a={times:o,intervalFunc:constant$1(i)};if(arguments.length<3&&"function"==typeof e?(r=t||noop,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||o,e.intervalFunc="function"==typeof t.interval?t.interval:constant$1(+t.interval||i),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||o}}(a,e),r=r||noop),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=wrapAsync$1(t),u=1;n()}function series(e,t){_parallel(eachOfSeries,e,t)}function sortBy(e,t,r){function n(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0}var o=wrapAsync$1(t);map(e,function(e,t){o(e,function(r,n){if(r)return t(r);t(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);r(null,arrayMap(t.sort(n),baseProperty("value")))})}function timeout(e,t,r){function n(){s||(i.apply(null,arguments),clearTimeout(a))}function o(){var t=e.name||"anonymous",n=new Error('Callback function "'+t+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),s=!0,i(n)}var i,a,s=!1,u=wrapAsync$1(e);return initialParams(function(e,r){i=r,a=setTimeout(o,t),u.apply(null,e.concat(n))})}function baseRange(e,t,r,n){for(var o=-1,i=nativeMax$1(nativeCeil((t-e)/(r||1)),0),a=Array(i);i--;)a[n?i:++o]=e,e+=r;return a}function timeLimit(e,t,r,n){var o=wrapAsync$1(r);mapLimit(baseRange(0,e,1),t,o,n)}function transform(e,t,r,n){arguments.length<=3&&(n=r,r=t,t=isArray(e)?[]:{}),n=once(n||noop);var o=wrapAsync$1(r);eachOf(e,function(e,r,n){o(t,e,r,n)},function(e){n(e,t)})}function unmemoize(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function whilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync$1(t);if(!e())return r(null);var o=rest(function(t,i){return t?r(t):e()?n(o):void r.apply(null,[null].concat(i))});n(o)}function until(e,t,r){whilst(function(){return!e.apply(this,arguments)},t,r)}var nativeMax=Math.max,initialParams=function(e){return rest(function(t){var r=t.pop();e.call(this,t,r)})},supportsSymbol="function"==typeof Symbol,wrapAsync$1=supportsAsync()?wrapAsync:identity,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]",MAX_SAFE_INTEGER=9007199254740991,breakLoop={},iteratorSymbol="function"==typeof Symbol&&Symbol.iterator,getIterator=function(e){return iteratorSymbol&&e[iteratorSymbol]&&e[iteratorSymbol]()},argsTag="[object Arguments]",objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$2.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArray=Array.isArray,freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty,objectProto$5=Object.prototype,nativeKeys=overArg(Object.keys,Object),objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty,eachOfGeneric=doLimit(eachOfLimit,1/0),eachOf=function(e,t,r){(isArrayLike(e)?eachOfArrayLike:eachOfGeneric)(e,wrapAsync$1(t),r)},map=doParallel(_asyncMap),applyEach=applyEach$1(map),mapLimit=doParallelLimit(_asyncMap),mapSeries=doLimit(mapLimit,1),applyEachSeries=applyEach$1(mapSeries),apply$2=rest(function(e,t){return rest(function(r){return e.apply(null,t.concat(r))})}),baseFor=createBaseFor(),auto=function(e,t,r){function n(e,t){d.push(function(){s(e,t)})}function o(){if(0===d.length&&0===f)return r(null,p);for(;d.length&&f<t;){d.shift()()}}function i(e,t){var r=h[e];r||(r=h[e]=[]),r.push(t)}function a(e){arrayEach(h[e]||[],function(e){e()}),o()}function s(e,t){if(!y){var n=onlyOnce(rest(function(t,n){if(f--,n.length<=1&&(n=n[0]),t){var o={};baseForOwn(p,function(e,t){o[t]=e}),o[e]=n,y=!0,h=Object.create(null),r(t,o)}else p[e]=n,a(e)}));f++;var o=wrapAsync$1(t[t.length-1]);t.length>1?o(p,n):o(n)}}function u(t){var r=[];return baseForOwn(e,function(e,n){isArray(e)&&baseIndexOf(e,t,0)>=0&&r.push(n)}),r}"function"==typeof t&&(r=t,t=null),r=once(r||noop);var c=keys(e),l=c.length;if(!l)return r(null);t||(t=l);var p={},f=0,y=!1,h=Object.create(null),d=[],g=[],m={};baseForOwn(e,function(t,r){if(!isArray(t))return n(r,[t]),void g.push(r);var o=t.slice(0,t.length-1),a=o.length;if(0===a)return n(r,t),void g.push(r);m[r]=a,arrayEach(o,function(s){if(!e[s])throw new Error("async.auto task `"+r+"` has a non-existent dependency `"+s+"` in "+o.join(", "));i(s,function(){0===--a&&n(r,t)})})}),function(){for(var e,t=0;g.length;)e=g.pop(),t++,arrayEach(u(e),function(e){0==--m[e]&&g.push(e)});if(t!==l)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),o()},symbolTag="[object Symbol]",INFINITY=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsVarRange="\\ufe0e\\ufe0f",rsZWJ="\\u200d",reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange$1="\\u20d0-\\u20f0",rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="[\\ud800-\\udfff]",rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod="(?:"+rsCombo+"|"+rsFitz+")?",rsOptVar="[\\ufe0e\\ufe0f]?",rsOptJoin="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+rsOptJoin,rsSymbol="(?:"+["[^\\ud800-\\udfff]"+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,"[\\ud800-\\udfff]"].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reTrim=/^\s+|\s+$/g,FN_ARGS=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/(=.+)?(\s*)$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,hasSetImmediate="function"==typeof setImmediate&&setImmediate,hasNextTick="object"==typeof process&&"function"==typeof process.nextTick,_defer;_defer=hasSetImmediate?setImmediate:hasNextTick?process.nextTick:fallback;var setImmediate$1=wrap(_defer);DLL.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},DLL.prototype.empty=DLL,DLL.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},DLL.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},DLL.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):setInitial(this,e)},DLL.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):setInitial(this,e)},DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head)},DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var eachOfSeries=doLimit(eachOfLimit,1),seq$1=rest(function(e){var t=arrayMap(e,wrapAsync$1);return rest(function(e){var r=this,n=e[e.length-1];"function"==typeof n?e.pop():n=noop,reduce(t,e,function(e,t,n){t.apply(r,e.concat(rest(function(e,t){n(e,t)})))},function(e,t){n.apply(r,[e].concat(t))})})}),compose=rest(function(e){return seq$1.apply(null,e.reverse())}),concat=doParallel(concat$1),concatSeries=doSeries(concat$1),constant=rest(function(e){var t=[null].concat(e);return initialParams(function(e,r){return r.apply(this,t)})}),detect=doParallel(_createTester(identity,_findGetResult)),detectLimit=doParallelLimit(_createTester(identity,_findGetResult)),detectSeries=doLimit(detectLimit,1),dir=consoleFunc("dir"),eachSeries=doLimit(eachLimit$1,1),every=doParallel(_createTester(notId,notId)),everyLimit=doParallelLimit(_createTester(notId,notId)),everySeries=doLimit(everyLimit,1),filter=doParallel(_filter),filterLimit=doParallelLimit(_filter),filterSeries=doLimit(filterLimit,1),groupByLimit=function(e,t,r,n){n=n||noop;var o=wrapAsync$1(r);mapLimit(e,t,function(e,t){o(e,function(r,n){return r?t(r):t(null,{key:n,val:e})})},function(e,t){for(var r={},o=Object.prototype.hasOwnProperty,i=0;i<t.length;i++)if(t[i]){var a=t[i].key,s=t[i].val;o.call(r,a)?r[a].push(s):r[a]=[s]}return n(e,r)})},groupBy=doLimit(groupByLimit,1/0),groupBySeries=doLimit(groupByLimit,1),log=consoleFunc("log"),mapValues=doLimit(mapValuesLimit,1/0),mapValuesSeries=doLimit(mapValuesLimit,1),_defer$1;_defer$1=hasNextTick?process.nextTick:hasSetImmediate?setImmediate:fallback;var nextTick=wrap(_defer$1),queue$1=function(e,t){var r=wrapAsync$1(e);return queue(function(e,t){r(e[0],t)},t,1)},priorityQueue=function(e,t){var r=queue$1(e,t);return r.push=function(e,t,n){if(null==n&&(n=noop),"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,isArray(e)||(e=[e]),0===e.length)return setImmediate$1(function(){r.drain()});t=t||0;for(var o=r._tasks.head;o&&t>=o.priority;)o=o.next;for(var i=0,a=e.length;i<a;i++){var s={data:e[i],priority:t,callback:n};o?r._tasks.insertBefore(o,s):r._tasks.push(s)}setImmediate$1(r.process)},delete r.unshift,r},slice=Array.prototype.slice,reject=doParallel(reject$1),rejectLimit=doParallelLimit(reject$1),rejectSeries=doLimit(rejectLimit,1),retryable=function(e,t){t||(t=e,e=null);var r=wrapAsync$1(t);return initialParams(function(t,n){function o(e){r.apply(null,t.concat(e))}e?retry(e,o,n):retry(o,n)})},some=doParallel(_createTester(Boolean,identity)),someLimit=doParallelLimit(_createTester(Boolean,identity)),someSeries=doLimit(someLimit,1),nativeCeil=Math.ceil,nativeMax$1=Math.max,times=doLimit(timeLimit,1/0),timesSeries=doLimit(timeLimit,1),waterfall=function(e,t){function r(o){if(n===e.length)return t.apply(null,[null].concat(o));var i=onlyOnce(rest(function(e,n){if(e)return t.apply(null,[e].concat(n));r(n)}));o.push(i),wrapAsync$1(e[n++]).apply(null,o)}if(t=once(t||noop),!isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;r([])},index={applyEach:applyEach,applyEachSeries:applyEachSeries,apply:apply$2,asyncify:asyncify,auto:auto,autoInject:autoInject,cargo:cargo,compose:compose,concat:concat,concatSeries:concatSeries,constant:constant,detect:detect,detectLimit:detectLimit,detectSeries:detectSeries,dir:dir,doDuring:doDuring,doUntil:doUntil,doWhilst:doWhilst,during:during,each:eachLimit,eachLimit:eachLimit$1,eachOf:eachOf,eachOfLimit:eachOfLimit,eachOfSeries:eachOfSeries,eachSeries:eachSeries,ensureAsync:ensureAsync,every:every,everyLimit:everyLimit,everySeries:everySeries,filter:filter,filterLimit:filterLimit,filterSeries:filterSeries,forever:forever,groupBy:groupBy,groupByLimit:groupByLimit,groupBySeries:groupBySeries,log:log,map:map,mapLimit:mapLimit,mapSeries:mapSeries,mapValues:mapValues,mapValuesLimit:mapValuesLimit,mapValuesSeries:mapValuesSeries,memoize:memoize,nextTick:nextTick,parallel:parallelLimit,parallelLimit:parallelLimit$1,priorityQueue:priorityQueue,queue:queue$1,race:race,reduce:reduce,reduceRight:reduceRight,reflect:reflect,reflectAll:reflectAll,reject:reject,rejectLimit:rejectLimit,rejectSeries:rejectSeries,retry:retry,retryable:retryable,seq:seq$1,series:series,setImmediate:setImmediate$1,some:some,someLimit:someLimit,someSeries:someSeries,sortBy:sortBy,timeout:timeout,times:times,timesLimit:timeLimit,timesSeries:timesSeries,transform:transform,unmemoize:unmemoize,until:until,waterfall:waterfall,whilst:whilst,all:every,any:some,forEach:eachLimit,forEachSeries:eachSeries,forEachLimit:eachLimit$1,forEachOf:eachOf,forEachOfSeries:eachOfSeries,forEachOfLimit:eachOfLimit,inject:reduce,foldl:reduce,foldr:reduceRight,select:filter,selectLimit:filterLimit,selectSeries:filterSeries,wrapSync:asyncify};exports.default=index,exports.applyEach=applyEach,exports.applyEachSeries=applyEachSeries,exports.apply=apply$2,exports.asyncify=asyncify,exports.auto=auto,exports.autoInject=autoInject,exports.cargo=cargo,exports.compose=compose,exports.concat=concat,exports.concatSeries=concatSeries,exports.constant=constant,exports.detect=detect,exports.detectLimit=detectLimit,exports.detectSeries=detectSeries,exports.dir=dir,exports.doDuring=doDuring,exports.doUntil=doUntil,exports.doWhilst=doWhilst,exports.during=during,exports.each=eachLimit,exports.eachLimit=eachLimit$1,exports.eachOf=eachOf,exports.eachOfLimit=eachOfLimit,exports.eachOfSeries=eachOfSeries,exports.eachSeries=eachSeries,exports.ensureAsync=ensureAsync,exports.every=every,exports.everyLimit=everyLimit,exports.everySeries=everySeries,exports.filter=filter,exports.filterLimit=filterLimit,exports.filterSeries=filterSeries,exports.forever=forever,exports.groupBy=groupBy,exports.groupByLimit=groupByLimit,exports.groupBySeries=groupBySeries,exports.log=log,exports.map=map,exports.mapLimit=mapLimit,exports.mapSeries=mapSeries,exports.mapValues=mapValues,exports.mapValuesLimit=mapValuesLimit,exports.mapValuesSeries=mapValuesSeries,exports.memoize=memoize,exports.nextTick=nextTick,exports.parallel=parallelLimit,exports.parallelLimit=parallelLimit$1,exports.priorityQueue=priorityQueue,exports.queue=queue$1,exports.race=race,exports.reduce=reduce,exports.reduceRight=reduceRight,exports.reflect=reflect,exports.reflectAll=reflectAll,exports.reject=reject,exports.rejectLimit=rejectLimit,exports.rejectSeries=rejectSeries,exports.retry=retry,exports.retryable=retryable,exports.seq=seq$1,exports.series=series,exports.setImmediate=setImmediate$1,exports.some=some,exports.someLimit=someLimit,exports.someSeries=someSeries,exports.sortBy=sortBy,exports.timeout=timeout,exports.times=times,exports.timesLimit=timeLimit,exports.timesSeries=timesSeries,exports.transform=transform,
exports.unmemoize=unmemoize,exports.until=until,exports.waterfall=waterfall,exports.whilst=whilst,exports.all=every,exports.allLimit=everyLimit,exports.allSeries=everySeries,exports.any=some,exports.anyLimit=someLimit,exports.anySeries=someSeries,exports.find=detect,exports.findLimit=detectLimit,exports.findSeries=detectSeries,exports.forEach=eachLimit,exports.forEachSeries=eachSeries,exports.forEachLimit=eachLimit$1,exports.forEachOf=eachOf,exports.forEachOfSeries=eachOfSeries,exports.forEachOfLimit=eachOfLimit,exports.inject=reduce,exports.foldl=reduce,exports.foldr=reduceRight,exports.select=filter,exports.selectLimit=filterLimit,exports.selectSeries=filterSeries,exports.wrapSync=asyncify,Object.defineProperty(exports,"__esModule",{value:!0})})}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){g&&h&&(g=!1,h.length?d=h.concat(d):m=-1,d.length&&u())}function u(){if(!g){var e=i(s);g=!0;for(var t=d.length;t;){for(h=d,d=[];++m<t;)h&&h[m].run();m=-1,t=d.length}h=null,g=!1,a(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var p,f,y=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var h,d=[],g=!1,m=-1;y.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new c(e,t)),1!==d.length||g||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=l,y.addListener=l,y.once=l,y.off=l,y.removeListener=l,y.removeAllListeners=l,y.emit=l,y.binding=function(e){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(e){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}},{}],3:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),e("./translate"),e("./session"),e("./transactions"),e("./routing"),e("./utilities"),angular.module("pipServices",["pipTranslate","pipSession","pipTransaction","pipRouting","pipFormat","pipTimer","pipScroll","pipTags","pipCodes","pipSystemInfo","pipPageReset"]),n(e("./translate")),n(e("./session")),n(e("./transactions")),n(e("./routing"))},{"./routing":6,"./session":9,"./transactions":14,"./translate":19,"./utilities":27}],4:[function(e,t,r){"use strict";function n(e){"ngInject";e.$on("$stateChangeSuccess",function(t,n,o,i,a){var s={name:n.name,url:n.url,params:o},u={name:i.name,url:i.url,params:a};e[r.StateVar]=s,e[r.PrevStateVar]=u})}function o(e,t,n){"ngInject";function o(){t.history.back()}function i(o){if(n[r.StateVar]&&n[r.PrevStateVar]){var i=_.cloneDeep(n[r.PrevStateVar]);i.params=_.extend(i.params,o),e.go(i.name,i.params)}else t.history.back()}return e.goBack=o,e.goBackAndSelect=i,e}function i(e){e.decorator("$state",o)}n.$inject=["$rootScope"],o.$inject=["$delegate","$window","$rootScope"],i.$inject=["$provide"],Object.defineProperty(r,"__esModule",{value:!0}),r.StateVar="$state",r.PrevStateVar="$prevState",angular.module("pipRouting").config(i).run(n)},{}],5:[function(e,t,r){"use strict";function n(e,t,n){"ngInject";e.$on("$stateChangeStart",function(t,n,o,i,a){e[r.RoutingVar]=!0}),e.$on("$stateChangeSuccess",function(t,n,o,i,a){e[r.RoutingVar]=!1}),e.$on("$stateChangeError",function(n,o,i,a,s,u){e[r.RoutingVar]=!1,t.error("Error while switching route to "+o.name),t.error(u)})}n.$inject=["$rootScope","$log","$state"],Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingVar="$routing",angular.module("pipRouting").run(n)},{}],6:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipRouting",["ui.router"]),e("./BackDecorator"),e("./RoutingEvents"),n(e("./BackDecorator")),n(e("./RoutingEvents"))},{"./BackDecorator":4,"./RoutingEvents":5}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IdentityRootVar="$identity",r.IdentityChangedEvent="pipIdentityChanged";var n=function(){function e(e,t,r,n){this._setRootVar=e,this._identity=t,this._rootScope=r,this._log=n,this.setRootVar()}return e.prototype.setRootVar=function(){this._setRootVar&&(this._rootScope[r.IdentityRootVar]=this._identity)},Object.defineProperty(e.prototype,"identity",{get:function(){return this._identity},set:function(e){this._identity=e,this.setRootVar(),this._rootScope.$emit(r.IdentityChangedEvent,this._identity);var t=e||{};this._log.debug("Changed identity to "+JSON.stringify(t))},enumerable:!0,configurable:!0}),e}(),o=function(){function e(){this._setRootVar=!0,this._identity=null,this._service=null}return Object.defineProperty(e.prototype,"setRootVar",{get:function(){return this._setRootVar},set:function(e){this._setRootVar=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identity",{get:function(){return this._identity},set:function(e){this._identity=e},enumerable:!0,configurable:!0}),e.prototype.$get=["$rootScope","$log",function(e,t){"ngInject";return null==this._service&&(this._service=new n(this._setRootVar,this._identity,e,t)),this._service}],e}();angular.module("pipSession").provider("pipIdentity",o)},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SessionRootVar="$session",r.SessionOpenedEvent="pipSessionOpened",r.SessionClosedEvent="pipSessionClosed";var n=e("async"),o=function(){function e(e,t,r,n){this.listeners={},this.notifyError=!1,this._setRootVar=e,this._session=t,this._rootScope=r,this._log=n,this.setRootVar()}return e.prototype.notifyListeners=function(e,t){if(!e)throw new Error("Event object missing 'type' property.");this.listeners[e]instanceof Array?n.each(this.listeners[e],function(e,t){e(t)},t):t()},e.prototype.notifyOpenListeners=function(e){var t=this;this.notifyListeners("open",function(r,n){r?(t._log.error(r),e(r)):e(null,n)})},e.prototype.notifyCloseListeners=function(e){var t=this;this.notifyListeners("close",function(r,n){r?(t._log.error(r),e(r)):e(null,n)})},e.prototype.setRootVar=function(){this._setRootVar&&(this._rootScope[r.SessionRootVar]=this._session)},e.prototype.start=function(e){this.setRootVar(),this._rootScope.$emit(r.SessionOpenedEvent,e),this._log.debug("Opened session "+e)},e.prototype.stop=function(){var e=this._session;this._session=null,this.setRootVar(),this._rootScope.$emit(r.SessionClosedEvent,e),this._log.debug("Closed session "+e)},e.prototype.addListener=function(e,t){void 0===this.listeners[e]&&(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.removeListener=function(e,t){if(this.listeners[e]instanceof Array)for(var r=this.listeners[e],n=0,o=r.length;n<o;n++)if(r[n]===t){r.splice(n,1);break}},e.prototype.addOpenListener=function(e){this.addListener("open",e)},e.prototype.addCloseListener=function(e){this.addListener("close",e)},e.prototype.removeOpenListener=function(e){this.removeListener("open",e)},e.prototype.removeCloseListener=function(e){this.removeListener("close",e)},Object.defineProperty(e.prototype,"session",{get:function(){return this._session},enumerable:!0,configurable:!0}),e.prototype.isOpened=function(){return null!=this._session},e.prototype.open=function(e){var t=this;if(null==e)throw new Error("Session cannot be null");this._session=e,this.notifyOpenListeners(function(r,n){r?t.stop():t.start(e)})},e.prototype.close=function(){var e=this;null!=this.session&&this.notifyCloseListeners(function(t,r){t||e.stop()})},e}(),i=function(){function e(){this._setRootVar=!0,this._session=null,this._service=null}return Object.defineProperty(e.prototype,"setRootVar",{get:function(){return this._setRootVar},set:function(e){this._setRootVar=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"session",{get:function(){return this._session},set:function(e){this._session=e},enumerable:!0,configurable:!0}),e.prototype.$get=["$rootScope","$log",function(e,t){"ngInject";return null==this._service&&(this._service=new o(this._setRootVar,this._session,e,t)),this._service}],e}();angular.module("pipSession").provider("pipSession",i)},{async:1}],9:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipSession",[]),e("./IdentityService"),e("./SessionService"),n(e("./IdentityService")),n(e("./SessionService"))},{"./IdentityService":7,"./SessionService":8}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./TransactionError"),o=function(){function e(e){this._scope=null,this._id=null,this._operation=null,this._error=new n.TransactionError,this._progress=0,this._scope=e}return Object.defineProperty(e.prototype,"scope",{get:function(){return this._scope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"operation",{get:function(){return this._operation},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{get:function(){return this._error.message},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this._id=null,this._operation=null,this._progress=0,this._error.reset()},e.prototype.busy=function(){return null!=this._id},e.prototype.failed=function(){return!this._error.empty()},e.prototype.aborted=function(e){return this._id!=e},e.prototype.begin=function(e){return null!=this._id?null:(this._id=(new Date).getTime().toString(),this._operation=e||"PROCESSING",this._error.reset(),this._id)},e.prototype.update=function(e){this._progress=Math.max(e,100)},e.prototype.abort=function(){this._id=null,this._error.reset()},e.prototype.end=function(e){this._error.decode(e),this._id=null},e}();r.Transaction=o},{"./TransactionError":11}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){null!=e&&this.decode(e)}return e.prototype.reset=function(){this.code=null,this.message=null,this.details=null,this.cause=null,this.stack_trace=null},e.prototype.empty=function(){return this.message=null},e.prototype.decode=function(e){this.reset(),null!=e&&(e.message&&(this.message=e.message),e.data&&(e.data.code&&(this.message=this.message||"ERROR_"+e.data.code,this.code=this.code||e.data.code),e.data.message&&(this.message=this.message||e.data.message),this.message=this.message||e.data,this.details=this.details||e.data,this.cause=e.data.cause,this.stack_trace=e.data.stack_trace,this.details=e.data.details),e.statusText&&(this.message=this.message||e.statusText),e.status&&(this.message=this.message||"ERROR_"+e.status,this.code=this.code||e.status),this.message=this.message||e,this.details=this.details||e)},e}();r.TransactionError=n},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./Transaction"),o=function(){function e(){this._transactions={}}return e.prototype.create=function(e){var t=new n.Transaction(e);return null!=e&&(this._transactions[e]=t),t},e.prototype.get=function(e){var t=null!=e?this._transactions[e]:null;return null==t&&(t=new n.Transaction(e),null!=e&&(this._transactions[e]=t)),t},e}();angular.module("pipTransaction").service("pipTransaction",o)},{"./Transaction":10}],13:[function(e,t,r){"use strict";function n(e){"ngInject";var t=e.has("pipTranslateProvider")?e.get("pipTranslateProvider"):null;t&&(t.setTranslations("en",{ENTERING:"Entering...",PROCESSING:"Processing...",LOADING:"Loading...",SAVING:"Saving..."}),t.setTranslations("ru",{ENTERING:"Вход в систему...",PROCESSING:"Обрабатывается...",LOADING:"Загружается...",SAVING:"Сохраняется..."}))}n.$inject=["$injector"],Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipTransaction").config(n)},{}],14:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipTransaction",[]),e("./TransactionStrings"),e("./TransactionError"),e("./Transaction"),e("./TransactionService"),n(e("./TransactionError")),n(e("./Transaction"))},{"./Transaction":10,"./TransactionError":11,"./TransactionService":12,"./TransactionStrings":13}],15:[function(e,t,r){"use strict";function n(e){"ngInject";return{restrict:"EA",scope:{key1:"@pipTranslate",key2:"@key"},link:function(t,r,n){var o=t.key1||t.key2,i=e.translate(o);r.text(i)}}}function o(e){"ngInject";return{restrict:"EA",scope:{key1:"@pipTranslateHtml",key2:"@key"},link:function(t,r,n){var o=t.key1||t.key2,i=e.translate(o);r.html(i)}}}n.$inject=["pipTranslate"],o.$inject=["pipTranslate"],Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipTranslate").directive("pipTranslate",n).directive("pipTranslateHtml",o)},{}],16:[function(e,t,r){"use strict";function n(e){"ngInject";return function(t){return e.translate(t)||t}}function o(e){"ngInject";var t=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return t?t.translate(e)||e:e}}n.$inject=["pipTranslate"],o.$inject=["$injector"],Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipTranslate").filter("translate",n)},{}],17:[function(e,t,r){"use strict";function n(e){e.language}n.$inject=["pipTranslate"];var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(r,"__esModule",{value:!0});var i=e("./Translation"),a=e("../utilities/PageResetService");r.LanguageRootVar="$language",r.LanguageChangedEvent="pipLanguageChanged";var s=function(){function e(e,t,r,n,o,i,a){this._setRootVar=t,this._persist=r,this._translation=e,this._rootScope=n,this._log=o,this._window=i,this._mdDateLocale=a,this._persist&&this._window.localStorage&&(this._translation.language=this._window.localStorage.getItem("language")||this._translation.language,this.changeLocale(this._translation.language)),this._log.debug("Set language to "+this._translation.language),this.save()}return e.prototype.changeLocale=function(e){if(e){var t;moment.locale(e),t=moment.localeData(),this._mdDateLocale.months=angular.isArray(t._months)?t._months:t._months.format,this._mdDateLocale.shortMonths=angular.isArray(t._monthsShort)?t._monthsShort:t._monthsShort.format,this._mdDateLocale.days=angular.isArray(t._weekdays)?t._weekdays:t._weekdays.format,this._mdDateLocale.shortDays=t._weekdaysMin,this._mdDateLocale.firstDayOfWeek=t._week.dow}},e.prototype.save=function(){this._setRootVar&&(this._rootScope[r.LanguageRootVar]=this._translation.language),this._persist&&null!=this._window.localStorage&&this._window.localStorage.setItem("language",this._translation.language)},Object.defineProperty(e.prototype,"language",{get:function(){return this._translation.language},set:function(e){e!=this._translation.language&&(this._translation.language=e,this._log.debug("Changing language to "+e),this.changeLocale(this._translation.language),this.save(),this._rootScope.$emit(r.LanguageChangedEvent,e),this._rootScope.$emit(a.ResetPageEvent))},enumerable:!0,configurable:!0}),e.prototype.use=function(e){return null!=e&&(this.language=e),this.language},e.prototype.setTranslations=function(e,t){return this._translation.setTranslations(e,t)},e.prototype.translations=function(e,t){return this._translation.setTranslations(e,t)},e.prototype.translate=function(e){return this._translation.translate(e)},e.prototype.translateArray=function(e){return this._translation.translateArray(e)},e.prototype.translateSet=function(e,t,r){return this._translation.translateSet(e,t,r)},e.prototype.translateObjects=function(e,t,r){return this._translation.translateObjects(e,t,r)},e.prototype.translateWithPrefix=function(e,t){return this._translation.translateWithPrefix(e,t)},e.prototype.translateSetWithPrefix=function(e,t,r,n){return this._translation.translateSetWithPrefix(e,t,r,n)},e.prototype.translateSetWithPrefix2=function(e,t,r,n){return this._translation.translateSetWithPrefix2(e,t,r,n)},e}(),u=function(e){function t(){var t=e.call(this)||this;return t._setRootVar=!0,t._persist=!0,t}return o(t,e),Object.defineProperty(t.prototype,"setRootVar",{get:function(){return this._setRootVar},set:function(e){this._setRootVar=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"persist",{get:function(){return this._persist},set:function(e){this._persist=!!e},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope","$log","$window","$mdDateLocale",function(e,t,r,n){"ngInject";return null==this._service&&(this._service=new s(this,this._setRootVar,this._persist,e,t,r,n)),this._service}],t}(i.Translation);angular.module("pipTranslate").provider("pipTranslate",u).run(n)},{"../utilities/PageResetService":22,"./Translation":18}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){this._language="en",this._translations={en:{en:"English",ru:"Russian",es:"Spanish",pt:"Portuguese",de:"German",fr:"French"},ru:{en:"Английский",ru:"Русский",es:"Испанский",pt:"Португальский",de:"Немецкий",fr:"Французский"}}}return Object.defineProperty(e.prototype,"language",{get:function(){return this._language},set:function(e){this._language=e},enumerable:!0,configurable:!0}),e.prototype.use=function(e){return null!=e&&(this._language=e),this._language},e.prototype.setTranslations=function(e,t){var r=this._translations[e]||{};this._translations[e]=_.extend(r,t)},e.prototype.translations=function(e,t){this.setTranslations(e,t)},e.prototype.translate=function(e){return _.isNull(e)||_.isUndefined(e)?"":(this._translations[this._language]||{})[e]||e},e.prototype.translateArray=function(e){if(_.isNull(e)||0==e.length)return[];var t=[],r=this._translations[this._language]||{};return _.each(e,function(e){var n=e||"";t.push(r[n]||n)}),t},e.prototype.translateSet=function(e,t,r){if(_.isNull(e)||0==e.length)return[];t=t||"id",r=r||"name";var n=[],o=this._translations[this._language]||{};return _.each(e,function(e){var i={};e=e||"",i[t]=e,i[r]=o[e]||e,n.push(i)}),n},e.prototype.translateObjects=function(e,t,r){if(_.isNull(e)||0==e.length)return[];t=t||"name",r=r||"nameLocal";var n=this._translations[this._language]||{};return _.each(e,function(e){var o=e[t]||"";e[r]=n[o]||o}),e},e.prototype.translateWithPrefix=function(e,t){return e=e?e+"_":"",null==(t=(e+t).replace(/ /g,"_").toUpperCase())?"":(this._translations[this._language]||{})[t]||t},e.prototype.translateSetWithPrefix=function(e,t,r,n){if(_.isNull(t)||0==t.length)return[];e=e?e.replace(/ /g,"_").toUpperCase():"",r=r||"id",n=n||"name";var o=[],i=this._translations[this._language]||{};return _.each(t,function(t){var a={};t=t||"",a[r]=t,a[n]=i[e+"_"+t]||t,o.push(a)}),o},e.prototype.translateSetWithPrefix2=function(e,t,r,n){if(_.isNull(t)||0==t.length)return[];r=r||"id",n=n||"name",e=e?e.replace(/ /g,"_").toUpperCase()+"_":"";var o=[],i=this._translations[this._language]||{};return _.each(t,function(t){var a={};t=t||"",a[r]=t,a[n]=i[e+t.replace(/ /g,"_").toUpperCase()]||e+t.replace(/ /g,"_").toUpperCase(),o.push(a)}),o},e}();r.Translation=n},{}],19:[function(e,t,r){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),angular.module("pipTranslate",[]),e("./Translation"),e("./TranslateService"),e("./TranslateFilter"),e("./TranslateDirective"),n(e("./Translation")),n(e("./TranslateService"))},{"./TranslateDirective":15,"./TranslateFilter":16,"./TranslateService":17,"./Translation":18}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.hash=function(e){if(null==e)return 0;for(var t=0,r=0;r<e.length;r++)t+=e.charCodeAt(r);return t},e.prototype.verification=function(){return Math.random().toString(36).substr(2,10).toUpperCase()},e}();angular.module("pipCodes",[]).service("pipCodes",n)},{}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){this.cache={}}return e.prototype.sample=function(e,t){if(!e||""==e)return"";var r=e.indexOf("\n");return r=r>=0?r:e.length,r=r<t?e.length:t,e.substring(0,r)},e.prototype.strRepeat=function(e,t){if(t<1)return"";for(var r="";t>0;)1&t&&(r+=e),t>>=1,e+=e;return r},e.prototype.getType=function(e){return toString.call(e).slice(8,-1).toLowerCase()},e.prototype.parseFormat=function(e){for(var t=e,r=[],n=[],o=0;t;){if(null!==(r=/^[^\x25]+/.exec(t)))n.push(r[0]);else if(null!==(r=/^\x25{2}/.exec(t)))n.push("%");else{if(null===(r=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("Unknown error");if(r[2]){o|=1;var i=[],a=r[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("Unknown error");for(i.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))i.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw new Error("Unknown error");i.push(s[1])}r[2]=i}else o|=2;if(3===o)throw new Error("Mixing positional and named placeholders is not (yet) supported");n.push(r)}t=t.substring(r[0].length)}return n},e.prototype.format=function(e,t){for(var r=0,n=e.length,o=[],i=0;i<n;i++){var a=this.getType(e[i]);if("string"===a)o.push(e[i]);else if("array"===a){var s=e[i],u=void 0;if(s[2]){u=t[r];for(var c=0;c<s[2].length;c++){if(!u.hasOwnProperty(s[2][c]))throw new Error(this.sprintf('Property "%s" does not exist',s[2][c]));u=u[s[2][c]]}}else u=s[1]?t[s[1]]:t[r++];if(/[^s]/.test(s[8])&&"number"!=this.getType(u))throw new Error(this.sprintf("Expecting number but found %s",this.getType(u)));switch(s[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=s[7]?u.toExponential(s[7]):u.toExponential();break;case"f":u=s[7]?parseFloat(u).toFixed(s[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&s[7]?u.substring(0,s[7]):u;break;case"u":u=Math.abs(u);break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(s[8])&&s[3]&&u>=0?"+"+u:u;var l=s[4]?"0"==s[4]?"0":s[4].charAt(1):" ",p=s[6]-String(u).length,f=s[6]?this.strRepeat(l,p):"";o.push(s[5]?u+f:f+u)}}return o.join("")},e.prototype.sprintf=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return this.cache.hasOwnProperty(e)||(this.cache[e]=this.parseFormat(e)),this.format(this.cache[e],t)},e.prototype.filterToString=function(e){if(null==e)return null;var t="";for(var r in e){t.length>0&&(t+=";");var n=e[r];t+=null!=n?r+"="+n:r}return t},e.prototype.arrayToString=function(e){var t="";if(null==e||0==e.length)return t;for(var r=0;r<e.length;r++)t.length>0&&(t+=","),t+=e[r];return t},e.prototype.enumToArray=function(e){var t,r=[];for(t in e)e.hasOwnProperty(t)&&r.push(e[t]);return r},e}();angular.module("pipFormat",[]).service("pipFormat",n)},{}],22:[function(e,t,r){"use strict";function n(e,t){e.$on(r.ResetPageEvent,function(){t.reset()}),e.$on(r.ResetAreaEvent,function(e,r){t.resetArea(r)})}n.$inject=["$rootScope","pipPageReset"],Object.defineProperty(r,"__esModule",{value:!0}),r.ResetPageEvent="pipResetPage",r.ResetAreaEvent="pipResetArea",r.ResetRootVar="$reset",r.ResetAreaRootVar="$resetArea";var o=function(){function e(e,t,n){this._rootScope=e,this._log=t,this._timeout=n,e[r.ResetRootVar]=!1,e[r.ResetAreaRootVar]=null}return e.$inject=["$rootScope","$log","$timeout"],e.prototype.reset=function(){this._log.debug("Resetting the entire page"),this.performReset(null)},e.prototype.resetArea=function(e){this._log.debug("Resetting the area "+e),this.performReset(e)},e.prototype.performReset=function(e){var t=this;this._rootScope[r.ResetRootVar]=null==e,this._rootScope[r.ResetAreaRootVar]=e,this._timeout(function(){t._rootScope[r.ResetRootVar]=!1,t._rootScope[r.ResetAreaRootVar]=null},0)},e}();angular.module("pipPageReset",[]).service("pipPageReset",o).run(n)},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.scrollTo=function(e,t,r){e&&t&&(void 0==r&&(r=300),setTimeout(function(){if($(t).position()){if(!(Math.abs($(e).scrollTop()-$(t).position().top)<20)){var n=$(e).scrollTop()+($(t).position().top-20);r>0&&$(e).animate({scrollTop:n+"px"},r)}}},100))},e}();angular.module("pipScroll",[]).service("pipScroll",n)},{}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e){"ngInject";this._window=e}return e.$inject=["$window"],Object.defineProperty(e.prototype,"browserName",{get:function(){var e=this._window.navigator.userAgent;return e.search(/Edge/)>-1?"edge":e.search(/MSIE/)>-1?"ie":e.search(/Trident/)>-1?"ie":e.search(/Firefox/)>-1?"firefox":e.search(/Opera/)>-1?"opera":e.search(/OPR/)>-1?"opera":e.search(/YaBrowser/)>-1?"yabrowser":e.search(/Chrome/)>-1?"chrome":e.search(/Safari/)>-1?"safari":e.search(/Maxthon/)>-1?"maxthon":"unknown"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"browserVersion",{get:function(){var e,t=this._window.navigator.userAgent,r=this.browserName;switch(r){case"edge":e=t.split("Edge")[1]?t.split("Edge")[1].split("/")[1]:null;break;case"ie":var n=t.split("MSIE ")[1]?t.split("MSIE ")[1]:t.split("Trident/")[1];e=n?n.split(";")[0]:null;break;case"ie11":r="ie",e=t.split("; rv:")[1]?t.split("; rv:")[1].split(")")[0]:null;break;case"firefox":e=t.split("Firefox/")[1];break;case"opera":e=t.search(/Opera/)>-1?t.split("Version/")[1]:t.split("OPR/")[1];break;case"yabrowser":e=t.split("YaBrowser/")[1]?t.split("YaBrowser/")[1].split(" ")[0]:null;break;case"chrome":e=t.split("Chrome/")[1]?t.split("Chrome/")[1].split(" ")[0]:null;break;case"safari":e=t.split("Safari/")[1]?t.split("Safari/")[1].split(" ")[0]:null;break;case"maxthon":e=t.split("Maxthon/")[1]}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"platform",{get:function(){return/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(this._window.navigator.userAgent.toLowerCase())?"mobile":"desktop"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"os",{get:function(){var e=this._window.navigator.userAgent;try{var t=(/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(e.toLowerCase())||[e])[0].replace("sunos","solaris"),r=/(android)/.exec(e.toLowerCase())||"";return!r||"android"!=r&&"android"!=r[0]?t:"android"}catch(e){return"unknown"}},enumerable:!0,configurable:!0}),e.prototype.isDesktop=function(){return"desktop"==this.platform},e.prototype.isMobile=function(){return"mobile"==this.platform},e.prototype.isCordova=function(){return!1},e.prototype.isSupported=function(e){e||(e={edge:12,ie:11,firefox:43,opera:35,chrome:47,safari:600});var t=this.browserName,r=this.browserVersion;return r=r.split(".")[0],t&&e[t]&&e[t],!0},e}();angular.module("pipSystemInfo",[]).service("pipSystemInfo",n)},{}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.normalizeOne=function(e){return e?_.trim(e.replace(/(_|#)+/g," ")):null},e.prototype.compressOne=function(e){return e?e.replace(/( |_|#)/g,"").toLowerCase():null},e.prototype.equal=function(e,t){return null==e&&null==t||null!=e&&null!=t&&this.compressOne(e)==this.compressOne(t)},e.prototype.normalizeAll=function(e){var t=this;return _.isString(e)&&(e=e.split(/( |,|;)+/)),e=_.map(e,function(e){return t.normalizeOne(e)})},e.prototype.compressAll=function(e){var t=this;return _.isString(e)&&(e=e.split(/( |,|;)+/)),e=_.map(e,function(e){return t.compressOne(e)})},e.prototype.extract=function(e,t){var r=this,n=this.normalizeAll(e.tags);return _.each(t,function(t){var o=e[t]||"";if(""!=o){var i=o.match(/#\w+/g);n=n.concat(r.normalizeAll(i))}}),_.uniq(n)},e}();angular.module("pipTags",[]).service("pipTags",n)},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){this.event=e,this.timeout=t}return e}(),o=[new n("pipAutoPullChanges",6e4),new n("pipAutoUpdatePage",15e3),new n("pipAutoUpdateCollection",3e5)],i=function(){function e(e,t,r){"ngInject";this._started=!1,this._events=_.cloneDeep(o),this._rootScope=e,this._log=t,this._interval=r}return e.$inject=["$rootScope","$log","$interval"],e.prototype.isStarted=function(){return this._started},e.prototype.addEvent=function(e,t){if(null==_.find(this._events,function(t){return t.event==e})){var r={event:e,timeout:t};this._events.push(r),this._started&&this.startEvent(r)}},e.prototype.removeEvent=function(e){for(var t=this._events.length-1;t>=0;t--){var r=this._events[t];r.event==e&&(this.stopEvent(r),this._events.splice(t,1))}},e.prototype.clearEvents=function(){this.stop(),this._events=[]},e.prototype.startEvent=function(e){var t=this;e.interval=this._interval(function(){t._log.debug("Generated timer event "+e.event),t._rootScope.$emit(e.event)},e.timeout)},e.prototype.stopEvent=function(e){if(null!=e.interval){try{this._interval.cancel(e.interval)}catch(e){}e.interval=null}},e.prototype.start=function(){var e=this;this._started||(_.each(this._events,function(t){e.startEvent(t)}),this._started=!0)},e.prototype.stop=function(){var e=this;_.each(this._events,function(t){e.stopEvent(t)}),this._started=!1},e}();angular.module("pipTimer",[]).service("pipTimer",i)},{}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),e("./Format"),e("./TimerService"),e("./ScrollService"),e("./Tags"),e("./Codes"),e("./SystemInfo"),e("./PageResetService")},{"./Codes":20,"./Format":21,"./PageResetService":22,"./ScrollService":23,"./SystemInfo":24,"./Tags":25,"./TimerService":26}]},{},[3])(3)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).buttons=t()}}(function(){return function t(e,n,i){function o(u,l){if(!n[u]){if(!e[u]){var r="function"==typeof require&&require;if(!l&&r)return r(u,!0);if(s)return s(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var a=n[u]={exports:{}};e[u][0].call(a.exports,function(t){var n=e[u][1][t];return o(n||t)},a,a.exports,t,e,n,i)}return n[u].exports}for(var s="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(t,e,n){function i(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}i.$inject=["$injector"],angular.module("pipButtons.Translate",[]).filter("translate",i)},{}],2:[function(t,e,n){function i(t,e){return{restrict:"A",scope:!1,controller:o}}i.$inject=["$parse","$timeout"];var o=function(){function t(t,e,n,i,o){"ngInject";var s=o(e.pipFabTooltipVisibility),u=o(e.pipFabShowTooltip),l=u.assign;n.$watch(s,function(t){_.isFunction(l)&&(t?i(function(){l(n,t)},600):l(n,t))})}return t.$inject=["$element","$attrs","$scope","$timeout","$parse"],t}();angular.module("pipFabTooltipVisibility",[]).directive("pipFabTooltipVisibility",i)},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t("./refresh_button/RefreshButton"),t("./toggle_buttons/ToggleButtons"),t("./fabs/FabTooltipVisibility"),angular.module("pipButtons",["pipToggleButtons","pipRefreshButton","pipFabTooltipVisibility"])},{"./fabs/FabTooltipVisibility":2,"./refresh_button/RefreshButton":4,"./toggle_buttons/ToggleButtons":5}],4:[function(t,e,n){var i={text:"<pipText",visible:"<pipVisible",onRefresh:"&?pipRefresh"},o=(function(){function t(){}}(),function(){function t(t,e,n){this.$scope=t,this.$element=e,this.$attrs=n}return t.prototype.$postLink=function(){this._buttonElement=this.$element.children(".md-button"),this._textElement=this._buttonElement.children(".pip-refresh-text"),this.show()},t.prototype.$onChanges=function(t){!0===t.visible.currentValue?(this.text=t.text.currentValue,this.show()):this.hide()},t.prototype.onClick=function(t){this.onRefresh&&this.onRefresh({$event:t})},t.prototype.show=function(){if(void 0!==this._textElement&&void 0!==this._buttonElement){this._textElement.text(this.text),this._buttonElement.show();var t=this._buttonElement.width();this._buttonElement.css("margin-left","-"+t/2+"px")}},t.prototype.hide=function(){this._buttonElement.hide()},t}()),s={bindings:i,controller:o,template:'<md-button class="pip-refresh-button" tabindex="-1" ng-click="$ctrl.onClick($event)" aria-label="REFRESH"><md-icon md-svg-icon="icons:refresh"></md-icon><span class="pip-refresh-text"></span></md-button>'};angular.module("pipRefreshButton",["ngMaterial"]).component("pipRefreshButton",s)},{}],5:[function(t,e,n){var i=(function(){function t(){}}(),{ngDisabled:"<?",buttons:"<pipButtons",currentButtonValue:"=ngModel",currentButton:"=?pipButtonObject",multiselect:"<?pipMultiselect",change:"&ngChange",onlyToggle:"<?pipOnlyToggle"}),o=(function(){function t(){}}(),function(){function t(t,e,n,i,o){"ngInject";this.$element=t,this.$attrs=e,this.$scope=n,this.$timeout=i,this.buttons=[],this.pipMedia=o.has("pipMedia")?o.get("pipMedia"):null,this.class=e.class||"";var s=_.indexOf(this.buttons,_.find(this.buttons,{id:this.currentButtonValue}));this.currentButtonIndex=s<0?0:s,this.currentButton=this.buttons.length>0?this.buttons[this.currentButtonIndex]:this.currentButton}return t.$inject=["$element","$attrs","$scope","$timeout","$injector"],t.prototype.$onChanges=function(t){this.multiselect=t.multiselect?t.multiselect.currentValue:this.multiselect,this.disabled=t.ngDisabled?t.ngDisabled.currentValue:this.disabled,this.onlyToggle=t.onlyToggle?t.onlyToggle.currentValue:this.onlyToggle,t.buttons&&(this.buttons=_.isArray(t.buttons.currentValue)&&0===t.buttons.currentValue.length?[]:t.buttons.currentValue);var e=_.indexOf(this.buttons,_.find(this.buttons,{id:this.currentButtonValue}));this.currentButtonIndex=e<0?0:e,this.currentButton=this.buttons.length>0?this.buttons[this.currentButtonIndex]:this.currentButton},t.prototype.$postLink=function(){var t=this;this.$element.on("focusin",function(){t.$element.addClass("focused-container")}).on("focusout",function(){t.$element.removeClass("focused-container")})},t.prototype.buttonSelected=function(t){var e=this;this.disabled||(this.currentButtonIndex=t,this.currentButton=this.buttons[this.currentButtonIndex],this.currentButtonValue=this.currentButton.id||t,this.$timeout(function(){e.change&&e.change()}))},t.prototype.enterSpacePress=function(t){this.buttonSelected(t.index)},t.prototype.highlightButton=function(t){return!this.multiselect||_.isUndefined(this.currentButton.level)||_.isUndefined(this.buttons[t].level)?this.currentButtonIndex==t:this.currentButton.level>=this.buttons[t].level},t}()),s={bindings:i,templateUrl:"toggle_buttons/ToggleButtons.html",controller:o};angular.module("pipToggleButtons",["pipButtons.Templates"]).component("pipToggleButtons",s)},{}],6:[function(t,e,n){!function(t){try{t=angular.module("pipButtons.Templates")}catch(e){t=angular.module("pipButtons.Templates",[])}t.run(["$templateCache",function(t){t.put("toggle_buttons/ToggleButtons.html",'<div class="pip-toggle-buttons layout-row {{$ctrl.class}}" pip-selected="$ctrl.bufButtonIndex" pip-enter-space-press="$ctrl.enterSpacePress($event)" ng-if="!$ctrl.pipMedia(\'xs\') || $ctrl.onlyToggle"><md-button tabindex="-1" ng-repeat="button in $ctrl.buttons" ng-class="{\'md-accent md-raised selected color-accent-bg\' : $ctrl.highlightButton($index)}" ng-attr-style="{{ \'background-color:\' + ($ctrl.highlightButton($index) ? button.backgroundColor : \'\') + \'!important\' }}" class="pip-selectable pip-chip-button flex" ng-click="$ctrl.buttonSelected($index, $event)" ng-disabled="button.disabled || $ctrl.disabled">{{button.name || button.title | translate}} <span ng-if="button.checked || button.complete || button.filled" class="pip-tagged">*</span></md-button></div><md-input-container class="md-block" ng-if="$ctrl.pipMedia(\'xs\') && !$ctrl.onlyToggle"><md-select ng-model="$ctrl.currentButtonIndex" ng-disabled="$ctrl.disabled" aria-label="DROPDOWN" md-on-close="$ctrl.buttonSelected($ctrl.currentButtonIndex)"><md-option ng-repeat="action in $ctrl.buttons" value="{{ ::$index }}">{{ (action.title || action.name) | translate }} <span ng-if="action.checked || action.complete || action.filled" class="pip-tagged">*</span></md-option></md-select></md-input-container>')}])}()},{}]},{},[6,1,2,3,4,5])(6)});


!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(n.pip||(n.pip={})).cache=e()}}(function(){var e;return function e(n,t,r){function o(u,a){if(!t[u]){if(!n[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(i)return i(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=t[u]={exports:{}};n[u][0].call(l.exports,function(e){var t=n[u][1][e];return o(t||e)},l,l.exports,e,n,t,r)}return t[u].exports}for(var i="function"==typeof require&&require,u=0;u<r.length;u++)o(r[u]);return o}({1:[function(n,t,r){(function(n){!function(n,o){"object"==typeof r&&void 0!==t?t.exports=o():"function"==typeof e&&e.amd?e(o):n.Dexie=o()}(this,function(){"use strict";function e(e,n){return"object"!=typeof n?e:(Ae(n).forEach(function(t){e[t]=n[t]}),e)}function t(e,n){return Ke.call(e,n)}function r(e,n){"function"==typeof n&&(n=n(Me(e))),Ae(n).forEach(function(t){o(e,t,n[t])})}function o(n,r,o,i){Ne(n,r,e(o&&t(o,"get")&&"function"==typeof o.get?{get:o.get,set:o.set,configurable:!0}:{value:o,configurable:!0,writable:!0},i))}function i(e){return{from:function(n){return e.prototype=Object.create(n.prototype),o(e.prototype,"constructor",e),{extend:r.bind(null,e.prototype)}}}}function u(e,n){var t,r=Re(e,n);return r||(t=Me(e))&&u(t,n)}function a(e,n,t){return Be.call(e,n,t)}function s(e,n){return n(e)}function c(e){if(!e)throw new Error("Assertion Failed")}function l(e){Te.setImmediate?setImmediate(e):setTimeout(e,0)}function f(e,n){return e.reduce(function(e,t,r){var o=n(t,r);return o&&(e[o[0]]=o[1]),e},{})}function h(e,n){return function(){try{e.apply(this,arguments)}catch(e){n(e)}}}function d(e,n,t){try{e.apply(null,t)}catch(e){n&&n(e)}}function p(e,n){if(t(e,n))return e[n];if(!n)return e;if("string"!=typeof n){for(var r=[],o=0,i=n.length;o<i;++o){var u=p(e,n[o]);r.push(u)}return r}var a=n.indexOf(".");if(-1!==a){var s=e[n.substr(0,a)];return void 0===s?void 0:p(s,n.substr(a+1))}}function v(e,n,t){if(e&&void 0!==n&&!("isFrozen"in Object&&Object.isFrozen(e)))if("string"!=typeof n&&"length"in n){c("string"!=typeof t&&"length"in t);for(var r=0,o=n.length;r<o;++r)v(e,n[r],t[r])}else{var i=n.indexOf(".");if(-1!==i){var u=n.substr(0,i),a=n.substr(i+1);if(""===a)void 0===t?delete e[u]:e[u]=t;else{var s=e[u];s||(s=e[u]={}),v(s,a,t)}}else void 0===t?delete e[n]:e[n]=t}}function g(e,n){"string"==typeof n?v(e,n,void 0):"length"in n&&[].map.call(n,function(n){v(e,n,void 0)})}function m(e){var n={};for(var r in e)t(e,r)&&(n[r]=e[r]);return n}function y(e){return Fe.apply([],e)}function b(e){if(!e||"object"!=typeof e)return e;var n;if(Se(e)){n=[];for(var r=0,o=e.length;r<o;++r)n.push(b(e[r]))}else if(Le.indexOf(e.constructor)>=0)n=e;else{n=e.constructor?Object.create(e.constructor.prototype):{};for(var i in e)t(e,i)&&(n[i]=b(e[i]))}return n}function w(e,n,r,o){return r=r||{},o=o||"",Ae(e).forEach(function(i){if(t(n,i)){var u=e[i],a=n[i];"object"==typeof u&&"object"==typeof a&&u&&a&&""+u.constructor==""+a.constructor?w(u,a,r,o+i+"."):u!==a&&(r[o+i]=n[i])}else r[o+i]=void 0}),Ae(n).forEach(function(i){t(e,i)||(r[o+i]=n[i])}),r}function _(e){var n,t,r,o;if(1===arguments.length){if(Se(e))return e.slice();if(this===Ve&&"string"==typeof e)return[e];if(o=Ue(e)){for(t=[];r=o.next(),!r.done;)t.push(r.value);return t}if(null==e)return[e];if("number"==typeof(n=e.length)){for(t=new Array(n);n--;)t[n]=e[n];return t}return[e]}for(n=arguments.length,t=new Array(n);n--;)t[n]=arguments[n];return t}function x(e,n){We=e,ze=n}function k(){if(Ge)try{throw k.arguments,new Error}catch(e){return e}return new Error}function P(e,n){var t=e.stack;return t?(n=n||0,0===t.indexOf(e.name)&&(n+=(e.name+e.message).split("\n").length),t.split("\n").slice(n).filter(ze).map(function(e){return"\n"+e}).join("")):""}function E(e,n){return function(){return console.warn(e+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+P(k(),1)),n.apply(this,arguments)}}function O(e,n){this._e=k(),this.name=e,this.message=n}function j(e,n){return e+". Errors: "+n.map(function(e){return e.toString()}).filter(function(e,n,t){return t.indexOf(e)===n}).join("\n")}function D(e,n,t,r){this._e=k(),this.failures=n,this.failedKeys=r,this.successCount=t}function C(e,n){this._e=k(),this.name="BulkError",this.failures=n,this.message=j(e,n)}function I(e,n){if(!e||e instanceof O||e instanceof TypeError||e instanceof SyntaxError||!e.name||!en[e.name])return e;var t=new en[e.name](n||e.message,e);return"stack"in e&&o(t,"stack",{get:function(){return this.inner.stack}}),t}function A(){}function S(e){return e}function T(e,n){return null==e||e===S?n:function(t){return n(e(t))}}function M(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}function K(e,n){return e===A?n:function(){var t=e.apply(this,arguments);void 0!==t&&(arguments[0]=t);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var i=n.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?M(r,this.onsuccess):r),o&&(this.onerror=this.onerror?M(o,this.onerror):o),void 0!==i?i:t}}function N(e,n){return e===A?n:function(){e.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,n.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?M(t,this.onsuccess):t),r&&(this.onerror=this.onerror?M(r,this.onerror):r)}}function R(n,t){return n===A?t:function(r){var o=n.apply(this,arguments);e(r,o);var i=this.onsuccess,u=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?M(i,this.onsuccess):i),u&&(this.onerror=this.onerror?M(u,this.onerror):u),void 0===o?void 0===a?void 0:a:e(o,a)}}function B(e,n){return e===A?n:function(){return!1!==n.apply(this,arguments)&&e.apply(this,arguments)}}function F(e,n){return e===A?n:function(){var t=e.apply(this,arguments);if(t&&"function"==typeof t.then){for(var r=this,o=arguments.length,i=new Array(o);o--;)i[o]=arguments[o];return t.then(function(){return n.apply(r,i)})}return n.apply(this,arguments)}}function L(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=A,this._lib=!1;var n=this._PSD=Pn;if(We&&(this._stackHolder=k(),this._prev=null,this._numPrev=0),"function"!=typeof e){if(e!==tn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&V(this,this._value))}this._state=null,this._value=null,++n.ref,U(this,e)}function q(e,n,t,r,o){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.resolve=t,this.reject=r,this.psd=o}function U(e,n){try{n(function(n){if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var t=e._lib&&J();n&&"function"==typeof n.then?U(e,function(e,t){n instanceof L?n._then(e,t):n.then(e,t)}):(e._state=!0,e._value=n,W(e)),t&&Y()}},V.bind(null,e))}catch(n){V(e,n)}}function V(e,n){if(wn.push(n),null===e._state){var t=e._lib&&J();n=xn(n),e._state=!1,e._value=n,We&&null!==n&&"object"==typeof n&&!n._promise&&d(function(){var t=u(n,"stack");n._promise=e,o(n,"stack",{get:function(){return pn?t&&(t.get?t.get.apply(n):t.value):e.stack}})}),ee(e),W(e),t&&Y()}}function W(e){var n=e._listeners;e._listeners=[];for(var t=0,r=n.length;t<r;++t)z(e,n[t]);var o=e._PSD;--o.ref||o.finalize(),0===On&&(++On,gn(function(){0==--On&&X()},[]))}function z(e,n){if(null===e._state)return void e._listeners.push(n);var t=e._state?n.onFulfilled:n.onRejected;if(null===t)return(e._state?n.resolve:n.reject)(e._value);++n.psd.ref,++On,gn(G,[t,e,n])}function G(e,n,t){try{_n=n;var r,o=n._value;n._state?r=e(o):(wn.length&&(wn=[]),r=e(o),-1===wn.indexOf(o)&&ne(n)),t.resolve(r)}catch(e){t.reject(e)}finally{_n=null,0==--On&&X(),--t.psd.ref||t.psd.finalize()}}function Q(e,n,t){if(n.length===t)return n;var r="";if(!1===e._state){var o,i,u=e._value;null!=u?(o=u.name||"Error",i=u.message||u,r=P(u,0)):(o=u,i=""),n.push(o+(i?": "+i:"")+r)}return We&&(r=P(e._stackHolder,2),r&&-1===n.indexOf(r)&&n.push(r),e._prev&&Q(e._prev,n,t)),n}function $(e,n){var t=n?n._numPrev+1:0;t<rn&&(e._prev=n,e._numPrev=t)}function H(){J()&&Y()}function J(){var e=mn;return mn=!1,yn=!1,e}function Y(){var e,n,t;do{for(;En.length>0;)for(e=En,En=[],t=e.length,n=0;n<t;++n){var r=e[n];r[0].apply(null,r[1])}}while(En.length>0);mn=!0,yn=!0}function X(){var e=bn;bn=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var n=jn.slice(0),t=n.length;t;)n[--t]()}function Z(e){function n(){e(),jn.splice(jn.indexOf(n),1)}jn.push(n),++On,gn(function(){0==--On&&X()},[])}function ee(e){bn.some(function(n){return n._value===e._value})||bn.push(e)}function ne(e){for(var n=bn.length;n;)if(bn[--n]._value===e._value)return void bn.splice(n,1)}function te(e){return new L(tn,!1,e)}function re(e,n){var t=Pn;return function(){var r=J(),o=Pn;try{return le(t,!0),e.apply(this,arguments)}catch(e){n&&n(e)}finally{le(o,!1),r&&Y()}}}function oe(n,t,r,o){var i=Pn,u=Object.create(i);u.parent=i,u.ref=0,u.global=!1,u.id=++Kn;var a=kn.env;u.env=dn?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,resolve:L.resolve,reject:L.reject,nthen:ve(a.nthen,u),gthen:ve(a.gthen,u)}:{},t&&e(u,t),++i.ref,u.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=he(u,n,r,o);return 0===u.ref&&u.finalize(),s}function ie(){return In.id||(In.id=++An),++In.awaits,In.echoes+=on,In.id}function ue(e){!In.awaits||e&&e!==In.id||(0==--In.awaits&&(In.id=0),In.echoes=In.awaits*on)}function ae(e){return In.echoes&&e&&e.constructor===fn?(ie(),e.then(function(e){return ue(),e},function(e){return ue(),Rn(e)})):e}function se(e){++Mn,In.echoes&&0!=--In.echoes||(In.echoes=In.id=0),Sn.push(Pn),le(e,!0)}function ce(){var e=Sn[Sn.length-1];Sn.pop(),le(e,!1)}function le(e,n){var t=Pn;if((n?!In.echoes||Tn++&&e===Pn:!Tn||--Tn&&e===Pn)||de(n?se.bind(null,e):ce),e!==Pn&&(Pn=e,t===kn&&(kn.env=fe()),dn)){var r=kn.env.Promise,o=e.env;sn.then=o.nthen,r.prototype.then=o.gthen,(t.global||e.global)&&(Object.defineProperty(Te,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject)}}function fe(){var e=Te.Promise;return dn?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(Te,"Promise"),all:e.all,race:e.race,resolve:e.resolve,reject:e.reject,nthen:sn.then,gthen:e.prototype.then}:{}}function he(e,n,t,r,o){var i=Pn;try{return le(e,!0),n(t,r,o)}finally{le(i,!1)}}function de(e){ln.call(an,e)}function pe(e,n,t){return"function"!=typeof e?e:function(){var r=Pn;t&&ie(),le(n,!0);try{return e.apply(this,arguments)}finally{le(r,!1)}}}function ve(e,n){return function(t,r){return e.call(this,pe(t,n,!1),pe(r,n,!1))}}function ge(n,t){var r;try{r=t.onuncatched(n)}catch(e){}if(!1!==r)try{var o,i={promise:t,reason:n};if(Te.document&&document.createEvent?(o=document.createEvent("Event"),o.initEvent(Nn,!0,!0),e(o,i)):Te.CustomEvent&&(o=new CustomEvent(Nn,{detail:i}),e(o,i)),o&&Te.dispatchEvent&&(dispatchEvent(o),!Te.PromiseRejectionEvent&&Te.onunhandledrejection))try{Te.onunhandledrejection(o)}catch(e){}o.defaultPrevented||console.warn("Unhandled rejection: "+(n.stack||n))}catch(e){}}function me(e){function n(e,n,i){if("object"==typeof e)return t(e);n||(n=B),i||(i=A);var u={subscribers:[],fire:i,subscribe:function(e){-1===u.subscribers.indexOf(e)&&(u.subscribers.push(e),u.fire=n(u.fire,e))},unsubscribe:function(e){u.subscribers=u.subscribers.filter(function(n){return n!==e}),u.fire=u.subscribers.reduce(n,i)}};return r[e]=o[e]=u,u}function t(e){Ae(e).forEach(function(t){var r=e[t];if(Se(r))n(t,e[t][0],e[t][1]);else{if("asap"!==r)throw new Ze.InvalidArgument("Invalid event config");var o=n(t,S,function(){for(var e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];o.subscribers.forEach(function(e){l(function(){e.apply(null,n)})})})}})}var r={},o=function(n,t){if(t){for(var o=arguments.length,i=new Array(o-1);--o;)i[o-1]=arguments[o];return r[n].subscribe.apply(null,i),e}if("string"==typeof n)return r[n]};o.addEventType=n;for(var i=1,u=arguments.length;i<u;++i)n(arguments[i]);return o}function ye(n,i){function u(e){this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function l(e,n,t){var r=Xe._createTransaction(Ye,Ue,Le);r.create(n),r._completion.catch(t);var o=r._reject.bind(r);oe(function(){Pn.trans=r,0===e?(Ae(Le).forEach(function(e){P(n,e,Le[e].primKey,Le[e].indexes)}),L.follow(function(){return Xe.on.populate.fire(r)}).catch(o)):g(e,r,n).catch(o)})}function g(e,n,t){function r(){return o.length?L.resolve(o.shift()(n.idbtrans)).then(r):L.resolve()}var o=[],i=qe.filter(function(n){return n._cfg.version===e})[0];if(!i)throw new Ze.Upgrade("Dexie specification of currently installed DB version is missing");Le=Xe._dbSchema=i._cfg.dbschema;var u=!1;return qe.filter(function(n){return n._cfg.version>e}).forEach(function(e){o.push(function(){var r=Le,o=e._cfg.dbschema;de(r,t),de(o,t),Le=Xe._dbSchema=o;var i=x(r,o);if(i.add.forEach(function(e){P(t,e[0],e[1].primKey,e[1].indexes)}),i.change.forEach(function(e){if(e.recreate)throw new Ze.Upgrade("Not yet support for changing primary key");var n=t.objectStore(e.name);e.add.forEach(function(e){I(n,e)}),e.change.forEach(function(e){n.deleteIndex(e.name),I(n,e)}),e.del.forEach(function(e){n.deleteIndex(e)})}),e._cfg.contentUpgrade)return u=!0,L.follow(function(){e._cfg.contentUpgrade(n)})}),o.push(function(n){u&&Gn||j(e._cfg.dbschema,n)})}),r().then(function(){O(Le,t)})}function x(e,n){var t={del:[],add:[],change:[]};for(var r in e)n[r]||t.del.push(r);for(r in n){var o=e[r],i=n[r];if(o){var u={name:r,def:i,recreate:!1,del:[],add:[],change:[]};if(o.primKey.src!==i.primKey.src)u.recreate=!0,t.change.push(u);else{var a=o.idxByName,s=i.idxByName;for(var c in a)s[c]||u.del.push(c);for(c in s){var l=a[c],f=s[c];l?l.src!==f.src&&u.change.push(f):u.add.push(f)}(u.del.length>0||u.add.length>0||u.change.length>0)&&t.change.push(u)}}else t.add.push([r,i])}return t}function P(e,n,t,r){var o=e.db.createObjectStore(n,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach(function(e){I(o,e)}),o}function O(e,n){Ae(e).forEach(function(t){n.db.objectStoreNames.contains(t)||P(n,t,e[t].primKey,e[t].indexes)})}function j(e,n){for(var t=0;t<n.db.objectStoreNames.length;++t){var r=n.db.objectStoreNames[t];null==e[r]&&n.db.deleteObjectStore(r)}}function I(e,n){e.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multi})}function M(e,n,t){if(Je||Pn.letThrough){var r=Xe._createTransaction(e,n,Le);try{r.create()}catch(e){return Rn(e)}return r._promise(e,function(e,n){return oe(function(){return Pn.trans=r,t(e,n,r)})}).then(function(e){return r._completion.then(function(){return e})})}if(!$e){if(!Re)return Rn(new Ze.DatabaseClosed);Xe.open().catch(A)}return en.then(function(){return M(e,n,t)})}function B(e,n,t){var r=arguments.length;if(r<2)throw new Ze.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];return t=o.pop(),[e,y(o),t]}function q(e,n,t){this.name=e,this.schema=n,this._tx=t,this.hook=ze[e]?ze[e].hook:me(null,{creating:[K,A],reading:[T,S],updating:[R,A],deleting:[N,A]})}function U(e,n,t){return(t?Pe:xe)(function(t){e.push(t),n&&n()})}function V(e,n,t,r,o){return new L(function(i,u){var a=t.length,s=a-1;if(0===a)return i();if(r){var c,l=Pe(u),f=_e(null);d(function(){for(var r=0;r<a;++r){c={onsuccess:null,onerror:null};var u=t[r];o.call(c,u[0],u[1],n);var h=e.delete(u[0]);h._hookCtx=c,h.onerror=l,h.onsuccess=r===s?_e(i):f}},function(e){throw c.onerror&&c.onerror(e),e})}else for(var h=0;h<a;++h){var p=e.delete(t[h]);p.onerror=xe(u),h===s&&(p.onsuccess=re(function(){return i()}))}})}function W(e,n,t,r){var o=this;this.db=Xe,this.mode=e,this.storeNames=n,this.idbtrans=null,this.on=me(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new L(function(e,n){o._resolve=e,o._reject=n}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(e){var n=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):n&&o.idbtrans&&o.idbtrans.abort(),Rn(e)})}function z(e,n,t){this._ctx={table:e,index:":id"===n?null:n,or:t}}function G(e,n){var t=null,r=null;if(n)try{t=n()}catch(e){r=e}var o=e._ctx,i=o.table;this._ctx={table:i,index:o.index,isPrimKey:!o.index||i.schema.primKey.keyPath&&o.index===i.schema.primKey.name,range:t,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:o.or,valueMapper:i.hook.reading.fire}}function Q(e,n){return!(e.filter||e.algorithm||e.or)&&(n?e.justLimit:!e.replayFilter)}function $(e,n){return e._cfg.version-n._cfg.version}function H(e,n,t){n.forEach(function(n){var r=t[n];e.forEach(function(e){n in e||(e===W.prototype||e instanceof W?o(e,n,{get:function(){return this.table(n)}}):e[n]=new q(n,r))})})}function J(e){e.forEach(function(e){for(var n in e)e[n]instanceof q&&delete e[n]})}function Y(e,n,t,r,o,i){var u=i?function(e,n,r){return t(i(e),n,r)}:t,a=re(u,o);e.onerror||(e.onerror=xe(o)),e.onsuccess=n?h(function(){var t=e.result;if(t){var i=function(){t.continue()};n(t,function(e){i=e},r,o)&&a(t.value,t,function(e){i=e}),i()}else r()},o):h(function(){var n=e.result;if(n){var t=function(){n.continue()};a(n.value,n,function(e){t=e}),t()}else r()},o)}function X(e){var n=[];return e.split(",").forEach(function(e){e=e.trim();var t=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(t)?t.match(/^\[(.*)\]$/)[1].split("+"):t;n.push(new je(t,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),Se(r),/\./.test(e)))}),n}function Z(e,n){return Be.cmp(e,n)}function ee(e,n){return Z(e,n)<0?e:n}function ne(e,n){return Z(e,n)>0?e:n}function te(e,n){return Be.cmp(e,n)}function ae(e,n){return Be.cmp(n,e)}function se(e,n){return e<n?-1:e===n?0:1}function ce(e,n){return e>n?-1:e===n?0:1}function le(e,n){return e?n?function(){return e.apply(this,arguments)&&n.apply(this,arguments)}:e:n}function fe(){if(Xe.verno=Ge.version/10,Xe._dbSchema=Le={},Ue=a(Ge.objectStoreNames,0),0!==Ue.length){var e=Ge.transaction(Ce(Ue),"readonly");Ue.forEach(function(n){for(var t=e.objectStore(n),r=t.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf("."),i=new je(r,r||"",!1,!1,!!t.autoIncrement,r&&"string"!=typeof r,o),u=[],a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]);r=s.keyPath,o=r&&"string"==typeof r&&-1!==r.indexOf(".");var c=new je(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r,o);u.push(c)}Le[n]=new De(n,i,u,{})}),H([ze],Ae(Le),Le)}}function de(e,n){for(var t=n.db.objectStoreNames,r=0;r<t.length;++r){var o=t[r],i=n.objectStore(o);be="getAll"in i;for(var u=0;u<i.indexNames.length;++u){var s=i.indexNames[u],c=i.index(s).keyPath,l="string"==typeof c?c:"["+a(c).join("+")+"]";if(e[o]){var f=e[o].idxByName[l];f&&(f.name=s)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&Te.WorkerGlobalScope&&Te instanceof Te.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(be=!1)}function pe(e){Xe.on("blocked").fire(e),Wn.filter(function(e){return e.name===Xe.name&&e!==Xe&&!e._vcFired}).map(function(n){return n.on("versionchange").fire(e)})}var ve,ge,be,Me=ye.dependencies,Ke=e({addons:ye.addons,autoOpen:!0,indexedDB:Me.indexedDB,IDBKeyRange:Me.IDBKeyRange},i),Ne=Ke.addons,Re=Ke.autoOpen,Be=Ke.indexedDB,Fe=Ke.IDBKeyRange,Le=this._dbSchema={},qe=[],Ue=[],ze={},Ge=null,Qe=null,$e=!1,He=null,Je=!1,Ye="readwrite",Xe=this,en=new L(function(e){ve=e}),nn=new L(function(e,n){ge=n}),tn=!0,rn=!!Ie(Be);this.version=function(e){if(Ge||$e)throw new Ze.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var n=qe.filter(function(n){return n._cfg.version===e})[0];return n||(n=new u(e),qe.push(n),qe.sort($),tn=!1,n)},e(u.prototype,{stores:function(n){this._cfg.storesSource=this._cfg.storesSource?e(this._cfg.storesSource,n):n;var t={};qe.forEach(function(n){e(t,n._cfg.storesSource)});var r=this._cfg.dbschema={};return this._parseStoresSpec(t,r),Le=Xe._dbSchema=r,J([ze,Xe,W.prototype]),H([ze,Xe,W.prototype,this._cfg.tables],Ae(r),r),Ue=Ae(r),this},upgrade:function(e){return this._cfg.contentUpgrade=e,this},_parseStoresSpec:function(e,n){Ae(e).forEach(function(t){if(null!==e[t]){var r={},o=X(e[t]),i=o.shift();if(i.multi)throw new Ze.Schema("Primary key cannot be multi-valued");i.keyPath&&v(r,i.keyPath,i.auto?0:i.keyPath),o.forEach(function(e){if(e.auto)throw new Ze.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new Ze.Schema("Index must have a name and cannot be an empty string");v(r,e.keyPath,e.compound?e.keyPath.map(function(){return""}):"")}),n[t]=new De(t,i,o,r)}})}}),this._allTables=ze,this._createTransaction=function(e,n,t,r){return new W(e,n,t,r)},this._whenReady=function(e){return Je||Pn.letThrough?e():new L(function(e,n){if(!$e){if(!Re)return void n(new Ze.DatabaseClosed);Xe.open().catch(A)}en.then(e,n)}).then(e)},this.verno=0,this.open=function(){if($e||Ge)return en.then(function(){return Qe?Rn(Qe):Xe});We&&(nn._stackHolder=k()),$e=!0,Qe=null,Je=!1;var e=ve,t=null;return L.race([nn,new L(function(e,r){if(!Be)throw new Ze.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=tn?Be.open(n):Be.open(n,Math.round(10*Xe.verno));if(!o)throw new Ze.MissingAPI("IndexedDB API not available");o.onerror=xe(r),o.onblocked=re(pe),o.onupgradeneeded=re(function(e){if(t=o.transaction,tn&&!Xe._allowEmptyDB){o.onerror=Ee,t.abort(),o.result.close();var i=Be.deleteDatabase(n);i.onsuccess=i.onerror=re(function(){r(new Ze.NoSuchDatabase("Database "+n+" doesnt exist"))})}else{t.onerror=xe(r);l((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,t,r)}},r),o.onsuccess=re(function(){if(t=null,Ge=o.result,Wn.push(Xe),tn)fe();else if(Ge.objectStoreNames.length>0)try{de(Le,Ge.transaction(Ce(Ge.objectStoreNames),"readonly"))}catch(e){}Ge.onversionchange=re(function(e){Xe._vcFired=!0,Xe.on("versionchange").fire(e)}),rn||"__dbnames"===n||Cn.dbnames.put({name:n}).catch(A),e()},r)})]).then(function(){return He=[],L.resolve(ye.vip(Xe.on.ready.fire)).then(function e(){if(He.length>0){var n=He.reduce(F,A);return He=[],L.resolve(ye.vip(n)).then(e)}})}).finally(function(){He=null}).then(function(){return $e=!1,Xe}).catch(function(e){try{t&&t.abort()}catch(e){}return $e=!1,Xe.close(),Qe=e,Rn(Qe)}).finally(function(){Je=!0,e()})},this.close=function(){var e=Wn.indexOf(Xe);if(e>=0&&Wn.splice(e,1),Ge){try{Ge.close()}catch(e){}Ge=null}Re=!1,Qe=new Ze.DatabaseClosed,$e&&ge(Qe),en=new L(function(e){ve=e}),nn=new L(function(e,n){ge=n})},this.delete=function(){var e=arguments.length>0;return new L(function(t,r){function o(){Xe.close();var e=Be.deleteDatabase(n);e.onsuccess=re(function(){rn||Cn.dbnames.delete(n).catch(A),t()}),e.onerror=xe(r),e.onblocked=pe}if(e)throw new Ze.InvalidArgument("Arguments not allowed in db.delete()");$e?en.then(o):o()})},this.backendDB=function(){return Ge},this.isOpen=function(){return null!==Ge},this.hasBeenClosed=function(){return Qe&&Qe instanceof Ze.DatabaseClosed},this.hasFailed=function(){return null!==Qe},this.dynamicallyOpened=function(){return tn},this.name=n,r(this,{tables:{get:function(){return Ae(ze).map(function(e){return ze[e]})}}}),this.on=me(this,"populate","blocked","versionchange",{ready:[F,A]}),this.on.ready.subscribe=s(this.on.ready.subscribe,function(e){return function(n,t){ye.vip(function(){Je?(Qe||L.resolve().then(n),t&&e(n)):He?(He.push(n),t&&e(n)):(e(n),t||e(function e(){Xe.on.ready.unsubscribe(n),Xe.on.ready.unsubscribe(e)}))})}}),this.transaction=function(){var e=B.apply(this,arguments);return this._transaction.apply(this,e)},this._transaction=function(e,n,t){function r(){return L.resolve().then(function(){var n=Pn.transless||Pn,r=Xe._createTransaction(e,u,Le,o),i={trans:r,transless:n};o?r.idbtrans=o.idbtrans:r.create(),t.constructor===hn&&ie();var a,s=L.follow(function(){if(a=t.call(r,r))if(a.constructor===fn){var e=ue.bind(null,null);a.then(e,e)}else"function"==typeof a.next&&"function"==typeof a.throw&&(a=Oe(a))},i);return(a&&"function"==typeof a.then?L.resolve(a).then(function(e){return r.active?e:Rn(new Ze.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):s.then(function(){return a})).then(function(e){return o&&r._resolve(),r._completion.then(function(){return e})}).catch(function(e){return r._reject(e),Rn(e)})})}var o=Pn.trans;o&&o.db===Xe&&-1===e.indexOf("!")||(o=null);var i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{var u=n.map(function(e){var n=e instanceof q?e.name:e;if("string"!=typeof n)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return n});if("r"==e||"readonly"==e)e="readonly";else{if("rw"!=e&&e!=Ye)throw new Ze.InvalidArgument("Invalid transaction mode: "+e);e=Ye}if(o){if("readonly"===o.mode&&e===Ye){if(!i)throw new Ze.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o=null}o&&u.forEach(function(e){if(o&&-1===o.storeNames.indexOf(e)){if(!i)throw new Ze.SubTransaction("Table "+e+" not included in parent transaction.");o=null}}),i&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,function(n,t){t(e)}):Rn(e)}return o?o._promise(e,r,"lock"):Pn.trans?he(Pn.transless,function(){return Xe._whenReady(r)}):Xe._whenReady(r)},this.table=function(e){if(!t(ze,e))throw new Ze.InvalidTable("Table "+e+" does not exist");return ze[e]},r(q.prototype,{_trans:function(e,n,t){var r=this._tx||Pn.trans;return r&&r.db===Xe?r===Pn.trans?r._promise(e,n,t):oe(function(){return r._promise(e,n,t)},{trans:r,transless:Pn.transless||Pn}):M(e,[this.name],n)},_idbstore:function(e,n,t){function r(e,t,r){if(-1===r.storeNames.indexOf(o))throw new Ze.NotFound("Table"+o+" not part of transaction");return n(e,t,r.idbtrans.objectStore(o),r)}var o=this.name;return this._trans(e,r,t)},get:function(e,n){if(e&&e.constructor===Object)return this.where(e).first(n);var t=this;return this._idbstore("readonly",function(n,r,o){var i=o.get(e);i.onerror=xe(r),i.onsuccess=re(function(){n(t.hook.reading.fire(i.result))},r)}).then(n)},where:function(e){if("string"==typeof e)return new z(this,e);if(Se(e))return new z(this,"["+e.join("+")+"]");var n=Ae(e);if(1===n.length)return this.where(n[0]).equals(e[n[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter(function(e){return e.compound&&n.every(function(n){return e.keyPath.indexOf(n)>=0})&&e.keyPath.every(function(e){return n.indexOf(e)>=0})})[0];if(t&&Ln!==Fn)return this.where(t.name).equals(t.keyPath.map(function(n){return e[n]}));t||console.warn("The query "+JSON.stringify(e)+" on "+this.name+" would benefit of a compound index ["+n.join("+")+"]");var r=this.schema.idxByName,o=n.reduce(function(n,t){return[n[0]||r[t],n[0]||!r[t]?le(n[1],function(n){return""+p(n,t)==""+e[t]}):n[1]]},[null,null]),i=o[0];return i?this.where(i.name).equals(e[i.keyPath]).filter(o[1]):t?this.filter(o[1]):this.where(n).equals("")},count:function(e){return this.toCollection().count(e)},offset:function(e){return this.toCollection().offset(e)},limit:function(e){return this.toCollection().limit(e)},reverse:function(){return this.toCollection().reverse()},filter:function(e){return this.toCollection().and(e)},each:function(e){return this.toCollection().each(e)},toArray:function(e){return this.toCollection().toArray(e)},orderBy:function(e){return new G(new z(this,Se(e)?"["+e.join("+")+"]":e))},toCollection:function(){return new G(new z(this))},mapToClass:function(e,n){this.schema.mappedClass=e;var r=Object.create(e.prototype);n&&we(r,n),this.schema.instanceTemplate=r;var o=function(n){if(!n)return n;var r=Object.create(e.prototype);for(var o in n)if(t(n,o))try{r[o]=n[o]}catch(e){}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=o,this.hook("reading",o),e},defineClass:function(e){return this.mapToClass(ye.defineClass(e),e)},bulkDelete:function(e){return this.hook.deleting.fire===A?this._idbstore(Ye,function(n,t,r,o){n(V(r,o,e,!1,A))}):this.where(":id").anyOf(e).delete().then(function(){})},bulkPut:function(e,n){var t=this;return this._idbstore(Ye,function(r,o,i){if(!i.keyPath&&!t.schema.primKey.auto&&!n)throw new Ze.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(i.keyPath&&n)throw new Ze.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new Ze.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return r();var u,a,s=function(e){0===c.length?r(e):o(new C(t.name+".bulkPut(): "+c.length+" of "+l+" operations failed",c))},c=[],l=e.length,h=t;if(t.hook.creating.fire===A&&t.hook.updating.fire===A){a=U(c);for(var d=0,v=e.length;d<v;++d)u=n?i.put(e[d],n[d]):i.put(e[d]),u.onerror=a;u.onerror=U(c,s),u.onsuccess=ke(s)}else{var g=n||i.keyPath&&e.map(function(e){return p(e,i.keyPath)}),m=g&&f(g,function(n,t){return null!=n&&[n,e[t]]});(g?h.where(":id").anyOf(g.filter(function(e){return null!=e})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(D,function(e){c=e.failures}).then(function(){for(var t=[],r=n&&[],o=g.length-1;o>=0;--o){var i=g[o];(null==i||m[i])&&(t.push(e[o]),n&&r.push(i),null!=i&&(m[i]=null))}return t.reverse(),n&&r.reverse(),h.bulkAdd(t,r)}).then(function(e){var n=g[g.length-1];return null!=n?n:e}):h.bulkAdd(e)).then(s).catch(C,function(e){c=c.concat(e.failures),s()}).catch(o)}},"locked")},bulkAdd:function(e,n){var t=this,r=this.hook.creating.fire;return this._idbstore(Ye,function(o,i,u,a){function s(e){0===h.length?o(e):i(new C(t.name+".bulkAdd(): "+h.length+" of "+g+" operations failed",h))}if(!u.keyPath&&!t.schema.primKey.auto&&!n)throw new Ze.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(u.keyPath&&n)throw new Ze.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(n&&n.length!==e.length)throw new Ze.InvalidArgument("Arguments objects and keys must have the same length");if(0===e.length)return o();var c,l,f,h=[],g=e.length;if(r!==A){var m,y=u.keyPath;l=U(h,null,!0),f=_e(null),d(function(){for(var t=0,o=e.length;t<o;++t){m={onerror:null,onsuccess:null};var i=n&&n[t],s=e[t],h=n?i:y?p(s,y):void 0,d=r.call(m,h,s,a);null==h&&null!=d&&(y?(s=b(s),v(s,y,d)):i=d),c=null!=i?u.add(s,i):u.add(s),c._hookCtx=m,t<o-1&&(c.onerror=l,m.onsuccess&&(c.onsuccess=f))}},function(e){throw m.onerror&&m.onerror(e),e}),c.onerror=U(h,s,!0),c.onsuccess=_e(s)}else{l=U(h);for(var w=0,_=e.length;w<_;++w)c=n?u.add(e[w],n[w]):u.add(e[w]),c.onerror=l;c.onerror=U(h,s),c.onsuccess=ke(s)}})},add:function(e,n){var t=this.hook.creating.fire;return this._idbstore(Ye,function(r,o,i,u){var a={onsuccess:null,onerror:null};if(t!==A){var s=null!=n?n:i.keyPath?p(e,i.keyPath):void 0,c=t.call(a,s,e,u);null==s&&null!=c&&(i.keyPath?v(e,i.keyPath,c):n=c)}try{var l=null!=n?i.add(e,n):i.add(e);l._hookCtx=a,l.onerror=Pe(o),l.onsuccess=_e(function(n){var t=i.keyPath;t&&v(e,t,n),r(n)})}catch(e){throw a.onerror&&a.onerror(e),e}})},put:function(e,n){var t=this,r=this.hook.creating.fire,o=this.hook.updating.fire;if(r!==A||o!==A){var i=this.schema.primKey.keyPath,u=void 0!==n?n:i&&p(e,i);return null==u?this.add(e):(e=b(e),this._trans(Ye,function(){return t.where(":id").equals(u).modify(function(){this.value=e}).then(function(r){return 0===r?t.add(e,n):u})},"locked"))}return this._idbstore(Ye,function(t,r,o){
var i=void 0!==n?o.put(e,n):o.put(e);i.onerror=xe(r),i.onsuccess=re(function(n){var r=o.keyPath;r&&v(e,r,n.target.result),t(i.result)})})},delete:function(e){return this.hook.deleting.subscribers.length?this.where(":id").equals(e).delete():this._idbstore(Ye,function(n,t,r){var o=r.delete(e);o.onerror=xe(t),o.onsuccess=re(function(){n(o.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Ye,function(e,n,t){var r=t.clear();r.onerror=xe(n),r.onsuccess=re(function(){e(r.result)})})},update:function(e,n){if("object"!=typeof n||Se(n))throw new Ze.InvalidArgument("Modifications must be an object.");if("object"!=typeof e||Se(e))return this.where(":id").equals(e).modify(n);Ae(n).forEach(function(t){v(e,t,n[t])});var t=p(e,this.schema.primKey.keyPath);return void 0===t?Rn(new Ze.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(n)}}),r(W.prototype,{_lock:function(){return c(!Pn.global),++this._reculock,1!==this._reculock||Pn.global||(Pn.lockOwnerFor=this),this},_unlock:function(){if(c(!Pn.global),0==--this._reculock)for(Pn.global||(Pn.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{he(e[1],e[0])}catch(e){}}return this},_locked:function(){return this._reculock&&Pn.lockOwnerFor!==this},create:function(e){var n=this;if(!this.mode)return this;if(c(!this.idbtrans),!e&&!Ge)switch(Qe&&Qe.name){case"DatabaseClosedError":throw new Ze.DatabaseClosed(Qe);case"MissingAPIError":throw new Ze.MissingAPI(Qe.message,Qe);default:throw new Ze.OpenFailed(Qe)}if(!this.active)throw new Ze.TransactionInactive;return c(null===this._completion._state),e=this.idbtrans=e||Ge.transaction(Ce(this.storeNames),this.mode),e.onerror=re(function(t){Ee(t),n._reject(e.error)}),e.onabort=re(function(t){Ee(t),n.active&&n._reject(new Ze.Abort(e.error)),n.active=!1,n.on("abort").fire(t)}),e.oncomplete=re(function(){n.active=!1,n._resolve()}),this},_promise:function(e,n,t){var r=this;if(e===Ye&&this.mode!==Ye)return Rn(new Ze.ReadOnly("Transaction is readonly"));if(!this.active)return Rn(new Ze.TransactionInactive);if(this._locked())return new L(function(o,i){r._blockedFuncs.push([function(){r._promise(e,n,t).then(o,i)},Pn])});if(t)return oe(function(){var e=new L(function(e,t){r._lock();var o=n(e,t,r);o&&o.then&&o.then(e,t)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var o=new L(function(e,t){var o=n(e,t,r);o&&o.then&&o.then(e,t)});return o._lib=!0,o},_root:function(){return this.parent?this.parent._root():this},waitFor:function(e){var n=this._root();if(e=L.resolve(e),n._waitingFor)n._waitingFor=n._waitingFor.then(function(){return e});else{n._waitingFor=e,n._waitingQueue=[];var t=n.idbtrans.objectStore(n.storeNames[0]);!function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}()}var r=n._waitingFor;return new L(function(t,o){e.then(function(e){return n._waitingQueue.push(re(t.bind(null,e)))},function(e){return n._waitingQueue.push(re(o.bind(null,e)))}).finally(function(){n._waitingFor===r&&(n._waitingFor=null)})})},abort:function(){this.active&&this._reject(new Ze.Abort),this.active=!1},tables:{get:E("Transaction.tables",function(){return ze})},table:function(e){return new q(e,Xe.table(e).schema,this)}}),r(z.prototype,function(){function e(e,n,t){var r=e instanceof z?new G(e):e;return r._ctx.error=t?new t(n):new TypeError(n),r}function n(e){return new G(e,function(){return Fe.only("")}).limit(0)}function t(e){return"next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function r(e){return"next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function o(e,n,t,r,o,i){for(var u=Math.min(e.length,r.length),a=-1,s=0;s<u;++s){var c=n[s];if(c!==r[s])return o(e[s],t[s])<0?e.substr(0,s)+t[s]+t.substr(s+1):o(e[s],r[s])<0?e.substr(0,s)+r[s]+t.substr(s+1):a>=0?e.substr(0,a)+n[a]+t.substr(a+1):null;o(e[s],c)<0&&(a=s)}return u<r.length&&"next"===i?e+t.substr(e.length):u<e.length&&"prev"===i?e.substr(0,t.length):a<0?null:e.substr(0,a)+r[a]+t.substr(a+1)}function i(n,i,u,a){function s(e){c=t(e),l=r(e),f="next"===e?se:ce;var n=u.map(function(e){return{lower:l(e),upper:c(e)}}).sort(function(e,n){return f(e.lower,n.lower)});h=n.map(function(e){return e.upper}),d=n.map(function(e){return e.lower}),p=e,v="next"===e?"":a}var c,l,f,h,d,p,v,g=u.length;if(!u.every(function(e){return"string"==typeof e}))return e(n,Vn);s("next");var m=new G(n,function(){return Fe.bound(h[0],d[g-1]+a)});m._ondirectionchange=function(e){s(e)};var y=0;return m._addAlgorithm(function(e,n,t){var r=e.key;if("string"!=typeof r)return!1;var u=l(r);if(i(u,d,y))return!0;for(var a=null,s=y;s<g;++s){var c=o(r,u,h[s],d[s],f,p);null===c&&null===a?y=s+1:(null===a||f(a,c)>0)&&(a=c)}return n(null!==a?function(){e.continue(a+v)}:t),!1}),m}return{between:function(t,r,o,i){o=!1!==o,i=!0===i;try{return Z(t,r)>0||0===Z(t,r)&&(o||i)&&(!o||!i)?n(this):new G(this,function(){return Fe.bound(t,r,!o,!i)})}catch(n){return e(this,Un)}},equals:function(e){return new G(this,function(){return Fe.only(e)})},above:function(e){return new G(this,function(){return Fe.lowerBound(e,!0)})},aboveOrEqual:function(e){return new G(this,function(){return Fe.lowerBound(e)})},below:function(e){return new G(this,function(){return Fe.upperBound(e,!0)})},belowOrEqual:function(e){return new G(this,function(){return Fe.upperBound(e)})},startsWith:function(n){return"string"!=typeof n?e(this,Vn):this.between(n,n+Fn,!0,!0)},startsWithIgnoreCase:function(e){return""===e?this.startsWith(e):i(this,function(e,n){return 0===e.indexOf(n[0])},[e],Fn)},equalsIgnoreCase:function(e){return i(this,function(e,n){return e===n[0]},[e],"")},anyOfIgnoreCase:function(){var e=_.apply(Ve,arguments);return 0===e.length?n(this):i(this,function(e,n){return-1!==n.indexOf(e)},e,"")},startsWithAnyOfIgnoreCase:function(){var e=_.apply(Ve,arguments);return 0===e.length?n(this):i(this,function(e,n){return n.some(function(n){return 0===e.indexOf(n)})},e,Fn)},anyOf:function(){var t=_.apply(Ve,arguments),r=te;try{t.sort(r)}catch(n){return e(this,Un)}if(0===t.length)return n(this);var o=new G(this,function(){return Fe.bound(t[0],t[t.length-1])});o._ondirectionchange=function(e){r="next"===e?te:ae,t.sort(r)};var i=0;return o._addAlgorithm(function(e,n,o){for(var u=e.key;r(u,t[i])>0;)if(++i===t.length)return n(o),!1;return 0===r(u,t[i])||(n(function(){e.continue(t[i])}),!1)}),o},notEqual:function(e){return this.inAnyRange([[qn,e],[e,Ln]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var n=_.apply(Ve,arguments);if(0===n.length)return new G(this);try{n.sort(te)}catch(n){return e(this,Un)}var t=n.reduce(function(e,n){return e?e.concat([[e[e.length-1][1],n]]):[[qn,n]]},null);return t.push([n[n.length-1],Ln]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(t,r){function o(e,n){for(var t=0,r=e.length;t<r;++t){var o=e[t];if(Z(n[0],o[1])<0&&Z(n[1],o[0])>0){o[0]=ee(o[0],n[0]),o[1]=ne(o[1],n[1]);break}}return t===r&&e.push(n),e}function i(e,n){return l(e[0],n[0])}function u(e){return!h(e)&&!d(e)}if(0===t.length)return n(this);if(!t.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&te(e[0],e[1])<=0}))return e(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Ze.InvalidArgument);var a,s=!r||!1!==r.includeLowers,c=r&&!0===r.includeUppers,l=te;try{a=t.reduce(o,[]),a.sort(i)}catch(n){return e(this,Un)}var f=0,h=c?function(e){return te(e,a[f][1])>0}:function(e){return te(e,a[f][1])>=0},d=s?function(e){return ae(e,a[f][0])>0}:function(e){return ae(e,a[f][0])>=0},p=h,v=new G(this,function(){return Fe.bound(a[0][0],a[a.length-1][1],!s,!c)});return v._ondirectionchange=function(e){"next"===e?(p=h,l=te):(p=d,l=ae),a.sort(i)},v._addAlgorithm(function(e,n,t){for(var r=e.key;p(r);)if(++f===a.length)return n(t),!1;return!!u(r)||0!==Z(r,a[f][1])&&0!==Z(r,a[f][0])&&(n(function(){l===te?e.continue(a[f][0]):e.continue(a[f][1])}),!1)}),v},startsWithAnyOf:function(){var t=_.apply(Ve,arguments);return t.every(function(e){return"string"==typeof e})?0===t.length?n(this):this.inAnyRange(t.map(function(e){return[e,e+Fn]})):e(this,"startsWithAnyOf() only works with strings")}}}),r(G.prototype,function(){function n(e,n){e.filter=le(e.filter,n)}function r(e,n,t){var r=e.replayFilter;e.replayFilter=r?function(){return le(r(),n())}:n,e.justLimit=t&&!r}function o(e,n){e.isMatch=le(e.isMatch,n)}function i(e,n){if(e.isPrimKey)return n;var t=e.table.schema.idxByName[e.index];if(!t)throw new Ze.Schema("KeyPath "+e.index+" on object store "+n.name+" is not indexed");return n.index(t.name)}function u(e,n){var t=i(e,n);return e.keysOnly&&"openKeyCursor"in t?t.openKeyCursor(e.range||null,e.dir+e.unique):t.openCursor(e.range||null,e.dir+e.unique)}function a(e,n,r,o,i){var a=e.replayFilter?le(e.filter,e.replayFilter()):e.filter;e.or?function(){function s(){2==++f&&r()}function c(e,r,i){if(!a||a(r,i,s,o)){var u=r.primaryKey,c=""+u;"[object ArrayBuffer]"===c&&(c=""+new Uint8Array(u)),t(l,c)||(l[c]=!0,n(e,r,i))}}var l={},f=0;e.or._iterate(c,s,o,i),Y(u(e,i),e.algorithm,c,s,o,!e.keysOnly&&e.valueMapper)}():Y(u(e,i),le(e.algorithm,a),n,r,o,!e.keysOnly&&e.valueMapper)}return{_read:function(e,n){var t=this._ctx;return t.error?t.table._trans(null,Rn.bind(null,t.error)):t.table._idbstore("readonly",e).then(n)},_write:function(e){var n=this._ctx;return n.error?n.table._trans(null,Rn.bind(null,n.error)):n.table._idbstore(Ye,e,"locked")},_addAlgorithm:function(e){var n=this._ctx;n.algorithm=le(n.algorithm,e)},_iterate:function(e,n,t,r){return a(this._ctx,e,n,t,r)},clone:function(n){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return n&&e(r,n),t._ctx=r,t},raw:function(){return this._ctx.valueMapper=null,this},each:function(e){var n=this._ctx;return this._read(function(t,r,o){a(n,e,t,r,o)})},count:function(e){var n=this._ctx;if(Q(n,!0))return this._read(function(e,t,r){var o=i(n,r),u=n.range?o.count(n.range):o.count();u.onerror=xe(t),u.onsuccess=function(t){e(Math.min(t.target.result,n.limit))}},e);var t=0;return this._read(function(e,r,o){a(n,function(){return++t,!1},function(){e(t)},r,o)},e)},sortBy:function(e,n){function t(e,n){return n?t(e[o[n]],n-1):e[i]}function r(e,n){var r=t(e,u),o=t(n,u);return r<o?-a:r>o?a:0}var o=e.split(".").reverse(),i=o[0],u=o.length-1,a="next"===this._ctx.dir?1:-1;return this.toArray(function(e){return e.sort(r)}).then(n)},toArray:function(e){var n=this._ctx;return this._read(function(e,t,r){if(be&&"next"===n.dir&&Q(n,!0)&&n.limit>0){var o=n.table.hook.reading.fire,u=i(n,r),s=n.limit<1/0?u.getAll(n.range,n.limit):u.getAll(n.range);s.onerror=xe(t),s.onsuccess=ke(o===S?e:function(n){try{e(n.map(o))}catch(e){t(e)}})}else{var c=[];a(n,function(e){c.push(e)},function(){e(c)},t,r)}},e)},offset:function(e){var n=this._ctx;return e<=0?this:(n.offset+=e,Q(n)?r(n,function(){var n=e;return function(e,t){return 0===n||(1===n?(--n,!1):(t(function(){e.advance(n),n=0}),!1))}}):r(n,function(){var n=e;return function(){return--n<0}}),this)},limit:function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),r(this._ctx,function(){var n=e;return function(e,t,r){return--n<=0&&t(r),n>=0}},!0),this},until:function(e,t){return n(this._ctx,function(n,r,o){return!e(n.value)||(r(o),t)}),this},first:function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},last:function(e){return this.reverse().first(e)},filter:function(e){return n(this._ctx,function(n){return e(n.value)}),o(this._ctx,e),this},and:function(e){return this.filter(e)},or:function(e){return new z(this._ctx.table,e,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(n,t){e(t.key,t)})},eachUniqueKey:function(e){return this._ctx.unique="unique",this.eachKey(e)},eachPrimaryKey:function(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(n,t){e(t.primaryKey,t)})},keys:function(e){var n=this._ctx;n.keysOnly=!n.isMatch;var t=[];return this.each(function(e,n){t.push(n.key)}).then(function(){return t}).then(e)},primaryKeys:function(e){var n=this._ctx;if(be&&"next"===n.dir&&Q(n,!0)&&n.limit>0)return this._read(function(e,t,r){var o=i(n,r),u=n.limit<1/0?o.getAllKeys(n.range,n.limit):o.getAllKeys(n.range);u.onerror=xe(t),u.onsuccess=ke(e)}).then(e);n.keysOnly=!n.isMatch;var t=[];return this.each(function(e,n){t.push(n.primaryKey)}).then(function(){return t}).then(e)},uniqueKeys:function(e){return this._ctx.unique="unique",this.keys(e)},firstKey:function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},lastKey:function(e){return this.reverse().firstKey(e)},distinct:function(){var e=this._ctx,r=e.index&&e.table.schema.idxByName[e.index];if(!r||!r.multi)return this;var o={};return n(this._ctx,function(e){var n=e.primaryKey.toString(),r=t(o,n);return o[n]=!0,!r}),this},modify:function(n){var r=this,o=this._ctx,i=o.table.hook,u=i.updating.fire,a=i.deleting.fire;return this._write(function(o,i,s,c){function l(e,n){function r(e){return O.push(e),j.push(o.primKey),h(),!0}C=n.primaryKey;var o={primKey:n.primaryKey,value:e,onsuccess:null,onerror:null};if(!1!==g.call(o,e,o)){var i=!t(o,"value");++k,d(function(){var e=i?n.delete():n.update(o.value);e._hookCtx=o,e.onerror=Pe(r),e.onsuccess=_e(function(){++P,h()})},r)}else o.onsuccess&&o.onsuccess(o.value)}function f(e){return e&&(O.push(e),j.push(C)),i(new D("Error modifying one or more objects",O,P,j))}function h(){E&&P+O.length===k&&(O.length>0?f():o(P))}var g;if("function"==typeof n)g=u===A&&a===A?n:function(e){var r=b(e);if(!1===n.call(this,e,this))return!1;if(t(this,"value")){var o=w(r,this.value),i=u.call(this,o,this.primKey,r,c);i&&(e=this.value,Ae(i).forEach(function(n){v(e,n,i[n])}))}else a.call(this,this.primKey,e,c)};else if(u===A){var y=Ae(n),_=y.length;g=function(e){for(var t=!1,r=0;r<_;++r){var o=y[r],i=n[o];p(e,o)!==i&&(v(e,o,i),t=!0)}return t}}else{var x=n;n=m(x),g=function(t){var r=!1,o=u.call(this,n,this.primKey,b(t),c);return o&&e(n,o),Ae(n).forEach(function(e){var o=n[e];p(t,e)!==o&&(v(t,e,o),r=!0)}),o&&(n=m(x)),r}}var k=0,P=0,E=!1,O=[],j=[],C=null;r.clone().raw()._iterate(l,function(){E=!0,h()},f,s)})},delete:function(){var e=this,n=this._ctx,t=n.range,r=n.table.hook.deleting.fire,o=r!==A;if(!o&&Q(n)&&(n.isPrimKey&&!Qn||!t))return this._write(function(e,n,r){var o=xe(n),i=t?r.count(t):r.count();i.onerror=o,i.onsuccess=function(){var u=i.result;d(function(){var n=t?r.delete(t):r.clear();n.onerror=o,n.onsuccess=function(){return e(u)}},function(e){return n(e)})}});var i=o?2e3:1e4;return this._write(function(t,u,a,s){var c=0,l=e.clone({keysOnly:!n.isMatch&&!o}).distinct().limit(i).raw(),f=[],h=function(){return l.each(o?function(e,n){f.push([n.primaryKey,n.value])}:function(e,n){f.push(n.primaryKey)}).then(function(){return o?f.sort(function(e,n){return te(e[0],n[0])}):f.sort(te),V(a,s,f,o,r)}).then(function(){var e=f.length;return c+=e,f=[],e<i?c:h()})};t(h())})}}}),e(this,{Collection:G,Table:q,Transaction:W,Version:u,WhereClause:z}),function(){Xe.on("versionchange",function(e){e.newVersion>0?console.warn("Another connection wants to upgrade database '"+Xe.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+Xe.name+"'. Closing db now to resume the delete request."),Xe.close()}),Xe.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?console.warn("Dexie.delete('"+Xe.name+"') was blocked"):console.warn("Upgrade '"+Xe.name+"' blocked by other connection holding version "+e.oldVersion/10)})}(),Ne.forEach(function(e){e(Xe)})}function be(e){if("function"==typeof e)return new e;if(Se(e))return[be(e[0])];if(e&&"object"==typeof e){var n={};return we(n,e),n}return e}function we(e,n){return Ae(n).forEach(function(t){var r=be(n[t]);e[t]=r}),e}function _e(e){return re(function(n){var t=n.target,r=t._hookCtx,o=r.value||t.result,i=r&&r.onsuccess;i&&i(o),e&&e(o)},e)}function xe(e){return re(function(n){return Ee(n),e(n.target.error),!1})}function ke(e){return re(function(n){e(n.target.result)})}function Pe(e){return re(function(n){var t=n.target,r=t.error,o=t._hookCtx,i=o&&o.onerror;return i&&i(r),Ee(n),e(r),!1})}function Ee(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}function Oe(e){function n(e){return function(n){var t=e(n),r=t.value;return t.done?r:r&&"function"==typeof r.then?r.then(o,i):Se(r)?L.all(r).then(o,i):o(r)}}var t=function(n){return e.next(n)},r=function(n){return e.throw(n)},o=n(t),i=n(r);return n(t)()}function je(e,n,t,r,o,i,u){this.name=e,this.keyPath=n,this.unique=t,this.multi=r,this.auto=o,this.compound=i,this.dotted=u;var a="string"==typeof n?n:n&&"["+[].join.call(n,"+")+"]";this.src=(t?"&":"")+(r?"*":"")+(o?"++":"")+a}function De(e,n,t,r){this.name=e,this.primKey=n||new je,this.indexes=t||[new je],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=f(t,function(e){return[e.name,e]})}function Ce(e){return 1===e.length?e[0]:e}function Ie(e){var n=e&&(e.getDatabaseNames||e.webkitGetDatabaseNames);return n&&n.bind(e)}var Ae=Object.keys,Se=Array.isArray,Te="undefined"!=typeof self?self:"undefined"!=typeof window?window:n,Me=Object.getPrototypeOf,Ke={}.hasOwnProperty,Ne=Object.defineProperty,Re=Object.getOwnPropertyDescriptor,Be=[].slice,Fe=[].concat,Le="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(y([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(n){return n+e+"Array"})}))).filter(function(e){return Te[e]}).map(function(e){return Te[e]}),qe="undefined"!=typeof Symbol&&Symbol.iterator,Ue=qe?function(e){var n;return null!=e&&(n=e[qe])&&n.apply(e)}:function(){return null},Ve={},We="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href),ze=function(){return!0},Ge=!new Error("").stack,Qe=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],$e=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],He=Qe.concat($e),Je={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};i(O).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+P(this._e,2))}},toString:function(){return this.name+": "+this.message}}),i(D).from(O),i(C).from(O);var Ye=He.reduce(function(e,n){return e[n]=n+"Error",e},{}),Xe=O,Ze=He.reduce(function(e,n){function t(e,t){this._e=k(),this.name=r,e?"string"==typeof e?(this.message=e,this.inner=t||null):"object"==typeof e&&(this.message=e.name+" "+e.message,this.inner=e):(this.message=Je[n]||r,this.inner=null)}var r=n+"Error";return i(t).from(Xe),e[n]=t,e},{});Ze.Syntax=SyntaxError,Ze.Type=TypeError,Ze.Range=RangeError;var en=$e.reduce(function(e,n){return e[n+"Error"]=Ze[n],e},{}),nn=He.reduce(function(e,n){return-1===["Syntax","Type","Range"].indexOf(n)&&(e[n+"Error"]=Ze[n]),e},{});nn.ModifyError=D,nn.DexieError=O,nn.BulkError=C;var tn={},rn=100,on=7,un=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(n){var e=Te.Promise;return e?[e.resolve(),e.prototype,e.resolve()]:[]}}(),an=un[0],sn=un[1],cn=un[2],ln=sn&&sn.then,fn=an&&an.constructor,hn=un[3],dn=!!cn,pn=!1,vn=cn?function(){cn.then(H)}:Te.setImmediate?setImmediate.bind(null,H):Te.MutationObserver?function(){var e=document.createElement("div");new MutationObserver(function(){H(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:function(){setTimeout(H,0)},gn=function(e,n){En.push([e,n]),yn&&(vn(),yn=!1)},mn=!0,yn=!0,bn=[],wn=[],_n=null,xn=S,kn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ge,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(e){try{ge(e[0],e[1])}catch(e){}})}},Pn=kn,En=[],On=0,jn=[],Dn={get:function(){function e(e,r){var o=this,i=!n.global&&(n!==Pn||t!==Mn);i&&ue();var u=new L(function(t,u){z(o,new q(pe(e,n,i),pe(r,n,i),t,u,n))});return We&&$(u,this),u}var n=Pn,t=Mn;return e.prototype=tn,e},set:function(e){o(this,"then",e&&e.prototype===tn?Dn:{get:function(){return e},set:Dn.set})}};r(L.prototype,{then:Dn,_then:function(e,n){z(this,new q(null,null,e,n,Pn))},catch:function(e){if(1===arguments.length)return this.then(null,e);var n=arguments[0],t=arguments[1];return"function"==typeof n?this.then(null,function(e){return e instanceof n?t(e):te(e)}):this.then(null,function(e){return e&&e.name===n?t(e):te(e)})},finally:function(e){return this.then(function(n){return e(),n},function(n){return e(),te(n)})},stack:{get:function(){if(this._stack)return this._stack;try{pn=!0;var e=Q(this,[],20),n=e.join("\nFrom previous: ");return null!==this._state&&(this._stack=n),n}finally{pn=!1}}},timeout:function(e,n){var t=this;return e<1/0?new L(function(r,o){var i=setTimeout(function(){return o(new Ze.Timeout(n))},e);t.then(r,o).finally(clearTimeout.bind(null,i))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&o(L.prototype,Symbol.toStringTag,"Promise"),kn.env=fe(),r(L,{all:function(){var e=_.apply(null,arguments).map(ae);return new L(function(n,t){0===e.length&&n([]);var r=e.length;e.forEach(function(o,i){return L.resolve(o).then(function(t){e[i]=t,--r||n(e)},t)})})},resolve:function(e){if(e instanceof L)return e;if(e&&"function"==typeof e.then)return new L(function(n,t){e.then(n,t)});var n=new L(tn,!0,e);return $(n,_n),n},reject:te,race:function(){var e=_.apply(null,arguments).map(ae);return new L(function(n,t){e.map(function(e){return L.resolve(e).then(n,t)})})},PSD:{get:function(){return Pn},set:function(e){return Pn=e}},newPSD:oe,usePSD:he,scheduler:{get:function(){return gn},set:function(e){gn=e}},rejectionMapper:{get:function(){return xn},set:function(e){xn=e}},follow:function(e,n){return new L(function(t,r){return oe(function(n,t){var r=Pn;r.unhandleds=[],r.onunhandled=t,r.finalize=M(function(){var e=this;Z(function(){0===e.unhandleds.length?n():t(e.unhandleds[0])})},r.finalize),e()},n,t,r)})}});var Cn,In={awaits:0,echoes:0,id:0},An=0,Sn=[],Tn=0,Mn=0,Kn=0,Nn="unhandledrejection",Rn=L.reject,Bn="2.0.4",Fn=String.fromCharCode(65535),Ln=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(e){return Fn}}(),qn=-1/0,Un="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vn="String expected.",Wn=[],zn="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Gn=zn,Qn=zn,$n=function(e){return!/(dexie\.js|dexie\.min\.js)/.test(e)};return x(We,$n),r(ye,nn),r(ye,{delete:function(e){var n=new ye(e),t=n.delete();return t.onblocked=function(e){return n.on("blocked",e),this},t},exists:function(e){return new ye(e).open().then(function(e){return e.close(),!0}).catch(ye.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(e){var n=Ie(ye.dependencies.indexedDB);return n?new L(function(e,t){var r=n();r.onsuccess=function(n){e(a(n.target.result,0))},r.onerror=xe(t)}).then(e):Cn.dbnames.toCollection().primaryKeys(e)},defineClass:function(){function n(n){n&&e(this,n)}return n},applyStructure:we,ignoreTransaction:function(e){return Pn.trans?he(Pn.transless,e):e()},vip:function(e){return oe(function(){return Pn.letThrough=!0,e()})},async:function(e){return function(){try{var n=Oe(e.apply(this,arguments));return n&&"function"==typeof n.then?n:L.resolve(n)}catch(e){return Rn(e)}}},spawn:function(e,n,t){try{var r=Oe(e.apply(t,n||[]));return r&&"function"==typeof r.then?r:L.resolve(r)}catch(e){return Rn(e)}},currentTransaction:{get:function(){return Pn.trans||null}},waitFor:function(e,n){var t=L.resolve("function"==typeof e?ye.ignoreTransaction(e):e).timeout(n||6e4);return Pn.trans?Pn.trans.waitFor(t):t},Promise:L,debug:{get:function(){return We},set:function(e){x(e,"dexie"===e?function(){return!0}:$n)}},derive:i,extend:e,props:r,override:s,Events:me,getByKeyPath:p,setByKeyPath:v,delByKeyPath:g,shallowClone:m,deepClone:b,getObjectDiff:w,asap:l,maxKey:Ln,minKey:qn,addons:[],connections:Wn,MultiModifyError:Ze.Modify,errnames:Ye,IndexSpec:je,TableSchema:De,dependencies:function(){try{return{indexedDB:Te.indexedDB||Te.mozIndexedDB||Te.webkitIndexedDB||Te.msIndexedDB,IDBKeyRange:Te.IDBKeyRange||Te.webkitIDBKeyRange}}catch(e){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:Bn,version:Bn.split(".").map(function(e){return parseInt(e)}).reduce(function(e,n,t){return e+n/Math.pow(10,2*t)}),default:ye,Dexie:ye}),L.rejectionMapper=I,Cn=new ye("__dbnames"),Cn.version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==Te.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(e){return Cn.dbnames.put({name:e}).catch(A)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(e){}}(),ye})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,n,t,r){this.enabled=e,this.enableLogs=n,this.models=t,this.prefix=r}return e}();t.CacheConfigService=r;var o=function(){function e(){"ngInject";this.enabled=!0,this.enableLogs=!1,this.models=[],this.prefix="PipCache"}return e.prototype.$get=function(){"ngInject";return null==this._service&&(this._service=new r(this.enabled,this.enableLogs,this.models,this.prefix)),this._service},e}();angular.module("pipCache").provider("pipCacheConfig",o)},{}],3:[function(e,n,t){"use strict";function r(e){"ngInject";e.interceptors.push(["$q","pipCache","pipCacheConfig",function(e,n,t){var r=function(e){var n={};return e&&(e.hasOwnProperty("offset")&&(n.offset=parseInt(e.offset,10)),e.hasOwnProperty("limit")&&(n.limit=parseInt(e.limit,10))),n};return{request:function(o){if(!t.enabled)return o;for(var i=0,u=n.models;i<u.length;i++){var a=u[i],s=function(t){for(var i=0,u=Object.keys(t.interceptors);i<u.length;i++){var a=u[i],s=function(i){var u=t.interceptors[i],a=u.match.exec(o.url);if(a)switch(o.method){case"GET":switch(i){case"item":var s=a.groups;return{value:n.getItem(t.name,u.getKey(s),u.options).then(function(r){return r?(o.timeout=e.defer().promise,e.reject({cachedData:r})):(o.onResponse=function(e){n.setItem(t.name,e,u.options)},o)})};case"collection":var c=u.getParams?u.getParams(o.params):r(o.params);return{value:n.getItems(t.name,c,u.options).then(function(r){if(r){o.timeout=e.defer().promise;var i=u.responseModify?u.responseModify.itemsToResponse(r):r;return e.reject({cachedData:i})}return o.onResponse=function(e){var r=u.responseModify?u.responseModify.responseToItems(e):e;n.setItems(t.name,r,{params:c,options:u.options})},o})};default:console.error("Unknown type of interceptor ("+i+")")}case"POST":case"PUT":switch(i){case"item":case"collection":o.onResponse=function(e){n.setItem(t.name,e,{removeTotal:"POST"===o.method})}}case"DELETE":switch(i){case"item":var l=a.groups;o.onResponse=function(e){n.deleteItems(t.name,[u.getKey(l)])}}}}(a);if("object"==typeof s)return s}}(a);if("object"==typeof s)return s.value}return o},response:function(e){return e.config.hasOwnProperty("onResponse")&&"function"==typeof e.config.onResponse&&e.config.onResponse(e.data),e},responseError:function(n){return n&&n.cachedData?e.resolve({data:n.cachedData}):e.reject(n)}}}])}r.$inject=["$httpProvider"],Object.defineProperty(t,"__esModule",{value:!0}),angular.module("pipCache").config(r)},{}],4:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e}();t.CacheCollectionParams=r;var o=function(){function e(){}return e}();t.CacheInterceptorOptions=o;var i=function(){function e(){}return e}();t.CacheModel=i},{}],5:[function(e,n,t){"use strict";var r=this&&this.__awaiter||function(e,n,t,r){return new(t||(t=Promise))(function(o,i){function u(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(u,a)}s((r=r.apply(e,n||[])).next())})},o=this&&this.__generator||function(e,n){function t(e){return function(n){return r([e,n])}}function r(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(u=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(u=u.call(i,t[1])).done)return u;switch(i=0,u&&(t=[0,u.value]),t[0]){case 0:case 1:u=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!u||t[1]>u[0]&&t[1]<u[3])){a.label=t[1];break}if(6===t[0]&&a.label<u[1]){a.label=u[1],u=t;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(t);break}u[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(e,a)}catch(e){t=[6,e],i=0}finally{o=u=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,i,u,a={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]};return{next:t(0),throw:t(1),return:t(2)}};Object.defineProperty(t,"__esModule",{value:!0});var i=e("dexie"),u=function(){function e(e){this.config=e,this.openedDbs=new Map}return e.prototype.getDbName=function(e){if(!e)throw new Error("Model name should be defined");return this.config.prefix+e.charAt(0).toUpperCase()+e.slice(1)},e.prototype.getDb=function(e){if(!e||!e.name)throw new Error("Model should be defined");var n=this.getDbName(e.name);if(this.openedDbs.has(n))return this.openedDbs.get(n);var t=new i.Dexie(n),r=e.options.key||"id";return t.version(1).stores({items:r,lastRead:"",indexes:"idx,"+r,meta:""}),this.openedDbs.set(n,t),t},e.prototype.getModel=function(e){return this.models.find(function(n){return n.name===e})},Object.defineProperty(e.prototype,"models",{get:function(){return this.config.models||[]},enumerable:!0,configurable:!0}),e.prototype.getItem=function(e,n,t){return r(this,void 0,void 0,function(){var r,i,u,a,s,c,l;return o(this,function(o){switch(o.label){case 0:return r=this.getModel(e),i=this.getDb(r),[4,Promise.all([i.table("lastRead").get(n),i.table("items").get(n)])];case 1:return u=o.sent(),a=u[0],s=u[1],c=t&&t.maxAge||r.options.maxAge,l=a+c<=(new Date).valueOf(),this.config.enableLogs&&(console.groupCollapsed("[PipCache] GET single item #"+n),console.log("Item: ",s),console.log("Expired: ",l),console.log("Expired at: ",new Date(a)),console.groupEnd()),[2,l?null:s]}})})},e.prototype.getItems=function(e,n,t){return r(this,void 0,void 0,function(){var r,i,u,a,s,c,l,f,h,d,p,v,g,h,d,m,v,g,y,v,g;return o(this,function(o){switch(o.label){case 0:return r=this.getModel(e),i=this.getDb(r),u=r.options.key||"id",[4,i.table("meta").get("total")];case 1:return a=o.sent(),(s=t&&t.maxAge||r.options.maxAge,c=a&&a.lastRead+s>=(new Date).valueOf()?a.total:void 0,this.config.enableLogs&&(console.groupCollapsed("[PipCache] GET collection of items"),console.log("Params: ",n)),n&&Object.keys(n).length)?(l=n.hasOwnProperty("offset")?n.offset:0,f=n.hasOwnProperty("limit")?n.limit:void 0,void 0===f?[3,6]:[4,i.table("indexes").where("idx").between(l,l+f,!0,!1).toArray()]):[3,10];case 2:return h=o.sent(),h.length===f||void 0!==c&&h.length===c-l?[3,3]:(this.config.enableLogs&&(console.log("There's not enough information about indexes"),console.groupEnd()),[2,null]);case 3:return d=h.map(function(e){return e.id}),
[4,Promise.all([i.table("items").where(u).anyOf(d).toArray(),i.table("lastRead").where("").anyOf(d).toArray()])];case 4:return p=o.sent(),(v=p[0],g=p[1],v&&v.length===h.length&&g&&g.length===h.length)?Math.min.apply(Math,g)+s<=(new Date).valueOf()?(this.config.enableLogs&&(console.log("Items was expired"),console.groupEnd()),[2,null]):(this.config.enableLogs&&(console.log("Items: ",v),console.groupEnd()),[2,v]):(this.config.enableLogs&&(console.warn("Not all items presented in cache"),console.groupEnd()),[2,null]);case 5:return[3,9];case 6:return void 0===c?[3,9]:[4,i.table("indexes").where("idx").aboveOrEqual(l).toArray()];case 7:return h=o.sent(),h.length!==f||h.length!==c-l?(this.config.enableLogs&&(console.log("Not all items presented in cache"),console.groupEnd()),[2,null]):(d=h.map(function(e){return e.id}),[4,Promise.all([i.table("items").where(u).anyOf(d).toArray(),i.table("lastRead").where(u).anyOf(d).toArray()])]);case 8:return m=o.sent(),(v=m[0],g=m[1],v&&v.length===h.length&&g&&g.length===h.length)?Math.min.apply(Math,g)+s>=(new Date).valueOf()?(this.config.enableLogs&&(console.log("Items was expired"),console.groupEnd()),[2,null]):(this.config.enableLogs&&(console.log("Items: ",v),console.groupEnd()),[2,v]):(this.config.enableLogs&&(console.log("Not all items presented in cache"),console.groupEnd()),[2,null]);case 9:return[3,13];case 10:return void 0===c?[3,12]:[4,Promise.all([i.table("items").toArray(),i.table("lastRead").toArray()])];case 11:return y=o.sent(),(v=y[0],g=y[1],v&&v.length===c&&g&&g.length===c)?Math.min.apply(Math,g)+s<=(new Date).valueOf()?(this.config.enableLogs&&(console.log("Items was expired"),console.groupEnd()),[2,null]):(this.config.enableLogs&&(console.log("Items: ",v),console.groupEnd()),[2,v]):(this.config.enableLogs&&(console.log("Not all items presented in cache"),console.groupEnd()),[2,null]);case 12:return this.config.enableLogs&&(console.log("We want to return all items, but we don't know how many they are"),console.groupEnd()),[2,null];case 13:return[2]}})})},e.prototype.setItem=function(e,n,t){return r(this,void 0,void 0,function(){var r,i,u,a,s;return o(this,function(o){switch(o.label){case 0:return r=this.getModel(e),i=this.getDb(r),[4,Promise.all([i.table("lastRead").put((new Date).valueOf(),n[r.options.key]),i.table("items").put(n)])];case 1:return u=o.sent(),a=u[0],s=u[1],t&&t.removeTotal?[4,i.table("meta").delete("total")]:[3,3];case 2:o.sent(),o.label=3;case 3:return this.config.enableLogs&&(console.groupCollapsed("[PipCache] SET single item #"+n[r.options.key]),console.log("Item: ",s),console.log("Readed at: ",new Date),console.groupEnd()),[2,s]}})})},e.prototype.setItems=function(e,n,t){return r(this,void 0,void 0,function(){var r,i,u,a,s,c,l,f,h,d=this;return o(this,function(o){return r=this.getModel(e),i=r.options.key||"id",u=this.getDb(r),a=(new Date).valueOf(),s=t&&t.params&&t.params.offset||0,c=n.map(function(e){return e[i]}),l=c.map(function(e,n){return{id:e,idx:n+s}}),f=[u.table("lastRead").bulkPut(new Array(n.length).fill(a),c),u.table("items").bulkPut(n),u.table("indexes").bulkPut(l)],!(t&&t.params&&t.params.limit&&n&&n.length<t.params.limit)&&t&&t.params&&Object.keys(t.params).length||(h=(t.params.offset||0)+n.length,f.push(u.table("meta").put({lastRead:(new Date).valueOf(),total:h},"total"))),[2,Promise.all(f).then(function(e){var r=e[0];return d.config.enableLogs&&(console.groupCollapsed("[PipCache] SET collection of items"),console.log("Params: ",t.params),console.log("Items: ",n),console.log("Last read at: ",new Date),r&&2===r.length&&console.log("New total: ",h),console.groupEnd()),n})]})})},e.prototype.deleteItems=function(e,n){return r(this,void 0,void 0,function(){var t,r,i,u=this;return o(this,function(o){return t=this.getModel(e),r=this.getDb(t),i=t.options.key||"id",[2,Promise.all([r.table("lastRead").bulkDelete(n),r.table("items").bulkDelete(n),r.table("indexes").where(i).anyOf(n).delete(),r.table("meta").delete("total")]).then(function(){u.config.enableLogs&&(console.groupCollapsed("[PipCache] DELETE"),console.log("Keys: ",n),console.groupEnd())})]})})},e.prototype.clear=function(e){return r(this,void 0,void 0,function(){var n=this;return o(this,function(t){return[2,new Promise(function(t){var r=[];e?(Array.isArray(e)?r.push.apply(r,e.map(function(e){return n.getDbName(e)})):r.push(n.getDbName(e)),t(r)):t(i.Dexie.getDatabaseNames())}).then(function(e){var t=e.filter(function(e){return e.startsWith(n.config.prefix)});n.config.enableLogs&&console.log("databases to delete: ",e);for(var r=[],o=0,u=t;o<u.length;o++){var a=u[o];try{var s=n.openedDbs.has(a)?n.openedDbs.get(a):new i.Dexie(a);r.push(s.table("items").clear()),r.push(s.table("meta").clear()),r.push(s.table("lastRead").clear()),r.push(s.table("indexes").clear())}catch(e){n.config.enableLogs&&console.warn("Error opening database "+a)}}return Promise.all(r)}).then(function(t){return n.config.enableLogs&&(console.log("%c%s","color: blue; font: 1.2rem Impact;","[PipCache] CLEAR"),e?console.log("Model(s): ",e):console.log("all models")),null})]})})},e}();t.CacheService=u;var a=function(){function e(e){"ngInject";this.pipCacheConfigProvider=e}return e.$inject=["pipCacheConfigProvider"],Object.defineProperty(e.prototype,"models",{get:function(){return this.pipCacheConfigProvider.models},enumerable:!0,configurable:!0}),e.prototype.registerModel=function(e){return!!e&&(!this.models.find(function(n){return n.name===e.name})&&(this.models.push(e),!0))},e.prototype.$get=function(){"ngInject";return null==this._service&&(this._service=new u(this.pipCacheConfigProvider)),this._service},e}();angular.module("pipCache").provider("pipCache",a)},{dexie:1}],6:[function(e,n,t){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),angular.module("pipCache",[]),e("./cache-config.service"),e("./cache.service"),e("./cache.interceptor"),r(e("./cache.models")),r(e("./cache-config.service")),r(e("./cache.service"))},{"./cache-config.service":2,"./cache.interceptor":3,"./cache.models":4,"./cache.service":5}],7:[function(e,n,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),e("./cache/index"),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(e("./cache/index"))},{"./cache/index":6}]},{},[7])(7)});


!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.pip||(t.pip={})).layouts=e()}}(function(){return function e(t,i,n){function o(r,a){if(!i[r]){if(!t[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var p=i[r]={exports:{}};t[r][0].call(p.exports,function(e){var i=t[r][1][e];return o(i||e)},p,p.exports,e,t,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../media/MediaService"),o=e("../media/IMediaService"),s=function(){function e(e,t){"ngInject";var i=this;this.$rootScope=e,this.pipAuxPanel=t,this.normalSize=320,this.largeSize=480,this.gtxs=null,this.gtlg=null,this.bodyElement=$("body"),this.bodyWidth=this.bodyElement.width(),e.$on(o.LayoutResizedEvent,function(){i.bodyWidth=i.bodyElement.width()})}return e.$inject=["$rootScope","pipAuxPanel"],e.prototype.isGtxs=function(){return!!this.pipAuxPanel.isOpen()&&(this.bodyWidth=this.bodyElement.width(),this.bodyWidth>n.MainBreakpoints.xs)},e.prototype.isGtlg=function(){return!!this.pipAuxPanel.isOpen()&&(this.bodyWidth=this.bodyElement.width(),this.bodyWidth>n.MainBreakpoints.lg+this.largeSize)},e}(),r={controller:s,transclude:!0,template:'<md-sidenav class="md-sidenav-right md-whiteframe-z2 pip-auxpanel color-content-bg" ng-class="{\'pip-large\': $ctrl.isGtlg()}"md-component-id="pip-auxpanel" md-is-locked-open="$ctrl.isGtxs()" ng-transclude><div pip-focused></div></md-sidenav>'};angular.module("pipAuxPanel").component("pipAuxPanel",r)},{"../media/IMediaService":13,"../media/MediaService":14}],2:[function(e,t,i){function n(e){"ngInject";var t=e[0];return{transclude:t.transclude,priority:t.priority,terminal:t.terminal,restrict:t.restrict,scope:!0,link:function(e,i,n){n.ngIf=function(){return e.visible},t.link.apply(t)},controller:o}}n.$inject=["ngIfDirective"];var o=function(){function e(e,t,i,n,o){"ngInject";var s=this;this.$scope=e,this.partName=""+i.pipAuxPanelPart,this.pos=this.partName.indexOf(":"),this.pos>0&&(this.partValue=this.partName.substr(this.pos+1),this.partName=this.partName.substr(0,this.pos)),this.onAuxPanelChanged(null,o.config),n.$on("pipAuxPanelChanged",function(e,t){s.onAuxPanelChanged(e,t)})}return e.$inject=["$scope","$element","$attrs","$rootScope","pipAuxPanel"],e.prototype.onAuxPanelChanged=function(e,t){var i=(t.parts,t[this.partName]);this.$scope.visible=this.partValue?i==this.partValue:i},e}();angular.module("pipAuxPanel").directive("pipAuxPanelPart",n)},{}],3:[function(e,t,i){"use strict";function n(e,t){"ngInject";e.$on(o.OpenAuxPanelEvent,function(){t.open()}),e.$on(o.CloseAuxPanelEvent,function(){t.close()})}n.$inject=["$rootScope","pipAuxPanel"],Object.defineProperty(i,"__esModule",{value:!0});var o=e("./IAuxPanelService"),s=e("./IAuxPanelService"),r=function(){function e(e,t,i){"ngInject";this.id="pip-auxpanel",this._config=e,this._rootScope=t,this._sidenav=i}return e.$inject=["config","$rootScope","$mdSidenav"],Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classes",{get:function(){return this._config.classes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parts",{get:function(){return this._config.parts},set:function(e){this._config.parts=e||{},this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e||{},this._rootScope.$broadcast(o.AuxPanelStateChangedEvent,e)},enumerable:!0,configurable:!0}),e.prototype.isOpen=function(){return this._sidenav(this.id).isOpen()},e.prototype.open=function(){this._sidenav(this.id).open(),this._rootScope.$emit(o.AuxPanelOpenedEvent,this._config)},e.prototype.close=function(){this._sidenav(this.id).close(),this._rootScope.$emit(o.AuxPanelClosedEvent,this._config)},e.prototype.toggle=function(){this._sidenav(this.id).toggle()},e.prototype.addClass=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];_.each(t,function(t){e._config.classes.push(t)}),this.sendConfigEvent()},e.prototype.removeClass=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];_.each(t,function(t){e._config.classes=_.reject(e._config.classes,function(e){return e==t})}),this.sendConfigEvent()},e.prototype.part=function(e,t){this._config.parts[e]=t,this.sendConfigEvent()},e.prototype.sendConfigEvent=function(){this._rootScope.$emit(o.AuxPanelChangedEvent,this._config)},e}(),a=function(){function e(){this._config={parts:{},classes:[],type:"sticky",state:null}}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(e){this._config=e||new s.AuxPanelConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parts",{get:function(){return this._config.parts},set:function(e){this._config.parts=e||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._config.type},set:function(e){this._config.type=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classes",{get:function(){return this._config.classes},set:function(e){this._config.classes=e||[]},enumerable:!0,configurable:!0}),e.prototype.addClass=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];_.each(t,function(t){e._config.classes.push(t)})},e.prototype.removeClass=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];_.each(t,function(t){e._config.classes=_.reject(e._config.classes,function(e){return e==t})})},e.prototype.part=function(e,t){this._config.parts[e]=t},e.prototype.open=function(){this._service.open()},e.prototype.close=function(){this._service.close()},e.prototype.toggle=function(){this._service.toggle()},e.prototype.$get=["$rootScope","$mdSidenav",function(e,t){"ngInject";return null==this._service&&(this._service=new r(this._config,e,t)),this._service}],e}();angular.module("pipAuxPanel").provider("pipAuxPanel",a).run(n)},{"./IAuxPanelService":4}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AuxPanelChangedEvent="pipAuxPanelChanged",i.AuxPanelStateChangedEvent="pipAuxPanelStateChanged",i.OpenAuxPanelEvent="pipOpenAuxPanel",i.CloseAuxPanelEvent="pipCloseAuxPanel",i.AuxPanelOpenedEvent="pipAuxPanelOpened",i.AuxPanelClosedEvent="pipAuxPanelClosed";var n=function(){function e(){}return e}();i.AuxPanelConfig=n},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipAuxPanel",["ngMaterial"]),e("./AuxPanelService"),e("./AuxPanelPart"),e("./AuxPanel"),function(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}(e("./IAuxPanelService"))},{"./AuxPanel":1,"./AuxPanelPart":2,"./AuxPanelService":3,"./IAuxPanelService":4}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipLayout",["wu.masonry","pipMedia","pipAuxPanel"]),e("./media/index"),e("./layouts/MainDirective"),e("./layouts/CardDirective"),e("./layouts/DialogDirective"),e("./layouts/DocumentDirective"),e("./layouts/SimpleDirective"),e("./layouts/TilesDirective"),e("./auxpanel/index"),function(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}(e("./media/index"))},{"./auxpanel/index":5,"./layouts/CardDirective":7,"./layouts/DialogDirective":8,"./layouts/DocumentDirective":9,"./layouts/MainDirective":10,"./layouts/SimpleDirective":11,"./layouts/TilesDirective":12,"./media/index":16}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../media/IMediaService"),o=e("../media/MediaService");!function(){function e(e){"ngInject";return{restrict:"EA",link:function(i,n,o){new t(e,n,o)}}}e.$inject=["$rootScope"];var t=function(){function e(e,t,i){"ngInject";var o=this;this.$rootScope=e,this.$element=t,this.$attrs=i,t.addClass("pip-card");var s=function(){o.resize()};e.$on(n.MainResizedEvent,s),this.resize(),setTimeout(s,100)}return e.$inject=["$rootScope","$element","$attrs"],e.prototype.resize=function(){var e,t,i=this,n=$(".pip-main-body"),s=$(".pip-card-container"),r=($("pip-main").width(),n.width()),a=n.height(),c=this.$attrs.minWidth?Math.floor(Number(this.$attrs.minWidth)):null,u=this.$attrs.minHeight?Math.floor(Number(this.$attrs.minHeight)):null,p=this.$attrs.width?Math.floor(Number(this.$attrs.width)):null,l=this.$attrs.height?Math.floor(Number(this.$attrs.height)):null;if(o.MainBreakpointStatuses.xs)c=null,u=null,p=null,l=null,r=null,a=null;else{var d=o.MainBreakpointStatuses["gt-md"]?24:16;r-=2*d,a-=2*d,c=c?Math.min(c,r):null,u=u?Math.min(u,a):null,p=p?Math.min(p,r):null,l=l?Math.min(l,a):null}if(this.$element.css("max-width",r?r+"px":""),this.$element.css("min-width",c?c+"px":""),this.$element.css("width",p?p+"px":""),this.$element.css("height",l?l+"px":""),s.hasClass("pip-outer-scroll"))s.addClass("pip-scroll"),o.MainBreakpointStatuses.xs?(e=0,t=0):(e=s.width()/2-this.$element.width()/2-16,t=Math.max(s.height()/2-this.$element.height()/2-16,0)),this.$element.css("left",e),this.$element.css("top",t),setTimeout(function(){i.$element.css("display","flex")},100);else{this.$element.css("max-height",a?a+"px":""),this.$element.css("min-height",u?u+"px":"");var h=this.$element.find(".pip-header:visible"),f=this.$element.find(".pip-footer:visible"),m=this.$element.find(".pip-body"),g=a||n.height();h.length>0&&(g-=h.outerHeight(!0)),f.length>0&&(g-=f.outerHeight(!0)),m.css("max-height",g+"px")}this.$rootScope.$emit("pipLayoutResized")},e}();angular.module("pipLayout").directive("pipCard",e)}()},{"../media/IMediaService":13,"../media/MediaService":14}],8:[function(e,t,i){!function(){function e(){return{restrict:"EA",link:function(e,t,i){t.addClass("pip-dialog")}}}angular.module("pipLayout").directive("pipDialog",e)}()},{}],9:[function(e,t,i){!function(){function e(){return{restrict:"EA",link:function(e,t,i){t.addClass("pip-document")}}}angular.module("pipLayout").directive("pipDocument",e)}()},{}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../media/ResizeFunctions"),o=e("../media/IMediaService"),s=e("../media/MediaService");!function(){function e(){"ngInject";return{restrict:"EA",controller:i,controllerAs:"vm"}}function t(){"ngInject";return{restrict:"EA",link:r}}var i=function(){function e(e,t,i,o,s){"ngInject";var r=this;this.$scope=e,this.$element=t,this.$rootScope=i,this.$timeout=o,this.$attrs=s,this._container=s.pipContainer?$(s.pipContainer):t,t.addClass("pip-main");var a=function(){r.resize()};n.addResizeListener(this._container[0],a),e.$on("$destroy",function(){n.removeResizeListener(r._container[0],a)}),this.updateBreakpointStatuses()}return e.$inject=["$scope","$element","$rootScope","$timeout","$attrs"],e.prototype.updateBreakpointStatuses=function(){var e=this,t=this._container.innerWidth(),i=$("body");s.MainBreakpointStatuses.update(s.MainBreakpoints,t),$.each(s.MainBreakpointStatuses,function(e,t){_.isBoolean(t)&&i[t?"addClass":"removeClass"]("pip-"+e)}),this.$timeout(function(){e.$rootScope.$apply()})},e.prototype.resize=function(){this.updateBreakpointStatuses(),this.$rootScope.$emit(o.MainResizedEvent,s.MainBreakpointStatuses)},e}(),r=function(){function e(e,t){"ngInject";t.addClass("pip-main-body")}return e.$inject=["$scope","$element"],e}();angular.module("pipLayout").directive("pipMain",e).directive("pipMainBody",t)}()},{"../media/IMediaService":13,"../media/MediaService":14,"../media/ResizeFunctions":15}],11:[function(e,t,i){!function(){function e(){"ngInject";return{restrict:"EA",link:function(e,t,i){t.addClass("pip-simple")}}}angular.module("pipLayout").directive("pipSimple",e)}()},{}],12:[function(e,t,i){"use strict";function n(e){"ngInject";function t(e){return null!=e&&(!!e&&("1"==(e=e.toString().toLowerCase())||"true"==e))}return{restrict:"EA",scope:{gutter:"="},transclude:{heading:"?pipTilesHeading"},template:function(e,i){return t(i.pipInfinite)?String()+'<div class="pip-tiles-heading" ng-transclude="heading"></div><div masonry class="pip-tiles-container" load-images="false" preserve-order   ng-transclude column-width=".pip-tile-sizer" item-selector=".pip-tile" masonry-options="tilesOptions"  pip-scroll-container="\'.pip-tiles\'" pip-infinite-scroll="readScroll()" ></div>':String()+'<div class="pip-tiles-heading" ng-transclude="heading"></div><div masonry class="pip-tiles-container" load-images="false" preserve-order   ng-transclude column-width=".pip-tile-sizer" item-selector=".pip-tile" masonry-options="tilesOptions"></div>'},controller:["$scope",function(e){e.tilesOptions={gutter:e.gutter||8,isFitWidth:!1,isResizeBound:!1,transitionDuration:0}}],link:function(t,i,n){new a(t,i,n,e)}}}n.$inject=["$rootScope"],Object.defineProperty(i,"__esModule",{value:!0});var o=e("../media/ResizeFunctions"),s=e("../media/IMediaService"),r=e("../media/MediaService"),a=(function(){function e(){}}(),function(){function e(e,t,i,n){"ngInject";var r=this;this.$element=t,this.$attrs=i,this.$rootScope=n,this._columnWidth=i.columnWidth?Math.floor(Number(i.columnWidth)):440,this._container=t.children(".pip-tiles-container"),this._heading=$(t.children(".pip-tiles-heading")[0]),this._prevContainerWidth=null,this._masonry=Masonry.data(this._container[0]),t.addClass("pip-tiles");var a=function(){r.resize(!1)};o.addResizeListener(t[0],a),e.$on("$destroy",function(){o.removeResizeListener(t[0],a)}),this._sizer=$('<div class="pip-tile-sizer"></div>'),this._sizer.appendTo(this._container),n.$on(s.MainResizedEvent,function(){r.resize(!1)}),this.resize(!0)}return e.$inject=["$scope","$element","$attrs","$rootScope"],e.prototype.resize=function(e){var t,i=this.$element.parent().width();if(r.MainBreakpointStatuses["gt-xs"]&&i-36>this._columnWidth){i-=48;var n=Math.floor(i/this._columnWidth);t=(this._columnWidth+16)*n-16,t>i&&(n--,t=(this._columnWidth+16)*n-16),n<1?(t=i,this._sizer.css("width",t+"px")):this._sizer.css("width",this._columnWidth+"px"),this._container.css("width",t+10+"px"),this._heading&&this._heading.css("width",t+10+"px"),this._container.removeClass("pip-mobile")}else i-=32,t=i,this._sizer.css("width",t+"px"),this._container.css("width",t+10+"px"),this._heading&&this._heading.css("width",t+10+"px"),this._container.addClass("pip-mobile");(this._prevContainerWidth!=t||e)&&(this._prevContainerWidth=t,this._masonry.layout(),this.$rootScope.$emit(s.LayoutResizedEvent,t))},e}());angular.module("pipLayout").directive("pipTiles",n)},{"../media/IMediaService":13,"../media/MediaService":14,"../media/ResizeFunctions":15}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MainResizedEvent="pipMainResized",i.LayoutResizedEvent="pipLayoutResized";var n=function(){function e(e,t,i,n){this.xs=e,this.sm=t,this.md=i,this.lg=n}return e}();i.MediaBreakpoints=n;var o=function(){function e(){}return e.prototype.update=function(e,t){null!=e&&null!=t&&(this.width=t,this.xs=t<=e.xs,this["gt-xs"]=t>e.xs,this.sm=t>e.xs&&t<=e.sm,this["gt-sm"]=t>e.sm,this.md=t>e.sm&&t<=e.md,this["gt-md"]=t>e.md,this.lg=t>e.md&&t<=e.lg,this["gt-lg"]=t>e.lg,this.xl=this["gt-lg"])},e}();i.MediaBreakpointStatuses=o},{}],14:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./IMediaService");i.MainBreakpoints=new n.MediaBreakpoints(639,716,1024,1439),i.MainBreakpointStatuses=new n.MediaBreakpointStatuses;var o=function(){function e(){}return Object.defineProperty(e.prototype,"breakpoints",{get:function(){return i.MainBreakpoints},set:function(e){i.MainBreakpoints=e},enumerable:!0,configurable:!0}),e.prototype.$get=function(){var e=function(e){return i.MainBreakpointStatuses[e]};return Object.defineProperty(e,"breakpoints",{get:function(){return i.MainBreakpoints},set:function(e){i.MainBreakpoints=e||new n.MediaBreakpoints(639,716,1024,1439),i.MainBreakpointStatuses.update(i.MainBreakpoints,i.MainBreakpointStatuses.width)}}),Object.defineProperty(e,"width",{get:function(){return i.MainBreakpointStatuses.width}}),e},e}();angular.module("pipMedia").provider("pipMedia",o)},{"./IMediaService":13}],15:[function(e,t,i){"use strict";function n(e){"ngInject";return(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){return window.setTimeout(e,20)})(e)}function o(){"ngInject";var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(t){return e(t)}}function s(e){var t=e.target||e.srcElement;t.__resizeRAF__&&o(),t.__resizeRAF__=n(function(){var i=t.__resizeTrigger__;i.__resizeListeners__.forEach(function(t){t.call(i,e)})})}function r(e){this.contentDocument&&(this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",s))}function a(e,t){"ngInject";if(!e.__resizeListeners__)if(e.__resizeListeners__=[],u)e.__resizeTrigger__=e,e.attachEvent("onresize",s);else{"static"==getComputedStyle(e).position&&(e.style.position="relative");var i=e.__resizeTrigger__=document.createElement("object");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),i.__resizeElement__=e,i.onload=r,i.type="text/html",p&&e.appendChild(i),i.data="about:blank",p||e.appendChild(i)}e.__resizeListeners__.push(t)}function c(e,t){"ngInject";t&&e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),e.__resizeListeners__.length||(u?e.detachEvent("onresize",s):e.__resizeTrigger__.contentDocument&&(e.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",s),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)))}n.$inject=["callback"],a.$inject=["element","listener"],c.$inject=["element","listener"],Object.defineProperty(i,"__esModule",{value:!0});var u=document.attachEvent,p=navigator.userAgent.match(/Trident/);i.addResizeListener=a,i.removeResizeListener=c},{}],16:[function(e,t,i){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipMedia",[]),e("./MediaService"),e("./ResizeFunctions"),n(e("./IMediaService")),n(e("./MediaService")),n(e("./ResizeFunctions"))},{"./IMediaService":13,"./MediaService":14,"./ResizeFunctions":15}]},{},[6])(6)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).behaviors=t()}}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return o(i||t)},h,h.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){var n=function(){function t(t){t.find("*").attr("pip-cancel-drag","pip-cancel-drag")}return t}(),o=function(){return{restrict:"A",link:function(t,e,i){new n(e)}}};angular.module("pipDraggable").directive("pipCancelDrag",o)},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s,r,a){this.$rootScope=t,this.$parse=e,this.$document=i,this.$window=n,this.pipDraggable=o,this.$scope=s,this.$element=r,this.$attrs=a,this.LONG_PRESS=50,this._centerAnchor=!1,this._hasTouch="ontouchstart"in window||window.DocumentTouch,this._pressEvents="touchstart mousedown",this._moveEvents="touchmove mousemove",this._releaseEvents="touchend mouseup",this._data=null,this._dragOffset=null,this._dragEnabled=!1,this._pressTimer=null,this._elementStyle={},this.scrollParent=!1,this.scrollContainer=angular.element(window),this._deregisterRootMoveListener=angular.noop,s.value=a.ngDrag,this._myid=s.$id,this.onDragStartCallback=e(a.pipDragStart)||null,this.onDragMoveCallbak=e(a.pipDragMove)||null,this.onDragStopCallback=e(a.pipDragStop)||null,this.onDragSuccessCallback=e(a.pipDragSuccess)||null,this.allowTransform=!!angular.isDefined(a.allowTransform)&&s.$eval(a.allowTransform),this.getDragData=e(a.pipDragData),this.verticalScroll=a.pipVerticalScroll||!0,this.horizontalScroll=a.pipHorizontalScroll||!0,this.activationDistance=parseFloat(a.pipActivationDistance)||75,this.scrollDistance=parseFloat(a.pipActivationDistance)||50,this.scrollContainerGetter=e(a.pipScrollContainer),this.$element.css("cursor","move"),this.initialize()}return t.prototype.initialize=function(){this.$element.attr("pip-draggable","false");var t;t=this.$element[0].querySelectorAll?angular.element(this.$element[0].querySelectorAll("[pip-drag-handle]")):this.$element.find("[pip-drag-handle]"),t.length&&(this._dragHandle=t),this.toggleListeners(!0),this.scrollParent?this.scrollContainer=angular.element(this.$element.parent()):this.$attrs.pipScrollContainer?this.scrollContainer=angular.element(this.scrollContainerGetter(this.$scope)):this.scrollContainer=angular.element(window)},t.prototype.toggleListeners=function(t){var e=this;t&&(this.$scope.$on("$destroy",function(){e.onDestroy(t)}),this.$scope.$watch(this.$attrs.pipDrag,function(t,i){e.onEnableChange(t,i)}),this.$scope.$watch(this.$attrs.pipCenterAnchor,function(t,i){e.onCenterAnchor(t,i)}),this._dragHandle?this._dragHandle.on(this._pressEvents,function(t){e.onpress(t)}):this.$element.on(this._pressEvents,function(t){e.onpress(t)}),this._hasTouch||"img"!=this.$element[0].nodeName.toLowerCase()||this.$element.on("mousedown",function(){return!1}))},t.prototype.onDestroy=function(t){this.toggleListeners(!1)},t.prototype.onEnableChange=function(t,e){this._dragEnabled=t},t.prototype.onCenterAnchor=function(t,e){angular.isDefined(t)&&(this._centerAnchor=t||"true")},t.prototype.isClickableElement=function(t){return angular.isDefined(angular.element(t.target).attr("pip-cancel-drag"))},t.prototype.onpress=function(t){var e=this;this._dragEnabled&&(this.isClickableElement(t)||"mousedown"==t.type&&0!=t.button||(this.saveElementStyles(),this._hasTouch?(this.cancelPress(),this._pressTimer=setTimeout(function(){e.cancelPress(),e.onlongpress(t)},this.LONG_PRESS),this.$document.on(this._moveEvents,function(){e.cancelPress()}),this.$document.on(this._releaseEvents,function(){e.cancelPress()})):this.onlongpress(t)))},t.prototype.saveElementStyles=function(){this._elementStyle.left=this.$element.css("left")||0,this._elementStyle.top=this.$element.css("top")||0,this._elementStyle.position=this.$element.css("position"),this._elementStyle.width=this.$element.css("width")},t.prototype.cancelPress=function(){var t=this;clearTimeout(this._pressTimer),this.$document.off(this._moveEvents,function(){t.cancelPress()}),this.$document.off(this._releaseEvents,function(){t.cancelPress()})},t.prototype.onlongpress=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.offset=this.$element[0].getBoundingClientRect(),this.allowTransform?this._dragOffset=this.offset:this._dragOffset={left:document.body.scrollLeft,top:document.body.scrollTop},this.$element.centerX=this.$element[0].offsetWidth/2,this.$element.centerY=this.$element[0].offsetHeight/2,this._mx=this.pipDraggable.inputEvent(t).pageX,this._my=this.pipDraggable.inputEvent(t).pageY,this._mrx=this._mx-this.offset.left,this._mry=this._my-this.offset.top,this._centerAnchor?(this._tx=this._mx-this.$element.centerX-this.$window.pageXOffset,this._ty=this._my-this.$element.centerY-this.$window.pageYOffset):(this._tx=this._mx-this._mrx-this.$window.pageXOffset,this._ty=this._my-this._mry-this.$window.pageYOffset),this.$document.on(this._moveEvents,function(t){e.onmove(t)}),this.$document.on(this._releaseEvents,function(t){e.onrelease(t)}),this._deregisterRootMoveListener=this.$rootScope.$on("draggable:_triggerHandlerMove",function(t,i){e.onmove(i)}))},t.prototype.onmove=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.$element.hasClass("pip-dragging")||(this._data=this.getDragData(this.$scope),this.$element.addClass("pip-dragging"),this.$rootScope.$broadcast("draggable:start",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data}),this.onDragStartCallback&&this.$scope.$apply(function(){e.onDragStartCallback(e.$scope,{$data:e._data,$event:t})})),this._mx=this.pipDraggable.inputEvent(t).pageX,this._my=this.pipDraggable.inputEvent(t).pageY,(this.horizontalScroll||this.verticalScroll)&&this.dragToScroll(),this._centerAnchor?(this._tx=this._mx-this.$element.centerX-this._dragOffset.left,this._ty=this._my-this.$element.centerY-this._dragOffset.top):(this._tx=this._mx-this._mrx-this._dragOffset.left,this._ty=this._my-this._mry-this._dragOffset.top),this.moveElement(this._tx,this._ty),this.$rootScope.$broadcast("draggable:move",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data,uid:this._myid,dragOffset:this._dragOffset}),this.onDragMoveCallbak&&this.$scope.$apply(function(){e.onDragMoveCallbak(e.$scope,{$data:e._data,$event:angular.extend(t)})}))},t.prototype.onrelease=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.$rootScope.$broadcast("draggable:end",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data,callback:this.onDragComplete,uid:this._myid}),this.$element.removeClass("pip-dragging"),this.$element.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),this.reset(),this.$document.off(this._moveEvents),this.$document.off(this._releaseEvents),this.onDragStopCallback&&this.$scope.$apply(function(){e.onDragStopCallback(e.$scope,{$data:e._data,$event:t})}),this._deregisterRootMoveListener())},t.prototype.onDragComplete=function(t){var e=this;this.onDragSuccessCallback&&this.$scope.$apply(function(){e.onDragSuccessCallback(e.$scope,{$data:e._data,$event:t})})},t.prototype.reset=function(){this.allowTransform?this.$element.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):this.$element.css({position:this._elementStyle.position,top:this._elementStyle.top,left:this._elementStyle.left,"z-index":"",width:this._elementStyle.width})},t.prototype.moveElement=function(t,e){var i=this.$element.css("width");this.allowTransform?this.$element.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+e+")"}):this.$element.css({left:t+"px",top:e+"px",position:"fixed","z-index":100,width:i})},t.prototype.dragToScroll=function(){var t=0,e=0,i=function(t){return t.offset()||{left:0,top:0}};if(this.horizontalScroll){var n=i(this.scrollContainer).left,o=this.scrollContainer.innerWidth(),s=n+o;this._mx-n<this.activationDistance?t=-this.scrollDistance:s-this._mx<this.activationDistance&&(t=this.scrollDistance)}if(this.verticalScroll){var r=i(this.scrollContainer).top,a=this.scrollContainer.innerHeight(),c=r+a;this._my-r<this.activationDistance?e=30-this.scrollDistance:c-this._my<this.activationDistance&&(e=this.scrollDistance-30)}if(0!==t||0!==e){var l=this.scrollContainer.scrollLeft(),h=this.scrollContainer.scrollTop();this.scrollContainer.scrollLeft(l+t),this.scrollContainer.scrollTop(h+e)}},t}(),o=function(t,e,i,o,s){return{restrict:"A",link:function(r,a,c){new n(t,e,i,o,s,r,a,c)}}};o.$inject=["$rootScope","$parse","$document","$window","pipDraggable"],angular.module("pipDraggable").directive("pipDrag",o)},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.inputEvent=function(t){return angular.isDefined(t.touches)?t.touches[0]:angular.isDefined(t.originalEvent)&&angular.isDefined(t.originalEvent.touches)?t.originalEvent.touches[0]:t},t}();angular.module("pipDraggable").service("pipDraggable",n)},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s,r){this.$parse=t,this.$document=e,this.$timeout=i,this.pipDraggable=n,this.$scope=o,this.$element=s,this.$attrs=r,o.value=r.pipDrop,o.isTouching=!1,this._myid=o.$id,this.onDropCallback=t(r.pipDropSuccess),this.onDragStartCallback=t(r.pipDragStart),this.onDragStopCallback=t(r.pipDragStop),this.onDragMoveCallback=t(r.pipDragMove),this.onEnterCallback=t(r.pipEnter),this.onLeaveCallback=t(r.pipLeave),this.onDiactiveCallback=t(r.pipDiactive),this.initialize()}return t.prototype.initialize=function(){this.toggleListeners(!0)},t.prototype.toggleListeners=function(t){var e=this;t&&(this.$scope.$watch(this.$attrs.pipDrop,function(t,i){e.onEnableChange(t,i)}),this.$scope.$on("$destroy",function(t){e.onDestroy(t)}),this.$scope.$on("draggable:start",function(t,i){e.onDragStart(t,i)}),this.$scope.$on("draggable:move",function(t,i){e.onDragMove(t,i)}),this.$scope.$on("draggable:end",function(t,i){e.onDragEnd(t,i)}))},t.prototype.onDestroy=function(t){this.toggleListeners(!1)},t.prototype.onEnableChange=function(t,e){this._dropEnabled=t},t.prototype.onDragStart=function(t,e){var i=this;this._dropEnabled&&(this.isTouching(e.x,e.y,e.element,t,e),this.$attrs.pipDragStart&&this.$timeout(function(){i.onDragStartCallback(i.$scope,{$data:e.data,$event:e})}))},t.prototype.onDragMove=function(t,e){var i=this;this._dropEnabled&&(this.isTouching(e.x,e.y,e.element,t,e),this.$attrs.pipDragMove&&this.$timeout(function(){i.onDragMoveCallback(i.$scope,{$data:e.data,$event:e})}))},t.prototype.onDragEnd=function(t,e){var i=this;if(!this._dropEnabled)return void this.updateDragStyles(!1,e.element);this.isTouching(e.x,e.y,e.element,t,e)&&(e.callback&&e.callback(e),this.$attrs.pipDropSuccess&&this.$timeout(function(){i.onDropCallback(i.$scope,{$data:e.data,$event:e,$target:i.$scope.$eval(i.$scope.value)})}),this.$attrs.pipDiactive&&this.$timeout(function(){i.onDiactiveCallback(i.$scope,{$data:e.data,$event:e,$target:i.$scope.$eval(i.$scope.value)})})),this.$attrs.pipDragStop&&this.$timeout(function(){i.onDragStopCallback(i.$scope,{$data:e.data,$event:e})}),this.updateDragStyles(!1,e.element)},t.prototype.isTouching=function(t,e,i,n,o){var s=this.hitTest(t,e);return s!==this.$scope.isTouching&&(s?this.onEnterCallback(this.$scope,{$data:o.data,$event:o,$target:this.$scope.$eval(this.$scope.value)}):this.onLeaveCallback(this.$scope,{$data:o.data,$event:o,$target:this.$scope.$eval(this.$scope.value)})),this.$scope.isTouching=s,s&&(this._lastDropTouch=this.$element),this.updateDragStyles(s,i),s},t.prototype.updateDragStyles=function(t,e){t?(this.$element.addClass("pip-drag-enter"),e.addClass("pip-drag-over")):this._lastDropTouch==this.$element&&(this._lastDropTouch=null,this.$element.removeClass("pip-drag-enter"),e.removeClass("pip-drag-over"))},t.prototype.hitTest=function(t,e){var i=this.$element[0].getBoundingClientRect();return t-=this.$document[0].body.scrollLeft+this.$document[0].documentElement.scrollLeft,e-=this.$document[0].body.scrollTop+this.$document[0].documentElement.scrollTop,t>=i.left&&t<=i.right&&e<=i.bottom&&e>=i.top},t}(),o=function(t,e,i,o){return{restrict:"A",link:function(s,r,a){new n(t,e,i,o,s,r,a)}}};o.$inject=["$parse","$document","$timeout","pipDraggable"],angular.module("pipDraggable").directive("pipDrop",o)},{}],5:[function(t,e,i){var n=function(){function t(t){this.$element=t,this.initialize()}return t.prototype.initialize=function(){this.$element.attr("pip-draggable","false"),this.toggleListeners(!0)},t.prototype.toggleListeners=function(t){var e=this;t&&this.$element.on("mousedown touchstart touchmove touchend touchcancel",function(t){e.absorbEvent_(t)})},t.prototype.absorbEvent_=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1},t}(),o=function(){return{restrict:"A",link:function(t,e,i){new n(e)}}};angular.module("pipDraggable").directive("pipPreventDrag",o)},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipDraggable",[]),t("./DraggableService"),t("./Drag"),t("./Drop"),t("./PreventDrag"),t("./CancelDrag")},{"./CancelDrag":1,"./Drag":2,"./DraggableService":3,"./Drop":4,"./PreventDrag":5}],7:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$scope=t,this.$element=e,this.$timeout=n,this.$mdConstant=o,this.$window=s,this.opacityDelta=.4,this.opacityLimit=.5,e.on("keydown",function(t){r.keydownListener(t)}),n(function(){r.init()}),i.ngModel&&t.$watch("ngModel",function(){n(this.init)},!0),i.pipFocusedData&&t.$watch("pipFocusedData",function(){n(this.init)},!0)}return t.prototype.init=function(){var t=this,e=this.$scope.pipWithHidden&&this.$scope.pipWithHidden()?".pip-focusable":".pip-focusable:visible";this.onFocusClass=this.$scope.pipFocusedClass?this.$scope.pipFocusedClass():"",this.controls=this.$element.find(e),this.controlsLength=this.controls.length,this.checkTabindex(this.controls),this.controls.on("focus",function(e){var i=e.currentTarget;$(i).hasClass("md-focused")||(t.$scope.pipRebind&&t.$scope.pipRebind()&&t.init(),t.$element.addClass("pip-focused-container"),$(i).addClass(t.onFocusClass),t.$scope.pipFocusedOpacity&&t.$scope.pipFocusedOpacity()?$(i).addClass("md-focused md-focused-opacity"):(t.color=$(i).css("backgroundColor"),t.oldBackgroundColor=t.color,$(i).css("backgroundColor",t.rgba(t.color)),$(i).addClass("md-focused")))}).on("focusout",function(e){var i=e.currentTarget;$(i).hasClass("md-focused")&&(t.$element.removeClass("pip-focused-container"),$(i).removeClass(t.onFocusClass),t.$scope.pipFocusedOpacity&&t.$scope.pipFocusedOpacity()?$(i).removeClass("md-focused"):($(i).css("backgroundColor",t.oldBackgroundColor),$(i).removeClass("md-focused md-focused-opacity")))})},t.prototype.rgba=function(t){if(this.$scope.pipFocusedColor&&this.$scope.pipFocusedColor())return this.$scope.pipFocusedColor();var e=t.split("(")[1].split(")")[0].split(",");if(!e||e.length<3)return"";var i,n,o,s;return s=3==e.length?1:parseFloat(e[3]),i=e[0],n=e[1],o=e[2],s<this.opacityLimit?s+=this.opacityDelta:s-=this.opacityDelta,"rgba("+i+", "+n+", "+o+", "+s+")"},t.prototype.setTabindex=function(t,e){t.attr("tabindex",e)},t.prototype.checkTabindex=function(t){-1==_.findIndex(t,function(t){return t.tabindex>-1})&&t.length>0&&this.$scope.pipFocusedTabindex&&this.setTabindex(angular.element(t[0]),this.$scope.pipFocusedTabindex())},t.prototype.keydownListener=function(t){var e=t.which||t.keyCode;if(e==this.$mdConstant.KEY_CODE.LEFT_ARROW||e==this.$mdConstant.KEY_CODE.UP_ARROW||e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW){t.preventDefault();var i=e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW?1:-1,n=this.controls.index(this.controls.filter(".md-focused"))+i;n>=0&&n<this.controlsLength&&this.controls[n].focus()}},t}(),o=function(t,e,i){return{scope:{pipFocusedColor:"&?",pipFocusedClass:"&?",pipFocusedRebind:"&?",pipFocusedTabindex:"&?",pipFocusedOpacity:"&?",pipFocusedData:"&?",pipWithHidden:"&?",pipRebind:"&?"},link:function(o,s,r){new n(o,s,r,t,e,i)}}};o.$inject=["$timeout","$mdConstant","$window"],angular.module("pipFocused",[]).directive("pipFocused",o)},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./unsaved_changes/UnsavedChanges"),t("./shortcuts/index"),t("./focused/Focused"),t("./draggable/index"),t("./selected/Selected"),t("./infinite_scroll/InfiniteScroll"),angular.module("pipBehaviors",["pipFocused","pipSelected","pipInfiniteScroll","pipUnsavedChanges","pipDraggable","pipShortcuts"]),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./shortcuts/index"))},{"./draggable/index":6,"./focused/Focused":7,"./infinite_scroll/InfiniteScroll":9,"./selected/Selected":10,"./shortcuts/index":16,"./unsaved_changes/UnsavedChanges":17}],9:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$rootScope=t,this.$window=e,this.$interval=i,this.$scope=n,this.$element=o,this.$attrs=s,this.THROTTLE_MILLISECONDS=500,this.checkWhenEnabled=null,this.scrollContainer=null,this.immediateCheck=!0,this.scrollDistance=null,this.scrollEnabled=null,this.unregisterEventListener=null,this.useDocumentBottom=!1,this.windowElement=null,this.windowElement=angular.element(e),this.onContainerScrollThrottle=_.throttle(function(){r.onContainerScroll()},this.THROTTLE_MILLISECONDS),n.$on("$destroy",function(){if(r.scrollContainer.unbind("scroll",function(){r.onContainerScrollThrottle()}),null!==r.unregisterEventListener)return r.unregisterEventListener(),r.unregisterEventListener=null}),n.$watch("pipScrollDistance",function(t){r.handleScrollDistance(t)}),this.handleScrollDistance(n.pipScrollDistance),n.$watch("pipScrollDisabled",function(t){r.handleScrollDisabled(t)}),this.handleScrollDisabled(n.pipScrollDisabled),n.$watch("pipScrollUseDocumentBottom",function(t){r.handleScrollUseDocumentBottom(t)}),this.handleScrollUseDocumentBottom(n.pipScrollUseDocumentBottom),this.changeContainer(this.windowElement),n.pipScrollListenForEvent&&(this.unregisterEventListener=t.$on(n.pipScrollListenForEvent,function(){r.onContainerScrollThrottle()})),n.$watch("pipScrollContainer",function(t){t!=r.scrollContainer&&r.handleScrollContainer(t)}),this.handleScrollContainer(n.pipScrollContainer||[]),null!==s.pipScrollParent&&this.changeContainer(angular.element(o.parent())),null!==s.pipScrolImmediateCheck&&(this.immediateCheck=n.$eval(s.pipScrolImmediateCheck)),i(function(){if(this.immediateCheck)return this.onContainerScrollThrottle()},0,1)}return t.prototype.height=function(t){return t=t[0]||t,isNaN(t.offsetHeight)?t.document.documentElement.clientHeight:t.offsetHeight},t.prototype.offsetTop=function(t){if(t[0].getBoundingClientRect&&!t.css("none"))return t[0].getBoundingClientRect().top+this.pageYOffset(t)},t.prototype.pageYOffset=function(t){return t=t[0]||t,isNaN(window.pageYOffset)?t.document.documentElement.scrollTop:t.ownerDocument.defaultView.pageYOffset},t.prototype.onContainerScroll=function(){var t,e,i,n,o,s=this;return this.scrollContainer===this.windowElement?(t=this.height(this.scrollContainer)+this.pageYOffset(this.scrollContainer[0].document.documentElement),i=this.offsetTop(this.$element)+this.height(this.$element)):(t=this.height(this.scrollContainer),e=0,void 0!==this.offsetTop(this.scrollContainer)&&(e=this.offsetTop(this.scrollContainer)),i=this.offsetTop(this.$element)-e+this.height(this.$element)),this.useDocumentBottom&&(i=this.height((this.$element[0].ownerDocument||this.$element[0].document).documentElement)),n=i-t,o=n<=this.height(this.scrollContainer)*this.scrollDistance+1,o?(this.checkWhenEnabled=!0,this.scrollEnabled?this.$scope.$$phase||this.$rootScope.$$phase?this.$scope.pipInfiniteScroll():this.$scope.$apply(function(){s.$scope.pipInfiniteScroll()}):void 0):this.checkWhenEnabled=!1},t.prototype.handleScrollDistance=function(t){return this.scrollDistance=parseFloat(t)||0},t.prototype.handleScrollDisabled=function(t){this.scrollEnabled=!t,this.scrollEnabled&&this.checkWhenEnabled&&(this.checkWhenEnabled=!1,this.onContainerScrollThrottle())},t.prototype.handleScrollUseDocumentBottom=function(t){return this.useDocumentBottom=t},t.prototype.changeContainer=function(t){var e=this;if(this.scrollContainer&&this.scrollContainer.unbind("scroll",function(){e.onContainerScrollThrottle()}),this.scrollContainer=t,t)return this.scrollContainer.bind("scroll",function(){e.onContainerScrollThrottle()})},t.prototype.handleScrollContainer=function(t){if(null!=t&&0!==t.length){if(t instanceof HTMLElement?t=angular.element(t):"function"==typeof t.append?t=angular.element(t[t.length-1]):"string"==typeof t&&(t=this.$element.parents().find(t)),null!=t&&(!Array.isArray(t)||Array.isArray(t)&&t.length>0))return this.changeContainer(t);throw new Error("Invalid pip-scroll-container attribute.")}},t}(),o=function(t,e,i){return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(o,s,r){new n(t,e,i,o,s,r)}}};o.$inject=["$rootScope","$window","$interval"],angular.module("pipInfiniteScroll",[]).directive("pipInfiniteScroll",o)},{}],10:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$mdConstant=e,this.$timeout=i,this.$scope=n,this.$element=o,this.$attrs=s,this.touchBoundary=10,this.tapdelay=200,this.tapTimeout=700,this.indexGetter=s.pipSelected?t(s.pipSelected):null,this.indexSetter=this.indexGetter?this.indexGetter.assign:null,this.idGetter=s.pipSelectedId?t(s.pipSelectedId):null,this.idSetter=this.idGetter?this.idGetter.assign:null,this.changeGetter=s.pipSelect?t(s.pipSelect):null,this.enterSpaceGetter=s.pipEnterSpacePress?t(s.pipEnterSpacePress):null,this.noScroll=s.pipNoScroll,this.modifier=s.pipSkipHidden?":visible":"",this.className=s.pipTreeList?".pip-selectable-tree":".pip-selectable",this.selectedIndex=this.indexGetter(n),this.currentElementTabinex=o.attr("tabindex"),this.pipSelectedWatch=s.pipSelectedWatch,this.isScrolled=!1,o.attr("tabindex",this.currentElementTabinex||0),o.on("click",this.className,function(t){r.onClickEvent(t)}),o.on("touchstart",this.className,function(t){r.onTouchStart(t)}),o.on("touchmove",this.className,function(t){r.onTouchMove(t)}),o.on("touchend",this.className,function(t){r.onTouchEnd(t)}),o.on("touchcancel",this.className,function(t){r.onTouchCancel(t)}),o.on("keydown",function(t){r.onKeyDown(t)}),o.on("focusin",function(t){r.onFocusIn(t)}),o.on("focusout",function(t){r.onFocusOut(t)}),s.pipTreeList?n.$watch(this.idGetter,function(t){i(function(){r.selectItem({itemId:t,raiseEvent:!0})},0)}):n.$watch(this.indexGetter,function(t){r.selectItem({itemIndex:t})}),this.pipSelectedWatch&&n.$watch(this.pipSelectedWatch,function(){i(function(){r.selectedIndex=r.indexGetter(n),r.selectItem({itemIndex:r.selectedIndex})},100)}),this.selectItem({itemIndex:this.selectedIndex,items:o.find(this.className)})}return t.prototype.selectItem=function(t){if(!this.isScrolled){var e=t.itemIndex,i=t.itemId,n=t.items||this.$element.find(this.className+this.modifier),o=n.length,s=function(){return t.item?t.item:(void 0===e&&-1===e&&(e=n.index(n.filter("[pip-id="+i+"]"))),e>=0&&e<o&&n[e])},r=t.raiseEvent;s=s(),s&&(this.$element.find(this.className).removeClass("selected md-focused"),s=angular.element(s).addClass("selected md-focused").focus(),this.noScroll||this.scrollToItem(s),r&&this.defineSelectedIndex(n))}},t.prototype.defineSelectedIndex=function(t){var e=this,i=this.selectedIndex;this.selectedIndex=-1;for(var n=0;n<t.length;n++)if($(t[n]).hasClass("selected")){this.selectedIndex=n;break}var o=function(){var i=angular.element(t[e.selectedIndex]),n=i.attr("pip-id");e.indexSetter&&e.indexSetter(e.$scope,e.selectedIndex),e.idSetter&&e.idSetter(e.$scope,n),s()},s=function(){var n=angular.element(t[e.selectedIndex]),o=n.attr("pip-id");e.changeGetter&&e.changeGetter(e.$scope,{$event:{target:e.$element,item:n,index:e.selectedIndex,id:o,newIndex:e.selectedIndex,oldIndex:i}})};i!=this.selectedIndex&&-1!==this.selectedIndex?this.$scope.$apply(function(){o()}):this.$scope.$apply(function(){s()})},t.prototype.scrollToItem=function(t){var e=this;if(!this.noScroll&&t.offset()){var i=this.$element.offset().top,n=this.$element.height(),o=i+n,s=t.offset().top,r=t.outerHeight(!0),a=s+r,c=this.$element.scrollTop();this.isScrolled=!0,this.$timeout(function(){e.isScrolled=!1},100),i>s?this.$element.scrollTop(c+s-i):o<a&&this.$element.scrollTop(c+a-o)}},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},t.prototype.onClickEvent=function(t){this.selectItem({item:t.currentTarget,raiseEvent:!0})},t.prototype.onTouchStart=function(t){var e=t.originalEvent;if(e.targetTouches.length>1)return!0;var i=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=i,this.touchStartX=n.pageX,this.touchStartY=n.pageY,!0},t.prototype.onTouchMove=function(t){if(!this.trackingClick)return!0;var e=t.originalEvent;return(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},t.prototype.onTouchEnd=function(t){this.targetElement;if(!this.trackingClick)return!0;var e=t.originalEvent;return e.timeStamp-this.lastClickTime<this.tapdelay?(this.cancelNextClick=!0,!0):e.timeStamp-this.trackingClickStart>this.tapTimeout||(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.selectItem({item:t.currentTarget,raiseEvent:!0}),!1)},t.prototype.onTouchCancel=function(t){this.trackingClick=!1,this.targetElement=null},t.prototype.onKeyDown=function(t){var e=t.which||t.keyCode;if(e==this.$mdConstant.KEY_CODE.ENTER||e==this.$mdConstant.KEY_CODE.SPACE)t.preventDefault(),t.stopPropagation(),this.enterSpaceGetter&&this.enterSpaceGetter(this.$scope,{$event:{target:this.$element,index:this.selectedIndex,item:this.$element.find(".selected")}});else if(e==this.$mdConstant.KEY_CODE.LEFT_ARROW||e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.UP_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW){t.preventDefault(),t.stopPropagation();var i=this.$element.find(this.className+this.modifier),n=e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW?1:-1,o=this.selectedIndex+n;this.selectItem({itemIndex:o,items:i,raiseEvent:!0})}},t.prototype.onFocusIn=function(t){var e,i=this.$element.find(this.className+".selected");i.addClass("md-focused"),0===i.length&&(this.selectedIndex=this.indexGetter(this.$scope),e=this.$element.find(this.className+this.modifier),this.selectItem({itemIndex:this.selectedIndex||0,items:e,raiseEvent:!0}))},t.prototype.onFocusOut=function(t){this.$element.find(this.className+".md-focused"+this.modifier).removeClass("md-focused")},t}(),o=function(t,e,i){return{restrict:"A",scope:!1,link:function(o,s,r){new n(t,e,i,o,s,r)}}};o.$inject=["$parse","$mdConstant","$timeout"],angular.module("pipSelected",[]).directive("pipSelected",o)},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.ShortcutItem=n;var o=function(){function t(){this.globalShortcuts=[],this.localShortcuts=[],this.defaultOptions=null}return t}();i.ShortcutsConfig=o},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();n.Keydown="keydown",n.Keyup="keyup",n.Keypress="keypress",i.KeyboardEvent=n;var o=function(){function t(){}return t}();i.ShortcutOptions=o;var s=function(){function t(t,e,i,n){"ngInject";var o=this;this.shift_nums={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},this.special_keys={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},this.modifiers={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}},this.target=t,this.shorcut=e,this.event=i.Type,this.option=i,this.callback=n,this.eventCallback=function(t){var e,i=t||window.event;if(o.option.DisableInInput){var n;if(i.target?n=i.target:i.srcElement&&(n=i.srcElement),3==n.nodeType&&(n=n.parentNode),"INPUT"==n.tagName||"TEXTAREA"==n.tagName)return}i.keyCode?e=i.keyCode:i.which&&(e=i.which);var s=String.fromCharCode(e).toLowerCase();188==e&&(s=","),190==e&&(s=".");var r=o.shorcut.split("+"),a=0;i.ctrlKey&&(o.modifiers.ctrl.pressed=i.ctrlKey),i.shiftKey&&(o.modifiers.shift.pressed=i.shiftKey),i.altKey&&(o.modifiers.alt.pressed=i.altKey),i.metaKey&&(o.modifiers.meta.pressed=i.metaKey);var c=0;for(c=0;c<r.length;c++){var l=r[c];"ctrl"==l||"control"==l?(a++,o.modifiers.ctrl.wanted=!0):"shift"==l?(a++,o.modifiers.shift.wanted=!0):"alt"==l?(a++,o.modifiers.alt.wanted=!0):"meta"==l?(a++,o.modifiers.meta.wanted=!0):l.length>1?o.special_keys[l]==e&&a++:o.option.Keycode?o.option.Keycode==e&&a++:s==l?a++:o.shift_nums[s]&&i.shiftKey&&(s=o.shift_nums[s])==l&&a++}if(a==r.length&&o.modifiers.ctrl.pressed==o.modifiers.ctrl.wanted&&o.modifiers.shift.pressed==o.modifiers.shift.wanted&&o.modifiers.alt.pressed==o.modifiers.alt.wanted&&o.modifiers.meta.pressed==o.modifiers.meta.wanted&&(o.callback(i),!o.option.Propagate))return i.cancelBubble=!0,i.returnValue=!1,i.stopPropagation&&(i.stopPropagation(),i.preventDefault()),!1;o.modifiers.ctrl.pressed=!1,o.modifiers.shift.pressed=!1,o.modifiers.alt.pressed=!1,o.modifiers.meta.pressed=!1}}return t.$inject=["element","shorcutCombination","option","callback"],t}();i.Shortcut=s},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Shortcut"),o=function(){function t(t,e){"ngInject";this._shortcuts={},this._log=t,this._defaultOption=e?_.defaults(e,this.getDefaultOption()):this.getDefaultOption()}return t.$inject=["$log","option"],t.prototype.getDefaultOption=function(){return{Type:n.KeyboardEvent.Keydown,Propagate:!1,DisableInInput:!1,Target:document,Keycode:null}},Object.defineProperty(t.prototype,"shortcuts",{get:function(){return this._shortcuts},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e,i){this.remove(t);var o=i?_.defaults(i,this._defaultOption):this._defaultOption,s=t.toLowerCase(),r=o.Target;if(!(r="string"==typeof o.Target?document.getElementById(o.Target):o.Target))return void this._log.error("Register shortcut: element undentified!")
;if(!s)return void this._log.error("Register shortcut: shortcut combination undentified!");if(!e)return void this._log.error("Register shortcut: shorcut callback undentified!");var a=new n.Shortcut(r,s,o,e);this._shortcuts[s]=a,r.addEventListener?r.addEventListener(o.Type,a.eventCallback,!1):r.attachEvent?r.attachEvent("on"+o.Type,a.eventCallback):r.on(o.Type,a.eventCallback)},t.prototype.remove=function(t){var e=t.toLowerCase(),i=this._shortcuts[e];if(delete this._shortcuts[e],i){var n=i.event,o=i.target,s=i.eventCallback;o.detachEvent?o.detachEvent("on"+n,s):o.removeEventListener?o.removeEventListener(n,s,!1):o.off(n,s)}},t}(),s=function(){function t(){}return Object.defineProperty(t.prototype,"option",{get:function(){return this._option},set:function(t){this._option=t||new n.ShortcutOptions},enumerable:!0,configurable:!0}),t.prototype.$get=["$log",function(t){"ngInject";return null==this._service&&(this._service=new o(t,this._option)),this._service}],t}();angular.module("pipShortcuts").provider("pipShortcutBinding",s)},{"./Shortcut":12}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s){"ngInject";var r=this;return e.pipShortcutAction?(this.actionShortcuts=o(e.pipShortcutAction),e.pipShortcutName&&_.isString(e.pipShortcutName)?(this.nameShortcuts=e.pipShortcutName,this.options=e.pipShorcutOptions?e.pipShorcutOptions:{},this.options.Target=t,void s.add(this.nameShortcuts,function(t){r.actionShortcuts(i,{$event:{e:t}})},this.options)):void n.error("Shortcut name does not set.")):void n.error("Shortcut action does not set.")}return t.$inject=["$element","$attrs","$scope","$log","$parse","pipShortcutBinding"],t.prototype.keypressShortcut=function(t){this.actionShortcuts()},t.prototype.$onInit=function(){},t}(),o=function(){return{restrict:"A",scope:!1,controller:n}};angular.module("pipShortcuts").directive("pipShortcut",o)},{}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./IShortcutsService");i.ShortcutsChangedEvent="pipShortcutsChanged";var o=function(){function t(t,e,i,n,o,s){"ngInject";this.$rootScope=e,this.$window=i,this.$location=n,this.$injector=o,this.pipShortcutBinding=s,this._config=t,this._oldConfig=_.cloneDeep(this._config),this.addShortcuts(this._config.globalShortcuts),this.addShortcuts(this._config.localShortcuts)}return t.$inject=["config","$rootScope","$window","$location","$injector","pipShortcutBinding"],t.prototype.sendChangeEvent=function(){this.removeShortcuts(this._oldConfig.globalShortcuts),this.removeShortcuts(this._oldConfig.localShortcuts),this.addShortcuts(this.config.globalShortcuts),this.addShortcuts(this.config.localShortcuts),this.$rootScope.$emit(i.ShortcutsChangedEvent,this.config),this._oldConfig=_.cloneDeep(this.config)},t.prototype.removeShortcuts=function(t){var e=this;_.each(t,function(t){e.pipShortcutBinding.remove(t.shortcut)})},t.prototype.keypressShortcut=function(t,e){if(!t.access||!_.isFunction(t.access)||t.access(e)){if(t.keypress)return void t.keypress(e);if(t.href)return void(this.$window.location.href=t.href);if(t.url)return void this.$location.url(t.url);if(t.state){if(this.$injector.has("$state")){var i=this.$injector.get("$state");i.go(t.state,t.stateParams)}}else t.event?this.$rootScope.$broadcast(t.event):this.$rootScope.$broadcast("pipShortcutKeypress",t.shortcut)}},t.prototype.addShortcuts=function(t){var e=this,i=this.config.defaultOptions?this.config.defaultOptions:{};_.each(t,function(t){var n,o=t.options?t.options:i;n=t.target?t.target:t.targetId,n&&(o.Target=n),e.pipShortcutBinding.add(t.shortcut,function(i){e.keypressShortcut(t,i)},o)})},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._config.defaultOptions},set:function(t){this._config.defaultOptions=t||null,this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalShortcuts",{get:function(){return this._config.globalShortcuts},set:function(t){this._config.globalShortcuts=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localShortcuts",{get:function(){return this._config.localShortcuts},set:function(t){this._config.localShortcuts=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),t}(),s=function(){function t(){this._config=new n.ShortcutsConfig}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t||new n.ShortcutsConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._config.defaultOptions},set:function(t){this._config.defaultOptions=t||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalShortcuts",{get:function(){return this._config.globalShortcuts},set:function(t){this._config.globalShortcuts=t||[]},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope","$window","$location","$injector","pipShortcutBinding",function(t,e,i,n,s){"ngInject";return null==this._service&&(this._service=new o(this._config,t,e,i,n,s)),this._service}],t}();angular.module("pipShortcuts").provider("pipShortcuts",s)},{"./IShortcutsService":11}],16:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipShortcuts",["ngMaterial","ui.router"]),t("./ShortcutBindingService"),t("./ShortcutsService"),t("./ShortcutDirective"),n(t("./IShortcutsService")),n(t("./ShortcutsService"))},{"./IShortcutsService":11,"./ShortcutBindingService":13,"./ShortcutDirective":14,"./ShortcutsService":15}],17:[function(t,e,i){var n=function(){function t(t,e){e.onbeforeunload=function(){if(t.unsavedChangesAvailable())return t.unsavedChangesMessage};var i=t.$on("$stateChangeStart",function(i){t.unsavedChangesAvailable()&&!e.confirm(t.unsavedChangesMessage)?(_.isFunction(t.cancelLeave)&&t.cancelLeave(),i.preventDefault()):_.isFunction(t.afterLeave)&&t.afterLeave()});t.$on("$destroy",function(){e.onbeforeunload=null,i()})}return t}(),o=function(t){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave",cancelLeave:"&pipUnsavedChangesCancelLeave"},link:function(e){new n(e,t)}}};o.$inject=["$window"],angular.module("pipUnsavedChanges",[]).directive("pipUnsavedChanges",o)},{}]},{},[8])(8)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).controls=t()}}(function(){return function t(e,o,i){function s(r,a){if(!o[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(n)return n(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var c=o[r]={exports:{}};e[r][0].call(c.exports,function(t){var o=e[r][1][t];return s(o||t)},c,c.exports,t,e,o,i)}return o[r].exports}for(var n="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t,e,o){var i={ngDisabled:"<?ngDisabled",colors:"<pipColors",currentColor:"=ngModel",colorChange:"&?ngChange"},s=(function(){function t(){}}(),["purple","lightgreen","green","darkred","pink","yellow","cyan"]),n=function(){function t(t,e,o,i){this.$scope=t,this.$element=e,this.$timeout=i,this.class=o.class||""}return t.prototype.$onChanges=function(t){this.colors=t.colors&&_.isArray(t.colors.currentValue)&&0!==t.colors.currentValue.length?t.colors.currentValue:s,this.currentColor=this.currentColor||this.colors[0],this.currentColorIndex=this.colors.indexOf(this.currentColor),this.ngDisabled=t.ngDisabled.currentValue},t.prototype.selectColor=function(t){var e=this;this.ngDisabled||(this.currentColorIndex=t,this.currentColor=this.colors[this.currentColorIndex],this.$timeout(function(){e.$scope.$apply()}),this.colorChange&&this.colorChange())},t.prototype.enterSpacePress=function(t){this.selectColor(t.index)},t}(),r={bindings:i,templateUrl:"color_picker/ColorPicker.html",controller:n};angular.module("pipColorPicker",["pipControls.Templates"]).component("pipColorPicker",r)},{}],2:[function(t,e,o){function i(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}i.$inject=["$injector"],angular.module("pipControls.Translate",[]).filter("translate",i)},{}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e,o,i,s,n,r){var a=this;this.$scope=t,this.$element=e,this.$attrs=o,this.$parse=i,this.$timeout=s,this.$interval=n,this.pipImageSlider=r,this._index=0,this.DEFAULT_INTERVAL=4500,this.swipeStart=0,this._type=this.type(),this._interval=this.interval(),this.slideTo=this.slideToPrivate,e.addClass("pip-image-slider"),e.addClass("pip-animation-"+this._type),this.setIndex(),s(function(){a._blocks=e.find(".pip-animation-block"),a._blocks.length>0&&$(a._blocks[0]).addClass("pip-show")}),this.startInterval(),this._throttled=_.throttle(function(){r.toBlock(a._type,a._blocks,a._index,a._newIndex,a._direction),a._index=a._newIndex,a.setIndex()},700),o.id&&r.registerSlider(o.id,t),t.$on("$destroy",function(){a.stopInterval(),r.removeSlider(o.id)})}return t.$inject=["$scope","$element","$attrs","$parse","$timeout","$interval","pipImageSlider"],t.prototype.nextBlock=function(){this.restartInterval(),this._newIndex=this._index+1===this._blocks.length?0:this._index+1,this._direction="next",this._throttled()},t.prototype.prevBlock=function(){this.restartInterval(),this._newIndex=this._index-1<0?this._blocks.length-1:this._index-1,this._direction="prev",this._throttled()},t.prototype.slideToPrivate=function(t){t===this._index||t>this._blocks.length-1||(this.restartInterval(),this._newIndex=t,this._direction=t>this._index?"next":"prev",this._throttled())},t.prototype.setIndex=function(){this.$attrs.pipImageIndex&&(this.sliderIndex=this._index)},t.prototype.startInterval=function(){var t=this;this._timePromises=this.$interval(function(){t._newIndex=t._index+1===t._blocks.length?0:t._index+1,t._direction="next",t._throttled()},Number(this._interval||this.DEFAULT_INTERVAL))},t.prototype.stopInterval=function(){this.$interval.cancel(this._timePromises)},t.prototype.restartInterval=function(){this.stopInterval(),this.startInterval()},t}(),s=function(){return{scope:{sliderIndex:"=pipImageIndex",type:"&pipAnimationType",interval:"&pipAnimationInterval"},bindToController:!0,controller:i,controllerAs:"vm"}};angular.module("pipImageSlider").directive("pipImageSlider",s)},{}],4:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t){this.$timeout=t,this.ANIMATION_DURATION=550,this._sliders={}}return t.$inject=["$timeout"],t.prototype.registerSlider=function(t,e){this._sliders[t]=e},t.prototype.removeSlider=function(t){delete this._sliders[t]},t.prototype.getSliderScope=function(t){return this._sliders[t]},t.prototype.nextCarousel=function(t,e){t.addClass("pip-next"),this.$timeout(function(){t.addClass("animated").addClass("pip-show").removeClass("pip-next"),e.addClass("animated").removeClass("pip-show")},100)},t.prototype.prevCarousel=function(t,e){this.$timeout(function(){t.addClass("animated").addClass("pip-show"),e.addClass("animated").addClass("pip-next").removeClass("pip-show")},100)},t.prototype.toBlock=function(t,e,o,i,s){var n=$(e[o]),r=i,a=$(e[r]);"carousel"===t?($(e).removeClass("pip-next").removeClass("pip-prev").removeClass("animated"),!s||"prev"!==s&&"next"!==s?i&&i<o?this.prevCarousel(a,n):this.nextCarousel(a,n):"prev"===s?this.prevCarousel(a,n):this.nextCarousel(a,n)):(n.addClass("animated").removeClass("pip-show"),a.addClass("animated").addClass("pip-show"))},t}();angular.module("pipImageSlider.Service",[]).service("pipImageSlider",i)},{}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e){var o=this;t.on("click",function(){o.sliderId()&&o.direction()&&e.getSliderScope(o.sliderId()).vm[o.direction()+"Block"]()})}return t.$inject=["$element","pipImageSlider"],t}(),s=function(){return{scope:{direction:"&pipButtonType",sliderId:"&pipSliderId"},controllerAs:"$ctlr",bindToController:!0,controller:i}};angular.module("pipSliderButton",[]).directive("pipSliderButton",s)},{}],6:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e){var o=this;t.css("cursor","pointer"),t.on("click",function(){o.sliderId()&&void 0!==o.slideTo()&&e.getSliderScope(o.sliderId()).vm.slideTo(o.slideTo())})}return t.$inject=["$element","pipImageSlider"],t}(),s=function(){return{scope:{slideTo:"&pipSlideTo",sliderId:"&pipSliderId"},controllerAs:"$ctlr",bindToController:!0,controller:i}};angular.module("pipSliderIndicator",[]).directive("pipSliderIndicator",s)},{}],7:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),angular.module("pipImageSlider",["pipSliderButton","pipSliderIndicator","pipImageSlider.Service"]),t("./ImageSlider"),t("./ImageSliderService"),t("./SliderButton"),t("./SliderIndicator")},{"./ImageSlider":3,"./ImageSliderService":4,"./SliderButton":5,"./SliderIndicator":6}],8:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),t("./dependencies/TranslateFilter"),t("./color_picker/ColorPicker"),t("./image_slider"),t("./markdown/Markdown"),t("./popover"),t("./progress/RoutingProgress"),t("./toast"),angular.module("pipControls",["pipMarkdown","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipControls.Translate"])},{"./color_picker/ColorPicker":1,"./dependencies/TranslateFilter":2,"./image_slider":7,"./markdown/Markdown":9,"./popover":12,"./progress/RoutingProgress":13,"./toast":16}],9:[function(t,e,o){var i=function(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;e&&(e.setTranslations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),e.setTranslations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"}))};i.$inject=["$injector"];var s={text:"<pipText",isList:"<?pipList",clamp:"<?pipLineCount",rebind:"<?pipRebind"},n=(function(){function t(){}}(),function(){function t(t,e,o){"ngInject";this.$scope=t,this.$element=e,this._pipTranslate=o.has("pipTranslate")?o.get("pipTranslate"):null}return t.$inject=["$scope","$element","$injector"],t.prototype.$postLink=function(){this.bindText(this.text),this.$scope.$on("pipWindowResized",function(){this.bindText&&this.bindText(this._text(this._$scope))}),this.$element.addClass("pip-markdown")},t.prototype.$onChanges=function(t){var e=t.text.currentValue;this.rebind&&(this.text=e,this.bindText(this.text))},t.prototype.describeAttachments=function(t){var e="",o=[];return _.each(t,function(t){t.type&&"text"!==t.type&&(0===e.length&&this._pipTranslate&&(e=this._pipTranslate.translate("MARKDOWN_ATTACHMENTS")),o.indexOf(t.type)<0&&(o.push(t.type),e+=o.length>1?", ":" ",this._pipTranslate&&(e+=this._pipTranslate.translate(t.type))))}),e},t.prototype.bindText=function(t){var e,o,i,s,n;_.isArray(t)?(n=_.find(t,function(t){return"text"===t.type&&t.text}),e=n?n.text:this.describeAttachments(t)):e=t,o=this.clamp&&_.isNumber(this.clamp),o=o&&e&&e.length>0,s={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},e=marked(e||"",s),o&&(i=1.5*Number(this.clamp)),this.$element.html("<div"+(o?this.isList?'class="pip-markdown-content pip-markdown-list" style="max-height: '+i+'em">':' class="pip-markdown-content" style="max-height: '+i+'em">':this.isList?' class="pip-markdown-list">':">")+e+"</div>"),this.$element.find("a").attr("target","blank"),!this.isList&&o&&this.$element.append('<div class="pip-gradient-block"></div>')},t}()),r={controller:n,bindings:s};angular.module("pipMarkdown",["ngSanitize"]).run(i).component("pipMarkdown",r)},{}],10:[function(t,e,o){var i={params:"<pipParams"},s=function(){function t(t,e,o,i,s,n){var r=this;this.$scope=t,this.$timeout=i,this.$compile=s,this.$templateRequest=n,this.backdropElement=$(".pip-popover-backdrop"),this.backdropElement.on("click keydown scroll",function(){r.backdropClick()}),this.backdropElement.addClass(!1!==this.params.responsive?"pip-responsive":""),i(function(){r.position(),angular.extend(t,r.params.locals),r.params.template?(r.content=s(r.params.template)(t),o.find(".pip-popover").append(r.content),r.init()):r.$templateRequest(r.params.templateUrl,!1).then(function(e){r.content=s(e)(t),o.find(".pip-popover").append(r.content),r.init()})}),i(function(){r.calcHeight()},200),e.$on("pipPopoverResize",function(){r.onResize()}),$(window).resize(function(){r.onResize()})}return t.prototype.backdropClick=function(){this.params.cancelCallback&&this.params.cancelCallback(),this.closePopover()},t.prototype.closePopover=function(){var t=this;this.backdropElement.removeClass("opened"),this.$timeout(function(){t.backdropElement.remove()},100)},t.prototype.onPopoverClick=function(t){t.stopPropagation()},t.prototype.init=function(){this.backdropElement.addClass("opened"),$(".pip-popover-backdrop").focus(),this.params.timeout&&this.$timeout(function(){this.closePopover()},this.params.timeout)},t.prototype.position=function(){if(this.params.element){var t=$(this.params.element),e=t.offset(),o=t.width(),i=t.height(),s=$(document).width(),n=$(document).height(),r=this.backdropElement.find(".pip-popover");e&&r.css("max-width",s-(s-e.left)).css("max-height",n-(e.top+i)-32,0).css("left",e.left-r.width()+o/2).css("top",e.top+i+16)}},t.prototype.onResize=function(){this.backdropElement.find(".pip-popover").find(".pip-content").css("max-height","100%"),this.position(),this.calcHeight()},t.prototype.calcHeight=function(){if(!1!==this.params.calcHeight){var t=this.backdropElement.find(".pip-popover"),e=t.find(".pip-title"),o=t.find(".pip-footer"),i=t.find(".pip-content"),s=t.height()-e.outerHeight(!0)-o.outerHeight(!0);i.css("max-height",Math.max(s,0)+"px").css("box-sizing","border-box")}},t}(),n={bindings:i,templateUrl:"popover/Popover.html",controller:s};angular.module("pipPopover").component("pipPopover",n)},{}],11:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e,o){this.$compile=t,this.$rootScope=e,this.$timeout=o,this.popoverTemplate="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>"}return t.$inject=["$compile","$rootScope","$timeout"],t.prototype.show=function(t){var e,o,i,s;e=$("body"),e.find("md-backdrop").length>0||(this.hide(),o=this.$rootScope.$new(),i=t&&_.isObject(t)?t:{},o.params=i,o.locals=i.locals,s=this.$compile(this.popoverTemplate)(o),e.append(s))},t.prototype.hide=function(){var t=$(".pip-popover-backdrop");t.removeClass("opened"),this.$timeout(function(){t.remove()},100)},t.prototype.resize=function(){this.$rootScope.$broadcast("pipPopoverResize")},t}();angular.module("pipPopover.Service",[]).service("pipPopoverService",i)},{}],12:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),angular.module("pipPopover",["pipPopover.Service"]),t("./Popover"),t("./PopoverService")},{"./Popover":10,"./PopoverService":11}],13:[function(t,e,o){var i={showProgress:"&",logoUrl:"@"},s=function(){function t(t,e){this.$element=e}return t.prototype.$postLink=function(){this._image=this.$element.find("img"),this.loadProgressImage()},t.prototype.loadProgressImage=function(){this.logoUrl&&this._image.attr("src",this.logoUrl)},t}(),n={bindings:i,templateUrl:"progress/RoutingProgress.html",controller:s};angular.module("pipRoutingProgress",["ngMaterial"]).component("pipRoutingProgress",n)},{}],14:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t}();o.Toast=i},{}],15:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e,o){"ngInject";this.$mdToast=t,this.toast=e,this._pipErrorDetailsDialog=o.has("pipErrorDetailsDialog")?o.get("pipErrorDetailsDialog"):null,this.message=e.message,this.actions=e.actions,0===e.actions.length?this.actionLenght=0:this.actionLenght=1===e.actions.length?e.actions[0].toString().length:null,this.showDetails=null!=this._pipErrorDetailsDialog}return t.$inject=["$mdToast","toast","$injector"],t.prototype.onDetails=function(){this.$mdToast.hide(),this._pipErrorDetailsDialog&&this._pipErrorDetailsDialog.show({error:this.toast.error,ok:"Ok"},angular.noop,angular.noop)},t.prototype.onMessageClick=function(){"clickable_error"===this.toast.type&&this.showDetails&&(this.$mdToast.hide(),this._pipErrorDetailsDialog&&this._pipErrorDetailsDialog.show({error:this.toast.error,ok:"Ok"},angular.noop,angular.noop))},t.prototype.onAction=function(t){this.$mdToast.hide({action:t,id:this.toast.id,message:this.message})},t}(),s=function(){function t(t,e){"ngInject";var o=this;this.$mdToast=e,this.SHOW_TIMEOUT=2e4,this.SHOW_TIMEOUT_NOTIFICATIONS=2e4,this.toasts=[],this.sounds={},t.$on("$stateChangeSuccess",function(){o.onStateChangeSuccess()}),t.$on("pipSessionClosed",function(){o.onClearToasts()}),t.$on("pipIdentityChanged",function(){o.onClearToasts()})}return t.$inject=["$rootScope","$mdToast"],t.prototype.showNextToast=function(){var t;this.toasts.length>0&&(t=this.toasts[0],this.toasts.splice(0,1),this.showToast(t))},t.prototype.showToast=function(t){var e=this;this.currentToast=t,this.$mdToast.show({templateUrl:"toast/Toast.html",hideDelay:t.duration||this.SHOW_TIMEOUT,position:"bottom left",controller:i,controllerAs:"vm",locals:{toast:this.currentToast,sounds:this.sounds}}).then(function(t){e.showToastOkResult(t)},function(t){e.showToastCancelResult(t)})},t.prototype.showToastCancelResult=function(t){this.currentToast&&this.currentToast.cancelCallback&&this.currentToast.cancelCallback(t),this.currentToast=null,this.showNextToast()},t.prototype.showToastOkResult=function(t){this.currentToast&&this.currentToast.successCallback&&this.currentToast.successCallback(t),this.currentToast=null,this.showNextToast()},t.prototype.addToast=function(t){this.currentToast&&"error"!==t.type?this.toasts.push(t):this.showToast(t)},t.prototype.removeToasts=function(t){var e=[];_.each(this.toasts,function(o){o.type&&o.type===t||e.push(o)}),this.toasts=_.cloneDeep(e)},t.prototype.removeToastsById=function(t){_.remove(this.toasts,{id:t})},t.prototype.getToastById=function(t){return _.find(this.toasts,{id:t})},t.prototype.onStateChangeSuccess=function(){},t.prototype.onClearToasts=function(){this.clearToasts(null)},t.prototype.showNotification=function(t,e,o,i,s){this.addToast({id:s||null,type:"notification",message:t,actions:e||["ok"],successCallback:o,cancelCallback:i,duration:this.SHOW_TIMEOUT_NOTIFICATIONS})},t.prototype.showMessage=function(t,e,o,i){this.addToast({id:i||null,type:"message",message:t,actions:["ok"],successCallback:e,cancelCallback:o})},t.prototype.showError=function(t,e,o,i,s){this.addToast({id:i||null,error:s,type:"error",message:t||"Unknown error.",actions:["ok"],successCallback:e,cancelCallback:o})},t.prototype.showClickableError=function(t,e,o,i,s){this.addToast({id:i||null,error:s,type:"clickable_error",message:t||"Unknown error.",actions:["ok"],successCallback:e,cancelCallback:o})},t.prototype.hideAllToasts=function(){this.$mdToast.cancel(),this.toasts=[]},t.prototype.clearToasts=function(t){t?this.removeToasts(t):(this.$mdToast.cancel(),this.toasts=[])},t}();angular.module("pipToasts").service("pipToasts",s)},{}],16:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),angular.module("pipToasts",["ngMaterial","pipControls.Translate"]),t("./ToastService"),t("./Toast")},{"./Toast":14,"./ToastService":15}],17:[function(t,e,o){!function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("color_picker/ColorPicker.html",'<ul class="pip-color-picker {{$ctrl.class}}" pip-selected="$ctrl.currentColorIndex" pip-enter-space-press="$ctrl.enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in $ctrl.colors track by color"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="$ctrl.selectColor($index)" aria-label="color" ng-disabled="$ctrl.ngDisabled"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == $ctrl.currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("popover/Popover.html",'<div class="pip-popover" ng-click="$ctrl.params.onPopoverClick($event)"></div>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("progress/RoutingProgress.html",'<div class="layout-column layout-align-center-center" ng-show="$ctrl.showProgress()"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("toast/Toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': vm.toast.type==\'error\' || vm.toast.type==\'clickable_error\', \'pip-column-toast\': vm.toast.actions.length > 1 || vm.actionLenght > 4, \'pip-no-action-toast\': vm.actionLenght == 0}" style="height:initial; max-height: initial;"><span class="flex-var pip-text" ng-bind-html="vm.message" ng-class="{\'clickable\': vm.showDetails && vm.toast.type==\'clickable_error\' }" ng-click="vm.onMessageClick()"></span><div class="layout-row layout-align-end-start pip-actions" ng-if="vm.actions.length > 0 || ((vm.toast.type==\'error\' || vm.toast.type==\'clickable_error\') && vm.toast.error)"><div class="flex" ng-if="vm.toast.actions.length > 1"></div><md-button class="flex-fixed pip-toast-button" ng-if="vm.toast.type==\'error\' && vm.toast.error && vm.showDetails" ng-click="vm.onDetails()">Details</md-button><md-button class="flex-fixed pip-toast-button" ng-click="vm.onAction(action)" ng-repeat="action in vm.actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}()},{}]},{},[17,8])(17)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).lists=t()}}(function(){return function t(e,i,n){function p(a,s){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);var o=new Error("Cannot find module '"+a+"'");throw o.code="MODULE_NOT_FOUND",o}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){var i=e[a][1][t];return p(i||t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<n.length;a++)p(n[a]);return p}({1:[function(t,e,i){function n(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}n.$inject=["$injector"],angular.module("pipList.Translate",[]).filter("translate",n)},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipLists",["pipTagList"]),t("./dependencies/TranslateFilter"),t("./tag_list/TagList")},{"./dependencies/TranslateFilter":1,"./tag_list/TagList":3}],3:[function(t,e,i){var n=function(){function t(t,e){e.css("display","block"),e.addClass("pip-tag-list")}return t.prototype.toBoolean=function(t){return!_.isNull(t)&&!_.isUndefined(t)&&(!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t))},t.prototype.$onChanges=function(t){this.rebind&&t.tags&&(this.tags=t.tags.currentValue)},t}(),p={tags:"<pipTags",type:"<pipType",typeLocal:"<pipTypeLocal",rebuid:"<pipRebind"},r=(function(){function t(){}}(),{bindings:p,templateUrl:"tag_list/TagList.html",controller:n});angular.module("pipTagList",["pipList.Translate"]).component("pipTagList",r)},{}],4:[function(t,e,i){!function(t){try{t=angular.module("pipLists.Templates")}catch(e){t=angular.module("pipLists.Templates",[])}t.run(["$templateCache",function(t){t.put("tag_list/TagList.html",'<div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + $ctrl.type + \'-chips\'}}" ng-if="$ctrl.type && !$ctrl.typeLocal"><span>{{$ctrl.type.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + $ctrl.type + \'-chips\'}}" ng-if="$ctrl.type && $ctrl.typeLocal"><span>{{$ctrl.typeLocal.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4" ng-repeat="tag in $ctrl.tags"><span>{{::tag}}</span></div>')}])}()},{}]},{},[4,1,2,3])(4)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).dates=t()}}(function(){return function t(e,n,a){function i(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=n[o]={exports:{}};e[o][0].call(d.exports,function(t){var n=e[o][1][t];return i(n||t)},d,d.exports,t,e,n,a)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(t,e,n){!function(){var t={timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"<ngModel",ngChange:"<"},e=(function(){function t(){}}(),function(){function t(t,e){"ngInject";this.localeDate=moment.localeData(),this.momentMonths=angular.isArray(this.localeDate._months)?this.localeDate._months:this.localeDate._months.format,this.momentDays=angular.isArray(this.localeDate._weekdays)?this.localeDate._weekdays:this.localeDate._weekdays.format,this.momentShortDays=this.localeDate._weekdaysMin,this.momentFirstDayOfWeek=this.localeDate._week.dow;var n=this.model?_.isDate(this.model)?this.model:new Date(this.model):null;this.day=n?n.getDate():null,this.month=n?n.getMonth()+1:null,this.year=n?n.getFullYear():null,this.days=this.dayList(this.month,this.year),this.months=this.monthList(),this.years=this.yearList(),this.disableControls=!!this.disabled&&this.disabled()}return t.$inject=["$injector","$scope"],t.prototype.$onChanges=function(t){t.model&&t.model.currentValue&&(this.model=t.model.currentValue,this.getValue(this.model))},t.prototype.dayList=function(t,e){var n=31,a=[];4===t||6===t||9===t||11===t?n=30:2===t&&(n=e&&e%4==0?29:28);for(var i=1;i<=n;i++)a.push(i);return a},t.prototype.monthList=function(){for(var t=[],e=1;e<=12;e++)t.push({id:e,name:this.momentMonths[e-1]});return t},t.prototype.yearList=function(){var t=(new Date).getFullYear(),e="future"===this.timeMode?t:t-100,n="past"===this.timeMode?t:t+100,a=[];if("past"===this.timeMode)for(var i=n;i>=e;i--)a.push(i);else for(var i=e;i<=n;i++)a.push(i);return a},t.prototype.adjustDay=function(){var t=this.dayList(this.month,this.year);this.days.length!==t.length&&(this.day>t.length&&(this.day=t.length),this.days=t)},t.prototype.getValue=function(t){var e=t?_.isDate(t)?t:new Date(t):null,n=e?e.getDate():null,a=e?e.getMonth()+1:null,i=e?e.getFullYear():null;this.month!==a&&this.year!==i&&(this.days=this.dayList(this.month,this.year)),this.day=n,this.month=a,this.year=i},t.prototype.setValue=function(){var t;this.day&&this.month&&this.year&&(t=new Date(this.year,this.month-1,this.day,0,0,0,0),this.model=t,this.ngChange(this.model))},t.prototype.onMonthChanged=function(){this.adjustDay(),this.setValue()},t.prototype.onYearChanged=function(){this.adjustDay(),this.setValue()},t}()),n={bindings:t,templateUrl:"date/Date.html",controller:e};angular.module("pipDate",["pipDates.Templates"]).component("pipDate",n)}()},{}],2:[function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./IDateConvertService");!function(){var t=function(){function t(){this._momentRanged=i.DateRangeType.All,this._defaultFormat="LL"}return Object.defineProperty(t.prototype,"defaultTimeZoneOffset",{get:function(){return this._defaultTimeZoneOffset},set:function(t){this._defaultTimeZoneOffset=t},enumerable:!0,configurable:!0}),t.prototype.isUndefinedOrNull=function(t){return angular.isUndefined(t)||null===t},t.prototype.getRange=function(t){if(this.isUndefinedOrNull(t))return i.DateRangeType.Day;var e=this._momentRanged.indexOf(t);return e<0?i.DateRangeType.Day:this._momentRanged[e]},t.prototype.getOperationRange=function(t){if(this.isUndefinedOrNull(t))return i.DateRangeType.Day;var e=t==i.DateRangeType.WeekFromSunday?i.DateRangeType.WeekFromSunday:t,n=this._momentRanged.indexOf(e);return n<0?i.DateRangeType.Day:this._momentRanged[n]},t.prototype.toStartRange=function(t,e){var n;if(this.isUndefinedOrNull(t))throw new Error("toStartRange - date is undefined or null");if(n=void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),!n.isValid())throw new Error("toStartRange - localDate is invalid");return n.startOf(e).toDate()},t.prototype.toEndRange=function(t,e,n){var a,i;return this.isUndefinedOrNull(t)?"":(angular.isNumber(n)||(i=0),a=void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),a.isValid()?(i?a.endOf(e).add(i,"milliseconds"):a.endOf(e),a.endOf(e).toDate()):"")},t.prototype.toJson=function(t){return JSON.stringify(moment(t))},t.prototype.toNextRange=function(t,e){var n,a,i;return this.isUndefinedOrNull(t)?"":(n=moment(t),n.isValid()?(a=this.getRange(e),i=moment(n).startOf(a).add(1,this.getOperationRange(a)),i.toDate()):"")},t.prototype.toPrevRange=function(t,e){var n,a,i;if(this.isUndefinedOrNull(t))throw new Error("toPrevRange- date is undefined or null");if(n=moment(t),!n.isValid())throw new Error("toPrevRange - localDate is invalid");return a=this.getRange(e),i=moment(n).startOf(a).add(-1,this.getOperationRange(a)),i.toDate()},t.prototype.toCurrentRange=function(t){var e,n,a;if(e=moment(),!e.isValid())throw new Error("toCurrentRange - localDate is invalid");return n=this.getRange(t),a=moment(e).startOf(n),a.toDate()},t.prototype.addHours=function(t,e){var n;if(this.isUndefinedOrNull(t)||!angular.isNumber(e))throw new Error("addHours - date is undefined or null or hours is not a number");if(n=moment(t),!n.isValid())throw new Error("addHours - localDate is invalid");return n.add(e,"hours").toDate()},t.prototype.toStartDay=function(t){return this.toStartRange(t,i.DateRangeType.Day)},t.prototype.toEndDay=function(t,e){return this.toEndRange(t,i.DateRangeType.Day,e)},t.prototype.toStartWeek=function(t){return this.toStartRange(t,i.DateRangeType.WeekFromSunday)},t.prototype.toEndWeek=function(t,e){return this.toEndRange(t,i.DateRangeType.WeekFromSunday,e)},t.prototype.toStartMonth=function(t){return this.toStartRange(t,i.DateRangeType.Month)},t.prototype.toEndMonth=function(t,e){return this.toEndRange(t,i.DateRangeType.Month,e)},t.prototype.toStartYear=function(t){return this.toStartRange(t,i.DateRangeType.Year)},t.prototype.toEndYear=function(t,e){return this.toEndRange(t,i.DateRangeType.Year,e)},t}(),e=function(){function t(t){this._convert=t}return Object.defineProperty(t.prototype,"defaultTimeZoneOffset",{get:function(){return this._convert.defaultTimeZoneOffset},set:function(t){this._convert.defaultTimeZoneOffset=t},enumerable:!0,configurable:!0}),t.prototype.toJSON=function(t){return this._convert.toJson(t)},t.prototype.toNextRange=function(t,e){return this._convert.toNextRange(t,e)},t.prototype.toPrevRange=function(t,e){return this._convert.toPrevRange(t,e)},t.prototype.toCurrentRange=function(t){return this._convert.toCurrentRange(t)},t.prototype.addHours=function(t,e){return this._convert.addHours(t,e)},t.prototype.toStartDay=function(t){return this._convert.toStartDay(t)},t.prototype.toEndDay=function(t,e){return this._convert.toEndDay(t,e)},t.prototype.toStartWeek=function(t){return this._convert.toStartWeek(t)},t.prototype.toEndWeek=function(t,e){return this._convert.toEndWeek(t,e)},t.prototype.toStartMonth=function(t){return this._convert.toStartMonth(t)},t.prototype.toEndMonth=function(t,e){return this._convert.toEndMonth(t,e)},t.prototype.toStartYear=function(t){return this._convert.toStartYear(t)},t.prototype.toEndYear=function(t,e){return this._convert.toEndYear(t,e)},t}(),n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.prototype.$get=function(){"ngInject";return null==this._service&&(this._service=new e(this)),this._service},n}(t);angular.module("pipDate.Convert",[]).provider("pipDateConvert",n)}()},{"./IDateConvertService":5}],3:[function(t,e,n){"use strict";function a(t){"ngInject";return function(e,n){return t.formatTime(e,n)}}function i(t){"ngInject";return function(e,n){return t.formatDateOptional(e,n)}}function r(t){"ngInject";return function(e){return t.formatLongDate(e)}}function o(t){"ngInject";return function(e){return t.formatShortDate(e)}}function s(t){"ngInject";return function(e){return t.formatMiddleDate(e)}}function l(t){"ngInject";return function(e){return t.formatMonth(e)}}function u(t){"ngInject";return function(e){return t.formatLongMonth(e)}}function d(t){"ngInject";return function(e){return t.formatYear(e)}}function h(t){"ngInject";return function(e){return t.formatWeek(e)}}function m(t){"ngInject";return function(e){return t.formatShortWeek(e)}}function p(t){"ngInject";return function(e){return t.formatShortDateTime(e)}}function c(t){"ngInject";return function(e){return t.formatMiddleDateTime(e)}}function f(t){"ngInject";return function(e){return t.formatLongDateTime(e)}}function D(t){"ngInject";return function(e,n){return t.formatShortDateLongTime(e,n)}}function g(t){"ngInject";return function(e,n){return t.formatMiddleDateLongTime(e,n)}}function y(t){"ngInject";return function(e,n){return t.formatLongDateLongTime(e,n)}}function T(t){"ngInject";return function(e,n){return t.bbFormatDateLongTime(e,n)}}function _(t){"ngInject";return function(e){return t.formatFullDateTime(e)}}function v(t){"ngInject";return function(e){return t.formatShortTime(e)}}function S(t){"ngInject";return function(e){return t.formatLongTime(e)}}function E(t){"ngInject";return function(e){return t.formatShortDayOfWeek(e)}}function O(t){"ngInject";return function(e){return t.formatLongDayOfWeek(e)}}function M(t){"ngInject";return function(e){return t.formatLongMonthDay(e)}}function $(t){"ngInject";return function(e){return t.formatShortMonthDay(e)}}function L(t){"ngInject";return function(e,n){return t.formatDateRange(e,n)}}function I(t){"ngInject";return function(e,n){return t.formatDateTimeRange(e,n)}}function w(t){"ngInject";return function(e){return t.formatISOWeek(e)}}function R(t){"ngInject";return function(e){return t.formatShortISOWeek(e)}}function j(t){"ngInject";return function(e){return t.formatISOWeekOrdinal(e)}}function k(t){"ngInject";return function(e){return t.formatDateY(e)}}function b(t){"ngInject";return function(e){return t.formatLongDateY(e)}}function C(t){"ngInject";return function(e){return t.formatTodayDateLongTimeLong(e)}}function F(t){"ngInject";return function(e){return t.formatTodayDateShortTimeLong(e)}}function N(t){"ngInject";return function(e){return t.formatTodayDateLongTimeShort(e)}}function W(t){"ngInject";return function(e){return t.formatTodayDateShortTimeShort(e)}}function A(t){"ngInject";return function(e){return t.formatMillisecondsToSeconds(e)}}function H(t){"ngInject";return function(e,n){return t.formatElapsedInterval(e,n)}}function U(t){"ngInject";return function(e,n,a){return t.formatShortElapsed(e,n,a)}}function x(t){"ngInject";return function(e,n,a){return t.formatLongElapsed(e,n,a)}}function Y(t){"ngInject";return function(e,n,a){return t.formatMiddleElapsed(e,n,a)}}function V(t){"ngInject";return function(e){return t.toJson(e)}}function Z(t){"ngInject";return function(e){return t.formatTimeShort(e)}}function P(t){"ngInject";return function(e){return t.formatTimeLong(e)}}a.$inject=["pipDateFormat"],i.$inject=["pipDateFormat"],r.$inject=["pipDateFormat"],o.$inject=["pipDateFormat"],s.$inject=["pipDateFormat"],l.$inject=["pipDateFormat"],u.$inject=["pipDateFormat"],d.$inject=["pipDateFormat"],h.$inject=["pipDateFormat"],m.$inject=["pipDateFormat"],p.$inject=["pipDateFormat"],c.$inject=["pipDateFormat"],f.$inject=["pipDateFormat"],D.$inject=["pipDateFormat"],g.$inject=["pipDateFormat"],y.$inject=["pipDateFormat"],T.$inject=["pipDateFormat"],_.$inject=["pipDateFormat"],v.$inject=["pipDateFormat"],S.$inject=["pipDateFormat"],E.$inject=["pipDateFormat"],O.$inject=["pipDateFormat"],M.$inject=["pipDateFormat"],$.$inject=["pipDateFormat"],L.$inject=["pipDateFormat"],I.$inject=["pipDateFormat"],w.$inject=["pipDateFormat"],R.$inject=["pipDateFormat"],j.$inject=["pipDateFormat"],k.$inject=["pipDateFormat"],b.$inject=["pipDateFormat"],C.$inject=["pipDateFormat"],F.$inject=["pipDateFormat"],N.$inject=["pipDateFormat"],W.$inject=["pipDateFormat"],A.$inject=["pipDateFormat"],H.$inject=["pipDateFormat"],U.$inject=["pipDateFormat"],x.$inject=["pipDateFormat"],Y.$inject=["pipDateFormat"],V.$inject=["pipDateConvert"],Z.$inject=["pipDateFormat"],P.$inject=["pipDateFormat"],Object.defineProperty(n,"__esModule",{value:!0}),angular.module("pipDate.Filter",[]).filter("formatTime",a).filter("formatDateOptional",i).filter("bbFormatDateLongTime",T).filter("formatShortDate",o).filter("formatMiddleDate",s).filter("formatLongDate",r).filter("formatMonth",l).filter("formatLongMonth",u).filter("formatYear",d).filter("formatWeek",h).filter("formatShortWeek",m).filter("formatShortDateTime",p).filter("formatMiddleDateTime",c).filter("formatLongDateTime",f).filter("formatShortDateLongTime",D).filter("formatMiddleDateLongTime",g).filter("formatLongDateLongTime",y).filter("formatFullDateTime",_).filter("formatShortTime",v).filter("formatLongTime",S).filter("formatShortDayOfWeek",E).filter("formatLongDayOfWeek",O).filter("formatLongMonthDay",M).filter("formatShortMonthDay",$).filter("formatDateRange",L).filter("formatDateTimeRange",I).filter("formatISOWeek",w).filter("formatShortISOWeek",R).filter("formatISOWeekOrdinal",j).filter("formatDateY",k).filter("formatLongDateY",b).filter("formatTodayDateLongTimeLong",C).filter("formatTodayDateShortTimeLong",F).filter("formatTodayDateLongTimeShort",N).filter("formatTodayDateShortTimeShort",W).filter("formatMillisecondsToSeconds",A).filter("formatElapsedInterval",H).filter("formatShortElapsed",U).filter("formatMiddleElapsed",Y).filter("formatLongElapsed",x).filter("formatTimeShort",Z).filter("formatTimeLong",P)},{}],4:[function(t,e,n){"use strict";var a=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function a(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(n,"__esModule",{value:!0});var i=t("./IDateConvertService");!function(){function t(t){var e=t.has("pipTranslateProvider")?t.get("pipTranslateProvider"):null;e&&e.translations&&(e.translations("en",{DATE_ELAPSED:"ago",DATE_HOUR_ONE:"hour",DATE_HOUR_SHORT:"h",DATE_MINUTE_SHORT:"min",DATE_HOURS_FEW:"hours",DATE_HOURS_AFTER_FOOR:"hours",DATE_MINUTE_ONE:"minute",DATE_MINUTES_FEW:"minutes",DATE_MINUTES_AFTER_FOOR:"minutes",DATE_FEW_SECOND:"second",DATE_FEW_SECOND_SHORT:"sec.",DATE_FEW_SECOND_ELAPSED:"few sec. ago",DATE_FEW_SECOND_SHORT_ELAPSED:"few sec. ago"}),e.translations("ru",{DATE_ELAPSED:"назад",DATE_HOUR_ONE:"час",DATE_HOUR_SHORT:"ч.",DATE_MINUTE_SHORT:"мин.",DATE_HOURS_FEW:"часа",DATE_HOURS_AFTER_FOOR:"часов",DATE_MINUTE_ONE:"минуту",DATE_MINUTES_FEW:"минуты",DATE_MINUTES_AFTER_FOOR:"минут",DATE_FEW_SECOND:"секунд",DATE_FEW_SECOND_SHORT:"сек.",DATE_FEW_SECOND_ELAPSED:"несколько секунд назад",DATE_FEW_SECOND_SHORT_ELAPSED:"неск. с. назад"}))}t.$inject=["$injector"];var e=function(){function t(t){this.$injector=t,this._momentRanged=i.DateRangeType.All,this._defaultFormat="LL",this.oneHour=36e5,this.oneMinute=6e4,this.oneSeccond=1e3,this.oneDay=864e5}return Object.defineProperty(t.prototype,"defaultTimeZoneOffset",{get:function(){return this._defaultTimeZoneOffset},set:function(t){this._defaultTimeZoneOffset=t},enumerable:!0,configurable:!0}),t.prototype.isUndefinedOrNull=function(t){return angular.isUndefined(t)||null===t},t.prototype.formatDateTime=function(t,e){var n,a;return this.isUndefinedOrNull(t)?"":(n=void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),n.isValid()?(a=e||this._defaultFormat,n.format(a)):"")},t.prototype.formatDateTimeY=function(t,e){var n,a,i;return this.isUndefinedOrNull(t)?"":(n=void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),n.isValid()?(a=moment(),i=moment.localeData().longDateFormat(e||this._defaultFormat),a.year()==n.year()&&(i=i.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"")),n.format(i)):"")},t.prototype.formatDay=function(t,e){var n,a=moment.localeData().longDateFormat(e||this._defaultFormat),i=a.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"").replace(/M/g,"").replace(/[.\/]/g,"");return this.isUndefinedOrNull(t)?"":(n=void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),n.isValid()?n.format(i):"")},t.prototype.formatMonthDay=function(t,e){var n,a=e||this._defaultFormat,i=moment.localeData().longDateFormat(a),r=i.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"");return this.isUndefinedOrNull(t)?"":(n=void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),n.isValid()?n.format(r):"")},t.prototype.formatRange=function(t,e,n){var a,i;n||this._defaultFormat;if(a=this.isUndefinedOrNull(t)?null:void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),i=this.isUndefinedOrNull(e)?null:void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(e).utcOffset(this._defaultTimeZoneOffset):moment(e),null===a&&null===i)return"";if(null===a)return i.format(n);if(null===i||a.isSame(i))return a.format(n);if(a.isAfter(i))throw new Error("Date range error. Start date is more than end date.");return a.year()==i.year()?a.month()==i.month()?this.formatDay(a,n)+"-"+i.format(n):this.formatMonthDay(a,n)+"-"+i.format(n):a.format(n)+"-"+i.format(n)},t.prototype.toDateWithTime=function(t,e,n,a){var i;return this.isUndefinedOrNull(t)?"":(i=void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),i.isValid()?(moment(),a?i.format(n)+" "+i.format(e):i.format(e)+" "+i.format(n)):"")},t.prototype.toTodayDate=function(t,e,n){var a,i;return this.isUndefinedOrNull(t)?"":(a=void 0!=this._defaultTimeZoneOffset&&null!=this._defaultTimeZoneOffset?moment(t).utcOffset(this._defaultTimeZoneOffset):moment(t),a.isValid()?(i=moment(),i.year()==a.year()&&i.month()==a.month()&&i.day()==a.day()?a.format(n):a.format(e)+" "+a.format(n)):"")},t.prototype.formatTime=function(t,e){return this.formatDateTime(t,"LLL")},t.prototype.formatDateOptional=function(t,e){return this.formatDateTime(t,"L")},t.prototype.formatShortDate=function(t){return this.formatDateTime(t,"L")},t.prototype.bbFormatDateLongTime=function(t,e){return this.toDateWithTime(t,"MM/DD/YY","LTS",e)},t.prototype.formatMiddleDate=function(t){return this.formatDateTime(t,"ll")},t.prototype.formatLongDate=function(t){return this.formatDateTime(t,"LL")},t.prototype.formatMonth=function(t){return this.formatDateTime(t,"MM")},t.prototype.formatLongMonth=function(t){return this.formatDateTime(t,"MMMM")},t.prototype.formatYear=function(t){return this.formatDateTime(t,"YYYY")},t.prototype.formatWeek=function(t){return this.formatDateTime(t,"ww")},t.prototype.formatShortWeek=function(t){return this.formatDateTime(t,"w")},t.prototype.formatShortDateTime=function(t){return this.toDateWithTime(t,"L","LT")},t.prototype.formatMiddleDateTime=function(t){return this.formatDateTime(t,"lll")},t.prototype.formatLongDateTime=function(t){return this.formatDateTime(t,"LLL")},t.prototype.formatFullDateTime=function(t){return this.formatDateTime(t,"LLLL")},t.prototype.formatShortDateLongTime=function(t,e){return this.toDateWithTime(t,"L","LTS",e)},t.prototype.formatMiddleDateLongTime=function(t,e){return this.toDateWithTime(t,"ll","LTS",e)},t.prototype.formatLongDateLongTime=function(t,e){return this.toDateWithTime(t,"LL","LTS",e)},t.prototype.formatShortTime=function(t){return this.formatDateTime(t,"LT")},t.prototype.formatLongTime=function(t){return this.formatDateTime(t,"LTS")},t.prototype.formatShortDayOfWeek=function(t){return this.formatDateTime(t,"dd")},t.prototype.formatLongDayOfWeek=function(t){return this.formatDateTime(t,"dddd")},t.prototype.formatLongMonthDay=function(t){return this.formatMonthDay(t,"LL")},t.prototype.formatShortMonthDay=function(t){return this.formatMonthDay(t,"L")},t.prototype.formatDateRange=function(t,e){return this.formatRange(t,e,"LL")},t.prototype.formatDateTimeRange=function(t,e){return this.formatRange(t,e,"LLL")},t.prototype.formatISOWeek=function(t){return this.formatDateTime(t,"WW")},t.prototype.formatShortISOWeek=function(t){return this.formatDateTime(t,"W")},t.prototype.formatISOWeekOrdinal=function(t){return this.formatDateTime(t,"Wo")},t.prototype.formatDateY=function(t){return this.formatDateTimeY(t,"L")},t.prototype.formatLongDateY=function(t){return this.formatDateTimeY(t,"LL")},t.prototype.formatTodayDateLongTimeLong=function(t){return this.toTodayDate(t,"LL","LTS")},t.prototype.formatTodayDateShortTimeLong=function(t){return this.toTodayDate(t,"LL","LTS")},t.prototype.formatTodayDateLongTimeShort=function(t){return this.toTodayDate(t,"LL","LT")},t.prototype.formatTodayDateShortTimeShort=function(t){return this.toTodayDate(t,"ll","LT")},t.prototype.formatMillisecondsToSeconds=function(t){return""},t.prototype.formatElapsedInterval=function(t,e){var n,a;return this.isUndefinedOrNull(t)?"":(a=this.isUndefinedOrNull(e)?moment():moment(e),n=moment(t),n.isValid()&&a.isValid()?moment(n).fromNow(a):"")},t.prototype.formatShortElapsed=function(t,e,n){var a,i,r;if(this.isUndefinedOrNull(t))return"";if(i=this.isUndefinedOrNull(n)?moment():moment(n),r=_.cloneDeep(i),a=moment(t),!a.isValid()||!i.isValid())return"";if(this.isUndefinedOrNull(e)&&(e=-24),r.add(e,"hours"),a.isBefore(r))return this.formatShortDateTime(a);var o=i.diff(a),s=moment.duration(i.diff(a)),l=void 0,u=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null,d=Math.floor(s.asHours()),h=Math.floor(s.asMinutes()-60*d);if(u){var m=(this.getHoursString(d),this.getMinutesString(h));l=d?Math.floor(s.asHours())+moment.utc(o).format(":mm ")+u.translate("DATE_ELAPSED"):h?moment.utc(o).format("m")+" "+u.translate(m)+" "+u.translate("DATE_ELAPSED"):u.translate("DATE_FEW_SECOND_SHORT_ELAPSED")}else l=d?Math.floor(s.asHours())+moment.utc(o).format(":mm ")+" ago":h?moment.utc(o).format("m")+" min. ago":"few sec. ago";return l},t.prototype.getHoursString=function(t){var e=t%10;return 0==t?"":1==e?"DATE_HOUR_ONE":e>1&&e<5?"DATE_HOURS_FEW":"DATE_HOURS_AFTER_FOOR"},t.prototype.getMinutesString=function(t){return 1==t?"DATE_MINUTE_ONE":t>1&&t<5?"DATE_MINUTES_FEW":"DATE_MINUTES_AFTER_FOOR"},t.prototype.formatLongElapsed=function(t,e,n){var a,i,r;if(this.isUndefinedOrNull(t))return"";if(i=this.isUndefinedOrNull(n)?moment():moment(n),r=_.cloneDeep(i),a=moment(t),!a.isValid()||!i.isValid())return"";if(this.isUndefinedOrNull(e)&&(e=-24),r.add(e,"hours"),a.isBefore(r))return this.formatFullDateTime(a);var o=i.diff(a),s=moment.duration(i.diff(a)),l=void 0,u=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null,d=Math.floor(s.asHours()),h=Math.floor(s.asMinutes()-60*d);if(u){var m=this.getHoursString(d),p=this.getMinutesString(h);l=d?Math.floor(s.asHours())+" "+u.translate(m)+moment.utc(o).format(" mm ")+u.translate(p)+" "+u.translate("DATE_ELAPSED"):h?moment.utc(o).format("m")+" "+u.translate(p)+" "+u.translate("DATE_ELAPSED"):u.translate("DATE_FEW_SECOND_ELAPSED")}else l=d?Math.floor(s.asHours())+" hours "+moment.utc(o).format(":mm minutes")+" ago":h?moment.utc(o).format("m")+" minutes ago":"few second ago";return l},t.prototype.formatMiddleElapsed=function(t,e,n){var a,i,r;if(this.isUndefinedOrNull(t))return"";if(i=this.isUndefinedOrNull(n)?moment():moment(n),r=_.cloneDeep(i),a=moment(t),!a.isValid()||!i.isValid())return"";if(this.isUndefinedOrNull(e)&&(e=-24),r.add(e,"hours"),a.isBefore(r))return this.formatMiddleDateLongTime(a);var o=i.diff(a),s=moment.duration(i.diff(a)),l=void 0,u=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null,d=Math.floor(s.asHours()),h=Math.floor(s.asMinutes()-60*d);if(u){l=d?Math.floor(s.asHours())+" "+u.translate("DATE_HOUR_SHORT")+moment.utc(o).format(" mm ")+u.translate("DATE_MINUTE_SHORT")+" "+u.translate("DATE_ELAPSED"):h?moment.utc(o).format("m")+" "+u.translate("DATE_MINUTE_SHORT")+" "+u.translate("DATE_ELAPSED"):u.translate("DATE_FEW_SECOND_SHORT_ELAPSED")+" "+u.translate("DATE_ELAPSED")}else l=d?Math.floor(s.asHours())+" h. "+moment.utc(o).format(":mm min.")+" ago":h?moment.utc(o).format("m")+" min. ago":"few sec. ago";return l},t.prototype.formatTimeShort=function(t){if(t<=0)return"";var e="",n=Math.floor(t/this.oneHour),a=Math.floor((t-n*this.oneHour)/this.oneMinute),i=Math.floor((t-n*this.oneHour-a*this.oneMinute)/this.oneSeccond),r=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null;if(r){e=n?n+" "+r.translate("DATE_HOUR_SHORT")+" "+("0"+a).substr(-2,2)+" "+r.translate("DATE_MINUTE_SHORT"):a?a+" "+r.translate("DATE_MINUTE_SHORT"):i+" "+r.translate("DATE_FEW_SECOND_SHORT")}else e=n?n+" h. "+("0"+a).substr(-2,2)+" min.":a?a+" min.":i+" sec.";return e},t.prototype.formatTimeLong=function(t){if(t<=0)return"";var e="",n=Math.floor(t/this.oneHour),a=Math.floor((t-n*this.oneHour)/this.oneMinute),i=Math.floor((t-n*this.oneHour-a*this.oneMinute)/this.oneSeccond),r=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null;if(r){var o=this.getHoursString(n),s=this.getMinutesString(a);e=n?n+" "+r.translate(o)+" "+("0"+a).substr(-2,2)+" "+r.translate(s):a?a+" "+r.translate(s):i+" "+r.translate("DATE_FEW_SECOND")}else e=n?n+" hours "+("0"+a).substr(-2,2)+" minutes":a?a+" minutes":i+" second";return e},t.prototype.getDateJSON=function(t){return JSON.stringify(moment(t))},t}(),n=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.prototype.$get=["$injector",function(t){"ngInject";return null==this._service&&(this._service=new e(t)),this._service}],n}(e);angular.module("pipDate.Format",[]).provider("pipDateFormat",n).config(t)}()},{"./IDateConvertService":5}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(){}return t}();a.Year="year",a.Month="month",a.Week="week",a.WeekFromSunday="isoweek",a.Day="day",a.All=["year","month","week","isoweek","day"],n.DateRangeType=a},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},{}],7:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),angular.module("pipDate.Common",["pipDate.Convert","pipDate.Format","pipDate.Filter"]),t("./DateConvertService"),t("./DateFormatFilter"),t("./DateFormatService"),t("./IDateConvertService"),t("./IDateFormatService"),function(t){for(var e in t)n.hasOwnProperty(e)||(n[e]=t[e])}(t("./IDateConvertService"))},{"./DateConvertService":2,"./DateFormatFilter":3,"./DateFormatService":4,"./IDateConvertService":5,"./IDateFormatService":6}],8:[function(t,e,n){!function(){var t={timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",pipChanged:"&",type:"@pipDateRangeType",pipDateFormat:"@",pipNoLine:"@"},e=(function(){function t(){}}(),function(){function t(t,e,n,a,i,r){"ngInject";var o=this;this.$mdMedia=t,this.$timeout=e,this.prevState={},this.currentState={},this.localeDate=moment.localeData(),this.momentMonths=angular.isArray(this.localeDate._months)?this.localeDate._months:this.localeDate._months.standalone,this.momentDays=angular.isArray(this.localeDate._weekdays)?this.localeDate._weekdays:this.localeDate._weekdays.format,this.momentShortDays=this.localeDate._weekdaysMin,this.momentFirstDayOfWeek=this.localeDate._week.dow,this.currentDate=new Date,this.currentYear=this.currentDate.getUTCFullYear(),this.currentMonth=this.currentDate.getUTCMonth()+1,this.currentDay=this.currentDate.getUTCDate(),this.init(),this.disableControls=!!this.disabled&&this.disabled(),n.$watch("$ctrl.type",function(t,e){t!==e&&e&&o.init()})}return t.$inject=["$mdMedia","$timeout","$scope","$element","$rootScope","$injector"],t.prototype.$onChanges=function(t){t.type&&t.type.currentValue&&(this.type=t.type.currentValue,this.init())},t.prototype.onMonthChanged=function(){if("weekly"===this.type){var t=void 0,e=void 0;t=new Date(Date.UTC(this.year,this.month-1,1)),e=t.getUTCDay()?t.getUTCDay():7,this.week=this.getWeekByDate(e,this.month-1,this.year),this.correctWeek(),this.adjustWeek()}else this.adjustDay();this.setValue()},t.prototype.onYearChanged=function(){var t,e;t=new Date(Date.UTC(this.year,this.month-1,1)),e=t.getUTCDay()?t.getUTCDay():7,"weekly"===this.type?(this.week=this.getWeekByDate(e,this.month-1,this.year),this.adjustWeek(),this.correctWeek()):this.adjustDay(),this.setValue()},t.prototype.onWeekChange=function(){"weekly"===this.type?(this.adjustWeek(),this.correctWeek()):this.adjustDay(),this.setValue()},t.prototype.isDay=function(){return"daily"===this.type},t.prototype.isWeek=function(){return"weekly"===this.type},t.prototype.isMonth=function(){return"daily"===this.type||"weekly"===this.type||"monthly"===this.type},t.prototype.onChange=function(){var t=this;this.pipChanged&&this.$timeout(function(){t.pipChanged()},0)},t.prototype.setCurrent=function(){this.currentState.day=this.day,this.currentState.month=this.month,this.currentState.year=this.year,this.currentState.week=this.week,this.currentState.dateRangeType=this.type,this.currentState.model=this.model},t.prototype.fillLists=function(){this.days=this.dayList(this.month,this.year),this.weeks=this.weekList(this.month,this.year),this.months=this.monthList(),this.shortMonths=this.monthList(),this.years=this.yearList()},t.prototype.correctWeek=function(){(!this.prevState.model||this.prevState.model&&this.prevState.model.getTime()>=this.model.getTime())&&this.weeks&&this.weeks[this.week]&&this.weeks[this.week].id<=0&&(this.month<12?this.month+=1:(this.month=1,this.year+=1),this.fillLists())},t.prototype.init=function(){var t;t=this.model?new Date(this.model):null,this.day=t?t.getUTCDate():null,this.month=t?t.getUTCMonth()+1:null,this.year=t?t.getUTCFullYear():null,this.week=t?this.getWeekByDate(this.day,this.month-1,this.year):null,this.fillLists(),"weekly"===this.type&&this.correctWeek(),this.adjustWeek(),this.setValue()},t.prototype.onYearClick=function(){this.year||(this.year=this.currentYear)},t.prototype.onMonthClick=function(){this.month||(this.month=this.currentMonth)},t.prototype.onDayClick=function(){this.year||(this.day=this.currentDay)},t.prototype.getCountDay=function(t,e){var n=31;if(4===t||6===t||9===t||11===t)return n=30;if(2===t){if(e)return n=e%4==0?29:28;n=28}return n},t.prototype.dayList=function(t,e){var n,a;n=this.getCountDay(t,e),this.nameDays=[],a=[];for(var i=1;i<=n;i++)a.push(i),this.nameDays.push(this.momentShortDays[moment([e,t-1,i]).weekday()]);return a},t.prototype.getWeekByDate=function(t,e,n){var a,i;return a=new Date(Date.UTC(n,e,t)),i=a.getUTCDay()?a.getUTCDay():7,1===i?t:t+1-i},t.prototype.getWeek=function(t,e,n){var a,i;return a=t+6>e?e-t-6:t+6,i=t>0?t:n+t,i.toString()+" - "+Math.abs(a).toString()},t.prototype.weekList=function(t,e){var n,a,i,r;for(n=[],a=this.getCountDay(t,e),r=this.getWeekByDate(1,t-1,e),i=t-1?this.getCountDay(t-1,e):this.getCountDay(12,e-1);r<a+1;)n.push({id:r,name:this.getWeek(r,a,i)}),r+=7;return n},t.prototype.monthList=function(){
for(var t=[],e=1;e<=12;e++)t.push({id:e,name:this.momentMonths[e-1]});return t},t.prototype.yearList=function(){var t,e,n=[];switch(this.timeMode){case"future":t=this.currentYear,e=this.currentYear+100;break;case"past":t=this.currentYear-100,e=this.currentYear;break;case"now":t=this.currentYear-50,e=this.currentYear+100;break;default:t=this.currentYear-50,e=this.currentYear+50}if("future"===this.timeMode)for(var a=t;a<=e;a++)n.push(a);else for(var a=e;a>=t;a--)n.push(a);return n},t.prototype.adjustDay=function(){var t=this.dayList(this.month,this.year);switch(this.type){case"monthly":this.day=1;break;case"yearly":this.month=1,this.day=1;break;default:this.days.length!==t.length&&this.day>t.length&&(this.day=t.length)}this.days=t},t.prototype.adjustWeek=function(){var t=this.weekList(this.month,this.year);this.week=this.getWeekByDate(this.week,this.month-1,this.year),this.weeks=t},t.prototype.getValue=function(t){var e,n,a,i,r;e=t?new Date(t):null,n=e?e.getUTCDate():null,a=e?e.getUTCMonth()+1:null,i=e?e.getUTCFullYear():null,r=e?this.getWeekByDate(n,a-1,i):null,this.day===n&&this.month===a&&this.year===i&&this.week===r||(this.day=n,this.month=a,this.year=i,this.week=r,this.days=this.dayList(this.month,this.year),this.weeks=this.weekList(this.month,this.year))},t.prototype.setValue=function(){var t;"weekly"===this.type?(t=new Date(this.year,this.month-1,this.week,0,0,0,0),t=new Date(t.getTime()-6e4*t.getTimezoneOffset()),this.model=t):(t=new Date(this.year,this.month-1,this.day,0,0,0,0),t=new Date(t.getTime()-6e4*t.getTimezoneOffset()),this.model=t),this.prevState=_.cloneDeep(this.currentState),this.setCurrent(),this.onChange()},t}()),n={bindings:t,templateUrl:"date_range/DateRange.html",controller:e};angular.module("pipDateRange",["pipDates.Templates"]).component("pipDateRange",n)}()},{}],9:[function(t,e,n){function a(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}a.$inject=["$injector"],angular.module("pipDates.Translate",[]).filter("translate",a)},{}],10:[function(t,e,n){angular.module("pipDates",["pipDate","pipDate.Common","pipTimeRange","pipTimeRangeEdit","pipDateRange","pipDates.Translate"])},{}],11:[function(t,e,n){!function(){var t=function(){function t(){}return t}(),e={start:"<?pipStartDate",end:"<?pipEndDate"},n=(function(){function t(){}}(),function(){function e(e,n,a){"ngInject";this.data=new t,this.defineStartDate(),this.defineEndDate(),a.addClass("pip-time-range")}return e.$inject=["$scope","$attrs","$element"],e.prototype.$onChanges=function(t){t.start&&t.start.currentValue&&(this.data.start=null,this.defineStartDate()),t.end&&t.end.currentValue&&(this.data.end=null,this.defineEndDate())},e.prototype.getDateJSON=function(t){return t?new Date(t):null},e.prototype.defineStartDate=function(){null!==this.start&&void 0!==this.start&&(this.data.start=_.isDate(this.start)?this.start:this.getDateJSON(this.start))},e.prototype.defineEndDate=function(){null!==this.end&&void 0!==this.end&&(this.data.end=_.isDate(this.end)?this.end:this.getDateJSON(this.end))},e.prototype.toBoolean=function(t){return null!=t&&(!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t))},e}()),a={bindings:e,templateUrl:"time_range/TimeRange.html",controller:n};angular.module("pipTimeRange",[]).component("pipTimeRange",a)}()},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IntervalTimeRange=30,n.MinutesInHour=60,n.HoursInDay=24,n.MillisecondsInSecond=1e3;var a=function(){function t(){this.bind=!1}return t}(),i={pipStartDate:"<",pipChanged:"=",pipEndDate:"<",pipStartLabel:"@",pipEndLabel:"@",disabled:"&ngDisabled",pipHideTime:"=",pipSize:"="},r=(function(){function t(){}}(),function(){function t(t,e,n,i){"ngInject";this.$injector=t,this.pipDateConvert=e,this.$scope=n,this.startLabel="Start time",this.endLabel="End time",this.translate(),this.intervalTimeCollection=this.getTimeInterval(),this.data=new a,this.initDate(),this.defineDate(),i.addClass("pip-time-range-edit")}return t.$inject=["$injector","pipDateConvert","$scope","$element"],t.prototype.$onChanges=function(t){t.pipStartDate&&t.pipStartDate.currentValue&&(this.pipStartDate=t.pipStartDate.currentValue,this.initDate(),this.defineDate()),t.pipEndDate&&t.pipEndDate.currentValue&&(this.pipEndDate=t.pipEndDate.currentValue,this.initDate(),this.defineDate())},t.prototype.translate=function(){var t=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null;t&&(t.setTranslations("en",{EVENT_NEW_START_TIME:"Start time",EVENT_NEW_END_TIME:"End time"}),t.setTranslations("ru",{EVENT_NEW_START_TIME:"Начало",EVENT_NEW_END_TIME:"Конец"}),this.startLabel=this.pipStartLabel?t.translate(this.pipStartLabel):t.translate("EVENT_NEW_START_TIME"),this.endLabel=this.pipEndLabel?t.translate(this.pipEndLabel):t.translate("EVENT_NEW_END_TIME"))},t.prototype.getDateJSON=function(t){return t?new Date(t):null},t.prototype.setDuration=function(){var t;return this.data.startDate&&this.data.endDate?(t=new Date(this.data.startDate.getTime()+this.data.startTime*n.MinutesInHour*n.MillisecondsInSecond),new Date(this.data.endDate.getTime()+this.data.endTime*n.MinutesInHour*n.MillisecondsInSecond)-t):null},t.prototype.validateStartDate=function(){var t,e,a=new Date,i=new Date,r=new Date;if(!this.data.startDate||_.isNull(this.data.startDate)||!this.data)return this.data.startTime=null,void(this.data.startDate=null);(_.isUndefined(this.data.startTime)||_.isNull(this.data.startTime))&&(this.data&&this.data.endTime?this.data.startTime=0===this.data.endTime?0:this.data.endTime-n.IntervalTimeRange:(a=new Date,e=a.getTime()-this.pipDateConvert.toStartDay(a),this.data.startTime=Math.floor(e/(n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond))*n.IntervalTimeRange)),this.data&&this.data.startDate&&(i=new Date(this.data.startDate.getTime()+this.data.startTime*n.MinutesInHour*n.MillisecondsInSecond),this.data.duration?(r=new Date(i.getTime()+this.data.duration),this.data.endDate=this.pipDateConvert.toStartDay(r),t=r.getTime()-this.data.endDate.getTime(),this.data.endTime=Math.floor(t/(n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond))*n.IntervalTimeRange):(r=new Date(this.data.endDate.getTime()+this.data.endTime*n.MinutesInHour*n.MillisecondsInSecond),i>=r&&(this.data.endDate=this.pipDateConvert.toStartDay(new Date(i.getTime()+n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond)),this.data.endTime=(this.data.startTime+n.IntervalTimeRange)%(n.HoursInDay*n.MinutesInHour))),this.data.startTime=Math.round(this.data.startTime/n.IntervalTimeRange)*n.IntervalTimeRange)},t.prototype.validateEndDate=function(){var t=new Date,e=new Date,a=new Date;if(!this.data.endDate)return this.data.endTime=null,void(this.data.endDate=null);(_.isUndefined(this.data.endTime)||_.isNull(this.data.endTime))&&(this.data.startTime?this.data.endTime=this.data.startTime===n.HoursInDay*n.MinutesInHour-n.IntervalTimeRange?n.HoursInDay*n.MinutesInHour-n.IntervalTimeRange:this.data.startTime+n.IntervalTimeRange:(t=new Date,t=t.getTime()-this.pipDateConvert.toStartDay(t),this.data.endTime=Math.floor(t/(n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond))*n.IntervalTimeRange)),this.data.startDate&&this.data.startTime&&(e=new Date(this.data.startDate.getTime()+this.data.startTime*n.MinutesInHour*n.MillisecondsInSecond)),this.data.endDate&&this.data.endTime&&(a=new Date(this.data.endDate.getTime()+this.data.endTime*n.MinutesInHour*n.MillisecondsInSecond)),e>=a&&(this.data.startDate=this.pipDateConvert.toStartDay(new Date(a.getTime()-n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond)),this.data.startTime=this.data.endTime%(n.HoursInDay*n.MinutesInHour)==0?n.HoursInDay*n.MinutesInHour-n.IntervalTimeRange:this.data.endTime-n.IntervalTimeRange),this.data.endTime=Math.round(this.data.endTime/n.IntervalTimeRange)*n.IntervalTimeRange,this.data.duration=this.setDuration()},t.prototype.setDate=function(){var t;this.data||(this.data=new a),this.data.bind=!1,this.data.startDate&&(t=this.data.startTime?this.data.startTime*n.MinutesInHour*n.MillisecondsInSecond:0,this.pipStartDate=new Date(this.data.startDate.getTime()+t)),this.data.endDate&&(t=this.data.endTime?this.data.endTime*n.MinutesInHour*n.MillisecondsInSecond:0,this.pipEndDate=new Date(this.data.endDate.getTime()+t)),this.data.bind=!0},t.prototype.defineDate=function(){var t,e;null!==this.pipStartDate&&void 0!==this.pipStartDate&&(t=_.isDate(this.pipStartDate)?this.pipStartDate:null,t||(t=this.getDateJSON(this.pipStartDate)),this.data.startDate=this.pipDateConvert.toStartDay(t),this.data.startTime=(new Date(t)-this.data.startDate)/(n.MinutesInHour*n.MillisecondsInSecond)),null!==this.pipEndDate&&void 0!==this.pipEndDate&&(e=_.isDate(this.pipEndDate)?this.pipEndDate:null,e||(e=this.getDateJSON(this.pipEndDate)),this.data.endDate=this.pipDateConvert.toStartDay(e),this.data.endTime=(new Date(e)-this.data.endDate)/(n.MinutesInHour*n.MillisecondsInSecond)),this.validateStartDate(),this.validateEndDate(),this.data.duration=this.setDuration(),this.setDate()},t.prototype.getTimeInterval=function(){var t,e;t=[];for(var a=0;a<24;a++)for(var i=0;i<2;i++)e=i*n.IntervalTimeRange,t.push({id:a*n.MinutesInHour+e,time:_.pad(a.toString(),3,"0").substr(0,2)+":"+_.pad(e.toString(),2,"0")});return t},t.prototype.toBoolean=function(t){return null!=t&&(!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t))},t.prototype.initDate=function(){this.data.startDate=null,this.data.startTime=null,this.data.endDate=null,this.data.endTime=null,this.data.duration=null,this.showTime=!this.toBoolean(this.pipHideTime)},t.prototype.onChangeStartDate=function(t){this.validateStartDate(),this.data.duration=this.setDuration(),this.setDate(),this.pipChanged(this.pipStartDate,this.pipEndDate)},t.prototype.onChangeEndDate=function(){this.validateEndDate(),this.data.duration=this.setDuration(),this.setDate(),this.pipChanged(this.pipStartDate,this.pipEndDate)},t.prototype.onChangeStartTime=function(){this.data.startDate||(this.data.startDate=this.pipDateConvert.toStartDay(new Date)),this.validateStartDate(),this.data.duration=this.setDuration(),this.setDate(),this.pipChanged(this.pipStartDate,this.pipEndDate)},t.prototype.onChangeEndTime=function(){this.data.endDate||(this.data.endDate=this.pipDateConvert.toStartDay(new Date)),this.validateEndDate(),this.data.duration=this.setDuration(),this.setDate(),this.pipChanged(this.pipStartDate,this.pipEndDate)},t.prototype.isDisabled=function(){return!!this.disabled&&this.disabled()},t}()),o={bindings:i,templateUrl:"time_range_edit/TimeRangeEdit.html",controller:r};angular.module("pipTimeRangeEdit",[]).component("pipTimeRangeEdit",o)},{}],13:[function(t,e,n){!function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("date/Date.html",'<div class="pip-date layout-row flex" tabindex="-1"><md-input-container class="input-container flex"><md-select class="pip-date-day flex" ng-disabled="$ctrl.disableControls" ng-model="$ctrl.day" placeholder="{{$ctrl.dayLabel}}" ng-change="$ctrl.setValue()"><md-option ng-value="opt" ng-repeat="opt in $ctrl.days track by opt">{{:: opt }}</md-option></md-select></md-input-container><div class="input-container-separator flex-fixed"></div><md-input-container class="input-container flex"><md-select class="pip-date-monthflex" ng-disabled="$ctrl.disableControls" ng-model="$ctrl.month" placeholder="{{$ctrl.monthLabel}}" ng-change="$ctrl.onMonthChanged()"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.months track by opt.id">{{:: opt.name }}</md-option></md-select></md-input-container><div class="input-container-separator flex-fixed"></div><md-input-container class="input-container flex"><md-select class="pip-date-year flex" ng-disabled="$ctrl.disableControls" ng-model="$ctrl.year" placeholder="{{$ctrl.yearLabel}}" ng-change="$ctrl.onYearChanged()"><md-option ng-value="opt" ng-repeat="opt in $ctrl.years track by opt">{{:: opt }}</md-option></md-select></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("date_range/DateRange.html",'<div class="pip-date-range layout-row flex" tabindex="-1"><md-input-container ng-show="$ctrl.isDay()" class="input-container pip-day flex" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-day" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" md-on-open="$ctrl.onDayClick()" ng-model="$ctrl.day" ng-change="$ctrl.setValue()" placeholder="{{$ctrl.dayLabel}}" aria-label="DAY"><md-option ng-value="opt" ng-repeat="opt in $ctrl.days track by opt">{{$ctrl.nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container ng-show="$ctrl.isWeek()" class="input-container flex" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-week" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" ng-model="$ctrl.week" ng-change="$ctrl.onWeekChange()" placeholder="{{$ctrl.weekLabel}}" aria-label="WEEK"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.weeks track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'space16\': $ctrl.$mdMedia(\'gt-xs\'), \'space8\': $ctrl.$mdMedia(\'xs\')}" ng-show="$ctrl.isDay() || $ctrl.isWeek()"></div><md-input-container ng-show="$ctrl.isMonth() && !$ctrl.monthFormatShort" class="input-container flex" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-month" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" md-on-open="$ctrl.onMonthClick()" ng-model="$ctrl.month" ng-change="$ctrl.onMonthChanged()" placeholder="{{$ctrl.monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.months track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container ng-show="$ctrl.isMonth() && $ctrl.monthFormatShort" class="flex input-container" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-month" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" md-on-open="$ctrl.onMonthClick()" ng-model="$ctrl.month" ng-change="$ctrl.onMonthChanged()" placeholder="{{$ctrl.monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.shortMonths track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'space16\': $ctrl.$mdMedia(\'gt-xs\'), \'space8\': $ctrl.$mdMedia(\'xs\')}" ng-show="$ctrl.isMonth()"></div><md-input-container class="input-container flex" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-year" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" md-on-open="$ctrl.onYearClick()" ng-model="$ctrl.year" ng-change="$ctrl.onYearChanged()" placeholder="{{$ctrl.yearLabel}}" aria-label="YEAR"><md-option ng-value="opt" ng-repeat="opt in $ctrl.years track by opt">{{ opt }}</md-option></md-select></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("time_range/TimeRange.html",'<p><span ng-if="$ctrl.data.start != null">{{$ctrl.data.start | formatLongDateTime}}</span> <span class="separator" ng-if="$ctrl.data.start && $ctrl.data.end">-</span> <span ng-if="$ctrl.data.end != null">{{$ctrl.data.end | formatLongDateTime}}</span></p>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("time_range_edit/TimeRangeEdit.html",'<div class="event-edit layout-row layout-xs-column flex layout-align-start-start"><div flex="47" class="start-time-container"><p class="text-caption text-grey">{{$ctrl.startLabel}}</p><div class="layout-row layout-align-space-between-center"><div class="pip-datepicker-container" flex="49"><md-datepicker ng-model="$ctrl.data.startDate" xmd-placeholder="{{$ctrl.startLabel}}" ng-change="$ctrl.onChangeStartDate()" ng-disabled="$ctrl.isDisabled()" aria-label="START-DATE"></md-datepicker></div><div flex="" ng-if="$ctrl.showTime"><md-input-container class="input-container"><md-select aria-label="START-TIME" ng-model="$ctrl.data.startTime" ng-disabled="$ctrl.isDisabled()" ng-change="$ctrl.onChangeStartTime($ctrl.data.startTime)"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex="47" class="end-time-container"><p class="text-caption text-grey">{{$ctrl.endLabel}}</p><div class="layout-row layout-align-space-between-center"><div class="pip-datepicker-container flex-49"><md-datepicker ng-model="$ctrl.data.endDate" xmd-placeholder="{{$ctrl.endLabel}}" ng-disabled="$ctrl.isDisabled()" ng-change="$ctrl.onChangeEndDate()" aria-label="END-DATE"></md-datepicker></div><div flex="" ng-if="$ctrl.showTime"><md-input-container class="input-container"><md-select aria-label="END-TIME" ng-model="$ctrl.data.endTime" ng-change="$ctrl.onChangeEndTime()" ng-disabled="$ctrl.isDisabled()"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>')}])}()},{}]},{},[13,2,3,4,5,6,7,8,1,9,10,12,11])(13)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(o.pip||(o.pip={})).dialogs=t()}}(function(){return function t(o,i,e){function n(a,l){if(!i[a]){if(!o[a]){var s="function"==typeof require&&require;if(!l&&s)return s(a,!0);if(r)return r(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var p=i[a]={exports:{}};o[a][0].call(p.exports,function(t){var i=o[a][1][t];return n(i||t)},p,p.exports,t,o,i,e)}return i[a].exports}for(var r="function"==typeof require&&require,a=0;a<e.length;a++)n(e[a]);return n}({1:[function(t,o,i){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("./ConfirmationDialogParams"),r=function(t){function o(o,i,e){"ngInject";var n=t.call(this)||this;return n._injector=i,n.initTranslate(),n.$mdDialog=o,n.theme=e[pip.themes.ThemeRootVar],n}return e(o,t),o.$inject=["$mdDialog","$injector","$rootScope"],o.prototype.initTranslate=function(){var t;t=this._injector.has("pipTranslate")?this._injector.get("pipTranslate"):null,t?(t.translations("en",{DIALOG_CONFIRM_TITLE:"Confirm"}),t.translations("ru",{DIALOG_CONFIRM_TITLE:"Подтвердите"}),t.translations("en",{DIALOG_CONFIRM_OK:"Ok"}),t.translations("ru",{DIALOG_CONFIRM_OK:"Принять"}),t.translations("en",{DIALOG_CONFIRM_CANCEL:"Cancel"}),t.translations("ru",{DIALOG_CONFIRM_CANCEL:"Отменить"}),this.title=t.translate(this.title)||t.translate("DIALOG_CONFIRM_TITLE"),this.ok=t.translate(this.ok)||t.translate("DIALOG_CONFIRM_OK"),this.cancel=t.translate(this.cancel)||"DIALOG_CONFIRM_CANCEL"):(this.title=this.title||"Confirm",this.ok=this.ok||"OK",this.cancel=this.cancel||"Cancel")},o.prototype.onOk=function(){this.$mdDialog.hide()},o.prototype.onCancel=function(){this.$mdDialog.cancel()},o}(n.ConfirmationDialogParams);angular.module("pipConfirmationDialog").controller("pipConfirmationDialogController",r)},{"./ConfirmationDialogParams":2}],2:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t}();i.ConfirmationDialogParams=e},{}],3:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t){this._mdDialog=t}return t.$inject=["$mdDialog"],t.prototype.show=function(t,o,i){this._mdDialog.show({targetEvent:t.event,templateUrl:"confirmation/ConfirmationDialog.html",controller:"pipConfirmationDialogController",controllerAs:"$ctrl",locals:t,bindToController:!0,clickOutsideToClose:!0}).then(function(){o&&o()},function(){i&&i()})},t}();angular.module("pipConfirmationDialog").service("pipConfirmationDialog",e)},{}],4:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],5:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipConfirmationDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]),t("./ConfirmationDialogParams"),t("./ConfirmationDialogController"),t("./IConfirmationDialogService"),t("./ConfirmationDialogService")},{"./ConfirmationDialogController":1,"./ConfirmationDialogParams":2,"./ConfirmationDialogService":3,"./IConfirmationDialogService":4}],6:[function(t,o,i){function e(t){var o=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return o?o.translate(t)||t:t}}e.$inject=["$injector"],angular.module("pipDialogs.Translate",[]).filter("translate",e)},{}],7:[function(t,o,i){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("./ErrorDetailsDialogParams"),r=function(){function t(){this.errorDetails="Error details",this.errorMessage="Message",this.errorCode="Code",this.errorMethod="Method",this.errorPath="Path",this.errorText="Error"}return t}(),a=function(t){function o(o,i,e){"ngInject";var n=t.call(this)||this;return n.strings=new r,n._injector=i,n.$mdDialog=o,n.theme=e[pip.themes.ThemeRootVar],n.initTranslate(),n.error||(n.error="<none>"),n}return e(o,t),o.$inject=["$mdDialog","$injector","$rootScope"],o.prototype.initTranslate=function(){var t;t=this._injector.has("pipTranslate")?this._injector.get("pipTranslate"):null,t?(t.translations("en",{OK:"Ok",CANCEL:"Cancel",ERROR_DETAILS:"Error details",ERROR_CODE:"Error code",ERROR_PATH:"Path",ERROR_ERROR:"Error",ERROR_METHOD:"Method",ERROR_MESSAGE:"Message",ERROR_DISMISS:"Dismiss"}),t.translations("ru",{OK:"Ок",CANCEL:"Отмена",ERROR_DETAILS:"Детали ошибки",ERROR_CODE:"Код ошибки",ERROR_PATH:"Путь",ERROR_ERROR:"Ошибка",ERROR_METHOD:"Метод",ERROR_MESSAGE:"Сообщение"}),this.dismissButton=t.translate(this.dismissButton)||t.translate("ERROR_DISMISS"),this.strings.errorDetails=t.translate("ERROR_DETAILS"),this.strings.errorMessage=t.translate("ERROR_MESSAGE"),this.strings.errorCode=t.translate("ERROR_CODE"),this.strings.errorMethod=t.translate("ERROR_METHOD"),this.strings.errorPath=t.translate("ERROR_PATH"),this.strings.errorText=t.translate("ERROR_ERROR")):this.dismissButton=this.dismissButton||"Dismiss"},o.prototype.onOk=function(){this.$mdDialog.hide()},o.prototype.isString=function(t){return _.isString(t)},o.prototype.getErrorText=function(){return _.isString(this.error)?this.error:this.error&&this.error.error?this.error.error.toString():this.error&&this.error.data&&this.error.data.error?this.error.data.error.toString():"<none>"},o}(n.ErrorDetailsDialogParams);angular.module("pipErrorDetailsDialog").controller("pipErrorDetailsDialogController",a)},{"./ErrorDetailsDialogParams":8}],8:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t}();i.ErrorDetailsDialogParams=e},{}],9:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t){this._mdDialog=t}return t.$inject=["$mdDialog"],t.prototype.show=function(t,o,i){this._mdDialog.show({targetEvent:t.event,templateUrl:"error_details/ErrorDetailsDialog.html",controller:"pipErrorDetailsDialogController",controllerAs:"$ctrl",locals:t,bindToController:!0,clickOutsideToClose:!0}).then(function(){o&&o()},function(){i&&i()})},t}();angular.module("pipErrorDetailsDialog").service("pipErrorDetailsDialog",e)},{}],10:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipErrorDetailsDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]),t("./ErrorDetailsDialogParams"),t("./ErrorDetailsDialogService"),t("./ErrorDetailsDialogController"),function(t){for(var o in t)i.hasOwnProperty(o)||(i[o]=t[o])}(t("./ErrorDetailsDialogParams"))},{"./ErrorDetailsDialogController":7,"./ErrorDetailsDialogParams":8,"./ErrorDetailsDialogService":9}],11:[function(t,o,i){"use strict";function e(t){for(var o in t)i.hasOwnProperty(o)||(i[o]=t[o])}Object.defineProperty(i,"__esModule",{value:!0}),t("./dependencies/TranslateFilter"),t("./error_details"),t("./information"),t("./options"),t("./options_big"),t("./confirmation"),angular.module("pipDialogs",["pipInformationDialog","pipConfirmationDialog","pipOptionsDialog","pipOptionsBigDialog","pipErrorDetailsDialog"]),e(t("./error_details")),e(t("./information")),e(t("./options")),e(t("./options_big"))},{"./confirmation":5,"./dependencies/TranslateFilter":6,"./error_details":10,"./information":15,"./options":21,"./options_big":27}],12:[function(t,o,i){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("./InformationDialogParams"),r=function(t){function o(o,i,e){"ngInject";var n=t.call(this)||this;return n._injector=i,n.initTranslate(),n.$mdDialog=o,n.theme=e[pip.themes.ThemeRootVar],n}return e(o,t),o.$inject=["$mdDialog","$injector","$rootScope"],o.prototype.initTranslate=function(){var t;t=this._injector.has("pipTranslate")?this._injector.get("pipTranslate"):null;var o=this.message;t?(t.translations("en",{INFORMATION_TITLE:"Information"}),t.translations("ru",{INFORMATION_TITLE:"Информация"}),t.translations("en",{INFORMATION_OK:"Ok"}),t.translations("ru",{INFORMATION_OK:"Ок"}),this.title=t.translate(this.title)||t.translate("INFORMATION_TITLE"),this.ok=t.translate(this.ok)||t.translate("INFORMATION_OK"),o=t.translate(o)):(this.title=this.title||"Information",this.ok=this.ok||"OK");var i=this._injector.has("pipFormat")?this._injector.get("pipFormat"):null;this.item&&i&&(o=i.sprintf(o,void 0)),this.content=o},o.prototype.onOk=function(){this.$mdDialog.hide()},o.prototype.onCancel=function(){this.$mdDialog.cancel()},o}(n.InformationDialogParams);angular.module("pipInformationDialog").controller("pipInformationDialogController",r)},{"./InformationDialogParams":13}],13:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t}();i.InformationDialogParams=e},{}],14:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t){this._mdDialog=t}return t.$inject=["$mdDialog"],t.prototype.show=function(t,o,i){this._mdDialog.show({targetEvent:t.event,templateUrl:"information/InformationDialog.html",controller:"pipInformationDialogController",controllerAs:"$ctrl",locals:t,bindToController:!0,clickOutsideToClose:!0}).then(function(){o&&o()})},t}();angular.module("pipInformationDialog").service("pipInformationDialog",e)},{}],15:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipInformationDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]),t("./InformationDialogParams"),t("./InformationDialogController"),t("./InformationDialogService"),function(t){for(var o in t)i.hasOwnProperty(o)||(i[o]=t[o])}(t("./InformationDialogParams"))},{"./InformationDialogController":12,"./InformationDialogParams":13,"./InformationDialogService":14}],16:[function(t,o,i){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("./OptionsDialogParams"),r=function(t){function o(o,i,e){"ngInject";var n=t.call(this)||this;n.$mdDialog=o,n._injector=i,n.theme=e[pip.themes.ThemeRootVar],n.options=n.options||[],n.initTranslate(),n.selectedOption=_.find(n.options,{active:!0})||null;var r=n.selectedOption?n.selectedOption.name:n.selectedOptionName,a=_.findIndex(n.options,function(t){return t.name==r});return n.optionIndex=-1==a?0:a,n.selectedOption=n.options[n.optionIndex],n.selectedOptionName=n.selectedOption.name,setTimeout(n.focusInput,500),n}return e(o,t),o.$inject=["$mdDialog","$injector","$rootScope"],o.prototype.initTranslate=function(){var t;t=this._injector.has("pipTranslate")?this._injector.get("pipTranslate"):null,t?(t.translations("en",{DIALOG_OPTIONS_TITLE:"Choose Option"}),t.translations("ru",{DIALOG_OPTIONS_TITLE:"Выберите опцию"}),t.translations("en",{DIALOG_OPTIONS_SELECT:"Select"}),t.translations("ru",{DIALOG_OPTIONS_SELECT:"Выбрать"}),t.translations("en",{DIALOG_OPTIONS_CANCEL:"Cancel"}),t.translations("ru",{DIALOG_OPTIONS_CANCEL:"Отменить"}),this.title=t.translate(this.title)||t.translate("DIALOG_OPTIONS_TITLE"),this.ok=t.translate(this.ok)||t.translate("DIALOG_OPTIONS_SELECT"),this.cancel=t.translate(this.cancel)||"DIALOG_OPTIONS_CANCEL"):(this.title=this.title||"Choose Option",this.ok=this.ok||"Select",this.cancel=this.cancel||"Cancel")},o.prototype.onOk=function(){this.$mdDialog.hide()},o.prototype.onCancel=function(){this.$mdDialog.cancel()},o.prototype.onOptionSelect=function(t,o){t.stopPropagation(),this.selectedOptionName=o.name},o.prototype.onKeyPress=function(t){32!==t.keyCode&&13!==t.keyCode||(t.stopPropagation(),t.preventDefault(),this.onSelect())},o.prototype.onSelect=function(){var t;t=_.find(this.options,{name:this.selectedOptionName}),this.$mdDialog.hide({option:t,isCheckboxOption:this.isCheckboxOption})},o.prototype.focusInput=function(){var t;t=$(".pip-options-dialog .pip-list"),t.focus()},o}(n.OptionsDialogParams);angular.module("pipOptionsDialog").controller("pipOptionsDialogController",r)},{"./OptionsDialogParams":18}],17:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){this.icon="star",this.active=!0}return t}();i.OptionsDialogData=e},{}],18:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t}();i.OptionsDialogParams=e},{}],19:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t}();i.OptionsDialogResult=e},{}],20:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t){this._mdDialog=t}return t.$inject=["$mdDialog"],t.prototype.show=function(t,o,i){this._mdDialog.show({targetEvent:t.event,templateUrl:"options/OptionsDialog.html",controller:"pipOptionsDialogController",controllerAs:"$ctrl",locals:t,bindToController:!0,clickOutsideToClose:!0}).then(function(t){o&&o(t)},function(){i&&i()})},t}();angular.module("pipOptionsDialog").service("pipOptionsDialog",e)},{}],21:[function(t,o,i){"use strict";function e(t){for(var o in t)i.hasOwnProperty(o)||(i[o]=t[o])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipOptionsDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]),t("./OptionsDialogData"),t("./OptionsDialogParams"),t("./OptionsDialogResult"),t("./OptionsDialogController"),t("./OptionsDialogService"),e(t("./OptionsDialogData")),e(t("./OptionsDialogParams")),e(t("./OptionsDialogResult"))},{"./OptionsDialogController":16,"./OptionsDialogData":17,"./OptionsDialogParams":18,"./OptionsDialogResult":19,"./OptionsDialogService":20}],22:[function(t,o,i){"use strict";var e=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])};return function(o,i){function e(){this.constructor=o}t(o,i),o.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("./OptionsBigDialogParams"),r=t("./OptionsBigDialogData"),a=function(t){function o(o,i,e){"ngInject";var n=t.call(this)||this;n.onSelect=function(){var t;t=_.find(this.options,{name:this.selectedOptionName})||new r.OptionsBigDialogData,this.$mdDialog.hide({option:t})},n.$mdDialog=o,n._injector=i,n.theme=e[pip.themes.ThemeRootVar],n.initTranslate(),n.selectedOption=_.find(n.options,{active:!0})||null;var a=n.selectedOption?n.selectedOption.name:n.selectedOptionName,l=_.findIndex(n.options,function(t){return t.name==a});return n.optionIndex=-1==l?0:l,n.selectedOption=n.options[n.optionIndex],n.selectedOptionName=n.selectedOption.name,setTimeout(n.focusInput,500),n}return e(o,t),o.$inject=["$mdDialog","$injector","$rootScope"],o.prototype.initTranslate=function(){var t;t=this._injector.has("pipTranslate")?this._injector.get("pipTranslate"):null,t?(t.translations("en",{DIALOG_OPTIONS_TITLE:"Choose Option"}),t.translations("ru",{DIALOG_OPTIONS_TITLE:"Выберите опцию"}),t.translations("en",{DIALOG_OPTIONS_SELECT:"Select"}),t.translations("ru",{DIALOG_OPTIONS_SELECT:"Выбрать"}),t.translations("en",{DIALOG_OPTIONS_CANCEL:"Cancel"}),t.translations("ru",{DIALOG_OPTIONS_CANCEL:"Отменить"}),this.title=t.translate(this.title)||t.translate("DIALOG_OPTIONS_TITLE"),this.ok=t.translate(this.ok)||t.translate("DIALOG_OPTIONS_SELECT"),this.cancel=t.translate(this.cancel)||"DIALOG_OPTIONS_CANCEL"):(this.title=this.title||"Choose Option",this.ok=this.ok||"Select",this.cancel=this.cancel||"Cancel")},o.prototype.onOk=function(){this.$mdDialog.hide()},o.prototype.onCancel=function(){this.$mdDialog.cancel()},o.prototype.onOptionSelect=function(t,o){t.stopPropagation(),this.selectedOptionName=o.name,this.noActions&&this.onSelect()},o.prototype.onSelected=function(){this.selectedOptionName=this.options[this.optionIndex].name,this.noActions&&this.onSelect()},o.prototype.onKeyUp=function(t,o){32!==t.keyCode&&13!==t.keyCode||(t.stopPropagation(),t.preventDefault(),void 0!==o&&o>-1&&o<this.options.length&&(this.selectedOptionName=this.options[o].name,this.onSelect()))},o.prototype.focusInput=function(){var t;t=$(".pip-options-dialog .pip-list"),t.focus()},o}(n.OptionsBigDialogParams);angular.module("pipOptionsBigDialog").controller("pipOptionsBigDialogController",a)},{"./OptionsBigDialogData":23,"./OptionsBigDialogParams":24}],23:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t}();i.OptionsBigDialogData=e},{}],24:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t}();i.OptionsBigDialogParams=e},{}],25:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(){}return t}();i.OptionsBigDialogResult=e},{}],26:[function(t,o,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=function(){function t(t){this._mdDialog=t}return t.$inject=["$mdDialog"],t.prototype.show=function(t,o,i){this._mdDialog.show({targetEvent:t.event,templateUrl:"options_big/OptionsBigDialog.html",controller:"pipOptionsBigDialogController",controllerAs:"$ctrl",locals:t,bindToController:!0,clickOutsideToClose:!0}).then(function(t){o&&o(t)},function(){i&&i()})},t}();angular.module("pipOptionsBigDialog").service("pipOptionsBigDialog",e)},{}],27:[function(t,o,i){"use strict";function e(t){for(var o in t)i.hasOwnProperty(o)||(i[o]=t[o])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipOptionsBigDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]),t("./OptionsBigDialogParams"),t("./OptionsBigDialogData"),t("./OptionsBigDialogResult"),t("./OptionsBigDialogController"),t("./OptionsBigDialogService"),e(t("./OptionsBigDialogParams")),e(t("./OptionsBigDialogData")),e(t("./OptionsBigDialogResult"))},{"./OptionsBigDialogController":22,"./OptionsBigDialogData":23,"./OptionsBigDialogParams":24,"./OptionsBigDialogResult":25,"./OptionsBigDialogService":26}],28:[function(t,o,i){!function(t){try{t=angular.module("pipDialogs.Templates")}catch(o){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("confirmation/ConfirmationDialog.html",'<md-dialog class="pip-dialog pip-confirmation-dialog layout-column" width="400" md-theme="{{ ::$ctrl.theme }}"><div class="pip-header"><h3>{{ :: $ctrl.title }}</h3></div><div class="pip-footer"><div><md-button ng-click="$ctrl.onCancel()">{{ :: $ctrl.cancel }}</md-button><md-button class="md-accent" ng-click="$ctrl.onOk()">{{ :: $ctrl.ok }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipDialogs.Templates")}catch(o){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("error_details/ErrorDetailsDialog.html",'<md-dialog class="pip-dialog pip-error-details-dialog layout-column" width="400" md-theme="{{ $ctrl.theme }}"><div class="pip-body"><div class="pip-header"><h3>{{ ::$ctrl.strings.errorDetails | translate }}</h3></div><div class="layout-row layout-align-start-center error-section text-body2 color-secondary-text" ng-if="$ctrl.error.code || ($ctrl.error.data && $ctrl.error.data.code)">{{ ::$ctrl.strings.errorCode | translate }}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="$ctrl.error.code || ($ctrl.error.data && $ctrl.error.data.code)">{{ $ctrl.error.code || $ctrl.error.data.code }}</div><div class="layout-row layout-align-start-center error-section text-body2 color-secondary-text" ng-if="$ctrl.error.path || ($ctrl.error.data && $ctrl.error.data.path)">{{ ::$ctrl.strings.errorPath | translate }}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="$ctrl.error.path || ($ctrl.error.data && $ctrl.error.data.path)">{{ $ctrl.error.path || $ctrl.error.data.path }}</div><div class="error-section text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="$ctrl.isString($ctrl.error) || $ctrl.error.error || ($ctrl.error.data && $ctrl.error.data.error)">{{ ::$ctrl.strings.errorText | translate }}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="$ctrl.error.error || ($ctrl.error.data && $ctrl.error.data.error)">{{ $ctrl.getErrorText() }}</div><div class="error-section text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="$ctrl.error.method || ($ctrl.error.data && $ctrl.error.data.method)">{{ ::$ctrl.strings.errorMethod | translate }}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="$ctrl.error.method || ($ctrl.error.data && $ctrl.error.data.method)">{{ $ctrl.error.method || $ctrl.error.data.method }}</div><div class="error-section text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="$ctrl.error.message || ($ctrl.error.data && $ctrl.error.data.message)">{{ ::$ctrl.strings.errorMessage | translate }}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="$ctrl.error.message || ($ctrl.error.data && $ctrl.error.data.message)">{{ $ctrl.error.message || $ctrl.error.data.message }}</div></div><div class="pip-footer"><div><md-button class="md-accent m0" ng-click="$ctrl.onOk()">{{ ::$ctrl.dismissButton | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipDialogs.Templates")}catch(o){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("information/InformationDialog.html",'<md-dialog class="pip-dialog pip-information-dialog layout-column" width="400" md-theme="{{ $ctrl.theme }}"><div class="pip-header"><h3>{{:: $ctrl.title | translate }}</h3></div><div class="pip-body"><div class="pip-content">{{ $ctrl.content }}</div></div><div class="pip-footer"><div><md-button class="md-accent" ng-click="$ctrl.onOk()">{{ $ctrl.ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipDialogs.Templates")}catch(o){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("options/OptionsDialog.html",'<md-dialog class="pip-dialog pip-options-dialog layout-column" min-width="400" md-theme="{{ $ctrl.theme }}"><md-dialog-content class="pip-body lp0 tp0 rp0 bp24 pip-scroll"><div class="pip-header"><h3>{{ ::$ctrl.title | translate }}</h3><div ng-show="$ctrl.checkboxOptionCaption" class="header-option text-subhead1 divider-bottom"><md-checkbox ng-model="$ctrl.isCheckboxOption" aria-label="CHECKBOX">{{ ::$ctrl.checkboxOptionCaption | translate }}</md-checkbox></div></div><div class="pip-content"><md-radio-group ng-model="$ctrl.selectedOptionName" class="pip-list md-primary" md-no-ink="true" ng-keypress="$ctrl.onKeyPress($event)" tabindex="0"><div ng-repeat="option in $ctrl.options" class="pip-list-item" md-ink-ripple="" ui-event="{ click: \'$ctrl.onOptionSelect($event, option)\' }" ng-class="{ selected: option.name == $ctrl.selectedOptionName }"><div class="pip-list-item item-padding"><md-icon class="pip-option-icon" md-svg-icon="icons:{{ option.icon }}" ng-if="option.icon"></md-icon><div class="pip-option-title">{{ ::option.title | translate }}</div><md-radio-button ng-value="option.name" tabindex="-1" aria-label="{{ ::option.title | translate }}"></md-radio-button></div></div></md-radio-group></div></md-dialog-content><div class="pip-footer"><div><md-button class="pip-cancel" ng-click="$ctrl.onCancel()">{{ ::$ctrl.cancel | translate }}</md-button><md-button class="pip-submit md-accent" ng-click="$ctrl.onSelect()">{{ ::$ctrl.ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipDialogs.Templates")}catch(o){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("options_big/OptionsBigDialog.html",'<md-dialog class="pip-dialog pip-options-dialog-big layout-column" min-width="400" md-theme="{{ $ctrl.theme }}"><md-dialog-content class="pip-body pip-scroll" ng-class="{\'bp24\': !$ctrl.noActions}"><div class="pip-header" ng-class="{\'header-hint\': $ctrl.noTitle && $ctrl.hint}"><h3 class="m0" ng-if="!$ctrl.noTitle">{{ ::$ctrl.title | translate }}</h3><div ng-show="$ctrl.noTitle && $ctrl.hint" class="dialog-hint layout-row layout-align-start-center"><div class="hint-icon-container flex-fixed"><md-icon md-svg-icon="icons:info-circle-outline"></md-icon></div><div>{{ ::$ctrl.hint | translate }}</div></div></div><div class="content-divider" ng-if="!noTitle"></div><div class="pip-content"><div class="spacer8" ng-if="noTitle && hint"></div><md-list class="pip-menu pip-ref-list" pip-selected="$ctrl.optionIndex" index="{{ $ctrl.optionIndex }}" pip-select="$ctrl.onSelected($event)"><md-list-item class="pip-ref-list-item pip-selectable layout-row layout-align-start-center" ng-class="{\'selected md-focused\' : option.name == $ctrl.selectedOptionName, \'divider-bottom\': $index != options.length - 1}" md-ink-ripple="" ng-keyup="$ctrl.onKeyUp($event, $index)" ng-repeat="option in $ctrl.options"><div class="pip-content content-stretch" ng-click="$ctrl.onOptionSelect($event, option)"><p class="pip-title spacer-right" ng-if="option.title" style="margin-bottom: 4px !important;">{{ ::option.title | translate }}</p><div class="pip-subtitle spacer-right" style="height: inherit" ng-if="option.subtitle">{{ ::option.subtitle | translate }}</div><div class="pip-subtitle spacer-right" style="height: inherit" ng-if="option.text" ng-bind-html="option.text | translate"></div></div></md-list-item></md-list></div><div class="spacer8" ng-if="$ctrl.noActions"></div></md-dialog-content><div class="pip-footer" ng-if="!$ctrl.noActions"><div><md-button class="pip-cancel" ng-click="$ctrl.onCancel()">{{ ::$ctrl.cancel | translate }}</md-button><md-button class="pip-submit md-accent" ng-click="$ctrl.onSelect()" style="margin-right: -6px">{{ ::$ctrl.ok | translate }}</md-button></div></div></md-dialog>')}])}()},{}]},{},[28,11])(28)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).nav=t()}}(function(){return function t(e,i,n){function o(c,s){if(!i[c]){if(!e[c]){var r="function"==typeof require&&require;if(!s&&r)return r(c,!0);if(a)return a(c,!0);var p=new Error("Cannot find module '"+c+"'");throw p.code="MODULE_NOT_FOUND",p}var l=i[c]={exports:{}};e[c][0].call(l.exports,function(t){var i=e[c][1][t];return o(i||t)},l,l.exports,t,e,i,n)}return i[c].exports}for(var a="function"==typeof require&&require,c=0;c<n.length;c++)o(n[c]);return o}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./IActionsService"),o=t("./IActionsService"),a=t("./IActionsService"),c=function(){function t(t,e){this._config=t,this._rootScope=e}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryGlobalActions",{get:function(){return this._config.primaryGlobalActions},set:function(t){this._config.primaryGlobalActions=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondaryGlobalActions",{get:function(){return this._config.secondaryGlobalActions},set:function(t){this._config.secondaryGlobalActions=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryLocalActions",{get:function(){return this._config.primaryLocalActions},set:function(t){this._config.primaryLocalActions=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondaryLocalActions",{get:function(){return this._config.secondaryLocalActions},set:function(t){this._config.secondaryLocalActions=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),t.prototype.show=function(t,e){this._config.primaryLocalActions=t||[],this._config.secondaryLocalActions=e||[],this.sendChangeEvent()},t.prototype.hide=function(){this._config.primaryLocalActions=[],this._config.secondaryLocalActions=[],this.sendChangeEvent()},t.prototype.updateCount=function(t,e){null!=t&&_.isNumber(e)&&(_.each(this._config.primaryGlobalActions,function(i){i.name==t&&(i.count=e)}),_.each(this._config.primaryLocalActions,function(i){i.name==t&&(i.count=e)}),this.sendChangeEvent())},t.prototype.clearCounts=function(){_.each(this._config.primaryGlobalActions,function(t){t.count=null}),_.each(this._config.primaryLocalActions,function(t){t.count=null}),this.sendChangeEvent()},t.prototype.sendChangeEvent=function(){this._rootScope.$emit(o.ActionsChangedEvent,this._config)},t.prototype.openMenuEvent=function(){this._rootScope.$emit(a.SecondaryActionsOpenEvent)},t}(),s=function(){function t(){this._config=new n.ActionsConfig}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t||new n.ActionsConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryGlobalActions",{get:function(){return this._config.primaryGlobalActions},set:function(t){this._config.primaryGlobalActions=t||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondaryGlobalActions",{get:function(){return this._config.secondaryGlobalActions},set:function(t){this._config.secondaryGlobalActions=t||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"primaryLocalActions",{get:function(){return this._config.primaryLocalActions},set:function(t){this._config.primaryLocalActions=t||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"secondaryLocalActions",{get:function(){return this._config.secondaryLocalActions},set:function(t){this._config.secondaryLocalActions=t||[]},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new c(this._config,t)),this._service}],t}();angular.module("pipActions").provider("pipActions",s)},{"./IActionsService":2}],2:[function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(i,"__esModule",{value:!0}),i.ActionsChangedEvent="pipActionsChanged",i.SecondaryActionsOpenEvent="pipSecondaryActionsOpen";var o=function(){function t(){}return t}();i.SimpleActionItem=o;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(o);i.ActionItem=a;var c=function(){function t(){this.primaryGlobalActions=[],this.primaryLocalActions=[],this.secondaryGlobalActions=[],this.secondaryLocalActions=[]}return t}();i.ActionsConfig=c},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,a,c,s,r){"ngInject";var p=this;this.$element=t,this.$injector=e,this.$scope=i,this.$rootScope=n,this.$window=o,this.$location=a,this.pipActions=c,this._pipTranslate=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null,this._pipTranslate&&this._pipTranslate.setTranslations&&(this._pipTranslate.setTranslations("en",{DOCUMENTS_ATTACHED:"document(s) attached",ERROR_DOCUMENTS_LOADED:"Error: <%= error_number %> document(s) are not loaded"}),this._pipTranslate.setTranslations("ru",{DOCUMENTS_ATTACHED:"документов добавлено",ERROR_DOCUMENTS_LOADED:"Ошибка: <%= error_number %> документ(ов) не загружено"})),this.$element.addClass("pip-primary-actions"),this.$rootScope.$on("pipActionsChanged",function(t,e){p.onActionsChanged(t,e)})}return t.$inject=["$element","$injector","$scope","$rootScope","$window","$location","pipActions","$log","$attrs"],t.prototype.$onInit=function(){this.localActions&&(this.pipActions.primaryLocalActions=this.localActions),this.globalActions&&(this.pipActions.primaryGlobalActions=this.globalActions),this.config=this.pipActions.config},t.prototype.onActionsChanged=function(t,e){this.config=e},t.prototype.isHidden=function(t){return t.access&&!t.access(t)},t.prototype.actionCount=function(t){return null===t.count||t.count<=0?"":t.count>99?"!":String(t.count)},t.prototype.clickAction=function(t,e){if(t&&!t.divider){if(t.subActions)return void e(this.originatorEv);if(_.isFunction(t.click))return void t.click(t);if(t.href)return void(this.$window.location.href=t.href);if(t.url)return void this.$location.url(t.url);if(t.state){if(this.$injector.has("$state")){var i=this.$injector.has("pipTranslate")?this.$injector.get("$state"):null;i&&i.go(t.state,t.stateParams)}}else t.event?this.$rootScope.$broadcast(t.event):this.$rootScope.$broadcast("pipActionClicked",t.name)}},t}(),o={localActions:"<pipLocalActions",globalActions:"<pipGlobalActions",originatorEv:"<?pipOriginatorEv"};!function(){function t(){}}();!function(){var t={bindings:o,templateUrl:"actions/PrimaryActions.html",controller:n};angular.module("pipActions").component("pipPrimaryActions",t)}()},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,a,c,s){"ngInject";var r=this;this.$attrs=t,this.$injector=e,this.$log=i,this.$rootScope=n,this.$window=o,this.$location=a,this.pipActions=c,s.addClass("pip-secondary-actions"),this.localActions&&(c.secondaryLocalActions=this.localActions),this.globalActions&&(c.secondaryGlobalActions=this.globalActions),this.config=c.config,this.$rootScope.$on("pipActionsChanged",function(t,e){r.onActionsChanged(t,e)}),this.$rootScope.$on("pipSecondaryActionsOpen",function(){r.onActionsMenuOpen()})}return t.$inject=["$attrs","$injector","$log","$rootScope","$window","$location","pipActions","$element"],t.prototype.getMenu=function(t){this._menuFn=t},t.prototype.onActionsMenuOpen=function(){this._menuFn()},t.prototype.openMenu=function(t,e){this.originatorEv=e,t(e)},t.prototype.onActionsChanged=function(t,e){this.config=e},t.prototype.isHidden=function(t){return t.access&&!t.access(t)},t.prototype.actionCount=function(t){return null===t.count||t.count<=0?"":t.count>99?"!":String(t.count)},t.prototype.calcActions=function(t){var e=this,i=0;return _.each(t,function(t){e.isHidden(t)||i++}),i},t.prototype.secondaryActionsVisible=function(){return this.calcActions(this.config.secondaryGlobalActions)>0||this.calcActions(this.config.secondaryLocalActions)>0},t.prototype.secondaryDividerVisible=function(){return this.calcActions(this.config.secondaryGlobalActions)>0&&this.calcActions(this.config.secondaryLocalActions)>0},t.prototype.clickAction=function(t,e){if(t&&!t.divider){if(t.subActions)return void e(this.originatorEv);if(t.click)return void t.click(t);if(t.href)return void(this.$window.location.href=t.href);if(t.url)return void this.$location.url(t.url);if(t.state){if(this.$injector.has("$state")){var i=this.$injector.has("pipTranslate")?this.$injector.get("$state"):null;i&&i.go(t.state,t.stateParams)}}else t.event?this.$rootScope.$broadcast(t.event):this.$rootScope.$broadcast("pipActionClicked",t.name)}},t}(),o={localActions:"<pipLocalActions",globalActions:"<pipGlobalActions"};!function(){function t(){}}();!function(){var t={bindings:o,templateUrl:"actions/SecondaryActions.html",controller:n};angular.module("pipActions").component("pipSecondaryActions",t)}()},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipActions",["ngMaterial","pipNav.Templates","ui.router"]),t("./ActionsService"),t("./PrimaryActions"),t("./SecondaryActions"),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./IActionsService"))},{"./ActionsService":1,"./IActionsService":2,"./PrimaryActions":3,"./SecondaryActions":4}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i){"ngInject";var n=this;t.addClass("pip-appbar"),t.addClass("color-primary-bg"),this.config=i.config,e.$on("pipAppBarChanged",function(t,e){n.onAppBarChanged(t,e)})}return t.$inject=["$element","$rootScope","pipAppBar"],t.prototype.onAppBarChanged=function(t,e){this.config=e},t}(),o={transclude:!0,templateUrl:"appbar/AppBar.html",controller:n};angular.module("pipAppBar").component("pipAppbar",o)},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.AppBarConfig=n},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,a){"ngInject";var c=this;this.$scope=t,this._partName=String(i.pipAppbarPart),this._partValue=null;var s=this._partName.indexOf(":");s>0&&(this._partValue=this._partName.substr(s+1),this._partName=this._partName.substr(0,s)),this.onAppBarChanged(null,a.config),o.$on("pipAppBarChanged",function(t,e){c.onAppBarChanged(null,e)})}return t.$inject=["$scope","$element","$attrs","$log","$rootScope","pipAppBar"],t.prototype.onAppBarChanged=function(t,e){var i=e.parts||{},n=i[this._partName],o=!!(this._partValue?n==this._partValue:n);o!=this.$scope.visible&&(this.$scope.visible=o)},t}();!function(){function t(t){"ngInject";var e=t[0];return{transclude:e.transclude,priority:e.priority,terminal:e.terminal,restrict:e.restrict,scope:!0,link:function(t,i,n){n.ngIf=function(){return t.visible},e.link.apply(e,arguments)},controller:n}}t.$inject=["ngIfDirective"],angular.module("pipAppBar").directive("pipAppbarPart",t)}()},{}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./AppBarConfig");i.AppBarChangedEvent="pipAppBarChanged";var o=function(){function t(t,e){this.$rootScope=e,this._config=t}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classes",{get:function(){return this._config.classes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parts",{get:function(){return this._config.parts},set:function(t){this._config.parts=t||{},this.sendConfigEvent()},enumerable:!0,configurable:!0}),t.prototype.show=function(t,e,i){this._config.visible=!0,this._config.parts=t||this._config.parts||{},this._config.classes=e||this._config.classes||[],i&&this.setShadow(i),this.sendConfigEvent()},t.prototype.hide=function(){this._config.visible=!1,this.sendConfigEvent()},t.prototype.hideShadow=function(){this._config.classes=_.reject(this._config.classes,function(t){return t.startsWith("pip-shadow")})},t.prototype.setShadow=function(t){var e=this;this.hideShadow(),null!=t&&t.length>0?_.each(t,function(t){e._config.classes.push("pip-shadow-"+t)}):this._config.classes.push("pip-shadow")},t.prototype.addShadow=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.setShadow(t),this.sendConfigEvent()},t.prototype.removeShadow=function(){this.hideShadow(),this.sendConfigEvent()},t.prototype.addClass=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];_.each(e,function(e){t._config.classes.push(e)}),this.sendConfigEvent()},t.prototype.removeClass=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];_.each(e,function(e){t._config.classes=_.reject(t._config.classes,function(t){return t==e})}),this.sendConfigEvent()},t.prototype.part=function(t,e){this._config.parts[t]=e,this.sendConfigEvent()},t.prototype.sendConfigEvent=function(){this.$rootScope.$broadcast(i.AppBarChangedEvent,this._config)},t}(),a=function(){function t(){this._config={visible:!0,parts:{},classes:[]}}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t||new n.AppBarConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parts",{get:function(){return this._config.parts},set:function(t){this._config.parts=t||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classes",{get:function(){return this._config.classes},set:function(t){this._config.classes=t||[]},enumerable:!0,configurable:!0}),t.prototype.addClass=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];_.each(e,function(e){t._config.classes.push(e)})},t.prototype.removeClass=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];_.each(e,function(e){t._config.classes=_.reject(t._config.classes,function(t){return t==e})})},t.prototype.part=function(t,e){this._config.parts[t]=e},t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new o(this._config,t)),this._service}],t}();angular.module("pipAppBar").provider("pipAppBar",a)},{"./AppBarConfig":7}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipAppBar",["ngMaterial","pipNav.Templates"]),t("./AppBarConfig"),t("./AppBarService"),t("./AppBar"),t("./AppBarPart"),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./AppBarService"))},{"./AppBar":6,"./AppBarConfig":7,"./AppBarPart":8,"./AppBarService":9}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./BreadcrumbService"),o=t("./BreadcrumbService"),a=t("../search/SearchService"),c=function(){function t(t,e,i,a,c,s,r,p,l){"ngInject";var u=this;this.$rootScope=t,this.$window=e,this.$location=i,this.$injector=a,this.navConstant=l,p.addClass("pip-breadcrumb"),this.config=c.config,t.$on(n.BreadcrumbChangedEvent,function(t,e){u.onBreadcrumbChanged(t,e)}),t.$on(o.BreadcrumbBackEvent,function(){u.onBreadcrumbBack()});var d=a.has("pipMedia")?a.get("pipMedia"):null;this._media=void 0!==d?d:s,this.config.breakpoint||(this.config.breakpoint=this.navConstant.BREADCRUMB_BREAKPOINT)}return t.$inject=["$rootScope","$window","$location","$injector","pipBreadcrumb","$mdMedia","$state","$element","navConstant"],t.prototype.onBreadcrumbChanged=function(t,e){this.config=e},t.prototype.onBreadcrumbBack=function(){var t=this.config.items;if(_.isArray(t)&&t.length>0){var e=t[t.length-1];_.isFunction(e.click)?e.click(e):this.$window.history.back()}else this.$window.history.back()},t.prototype.onClick=function(t){_.isFunction(t.click)&&t.click(t)},t.prototype.openSearch=function(){this.$rootScope.$broadcast(a.OpenSearchEvent)},t.prototype.actionsVisible=function(t){return angular.isArray(t.subActions)&&t.subActions.length>1},t.prototype.onOpenMenu=function(t,e){this.originatorEv=e,t(this.originatorEv)},t.prototype.onSubActionClick=function(t){if(t&&!t.divider){if(_.isFunction(t.click))return void t.click(t);if(t.href)return void(this.$window.location.href=t.href);if(t.url)return void this.$location.url(t.url);if(t.state){if(this.$injector.has("$state")){var e=this.$injector.get("$state");e.go(t.state,t.stateParams)}}else t.event?(this.$rootScope.$broadcast(t.event),this.originatorEv=null):(this.$rootScope.$broadcast("pipActionClicked",t.name),this.originatorEv=null)}},t}(),s={templateUrl:"breadcrumb/Breadcrumb.html",controller:c};angular.module("pipBreadcrumb").component("pipBreadcrumb",s)},{"../search/SearchService":35,"./BreadcrumbService":13}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.title=null,this.click=null,this.subActions=null}return t}();i.BreadcrumbItem=n;var o=function(){function t(){}return t}();i.BreadcrumbConfig=o},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./BreadcrumbConfig");i.BreadcrumbChangedEvent="pipBreadcrumbChanged",i.BreadcrumbBackEvent="pipBreadcrumbBack";var o=function(){function t(t,e){this.$rootScope=t,this._config=e}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._config.text},set:function(t){this._config.text=t,this._config.items=null,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._config.items},set:function(t){this._config.text=null,this._config.items=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"criteria",{get:function(){return this._config.criteria},set:function(t){this._config.criteria=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"breakpoint",{get:function(){return this._config.breakpoint},set:function(t){this._config.breakpoint=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),t.prototype.showText=function(t,e){this._config.text=t,this._config.items=null,this._config.criteria=e,this.sendConfigEvent()},t.prototype.showItems=function(t,e){this._config.items=t||[],this._config.text=null,this._config.criteria=e,this.sendConfigEvent()},t.prototype.sendConfigEvent=function(){this.$rootScope.$broadcast(i.BreadcrumbChangedEvent,this._config)},t}(),a=function(){function t(){this._config=new n.BreadcrumbConfig}return Object.defineProperty(t.prototype,"text",{get:function(){return this._config.text},set:function(t){this._config.text=t},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new o(t,this._config)),this._service}],t}();angular.module("pipBreadcrumb").provider("pipBreadcrumb",a)},{"./BreadcrumbConfig":12}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipBreadcrumb",["ngMaterial","pipNav.Templates","pipNav.Translate"]),t("./Breadcrumb"),t("./BreadcrumbService"),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./BreadcrumbService"))},{"./Breadcrumb":11,"./BreadcrumbService":13}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t){"ngInject";this.appbar=t.has("pipAppBar")?t.get("pipAppBar"):null,this.icon=t.has("pipNavIcon")?t.get("pipNavIcon"):null,this.breadcrumb=t.has("pipBreadcrumb")?t.get("pipBreadcrumb"):null,this.actions=t.has("pipActions")?t.get("pipActions"):null,this.search=t.has("pipSearch")?t.get("pipSearch"):null,this.sidenav=t.has("pipSideNav")?t.get("pipSideNav"):null,this.header=t.has("pipNavHeader")?t.get("pipNavHeader"):null,this.menu=t.has("pipNavMenu")?t.get("pipNavMenu"):null}return t.$inject=["$injector"],t.prototype.reset=function(){this.appbar&&this.appbar.show(),this.icon&&this.icon.showMenu(),this.breadcrumb&&this.breadcrumb.showText(null),this.actions&&this.actions.show(),this.search&&this.search.set(null),this.sidenav&&this.sidenav.show()},t}();angular.module("pipNavService",[]).service("pipNavService",n)},{}],16:[function(t,e,i){function n(t){"ngInject";var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}n.$inject=["$injector"],angular.module("pipNav.Translate",[]).filter("translate",n)},{}],17:[function(t,e,i){var n=function(){function t(t,e,i,n,o,a,c,s){"ngInject";this.$scope=t,this.$timeout=e,this._pipTheme=o.has("pipTheme")?o.get("pipTheme"):null,this._pipMedia=o.has("pipMedia")?o.get("pipMedia"):null,this._pipTheme?this.currentTheme=this._pipTheme.theme:c.$theme&&(this.currentTheme=c.$theme),this.themeClass=(n.class||"")+" md-"+this.currentTheme+"-theme",this.media=_.isUndefined(this._pipMedia)?s:this._pipMedia,this.actions=this.actions&&_.isArray(this.actions)?this.actions:[],this.activeIndex=this.activeIndex||0}return t.$inject=["$scope","$timeout","$element","$attrs","$injector","$log","$rootScope","$mdMedia"],t.prototype.disabled=function(){return!!this.ngDisabled&&this.ngDisabled()},t.prototype.onSelect=function(t){var e=this;this.activeIndex=t,this.select&&this.select(this.actions[t],this.activeIndex),this.pipChange&&this.$timeout(function(){e.pipChange()})},t.prototype.show=function(){return!this.showDropdown()||!!this.showDropdown()},t}(),o={ngDisabled:"&",actions:"=pipActions",showDropdown:"&pipShow",activeIndex:"=pipActiveIndex",select:"=pipDropdownSelect",pipChange:"&"},a=(function(){function t(){}}(),{bindings:o,templateUrl:"dropdown/Dropdown.html",controller:n});angular.module("pipDropdown",["pipNav.Templates"]).component("pipDropdown",a)},{}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,a,c){"ngInject";var s=this;this.$element=t,this.$scope=e,this.$rootScope=n,this.$timeout=o,this.pipNavHeader=a,this.imageUrl=null,t.addClass("pip-sticky-nav-header"),this.initImage(),this.cleanupNavHeaderChanged=n.$on("pipNavHeaderChanged",function(t,e){s.onNavHeaderChanged(t,e)}),this.cleanupSideNavStateChanged=n.$on("pipSideNavStateChanged",function(t,e){s.onStateChanged(t,e)})}return t.$inject=["$element","$scope","$log","$rootScope","$timeout","pipNavHeader","navConstant"],t.prototype.$onDestroy=function(){angular.isFunction(this.cleanupNavHeaderChanged)&&this.cleanupNavHeaderChanged(),angular.isFunction(this.cleanupSideNavStateChanged)&&this.cleanupSideNavStateChanged()},t.prototype.initImage=function(){var t=this;this.imageBlock=this.$element.find(".pip-sticky-nav-header-user"),this.$timeout(function(){t.image=t.$element.find(".pip-sticky-nav-header-user-image"),t.image[0]?(t.image[0].onload=function(){return t.onImageLoad()},t.image[0].onerror=function(){return t.onImageError()}):(t.image.onload=function(){return t.onImageLoad()},t.image.onerror=function(){return t.onImageError()}),t.onNavHeaderChanged(null,t.pipNavHeader.config)},20)},t.prototype.initHeader=function(){this.pipNavHeader.config&&(this.title=this.pipNavHeader.config.title,this.subtitle=this.pipNavHeader.config.subtitle,this.imageUrl=this.pipNavHeader.config.imageUrl,this.imageCss=this.pipNavHeader.config.imageCss)},t.prototype.onImageLoad=function(){this.setImageMarginCSS(this.image)},t.prototype.onImageError=function(){var t=this;this.loadedDefaultImage||this.$scope.$apply(function(){t.setImage(t.pipNavHeader.config,!0)})},t.prototype.onStateChanged=function(t,e){var i=this;void 0!==e&&("toggle"==e.id?this.$timeout(function(){i.showHeader=e&&"toggle"==e.id},400):this.showHeader=!1)},t.prototype.setImageMarginCSS=function(t){var e={},i=this.imageBlock.width?this.imageBlock.width():this.imageBlock.clientWidth,n=this.imageBlock.height?this.imageBlock.height():this.imageBlock.clientHeight,o=t[0].naturalWidth||t.width,a=t[0].naturalHeight||t.height,c=0;o/i>a/n?(c=-(o/a*n-i)/2,e["margin-left"]=c+"px",e.height=n+"px",e.width=o*n/a+"px",e["margin-top"]=""):(c=-(a/o*i-n)/2,e["margin-top"]=c+"px",e.height=a*i/o+"px",e.width=i+"px",e["margin-left"]=""),t.css(e)},t.prototype.setImage=function(t,e){if(t){var i;!e&&t.imageUrl?i=t.imageUrl:(this.loadedDefaultImage=!0,i=t.defaultImageUrl),i&&this.image?this.image.attr("src",i):this.imageBlock.css("display","none")}},t.prototype.onNavHeaderChanged=function(t,e){e&&(this.title=e.title,this.subtitle=e.subtitle,this.imageUrl=e.imageUrl,this.imageCss=e.imageCss,this.setImage(e,!1))},t.prototype.onUserClick=function(){this.$rootScope.$broadcast("pipNavUserClicked")},t}(),o={templateUrl:"header/NavHeader.html",controller:n};angular.module("pipNavHeader").component("pipNavHeader",o)},{}],19:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.NavHeaderConfig=n},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./NavHeaderConfig");i.NavHeaderChangedEvent="pipNavHeaderChanged";var o=function(){function t(t,e){this.$rootScope=e,this._config=t}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._config.title},set:function(t){this._config.title=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitle",{get:function(){return this._config.subtitle},set:function(t){this._config.subtitle=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageUrl",{get:function(){return this._config.imageUrl},set:function(t){this._config.imageUrl=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"click",{get:function(){return this._config.click},set:function(t){this._config.click=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this._config.event},set:function(t){this._config.event=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),t.prototype.show=function(t,e,i,n){this._config.title=t,this._config.subtitle=e,this._config.imageUrl=i,_.isFunction(n)?this._config.click=n:this._config.click=null,_.isString(n)?this._config.event=n:this._config.event=null,this.sendConfigEvent()},t.prototype.hide=function(){this._config.title=null,this._config.subtitle=null,this._config.imageUrl=null,this._config.click=null,this._config.event=null,this.sendConfigEvent()},t.prototype.sendConfigEvent=function(){this.$rootScope.$emit(i.NavHeaderChangedEvent,this._config)},t}(),a=function(){function t(){this._config=new n.NavHeaderConfig}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t||new n.NavHeaderConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultImageUrl",{get:function(){return this._config.defaultImageUrl},set:function(t){this._config.defaultImageUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"title",{get:function(){return this._config.title},set:function(t){this._config.title=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitle",{get:function(){return this._config.subtitle},set:function(t){this._config.subtitle=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"imageUrl",{get:function(){return this._config.imageUrl},set:function(t){this._config.imageUrl=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"click",{get:function(){return this._config.click},set:function(t){this._config.click=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"event",{get:function(){return this._config.event},set:function(t){this._config.event=t},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e,i,n){this._config.title=t,this._config.subtitle=e,this._config.imageUrl=i,_.isFunction(n)?this._config.click=n:this._config.click=null,_.isString(n)?this._config.event=n:this._config.event=null},t.prototype.clear=function(){this._config.title=null,this._config.subtitle=null,this._config.imageUrl=null,this._config.click=null,this._config.event=null},t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new o(this._config,t)),this._service}],t}();angular.module("pipNavHeader").provider("pipNavHeader",a)},{"./NavHeaderConfig":19}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipNavHeader",["ngMaterial","pipNav.Templates"]),t("./NavHeaderService"),t("./NavHeader"),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./NavHeaderService"))},{"./NavHeader":18,"./NavHeaderService":20}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],23:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../sidenav/SideNavService"),o=t("./NavIconService"),a={type:"<?pipType",imageUrl:"<?pipImageUrl",icon:"<?pipIcon"},c=(function(){function t(){}}(),function(){function t(t,e,i,n,o,a){"ngInject";var c=this;this.$rootScope=t,this.$window=e,i.addClass("pip-nav-icon"),this.config=a.config,this.clearFn=t.$on("pipNavIconChanged",function(t,e){c.onNavIconChanged(t,e)})}return t.$inject=["$rootScope","$window","$element","$scope","$log","pipNavIcon"],t.prototype.$onInit=function(){this.type&&(this.config.type=this.type),this.imageUrl&&(this.config.imageUrl=this.imageUrl),this.icon&&(this.config.icon=this.icon)},t.prototype.$onDestroy=function(){_.isFunction(this.clearFn)&&this.clearFn()},t.prototype.onNavIconChanged=function(t,e){this.config=e},t.prototype.onNavIconClick=function(){_.isFunction(this.config.click)?this.config.click():this.config.event?this.$rootScope.$broadcast(this.config.event):"menu"==this.config.type?this.$rootScope.$broadcast(n.ToggleSideNavEvent):"back"==this.config.type?this.$window.history.back():this.$rootScope.$broadcast(o.NavIconClickedEvent)},t}()),s={bindings:a,templateUrl:"icon/NavIcon.html",controller:c};angular.module("pipNavIcon").component("pipNavIcon",s)},{"../sidenav/SideNavService":39,"./NavIconService":25}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.NavIconConfig=n},{}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./NavIconConfig");i.NavIconClickedEvent="pipNavIconClicked",i.NavIconChangedEvent="pipNavIconChanged";var o=function(){function t(t,e){this.$rootScope=e,this._config=t}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.prototype.setCallbackOrEvent=function(t){_.isFunction(t)?(this._config.click=t,this._config.event=null):_.isString(t)?(this._config.click=null,this._config.event=t):(this._config.click=null,this._config.event=null)},t.prototype.showMenu=function(t){this._config.type="menu",this.setCallbackOrEvent(t),this.sendConfigEvent()},t.prototype.showIcon=function(t,e){this._config.type="icon",this._config.icon=t,this.setCallbackOrEvent(e),this.sendConfigEvent()},t.prototype.showBack=function(t){this._config.type="back",this.setCallbackOrEvent(t),this.sendConfigEvent()},t.prototype.showImage=function(t,e){this._config.type="image",
this._config.imageUrl=t,this.setCallbackOrEvent(e),this.sendConfigEvent()},t.prototype.hide=function(){this._config.type="none",this.setCallbackOrEvent(null),this.sendConfigEvent()},t.prototype.sendConfigEvent=function(){this.$rootScope.$broadcast(i.NavIconChangedEvent,this._config)},t}(),a=function(){function t(){this._config=new n.NavIconConfig}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t||new n.NavIconConfig},enumerable:!0,configurable:!0}),t.prototype.setCallbackOrEvent=function(t){_.isFunction(t)?this._config.click=t:this._config.click=null,_.isString(t)?this._config.event=t:this._config.event=null},t.prototype.setMenu=function(t){this._config.type="menu",this.setCallbackOrEvent(t)},t.prototype.setIcon=function(t,e){this._config.type="icon",this._config.icon=t,this.setCallbackOrEvent(e)},t.prototype.setBack=function(t){this._config.type="back",this.setCallbackOrEvent(t)},t.prototype.setImage=function(t,e){this._config.type="image",this._config.imageUrl=t,this.setCallbackOrEvent(e)},t.prototype.clear=function(){this._config.type="none",this.setCallbackOrEvent(null)},t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new o(this._config,t)),this._service}],t}();angular.module("pipNavIcon").provider("pipNavIcon",a)},{"./NavIconConfig":24}],26:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipNavIcon",["ngMaterial","pipNav.Translate","pipNav.Templates"]),t("./NavIconConfig"),t("./INavIconService"),t("./NavIconService"),t("./NavIcon"),n(t("./NavIconConfig")),n(t("./NavIconService"))},{"./INavIconService":22,"./NavIcon":23,"./NavIconConfig":24,"./NavIconService":25}],27:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),t("./dependencies/TranslateFilter"),t("./language/LanguagePickerDirective"),t("./dropdown/Dropdown"),t("./tabs/Tabs"),t("./actions"),t("./appbar"),t("./search"),t("./breadcrumb"),t("./sidenav"),t("./header"),t("./menu"),t("./icon"),t("./common/NavService"),angular.module("pipNav",["pipNavService","pipDropdown","pipTabs","pipAppBar","pipSearchBar","pipNavIcon","pipBreadcrumb","pipLanguagePicker","pipActions","pipSideNav","pipNavMenu","pipNavHeader"]).constant("navConstant",{TAB_BREAKPOINT:"gt-sm",BREADCRUMB_BREAKPOINT:"gt-xs",SIDENAV_CONTAINER:".pip-main",SIDENAV_LARGE_WIDTH:320,SIDENAV_MIDDLE_WIDTH:240,SIDENAV_SMALL_WIDTH:72,SIDENAV_ANIMATION_DURATION:600}),n(t("./actions")),n(t("./appbar")),n(t("./breadcrumb")),n(t("./sidenav")),n(t("./icon")),n(t("./header"))},{"./actions":5,"./appbar":10,"./breadcrumb":14,"./common/NavService":15,"./dependencies/TranslateFilter":16,"./dropdown/Dropdown":17,"./header":21,"./icon":26,"./language/LanguagePickerDirective":28,"./menu":31,"./search":36,"./sidenav":41,"./tabs/Tabs":42}],28:[function(t,e,i){var n=function(){function t(t,e,i){"ngInject";this._translate=e.has("pipTranslate")?e.get("pipTranslate"):null,t.addClass("pip-language-picker"),this.setLanguages(this.languages),this.value=this.value||this.languages[0]}return t.$inject=["$element","$injector","$rootScope"],t.prototype.$onChanges=function(t){this.value,t.value.previousValue},Object.defineProperty(t.prototype,"language",{get:function(){return this._translate?this._translate.language:null},enumerable:!0,configurable:!0}),t.prototype.setLanguages=function(t){this.languages=t&&t.length>0?t:["en","ru"]},t.prototype.onLanguageClick=function(t){null!=this._translate&&(this.value=t,this._translate.language=this.value)},t}(),o={languages:"<?languages",value:"<?value"},a=(function(){function t(){}}(),{bindings:o,templateUrl:"language/LanguagePicker.html",controller:n});angular.module("pipLanguagePicker",["ngMaterial","pipNav.Translate","pipNav.Templates"]).component("pipLanguagePicker",a)},{}],29:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),function(){function t(){return{restrict:"EA",scope:i,replace:!1,templateUrl:"menu/NavMenu.html",controller:e,controllerAs:"$ctrl"}}var e=function(){function t(t,e,i,n,o,a,c,s,r,p){"ngInject";var l=this;this.$scope=t,this.$window=e,this.$location=i,this.$rootScope=n,this.$timeout=o,this.pipSideNav=a,this.pipNavMenu=c,this.expanded=null,this._state=r.has("$state")?r.get("$state"):null,this._animationDuration=p.SIDENAV_ANIMATION_DURATION,this._pipSideNavElement=s.parents("pip-sidenav"),s.addClass("pip-sticky-nav-menu"),this.sections=this.$scope.sections||this.pipNavMenu.sections,this.setCollapsible(),this.defaultIcon=this.pipNavMenu.defaultIcon,this.onStateChanged(null,this.pipSideNav.state);var u=this.$rootScope.$on("pipNavMenuChanged",function(t,e){l.onConfigChanged(t,e)}),d=this.$rootScope.$on("pipSideNavStateChanged",function(t,e){l.onStateChanged(t,e)});this.$scope.$on("$destroy",function(){angular.isFunction(u)&&u(),angular.isFunction(d)&&d()})}return t.$inject=["$scope","$window","$location","$rootScope","$timeout","pipSideNav","pipNavMenu","$element","$injector","navConstant"],t.prototype.setCollapsible=function(){var t;t=angular.isFunction(this.$scope.collapsed)?this.$scope.collapsed():!1!==this.$scope.collapsed&&"false"!==this.$scope.collapsed,this.isCollapsed=t},t.prototype.onExpand=function(){this.isCollapsed&&(this.expanded=!this.expanded,this.expanded?this._pipSideNavElement.removeClass("pip-sticky-nav-small"):this._pipSideNavElement.addClass("pip-sticky-nav-small"),this.$rootScope.$emit("pipNavExpanded",this.expanded))},t.prototype.isHidden=function(t){return t&&t.access&&!t.access(t)},t.prototype.isSectionEmpty=function(t){var e=this,i=!0;return _.each(t,function(t){e.isHidden(t)||(i=!1)}),i},t.prototype.onConfigChanged=function(t,e){e&&(this.sections=e.sections)},t.prototype.onStateChanged=function(t,e){e&&(this.isCollapsed=e.expand,e.expandedButton&&null!=this.expanded||(this.expanded=e.isExpanded),this.expandedButton=e.expandedButton,this.sideNavState=e)},t.prototype.isActive=function(t){if(t.parentState){if(null!=this._state&&this._state.includes(t.parentState))return!0}else if(t.state){if(null!=this._state&&this._state.includes(t.state))return!0}else if(t.href){if(t.href.split("?")[0]===this.$window.location.href.split("?")[0])return!0}else if(t.url&&t.url.split(/[\s\/?]+/)[1]===this.$location.url().split(/[\s\/?]+/)[1])return!0;return!1},t.prototype.clickLink=function(t,e){var i=this;return t.stopPropagation(),e?e.href?e.href.split("?")[0]===this.$window.location.href.split("?")[0]?void this.pipSideNav.close():(this.pipSideNav.close(),void this.$timeout(function(){i.$window.location.href=e.href},this._animationDuration)):e.url?e.url.split(/[\s\/?]+/)[1]===this.$location.url().split(/[\s\/?]+/)[1]?void this.pipSideNav.close():(this.pipSideNav.close(),void this.$timeout(function(){i.$location.url(e.url)},this._animationDuration)):e.state?null!=this._state&&this._state.current.name===e.state?void this.pipSideNav.close():(this.pipSideNav.close(),void this.$timeout(function(){i._state.go(e.state,e.stateParams)},this._animationDuration)):(e.event&&this.$rootScope.$broadcast(e.event,e),void this.pipSideNav.close()):void this.pipSideNav.close()},t}(),i={sections:"=?pipSections",collapsed:"=?pipCollapsed"};angular.module("pipNavMenu").directive("pipNavMenu",t)}()},{}],30:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.NavMenuChangedEvent="pipNavMenuChanged";var n=function(){function t(t,e){this._config=t,this._rootScope=e}return Object.defineProperty(t.prototype,"sections",{get:function(){return this._config.sections},set:function(t){this._config.sections=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultIcon",{get:function(){return this._config.defaultIcon},set:function(t){this._config.defaultIcon=t,this.sendChangeEvent()},enumerable:!0,configurable:!0}),t.prototype.updateBadgeStyle=function(t,e){null!=t&&_.isString(e)&&(_.each(this._config.sections,function(i){_.each(i.links,function(i){i.name==t&&(i.badgeStyle=e)})}),this.sendChangeEvent())},t.prototype.updateCount=function(t,e){null!=t&&_.isNumber(e)&&(_.each(this._config.sections,function(i){_.each(i.links,function(i){i.name==t&&(i.count=e)})}),this.sendChangeEvent())},t.prototype.clearCounts=function(){_.each(this._config.sections,function(t){_.each(t.links,function(t){t.count=null})}),this.sendChangeEvent()},t.prototype.sendChangeEvent=function(){this._rootScope.$emit(i.NavMenuChangedEvent,this._config)},t}(),o=function(){function t(){this._config={sections:[],defaultIcon:"icons:folder"}}return Object.defineProperty(t.prototype,"sections",{get:function(){return this._config.sections},set:function(t){this._config.sections=t||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultIcon",{get:function(){return this._config.defaultIcon},set:function(t){this._config.defaultIcon=t},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new n(this._config,t)),this._service}],t}();angular.module("pipNavMenu").provider("pipNavMenu",o)},{}],31:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipNavMenu",["ngMaterial","pipNav.Translate","pipNav.Templates"]),t("./NavMenuService"),t("./NavMenu")},{"./NavMenu":29,"./NavMenuService":30}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./SearchService"),o=function(){function t(t,e,i){"ngInject";var o=this;this.$element=t,this.$rootScope=e,this.enabled=!1,this.search={text:""},t.addClass("pip-search-bar"),this.config=i.config,this.stateChange(),this.clearFn=e.$on(n.SearchChangedEvent,function(t,e){o.onSearchChanged(t,e)})}return t.$inject=["$element","$rootScope","pipSearch"],t.prototype.$onDestroy=function(){_.isFunction(this.clearFn)&&this.clearFn()},t.prototype.stateChange=function(){this.enabled?(this.$element.addClass("w-stretch"),this.$element.parent().addClass("pip-search-active")):(this.$element.removeClass("w-stretch"),this.$element.parent().removeClass("pip-search-active"))},t.prototype.onSearchChanged=function(t,e){this.config=e,this.enabled=!1,this.search.text="",this.stateChange()},t.prototype.focusText=function(){setTimeout(function(){var t=$(".pip-search-text");t.length>0&&t.focus()},0)},t.prototype.enable=function(){this.search.text=this.config.criteria,this.enabled=!0,this.focusText(),this.stateChange()},t.prototype.onClick=function(){var t=this.search.text;this.search.text="",this.enabled=!1,this.stateChange(),this.config.callback?this.config.callback(t):this.$rootScope.$broadcast(n.SearchActivatedEvent,t)},t.prototype.clear=function(){this.search.text?(this.search.text="",this.focusText()):(this.enabled=!1,this.stateChange(),this.onClick())},t.prototype.onKeyDown=function(t){13===t.keyCode?this.onClick():27===t.keyCode&&(this.enabled=!1,this.stateChange())},t}(),a={templateUrl:"search/SearchBar.html",controller:o};angular.module("pipSearchBar").component("pipSearchBar",a)},{"./SearchService":35}],34:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.SearchConfig=n},{}],35:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./SearchConfig");i.OpenSearchEvent="pipOpenSearch",i.CloseSearchEvent="pipCloseSearch",i.SearchChangedEvent="pipSearchChanged",i.SearchActivatedEvent="pipSearchActivated";var o=function(){function t(t,e){var n=this;this.$rootScope=e,this._config=t,e.$on(i.OpenSearchEvent,function(){n.open}),e.$on(i.CloseSearchEvent,function(){n.close})}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"criteria",{get:function(){return this._config.criteria},set:function(t){this._config.criteria=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this._config.params},set:function(t){this._config.params=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"history",{get:function(){return this._config.history},set:function(t){this._config.history=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"callback",{get:function(){return this._config.callback},set:function(t){this._config.callback=t,this.sendConfigEvent()},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e,i,n){this._config.callback=t,this._config.criteria=e,this._config.params=i,this._config.history=n,this.sendConfigEvent()},t.prototype.clear=function(){this._config.callback=null,this._config.criteria=null,this._config.params=null,this.sendConfigEvent()},t.prototype.open=function(){this._config.visible=!0,this.sendConfigEvent()},t.prototype.close=function(){this._config.visible=!1,this.sendConfigEvent()},t.prototype.toggle=function(){this._config.visible=!this._config.visible,this.sendConfigEvent()},t.prototype.sendConfigEvent=function(){this.$rootScope.$broadcast(i.SearchChangedEvent,this._config)},t}(),a=function(){function t(){this._config=new n.SearchConfig,this._service=null}return t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new o(this._config,t)),this._service}],t}();angular.module("pipSearchBar").provider("pipSearch",a)},{"./SearchConfig":34}],36:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipSearchBar",["ngMaterial","pipNav.Translate","pipNav.Templates"]),t("./SearchConfig"),t("./ISearchService"),t("./SearchService"),t("./SearchBar")},{"./ISearchService":32,"./SearchBar":33,"./SearchConfig":34,"./SearchService":35}],37:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../sidenav/SideNavService"),o=t("./SideNavState"),a=function(){function t(t,e,i,a,c,s,r,p){"ngInject";var l=this;this.$element=t,this.$scope=a,this.$rootScope=c,this.$timeout=s,this.pipSideNav=r,this._pipMedia=i.has("pipMedia")?i.get("pipMedia"):null,this._mainContainer=p.SIDENAV_CONTAINER,this._bigWidth=p.SIDENAV_LARGE_WIDTH,this._middleWidth=p.SIDENAV_MIDDLE_WIDTH,this._smallWidth=p.SIDENAV_SMALL_WIDTH,this._isResizing=!1,this._animationDuration=p.SIDENAV_ANIMATION_DURATION,this._navState=new o.SideNavStateConfig,this._mediaBreakpoints=this.setBreakpoints(),this.$element.addClass("pip-sticky-sidenav"),this.pipSideNav.config&&"popup"!=this.pipSideNav.config.type?(this.$timeout(function(){l.setSideNaveState()},100),this.windowResize=_.debounce(function(){l.setSideNaveState()},10),this.cleanupMainResized=this.$rootScope.$on("pipMainResized",function(){l.windowResize()}),this.cleanupSideNavState=this.$rootScope.$on("pipSideNavState",function(t,e){l.onSideNavState(t,e)})):(this._isResizing=!1,this.sidenavState=null,this.$timeout(function(){0==l.pipSideNav.config.backdrop?l.$element.addClass("pip-sidenav-hide-backdrop"):l.$element.removeClass("pip-sidenav-hide-backdrop"),l.setState(o.SideNavStateNames.Toggle)},100)),this.cleanupNavHeaderChanged=this.$rootScope.$on(n.ToggleSideNavEvent,function(){l.onNavIconClick()}),this.cleanupSideNavChanged=this.$rootScope.$on("pipSideNavChanged",function(t,e){l.onSideNavChanged(t,e)})}return t.$inject=["$element","$attrs","$injector","$scope","$rootScope","$timeout","pipSideNav","navConstant"],t.prototype.$onDestroy=function(){angular.isFunction(this.cleanupNavHeaderChanged)&&this.cleanupNavHeaderChanged(),angular.isFunction(this.cleanupSideNavChanged)&&this.cleanupSideNavChanged(),angular.isFunction(this.cleanupMainResized)&&this.cleanupMainResized(),angular.isFunction(this.cleanupSideNavState)&&this.cleanupSideNavState()},t.prototype.setBreakpoints=function(){return this._pipMedia&&angular.isObject(this._pipMedia.breakpoints)?this._pipMedia.breakpoints:{xs:639,sm:959,md:1024,lg:1919}},t.prototype.onSideNavChanged=function(t,e){e&&e.visible?this.$element.css("display","block"):this.$element.css("display","none")},t.prototype.onNavIconClick=function(){this.pipSideNav.toggle()},t.prototype.onSideNavState=function(t,e){angular.isString(e)&&void 0!==this._navState[e]&&this.setState(e)},t.prototype.setSideNaveState=function(){var t=this;if(!this.pipSideNav.config||"popup"!=this.pipSideNav.config.type){if(this._isResizing)return void this.$timeout(function(){t.setSideNaveState()},this._animationDuration);var e=$(this._mainContainer).innerWidth(),i=$(".pip-sticky-sidenav").innerWidth(),n=i?i+1:0;return e+n<=this._mediaBreakpoints.sm?void this.setState(o.SideNavStateNames.Toggle):e+n<=this._mediaBreakpoints.md?void this.setState(o.SideNavStateNames.Small):e+n<=this._mediaBreakpoints.lg?void this.setState(o.SideNavStateNames.Large):void this.setState(o.SideNavStateNames.XLarge)}},t.prototype.setState=function(t){var e=this;this._isResizing||this.sidenavState&&this.sidenavState.id==t||(t!=o.SideNavStateNames.Toggle&&this.$element.removeClass("sidenav-mobile"),t!=o.SideNavStateNames.Small&&this.$element.removeClass("pip-sticky-nav-small"),t!=o.SideNavStateNames.XLarge&&this.$element.removeClass("sidenav-desktop"),t!=o.SideNavStateNames.Large&&this.$element.removeClass("sidenav-smalldesktop"),this._isResizing=!0,this.sidenavState=this._navState[String(t)],this.$element.addClass(this.sidenavState.addClass),this.pipSideNav.state=this.sidenavState,this.$timeout(function(){e.setSideNaveState()},15),this.$timeout(function(){e._isResizing=!1},this._animationDuration))},t}(),c={sidenavState:"=?"};!function(){var t={transclude:!0,bindings:c,templateUrl:"sidenav/SideNav.html",controller:a};angular.module("pipSideNav").component("pipSidenav",t)}()},{"../sidenav/SideNavService":39,"./SideNavState":40}],38:[function(t,e,i){function n(t){"ngInject";var e=t[0];return{transclude:e.transclude,priority:e.priority,terminal:e.terminal,restrict:e.restrict,scope:o,link:function(t,i,n){n.ngIf=function(){return t.visible},e.link.apply(e,arguments)},controller:a}}n.$inject=["ngIfDirective"];var o={visible:"=?"},a=function(){function t(t,e,i,n,o){var a=this;this.$scope=t,this.partValue=null,this.partName=""+i.pipSidenavPart,this.pos=this.partName.indexOf(":"),this.pos>0&&(this.partValue=this.partName.substr(this.pos+1),this.partName=this.partName.substr(0,this.pos)),this.onSideNavChanged(null,o.config),n.$on("pipSideNavChanged",function(t,e){a.onSideNavChanged(t,e)})}return t.$inject=["$scope","$element","$attrs","$rootScope","pipSideNav"],t.prototype.onSideNavChanged=function(t,e){var i=e.parts||{},n=i[this.partName],o=!!(this.partValue?n==this.partValue:n);o!=this.$scope.visible&&(this.$scope.visible=o)},t}();angular.module("pipSideNav").directive("pipSidenavPart",n)},{}],39:[function(t,e,i){"use strict";function n(t,e){t.$on(i.OpenSideNavEvent,function(){e.open()}),t.$on(i.CloseSideNavEvent,function(){e.close()})}n.$inject=["$rootScope","pipSideNav"],Object.defineProperty(i,"__esModule",{value:!0});var o=t("./SideNavState");i.SideNavChangedEvent="pipSideNavChanged",i.SideNavStateChangedEvent="pipSideNavStateChanged",i.OpenSideNavEvent="pipOpenSideNav",i.CloseSideNavEvent="pipCloseSideNav",i.ToggleSideNavEvent="pipToggleSideNav";var a=function(){function t(t,e,i){this.$rootScope=e,this.$mdSidenav=i,this._config=t}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classes",{get:function(){return this._config.classes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parts",{get:function(){return this._config.parts},set:function(t){this._config.parts=t||{},this.sendConfigEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(t){this._state=t||{},this.$rootScope.$broadcast(i.SideNavStateChangedEvent,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._config.type},set:function(t){this._config.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"backdrop",{get:function(){return this._config.backdrop},set:function(t){this._config.backdrop=t},enumerable:!0,configurable:!0}),t.prototype.open=function(){this.$mdSidenav("pip-sticky-sidenav").open()},t.prototype.close=function(){this.$mdSidenav("pip-sticky-sidenav").close()},t.prototype.toggle=function(){this.$mdSidenav("pip-sticky-sidenav").toggle()},t.prototype.show=function(){this._config.visible||(this._config.visible=!0,this.sendConfigEvent())},t.prototype.hide=function(){this._config.visible&&(this._config.visible=!1,this.sendConfigEvent())},t.prototype.addClass=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];_.each(e,function(e){t._config.classes.push(e)}),this.sendConfigEvent()},t.prototype.removeClass=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];_.each(e,function(e){t._config.classes=_.reject(t._config.classes,function(t){return t==e})}),this.sendConfigEvent()},t.prototype.part=function(t,e){this._config.parts[t]=e,this.sendConfigEvent()},t.prototype.sendConfigEvent=function(){this.$rootScope.$emit(i.SideNavChangedEvent,this._config)},t}(),c=function(){function t(){this._config={parts:{},classes:[],type:"popup",backdrop:!0,state:null,visible:!0}}return Object.defineProperty(t.prototype,"backdrop",{get:function(){return this._config.backdrop},set:function(t){this._config.backdrop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t||new o.SideNavConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parts",{get:function(){return this._config.parts},set:function(t){this._config.parts=t||{}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._config.type},set:function(t){this._config.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._config.visible},set:function(t){this._config.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classes",{get:function(){return this._config.classes},set:function(t){this._config.classes=t||[]},enumerable:!0,configurable:!0}),t.prototype.addClass=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];_.each(e,function(e){t._config.classes.push(e)})},t.prototype.removeClass=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];_.each(e,function(e){t._config.classes=_.reject(t._config.classes,function(t){return t==e})})},t.prototype.part=function(t,e){this._config.parts[t]=e},t.prototype.$get=["$rootScope","$mdSidenav",function(t,e){"ngInject";return null==this._service&&(this._service=new a(this._config,t,e)),this._service}],t}();angular.module("pipSideNav").provider("pipSideNav",c).run(n)},{"./SideNavState":40}],40:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();n.Toggle="toggle",n.Small="small",n.Large="large",n.XLarge="xlarge",i.SideNavStateNames=n;var o=function(){function t(){}return t}();i.SideNavState=o;var a=function(){function t(){this.toggle={id:n.Toggle,addClass:"sidenav-mobile",showHeader:!0,isLockedOpen:!1,expandedButton:!1,isExpanded:!0,expand:!0,showIconTooltype:!1},this.small={id:n.Small,addClass:"pip-sticky-nav-small sidenav-smalldesktop",showHeader:!1,isLockedOpen:!0,expandedButton:!1,isExpanded:!1,expand:!1,showIconTooltype:!0},this.large={id:n.Large,addClass:"sidenav-smalldesktop",showHeader:!1,isLockedOpen:!0,expandedButton:!0,isExpanded:!0,expand:!0,showIconTooltype:!0},this.xlarge={id:n.XLarge,addClass:"sidenav-desktop",showHeader:!1,isLockedOpen:!0,expandedButton:!1,isExpanded:!0,expand:!0,showIconTooltype:!1}}return t}();i.SideNavStateConfig=a;var c=function(){function t(){this.backdrop=!0}return t}();i.SideNavConfig=c},{}],41:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipSideNav",["ngMaterial","pipNav.Templates"]),t("./SideNavState"),t("./SideNavService"),t("./SideNavPart"),t("./SideNav"),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./SideNavService"))},{"./SideNav":37,"./SideNavPart":38,"./SideNavService":39,"./SideNavState":40}],42:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.PipTab=n;var o={ngDisabled:"&?",tabs:"<pipTabs",showTabs:"&pipShowTabs",showTabsShadow:"&pipTabsShadow",activeIndex:"<?pipActiveIndex",select:"=pipTabsSelect",breakpoints:"<?pipBreakpoints",themeClass:"<?themeClass"},a=(function(){function t(){}}(),function(){function t(t,e,i,n,o,a){"ngInject";this.$element=t,this.$injector=e,this.$rootScope=i,this.$timeout=n,this.navConstant=o,this.setTheme(),this.pipMedia=this.$injector.has("pipMedia")?this.$injector.get("pipMedia"):a,this.breakpoints||(this.breakpoints=this.navConstant.TAB_BREAKPOINT)}return t.$inject=["$element","$injector","$rootScope","$timeout","navConstant","$mdMedia"],t.prototype.setTheme=function(){this._pipTheme=this.$injector.has("pipTheme")?this.$injector.get("pipTheme"):null,this._pipTheme?this.currentTheme=this._pipTheme.theme:this.$rootScope.$theme&&(this.currentTheme=this.$rootScope.$theme),this.themeClass=(this.themeClass||"")+" md-"+this.currentTheme+"-theme"},t.prototype.setTranslate=function(){this._pipTranslate=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null,this._pipTranslate&&(this.tabs.length>0&&this.tabs[0].title?this._pipTranslate.translateObjects(this.tabs,"title","nameLocal"):this._pipTranslate.translateObjects(this.tabs,"name","nameLocal"))},t.prototype.isDisabled=function(){return _.isFunction(this.ngDisabled)?this.ngDisabled():this.toBoolean(this.ngDisabled)},t.prototype.tabDisabled=function(t){return this.isDisabled()&&this.activeIndex!=t},t.prototype.onSelect=function(t){var e=this;this.isDisabled()||(this.activeIndex=t,this.selectedTabId=this.tabs.length>=this.activeIndex?this.tabs[this.activeIndex].id:null,this.$timeout(function(){e.select&&e.select(e.tabs[e.activeIndex],e.activeIndex)},0))},t.prototype.showShadow=function(){return _.isFunction(this.showTabsShadow)?this.showTabsShadow():this.toBoolean(this.showTabsShadow)},t.prototype.show=function(){return!this.showTabs||(_.isFunction(this.showTabs)?this.showTabs():this.toBoolean(this.showTabs))},t.prototype.toBoolean=function(t){return null!=t&&(!!t&&("1"==(t=t.toString().toLowerCase())||"true"==t))},t.prototype.$onChanges=function(t){var e=this;if(t.breakpoints?this.breakpoints=t.breakpoints.currentValue?t.breakpoints.currentValue:this.navConstant.TAB_BREAKPOINT:this.breakpoints||(this.breakpoints=this.navConstant.TAB_BREAKPOINT),void 0===t.activeIndex?this.activeIndex||(this.activeIndex=0):(this.activeIndex=t.activeIndex.currentValue||0,this.$timeout&&this.activeIndex!==t.activeIndex.previousValue&&this.$timeout(function(){var t=e.$element.find("md-tabs-canvas");t&&t[0]&&angular.element(t[0]).attr("activeIndex",e.activeIndex),t.on("focusout",function(){angular.element(t[0]).attr("activeIndex",e.activeIndex),e.$timeout(function(){angular.element(t[0]).attr("activeIndex",e.activeIndex)},50)})},1e3)),void 0!==t.tabs&&_.isArray(t.tabs.currentValue)?(this.tabs=t.tabs.currentValue,this.setTranslate()):this.tabs||(this.tabs=[]),!t.activeIndex&&t.tabs&&void 0!==this.selectedTabId){var i=_.indexOf(this.tabs,_.find(this.tabs,{id:this.selectedTabId}));i<0?this.selectedTabId=this.tabs.length>=this.activeIndex?this.tabs[this.activeIndex].id:null:this.tabs.length>0&&this.activeIndex&&this.onSelect(i)}else this.selectedTabId=this.tabs.length>=this.activeIndex?this.tabs[this.activeIndex].id:null},t}()),c={bindings:o,templateUrl:"tabs/Tabs.html",controller:a};angular.module("pipTabs",["pipNav.Templates"]).component("pipTabs",c)},{}],43:[function(t,e,i){!function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("actions/PrimaryActions.html",'<div pip-focused="" pip-focused-tabindex="2"><md-menu md-position-mode="target-right target" class="pip-primary-actions" ng-repeat="action in $ctrl.config.primaryLocalActions"><md-button class="pip-primary-actions-action md-icon-button pip-focusable" ng-click="$ctrl.clickAction(action, $mdOpenMenu);" tabindex="-1" ng-hide="$ctrl.isHidden(action)" aria-label="{{ action.title | translate }}"><div class="pip-primary-actions-badge" ng-show="action.count > 0">{{ $ctrl.actionCount(action) }}</div><md-icon md-svg-icon="{{ action.icon}}"></md-icon></md-button><md-menu-content width="3"><md-menu-item ng-repeat-start="subAction in action.subActions" ng-if="!subAction.divider" ng-hide="$ctrl.isHidden(subAction)"><md-button class="pip-focusable" ng-hide="subAction.divider" tabindex="-1" ng-click="$ctrl.clickAction(subAction)">{{ ::subAction.title | translate }}</md-button></md-menu-item><md-menu-divider ng-if="subAction.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu><md-menu md-position-mode="target-right target" class="pip-primary-actions" ng-repeat="action in $ctrl.config.primaryGlobalActions"><md-button class="pip-primary-actions-action md-icon-button pip-focusable" ng-click="$ctrl.clickAction(action, $mdOpenMenu);" ng-hide="$ctrl.isHidden(action)" tabindex="-1" aria-label="{{ action.title | translate }}"><div class="pip-primary-actions-badge color-badge-bg" ng-show="action.count > 0">{{ $ctrl.actionCount(action) }}</div><md-icon md-svg-icon="{{ action.icon }}"></md-icon></md-button><md-menu-content width="3"><md-menu-item ng-repeat-start="subAction in action.subActions" ng-if="!subAction.divider" ng-hide="$ctrl.isHidden(subAction)"><md-button class="pip-focusable" ng-hide="subAction.divider" tabindex="-1" ng-click="$ctrl.clickAction(subAction)">{{ subAction.title | translate }}</md-button></md-menu-item><md-menu-divider ng-if="subAction.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu></div>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("actions/SecondaryActions.html",'<md-menu ng-if="$ctrl.secondaryActionsVisible()" md-position-mode="target-right target"><md-button class="md-icon-button" tabindex="3" ng-init="$ctrl.getMenu($mdOpenMenu)" ng-click="$ctrl.onSecondaryActionClick(); $ctrl.openMenu($mdOpenMenu, $event);" aria-label="open actions"><md-icon md-svg-icon="icons:vdots"></md-icon></md-button><md-menu-content width="3"><md-menu-item ng-repeat-start="action in $ctrl.config.secondaryLocalActions" ng-if="!action.divider" ng-hide="$ctrl.isHidden(action)"><md-button ng-hide="action.divider" ng-click="$ctrl.clickAction(action)">{{ ::action.title | translate }}</md-button></md-menu-item><md-menu-divider ng-if="action.divider" ng-repeat-end=""></md-menu-divider><md-menu-divider ng-if="$ctrl.secondaryDividerVisible()"></md-menu-divider><md-menu-item ng-repeat-start="action in $ctrl.config.secondaryGlobalActions" ng-if="!action.divider" ng-hide="$ctrl.isHidden(action)"><md-button ng-hide="action.divider" ng-click="$ctrl.clickAction(action)">{{ ::action.title | translate }}</md-button></md-menu-item><md-menu-divider ng-if="action.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("appbar/AppBar.html",'<md-toolbar class="color-primary-bg {{ $ctrl.config.classes.join(\' \') }}" ng-if="$ctrl.config.visible" ng-transclude=""></md-toolbar>')}])}(),function(t){try{t=angular.module("pipNav.Templates")
}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("breadcrumb/Breadcrumb.html",'<div class="pip-breadcrumb-block"><div class="text-overflow" ng-if="$ctrl._media($ctrl.config.breakpoint)"><span ng-if="$ctrl.config.criteria" ng-click="$ctrl.openSearch()">{{ $ctrl.config.criteria }} -</span><span class="pip-breadcrumb-item {{ $last ? \'breadcrumb-accent\' : \'\' }}" ng-if="$ctrl.config.items && $ctrl.config.items.length > 0" ng-repeat-start="item in $ctrl.config.items" ng-click="$ctrl.onClick(item)" ng-init="stepWidth = 100/($ctrl.config.items.length + 1)" ng-class="{\'cursor-pointer\': !$last}" ng-style="{\'max-width\': stepWidth + \'%\'}"><span ng-if="!$last || !$ctrl.actionsVisible(item)">{{ item.title | translate }}</span><div ng-if="$last && $ctrl.actionsVisible(item)" style="display: inline-block; position: relative;"><md-menu md-offset="0 44"><span class="layout-row pip-breadcrumb-item-menu cursor-pointer {{ $last ? \'breadcrumb-accent\' : \'\' }}" ng-click="$ctrl.onOpenMenu($mdOpenMenu, $event)" md-ink-ripple="" aria-label="open breadcrumb actions">{{ item.title | translate }}<md-icon class="pip-triangle-down" md-svg-icon="icons:triangle-down"></md-icon></span><md-menu-content width="4"><md-menu-item ng-if="!subItem.divider" ng-repeat-start="subItem in item.subActions"><md-button ng-click="$ctrl.onSubActionClick(subItem)" ng-if="!action.divider" tabindex="4"><md-icon md-menu-align-target="" ng-if="subItem.icon" md-svg-icon="{{ subItem.icon }}"></md-icon><span>{{ subItem.title | translate }}</span></md-button></md-menu-item><md-menu-divider ng-if="subItem.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu></div></span><md-icon ng-repeat-end="" md-svg-icon="icons:chevron-right" ng-hide="$last"></md-icon><span class="pip-title breadcrumb-accent" ng-if="$ctrl.config.text">{{ $ctrl.config.text | translate }}</span></div><div style="position: relative;" ng-if="!$ctrl._media($ctrl.config.breakpoint)"><md-menu md-offset="0 44"><span class="pip-mobile-breadcrumb layout-row" ng-click="$ctrl.config.items && $ctrl.config.items.length > 1 ? $mdOpenMenu() : return"><span class="text-overflow"><span ng-if="$ctrl.config.criteria" ng-click="$ctrl.openSearch()">{{ $ctrl.config.criteria }} -</span> <span class="breadcrumb-accent" ng-if="$ctrl.config.text">{{ $ctrl.config.text | translate }}</span> <span ng-if="$ctrl.config.items && $ctrl.config.items.length > 0" class="breadcrumb-accent {{ ($ctrl.config.items && $ctrl.config.items.length > 1) ? \'cursor-pointer\' : \'\' }}">{{ $ctrl.config.items[$ctrl.config.items.length - 1].title | translate }}</span></span><md-icon class="pip-triangle-down cursor-pointer breadcrumb-accent" md-svg-icon="icons:triangle-down" ng-if="$ctrl.config.items && $ctrl.config.items.length > 1"></md-icon></span><md-menu-content width="4"><md-menu-item ng-repeat="item in $ctrl.config.items" ng-if="$ctrl.config.items && $ctrl.config.items.length > 0"><md-button ng-click="$ctrl.onClick(item)" tabindex="5"><md-icon md-menu-align-target="" ng-if="item.icon" md-svg-icon="{{ item.icon }}"></md-icon><span>{{ item.title | translate }}</span></md-button></md-menu-item><md-menu-item ng-if="$ctrl.config.text"><md-button tabindex="5"><span class="text-grey">{{ $ctrl.config.text | translate }}</span></md-button></md-menu-item></md-menu-content></md-menu></div></div>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("dropdown/Dropdown.html",'<md-toolbar class="md-subhead color-primary-bg {{ $ctrl.themeClass}}" ng-if="$ctrl.show()" ng-class="{\'md-whiteframe-3dp\': $ctrl.media(\'xs\')}"><div class="pip-divider"></div><md-select ng-model="$ctrl.selectedIndex" tabindex="15" ng-disabled="$ctrl.disabled()" md-container-class="pip-full-width-dropdown" aria-label="DROPDOWN" md-ink-ripple="" md-on-close="$ctrl.onSelect($ctrl.selectedIndex)"><md-option ng-repeat="action in $ctrl.actions" value="{{ ::$index }}" ng-selected="$ctrl.activeIndex == $index ? true : false">{{ (action.title || action.name || action) | translate }}</md-option></md-select></md-toolbar>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("header/NavHeader.html",'<md-toolbar ng-show="$ctrl.showHeader" class="layout-row layout-align-start-center"><div class="flex-fixed pip-sticky-nav-header-user"><md-button class="md-icon-button" ng-click="$ctrl.onUserClick()" aria-label="current user" tabindex="-1"><img src="" class="pip-sticky-nav-header-user-image" ng-class="$ctrl.imageCss"></md-button></div><div class="pip-sticky-nav-header-user-text"><div class="pip-sticky-nav-header-user-pri" ng-click="$ctrl.onUserClick()" tabindex="-1">{{ $ctrl.title | translate }}</div><div class="pip-sticky-nav-header-user-sec">{{ $ctrl.subtitle | translate }}</div></div></md-toolbar>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("icon/NavIcon.html",'<md-button class="md-icon-button pip-nav-icon" ng-if="$ctrl.config.type != \'none\'" ng-class="$ctrl.config.class" ng-click="$ctrl.onNavIconClick()" tabindex="{{ $ctrl.config.type==\'menu\' || $ctrl.config.type==\'back\' ? 4 : -1 }}" aria-label="menu"><md-icon ng-if="$ctrl.config.type==\'menu\'" md-svg-icon="icons:menu"></md-icon><img ng-src="{{ $ctrl.config.imageUrl }}" ng-if="$ctrl.config.type==\'image\'" height="24" width="24"><md-icon ng-if="$ctrl.config.type==\'back\'" md-svg-icon="icons:arrow-left"></md-icon><md-icon ng-if="$ctrl.config.type==\'icon\'" md-svg-icon="{{ $ctrl.config.icon }}"></md-icon></md-button>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("language/LanguagePicker.html",'<md-menu md-position-mode="target-right target"><span class="pip-language" ng-click="$mdOpenMenu()" aria-label="language selection">{{ $ctrl.value | translate }}<md-icon md-svg-icon="icons:triangle-down"></md-icon></span><md-menu-content width="3"><md-menu-item ng-repeat="language in $ctrl.languages"><md-button ng-click="$ctrl.onLanguageClick(language)" tabindex="7">{{ language | translate }}</md-button></md-menu-item></md-menu-content></md-menu>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("menu/NavMenu.html",'<div ng-if="$ctrl.sections && $ctrl.sections.length"><md-list class="sidenav-list" pip-focused="" pip-focused-tabindex="10" pip-with-hidden="true"><md-list-item class="no-border pip-sticky-nav-menu-item pip-sticky-nav-expanded-button" ng-click="$ctrl.onExpand()" ng-disabled="!$ctrl.isCollapsed" tabindex="-1" ng-if="$ctrl.expandedButton"><md-icon class="pip-sticky-nav-menu-icon" md-svg-icon="icons:chevron-left" ng-if="$ctrl.pipSideNav.state.isExpanded"></md-icon><md-icon class="pip-sticky-nav-menu-icon" md-svg-icon="icons:chevron-right" ng-if="!$ctrl.pipSideNav.state.isExpanded"></md-icon></md-list-item><md-divider ng-show="$ctrl.expandedButton"></md-divider><div class="pip-section" ng-repeat="section in $ctrl.sections" xxxng-hide="section.access && !section.access(section)"><md-divider ng-show="$index > 0 && !$ctrl.isSectionEmpty(section.links)"></md-divider><md-subheader ng-show="section.title" style="height: 48px;"><span ng-if="$ctrl.pipSideNav.state.isExpanded" class="pip-sticky-nav-menu-title section-title">{{ ::section.title | translate }}</span><md-icon class="pip-sticky-nav-menu-icon section-icon" md-svg-icon="{{ section.icon }}" ng-if="!$ctrl.sideNavState.showIconTooltype && !$ctrl.expanded && section.icon"></md-icon><md-icon class="pip-sticky-nav-menu-icon section-icon" md-svg-icon="{{ section.icon }}" ng-if="$ctrl.sideNavState.showIconTooltype && !$ctrl.expanded && section.icon"><md-tooltip md-visible="showTooltip" md-direction="right" class="sidenav-icon-tooltip">{{ ::section.tooltipText || section.title | translate }}</md-tooltip></md-icon><md-icon class="pip-sticky-nav-menu-icon section-icon" md-svg-icon="{{ $ctrl.defaultIcon }}" ng-if="!$ctrl.sideNavState.showIconTooltype && !$ctrl.expanded && !section.icon"></md-icon><md-icon class="pip-sticky-nav-menu-icon section-icon" md-svg-icon="{{ $ctrl.defaultIcon }}" ng-if="$ctrl.sideNavState.showIconTooltype && !$ctrl.expanded && !section.icon"><md-tooltip md-visible="showTooltip" class="md-secondary">{{ ::section.tooltipText || section.title | translate }}</md-tooltip></md-icon></md-subheader><md-list-item class="no-border pip-sticky-nav-menu-item pip-focusable" tabindex="-1" ng-repeat="link in section.links" ng-class="{\'active\': $ctrl.isActive(link)}"><md-button class="layout-row layout-align-start-center pip-button-block" tabindex="-1" ng-disabled="link.access && !link.access(link)" ng-click="$ctrl.clickLink($event, link)"><div class="pip-sticky-nav-menu-icon-block"><md-icon class="pip-sticky-nav-menu-icon flex-fixed" md-svg-icon="{{ link.icon }}" ng-if="!$ctrl.sideNavState.showIconTooltype || !link.tooltipText || $ctrl.pipSideNav.state.isExpanded" ng-hide="!link.icon"></md-icon><md-icon class="pip-sticky-nav-menu-icon flex-fixed" md-svg-icon="{{ link.icon }}" ng-hide="!link.icon" ng-if="$ctrl.sideNavState.showIconTooltype && link.tooltipText && !$ctrl.pipSideNav.state.isExpanded"><md-tooltip md-visible="showTooltip" md-direction="right" class="sidenav-icon-tooltip">{{ ::link.tooltipText || link.title | translate }}</md-tooltip></md-icon></div><div class="pip-sticky-nav-menu-title">{{ ::link.title | translate }}</div><div class="pip-sticky-nav-menu-badge {{ link.badgeStyle ? link.badgeStyle : \'color-badge-bg\' }} flex-fixed" ng-if="link.count && link.count < 100">{{ link.count }}</div><div class="pip-sticky-nav-menu-badge {{ link.badgeStyle ? link.badgeStyle : \'color-badge-bg\' }} flex-fixed" ng-if="link.count && link.count > 99">!</div></md-button></md-list-item></div></md-list></div>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("search/SearchBar.html",'<div class="md-toolbar-tools pip-search-container" ng-if="$ctrl.enabled"><div class="layout-row pip-search-selected"><md-button class="md-icon-button" tabindex="6" aria-label="start search" ng-click="$ctrl.onClick()"><md-icon md-svg-icon="icons:search"></md-icon></md-button><input class="pip-search-text flex" type="search" tabindex="6" ng-model="$ctrl.search.text" ng-keydown="$ctrl.onKeyDown($event)"><md-button class="md-icon-button" tabindex="6" aria-label="clear search" ng-click="$ctrl.clear()"><md-icon md-svg-icon="icons:cross-circle"></md-icon></md-button></div></div><div class="md-toolbar-tools layout-row layout-align-end-center flex-fixed lp0 rp0" ng-if="!$ctrl.enabled"><md-button class="md-icon-button" tabindex="5" aria-label="start search" ng-click="$ctrl.enable()"><md-icon md-svg-icon="icons:search"></md-icon></md-button></div>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("sidenav/SideNav.html",'<md-sidenav class="md-sidenav-left" md-is-locked-open="$ctrl.sidenavState.isLockedOpen" md-component-id="pip-sticky-sidenav" ng-transclude=""></md-sidenav>')}])}(),function(t){try{t=angular.module("pipNav.Templates")}catch(e){t=angular.module("pipNav.Templates",[])}t.run(["$templateCache",function(t){t.put("tabs/Tabs.html",'<md-toolbar ng-if="$ctrl.pipMedia" class="pip-nav color-primary-bg {{ $ctrl.themeClass }}" ng-class="{\'pip-visible\': $ctrl.show(), \'pip-shadow\': $ctrl.showShadow()}"><md-tabs class="color-primary-bg" ng-if="$ctrl.pipMedia($ctrl.breakpoints)" md-selected="$ctrl.activeIndex" ng-class="{\'disabled\': $ctrl.isDisabled()}" md-stretch-tabs="true" md-dynamic-height="true"><md-tab ng-repeat="tab in $ctrl.tabs track by $index" ng-disabled="$ctrl.tabDisabled($index)" md-on-select="$ctrl.onSelect($index)"><md-tab-label>{{:: tab.nameLocal }}<div class="pip-tabs-badge color-badge-bg" ng-if="tab.counts > 0 && tab.counts <= 99">{{ tab.counts }}</div><div class="pip-tabs-badge color-badge-bg" ng-if="tab.counts > 99">!</div></md-tab-label></md-tab></md-tabs><div class="md-subhead pip-tabs-content color-primary-bg" ng-if="!$ctrl.pipMedia($ctrl.breakpoints)"><div class="pip-divider position-top m0"></div><md-select ng-model="$ctrl.activeIndex" ng-disabled="$ctrl.isDisabled()" md-container-class="pip-full-width-dropdown" aria-label="SELECT" md-ink-ripple="" md-on-close="$ctrl.onSelect($ctrl.activeIndex)"><md-option ng-repeat="tab in $ctrl.tabs track by $index" class="pip-tab-option" value="{{ ::$index }}">{{ ::tab.nameLocal }}<div class="pip-tabs-badge color-badge-bg" ng-if="tab.counts > 0 && tab.counts <= 99">{{ tab.counts }}</div><div class="pip-tabs-badge color-badge-bg" ng-if="tab.counts > 99">!</div></md-option></md-select></div></md-toolbar>')}])}()},{}]},{},[43,27])(43)});


!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.pip||(t.pip={})).themes=e()}}(function(){return function e(t,a,r){function n(i,l){if(!a[i]){if(!t[i]){var u="function"==typeof require&&require;if(!l&&u)return u(i,!0);if(o)return o(i,!0);var h=new Error("Cannot find module '"+i+"'");throw h.code="MODULE_NOT_FOUND",h}var c=a[i]={exports:{}};t[i][0].call(c.exports,function(e){var a=t[i][1][e];return n(a||e)},c,c.exports,e,t,a,r)}return a[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)n(r[i]);return n}({1:[function(e,t,a){function r(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(69, 90, 100, 1)"});e.definePalette("bootbarn-cool-background",t);var a=e.extendPalette("grey",{300:"rgba(69, 90, 100, .54)",500:"rgba(69, 90, 100, 1)",contrastLightColors:["500","300"]});e.definePalette("bootbarn-cool-primary",a);var r=e.extendPalette("green",{A700:"rgba(76, 175, 80, 1)",contrastLightColors:["A700"]});e.definePalette("bootbarn-cool-accent",r),e.theme("bootbarn-cool").primaryPalette("bootbarn-cool-primary",{default:"500","hue-1":"300"}).backgroundPalette("bootbarn-cool-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("bootbarn-cool-accent",{default:"A700"}),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.BootBarn.Cool",["ngMaterial"]).config(r)},{}],2:[function(e,t,a){function r(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(38, 50, 56, 1)"});e.definePalette("bootbarn-monochrome-background",t);var a=e.extendPalette("grey",{300:"rgba(38, 50, 56, .54)",500:"rgba(38, 50, 56, 1)",contrastLightColors:["500","300"]});e.definePalette("bootbarn-monochrome-primary",a);var r=e.extendPalette("green",{A700:"rgba(76, 175, 80, 1)",contrastLightColors:["A700"]});e.definePalette("bootbarn-monochrome-accent",r),e.theme("bootbarn-monochrome").primaryPalette("bootbarn-monochrome-primary",{default:"500","hue-1":"300"}).backgroundPalette("bootbarn-monochrome-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("bootbarn-monochrome-accent",{default:"A700"}),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.BootBarn.Monochrome",["ngMaterial"]).config(r)},{}],3:[function(e,t,a){function r(e){e.alwaysWatchTheme(!0);var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(177, 55, 34, 1)"});e.definePalette("bootbarn-warm-background",t);var a=e.extendPalette("brown",{300:"rgba(177, 55, 34, .54)",500:"rgba(177, 55, 34, 1)",contrastLightColors:["500","300"]});e.definePalette("bootbarn-warm-primary",a);var r=e.extendPalette("amber",{A700:"rgba(127, 148, 92, 1)",contrastLightColors:["A700"]});e.definePalette("bootbarn-warm-accent",r);var n=e.extendPalette("red",{A200:"rgba(255, 82, 82, 1)",contrastLightColors:["A200"]});e.definePalette("bootbarn-warm-error",n),e.theme("bootbarn-warm").primaryPalette("bootbarn-warm-primary",{default:"500","hue-1":"300"}).backgroundPalette("bootbarn-warm-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("bootbarn-warm-error",{default:"A200"}).accentPalette("bootbarn-warm-accent",{default:"A700"})}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.BootBarn.Warm",["ngMaterial"]).config(r)},{}],4:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),e("./BootBarnCoolTheme"),e("./BootBarnWarmTheme"),e("./BootBarnMonochromeTheme"),angular.module("pipTheme.BootBarn",["ngMaterial","pipTheme.BootBarn.Warm","pipTheme.BootBarn.Cool","pipTheme.BootBarn.Monochrome"])},{"./BootBarnCoolTheme":1,"./BootBarnMonochromeTheme":2,"./BootBarnWarmTheme":3}],5:[function(e,t,a){"use strict";function r(e){e.theme}r.$inject=["pipTheme"],Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeRootVar="$theme",a.ThemeChangedEvent="pipThemeChanged",a.ThemeResetPage="pipResetPage";var n=function(){function e(){}return e}(),o=function(){function e(e,t,r,n,o,i,l){"ngInject";this.$log=e,this.$rootScope=t,this.$window=r,this.$mdTheming=n,this._currentTheme=null,this._setRootVar=i,this._persist=l,this._config=o,this._config.theme=this.$window.localStorage.getItem("theme")||this._config.theme||"default",this.$log.debug("Set theme to "+this._config.theme),$("body").attr("md-theme","{{"+a.ThemeRootVar+"}}"),this.save()}return e.$inject=["$log","$rootScope","$window","$mdTheming","config","setRootVar","persist"],e.prototype.save=function(){var e=$("body"),t=this._config.theme;e.addClass(t),null!=this._currentTheme&&this._currentTheme!=t&&e.removeClass(this._currentTheme),this._currentTheme=t,this._setRootVar&&(this.$rootScope[a.ThemeRootVar]=this._config.theme),this._persist&&null!=this.$window.localStorage&&this.$window.localStorage.setItem("theme",this._config.theme)},Object.defineProperty(e.prototype,"theme",{get:function(){return this._config.theme},set:function(e){if(e!=this._config.theme){if(!(e in this.$mdTheming.THEMES))throw new Error("Theme "+e+" is not defined. Please, register it first with $mdThemingProvider");this._config.theme=e,this.$log.debug("Changing theme to "+e),this.save(),this.$rootScope.$emit(a.ThemeChangedEvent,e),this.$rootScope.$emit(a.ThemeResetPage)}},enumerable:!0,configurable:!0}),e.prototype.use=function(e){return null!=e&&(this._config.theme=e,this.save()),this._config.theme},e}(),i=function(){function e(){this._config=new n,this._setRootVar=!0,this._persist=!0,this._config.theme="default"}return Object.defineProperty(e.prototype,"setRootVar",{get:function(){return this._setRootVar},set:function(e){this._setRootVar=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"persist",{get:function(){return this._persist},set:function(e){this._persist=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"theme",{get:function(){return this._config.theme},set:function(e){this._config.theme=e},enumerable:!0,configurable:!0}),e.prototype.use=function(e){if(null!=e){this._config.theme=e;$("body").addClass(this._config.theme)}return this._config.theme},e.prototype.$get=["$rootScope","$log","$window","$mdTheming",function(e,t,a,r){"ngInject";return(_.isUndefined(this._service)||_.isNull(this._service))&&(this._service=new o(t,e,a,r,this._config,this._setRootVar,this._persist)),this._service}],e}();angular.module("pipTheme").provider("pipTheme",i).run(r)},{}],6:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),angular.module("pipTheme",["ngMaterial"]),e("./ThemeService"),function(e){for(var t in e)a.hasOwnProperty(t)||(a[t]=e[t])}(e("./ThemeService"))},{"./ThemeService":5}],7:[function(e,t,a){function r(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(255, 152, 0, 1)"});e.definePalette("orange-background",t);var a=e.extendPalette("orange",{800:"rgba(255, 152, 0, 1)",900:"rgba(255, 152, 0, .54);"});e.definePalette("orange-primary",a),e.theme("amber").primaryPalette("orange-primary",{default:"800","hue-1":"900"}).backgroundPalette("orange-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("orange",{default:"900"}),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.Amber",["ngMaterial"]).config(r)},{}],8:[function(e,t,a){function r(e){function t(t){var a=e.extendPalette("blue",{contrastDefaultColor:"light",contrastDarkColors:void 0});e.definePalette("blue-primary",a);var r=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(33, 150, 243, 1)"});e.definePalette("blue-background",r);var n=e.extendPalette("green",{600:"rgba(0, 200, 83, 1)"});e.definePalette("blue-accent",n),e.theme(t).primaryPalette("blue-primary",{default:"500","hue-1":"300"}).backgroundPalette("blue-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("blue-accent",{default:"600"})}t("default"),t("blue"),e.setDefaultTheme("default"),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.Blue",["ngMaterial"]).config(r)},{}],9:[function(e,t,a){function r(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(76, 175, 80, 1)"});e.definePalette("green-background",t);var a=e.extendPalette("green",{300:"#9ed4a1",contrastLightColors:["500","300"]});e.definePalette("green-primary",a);var r=e.extendPalette("amber",{contrastLightColors:["A700"]});e.definePalette("green-accent",r),e.theme("green").primaryPalette("green-primary",{default:"500","hue-1":"300"}).backgroundPalette("green-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("green-accent",{default:"A700"}),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.Green",["ngMaterial"]).config(r)},{}],10:[function(e,t,a){function r(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(255, 152, 0, 1)",A400:"#a9b9c0",500:"#607D8B",A700:"#90A4AE",contrastDefaultColor:"dark",contrastLightColors:["300","400","500","600","700","800","900","A700"]});e.definePalette("third-party",t),e.theme("grey").primaryPalette("third-party",{default:"500","hue-1":"A400"}).backgroundPalette("third-party",{default:"50","hue-1":"500","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("third-party",{default:"A700"}),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.Grey",["ngMaterial"]).config(r)},{}],11:[function(e,t,a){function r(e){var t=e.extendPalette("grey",{700:"rgba(86, 97, 125, 1)",800:"rgba(86, 97, 125, .54)",A100:"rgba(250, 250, 250, 1)"});e.definePalette("grey",t);var a=e.extendPalette("teal",{contrastLightColors:["500","600","700","800","900","A700"]});e.definePalette("teal",a),e.theme("navy").primaryPalette("grey",{default:"700","hue-1":"800"}).backgroundPalette("grey",{default:"50","hue-1":"700","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("teal",{default:"A700"}),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.Navy",["ngMaterial"]).config(r)},{}],12:[function(e,t,a){function r(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(255, 112, 67, 1)",contrastLightColors:["600","700","800","900","A200"]});e.definePalette("red-background",t);var a=e.extendPalette("orange",{800:"rgba(255, 112, 67, 1)",900:"rgba(255, 152, 67, .54)",A100:"rgba(255, 171, 64, 1)",contrastLightColors:["800","900","A100"]});e.definePalette("red-primary",a),e.theme("orange").primaryPalette("red-primary",{default:"800","hue-1":"900"}).backgroundPalette("red-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("red-primary",{default:"A100"}),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.Orange",["ngMaterial"]).config(r)},{}],13:[function(e,t,a){function r(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(188, 86, 121, 1)",contrastDefaultColor:"dark",contrastLightColors:["A200","A700"]});e.definePalette("pink-background",t);var a=e.extendPalette("pink",{600:"rgba(255, 128, 171, 1)",700:"rgba(188, 86, 121, .54)",900:"rgba(188, 86, 121, 1)",contrastDefaultColor:"light"});e.definePalette("pink-primary",a),e.theme("pink").primaryPalette("pink-primary",{default:"900","hue-1":"700"}).backgroundPalette("pink-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("pink-primary",{default:"600"}),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],angular.module("pipTheme.Pink",["ngMaterial"]).config(r)},{}],14:[function(e,t,a){"use strict";function r(e){e.setDefaultTheme("default"),e.alwaysWatchTheme(!0)}r.$inject=["$mdThemingProvider"],Object.defineProperty(a,"__esModule",{value:!0}),e("./DefaultBlueTheme"),e("./DefaultPinkTheme"),e("./DefaultAmberTheme"),e("./DefaultOrangeTheme"),e("./DefaultGreenTheme"),e("./DefaultNavyTheme"),e("./DefaultGreyTheme"),angular.module("pipTheme.Default",["ngMaterial","pipTheme.Blue","pipTheme.Pink","pipTheme.Amber","pipTheme.Orange","pipTheme.Green","pipTheme.Navy","pipTheme.Grey"]).config(r)},{"./DefaultAmberTheme":7,"./DefaultBlueTheme":8,"./DefaultGreenTheme":9,"./DefaultGreyTheme":10,"./DefaultNavyTheme":11,"./DefaultOrangeTheme":12,"./DefaultPinkTheme":13}],15:[function(e,t,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),e("./common"),e("./default"),e("./bootbarn"),function(e){for(var t in e)a.hasOwnProperty(t)||(a[t]=e[t])}(e("./common"))},{"./bootbarn":4,"./common":6,"./default":14}]},{},[15])(15)});


!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).errors=r()}}(function(){return function r(e,t,o){function n(a,s){if(!t[a]){if(!e[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(i)return i(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var p=t[a]={exports:{}};e[a][0].call(p.exports,function(r){var t=e[a][1][r];return n(t||r)},p,p.exports,r,e,t,o)}return t[a].exports}for(var i="function"==typeof require&&require,a=0;a<o.length;a++)n(o[a]);return n}({1:[function(r,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function r(){}return r}();t.ErrorPageConfig=o;var n=function(){function r(){this.Maintenance={Active:!0,Name:"errors_maintenance",Event:"pipMaintenanceError",Title:"ERROR_MAINTENANCE_TITLE",SubTitle:"ERROR_MAINTENANCE_SUBTITLE",Breadcrumb:"ERROR_MAINTENANCE_TITLE",Image:"images/maintenance.svg"},this.MissingRoute={Active:!0,Name:"errors_missing_route",Event:"$stateNotFound",Title:"ERROR_MISSING_ROUTE_TITLE",SubTitle:"ERROR_MISSING_ROUTE_SUBTITLE",Breadcrumb:"ERROR_MISSING_ROUTE_PAGE_TITLE",Image:"images/invalid_route.svg"},this.NoConnection={Active:!0,Name:"errors_no_connection",Event:"pipNoConnectionError",Title:"ERROR_NO_CONNECTION_TITLE",SubTitle:"ERROR_NO_CONNECTION_SUBTITLE",Breadcrumb:"ERROR_NO_CONNECTION_TITLE",Image:"images/no_response.svg",StateIgnored:[]},this.Unknown={Active:!0,Name:"errors_unknown",Event:"pipUnknownError",Title:"ERROR_UNKNOWN_TITLE",SubTitle:"ERROR_UNKNOWN_SUBTITLE",Breadcrumb:"ERROR_UNKNOWN_TITLE",Image:"images/unknown_error.svg"},this.Unsupported={Active:!0,Name:"errors_unsupported",Event:"",Title:"ERROR_UNSUPPORTED_TITLE",SubTitle:"ERROR_UNSUPPORTED_SUBTITLE",Breadcrumb:"ERROR_UNSUPPORTED_TITLE",Image:"",Params:{}}}return r}();t.ErrorPageConfigs=n;var i=function(){function r(){this.edge=11,this.ie=11,this.firefox=43,this.opera=35,this.chrome=47}return r}();t.SupportedBrowsers=i},{}],2:[function(r,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("./ErrorPageConfig"),n=function(){function r(r){"ngInject";this._config=r||new o.ErrorPageConfigs}return r.$inject=["config"],Object.defineProperty(r.prototype,"configs",{get:function(){return this._config},enumerable:!0,configurable:!0}),r.prototype.getErrorPageConfig=function(r){return console.log(r,this._config),r&&this._config[r]?this._config[r]:null},r}(),i=function(){function r(){this.configs=new o.ErrorPageConfigs,this.configs.Unsupported.Params.supported=new o.SupportedBrowsers}return r.prototype.setErrorPageConfig=function(r,e){r&&e&&this.configs[r]&&(this.configs[r]=_.defaultsDeep(e,this.configs[r]))},r.prototype.setAllErrorPageConfigs=function(r){r&&(this.configs=_.defaultsDeep(r,this.configs))},r.prototype.setSupportedBrowsers=function(r){this.configs.Unsupported.Params.supported=r},r.prototype.$get=function(){"ngInject";return null==this._service&&(this._service=new n(this.configs)),this._service},r}();!function(){angular.module("pipErrorPageConfigService",[]).provider("pipErrorPageConfigService",i)}()},{"./ErrorPageConfig":1}],3:[function(r,e,t){!function(){function r(){return{restrict:"A",require:["ngModel","^?form"],link:function(r,t,o,n){new e(r,t,o,n)}}}var e=function(){function r(r,e,t,o){"ngInject";var n=this;this._fieldController=o[0],this._formController=o[1],r.$watch(t.ngModel,function(r){n.clearFieldErrors(),n.clearFormErrors()})}return r.$inject=["$scope","$element","$attrs","$ctrls"],r.prototype.clearFieldErrors=function(){var r=this._fieldController.$error;for(var e in r)r.hasOwnProperty(e)&&"ERROR_"==e.substring(0,6)&&this._fieldController.$setValidity(e,!0)},r.prototype.clearFormErrors=function(){this._formController.$serverError={}},r}();angular.module("pipClearErrors",[]).directive("pipClearErrors",r)}()},{}],4:[function(r,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function r(r){this.$rootScope=r}return r.$inject=["$rootScope"],r.prototype.errorsWithHint=function(r){if(null!=r)return _.isEmpty(r.$error)?{hint:!0}:r.$error},r.prototype.touchedErrorsWithHint=function(r,e,t){if(null!=r&&null!=e){if(r.$submitted||t&&(e.$touched||e.$dirty)){return _.isEmpty(e.$error)?{hint:!0}:e.$error}return{hint:!0}}},r.prototype.resetFormErrors=function(r,e){r.$setPristine(),r.$setUntouched(),e&&(r.$setDirty(),r.$setSubmitted()),r.$serverError={}},r.prototype.resetFieldsErrors=function(r,e){if(r)if(e&&r[e]&&r[e].$error)r[e].$error={};else{for(var t in r)r[t]&&r[t].$error&&(r[t].$error={});r&&r.$error&&(r.$error={})}},r.prototype.setFormError=function(r,e,t){if(null!=e){r.$serverError=r.$serverError||{};var o=e.code||(e.data||{}).code||null;if(!o&&e.status&&(o=e.status),o){var n="ERROR_"+o,i=t?t[o]:null;if(i&&r[i]&&r[i].$setValidity)return void r[i].$setValidity(n,!1);if("form"==i)return void(r.$serverError[n]=!0)}if(e.data&&e.data.message)return r.$serverError.ERROR_UNKNOWN=e.data.message,void this.goToUnhandledErrorPage(e);if(e.message)return r.$serverError.ERROR_UNKNOWN=e.message,void this.goToUnhandledErrorPage(e);if(e.name)return r.$serverError.ERROR_UNKNOWN=e.name,void this.goToUnhandledErrorPage(e);r.$serverError.ERROR_UNKNOWN=e,this.goToUnhandledErrorPage(e)}},r.prototype.goToUnhandledErrorPage=function(r){this.$rootScope.$emit("pipUnhandledInternalError",{error:r})},r}();!function(){angular.module("pipFormErrors",[]).service("pipFormErrors",o)}()},{}],5:[function(r,e,t){function o(r,e){e.interceptors.push("pipHttpResponseInterceptor")}o.$inject=["$stateProvider","$httpProvider"];var n=function(){function r(r,e,t){"ngInject";var o=this;this.$q=r,this.$location=e,this.$rootScope=t,this.responseError=function(r){switch(r.status){case 503:o.$rootScope.$emit("pipMaintenanceError",{error:r});break;case-1:o.$rootScope.$emit("pipNoConnectionError",{error:r});break;default:console.error("errors_unknown",r)}return o.$q.reject(r)}}return r.$inject=["$q","$location","$rootScope"],r}();angular.module("pipErrors.Pages").config(o).service("pipHttpResponseInterceptor",n)},{}],6:[function(r,e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),angular.module("pipErrors.Pages",["ngMaterial"]),r("./maintenance/MaintenanceErrorPage"),r("./missing_route/MissingRouteErrorPage"),r("./no_connection/NoConnectionErrorPage"),r("./unknown/UnknownErrorPage"),r("./unsupported/UnsupportedErrorPage"),r("./http_intercept/HttpResponseInterceptor"),r("./error_pages/ErrorPageConfigService"),r("./no_connection_panel/NoConnectionPanel"),r("./form_errors/ClearErrorsDirective"),r("./form_errors/FormErrorsService"),angular.module("pipErrors",["pipErrors.Templates","pipErrors.Pages","pipErrorPageConfigService","pipNoConnectionPanel","pipClearErrors","pipFormErrors"]),function(r){for(var e in r)t.hasOwnProperty(e)||(t[e]=r[e])}(r("./error_pages/ErrorPageConfig"))},{"./error_pages/ErrorPageConfig":1,"./error_pages/ErrorPageConfigService":2,"./form_errors/ClearErrorsDirective":3,"./form_errors/FormErrorsService":4,"./http_intercept/HttpResponseInterceptor":5,"./maintenance/MaintenanceErrorPage":7,"./missing_route/MissingRouteErrorPage":8,"./no_connection/NoConnectionErrorPage":9,"./no_connection_panel/NoConnectionPanel":10,"./unknown/UnknownErrorPage":11,"./unsupported/UnsupportedErrorPage":12}],7:[function(r,e,t){"use strict";function o(r){"ngInject";r.state(t.ErrorsMaintenanceState,{url:"/errors/maintenance",params:{error:null},controller:a,controllerAs:"$ctrl",templateUrl:"maintenance/MaintenanceErrorPage.html"})}function n(r,e,o){"ngInject";o.configs.Maintenance.Active&&r.$on(t.MaintenanceErrorEvent,function(r,o){e.go(t.ErrorsMaintenanceState,o)})}function i(r){var e=r.has("pipTranslate")?r.get("pipTranslate"):null;null!=e&&(e.translations("en",{ERROR_MAINTENANCE_TITLE:"The server is on maintenance",ERROR_MAINTENANCE_SUBTITLE:"Sorry for the inconvenience. This application is undergoing maintenance for a short period. We'll be back soon. Thank for your patience.",ERROR_MAINTENANCE_CLOSE:"Close",ERROR_MAINTENANCE_TRY_AGAIN:"Try after",ERROR_MAINTENANCE_RETRY:"Retry"}),e.translations("ru",{ERROR_MAINTENANCE_TITLE:"Сервер находится на обслуживании",ERROR_MAINTENANCE_SUBTITLE:"Приносим извинения за неудобства. Это приложение проходит техническое обслуживание на короткий период времени. Мы скоро вернемся. Благодарим за терпение.",ERROR_MAINTENANCE_CLOSE:"Закрыть",ERROR_MAINTENANCE_TRY_AGAIN:"Попробовать еще",ERROR_MAINTENANCE_RETRY:"Попробовать еще"}))}o.$inject=["$stateProvider"],n.$inject=["$rootScope","$state","pipErrorPageConfigService"],i.$inject=["$injector"],Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorsMaintenanceState="errors_maintenance",t.MaintenanceErrorEvent="pipMaintenanceError";var a=(function(){function r(){}}(),function(){function r(){}}(),function(){function r(){this.interval=0}}(),function(){function r(r,e,t,o,n,i,a){"ngInject";this.$window=e,this.$state=t,this._pageName="Maintenance",this.isCordova=!1;var s=i.has("pipMedia")?i.get("pipMedia"):null;this.config=a.getErrorPageConfig(this._pageName),this.pipNavService=i.has("pipNavService")?i.get("pipNavService"):null,this.media=s||n,o[pip.services.RoutingVar]=!1,this.appHeader(),this.error=t&&t.params&&t.params.error?t.params.error:{},this.timeoutInterval=this.error&&this.error.config&&this.error.config.params&&this.error.config.params.interval?this.error.config.params.interval:0}return r.$inject=["$scope","$window","$state","$rootScope","$mdMedia","$injector","pipErrorPageConfigService"],r.prototype.appHeader=function(){this.pipNavService&&(this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text=this.config.Breadcrumb,this.pipNavService.actions.hide())},r.prototype.onRetry=function(){this.$state.params&&this.$state.params.fromState&&this.$state.params.fromState!=this.config.Name?this.$state.go(this.$state.params.fromState,this.$state.params.fromParams):this.config.RedirectSateDefault?this.$state.go(this.config.RedirectSateDefault):this.$window.history.back()},r}());!function(){angular.module("pipErrors.Pages").config(o).run(n).run(i)}()},{}],8:[function(r,e,t){"use strict";function o(r){"ngInject";r.state(t.ErrorsMissingRouteState,{url:"/errors/missing_route",params:{unfoundState:null,fromState:null},controller:a,controllerAs:"$ctrl",templateUrl:"missing_route/MissingRouteErrorPage.html"})}function n(r,e,o,n){"ngInject";n.configs.MissingRoute.Active&&r.$on(t.StateNotFoundEvent,function(o,n,i,a){o.preventDefault(),e.go(t.ErrorsMissingRouteState,{unfoundState:n,fromState:{to:i?i.name:"",fromParams:a}}),r[pip.services.RoutingVar]=!1})}function i(r){var e=r.has("pipTranslate")?r.get("pipTranslate"):null;null!=e&&(e.translations("en",{ERROR_MISSING_ROUTE_TITLE:"Sorry, the page isn't available",ERROR_MISSING_ROUTE_SUBTITLE:"The link you followed may be broken, or the page may have been removed.",ERROR_MISSING_ROUTE_CONTINUE:"Continue",ERROR_MISSING_ROUTE_TRY_AGAIN:"Try again",ERROR_MISSING_ROUTE_GO_BACK:"Go Back",ERROR_MISSING_ROUTE_PAGE_TITLE:"Wrong page"}),e.translations("ru",{ERROR_MISSING_ROUTE_TITLE:"К сожалению, страница недоступна",ERROR_MISSING_ROUTE_SUBTITLE:"Введенная Вами ссылка не коректная или страница может быть удалена.",ERROR_MISSING_ROUTE_CONTINUE:"Продолжить",ERROR_MISSING_ROUTE_TRY_AGAIN:"Попробовать еще",ERROR_MISSING_ROUTE_GO_BACK:"Вернуться",ERROR_MISSING_ROUTE_PAGE_TITLE:"Ошибочная страница"}))}o.$inject=["$stateProvider"],n.$inject=["$rootScope","$state","$injector","pipErrorPageConfigService"],i.$inject=["$injector"],Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorsMissingRouteState="errors_missing_route",t.StateNotFoundEvent="$stateNotFound";var a=(function(){function r(){}}(),function(){function r(r,e,t,o,n,i,a){"ngInject";this.$location=e,this._pageName="MissingRoute",this.isCordova=!1;var s=i.has("pipMedia")?i.get("pipMedia"):null;this.config=a.getErrorPageConfig(this._pageName),this.pipNavService=i.has("pipNavService")?i.get("pipNavService"):null,this.media=s||n,o[pip.services.RoutingVar]=!1,this.appHeader(),this.fromState=t&&t.params&&t.params.fromState?t.params.fromState:{},this.unfoundState=t&&t.params?t.params.unfoundState:{},this.url=this.unfoundState&&this.unfoundState.to?t.href(this.unfoundState.to,this.unfoundState.toParams,{absolute:!0}):"",this.urlBack=this.fromState&&this.fromState.to?t.href(this.fromState.to,this.fromState.fromParams,{absolute:!0}):""}return r.$inject=["$scope","$location","$state","$rootScope","$mdMedia","$injector","pipErrorPageConfigService"],r.prototype.appHeader=function(){this.pipNavService&&(this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text=this.config.Breadcrumb,this.pipNavService.actions.hide())},r.prototype.onContinue=function(){this.$location.url("/")},r}());!function(){angular.module("pipErrors.Pages").config(o).run(n).run(i)}()},{}],9:[function(r,e,t){"use strict";function o(r,e){"ngInject";e.state(t.ErrorsConnectionState,{url:"/errors/no_connection",params:{error:null,fromState:null,fromParams:null},controller:a,controllerAs:"$ctrl",templateUrl:"no_connection/NoConnectionErrorPage.html"})}function n(r,e,o){"ngInject";var n=o.configs;n.NoConnection.StateIgnored||(n.NoConnection.StateIgnored=[]),n.NoConnection.StateIgnored.push(n.NoConnection.Name),n.NoConnection.Active&&r.$on(t.ErrorsConnectionEvent,function(r,o){o=o||{},n.NoConnection.StateIgnored.indexOf(e.current.name)>-1||(o.fromState=e.current.name,o.fromParams=e.params,"recover_password"!=e.current.name&&"change_password"!=e.current.name&&"expire_change_password"!=e.current.name&&"reset_password"!=e.current.name&&"verify_email"!=e.current.name&&"verify_email_success"!=e.current.name&&"signin"!=e.current.name&&"signup"!=e.current.name&&e.go(t.ErrorsConnectionState,o))})}function i(r){var e=r.has("pipTranslate")?r.get("pipTranslate"):null;null!=e&&(e.translations("en",{ERROR_NO_CONNECTION_TITLE:"No connection to the server",ERROR_NO_CONNECTION_SUBTITLE:"Unable to connect to the server. Check your Internet connection and try again.",ERROR_NO_CONNECTION_RETRY:"Retry"}),e.translations("ru",{ERROR_NO_CONNECTION_TITLE:"Нет подключения к серверу",ERROR_NO_CONNECTION_SUBTITLE:"Невозможно подключиться к серверу. Проверьте подключение к Интернету и повторите попытку.",ERROR_NO_CONNECTION_RETRY:"Повторить"}))}o.$inject=["$injector","$stateProvider"],n.$inject=["$rootScope","$state","pipErrorPageConfigService"],i.$inject=["$injector"],Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorsConnectionState="errors_no_connection",t.ErrorsConnectionEvent="pipNoConnectionError";var a=(function(){function r(){}}(),function(){function r(r,e,t,o,n,i,a){"ngInject";this.$window=r,this.$state=t,this._pageName="NoConnection",this.isCordova=!1;var s=i.has("pipMedia")?i.get("pipMedia"):null;this.errorConfig=a.getErrorPageConfig(this._pageName),this.pipNavService=i.has("pipNavService")?i.get("pipNavService"):null,this.media=s||n,o[pip.services.RoutingVar]=!1,this.appHeader(),this.error=t&&t.params&&t.params.error?t.params.error:{}}return r.$inject=["$window","$scope","$state","$rootScope","$mdMedia","$injector","pipErrorPageConfigService"],r.prototype.appHeader=function(){this.pipNavService&&(this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text=this.errorConfig.Breadcrumb,this.pipNavService.actions.hide())},r.prototype.onRetry=function(){this.$state.params&&this.$state.params.fromState&&this.$state.params.fromState!=this.errorConfig.Name?this.$state.go(this.$state.params.fromState,this.$state.params.fromParams):this.errorConfig.RedirectSateDefault?this.$state.go(this.errorConfig.RedirectSateDefault):this.$window.history.back()},r}());!function(){angular.module("pipErrors.Pages").config(o).run(n).run(i)}()},{}],10:[function(r,e,t){!function(){var r=function(){function r(r){this._retry=r.retry,this.error=r.error}return r.$inject=["$scope"],r.prototype.onRetry=function(){this._retry&&angular.isFunction(this._retry)&&this._retry()},r}();angular.module("pipNoConnectionPanel",[]).directive("pipNoConnectionPanel",function(){return{restrict:"E",scope:{error:"=pipError",retry:"=pipRetry"},templateUrl:"no_connection_panel/NoConnectionPanel.html",controller:r,controllerAs:"$ctrl"}})}()},{}],11:[function(r,e,t){"use strict";function o(r,e){"ngInject";e.state(t.ErrorsUnknownState,{url:"/errors/unknown",params:{error:null},controllerAs:"$ctrl",controller:s,templateUrl:"unknown/UnknownErrorPage.html"})}function n(r,e,o){"ngInject";o.configs.Unknown.Active&&r.$on(t.ErrorsUnknownEvent,function(r,o){e.go(t.ErrorsUnknownState,o)})}function i(r){var e=r.has("pipTranslate")?r.get("pipTranslate"):null;null!=e&&(e.translations("en",{ERROR_UNKNOWN_TITLE:"Oops. Something went wrong",ERROR_UNKNOWN_SUBTITLE:"Unknown error occurred, but don't worry we already have been notified.",ERROR_UNKNOWN_CLOSE:"Close",ERROR_UNKNOWN_DETAILS:"Details"}),e.translations("ru",{ERROR_UNKNOWN_TITLE:"Что-то пошло не так",ERROR_UNKNOWN_SUBTITLE:"Произошла неизвестная ошибка, но не беспокойтесь, мы уже уведомлены.",ERROR_UNKNOWN_CLOSE:"Закрыть",ERROR_UNKNOWN_DETAILS:"Подробнее"}))}o.$inject=["$injector","$stateProvider"],n.$inject=["$rootScope","$state","pipErrorPageConfigService"],i.$inject=["$injector"],Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorsUnknownState="errors_unknown",t.ErrorsUnknownEvent="pipUnknownError";var a=function(){function r(){}return r}(),s=function(){function r(r,e,t,o,n,i){"ngInject";this._pageName="Unknown",this.isCordova=!1;var a=n.has("pipMedia")?n.get("pipMedia"):null;this.config=i.getErrorPageConfig(this._pageName),this.pipNavService=n.has("pipNavService")?n.get("pipNavService"):null,this.media=a||o,t[pip.services.RoutingVar]=!1,this.showError=r.showError,this.appHeader(),this.error=e&&e.params&&e.params.error?e.params.error:{},this.parseError()}return r.$inject=["$scope","$state","$rootScope","$mdMedia","$injector","pipErrorPageConfigService"],r.prototype.appHeader=function(){this.pipNavService&&(this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text=this.config.Breadcrumb,this.pipNavService.actions.hide())},r.prototype.parseError=function(){this.error_details=new a,this.error_details.code=this.error.code,this.error_details.message=this.error.message,this.error_details.status=this.error.status,this.error_details.server_stacktrace=function(){},this.error_details.client_stacktrace=function(){}},r.prototype.onDetails=function(){this.showError=!0},r}();!function(){angular.module("pipErrors.Pages").config(o).run(n).run(i)}()},{}],12:[function(r,e,t){"use strict";function o(r){"ngInject";r.state(t.ErrorsUnsupportedState,{url:"/errors/unsupported",params:{error:null},controllerAs:"$ctrl",controller:a,templateUrl:"unsupported/UnsupportedErrorPage.html"})}function n(r,e,o,n){"ngInject";var i=n.configs;if(i.Unsupported.Active){var a=o.has("pipSystemInfo")?o.get("pipSystemInfo"):null;if(a){var s=i.Unsupported.Params.supported,c=a.browserName,l=a.browserVersion;l=l.split(".")[0],c&&s[c]&&l>=s[c]||e.go(t.ErrorsUnsupportedState)}}}function i(r){var e=r.has("pipTranslate")?r.get("pipTranslate"):null;null!=e&&(e.translations("en",{ERROR_UNSUPPORTED_TITLE:"This browser is not supported",ERROR_UNSUPPORTED_SUBTITLE:"Our application using the latest technology. This makes the application faster and easier to use. Unfortunately, your browser doesn't support those technologies. Download one of these great browsers and you'll be on your way:",ERROR_UNSUPPORTED_O:"Opera",ERROR_UNSUPPORTED_O_VER:"Version",ERROR_UNSUPPORTED_IE:"Internet Explorer",ERROR_UNSUPPORTED_IE_VER:"Version",ERROR_UNSUPPORTED_GC:"Google Chrome",ERROR_UNSUPPORTED_GC_VER:"Version",ERROR_UNSUPPORTED_FM:"Mozilla Firefox",ERROR_UNSUPPORTED_FM_VER:"Version",ERROR_UNSUPPORTED_EDGE:"Edge",ERROR_UNSUPPORTED_EDGE_VER:"Version",ERROR_UNSUPPORTED_SAFARI_VER:"Version",ERROR_UNSUPPORTED_SAFARI:"Safari"}),e.translations("ru",{ERROR_UNSUPPORTED_TITLE:"Этот браузер не поддерживается. ",ERROR_UNSUPPORTED_SUBTITLE:"Наше приложение использует новейшие технологии. Это делает приложение более быстрым и простым в использовании. К сожалению, ваш браузер не поддерживает эти технологии. Загрузите один из этих великолепных браузеров, и вы будете в пути:",ERROR_UNSUPPORTED_O:"Opera",ERROR_UNSUPPORTED_O_VER:"Версия",ERROR_UNSUPPORTED_IE:"Internet Explorer",ERROR_UNSUPPORTED_IE_VER:"Версия",ERROR_UNSUPPORTED_GC:"Google Chrome",ERROR_UNSUPPORTED_GC_VER:"Версия",ERROR_UNSUPPORTED_FM:"Mozilla Firefox",ERROR_UNSUPPORTED_FM_VER:"Версия",ERROR_UNSUPPORTED_EDGE:"Edge",ERROR_UNSUPPORTED_EDGE_VER:"Версия",ERROR_UNSUPPORTED_SAFARI_VER:"Версия",ERROR_UNSUPPORTED_SAFARI:"Safari"}))}o.$inject=["$stateProvider"],n.$inject=["$rootScope","$state","$injector","pipErrorPageConfigService"],i.$inject=["$injector"],Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorsUnsupportedState="errors_unsupported",t.ErrorsUnsupportedEvent="pipUnsupportedError";var a=(function(){function r(){}}(),function(){function r(r,e,t,o,n,i){"ngInject";this._pageName="Unsupported",this.isCordova=!1;var a=n.has("pipMedia")?n.get("pipMedia"):null;this.errorConfig=i.getErrorPageConfig(this._pageName),this.pipNavService=n.has("pipNavService")?n.get("pipNavService"):null,this.media=a||o,t[pip.services.RoutingVar]=!1,this.appHeader(),this.error=e&&e.params&&e.params.error?e.params.error:{}}return r.$inject=["$scope","$state","$rootScope","$mdMedia","$injector","pipErrorPageConfigService"],r.prototype.appHeader=function(){this.pipNavService&&(this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text=this.errorConfig.Breadcrumb,this.pipNavService.actions.hide())},r}());!function(){angular.module("pipErrors.Pages").config(o).run(n).run(i)}()},{}],13:[function(r,e,t){!function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("maintenance/MaintenanceErrorPage.html",'<div class="pip-error-scroll-body pip-scroll"><div class="pip-error pip-error-page layout-column flex layout-align-center-center"><img src="{{$ctrl.config.Image}}" class="pip-pic block"><div class="pip-error-text">{{::\'ERROR_MAINTENANCE_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_MAINTENANCE_SUBTITLE\' | translate}}</div><div class="pip-error-subtext" ng-if="$ctrl.timeoutInterval">{{::\'ERROR_MAINTENANCE_TRY_AGAIN\' | translate}} {{timeoutInterval}} sec.</div><div class="pip-error-actions h48 layout-column layout-align-center-center" ng-if="$ctrl.isCordova"><md-button class="md-accent" ng-click="$ctrl.onClose($event)" aria-label="CLOSE">{{::\'ERROR_MAINTENANCE_CLOSE\' | translate}}</md-button></div><div class="pip-error-actions h48 layout-column layout-align-center-center" ng-if="!$ctrl.isCordova"><md-button aria-label="RETRY" class="md-accent" ng-click="$ctrl.onRetry($event)">{{::\'ERROR_MAINTENANCE_RETRY\' | translate}}</md-button></div></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("missing_route/MissingRouteErrorPage.html",'<div class="pip-error-scroll-body pip-scroll"><div class="pip-error pip-error-page layout-column flex layout-align-center-center"><img src="{{$ctrl.config.Image}}" class="pip-pic block"><div class="pip-error-text">{{::$ctrl.config.Title | translate}}</div><div class="pip-error-subtext">{{::$ctrl.config.SubTitle | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="CONTINUE" class="md-accent" ng-click="$ctrl.onContinue($event)">{{::\'ERROR_MISSING_ROUTE_CONTINUE\' | translate}}</md-button></div><div class="h48" ng-if="url"><a ng-href="{{$ctrl.url}}">{{::\'ERROR_MISSING_ROUTE_TRY_AGAIN\' | translate }}: {{$ctrl.url}}</a></div><div class="h48" ng-if="urlBack"><a ng-href="{{$ctrl.urlBack}}">{{::\'ERROR_MISSING_ROUTE_GO_BACK\' | translate }}: {{$ctrl.urlBack}}</a></div></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("no_connection/NoConnectionErrorPage.html",'<div class="pip-error-scroll-body pip-scroll"><div class="pip-error pip-error-page layout-column flex layout-align-center-center"><img src="{{$ctrl.errorConfig.Image}}" class="pip-pic block"><div class="pip-error-text">{{::$ctrl.errorConfig.Title | translate}}</div><div class="pip-error-subtext">{{::$ctrl.errorConfig.SubTitle | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="RETRY" class="md-accent" ng-click="$ctrl.onRetry($event)">{{::\'ERROR_NO_CONNECTION_RETRY\' | translate}}</md-button></div></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("no_connection_panel/NoConnectionPanel.html",'<div class="pip-error-page pip-error layout-column layout-align-center-center flex"><img src="{{$ctrl.error.Image}}" class="pip-pic block"><div class="pip-error-text">{{::$ctrl.error.Title | translate}}</div><div class="pip-error-subtext">{{::$ctrl.error.SubTitle | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="RETRY" class="md-accent" ng-click="$ctrl.onRetry($event)">{{::\'ERROR_NO_CONNECTION_RETRY\' | translate}}</md-button></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("unknown/UnknownErrorPage.html",'<div class="pip-error-scroll-body pip-scroll"><div class="pip-error pip-error-page layout-column flex layout-align-center-center"><img src="{{$ctrl.config.Image}}" class="pip-pic block"><div class="pip-error-text">{{::$ctrl.config.Title | translate}}</div><div class="pip-error-subtext">{{::$ctrl.config.SubTitle | translate}}</div><div class="pip-error-subtext" ng-if="$ctrl.showError && $ctrl.error_details && $ctrl.error_details.message"><div ng-if="$ctrl.error_details.code">Code: {{$ctrl.error_details.code}}</div><div ng-if="$ctrl.error_details.message">Description: {{$ctrl.error_details.message}}</div><div ng-if="$ctrl.error_details.status">HTTP status: {{$ctrl.error_details.status}}</div><div ng-if="$ctrl.error_details.server_stacktrace">Server stacktrace: {{$ctrl.error_details.server_stacktrace}}</div><div ng-if="$ctrl.error_details.client_stacktrace">Client stacktrace stacktrace: {{$ctrl.error_details.client_stacktrace}}</div></div><div class="pip-error-actions layout-column layout-align-center-center"><div class="h48" ng-if="$ctrl.isCordova"><md-button aria-label="CLOSE" class="md-accent" ng-click="$ctrl.onClose($event)">{{::\'ERROR_UNKNOWN_CLOSE\' | translate}}</md-button></div><div class="h48" ng-if="$ctrl.error_details && $ctrl.error_details.status"><md-button aria-label="DETAILS" class="md-accent" ng-click="$ctrl.onDetails($event)">{{::\'ERROR_UNKNOWN_DETAILS\' | translate}}</md-button></div></div></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){
r.put("unsupported/UnsupportedErrorPage.html",'<div class="pip-error-scroll-body pip-scroll"><div class="pip-error pip-error-page layout-column flex layout-align-center-center"><div class="pip-error-text">{{::$ctrl.errorConfig.Title | translate}}</div><div class="pip-error-subtext">{{::$ctrl.errorConfig.SubTitle | translate}}</div><div class="pip-error-details layout-row layout-align-center-center" ng-if="$ctrl.media(\'gt-xs\') && $ctrl.errorConfig.Params && $ctrl.errorConfig.Params.supported"><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.ie"><div style="background-image: url(\'images/ie.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx">{{::\'ERROR_UNSUPPORTED_IE\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_IE_VER\' | translate}} {{ $ctrl.errorConfig.Params.supported.ie }} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.edge"><div style="background-image: url(\'images/edge.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://microsoft-edge.en.softonic.com/download">{{::\'ERROR_UNSUPPORTED_EDGE\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_EDGE_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.edge}} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.firefox"><div style="background-image: url(\'images/fm.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://www.mozilla.org/ru/firefox/new/">{{::\'ERROR_UNSUPPORTED_FM\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_FM_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.firefox}} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.chrome"><div style="background-image: url(\'images/gc.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://www.google.com/chrome/browser/desktop/index.html?platform=win64#">{{::\'ERROR_UNSUPPORTED_GC\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_GC_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.chrome}} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.opera"><div style="background-image: url(\'images/o.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="http://www.opera.com/ru/download">{{::\'ERROR_UNSUPPORTED_O\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_O_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.opera}} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.safari"><div style="background-image: url(\'images/safari.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://safari.en.softonic.com/">{{::\'ERROR_UNSUPPORTED_SAFARI\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_SAFARI_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.safari}} +</p></div></div></div><div class="pip-error-details" ng-if="$ctrl.media(\'xs\') && $ctrl.errorConfig.Params && $ctrl.errorConfig.Params.supported"><div class="layout-row layout-align-center-center"><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.ie"><div style="background-image: url(\'images/ie.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx">{{::\'ERROR_UNSUPPORTED_IE\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_IE_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.ie}} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.edge"><div style="background-image: url(\'images/edge.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://microsoft-edge.en.softonic.com/download">{{::\'ERROR_UNSUPPORTED_EDGE\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_EDGE_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.edge}} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.firefox"><div style="background-image: url(\'images/fm.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://www.mozilla.org/ru/firefox/new/">{{::\'ERROR_UNSUPPORTED_FM\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_FM_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.firefox}} +</p></div></div></div><div class="tm16 layout-row layout-align-center-center"><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.chrome"><div style="background-image: url(\'images/gc.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://www.google.com/chrome/browser/desktop/index.html?platform=win64#">{{::\'ERROR_UNSUPPORTED_GC\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_GC_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.chrome}} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.opera"><div style="background-image: url(\'images/o.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="http://www.opera.com/ru/download">{{::\'ERROR_UNSUPPORTED_O\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_O_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.opera}} +</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center" ng-if="$ctrl.errorConfig.Params.supported.safari"><div style="background-image: url(\'images/safari.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16 text-center"><a class="text-body2 m0" target="_blank" href="https://safari.en.softonic.com/">{{::\'ERROR_UNSUPPORTED_SAFARI\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_SAFARI_VER\' | translate}} {{$ctrl.errorConfig.Params.supported.safari}} +</p></div></div></div></div></div></div>')}])}()},{}]},{},[13,6])(13)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).charts=t()}}(function(){return function t(e,i,a){function r(o,s){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(n)return n(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[o]={exports:{}};e[o][0].call(h.exports,function(t){var i=e[o][1][t];return r(i||t)},h,h.exports,t,e,i,a)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<a.length;o++)r(a[o]);return r}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={series:"<pipSeries",xTickFormat:"<?pipXTickFormat",yTickFormat:"<?pipYTickFormat",interactiveLegend:"<?pipInterLegend"},r=(function(){function t(){}}(),function(){function t(t,e,i,a,r){"ngInject";var n=this;this.$element=t,this.$scope=e,this.$rootScope=i,this.$timeout=a,this.pipChartColors=r,this.chart=null,this.height=270,this.spaceAfterBar=15,this.spaceAfterMultiBar=1,this.colors=this.pipChartColors.generateMaterialColors(),e.$watch("$ctrl.legend",function(t){t&&(n.data=n.prepareData(t),n.legend=t,n.updateChart())},!0)}return t.$inject=["$element","$scope","$rootScope","$timeout","pipChartColors"],t.prototype.$onInit=function(){var t=this;this.data=this.prepareData(this.series),this.legend=_.clone(this.series),this.generateParameterColor(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(t.colors.map(function(e){return t.pipChartColors.materialColorToRgba(e)}))},this.instantiateChart()},t.prototype.$onChanges=function(t){this.xTickFormat=t.xTickFormat?t.xTickFormat.currentValue:null,this.yTickFormat=t.yTickFormat?t.yTickFormat.currentValue:null,this.interactiveLegend=t.interactiveLegend?t.interactiveLegend.currentValue:null,t.series&&t.series.currentValue!==t.series.previousValue&&(this.series=t.series.currentValue,this.data=this.prepareData(this.series),this.legend=_.clone(this.series),this.generateParameterColor(),this.updateChart())},t.prototype.updateChart=function(){this.chart&&(this.chartElem.datum(this.data).call(this.chart),this.configBarWidthAndLabel(),this.drawEmptyState())},t.prototype.instantiateChart=function(){var t=this;nv.addGraph(function(){return t.chart=nv.models.discreteBarChart().margin({top:10,right:0,bottom:10}).x(function(t){return t.label||t.key||t.x}).y(function(t){return t.value}).showValues(!0).staggerLabels(!0).showXAxis(!0).showYAxis(!0).valueFormat(d3.format("d")).duration(0).height(t.height).color(function(e){return t.data[e.series].color||t.pipChartColors.materialColorToRgba(t.colors[e.series])}),t.chart.tooltip.enabled(!1),t.chart.noData("There is no data right now..."),t.chart.yAxis.tickFormat(function(e){return t.yTickFormat?t.yTickFormat(e):e}),t.chart.xAxis.tickFormat(function(e){return t.xTickFormat?t.xTickFormat(e):e}),t.chartElem=d3.select(t.$element.get(0)).select(".bar-chart svg").datum(t.data).style("height","305px").call(t.chart),nv.utils.windowResize(function(){t.onResize()}),t.$rootScope.$on("pipMainResized",function(){t.onResize()}),t.$rootScope.$on("pipAuxPanelOpened",function(){t.$timeout(function(){t.onResize()},1e3)}),t.$rootScope.$on("pipAuxPanelClosed",function(){t.$timeout(function(){t.onResize()},1e3)}),t.chart},function(){t.$timeout(function(){t.configBarWidthAndLabel(0)},0),t.drawEmptyState()})},t.prototype.onResize=function(){this.chart.update(),this.configBarWidthAndLabel(0),this.drawEmptyState()},t.prototype.prepareData=function(t){var e=[];return _.each(t,function(t){!t.disabled&&t.values&&e.push(t)}),_.cloneDeep(e)},t.prototype.drawEmptyState=function(){if(0===this.$element.find(".nv-noData").length)d3.select(this.$element.find(".empty-state")[0]).remove();else{var t=this.chartElem.append("g").classed("empty-state",!0),e=this.$element.find(".nvd3-svg").innerWidth(),i=.1*e;t.append("g").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",this.height-10).attr("width",38),t.append("g").attr("transform","translate(42, 60)").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",200).attr("width",38),t.append("g").attr("transform","translate(84, 160)").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",100).attr("width",38),t.attr("transform","translate("+(50+i)+", 0), scale("+(e-2*i)/126+", 1)")}},t.prototype.getGroupSize=function(){for(var t=1,e=0;e<this.data.length;e++)this.data[e]&&this.data[e].values&&this.data[e].values.length>0&&this.data[e].values.length>t&&(t=this.data[e].values.length);return this.data.length},t.prototype.configBarWidthAndLabel=function(t){var e=this;void 0===t&&(t=1e3);var i=this.$element.find(".nv-bar text"),a=this.$element.find(".nv-bar");this.$element.find(".nvd3-svg")[0].getBBox().height;d3.select(this.$element.find(".bar-chart")[0]).classed("visible",!0);var r=this.getGroupSize();1==r?this.spaceAfterBar:this.spaceAfterMultiBar;r>1&&_.each(a,function(a,n){var o=Number(d3.select(a).select("rect").attr("height")),s=Number(d3.select(a).select("rect").attr("width"))/r,l=d3.select(a),c=d3.transform(l.attr("transform")).translate[0],h=d3.transform(l.attr("transform")).translate[1];l.attr("transform","translate("+Number(c+n*s)+", "+(e.height-20)+")").select("rect").attr("height",0),l.transition().duration(t).attr("transform","translate("+Number(c+n*s)+", "+h+")").select("rect").attr("height",o),d3.select(i[n]).attr("dy",o/2+10).attr("x",s*r/2)})},t.prototype.generateParameterColor=function(){var t=this;this.data&&_.each(this.data,function(e,i){e.values[0]&&(e.values[0].color=e.values[0].color||t.pipChartColors.getMaterialColor(i,t.colors),e.color=e.values[0].color)})},t}()),n={bindings:a,templateUrl:"bar_chart/BarChart.html",controller:r};angular.module("pipBarCharts",[]).component("pipBarChart",n)},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t){"ngInject";this.$mdColorPalette=t}return t.$inject=["$mdColorPalette"],t.prototype.getMaterialColor=function(t,e){return!e||e.length<1?null:(t>=e.length&&(t=0),this.materialColorToRgba(e[t]))},t.prototype.materialColorToRgba=function(t){return"rgba("+this.$mdColorPalette[t][500].value[0]+","+this.$mdColorPalette[t][500].value[1]+","+this.$mdColorPalette[t][500].value[2]+","+(this.$mdColorPalette[t][500].value[3]||1)+")"},t.prototype.generateMaterialColors=function(){var t=this,e=_.map(this.$mdColorPalette,function(t,e){return e});return e=_.filter(e,function(e){return _.isObject(t.$mdColorPalette[e])&&_.isObject(t.$mdColorPalette[e][500])&&_.isArray(t.$mdColorPalette[e][500].value)})},t}();angular.module("pipChartColors",[]).service("pipChartColors",a)},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={series:"<pipSeries",interactive:"<pipInteractive"},r=(function(){function t(){}}(),function(){function t(t,e,i,a){"ngInject";this.$element=t,this.$scope=e,this.$timeout=i,this.pipChartColors=a,this.colors=this.pipChartColors.generateMaterialColors()}return t.$inject=["$element","$scope","$timeout","pipChartColors"],t.prototype.$onInit=function(){this.updateLegends()},t.prototype.$onChanges=function(t){var e=this;t.series&&t.series.currentValue!==t.series.previousValue&&(this.series=t.series.currentValue,this.updateLegends()),t.interactive&&t.interactive.currentValue!==t.interactive.previousValue&&(this.interactive=t.interactive.currentValue,!0===this.interactive&&this.$timeout(function(){e.colorCheckboxes()},0))},t.prototype.updateLegends=function(){var t=this;this.$timeout(function(){t.animate(),t.colorCheckboxes()},0),this.prepareSeries()},t.prototype.colorCheckboxes=function(){var t=this,e=this.$element.find("md-checkbox .md-container");_.each(e,function(e,i){i>=t.series.length||$(e).css("color",t.series[i].color||t.colors[i]).find(".md-icon").css("background-color",t.series[i].color||t.colors[i])})},t.prototype.animate=function(){var t=this,e=this.$element.find(".chart-legend-item");_.each(e,function(e,i){t.$timeout(function(){$(e).addClass("visible")},200*i)})},t.prototype.prepareSeries=function(){var t=this;this.series&&_.each(this.series,function(e,i){var a=t.pipChartColors.getMaterialColor(i,t.colors);e.color=e.color||(e.values&&e.values[0]&&e.values[0].color?e.values[0].color:a),e.disabled=e.disabled||!1})},t}()),n={bindings:a,templateUrl:"chart_legend/ChartInteractiveLegend.html",controller:r};angular.module("pipChartLegends",[]).component("pipChartLegend",n)},{}],5:[function(t,e,i){angular.module("pipCharts",["pipBarCharts","pipLineCharts","pipPieCharts","pipChartLegends","pipChartColors","pipCharts.Templates"])},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={series:"<pipSeries",showYAxis:"<?pipYAxis",showXAxis:"<?pipXAxis",xFormat:"<?pipXFormat",xTickFormat:"<?pipXTickFormat",yTickFormat:"<?pipYTickFormat",xTickValues:"<?pipXTickValues",dynamic:"<?pipDynamic",fixedHeight:"<?pipDiagramHeight",dynamicHeight:"<?pipDynamicHeight",minHeight:"<?pipMinHeight",maxHeight:"<?pipMaxHeight",interactiveLegend:"<?pipInterLegend"},r=(function(){function t(){}}(),function(){function t(t,e,i,a,r){"ngInject";var n=this;this.$element=t,this.$scope=e,this.$rootScope=i,this.$timeout=a,this.pipChartColors=r,this.HEIGHT=270,this.chart=null,this.chartElem=null,this.setZoom=null,this.updateZoomOptions=null,this.fixedHeight=this.HEIGHT,this.dynamicHeight=!1,this.minHeight=this.HEIGHT,this.maxHeight=this.HEIGHT,this.showYAxis=!0,this.showXAxis=!0,this.dynamic=!1,this.interactiveLegend=!1,this.colors=this.pipChartColors.generateMaterialColors(),e.$watch("$ctrl.legend",function(t){n.data=n.prepareData(t),n.legend=t,n.updateChart()},!0),e.$on("$destroy",function(){a(function(){d3.selectAll(".nvtooltip").style("opacity",0)},800)})}return t.$inject=["$element","$scope","$rootScope","$timeout","pipChartColors"],t.prototype.$onInit=function(){var t=this;this.data=this.prepareData(this.series)||[],this.legend=_.clone(this.series),this.sourceEvents=[],this.generateParameterColor(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(t.colors.map(function(e){return t.pipChartColors.materialColorToRgba(e)}))},this.instantiateChart()},t.prototype.$onChanges=function(t){this.fixedHeight=t.fixedHeight?t.fixedHeight.currentValue:this.HEIGHT,this.minHeight=t.minHeight?t.minHeight.currentValue:this.HEIGHT,this.maxHeight=t.maxHeight?t.maxHeight.currentValue:this.HEIGHT,this.dynamicHeight=t.dynamicHeight?t.dynamicHeight.currentValue:this.dynamicHeight,this.showXAxis=t.showXAxis?t.showXAxis.currentValue:this.showXAxis,this.showYAxis=t.showYAxis?t.showYAxis.currentValue:this.showYAxis,this.dynamic=t.dynamic?t.dynamic.currentValue:this.dynamic,this.interactiveLegend=t.interactiveLegend?t.interactiveLegend.currentValue:this.interactiveLegend,this.xFormat=t.xFormat?t.xFormat.currentValue:this.xFormat,this.xTickFormat=t.xTickFormat?t.xTickFormat.currentValue:this.xTickFormat,this.yTickFormat=t.yTickFormat?t.yTickFormat.currentValue:this.yTickFormat,t.xTickValues&&t.xTickValues.currentValue!==t.xTickValues.previousValue&&(this.xTickValues=t.xTickValues.currentValue,this.updateXTickValues(),this.chartElem&&this.chart&&this.chartElem.datum(this.data||[]).call(this.chart)),t.series&&t.series.currentValue!==t.series.previousValue&&this.updateSeries()},t.prototype.prepareData=function(t){var e=[];return _.each(t,function(t){!t.disabled&&t.values&&e.push(t)}),_.cloneDeep(e)},t.prototype.getHeight=function(){return this.dynamicHeight?Math.min(Math.max(this.minHeight,this.$element.parent().innerHeight()),this.maxHeight):this.fixedHeight},t.prototype.zoomIn=function(){this.setZoom&&this.setZoom("in")},t.prototype.zoomOut=function(){this.setZoom&&this.setZoom("out")},t.prototype.instantiateChart=function(){var t=this;nv.addGraph(function(){return t.chart=nv.models.lineChart().margin({top:20,right:20,bottom:30,left:80}).x(function(e){return void 0!==e&&void 0!==e.x?t.xFormat?t.xFormat(e.x):e.x:e}).y(function(t){return void 0!==t&&void 0!==t.value?t.value:t}).height(t.getHeight()-50).useInteractiveGuideline(!0).showXAxis(!0).showYAxis(!0).showLegend(!1).color(function(t){return t.color||d3.scale.paletteColors().range()}),t.onlyZeroY()&&t.chart.yDomain([0,5]),t.chart.tooltip.enabled(!1),t.chart.noData("There is no data right now..."),t.chart.yAxis.tickFormat(function(e){var i=t.yTickFormat?t.yTickFormat(e):e;return t.clipYTick(i)}),t.chart.xAxis.tickFormat(function(e){return t.xTickFormat?t.xTickFormat(e):e}).tickValues(t.xTickValues&&_.isArray(t.xTickValues)&&t.xTickValues.length>2?d3.range(t.xTickValues[0],t.xTickValues[1],t.xTickValues[2]):null),t.chartElem=d3.select(t.$element.get(0)).select(".line-chart svg"),t.chartElem.datum(t.data||[]).style("height",t.getHeight()-50+"px").call(t.chart),$(".line-chart svg").on("touchstart touchmove",function(e){t.$timeout(function(){var t=$(".nvtooltip"),i=t.innerWidth(),a=$("body").innerWidth(),r=e.originalEvent.touches[0].pageX,n=e.originalEvent.touches[0].pageY;t.css("transform","translate("+(r+i>=a?r-i:r)+","+n+")"),t.css("left",0),t.css("top",0)})}),$(".line-chart svg").on("touchstart touchend",function(e){var i=function(){$(".nvtooltip").css("opacity",0)};i(),t.$timeout(function(){i()},500)}),t.dynamic&&t.addZoom(t.chart,t.chartElem),nv.utils.windowResize(function(){t.onResize()}),t.$rootScope.$on("pipMainResized",function(){t.onResize()}),t.$rootScope.$on("pipAuxPanelOpened",function(){t.$timeout(function(){t.onResize()},1500)}),t.$rootScope.$on("pipAuxPanelClosed",function(){t.$timeout(function(){t.onResize()},1500)}),t.chart},function(){t.drawEmptyState()})},t.prototype.clipYTick=function(t){return t.length>12?t.substr(0,10)+"..":t},t.prototype.onlyZeroY=function(){for(var t in this.data)for(var e in this.data[t].values)if(0!=this.data[t].values[e].value)return!1;return!0},t.prototype.updateXTickValues=function(){this.chart&&this.chart.xAxis.tickValues(this.xTickValues&&_.isArray(this.xTickValues)&&this.xTickValues.length>2?d3.range(this.xTickValues[0],this.xTickValues[1],this.xTickValues[2]):null)},t.prototype.updateChart=function(){this.chart&&(this.updateXTickValues(),this.chartElem.datum(this.data||[]).call(this.chart),this.drawEmptyState(),this.updateZoomOptions&&this.updateZoomOptions(this.data))},t.prototype.updateSeries=function(){this.data=this.prepareData(this.series),this.legend=_.clone(this.series),this.generateParameterColor(),this.updateChart()},t.prototype.onResize=function(){this.chart.height(this.getHeight()-50),this.chartElem.style("height",this.getHeight()-50+"px"),this.chart.update(),this.drawEmptyState()},t.prototype.drawEmptyState=function(){if(this.$element.find("text.nv-noData").get(0)){var t=this.$element.find(".line-chart").innerWidth(),e=this.$element.find(".line-chart").innerHeight();this.$element.find(".empty-state").get(0)?this.chartElem.select("image").attr("transform","scale("+t/1151+","+e/216+")"):(this.chartElem.append("defs").append("pattern").attr("height",1).attr("width",1).attr("x","0").attr("y","0").attr("id","bg").append("image").attr("x",17).attr("y",0).attr("height","216px").attr("width","1151px").attr("transform","scale("+t/1151+","+e/216+")").attr("xlink:href","images/line_chart_empty_state.svg"),this.chartElem.append("rect").classed("empty-state",!0).attr("height","100%").attr("width","100%").attr("fill","url(#bg)"))}else d3.select(this.$element.find(".empty-state")[0]).remove()},t.prototype.updateScroll=function(t,e){var i=e[1]-e[0],a=t[1]-t[0],r=a/i==1;$(this.$element[0]).find(".visual-scroll").css("opacity",function(){return r?0:1}),r||$(this.$element[0]).find(".scrolled-block").css("left",function(){return(t[0]-e[0])/i*100+"%"}).css("width",function(){return a/i*100+"%"})},t.prototype.generateParameterColor=function(){var t=this;this.data&&_.each(this.data,function(e,i){e.color=e.color||t.pipChartColors.getMaterialColor(i,t.colors)})},t.prototype.addZoom=function(t,e){var i=this,a=null,r=null,n=null,o=null,s=null,l=null,c=null,h=null,u=null,p=d3.behavior.zoom(),d=null,m=null,g=null;!function(t){a=t.yAxis,r=t.xAxis,n=t.xDomain||r.scale().domain,o=t.yDomain||a.scale().domain,s=t.update,l=r.scale(),c=a.scale(),h=r.scale().domain().slice(),u=a.scale().domain().slice(),d=h,m=p.scale(),g=p.translate(),l.nice(),c.nice()}(t);var f=function(t,e,i,a){return t[0]<e[0]&&(t[0]=e[0],d[0]!==e[0]||i!==m?t[1]+=e[0]-t[0]:(t[1]=d[1],a=_.clone(g))),t[1]>e[1]&&(t[1]=e[1],d[1]!==e[1]||i!==m?t[0]-=t[1]-e[1]:(t[0]=d[0],a=_.clone(g))),p.translate(a),d=_.clone(t),m=_.clone(i),g=_.clone(a),t},v=function(){p.scale(1),p.translate([0,0]),l.domain(h),p.x(l).y(c),e.call(p)},y=function(){1===d3.event.scale?(k(),v()):(n(f(l.domain(),h,d3.event.scale,d3.event.translate)),s()),i.updateScroll(l.domain(),h)};this.setZoom=function(t){var i=[e[0][0].getBBox().width/2,e[0][0].getBBox().height/2],a=p.translate(),r=x(i);"in"===t?m<4&&p.scale(m+.2):m>1&&p.scale(m-.2);var n=b(r);p.translate([a[0]+i[0]-n[0],a[1]+i[1]-n[1]]),p.event(e)};var C=function(t){var i=p.translate();"right"===t?i[0]-=20:i[0]+=20,p.translate(i),p.event(e)},x=function(t){var e=p.scale(),i=p.translate();return[(t[0]-i[0])/e,(t[1]-i[1])/e]},b=function(t){var e=p.scale(),i=p.translate();return[t[0]*e+i[0],t[1]*e+i[1]]},T=function(){switch(d3.event.keyCode){case 39:C("right");break;case 37:C("left");break;case 107:i.setZoom("in");break;case 109:i.setZoom("out")}},k=function(){n(h),s(),p.scale(1),p.translate([0,0]),m=1,g=[0,0]};p.x(l).y(c).scaleExtent([1,4]).on("zoom",y),e.call(p).on("dblclick.zoom",k),$(this.$element.get(0)).addClass("dynamic"),e.attr("focusable",!1).style("outline","none").on("keydown",T).on("focus",function(){})},t}()),n={bindings:a,templateUrl:"line_chart/LineChart.html",controller:r};angular.module("pipLineCharts",[]).component("pipLineChart",n)},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={series:"<pipSeries",donut:"<?pipDonut",legend:"<?pipShowLegend",total:"<?pipShowTotal",size:"<?pipPieSize",centered:"<?pipCentered"},r=(function(){function t(){}}(),function(){function t(t,e,i,a){"ngInject";this.$element=t,this.$scope=e,this.$timeout=i,this.pipChartColors=a,this.donut=!1,this.legend=!0,this.total=!0,this.size=250,this.centered=!1,this.chart=null,this.colors=this.pipChartColors.generateMaterialColors()}return t.$inject=["$element","$scope","$timeout","pipChartColors"],t.prototype.$onInit=function(){var t=this;this.data=this.series,this.generateParameterColor(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(t.colors.map(function(e){return t.pipChartColors.materialColorToRgba(e)}))},this.instantiateChart()},t.prototype.$onChanges=function(t){var e=this;this.legend=t.legend?t.legend.currentValue:this.legend,this.centered=t.centered?t.centered.currentValue:this.centered,this.donut=t.donut?t.donut.currentValue:this.donut,this.size=t.size?t.size.currentValue:this.size,this.total=t.total?t.total.currentValue:this.total,t.series&&t.series.currentValue!==t.series.previousValue&&(this.data=t.series.currentValue,this.generateParameterColor(),this.chart&&(this.chartElem.datum(this.data).call(this.chart),this.$timeout(function(){e.resizeTitleLabelUnwrap()}),this.drawEmptyState(d3.select(this.$element.get(0)).select(".pie-chart svg")[0][0])))},t.prototype.instantiateChart=function(){var t=this;nv.addGraph(function(){return t.chart=nv.models.pieChart().margin({top:0,right:0,bottom:0,left:0}).x(function(e){return t.donut?e.value:null}).y(function(t){return t.value}).height(Number(t.size)).width(Number(t.size)).showLabels(!0).labelThreshold(.001).growOnHover(!1).donut(t.donut).donutRatio(.5).color(function(t){return t.color||d3.scale.paletteColors().range()}),t.chart.tooltip.enabled(!1),t.chart.noData("There is no data right now..."),t.chart.showLegend(!1),t.chartElem=d3.select(t.$element.get(0)).select(".pie-chart").style("height",t.size+"px").style("width",t.centered?"100%":t.size+"px").select("svg").style("opacity",0).datum(t.data||[]).call(t.chart),nv.utils.windowResize(function(){t.chart.update(),t.$timeout(function(){t.resizeTitleLabelUnwrap()}),t.centerChart(),t.drawEmptyState(d3.select(t.$element.get(0)).select(".pie-chart svg")[0][0])}),t.chart},function(){t.$timeout(function(){var e=d3.select(t.$element.get(0)).select(".pie-chart svg")[0][0];t.renderTotalLabel(e),d3.select(e).transition().duration(1e3).style("opacity",1),t.$timeout(function(){t.resizeTitleLabelUnwrap()},800),t.centerChart(),t.drawEmptyState(e)})})},t.prototype.drawEmptyState=function(t){if(this.$element.find("text.nv-noData").get(0)){0===this.$element.find(".pip-empty-pie-text").length&&this.$element.find(".pie-chart").append("<div class='pip-empty-pie-text'>There is no data right now...</div>");var e=d3.layout.pie().sort(null),i=Number(this.size),a=d3.svg.arc().innerRadius(i/2-20).outerRadius(i/2-57);t=d3.select(t).append("g").classed("empty-state",!0).attr("transform","translate("+i/2+","+i/2+")");t.selectAll("path").data(e([1])).enter().append("path").attr("fill","rgba(0, 0, 0, 0.08)").attr("d",a)}else d3.select(this.$element.find(".empty-state")[0]).remove(),this.$element.find(".pip-empty-pie-text").remove()},t.prototype.centerChart=function(){if(this.centered){var t=d3.select(this.$element.get(0)).select(".pie-chart svg")[0][0],e=$(t).innerWidth()/2-(Number(this.size)||250)/2;d3.select(this.$element.find(".nv-pieChart")[0]).attr("transform","translate("+e+", 0)")}},t.prototype.renderTotalLabel=function(t){if((this.total||this.donut)&&this.data){var e=this.data.reduce(function(t,e){return t+e.value},0);e>=1e4&&(e=(e/1e3).toFixed(1)+"k"),d3.select(t).select(".nv-pie:not(.nvd3)").append("text").classed("label-total",!0).attr("text-anchor","middle").style("dominant-baseline","central").text(e),this.titleElem=d3.select(this.$element.find("text.label-total").get(0)).style("opacity",0)}},t.prototype.resizeTitleLabelUnwrap=function(){if((this.total||this.donut)&&this.data){var t=this.$element.find(".nvd3.nv-pieChart").get(0).getBBox();t.width&&t.height&&this.titleElem.style("font-size",~~t.width/4.5).style("opacity",1)}},t.prototype.generateParameterColor=function(){var t=this;this.data&&_.each(this.data,function(e,i){e.color=e.color||t.pipChartColors.getMaterialColor(i,t.colors)})},t}()),n={bindings:a,templateUrl:"pie_chart/PieChart.html",controller:r};angular.module("pipPieCharts",[]).component("pipPieChart",n)},{}],8:[function(t,e,i){!function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("bar_chart/BarChart.html",'<div class="bar-chart"><svg></svg></div><pip-chart-legend ng-show="$ctrl.legend" pip-series="$ctrl.legend" pip-interactive="$ctrl.interactiveLegend"></pip-chart-legend>')}])}(),function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("chart_legend/ChartInteractiveLegend.html",'<div><div class="chart-legend-item" ng-repeat="item in $ctrl.series" ng-show="item.values || item.value"><md-checkbox ng-model="item.disabled" ng-true-value="false" ng-false-value="true" ng-if="$ctrl.interactive" aria-label="{{ item.label }}"><p class="legend-item-value" ng-if="item.value" ng-style="{\'background-color\': item.color}">{{ item.value }}</p><p class="legend-item-label">{{:: item.label || item.key }}</p></md-checkbox><div ng-if="!$ctrl.interactive"><span class="bullet" ng-style="{\'background-color\': item.color}"></span> <span>{{:: item.label || item.key}}</span></div></div></div>')}])}(),function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("line_chart/LineChart.html",'<div class="line-chart" flex="auto" layout="column"><svg class="flex-auto" ng-class="{\'visible-x-axis\': $ctrl.showXAxis, \'visible-y-axis\': $ctrl.showYAxis}"></svg><div class="scroll-container"><div class="visual-scroll"><div class="scrolled-block"></div></div></div><md-button class="md-fab md-mini minus-button" ng-click="$ctrl.zoomOut()"><md-icon md-svg-icon="icons:minus-circle"></md-icon></md-button><md-button class="md-fab md-mini plus-button" ng-click="$ctrl.zoomIn()"><md-icon md-svg-icon="icons:plus-circle"></md-icon></md-button></div><pip-chart-legend pip-series="$ctrl.legend" pip-interactive="$ctrl.interactiveLegend"></pip-chart-legend>')}])}(),function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("pie_chart/PieChart.html",'<div class="pie-chart" ng-class="{\'circle\': !$ctrl.donut}"><svg class="flex-auto"></svg></div><pip-chart-legend pip-series="$ctrl.data" pip-interactive="false" ng-if="$ctrl.legend"></pip-chart-legend>')}])}()},{}]},{},[8,1,2,3,4,5,6,7])(8)});


!function(o){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=o();else if("function"==typeof define&&define.amd)define([],o);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.pip||(t.pip={})).locations=o()}}(function(){return function o(t,i,n){function e(p,l){if(!i[p]){if(!t[p]){var s="function"==typeof require&&require;if(!l&&s)return s(p,!0);if(a)return a(p,!0);var c=new Error("Cannot find module '"+p+"'");throw c.code="MODULE_NOT_FOUND",c}var r=i[p]={exports:{}};t[p][0].call(r.exports,function(o){var i=t[p][1][o];return e(i||o)},r,r.exports,o,t,i,n)}return i[p].exports}for(var a="function"==typeof require&&require,p=0;p<n.length;p++)e(n[p]);return e}({1:[function(o,t,i){function n(o){var t=o.has("pipTranslate")?o.get("pipTranslate"):null;return function(o){return t?t.translate(o)||o:o}}n.$inject=["$injector"],angular.module("pipLocations.Translate",[]).filter("translate",n)},{}],2:[function(o,t,i){angular.module("pipLocations",["pipLocation","pipLocationMap","pipLocationIp","pipLocationEditDialog","pipLocationEdit","pipLocations.Translate"])},{}],3:[function(o,t,i){var n={pipLocationName:"<",pipLocationPos:"<",pipShowLocationIcon:"<",pipCollapse:"<",pipRebind:"<",pipDisabled:"<",pipLocationResize:"&"},e=(function(){function o(){}}(),function(){function o(o,t,i){"ngInject";this.$element=o,this.$timeout=t,this.$scope=i,this.showMap=!0,o.addClass("pip-location")}return o.$inject=["$element","$timeout","$scope"],o.prototype.$postLink=function(){var o=this;this.$timeout(function(){o.name=o.$element.find(".pip-location-name"),o.mapContainer=o.$element.find(".pip-location-container"),!0===o.pipCollapse&&(o.mapContainer.hide(),o.showMap=!1,o.name.click(function(t){t.stopPropagation(),o.pipDisabled||(o.showMap=!o.showMap,o.mapContainer[o.showMap?"show":"hide"](),o.showMap&&o.generateMap(),o.$scope.$$phase||o.$scope.$apply())})),o.redrawMap()})},o.prototype.redrawMap=function(){this.mapContainer&&(this.pipLocationPos&&!0===this.showMap?this.generateMap():this.clearMap())},o.prototype.$onChanges=function(o){this.pipRebind=!!o.pipRebind&&(o.pipRebind.currentValue||!1),this.pipShowLocationIcon=!!o.pipShowLocationIcon&&(o.pipShowLocationIcon.currentValue||!1),this.pipCollapse=!!o.pipCollapse&&(o.pipCollapse.currentValue||!1),this.pipDisabled=!!o.pipDisabled&&(o.pipDisabled.currentValue||!1),this.pipRebind&&(this.pipLocationName=o.pipLocationName?o.pipLocationName.currentValue:null,this.pipLocationPos=o.pipLocationPos?o.pipLocationPos.currentValue:null,this.redrawMap())},o.prototype.clearMap=function(){this.mapControl&&this.mapControl.remove(),this.mapControl=null,this.mapContainer.hide()},o.prototype.generateMap=function(){var o=this.pipLocationPos;if(!1===this.showMap||null==o||null==o.coordinates||o.coordinates.length<0)return void this.clearMap();var t=new google.maps.LatLng(o.coordinates[0],o.coordinates[1]);this.mapControl&&this.mapControl.remove(),this.mapControl=$("<div></div>"),this.mapContainer.show(),this.mapControl.appendTo(this.mapContainer);var i={center:t,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:!1,draggable:!1},n=new google.maps.Map(this.mapControl[0],i);new google.maps.Marker({position:t,map:n})},o}()),a={bindings:n,templateUrl:"location/Location.html",controller:e};angular.module("pipLocation",[]).component("pipLocation",a)},{}],4:[function(o,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],5:[function(o,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function o(o,t,i,n,e,a){var p=this;this.$scope=o,this.$mdDialog=n,this._map=null,this._marker=null,this.onSetLocation=function(){var o=this;null!==this._map&&navigator.geolocation.getCurrentPosition(function(t){var i=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);o._marker=o.createMarker(i),o._map.setCenter(i),o._map.setZoom(12),o.changeLocation(i,null)},function(){o.$scope.$apply()},{maximumAge:0,enableHighAccuracy:!0,timeout:5e3})},this.theme=t.$theme,this.locationPos=e&&"Point"==e.type&&e.coordinates&&2==e.coordinates.length?e:null,this.locationName=a,this.supportSet=null!=navigator.geolocation,i(function(){var o=$(".pip-location-edit-dialog .pip-location-container"),t=p.locationPos?new google.maps.LatLng(p.locationPos.coordinates[0],p.locationPos.coordinates[1]):null,n={center:new google.maps.LatLng(0,0),zoom:1,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0};null!=t&&(n.center=t,n.zoom=12),p._map=new google.maps.Map(o[0],n),p._marker=p.createMarker(t),i(function(){google.maps.event.trigger(p._map,"resize")},1e3)},0),o.$on("pipLayoutResized",function(){null!=p._map&&google.maps.event.trigger(p._map,"resize")})}return o.prototype.createMarker=function(o){var t=this;if(this._marker&&this._marker.setMap(null),o){this._marker=new google.maps.Marker({position:o,map:this._map,draggable:!0,animation:google.maps.Animation.DROP});var i=this._marker;google.maps.event.addListener(i,"dragend",function(){var o=i.getPosition();t.changeLocation(o,null)})}else this._marker=null;return this._marker},o.prototype.changeLocation=function(o,t){var i=this;this.locationPos={type:"Point",coordinates:[o.lat(),o.lng()]},this.locationName=null,(new google.maps.Geocoder).geocode({latLng:o},function(o,t){o&&o.length>0&&(i.locationName=o[0].formatted_address),i.$scope.$apply()})},o.prototype.onAddPin=function(){if(null!==this._map){var o=this._map.getCenter();this._marker=this.createMarker(o),this.changeLocation(o,null)}},o.prototype.onRemovePin=function(){null!==this._map&&(this._marker=this.createMarker(null),this.locationPos=null,this.locationName=null)},o.prototype.onZoomIn=function(){if(null!==this._map){var o=this._map.getZoom();this._map.setZoom(o+1)}},o.prototype.onZoomOut=function(){if(null!==this._map){var o=this._map.getZoom();this._map.setZoom(o>1?o-1:o)}},o.prototype.onCancel=function(){this.$mdDialog.cancel()},o.prototype.onApply=function(){this.$mdDialog.hide({location:this.locationPos,locationPos:this.locationPos,locationName:this.locationName})},o}(),e=function(){function o(o){this.$mdDialog=o}return o.$inject=["$mdDialog"],o.prototype.show=function(o,t,i){this.$mdDialog.show({controller:n,controllerAs:"$ctrl",templateUrl:"location_dialog/LocationDialog.html",locals:{locationName:o.locationName,locationPos:o.locationPos},clickOutsideToClose:!0}).then(function(o){t&&t(o)},function(){i&&i()})},o}(),a=function(o){var t=o.has("pipTranslate")?o.get("pipTranslate"):null;t&&(t.setTranslations("en",{LOCATION_ADD_LOCATION:"Add location",LOCATION_SET_LOCATION:"Set location",LOCATION_ADD_PIN:"Add pin",LOCATION_REMOVE_PIN:"Remove pin"}),t.setTranslations("ru",{LOCATION_ADD_LOCATION:"Добавить местоположение",LOCATION_SET_LOCATION:"Определить положение",LOCATION_ADD_PIN:"Добавить точку",LOCATION_REMOVE_PIN:"Убрать точку"}))};a.$inject=["$injector"],angular.module("pipLocationEditDialog").run(a).service("pipLocationEditDialog",e)},{}],6:[function(o,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function o(){}return o}();i.LocationDialogParams=n},{}],7:[function(o,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipLocationEditDialog",["ngMaterial","pipLocations.Templates"]),o("./LocationDialog")},{"./LocationDialog":5}],8:[function(o,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={pipLocationName:"=",pipLocationPos:"=",pipLocationHolder:"=",ngDisabled:"<",pipChanged:"&"},e=(function(){function o(){}}(),function(){function o(o,t,i){var n=this;this.$element=o,this.$scope=t,this.pipLocationEditDialog=i,this.defineCoordinatesDebounced=_.debounce(function(){n.defineCoordinates},2e3)}return o.prototype.$postLink=function(){var o=this;this.$element.find("md-input-container").attr("md-no-float",(!!this.pipLocationHolder).toString()),this.empty=this.$element.children(".pip-location-empty"),this.mapContainer=this.$element.children(".pip-location-container"),this.mapControl=null,this.$scope.$watch("$ctrl.pipLocationName",function(t,i){t!==i&&o.defineCoordinatesDebounced()}),this.$scope.$watch("$ctrl.pipLocationPos",function(){o.generateMap()}),this.$element.addClass("pip-location-edit"),this.pipLocationPos?this.generateMap():this.clearMap()},o.prototype.$onChanges=function(o){this.ngDisabled=!!o.ngDisabled&&o.ngDisabled.currentValue},o.prototype.clearMap=function(){this.mapControl&&this.mapControl.remove(),this.mapControl=null,this.mapContainer.hide(),this.empty.show()},o.prototype.generateMap=function(){var o=this.pipLocationPos;if(null==o||null==o.coordinates||o.coordinates.length<0)return void this.clearMap();var t=new google.maps.LatLng(o.coordinates[0],o.coordinates[1]);this.mapControl&&this.mapControl.remove(),this.mapContainer.show(),this.empty.hide(),this.mapControl=$("<div></div>"),this.mapControl.appendTo(this.mapContainer);var i={center:t,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:!1,draggable:!1},n=new google.maps.Map(this.mapControl[0],i);new google.maps.Marker({position:t,map:n})},o.prototype.defineCoordinates=function(){var o=this.pipLocationName;if(""==o)return this.pipLocationPos=null,this.clearMap(),void this.$scope.$apply();(new google.maps.Geocoder).geocode({address:o},function(o,t){this.$scope.$apply(function(){if(t===google.maps.GeocoderStatus.OK){if(null===o||0===o.length)return this.pipLocationPos=null,void this.clearMap();var i=o[0].geometry||{},n=i.location||{};if(null===n.lat||null===n.lng)return this.pipLocationPos=null,void this.clearMap();this.pipLocationPos={type:"Point",coordinates:{latitude:n.lat(),longtitude:n.lng()}},this.generateMap()}else this.pipLocationPos=null,this.clearMap()})})},o.prototype.onSetLocation=function(){var o=this;this.ngDisabled||this.pipLocationEditDialog.show({locationName:this.pipLocationName,locationPos:this.pipLocationPos},function(t){var i=t.location,n=t.locationName;o.pipLocationPos&&"Point"==o.pipLocationPos.type&&2==o.pipLocationPos.coordinates.length&&i&&2==i.coordinates.length&&o.pipLocationPos.coordinates[0]-i.coordinates[0]<1e-4&&o.pipLocationPos.coordinates[1]-i.coordinates[1]<1e-4&&n===o.pipLocationName||(o.pipLocationPos=i,o.pipLocationName=n,null===n&&null!==i&&(o.pipLocationName="("+t.location.coordinates[0]+","+t.location.coordinates[1]+")"),o.pipChanged(),o.mapContainer[0].focus())})},o.prototype.onMapClick=function(o){this.ngDisabled||(this.mapContainer[0].focus(),this.onSetLocation())},o.prototype.onMapKeyPress=function(o){this.ngDisabled||13!=o.keyCode&&32!=o.keyCode||this.onSetLocation()},o}()),a={bindings:n,templateUrl:"location_edit/LocationEdit.html",controller:e};angular.module("pipLocationEdit",["pipLocationEditDialog"]).component("pipLocationEdit",a)},{}],9:[function(o,t,i){var n={pipIpaddress:"<",pipExtraInfo:"&",pipRebind:"<"},e=(function(){function o(){}}(),function(){function o(o,t){this.$http=t,this.mapContainer=o.children(".pip-location-container"),o.addClass("pip-location-ip"),this.defineCoordinates()}return o.prototype.$onChanges=function(o){this.pipRebind=!!o.pipRebind&&(o.pipRebind.currentValue||!1),!0===this.pipRebind&&(this.pipIpaddress=o.pipIpaddress?o.pipIpaddress.currentValue:this.pipIpaddress,this.defineCoordinates())},o.prototype.clearMap=function(){this.mapControl&&this.mapControl.remove(),this.mapControl=null},o.prototype.generateMap=function(o,t){if(null==o||null==t)return void this.clearMap();var i=new google.maps.LatLng(o,t);this.mapControl&&this.mapControl.remove(),this.mapControl=$("<div></div>"),this.mapControl.appendTo(this.mapContainer);var n={center:i,zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:!1,draggable:!1},e=new google.maps.Map(this.mapControl[0],n);new google.maps.Marker({position:i,map:e})},o.prototype.defineCoordinates=function(){var o=this,t=this.pipIpaddress;if(""==t)return void this.clearMap();this.$http.get("https://freegeoip.net/json/"+t).success(function(t){if(null!=t&&null!=t.latitude&&null!=t.longitude){if(o.generateMap(t.latitude,t.longitude),o.pipExtraInfo){var i={city:t.city,regionCode:t.regionCode,region:t.regionName,zipCode:t.zipCode,countryCode:t.countryCode,country:t.countryName};o.pipExtraInfo({extraInfo:i})}}else o.clearMap()}).error(function(t){o.clearMap()})},o}()),a={bindings:n,template:'<div class="pip-location-container"></div>',controller:e};angular.module("pipLocationIp",[]).component("pipLocationIp",a)},{}],10:[function(o,t,i){var n={pipLocationPos:"<",pipIconPath:"<",pipInteractive:"<",pipStretch:"<",pipRebind:"<"},e=(function(){function o(){}}(),function(){function o(o){this.$element=o,this.mapControl=null,this.mapContainer=o.children(".pip-location-container"),o.addClass("pip-location-map")}return o.prototype.$onChanges=function(o){this.pipRebind=!!o.pipRebind&&(o.pipRebind.currentValue||!1),this.pipInteractive=!!o.pipInteractive&&(o.pipInteractive.currentValue||!1),this.pipStretch=!!o.pipStretch&&(o.pipStretch.currentValue||!1),!0===this.pipStretch?this.mapContainer.addClass("stretch"):this.mapContainer.removeClass("stretch"),!0===this.pipRebind&&(this.pipLocationPos=o.pipLocationPos?o.pipLocationPos.currentValue:this.pipLocationPos,this.pipIconPath=o.pipIconPath?o.pipIconPath.currentValue:this.pipIconPath,this.generateMap())},o.prototype.clearMap=function(){this.mapControl&&this.mapControl.remove(),this.mapControl=null},o.prototype.checkLocation=function(o){return!(null==o||null==o.coordinates||o.coordinates.length<0)},o.prototype.determineCoordinates=function(o){var t=new google.maps.LatLng(o.coordinates[0],o.coordinates[1]);return t.fill=o.fill,t.stroke=o.stroke,t},o.prototype.generateMap=function(){var o=this,t=this.pipLocationPos,i=[],n=this.pipInteractive||!1;if(this.checkLocation(t)&&!_.isArray(t)?i.push(this.determineCoordinates(t)):t&&_.isArray(t)&&t.length>0&&_.each(t,function(t){o.checkLocation(t)&&i.push(o.determineCoordinates(t))}),0===i.length)return void this.clearMap();this.mapControl&&this.mapControl.remove(),this.mapControl=$("<div></div>"),this.mapControl.appendTo(this.mapContainer);var e={center:i[0],zoom:12,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0,disableDoubleClickZoom:!0,scrollwheel:n,draggable:n},a=new google.maps.Map(this.mapControl[0],e),p=new google.maps.LatLngBounds;_.each(i,function(t){var i={path:o.pipIconPath,fillColor:t.fill||"#EF5350",fillOpacity:1,scale:1,strokeColor:t.stroke||"white",strokeWeight:5};new google.maps.Marker({position:t,map:a,icon:o.pipIconPath?i:null}),p.extend(t)}),i.length>1&&a.fitBounds(p)},o}()),a={bindings:n,template:'<div class="pip-location-container"></div>',controller:e};angular.module("pipLocationMap",[]).component("pipLocationMap",a)},{}],11:[function(o,t,i){!function(o){try{o=angular.module("pipLocations.Templates")}catch(t){o=angular.module("pipLocations.Templates",[])}o.run(["$templateCache",function(o){o.put("location/Location.html",'<div class="pip-location-name location-collapse" ng-click="$ctrl.pipLocationResize()" ng-if="!$ctrl.pipCollapse" ng-class="$ctrl.pipShowLocationIcon ? \'pip-location-icon-space\' : \'\'"><md-icon md-svg-icon="icons:location" class="flex-fixed pip-icon" ng-if="$ctrl.pipShowLocationIcon"></md-icon><span class="pip-location-text">{{$ctrl.pipLocationName}}</span></div><md-button class="pip-location-name" ng-click="$ctrl.pipLocationResize()" ng-if="$ctrl.pipCollapse" ng-class="$ctrl.pipShowLocationIcon ? \'pip-location-icon-space\' : \'\'"><div class="layout-align-start-center layout-row w-stretch"><md-icon md-svg-icon="icons:location" class="flex-fixed pip-icon" ng-if="$ctrl.pipShowLocationIcon"></md-icon><span class="pip-location-text flex">{{$ctrl.pipLocationName}}</span><md-icon md-svg-icon="icons:triangle-down" class="flex-fixed" ng-show="!$ctrl.showMap"></md-icon><md-icon md-svg-icon="icons:triangle-up" class="flex-fixed" ng-show="$ctrl.showMap"></md-icon></div></md-button><div class="pip-location-container"></div>')}])}(),function(o){try{o=angular.module("pipLocations.Templates")}catch(t){o=angular.module("pipLocations.Templates",[])}o.run(["$templateCache",function(o){o.put("location_dialog/LocationDialog.html",'<md-dialog class="pip-dialog pip-location-edit-dialog layout-column" md-theme="{{$ctrl.theme}}"><div class="pip-header layout-column layout-align-start-start"><md-progress-linear ng-show="$ctrl.transaction.busy()" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h3 class="flex">{{ \'LOCATION_SET_LOCATION\' | translate }}</h3></div><div class="pip-footer"><div class="layout-row layout-align-start-center"><md-button class="md-accent" ng-click="$ctrl.onAddPin()" ng-show="$ctrl.locationPos == null" ng-disabled="$ctrl.transaction.busy()" aria-label="{{ ::\'LOCATION_ADD_PIN\' }}">{{ ::\'LOCATION_ADD_PIN\' | translate }}</md-button><md-button class="md-accent" ng-click="$ctrl.onRemovePin()" ng-show="$ctrl.locationPos != null" ng-disabled="$ctrl.transaction.busy()" aria-label="{{ ::\'LOCATION_REMOVE_PIN\' }}">{{ ::\'LOCATION_REMOVE_PIN\' | translate }}</md-button></div><div class="flex"></div><div class="layout-row layout-align-end-center"><md-button ng-click="$ctrl.onCancel()" aria-label="{{ ::\'CANCEL\' }}">{{ ::\'CANCEL\' | translate }}</md-button><md-button class="md-accent" ng-click="$ctrl.onApply()" ng-disabled="$ctrl.transaction.busy()" aria-label="{{ ::\'APPLY\' }}">{{ ::\'APPLY\' | translate }}</md-button></div></div><div class="pip-body"><div class="pip-location-container"></div><md-button class="md-icon-button md-fab pip-zoom-in" ng-click="$ctrl.onZoomIn()" aria-label="{{ ::\'LOCATION_ZOOM_IN\' }}"><md-icon md-svg-icon="icons:plus"></md-icon></md-button><md-button class="md-icon-button md-fab pip-zoom-out" ng-click="$ctrl.onZoomOut()" aria-label="{{ ::\'LOCATION_ZOOM_OUT\' }}"><md-icon md-svg-icon="icons:minus"></md-icon></md-button><md-button class="md-icon-button md-fab pip-set-location" ng-click="$ctrl.onSetLocation()" aria-label="{{ ::\'LOCATION_SET_LOCATION\' }}" ng-show="supportSet" ng-disabled="transaction.busy()"><md-icon md-svg-icon="icons:target"></md-icon></md-button></div></md-dialog>')}])}(),function(o){try{o=angular.module("pipLocations.Templates")}catch(t){o=angular.module("pipLocations.Templates",[])}o.run(["$templateCache",function(o){o.put("location_edit/LocationEdit.html",'<md-input-container class="md-block"><label>{{ \'LOCATION\' | translate }}</label> <input ng-model="$ctrl.pipLocationName" ng-disabled="$ctrl.ngDisabled"></md-input-container><div class="pip-location-empty" layout="column" layout-align="center center"><md-button class="md-raised" ng-disabled="$ctrl.ngDisabled" ng-click="$ctrl.onSetLocation()" aria-label="LOCATION_ADD_LOCATION"><span class="icon-location"></span> {{\'LOCATION_ADD_LOCATION\' | translate }}</md-button></div><div class="pip-location-container" tabindex="{{ $ctrl.ngDisabled ? -1 : 0 }}" ng-click="$ctrl.onMapClick($event)" ng-keypress="$ctrl.onMapKeyPress($event)"></div>')}])}()},{}]},{},[11,1,2,4,7,5,6,8,9,10,3])(11)});


!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.pip||(t.pip={})).files=e()}}(function(){var define,module,exports;return function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var c="function"==typeof require&&require;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[a]={exports:{}};t[a][0].call(u.exports,function(e){var r=t[a][1][e];return i(r||e)},u,u.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(require,module,exports){(function(process,global){!function(e,t){"object"==typeof exports&&void 0!==module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.async=e.async||{})}(this,function(exports){"use strict";function apply(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function overRest$1(e,t,r){return t=nativeMax(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=nativeMax(n.length-t,0),a=Array(o);++i<o;)a[i]=n[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=n[i];return s[t]=r(a),apply(e,this,s)}}function identity(e){return e}function rest(e,t){return overRest$1(e,t,identity)}function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function asyncify(e){return initialParams(function(t,r){var n;try{n=e.apply(this,t)}catch(e){return r(e)}isObject(n)&&"function"==typeof n.then?n.then(function(e){r(null,e)},function(e){r(e.message?e:new Error(e))}):r(null,n)})}function supportsAsync(){var supported;try{supported=isAsync(eval("(async function () {})"))}catch(e){supported=!1}return supported}function isAsync(e){return supportsSymbol&&"AsyncFunction"===e[Symbol.toStringTag]}function wrapAsync(e){return isAsync(e)?asyncify(e):e}function applyEach$1(e){return rest(function(t,r){var n=initialParams(function(r,n){var i=this;return e(t,function(e,t){wrapAsync$1(e).apply(i,r.concat(t))},n)});return r.length?n.apply(this,r):n})}function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag$1),r=e[symToStringTag$1];try{e[symToStringTag$1]=void 0}catch(e){}var n=nativeObjectToString.call(e);return t?e[symToStringTag$1]=r:delete e[symToStringTag$1],n}function objectToString(e){return nativeObjectToString$1.call(e)}function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:(e=Object(e),symToStringTag&&symToStringTag in e?getRawTag(e):objectToString(e))}function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}function isLength(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function noop(){}function once(e){return function(){if(null!==e){var t=e;e=null,t.apply(this,arguments)}}}function baseTimes(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function isObjectLike(e){return null!=e&&"object"==typeof e}function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag}function stubFalse(){return!1}function isIndex(e,t){return!!(t=null==t?MAX_SAFE_INTEGER$1:t)&&("number"==typeof e||reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(e){return function(t){return e(t)}}function arrayLikeKeys(e,t){var r=isArray(e),n=!r&&isArguments(e),i=!r&&!n&&isBuffer(e),o=!r&&!n&&!i&&isTypedArray(e),a=r||n||i||o,s=a?baseTimes(e.length,String):[],c=s.length;for(var l in e)!t&&!hasOwnProperty$1.call(e,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||isIndex(l,c))||s.push(l);return s}function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$5)}function overArg(e,t){return function(r){return e(t(r))}}function baseKeys(e){if(!isPrototype(e))return nativeKeys(e);var t=[];for(var r in Object(e))hasOwnProperty$3.call(e,r)&&"constructor"!=r&&t.push(r);return t}function keys(e){return isArrayLike(e)?arrayLikeKeys(e):baseKeys(e)}function createArrayIterator(e){var t=-1,r=e.length;return function(){return++t<r?{value:e[t],key:t}:null}}function createES2015Iterator(e){var t=-1;return function(){var r=e.next();return r.done?null:(t++,{value:r.value,key:t})}}function createObjectIterator(e){var t=keys(e),r=-1,n=t.length;return function(){var i=t[++r];return r<n?{value:e[i],key:i}:null}}function iterator(e){if(isArrayLike(e))return createArrayIterator(e);var t=getIterator(e);return t?createES2015Iterator(t):createObjectIterator(e)}function onlyOnce(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}}function _eachOfLimit(e){return function(t,r,n){function i(e,t){if(c-=1,e)s=!0,n(e);else{if(t===breakLoop||s&&c<=0)return s=!0,n(null);o()}}function o(){for(;c<e&&!s;){var t=a();if(null===t)return s=!0,void(c<=0&&n(null));c+=1,r(t.value,t.key,onlyOnce(i))}}if(n=once(n||noop),e<=0||!t)return n(null);var a=iterator(t),s=!1,c=0;o()}}function eachOfLimit(e,t,r,n){_eachOfLimit(t)(e,wrapAsync$1(r),n)}function doLimit(e,t){return function(r,n,i){return e(r,t,n,i)}}function eachOfArrayLike(e,t,r){function n(e,t){e?r(e):++o!==a&&t!==breakLoop||r(null)}r=once(r||noop);var i=0,o=0,a=e.length;for(0===a&&r(null);i<a;i++)t(e[i],i,onlyOnce(n))}function doParallel(e){return function(t,r,n){return e(eachOf,t,wrapAsync$1(r),n)}}function _asyncMap(e,t,r,n){n=n||noop,t=t||[];var i=[],o=0,a=wrapAsync$1(r);e(t,function(e,t,r){var n=o++;a(e,function(e,t){i[n]=t,r(e)})},function(e){n(e,i)})}function doParallelLimit(e){return function(t,r,n,i){return e(_eachOfLimit(r),t,wrapAsync$1(n),i)}}function arrayEach(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function createBaseFor(e){return function(t,r,n){for(var i=-1,o=Object(t),a=n(t),s=a.length;s--;){var c=a[e?s:++i];if(!1===r(o[c],c,o))break}return t}}function baseForOwn(e,t){return e&&baseFor(e,t,keys)}function baseFindIndex(e,t,r,n){for(var i=e.length,o=r+(n?1:-1);n?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function baseIsNaN(e){return e!==e}function strictIndexOf(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function baseIndexOf(e,t,r){return t===t?strictIndexOf(e,t,r):baseFindIndex(e,baseIsNaN,r)}function arrayMap(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}function isSymbol(e){return"symbol"==typeof e||isObjectLike(e)&&baseGetTag(e)==symbolTag}function baseToString(e){if("string"==typeof e)return e;if(isArray(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY?"-0":t}function baseSlice(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}function castSlice(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:baseSlice(e,t,r)}function charsEndIndex(e,t){for(var r=e.length;r--&&baseIndexOf(t,e[r],0)>-1;);return r}function charsStartIndex(e,t){for(var r=-1,n=e.length;++r<n&&baseIndexOf(t,e[r],0)>-1;);return r}function asciiToArray(e){return e.split("")}function hasUnicode(e){return reHasUnicode.test(e)}function unicodeToArray(e){return e.match(reUnicode)||[]}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function toString(e){return null==e?"":baseToString(e)}function trim(e,t,r){if((e=toString(e))&&(r||void 0===t))return e.replace(reTrim,"");if(!e||!(t=baseToString(t)))return e;var n=stringToArray(e),i=stringToArray(t);return castSlice(n,charsStartIndex(n,i),charsEndIndex(n,i)+1).join("")}function parseParams(e){return e=e.toString().replace(STRIP_COMMENTS,""),e=e.match(FN_ARGS)[2].replace(" ",""),e=e?e.split(FN_ARG_SPLIT):[],e=e.map(function(e){return trim(e.replace(FN_ARG,""))})}function autoInject(e,t){var r={};baseForOwn(e,function(e,t){function n(t,r){var n=arrayMap(i,function(e){return t[e]});n.push(r),wrapAsync$1(e).apply(null,n)}var i,o=isAsync(e),a=!o&&1===e.length||o&&0===e.length;if(isArray(e))i=e.slice(0,-1),e=e[e.length-1],r[t]=i.concat(i.length>0?n:e);else if(a)r[t]=e;else{if(i=parseParams(e),0===e.length&&!o&&0===i.length)throw new Error("autoInject task functions require explicit parameters.");o||i.pop(),r[t]=i.concat(n)}}),auto(r,t)}function fallback(e){setTimeout(e,0)}function wrap(e){return rest(function(t,r){e(function(){t.apply(null,r)})})}function DLL(){this.head=this.tail=null,this.length=0}function setInitial(e,t){e.length=1,e.head=e.tail=t}function queue(e,t,r){function n(e,t,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(l.started=!0,isArray(e)||(e=[e]),0===e.length&&l.idle())return setImmediate$1(function(){l.drain()});for(var n=0,i=e.length;n<i;n++){var o={data:e[n],callback:r||noop};t?l._tasks.unshift(o):l._tasks.push(o)}setImmediate$1(l.process)}function i(e){return rest(function(t){a-=1;for(var r=0,n=e.length;r<n;r++){var i=e[r],o=baseIndexOf(s,i,0);o>=0&&s.splice(o),i.callback.apply(i,t),null!=t[0]&&l.error(t[0],i.data)}a<=l.concurrency-l.buffer&&l.unsaturated(),l.idle()&&l.drain(),l.process()})}if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var o=wrapAsync$1(e),a=0,s=[],c=!1,l={_tasks:new DLL,concurrency:t,payload:r,saturated:noop,unsaturated:noop,buffer:t/4,empty:noop,drain:noop,error:noop,started:!1,paused:!1,push:function(e,t){n(e,!1,t)},kill:function(){l.drain=noop,l._tasks.empty()},unshift:function(e,t){n(e,!0,t)},process:function(){if(!c){for(c=!0;!l.paused&&a<l.concurrency&&l._tasks.length;){var e=[],t=[],r=l._tasks.length;l.payload&&(r=Math.min(r,l.payload));for(var n=0;n<r;n++){var u=l._tasks.shift();e.push(u),t.push(u.data)}0===l._tasks.length&&l.empty(),a+=1,s.push(e[0]),a===l.concurrency&&l.saturated();var p=onlyOnce(i(e));o(t,p)}c=!1}},length:function(){return l._tasks.length},running:function(){return a},workersList:function(){return s},idle:function(){return l._tasks.length+a===0},pause:function(){l.paused=!0},resume:function(){!1!==l.paused&&(l.paused=!1,setImmediate$1(l.process))}};return l}function cargo(e,t){return queue(e,1,t)}function reduce(e,t,r,n){n=once(n||noop);var i=wrapAsync$1(r);eachOfSeries(e,function(e,r,n){i(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})}function concat$1(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(e,t){i=i.concat(t||[]),n(e)})},function(e){n(e,i)})}function doSeries(e){return function(t,r,n){return e(eachOfSeries,t,wrapAsync$1(r),n)}}function _createTester(e,t){return function(r,n,i,o){o=o||noop;var a,s=!1;r(n,function(r,n,o){i(r,function(n,i){n?o(n):e(i)&&!a?(s=!0,a=t(!0,r),o(null,breakLoop)):o()})},function(e){e?o(e):o(null,s?a:t(!1))})}}function _findGetResult(e,t){return t}function consoleFunc(e){return rest(function(t,r){wrapAsync$1(t).apply(null,r.concat(rest(function(t,r){"object"==typeof console&&(t?console.error&&console.error(t):console[e]&&arrayEach(r,function(t){console[e](t)}))})))})}function doDuring(e,t,r){function n(e,t){return e?r(e):t?void i(a):r(null)}r=onlyOnce(r||noop);var i=wrapAsync$1(e),o=wrapAsync$1(t),a=rest(function(e,t){if(e)return r(e);t.push(n),o.apply(this,t)});n(null,!0)}function doWhilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync$1(e),i=rest(function(e,o){return e?r(e):t.apply(this,o)?n(i):void r.apply(null,[null].concat(o))});n(i)}function doUntil(e,t,r){doWhilst(e,function(){return!t.apply(this,arguments)},r)}function during(e,t,r){function n(e){if(e)return r(e);a(i)}function i(e,t){return e?r(e):t?void o(n):r(null)}r=onlyOnce(r||noop);var o=wrapAsync$1(t),a=wrapAsync$1(e);a(i)}function _withoutIndex(e){return function(t,r,n){return e(t,n)}}function eachLimit(e,t,r){eachOf(e,_withoutIndex(wrapAsync$1(t)),r)}function eachLimit$1(e,t,r,n){_eachOfLimit(t)(e,_withoutIndex(wrapAsync$1(r)),n)}function ensureAsync(e){return isAsync(e)?e:initialParams(function(t,r){var n=!0;t.push(function(){var e=arguments;n?setImmediate$1(function(){r.apply(null,e)}):r.apply(null,e)}),e.apply(this,t),n=!1})}function notId(e){return!e}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function filterArray(e,t,r,n){var i=new Array(t.length);e(t,function(e,t,n){r(e,function(e,r){i[t]=!!r,n(e)})},function(e){if(e)return n(e);for(var r=[],o=0;o<t.length;o++)i[o]&&r.push(t[o]);n(null,r)})}function filterGeneric(e,t,r,n){var i=[];e(t,function(e,t,n){r(e,function(r,o){r?n(r):(o&&i.push({index:t,value:e}),n())})},function(e){e?n(e):n(null,arrayMap(i.sort(function(e,t){return e.index-t.index}),baseProperty("value")))})}function _filter(e,t,r,n){(isArrayLike(t)?filterArray:filterGeneric)(e,t,wrapAsync$1(r),n||noop)}function forever(e,t){function r(e){if(e)return n(e);i(r)}var n=onlyOnce(t||noop),i=wrapAsync$1(ensureAsync(e));r()}function mapValuesLimit(e,t,r,n){n=once(n||noop);var i={},o=wrapAsync$1(r);eachOfLimit(e,t,function(e,t,r){o(e,t,function(e,n){if(e)return r(e);i[t]=n,r()})},function(e){n(e,i)})}function has(e,t){return t in e}function memoize(e,t){var r=Object.create(null),n=Object.create(null);t=t||identity;var i=wrapAsync$1(e),o=initialParams(function(e,o){var a=t.apply(null,e);has(r,a)?setImmediate$1(function(){o.apply(null,r[a])}):has(n,a)?n[a].push(o):(n[a]=[o],i.apply(null,e.concat(rest(function(e){r[a]=e;var t=n[a];delete n[a];for(var i=0,o=t.length;i<o;i++)t[i].apply(null,e)}))))});return o.memo=r,o.unmemoized=e,o}function _parallel(e,t,r){r=r||noop;var n=isArrayLike(t)?[]:{};e(t,function(e,t,r){wrapAsync$1(e)(rest(function(e,i){i.length<=1&&(i=i[0]),n[t]=i,r(e)}))},function(e){r(e,n)})}function parallelLimit(e,t){_parallel(eachOf,e,t)}function parallelLimit$1(e,t,r){_parallel(_eachOfLimit(t),e,r)}function race(e,t){if(t=once(t||noop),!isArray(e))return t(new TypeError("First argument to race must be an array of functions"));if(!e.length)return t();for(var r=0,n=e.length;r<n;r++)wrapAsync$1(e[r])(t)}function reduceRight(e,t,r,n){reduce(slice.call(e).reverse(),t,r,n)}function reflect(e){var t=wrapAsync$1(e);return initialParams(function(e,r){return e.push(rest(function(e,t){if(e)r(null,{error:e});else{var n=null;1===t.length?n=t[0]:t.length>1&&(n=t),r(null,{value:n})}})),t.apply(this,e)})}function reject$1(e,t,r,n){_filter(e,t,function(e,t){r(e,function(e,r){t(e,!r)})},n)}function reflectAll(e){var t;return isArray(e)?t=arrayMap(e,reflect):(t={},baseForOwn(e,function(e,r){t[r]=reflect.call(this,e)})),t}function constant$1(e){return function(){return e}}function retry(e,t,r){function n(){s(function(e){e&&c++<a.times&&("function"!=typeof a.errorFilter||a.errorFilter(e))?setTimeout(n,a.intervalFunc(c)):r.apply(null,arguments)})}var i=5,o=0,a={times:i,intervalFunc:constant$1(o)};if(arguments.length<3&&"function"==typeof e?(r=t||noop,t=e):(!function(e,t){if("object"==typeof t)e.times=+t.times||i,e.intervalFunc="function"==typeof t.interval?t.interval:constant$1(+t.interval||o),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||i}}(a,e),r=r||noop),"function"!=typeof t)throw new Error("Invalid arguments for async.retry");var s=wrapAsync$1(t),c=1;n()}function series(e,t){_parallel(eachOfSeries,e,t)}function sortBy(e,t,r){function n(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0}var i=wrapAsync$1(t);map(e,function(e,t){i(e,function(r,n){if(r)return t(r);t(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);r(null,arrayMap(t.sort(n),baseProperty("value")))})}function timeout(e,t,r){function n(){s||(o.apply(null,arguments),clearTimeout(a))}function i(){var t=e.name||"anonymous",n=new Error('Callback function "'+t+'" timed out.');n.code="ETIMEDOUT",r&&(n.info=r),s=!0,o(n)}var o,a,s=!1,c=wrapAsync$1(e);return initialParams(function(e,r){o=r,a=setTimeout(i,t),c.apply(null,e.concat(n))})}function baseRange(e,t,r,n){for(var i=-1,o=nativeMax$1(nativeCeil((t-e)/(r||1)),0),a=Array(o);o--;)a[n?o:++i]=e,e+=r;return a}function timeLimit(e,t,r,n){var i=wrapAsync$1(r);mapLimit(baseRange(0,e,1),t,i,n)}function transform(e,t,r,n){arguments.length<=3&&(n=r,r=t,t=isArray(e)?[]:{}),n=once(n||noop);var i=wrapAsync$1(r);eachOf(e,function(e,r,n){i(t,e,r,n)},function(e){n(e,t)})}function unmemoize(e){return function(){return(e.unmemoized||e).apply(null,arguments)}}function whilst(e,t,r){r=onlyOnce(r||noop);var n=wrapAsync$1(t);if(!e())return r(null);var i=rest(function(t,o){return t?r(t):e()?n(i):void r.apply(null,[null].concat(o))});n(i)}function until(e,t,r){whilst(function(){return!e.apply(this,arguments)},t,r)}var nativeMax=Math.max,initialParams=function(e){return rest(function(t){var r=t.pop();e.call(this,t,r)})},supportsSymbol="function"==typeof Symbol,wrapAsync$1=supportsAsync()?wrapAsync:identity,freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0,objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0,asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]",MAX_SAFE_INTEGER=9007199254740991,breakLoop={},iteratorSymbol="function"==typeof Symbol&&Symbol.iterator,getIterator=function(e){return iteratorSymbol&&e[iteratorSymbol]&&e[iteratorSymbol]()},argsTag="[object Arguments]",objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty,propertyIsEnumerable=objectProto$3.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$2.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")},isArray=Array.isArray,freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags["[object Float32Array]"]=typedArrayTags["[object Float64Array]"]=typedArrayTags["[object Int8Array]"]=typedArrayTags["[object Int16Array]"]=typedArrayTags["[object Int32Array]"]=typedArrayTags["[object Uint8Array]"]=typedArrayTags["[object Uint8ClampedArray]"]=typedArrayTags["[object Uint16Array]"]=typedArrayTags["[object Uint32Array]"]=!0,typedArrayTags["[object Arguments]"]=typedArrayTags["[object Array]"]=typedArrayTags["[object ArrayBuffer]"]=typedArrayTags["[object Boolean]"]=typedArrayTags["[object DataView]"]=typedArrayTags["[object Date]"]=typedArrayTags["[object Error]"]=typedArrayTags["[object Function]"]=typedArrayTags["[object Map]"]=typedArrayTags["[object Number]"]=typedArrayTags["[object Object]"]=typedArrayTags["[object RegExp]"]=typedArrayTags["[object Set]"]=typedArrayTags["[object String]"]=typedArrayTags["[object WeakMap]"]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{return freeProcess&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty,objectProto$5=Object.prototype,nativeKeys=overArg(Object.keys,Object),objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty,eachOfGeneric=doLimit(eachOfLimit,1/0),eachOf=function(e,t,r){(isArrayLike(e)?eachOfArrayLike:eachOfGeneric)(e,wrapAsync$1(t),r)},map=doParallel(_asyncMap),applyEach=applyEach$1(map),mapLimit=doParallelLimit(_asyncMap),mapSeries=doLimit(mapLimit,1),applyEachSeries=applyEach$1(mapSeries),apply$2=rest(function(e,t){return rest(function(r){return e.apply(null,t.concat(r))})}),baseFor=createBaseFor(),auto=function(e,t,r){function n(e,t){m.push(function(){s(e,t)})}function i(){if(0===m.length&&0===f)return r(null,p);for(;m.length&&f<t;){m.shift()()}}function o(e,t){var r=y[e];r||(r=y[e]=[]),r.push(t)}function a(e){arrayEach(y[e]||[],function(e){e()}),i()}function s(e,t){if(!d){var n=onlyOnce(rest(function(t,n){if(f--,n.length<=1&&(n=n[0]),t){var i={};baseForOwn(p,function(e,t){i[t]=e}),i[e]=n,d=!0,y=Object.create(null),r(t,i)}else p[e]=n,a(e)}));f++;var i=wrapAsync$1(t[t.length-1]);t.length>1?i(p,n):i(n)}}function c(t){var r=[];return baseForOwn(e,function(e,n){isArray(e)&&baseIndexOf(e,t,0)>=0&&r.push(n)}),r}"function"==typeof t&&(r=t,t=null),r=once(r||noop);var l=keys(e),u=l.length;if(!u)return r(null);t||(t=u);var p={},f=0,d=!1,y=Object.create(null),m=[],h=[],g={};baseForOwn(e,function(t,r){if(!isArray(t))return n(r,[t]),void h.push(r);var i=t.slice(0,t.length-1),a=i.length;if(0===a)return n(r,t),void h.push(r);g[r]=a,arrayEach(i,function(s){if(!e[s])throw new Error("async.auto task `"+r+"` has a non-existent dependency `"+s+"` in "+i.join(", "));o(s,function(){0===--a&&n(r,t)})})}),function(){for(var e,t=0;h.length;)e=h.pop(),t++,arrayEach(c(e),function(e){0==--g[e]&&h.push(e)});if(t!==u)throw new Error("async.auto cannot execute tasks due to a recursive dependency")}(),i()},symbolTag="[object Symbol]",INFINITY=1/0,symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolToString=symbolProto?symbolProto.toString:void 0,rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange="\\u20d0-\\u20f0",rsVarRange="\\ufe0e\\ufe0f",rsZWJ="\\u200d",reHasUnicode=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$1="\\u0300-\\u036f\\ufe20-\\ufe23",rsComboSymbolsRange$1="\\u20d0-\\u20f0",rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="[\\ud800-\\udfff]",rsCombo="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^\\ud800-\\udfff]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod="(?:"+rsCombo+"|"+rsFitz+")?",rsOptVar="[\\ufe0e\\ufe0f]?",rsOptJoin="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rsRegional,rsSurrPair].join("|")+")[\\ufe0e\\ufe0f]?"+reOptMod+")*",rsSeq="[\\ufe0e\\ufe0f]?"+reOptMod+rsOptJoin,rsSymbol="(?:"+["[^\\ud800-\\udfff]"+rsCombo+"?",rsCombo,rsRegional,rsSurrPair,"[\\ud800-\\udfff]"].join("|")+")",reUnicode=RegExp(rsFitz+"(?="+rsFitz+")|"+rsSymbol+rsSeq,"g"),reTrim=/^\s+|\s+$/g,FN_ARGS=/^(?:async\s+)?(function)?\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/(=.+)?(\s*)$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,hasSetImmediate="function"==typeof setImmediate&&setImmediate,hasNextTick="object"==typeof process&&"function"==typeof process.nextTick,_defer;_defer=hasSetImmediate?setImmediate:hasNextTick?process.nextTick:fallback;var setImmediate$1=wrap(_defer);DLL.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},DLL.prototype.empty=DLL,DLL.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},DLL.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},DLL.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):setInitial(this,e)},DLL.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):setInitial(this,e)},DLL.prototype.shift=function(){return this.head&&this.removeLink(this.head)},DLL.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)};var eachOfSeries=doLimit(eachOfLimit,1),seq$1=rest(function(e){var t=arrayMap(e,wrapAsync$1);return rest(function(e){var r=this,n=e[e.length-1];"function"==typeof n?e.pop():n=noop,reduce(t,e,function(e,t,n){t.apply(r,e.concat(rest(function(e,t){n(e,t)})))},function(e,t){n.apply(r,[e].concat(t))})})}),compose=rest(function(e){return seq$1.apply(null,e.reverse())}),concat=doParallel(concat$1),concatSeries=doSeries(concat$1),constant=rest(function(e){var t=[null].concat(e);return initialParams(function(e,r){return r.apply(this,t)})}),detect=doParallel(_createTester(identity,_findGetResult)),detectLimit=doParallelLimit(_createTester(identity,_findGetResult)),detectSeries=doLimit(detectLimit,1),dir=consoleFunc("dir"),eachSeries=doLimit(eachLimit$1,1),every=doParallel(_createTester(notId,notId)),everyLimit=doParallelLimit(_createTester(notId,notId)),everySeries=doLimit(everyLimit,1),filter=doParallel(_filter),filterLimit=doParallelLimit(_filter),filterSeries=doLimit(filterLimit,1),groupByLimit=function(e,t,r,n){n=n||noop;var i=wrapAsync$1(r);mapLimit(e,t,function(e,t){i(e,function(r,n){return r?t(r):t(null,{key:n,val:e})})},function(e,t){for(var r={},i=Object.prototype.hasOwnProperty,o=0;o<t.length;o++)if(t[o]){var a=t[o].key,s=t[o].val;i.call(r,a)?r[a].push(s):r[a]=[s]}return n(e,r)})},groupBy=doLimit(groupByLimit,1/0),groupBySeries=doLimit(groupByLimit,1),log=consoleFunc("log"),mapValues=doLimit(mapValuesLimit,1/0),mapValuesSeries=doLimit(mapValuesLimit,1),_defer$1;_defer$1=hasNextTick?process.nextTick:hasSetImmediate?setImmediate:fallback;var nextTick=wrap(_defer$1),queue$1=function(e,t){var r=wrapAsync$1(e);return queue(function(e,t){r(e[0],t)},t,1)},priorityQueue=function(e,t){var r=queue$1(e,t);return r.push=function(e,t,n){if(null==n&&(n=noop),"function"!=typeof n)throw new Error("task callback must be a function");if(r.started=!0,isArray(e)||(e=[e]),0===e.length)return setImmediate$1(function(){r.drain()});t=t||0;for(var i=r._tasks.head;i&&t>=i.priority;)i=i.next;for(var o=0,a=e.length;o<a;o++){var s={data:e[o],priority:t,callback:n};i?r._tasks.insertBefore(i,s):r._tasks.push(s)}setImmediate$1(r.process)},delete r.unshift,r},slice=Array.prototype.slice,reject=doParallel(reject$1),rejectLimit=doParallelLimit(reject$1),rejectSeries=doLimit(rejectLimit,1),retryable=function(e,t){t||(t=e,e=null);var r=wrapAsync$1(t);return initialParams(function(t,n){function i(e){r.apply(null,t.concat(e))}e?retry(e,i,n):retry(i,n)})},some=doParallel(_createTester(Boolean,identity)),someLimit=doParallelLimit(_createTester(Boolean,identity)),someSeries=doLimit(someLimit,1),nativeCeil=Math.ceil,nativeMax$1=Math.max,times=doLimit(timeLimit,1/0),timesSeries=doLimit(timeLimit,1),waterfall=function(e,t){function r(i){if(n===e.length)return t.apply(null,[null].concat(i));var o=onlyOnce(rest(function(e,n){if(e)return t.apply(null,[e].concat(n));r(n)}));i.push(o),wrapAsync$1(e[n++]).apply(null,i)}if(t=once(t||noop),!isArray(e))return t(new Error("First argument to waterfall must be an array of functions"));if(!e.length)return t();var n=0;r([])},index={applyEach:applyEach,applyEachSeries:applyEachSeries,apply:apply$2,asyncify:asyncify,auto:auto,autoInject:autoInject,cargo:cargo,compose:compose,concat:concat,concatSeries:concatSeries,constant:constant,detect:detect,detectLimit:detectLimit,detectSeries:detectSeries,dir:dir,doDuring:doDuring,doUntil:doUntil,doWhilst:doWhilst,during:during,each:eachLimit,eachLimit:eachLimit$1,eachOf:eachOf,eachOfLimit:eachOfLimit,eachOfSeries:eachOfSeries,eachSeries:eachSeries,ensureAsync:ensureAsync,every:every,everyLimit:everyLimit,everySeries:everySeries,filter:filter,filterLimit:filterLimit,filterSeries:filterSeries,forever:forever,groupBy:groupBy,groupByLimit:groupByLimit,groupBySeries:groupBySeries,log:log,map:map,mapLimit:mapLimit,mapSeries:mapSeries,mapValues:mapValues,mapValuesLimit:mapValuesLimit,mapValuesSeries:mapValuesSeries,memoize:memoize,nextTick:nextTick,parallel:parallelLimit,parallelLimit:parallelLimit$1,priorityQueue:priorityQueue,queue:queue$1,race:race,reduce:reduce,reduceRight:reduceRight,reflect:reflect,reflectAll:reflectAll,reject:reject,rejectLimit:rejectLimit,rejectSeries:rejectSeries,retry:retry,retryable:retryable,seq:seq$1,series:series,setImmediate:setImmediate$1,some:some,someLimit:someLimit,someSeries:someSeries,sortBy:sortBy,timeout:timeout,times:times,timesLimit:timeLimit,timesSeries:timesSeries,transform:transform,unmemoize:unmemoize,until:until,waterfall:waterfall,whilst:whilst,all:every,any:some,forEach:eachLimit,forEachSeries:eachSeries,forEachLimit:eachLimit$1,forEachOf:eachOf,forEachOfSeries:eachOfSeries,forEachOfLimit:eachOfLimit,inject:reduce,foldl:reduce,foldr:reduceRight,select:filter,selectLimit:filterLimit,selectSeries:filterSeries,wrapSync:asyncify};exports.default=index,exports.applyEach=applyEach,exports.applyEachSeries=applyEachSeries,exports.apply=apply$2,exports.asyncify=asyncify,exports.auto=auto,exports.autoInject=autoInject,exports.cargo=cargo,exports.compose=compose,exports.concat=concat,exports.concatSeries=concatSeries,exports.constant=constant,exports.detect=detect,exports.detectLimit=detectLimit,exports.detectSeries=detectSeries,exports.dir=dir,exports.doDuring=doDuring,exports.doUntil=doUntil,exports.doWhilst=doWhilst,exports.during=during,exports.each=eachLimit,exports.eachLimit=eachLimit$1,exports.eachOf=eachOf,exports.eachOfLimit=eachOfLimit,exports.eachOfSeries=eachOfSeries,exports.eachSeries=eachSeries,exports.ensureAsync=ensureAsync,exports.every=every,exports.everyLimit=everyLimit,exports.everySeries=everySeries,exports.filter=filter,exports.filterLimit=filterLimit,exports.filterSeries=filterSeries,exports.forever=forever,exports.groupBy=groupBy,exports.groupByLimit=groupByLimit,exports.groupBySeries=groupBySeries,exports.log=log,exports.map=map,exports.mapLimit=mapLimit,exports.mapSeries=mapSeries,exports.mapValues=mapValues,exports.mapValuesLimit=mapValuesLimit,exports.mapValuesSeries=mapValuesSeries,exports.memoize=memoize,exports.nextTick=nextTick,exports.parallel=parallelLimit,exports.parallelLimit=parallelLimit$1,exports.priorityQueue=priorityQueue,exports.queue=queue$1,exports.race=race,exports.reduce=reduce,exports.reduceRight=reduceRight,exports.reflect=reflect,exports.reflectAll=reflectAll,exports.reject=reject,exports.rejectLimit=rejectLimit,exports.rejectSeries=rejectSeries,exports.retry=retry,exports.retryable=retryable,exports.seq=seq$1,exports.series=series,exports.setImmediate=setImmediate$1,exports.some=some,exports.someLimit=someLimit,exports.someSeries=someSeries,exports.sortBy=sortBy,exports.timeout=timeout,exports.times=times,exports.timesLimit=timeLimit,exports.timesSeries=timesSeries,exports.transform=transform,
exports.unmemoize=unmemoize,exports.until=until,exports.waterfall=waterfall,exports.whilst=whilst,exports.all=every,exports.allLimit=everyLimit,exports.allSeries=everySeries,exports.any=some,exports.anyLimit=someLimit,exports.anySeries=someSeries,exports.find=detect,exports.findLimit=detectLimit,exports.findSeries=detectSeries,exports.forEach=eachLimit,exports.forEachSeries=eachSeries,exports.forEachLimit=eachLimit$1,exports.forEachOf=eachOf,exports.forEachOfSeries=eachOfSeries,exports.forEachOfLimit=eachOfLimit,exports.inject=reduce,exports.foldl=reduce,exports.foldr=reduceRight,exports.select=filter,exports.selectLimit=filterLimit,exports.selectSeries=filterSeries,exports.wrapSync=asyncify,Object.defineProperty(exports,"__esModule",{value:!0})})}).call(this,require("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:2}],2:[function(e,t,r){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){h&&y&&(h=!1,y.length?m=y.concat(m):g=-1,m.length&&c())}function c(){if(!h){var e=o(s);h=!0;for(var t=m.length;t;){for(y=m,m=[];++g<t;)y&&y[g].run();g=-1,t=m.length}y=null,h=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var p,f,d=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(e){f=i}}();var y,m=[],h=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];m.push(new l(e,t)),1!==m.length||h||o(c)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],3:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={buttons:"<?pipButtons",name:"<pipName",type:"<?pipType",error:"<pipError"},i=(function(){function e(){}}(),function(){function e(e){"ngInject";var t=this;e.$watch("error",function(e){t.error=e})}return e.$inject=["$scope"],e}()),o={controller:i,bindings:n,templateUrl:"file_fail/FileFail.html"};angular.module("pipFiles.FailUpload",[]).component("pipFailUpload",o)},{}],4:[function(e,t,r){var n={localFile:"<pipLocalFile",change:"<pipChange"},i=function(){function e(e){"ngInject";var t=this;e.$watch("$ctrl.localFile",function(e){t.change&&t.change(t.localFile)})}return e.$inject=["$scope"],e.prototype.onUploadButtonClick=function(){$("#inp_file").click()},e.prototype.onDeleteButtonClick=function(){this.localFile=null,document.getElementById("inp_form").reset()},e}(),o={restrict:"E",replace:!0,bindings:n,controller:i,templateUrl:"file_select/FileSelect.html"};angular.module("pipFiles.Select",[]).component("pipFileSelect",o)},{}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={buttons:"<?pipButtons",name:"<pipName",type:"<?pipType",progress:"<?pipProgress"},i=(function(){function e(){}}(),function(){function e(){this.progress=0}return e.prototype.$onChanges=function(e){e.progress&&(this.progress=e.progress.currentValue)},e}()),o={controller:i,bindings:n,templateUrl:"file_start/FileStart.html"};angular.module("pipFiles.StartUpload",[]).component("pipStartUpload",o)},{}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={buttons:"=?pipButtons",name:"=pipName",type:"=?pipType"},i=function(){function e(){this.type="file"}return e.prototype.$onChanges=function(e){},e}(),o={restrict:"E",replace:!0,controller:i,controllerAs:"vm",bindings:n,templateUrl:"file_success/FileSuccess.html"};angular.module("pipFiles.SuccessUpload",[]).component("pipSuccesUpload",o)},{}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(function(){function e(){}}(),{buttonFunction:"<?pipButtonFunctions",buttons:"<?pipButtons",error:"<?pipError",name:"<pipName",state:"<pipState",type:"<?pipType",progress:"<pipProgress"}),i=(function(){function e(){}}(),function(){function e(e){this.error=null}return e.prototype.$onInit=function(){var e=this;this.buttons&&(this.uploadButtons=[],this.failButtons=[{title:"Cancel",click:function(){e.onCancel()}},{title:"Retry",click:function(){e.onRetry()}}],this.startButtons=[{title:"Abort",click:function(){e.onAbort()}}])},e.prototype.$onChanges=function(e){e.state&&(this.state=e.state.currentValue),e.progress&&(this.progress=e.progress.currentValue),e.error&&(this.error=e.error.currentValue)},e.prototype.onCancel=function(){this.buttonFunction.cancel&&this.buttonFunction.cancel()},e.prototype.onRetry=function(){this.buttonFunction.retry&&this.buttonFunction.retry()},e.prototype.onAbort=function(){this.buttonFunction.abort&&this.buttonFunction.abort()},e}()),o={controller:i,bindings:n,templateUrl:"file_upload/FileUpload.html"};angular.module("pipFiles.FileUpload",[]).component("pipFileUpload",o)},{}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),e("./service/FileUploadService"),e("./service/MultiuploadResult"),e("./model/FileModel"),e("./file_success/FileSuccess"),e("./file_upload/FileUpload"),e("./file_start/FileStart"),e("./file_fail/FileFail"),e("./file_select/FileSelect"),angular.module("pipFiles",["pipFiles.Templates","pipFiles.Service","pipFiles.Model","pipFiles.SuccessUpload","pipFiles.FileUpload","pipFiles.StartUpload","pipFiles.FailUpload","pipFiles.Select"])},{"./file_fail/FileFail":3,"./file_select/FileSelect":4,"./file_start/FileStart":5,"./file_success/FileSuccess":6,"./file_upload/FileUpload":7,"./model/FileModel":9,"./service/FileUploadService":10,"./service/MultiuploadResult":12}],9:[function(e,t,r){function n(e,t,r,n){var i=n(r.fileModel),o=i.assign;t.bind("change",function(){e.$apply(function(){o(e,t[0].files[0])})})}function i(e){"ngInject";return{restrict:"A",link:function(t,r,i){n(t,r,i,e)}}}i.$inject=["$parse"],angular.module("pipFiles.Model",[]).directive("fileModel",i)},{}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("./FileUploadState"),i=e("async"),o=function(){function e(e,t){"ngInject";this.$http=e,this.$q=t}return e.$inject=["$http","$q"],e.prototype.multiUpload=function(e,t,r,o,a,s,c,l){var u=this,p=this.$q.defer();s&&s(p);var f=[];l=l||"id",i.eachOf(t,function(t,i,a){if(!t.file)return f.push({index:i,data:null,error:null,id:t[l]}),void a();var s=new FormData;s.append("file",t.file),o(i,n.FileUploadState.Uploading,0),u.$http.post(e,s,{timeout:p.promise,uploadEventHandlers:{progress:function(e){e.lengthComputable&&o(i,n.FileUploadState.Uploading,e.loaded/e.total*100)}},headers:{"Content-Type":void 0,"Access-Control-Allow-Origin":"*"}}).then(function(e){f.push({index:i,data:e.data,error:null,id:t[l]}),o(i,n.FileUploadState.Completed,100),r(i,e.data,null),a()},function(e){f.push({index:i,data:null,error:e.data,id:t[l]}),o(i,n.FileUploadState.Failed,0),r(i,null,e.data),c?a(e.data):a()})},function(e,t){p=null,a(e,t,f)})},e.prototype.upload=function(e,t,r,i){var o=new FormData;o.append("file",e),i&&i(n.FileUploadState.Uploading,0),this.$http.post(t,o,{uploadEventHandlers:{progress:function(e){e.lengthComputable&&i&&i(n.FileUploadState.Uploading,e.loaded/e.total*100)}},headers:{"Content-Type":void 0}}).success(function(e){i&&i(n.FileUploadState.Completed,100),r&&r(e,null)}).error(function(e){i&&i(n.FileUploadState.Failed,0),r&&r(null,e.Error||e)})},e}();angular.module("pipFiles.Service",[]).service("pipFileUpload",o)},{"./FileUploadState":11,async:1}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});!function(e){e[e.Uploading=0]="Uploading",e[e.Completed=1]="Completed",e[e.Failed=2]="Failed"}(r.FileUploadState||(r.FileUploadState={}))},{}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(){}return e}();r.MultiuploadResult=n},{}],13:[function(e,t,r){!function(e){try{e=angular.module("pipFiles.Templates")}catch(t){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("file_fail/FileFail.html",'<div class="pip-files pip-progress-files"><div class="pip-body pip-scroll pip-progress-body"><div class="layout-row"><div class="pip-progress-icon color-badge-bg"><md-icon md-svg-icon="icons:cross"></md-icon></div><div class="pip-progress-content"><h3 class="pip-title">Uploading {{$ctrl.type}} failed with errors!</h3><div class="color-secondary-text pip-subtitle">{{$ctrl.name}}</div><div class="color-error pip-error">{{$ctrl.error}}</div></div></div></div><div class="pip-footer layout-row layout-align-end-center" ng-if="$ctrl.buttons && $ctrl.buttons.length > 0"><div><md-button class="md-accent" ng-repeat="fail in $ctrl.buttons" ng-click="fail.click()">{{::fail.title}}</md-button></div></div></div>')}])}(),function(e){try{e=angular.module("pipFiles.Templates")}catch(t){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("file_select/FileSelect.html",'<div class="pip-file-select"><form id="inp_form" class="pip-hidden-form"><input type="file" file-model="$ctrl.localFile" id="inp_file" ng-model="$ctrl.localFile"></form><md-button class="md-raised md-accent pip-button" ng-click="$ctrl.onUploadButtonClick()" ng-if="!$ctrl.localFile">Choose File</md-button><div ng-if="$ctrl.localFile.name" class="pip-file layout-row layout-align-start-center"><md-icon md-svg-icon="icons:document" class="pip-icon"></md-icon><div class="flex"><div class="text-body2 text-overflow">{{$ctrl.localFile.name}}</div><div ng-if="$ctrl.localFile.size" class="color-secondary-text">{{$ctrl.localFile.size}}</div></div><md-button ng-click="$ctrl.onDeleteButtonClick()" class="md-icon-button"><md-icon md-svg-icon="icons:cross-circle"></md-icon></md-button></div></div>')}])}(),function(e){try{e=angular.module("pipFiles.Templates")}catch(t){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("file_start/FileStart.html",'<div class="pip-files pip-progress-files"><div class="pip-body pip-scroll pip-progress-body"><div class="layout-row"><div class="pip-progress-icon bb-orange"><md-icon md-svg-icon="icons:play"></md-icon></div><div class="pip-progress-content"><h3 class="pip-title">Uploading {{::$ctrl.type}}</h3><div class="color-secondary-text pip-subtitle">{{$ctrl.name}}</div><div><md-progress-linear md-mode="determinate" class="md-accent" value="{{$ctrl.progress}}" ng-if="$ctrl.progress < 100"></md-progress-linear><md-progress-linear md-mode="indeterminate" class="md-accent" ng-if="$ctrl.progress == 100"></md-progress-linear></div></div></div></div><div class="pip-footer layout-row layout-align-end-center" ng-if="$ctrl.buttons"><div><md-button class="md-accent" ng-repeat="start in $ctrl.buttons" ng-click="start.click()">{{start.title}}</md-button></div></div></div>')}])}(),function(e){try{e=angular.module("pipFiles.Templates")}catch(t){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("file_success/FileSuccess.html",'<div class="pip-files pip-progress-files"><div class="pip-body pip-scroll pip-progress-body"><div class="layout-row"><div class="pip-progress-icon bb-green"><md-icon md-svg-icon="icons:check"></md-icon></div><div class="pip-progress-content"><h3 class="pip-title">Uploaded {{::vm.type}} successfully!</h3><div class="color-secondary-text pip-subtitle">{{vm.name}}</div></div></div></div><div class="pip-footer layout-row layout-align-end-center" ng-if="vm.buttons && vm.buttons.length > 0"><div><md-button class="md-accent" ng-repeat="start in vm.buttons" ng-click="start.click()">{{start.title}}</md-button></div></div></div>')}])}(),function(e){try{e=angular.module("pipFiles.Templates")}catch(t){e=angular.module("pipFiles.Templates",[])}e.run(["$templateCache",function(e){e.put("file_upload/FileUpload.html",'<div><pip-succes-upload ng-if="$ctrl.state == 1 && (!$ctrl.buttons || $ctrl.uploadButtons)" pip-name="$ctrl.name" pip-type="$ctrl.type" pip-buttons="$ctrl.buttons"></pip-succes-upload><pip-fail-upload ng-if="$ctrl.state == 2" pip-name="$ctrl.name" pip-type="$ctrl.type" pip-error="$ctrl.error" pip-buttons="$ctrl.failButtons"></pip-fail-upload><pip-start-upload ng-if="$ctrl.state == 0" pip-name="$ctrl.name" pip-type="$ctrl.type" pip-progress="$ctrl.progress" pip-buttons="$ctrl.startButtons"></pip-start-upload></div>')}])}()},{}]},{},[13,8])(13)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).dashboard=t()}}(function(){return function t(e,i,o){function n(r,s){if(!i[r]){if(!e[r]){var a="function"==typeof require&&require;if(!s&&a)return a(r,!0);if(l)return l(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var c=i[r]={exports:{}};e[r][0].call(c.exports,function(t){var i=e[r][1][t];return n(i||t)},c,c.exports,t,e,i,o)}return i[r].exports}for(var l="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t}();i.AddTileDialog=o;var n=function(){function t(t,e,i,o){this.activeGroupIndex=e,this.$mdDialog=o,this.totalTiles=0,this.activeGroupIndex=_.isNumber(e)?e:-1,this.defaultTiles=_.cloneDeep(i),this.groups=_.map(t,function(t){return t.title})}return t.prototype.$onInit=function(){},t.prototype.add=function(){this.$mdDialog.hide({groupIndex:this.activeGroupIndex,widgets:this.defaultTiles})},t.prototype.cancel=function(){this.$mdDialog.cancel()},t.prototype.encrease=function(t,e){this.defaultTiles[t][e].amount++,this.totalTiles++},t.prototype.decrease=function(t,e){var i=this.defaultTiles[t][e];i.amount=i.amount?i.amount-1:0,this.totalTiles=this.totalTiles?this.totalTiles-1:0},t}();i.AddTileDialogController=n},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./AddTileDialogController"),n=function(t){var e=t.has("pipTranslateProvider")?t.get("pipTranslateProvider"):null;e&&(e.setTranslations("en",{DASHBOARD_ADD_TILE_DIALOG_TITLE:"Add component",DASHBOARD_ADD_TILE_DIALOG_USE_HOT_KEYS:'Use "Enter" or "+" buttons on keyboard to encrease and "Delete" or "-" to decrease tiles amount',DASHBOARD_ADD_TILE_DIALOG_CREATE_NEW_GROUP:"Create new group"}),e.setTranslations("ru",{DASHBOARD_ADD_TILE_DIALOG_TITLE:"Добавить компонент",DASHBOARD_ADD_TILE_DIALOG_USE_HOT_KEYS:'Используйте "Enter" или "+" клавиши на клавиатуре чтобы увеличить и "Delete" or "-" чтобы уменшить количество тайлов',DASHBOARD_ADD_TILE_DIALOG_CREATE_NEW_GROUP:"Создать новую группу"}))};n.$inject=["$injector"];var l=function(){function t(t,e){this.widgetList=t,this.$mdDialog=e}return t.prototype.show=function(t,e){var i=this;return this.$mdDialog.show({templateUrl:"add_tile_dialog/AddTile.html",bindToController:!0,controller:o.AddTileDialogController,controllerAs:"dialogCtrl",clickOutsideToClose:!0,resolve:{groups:function(){return t},activeGroupIndex:function(){return e},widgetList:function(){return i.widgetList}}})},t}(),r=function(){function t(){this._widgetList=null,this.configWidgetList=function(t){this._widgetList=t}}return t.prototype.$get=["$mdDialog",function(t){"ngInject";return null==this._service&&(this._service=new l(this._widgetList,t)),this._service}],t}();angular.module("pipAddDashboardTileDialog").config(n).provider("pipAddTileDialog",r)},{"./AddTileDialogController":1}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipAddDashboardTileDialog",["ngMaterial"]),t("./AddTileDialogController"),t("./AddTileProvider")},{"./AddTileDialogController":1,"./AddTileProvider":2}],4:[function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("../menu_tile/MenuTileService"),l=function(t){function e(e){var i=t.call(this)||this;return i.pipTileConfigDialogService=e,i.options&&(i.menu=i.options.menu?_.union(i.menu,i.options.menu):i.menu,i.menu.push({title:"Configurate",click:function(){i.onConfigClick()}}),i.options.date=i.options.date||new Date,i.color=i.options.color||"blue"),i}return o(e,t),e.prototype.onConfigClick=function(){var t=this;this.pipTileConfigDialogService.show({dialogClass:"pip-calendar-config",locals:{color:this.color,size:this.options.size,date:this.options.date},extensionUrl:"calendar_tile/ConfigDialogExtension.html"},function(e){t.changeSize(e.size),t.color=e.color,t.options.color=e.color,t.options.date=e.date})},e}(n.MenuTileService),r={bindings:{options:"=pipOptions"},controller:l,templateUrl:"calendar_tile/CalendarTile.html"};angular.module("pipDashboard").component("pipCalendarTile",r)},{"../menu_tile/MenuTileService":17}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t}();i.DashboardTile=o},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t}();o.all=["purple","green","gray","orange","blue"];var n=function(){function t(){}return t}();n.all=[{name:"DASHBOARD_TILE_CONFIG_DIALOG_SIZE_SMALL",id:"11"},{name:"DASHBOARD_TILE_CONFIG_DIALOG_SIZE_WIDE",id:"21"},{name:"DASHBOARD_TILE_CONFIG_DIALOG_SIZE_LARGE",id:"22"}];var l=function(){function t(t,e,i){"ngInject";var l=this;this.params=t,this.extensionUrl=e,this.$mdDialog=i,this.colors=o.all,this.sizes=n.all,this.sizeId=n.all[0].id,angular.extend(this,this.params),this.sizeId=""+this.params.size.colSpan+this.params.size.rowSpan,this.onCancel=function(){l.$mdDialog.cancel()}}return t.$inject=["params","extensionUrl","$mdDialog"],t.prototype.onApply=function(t){this.size.sizeX=Number(this.sizeId.substr(0,1)),this.size.sizeY=Number(this.sizeId.substr(1,1)),this.$mdDialog.hide(t)},t}();i.TileConfigDialogController=l},{}],7:[function(t,e,i){var o={pipExtensionUrl:"<",pipDialogScope:"<",pipApply:"&"},n=(function(){function t(){}}(),function(){function t(t,e,i,o,n){this.$templateRequest=t,this.$compile=e,this.$scope=i,this.$element=o,this.$attrs=n}return t.prototype.$onChanges=function(t){var e=this;t.pipDialogScope&&(delete t.pipDialogScope.currentValue.$scope,angular.extend(this,t.pipDialogScope.currentValue)),t.pipExtensionUrl&&t.pipExtensionUrl.currentValue&&this.$templateRequest(t.pipExtensionUrl.currentValue,!1).then(function(t){e.$element.find("pip-extension-point").replaceWith(e.$compile(t)(e.$scope))})},t.prototype.onApply=function(){this.pipApply({updatedData:this})},t}()),l={templateUrl:"config_tile_dialog/ConfigDialogExtendComponent.html",controller:n,bindings:o};angular.module("pipConfigDashboardTileDialog").component("pipTileConfigExtendComponent",l)},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./ConfigDialogController"),n=function(t){var e=t.has("pipTranslateProvider")?t.get("pipTranslateProvider"):null;e&&(e.setTranslations("en",{DASHBOARD_TILE_CONFIG_DIALOG_TITLE:"Edit tile",DASHBOARD_TILE_CONFIG_DIALOG_SIZE_SMALL:"Small",DASHBOARD_TILE_CONFIG_DIALOG_SIZE_WIDE:"Wide",DASHBOARD_TILE_CONFIG_DIALOG_SIZE_LARGE:"Large"}),e.setTranslations("ru",{DASHBOARD_TILE_CONFIG_DIALOG_TITLE:"Изменить виджет",DASHBOARD_TILE_CONFIG_DIALOG_SIZE_SMALL:"Мален.",DASHBOARD_TILE_CONFIG_DIALOG_SIZE_WIDE:"Широкий",DASHBOARD_TILE_CONFIG_DIALOG_SIZE_LARGE:"Большой"}))};n.$inject=["$injector"];var l=function(){function t(t){this.$mdDialog=t}return t.$inject=["$mdDialog"],t.prototype.show=function(t,e,i){this.$mdDialog.show({targetEvent:t.event,templateUrl:t.templateUrl||"dialogs/tile_config/ConfigDialog.html",controller:o.TileConfigDialogController,bindToController:!0,controllerAs:"vm",locals:{extensionUrl:t.extensionUrl,params:t.locals},clickOutsideToClose:!0}).then(function(t){e&&e(t)},function(){i&&i()})},t}();angular.module("pipConfigDashboardTileDialog").config(n).service("pipTileConfigDialogService",l)},{"./ConfigDialogController":6}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipConfigDashboardTileDialog",["ngMaterial"]),t("./ConfigDialogController"),t("./ConfigDialogService"),t("./ConfigDialogExtendComponent")},{"./ConfigDialogController":6,"./ConfigDialogExtendComponent":7,"./ConfigDialogService":8}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(t){var e=t.has("pipTranslateProvider")?t.get("pipTranslateProvider"):null;e&&(e.setTranslations("en",{DROP_TO_CREATE_NEW_GROUP:"Drop here to create new group"}),e.setTranslations("ru",{DROP_TO_CREATE_NEW_GROUP:"Перетащите сюда для создания новой группы"}))};o.$inject=["$injector"];var n=function(t){t.configWidgetList([[{title:"Event",icon:"document",name:"event",amount:0},{title:"Position",icon:"location",name:"position",amount:0}],[{title:"Calendar",icon:"date",name:"calendar",amount:0},{title:"Sticky Notes",icon:"note-take",name:"notes",amount:0},{title:"Statistics",icon:"tr-statistics",name:"statistics",amount:0}]])};n.$inject=["pipAddTileDialogProvider"];var l=(function(){function t(){}}(),{tileWidth:150,tileHeight:150,gutter:10,inline:!1}),r=function(){function t(t,e,i,o,n,r,s,a){var p=this;this.$rootScope=e,this.$attrs=i,this.$element=o,this.$timeout=n,this.$interpolate=r,this.pipAddTileDialog=s,this.pipTileTemplate=a,this.defaultGroupMenuActions=[{title:"Add Component",callback:function(t){p.addComponent(t)}},{title:"Remove",callback:function(t){p.removeGroup(t)}},{title:"Configurate",callback:function(t){console.log("configurate group with index:",t)}}],this._includeTpl='<pip-{{ type }}-tile group="groupIndex" index="index"pip-options="$parent.$ctrl.groupedWidgets[groupIndex][\'source\'][index].opts"></pip-{{ type }}-tile>',this.groupMenuActions=this.defaultGroupMenuActions,this.removeGroup=function(t){console.log("removeGroup",t),p.groupedWidgets.splice(t,1)},o.addClass("pip-scroll"),this.draggableGridOptions=this.gridOptions||l,!0===this.draggableGridOptions.inline&&o.addClass("inline-grid"),this.groupAdditionalActions&&angular.extend(this.groupMenuActions,this.groupAdditionalActions),this.widgetsContext=t,this.compileWidgets(),this.$timeout(function(){p.$element.addClass("visible")},700)}return t.prototype.compileWidgets=function(){var t=this;_.each(this.groupedWidgets,function(e,i){e.removedWidgets=e.removedWidgets||[],e.source=e.source.map(function(e,o){return e.size=e.size||{colSpan:1,rowSpan:1},e.index=o,e.groupIndex=i,e.menu=e.menu||{},angular.extend(e.menu,[{title:"Remove",click:function(e,i,o){t.removeWidget(e,i,o)}}]),{opts:e,template:t.pipTileTemplate.getTemplate(e,t._includeTpl)}})})},t.prototype.addComponent=function(t){var e=this;this.pipAddTileDialog.show(this.groupedWidgets,t).then(function(t){var i;t&&(i=-1!==t.groupIndex?e.groupedWidgets[t.groupIndex]:{title:"New group",source:[]},e.addWidgets(i.source,t.widgets),-1===t.groupIndex&&e.groupedWidgets.push(i),e.compileWidgets())})},t.prototype.addWidgets=function(t,e){e.forEach(function(e){e.forEach(function(e){e.amount&&Array.apply(null,Array(e.amount)).forEach(function(){t.push({type:e.name})})})})},t.prototype.removeWidget=function(t,e,i){var o=this;this.groupedWidgets[e.options.groupIndex].removedWidgets=[],this.groupedWidgets[e.options.groupIndex].removedWidgets.push(e.options.index),this.groupedWidgets[e.options.groupIndex].source.splice(e.options.index,1),this.$timeout(function(){o.groupedWidgets[e.options.groupIndex].removedWidgets=[]})},t}(),s={bindings:{gridOptions:"=pipGridOptions",groupAdditionalActions:"=pipGroupActions",groupedWidgets:"=pipGroups"},controller:r,templateUrl:"dashboard/Dashboard.html"};angular.module("pipDashboard").config(n).config(o).component("pipDashboard",s)},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./DraggableTileService"),n=t("../tile_group/TileGroupService");i.DEFAULT_TILE_WIDTH=150,i.DEFAULT_TILE_HEIGHT=150,i.UPDATE_GROUPS_EVENT="pipUpdateDashboardGroupsConfig";var l={tileWidth:i.DEFAULT_TILE_WIDTH,tileHeight:i.DEFAULT_TILE_HEIGHT,gutter:20,container:"pip-draggable-grid:first-of-type",activeDropzoneClass:"dropzone-active",groupContaninerSelector:".pip-draggable-group:not(.fict-group)"},r=function(){function t(t,e,i,n,r,s,a,p){var c=this;this.$scope=t,this.$rootScope=e,this.$compile=i,this.$timeout=n,this.$element=r,this.sourceDropZoneElem=null,this.isSameDropzone=!0,this.tileGroups=null,this.opts=_.merge({mobileBreakpoint:p.breakpoints.xs},l,this.options),this.groups=this.tilesTemplates.map(function(t,e){return{title:t.title,editingName:!1,index:e,source:t.source.map(function(t){var e=c.createTileScope(t);return o.IDragTileConstructor(o.DragTileService,{tpl:i(t.template)(e),options:t.opts,size:t.opts.size})})}}),t.$watch("$ctrl.tilesTemplates",function(t){c.watch(t)},!0),this.initialize(),$(window).on("resize",_.debounce(function(){c.availableWidth=c.getContainerWidth(),c.availableColumns=c.getAvailableColumns(c.availableWidth),c.tileGroups.forEach(function(t){t.setAvailableColumns(c.availableColumns).generateGrid(c.getSingleTileWidthForMobile(c.availableWidth)).setTilesDimensions().calcContainerHeight()})},50))}return t.prototype.$postLink=function(){this.$container=this.$element},t.prototype.watch=function(t){var e=this,i=this.groups,o=null;if(t.length>i.length)return void this.addGroup(t[t.length-1]);if(t.length<i.length)return void this.removeGroups(t);for(var n=0;n<t.length;n++){var l=i[n].source.length-t[n].source.length;if(l||t[n].removedWidgets&&t[n].removedWidgets.length>0){if(o=n,l<0){var r=t[o].source.slice(l);_.each(r,function(t){console.log("tile",t)}),this.addTilesIntoGroup(r,this.tileGroups[o],this.groupsContainers[o]),this.$timeout(function(){e.updateTilesGroups()})}else this.removeTiles(this.tileGroups[o],t[o].removedWidgets,this.groupsContainers[o]),this.updateTilesOptions(t),this.$timeout(function(){e.updateTilesGroups()});return}}t&&this.tileGroups&&(this.updateTilesOptions(t),this.$timeout(function(){e.updateTilesGroups()}))},t.prototype.onTitleClick=function(t,e){t.editingName||(t.oldTitle=_.clone(t.title),t.editingName=!0,this.$timeout(function(){$(e.currentTarget.children[0]).focus()}))},t.prototype.cancelEditing=function(t){t.title=t.oldTitle},t.prototype.onBlurTitleInput=function(t){var e=this;this.$timeout(function(){t.editingName=!1,e.$rootScope.$broadcast(i.UPDATE_GROUPS_EVENT,e.groups),e.tilesTemplates[t.index].title=t.title},100)},t.prototype.onKyepressTitleInput=function(t,e){13===e.keyCode&&this.onBlurTitleInput(t)},t.prototype.updateTilesTemplates=function(t,e){switch(t){case"addGroup":this.groups.length!==this.tilesTemplates.length&&this.tilesTemplates.push(e);break;case"moveTile":var i={fromIndex:e.from.elem.attributes["data-group-id"].value,toIndex:e.to.elem.attributes["data-group-id"].value,tileOptions:e.tile.opts.options,fromTileIndex:e.tile.opts.options.index},o=i.fromIndex,n=i.toIndex,l=i.tileOptions,r=i.fromTileIndex;this.tilesTemplates[o].source.splice(r,1),this.tilesTemplates[n].source.push({opts:l}),this.reIndexTiles(e.from.elem),this.reIndexTiles(e.to.elem)}},t.prototype.createTileScope=function(t){var e=this.$rootScope.$new(!1,this.tilesContext);return e.index=void 0==t.opts.index?t.opts.options.index:t.opts.index,e.groupIndex=void 0==t.opts.groupIndex?t.opts.options.groupIndex:t.opts.groupIndex,e},t.prototype.removeTiles=function(t,e,i){var o=$(i).find(".pip-draggable-tile");_.each(e,function(e){t.tiles.splice(e,1),o[e].remove()}),this.reIndexTiles(i)},t.prototype.reIndexTiles=function(t,e){var i=$(t).find(".pip-draggable-tile"),o=void 0===e?t.attributes["data-group-id"].value:e;_.each(i,function(t,e){var i=$(t).children()[0];angular.element(i).scope().index=e,angular.element(i).scope().groupIndex=o})},t.prototype.removeGroups=function(t){var e=this,i=[],o=[],n=[];_.each(this.groups,function(e,n){_.findIndex(t,function(t){return t.title===e.title})<0?i.push(n):o.push(n)}),_.each(i.reverse(),function(t){e.groups.splice(t,1),e.tileGroups.splice(t,1)}),_.each(o,function(t){n.push(e.groupsContainers[t])}),this.groupsContainers=n,_.each(this.groupsContainers,function(t,i){e.reIndexTiles(t,i)})},t.prototype.addGroup=function(t){var e=this,i={title:t.title,source:t.source.map(function(t){var i=e.createTileScope(t);return o.IDragTileConstructor(o.DragTileService,{tpl:e.$compile(t.template)(i),options:t.opts,size:t.opts.size})})};this.groups.push(i),this.$scope.$$phase||this.$scope.$apply(),this.$timeout(function(){e.groupsContainers=document.querySelectorAll(e.opts.groupContaninerSelector),e.tileGroups.push(n.ITilesGridConstructor(n.TilesGridService,i.source,e.opts,e.availableColumns,e.groupsContainers[e.groupsContainers.length-1]).generateGrid(e.getSingleTileWidthForMobile(e.availableWidth)).setTilesDimensions().calcContainerHeight())}),this.updateTilesTemplates("addGroup",t)},t.prototype.addTilesIntoGroup=function(t,e,i){var n=this;t.forEach(function(t){var l=n.createTileScope(t),r=o.IDragTileConstructor(o.DragTileService,{tpl:n.$compile(t.template)(l),options:t.opts,size:t.opts.size});e.addTile(r),$("<div>").addClass("pip-draggable-tile").append(r.getCompiledTemplate()).appendTo(i)})},t.prototype.updateTilesOptions=function(t){var e=this;t.forEach(function(t){t.source.forEach(function(t){e.tileGroups.forEach(function(e){e.updateTileOptions(t.opts)})})})},t.prototype.initTilesGroups=function(t,e,i){var o=this;return t.map(function(t,l){return n.ITilesGridConstructor(n.TilesGridService,t.source,e,o.availableColumns,i[l]).generateGrid(o.getSingleTileWidthForMobile(o.availableWidth)).setTilesDimensions().calcContainerHeight()})},t.prototype.updateTilesGroups=function(t,e){var i=this;this.tileGroups.forEach(function(o){t||o.generateGrid(i.getSingleTileWidthForMobile(i.availableWidth)),o.setTilesDimensions(t,e).calcContainerHeight()})},t.prototype.getContainerWidth=function(){return(this.$container||$("body")).width()},t.prototype.getAvailableColumns=function(t){return this.opts.mobileBreakpoint>t?2:Math.floor(t/(this.opts.tileWidth+this.opts.gutter))},t.prototype.getActiveGroupAndTile=function(t){var e={};return this.tileGroups.forEach(function(i){var o=i.getTileByNode(t);if(o)return e.group=i,void(e.tile=o)}),e},t.prototype.getSingleTileWidthForMobile=function(t){return this.opts.mobileBreakpoint>t?t/2-this.opts.gutter:null},t.prototype.onDragStartListener=function(t){var e=this.getActiveGroupAndTile(t.target);this.container=$(t.target).parent(".pip-draggable-group").get(0),this.draggedTile=e.tile,this.activeDraggedGroup=e.group,this.$element.addClass("drag-transfer"),this.draggedTile.startDrag()},t.prototype.onDragMoveListener=function(t){var e=this,i=t.target,o=(parseFloat(i.style.left)||0)+t.dx,n=(parseFloat(i.style.top)||0)+t.dy;this.containerOffset=this.getContainerOffset(),i.style.left=o+"px",i.style.top=n+"px";var l=this.activeDraggedGroup.getTileByCoordinates({left:t.pageX-this.containerOffset.left,top:t.pageY-this.containerOffset.top},this.draggedTile);if(l){if(this.activeDraggedGroup.getTileIndex(this.draggedTile)+1===this.activeDraggedGroup.getTileIndex(l))return;this.activeDraggedGroup.swapTiles(this.draggedTile,l).setTilesDimensions(!0,this.draggedTile),this.$timeout(function(){e.setGroupContainersHeight()},0)}},t.prototype.onDragEndListener=function(){this.draggedTile.stopDrag(this.isSameDropzone),this.$element.removeClass("drag-transfer"),this.activeDraggedGroup=null,this.draggedTile=null},t.prototype.getContainerOffset=function(){var t=this.container.getBoundingClientRect();return{left:t.left,top:t.top}},t.prototype.setGroupContainersHeight=function(){this.tileGroups.forEach(function(t){t.calcContainerHeight()})},t.prototype.moveTile=function(t,e,i){var o,n=t.removeTile(i),l=this.createTileScope(i);$(this.groupsContainers[_.findIndex(this.tileGroups,t)]).find(n.getElem()).remove(),null!==e&&(e.addTile(n),o=this.$compile(n.getElem())(l),$(this.groupsContainers[_.findIndex(this.tileGroups,e)]).append(o),this.$timeout(e.setTilesDimensions.bind(e,!0))),this.updateTilesTemplates("moveTile",{from:t,to:e,tile:n})},t.prototype.onDropListener=function(t){var e=t.target.attributes["data-group-id"].value,i=this.tileGroups[e];this.activeDraggedGroup!==i&&this.moveTile(this.activeDraggedGroup,i,this.draggedTile),this.updateTilesGroups(!0),this.sourceDropZoneElem=null},t.prototype.onDropToFictGroupListener=function(t){var e=this,i=this.activeDraggedGroup,o=this.draggedTile;this.addGroup({title:"New group",source:[]}),this.$timeout(function(){e.moveTile(i,e.tileGroups[e.tileGroups.length-1],o),e.updateTilesGroups(!0)}),this.sourceDropZoneElem=null},t.prototype.onDropEnterListener=function(t){this.sourceDropZoneElem||(this.sourceDropZoneElem=t.dragEvent.dragEnter),this.sourceDropZoneElem!==t.dragEvent.dragEnter?(t.dragEvent.dragEnter.classList.add("dropzone-active"),$("body").css("cursor","copy"),this.isSameDropzone=!1):($("body").css("cursor",""),this.isSameDropzone=!0)},t.prototype.onDropDeactivateListener=function(t){this.sourceDropZoneElem!==t.target&&(t.target.classList.remove(this.opts.activeDropzoneClass),$("body").css("cursor",""))},t.prototype.onDropLeaveListener=function(t){t.target.classList.remove(this.opts.activeDropzoneClass)},t.prototype.initialize=function(){var t=this;this.$timeout(function(){t.availableWidth=t.getContainerWidth(),t.availableColumns=t.getAvailableColumns(t.availableWidth),t.groupsContainers=document.querySelectorAll(t.opts.groupContaninerSelector),t.tileGroups=t.initTilesGroups(t.groups,t.opts,t.groupsContainers),interact(".pip-draggable-tile").draggable({autoScroll:{enabled:!0,container:$("#content").get(0),speed:500},onstart:function(e){t.onDragStartListener(e)},onmove:function(e){t.onDragMoveListener(e)},onend:function(e){t.onDragEndListener()}}),interact(".pip-draggable-group.fict-group").dropzone({ondrop:function(e){t.onDropToFictGroupListener(e)},ondragenter:function(e){t.onDropEnterListener(e)},ondropdeactivate:function(e){t.onDropDeactivateListener(e)},ondragleave:function(e){t.onDropLeaveListener(e)}}),interact(".pip-draggable-group").dropzone({ondrop:function(e){t.onDropListener(e)},ondragenter:function(e){t.onDropEnterListener(e)},ondropdeactivate:function(e){t.onDropDeactivateListener(e)},ondragleave:function(e){t.onDropLeaveListener(e)}}),t.$container.on("mousedown touchstart","md-menu .md-icon-button",function(){interact(".pip-draggable-tile").draggable(!1),$(t).trigger("click")}).on("mouseup touchend",function(){interact(".pip-draggable-tile").draggable(!0)})},0)},t}(),s={bindings:{tilesTemplates:"=pipTilesTemplates",tilesContext:"=pipTilesContext",options:"=pipDraggableGrid",groupMenuActions:"=pipGroupMenuActions"},templateUrl:"draggable/Draggable.html",controller:r};angular.module("pipDraggableTiles").component("pipDraggableGrid",s)},{"../tile_group/TileGroupService":24,"./DraggableTileService":12}],12:[function(t,e,i){"use strict";function o(t,e){return new t(e)}Object.defineProperty(i,"__esModule",{value:!0}),i.IDragTileConstructor=o;var n={colSpan:1,rowSpan:1},l=function(){function t(t){this.tpl=t.tpl.get(0),this.opts=t,this.size=_.merge({},n,t.size),this.elem=null}return t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(t,e){return this.size.width=t,this.size.height=e,this.elem&&this.elem.css({width:t,height:e}),this},t.prototype.setPosition=function(t,e){return this.size.left=t,this.size.top=e,this.elem&&this.elem.css({left:t,top:e}),this},t.prototype.getCompiledTemplate=function(){return this.tpl},t.prototype.updateElem=function(t){return this.elem=$(this.tpl).parent(t),this},t.prototype.getElem=function(){return this.elem.get(0)},t.prototype.startDrag=function(){return this.preview=$("<div>").addClass("pip-dragged-preview").css({position:"absolute",left:this.elem.css("left"),top:this.elem.css("top"),width:this.elem.css("width"),height:this.elem.css("height")}),this.elem.addClass("no-animation").css({zIndex:"9999"}).after(this.preview),this},t.prototype.stopDrag=function(t){function e(){i.preview&&(i.preview.remove(),i.preview=null),i.elem.css("zIndex","").off("transitionend",e)}var i=this;return t?this.elem.removeClass("no-animation").css({left:this.preview.css("left"),top:this.preview.css("top")}).on("transitionend",e):(i.elem.css({left:i.preview.css("left"),top:i.preview.css("top"),zIndex:""}).removeClass("no-animation"),i.preview.remove(),i.preview=null),this},t.prototype.setPreviewPosition=function(t){this.preview.css(t)},t.prototype.getOptions=function(){return this.opts.options},t.prototype.setOptions=function(t){return _.merge(this.opts.options,t),_.merge(this.size,t.size),this},t}();i.DragTileService=l,angular.module("pipDraggableTiles").service("pipDragTile",function(){return function(t){return new l(t)}})},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipDraggableTiles",[]),t("./DraggableTileService"),t("./Draggable")},{"./Draggable":11,"./DraggableTileService":12}],14:[function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("../menu_tile/MenuTileService"),l=function(t){function e(e,i,o,n){var l=t.call(this)||this;return l.$element=i,l.$timeout=o,l.pipTileConfigDialogService=n,l.opacity=.57,l.options&&l.options.menu&&(l.menu=_.union(l.menu,l.options.menu)),l.menu.push({title:"Configurate",click:function(){l.onConfigClick()}}),l.color=l.options.color||"gray",l.opacity=l.options.opacity||l.opacity,l.drawImage(),e.$watch(function(){return i.is(":visible")},function(t){l.drawImage()}),l}return o(e,t),e.prototype.drawImage=function(){var t=this;this.options.image&&this.$timeout(function(){t.onImageLoad(t.$element.find("img"))},500)},e.prototype.onConfigClick=function(){var t=this;this._oldOpacity=_.clone(this.opacity),this.pipTileConfigDialogService.show({dialogClass:"pip-calendar-config",locals:{color:this.color,size:this.options.size||{colSpan:1,rowSpan:1},date:this.options.date,title:this.options.title,text:this.options.text,opacity:this.opacity,onOpacitytest:function(e){t.opacity=e}},extensionUrl:"event_tile/ConfigDialogExtension.html"},function(e){t.changeSize(e.size),t.color=e.color,t.options.color=e.color,t.options.date=e.date,t.options.title=e.title,t.options.text=e.text,t.options.opacity=e.opacity},function(){t.opacity=t._oldOpacity})},e.prototype.onImageLoad=function(t){this.setImageMarginCSS(this.$element.parent(),t)},e.prototype.changeSize=function(t){var e=this;this.options.size.colSpan=t.sizeX,this.options.size.rowSpan=t.sizeY,this.options.image&&this.$timeout(function(){e.setImageMarginCSS(e.$element.parent(),e.$element.find("img"))},500)},e.prototype.setImageMarginCSS=function(t,e){var i=t.width?t.width():t.clientWidth,o=t.height?t.height():t.clientHeight,n=e[0].naturalWidth||e.width,l=e[0].naturalHeight||e.height,r=0,s={};n/i>l/o?(r=-(n/l*o-i)/2,s["margin-left"]=r+"px",s.height=o+"px",s.width=n*o/l+"px",s["margin-top"]=""):(r=-(l/n*i-o)/2,s["margin-top"]=r+"px",s.height=l*i/n+"px",s.width=i+"px",s["margin-left"]=""),e.css(s)},e}(n.MenuTileService),r={bindings:{options:"=pipOptions"},controller:l,templateUrl:"event_tile/EventTile.html"};angular.module("pipDashboard").component("pipEventTile",r)},{"../menu_tile/MenuTileService":17}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./tile_group/index"),t("./draggable"),t("./menu_tile"),t("./add_tile_dialog"),t("./config_tile_dialog"),angular.module("pipDashboard",["pipDraggableTiles","pipDraggableTilesGroup","pipMenuTile","pipConfigDashboardTileDialog","pipAddDashboardTileDialog","pipDashboard.Templates","pipLayout","pipLocations","pipDateTime","pipCharts","pipTranslate","pipControls","pipButtons"]),t("./utility/TileTemplateUtility"),t("./common_tile/Tile"),t("./calendar_tile/CalendarTile"),t("./event_tile/EventTile"),t("./note_tile/NoteTile"),t("./picture_slider_tile/PictureSliderTile"),t("./position_tile/PositionTile"),t("./statistics_tile/StatisticsTile"),t("./dashboard/Dashboard")},{"./add_tile_dialog":3,"./calendar_tile/CalendarTile":4,"./common_tile/Tile":5,"./config_tile_dialog":9,"./dashboard/Dashboard":10,"./draggable":13,"./event_tile/EventTile":14,"./menu_tile":18,"./note_tile/NoteTile":19,"./picture_slider_tile/PictureSliderTile":20,"./position_tile/PositionTile":21,"./statistics_tile/StatisticsTile":22,"./tile_group/index":25,"./utility/TileTemplateUtility":26}],16:[function(t,e,i){var o=function(){return{restrict:"EA",templateUrl:"menu_tile/MenuTile.html"}};angular.module("pipMenuTile").directive("pipTileMenu",o)},{}],17:[function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("../common_tile/Tile"),l=function(t){function e(){"ngInject";var e=t.call(this)||this;return e.menu=[{title:"Change Size",action:angular.noop,submenu:[{title:"1 x 1",action:"changeSize",params:{sizeX:1,sizeY:1}},{title:"2 x 1",action:"changeSize",params:{sizeX:2,sizeY:1}},{title:"2 x 2",action:"changeSize",params:{sizeX:2,sizeY:2}}]}],e}return o(e,t),e.prototype.callAction=function(t,e,i){this[t]&&this[t].call(this,e),i.click&&i.click.call(i,e,this)},e.prototype.changeSize=function(t){this.options.size.colSpan=t.sizeX,this.options.size.rowSpan=t.sizeY},e}(n.DashboardTile);i.MenuTileService=l;var r=function(){function t(){}return t.prototype.$get=function(){"ngInject";return null==this._service&&(this._service=new l),this._service},t}();angular.module("pipMenuTile").provider("pipMenuTile",r)},{"../common_tile/Tile":5}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipMenuTile",[]),t("./MenuTileDirective"),t("./MenuTileService"),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./MenuTileService"))},{"./MenuTileDirective":16,"./MenuTileService":17}],19:[function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("../menu_tile/MenuTileService"),l=function(t){function e(e){var i=t.call(this)||this;return i.pipTileConfigDialogService=e,i.options&&(i.menu=i.options.menu?_.union(i.menu,i.options.menu):i.menu),i.menu.push({title:"Configurate",click:function(){i.onConfigClick()}}),i.color=i.options.color||"orange",i}return o(e,t),e.prototype.onConfigClick=function(){var t=this;this.pipTileConfigDialogService.show({locals:{color:this.color,size:this.options.size,title:this.options.title,text:this.options.text},extensionUrl:"note_tile/ConfigDialogExtension.html"},function(e){t.color=e.color,t.options.color=e.color,t.changeSize(e.size),t.options.text=e.text,t.options.title=e.title})},e}(n.MenuTileService),r={bindings:{options:"=pipOptions"},controller:l,templateUrl:"note_tile/NoteTile.html"};angular.module("pipDashboard").component("pipNoteTile",r)},{"../menu_tile/MenuTileService":17}],20:[function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),
e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("../menu_tile/MenuTileService"),l=function(t){function e(e,i,o,n){var l=t.call(this)||this;return l.$scope=e,l.$element=i,l.$timeout=o,l.pipTileTemplate=n,l.animationType="fading",l.animationInterval=5e3,l.options&&(l.animationType=l.options.animationType||l.animationType,l.animationInterval=l.options.animationInterval||l.animationInterval),l}return o(e,t),e.prototype.onImageLoad=function(t){var e=this;this.$timeout(function(){e.pipTileTemplate.setImageMarginCSS(e.$element.parent(),t.target)})},e.prototype.changeSize=function(t){var e=this;this.options.size.colSpan=t.sizeX,this.options.size.rowSpan=t.sizeY,this.$timeout(function(){_.each(e.$element.find("img"),function(t){e.pipTileTemplate.setImageMarginCSS(e.$element.parent(),t)})},500)},e}(n.MenuTileService),r={bindings:{options:"=pipOptions"},controller:l,templateUrl:"picture_slider_tile/PictureSliderTile.html"};angular.module("pipDashboard").component("pipPictureSliderTile",r)},{"../menu_tile/MenuTileService":17}],21:[function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("../menu_tile/MenuTileService"),l=function(t){function e(e,i,o,n,l){var r=t.call(this)||this;return r.$timeout=i,r.$element=o,r.pipTileConfigDialogService=n,r.pipLocationEditDialog=l,r.showPosition=!0,r.options&&r.options.menu&&(r.menu=_.union(r.menu,r.options.menu)),r.menu.push({title:"Configurate",click:function(){r.onConfigClick()}}),r.menu.push({title:"Change location",click:function(){r.openLocationEditDialog()}}),r.options.location=r.options.location||r.options.position,e.$watch("$ctrl.options.location",function(){r.reDrawPosition()}),e.$watch(function(){return o.is(":visible")},function(t){1==t&&r.reDrawPosition()}),r}return o(e,t),e.prototype.onConfigClick=function(){var t=this;this.pipTileConfigDialogService.show({dialogClass:"pip-position-config",locals:{size:this.options.size,locationName:this.options.locationName,hideColors:!0},extensionUrl:"position_tile/ConfigDialogExtension.html"},function(e){t.changeSize(e.size),t.options.locationName=e.locationName})},e.prototype.changeSize=function(t){this.options.size.colSpan=t.sizeX,this.options.size.rowSpan=t.sizeY,this.reDrawPosition()},e.prototype.openLocationEditDialog=function(){var t=this;this.pipLocationEditDialog.show({locationName:this.options.locationName,locationPos:this.options.location},function(e){e&&(t.options.location=e.location,t.options.locationName=e.locatioName)})},e.prototype.reDrawPosition=function(){var t=this;this.showPosition=!1,this.$timeout(function(){t.showPosition=!0},50)},e}(n.MenuTileService),r={bindings:{options:"=pipOptions"},controller:l,templateUrl:"position_tile/PositionTile.html"};angular.module("pipDashboard").component("pipPositionTile",r)},{"../menu_tile/MenuTileService":17}],22:[function(t,e,i){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}();Object.defineProperty(i,"__esModule",{value:!0});var n=t("../menu_tile/MenuTileService"),l=70,r=function(t){function e(e,i){var o=t.call(this)||this;return o.reset=!1,o.chartSize=l,o._$scope=e,o._$timeout=i,o.options&&(o.menu=o.options.menu?_.union(o.menu,o.options.menu):o.menu),o.setChartSize(),o}return o(e,t),e.prototype.changeSize=function(t){var e=this;this.options.size.colSpan=t.sizeX,this.options.size.rowSpan=t.sizeY,this.reset=!0,this.setChartSize(),this._$timeout(function(){e.reset=!1},500)},e.prototype.setChartSize=function(){this.chartSize=2==this.options.size.colSpan&&2==this.options.size.rowSpan?250:l},e}(n.MenuTileService),s={bindings:{options:"=pipOptions"},controller:r,templateUrl:"statistics_tile/StatisticsTile.html"};angular.module("pipDashboard").component("pipStatisticsTile",s)},{"../menu_tile/MenuTileService":17}],23:[function(t,e,i){function o(t,e,i){function o(t){return $("<div>").addClass("pip-draggable-tile").append(t).get(0)}var n=document.createDocumentFragment();t.$eval(i.pipDraggableTiles).forEach(function(t){var e=o(t.getCompiledTemplate());n.appendChild(e)}),e.append(n)}function n(){return{restrict:"A",link:function(t,e,i){new o(t,e,i)}}}angular.module("pipDraggableTilesGroup").directive("pipDraggableTiles",n)},{}],24:[function(t,e,i){"use strict";function o(t,e,i,o,n){return new t(e,i,o,n)}Object.defineProperty(i,"__esModule",{value:!0}),i.ITilesGridConstructor=o;var n=2,l=function(){function t(t,e,i,o){this.gridCells=[],this.inline=!1,this.tiles=t,this.opts=e,this.columns=i||0,this.elem=o,this.gridCells=[],this.inline=e.inline||!1,this.isMobileLayout=i===n}return t.prototype.addTile=function(t){return this.tiles.push(t),1===this.tiles.length&&this.generateGrid(),this},t.prototype.getCellByPosition=function(t,e){return this.gridCells[t][e]},t.prototype.getCells=function(t,e,i){return this.isMobileLayout?this.getAvailableCellsMobile(t,e,i):this.getAvailableCellsDesktop(t,e,i)},t.prototype.getAvailableCellsDesktop=function(t,e,i){var o,n,l=t&&t.col||0,r=this.getBasicRow(t);if(1===i&&1===e){var s=this.gridCells.slice();if(t){if(!(o=this.getCell(s,r,l,this.columns))){var a=this.isMobileLayout?1:2;o=this.getCell(s,r+a,0,this.columns)}}else o=s[0][0]}if(2===i&&1===e){var p=t&&t.elem.size||null;p?2===p.colSpan&&2===p.rowSpan?this.columns-l-2>0?(o=this.getCellByPosition(r,l+1),n=this.getCellByPosition(r,l+2)):(o=this.getCellByPosition(r+2,0),n=this.getCellByPosition(r+2,1)):2===p.colSpan&&1===p.rowSpan?t.row%2==0?(o=this.getCellByPosition(r+1,l-1),n=this.getCellByPosition(r+1,l)):this.columns-l-3>=0?(o=this.getCellByPosition(r,l+1),n=this.getCellByPosition(r,l+2)):(o=this.getCellByPosition(r+2,0),n=this.getCellByPosition(r+2,1)):1===p.colSpan&&1===p.rowSpan&&(this.columns-l-3>=0?this.isCellFree(r,l+1)?(o=this.getCellByPosition(r,l+1),n=this.getCellByPosition(r,l+2)):(o=this.getCellByPosition(r,l+2),n=this.getCellByPosition(r,l+3)):(o=this.getCellByPosition(r+2,0),n=this.getCellByPosition(r+2,1))):(o=this.getCellByPosition(r,l),n=this.getCellByPosition(r,l+1))}return t||2!==e||2!==i?2===e&&2===i&&(this.columns-l-2>0?this.isCellFree(r,l+1)?(o=this.getCellByPosition(r,l+1),n=this.getCellByPosition(r+1,l+2)):(o=this.getCellByPosition(r,l+2),n=this.getCellByPosition(r+1,l+3)):(o=this.getCellByPosition(r+2,0),n=this.getCellByPosition(r+3,1))):(o=this.getCellByPosition(r,l),n=this.getCellByPosition(r+1,l+1)),{start:o,end:n}},t.prototype.getCell=function(t,e,i,o){var n,l,r;if(this.isMobileLayout){for(l=i;l<o;l++)if(!t[e][l].elem){n=t[e][l];break}return n}for(l=i;l<o;l++){for(r=0;r<2;r++)if(!t[r+e][l].elem){n=t[r+e][l];break}if(n)return n}},t.prototype.getAvailableCellsMobile=function(t,e,i){var o,n,l=this.getBasicRow(t),r=t&&t.col||0;if(1===i&&1===e){var s=this.gridCells.slice();if(t){if(!(o=this.getCell(s,l,r,this.columns))){var a=this.isMobileLayout?1:2;o=this.getCell(s,l+a,0,this.columns)}}else o=s[0][0]}return t?2===i&&(o=this.getCellByPosition(l+1,0),n=this.getCellByPosition(l+e,1)):(o=this.getCellByPosition(l,0),n=this.getCellByPosition(l+e-1,1)),{start:o,end:n}},t.prototype.getBasicRow=function(t){return this.isMobileLayout?t?t&&t.row||0:0:t?t.row%2==0?t.row:t.row-1:0},t.prototype.isCellFree=function(t,e){return!this.gridCells[t][e].elem},t.prototype.getCellIndex=function(t){var e,i=this;return this.gridCells.forEach(function(o,n){e=_.findIndex(i.gridCells[n],function(e){return e===t})}),-1!==e?e:0},t.prototype.reserveCells=function(t,e,i){this.gridCells.forEach(function(o){o.forEach(function(o){o.row>=t.row&&o.row<=e.row&&o.col>=t.col&&o.col<=e.col&&(o.elem=i)})})},t.prototype.clearElements=function(){this.gridCells.forEach(function(t){t.forEach(function(t){t.elem=null})})},t.prototype.setAvailableColumns=function(t){return this.isMobileLayout=t===n,this.columns=t,this},t.prototype.generateGrid=function(t){function e(t){Array.apply(null,Array(t)).forEach(function(){i.columns<l+1&&(r++,l=0,i.gridCells.push(s),s=[]);var t=r*i.opts.tileHeight+(r?r*i.opts.gutter:0)+n.height,e=l*o+(l?l*i.opts.gutter:0);s.push({top:t,left:e,bottom:t+i.opts.tileHeight,right:e+o,row:r,col:l}),l++})}var i=this,o=t||this.opts.tileWidth,n=document.querySelector(".pip-draggable-group-title").getBoundingClientRect(),l=0,r=0,s=[];return this.gridCells=[],this.tiles.forEach(function(t,o,n){e(t.getSize().colSpan),n.length===o+1&&(l<i.columns&&e(i.columns-l),2*i.tiles.length>i.gridCells.length&&Array.apply(null,Array(2*i.tiles.length-i.gridCells.length)).forEach(function(){e(i.columns)}))}),this},t.prototype.setTilesDimensions=function(t,e){var i,o=this,n=0;return t&&o.clearElements(),this.tiles.forEach(function(l){var r,s,a,p,c=l.getSize();if(l.updateElem(".pip-draggable-tile"),1===c.colSpan?(r=i&&2===i.elem.size.colSpan&&1===i.elem.size.rowSpan?o.getCells(o.getCellByPosition(i.row,i.col-1),1,1).start:o.getCells(i,1,1).start,t||(s=r.right-r.left,a=r.bottom-r.top),i=r,o.reserveCells(r,r,l),n++):2===c.colSpan&&(p=o.getCells(i,c.rowSpan,c.colSpan),r=p.start,t||(s=p.end.right-p.start.left,a=p.end.bottom-p.start.top),i=p.end,o.reserveCells(p.start,p.end,l),n+=2),e===l)return void l.setPreviewPosition({left:r.left,top:r.top});t||l.setSize(s,a),l.setPosition(r.left,r.top)}),this},t.prototype.calcContainerHeight=function(){var t,e;return this.tiles.length?(t=_.maxBy(this.tiles,function(t){var e=t.getSize();return e.top+e.height}).getSize(),this.elem.style.height=t.top+t.height+"px",this.inline&&(e=_.maxBy(this.tiles,function(t){var e=t.getSize();return e.left+e.width}).getSize(),this.elem.style.width=e.left+e.width+"px"),this):this},t.prototype.getTileByNode=function(t){var e=this.tiles.filter(function(e){return t===e.getElem()});return e.length?e[0]:null},t.prototype.getTileByCoordinates=function(t,e){return this.tiles.filter(function(i){var o=i.getSize();return i!==e&&o.left<=t.left&&t.left<=o.left+o.width&&o.top<=t.top&&t.top<=o.top+o.height})[0]||null},t.prototype.getTileIndex=function(t){return _.findIndex(this.tiles,t)},t.prototype.swapTiles=function(t,e){var i=_.findIndex(this.tiles,t),o=_.findIndex(this.tiles,e);return this.tiles.splice(i,1),this.tiles.splice(o,0,t),this},t.prototype.removeTile=function(t){var e;return this.tiles.forEach(function(i,o,n){if(i===t)return e=n.splice(o,1)[0],!1}),e},t.prototype.updateTileOptions=function(t){var e=_.findIndex(this.tiles,function(e){return e.getOptions()===t});return-1!==e&&(this.tiles[e].setOptions(t),!0)},t}();i.TilesGridService=l,angular.module("pipDraggableTilesGroup").service("pipTilesGrid",function(){return function(t,e,i,o){return new l(t,e,i,o)}})},{}],25:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipDraggableTilesGroup",[]),t("./TileGroupDirective"),t("./TileGroupService")},{"./TileGroupDirective":23,"./TileGroupService":24}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(t,e,i){this._$interpolate=t,this._$compile=e,this._$templateRequest=i}return t.$inject=["$interpolate","$compile","$templateRequest"],t.prototype.getTemplate=function(t,e,i,o){var n,l=this,r=t.template,s=t.templateUrl,a=t.type;if(a){var p=e?this._$interpolate(e)(t):this._$interpolate(r)(t);return 1==o?i?this._$compile(p)(i):this._$compile(p):p}return r?i?this._$compile(r)(i):this._$compile(r):(s&&this._$templateRequest(s,!1).then(function(t){n=i?l._$compile(t)(i):l._$compile(t)}),n)},t.prototype.setImageMarginCSS=function(t,e){var i=t.width?t.width():t.clientWidth,o=t.height?t.height():t.clientHeight,n=(e[0]?e[0].naturalWidth:e.naturalWidth)||e.width,l=(e[0]?e[0].naturalHeight:e.naturalWidth)||e.height,r=0,s={};n/i>l/o?(r=-(n/l*o-i)/2,s["margin-left"]=r+"px",s.height=o+"px",s.width=n*o/l+"px",s["margin-top"]=""):(r=-(l/n*i-o)/2,s["margin-top"]=r+"px",s.height=l*i/n+"px",s.width=i+"px",s["margin-left"]=""),$(e).css(s)},t}(),n=function(t){return{restrict:"A",link:function(e,i,o){var n=t(o.pipImageLoad);i.bind("load",function(t){n(e,{$event:t})})}}};n.$inject=["$parse"],angular.module("pipDashboard").service("pipTileTemplate",o).directive("pipImageLoad",n)},{}],27:[function(t,e,i){!function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("add_tile_dialog/AddTile.html",'<md-dialog class="pip-dialog pip-add-component-dialog"><md-dialog-content class="layout-column"><div class="theme-divider p16 flex-auto"><h3 class="hide-xs m0 bm16 theme-text-primary" hide-xs="">{{ \'DASHBOARD_ADD_TILE_DIALOG_TITLE\' | translate }}<md-input-container class="layout-row flex-auto m0 tm16"><md-select class="flex-auto m0 theme-text-primary" ng-model="dialogCtrl.activeGroupIndex" placeholder="{{ \'DASHBOARD_ADD_TILE_DIALOG_CREATE_NEW_GROUP\' | translate }}" aria-label="Group"><md-option ng-value="$index" ng-repeat="group in dialogCtrl.groups">{{ group }}</md-option></md-select></md-input-container></h3></div><div class="pip-body pip-scroll p0 flex-auto"><p class="md-body-1 theme-text-secondary m0 lp16 rp16">{{ \'DASHBOARD_ADD_TILE_DIALOG_USE_HOT_KEYS\' | translate }}</p><md-list ng-init="groupIndex = $index" ng-repeat="group in dialogCtrl.defaultWidgets"><md-list-item class="layout-row pip-list-item lp16 rp16" ng-repeat="item in group"><div class="icon-holder flex-none"><md-icon md-svg-icon="icons:{{:: item.icon }}"></md-icon><div class="pip-badge theme-badge md-warn" ng-if="item.amount"><span>{{ item.amount }}</span></div></div><span class="flex-auto lm24 theme-text-primary">{{:: item.title }}</span><md-button class="md-icon-button flex-none" ng-click="dialogCtrl.encrease(groupIndex, $index)" aria-label="Encrease"><md-icon md-svg-icon="icons:plus-circle"></md-icon></md-button><md-button class="md-icon-button flex-none" ng-click="dialogCtrl.decrease(groupIndex, $index)" aria-label="Decrease"><md-icon md-svg-icon="icons:minus-circle"></md-icon></md-button></md-list-item><md-divider class="lm72 tm8 bm8" ng-if="groupIndex !== (dialogCtrl.defaultWidgets.length - 1)"></md-divider></md-list></div></md-dialog-content><md-dialog-actions class="flex-none layout-align-end-center theme-divider divider-top theme-text-primary"><md-button ng-click="dialogCtrl.cancel()" aria-label="Cancel">{{ \'CANCEL\' | translate }}</md-button><md-button ng-click="dialogCtrl.add()" ng-disabled="dialogCtrl.totalWidgets === 0" arial-label="Add">{{ \'ADD\' | translate }}</md-button></md-dialog-actions></md-dialog>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("calendar_tile/CalendarTile.html",'<div class="widget-box pip-calendar-widget {{ $ctrl.color }} layout-column layout-fill tp0" ng-class="{ small: $ctrl.options.size.colSpan == 1 && $ctrl.options.size.rowSpan == 1, medium: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 1, big: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 2 }"><div class="widget-heading layout-row layout-align-end-center flex-none"><pip-tile-menu></pip-tile-menu></div><div class="widget-content flex-auto layout-row layout-align-center-center" ng-if="$ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 1"><span class="date lm24 rm12">{{ $ctrl.options.date.getDate() }}</span><div class="flex-auto layout-column"><span class="weekday md-headline">{{ $ctrl.options.date | formatLongDayOfWeek }}</span> <span class="month-year md-headline">{{ $ctrl.options.date | formatLongMonth }} {{ $ctrl.options.date | formatYear }}</span></div></div><div class="widget-content flex-auto layout-column layout-align-space-around-center" ng-hide="$ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 1"><span class="weekday md-headline" ng-hide="$ctrl.options.size.colSpan == 1 && $ctrl.options.size.rowSpan == 1">{{ $ctrl.options.date | formatLongDayOfWeek }}</span> <span class="weekday" ng-show="$ctrl.options.size.colSpan == 1 && $ctrl.options.size.rowSpan == 1">{{ $ctrl.options.date | formatLongDayOfWeek }}</span> <span class="date lm12 rm12">{{ $ctrl.options.date.getDate() }}</span> <span class="month-year md-headline">{{ $ctrl.options.date | formatLongMonth }} {{ $ctrl.options.date | formatYear }}</span></div></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("calendar_tile/ConfigDialogExtension.html",'<div class="w-stretch bm16">Date:<md-datepicker ng-model="$ctrl.date" class="w-stretch"></md-datepicker></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("config_tile_dialog/ConfigDialog.html",'<md-dialog class="pip-dialog pip-tile-config-dialog {{ vm.params.dialogClass }}" width="400" md-theme="{{vm.theme}}"><pip-tile-config-extend-component class="layout-column" pip-dialog-scope="vm" pip-extension-url="vm.extensionUrl" pip-apply="vm.onApply(updatedData)"></pip-tile-config-extend-component></md-dialog>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("config_tile_dialog/ConfigDialogExtendComponent.html",'<h3 class="tm0 flex-none">{{ \'DASHBOARD_TILE_CONFIG_DIALOG_TITLE\' | translate }}</h3><div class="pip-body pip-scroll p16 bp0 flex-auto"><pip-extension-point></pip-extension-point><pip-toggle-buttons class="bm16" ng-if="!$ctrl.hideSizes" pip-buttons="$ctrl.sizes" ng-model="$ctrl.sizeId"></pip-toggle-buttons><pip-color-picker ng-if="!$ctrl.hideColors" pip-colors="$ctrl.colors" ng-model="$ctrl.color"></pip-color-picker></div><div class="pip-footer flex-none"><div><md-button class="md-accent" ng-click="$ctrl.onCancel()">{{ \'CANCEL\' | translate }}</md-button><md-button class="md-accent" ng-click="$ctrl.onApply()">{{ \'APPLY\' | translate }}</md-button></div></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("dashboard/Dashboard.html",'<md-button class="md-accent md-raised md-fab layout-column layout-align-center-center" aria-label="Add component" ng-click="$ctrl.addComponent()"><md-icon md-svg-icon="icons:plus" class="md-headline centered-add-icon"></md-icon></md-button><div class="pip-draggable-grid-holder"><pip-draggable-grid pip-tiles-templates="$ctrl.groupedWidgets" pip-tiles-context="$ctrl.widgetsContext" pip-draggable-grid="$ctrl.draggableGridOptions" pip-group-menu-actions="$ctrl.groupMenuActions"></pip-draggable-grid><md-progress-circular md-mode="indeterminate" class="progress-ring"></md-progress-circular></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("draggable/Draggable.html",'<div class="pip-draggable-holder"><div class="pip-draggable-group" ng-repeat="group in $ctrl.groups" data-group-id="{{ $index }}" pip-draggable-tiles="group.source"><div class="pip-draggable-group-title layout-row layout-align-start-center"><div class="title-input-container" ng-click="$ctrl.onTitleClick(group, $event)"><input ng-if="group.editingName" ng-blur="$ctrl.onBlurTitleInput(group)" ng-keypress="$ctrl.onKyepressTitleInput(group, $event)" ng-model="group.title"><div class="text-overflow flex-none" ng-if="!group.editingName">{{ group.title }}</div></div><md-button class="md-icon-button flex-none layout-align-center-center" ng-show="group.editingName" ng-click="$ctrl.cancelEditing(group)" aria-label="Cancel"><md-icon md-svg-icon="icons:cross"></md-icon></md-button><md-menu class="flex-none layout-column" md-position-mode="target-right target" ng-show="!group.editingName"><md-button class="md-icon-button flex-none layout-align-center-center" ng-click="$mdOpenMenu(); groupId = $index" aria-label="Menu"><md-icon md-svg-icon="icons:dots"></md-icon></md-button><md-menu-content width="4"><md-menu-item ng-repeat="action in $ctrl.groupMenuActions"><md-button ng-click="action.callback(groupId)">{{ action.title }}</md-button></md-menu-item></md-menu-content></md-menu></div></div><div class="pip-draggable-group fict-group layout-align-center-center layout-column tm16"><div class="fict-group-text-container"><md-icon md-svg-icon="icons:plus"></md-icon>{{ \'DROP_TO_CREATE_NEW_GROUP\' | translate }}</div></div></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("event_tile/ConfigDialogExtension.html",'<div class="w-stretch"><md-input-container class="w-stretch bm0"><label>Title:</label> <input type="text" ng-model="$ctrl.title"></md-input-container>Date:<md-datepicker ng-model="$ctrl.date" class="w-stretch bm8"></md-datepicker><md-input-container class="w-stretch"><label>Description:</label> <textarea type="text" ng-model="$ctrl.text">\n    </textarea></md-input-container>Backdrop\'s opacity:<md-slider aria-label="opacity" type="number" min="0.1" max="0.9" step="0.01" ng-model="$ctrl.opacity" ng-change="$ctrl.onOpacitytest($ctrl.opacity)"></md-slider></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("event_tile/EventTile.html",'<div class="widget-box pip-event-widget {{ $ctrl.color }} layout-column layout-fill" ng-class="{ small: $ctrl.options.size.colSpan == 1 && $ctrl.options.size.rowSpan == 1, medium: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 1, big: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 2 }"><img ng-if="$ctrl.options.image" ng-src="{{$ctrl.options.image}}" alt="{{$ctrl.options.title || $ctrl.options.name}}"><div class="text-backdrop" style="background-color: rgba(0, 0, 0, {{ $ctrl.opacity }})"><div class="widget-heading layout-row layout-align-start-center flex-none"><span class="widget-title flex-auto text-overflow">{{ $ctrl.options.title || $ctrl.options.name }}</span><pip-tile-menu ng-if="!$ctrl.options.hideMenu"></pip-tile-menu></div><div class="text-container flex-auto pip-scroll"><p class="date flex-none" ng-if="$ctrl.options.date">{{ $ctrl.options.date | formatShortDate }}</p><p class="text flex-auto">{{ $ctrl.options.text || $ctrl.options.description }}</p></div></div></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("menu_tile/MenuTile.html",'<md-menu class="widget-menu" md-position-mode="target-right target"><md-button class="md-icon-button flex-none" ng-click="$mdOpenMenu()" aria-label="Menu"><md-icon md-svg-icon="icons:vdots"></md-icon></md-button><md-menu-content width="4"><md-menu-item ng-repeat="item in $ctrl.menu"><md-button ng-if="!item.submenu" ng-click="$ctrl.callAction(item.action, item.params, item)">{{:: item.title }}</md-button><md-menu ng-if="item.submenu"><md-button ng-click="$ctrl.callAction(item.action)">{{:: item.title }}</md-button><md-menu-content><md-menu-item ng-repeat="subitem in item.submenu"><md-button ng-click="$ctrl.callAction(subitem.action, subitem.params, subitem)">{{:: subitem.title }}</md-button></md-menu-item></md-menu-content></md-menu></md-menu-item></md-menu-content></md-menu>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("note_tile/ConfigDialogExtension.html",'<div class="w-stretch"><md-input-container class="w-stretch bm0"><label>Title:</label> <input type="text" ng-model="$ctrl.title"></md-input-container><md-input-container class="w-stretch tm0"><label>Text:</label> <textarea type="text" ng-model="$ctrl.text">\n    </textarea></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("note_tile/NoteTile.html",'<div class="widget-box pip-notes-widget {{ $ctrl.color }} layout-column"><div class="widget-heading layout-row layout-align-start-center flex-none" ng-if="$ctrl.options.title || $ctrl.options.name"><span class="widget-title flex-auto text-overflow">{{ $ctrl.options.title || $ctrl.options.name }}</span></div><pip-tile-menu ng-if="!$ctrl.options.hideMenu"></pip-tile-menu><div class="text-container flex-auto pip-scroll"><p>{{ $ctrl.options.text }}</p></div></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("picture_slider_tile/PictureSliderTile.html",'<div class="widget-box pip-picture-slider-widget {{ $ctrl.color }} layout-column layout-fill" ng-class="{ small: $ctrl.options.size.colSpan == 1 && $ctrl.options.size.rowSpan == 1, medium: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 1, big: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 2 }" index="{{ $ctrl.index }}" group="{{ $ctrl.group }}"><div class="widget-heading lp16 rp8 layout-row layout-align-end-center flex-none"><span class="flex text-overflow">{{ $ctrl.options.title }}</span><pip-tile-menu ng-if="!$ctrl.options.hideMenu"></pip-tile-menu></div><div class="slider-container"><div pip-image-slider="" pip-animation-type="\'fading\'" pip-animation-interval="$ctrl.animationInterval" ng-if="$ctrl.animationType == \'fading\'"><div class="pip-animation-block" ng-repeat="slide in $ctrl.options.slides"><img ng-src="{{ slide.image }}" alt="{{ slide.image }}" pip-image-load="$ctrl.onImageLoad($event)"><p class="slide-text" ng-if="slide.text">{{ slide.text }}</p></div></div><div pip-image-slider="" pip-animation-type="\'carousel\'" pip-animation-interval="$ctrl.animationInterval" ng-if="$ctrl.animationType == \'carousel\'"><div class="pip-animation-block" ng-repeat="slide in $ctrl.options.slides"><img ng-src="{{ slide.image }}" alt="{{ slide.image }}" pip-image-load="$ctrl.onImageLoad($event)"><p class="slide-text" ng-if="slide.text">{{ slide.text }}</p></div></div></div></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("position_tile/ConfigDialogExtension.html",'<div class="w-stretch"><md-input-container class="w-stretch bm0"><label>Location name:</label> <input type="text" ng-model="$ctrl.locationName"></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("position_tile/PositionTile.html",'<div class="pip-position-widget widget-box p0 layout-column layout-fill" ng-class="{ small: $ctrl.options.size.colSpan == 1 && $ctrl.options.size.rowSpan == 1, medium: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 1, big: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 2 }" index="{{ $ctrl.index }}" group="{{ $ctrl.group }}"><div class="position-absolute-right-top" ng-if="!$ctrl.options.locationName"><pip-tile-menu ng-if="!$ctrl.options.hideMenu"></pip-tile-menu></div><div class="widget-heading lp16 rp8 layout-row layout-align-end-center flex-none" ng-if="$ctrl.options.locationName"><span class="flex text-overflow">{{ $ctrl.options.locationName }}</span><pip-tile-menu ng-if="!$ctrl.options.hideMenu"></pip-tile-menu></div><pip-location-map class="flex" ng-if="$ctrl.showPosition" pip-stretch="true" pip-rebind="true" pip-location-pos="$ctrl.options.location"></pip-location-map></div>')}])}(),function(t){try{t=angular.module("pipDashboard.Templates")}catch(e){t=angular.module("pipDashboard.Templates",[])}t.run(["$templateCache",function(t){t.put("statistics_tile/StatisticsTile.html",'<div class="widget-box pip-statistics-widget layout-column layout-fill" ng-class="{ small: $ctrl.options.size.colSpan == 1 && $ctrl.options.size.rowSpan == 1, medium: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 1, big: $ctrl.options.size.colSpan == 2 && $ctrl.options.size.rowSpan == 2 }"><div class="widget-heading layout-row layout-align-start-center flex-none"><span class="widget-title flex-auto text-overflow">{{ $ctrl.options.title || $ctrl.options.name }}</span><pip-tile-menu></pip-tile-menu></div><div class="widget-content flex-auto layout-row layout-align-center-center" ng-if="$ctrl.options.series && !$ctrl.reset"><pip-pie-chart pip-series="$ctrl.options.series" ng-if="!$ctrl.options.chartType || $ctrl.options.chartType == \'pie\'" pip-donut="true" pip-pie-size="$ctrl.chartSize" pip-show-total="true" pip-centered="true"></pip-pie-chart></div></div>')}])}()},{}]},{},[15,27])(27)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).settings=t()}}(function(){return function t(e,i,n){function s(o,r){if(!i[o]){if(!e[o]){var c="function"==typeof require&&require;if(!r&&c)return c(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var p=i[o]={exports:{}};e[o][0].call(p.exports,function(t){var i=e[o][1][t];return s(i||t)},p,p.exports,t,e,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./service"),t("./page"),angular.module("pipSettings",["pipSettings.Service","pipSettings.Page"]),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./service"))},{"./page":4,"./service":11}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("../service/SettingsPageSelectedTab"),s=function(){function t(t,e,i,n,s,a,o,r,c){var l=this;this.$state=t,this.$rootScope=e,this.$injector=n,this.$timeout=s,this.$location=a,this.pipNavService=o,this.pipSettings=r,this.pipMedia=c,this.translateInit(),this.mediaSizeGtSm=this.pipMedia("gt-sm"),this.initTabs(),this.pipMedia("gt-sm")?(this.details=!1,this.$location.search("details","main")):this.details="details"==a.search().details,this.cleanUpSelectFunc=e.$on("$stateChangeSuccess",function(){var t=l.$state.current.name;l.initSelect(t,!1)}),this.cleanUpFunc=e.$on("pipMainResized",function(){l.mediaSizeGtSm!==l.pipMedia("gt-sm")&&(l.mediaSizeGtSm=l.pipMedia("gt-sm"),l.pipMedia("gt-sm")&&(l.details=!1),l.appHeader())}),this.appHeader(),i.$on("$destroy",function(){angular.isFunction(l.cleanUpFunc)&&l.cleanUpFunc(),angular.isFunction(l.cleanUpSelectFunc)&&l.cleanUpSelectFunc()})}return t.$inject=["$state","$rootScope","$scope","$injector","$timeout","$location","pipNavService","pipSettings","pipMedia"],t.prototype.initTabs=function(){var t=this;this.tabs=_.filter(this.pipSettings.getTabs(),function(e){if(!0===e.visible&&(!e.access||e.access(t.$rootScope.$user,e)))return e}),this.tabs=_.sortBy(this.tabs,"index"),this.selected=new n.SettingsPageSelectedTab,"settings"!==this.$state.current.name?this.initSelect(this.$state.current.name):"settings"===this.$state.current.name&&this.pipSettings.getDefaultTab()?this.initSelect(this.pipSettings.getDefaultTab().state):this.$timeout(function(){t.pipSettings.getDefaultTab()&&t.initSelect(t.pipSettings.getDefaultTab().state),!t.pipSettings.getDefaultTab()&&t.tabs.length>0&&t.initSelect(t.tabs[0].state)})},t.prototype.translateInit=function(){this._pipTranslate=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null,this._pipTranslate&&this._pipTranslate.setTranslations&&(this._pipTranslate.setTranslations("en",{PIP_SETTINGS:"Settings",PIP_SETTINGS_DETAILS:"Settings details"}),this._pipTranslate.setTranslations("ru",{PIP_SETTINGS:"Настройки",PIP_SETTINGS_DETAILS:"Подробно"}))},t.prototype.toMainFromDetails=function(){this.$location.search("details","main"),this.details=!1,this.appHeader()},t.prototype.appHeader=function(){var t=this;if(this.pipNavService.breadcrumb.breakpoint="gt-sm",this.pipMedia("gt-sm"))this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="PIP_SETTINGS";else{var e=this.selected&&this.selected.tab?this.selected.tab.title:"PIP_SETTINGS_DETAILS";this.details?(this.pipNavService.icon.showBack(function(){t.toMainFromDetails()}),this.pipNavService.breadcrumb.items=[{title:"PIP_SETTINGS",click:function(){t.toMainFromDetails()}},{title:e,click:function(){},subActions:[]}]):(this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="PIP_SETTINGS")}this.pipNavService.actions.hide(),this.pipNavService.appbar.removeShadow()},t.prototype.initSelect=function(t,e){void 0===e&&(e=!0),this.selected.tab=_.find(this.tabs,function(e){return e.state===t}),this.selected.tabIndex=_.indexOf(this.tabs,this.selected.tab),this.selected.tabId=t,!0===e&&this.$state.go(this.selected.tabId)},t.prototype.onNavigationSelect=function(t){this.initSelect(t),this.pipMedia("gt-sm")||(this.details=!0,this.$location.search("details","details"),this.appHeader())},t}();angular.module("pipSettings.Page").controller("pipSettingsPageController",s)},{"../service/SettingsPageSelectedTab":7}],3:[function(t,e,i){function n(t){t.state("settings",{url:"/settings?user_id&details",auth:!0,controllerAs:"vm",controller:"pipSettingsPageController",templateUrl:"page/SettingsPage.html"})}n.$inject=["$stateProvider"],angular.module("pipSettings.Page").config(n)},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipSettings.Page",["ui.router","pipSettings.Service","pipNav","pipSelected","pipTranslate","pipSettings.Templates"]),t("./SettingsPage"),t("./SettingsPageRoutes")},{"./SettingsPage":2,"./SettingsPageRoutes":3}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.tabs=[],this.titleText="SETTINGS_TITLE",this.titleLogo=null,this.isNavIcon=!0}return t}();i.SettingsConfig=n},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.tabIndex=0}return t}();i.SettingsPageSelectedTab=n},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./SettingsConfig"),s=function(){function t(t){"ngInject";this._config=t}return t.$inject=["config"],t.prototype.getFullStateName=function(t){return"settings."+t},t.prototype.setDefaultTab=function(t){if(!_.find(this._config.tabs,function(e){return e.state==="settings."+t}))throw new Error('Tab with state name "'+t+'" is not registered');this._config.defaultTab=this.getFullStateName(t)},t.prototype.getDefaultTab=function(){var t,e=this;return t=_.find(this._config.tabs,function(t){return t.state===e._config.defaultTab}),_.cloneDeep(t)},t.prototype.showTitleText=function(t){return t&&(this._config.titleText=t,this._config.titleLogo=null),this._config.titleText},t.prototype.showTitleLogo=function(t){return t&&(this._config.titleLogo=t,this._config.titleText=null),this._config.titleLogo},t.prototype.showNavIcon=function(t){return null!==t&&void 0!==t&&(this._config.isNavIcon=!!t),this._config.isNavIcon},t.prototype.getTabs=function(){return _.cloneDeep(this._config.tabs)},t}(),a=function(){function t(t){this.$stateProvider=t,this._config=new n.SettingsConfig}return t.$inject=["$stateProvider"],t.prototype.getFullStateName=function(t){return"settings."+t},t.prototype.getDefaultTab=function(){var t;return t=_.find(this._config.tabs,function(e){return e.state===t.state}),_.cloneDeep(t)},t.prototype.addTab=function(t){if(this.validateTab(t),_.find(this._config.tabs,function(e){return e.state==="settings."+t.state}))throw new Error('Tab with state name "'+t.state+'" is already registered');this._config.tabs.push({state:this.getFullStateName(t.state),title:t.title,icon:t.icon,iconClass:t.iconClass,index:t.index||1e5,access:t.access,visible:!1!==t.visible,stateConfig:_.cloneDeep(t.stateConfig)}),this.$stateProvider.state(this.getFullStateName(t.state),t.stateConfig),void 0===this._config.defaultTab&&1===this._config.tabs.length&&this.setDefaultTab(t.state)},t.prototype.setDefaultTab=function(t){if(!_.find(this._config.tabs,function(e){return e.state==="settings."+t}))throw new Error('Tab with state name "'+t+'" is not registered');this._config.defaultTab=this.getFullStateName(t)},t.prototype.validateTab=function(t){if(!t||!_.isObject(t))throw new Error("Invalid object");if(null===t.state||""===t.state)throw new Error("Tab should have valid Angular UI router state name");if(t.access&&!_.isFunction(t.access))throw new Error('"access" should be a function');if(!t.stateConfig||!_.isObject(t.stateConfig))throw new Error("Invalid state configuration object")},t.prototype.showTitleText=function(t){return t&&(this._config.titleText=t,this._config.titleLogo=null),this._config.titleText},t.prototype.showTitleLogo=function(t){return t&&(this._config.titleLogo=t,this._config.titleText=null),this._config.titleLogo},t.prototype.showNavIcon=function(t){return null!==t&&void 0!==t&&(this._config.isNavIcon=!!t),this._config.isNavIcon},t.prototype.$get=function(){"ngInject";return(_.isNull(this._service)||_.isUndefined(this._service))&&(this._service=new s(this._config)),this._service},t}();angular.module("pipSettings.Service").provider("pipSettings",a)},{"./SettingsConfig":6}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.auth=!1}return t}();i.SettingsStateConfig=n},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.SettingsTab=n},{}],11:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipSettings.Service",[]),t("./SettingsConfig"),t("./SettingsPageSelectedTab"),t("./SettingsStateConfig"),t("./SettingsTab"),t("./SettingsService"),n(t("./SettingsConfig")),n(t("./SettingsPageSelectedTab")),n(t("./SettingsStateConfig")),n(t("./SettingsTab"))},{"./SettingsConfig":6,"./SettingsPageSelectedTab":7,"./SettingsService":8,"./SettingsStateConfig":9,"./SettingsTab":10}],12:[function(t,e,i){!function(t){try{t=angular.module("pipSettings.Templates")}catch(e){t=angular.module("pipSettings.Templates",[])}t.run(["$templateCache",function(t){t.put("page/SettingsPage.html",'<div class="pip-main-menu pip-settings" ng-class="{\'pip-single-content\': vm.details}"><div class="pip-menu"><div class="pip-list-container pip-scroll divider-top"><md-list class="pip-ref-list tp0 pip-settings-list" pip-selected="vm.selected.tabIndex" pip-selected-watch="vm.selected.navId" pip-select="vm.onNavigationSelect($event.id)"><md-list-item class="pip-ref-list-item pointer divider-bottom pip-selectable" ng-repeat="tab in vm.tabs track by tab.state" pip-id="{{:: tab.state }}" md-ink-ripple=""><div ng-click="vm.onNavigationSelect(tab.state)" class="layout-row layout-align-start-center flex"><div class="pip-settings-icon layout-row layout-align-start-center {{ tab.iconClass ? tab.iconClass : \'pip-settings-icon-color\'}}" ng-if="tab.icon"><md-icon class="" md-svg-icon="{{ tab.icon }}"></md-icon></div><div class="pip-content {{ tab.icon ? \'\' : \'pip-settings-without-icon\' }}"><p class="pip-title text-overflow flex">{{ ::tab.title | translate }}</p></div><div class="pip-ref-list-item-end-icon"><md-icon class="" md-svg-icon="icons:chevron-right"></md-icon></div></div></md-list-item></md-list></div></div><div class="pip-content-container"><pip-document><div class="pip-body tp24-flex layout-column flex" ui-view=""></div></pip-document></div></div>')}])}()},{}]},{},[12,1,4,2,3,11,5,6,7,8,9,10])(12)});


!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(t.pip||(t.pip={})).help=e()}}(function(){return function e(t,i,n){function o(l,r){if(!i[l]){if(!t[l]){var s="function"==typeof require&&require;if(!r&&s)return s(l,!0);if(a)return a(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var p=i[l]={exports:{}};t[l][0].call(p.exports,function(e){var i=t[l][1][e];return o(i||e)},p,p.exports,e,t,i,n)}return i[l].exports}for(var a="function"==typeof require&&require,l=0;l<n.length;l++)o(n[l]);return o}({1:[function(e,t,i){function n(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return t?t.translate(e)||e:e}}n.$inject=["$injector"],angular.module("pipHelp.Translate",[]).filter("translate",n)},{}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),e("./service"),e("./page"),angular.module("pipHelp",["pipHelp.Service","pipHelp.Page"]),function(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}(e("./service"))},{"./page":5,"./service":12}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("../service/HelpPageSelectedTab"),o=function(){function e(e,t,i,o,a,l){var r=this;this.$log=e,this.$state=t,this.tabs=_.filter(l.getTabs(),function(e){if(!0===e.visible)return e}),this.tabs=_.sortBy(this.tabs,"index"),this.selected=new n.HelpPageSelectedTab,"help"!==this.$state.current.name?this.initSelect(this.$state.current.name):"help"===this.$state.current.name&&l.getDefaultTab()?this.initSelect(l.getDefaultTab().state):o(function(){l.getDefaultTab()&&r.initSelect(l.getDefaultTab().state),!l.getDefaultTab()&&r.tabs&&r.tabs.length>0&&r.initSelect(r.tabs[0].state)}),a.icon.showMenu(),a.breadcrumb.text="Help",a.actions.hide(),a.appbar.removeShadow(),this.onDropdownSelect=function(e){r.onNavigationSelect(e.state)}}return e.$inject=["$log","$state","$rootScope","$timeout","pipNavService","pipHelp"],e.prototype.initSelect=function(e){this.selected.tab=_.find(this.tabs,function(t){return t.state===e}),this.selected.tabIndex=_.indexOf(this.tabs,this.selected.tab),this.selected.tabId=e,this.$state.go(this.selected.tabId)},e.prototype.onNavigationSelect=function(e){this.initSelect(e),this.selected.tab&&this.$state.go(e)},e}();angular.module("pipHelp.Page").controller("pipHelpPageController",o)},{"../service/HelpPageSelectedTab":7}],4:[function(e,t,i){function n(e){e.state("help",{url:"/help?party_id",auth:!0,controllerAs:"$ctrl",controller:"pipHelpPageController",templateUrl:"page/HelpPage.html"})}n.$inject=["$stateProvider"],angular.module("pipHelp.Page").config(n)},{}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipHelp.Page",["ui.router","pipHelp.Service","pipNav","pipSelected","pipTranslate","pipHelp.Templates"]),e("./HelpPage"),e("./HelpPageRoutes")},{"./HelpPage":3,"./HelpPageRoutes":4}],6:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.tabs=[],this.titleText="SETTINGS_TITLE",this.titleLogo=null,this.isNavIcon=!0}return e}();i.HelpConfig=n},{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e}();i.HelpPageSelectedTab=n},{}],8:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("./HelpConfig"),o=function(){function e(e){"ngInject";this._config=e}return e.$inject=["_config"],e.prototype.getFullStateName=function(e){return"help."+e},e.prototype.setDefaultTab=function(e){if(!_.find(this._config.tabs,function(t){return t.state==="help."+e}))throw new Error('Tab with state name "'+e+'" is not registered');this._config.defaultTab=this.getFullStateName(e)},e.prototype.getDefaultTab=function(){var e,t=this;return e=_.find(this._config.tabs,function(e){return e.state===t._config.defaultTab}),_.cloneDeep(e)},e.prototype.showTitleText=function(e){return e&&(this._config.titleText=e,this._config.titleLogo=null),this._config.titleText},e.prototype.showTitleLogo=function(e){return e&&(this._config.titleLogo=e,this._config.titleText=null),this._config.titleLogo},e.prototype.showNavIcon=function(e){return null!==e&&void 0!==e&&(this._config.isNavIcon=!!e),this._config.isNavIcon},e.prototype.getTabs=function(){return _.cloneDeep(this._config.tabs)},e}(),a=function(){function e(e){this.$stateProvider=e,this._config=new n.HelpConfig}return e.$inject=["$stateProvider"],e.prototype.getFullStateName=function(e){return"help."+e},e.prototype.getDefaultTab=function(){var e,t=this;return e=_.find(this._config.tabs,function(e){return e.state===t._config.defaultTab}),_.cloneDeep(e)},e.prototype.addTab=function(e){if(this.validateTab(e),_.find(this._config.tabs,function(t){return t.state==="help."+e.state}))throw new Error('Tab with state name "'+e.state+'" is already registered');this._config.tabs.push({state:this.getFullStateName(e.state),title:e.title,index:e.index||1e5,access:e.access,visible:!1!==e.visible,stateConfig:_.cloneDeep(e.stateConfig)}),this.$stateProvider.state(this.getFullStateName(e.state),e.stateConfig),_.isUndefined(this._config.defaultTab),1===this._config.tabs.length&&this.setDefaultTab(e.state)},e.prototype.setDefaultTab=function(e){if(!_.find(this._config.tabs,function(t){return t.state==="help."+e}))throw new Error('Tab with state name "'+e+'" is not registered');this._config.defaultTab=this.getFullStateName(e)},e.prototype.validateTab=function(e){if(!e||!_.isObject(e))throw new Error("Invalid object");if(null===e.state||""===e.state)throw new Error("Tab should have valid Angular UI router state name");if(e.access&&!_.isFunction(e.access))throw new Error('"access" should be a function');if(!e.stateConfig||!_.isObject(e.stateConfig))throw new Error("Invalid state configuration object")},e.prototype.showTitleText=function(e){return e&&(this._config.titleText=e,this._config.titleLogo=null),this._config.titleText},e.prototype.showTitleLogo=function(e){return e&&(this._config.titleLogo=e,this._config.titleText=null),this._config.titleLogo},e.prototype.showNavIcon=function(e){return _.isNull(e)||_.isUndefined(e)||(this._config.isNavIcon=!!e),this._config.isNavIcon},e.prototype.$get=function(){"ngInject";return(_.isNull(this._service)||_.isUndefined(this._service))&&(this._service=new o(this._config)),this._service},e}();angular.module("pipHelp.Service").provider("pipHelp",a)},{"./HelpConfig":6}],9:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.auth=!1}return e}();i.HelpStateConfig=n},{}],10:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e}();i.HelpTab=n},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],12:[function(e,t,i){"use strict";function n(e){for(var t in e)i.hasOwnProperty(t)||(i[t]=e[t])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipHelp.Service",[]),e("./HelpConfig"),e("./HelpPageSelectedTab"),e("./HelpTab"),e("./HelpStateConfig"),e("./HelpService"),n(e("./HelpConfig")),n(e("./HelpPageSelectedTab")),n(e("./HelpTab")),n(e("./HelpStateConfig"))},{"./HelpConfig":6,"./HelpPageSelectedTab":7,"./HelpService":8,"./HelpStateConfig":9,"./HelpTab":10}],13:[function(e,t,i){!function(e){try{e=angular.module("pipHelp.Templates")}catch(t){e=angular.module("pipHelp.Templates",[])}e.run(["$templateCache",function(e){e.put("page/HelpPage.html",'<md-toolbar class="pip-appbar-ext"></md-toolbar><pip-document width="800" min-height="400" class="pip-help"><div class="pip-menu-container" ng-hide="$ctrl.manager === false || !$ctrl.tabs || $ctrl.tabs.length < 1"><md-list class="pip-menu pip-simple-list" pip-selected="$ctrl.selected.tabIndex" pip-selected-watch="$ctrl.selected.navId" pip-select="$ctrl.onNavigationSelect($event.id)"><md-list-item class="pip-simple-list-item pip-selectable flex" ng-repeat="tab in $ctrl.tabs track by tab.state" md-ink-ripple="" pip-id="{{:: tab.state }}"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class="pip-content-container"><pip-dropdown pip-actions="$ctrl.tabs" pip-dropdown-select="$ctrl.onDropdownSelect" pip-active-index="$ctrl.selected.tabIndex"></pip-dropdown><div class="pip-body p0 layout-column" ui-view=""></div></div></div><div class="layout-column layout-align-center-center flex" ng-show="$ctrl.manager === false || !$ctrl.tabs || $ctrl.tabs.length < 1">{{::\'ERROR_400\' | translate}}</div></pip-document>')}])}()},{}]},{},[13,1,2,3,4,5,6,7,8,9,10,11,12])(13)});


//# sourceMappingURL=pip-webui.min.js.map
