!function(){"use strict";angular.module("pipServices",["pipScope","pipTranslate","pipRouting","pipTimer","pipSession","pipIdentity","pipSystemInfo","pipFormat","pipScroll","pipPageReset","pipTags"])}();var pip;!function(t){var e;!function(e){"use strict";function n(e){"ngInject";e.$on("$stateChangeSuccess",function(e,n,r,i,o){t.routing.CurrentState={name:n.name,url:n.url,params:r},t.routing.PreviousState={name:i.name,url:i.url,params:o}})}function r(e,n){"ngInject";function r(){n.history.back()}function i(r){if(null!=t.routing.PreviousState&&null!=t.routing.PreviousState.name){var i=_.cloneDeep(t.routing.PreviousState);i.params=_.extend(i.params,r),e.go(i.name,i.params)}else n.history.back()}return e.goBack=r,e.goBackAndSelect=i,e}function i(t){t.decorator("$state",r)}n.$inject=["$rootScope"],r.$inject=["$delegate","$window"],i.$inject=["$provide"],angular.module("pipRouting.Back",[]).config(i).run(n)}(e=t.routing||(t.routing={}))}(pip||(pip={}));var pip;!function(t){var e;!function(e){"use strict";function n(e){"ngInject";function n(e,n){return t.routing.RedirectedStates[e]=n,this}return e.redirect=n,e}function r(t){"ngInject";t.decorator("$state",n)}function i(e,n){"ngInject";function r(r,i,o){var s=t.routing.RedirectedStates[i.name];if(_.isFunction(s)&&(s=s(i.name,o),_.isNull(s)))throw new Error("Redirected toState cannot be null");return!!s&&(n(function(){r.preventDefault(),e.transitionTo(s,o,{location:"replace"})}),!0)}return e.redirect=r,e}function o(t){"ngInject";t.decorator("$state",i)}n.$inject=["$delegate"],r.$inject=["$provide"],i.$inject=["$delegate","$timeout"],o.$inject=["$provide"],e.RedirectedStates={},angular.module("pipRouting.Redirect",["ui.router"]).config(r).config(o)}(e=t.routing||(t.routing={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";angular.module("pipRouting",["ui.router","pipRouting.Events","pipRouting.Back","pipRouting.Redirect"])}(e=t.routing||(t.routing={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";function e(e,n,r){"ngInject";n.$on("$stateChangeStart",function(e,r,i,o,s){n[t.RoutingVar]=!0}),n.$on("$stateChangeSuccess",function(e,r,i,o,s){n[t.RoutingVar]=!1}),n.$on("$stateChangeError",function(r,i,o,s,a,u){n[t.RoutingVar]=!1,e.error("Error while switching route to "+i.name),e.error(u),console.error("Error while switching route to "+i.name),console.error(u)}),n.$on("$stateNotFound",function(e,i,o,s){e.preventDefault(),n[t.RoutingVar]=!1,r.go("errors_missing_route",{unfoundState:i,fromState:{to:o?o.name:"",fromParams:s}})})}e.$inject=["$log","$rootScope","$state"],t.RoutingVar="$routing",angular.module("pipRouting.Events",[]).run(e)}(e=t.routing||(t.routing={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";angular.module("pipScope",["pipTranslate","pipScope.Error","pipScope.Transaction"]),angular.module("pipTransactions",["pipScope"])}(e=t.scope||(t.scope={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";var e=angular.module("pipScope.Error",[]);e.factory("pipError",["$rootScope",function(t){function e(e){t.errors[e]={message:void 0,code:void 0,details:void 0}}function n(t){if(_.isNull(t))return null;if(t.message)return t.message;if(t.data){if(t.data.code)return"ERROR_"+t.data.code;if(t.data.message)return t.data.message}return t.statusText?t.statusText:t.status?"ERROR_"+t.status:t.data?t.data:t}function r(t){return _.isNull(t)?null:t.data&&t.data.code?t.data.code:t.status?t.status:null}function i(t){return t&&t.data?t.data:t}function o(o,s){o=o||"global";var a={reset:function(){e(o)},empty:function(){var e=t.errors[o];return _.isNull(e)||_.isNull(e.message)&&_.isNull(e.code)},get:function(){return t.errors[o]?t.errors[o]:""},message:function(){return t.errors[o]?t.errors[o].message:null},code:function(){return t.errors[o]?t.errors[o].code:null},details:function(){return t.errors[o]?t.errors[o].details:null},set:function(s){s?(t.errors[o]={message:n(s),code:r(s),details:i(s)},console.error(t.errors[o])):e(o)}};return _.isObject(s)&&(s.error=a),a}return t.errors={},o}])}(e=t.scope||(t.scope={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";var e=angular.module("pipScope.Transaction",["pipTranslate"]);e.run(["$injector",function(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;e&&(e.setTranslations("en",{ENTERING:"Entering...",PROCESSING:"Processing...",LOADING:"Loading...",SAVING:"Saving..."}),e.setTranslations("ru",{ENTERING:"Вход в систему...",PROCESSING:"Обрабатывается...",LOADING:"Загружается...",SAVING:"Сохраняется..."}))}]),e.factory("pipTransaction",["$rootScope","pipError",function(t,e){function n(e){t.transactions[e]={id:void 0,operation:void 0}}function r(r,i){r=r||"global";var o=e(r),s={error:o,reset:function(){n(""),o.reset()},busy:function(){var e=t.transactions[r];return null!=e&&e.id},failed:function(){return!o.empty()},aborted:function(e){var n=t.transactions[r];return _.isNull(n)||n.id!=e},get:function(){return _.isNull(t.transactions[r])&&n(r),t.transactions[r]},id:function(){var e=t.transactions[r];return e?e.id:null},operation:function(){var e=t.transactions[r];return e?e.operation:null},errorMessage:function(){return o.message()},begin:function(e){var n=t.transactions[r];return null!=n&&n.id?null:(n=t.transactions[r]={id:(new Date).getTime(),operation:e||"PROCESSING"},o.reset(),n.id)},abort:function(){var e=t.transactions[r];e&&(e.id=null),o.reset()},end:function(e){e?o.set(e):o.reset();var n=t.transactions[r];null!=n&&(n.id=null)}};return _.isObject(i)&&(i.error=o,i.transaction=s),s}return t.transactions={},r}])}(e=t.scope||(t.scope={}))}(pip||(pip={}));var pip;!function(t){var e;!function(e){"use strict";e.IdentityRootVar="$identity",e.IdentityChangedEvent="pipIdentityChanged";var n=function(){function e(t,e,n){this._setRootVar=t,this._identity=e,this._rootScope=n,this.setRootVar()}return e.prototype.setRootVar=function(){this._setRootVar&&(this._rootScope[t.session.IdentityRootVar]=this._identity)},Object.defineProperty(e.prototype,"identity",{get:function(){return this._identity},set:function(e){this._identity=e,this.setRootVar(),this._rootScope.$broadcast(t.session.IdentityChangedEvent,this._identity)},enumerable:!0,configurable:!0}),e}(),r=function(){function t(){this._setRootVar=!0,this._identity=null,this._service=null}return Object.defineProperty(t.prototype,"setRootVar",{get:function(){return this._setRootVar},set:function(t){this._setRootVar=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"identity",{get:function(){return this._identity},set:function(t){this._identity=t},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new n(this._setRootVar,this._identity,t)),this._service}],t}();angular.module("pipIdentity",[]).provider("pipIdentity",r)}(e=t.session||(t.session={}))}(pip||(pip={}));var pip;!function(t){var e;!function(e){"use strict";e.SessionRootVar="$session",e.SessionOpenedEvent="pipSessionOpened",e.SessionClosedEvent="pipSessionClosed";var n=function(){function e(t,e,n){this._setRootVar=t,this._session=e,this._rootScope=n,this.setRootVar()}return e.prototype.setRootVar=function(){this._setRootVar&&(this._rootScope[t.session.SessionRootVar]=this._session)},Object.defineProperty(e.prototype,"session",{get:function(){return this._session},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpened",{get:function(){return null!=this._session},enumerable:!0,configurable:!0}),e.prototype.open=function(e,n,r){if(void 0===n&&(n=!1),void 0===r&&(r=!1),null==e)throw new Error("Session cannot be null");this._session=e,this.setRootVar(),this._rootScope.$broadcast(t.session.SessionOpenedEvent,e)},e.prototype.close=function(e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=this._session;this._session=null,this.setRootVar(),this._rootScope.$broadcast(t.session.SessionClosedEvent,r)},e}(),r=function(){function t(){this._setRootVar=!0,this._session=null,this._service=null}return Object.defineProperty(t.prototype,"setRootVar",{get:function(){return this._setRootVar},set:function(t){this._setRootVar=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"session",{get:function(){return this._session},set:function(t){this._session=t},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope",function(t){"ngInject";return null==this._service&&(this._service=new n(this._setRootVar,this._session,t)),this._service}],t}();angular.module("pipSession",["pipPageReset"]).provider("pipSession",r)}(e=t.session||(t.session={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";angular.module("pipTranslate",["LocalStorageModule","pipTranslate.Service","pipTranslate.Filter","pipTranslate.Directive"])}(e=t.translate||(t.translate={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";function e(t){"ngInject";return{restrict:"EA",scope:{key1:"@pipTranslate",key2:"@key"},link:function(e,n,r){var i=e.key1||e.key2,o=t.translate(i);n.text(o)}}}function n(t){"ngInject";return{restrict:"EA",scope:{key1:"@pipTranslateHtml",key2:"@key"},link:function(e,n,r){var i=e.key1||e.key2,o=t.translate(i);n.html(o)}}}e.$inject=["pipTranslate"],n.$inject=["pipTranslate"],angular.module("pipTranslate.Directive",[]).directive("pipTranslate",e).directive("pipTranslateHtml",n)}(e=t.translate||(t.translate={}))}(pip||(pip={}));var pip;!function(t){var e;!function(t){"use strict";function e(t){"ngInject";return function(e){return t.translate(e)||e}}function n(t){"ngInject";var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}e.$inject=["pipTranslate"],n.$inject=["$injector"],angular.module("pipTranslate.Filter",[]).filter("translate",e)}(e=t.translate||(t.translate={}))}(pip||(pip={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},pip;!function(t){var e;!function(e){"use strict";e.LanguageRootVar="$language",e.LanguageChangedEvent="pipLanguageChanged";var n=function(){function t(){this._language="en",this._translations={en:{en:"English",ru:"Russian",es:"Spanish",pt:"Portuguese",de:"German",fr:"French"},ru:{en:"Английский",ru:"Русский",es:"Испанский",pt:"Португальский",de:"Немецкий",fr:"Французский"}}}return Object.defineProperty(t.prototype,"language",{get:function(){return this._language},set:function(t){this._language=t},enumerable:!0,configurable:!0}),t.prototype.use=function(t){return null!=t&&(this._language=t),this._language},t.prototype.setTranslations=function(t,e){var n=this._translations[t]||{};this._translations[t]=_.extend(n,e)},t.prototype.translate=function(t){if(_.isNull(t)||_.isUndefined(t))return"";var e=this._translations[this._language]||{};return e[t]||t},t.prototype.translateArray=function(t){if(_.isNull(t)||0==t.length)return[];var e=[],n=this._translations[this._language]||{};return _.each(t,function(t){var r=t||"";e.push(n[r]||r)}),e},t.prototype.translateSet=function(t,e,n){if(_.isNull(t)||0==t.length)return[];e=e||"id",n=n||"name";var r=[],i=this._translations[this._language]||{};return _.each(t,function(t){var o={};t=t||"",o[e]=t,o[n]=i[t]||t,r.push(o)}),r},t.prototype.translateObjects=function(t,e,n){if(_.isNull(t)||0==t.length)return[];e=e||"name",n=n||"nameLocal";var r=this._translations[this._language]||{};return _.each(t,function(t){var i=t[e]||"";t[n]=r[i]||i}),t},t.prototype.translateWithPrefix=function(t,e){if(t=t?t+"_":"",e=(t+e).replace(/ /g,"_").toUpperCase(),null==e)return"";var n=this._translations[this._language]||{};return n[e]||e},t.prototype.translateSetWithPrefix=function(t,e,n,r){if(_.isNull(e)||0==e.length)return[];t=t?t.replace(/ /g,"_").toUpperCase():"",n=n||"id",r=r||"name";var i=[],o=this._translations[this._language]||{};return _.each(e,function(e){var s={};e=e||"",s[n]=e,s[r]=o[t+"_"+e]||e,i.push(s)}),i},t.prototype.translateSetWithPrefix2=function(t,e,n,r){if(_.isNull(e)||0==e.length)return[];n=n||"id",r=r||"name",t=t?t.replace(/ /g,"_").toUpperCase()+"_":"";var i=[],o=this._translations[this._language]||{};return _.each(e,function(e){var s={};e=e||"",s[n]=e,s[r]=o[t+e.replace(/ /g,"_").toUpperCase()]||t+e.replace(/ /g,"_").toUpperCase(),i.push(s)}),i},t}(),r=function(){function e(t,e,n,r,i){this._setRootVar=e,this._persist=n,this._translation=t,this._rootScope=r,this._storage=i,this._persist&&(this._translation.language=i.get("language")||this._translation.language),this.save()}return e.prototype.save=function(){this._setRootVar&&(this._rootScope[t.translate.LanguageRootVar]=this._translation.language),this._persist&&this._storage.set("language",this._translation.language)},Object.defineProperty(e.prototype,"language",{get:function(){return this._translation.language},set:function(e){e!=this._translation.language&&(this._translation.language=e,this.save(),this._rootScope.$broadcast(t.translate.LanguageChangedEvent,e))},enumerable:!0,configurable:!0}),e.prototype.use=function(t){return null!=t&&(this.language=t),this.language},e.prototype.setTranslations=function(t,e){return this._translation.setTranslations(t,e)},e.prototype.translate=function(t){return this._translation.translate(t)},e.prototype.translateArray=function(t){return this._translation.translateArray(t)},e.prototype.translateSet=function(t,e,n){return this._translation.translateSet(t,e,n)},e.prototype.translateObjects=function(t,e,n){return this._translation.translateObjects(t,e,n)},e.prototype.translateWithPrefix=function(t,e){return this._translation.translateWithPrefix(t,e)},e.prototype.translateSetWithPrefix=function(t,e,n,r){return this._translation.translateSetWithPrefix(t,e,n,r)},e.prototype.translateSetWithPrefix2=function(t,e,n,r){return this._translation.translateSetWithPrefix2(t,e,n,r)},e}(),i=function(t){function e(){t.call(this)}return __extends(e,t),Object.defineProperty(e.prototype,"setRootVar",{get:function(){return this._setRootVar},set:function(t){this._setRootVar=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"persist",{get:function(){return this._persist},set:function(t){this._persist=!!t},enumerable:!0,configurable:!0}),e.prototype.$get=["$rootScope","localStorageService",function(t,e){"ngInject";return null==this._service&&(this._service=new r(this,this._setRootVar,this._persist,t,e)),this._service}],e}(n);angular.module("pipTranslate.Service",[]).provider("pipTranslate",i)}(e=t.translate||(t.translate={}))}(pip||(pip={})),function(){"use strict";var t=angular.module("pipCodes",[]);t.factory("pipCodes",function(){function t(t){if(null==t)return 0;for(var e=0,n=0;n<t.length;n++)e+=t.charCodeAt(n);return e}function e(){return Math.random().toString(36).substr(2,10).toUpperCase()}return{hash:t,verification:e}})}(),function(){"use strict";var t=angular.module("pipFormat",[]);t.factory("pipFormat",function(){function t(t,e){if(!t||""==t)return"";var n=t.indexOf("\n");return n=n>=0?n:t.length,n=n<e?t.length:e,t.substring(0,n)}function e(t,e){if(e<1)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n}var n=function t(){function n(t){return toString.call(t).slice(8,-1).toLowerCase()}for(var r=[],i=0;i<arguments.length;i++)r[i-0]=arguments[i];var o=e,s=function(){return s.cache.hasOwnProperty(arguments[0])||(s.cache[arguments[0]]=s.parse(arguments[0])),s.format.call(null,s.cache[arguments[0]],arguments)};return s.format=function(e,r){var i,s,a,u,c,p,l,f=1,g=e.length,h="",d=[];for(s=0;s<g;s++)if(h=n(e[s]),"string"===h)d.push(e[s]);else if("array"===h){if(u=e[s],u[2])for(i=r[f],a=0;a<u[2].length;a++){if(!i.hasOwnProperty(u[2][a]))throw new Error(t('[_.sprintf] property "%s" does not exist',u[2][a]));i=i[u[2][a]]}else i=u[1]?r[u[1]]:r[f++];if(/[^s]/.test(u[8])&&"number"!=n(i))throw new Error(t("[_.sprintf] expecting number but found %s",n(i)));switch(u[8]){case"b":i=i.toString(2);break;case"c":i=String.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=u[7]?i.toExponential(u[7]):i.toExponential();break;case"f":i=u[7]?parseFloat(i).toFixed(u[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=String(i))&&u[7]?i.substring(0,u[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(u[8])&&u[3]&&i>=0?"+"+i:i,p=u[4]?"0"==u[4]?"0":u[4].charAt(1):" ",l=u[6]-String(i).length,c=u[6]?o(p,l):"",d.push(u[5]?i+c:c+i)}return d.join("")},s.cache={},s.parse=function(t){for(var e=t,n=[],r=[],i=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var o=[],s=n[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(o.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))o.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");o.push(a[1])}n[2]=o}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}e=e.substring(n[0].length)}return r},s}();return{sprintf:n,format:n,sample:t}})}(),function(){"use strict";var t=angular.module("pipPageReset",[]);t.factory("pipPageReset",["$rootScope","$timeout",function(t,e){function n(){o(!1,!0)}function r(){o(!0,!1)}function i(){o(!0,!0)}function o(n,r){n=void 0===n||!!n,r=void 0===r||!!r,(n||r)&&(t.$reset=n,t.$partialReset=r,e(function(){t.$reset=!1,t.$partialReset=!1},0))}return t.$on("pipResetPage",i),{resetPartial:n,resetFull:r,resetAll:i,reset:o}}])}(),function(){"use strict";var t=angular.module("pipScroll",[]);t.factory("pipScroll",function(){function t(t,e,n){t&&e&&(void 0==n&&(n=300),setTimeout(function(){if($(e).position()){var r=Math.abs($(t).scrollTop()-$(e).position().top);if(!(r<20)){var i=$(t).scrollTop()+($(e).position().top-20);n>0&&$(t).animate({scrollTop:i+"px"},n)}}},100))}return{scrollTo:t}})}(),function(){"use strict";var t=angular.module("pipSystemInfo",[]);t.factory("pipSystemInfo",["$rootScope","$window",function(t,e){function n(){var t=e.navigator.userAgent;return t.search(/Edge/)>-1?"edge":t.search(/MSIE/)>-1?"ie":t.search(/Trident/)>-1?"ie":t.search(/Firefox/)>-1?"firefox":t.search(/Opera/)>-1?"opera":t.search(/OPR/)>-1?"opera":t.search(/YaBrowser/)>-1?"yabrowser":t.search(/Chrome/)>-1?"chrome":t.search(/Safari/)>-1?"safari":t.search(/Maxthon/)>-1?"maxthon":"unknown"}function r(){var t,r,i=e.navigator.userAgent;switch(t=n()){case"edge":r=i.split("Edge")[1].split("/")[1];break;case"ie":r=i.split("MSIE ")[1].split(";")[0];break;case"ie11":t="ie",r=i.split("; rv:")[1].split(")")[0];break;case"firefox":r=i.split("Firefox/")[1];break;case"opera":r=i.split("Version/")[1];break;case"operaWebkit":r=i.split("OPR/")[1];break;case"yabrowser":r=i.split("YaBrowser/")[1].split(" ")[0];break;case"chrome":r=i.split("Chrome/")[1].split(" ")[0];break;case"safari":r=i.split("Version/")[1].split(" ")[0];break;case"maxthon":r=i.split("Maxthon/")[1]}return r}function i(){var t=e.navigator.userAgent;return/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(t.toLowerCase())?"mobile":"desktop"}function o(){return"desktop"==i()}function s(){return"mobile"==i()}function a(){return null}function u(){var t=e.navigator.userAgent;try{var n=(/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(t.toLowerCase())||[t])[0].replace("sunos","solaris"),r=/(android)/.exec(t.toLowerCase())||"";return!r||"android"!=r&&"android"!=r[0]?n:"android"}catch(t){return"unknown"}}function c(t){t||(t={edge:11,ie:11,firefox:43,opera:35,chrome:47});var e=n(),i=r();return i=i.split(".")[0],e&&t[e]&&i>=t[e],!0}return{getBrowserName:n,getBrowserVersion:r,getPlatform:i,isDesktop:o,isMobile:s,isCordova:a,getOS:u,isSupported:c}}])}(),function(){"use strict";var t=angular.module("pipTags",[]);t.factory("pipTags",function(){function t(t){return t?_.trim(t.replace(/(_|#)+/g," ")):null}function e(t){return t?t.replace(/( |_|#)/g,"").toLowerCase():null}function n(t,n){return null==t&&null==n||null!=t&&null!=n&&e(t)==e(n)}function r(e){return _.isString(e)&&(e=e.split(/( |,|;)+/)),e=_.map(e,function(e){return t(e)})}function i(t){return _.isString(t)&&(t=t.split(/( |,|;)+/)),t=_.map(t,function(t){return e(t)})}function o(t,e){var n=r(t.tags);return _.each(e,function(e){var i=t[e]||"";if(""!=i){var o=i.match(/#\w+/g);n=n.concat(r(o))}}),_.uniq(n)}return{equal:n,normalizeOne:t,normalizeAll:r,normalize:r,compressOne:e,compressAll:i,compress:i,extract:o}})}();var pip;!function(t){var e;!function(t){"use strict";var e=(function(){function t(){}return t}(),[{event:"pipAutoPullChanges",timeout:6e4},{event:"pipAutoUpdatePage",timeout:15e3},{event:"pipAutoUpdateCollection",timeout:3e5}]),n=function(){function t(t,n){this._started=!1,this._events=_.cloneDeep(e),this._rootScope=t,this._interval=n}return t.$inject=["$rootScope","$interval"],Object.defineProperty(t.prototype,"isStarted",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.addEvent=function(t,e){var n=_.find(this._events,function(e){return e.event==t});if(null==n){var r={event:t,timeout:e};this._events.push(r),this._started&&this.startEvent(r)}},t.prototype.removeEvent=function(t){for(var e=this._events.length-1;e>=0;e--){var n=this._events[e];n.event==t&&(this.stopEvent(n),this._events.splice(e,1))}},t.prototype.clearEvents=function(){this.stop(),this._events=[]},t.prototype.startEvent=function(t){var e=this;t.interval=this._interval(function(){e._rootScope.$broadcast(t.event)},t.timeout)},t.prototype.stopEvent=function(t){if(null!=t.interval){try{this._interval.cancel(t.interval)}catch(t){}t.interval=null}},t.prototype.start=function(){var t=this;this._started||(_.each(this._events,function(e){t.startEvent(e)}),this._started=!0)},t.prototype.stop=function(){var t=this;_.each(this._events,function(e){t.stopEvent(e)}),this._started=!1},t}();angular.module("pipTimer",[]).service("pipTimer",n)}(e=t.utilities||(t.utilities={}))}(pip||(pip={}));
!function(t){try{t=angular.module("pipButtons.Templates")}catch(n){t=angular.module("pipButtons.Templates",[])}t.run(["$templateCache",function(t){t.put("toggle_buttons/toggle_buttons.html",'<div class="pip-toggle-buttons layout-row {{class}}" pip-selected="bufButtonIndex" pip-enter-space-press="enterSpacePress($event)" ng-if="$mdMedia(\'gt-xs\')"><md-button tabindex="-1" ng-repeat="button in buttons" ng-class="{\'md-accent md-raised selected color-accent-bg\' : currentButtonIndex == $index}" ng-attr-style="{{ \'background-color:\' + (currentButtonIndex == $index ? button.backgroundColor : \'\') + \'!important\' }}" class="pip-selectable pip-chip-button flex" ng-click="buttonSelected($index, $event)" ng-disabled="button.disabled || disabled()">{{button.name || button.title | translate}} <span ng-if="button.checked || button.complete || button.filled" class="pip-tagged">*</span></md-button></div><md-input-container class="md-block" ng-if="$mdMedia(\'xs\')"><md-select ng-model="currentButtonIndex" ng-disabled="disabled()" aria-label="DROPDOWN" md-on-close="buttonSelected(currentButtonIndex)"><md-option ng-repeat="action in buttons" value="{{ ::$index }}">{{ (action.title || action.name) | translate }} <span ng-if="action.checked || action.complete || action.filled" class="pip-tagged">*</span></md-option></md-select></md-input-container>')}])}(),function(){"use strict";angular.module("pipButtons",["pipToggleButtons","pipRefreshButton","pipFabTooltipVisibility"])}(),function(){"use strict";var t=angular.module("pipButtons.Translate",[]);t.filter("translate",["$injector",function(t){var n=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return n?n.translate(t)||t:t}}])}(),function(){"use strict";var t=angular.module("pipFabTooltipVisibility",[]);t.directive("pipFabTooltipVisibility",["$parse","$timeout",function(t,n){return{restrict:"A",scope:!1,controller:["$scope","$attrs",function(e,i){var o=t(i.pipFabTooltipVisibility),u=t(i.pipFabShowTooltip),s=u.assign;e.$watch(o,function(t){t?n(function(){s(e,t)},600):s(e,t)})}]}}])}(),function(){"use strict";var t=angular.module("pipRefreshButton",["ngMaterial"]);t.directive("pipRefreshButton",["$parse",function(t){return{restrict:"EA",scope:!1,template:String()+'<md-button class="pip-refresh-button" tabindex="-1" ng-click="onClick($event)" aria-label="REFRESH"><md-icon md-svg-icon="icons:refresh"></md-icon><span class="pip-refresh-text"></span></md-button>',replace:!1,link:function(n,e,i){function o(){p.hide()}var u,s,c,a=t(i.pipText),r=t(i.pipVisible),l=t(i.pipRefresh),p=e.children(".md-button"),d=p.children(".pip-refresh-text");c=function(){s=a(n),d.text(s),p.show(),u=p.width(),p.css("margin-left","-"+u/2+"px")},n.onClick=function(){l(n)},n.$watch(r,function(t){t?c():o()}),n.$watch(a,function(t){d.text(t)})}}}])}(),function(){"use strict";var t=angular.module("pipToggleButtons",["pipButtons.Templates"]);t.directive("pipToggleButtons",function(){return{restrict:"EA",scope:{ngDisabled:"&",buttons:"=pipButtons",currentButtonValue:"=ngModel",currentButton:"=?pipButtonObject",change:"&ngChange"},templateUrl:"toggle_buttons/toggle_buttons.html",controller:["$scope","$element","$attrs","$mdMedia","$timeout",function(t,n,e,i,o){var u;t.$mdMedia=i,t.class=e.class||"",(!t.buttons||_.isArray(t.buttons)&&0===t.buttons.length)&&(t.buttons=[]),u=_.indexOf(t.buttons,_.find(t.buttons,{id:t.currentButtonValue})),t.currentButtonIndex=u<0?0:u,t.currentButton=t.buttons.length>0?t.buttons[t.currentButtonIndex]:t.currentButton,t.buttonSelected=function(n){t.disabled()||(t.currentButtonIndex=n,t.currentButton=t.buttons[t.currentButtonIndex],t.currentButtonValue=t.currentButton.id||n,o(function(){t.change&&t.change()}))},t.enterSpacePress=function(n){t.buttonSelected(n.index)},t.disabled=function(){if(t.ngDisabled)return t.ngDisabled()}}],link:function(t,n){n.on("focusin",function(){n.addClass("focused-container")}).on("focusout",function(){n.removeClass("focused-container")})}}})}();
!function(n){"use strict";n.module("pipLanding",[])}(window.angular);
!function(){"use strict";angular.module("pipLayout",["pipLayout.Main","pipLayout.Simple","pipLayout.Card","pipLayout.Document","pipLayout.Tiles","pipLayout.Dialog","pipLayout.Media"])}(),function(){"use strict";var i=angular.module("pipLayout.Card",[]);i.directive("pipCard",function(){return{restrict:"EA",link:function(i,e,t){function n(){var n,r,s=$(".pip-main-body"),l=$(".pip-card-container"),a=o.width(),p=s.width(),u=s.height(),c=t.minWidth?Math.floor(t.minWidth):null,d=t.minHeight?Math.floor(t.minHeight):null,h=t.width?Math.floor(t.width):null,m=t.height?Math.floor(t.height):null;if(a<=768)c=null,d=null,h=null,m=null,p=null,u=null;else{var g=a>1200?24:16;p-=2*g,u-=2*g,c=c?Math.min(c,p):null,d=d?Math.min(d,u):null,h=h?Math.min(h,p):null,m=m?Math.min(m,u):null}if(e.css("max-width",p?p+"px":""),e.css("min-width",c?c+"px":""),e.css("width",h?h+"px":""),e.css("height",m?m+"px":""),l.hasClass("pip-outer-scroll"))l.addClass("pip-scroll"),a<=768?(n=0,r=0):(n=l.width()/2-e.width()/2-16,r=Math.max(l.height()/2-e.height()/2-16,0)),e.css("left",n),e.css("top",r),setTimeout(function(){e.css("display","flex")},100);else{e.css("max-height",u?u+"px":""),e.css("min-height",d?d+"px":"");var _=e.find(".pip-header:visible"),f=e.find(".pip-footer:visible"),w=e.find(".pip-body"),v=u||s.height();_.length>0&&(v-=_.outerHeight(!0)),f.length>0&&(v-=f.outerHeight(!0)),w.css("max-height",v+"px")}i.$broadcast("pipLayoutResized")}var o=$(window);e.addClass("pip-card"),i.$on("pipWindowResized",n),n(),setTimeout(n,100)}}})}(),function(){"use strict";var i=angular.module("pipLayout.Dialog",[]);i.directive("pipDialog",function(){return{restrict:"EA",controller:"pipDialogController"}}),i.controller("pipDialogController",["$scope","$element","$attrs",function(i,e,t){function n(){var n=o.width(),r=o.height(),s=t.minWidth?Math.floor(t.minWidth):null,l=t.minHeight?Math.floor(t.minHeight):null,a=t.width?Math.floor(t.width):null,p=t.height?Math.floor(t.height):null,u=n>1200?24:16;n-=2*u,r-=2*u,s=s&&s<n?s:null,l=l&&l<r?l:null,a=a?Math.min(a,n):null,p=p?Math.min(p,r):null,e.css("max-width",n?n+"px":""),e.css("max-height",r?r+"px":""),e.css("min-width",s?s+"px":""),e.css("min-height",l?l+"px":""),e.css("width",a?a+"px":""),e.css("height",p?p+"px":""),i.$broadcast("pipLayoutResized")}var o=$(window);e.addClass("pip-dialog"),i.$on("pipWindowResized",n),i.$on("pipResizeLayout",n),n(),o.trigger("resize")}])}(),function(){"use strict";var i=angular.module("pipLayout.Document",[]);i.directive("pipDocument",function(){return{restrict:"EA",controller:"pipDocumentController"}}),i.controller("pipDocumentController",["$scope","$element","$attrs",function(i,e,t){e.addClass("pip-document")}])}(),function(i,e,t){"use strict";var n=i.module("pipLayout.Media",[]);n.service("pipMedia",["$rootScope","$timeout",function(i,e){function n(i){var e=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(i){return window.setTimeout(i,20)};return e(i)}function o(){var i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout;return function(e){return i(e)}}function r(i){var e=i.target||i.srcElement;e.__resizeRAF__&&o(e.__resizeRAF__),e.__resizeRAF__=n(function(){var t=e.__resizeTrigger__;t.__resizeListeners__.forEach(function(e){e.call(t,i)})})}function s(i){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",r)}function l(i,e){if(!i.__resizeListeners__)if(i.__resizeListeners__=[],h)i.__resizeTrigger__=i,i.attachEvent("onresize",r);else{"static"==getComputedStyle(i).position&&(i.style.position="relative");var t=i.__resizeTrigger__=document.createElement("object");t.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),t.__resizeElement__=i,t.onload=s,t.type="text/html",m&&i.appendChild(t),t.data="about:blank",m||i.appendChild(t)}u(),e&&i.__resizeListeners__.push(e),i.__resizeListeners__.push(u)}function a(i,e){e&&i.__resizeListeners__.splice(i.__resizeListeners__.indexOf(e),1),i.__resizeListeners__.length||(h?i.detachEvent("onresize",r):(i.__resizeTrigger__.contentDocument.defaultView.removeEventListener("resize",r),i.__resizeTrigger__=!i.removeChild(i.__resizeTrigger__)))}function p(){t.each(d,function(i,e){t("body")[e?"addClass":"removeClass"]("pip-"+i)})}function u(){c=t(".pip-main").innerWidth(),d.xs=c<=599,d["gt-xs"]=c>=600,d.sm=c>=600&&c<=959,d["gt-sm"]=c>=960,d.md=c>=960&&c<=1279,d["gt-md"]=c>=1280,d.lg=c>=1280&&c<=1919,d["gt-lg"]=c>=1920,d.xl=d["gt-lg"],p(),e(function(){i.$apply()})}var c=null,d={xs:!1,"gt-xs":!1,sm:!1,"gt-sm":!1,md:!1,"gt-md":!1,lg:!1,"gt-lg":!1,xl:!1},h=document.attachEvent,m=navigator.userAgent.match(/Trident/);return function(i){return i?d[i]:{addResizeListener:l,removeResizeListener:a}}}])}(window.angular,window._,window.jQuery),function(){"use strict";var i=angular.module("pipLayout.Main",[]);i.directive("pipMain",function(){return{restrict:"EA",controller:"pipMainController"}}),i.directive("pipMainBody",function(){return{restrict:"EA",link:function(i,e){e.addClass("pip-main-body")}}}),i.controller("pipMainController",["$scope","$element","$rootScope","pipMedia",function(i,e,t,n){function o(){t.$broadcast("pipWindowResized")}$(window);e.addClass("pip-main"),n().addResizeListener(e[0],o),i.$on("$destroy",function(){n().removeResizeListener(e[0])})}])}(),function(){"use strict";var i=angular.module("pipLayout.Simple",[]);i.directive("pipSimple",function(){return{restrict:"EA",link:function(i,e,t){e.addClass("pip-simple")}}})}(),function(){"use strict";function i(i,e,t){function n(e){var t,n=o.width();if(n>767){n-=48;var u=Math.floor(n/r);t=(r+16)*u-16,t>n&&(u--,t=(r+16)*u-16),u<1?(t=n,p.css("width",t+"px")):p.css("width",r+"px"),s.css("width",t+1+"px")}else n-=32,t=n,p.css("width",t+"px"),s.css("width",t+1+"px");(l!=t||e)&&(l=t,a.layout(),i.$broadcast("pipLayoutResized"))}var o=$(window),r=t.columnWidth?Math.floor(t.columnWidth):440,s=e.children(".pip-tiles-container"),l=null,a=Masonry.data(s[0]);e.addClass("pip-tiles");var p=$('<div class="pip-tile-sizer"></div>');p.appendTo(s),i.$on("pipWindowResized",function(){console.log("resize tiles"),n(!1)}),n()}function e(i){return null!=i&&(!!i&&(i=i.toString().toLowerCase(),"1"==i||"true"==i))}var t=angular.module("pipLayout.Tiles",["wu.masonry"]);t.directive("pipTiles",function(){return{restrict:"EA",scope:!1,transclude:!0,template:function(i,t){return e(t.pipInfinite)?String()+'<div masonry class="pip-tiles-container" load-images="false" preserve-order   ng-transclude column-width=".pip-tile-sizer" item-selector=".pip-tile" masonry-options="tilesOptions"  pip-scroll-container="\'.pip-tiles\'" pip-infinite-scroll="readScroll()" ></div>':String()+'<div masonry class="pip-tiles-container" load-images="false" preserve-order   ng-transclude column-width=".pip-tile-sizer" item-selector=".pip-tile" masonry-options="tilesOptions"></div>'},controller:["$scope",function(i){i.tilesOptions={gutter:8,isFitWidth:!1,isResizeBound:!1,transitionDuration:0}}],link:i}})}();
!function(){"use strict";var n=angular.module("pipSplit",[]);n.run(["$rootScope","pipSplit",function(n,i){n.$on("$stateChangeStart",function(n,r,t,a,e){var o=$(".pip-split");o.length>0&&(o.removeClass("pip-transition-forward"),o.removeClass("pip-transition-back"),r.name!=a.name&&(i.forwardTransition(r,a)?o.addClass("pip-transition-forward"):o.addClass("pip-transition-back")))})}]),n.provider("pipSplit",function(){function n(n){if(!_.isArray(n)||0==n.length)throw new Error("Transition sequence must be an array of state names");r.push(n)}function i(n,i){var t,a,e;for(t=0;t<r.length;t++)if(a=r[t].indexOf(n.name),e=r[t].indexOf(i.name),a>-1)return a>e;return!1}var r=[];this.addTransitionSequence=n,this.$get=function(){return{forwardTransition:i}}})}();
!function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("color_picker/color_picker.html",'<ul class="pip-color-picker {{class}}" pip-selected="currentColorIndex" pip-enter-space-press="enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in colors track by color"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="selectColor($index)" aria-label="color" ng-disabled="disabled()"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("popover/popover.html",'<div ng-if="params.templateUrl" class="pip-popover flex layout-column" ng-click="onPopoverClick($event)" ng-include="params.templateUrl"></div><div ng-if="params.template" class="pip-popover" ng-click="onPopoverClick($event)"></div>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("progress/routing_progress.html",'<div class="pip-routing-progress layout-column layout-align-center-center" ng-show="showProgress()"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(e){try{e=angular.module("pipControls.Templates")}catch(t){e=angular.module("pipControls.Templates",[])}e.run(["$templateCache",function(e){e.put("toast/toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': toast.type==\'error\', \'pip-column-toast\': toast.type == \'error\' || toast.actions.length > 1 || actionLenght > 4, \'pip-no-action-toast\': actionLenght == 0}" style="height:initial; max-height: initial;"><span class="flex-var pip-text" ng-bind-html="message"></span><div class="layout-row layout-align-end-start" ng-if="actions.length > 0 || (toast.type==\'error\' && toast.error)"><md-button class="flex-fixed pip-toast-button" ng-if="toast.type==\'error\' && toast.error && showDetails" ng-click="onDetails()">Details</md-button><md-button class="flex-fixed pip-toast-button" ng-click="onAction(action)" ng-repeat="action in actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}(),function(){"use strict";angular.module("pipControls",["pipMarkdown","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipUnsavedChanges","pipControls.Translate","pipDraggable"])}(),function(){"use strict";var e=angular.module("pipColorPicker",["pipControls.Templates"]);e.directive("pipColorPicker",function(){return{restrict:"EA",scope:{ngDisabled:"&",colors:"=pipColors",currentColor:"=ngModel",colorChange:"&ngChange"},templateUrl:"color_picker/color_picker.html",controller:"pipColorPickerController"}}),e.controller("pipColorPickerController",["$scope","$element","$attrs","$timeout",function(e,t,n,o){var i=["purple","lightgreen","green","darkred","pink","yellow","cyan"];e.class=n.class||"",(!e.colors||_.isArray(e.colors)&&0===e.colors.length)&&(e.colors=i),e.currentColor=e.currentColor||e.colors[0],e.currentColorIndex=e.colors.indexOf(e.currentColor),e.disabled=function(){return!e.ngDisabled||e.ngDisabled()},e.selectColor=function(t){e.disabled()||(e.currentColorIndex=t,e.currentColor=e.colors[e.currentColorIndex],o(function(){e.$apply()}),e.colorChange&&e.colorChange())},e.enterSpacePress=function(t){e.selectColor(t.index)}}])}(),function(){"use strict";var e=angular.module("pipControls.Translate",[]);e.filter("translate",["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return t?t.translate(e)||e:e}}])}(),function(){"use strict";var e=angular.module("pipDraggable",[]);e.service("pipDraggable",function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}),e.directive("pipDrag",["$rootScope","$parse","$document","$window","pipDraggable",function(e,t,n,o,i){return{restrict:"A",link:function(r,a,l){function s(){a.attr("pip-draggable","false");var e;e=a[0].querySelectorAll?angular.element(a[0].querySelectorAll("[pip-drag-handle]")):a.find("[pip-drag-handle]"),e.length&&(E=e),c(!0),te=ee?angular.element(a.parent()):l.pipScrollContainer?angular.element(ne(r)):angular.element(window)}function p(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function c(e){e&&(r.$on("$destroy",u),r.$watch(l.pipDrag,d),r.$watch(l.pipCenterAnchor,g),E?E.on(B,m):a.on(B,m),U||"img"!=a[0].nodeName.toLowerCase()||a.on("mousedown",function(){return!1}))}function u(e){c(!1)}function d(e,t){X=e}function g(e,t){angular.isDefined(e)&&(M=e||"true")}function f(e){return angular.isDefined(angular.element(e.target).attr("pip-cancel-drag"))}function m(e){X&&(f(e)||"mousedown"==e.type&&0!=e.button||(v(),U?(h(),Y=setTimeout(function(){h(),$(e)},L),n.on(R,h),n.on(z,h)):$(e)))}function v(){j.left=a.css("css")||0,j.top=a.css("top")||0,j.position=a.css("position"),j.width=a.css("width")}function h(){clearTimeout(Y),n.off(R,h),n.off(z,h)}function $(t){X&&(t.preventDefault(),S=a[0].getBoundingClientRect(),N=q?S:{left:document.body.scrollLeft,top:document.body.scrollTop},a.centerX=a[0].offsetWidth/2,a.centerY=a[0].offsetHeight/2,D=i.inputEvent(t).pageX,T=i.inputEvent(t).pageY,I=D-S.left,_=T-S.top,M?(A=D-a.centerX-o.pageXOffset,P=T-a.centerY-o.pageYOffset):(A=D-I-o.pageXOffset,P=T-_-o.pageYOffset),n.on(R,C),n.on(z,b),oe=e.$on("draggable:_triggerHandlerMove",function(e,t){C(t)}))}function C(t){X&&(t.preventDefault(),a.hasClass("pip-dragging")||(H=V(r),a.addClass("pip-dragging"),e.$broadcast("draggable:start",{x:D,y:T,tx:A,ty:P,event:t,element:a,data:H}),W&&r.$apply(function(){W(r,{$data:H,$event:t})})),D=i.inputEvent(t).pageX,T=i.inputEvent(t).pageY,(J||G)&&y(),M?(A=D-a.centerX-N.left,P=T-a.centerY-N.top):(A=D-I-N.left,P=T-_-N.top),x(A,P),e.$broadcast("draggable:move",{x:D,y:T,tx:A,ty:P,event:t,element:a,data:H,uid:O,dragOffset:N}))}function b(t){X&&(t.preventDefault(),e.$broadcast("draggable:end",{x:D,y:T,tx:A,ty:P,event:t,element:a,data:H,callback:k,uid:O}),a.removeClass("pip-dragging"),a.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),w(),n.off(R,C),n.off(z,b),F&&r.$apply(function(){F(r,{$data:H,$event:t})}),oe())}function k(e){K&&r.$apply(function(){K(r,{$data:H,$event:e})})}function w(){q?a.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):a.css({position:j.position,top:j.top,left:j.left,"z-index":"",width:j.width})}function x(e,t){var n=a.css("width");q?a.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+t+")"}):a.css({left:e+"px",top:t+"px",position:"fixed","z-index":100,width:n})}function y(){var e=0,t=0,n=function(e){return e.offset()||{left:0,top:0}};if(J){var o=n(te).left,i=te.innerWidth(),r=o+i;D-o<Q?e=-Z:r-D<Q&&(e=Z)}if(G){var a=n(te).top,l=te.innerHeight(),s=a+l;T-a<Q?t=-Z+30:s-T<Q&&(t=Z-30)}if(0!==e||0!==t){var p=te.scrollLeft(),c=te.scrollTop();te.scrollLeft(p+e),te.scrollTop(c+t)}}r.value=l.ngDrag;var S,D,T,A,P,I,_,E,L=50,M=!1,U="ontouchstart"in window||window.DocumentTouch,B="touchstart mousedown",R="touchmove mousemove",z="touchend mouseup",O=r.$id,H=null,N=null,X=!1,Y=null,j={},W=t(l.pipDragStart)||null,F=t(l.pipDragStop)||null,K=t(l.pipDragSuccess)||null,q=!!angular.isDefined(l.allowTransform)&&r.$eval(l.allowTransform),V=t(l.pipDragData),G=p(l.pipVerticalScroll)||!0,J=p(l.pipHorizontalScroll)||!0,Q=parseFloat(l.pipActivationDistance)||75,Z=parseFloat(l.pipScrollDistance)||50,ee=!1,te=angular.element(window),ne=t(l.pipScrollContainer),oe=angular.noop;s()}}}]),e.directive("pipDrop",["$parse","$timeout","$window","$document","pipDraggable",function(e,t,n,o,i){return{restrict:"A",link:function(n,i,r){function a(){l(!0)}function l(e){e&&(n.$watch(r.pipDrop,p),n.$on("$destroy",s),n.$on("draggable:start",c),n.$on("draggable:move",u),n.$on("draggable:end",d))}function s(e){l(!1)}function p(e,t){$=e}function c(e,o){$&&(g(o.x,o.y,o.element),r.pipDragStart&&t(function(){b(n,{$data:o.data,$event:o})}))}function u(e,o){$&&(g(o.x,o.y,o.element),r.pipDragMove&&t(function(){w(n,{$data:o.data,$event:o})}))}function d(e,o){return $&&h!==o.uid?(g(o.x,o.y,o.element)&&(o.callback&&o.callback(o),r.pipDropSuccess&&t(function(){C(n,{$data:o.data,$event:o,$target:n.$eval(n.value)})})),r.pipDragStop&&t(function(){k(n,{$data:o.data,$event:o})}),void f(!1,o.element)):void f(!1,o.element)}function g(e,t,o){var r=m(e,t);return n.isTouching=r,r&&(v=i),f(r,o),r}function f(e,t){e?(i.addClass("pip-drag-enter"),t.addClass("pip-drag-over")):v==i&&(v=null,i.removeClass("pip-drag-enter"),t.removeClass("pip-drag-over"))}function m(e,t){var n=i[0].getBoundingClientRect();return e-=o[0].body.scrollLeft+o[0].documentElement.scrollLeft,t-=o[0].body.scrollTop+o[0].documentElement.scrollTop,e>=n.left&&e<=n.right&&t<=n.bottom&&t>=n.top}n.value=r.pipDrop,n.isTouching=!1;var v=null,h=n.$id,$=!1,C=e(r.pipDropSuccess),b=e(r.pipDragStart),k=e(r.pipDragStop),w=e(r.pipDragMove);a()}}}]),e.directive("pipPreventDrag",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(e,t,n){function o(){t.attr("pip-draggable","false"),i(!0)}function i(e){e&&t.on("mousedown touchstart touchmove touchend touchcancel",r)}function r(e){var t=e.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1}o()}}}]),e.directive("pipCancelDrag",function(){return{restrict:"A",link:function(e,t,n){t.find("*").attr("pip-cancel-drag","pip-cancel-drag")}}})}(),function(){"use strict";var e=angular.module("pipImageSlider",["pipSliderButton","pipSliderIndicator","pipImageSlider.Service"]);e.directive("pipImageSlider",function(){return{scope:{sliderIndex:"=pipImageIndex"},controller:["$scope","$element","$attrs","$parse","$timeout","$interval","$pipImageSlider",function(e,t,n,o,i,r,a){function l(){n.pipImageIndex&&(e.sliderIndex=v)}function s(){f=r(function(){d=v+1===u.length?0:v+1,g="next",m()},b||C)}function p(){r.cancel(f)}function c(){p(),s()}var u,d,g,f,m,v=0,h=o(n.pipAnimationType)(e),C=4500,b=o(n.pipAnimationInterval)(e);t.addClass("pip-image-slider"),t.addClass("pip-animation-"+h),e.swipeStart=0,l(),i(function(){u=t.find(".pip-animation-block"),u.length>0&&$(u[0]).addClass("pip-show")}),s(),m=_.throttle(function(){a.toBlock(h,u,v,d,g),v=d,l()},700),e.nextBlock=function(){c(),d=v+1===u.length?0:v+1,g="next",m()},e.prevBlock=function(){c(),d=v-1<0?u.length-1:v-1,g="prev",m()},e.slideTo=function(e){e===v||e>u.length-1||(c(),d=e,g=e>v?"next":"prev",m())},n.id&&a.registerSlider(n.id,e),t.on("$destroy",function(){p(),a.removeSlider(n.id)})}]}})}(),function(){"use strict";var e=angular.module("pipImageSlider.Service",[]);e.service("$pipImageSlider",["$timeout",function(e){function t(e,t){l[e]=t}function n(e){delete l[e]}function o(e){return l[e]}function i(t,n){t.addClass("pip-next"),e(function(){t.addClass("animated").addClass("pip-show").removeClass("pip-next"),n.addClass("animated").removeClass("pip-show")},100)}function r(t,n){e(function(){t.addClass("animated").addClass("pip-show"),n.addClass("animated").addClass("pip-next").removeClass("pip-show")},100)}function a(e,t,n,o,a){var l=$(t[n]),s=o,p=$(t[s]);"carousel"===e?($(t).removeClass("pip-next").removeClass("pip-prev").removeClass("animated"),!a||"prev"!==a&&"next"!==a?o&&o<n?r(p,l):i(p,l):"prev"===a?r(p,l):i(p,l)):(l.addClass("animated").removeClass("pip-show"),p.addClass("animated").addClass("pip-show"))}var l={};return{nextCarousel:i,prevCarousel:r,toBlock:a,registerSlider:t,removeSlider:n,getSliderScope:o}}])}(),function(){"use strict";var e=angular.module("pipSliderButton",[]);e.directive("pipSliderButton",function(){return{scope:{},controller:["$scope","$element","$parse","$attrs","$pipImageSlider",function(e,t,n,o,i){var r=n(o.pipButtonType)(e),a=n(o.pipSliderId)(e);t.on("click",function(){a&&r&&i.getSliderScope(a)[r+"Block"]()})}]}})}(),function(){"use strict";var e=angular.module("pipSliderIndicator",[]);e.directive("pipSliderIndicator",function(){return{scope:!1,controller:["$scope","$element","$parse","$attrs","$pipImageSlider",function(e,t,n,o,i){var r=n(o.pipSliderId)(e),a=n(o.pipSlideTo)(e);t.css("cursor","pointer"),t.on("click",function(){!r||a&&a<0||i.getSliderScope(r).slideTo(a)})}]}})}(),function(){"use strict";var e=angular.module("pipMarkdown",["ngSanitize"]);e.run(["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;t&&(t.translations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),t.translations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"}))}]),e.directive("pipMarkdown",["$parse","$injector",function(e,t){var n=t.has("pipTranslate")?t.get("pipTranslate"):null;return{restrict:"EA",scope:!1,link:function(t,o,i){function r(e){var t="",o=[];return _.each(e,function(e){e.type&&"text"!==e.type&&(0===t.length&&n&&(t=n.translate("MARKDOWN_ATTACHMENTS")),o.indexOf(e.type)<0&&(o.push(e.type),t+=o.length>1?", ":" ",n&&(t+=n.translate(e.type))))}),t}function a(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function l(e){var t,n,a,l,s;_.isArray(e)?(s=_.find(e,function(e){return"text"===e.type&&e.text}),t=s?s.text:r(e)):t=e,n=i.pipLineCount&&_.isNumber(c()),n=n&&t&&t.length>0,l={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},t=marked(t||"",l),n&&(a=1.5*c()),o.html("<div"+(n?p()?'class="pip-markdown-content pip-markdown-list" style="max-height: '+a+'em">':' class="pip-markdown-content" style="max-height: '+a+'em">':p()?' class="pip-markdown-list">':">")+t+"</div>"),o.find("a").attr("target","blank"),!p()&&n&&o.append('<div class="pip-gradient-block"></div>')}var s=e(i.pipText),p=e(i.pipList),c=e(i.pipLineCount);l(s(t)),a(i.pipRebind)&&t.$watch(s,function(e){l(e)}),t.$on("pipWindowResized",function(){l(s(t))}),o.addClass("pip-markdown")}}}])}(),function(){"use strict";var e=angular.module("pipPopover",["pipPopover.Service"]);e.directive("pipPopover",function(){return{restrict:"EA",scope:!0,templateUrl:"popover/popover.html",controller:["$scope","$rootScope","$element","$timeout","$compile",function(e,t,n,o,i){function r(){d.addClass("opened"),$(".pip-popover-backdrop").focus(),e.params.timeout&&o(function(){l()},e.params.timeout)}function a(){e.params.cancelCallback&&e.params.cancelCallback(),l()}function l(){d.removeClass("opened"),o(function(){d.remove()},100)}function s(e){e.stopPropagation()}function p(){if(e.params.element){var t=$(e.params.element),n=t.offset(),o=t.width(),i=t.height(),r=$(document).width(),a=$(document).height(),l=d.find(".pip-popover");n&&l.css("max-width",r-(r-n.left)).css("max-height",a-(n.top+i)-32,0).css("left",n.left-l.width()+o/2).css("top",n.top+i+16)}}function c(){if(e.params.calcHeight!==!1){var t=d.find(".pip-popover"),n=t.find(".pip-title"),o=t.find(".pip-footer"),i=t.find(".pip-content"),r=t.height()-n.outerHeight(!0)-o.outerHeight(!0);i.css("max-height",Math.max(r,0)+"px").css("box-sizing","border-box")}}function u(){d.find(".pip-popover").find(".pip-content").css("max-height","100%"),p(),c()}var d,g;d=$(".pip-popover-backdrop"),d.on("click keydown scroll",a),d.addClass(e.params.responsive!==!1?"pip-responsive":""),o(function(){p(),e.params.template&&(g=i(e.params.template)(e),n.find(".pip-popover").append(g)),r()}),o(function(){c()},200),e.onPopoverClick=s,e=_.defaults(e,e.$parent),t.$on("pipPopoverResize",u),$(window).resize(u)}]}})}(),function(){"use strict";var e=angular.module("pipPopover.Service",[]);e.service("pipPopoverService",["$compile","$rootScope","$timeout",function(e,t,n){function o(n){var o,r,l,s;o=$("body"),o.find("md-backdrop").length>0||(i(),r=t.$new(),l=n&&_.isObject(n)?n:{},r.params=l,r.locals=l.locals,s=e(a)(r),o.append(s))}function i(){var e=$(".pip-popover-backdrop");e.removeClass("opened"),n(function(){e.remove()},100)}function r(){t.$broadcast("pipPopoverResize")}var a;return a="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>",{show:o,hide:i,resize:r}}])}(),function(){"use strict";var e=angular.module("pipRoutingProgress",["ngMaterial"]);e.directive("pipRoutingProgress",function(){return{restrict:"EA",replace:!0,scope:{showProgress:"&",logoUrl:"@"},templateUrl:"progress/routing_progress.html",controller:"pipRoutingProgressController"}}),e.controller("pipRoutingProgressController",["$scope","$element","$attrs",function(e,t,n){function o(){e.logoUrl&&i.attr("src",e.logoUrl)}var i=t.children("img");o()}])}(),function(){"use strict";var e=angular.module("pipToasts",["ngMaterial","pipControls.Translate"]);e.controller("pipToastController",["$scope","$mdToast","toast","$injector",function(e,t,n,o){var i=o.has("pipErrorDetailsDialog")?o.get("pipErrorDetailsDialog"):null;e.message=n.message,e.actions=n.actions,e.toast=n,0===n.actions.length?e.actionLenght=0:1===n.actions.length?e.actionLenght=n.actions[0].toString().length:e.actionLenght=null,e.showDetails=null!=i,e.onDetails=function(){t.hide(),i&&i.show({error:e.toast.error,ok:"Ok"},angular.noop,angular.noop)},e.onAction=function(e){t.hide({action:e,id:n.id,message:n.message})}}]),e.service("pipToasts",["$rootScope","$mdToast",function(e,t){function n(){var e;$.length>0&&(e=$[0],$.splice(0,1),o(e))}function o(e){m=e,t.show({templateUrl:"toast/toast.html",hideDelay:e.duration||v,position:"bottom left",controller:"pipToastController",locals:{toast:m,sounds:C}}).then(function(e){m.successCallback&&m.successCallback(e),m=null,n()},function(e){m.cancelCallback&&m.cancelCallback(e),m=null,n()})}function i(e){m&&"error"!==e.type?$.push(e):o(e)}function r(e){var t=[];_.each($,function(n){n.type&&n.type===e||t.push(n)}),$=_.cloneDeep(t)}function a(e){_.remove($,{id:e})}function l(e){return _.find($,{id:e})}function s(){$=_.reject($,function(e){return"error"===e.type}),m&&"error"===m.type&&(t.cancel(),n())}function p(){f()}function c(e,t,n,o,r){i({id:r||null,type:"notification",message:e,actions:t||["ok"],successCallback:n,cancelCallback:o,duration:h})}function u(e,t,n,o){i({id:o||null,type:"message",message:e,actions:["ok"],successCallback:t,cancelCallback:n})}function d(e,t,n,o,r){i({id:o||null,error:r,type:"error",message:e,actions:["ok"],successCallback:t,cancelCallback:n})}function g(){t.cancel(),$=[]}function f(e){e?r(e):(t.cancel(),$=[])}var m,v=2e4,h=2e4,$=[],C={};return e.$on("$stateChangeSuccess",s),e.$on("pipSessionClosed",p),e.$on("pipIdentityChanged",p),{showNotification:c,showMessage:u,showError:d,hideAllToasts:g,clearToasts:f,removeToastsById:a,getToastById:l}}])}(),function(){"use strict";var e=angular.module("pipUnsavedChanges",[]);e.directive("pipUnsavedChanges",["$window","$rootScope",function(e,t){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave"},link:function(n){e.onbeforeunload=function(){if(n.unsavedChangesAvailable())return t.$routing=!1,n.unsavedChangesMessage};var o=n.$on("$stateChangeStart",function(o){n.unsavedChangesAvailable()&&!e.confirm(n.unsavedChangesMessage)?(t.$routing=!1,o.preventDefault()):_.isFunction(n.afterLeave)&&n.afterLeave()});n.$on("$destroy",function(){e.onbeforeunload=null,o()})}}}])}();
!function(){"use strict";angular.module("pipLists",["pipFocused","pipSelected","pipInfiniteScroll","pipTagList"])}(),function(e){try{e=angular.module("pipLists.Templates")}catch(t){e=angular.module("pipLists.Templates",[])}e.run(["$templateCache",function(e){e.put("tag_list/tag_list.html",'<div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + pipType + \'-chips\'}}" ng-if="pipType && !pipTypeLocal"><span>{{pipType.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + pipType + \'-chips\'}}" ng-if="pipType && pipTypeLocal"><span>{{pipTypeLocal.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4" ng-repeat="tag in pipTags"><span>{{::tag}}</span></div>')}])}(),function(){"use strict";var e=angular.module("pipList.Translate",[]);e.filter("translate",["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return t?t.translate(e)||e:e}}])}(),function(){"use strict";var e=angular.module("pipFocused",[]);e.directive("pipFocused",["$timeout","$mdConstant",function(e,t){return{require:"?ngModel",link:function(n,i,p){function l(){var e=c?".pip-focusable":".pip-focusable:visible";r=i.find(e),a=r.length,r.on("focus",function(){i.addClass("pip-focused-container"),$(this).addClass("md-focused")}).on("focusout",function(){i.removeClass("pip-focused-container")})}function o(e){var n=e.which||e.keyCode;if(n==t.KEY_CODE.LEFT_ARROW||n==t.KEY_CODE.UP_ARROW||n==t.KEY_CODE.RIGHT_ARROW||n==t.KEY_CODE.DOWN_ARROW){e.preventDefault();var i=n==t.KEY_CODE.RIGHT_ARROW||n==t.KEY_CODE.DOWN_ARROW?1:-1,p=r.index(r.filter(".md-focused"))+i;p>=0&&p<a&&r[p].focus()}}var r,a,c=p.pipWithHidden;e(l),i.on("keydown",o),n.$watch(p.ngModel,function(){e(l)},!0)}}}])}(),function(){"use strict";var e=angular.module("pipInfiniteScroll",[]);e.directive("pipInfiniteScroll",["$rootScope","$window","$interval","$parse",function(e,t,n,i){var p=500;return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(i,l,o){function r(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function a(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+c(e)}function c(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function s(e){return E=parseFloat(e)||0}function u(e){if(S=!e,S&&v)return v=!1,D()}function d(e){return T=e}function f(e){if(null!=g&&g.unbind("scroll",D),g=e,null!=e)return g.bind("scroll",D)}function m(e){if(null!=e&&0!==e.length){if(e instanceof HTMLElement?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=l.parents().find(e)),null!=e&&(!Array.isArray(e)||Array.isArray(e)&&e.length>0))return f(e);throw new Error("Invalid pip-scroll-container attribute.")}}var g,v=null,h=!0,E=null,S=null,C=null,T=!1,$=angular.element(t),D=function(){var t,n,p,o,s;return g===$?(t=r(g)+c(g[0].document.documentElement),p=a(l)+r(l)):(t=r(g),n=0,void 0!==a(g)&&(n=a(g)),p=a(l)-n+r(l)),T&&(p=r((l[0].ownerDocument||l[0].document).documentElement)),o=p-t,s=o<=r(g)*E+1,s?(v=!0,S?i.$$phase||e.$$phase?i.pipInfiniteScroll():i.$apply(i.pipInfiniteScroll):void 0):v=!1};return null!=p&&(D=_.throttle(D,p)),i.$on("$destroy",function(){if(g.unbind("scroll",D),null!=C)return C(),C=null}),i.$watch("pipScrollDistance",s),s(i.pipScrollDistance),i.$watch("pipScrollDisabled",u),u(i.pipScrollDisabled),i.$watch("pipScrollUseDocumentBottom",d),d(i.pipScrollUseDocumentBottom),f($),i.pipScrollListenForEvent&&(C=e.$on(i.pipScrollListenForEvent,D)),i.$watch("pipScrollContainer",function(e){e!==g&&m(e)}),m(i.pipScrollContainer||[]),null!=o.pipScrollParent&&f(angular.element(l.parent())),null!=o.pipScrolImmediateCheck&&(h=i.$eval(o.pipScrolImmediateCheck)),n(function(){if(h)return D()},0,1)}}}])}(),function(){"use strict";var e=angular.module("pipSelected",[]);e.directive("pipSelected",["$parse","$mdConstant","$timeout",function(e,t,n){return{restrict:"A",scope:!1,link:function(n,i,p){function l(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function o(e){var t=e.itemIndex,n=e.itemId,p=e.items||i.find(h+v),l=p.length,o=function(){return e.item?e.item:(void 0===t&&t===-1&&(t=p.index(p.filter("[pip-id="+n+"]"))),t>=0&&t<l?p[t]:void 0)}(),c=e.raiseEvent;o&&(i.find(h).removeClass("selected md-focused"),o=angular.element(o).addClass("selected md-focused").focus(),g||a(o),c&&r(p))}function r(e){function t(){var t=angular.element(e[E]),l=t.attr("pip-id");s&&s(n,E),d&&d(n,l),f&&f(n,{$event:{target:i,item:t,index:E,id:l,newIndex:E,oldIndex:p}})}var p=E;E=-1;for(var l=0;l<e.length;l++)if($(e[l]).hasClass("selected")){E=l;break}p!=E&&E!==-1&&n.$apply(t)}function a(e){if(!g){var t=i.offset().top,n=i.height(),p=t+n,l=e.offset().top,o=e.outerHeight(!0),r=l+o,a=i.scrollTop();t>l?i.scrollTop(a+l-t):p<r&&i.scrollTop(a+r-p)}}var c=p.pipSelected?e(p.pipSelected):null,s=c?c.assign:null,u=p.pipSelectedId?e(p.pipSelectedId):null,d=u?u.assign:null,f=p.pipSelect?e(p.pipSelect):null,m=p.pipEnterSpacePress?e(p.pipEnterSpacePress):null,g=l(p.pipNoScroll),v=l(p.pipSkipHidden)?":visible":"",h=l(p.pipTreeList)?".pip-selectable-tree":".pip-selectable",E=c(n),S=i.attr("tabindex"),C=p.pipSelectedWatch;i.attr("tabindex",S||0),l(p.pipTreeList)?n.$watch(u,function(e){setTimeout(function(){o({itemId:e,raiseEvent:!0})},0)}):n.$watch(c,function(e){o({itemIndex:e})}),C&&n.$watch(C,function(){setTimeout(function(){E=c(n),o({itemIndex:E})},100)}),o({itemIndex:E,items:i.find(h)}),i.on("click touchstart",h,function(e){o({item:e.currentTarget,raiseEvent:!0})}),i.on("keydown",function(e){var p=e.which||e.keyCode;if(p==t.KEY_CODE.ENTER||p==t.KEY_CODE.SPACE)e.preventDefault(),e.stopPropagation(),m&&m(n,{$event:{target:i,index:E,item:i.find(".selected")}});else if(p==t.KEY_CODE.LEFT_ARROW||p==t.KEY_CODE.RIGHT_ARROW||p==t.KEY_CODE.UP_ARROW||p==t.KEY_CODE.DOWN_ARROW){e.preventDefault(),e.stopPropagation();var l=i.find(h+v),r=p==t.KEY_CODE.RIGHT_ARROW||p==t.KEY_CODE.DOWN_ARROW?1:-1,a=E+r;o({itemIndex:a,items:l,raiseEvent:!0})}}),i.on("focusin",function(e){var t,p=i.find(h+".selected");p.addClass("md-focused"),0===p.length&&(E=c(n),t=i.find(h+v),o({itemIndex:E||0,items:t,raiseEvent:!0}))}),i.on("focusout",function(e){i.find(h+".md-focused"+v).removeClass("md-focused")})}}}])}(),function(e){"use strict";var t=e.module("pipTagList",["pipList.Translate"]);t.directive("pipTagList",["$parse",function(e){return{restrict:"EA",scope:{pipTags:"=",pipType:"=",pipTypeLocal:"="},templateUrl:"tag_list/tag_list.html",controller:["$scope","$element","$attrs",function(t,n,i){function p(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}var l;l=e(i.pipTags),n.css("display","block"),t.tags=l(t),p(i.pipRebind)&&t.$watch(l,function(){t.tags=l(t)}),n.addClass("pip-tag-list")}]}}])}(window.angular);
!function(e){"use strict";e.module("pipDateTimes",["pipDate","pipDateRange","pipTimeRangeEdit","pipTimeRange","pipDatesUtils","pipDateFormat","pipDateTimeFilters","pipDates.Translate"])}(window.angular),function(e){try{e=angular.module("pipDates.Templates")}catch(t){e=angular.module("pipDates.Templates",[])}e.run(["$templateCache",function(e){e.put("date/date.html",'<div class="pip-date layout-row flex" tabindex="-1"><md-input-container class="tm0 flex"><md-select class="pip-date-day tm0 flex" ng-disabled="disableControls" ng-model="day" placeholder="{{dayLabel}}" ng-change="onDayChanged()"><md-option ng-value="opt" ng-repeat="opt in days track by opt">{{:: opt }}</md-option></md-select></md-input-container><div class="w16 flex-fixed"></div><md-input-container class="tm0 flex"><md-select class="pip-date-month tm0 flex" ng-disabled="disableControls" ng-model="month" placeholder="{{monthLabel}}" ng-change="onMonthChanged()"><md-option ng-value="opt.id" ng-repeat="opt in months track by opt.id">{{:: opt.name }}</md-option></md-select></md-input-container><div class="w16 flex-fixed"></div><md-input-container class="tm0 flex"><md-select class="pip-date-year tm0 flex" ng-disabled="disableControls" ng-model="year" placeholder="{{yearLabel}}" ng-change="onYearChanged()"><md-option ng-value="opt" ng-repeat="opt in years track by opt">{{:: opt }}</md-option></md-select></md-input-container></div>')}])}(),function(e){try{e=angular.module("pipDates.Templates")}catch(t){e=angular.module("pipDates.Templates",[])}e.run(["$templateCache",function(e){e.put("date_range/date_range.html",'<div class="pip-date-range layout-row flex" tabindex="-1"><md-input-container ng-show="isDay()" class="tm0 pip-day flex" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-day w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onDayClick()" ng-model="day" ng-change="onDayChanged()" placeholder="{{dayLabel}}" aria-label="DAY"><md-option ng-value="opt" ng-repeat="opt in days track by opt">{{nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container ng-show="isWeek()" class="tm0 flex" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-week w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" ng-model="week" ng-change="onWeekChange()" placeholder="{{weekLabel}}" aria-label="WEEK"><md-option ng-value="opt.id" ng-repeat="opt in weeks track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'w16\': $mdMedia(\'gt-xs\'), \'w8\': $mdMedia(\'xs\')}" ng-show="isDay() || isWeek()"></div><md-input-container ng-show="isMonth() && !monthFormatShort" class="tm0 flex min-w72" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-month w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onMonthClick()" ng-model="month" ng-change="onMonthChanged()" placeholder="{{monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in months track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container ng-show="isMonth() && monthFormatShort" class="flex tm0" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-month w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onMonthClick()" ng-model="month" ng-change="onMonthChanged()" placeholder="{{monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in shortMonths track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'w16\': $mdMedia(\'gt-xs\'), \'w8\': $mdMedia(\'xs\')}" ng-show="isMonth()"></div><md-input-container class="tm0 flex" ng-class="{\'flex-fixed\' : $mdMedia(\'gt-xs\')}"><md-select class="select-year w-stretch" ng-class="{\'pip-no-line\' : pipNoLine}" ng-disable="{{disableControls}}" md-on-open="onYearClick()" ng-model="year" ng-change="onYearChanged()" placeholder="{{yearLabel}}" aria-label="YEAR"><md-option ng-value="opt" ng-repeat="opt in years track by opt">{{ opt }}</md-option></md-select></md-input-container></div>')}])}(),function(e){try{e=angular.module("pipDates.Templates")}catch(t){e=angular.module("pipDates.Templates",[])}e.run(["$templateCache",function(e){e.put("time_range/time_range.html",'<p><span ng-if="data.start != null">{{data.start | formatShortDateTime}}</span> <span class="rm4 lm4" ng-if="data.start && data.end">-</span> <span ng-if="data.end != null">{{data.end | formatShortDateTime}}</span></p>')}])}(),function(e){try{e=angular.module("pipDates.Templates")}catch(t){e=angular.module("pipDates.Templates",[])}e.run(["$templateCache",function(e){e.put("time_range_edit/time_range_edit.html",'<div class="event-edit layout-row layout-xs-column flex layout-align-start-start"><div flex="47" class="w-stretch rm24-flex0"><p class="text-caption text-grey tm0">{{startLabel}}</p><div class="layout-row layout-align-space-between-center"><div class="rm16 pip-datepicker-container" flex="49"><md-datepicker ng-model="data.startDate" xmd-placeholder="{{startLabel}}" ng-change="onChangeStartDate()" ng-disabled="isDisabled()" aria-label="START-DATE"></md-datepicker></div><div flex=""><md-input-container class="w-stretch tm0"><md-select aria-label="START-TIME" class="tm0 bm0" ng-model="data.startTime" ng-disabled="isDisabled()" ng-change="onChangeStartTime()"><md-option ng-value="opt.id" ng-repeat="opt in intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex="47" class="w-stretch"><p class="text-caption text-grey tm0">{{endLabel}}</p><div class="layout-row layout-align-space-between-center"><div class="rm16 pip-datepicker-container flex-49"><md-datepicker ng-model="data.endDate" xmd-placeholder="{{endLabel}}" ng-disabled="isDisabled()" ng-change="onChangeEndDate()" aria-label="END-DATE"></md-datepicker></div><div flex=""><md-input-container class="w-stretch tm0"><md-select aria-label="END-TIME" class="tm0 bm0" ng-model="data.endTime" ng-change="onChangeEndTime()" ng-disabled="isDisabled()"><md-option ng-value="opt.id" ng-repeat="opt in intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>')}])}(),function(e,t){"use strict";var a=e.module("pipDate",["pipDates.Templates"]);a.directive("pipDate",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",ngChange:"&"},templateUrl:"date/date.html",controller:"pipDateController"}}),a.controller("pipDateController",["$scope","$element",function(e,a){function n(e,t){var a,n=31,i=[];for(4===e||6===e||9===e||11===e?n=30:2===e&&(n=t&&t%4===0?29:28),a=1;a<=n;a++)i.push(a);return i}function i(){var e,t=[];for(e=1;e<=12;e++)t.push({id:e,name:""});return t}function r(){var t,a=(new Date).getFullYear(),n="future"===e.timeMode?a:a-100,i="past"===e.timeMode?a:a+100,r=[];if("past"===e.timeMode)for(t=i;t>=n;t--)r.push(t);else for(t=n;t<=i;t++)r.push(t);return r}function o(){var t=n(e.month,e.year);e.days.length!==t.length&&(e.day>t.length&&(e.day=t.length),e.days=t)}function l(a){var i=a?t.isDate(a)?a:new Date(a):null,r=i?i.getDate():null,o=i?i.getMonth()+1:null,l=i?i.getFullYear():null;e.month!==o&&e.year!==l&&(e.days=n(e.month,e.year)),e.day=r,e.month=o,e.year=l}function d(){var t;e.day&&e.month&&e.year&&(t=new Date(e.year,e.month-1,e.day,0,0,0,0),e.model=t,e.ngChange())}var u;e.onDayChanged=function(){d()},e.onMonthChanged=function(){o(),d()},e.onYearChanged=function(){o(),d()},u=e.model?t.isDate(e.model)?e.model:new Date(e.model):null,e.day=u?u.getDate():null,e.month=u?u.getMonth()+1:null,e.year=u?u.getFullYear():null,e.dayLabel="day",e.monthLabel="month",e.yearLabel="year",e.days=n(e.month,e.year),e.months=i(),e.years=r(),e.disableControls=!!e.disabled&&e.disabled(),e.$watch("model",function(e){l(e)}),e.$watch(e.disabled,function(t){e.disableControls=t})}])}(window.angular,window._),function(e,t){"use strict";var a=e.module("pipDateRange",["pipDates.Templates"]);a.directive("pipDateRange",function(){return{restrict:"EA",require:"ngModel",scope:{timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",pipChanged:"&",pipDateRangeType:"@",pipDateFormat:"@",pipNoLine:"@"},templateUrl:"date_range/date_range.html",controller:"pipDateRangeController"}}),a.controller("pipDateRangeController",["$scope","$element","$mdMedia","$rootScope",function(e,a,n,i){function r(){S.day=e.day,S.month=e.month,S.year=e.year,S.week=e.week,S.dateRangeType=e.pipDateRangeType,S.model=e.model}function o(){e.days=m(e.month,e.year),e.weeks=c(e.month,e.year),e.months=g(),e.shortMonths=g(!0),e.years=D()}function l(){(!b.model||b.model&&b.model.getTime()>=e.model.getTime())&&e.weeks&&e.weeks[e.week]&&e.weeks[e.week].id<=0&&(e.month<12?e.month+=1:(e.month=1,e.year+=1),o())}function d(){var t;t=e.model?new Date(e.model):null,e.day=t?t.getUTCDate():null,e.month=t?t.getUTCMonth()+1:null,e.year=t?t.getUTCFullYear():null,e.week=t?p(e.day,e.month-1,e.year):null,o(),"weekly"===e.pipDateRangeType?(l(),h()):f(),M()}function u(e,t){var a=31;return 4===e||6===e||9===e||11===e?a=30:2===e&&(a=t&&t%4===0?29:28),a}function m(t,a){var n,r,o,l;for(l=i.$language||"en",n=u(t,a),e.nameDays=[],r=[],o=1;o<=n;o++)r.push(o),e.nameDays.push(e.daysWeek[l][new Date(a,t-1,o).getDay()]);return r}function p(e,t,a){var n,i,r;return n=new Date(Date.UTC(a,t,e)),i=n.getUTCDay()?n.getUTCDay():7,r=1===i?e:e+1-i}function s(e,t,a){var n,i;return n=e+6>t?t-e-6:e+6,i=e>0?e:a+e,i.toString()+" - "+Math.abs(n).toString()}function c(e,t){var a,n,i,r;for(a=[],n=u(e,t),r=p(1,e-1,t),i=e-1?u(e-1,t):u(12,t-1);r<n+1;)a.push({id:r,name:s(r,n,i)}),r+=7;return a}function g(){var e,t;for(e=[],t=1;t<=12;t++)e.push({id:t,name:""});return e}function D(){var t,a,n,i=[];switch(e.timeMode){case"future":t=w,n=w+100;break;case"past":t=w-100,n=w;break;case"now":t=w-50,n=w+100;break;default:t=w-50,n=w+50}if("future"===e.timeMode)for(a=t;a<=n;a++)i.push(a);else for(a=n;a>=t;a--)i.push(a);return i}function f(){var t=m(e.month,e.year);switch(e.pipDateRangeType){case"monthly":e.day=1;break;case"yearly":e.month=1,e.day=1;break;default:e.days.length!==t.length&&e.day>t.length&&(e.day=t.length)}e.days=t}function h(){var t;t=c(e.month,e.year),e.week=p(e.week,e.month-1,e.year),e.weeks=t}function y(t){var a,n,i,r,o;a=t?new Date(t):null,n=a?a.getUTCDate():null,i=a?a.getUTCMonth()+1:null,r=a?a.getUTCFullYear():null,o=a?p(n,i-1,r):null,e.day===n&&e.month===i&&e.year===r&&e.week===o||(e.day=n,e.month=i,e.year=r,e.week=o,e.days=m(e.month,e.year),e.weeks=c(e.month,e.year))}function M(){var a;"weekly"===e.pipDateRangeType?(a=new Date(e.year,e.month-1,e.week,0,0,0,0),a=new Date(a.getTime()-6e4*a.getTimezoneOffset()),e.model=a):(a=new Date(e.year,e.month-1,e.day,0,0,0,0),a=new Date(a.getTime()-6e4*a.getTimezoneOffset()),e.model=a),b=t.cloneDeep(S),r(),e.onChange()}var T,w,C,v,b={},S={};T=new Date,w=T.getUTCFullYear(),C=T.getUTCMonth()+1,v=T.getUTCDate(),e.daysWeek={en:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ru:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},e.onDayChanged=function(){M()},e.onMonthChanged=function(){if("weekly"===e.pipDateRangeType){var t,a;t=new Date(Date.UTC(e.year,e.month-1,1)),a=t.getUTCDay()?t.getUTCDay():7,e.week=p(a,e.month-1,e.year),l(),h()}else f();M()},e.onYearChanged=function(){var t,a;t=new Date(Date.UTC(e.year,e.month-1,1)),a=t.getUTCDay()?t.getUTCDay():7,"weekly"===e.pipDateRangeType?(e.week=p(a,e.month-1,e.year),h(),l()):f(),M()},e.onWeekChange=function(){"weekly"===e.pipDateRangeType?(h(),l()):f(),M()},e.isDay=function(){return"daily"===e.pipDateRangeType},e.isWeek=function(){return"weekly"===e.pipDateRangeType},e.isMonth=function(){return"daily"===e.pipDateRangeType||"weekly"===e.pipDateRangeType||"monthly"===e.pipDateRangeType},e.onChange=function(){e.pipChanged&&e.pipChanged()},e.$mdMedia=n,d(),e.disableControls=!!e.disabled&&e.disabled(),e.$watch("model",function(e,t){e!==t&&y(e)}),e.$watch(e.disabled,function(t){e.disableControls=t}),e.$watch("pipDateRangeType",function(e,t){e!==t&&t&&d()}),e.onYearClick=function(){e.year||(e.year=w)},e.onMonthClick=function(){e.month||(e.month=C)},e.onDayClick=function(){e.year||(e.day=v)}}])}(window.angular,window._),function(){"use strict";var e=angular.module("pipDates.Translate",[]);e.filter("translate",["$injector",function(e){var t=e.has("pipTranslate")?e.get("pipTranslate"):null;return function(e){return t?t.translate(e)||e:e}}])}(),function(){"use strict";var e=angular.module("pipDateTimeFilters",["pipDateFormat"]);e.filter("formatDate",["pipDateFormat",function(e){return function(t,a){return e.formatDate(t,a)}}]),e.filter("formatLongDate",["pipDateFormat",function(e){return function(t){return e.formatLongDate(t)}}]),e.filter("formatLongDateWithYear",["pipDateFormat",function(e){return function(t){return e.formatLongDateWithYear(t)}}]),e.filter("formatMonth",["pipDateFormat",function(e){return function(t,a){return e.formatMonth(t,a)}}]),e.filter("formatShortDate",["pipDateFormat",function(e){return function(t){return e.formatShortDate(t)}}]),e.filter("formatShortDateWithYear",["pipDateFormat",function(e){return function(t){return e.formatShortDateWithYear(t)}}]),e.filter("formatLongMonth",["pipDateFormat",function(e){return function(t){return e.formatLongMonth(t)}}]),e.filter("formatYear",["pipDateFormat",function(e){return function(t){return e.formatYear(t)}}]),e.filter("formatShortWeek",["pipDateFormat",function(e){return function(t){return e.formatShortWeek(t)}}]),e.filter("formatTime",["pipDateFormat",function(e){return function(t,a){return e.formatTime(t,a)}}]),e.filter("formatLongTime",["pipDateFormat",function(e){return function(t){return e.formatLongTime(t)}}]),e.filter("formatShortTime",["pipDateFormat",function(e){return function(t){return e.formatShortTime(t)}}]),e.filter("formatLongDateTime",["pipDateFormat",function(e){return function(t){return e.formatLongDateTime(t)}}]),e.filter("formatShortDateTime",["pipDateFormat",function(e){return function(t){return e.formatShortDateTime(t)}}]),e.filter("formatElapsedInterval",["pipDateFormat",function(e){return function(t){return e.formatElapsedInterval(t)}}]),e.filter("formatElapsedTime",["pipDateFormat",function(e){return function(t){return e.formatElapsedTime(t)}}]),e.filter("formatMillisecondsToSeconds",["pipDateFormat",function(e){return function(t){return e.formatMillisecondsToSeconds(t)}}]),e.filter("formatDateRange",["pipDateFormat",function(e){return function(t,a){return e.formatDateRange(t,a)}}]),e.filter("formatDateTimeRange",["pipDateFormat",function(e){return function(t,a){return e.formatDateTimeRange(t,a)}}])}(),function(){"use strict";var e=angular.module("pipDateFormat",[]);e.config(function(){}),e.factory("pipDateFormat",["pipDates","$rootScope",function(e,t){function a(e){return e<10?"0"+e:e}function n(a,n,i){if(null==a)return"";var r=i||!1,a=_.isDate(a)?a:new Date(a),o=(new Date).getUTCFullYear(),l=a.getUTCFullYear(),d=a.getUTCMonth(),u=a.getUTCDate(),m=e.toStartWeek(a),p=e.toEndWeek(a,-1);return 0==r&&"d MMMM yyyy"==n&&o===l&&(n="MMMM d"),0==r&&"d MMM yyyy"==n&&o===l&&(n="MMM d"),"MMM d"==n&&"ru"==t.$language&&(n="d MMM"),"MMMM d"==n&&"ru"==t.$language&&(n="d MMMM"),"d MMMM yyyy"==n?""+u+" "+longMonthName+" "+l:"MMMM d, yyyy"==n?""+monthName+" "+u+", "+l:"d MMM yyyy"==n?""+u+" "+shortMonthName+" "+l:"MMM d, yyyy"==n?""+shortMonthName+" "+u+", "+l:"d MMMM"==n?""+u+" "+longMonthName:"d MMM"==n?""+u+" "+shortMonthName:"MMM d"==n?""+shortMonthName+" "+u:"MMMM d"==n?""+longMonthName+" "+u:"yyyy/M/d"==n?""+l+"/"+d+"/"+u:"yyy-M-d"==n?""+l+"-"+d+"-"+u:"MMMM"==n?""+longMonthName+" "+l:"yyyy"==n?""+l:"ww"==n?""+m.getUTCDate()+" - "+p.getUTCDate()+" "+monthName+" "+l:""+u+" "+monthName+" "+l}function i(e){return n(e,"d MMMM yyyy")}function r(e){return n(e,"d MMM yyyy",!0)}function o(e){return n(e,"d MMMM yyyy",!0)}function l(e){return n(e,"d MMM yyyy")}function d(e){return n(e,"MMMM")}function u(e){return n(e,"yyyy")}function m(e){return n(e,"ww")}function p(e){return n(e,"d MMM")}function s(e){return"ru"==t.$language?n(e,"d MMMM"):n(e,"MMMM d")}function c(e,a){return e=e?_.isDate(e)?e:new Date(e):null,a=a?_.isDate(a)?a:new Date(a):null,null==e?"ru"==t.$language?n(a,"d MMM yyyy",!0):n(a,"MMM d, yyyy",!0):null==a||e==a?"ru"==t.$language?n(e,"d MMM yyyy",!0):n(e,"MMM d, yyyy",!0):e.getUTCFullYear()!==a.getUTCFullYear()?"ru"==t.$language?n(e,"d MMM yyyy",!0)+"-"+n(a,"d MMM yyyy",!0):n(e,"MMM d, yyyy",!0)+"-"+n(a,"MMM d, yyyy",!0):n(e,"d MMM")+" - "+n(a,"d MMM")+((new Date).getUTCFullYear()!==e.getUTCFullYear()?" "+n(e,"yyyy"):"")}function g(e,t){if(e=e?_.isDate(e)?e:new Date(e):null,t=t?_.isDate(t)?t:new Date(t):null,null==e&&null==t)return"";if(null==e)return T(t);if(null==t||e==t)return T(e);var a,i,r,o,l,d;return a=e.getUTCDate(),i=e.getUTCMonth(),r=e.getUTCFullYear(),o=t.getUTCDate(),l=t.getUTCMonth(),d=t.getUTCFullYear(),r!==d?n(e,"d MMM")+", "+r+" "+D(e,"hh:mm")+" - "+n(t,"d MMM")+", "+d+" "+D(t,"hh:mm"):i!=l&&!a!=o?n(e,"d MMM")+", "+D(e,"hh:mm")+" - "+n(t,"d MMM")+", "+D(t,"hh:mm"):D(e,"hh:mm")+" - "+D(t,"hh:mm")}function D(e,t){if(null==e)return"";e=_.isDate(e)?e:new Date(e);var n=e.getHours(),i=e.getMinutes(),r=e.getSeconds(),o="";return"hh:mm:ss"==t?""+a(n)+":"+a(i)+":"+a(r)+o:"hh:mm"==t?""+a(n)+":"+a(i)+o:""+a(n)+":"+a(i)+":"+a(r)+o}function f(e,t){return null==e?"":"MONTH_SHORT_"+e}function h(e){return D(e,"hh:mm:ss")}function y(e){return D(e,"hh:mm")}function M(e){return null==e?"":(e=_.isDate(e)?e:new Date(e),i(e)+" "+h(e))}function T(e){return null==e?"":(e=_.isDate(e)?e:new Date(e),l(e)+" "+y(e))}function w(e,t){if(null==e)return"";e=_.isDate(e)?e:new Date(e);var a=new Date,n=Math.floor((a.getTime()+a.getTimezoneOffset()-(e.getTime()+e.getTimezoneOffset()))/1e3);if(n<1)return"ELAPSED_JUST_NOW";var i,r,o,l,d,u,m;m=n%60,n=Math.floor(n/60),u=n%60,n=Math.floor(n/60),d=n%24,n/=24,i=Math.floor(n/365),n-=365*i,r=Math.floor(n/30),l=Math.floor(n-30*r),l%7==0?(o=Math.floor(l/7),l=0):o=0}function C(e){return w(e,"interval")}function v(e){return Math.floor(e/1e3)}return{formatDate:n,formatLongDate:i,formatShortDate:l,formatShortDateWithYear:r,formatLongDateWithYear:o,formatLongMonth:d,formatMonth:f,formatYear:u,formatShortWeek:m,formatShortDayAndMonth:p,formatLongDayAndMonth:s,formatDateRange:c,formatDateTimeRange:g,formatTime:D,formatLongTime:h,formatShortTime:y,formatLongDateTime:M,formatShortDateTime:T,formatElapsedTime:w,formatElapsedInterval:C,formatMillisecondsToSeconds:v}}])}(),function(e,t){"use strict";var a=e.module("pipTimeRange",[]);a.directive("pipTimeRange",function(){return{restrict:"EA",scope:{pipStartDate:"=",pipEndDate:"="},templateUrl:"time_range/time_range.html",link:function(e,a,n){function i(e){return e?new Date(e):null}function r(){null!==e.pipStartDate&&void 0!==e.pipStartDate&&(e.data.start=t.isDate(e.pipStartDate)?e.pipStartDate:i(e.pipStartDate))}function o(){null!==e.pipEndDate&&void 0!==e.pipEndDate&&(e.data.end=t.isDate(e.pipEndDate)?e.pipEndDate:i(e.pipEndDate))}function l(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}e.data={},e.data.start=null,e.data.end=null,r(),o(),l(n.pipRebind)&&(e.$watch("pipStartDate",function(){e.data.start=null,r()}),e.$watch("pipEndDate",function(){e.data.end=null,o()})),a.addClass("pip-time-range")}}})}(window.angular,window._),function(e,t){"use strict";var a=e.module("pipTimeRangeEdit",["pipDatesUtils"]);a.directive("pipTimeRangeEdit",function(){return{restrict:"EA",scope:{pipStartDate:"=",pipChanged:"&",pipEndDate:"=",pipStartLabel:"@",pipEndLabel:"@",disabled:"&ngDisabled",pipSize:"="},templateUrl:"time_range_edit/time_range_edit.html",controller:"pipTimeRangeEditController"}}),a.controller("pipTimeRangeEditController",["$scope","$element","$attrs","pipDates","pipTranslate",function(e,a,n,i,r){function o(e){return e?new Date(e):null}function l(){var t,a;return e.data.startDate&&e.data.endDate?(t=new Date(e.data.startDate.getTime()+60*e.data.startTime*1e3),a=new Date(e.data.endDate.getTime()+60*e.data.endTime*1e3),a-t):null}function d(){var t,a,n;return e.data.startDate?(e.data.startTime||(e.data.endTime?e.data.startTime=0===e.data.endTime?0:e.data.endTime-30:(t=new Date,t=t.getTime()-i.toStartDay(t),e.data.startTime=30*Math.floor(t/18e5))),e.data.endDate?(a=new Date(e.data.startDate.getTime()+60*e.data.startTime*1e3),void(e.data.duration?(n=new Date(a.getTime()+e.data.duration),e.data.endDate=i.toStartDay(n),n=n.getTime()-e.data.endDate.getTime(),e.data.endTime=30*Math.floor(n/18e5)):(n=new Date(e.data.endDate.getTime()+60*e.data.endTime*1e3),a>=n&&(e.data.endDate=i.toStartDay(new Date(a.getTime()+18e5)),e.data.endTime=(e.data.startTime+30)%1440)))):void(e.data.endTime=null)):void(e.data.startTime=null)}function u(){var t,a,n;return e.data.endDate?(e.data.endTime||(e.data.startTime?e.data.endTime=1410===e.data.startTime?1410:e.data.startTime+30:(t=new Date,t=t.getTime()-i.toStartDay(t),e.data.endTime=30*Math.floor(t/18e5))),e.data.startDate?(a=new Date(e.data.startDate.getTime()+60*e.data.startTime*1e3),n=new Date(e.data.endDate.getTime()+60*e.data.endTime*1e3),a>=n&&(e.data.startDate=i.toStartDay(new Date(n.getTime()-18e5)),e.data.startTime=e.data.endTime%1440===0?1410:e.data.endTime-30),void(e.data.duration=l())):void(e.data.startTime=null)):void(e.data.endTime=null)}function m(){var t;e.data.bind=!1,e.data.startDate&&(t=e.data.startTime?60*e.data.startTime*1e3:0,e.pipStartDate=new Date(e.data.startDate.getTime()+t)),e.data.endDate&&(t=e.data.endTime?60*e.data.endTime*1e3:0,e.pipEndDate=new Date(e.data.endDate.getTime()+t)),e.data.bind=!0}function p(){var a,n;null!==e.pipStartDate&&void 0!==e.pipStartDate&&(a=t.isDate(e.pipStartDate)?e.pipStartDate:null,a||(a=o(e.pipStartDate)),e.data.startDate=i.toStartDay(a),e.data.startTime=(new Date(a)-e.data.startDate)/6e4),null!==e.pipEndDate&&void 0!==e.pipEndDate&&(n=t.isDate(e.pipEndDate)?e.pipEndDate:null,a||(n=o(e.pipEndDate)),e.data.endDate=i.toStartDay(n),e.data.endTime=(new Date(n)-e.data.endDate)/6e4),d(),e.data.duration=l(),m()}function s(){var e,a,n,i;for(e=[],a=0;a<24;a++)for(n=0;n<2;n++)i=30*n,e.push({id:60*a+i,time:t.pad(a.toString(),3,"0").substr(0,2)+":"+t.pad(i.toString(),2,"0")});return e}function c(){e.data.startDate=null,e.data.startTime=null,e.data.endDate=null,e.data.endTime=null,e.data.duration=null}e.intervalTimeCollection=s(),e.data={},e.startLabel=e.pipStartLabel?r.translate(e.pipStartLabel):r.translate("EVENT_NEW_START_TIME"),e.endLabel=e.pipEndLabel?r.translate(e.pipEndLabel):r.translate("EVENT_NEW_END_TIME"),c(),p(),e.onChangeStartDate=function(){d(),e.data.duration=l(),m(),e.pipChanged()},e.onChangeEndDate=function(){u(),e.data.duration=l(),m(),e.pipChanged()},e.onChangeStartTime=function(){e.data.startDate||(e.data.startDate=i.toStartDay(new Date)),d(),e.data.duration=l(),m(),e.pipChanged()},e.onChangeEndTime=function(){e.data.endDate||(e.data.endDate=i.toStartDay(new Date)),u(),e.data.duration=l(),m(),e.pipChanged()},e.isDisabled=function(){return!!e.disabled&&e.disabled()},e.$watchGroup([e.pipStartDate,e.pipEndDate],function(){e.data.bind&&(c(),p())}),e.$watch(e.disabled,function(t){e.disableControls=t}),a.addClass("pip-time-range-edit")}])}(window.angular,window._),function(){"use strict";var e=angular.module("pipDatesUtils",[]);e.factory("pipDates",function(){var e={};return e.addHours=function(e,t){e=_.isDate(e)?e:new Date(e);var a=e.getTime()+36e5*t;return new Date(a)},e.toStartDay=function(e){return e=_.isDate(e)?e:new Date(e),new Date(e.getFullYear(),e.getMonth(),e.getDate())},e.toEndDay=function(e,t){e=_.isDate(e)?e:new Date(e),t=null!=t?t:0;var a=new Date(e.getFullYear(),e.getMonth(),e.getDate());return new Date(a.getTime()+864e5+t)},e.toStartWeek=function(e){e=_.isDate(e)?e:new Date(e);var t=e.getDay()?e.getDay():7;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),new Date(e.getTime()-24*(t-1)*36e5)},e.toEndWeek=function(e,t){e=_.isDate(e)?e:new Date(e),t=null!=t?t:0;var a=e.getDay()?e.getDay():7;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),new Date(e.getTime()+24*(8-a)*36e5+t)},e.toStartMonth=function(e){return e=_.isDate(e)?e:new Date(e),new Date(e.getFullYear(),e.getMonth(),1)},e.toEndMonth=function(e,t){e=_.isDate(e)?e:new Date(e);var a=e.getMonth()+1,n=e.getFullYear();return a>11&&(n++,a=0),e=new Date(n,a,1),null!=t&&(e=new Date(e.getTime()+t)),e},e.toStartYear=function(e){return e=_.isDate(e)?e:new Date(e),new Date(e.getFullYear(),0,1)},e.toEndYear=function(e,t){return e=_.isDate(e)?e:new Date(e),e=new Date(e.getFullYear()+1,0,1),null!=t&&(e=new Date(e.getTime()+t)),e},e.toUTCDate=function(e,t,a){return new Date(Date.UTC(e,t,a))},e.toUTCDate=function(e){return new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))},e.fromUTCDate=function(e){return null==e&&(e=new Date),new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},e.toUTCStartWeek=function(e){_.isDate(e)||(e=new Date(e),e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate())));var t=e.getDay()?e.getDay():7;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),e=1!=t?new Date(e.getTime()-24*(t-1)*36e5):e,new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))},e.toUTCEndWeek=function(e,t){_.isDate(e)||(e=new Date(e),e=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))),t=null!=t?t:0;var a=e.getDay()?e.getDay():7;return e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),e=new Date(e.getTime()+24*(8-a)*36e5+t),new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()))},e})}();
!function(t){"use strict";t.module("pipDialogs",["pipInformationDialog","pipConfirmationDialog","pipOptionsDialog","pipOptionsBigDialog","pipErrorDetailsDialog"])}(window.angular),function(t){try{t=angular.module("pipDialogs.Templates")}catch(e){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("confirmation/confirmation.html",'<md-dialog class="pip-dialog pip-confirmation-dialog layout-column" width="400" md-theme="{{::theme}}"><div class="pip-header"><h3>{{:: title}}</h3></div><div class="pip-footer"><div><md-button ng-click="onCancel()">{{:: cancel}}</md-button><md-button class="md-accent" ng-click="onOk()">{{:: ok}}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipDialogs.Templates")}catch(e){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("error_details/error_details.html",'<md-dialog class="pip-dialog pip-error-details-dialog layout-column" width="400" md-theme="{{theme}}"><div class="pip-body"><div class="pip-header"><h3>{{::errorDetails | translate}}</h3></div><div class="layout-row layout-align-start-center error-section text-body2 color-secondary-text" ng-if="error.code || (error.data && error.data.code)">{{::errorCode | translate}}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="error.code || (error.data && error.data.code)">{{error.code || error.data.code}}</div><div class="layout-row layout-align-start-center error-section text-body2 color-secondary-text" ng-if="error.path || (error.data && error.data.path)">{{::errorPath | translate}}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="error.path || (error.data && error.data.path)">{{error.path || error.data.path}}</div><div class="error-section text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="error.error || (error.data && error.data.error)">{{::errorText | translate}}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="error.error || (error.data && error.data.error)">{{error.error || error.data.error}}</div><div class="error-section text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="error.method || (error.data && error.data.method)">{{::errorMethod | translate}}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="error.method || (error.data && error.data.method)">{{error.method || error.data.method}}</div><div class="error-section text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="error.message || (error.data && error.data.message)">{{::errorMessage | translate}}</div><div class="layout-row layout-align-start-center text-subhead1" ng-if="error.message || (error.data && error.data.message)">{{error.message || error.data.message}}</div></div><div class="pip-footer"><div><md-button class="md-accent m0" ng-click="onOk()">{{::dismissButton | translate}}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipDialogs.Templates")}catch(e){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("information/information.html",'<md-dialog class="pip-dialog pip-information-dialog layout-column" width="400" md-theme="{{theme}}"><div class="pip-header"><h3>{{ title | translate }}</h3></div><div class="pip-body"><div class="pip-content">{{ content }}</div></div><div class="pip-footer"><div><md-button class="md-accent" ng-click="onOk()">{{ ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipDialogs.Templates")}catch(e){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("options/options.html",'<md-dialog class="pip-dialog pip-options-dialog layout-column" min-width="400" md-theme="{{theme}}"><md-dialog-content class="pip-body lp0 tp0 rp0 bp24 pip-scroll"><div class="pip-header"><h3>{{::title | translate}}</h3><div ng-show="deletedTitle" class="header-option text-subhead1 divider-bottom"><md-checkbox ng-model="deleted" aria-label="CHECKBOX">{{::deletedTitle | translate}}</md-checkbox></div></div><div class="pip-content"><md-radio-group ng-model="selectedOptionName" class="pip-list md-primary" md-no-ink="true" ng-keypress="onKeyPress($event)" tabindex="0"><div ng-repeat="option in options" class="pip-list-item" md-ink-ripple="" ui-event="{ click: \'onOptionSelect($event, option)\' }" ng-class="{ selected: option.name == selectedOptionName }"><div class="pip-list-item item-padding"><md-icon class="pip-option-icon" md-svg-icon="icons:{{option.icon}}" ng-if="option.icon"></md-icon><div class="pip-option-title">{{::option.title | translate}}</div><md-radio-button ng-value="option.name" tabindex="-1" aria-label="{{::option.title | translate}}"></md-radio-button></div></div></md-radio-group></div></md-dialog-content><div class="pip-footer"><div><md-button class="pip-cancel" ng-click="onCancel()">{{::\'CANCEL\' | translate}}</md-button><md-button class="pip-submit md-accent" ng-click="onSelect()">{{::applyButtonTitle | translate}}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipDialogs.Templates")}catch(e){t=angular.module("pipDialogs.Templates",[])}t.run(["$templateCache",function(t){t.put("options/options_big.html",'<md-dialog class="pip-dialog pip-options-dialog-big layout-column" min-width="400" md-theme="{{theme}}"><md-dialog-content class="pip-body pip-scroll" ng-class="{\'bp24\': !noActions}"><div class="pip-header" ng-class="{\'header-hint\': noTitle && hint}"><h3 class="m0" ng-if="!noTitle">{{::title | translate}}</h3><div ng-show="noTitle && hint" class="dialog-hint layout-row layout-align-start-center"><div class="hint-icon-container flex-fixed"><md-icon md-svg-icon="icons:info-circle-outline"></md-icon></div><div>{{::hint | translate}}</div></div></div><div class="content-divider" ng-if="!noTitle"></div><div class="pip-content"><div class="spacer8" ng-if="noTitle && hint"></div><md-list class="pip-menu pip-ref-list" pip-selected="optionIndex" index="{{optionIndex }}" pip-select="onSelected($event)"><md-list-item class="pip-ref-list-item pip-selectable layout-row layout-align-start-center" ng-class="{\'selected md-focused\' : option.name == selectedOptionName, \'divider-bottom\': $index != options.length - 1}" md-ink-ripple="" ng-keyup="onKeyUp($event, $index)" ng-repeat="option in options"><div class="pip-content content-stretch" ng-click="onOptionSelect($event, option)"><p class="pip-title spacer-right" ng-if="option.title" style="margin-bottom: 4px !important;">{{::option.title | translate}}</p><div class="pip-subtitle spacer-right" style="height: inherit" ng-if="option.subtitle">{{::option.subtitle | translate}}</div><div class="pip-subtitle spacer-right" style="height: inherit" ng-if="option.text" ng-bind-html="option.text | translate"></div></div></md-list-item></md-list></div><div class="spacer8" ng-if="noActions"></div></md-dialog-content><div class="pip-footer" ng-if="!noActions"><div><md-button class="pip-cancel" ng-click="onCancel()">{{::\'CANCEL\' | translate}}</md-button><md-button class="pip-submit md-accent" ng-click="onSelect()" style="margin-right: -6px">{{::applyButtonTitle | translate}}</md-button></div></div></md-dialog>')}])}(),function(t){"use strict";var e=t.module("pipConfirmationDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]);e.factory("pipConfirmationDialog",["$mdDialog",function(t){return{show:function(e,o,i){t.show({targetEvent:e.event,templateUrl:"confirmation/confirmation.html",controller:"pipConfirmationDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){o&&o()},function(){i&&i()})}}}]),e.controller("pipConfirmationDialogController",["$scope","$rootScope","$mdDialog","$injector","params",function(t,e,o,i,n){var a=i.has("pipTranslate")?i.get("pipTranslate"):null;a?(a.translations("en",{CONFIRM_TITLE:"Confirm"}),a.translations("ru",{CONFIRM_TITLE:"Подтвердите"}),t.title=n.title||"CONFIRM_TITLE",t.ok=n.ok||"OK",t.cancel=n.cancel||"CANCEL"):(t.title=n.title||"Confirm",t.ok=n.ok||"OK",t.cancel=n.cancel||"Cancel"),t.theme=e.$theme,t.onCancel=function(){o.cancel()},t.onOk=function(){o.hide()}}])}(window.angular),function(){"use strict";var t=angular.module("pipDialogs.Translate",[]);t.filter("translate",["$injector",function(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}])}(),function(t){"use strict";var e=t.module("pipErrorDetailsDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]);e.factory("pipErrorDetailsDialog",["$mdDialog",function(t){return{show:function(e,o,i){t.show({targetEvent:e.event,templateUrl:"error_details/error_details.html",controller:"pipErrorDetailsDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){o&&o()},function(){i&&i()})}}}]),e.controller("pipErrorDetailsDialogController",["$scope","$rootScope","$mdDialog","$injector","params",function(t,e,o,i,n){var a=i.has("pipTranslate")?i.get("pipTranslate"):null;a?(a.translations("en",{ERROR_DETAILS:"Error details",CODE:"Error code",PATH:"Path",ERROR:"Error",METHOD:"Method",MESSAGE:"Message",DISMISS:"Dismiss"}),a.translations("ru",{ERROR_DETAILS:"Детали ошибки",CODE:"Код ошибки",PATH:"Путь",ERROR:"Ошибка",METHOD:"Метод",MESSAGE:"Сообщение"}),t.ok=n.ok||"OK",t.cancel=n.cancel||"CANCEL",t.errorDetails="ERROR_DETAILS",t.dismissButton="DISMISS",t.errorMessage="MESSAGE",t.errorCode="CODE",t.errorMethod="METHOD",t.errorPath="PATH",t.errorText="ERROR"):(t.ok=n.ok||"OK",t.cancel=n.cancel||"Cancel",t.errorDetails="Error details",t.dismissButton="Dismiss",t.errorMessage="Message",t.errorCode="Code",t.errorMethod="Method",t.errorPath="Path",t.error="Error"),t.theme=e.$theme,t.error=n.error,t.onCancel=function(){o.cancel()},t.onOk=function(){o.hide()}}])}(window.angular),function(t,e){"use strict";var o=t.module("pipInformationDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]);o.factory("pipInformationDialog",["$mdDialog",function(t){return{show:function(e,o){t.show({targetEvent:e.event,templateUrl:"information/information.html",controller:"pipInformationDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){o&&o()})}}}]),o.controller("pipInformationDialogController",["$scope","$rootScope","$mdDialog","$injector","params",function(t,o,i,n,a){var r,l=a.message,s=n.has("pipTranslate")?n.get("pipTranslate"):null;s?(s.translations("en",{INFORMATION_TITLE:"Information"}),s.translations("ru",{INFORMATION_TITLE:"Информация"}),t.title=a.title||"INFORMATION_TITLE",t.ok=a.ok||"OK",l=s.translate(l)):(t.title=a.title||"Information",t.ok=a.ok||"OK");var p=n.has("pipFormat")?n.get("pipFormat"):null;t.theme=o.$theme,a.item&&p&&(r=e.truncate(a.item,25),l=p.sprintf(l,r),console.log("content2",l)),t.content=l,t.onOk=function(){i.hide()}}])}(window.angular,window._),function(t,e,o){"use strict";var i=t.module("pipOptionsDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]);i.factory("pipOptionsDialog",["$mdDialog",function(t){return{show:function(e,o,i){function n(){e.event&&e.event.currentTarget&&e.event.currentTarget.focus()}e.event&&(e.event.stopPropagation(),e.event.preventDefault()),t.show({targetEvent:e.event,templateUrl:"options/options.html",controller:"pipOptionsDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(t){n(),o&&o(t)},function(){n(),i&&i()})}}}]),i.controller("pipOptionsDialogController",["$scope","$rootScope","$mdDialog","$injector","params",function(t,i,n,a,r){function l(){var t;t=e(".pip-options-dialog .pip-list"),t.focus()}var s=a.has("pipTranslate")?a.get("pipTranslate"):null;s?(s.translations("en",{OPTIONS_TITLE:"Choose Option"}),s.translations("ru",{OPTIONS_TITLE:"Выберите опцию"}),t.title=r.title||"OPTIONS_TITLE",t.applyButtonTitle=r.appleButtonTitle||"SELECT"):(t.title=r.title||"Choose Option",t.applyButtonTitle=r.appleButtonTitle||"Select"),t.theme=i.$theme,t.options=r.options,t.selectedOption=o.find(r.options,{active:!0})||{},t.selectedOptionName=t.selectedOption.name,t.deleted=r.deleted,t.deletedTitle=r.deletedTitle,t.onOptionSelect=function(e,o){e.stopPropagation(),t.selectedOptionName=o.name},t.onKeyPress=function(e){32!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),e.preventDefault(),t.onSelect())},t.onCancel=function(){n.cancel()},t.onSelect=function(){var e;e=o.find(r.options,{name:t.selectedOptionName}),n.hide({option:e,deleted:t.deleted})},setTimeout(l,500)}])}(window.angular,window.jQuery,window._),function(t,e,o){"use strict";var i=t.module("pipOptionsBigDialog",["ngMaterial","pipDialogs.Translate","pipDialogs.Templates"]);i.factory("pipOptionsBigDialog",["$mdDialog",function(t){return{show:function(e,o,i){function n(){e.event&&e.event.currentTarget&&e.event.currentTarget.focus()}e.event&&(e.event.stopPropagation(),e.event.preventDefault()),t.show({targetEvent:e.event,templateUrl:"options/options_big.html",controller:"pipOptionsDialogBigController",locals:{params:e},clickOutsideToClose:!0}).then(function(t){n(),o&&o(t)},function(){n(),i&&i()})}}}]),i.controller("pipOptionsDialogBigController",["$scope","$rootScope","$mdDialog","$injector","params",function(t,i,n,a,r){function l(){var t;t=e(".pip-options-dialog .pip-list"),t.focus()}var s=a.has("pipTranslate")?a.get("pipTranslate"):null;s?(s.translations("en",{OPTIONS_TITLE:"Choose Option"}),s.translations("ru",{OPTIONS_TITLE:"Выберите опцию"}),t.title=r.title||"OPTIONS_TITLE",t.applyButtonTitle=r.applyButtonTitle||"SELECT"):(t.title=r.title||"Choose Option",t.applyButtonTitle=r.applyButtonTitle||"Select"),t.theme=i.$theme,t.options=r.options,t.noActions=r.noActions||!1,t.noTitle=r.noTitle||!1,t.hint=r.hint||"",t.selectedOption=o.find(r.options,{active:!0})||{},t.selectedOptionName=t.selectedOption.name,t.optionIndex=o.findIndex(r.options,t.selectedOption),t.deleted=r.deleted,t.deletedTitle=r.deletedTitle,t.onOptionSelect=function(e,o){e.stopPropagation(),t.selectedOptionName=o.name,t.noActions&&t.onSelect()},t.onSelected=function(){t.selectedOptionName=t.options[t.optionIndex].name,t.noActions},t.onKeyUp=function(e,o){32!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),e.preventDefault(),void 0!==o&&o>-1&&o<t.options.length&&(t.selectedOptionName=t.options[o].name,t.onSelect()))},t.onCancel=function(){n.cancel()},t.onSelect=function(){var e;e=o.find(t.options,{name:t.selectedOptionName}),n.hide({option:e,deleted:t.deleted})},setTimeout(l,500)}])}(window.angular,window.jQuery,window._);
!function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("actions/primary_actions.html",'<md-menu md-position-mode="target-right target" class="pip-primary-actions" ng-repeat="action in config.primaryLocalActions"><md-button class="pip-primary-actions-action md-icon-button" ng-class="{ \'pip-primary-actions-hide-sm\': action.hideSmall, \'pip-primary-actions-show-sm\': action.showSmall }" ng-click="onActionClick(action, $mdOpenMenu);" ng-hide="actionHidden(action)" aria-label="{{action.tooltip | translate}}"><div class="pip-primary-actions-badge" ng-show="action.count > 0">{{actionCount(action)}}</div><md-icon md-svg-icon="{{action.icon}}"></md-icon></md-button><md-menu-content width="3"><md-menu-item ng-repeat-start="subAction in action.subActions" ng-if="!subAction.divider" ng-hide="actionHidden(subAction)"><md-button ng-hide="subAction.divider" ng-click="onActionClick(subAction)">{{subAction.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if="subAction.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu><md-menu md-position-mode="target-right target" class="pip-primary-actions" ng-repeat="action in config.primaryGlobalActions"><md-button class="pip-primary-actions-action md-icon-button" ng-class="{ \'pip-primary-actions-hide-sm\': action.hideSmall, \'pip-primary-actions-show-sm\': action.showSmall }" ng-click="onActionClick(action, $mdOpenMenu);" ng-hide="actionHidden(action)" aria-label="{{action.tooltip | translate}}"><div class="pip-primary-actions-badge" ng-show="action.count > 0">{{actionCount(action)}}</div><md-icon md-svg-icon="{{action.icon}}"></md-icon></md-button><md-menu-content width="3"><md-menu-item ng-repeat-start="subAction in action.subActions" ng-if="!subAction.divider" ng-hide="actionHidden(subAction)"><md-button ng-hide="subAction.divider" ng-click="onActionClick(subAction)">{{subAction.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if="subAction.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("actions/secondary_actions.html",'<md-menu ng-if="secondaryActionsVisible()" md-position-mode="target-right target"><md-button class="md-icon-button" ng-click="onSecondaryActionClick(); openMenu($mdOpenMenu, $event);" aria-label="open actions"><md-icon md-svg-icon="icons:vdots"></md-icon></md-button><md-menu-content width="3"><md-menu-item ng-repeat-start="action in config.secondaryLocalActions" ng-if="!action.divider" ng-hide="actionHidden(action)"><md-button ng-hide="action.divider" ng-click="onActionClick(action)">{{action.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if="action.divider" ng-repeat-end=""></md-menu-divider><md-menu-divider ng-if="secondaryDividerVisible()"></md-menu-divider><md-menu-item ng-repeat-start="action in config.secondaryGlobalActions" ng-if="!action.divider" ng-hide="actionHidden(action)"><md-button ng-hide="action.divider" ng-click="onActionClick(action)">{{action.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if="action.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("appbar/appbar.html",'<md-toolbar md-theme-watch="true" ng-if="!$partialReset" ng-class="config.ngClasses" class="{{ config.cssClass }}" ng-transclude=""></md-toolbar>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("breadcrumb/breadcrumb.html",'<div><div class="hide-xs text-overflow"><span ng-if="vm.config.criteria" ng-click="vm.onSearchOpen()">{{vm.config.criteria}} -</span><span class="pip-breadcrumb-item" ng-repeat-start="item in vm.config.items" ng-click="vm.onBreadcrumbClick(item)" ng-init="stepWidth = 100/(vm.config.items.length + 1)" ng-style="{\'max-width\': stepWidth + \'%\'}">{{item.title | translate}}</span><md-icon ng-repeat-end="" md-svg-icon="icons:chevron-right"></md-icon><span class="pip-title">{{vm.config.text | translate}}</span></div><md-menu xmd-offset="0 48" class="hide-gt-xs"><span class="pip-mobile-breadcrumb layout-row" ng-click="$mdOpenMenu()" md-ink-ripple="" aria-label="open breadcrumb"><span class="text-overflow"><span ng-if="vm.config.criteria" ng-click="vm.onSearchOpen()">{{vm.config.criteria}} -</span> {{vm.config.text | translate}}</span><md-icon class="pip-triangle-down" md-svg-icon="icons:triangle-down"></md-icon></span><md-menu-content width="3"><md-menu-item ng-repeat="item in vm.config.items"><md-button ng-click="vm.onBreadcrumbClick(item)"><span>{{item.title | translate}}</span></md-button></md-menu-item><md-menu-item><md-button><span class="text-grey">{{vm.config.text | translate}}</span></md-button></md-menu-item></md-menu-content></md-menu></div>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("dropdown/dropdown.html",'<md-toolbar class="md-subhead color-primary-bg {{class}}" ng-if="show()" ng-class="{\'md-whiteframe-3dp\': $mdMedia(\'xs\')}"><div class="pip-divider"></div><md-select ng-model="selectedIndex" ng-disabled="disabled()" md-container-class="pip-full-width-dropdown" aria-label="DROPDOWN" md-ink-ripple="" md-on-close="onSelect(selectedIndex)"><md-option ng-repeat="action in actions" value="{{ ::$index }}" ng-selected="activeIndex == $index ? true : false">{{ (action.title || action.name) | translate }}</md-option></md-select></md-toolbar>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("language_picker/language_picker.html",'<md-menu md-position-mode="target-right target"><span class="pip-language" ng-click="$mdOpenMenu()" aria-label="language selection">{{language() | translate}}<md-icon md-svg-icon="icons:triangle-down"></md-icon></span><md-menu-content width="3"><md-menu-item ng-repeat="lang in languages"><md-button ng-click="onLanguageClick(lang)">{{lang | translate}}</md-button></md-menu-item></md-menu-content></md-menu>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("nav_header/nav_header.html",'<md-toolbar md-theme="{{ $theme }}" ng-hide="!user"><md-button class="pip-nav-header-user md-icon-button" ng-click="onUserClick()" aria-label="current user"></md-button><div class="pip-nav-header-user-text"><a class="pip-nav-header-user-pri cursor-pointer" ng-click="onUserClick()">{{ getUser(\'fullName\') }}</a><div class="pip-nav-header-user-sec">{{ getUser(\'details\') | translate }}</div></div></md-toolbar>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("nav_icon/nav_icon.html",'<md-button class="md-icon-button pip-nav-icon" ng-if="config.type != \'none\'" ng-class="config.class" ng-click="onNavIconClick()" aria-label="menu"><md-icon ng-if="config.type==\'menu\'" md-svg-icon="icons:menu"></md-icon><img ng-src="{{config.imageUrl}}" ng-if="config.type==\'image\'" height="24" width="24"><md-icon ng-if="config.type==\'back\'" md-svg-icon="icons:arrow-left"></md-icon><md-icon ng-if="config.type==\'icon\'" md-svg-icon="icons:{{config.iconName}}"></md-icon></md-button>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("nav_menu/nav_menu.html",'<md-list><div class="pip-section" ng-repeat="section in config" ng-hide="section.access && !section.access(section)"><md-divider ng-show="$index > 0 && !isSectionEmpty(section.links)"></md-divider><md-subheader ng-show="section.title">{{::section.title | translate}}</md-subheader><md-list-item class="pip-focusable no-border" ng-repeat="link in section.links" ng-click="onLinkClick($event, link)" ng-hide="link.access && !link.access(link)"><md-icon md-svg-icon="{{link.icon}}" ng-hide="!link.icon" class="tm0 bm0"></md-icon><p>{{::link.title | translate}}</p></md-list-item></div></md-list>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("search_bar/search_bar.html",'<div class="md-toolbar-tools layout-row" ng-if="searchEnabled"><md-button class="md-icon-button" aria-label="start search" ng-click="onSearchClick()"><md-icon md-svg-icon="icons:search"></md-icon></md-button><input class="pip-search-text flex" type="search" ng-model="search.text" ng-keydown="onSearchKeyDown($event)"><md-button class="md-icon-button" aria-label="clear search" ng-click="onSearchClear()"><md-icon md-svg-icon="icons:cross-circle"></md-icon></md-button></div><div class="md-toolbar-tools layout-row layout-align-end-center" ng-if="!searchEnabled"><md-button class="md-icon-button" aria-label="start search" ng-click="onSearchEnable()"><md-icon md-svg-icon="icons:search"></md-icon></md-button></div>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("sidenav/sidenav.html",'<md-sidenav class="md-sidenav-left md-whiteframe-z2 pip-sidenav color-content-bg" md-component-id="pip-sidenav" ng-if="!$partialReset" pip-focused="" ng-transclude=""></md-sidenav>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(t){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("tabs/tabs.html",'<md-toolbar class="pip-nav {{ class }}" ng-class="{\'pip-visible\': show(), \'pip-shadow\': showShadow()}"><md-tabs ng-if="$mdMedia(\'gt-xs\')" md-selected="activeTab" ng-class="{\'disabled\': disabled()}" md-stretch-tabs="true" md-dynamic-height="true"><md-tab ng-repeat="tab in tabs track by $index" ng-disabled="tabDisabled($index)" md-on-select="onSelect($index)"><md-tab-label>{{::tab.nameLocal }}<div class="pip-tabs-badge color-badge-bg" ng-if="tab.newCounts > 0 && tab.newCounts <= 99">{{::tab.newCounts }}</div><div class="pip-tabs-badge color-badge-bg" ng-if="tab.newCounts > 99">!</div></md-tab-label></md-tab></md-tabs><div class="md-subhead pip-tabs-content color-primary-bg" ng-if="$mdMedia(\'xs\')"><div class="pip-divider position-top m0"></div><md-select ng-model="activeIndex" ng-disabled="disabled()" md-container-class="pip-full-width-dropdown" aria-label="SELECT" md-ink-ripple="" md-on-close="onSelect(activeIndex)"><md-option ng-repeat="tab in tabs track by $index" value="{{ ::$index }}">{{ ::tab.nameLocal }}<div class="pip-tabs-badge color-badge-bg" ng-if="tab.newCounts > 0 && tab.newCounts <= 99">{{ ::tab.newCounts }}</div><div class="pip-tabs-badge color-badge-bg" ng-if="tab.newCounts > 99">!</div></md-option></md-select></div></md-toolbar>')}])}(),function(){"use strict";angular.module("pipNav",["pipDropdown","pipTabs","pipAppBar","pipSideNav","pipNavIcon","pipNavMenu","pipBreadcrumb","pipPrimaryActions","pipSecondaryActions"])}(),function(){"use strict";var n=angular.module("pipActions.Service",[]);n.provider("pipActions",function(){function n(n,t){i.primaryGlobalActions=n||[],i.secondaryGlobalActions=t||[]}function t(n){i.primaryGlobalActions=n||[]}function e(n){i.secondaryGlobalActions=n||[]}var i={primaryGlobalActions:[],primaryLocalActions:[],secondaryGlobalActions:[],secondaryLocalActions:[]};this.globalActions=n,this.globalPrimaryActions=t,this.globalSecondaryActions=e,this.$get=["$rootScope",function(n){function t(){return i}function e(){i.primaryLocalActions=[],i.secondaryLocalActions=[],c()}function a(n,t){i.primaryLocalActions=n||[],i.secondaryLocalActions=t||[],c()}function o(n,t){_.each(i.primaryGlobalActions,function(e){e.name===n&&(e.count=t)}),_.each(i.primaryLocalActions,function(e){e.name===n&&(e.count=t)}),c()}function c(){n.$broadcast("pipActionsChanged",i)}return{config:t,show:a,hide:e,count:o}}]})}(),function(){"use strict";var n=angular.module("pipPrimaryActions",["ngMaterial","pipNav.Translate","pipNav.Templates","pipActions.Service"]);n.directive("pipPrimaryActions",function(){return{restrict:"E",scope:{localActions:"=pipLocalActions",globalActions:"=pipGlobalActions"},replace:!1,templateUrl:function(n,t){return"actions/primary_actions.html"},controller:"pipPrimaryActionsController"}}),n.controller("pipPrimaryActionsController",["$scope","$element","$attrs","$rootScope","$window","$location","$injector","pipActions",function(n,t,e,i,a,o,c,r){function s(t,e){n.config=e}function l(n){return n.access&&!n.access(n)}function p(n){return null===n.count||n.count<=0?"":n.count>99?"!":n.count}function d(t,e){if(t&&!t.divider){if(t.close&&(n.originatorEv=null),t.menu)return void e(n.originatorEv);if(t.callback)return void t.callback();if(t.href)return void(a.location.href=t.href);if(t.url)return void o.url(t.url);if(t.state){if(c.has("$state")){var r=c.get("$state");r.go(t.state,t.stateParams)}}else t.event?i.$broadcast(t.event):i.$broadcast("pipActionClicked",t.name)}}t.addClass("pip-primary-actions"),n.config=r.config(),n.localActions&&(r.showLocalActions(),n.config.primaryLocalActions=n.localActions[0]),n.globalActions&&(r.showLocalActions(),n.config.primaryGlobalActions=n.globalActions[0]),i.$on("pipActionsChanged",s),n.actionHidden=l,n.actionCount=p,n.onActionClick=d}])}(),function(){"use strict";var n=angular.module("pipSecondaryActions",["ngMaterial","pipNav.Translate","pipNav.Templates","pipActions.Service"]);n.directive("pipSecondaryActions",function(){return{restrict:"E",scope:{title:"=pipTitle",showMenu:"=pipShowMenu",localActions:"=pipLocalActions",globalActions:"=pipGlobalActions",partyAvatarUrl:"=pipPartyAvatarUrl"},replace:!1,templateUrl:function(n,t){return"actions/secondary_actions.html"},controller:"pipSecondaryActionsController"}}),n.controller("pipSecondaryActionsController",["$scope","$element","$attrs","$rootScope","$window","$location","$injector","pipActions",function(n,t,e,i,a,o,c,r){function s(t,e){n.originatorEv=e,t(e)}function l(t,e){n.config=e}function p(n){return n.access&&!n.access(n)}function d(n){return null===n.count||n.count<=0?"":n.count>99?"!":n.count}function u(n){var t=0;return _.each(n,function(n){p(n)||t++}),t}function m(){return u(n.config.secondaryGlobalActions)>0||u(n.config.secondaryLocalActions)>0}function g(){return u(n.config.secondaryGlobalActions)>0&&u(n.config.secondaryLocalActions)>0}function v(t,e){if(t&&!t.divider){if(t.close&&(n.originatorEv=null),t.menu)return void e(n.originatorEv);if(t.callback)return void t.callback();if(t.href)return void(a.location.href=t.href);if(t.url)return void o.url(t.url);if(t.state){if(c.has("$state")){var r=c.get("$state");r.go(t.state,t.stateParams)}}else t.event?i.$broadcast(t.event):i.$broadcast("pipActionClicked",t.name)}}t.addClass("pip-secondary-actions"),n.config=r.config(),n.localActions&&(r.showLocalActions(),n.config.secondaryLocalActions=n.localActions[1]),n.globalActions&&(r.showLocalActions(),n.config.secondaryGlobalActions=n.globalActions[0]),i.$on("pipActionsChanged",l),n.actionHidden=p,n.actionCount=d,n.secondaryActionsVisible=m,n.secondaryDividerVisible=g,n.onActionClick=v,n.openMenu=s}])}(),function(){"use strict";var n=angular.module("pipAppBar",["ngMaterial","pipNav.Templates","pipAppBar.Service"]);n.directive("pipAppbar",function(){return{restrict:"E",transclude:!0,scope:!0,templateUrl:"appbar/appbar.html",controller:"pipAppBarController"}}),n.controller("pipAppBarController",["$scope","$element","$rootScope","pipAppBar",function(n,t,e,i){function a(t,e){n.config=e}t.addClass("pip-appbar"),t.addClass("color-primary-bg"),n.$emit("pipResizeWindow"),n.config=i.config(),e.$on("pipAppBarChanged",a)}])}(),function(){"use strict";var n=angular.module("pipAppBar.Part",["pipAppBar.Service"]);n.directive("pipAppbarPart",["ngIfDirective",function(n){var t=n[0];return{transclude:t.transclude,priority:t.priority,terminal:t.terminal,restrict:t.restrict,scope:!0,link:function(n,e,i){i.ngIf=function(){return n.visible},t.link.apply(t,arguments)},controller:"pipAppBarPartController"}}]),n.controller("pipAppBarPartController",["$scope","$element","$attrs","$rootScope","pipAppBar",function(n,t,e,i,a){function o(t,e){var i=e.parts||{},a=i[c],o=!!(r?a==r:a);o!=n.visible&&(n.visible=o)}var c=""+e.pipAppbarPart,r=null,s=c.indexOf(":");s>0&&(r=c.substr(s+1),c=c.substr(0,s)),o(null,a.config()),i.$on("pipAppBarChanged",o)}])}(),function(){"use strict";var n=angular.module("pipAppBar.Service",[]);n.provider("pipAppBar",function(){function n(n){return e.theme=n||e.theme,e.theme}function t(n){return _.isObject(n)&&(e.parts=n),e.parts}var e={theme:"default",cssClass:"",ngClasses:{},parts:{}};this.theme=n,this.parts=t,this.$get=["$rootScope",function(n){function t(){return e}function i(n){return void 0!=n&&(e.cssClass=n,p()),e.cssClass}function a(){e.ngClasses["pip-shadow"]=!1,e.ngClasses["pip-shadow-sm"]=!0,e.ngClasses["pip-shadow-xs"]=!1,p()}function o(){e.ngClasses["pip-shadow"]=!1,e.ngClasses["pip-shadow-sm"]=!0,e.ngClasses["pip-shadow-xs"]=!0,p()}function c(){e.ngClasses["pip-shadow"]=!0,p()}function r(){e.ngClasses["pip-shadow"]=!1,e.ngClasses["pip-shadow-sm"]=!1,e.ngClasses["pip-shadow-xs"]=!1,p()}function s(n,t){if(!_.isString(n))throw new Error("Part name has to be a string");return void 0!=t&&e.parts[n]!=t&&(e.parts[n]=t,p()),e.parts[n]}function l(n){return _.isObject(n)&&(_.isEqual(e.parts,n)||(e.parts=n,p())),e.parts}function p(){n.$broadcast("pipAppBarChanged",e)}return{config:t,cssClass:i,part:s,parts:l,showShadow:c,showShadowSm:a,showShadowSmXs:o,hideShadow:r}}]})}();var pip;!function(n){var t;!function(n){function t(){return{restrict:"E",scope:{},replace:!1,templateUrl:function(n,t){return"breadcrumb/breadcrumb.html"},controller:e,controllerAs:"vm"}}var e=function(){function n(n,t,e,i,a,o,c){"ngInject";this._rootScope=i,this._window=a,t.addClass("pip-breadcrumb"),this.config=c.config,i.$on("pipBreadcrumbChanged",this.onBreadcrumbChanged),i.$on("pipBreadcrumbBack",this.onBreadcrumbBack)}return n.$inject=["$scope","$element","$attrs","$rootScope","$window","$state","pipBreadcrumb"],n.prototype.onBreadcrumbChanged=function(n,t){this.config=t},n.prototype.onBreadcrumbBack=function(){var n=this.config.items;if(_.isArray(n)&&n.length>0){var t=n[n.length-1].click;_.isFunction(t)?t():this._window.history.back()}else this._window.history.back()},n.prototype.onBreadcrumbClick=function(n){_.isFunction(n.click)&&n.click(n)},n.prototype.onSearchOpen=function(){this._rootScope.$broadcast("pipSearchOpen")},n}();angular.module("pipBreadcrumb",["ngMaterial","pipNav.Templates","pipNav.Translate","pipBreadcrumb.Service"]).directive("pipBreadcrumb",t)}(t=n.nav||(n.nav={}))}(pip||(pip={}));var pip;!function(n){var t;!function(t){t.BreadcrumbChangedEvent="pipBreadcrumbChanged";var e=function(){function n(){}return n}();t.BreadcrumbItem=e;var i=function(){function n(){}return n}();t.BreadcrumbConfig=i;var a=function(){function t(n,t){this._config=n,this._rootScope=t}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"text",{get:function(){return this._config.text},set:function(n){this._config.text=n,this._config.items=null,this.sendEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){return this._config.items},set:function(n){this._config.text=null,this._config.items=n,this.sendEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"criteria",{get:function(){return this._config.criteria},set:function(n){this._config.criteria=n,this.sendEvent()},enumerable:!0,configurable:!0}),t.prototype.sendEvent=function(){this._rootScope.$broadcast(n.nav.BreadcrumbChangedEvent,this._config)},t}(),o=function(){function n(){this._config={text:null,items:null,criteria:null}}return Object.defineProperty(n.prototype,"text",{get:function(){return this._config.text},set:function(n){this._config.text=n},enumerable:!0,configurable:!0}),n.prototype.$get=["$rootScope",function(n){"ngInject";return null==this._service&&(this._service=new a(this._config,n)),this._service}],n}();angular.module("pipBreadcrumb.Service",[]).provider("pipBreadcrumb",o)}(t=n.nav||(n.nav={}))}(pip||(pip={})),function(){"use strict";var n=angular.module("pipNav.Translate",[]);n.filter("translate",["$injector",function(n){var t=n.has("pipTranslate")?n.get("pipTranslate"):null;return function(n){return t?t.translate(n)||n:n}}])}(),function(){"use strict";var n=angular.module("pipDropdown",["pipNav.Templates"]);n.directive("pipDropdown",["$mdMedia",function(n){return{restrict:"E",scope:{ngDisabled:"&",actions:"=pipActions",showDropdown:"&pipShow",activeIndex:"=pipActiveIndex",select:"=pipDropdownSelect"},templateUrl:"dropdown/dropdown.html",controller:["$scope","$element","$attrs","localStorageService",function(t,e,i,a){t.class=(i.class||"")+" md-"+a.get("theme")+"-theme",t.$mdMedia=n,t.actions=t.actions&&_.isArray(t.actions)?t.actions:[],t.activeIndex=t.activeIndex||0,t.disabled=function(){return!!t.ngDisabled()&&t.ngDisabled()},t.onSelect=function(n){t.activeIndex=n,t.select&&t.select(t.actions[n],t.activeIndex)},t.show=function(){return!t.showDropdown()||t.showDropdown()}}]}}])}(),function(){"use strict";var n=angular.module("pipLanguagePicker",["ngMaterial","pipNav.Translate","pipNav.Templates"]);n.directive("pipLanguagePicker",function(){return{restrict:"E",scope:{languages:"=languages"},replace:!1,templateUrl:function(n,t){return"language_picker/language_picker.html"},controller:"pipLanguagePickerController"}}),n.controller("pipLanguagePickerController",["$scope","$element","$attrs","$rootScope","$window","$state","$location","$injector",function(n,t,e,i,a,o,c,r){function s(t){n.languages=t.length>0?t:["en","ru"]}function l(){return d?d.use():null}function p(n){d&&setTimeout(function(){d.use(n),i.$apply()},0)}var d=r.has("pipTranslate")?r.get("pipTranslate"):null;t.addClass("pip-language-picker"),n.language=l,n.onLanguageClick=p,i.$on("pipSetLanguages",s)}])}(),function(){"use strict";var n=angular.module("pipNavHeader",["ngMaterial","pipNav.Templates"]);n.directive("pipNavHeader",function(){return{restrict:"EA",scope:{user:"=pipUser"},replace:!1,templateUrl:"nav_header/nav_header.html",controller:"pipNavHeaderController"}}),n.controller("pipNavHeaderController",["$scope","$element","$rootScope",function(n,t,e){function i(t){var e=n.user||n.identity||{};return t?e[t]:e}function a(t,e){n.identity=e}function o(){e.$broadcast("pipNavUserClicked")}t.addClass("pip-nav-header"),e.$on("pipIdentityChanged",a),n.getUser=i,n.onUserClick=o}])}(),function(){"use strict";var n=angular.module("pipNavIcon",["ngMaterial","pipNav.Translate","pipNav.Templates","pipNavIcon.Service"]);n.directive("pipNavIcon",function(){return{restrict:"E",scope:{type:"=pipType",imageUrl:"=pipImageUrl"},replace:!1,templateUrl:function(n,t){return"nav_icon/nav_icon.html"},controller:"pipNavIconController"}}),n.controller("pipNavIconController",["$scope","$element","$attrs","$rootScope","$window","pipNavIcon",function(n,t,e,i,a,o){function c(t,e){n.config=e}function r(){_.isFunction(n.config.callback)?n.config.callback():n.config.event?i.$broadcast(n.config.event):"menu"==n.config.type?i.$broadcast("pipOpenSideNav"):"back"==n.config.type?a.history.back():i.$broadcast("pipNavIconClicked")}t.addClass("pip-nav-icon"),n.config=o.config(),i.$on("pipNavIconChanged",c),n.onNavIconClick=r}])}(),function(){"use strict";var n=angular.module("pipNavIcon.Service",[]);n.provider("pipNavIcon",function(){function n(){return c}function t(){c.type="none",c.callback=null,c.event=null}function e(n){c.type="menu",c.callback=null,c.event=null,_.isFunction(n)&&(c.callback=n),_.isString(n)&&(c.event=n)}function i(n,t){c.type="icon",c.iconName=n,c.callback=null,c.event=null,_.isFunction(t)&&(c.callback=t),_.isString(t)&&(c.event=t)}function a(n){c.type="back",c.callback=null,c.event=null,_.isFunction(n)&&(c.callback=n),_.isString(n)&&(c.event=n)}function o(n,t){c.type="image",c.imageUrl=n,c.callback=null,c.event=null,_.isFunction(t)&&(c.callback=t),_.isString(t)&&(c.event=t)}var c={type:"menu",imageUrl:null,iconName:"back",callback:null,event:null};this.config=n,this.clear=t,this.menu=e,this.back=a,this.icon=i,this.image=o,this.$get=["$rootScope",function(r){function s(){t(),m()}function l(n){e(n),m()}function p(n,t){i(n,t),m()}function d(n){a(n),m()}function u(n,t){o(n,t),m()}function m(){r.$broadcast("pipNavIconChanged",c)}return{config:n,hide:s,menu:l,back:d,icon:p,image:u}}]})}(),function(){"use strict";var n=angular.module("pipNavMenu",["ngMaterial","pipNav.Translate","pipNav.Templates","pipNavMenu.Service"]);n.directive("pipNavMenu",function(){return{restrict:"EA",scope:{config:"=pipLinks"},replace:!1,templateUrl:"nav_menu/nav_menu.html",controller:"pipNavMenuController"}}),n.controller("pipNavMenuController",["$scope","$element","$rootScope","$window","$location","$timeout","$injector","pipSideNav","pipNavMenu",function(n,t,e,i,a,o,c,r,s){function l(n){return n&&n.access&&!n.access(n)}function p(n){var t=!0;return _.each(n,function(n){l(n)||(t=!1)}),t}function d(t,e){n.config=e}function u(n,t){if(n.stopPropagation(),!t)return void r.close();if(t.href)return t.href.split("?")[0]===i.location.href.split("?")[0]?void r.close():(r.close(),void o(function(){i.location.href=t.href},300));if(t.url)return t.url.split(/[\s\/?]+/)[1]===a.url().split(/[\s\/?]+/)[1]?void r.close():(r.close(),void o(function(){a.url(t.url)},300));if(t.state){var s=c.has("$state")?c.get("$state"):null;return null!=s&&s.current.name===t.state?void r.close():(r.close(),void o(function(){if(c.has("$state")){var n=c.get("$state");n.go(t.state,t.stateParams)}},300))}t.event&&e.$broadcast(t.event,t),r.close()}t.addClass("pip-nav-menu"),n.config=n.config||s.get(),e.$on("pipNavMenuChanged",d),n.itemVisible=l,n.onLinkClick=u,n.isSectionEmpty=p}])}(),function(){"use strict";var n=angular.module("pipNavMenu.Service",[]);n.provider("pipNavMenu",function(){function n(n){return _.isArray(n)&&(t=n),t}var t=[];this.sections=n,this.$get=["$rootScope","$mdSidenav",function(e,i){function a(){return t}function o(i){return n(i),e.$broadcast("pipNavMenuChanged",t),t}return{get:a,set:o}}]})}(),function(){"use strict";var n=angular.module("pipSearchBar",["ngMaterial","pipNav.Translate","pipNav.Templates","pipSearch.Service"]);n.run(["$injector",function(n){var t=n.has("pipTranslate")?n.get("pipTranslate"):null;t&&t.setTranslations&&(t.setTranslations("en",{APPBAR_SEARCH:"Search"}),t.setTranslations("ru",{APPBAR_SEARCH:"Поиск"}))}]),n.directive("pipSearchBar",function(){return{restrict:"E",scope:{},replace:!1,templateUrl:function(n,t){return"search_bar/search_bar.html"},controller:"pipSearchBarController"}}),n.controller("pipSearchBarController",["$scope","$element","$attrs","$rootScope","pipSearch",function(n,t,e,i,a){function o(t,e){n.config=e,n.searchEnabled=!1,n.search.text=""}function c(){var n;setTimeout(function(){n=$(".pip-search-text"),n.length>0&&n.focus()},0)}function r(){n.search.text=n.config.criteria,n.searchEnabled=!0,c()}function s(){var t=n.search.text;n.search.text="",n.searchEnabled=!1,n.config.callback?n.config.callback(t):i.$broadcast("pipSearchBarSearchClicked",t)}function l(){n.search.text?(n.search.text="",c()):(n.searchEnabled=!1,s())}function p(t){return 13===t.keyCode?void n.onSearchClick():void(27===t.keyCode&&(n.searchEnabled=!1))}t.addClass("pip-search-bar"),n.config=a.config(),n.searchEnabled=!1,n.search={text:""},i.$on("pipSearchChanged",o),n.onSearchEnable=r,n.onSearchClick=s,n.onSearchClear=l,n.onSearchKeyDown=p}])}(),function(){"use strict";var n=angular.module("pipSearch.Service",[]);n.provider("pipSearch",function(){var n={visible:!1,criteria:"",history:[],callback:null};this.$get=["$rootScope",function(t){function e(){return n}function i(t,e,i){n.callback=t,n.criteria=e,n.history=i,l()}function a(){n.callback=null,n.criteria=null,l()}function o(t){n.visible=!0,l()}function c(t){n.visible=!1,l()}function r(t){n.criteria=t,l()}function s(t){n.history=t,l()}function l(){t.$broadcast("pipSearchChanged",n)}return t.$on("pipSearchOpen",o),t.$on("pipSearchClose",c),{config:e,set:i,clear:a,criteria:r,history:s}}]})}(),function(){"use strict";var n=angular.module("pipSideNav",["ngMaterial","pipNav.Templates","pipSideNav.Service"]);n.directive("pipSidenav",function(){return{restrict:"E",transclude:!0,scope:!0,templateUrl:"sidenav/sidenav.html",controller:"pipSideNavController"}}),n.controller("pipSideNavController",["$scope","$element","$rootScope","pipSideNav",function(n,t,e,i){function a(n){i.open()}t.addClass("pip-sidenav"),e.$on("pipNavIconClicked",a)}])}(),function(){"use strict";var n=angular.module("pipSideNav.Part",["pipSideNav.Service"]);n.directive("pipSidenavPart",["ngIfDirective",function(n){var t=n[0];return{transclude:t.transclude,priority:t.priority,terminal:t.terminal,restrict:t.restrict,scope:!0,link:function(n,e,i){i.ngIf=function(){return n.visible},t.link.apply(t)},controller:"pipSideNavPartController"}}]),n.controller("pipSideNavPartController",["$scope","$element","$attrs","$rootScope","pipSideNav",function(n,t,e,i,a){function o(t,e){var i=(e.parts||{},e[c]);n.visible=r?i==r:i}var c=""+e.pipSidenavPart,r=null,s=c.indexOf(":");s>0&&(r=c.substr(s+1),c=c.substr(0,s)),o(null,a.config()),i.$on("pipSideNavChanged",o)}])}(),function(){"use strict";var n=angular.module("pipSideNav.Service",[]);n.provider("pipSideNav",function(){function n(n){return e.theme=n||e.theme,e.theme}function t(n){return _.isObject(n)&&(e.parts=n),e.parts}var e={theme:"default",parts:[]};this.theme=n,this.parts=t,this.$get=["$rootScope","$mdSidenav",function(n,t){function i(){return e}function a(n,t){if(!_.isString(n))throw new Error("Part name has to be a string");return void 0!=t&&e.parts[n]!=t&&(e.parts[n]=t,c()),e.parts[n]}function o(n){return _.isObject(n)&&(_.isEqual(e.parts,n)||(e.parts=n,c())),e.parts}function c(){n.$broadcast("pipSideNavChanged",e)}function r(n){t("pip-sidenav").open()}function s(n){t("pip-sidenav").close()}function l(){t("pip-sidenav").toggle()}return n.$on("pipOpenSideNav",r),n.$on("pipCloseSideNav",s),{config:i,part:a,parts:o,open:r,close:s,toggle:l}}]})}(),function(){"use strict";var n=angular.module("pipTabs",["pipNav.Templates"]);n.directive("pipTabs",function(){return{restrict:"E",scope:{ngDisabled:"&",tabs:"=pipTabs",showTabs:"&pipShowTabs",showTabsShadow:"&pipTabsShadow",activeIndex:"=pipActiveIndex",select:"=pipTabsSelect"},templateUrl:"tabs/tabs.html",controller:["$scope","$element","$attrs","$mdMedia","localStorageService","$injector",function(n,t,e,i,a,o){n.class=(e.class||"")+" md-"+a.get("theme")+"-theme",n.$mdMedia=i,n.tabs=n.tabs&&_.isArray(n.tabs)?n.tabs:[];var c=o.has("pipTranslate")?o.get("pipTranslate"):null;c&&(n.tabs.length>0&&n.tabs[0].title?c.translateObjects(n.tabs,"title","nameLocal"):c.translateObjects(n.tabs,"name","nameLocal")),n.activeIndex=n.activeIndex||0,n.activeTab=n.activeIndex,n.disabled=function(){if(n.ngDisabled)return n.ngDisabled()},n.tabDisabled=function(t){return n.disabled()&&n.activeIndex!=t},n.onSelect=function(t){n.disabled()||(n.activeIndex=t,n.activeTab=n.activeIndex,n.select&&n.select(n.tabs[n.activeIndex],n.activeIndex))},n.showShadow=function(){return!!n.showTabsShadow&&n.showTabsShadow()},n.show=function(){return!n.showTabs||n.showTabs()}}]}})}();
!function(){"use strict";function e(e,t){try{t.$theme=e.get("theme")||"blue"}catch(e){}}e.$inject=["localStorageService","$rootScope"];var t=angular.module("pipTheme",["LocalStorageModule","ngMaterial"]);t.run(e),t.provider("pipTheme",function(){function e(e){return null!=e&&(r=e),r}function t(e){return null!=e&&(n=e),n}function a(e){return null!=e&&(o=e),o}var r="blue",n=!0,o=!0;this.use=e,this.init=e,this.persist=t,this.setRoot=a,this.$get=["$rootScope","$timeout","localStorageService","$mdTheming",function(e,t,a,l){function i(a,r){a=void 0!==a&&!!a,r=void 0!==r&&!!r,e.$reset=a,e.$partialReset=r,t(function(){e.$reset=!1,e.$partialReset=!1},0)}function u(t,u,c){if(null!=t&&t!=r){if(!(r in l.THEMES))throw new Error("Theme "+r+" is not registered. Please, register it first with $mdThemingProvider");r=t,n&&a.set("theme",r),o&&(e.$theme=r),i(u,c),e.$broadcast("pipThemeChanged",t)}return r}return n&&(r=a.get("theme")||r),o&&(e.$theme=r),{use:u,theme:u}}]})}(),function(){"use strict";angular.module("pipTheme.Bootbarn",["pipTheme.Bootbarn.Warm","pipTheme.Bootbarn.Cool","pipTheme.Bootbarn.Monochrome"])}(),function(){"use strict";function e(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(69, 90, 100, 1)"});e.definePalette("bootbarn-cool-background",t);var a=e.extendPalette("grey",{300:"rgba(69, 90, 100, .54)",500:"rgba(69, 90, 100, 1)",contrastLightColors:["500","300"]});e.definePalette("bootbarn-cool-primary",a);var r=e.extendPalette("green",{A700:"rgba(76, 175, 80, 1)",contrastLightColors:["A700"]});e.definePalette("bootbarn-cool-accent",r),e.theme("bootbarn-cool").primaryPalette("bootbarn-cool-primary",{default:"500","hue-1":"300"}).backgroundPalette("bootbarn-cool-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("bootbarn-cool-accent",{default:"A700"}),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Bootbarn.Cool",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(38, 50, 56, 1)"});e.definePalette("bootbarn-monochrome-background",t);var a=e.extendPalette("grey",{300:"rgba(38, 50, 56, .54)",500:"rgba(38, 50, 56, 1)",contrastLightColors:["500","300"]});e.definePalette("bootbarn-monochrome-primary",a);var r=e.extendPalette("green",{A700:"rgba(76, 175, 80, 1)",contrastLightColors:["A700"]});e.definePalette("bootbarn-monochrome-accent",r),e.theme("bootbarn-monochrome").primaryPalette("bootbarn-monochrome-primary",{default:"500","hue-1":"300"}).backgroundPalette("bootbarn-monochrome-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("bootbarn-monochrome-accent",{default:"A700"}),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Bootbarn.Monochrome",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){e.alwaysWatchTheme(!0);var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(177, 55, 34, 1)"});e.definePalette("bootbarn-warm-background",t);var a=e.extendPalette("brown",{300:"rgba(177, 55, 34, .54)",500:"rgba(177, 55, 34, 1)",contrastLightColors:["500","300"]});e.definePalette("bootbarn-warm-primary",a);var r=e.extendPalette("amber",{A700:"rgba(127, 148, 92, 1)",contrastLightColors:["A700"]});e.definePalette("bootbarn-warm-accent",r);var n=e.extendPalette("red",{A200:"rgba(255, 87, 34, 1)",contrastLightColors:["A200"]});e.definePalette("bootbarn-warm-error",n),e.theme("bootbarn-warm").primaryPalette("bootbarn-warm-primary",{default:"500","hue-1":"300"}).backgroundPalette("bootbarn-warm-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("bootbarn-warm-error",{default:"A200"}).accentPalette("bootbarn-warm-accent",{default:"A700"})}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Bootbarn.Warm",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){e.setDefaultTheme("default"),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Default",["pipTheme.Blue","pipTheme.Pink","pipTheme.Amber","pipTheme.Orange","pipTheme.Green","pipTheme.Navy","pipTheme.Grey"]);t.config(e)}(),function(){"use strict";function e(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(255, 152, 0, 1)"});e.definePalette("orange-background",t);var a=e.extendPalette("orange",{800:"rgba(255, 152, 0, 1)",900:"rgba(255, 152, 0, .54);"});e.definePalette("orange-primary",a),e.theme("amber").primaryPalette("orange-primary",{default:"800","hue-1":"900"}).backgroundPalette("orange-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("orange",{default:"900"}),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Amber",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){function t(t){var a=e.extendPalette("grey",{600:"rgba(48, 48, 48, 1)",700:"rgba(255, 255, 255, 0.54)",800:"rgba(66, 66, 66, 1)"});e.definePalette("dark-background",a);var r=e.extendPalette("green",{600:"rgba(0, 200, 83, 1)"});e.definePalette("dark-accent",r),e.theme(t).primaryPalette("dark-background",{default:"900","hue-1":"700"}).backgroundPalette("dark-background",{default:"800","hue-1":"900","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("dark-accent",{default:"600"})}function a(t){var a=e.extendPalette("grey",{600:"rgba(48, 48, 48, 1)",700:"rgba(255, 255, 255, 0.54)",800:"rgba(66, 66, 66, 1)",500:"rgba(38, 50, 56, 1)"});e.definePalette("black-background",a);var r=e.extendPalette("blue-grey",{700:"rgba(255, 255, 255, 0.54)"});e.definePalette("black-accent",r),e.theme(t).primaryPalette("black-accent",{default:"900","hue-1":"700"}).backgroundPalette("black-background",{default:"800","hue-1":"500","hue-2":"800"}).warnPalette("red",{default:"A200"}).accentPalette("black-accent",{default:"600"})}t("dark"),a("black"),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Black",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){function t(t){var a=e.extendPalette("blue",{contrastDefaultColor:"light",contrastDarkColors:void 0});e.definePalette("blue-primary",a);var r=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(33, 150, 243, 1)"});e.definePalette("blue-background",r);var n=e.extendPalette("green",{600:"rgba(0, 200, 83, 1)"});e.definePalette("blue-accent",n),e.theme(t).primaryPalette("blue-primary",{default:"500","hue-1":"300"}).backgroundPalette("blue-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("blue-accent",{default:"600"})}t("default"),t("blue"),e.setDefaultTheme("default"),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Blue",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(76, 175, 80, 1)"});e.definePalette("green-background",t);var a=e.extendPalette("green",{300:"#9ed4a1",contrastLightColors:["500","300"]});e.definePalette("green-primary",a);var r=e.extendPalette("amber",{contrastLightColors:["A700"]});e.definePalette("green-accent",r),e.theme("green").primaryPalette("green-primary",{default:"500","hue-1":"300"}).backgroundPalette("green-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("green-accent",{default:"A700"}),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Green",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(255, 152, 0, 1)",A400:"#a9b9c0",500:"#607D8B",A700:"#90A4AE",contrastDefaultColor:"dark",contrastLightColors:["300","400","500","600","700","800","900","A700"]});e.definePalette("third-party",t),e.theme("grey").primaryPalette("third-party",{default:"500","hue-1":"A400"}).backgroundPalette("third-party",{default:"50","hue-1":"500","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("third-party",{default:"A700"}),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Grey",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){var t=e.extendPalette("grey",{700:"rgba(86, 97, 125, 1)",800:"rgba(86, 97, 125, .54)",A100:"rgba(250, 250, 250, 1)"});e.definePalette("grey",t);var a=e.extendPalette("teal",{contrastLightColors:["500","600","700","800","900","A700"]});e.definePalette("teal",a),e.theme("navy").primaryPalette("grey",{default:"700","hue-1":"800"}).backgroundPalette("grey",{default:"50","hue-1":"700","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("teal",{default:"A700"}),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Navy",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(255, 112, 67, 1)",contrastLightColors:["600","700","800","900","A200"]});e.definePalette("red-background",t);var a=e.extendPalette("orange",{800:"rgba(255, 112, 67, 1)",900:"rgba(255, 152, 67, .54)",A100:"rgba(255, 171, 64, 1)",contrastLightColors:["800","900","A100"]});e.definePalette("red-primary",a),e.theme("orange").primaryPalette("red-primary",{default:"800","hue-1":"900"}).backgroundPalette("red-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("red-primary",{default:"A100"}),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Orange",["ngMaterial"]);t.config(e)}(),function(){"use strict";function e(e){var t=e.extendPalette("grey",{A100:"rgba(250, 250, 250, 1)",A200:"rgba(188, 86, 121, 1)",contrastDefaultColor:"dark",contrastLightColors:["A200","A700"]});e.definePalette("pink-background",t);var a=e.extendPalette("pink",{600:"rgba(255, 128, 171, 1)",700:"rgba(188, 86, 121, .54)",900:"rgba(188, 86, 121, 1)",contrastDefaultColor:"light"});e.definePalette("pink-primary",a),e.theme("pink").primaryPalette("pink-primary",{default:"900","hue-1":"700"}).backgroundPalette("pink-background",{default:"50","hue-1":"A200","hue-2":"A700"}).warnPalette("red",{default:"A200"}).accentPalette("pink-primary",{default:"600"}),e.alwaysWatchTheme(!0)}e.$inject=["$mdThemingProvider"];var t=angular.module("pipTheme.Pink",["ngMaterial"]);t.config(e)}();
!function(){"use strict";angular.module("pipErrors",["pipErrors.Pages","pipNoConnectionPanel","pipClearErrors","pipFormErrors"])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("maintenance/maintenance.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div style="background-image: url(\'images/maintenance.svg\');" class="pip-pic"></div><div class="pip-error-text">{{::\'ERROR_AVAILABLE_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_AVAILABLE_SUBTITLE\' | translate}}</div><div class="pip-error-subtext" ng-if="timeoutInterval">{{::\'ERROR_AVAILABLE_TRY_AGAIN\' | translate}} {{timeoutInterval}} sec.</div><div class="pip-error-actions h48 layout-column layout-align-center-center" ng-if="isCordova"><md-button class="md-accent" ng-click="onClose($event)" aria-label="CLOSE">{{::\'ERROR_AVAILABLE_CLOSE\' | translate}}</md-button></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("missing_route/missing_route.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div style="background-image: url(\'images/invalid_route.svg\');" class="pip-pic"></div><div class="pip-error-text">{{::\'ERROR_ROUTE_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_ROUTE_SUBTITLE\' | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="CONTINUE" class="md-accent" ng-click="onContinue($event)">{{::\'ERROR_ROUTE_CONTINUE\' | translate}}</md-button></div><div class="h48" ng-if="url"><a ng-href="{{url}}">{{::\'ERROR_ROUTE_TRY_AGAIN\' | translate }}: {{url}}</a></div><div class="h48" ng-if="urlBack"><a ng-href="{{urlBack}}">{{::\'ERROR_ROUTE_GO_BACK\' | translate }}: {{urlBack}}</a></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("no_connection/no_connection.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div style="background-image: url(\'images/no_response.svg\');" class="pip-pic"></div><div class="pip-error-text">{{::\'ERROR_RESPONDING_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_RESPONDING_SUBTITLE\' | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="RETRY" class="md-accent" ng-click="onRetry($event)">{{::\'ERROR_RESPONDING_RETRY\' | translate}}</md-button></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("no_connection_panel/no_connection_panel.html",'<div class="pip-empty pip-error layout-column layout-align-center-center flex"><img src="images/no_response.svg" class="pip-pic block"><div class="pip-error-text">{{::\'ERROR_RESPONDING_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_RESPONDING_SUBTITLE\' | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="RETRY" class="md-accent" ng-click="onRetry($event)">{{::\'ERROR_RESPONDING_RETRY\' | translate}}</md-button></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("unknown/unknown.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div style="background-image: url(\'images/unknown_error.svg\');" class="pip-pic"></div><div class="pip-error-text">{{::\'ERROR_UNKNOWN_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_UNKNOWN_SUBTITLE\' | translate}}</div><div class="pip-error-subtext" ng-if="showError && error_details && error_details.status"><div ng-if="error_details.code">Code: {{error_details.code}}</div><div ng-if="error_details.description">Description: {{error_details.description}}</div><div ng-if="error_details.status">HTTP status: {{error_details.status}}</div><div ng-if="error_details.server_stacktrace">Server stacktrace: {{error_details.server_stacktrace}}</div><div ng-if="error_details.client_stacktrace">Client stacktrace stacktrace: {{error_details.client_stacktrace}}</div></div><div class="pip-error-actions layout-column layout-align-center-center"><div class="h48" ng-if="isCordova"><md-button aria-label="CLOSE" class="md-accent" ng-click="onClose($event)">{{::\'ERROR_UNKNOWN_CLOSE\' | translate}}</md-button></div><div class="h48"><md-button aria-label="DETAILS" class="md-accent" ng-click="onDetails($event)">{{::\'ERROR_UNKNOWN_DETAILS\' | translate}}</md-button></div></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("unsupported/unsupported.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div class="pip-error-text">{{::\'ERROR_UNSUPPORTED_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_UNSUPPORTED_SUBTITLE\' | translate}}</div><div class="pip-error-details layout-row layout-align-center-center" ng-if="$mdMedia(\'gt-xs\')"><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/ie.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx">{{::\'ERROR_UNSUPPORTED_IE\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_IE_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/fm.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.mozilla.org/ru/firefox/new/">{{::\'ERROR_UNSUPPORTED_FM\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_FM_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/gc.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.google.com/chrome/browser/desktop/index.html?platform=win64#">{{::\'ERROR_UNSUPPORTED_GC\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_GC_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/o.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="http://www.opera.com/ru/download">{{::\'ERROR_UNSUPPORTED_O\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_O_VER\' | translate}}</p></div></div></div><div class="pip-error-details" ng-if="$mdMedia(\'xs\')"><div class="layout-row layout-align-center-center"><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/ie.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx">{{::\'ERROR_UNSUPPORTED_IE\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_IE_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/fm.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.mozilla.org/ru/firefox/new/">{{::\'ERROR_UNSUPPORTED_FM\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_FM_VER\' | translate}}</p></div></div></div><div class="tm16 layout-row layout-align-center-center"><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/gc.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.google.com/chrome/browser/desktop/index.html?platform=win64#">{{::\'ERROR_UNSUPPORTED_GC\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_GC_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/o.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="http://www.opera.com/ru/download">{{::\'ERROR_UNSUPPORTED_O\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_O_VER\' | translate}}</p></div></div></div></div></div>')}])}(),function(){"use strict";var r=angular.module("pipErrors.Strings",["pipTranslate"]);r.run(["$injector",function(r){var e=r.has("pipTranslate")?r.get("pipTranslate"):null;null!=e&&(e.translations("en",{ERROR_ROUTE_TITLE:"Sorry, the page isn't available",ERROR_ROUTE_SUBTITLE:"The link you followed may be broken, or the page may have been removed.",ERROR_ROUTE_CONTINUE:"Continue",ERROR_ROUTE_TRY_AGAIN:"Try again",ERROR_ROUTE_GO_BACK:"Go Back",ERROR_ROUTE_PAGE_TITLE:"Wrong page",ERROR_UNKNOWN_TITLE:"Oops. Something went wrong",ERROR_UNKNOWN_SUBTITLE:"Unknown error occurred, but don't worry we already have been notified.",ERROR_UNKNOWN_CLOSE:"Close",ERROR_UNKNOWN_DETAILS:"Details",ERROR_AVAILABLE_TITLE:"The server is on maintenance",ERROR_AVAILABLE_SUBTITLE:"Sorry for the inconvenience. This application is undergoing maintenance for a short period. We'll be back soon. Thank for your patience.",ERROR_AVAILABLE_CLOSE:"Close",ERROR_AVAILABLE_TRY_AGAIN:"Try after",ERROR_RESPONDING_TITLE:"No connection to the server",ERROR_RESPONDING_SUBTITLE:"Unable to connect to the server. Check your Internet connection and try again.",ERROR_RESPONDING_RETRY:"Retry",ERROR_UNSUPPORTED_TITLE:"This browser is not supported",ERROR_UNSUPPORTED_SUBTITLE:"Our application using the latest technology. This makes the application faster and easier to use. Unfortunately, your browser doesn't support those technologies. Download on of these great browsers and you'll be on your way:",ERROR_UNSUPPORTED_O:"Opera",ERROR_UNSUPPORTED_O_VER:"Version 36+",ERROR_UNSUPPORTED_IE:"Internet Explorer",ERROR_UNSUPPORTED_IE_VER:"Version 11+",ERROR_UNSUPPORTED_GC:"Google Chrome",ERROR_UNSUPPORTED_GC_VER:"Version 48+",ERROR_UNSUPPORTED_FM:"Mozilla Firefox",ERROR_UNSUPPORTED_FM_VER:"Version 45+"}),e.translations("ru",{ERROR_ROUTE_TITLE:"Sorry, the page isn't available",ERROR_ROUTE_SUBTITLE:"The link you followed may be broken, or the page may have been removed.",ERROR_ROUTE_CONTINUE:"Continue",ERROR_ROUTE_TRY_AGAIN:"Try again",ERROR_ROUTE_GO_BACK:"Go Back",ERROR_ROUTE_PAGE_TITLE:"Wrong page",ERROR_UNKNOWN_TITLE:"Oops. Something went wrong",ERROR_UNKNOWN_SUBTITLE:"Unknown error occurred, but don't worry we already have been notified.",ERROR_UNKNOWN_CLOSE:"Close",ERROR_UNKNOWN_DETAILS:"Details",ERROR_AVAILABLE_TITLE:"The server is on maintenance",ERROR_AVAILABLE_SUBTITLE:"Sorry for the inconvenience. This application is undergoing maintenance for a short period. We'll be back soon. Thank for your patience.",ERROR_AVAILABLE_CLOSE:"Close",ERROR_AVAILABLE_TRY_AGAIN:"Try after",ERROR_RESPONDING_TITLE:"No connection to the server",ERROR_RESPONDING_SUBTITLE:"Unable to connect to server. Check your Internet connection and try again.",ERROR_RESPONDING_RETRY:"Retry",ERROR_UNSUPPORTED_TITLE:"This browser is not supported",ERROR_UNSUPPORTED_SUBTITLE:"Our application using the latest technology. This makes the application faster and easier to use. Unfortunately, your browser doesn't support those technologies. Download on of these great browsers and you'll be on your way:",ERROR_UNSUPPORTED_O:"Opera",ERROR_UNSUPPORTED_O_VER:"Version 35+",ERROR_UNSUPPORTED_IE:"Internet Explorer",ERROR_UNSUPPORTED_IE_VER:"Version 11+",ERROR_UNSUPPORTED_GC:"Google Chrome",ERROR_UNSUPPORTED_GC_VER:"Version 47+",ERROR_UNSUPPORTED_FM:"Mozilla Firefox",ERROR_UNSUPPORTED_FM_VER:"Version 43+"}))}])}(),function(){"use strict";var r=angular.module("pipErrors.Translate",[]);r.filter("translate",["$injector",function(r){var e=r.has("pipTranslate")?r.get("pipTranslate"):null;return function(r){return e?e.translate(r)||r:r}}])}(),function(){"use strict";var r=angular.module("pipErrors.Pages",["ngMaterial","pipErrors.Strings","pipErrors.NoConnection","pipErrors.MissingRoute","pipErrors.Unsupported","pipErrors.Unknown","pipErrors.Maintenance","pipErrors.Translate","pipErrors.Templates"]);r.config(["$stateProvider",function(r){r.state("errors_no_connection",{url:"/errors/no_connection",params:{error:null},controller:"pipErrorNoConnectionController",templateUrl:"no_connection/no_connection.html"}).state("errors_maintenance",{url:"/errors/maintenance",params:{error:null},controller:"pipErrorMaintenanceController",templateUrl:"maintenance/maintenance.html"}).state("errors_missing_route",{url:"/errors/missing_route",params:{unfoundState:null,fromState:null},controller:"pipErrorMissingRouteController",templateUrl:"missing_route/missing_route.html"}).state("errors_unsupported",{url:"/errors/unsupported",params:{error:null},controller:"pipErrorUnsupportedController",templateUrl:"unsupported/unsupported.html"}).state("errors_unknown",{url:"/errors/unknown",params:{error:null},controller:"pipErrorUnknownController",templateUrl:"unknown/unknown.html"})}])}(),function(){"use strict";var r=angular.module("pipClearErrors",[]);r.directive("pipClearErrors",function(){return{restrict:"A",require:["ngModel","^?form"],link:function(r,e,t,o){function n(){var r=i.$error;for(var e in r)r.hasOwnProperty(e)&&"ERROR_"==e.substring(0,6)&&i.$setValidity(e,!0)}function a(){s.$serverError={}}var i=o[0],s=o[1];r.$watch(t.ngModel,function(r){n(),a()})}}})}(),function(){"use strict";var r=angular.module("pipFormErrors",[]);r.factory("pipFormErrors",["$rootScope",function(r){function e(r){if(null!=r)return _.isEmpty(r.$error)?{hint:!0}:r.$error}function t(r,e){if(null!=r&&null!=e){if(r.$submitted&&(e.$touched||r.$dirty)||!r.$submitted&&(e.$touched||e.$dirty)){var t=_.isEmpty(e.$error)?{hint:!0}:e.$error;return t}return{hint:!0}}}function o(r,e){r.$setPristine(),r.$setUntouched(),e&&(r.$setDirty(),r.$setSubmitted()),r.$serverError={}}function n(r,e){if(r)if(e&&r[e]&&r[e].$error)r[e].$error={};else{for(var t in r)r[t]&&r[t].$error&&(r[t].$error={});r&&r.$error&&(r.$error={})}}function a(r,e,t){if(null!=e){r.$serverError=r.$serverError||{};var o=e.code||(e.data||{}).code||null;if(!o&&e.status&&(o=e.status),o){var n="ERROR_"+o,a=t?t[o]:null;if(a&&r[a]&&r[a].$setValidity)return void r[a].$setValidity(n,!1);if("form"==a)return void(r.$serverError[n]=!0)}if(e.data&&e.data.message)return r.$serverError.ERROR_UNKNOWN=e.data.message,void i(e);if(e.message)return r.$serverError.ERROR_UNKNOWN=e.message,void i(e);if(e.name)return r.$serverError.ERROR_UNKNOWN=e.name,void i(e);r.$serverError.ERROR_UNKNOWN=e,i(e)}}function i(e){r.$emit("pipUnhandledInternalError",{error:e})}return{errorsWithHint:e,touchedErrorsWithHint:t,resetFormErrors:o,setFormError:a,resetFieldsErrors:n}}])}(),function(){"use strict";var r=angular.module("pipErrors.Maintenance",[]);r.controller("pipErrorMaintenanceController",["$scope","$state","$rootScope","pipAppBar",function(r,e,t,o){function n(){o.showMenuNavIcon(),o.showShadow(),o.showTitleBreadcrumb("ERROR_AVAILABLE_TITLE",[]),o.showLocalActions(null,[])}function a(){}t.$routing=!1,r.isCordova=!1,n(),r.error=e&&e.params&&e.params.error?e.params.error:{},r.timeoutInterval=r.error&&r.error.config&&r.error.config.params&&r.error.config.params.interval?r.error.config.params.interval:0,r.onClose=a}])}(),function(){"use strict";var r=angular.module("pipErrors.MissingRoute",[]);r.controller("pipErrorMissingRouteController",["$scope","$state","$rootScope","pipAppBar",function(r,e,t,o){function n(){o.showMenuNavIcon(),o.showShadow(),o.showTitleBreadcrumb("ERROR_ROUTE_PAGE_TITLE",[]),o.showLocalActions(null,[])}function a(){}n(),t.$routing=!1,r.error=e&&e.params&&e.params.error?e.params.fromState:{},r.unfoundState=e&&e.params?e.params.unfoundState:{},r.url=r.unfoundState&&r.unfoundState.to?e.href(r.unfoundState.to,r.unfoundState.toParams,{absolute:!0}):"",r.urlBack=r.fromState&&r.fromState.to?e.href(r.fromState.to,r.fromState.fromParams,{absolute:!0}):"",r.onContinue=a}])}(),function(){"use strict";var r=angular.module("pipErrors.NoConnection",[]);r.controller("pipErrorNoConnectionController",["$scope","$state","$rootScope","$window","pipAppBar",function(r,e,t,o,n){function a(){o.history.back()}function i(){n.showMenuNavIcon(),n.showShadow(),n.showTitleBreadcrumb("ERROR_RESPONDING_TITLE",[]),n.showLocalActions(null,[])}t.$routing=!1,i(),r.error=e&&e.params&&e.params.error?e.params.error:{},r.onRetry=a}])}(),function(){"use strict";var r=angular.module("pipNoConnectionPanel",["pipErrors.Translate"]);r.directive("pipNoConnectionPanel",function(){return{restrict:"E",scope:{error:"=pipError",retry:"=pipRetry"},templateUrl:"no_connection_panel/no_connection_panel.html",controller:"pipNoConnectionPanelController"}}),r.controller("pipNoConnectionPanelController",["$scope","$element","$attrs","pipTranslate",function(r,e,t,o){function n(){r.retry&&angular.isFunction(r.retry)&&r.retry()}r.onRetry=n}])}(),function(){"use strict";var r=angular.module("pipErrors.Unknown",[]);r.controller("pipErrorUnknownController",["$scope","$state","$rootScope","pipAppBar",function(r,e,t,o){function n(){o.showMenuNavIcon(),o.showShadow(),o.showTitleBreadcrumb("ERROR_UNKNOWN_TITLE",[]),o.showLocalActions(null,[])}function a(){r.error_details={},r.error_details.code=r.error.code,r.error_details.description=r.error.message,r.error_details.status=r.error.status,r.error_details.server_stacktrace=function(){},r.error_details.client_stacktrace=function(){}}function i(){r.showError=!0}function s(){}t.$routing=!1,r.isCordova=!1,n(),r.error=e&&e.params&&e.params.error?e.params.error:{},r.error_details=null,r.onDetails=i,r.onClose=s,a()}])}(),function(){"use strict";var r=angular.module("pipErrors.Unsupported",[]);r.controller("pipErrorUnsupportedController",["$scope","$state","$rootScope","$mdMedia","pipAppBar",function(r,e,t,o,n){function a(){n.showMenuNavIcon(),n.showShadow(),n.showTitleBreadcrumb("ERROR_UNSUPPORTED_TITLE",[]),n.showLocalActions(null,[])}r.$mdMedia=o,t.$routing=!1,a(),r.error=e&&e.params&&e.params.error?e.params.error:{}}])}();
!function(e){"use strict";e.module("pipCharts",["pipBarCharts","pipLineCharts","pipPieCharts","pipChartLegends"])}(window.angular),function(e){try{e=angular.module("pipCharts.Templates")}catch(t){e=angular.module("pipCharts.Templates",[])}e.run(["$templateCache",function(e){e.put("bar/bar_chart.html",'<div class="bar-chart flex-auto layout-column"><svg class="flex-auto"></svg></div><pip-chart-legend pip-series="barChart.legend" pip-interactive="false"></pip-chart-legend>')}])}(),function(e){try{e=angular.module("pipCharts.Templates")}catch(t){e=angular.module("pipCharts.Templates",[])}e.run(["$templateCache",function(e){e.put("legend/interactive_legend.html",'<div><div class="chart-legend-item" ng-repeat="item in series"><md-checkbox class="lp16 m8" ng-model="item.disabled" ng-true-value="false" ng-false-value="true" ng-if="interactive" aria-label="{{ item.label }}"><p class="legend-item-value" ng-style="{\'background-color\': item.color}">{{ item.value }}</p><p class="legend-item-label">{{:: item.label || item.key }}</p></md-checkbox><div ng-if="!interactive"><span class="bullet" ng-style="{\'background-color\': item.color}"></span> <span>{{:: item.label || item.key}}</span></div></div></div>')}])}(),function(e){try{e=angular.module("pipCharts.Templates")}catch(t){e=angular.module("pipCharts.Templates",[])}e.run(["$templateCache",function(e){e.put("line/line_chart.html",'<div class="line-chart" flex="auto" layout="column"><svg class="flex-auto" ng-class="{\'visible-x-axis\': lineChart.isVisibleX(), \'visible-y-axis\': lineChart.isVisibleY()}"></svg></div><pip-chart-legend pip-series="lineChart.data" pip-interactive="false"></pip-chart-legend>')}])}(),function(e){try{e=angular.module("pipCharts.Templates")}catch(t){e=angular.module("pipCharts.Templates",[])}e.run(["$templateCache",function(e){e.put("pie/pie_chart.html",'<div class="pie-chart" flex="auto" layout="column"><svg class="flex-auto"></svg></div><pip-chart-legend pip-series="pieChart.data" pip-interactive="false"></pip-chart-legend>')}])}(),function(){"use strict";function e(){return{restrict:"E",scope:{series:"=pipSeries"},bindToController:!0,controllerAs:"barChart",templateUrl:"bar/bar_chart.html",controller:["$element","$scope","$timeout","$interval","$mdColorPalette",function(e,t,a,n,i){function l(){var e=d3.selectAll(".nv-bar text")[0],t=d3.selectAll(".nv-bar")[0],n=d3.selectAll(".legend-title")[0],i=d3.select(".nvd3-svg")[0][0].getBBox().height;d3.select(".bar-chart").classed("visible",!0),t.forEach(function(t,a){var n=t.getBBox(),l=d3.select(t),r=d3.transform(l.attr("transform")).translate[1];l.attr("transform","translate("+Number(46*a+50)+", "+i+")").select("rect").attr("width",38),l.transition().duration(1e3).attr("transform","translate("+Number(46*a+50)+", "+r+")"),d3.select(e[a]).attr("dy",n.height/2).attr("x",19)}),n.forEach(function(e,t){a(function(){$(e).addClass("visible")},200*t)})}function r(e){return"rgba("+i[e][500].value[0]+","+i[e][500].value[1]+","+i[e][500].value[2]+","+(i[e][500].value[3]||1)+")"}function o(){s.legend.forEach(function(e,t){e.color=e.color||r(d[t])})}var s=this,c=null,u=null,d=_.map(i,function(e,t){return t});s.data=s.series||[],(s.series||[]).length>d.length&&(s.data=s.series.slice(0,9)),s.legend=s.data[0].values,o(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(d.map(r))},t.$watch("barChart.series",function(e){s.data=e||[],o(),c&&(u.datum(s.data).call(c),c.update(),intervalUpdate(c.update,10))}),nv.addGraph(function(){return c=nv.models.discreteBarChart().margin({top:10,right:0,bottom:0,left:-50}).x(function(e){return e.label}).y(function(e){return e.value}).showValues(!0).showXAxis(!1).showYAxis(!1).valueFormat(d3.format("d")).duration(0).height(270).color(function(e){return e.color||d3.scale.paletteColors().range()}),c.tooltip.enabled(!1),c.noData("No data for this moment..."),u=d3.select(e.get(0)).select(".bar-chart svg").datum(s.data).style("height",270).call(c),c},function(){c.dispatch.on("beforeUpdate",function(){a(l,0)}),a(l,0)})}]}}angular.module("pipBarCharts",[]).directive("pipBarChart",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{series:"=pipSeries",interactive:"=pipInteractive"},templateUrl:"legend/interactive_legend.html",controller:["$element","$scope","$timeout","$mdColorPalette",function(e,t,a,n){function i(){var a=$(e).find("md-checkbox .md-container");a.each(function(e,a){$(a).css("color",t.series[e].color||o[e]).find(".md-icon").css("background-color",t.series[e].color||o[e])})}function l(){var t=$(e).find(".chart-legend-item");t.each(function(e,t){a(function(){$(t).addClass("visible")},200*e)})}function r(){t.series.forEach(function(e,t){e.color=e.color||o[t],e.disabled=e.disabled||!1})}var o=_.map(n,function(e){return e[500].hex});t.$watch("series",function(){a(function(){l(),i()},0),r()},!0),t.$watch("interactive",function(e,t){1==e&&e!=t&&a(i,0)}),a(function(){l(),i()},0),r()}]}}angular.module("pipChartLegends",[]).directive("pipChartLegend",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{series:"=pipSeries",showYAxis:"=pipYAxis",showXAxis:"=pipXAxis"},bindToController:!0,controllerAs:"lineChart",templateUrl:"line/line_chart.html",controller:["$element","$scope","$timeout","$interval","$mdColorPalette",function(e,t,a,n,i){function l(e){return"rgba("+i[e][500].value[0]+","+i[e][500].value[1]+","+i[e][500].value[2]+","+(i[e][500].value[3]||1)+")"}function r(){o.data.forEach(function(e,t){e.color=e.color||l(u[t])})}var o=this,s=null,c=null,u=_.map(i,function(e,t){return t});o.data=o.series||[],o.isVisibleX=function(){return void 0==o.showXAxis||o.showXAxis},o.isVisibleY=function(){return void 0==o.showYAxis||o.showYAxis},o.series.length>u.length&&(o.data=o.series.slice(0,9)),r(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(u.map(l))},t.$watch("lineChart.series",function(e){o.data=e,r(),s&&c.datum(o.data).call(s)},!0),nv.addGraph(function(){return s=nv.models.lineChart().margin({top:20,right:20,bottom:30,left:30}).x(function(e){return e.x}).y(function(e){return e.value}).height(270).useInteractiveGuideline(!0).showXAxis(!0).showYAxis(!0).showLegend(!1).color(function(e){return e.color||d3.scale.paletteColors().range()}),s.tooltip.enabled(!1),s.noData("No data for this moment..."),s.yAxis.tickFormat(function(e){return e/1e3+"k"}),s.xAxis.tickFormat(function(e){return e}),c=d3.select(e.get(0)).select(".line-chart svg"),c.datum(o.data).style("height",270).call(s),nv.utils.windowResize(s.update),s},function(){var e=d3.selectAll(".legend-title")[0];e.forEach(function(e,t){a(function(){$(e).addClass("visible")},200*t)})})}]}}angular.module("pipLineCharts",[]).directive("pipLineChart",e)}(),function(){"use strict";function e(){return{restrict:"E",scope:{series:"=pipSeries"},bindToController:!0,controllerAs:"pieChart",templateUrl:"pie/pie_chart.html",controller:["$element","$scope","$timeout","$interval","$mdColorPalette",function(e,t,a,n,i){function l(){var t=d3.selectAll(".legend-title")[0],n=d3.select(e.get(0)).select(".pie-chart svg")[0][0],i=c.data.reduce(function(e,t){return e+t.value},0);d3.select(n).select(".nv-pie:not(.nvd3)").append("text").classed("label-total",!0).attr("text-anchor","middle").style("dominant-baseline","central").text(i),d3.select(n).transition().duration(1e3).style("opacity",1),d=d3.select(e.find("text.label-total").get(0)),f(),t.forEach(function(e,t){a(function(){$(e).addClass("visible")},200*t)})}function r(){var t=e.find(".nv-pieLabels").get(0).getBBox();t.width&&t.height&&d.style("font-size",~~t.width/2)}function o(e){return"rgba("+i[e][500].value[0]+","+i[e][500].value[1]+","+i[e][500].value[2]+","+(i[e][500].value[3]||1)+")"}function s(){c.data.forEach(function(e,t){e.color=e.color||o(h[t])})}var c=this,u=null,d=null,p=null,h=_.map(i,function(e,t){return t}),f=r;c.data=c.data||[],c.series.length>h.length&&(c.data=c.series.slice(0,9)),t.$watch("pieChart.series",function(e){c.data=e,s(),u&&(p.datum(c.data).call(u),a(f))},!0),s(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(h.map(o))},nv.addGraph(function(){return u=nv.models.pieChart().margin({top:0,right:0,bottom:0,left:0}).x(function(e){return e.value}).y(function(e){return e.value}).height(250).width(250).showLabels(!0).labelThreshold(.001).growOnHover(!1).donut(!0).donutRatio(.5).color(function(e){return e.color||d3.scale.paletteColors().range()}),u.tooltip.enabled(!1),u.noData("No data for this moment..."),u.showLegend(!1),p=d3.select(e.get(0)).select(".pie-chart svg").attr("height",250).style("opacity",0).datum(c.data).call(u),nv.utils.windowResize(function(){u.update(),a(f)}),u},function(){a(l)})}]}}angular.module("pipPieCharts",[]).directive("pipPieChart",e)}();
!function(e){"use strict";e.module("pipSettings",["pipSettings.Service","pipSettings.Page"])}(window.angular),function(e){try{e=angular.module("pipSettings.Templates")}catch(t){e=angular.module("pipSettings.Templates",[])}e.run(["$templateCache",function(e){e.put("settings_page/settings_page.html",'<md-toolbar class="pip-appbar-ext"></md-toolbar><pip-document width="800" min-height="400" class="pip-settings"><div class="pip-menu-container" ng-hide="manager === false || !tabs || tabs.length < 1"><md-list class="pip-menu pip-simple-list hide-xs" pip-selected="selected.tabIndex" pip-selected-watch="selected.navId" pip-select="onNavigationSelect($event.id)"><md-list-item class="pip-simple-list-item pip-selectable flex" ng-repeat="tab in tabs track by tab.state" ng-if="$party.id == $user.id || tab.state == \'settings.basic_info\'|| tab.state ==\'settings.contact_info\' || tab.state ==\'settings.blacklist\'" md-ink-ripple="" pip-id="{{:: tab.state }}"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class="pip-content-container" ng-if="selected.tab"><pip-dropdown class="hide-gt-xs" pip-actions="tabs" pip-dropdown-select="onDropdownSelect" pip-active-index="selected.tabIndex"></pip-dropdown><div class="pip-body tp24-flex layout-column" ui-view=""></div></div></div><div class="layout-column layout-align-center-center flex" ng-show="manager === false || !tabs || tabs.length < 1">{{::\'ERROR_400\' | translate}}</div></pip-document>')}])}(),function(e){try{e=angular.module("pipSettings.Templates")}catch(t){e=angular.module("pipSettings.Templates",[])}e.run(["$templateCache",function(e){e.put("user_settings/user_settings_basic_info.html",'<form name="form" class="w-stretch" novalidate=""><md-progress-linear class="pip-progress-top" ng-show="transaction.busy()" md-mode="indeterminate"></md-progress-linear><div class="layout-row bm12"><div class="md-tile-left"><pip-avatar-edit pip-party-id="$party.id" pip-created="onPictureCreated($event)" pip-changed="onPictureChanged($control, $event)"></pip-avatar-edit></div><div class="md-tile-content tp0 layout-align-center"><h3 class="tm16 bm8 text-one-line">{{ nameCopy }}</h3><p class="text-primary text-overflow m0">{{::\'SETTINGS_BASIC_INFO_FROM\' | translate}} {{$user.signup | formatLongDate }}</p></div></div><md-input-container class="md-block"><label>{{::\'SETTINGS_BASIC_INFO_FULL_NAME\' | translate}}</label> <input name="fullName" step="any" type="text" tabindex="0" required="" ng-model="$party.name" ng-disabled="transaction.busy()" ng-change="onChangeBasicInfo()"><div class="hint" ng-if="errorsWithHint(form, form.fullName).hint">{{::\'ERROR_FULLNAME_INVALID\' | translate}}</div></md-input-container><md-input-container class="md-block bm0"><label>{{::\'SETTINGS_BASIC_INFO_PRIMARY_EMAIL\' | translate}}</label> <input name="email" type="email" required="" ng-model="$party.email" ng-change="onChangeBasicInfo()" pip-email-unique="{{$party.email}}"><div class="hint" ng-if="errorsWithHint(form, form.email).hint && !$user.email_ver">{{::\'SETTINGS_BASIC_INFO_VERIFY_HINT\' | translate}}</div><div ng-messages="errorsWithHint(form.email)" ng-hide="$party.type ==\'team\'"><div ng-message="email">{{::\'ERROR_EMAIL_INVALID\' | translate}}</div><div ng-message="emailUnique">{{::\'ERROR_EMAIL_INVALID\' | translate}}</div></div></md-input-container><md-button class="md-raised bm16 tm8 rm8" ng-click="onVerifyEmail($event)" ng-hide="$user.email_ver || $party.type ==\'team\'">{{::\'SETTINGS_BASIC_INFO_VERIFY_CODE\' | translate}}</md-button><md-button ng-click="onChangePassword($event)" class="md-raised bm16 tm8" ng-hide="$party.type ==\'team\'">{{::\'SETTINGS_BASIC_INFO_CHANGE_PASSWORD\' | translate}}</md-button><md-input-container class="md-block flex"><label>{{::\'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME\' | translate }}</label> <textarea ng-model="$party.about" columns="1" ng-change="onChangeBasicInfo()"></textarea></md-input-container><md-input-container class="md-block" ng-hide="$party.type ==\'team\'"><label>{{::\'GENDER\' | translate}}</label><md-select ng-model="$party.gender" ng-change="onChangeBasicInfo()" placeholder="{{\'GENDER\' | translate}}"><md-option ng-value="gender.id" ng-repeat="gender in genders">{{gender.name}}</md-option></md-select></md-input-container><div ng-hide="$party.type ==\'team\'"><p class="text-caption text-grey tm0 bm0">{{::\'SETTINGS_BASIC_INFO_BIRTHDAY\' | translate}}</p><pip-date ng-model="$party.birthday" ng-change="onChangeBasicInfo()" pip-time-mode="past time-mode=" past"=""></pip-date></div><md-input-container class="md-block" ng-hide="$party.type ==\'team\'"><label>{{::\'LANGUAGE\' | translate}}</label><md-select placeholder="{{\'LANGUAGE\' | translate}}" ng-model="$user.language" ng-change="onChangeUser()"><md-option ng-value="language.id" ng-repeat="language in languages">{{language.name}}</md-option></md-select></md-input-container><md-input-container class="md-block" ng-if="$party.type !=\'team\'"><label>{{::\'THEME\' | translate}}</label><md-select class="w-stretch theme-text-primary" ng-model="$user.theme" ng-change="onChangeUser()" ng-disabled="transaction.busy()"><md-option ng-value="theme" ng-repeat="theme in themes" ng-selected="$theme == theme ? true : false">{{ theme | translate }}</md-option></md-select></md-input-container><pip-location-edit class="map-edit bm24-flex" ng-hide="$party.type ==\'team\'" pip-changed="onChangeBasicInfo()" pip-location-name="$party.loc_name" pip-location-pos="loc_pos"></pip-location-edit></form>')}])}(),function(e){try{e=angular.module("pipSettings.Templates")}catch(t){e=angular.module("pipSettings.Templates",[])}e.run(["$templateCache",function(e){e.put("user_settings/user_settings_change_password.html",'<md-dialog class="pip-dialog layout-column" width="440"><form name="form" ng-submit="onApply()"><div class="pip-header"><h3 class="m0">{{::\'SETTINGS_CHANGE_PASSWORD_TITLE\' | translate : module}}</h3></div><div class="pip-body"><div class="pip-content"><div class="text-error bm8" ng-messages="form.$serverError"><div ng-message="ERROR_UNKNOWN">{{ form.$serverError.ERROR_UNKNOWN | translate }}</div></div><md-input-container class="md-block"><label>{{::\'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD\' | translate }}</label> <input name="oldPassword" type="password" ng-model="changePasData.old_password" ng-required="change_password.$submitted" pip-clear-errors=""><div ng-messages="errorsWithHint(form, form.oldPassword)"><div ng-message="required">{{::\'ERROR_REQUIRED\' | translate }}</div><div ng-message="ERROR_1107">{{::\'ERROR_WRONG_PASSWORD\' | translate }}</div></div></md-input-container><md-input-container class="md-block"><label>{{\'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD\' | translate }}</label> <input name="newPassword" type="password" ng-model="changePasData.new_password" ng-change="onCheckRepeatPassword()" ng-required="change_password.$submitted" ng-minlength="6" pip-clear-errors=""><div class="hint" ng-if="errorsWithHint(form, form.newPassword).hint">{{ \'HINT_PASSWORD\' | translate }}</div><div ng-messages="errorsWithHint(form, form.newPassword)"><div ng-message="required">{{::\'ERROR_REQUIRED\' | translate}}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate }}</div><div ng-message="ERROR_1105">{{::\'ERROR_IDENTICAL_PASSWORDS\' | translate }}</div></div></md-input-container><md-input-container class="md-block"><label>{{ \'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD\' | translate }}</label> <input name="repeat" type="password" ng-model="repeat" ng-change="onCheckRepeatPassword()" ng-required="change_password.$submitted" ng-minlength="6"><div class="hint" ng-if="errorsRepeatWithHint(form.repeat).hint">{{::\'HINT_REPEAT_PASSWORD\' | translate }}</div><div ng-messages="errorsRepeatWithHint(form.repeat)"><div ng-message="required">{{::\'ERROR_REQUIRED\' | translate }}</div><div ng-message="minlength">{{::\'HINT_PASSWORD\' | translate }}</div><div ng-message="repeat">{{::\'REPEAT_PASSWORD_INVALID\' | translate }}</div></div></md-input-container></div></div><div class="pip-footer"><div><md-button aria-label="xxx" ng-click="onCancel()">{{::\'CANCEL\' | translate }}</md-button><md-button type="submit" class="md-accent" aria-label="xxx">{{::\'APPLY\' | translate : module}}</md-button></div></div></form></md-dialog>')}])}(),function(e){try{e=angular.module("pipSettings.Templates")}catch(t){e=angular.module("pipSettings.Templates",[])}e.run(["$templateCache",function(e){e.put("user_settings/user_settings_sessions.html",'<md-progress-linear ng-show="transaction.busy()" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><div class="pip-details-title pip-sessions"><p class="pip-title bm16">{{::\'SETTINGS_ACTIVE_SESSIONS_TITLE\' | translate}}</p><p class="pip-subtitle">{{::\'SETTINGS_ACTIVE_SESSIONS_SUBTITLE\' | translate}}</p></div><md-list class="w-stretch"><div ng-repeat="session in sessions"><div class="layout-row" ng-init="showBlock = session.id != sessionId" ng-click="showBlock = !showBlock"><p class="m0 text-subhead2 text-overflow max-w50-stretch">{{::session.client}}</p><p class="m0 lp4 text-body1 color-secondary-text flex">{{::\'SETTINGS_ACTIVE_SESSION_ACTIVE\' | translate}}</p><p class="m0 text-body1 color-secondary-text">{{::country}}<md-icon ng-if="showBlock" md-svg-icon="icons:triangle-up"></md-icon><md-icon ng-if="!showBlock" md-svg-icon="icons:triangle-down"></md-icon></p></div><div class="layout-row bm8 bp8" ng-class="{\'divider-bottom\':!$last}"><div class="flex-50"><p class="m0 bm4 text-body1 text-overflow color-secondary-text">{{session.last_req | date : \'medium\'}}</p><p class="m0 bm4 text-body1 text-overflow color-secondary-text" ng-show="showBlock">{{::\'SETTINGS_ACTIVE_SESSION_OS\' | translate}}{{::session.platform}}</p><p class="m0 bm4 text-body1 text-overflow color-secondary-text" ng-show="showBlock">{{::\'SETTINGS_ACTIVE_SESSION_IP\' | translate}}{{::session.address}}</p><md-button class="md-raised" ng-show="showBlock && session.id != sessionId" ng-click="onRemove(session)">{{::\'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION\' | translate}}</md-button></div><pip-location-ip class="map-edit flex-50" ng-if="showBlock" pip-ipaddress="session.address" pip-extra-info="country = extraInfo.country"></pip-location-ip></div></div></md-list><div class="layout-row layout-align-end-center"><md-button class="md-raised" ng-show="sessions.length > 1" ng-click="onRemoveAll()">{{::\'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS\' | translate}}</md-button></div>')}])}(),function(e){try{e=angular.module("pipSettings.Templates")}catch(t){e=angular.module("pipSettings.Templates",[])}e.run(["$templateCache",function(e){e.put("user_settings/user_settings_verify_email.html",'<md-dialog class="pip-dialog layout-column" width="440"><div class="pip-body"><div class="pip-content"><md-progress-linear ng-show="transaction.busy()" md-mode="indeterminate" class="pip-progress-top"></md-progress-linear><h2>{{::\'VERIFY_EMAIL_TITLE\' | translate}}</h2><p class="title-padding">{{::\'VERIFY_EMAIL_TEXT_1\' | translate}}</p><form name="form" novalidate=""><div ng-messages="form.$serverError" class="text-error bm8"><div ng-message="ERROR_UNKNOWN">{{ form.$serverError.ERROR_UNKNOWN | translate }}</div></div><md-input-container class="display bp4 md-block"><label>{{::\'EMAIL\' | translate}}</label> <input name="email" type="email" ng-model="data.email" required="" step="any" pip-clear-errors="" tabindex="1" ng-disabled="transaction.busy()" pip-test="input-email"><div class="hint" ng-if="errorsWithHint(form, form.email).hint">{{::\'HINT_EMAIL\' | translate}}</div><div ng-messages="errorsWithHint(form, form.email)" xng-if="!form.email.$pristine"><div ng-message="required">{{::\'ERROR_EMAIL_INVALID\' | translate }}</div><div ng-message="ERROR_1106">{{::\'ERROR_USER_NOT_FOUND\' | translate}}</div></div></md-input-container><md-input-container class="md-block"><label>{{::\'ENTRY_VERIFICATION_CODE\' | translate}}</label> <input name="code" ng-disabled="transaction.busy()" tabindex="0" ng-model="data.code" required="" pip-clear-errors=""><div ng-messages="errorsWithHint(form, form.code)"><div ng-message="required">{{::\'ERROR_CODE_INVALID\' | translate }}</div><div ng-message="ERROR_1103">{{::\'ERROR_CODE_WRONG\' | translate }}</div></div></md-input-container><p>{{::\'VERIFY_EMAIL_TEXT_21\' | translate}} <a ng-click="onRequestVerificationClick()" class="pointer" tabindex="0">{{::\'VERIFY_EMAIL_RESEND\' | translate}}</a> {{::\'VERIFY_EMAIL_TEXT_22\' | translate}}</p></form></div></div><div class="pip-footer"><md-button ng-click="onCancel()" ng-hide="transaction.busy()" aria-label="xxx">{{::\'CANCEL\' | translate}}</md-button><md-button class="md-accent" ng-click="onVerify()" ng-hide="transaction.busy()" tabindex="0" aria-label="xxx" ng-disabled="data.code.length == 0 || data.email.length == 0 || (!data.email && form.$pristine) || (!data.code)">{{::\'VERIFY\' | translate}}</md-button><md-button class="md-warn" ng-show="transaction.busy()" ng-click="transaction.abort()" tabindex="0" aria-label="xxx">{{::\'CANCEL\' | translate}}</md-button></div></md-dialog>')}])}(),function(e,t){"use strict";var n=e.module("pipSettings.Page",["pipSettings.Service","pipAppBar","pipSelected","pipTranslate","pipSettings.Templates","pipNavIcon","pipActions.Service"]);n.config(["$stateProvider",function(e){e.state("settings",{url:"/settings?party_id",auth:!0,controller:"pipSettingsPageController",templateUrl:"settings_page/settings_page.html"})}]),n.controller("pipSettingsPageController",["$scope","$state","$rootScope","$timeout","pipAppBar","pipSettings","pipActions","pipBreadcrumb","pipNavIcon",function(e,n,a,s,i,r,o,l,d){function c(){o.hide(),i.part("menu",!0),i.part("actions","primary"),i.part("icon",!0),i.part("title","breadcrumb"),i.hideShadow(),l.text("Settings"),d.menu()}function S(e){p(e.state)}function p(t){_(t),e.selected.tab&&n.go(t)}function _(n){e.selected.tab=t.find(e.tabs,function(e){return e.state===n}),e.selected.tabIndex=t.indexOf(e.tabs,e.selected.tab),e.selected.tabId=n}e.tabs=t.filter(r.getTabs(),function(e){if(e.visible===!0&&(!e.access||e.access(a.$user,e)))return e}),e.tabs=t.sortBy(e.tabs,"index"),e.selected={},"settings"!==n.current.name?_(n.current.name):"settings"===n.current.name&&r.getDefaultTab()?_(r.getDefaultTab().state):s(function(){r.getDefaultTab()&&_(r.getDefaultTab().state),!r.getDefaultTab()&&e.tabs.length>0&&_(e.tabs[0].state)}),c(),e.onNavigationSelect=p,e.onDropdownSelect=S}])}(window.angular,window._),function(e,t){"use strict";var n=e.module("pipSettings.Service",[]);n.provider("pipSettings",["$stateProvider",function(e){function n(e){return"settings."+e}function a(){return t.clone(p,!0)}function s(){var e;return e=t.find(p,function(t){return t.state===e}),t.clone(e,!0)}function i(a){var s;if(o(a),s=t.find(p,function(e){return e.state===n(a.state)}))throw new Error('Tab with state name "'+a.state+'" is already registered');p.push({state:n(a.state),title:a.title,index:a.index||1e5,access:a.access,visible:a.visible!==!1,stateConfig:t.clone(a.stateConfig,!0)}),e.state(n(a.state),a.stateConfig),"undefined"==typeof S&&1===p.length&&r(a.state)}function r(e){if(!t.find(p,function(t){return t.state===n(e)}))throw new Error('Tab with state name "'+e+'" is not registered');S=n(e)}function o(e){if(!e||!t.isObject(e))throw new Error("Invalid object");if(null===e.state||""===e.state)throw new Error("Tab should have valid Angular UI router state name");if(e.access&&!t.isFunction(e.access))throw new Error('"access" should be a function');if(!e.stateConfig||!t.isObject(e.stateConfig))throw new Error("Invalid state configuration object")}function l(e){return e&&(_=e,m=null),_}function d(e){return e&&(m=e,_=null),m}function c(e){return null!==e&&void 0!==e&&(T=!!e),T}var S,p=[],_="SETTINGS_TITLE",m=null,T=!0;return this.showTitleText=l,this.showTitleLogo=d,this.showNavIcon=c,{addTab:i,getTabs:a,setDefaultTab:r,getDefaultTab:s,showTitleText:l,showTitleLogo:d,showNavIcon:c,$get:function(){return{getTabs:a,addTab:i,getDefaultTab:s,setDefaultTab:r,showTitleText:l,showTitleLogo:d,showNavIcon:c}}}}])}(window.angular,window._),function(e){"use strict";e.module("pipUserSettings",["ngMaterial","pipData","pipSettings.Service","pipSettings.Page","pipUserSettings.Strings","pipUserSettings.Sessions","pipUserSettings.BasicInfo","pipSettings.Templates"])}(window.angular),function(e,t){"use strict";var n=e.module("pipUserSettings.BasicInfo",["pipUserSettings.ChangePassword","pipUserSettings.VerifyEmail","pipSettings.Service","pipSettings.Page"]);n.config(["pipSettingsProvider",function(e){e.addTab({state:"basic_info",index:1,title:"SETTINGS_BASIC_INFO_TITLE",stateConfig:{url:"/basic_info",controller:"pipUserSettingsBasicInfoController",templateUrl:"user_settings/user_settings_basic_info.html",auth:!0}}),e.setDefaultTab("basic_info")}]),n.controller("pipUserSettingsBasicInfoController",["$scope","$rootScope","$mdDialog","$state","$window","$timeout","$mdTheming","pipTranslate","pipTransaction","pipTheme","pipToasts","pipDataUser","pipDataParty","pipFormErrors",function(n,a,s,i,r,o,l,d,c,S,p,_,m,T){function g(){n.picture.save(function(){a.$broadcast("pipPartyAvatarUpdated")},function(e){return new Error(e)})}function I(e){n.picture=e.sender,n.picture.save(function(){a.$broadcast("pipPartyAvatarUpdated")},function(e){return new Error(e)})}function u(){if(n.form&&n.form.$setSubmitted(),a.$party){if("person"===a.$party.type&&n.form.$invalid)return;a.$party.loc_pos=n.loc_pos;try{var t=e.toJson(a.$party)}catch(e){throw e}if(t!==n.originalParty){var s=n.transaction.begin("UPDATING");m.updateParty(a.$party,function(e){n.transaction.aborted(s)||(n.transaction.end(),n.originalParty=t,n.nameCopy=e.name)},function(t){n.transaction.end(t),n.message=String()+"ERROR_"+t.status||t.data.status_code,a.$party=e.fromJson(n.originalParty)})}}}function E(){var e=n.transaction.begin("RequestEmailVerification");a.$user.id===a.$party.id&&_.updateUser({item:a.$user},function(t){n.transaction.aborted(e)||(n.transaction.end(),d.use(t.language),a.$user.language=t.language,a.$user.theme=t.theme,a.$user.theme&&S.setCurrentTheme(a.$user.theme,!0))},function(e){var t;n.transaction.end(e),t=String()+"ERROR_"+e.status||e.data.status_code,p.showNotification(d.translate(t),null,null,null)})}function N(e){var t;s.show({templateUrl:"user_settings/user_settings_change_password.html",controller:"pipUserSettingsChangePasswordController",targetEvent:e,locals:{email:a.$party.email}}).then(function(e){e&&(t=String()+"RESET_PWD_SUCCESS_TEXT",p.showNotification(d.translate(t),null,null,null))})}function A(e){var t;s.show({templateUrl:"user_settings/user_settings_verify_email.html",controller:"pipUserSettingsVerifyEmailController",targetEvent:e,locals:{email:a.$party.email}}).then(function(e){n.user.email_ver=e,e&&(t=String()+"VERIFY_EMAIL_SUCCESS_TEXT",p.showNotification(d.translate(t),null,null,null))})}try{n.originalParty=e.toJson(a.$party)}catch(e){throw e}n.nameCopy=a.$party.name,o(function(){n.loc_pos=a.$party.loc_pos}),n.genders=d.translateSet(["male","female","n/s"]),n.languages=d.translateSet(["ru","en"]),n.transaction=c("settings.basic_info",n),n.themes=t.keys(t.omit(l.THEMES,"default")),i.get("settings.basic_info").onExit=u,n.errorsWithHint=T.errorsWithHint,n.onChangePassword=N,n.onVerifyEmail=A,n.onPictureCreated=I,n.onPictureChanged=g,n.onChangeUser=t.debounce(E,2e3),n.onChangeBasicInfo=t.debounce(u,2e3)}])}(window.angular,window._),function(e){"use strict";var t=e.module("pipUserSettings.ChangePassword",[]);t.controller("pipUserSettingsChangePasswordController",["$scope","$rootScope","$mdDialog","email","pipDataUser","pipTransaction","pipFormErrors",function(e,t,n,a,s,i,r){function o(){n.cancel()}function l(){e.changePasData&&(e.repeat!==e.changePasData.new_password&&""!==e.repeat&&e.repeat?(e.showRepeatHint=!0,e.form.repeat.$setValidity("repeat",!1)):(e.form.repeat.$setValidity("repeat",!0),e.repeat===e.changePasData.new_password?e.showRepeatHint=!1:e.showRepeatHint=!0))}function d(){e.onCheckRepeatPassword(),e.form.$invalid||e.transaction.begin("CHANGE_PASSWORD")&&(e.changePasData.email=a,s.changePassword(e.changePasData,function(){e.transaction.end(),n.hide(!0)},function(t){e.transaction.end(t),r.setFormError(e.form,t,{1107:"oldPassword",1105:"newPassword"})}))}e.transaction=i("settings.change_password",e),e.errorsRepeatWithHint=function(t,n){return e.showRepeatHint?r.errorsWithHint(t,n):{}},e.showRepeatHint=!0,e.changePasData={},e.errorsWithHint=r.errorsWithHint,e.onCancel=o,e.onCheckRepeatPassword=l,e.onApply=d}])}(window.angular),function(e,t,n){"use strict";var a=e.module("pipUserSettings.Sessions",["pipSettings.Service","pipSettings.Page"]);a.config(["pipSettingsProvider","pipDataSessionProvider",function(e,t){e.addTab({state:"sessions",index:3,title:"SETTINGS_ACTIVE_SESSIONS_TITLE",stateConfig:{url:"/sessions",controller:"pipUserSettingsSessionsController",templateUrl:"user_settings/user_settings_sessions.html",auth:!0,resolve:{sessions:t.readSessionsResolver,sessionId:t.readSessionIdResolver}}})}]),a.controller("pipUserSettingsSessionsController",["$scope","pipTransaction","pipDataSession","sessions","sessionId",function(e,a,s,i,r){function o(){var a=e.transaction.begin("REMOVING");n.eachSeries(e.sessions,function(n,a){n.id==e.sessionId?a():s.removeSession({session:n},function(){e.sessions=t.without(e.sessions,n),a()},function(e){})},function(t){t&&e.transaction.end(error),e.transaction.aborted(a)||e.transaction.end()})}function l(n,a){if(n.id!==e.sessionId){var i=e.transaction.begin("REMOVING");s.removeSession({session:n},function(){e.transaction.aborted(i)||(e.transaction.end(),e.sessions=t.without(e.sessions,n),a&&a())},function(t){e.transaction.end(t),e.message="ERROR_"+t.status||t.data.status_code})}}e.sessionId=r,e.transaction=a("settings.sessions",e),e.sessions=i,e.onRemoveAll=o,e.onRemove=l}])}(window.angular,window._,window.async),function(e){"use strict";var t=e.module("pipUserSettings.Strings",["pipTranslate"]);t.config(["pipTranslateProvider",function(e){e.translations("en",{SETTINGS_TITLE:"Settings",SETTINGS_BASIC_INFO_TITLE:"Basic info",SETTINGS_ACTIVE_SESSIONS_TITLE:"Active sessions",SETTINGS_BASIC_INFO_FULL_NAME:"Full name",SETTINGS_BASIC_INFO_VERIFY_HINT:"Please, verify your email address.",SETTINGS_BASIC_INFO_VERIFY_CODE:"Verify email address",SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD:"Your password was changed on ",SETTINGS_BASIC_INFO_CHANGE_PASSWORD:"Change your password",SETTINGS_BASIC_INFO_NAME_HINT:"Please, use your real name to let other people know who you are.",SETTINGS_BASIC_INFO_WORDS_ABOUT_ME:"Few words about yourself",SETTINGS_BASIC_INFO_GENDER:"Gender",SETTINGS_BASIC_INFO_BIRTHDAY:"Birthday",SETTINGS_BASIC_INFO_LOCATION:"Current location",SETTINGS_BASIC_INFO_PRIMARY_EMAIL:"Primary email",SETTINGS_BASIC_INFO_FROM:"User since ",SETTINGS_BASIC_INFO_USER_ID:"User ID",SETTINGS_CHANGE_PASSWORD_TITLE:"Change password",SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD:"New password",SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD:"Repeat password",SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD:"Current password",SETTINGS_ACTIVE_SESSIONS_SUBTITLE:' If you notice any unfamiliar devices or locations, click"Close Session" to end the session.',SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION:"Close session",SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS:"Close active sessions",SETTINGS_ACTIVE_SESSION_OS:"OS: ",SETTINGS_ACTIVE_SESSION_IP:"IP: ",SETTINGS_ACTIVE_SESSION_ACTIVE:"active",SETTINGS_BLACKLIST_TITLE:"Blacklist",SETTINGS_BLACKLIST_SUBTITLE:"Parties from blacklist will not be able to send you invitations and private messages.",SETTINGS_BLACKLIST_UNBLOCK:"Unblock",SETTINGS_BLACKLIST_EMPTY:"You have no blocked parties",SETTINGS_CONTACT_INFO_TITLE:"Contact info",SETTINGS_CONTACT_INFO_EMAIL:"Email",SETTINGS_CONTACT_INFO_ADD_EMAIL:"Add email",SETTINGS_CONTACT_INFO_ADD_PHONE:"Add phone",SETTINGS_CONTACT_INFO_ADD_ADDRESS:"Add address",SETTINGS_CONTACT_INFO_ADD_ACCOUNT:"Add account",SETTINGS_CONTACT_INFO_ADD_URL:"Add URL",SETTINGS_CONTACT_INFO_ADDRESS:"Address",SETTINGS_CONTACT_INFO_PHONE:"Phone",SETTINGS_CONTACT_INFO_ACCOUNT_NAME:"Account name",SETTINGS_CONTACT_INFO_URL:"URL",THEME:"Theme",HINT_PASSWORD:"Minimum 6 characters",HINT_REPEAT_PASSWORD:"Repeat password",ERROR_WRONG_PASSWORD:"Wrong password",ERROR_IDENTICAL_PASSWORDS:"Old and new passwords are identical",REPEAT_PASSWORD_INVALID:"Password does not match",ERROR_EMAIL_INVALID:"Please, enter a valid email"}),e.translations("ru",{SETTINGS_TITLE:"Настройки",SETTINGS_BASIC_INFO_TITLE:"Основные данные",SETTINGS_ACTIVE_SESSIONS_TITLE:"Активные сессии",SETTINGS_BASIC_INFO_FULL_NAME:"Полное имя",SETTINGS_BASIC_INFO_NAME_HINT:"Пожалуйста, используйте реальное имя, чтоб люди могли вас узнать",SETTINGS_BASIC_INFO_VERIFY_HINT:"Пожалуйста, подтвердите адрес своей электронной почты",SETTINGS_BASIC_INFO_VERIFY_CODE:"Подтвердите адрес эл.почты",SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD:"Ваш пароль был изменен ",SETTINGS_BASIC_INFO_CHANGE_PASSWORD:"Поменять пароль",SETTINGS_BASIC_INFO_WORDS_ABOUT_ME:"Несколько слов о себе",SETTINGS_BASIC_INFO_GENDER:"Пол",SETTINGS_BASIC_INFO_BIRTHDAY:"Дата рождения",SETTINGS_BASIC_INFO_LOCATION:"Текущее местонахождение",SETTINGS_BASIC_INFO_PRIMARY_EMAIL:"Основной адрес эл. почты",SETTINGS_BASIC_INFO_FROM:"Начиная с",SETTINGS_BASIC_INFO_USER_ID:"Личный код",SETTINGS_CHANGE_PASSWORD_TITLE:"Изменить пароль",SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD:"Новый пароль",SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD:"Повтор",SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD:"Текущий пароль",SETTINGS_ACTIVE_SESSIONS_SUBTITLE:'Если вы заметили какие-либо незнакомые устройства или месторасположение, нажмите кнопку "Закончить сеанс", чтобы завершить сеанс.',SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION:"Закрыть сессию",SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS:"Закрыть активные сессии",SETTINGS_ACTIVE_SESSION_OS:"ОС: ",SETTINGS_ACTIVE_SESSION_IP:"IP: ",SETTINGS_ACTIVE_SESSION_ACTIVE:"Активно",SETTINGS_BLACKLIST_TITLE:"Блокировки",SETTINGS_BLACKLIST_SUBTITLE:"Участники из черного списка не смогут посылать вам приглашения и личные сообщения.",SETTINGS_BLACKLIST_UNBLOCK:"Разблокировать",SETTINGS_BLACKLIST_EMPTY:"У вас нет заблокированных участников",SETTINGS_CONTACT_INFO_TITLE:"Контакты",SETTINGS_CONTACT_INFO_EMAIL:"Адрес электронной почты",SETTINGS_CONTACT_INFO_ADD_EMAIL:"Добавить адрес эл. почты",SETTINGS_CONTACT_INFO_ADD_PHONE:"Добавить телефон",SETTINGS_CONTACT_INFO_ADD_ADDRESS:"Добавить адрес",SETTINGS_CONTACT_INFO_ADD_ACCOUNT:"Добавить аккаунт",SETTINGS_CONTACT_INFO_ADD_URL:"Добавить веб-сайт",SETTINGS_CONTACT_INFO_ADDRESS:"Адрес",SETTINGS_CONTACT_INFO_PHONE:"Телефон",SETTINGS_CONTACT_INFO_ACCOUNT_NAME:"Учетка в мессенджере",SETTINGS_CONTACT_INFO_URL:"Веб сайт",THEME:"Тема",HINT_PASSWORD:"Минимум 6 знаков",HINT_REPEAT_PASSWORD:"Повторите пароль",ERROR_WRONG_PASSWORD:"Неправильный пароль",ERROR_IDENTICAL_PASSWORDS:"Старый и новый пароли идентичны",REPEAT_PASSWORD_INVALID:"Пароль не совпадает",ERROR_EMAIL_INVALID:"Пожалуйста, введите правильный почт.адрес"})}])}(window.angular),function(e){"use strict";var t=e.module("pipUserSettings.VerifyEmail",[]);t.controller("pipUserSettingsVerifyEmailController",["$scope","$rootScope","$mdDialog","pipTransaction","pipFormErrors","pipDataUser","email",function(e,t,n,a,s,i,r){function o(){e.transaction.abort()}function l(){n.cancel()}function d(){var t=e.transaction.begin("RequestEmailVerification");i.requestEmailVerification({},function(n){e.transaction.aborted(t)||e.transaction.end()},function(t){e.transaction.end(t)})}function c(){if(e.form.$setSubmitted(),!e.form.$invalid){var t=e.transaction.begin("Verifying");i.verifyEmail({email:e.data.email,code:e.data.code},function(a){e.transaction.aborted(t)||(e.transaction.end(),n.hide(!0))},function(t){e.transaction.end(t),s.setFormError(e.form,t,{1106:"email",1103:"code"})})}}e.emailVerified=!1,e.data={email:r,code:""},e.transaction=a("settings.verify_email",e),e.onAbort=o,e.onRequestVerificationClick=d,e.errorsWithHint=s.errorsWithHint,e.onVerify=c,e.onCancel=l}])}(window.angular);
!function(e){"use strict";e.module("pipHelp",["pipHelp.Service","pipHelp.Page"])}(window.angular),function(e){try{e=angular.module("pipHelp.Templates")}catch(t){e=angular.module("pipHelp.Templates",[])}e.run(["$templateCache",function(e){e.put("help_page/help_page.html",'<md-toolbar class="pip-appbar-ext"></md-toolbar><pip-document width="800" min-height="400"><div class="pip-menu-container pip-help" ng-if="manager !== false"><md-list class="pip-menu pip-simple-list hide-xs" pip-selected="selected.tabIndex" pip-selected-watch="selected.navId" pip-select="onNavigationSelect($event.id)"><md-list-item class="pip-simple-list-item pip-selectable" ng-repeat="tab in tabs track by tab.state" md-ink-ripple="" pip-id="{{::tab.state }}"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class="pip-content-container"><pip-dropdown class="hide-gt-xs" pip-actions="tabs" pip-dropdown-select="onDropdownSelect" pip-active-index="selected.tabIndex"></pip-dropdown><div class="pip-body layout-column flex" ui-view=""></div></div></div><div class="layout-column layout-align-center-center flex" ng-if="manager === false">{{::\'ERROR_400\' | translate}}</div></pip-document>')}])}(),function(e,t){"use strict";function i(e){e.state("help",{url:"/help",auth:!1,controller:"pipHelpPageController",templateUrl:"help_page/help_page.html"})}function n(i,n,a,s,p){function l(e){r(e.state)}function o(){s.showMenuNavIcon(),s.showTitleText("Help"),s.showShadowSm(),s.showLocalActions(null,[])}function r(e){c(e),n.selected.tab&&a.go(e)}function c(e){n.selected.tab=t.find(n.tabs,function(t){return t.state===e}),n.selected.tabIndex=t.indexOf(n.tabs,n.selected.tab),n.selected.tabId=e}n.tabs=t.filter(p.getTabs(),function(t){if(t.visible&&(t.access===e.noop||t.access(i.$user,t)))return t}),n.selected={},c("help"!==a.current.name?a.current.name:p.getDefaultTab().state),o(),n.onNavigationSelect=r,n.onDropdownSelect=l}i.$inject=["$stateProvider"],n.$inject=["$rootScope","$scope","$state","pipAppBar","pipHelp"],e.module("pipHelp.Page",["ui.router","pipHelp.Service","pipAppBar","pipSelected","pipTranslate","pipHelp.Templates"]).config(i).controller("pipHelpPageController",n)}(window.angular,window._),function(e,t){"use strict";e.module("pipHelp.Service",["ui.router"]).provider("pipHelp",["$stateProvider",function(i){function n(e){return"help."+e}function a(){return t.clone(c,!0)}function s(){return t.clone(t.find(c,function(e){return e.state===r}),!0)}function p(a){var s;if(o(a),s=t.find(c,function(e){return e.state===n(a.state)}))throw new Error('Tab with state name "'+a.state+'" is already registered');c.push({state:n(a.state),title:a.title,access:a.access||e.noop,visible:a.visible||!0,stateConfig:t.clone(a.stateConfig,!0)}),i.state(n(a.state),a.stateConfig),t.isUndefined(r)&&1===c.length&&l(a.state)}function l(e){var a,s;if(a=t.find(c,function(t){return t.state===n(e)}),!a)throw s=new Error('Tab with state name "'+e+'" is not registered');r=n(e),i.redirect("help",n(e))}function o(e){if(!e||!t.isObject(e))throw new Error("Invalid object");if(!e.state||""===e.state)throw new Error("Tab should have valid Angular UI router state name");if(e.access&&!t.isFunction(e.access))throw new Error('"access" should be a function');if(!e.stateConfig||!t.isObject(e.stateConfig))throw new Error("Invalid state configuration object")}var r,c=[];this.addTab=p,this.setDefaultTab=l,this.getTabs=a,this.getDefaultTab=s,this.$get=function(){return{getTabs:a,getDefaultTab:s,addTab:p,setDefaultTab:l}}}])}(window.angular,window._);