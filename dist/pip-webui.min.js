!function(){"use strict";angular.module("pipCore",["pipUtils","pipErrors","pipTransactions","pipTranslate","pipState","pipTimer","pipAssert","pipDebug","pipTranslateFilters","pipClearErrors","pipFocused","pipSelected","pipInfiniteScroll","pipDraggable","pipUnsavedChanges","pipFabTooltipVisibility"])}(),function(){"use strict";var e=angular.module("pipClearErrors",[]);e.directive("pipClearErrors",function(){return{restrict:"A",require:["ngModel","^?form"],link:function(e,t,n,r){function i(){var e=o.$error;for(var t in e)e.hasOwnProperty(t)&&"ERROR_"==t.substring(0,6)&&o.$setValidity(t,!0)}function a(){s.$serverError={}}var o=r[0],s=r[1];e.$watch(n.ngModel,function(e){i(),a()})}}})}(),function(){"use strict";var e=angular.module("pipDraggable",["pipUtils"]);e.service("pipDraggable",function(){var e=this;e.inputEvent=function(e){return angular.isDefined(e.touches)?e.touches[0]:angular.isDefined(e.originalEvent)&&angular.isDefined(e.originalEvent.touches)?e.originalEvent.touches[0]:e}}),e.directive("pipDrag",["$rootScope","$parse","$document","$window","pipDraggable","pipUtils",function(e,t,n,r,i,a){return{restrict:"A",link:function(o,s,l){function u(){R.left=s.css("css"),R.top=s.css("top"),R.position=s.css("position"),R.width=s.css("width")}o.value=l.ngDrag;var c,p,f,d,g,h,v,m,b=50,$=!1,S="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,E="touchstart mousedown",w="touchmove mousemove",y="touchend mouseup",T=o.$id,_=null,C=null,D=!1,O=null,R={},k=t(l.pipDragStart)||null,A=t(l.pipDragStop)||null,x=t(l.pipDragSuccess)||null,N=!!angular.isDefined(l.allowTransform)&&o.$eval(l.allowTransform),I=t(l.pipDragData),U=a.toBoolean(l.pipVerticalScroll)||!0,B=a.toBoolean(l.pipHorizontalScroll)||!0,P=parseFloat(l.pipActivationDistance)||75,F=parseFloat(l.pipScrollDistance)||50,j=!1,L=angular.element(window),W=t(l.pipScrollContainer),Y=angular.noop,q=function(){if(s.attr("pip-draggable","false"),s[0].querySelectorAll)var e=angular.element(s[0].querySelectorAll("[pip-drag-handle]"));else var e=s.find("[pip-drag-handle]");e.length&&(m=e),H(!0),L=j?angular.element($element.parent()):l.pipScrollContainer?angular.element(W(o)):angular.element(window)},H=function(e){e&&(o.$on("$destroy",M),o.$watch(l.pipDrag,G),o.$watch(l.pipCenterAnchor,K),m?m.on(E,z):s.on(E,z),S||"img"!=s[0].nodeName.toLowerCase()||s.on("mousedown",function(){return!1}))},M=function(e){H(!1)},G=function(e,t){D=e},K=function(e,t){angular.isDefined(e)&&($=e||"true")},V=function(e){return angular.isDefined(angular.element(e.target).attr("pip-cancel-drag"))},z=function(e){D&&(V(e)||"mousedown"==e.type&&0!=e.button||(u(),S?(X(),O=setTimeout(function(){X(),J(e)},b),n.on(w,X),n.on(y,X)):J(e)))},X=function(){clearTimeout(O),n.off(w,X),n.off(y,X)},J=function(t){D&&(t.preventDefault(),c=s[0].getBoundingClientRect(),C=N?c:{left:document.body.scrollLeft,top:document.body.scrollTop},s.centerX=s[0].offsetWidth/2,s.centerY=s[0].offsetHeight/2,p=i.inputEvent(t).pageX,f=i.inputEvent(t).pageY,h=p-c.left,v=f-c.top,$?(d=p-s.centerX-r.pageXOffset,g=f-s.centerY-r.pageYOffset):(d=p-h-r.pageXOffset,g=f-v-r.pageYOffset),n.on(w,Q),n.on(y,Z),Y=e.$on("draggable:_triggerHandlerMove",function(e,t){Q(t)}))},Q=function(t){D&&(t.preventDefault(),s.hasClass("pip-dragging")||(_=I(o),s.addClass("pip-dragging"),e.$broadcast("draggable:start",{x:p,y:f,tx:d,ty:g,event:t,element:s,data:_}),k&&o.$apply(function(){k(o,{$data:_,$event:t})})),p=i.inputEvent(t).pageX,f=i.inputEvent(t).pageY,(B||U)&&re(),$?(d=p-s.centerX-C.left,g=f-s.centerY-C.top):(d=p-h-C.left,g=f-v-C.top),ne(d,g),e.$broadcast("draggable:move",{x:p,y:f,tx:d,ty:g,event:t,element:s,data:_,uid:T,dragOffset:C}))},Z=function(t){D&&(t.preventDefault(),e.$broadcast("draggable:end",{x:p,y:f,tx:d,ty:g,event:t,element:s,data:_,callback:ee,uid:T}),s.removeClass("pip-dragging"),s.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),te(),n.off(w,Q),n.off(y,Z),A&&o.$apply(function(){A(o,{$data:_,$event:t})}),Y())},ee=function(e){x&&o.$apply(function(){x(o,{$data:_,$event:e})})},te=function(){N?s.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):s.css({position:R.position,top:R.top,left:R.left,"z-index":"",width:R.width})},ne=function(e,t){var n=s.css("width");N?s.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+e+", "+t+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+e+", "+t+")"}):s.css({left:e+"px",top:t+"px",position:"fixed","z-index":100,width:n})},re=function(){var e=0,t=0,n=function(e){return e.offset()||{left:0,top:0}};if(B){var r=n(L).left,i=L.innerWidth(),a=r+i;p-r<P?e=-F:a-p<P&&(e=F)}if(U){var o=n(L).top,s=L.innerHeight(),l=o+s;f-o<P?t=-F+30:l-f<P&&(t=F-30)}if(0!==e||0!==t){var u=L.scrollLeft(),c=L.scrollTop();L.scrollLeft(u+e),L.scrollTop(c+t)}};q()}}}]),e.directive("pipDrop",["$parse","$timeout","$window","$document","pipDraggable",function(e,t,n,r,i){return{restrict:"A",link:function(n,i,a){n.value=a.pipDrop,n.isTouching=!1;var o=null,s=n.$id,l=!1,u=e(a.pipDropSuccess),c=e(a.pipDragStart),p=e(a.pipDragStop),f=e(a.pipDragMove),d=function(){g(!0)},g=function(e){e&&(n.$watch(a.pipDrop,v),n.$on("$destroy",h),n.$on("draggable:start",m),n.$on("draggable:move",b),n.$on("draggable:end",$))},h=function(e){g(!1)},v=function(e,t){l=e},m=function(e,r){l&&(S(r.x,r.y,r.element),a.pipDragStart&&t(function(){c(n,{$data:r.data,$event:r})}))},b=function(e,r){l&&(S(r.x,r.y,r.element),a.pipDragMove&&t(function(){f(n,{$data:r.data,$event:r})}))},$=function(e,r){return l&&s!==r.uid?(S(r.x,r.y,r.element)&&(r.callback&&r.callback(r),a.pipDropSuccess&&t(function(){u(n,{$data:r.data,$event:r,$target:n.$eval(n.value)})})),a.pipDragStop&&t(function(){p(n,{$data:r.data,$event:r})}),void E(!1,r.element)):void E(!1,r.element)},S=function(e,t,r){var a=w(e,t);return n.isTouching=a,a&&(o=i),E(a,r),a},E=function(e,t){e?(i.addClass("pip-drag-enter"),t.addClass("pip-drag-over")):o==i&&(o=null,i.removeClass("pip-drag-enter"),t.removeClass("pip-drag-over"))},w=function(e,t){var n=i[0].getBoundingClientRect();return e-=r[0].body.scrollLeft+r[0].documentElement.scrollLeft,t-=r[0].body.scrollTop+r[0].documentElement.scrollTop,e>=n.left&&e<=n.right&&t<=n.bottom&&t>=n.top};d()}}}]),e.directive("pipPreventDrag",["$parse","$timeout",function(e,t){return{restrict:"A",link:function(e,t,n){var r=function(){t.attr("pip-draggable","false"),i(!0)},i=function(e){e&&t.on("mousedown touchstart touchmove touchend touchcancel",a)},a=function(e){var t=e.originalEvent;return t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.returnValue=!1,!1};r()}}}]),e.directive("pipCancelDrag",function(){return{restrict:"A",link:function(e,t,n){t.find("*").attr("pip-cancel-drag","pip-cancel-drag")}}})}(),function(){"use strict";var e=angular.module("pipFabTooltipVisibility",[]);e.directive("pipFabTooltipVisibility",["$parse","$timeout",function(e,t){return{restrict:"A",scope:!1,controller:["$scope","$attrs",function(n,r){var i=e(r.pipFabTooltipVisibility),a=e(r.pipFabShowTooltip),o=a.assign;n.$watch(i,function(e){e?t(function(){o(n,e)},600):o(n,e)})}]}}])}(),function(){"use strict";var e=angular.module("pipFocused",[]);e.directive("pipFocused",["$timeout","$mdConstant",function(e,t){return{require:"?ngModel",link:function(n,r,i){function a(){var e=u?".pip-focusable":".pip-focusable:visible";s=r.find(e),l=s.length,s.on("focus",function(){r.addClass("pip-focused-container"),$(this).addClass("md-focused")}).on("focusout",function(){r.removeClass("pip-focused-container")})}function o(e){var n=e.which||e.keyCode;if(n==t.KEY_CODE.LEFT_ARROW||n==t.KEY_CODE.UP_ARROW||n==t.KEY_CODE.RIGHT_ARROW||n==t.KEY_CODE.DOWN_ARROW){e.preventDefault();var r=n==t.KEY_CODE.RIGHT_ARROW||n==t.KEY_CODE.DOWN_ARROW?1:-1,i=s.index(s.filter(".md-focused"))+r;i>=0&&i<l&&s[i].focus()}}var s,l,u=i.pipWithHidden;e(a),r.on("keydown",o),n.$watch(i.ngModel,function(){e(a)},!0)}}}])}(),function(){"use strict";var e=angular.module("pipInfiniteScroll",[]);e.directive("pipInfiniteScroll",["$rootScope","$window","$interval","$parse",function(e,t,n,r){var i=500;return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(r,a,o){function s(e){return e=e[0]||e,isNaN(e.offsetHeight)?e.document.documentElement.clientHeight:e.offsetHeight}function l(e){if(e[0].getBoundingClientRect&&!e.css("none"))return e[0].getBoundingClientRect().top+u(e)}function u(e){return e=e[0]||e,isNaN(window.pageYOffset)?e.document.documentElement.scrollTop:e.ownerDocument.defaultView.pageYOffset}function c(e){return b=parseFloat(e)||0}function p(e){if($=!e,$&&v)return v=!1,y()}function f(e){return E=e}function d(e){if(null!=h&&h.unbind("scroll",y),h=e,null!=e)return h.bind("scroll",y)}function g(e){if(null!=e&&0!==e.length){if(e instanceof HTMLElement?e=angular.element(e):"function"==typeof e.append?e=angular.element(e[e.length-1]):"string"==typeof e&&(e=a.parents().find(e)),null!=e&&(!Array.isArray(e)||Array.isArray(e)&&e.length>0))return d(e);throw new Error("Invalid pip-scroll-container attribute.")}}var h,v=null,m=!0,b=null,$=null,S=null,E=!1,w=angular.element(t),y=function(){var t,n,i,o,c;return h===w?(t=s(h)+u(h[0].document.documentElement),i=l(a)+s(a)):(t=s(h),n=0,void 0!==l(h)&&(n=l(h)),i=l(a)-n+s(a)),E&&(i=s((a[0].ownerDocument||a[0].document).documentElement)),o=i-t,c=o<=s(h)*b+1,c?(v=!0,$?r.$$phase||e.$$phase?r.pipInfiniteScroll():r.$apply(r.pipInfiniteScroll):void 0):v=!1};return null!=i&&(y=_.throttle(y,i)),r.$on("$destroy",function(){if(h.unbind("scroll",y),null!=S)return S(),S=null}),r.$watch("pipScrollDistance",c),c(r.pipScrollDistance),r.$watch("pipScrollDisabled",p),p(r.pipScrollDisabled),r.$watch("pipScrollUseDocumentBottom",f),f(r.pipScrollUseDocumentBottom),d(w),r.pipScrollListenForEvent&&(S=e.$on(r.pipScrollListenForEvent,y)),r.$watch("pipScrollContainer",function(e){e!==h&&g(e)}),g(r.pipScrollContainer||[]),null!=o.pipScrollParent&&d(angular.element(a.parent())),null!=o.pipScrolImmediateCheck&&(m=r.$eval(o.pipScrolImmediateCheck)),n(function(){if(m)return y()},0,1)}}}])}(),function(){"use strict";var e=angular.module("pipSelected",["pipUtils"]);e.directive("pipSelected",["$parse","pipUtils","$mdConstant","$timeout",function(e,t,n,r){return{restrict:"A",scope:!1,link:function(r,i,a){function o(e){var t=e.itemIndex,n=e.itemId,r=e.items||i.find(m+v),a=r.length,o=function(){return e.item?e.item:(void 0===t&&t===-1&&(t=r.index(r.filter("[pip-id="+n+"]"))),t>=0&&t<a?r[t]:void 0)}(),u=e.raiseEvent;o&&(i.find(m).removeClass("selected md-focused"),o=angular.element(o).addClass("selected md-focused").focus(),h||l(o),u&&s(r))}function s(e){function t(){var t=angular.element(e[b]),a=t.attr("pip-id");c&&c(r,b),f&&f(r,a),d&&d(r,{$event:{target:i,item:t,index:b,id:a,newIndex:b,oldIndex:n}})}var n=b;b=-1;for(var a=0;a<e.length;a++)if($(e[a]).hasClass("selected")){b=a;break}n!=b&&b!==-1&&r.$apply(t)}function l(e){if(!h){var t=i.offset().top,n=i.height(),r=t+n,a=e.offset().top,o=e.outerHeight(!0),s=a+o,l=i.scrollTop();t>a?i.scrollTop(l+a-t):r<s&&i.scrollTop(l+s-r)}}var u=a.pipSelected?e(a.pipSelected):null,c=u?u.assign:null,p=a.pipSelectedId?e(a.pipSelectedId):null,f=p?p.assign:null,d=a.pipSelect?e(a.pipSelect):null,g=a.pipEnterSpacePress?e(a.pipEnterSpacePress):null,h=t.toBoolean(a.pipNoScroll),v=t.toBoolean(a.pipSkipHidden)?":visible":"",m=t.toBoolean(a.pipTreeList)?".pip-selectable-tree":".pip-selectable",b=u(r),S=i.attr("tabindex"),E=a.pipSelectedWatch;i.attr("tabindex",S||0),t.toBoolean(a.pipTreeList)?r.$watch(p,function(e){setTimeout(function(){o({itemId:e,raiseEvent:!0})},0)}):r.$watch(u,function(e){o({itemIndex:e})}),E&&r.$watch(E,function(){setTimeout(function(){b=u(r),o({itemIndex:b})},100)}),o({itemIndex:b,items:i.find(m)}),i.on("click touchstart",m,function(e){o({item:e.currentTarget,raiseEvent:!0})}),i.on("keydown",function(e){var t=e.which||e.keyCode;if(t==n.KEY_CODE.ENTER||t==n.KEY_CODE.SPACE)e.preventDefault(),e.stopPropagation(),g&&g(r,{$event:{target:i,index:b,item:i.find(".selected")}});else if(t==n.KEY_CODE.LEFT_ARROW||t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.UP_ARROW||t==n.KEY_CODE.DOWN_ARROW){e.preventDefault(),e.stopPropagation();var a=i.find(m+v),s=t==n.KEY_CODE.RIGHT_ARROW||t==n.KEY_CODE.DOWN_ARROW?1:-1,l=b+s;o({itemIndex:l,items:a,raiseEvent:!0})}}),i.on("focusin",function(e){var t,n=i.find(m+".selected");n.addClass("md-focused"),0===n.length&&(b=u(r),t=i.find(m+v),o({itemIndex:b||0,items:t,raiseEvent:!0}))}),i.on("focusout",function(e){i.find(m+".md-focused"+v).removeClass("md-focused")})}}}])}(),function(){"use strict";var e=angular.module("pipUnsavedChanges",[]);e.directive("pipUnsavedChanges",["$window","$rootScope",function(e,t){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave"},link:function(n){e.onbeforeunload=function(){if(n.unsavedChangesAvailable())return t.$routing=!1,n.unsavedChangesMessage};var r=n.$on("$stateChangeStart",function(r){n.unsavedChangesAvailable()&&!e.confirm(n.unsavedChangesMessage)?(t.$routing=!1,r.preventDefault()):_.isFunction(n.afterLeave)&&n.afterLeave()});n.$on("$destroy",function(){e.onbeforeunload=null,r()})}}}])}(),function(){"use strict";var e=angular.module("pipTranslateFilters",["pipTranslate"]);e.filter("translate",["pipTranslate",function(e){return function(t){return e.translate(t)||t}}])}(),function(){"use strict";var e=angular.module("pipAssert",["pipDebug"]);e.provider("pipAssert",["pipDebugProvider",function(e){function t(){}function n(e){return Object.prototype.toString.call(e)}function r(e,t){if(!Array.isArray(e))throw new Error(t||e+" should be array")}function i(e,t){if("boolean"!=typeof e)throw new Error(t||e+" should be boolean")}function a(e,t){if(null===e)throw new Error(t||e+" should be not null")}function o(e,t){if("number"!=typeof e)throw new Error(t||e+" should be number")}function s(e,t){if("string"!=typeof e)throw new Error(t||e+" should be string")}function l(e,t){if("object"!=typeof e)throw new Error(t||e+" should be an object")}function u(e,t){if("object"==typeof e&&"[object Date]"!==n(e))throw new Error(t||e+" should be a date")}function c(e,t){if("object"==typeof e&&("[object Error]"!==n(e)||e instanceof Error))throw new Error(t||e+" should be an error")}function p(e,t){if("function"!=typeof e)throw new Error(t||e+" should be a function")}function f(e,t){if("undefined"==typeof e)throw new Error(t||e+" should be defined")}function d(e,t){if(null===e||void 0===e||e===!1)throw new Error(t||e+" should be not null or undefined or false")}function g(e,t,n){if("object"!=typeof e)throw new Error(e+" should be an object");if(null===e[t]||void 0===e[t])throw new Error(n||t+" should be in object "+e)}function h(e,t,n){if(e!=t)throw new Error(n||e+" should be not equal "+t)}function v(e,t,n){if(e==t)throw new Error(n||e+" should be equal "+t)}function m(e,t,n){if(e!==t)throw new Error(n||e+" should not be strict equal "+t)}function b(e,t,n){if(e===t)throw new Error(n||e+" should not strict equal "+t)}function $(e,t){var n=new RegExp("^[0-9a-fA-F]{24}$");if(!n.test(e))throw new Error(t||e+" should be an object id")}return{isEmpty:e.enabled()?d:t,isObjectId:e.enabled()?$:t,isDefined:e.enabled()?f:t,isDef:e.enabled()?f:t,contains:e.enabled()?g:t,equal:e.enabled()?h:t,notEqual:e.enabled()?v:t,strictEqual:e.enabled()?m:t,notStrictEqual:e.enabled()?b:t,isArray:e.enabled()?r:t,isBoolean:e.enabled()?i:t,isNumber:e.enabled()?o:t,isString:e.enabled()?s:t,isObject:e.enabled()?l:t,isDate:e.enabled()?u:t,isError:e.enabled()?c:t,isFunction:e.enabled()?p:t,isNotNull:e.enabled()?a:t,$get:["pipDebug",function(e){return{isEmpty:e.enabled()?d:t,isObjectId:e.enabled()?$:t,isDefined:e.enabled()?f:t,isDef:e.enabled()?f:t,contains:e.enabled()?g:t,equal:e.enabled()?h:t,notEqual:e.enabled()?v:t,strictEqual:e.enabled()?m:t,notStrictEqual:e.enabled()?b:t,isArray:e.enabled()?r:t,isBoolean:e.enabled()?i:t,isNumber:e.enabled()?o:t,isString:e.enabled()?s:t,isObject:e.enabled()?l:t,isDate:e.enabled()?u:t,isError:e.enabled()?c:t,isFunction:e.enabled()?p:t,isNotNull:e.enabled()?a:t}}]}}])}(),function(){"use strict";var e=angular.module("pipDebug",[]);e.provider("pipDebug",["$logProvider",function(e){function t(){return this.enabled}function n(){this.enabled=!0,e.debugEnabled(!0)}function r(){this.enabled=!1,e.debugEnabled(!1)}return this.enabled=!0,{enable:n,disable:r,enabled:t,$get:["$log",function(e){return{enabled:t,log:e.log,info:e.info,warn:e.warn,error:e.error,debug:e.debug}}]}}])}(),function(){"use strict";var e=angular.module("pipErrors",["pipUtils","pipAssert"]);e.factory("pipError",["$rootScope","pipAssert",function(e,t){function n(t){e.errors[t]={message:void 0,code:void 0,details:void 0}}function r(e){if(_.isNull(e))return null;if(e.message)return e.message;if(e.data){if(e.data.code)return"ERROR_"+e.data.code;if(e.data.message)return e.data.message}return e.statusText?e.statusText:e.status?"ERROR_"+e.status:e.data?e.data:e}function i(e){return _.isNull(e)?null:e.data&&e.data.code?e.data.code:e.status?e.status:null}function a(e){return e&&e.data?e.data:e}function o(o,s){o=o||"global";var l={reset:function(){n(o)},empty:function(){var t=e.errors[o];return _.isNull(t)||_.isNull(t.message)&&_.isNull(t.code)},get:function(){return e.errors[o]?e.errors[o]:""},message:function(){return e.errors[o]?e.errors[o].message:null},code:function(){return e.errors[o]?e.errors[o].code:null},details:function(){return e.errors[o]?e.errors[o].details:null},set:function(s){s?(t.isObject(s,"Setting error: error should be an object"),e.errors[o]={message:r(s),code:i(s),details:a(s)},console.error(e.errors[o])):n(o)}};return _.isObject(s)&&(s.error=l),l}return e.errors={},o}])}(),function(){"use strict";var e=angular.module("pipState",["ui.router","pipTranslate","pipAssert"]);e.config(["$locationProvider","$httpProvider","pipTranslateProvider",function(e,t,n){n.translations("en",{ERROR_SWITCHING:"Error while switching route. Try again."}),n.translations("ru",{ERROR_SWITCHING:"Ошибка при переходе. Попробуйте ещё раз."})}]),e.run(["$rootScope","pipTranslate","$state",function(e,t,n){e.$on("$stateChangeSuccess",function(t,r,i,a,o){if(e.$user&&e.$user.id&&r.params&&r.params.access&&i&&i.party_id){var s=_.find(e.$user.party_access,{party_id:i.party_id});if(s){if(("manager"==r.params.access&&!s.manager||"contributor"==r.params.access&&!s.contributor)&&r.params.toState)return t.preventDefault(),void n.go(r.params.toState,i)}else if(i.party_id!=e.$user.id&&r.params.toState)return t.preventDefault(),void n.go(r.params.toState,i)}e.$routing=!1,e.$state={name:r.name,url:r.url,params:i},e.$prevState={name:a.name,url:a.url,params:o}}),e.$on("$stateChangeError",function(t,n,r,i,a,o){e.$routing=!1,console.error("Error while switching route to "+n.name),console.error(o)}),e.$on("$stateNotFound",function(t,r,i,a){t.preventDefault(),n.go("errors_missing_route",{unfoundState:r,fromState:{to:i?i.name:"",fromParams:a}}),e.$routing=!1})}]),e.provider("pipState",["$stateProvider","pipAssertProvider",function(e,t){function n(e,n){return t.isNotNull(e,"pipState.redirect: fromState cannot be null"),t.isNotNull(n,"pipState.redirect: toState cannot be null"),r[e]=n,this}var r={};this.redirect=n,this.state=e.state,this.$get=["$state","$timeout","pipAssert",function(e,t,n){function i(i,a,o,s){n.contains(a,"name","$state.redirect: state should contains name prop"),n.isObject(o,"$state.redirect: params should be an object");var l;if(s.$routing=!0,l=r[a.name],_.isFunction(l)&&(l=l(a.name,o,s),_.isNull(l)))throw s.$routing=!1,new Error("Redirected toState cannot be null");return!!l&&(t(function(){i.preventDefault(),e.transitionTo(l,o,{location:"replace"})}),!0)}return e.redirect=i,e}]}])}(),function(){"use strict";var e=angular.module("pipTimer",[]);e.service("pipTimer",["$interval","$rootScope",function(e,t){function n(){return p}function r(){p||(a=e(function(){t.$broadcast("pipAutoPullChanges")},l),o=e(function(){t.$broadcast("pipAutoUpdatePage")},u),s=e(function(){t.$broadcast("pipAutoUpdateCollection")},c),p=!0)}function i(){a&&e.cancel(a),o&&e.cancel(o),s&&e.cancel(o),p=!1}var a,o,s,l=6e4,u=15e3,c=3e5,p=!1;return{isStarted:n,start:r,stop:i}}])}(),function(){"use strict";var e=angular.module("pipTransactions",["pipTranslate","pipErrors"]);e.config(["pipTranslateProvider",function(e){e.translations("en",{ENTERING:"Entering...",PROCESSING:"Processing...",LOADING:"Loading...",SAVING:"Saving..."}),e.translations("ru",{ENTERING:"Вход в систему...",PROCESSING:"Обрабатывается...",LOADING:"Загружается...",SAVING:"Сохраняется..."})}]),e.factory("pipTransaction",["$rootScope","pipError",function(e,t){function n(t){e.transactions[t]={id:void 0,operation:void 0}}function r(r,i){r=r||"global";var a=t(r),o={error:a,reset:function(){n(),a.reset()},busy:function(){var t=e.transactions[r];return null!=t&&t.id},failed:function(){return!a.empty()},aborted:function(t){var n=e.transactions[r];return _.isNull(n)||n.id!=t},get:function(){return _.isNull(e.transactions[r])&&n(r),e.transactions[r]},id:function(){var t=e.transactions[r];return t?t.id:null},operation:function(){var t=e.transactions[r];return t?t.operation:null},errorMessage:function(){return a.message()},begin:function(t){var n=e.transactions[r];return null!=n&&n.id?null:(n=e.transactions[r]={id:(new Date).getTime(),operation:t||"PROCESSING"},a.reset(),n.id)},abort:function(){var t=e.transactions[r];t&&(t.id=null),a.reset()},end:function(t){t?a.set(t):a.reset();var n=e.transactions[r];null!=n&&(n.id=null)}};return _.isObject(i)&&(i.error=a,i.transaction=o),o}return e.transactions={},r}])}(),function(){"use strict";var e=angular.module("pipTranslate",["LocalStorageModule","pipAssert"]);e.provider("pipTranslate",["pipAssertProvider",function(e){function t(t){return e.isString(t||"","pipTranslateProvider.use or pipTranslateProvider.language: argument should be a string"),null!=t&&(f=t),f}function n(t){return null!=t&&(e.isBoolean(t||"","pipTranslateProvider.persist: argument should be a boolean"),d=t),d}function r(t){return null!=t&&(e.isBoolean(t||"","pipTranslateProvider.setRoot: argument should be a boolean"),g=t),g}function i(t,n){e.isString(t,"pipTranslate.setTranslations or pipTranslateProvider.translations: first argument should be a string"),e.isObject(n,"pipTranslate.setTranslations or pipTranslateProvider.translations: second argument should be an object");var r=h[t]||{};h[t]=_.extend(r,n)}function a(e){if(_.isNull(e)||_.isUndefined(e))return"";var t=h[f]||{};return t[e]||e}function o(t){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateArray: argument should be an array");var n=[],r=h[f]||{};return _.each(t,function(e){var t=e||"";n.push(r[t]||t)}),n}function s(t,n,r){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateSet: first argument should be an array"),e.isString(n||"","pipTranslate.translateSet: second argument should be a string"),e.isString(r||"","pipTranslate.translateSet: third argument should be a string"),n=n||"id",r=r||"name";var i=[],a=h[f]||{};return _.each(t,function(e){var t={},o=e||"";t[n]=o,t[r]=a[o]||o,i.push(t)}),i}function l(t,n,r){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateObjects: first argument should be an array"),e.isString(n||"","pipTranslate.translateObjects: second argument should be a string"),e.isString(r||"","pipTranslate.translateObjects: third argument should be a string"),n=n||"name",r=r||"nameLocal";var i=h[f]||{};return _.each(t,function(e){var t=e,a=t[n]||"";t[r]=i[a]||a}),t}function u(t,n){if(e.isString(n||"","pipTranslate.translateById: second argument should be a string"),e.isString(t||"","pipTranslate.translateById: first argument should be a string"),t=t?t+"_":"",n=(t+n).replace(/ /g,"_").toUpperCase(),null==n)return"";var r=h[f]||{};return r[n]||n}function c(t,n,r,i){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateSetById: first argument should be an array"),e.isString(n||"","pipTranslate.translateSetById: second argument should be a string"),e.isString(r||"","pipTranslate.translateSetById: third argument should be a string"),e.isString(i||"","pipTranslate.translateSetById: forth argument should be a string"),n=n?n.replace(/ /g,"_").toUpperCase():"",r=r||"id",i=i||"name";var a=[],o=h[f]||{};return _.each(t,function(e){var t={},s=e||"";t[r]=s,t[i]=o[n+"_"+s]||s,a.push(t)}),a}function p(t,n,r,i){if(_.isNull(t)||0==t.length)return[];e.isArray(t,"pipTranslate.translateStringsSet: first argument should be an array"),e.isString(n||"","pipTranslate.translateStringsSet: second argument should be a string"),e.isString(r||"","pipTranslate.translateStringsSet: third argument should be a string"),e.isString(i||"","pipTranslate.translateStringsSet: forth argument should be a string"),r=r||"id",i=i||"name",n=n?n.replace(/ /g,"_").toUpperCase()+"_":"";var a=[],o=h[f]||{};return _.each(t,function(e){var t={},s=e||"";t[r]=s,t[i]=o[n+s.replace(/ /g,"_").toUpperCase()]||n+s.replace(/ /g,"_").toUpperCase(),a.push(t)}),a}var f="en",d=!0,g=!0,h={en:{en:"English",ru:"Russian",es:"Spanish",pt:"Portuguese",de:"German",fr:"French"},ru:{en:"Английский",ru:"Русский",es:"Испанский",pt:"Португальский",de:"Немецкий",fr:"Французский"}};this.translations=i,this.language=t,this.use=t,this.persist=n,this.setRoot=r,this.$get=["$rootScope","$timeout","localStorageService","pipAssert",function(e,t,n,r){function h(n,r){n=void 0===n||!!n,r=void 0===r||!!r,e.$reset=n,e.$partialReset=r,t(function(){e.$reset=!1,e.$partialReset=!1},0)}return d&&(f=n.get("language")||f),g&&(e.$language=f),{use:function(t,i,a){return r.isString(t||"","pipTranslate.use: argument should be a string"),null!=t&&t!=f&&(f=t,d&&n.set("language",f),g&&(e.$language=f),h(i,a)),f},translations:i,translate:a,translateArray:o,translateSet:s,translateObjects:l,translateById:u,translateSetById:c,translateStringsSet:p}}]}]),e.directive("pipTranslate",["pipTranslate",function(e){return{restrict:"EA",scope:{key1:"@pipTranslate",key2:"@key"},link:function(t,n,r){var i=t.key1||t.key2,a=e.translate(i);n.text(a)}}}]),e.directive("pipTranslateHtml",["pipTranslate",function(e){return{restrict:"EA",scope:{key1:"@pipTranslateHtml",key2:"@key"},link:function(t,n,r){var i=t.key1||t.key2,a=e.translate(i);n.html(a)}}}])}(),function(){"use strict";var e=angular.module("pipUtils.Collections",[]);e.factory("pipCollections",function(){var e={};return e.indexBy=function(e,t,n){if(!e||!e.length)return null;for(var r=0;r<e.length;r++)if(e[r][t]==n)return r;return null},e.findBy=function(e,t,n){if(!e||!e.length)return null;for(var r=0;r<e.length;r++)if(e[r][t]==n)return e[r];return null},e.remove=function(e,t){if(!e||!e.length)return null;for(var n=0;n<e.length;n++)e[n]==t&&(e.splice(n,1),n--)},e.removeBy=function(e,t,n){if(!e||!e.length)return null;for(var r=0;r<e.length;r++)e[r][t]==n&&(e.splice(r,1),r--)},e.replaceBy=function(e,t,n,r){if(!e||!e.length)return null;for(var i=0;i<e.length;i++)if(e[i][t]==n)return void(e[i]=r)},e.difference=function(e,t,n){var r=[];return _.each(e,function(e){var i=_.find(t,function(t){return n(e,t)});null==i&&r.push(e)}),r},e})}(),function(){"use strict";var e=angular.module("pipUtils.FormErrors",[]);e.factory("pipFormErrors",["$rootScope",function(e){function t(e){if(null!=e)return _.isEmpty(e.$error)?{hint:!0}:e.$error}function n(e,t){if(null!=e&&null!=t){if(e.$submitted&&(t.$touched||e.$dirty)||!e.$submitted&&(t.$touched||t.$dirty)){var n=_.isEmpty(t.$error)?{hint:!0}:t.$error;return n}return{hint:!0}}}function r(e,t){e.$setPristine(),e.$setUntouched(),t&&(e.$setDirty(),e.$setSubmitted()),e.$serverError={}}function i(e,t){if(e)if(t&&e[t]&&e[t].$error)e[t].$error={};else{for(var n in e)e[n]&&e[n].$error&&(e[n].$error={});e&&e.$error&&(e.$error={})}}function a(e,t,n){if(null!=t){e.$serverError=e.$serverError||{};var r=t.code||(t.data||{}).code||null;if(!r&&t.status&&(r=t.status),r){var i="ERROR_"+r,a=n?n[r]:null;if(a&&e[a]&&e[a].$setValidity)return void e[a].$setValidity(i,!1);if("form"==a)return void(e.$serverError[i]=!0)}if(t.data&&t.data.message)return e.$serverError.ERROR_UNKNOWN=t.data.message,void o(t);if(t.message)return e.$serverError.ERROR_UNKNOWN=t.message,void o(t);if(t.name)return e.$serverError.ERROR_UNKNOWN=t.name,void o(t);e.$serverError.ERROR_UNKNOWN=t,o(t)}}function o(t){e.$emit("pipUnhandledInternalError",{error:t})}return{errorsWithHint:t,touchedErrorsWithHint:n,resetFormErrors:r,setFormError:a,resetFieldsErrors:i}}])}(),function(){"use strict";var e=angular.module("pipUtils.General",["pipState","pipAssert"]);e.factory("pipUtils",["$rootScope","$window","$state","pipAssert",function(e,t,n,r){function i(e,t){if(t<1)return"";for(var n="";t>0;)1&t&&(n+=e),t>>=1,e+=e;return n}function a(e,t,n,r){if(!e||!e.length)return null;for(var i=0;i<e.length;i++)if(e[i][t]==n)return void(e[i]=r)}function o(e,t){if(!e||""==e)return"";var n=e.indexOf("\n");return n=n>=0?n:e.length,n=n<t?e.length:t,e.substring(0,n)}function s(e){if(null==e)return 0;for(var t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n);return t}function l(e){return null==e?"":""+e}function c(e){var t=new RegExp("^[0-9a-fA-F]{24}$");return t.test(e)}function p(e,t){return null==e&&null==t||null!=e&&null!=t&&e.toString()==t.toString()}function f(e,t){return(null!=e||null!=t)&&(null==e||null==t||e.toString()!=t.toString())}function d(e,t){return _.some(e,function(e){return p(e,t)})}function g(e,t,n,r){return _.isObject(t)&&"undefined"==typeof r&&(r=n,n=t,t=r),!!(n[r]||"number"==typeof n[r]&&n[r]%1==0)&&(e[t]=n[r],!0)}function h(e,t,n){var r=e[t],i=e[n];r?e[n]=r:delete e[n],i?e[t]=i:delete e[t]}function v(e){return null!=e&&(!!e&&(e=e.toString().toLowerCase(),"1"==e||"true"==e))}function m(e){return _.map(e,function(e){return e?e.toString():0})}function b(){return Math.random().toString(36).substr(2,10).toUpperCase()}function S(){t.history.back()}function E(i,a,o){if(r.isDef(i,"pipUtils.goBack: first argument should be defined"),r.isDef(a,"pipUtils.goBack: second argument should be defined"),r.isDef(o,"pipUtils.goBack: third argument should be defined"),r.isObject(i,"pipUtils.goBack: first argument should be an object"),r.isString(a,"pipUtils.goBack: second argument should a string"),r.isString(o,"pipUtils.goBack: third argument should a string"),e.$prevState&&e.$prevState.name){var s=_.cloneDeep(e.$prevState);s.params[a]=i.id,s.params[o]=i,n.go(s.name,s.params)}else t.history.back()}function w(e,t,n){e&&t&&(void 0==n&&(n=300),setTimeout(function(){if($(t).position()){var r=Math.abs($(e).scrollTop()-$(t).position().top);if(!(r<20)){var i=$(e).scrollTop()+($(t).position().top-20);n>0&&$(e).animate({scrollTop:i+"px"},n)}}},100))}function y(){var e,n=t.navigator.userAgent,r=function(){return n.search(/Edge/)>-1?"edge":n.search(/MSIE/)>-1?"ie":n.search(/Trident/)>-1?"ie11":n.search(/Firefox/)>-1?"firefox":n.search(/Opera/)>-1?"opera":n.search(/OPR/)>-1?"operaWebkit":n.search(/YaBrowser/)>-1?"yabrowser":n.search(/Chrome/)>-1?"chrome":n.search(/Safari/)>-1?"safari":n.search(/Maxthon/)>-1?"maxthon":void 0}();switch(r){case"edge":e=n.split("Edge")[1].split("/")[1];break;case"ie":e=n.split("MSIE ")[1].split(";")[0];break;case"ie11":r="ie",e=n.split("; rv:")[1].split(")")[0];break;case"firefox":e=n.split("Firefox/")[1];break;case"opera":e=n.split("Version/")[1];break;case"operaWebkit":r="opera",e=n.split("OPR/")[1];break;case"yabrowser":e=n.split("YaBrowser/")[1].split(" ")[0];break;case"chrome":e=n.split("Chrome/")[1].split(" ")[0];break;case"safari":e=n.split("Version/")[1].split(" ")[0];break;case"maxthon":e=n.split("Maxthon/")[1]}var i="desktop";/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(n.toLowerCase())&&(i="mobile");var a;try{var o=(/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(n.toLowerCase())||[u])[0].replace("sunos","solaris"),s=/(android)/.exec(n.toLowerCase())||"";
a=!s||"android"!=s&&"android"!=s[0]?o:"android"}catch(e){a="unknown"}var l;try{l={platform:i,browser:r,versionFull:e,versionShort:e.split(".")[0],os:a}}catch(e){l={platform:i,browser:"unknown",versionFull:"unknown",versionShort:"unknown",os:"unknown"}}return l}function T(e){e||(e={edge:11,ie:11,firefox:43,opera:35,chrome:47});var t=y();return t&&t.browser&&e[t.browser]&&t.versionShort>=e[t.browser],!0}var C=Object.prototype.toString,D=function e(){function t(e){return C.call(e).slice(8,-1).toLowerCase()}var n=i,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,i){var a,o,s,l,u,c,p,f=1,d=r.length,g="",h=[];for(o=0;o<d;o++)if(g=t(r[o]),"string"===g)h.push(r[o]);else if("array"===g){if(l=r[o],l[2])for(a=i[f],s=0;s<l[2].length;s++){if(!a.hasOwnProperty(l[2][s]))throw new Error(e('[_.sprintf] property "%s" does not exist',l[2][s]));a=a[l[2][s]]}else a=l[1]?i[l[1]]:i[f++];if(/[^s]/.test(l[8])&&"number"!=t(a))throw new Error(e("[_.sprintf] expecting number but found %s",t(a)));switch(l[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":a=parseInt(a,10);break;case"e":a=l[7]?a.toExponential(l[7]):a.toExponential();break;case"f":a=l[7]?parseFloat(a).toFixed(l[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&l[7]?a.substring(0,l[7]):a;break;case"u":a=Math.abs(a);break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}a=/[def]/.test(l[8])&&l[3]&&a>=0?"+"+a:a,c=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",p=l[6]-String(a).length,u=l[6]?n(c,p):"",h.push(l[5]?a+u:u+a)}return h.join("")},r.cache={},r.parse=function(e){for(var t=e,n=[],r=[],i=0;t;){if(null!==(n=/^[^\x25]+/.exec(t)))r.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(t)))r.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(n[2]){i|=1;var a=[],o=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(o)))throw new Error("[_.sprintf] huh?");for(a.push(s[1]);""!==(o=o.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(o)))a.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(o)))throw new Error("[_.sprintf] huh?");a.push(s[1])}n[2]=a}else i|=2;if(3===i)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(n)}t=t.substring(n[0].length)}return r},r}();return{copyProperty:g,copy:g,swapProperties:h,swap:h,convertToBoolean:v,toBoolean:v,toBool:v,convertObjectIdsToString:m,OidToString:m,generateVerificationCode:b,vercode:b,goBack:S,goBackAndSelect:E,scrollTo:w,equalObjectIds:p,eqOid:p,notEqualObjectIds:f,neqOid:f,containsObjectId:d,hasOid:d,isObjectId:c,sampleLine:o,hashCode:s,makeString:l,getBrowser:y,checkSupported:T,sprintf:D,replaceBy:a}}])}(),function(){"use strict";var e=angular.module("pipUtils.Strings",[]);e.factory("pipStrings",function(){var e={};return e.sampleLine=function(e,t){if(!e||""==e)return"";var n=e.indexOf("\n");return n=n>=0?n:e.length,n=n<t?e.length:t,e.substring(0,n)},e.hashCode=function(e){if(null==e)return 0;for(var t=0,n=0;n<e.length;n++)t+=e.charCodeAt(n);return t},e})}(),function(){"use strict";var e=angular.module("pipUtils.Tags",[]);e.factory("pipTags",function(){var e={},t=/#\w+/g,n=function(e){return e?_.trim(e.replace(/(_|#)+/g," ")):null};e.normalizeTag=n;var r=function(e){return e?e.replace(/( |_|#)/g,"").toLowerCase():null};e.compressTag=r;var i=function(e,t){return null==e&&null==t||null!=e&&null!=t&&r(e)==r(t)};e.equalTags=i;var a=function(e){return _.isString(e)&&(e=e.split(/( |,|;)+/)),e=_.map(e,function(e){return n(e)})};e.normalizeTags=a;var o=function(e){return _.isString(e)&&(e=e.split(/( |,|;)+/)),e=_.map(e,function(e){return r(e)})};e.compressTags=o;var s=function(e,n){var r=a(e.tags);return _.each(n,function(n){var i=e[n]||"";if(""!=i){var o=i.match(t);r=r.concat(a(o))}}),_.uniq(r)};return e.extractTags=s,e})}(),function(){"use strict";angular.module("pipUtils",["pipUtils.General","pipUtils.Strings","pipUtils.Tags","pipUtils.Collections","pipUtils.FormErrors"])}();
!function(){"use strict";angular.module("pipLayout",["pipLayout.Main","pipLayout.Simple","pipLayout.Card","pipLayout.Document","pipLayout.Tiles","pipLayout.Dialog"])}(),function(){"use strict";var i=angular.module("pipLayout.Card",[]);i.directive("pipCard",function(){return{restrict:"EA",link:function(i,t,n){function e(){var e,l,r=$(".pip-main-body"),s=$(".pip-card-container"),p=o.width(),a=r.width(),u=r.height(),c=n.minWidth?Math.floor(n.minWidth):null,d=n.minHeight?Math.floor(n.minHeight):null,h=n.width?Math.floor(n.width):null,m=n.height?Math.floor(n.height):null;if(p<=768)c=null,d=null,h=null,m=null,a=null,u=null;else{var f=p>1200?24:16;a-=2*f,u-=2*f,c=c?Math.min(c,a):null,d=d?Math.min(d,u):null,h=h?Math.min(h,a):null,m=m?Math.min(m,u):null}if(t.css("max-width",a?a+"px":""),t.css("min-width",c?c+"px":""),t.css("width",h?h+"px":""),t.css("height",m?m+"px":""),s.hasClass("pip-outer-scroll"))s.addClass("pip-scroll"),p<=768?(e=0,l=0):(e=s.width()/2-t.width()/2-16,l=Math.max(s.height()/2-t.height()/2-16,0)),t.css("left",e),t.css("top",l),setTimeout(function(){t.css("display","flex")},100);else{t.css("max-height",u?u+"px":""),t.css("min-height",d?d+"px":"");var g=t.find(".pip-header:visible"),w=t.find(".pip-footer:visible"),v=t.find(".pip-body"),y=u||r.height();g.length>0&&(y-=g.outerHeight(!0)),w.length>0&&(y-=w.outerHeight(!0)),v.css("max-height",y+"px")}i.$broadcast("pipLayoutResized")}var o=$(window);t.addClass("pip-card"),i.$on("pipWindowResized",e),e(),setTimeout(e,100)}}})}(),function(){"use strict";var i=angular.module("pipLayout.Dialog",[]);i.directive("pipDialog",function(){return{restrict:"EA",controller:"pipDialogController"}}),i.controller("pipDialogController",["$scope","$element","$attrs",function(i,t,n){function e(){var e=o.width(),l=o.height(),r=n.minWidth?Math.floor(n.minWidth):null,s=n.minHeight?Math.floor(n.minHeight):null,p=n.width?Math.floor(n.width):null,a=n.height?Math.floor(n.height):null,u=e>1200?24:16;e-=2*u,l-=2*u,r=r&&r<e?r:null,s=s&&s<l?s:null,p=p?Math.min(p,e):null,a=a?Math.min(a,l):null,t.css("max-width",e?e+"px":""),t.css("max-height",l?l+"px":""),t.css("min-width",r?r+"px":""),t.css("min-height",s?s+"px":""),t.css("width",p?p+"px":""),t.css("height",a?a+"px":""),i.$broadcast("pipLayoutResized")}var o=$(window);t.addClass("pip-dialog"),i.$on("pipWindowResized",e),i.$on("pipResizeLayout",e),e(),o.trigger("resize")}])}(),function(){"use strict";var i=angular.module("pipLayout.Document",[]);i.directive("pipDocument",function(){return{restrict:"EA",controller:"pipDocumentController"}}),i.controller("pipDocumentController",["$scope","$element","$attrs",function(i,t,n){t.addClass("pip-document")}])}(),function(){"use strict";var i=angular.module("pipLayout.Main",[]);i.directive("pipMain",function(){return{restrict:"EA",controller:"pipMainController"}}),i.directive("pipMainBody",function(){return{restrict:"EA",link:function(i,t){t.addClass("pip-main-body")}}}),i.controller("pipMainController",["$scope","$element","$rootScope",function(i,t,n){function e(){n.$broadcast("pipWindowResized")}var o=$(window);t.addClass("pip-main"),o.bind("resize",e),i.$on("$destroy",function(){n.$size=void 0,o.unbind("resize",e)}),n.$on("pipResizeWindow",function(i){setTimeout(e,0)}),setTimeout(e,0)}])}(),function(){"use strict";var i=angular.module("pipLayout.Simple",[]);i.directive("pipSimple",function(){return{restrict:"EA",link:function(i,t,n){t.addClass("pip-simple")}}})}(),function(){"use strict";function i(i,t,n){function e(t){var n,e=o.width();if(e>767){e-=48;var u=Math.floor(e/l);n=(l+16)*u-16,n>e&&(u--,n=(l+16)*u-16),u<1?(n=e,a.css("width",n+"px")):a.css("width",l+"px"),r.css("width",n+1+"px")}else e-=32,n=e,a.css("width",n+"px"),r.css("width",n+1+"px");(s!=n||t)&&(s=n,p.layout(),i.$broadcast("pipLayoutResized"))}var o=$(window),l=n.columnWidth?Math.floor(n.columnWidth):440,r=t.children(".pip-tiles-container"),s=null,p=Masonry.data(r[0]);t.addClass("pip-tiles");var a=$('<div class="pip-tile-sizer"></div>');a.appendTo(r),i.$on("pipWindowResized",function(){e(!1)}),i.$on("pipResizeLayout",function(){e(!0)}),e()}function t(i){return null!=i&&(!!i&&(i=i.toString().toLowerCase(),"1"==i||"true"==i))}var n=angular.module("pipLayout.Tiles",["wu.masonry"]);n.directive("pipTiles",function(){return{restrict:"EA",scope:!1,transclude:!0,template:function(i,n){return t(n.pipInfinite)?String()+'<div masonry class="pip-tiles-container" load-images="false" preserve-order   ng-transclude column-width=".pip-tile-sizer" item-selector=".pip-tile" masonry-options="tilesOptions"  pip-scroll-container="\'.pip-tiles\'" pip-infinite-scroll="readScroll()" ></div>':String()+'<div masonry class="pip-tiles-container" load-images="false" preserve-order   ng-transclude column-width=".pip-tile-sizer" item-selector=".pip-tile" masonry-options="tilesOptions"></div>'},controller:["$scope",function(i){i.tilesOptions={gutter:8,isFitWidth:!1,isResizeBound:!1,transitionDuration:0}}],link:i}})}();
!function(t){"use strict";t.module("pipControls",["pipMarkdown","pipToggleButtons","pipRefreshButton","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipTagList","pipInformationDialog","pipConfirmationDialog","pipOptionsDialog","pipOptionsBigDialog","pipErrorDetailsDialog"]),t.module("pipBasicControls",["pipControls"])}(window.angular),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("color_picker/color_picker.html",'<ul class="pip-color-picker lp0 {{class}}" pip-selected="currentColorIndex" pip-enter-space-press="enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in colors track by color"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="selectColor($index)" aria-label="color" ng-disabled="disabled()"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("confirmation_dialog/confirmation_dialog.html",'<md-dialog class="pip-dialog pip-confirmation-dialog layout-column" width="400" md-theme="{{::theme}}"><div class="pip-header text-subhead1"><h3 class="m0">{{:: title | translate }}</h3></div><div class="pip-footer"><div><md-button ng-click="onCancel()">{{:: cancel | translate }}</md-button><md-button class="md-accent" ng-click="onOk()">{{:: ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("error_details_dialog/error_details_dialog.html",'<md-dialog class="pip-dialog pip-details-dialog layout-column" width="400" md-theme="{{theme}}"><div class="pip-body"><div class="pip-header p0 bp8 text-subhead1">{{::\'ERROR_DETAILS\' | translate}}</div><div class="layout-row layout-align-start-center h48 text-body2 color-secondary-text" ng-if="error.code || (error.data && error.data.code)">{{::\'CODE\' | translate}}</div><div class="layout-row layout-align-start-center" ng-if="error.code || (error.data && error.data.code)">{{error.code || error.data.code}}</div><div class="layout-row layout-align-start-center h48 text-body2 color-secondary-text" ng-if="error.path || (error.data && error.data.path)">{{::\'PATH\' | translate}}</div><div class="layout-row layout-align-start-center" ng-if="error.path || (error.data && error.data.path)">{{error.path || error.data.path}}</div><div class="h48 text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="error.error || (error.data && error.data.error)">{{::\'ERROR\' | translate}}</div><div class="layout-row layout-align-start-center" ng-if="error.error || (error.data && error.data.error)">{{error.error || error.data.error}}</div><div class="h48 text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="error.method || (error.data && error.data.method)">{{::\'METHOD\' | translate}}</div><div class="layout-row layout-align-start-center" ng-if="error.method || (error.data && error.data.method)">{{error.method || error.data.method}}</div><div class="h48 text-body2 color-secondary-text layout-row layout-align-start-center" ng-if="error.message || (error.data && error.data.message)">{{::\'MESSAGE\' | translate}}</div><div class="layout-row layout-align-start-center" ng-if="error.message || (error.data && error.data.message)">{{error.message || error.data.message}}</div></div><div class="pip-footer rp16"><div><md-button class="md-accent m0" ng-click="onOk()">{{::\'DISMISS\' | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("information_dialog/information_dialog.html",'<md-dialog class="pip-dialog pip-information-dialog layout-column" width="400" md-theme="{{theme}}"><div class="pip-header"><h3 class="m0">{{ title | translate }}</h3></div><div class="pip-body"><div class="pip-content">{{ content }}</div></div><div class="pip-footer"><div><md-button class="md-accent" ng-click="onOk()">{{ ok | translate }}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("options_dialog/options_dialog.html",'<md-dialog class="pip-dialog pip-options-dialog layout-column" min-width="400" md-theme="{{theme}}"><md-dialog-content class="pip-body lp0 tp0 rp0 bp24 pip-scroll"><div class="pip-header"><h3 class="m0 bm16 text-title">{{::title | translate}}</h3><div ng-show="deletedTitle" class="bp16 tp8 text-subhead1 divider-bottom"><md-checkbox ng-model="deleted" aria-label="CHECKBOX" class="m0">{{::deletedTitle | translate}}</md-checkbox></div></div><div class="pip-content"><md-radio-group ng-model="selectedOptionName" class="pip-list md-primary" md-no-ink="true" ng-keypress="onKeyPress($event)" tabindex="0"><div ng-repeat="option in options" class="pip-list-item p0" md-ink-ripple="" ui-event="{ click: \'onOptionSelect($event, option)\' }" ng-class="{ selected: option.name == selectedOptionName }"><div class="pip-list-item"><md-icon class="pip-option-icon rm12" md-svg-icon="icons:{{option.icon}}" ng-if="option.icon"></md-icon><div class="pip-option-title">{{::option.title | translate}}</div><md-radio-button ng-value="option.name" tabindex="-1" aria-label="{{::option.title | translate}}"></md-radio-button></div></div></md-radio-group></div></md-dialog-content><div class="pip-footer"><div><md-button class="pip-cancel" ng-click="onCancel()">{{::\'CANCEL\' | translate}}</md-button><md-button class="pip-submit md-accent" ng-click="onSelect()">{{::applyButtonTitle | translate}}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("options_dialog/options_dialog_big.html",'<md-dialog class="pip-dialog pip-options-dialog-big layout-column" min-width="400" md-theme="{{theme}}"><md-dialog-content class="pip-body p0 pip-scroll" ng-class="{\'bp24\': !noActions}"><div class="pip-header" ng-class="{\'header-hint\': noTitle && hint}"><h3 class="m0 text-title" ng-if="!noTitle">{{::title | translate}}</h3><div ng-show="noTitle && hint" class="dialog-hint layout-row layout-align-start-center"><div class="w40" flex-fixed=""><md-icon md-svg-icon="icons:info-circle-outline"></md-icon></div><div>{{::hint | translate}}</div></div></div><div class="pip-divider" ng-if="!noTitle"></div><div class="pip-content"><div class="h8" ng-if="noTitle && hint"></div><md-list class="pip-menu pip-ref-list w-stretch" pip-selected="optionIndex" index="{{optionIndex }}" pip-select="onSelected($event)"><md-list-item class="pip-ref-list-item pip-selectable layout-row layout-align-start-center" ng-class="{\'selected\' : option.name == selectedOptionName, \'divider-bottom\': $index != options.length - 1}" md-ink-ripple="" xxxxng-keypress="onKeyPress($event)" ng-keyup="onKeyUp($event, $index)" ng-repeat="option in options"><div class="pip-content line-height-string max-w100-stretch" ng-click="onOptionSelect($event, option)"><p class="pip-title rp24-flex" ng-if="option.title" style="margin-bottom: 4px !important;">{{::option.title | translate}}</p><div class="pip-subtitle rp24-flex" style="height: inherit" ng-if="option.subtitle">{{::option.subtitle | translate}}</div><div class="pip-subtitle rp24-flex" style="height: inherit" ng-if="option.text" pip-translate-html="{{::option.text | translate}}"></div></div></md-list-item></md-list></div><div class="h8" ng-if="noActions"></div></md-dialog-content><div class="pip-footer" ng-if="!noActions"><div><md-button class="pip-cancel" ng-click="onCancel()">{{::\'CANCEL\' | translate}}</md-button><md-button class="pip-submit md-accent" ng-click="onSelect()" style="margin-right: -6px">{{::applyButtonTitle | translate}}</md-button></div></div></md-dialog>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("popover/popover.template.html",'<div ng-if="params.templateUrl" class="pip-popover flex layout-column" ng-click="onPopoverClick($event)" ng-include="params.templateUrl"></div><div ng-if="params.template" class="pip-popover" ng-click="onPopoverClick($event)"></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("progress/routing_progress.html",'<div class="pip-routing-progress layout-column layout-align-center-center" ng-show="$routing || $reset || toolInitialized"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="images/Logo_animation.svg" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("tags/tag_list.html",'<div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + pipType + \'-chips\'}}" ng-if="pipType && !pipTypeLocal"><span>{{pipType.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4 pip-type-chip pip-type-chip-left {{\'bg-\' + pipType + \'-chips\'}}" ng-if="pipType && pipTypeLocal"><span>{{pipTypeLocal.toUpperCase() | translate | uppercase}}</span></div><div class="pip-chip rm4" ng-repeat="tag in pipTags"><span>{{::tag}}</span></div>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("toast/toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': toast.type==\'error\', \'pip-column-toast\': toast.type == \'error\' || toast.actions.length > 1 || actionLenght > 4, \'pip-no-action-toast\': actionLenght == 0}" style="height:initial; max-height: initial;"><span class="flex-var m0 pip-text" ng-bind-html="message"></span><div class="layout-row layout-align-end-start" ng-if="actions.length > 0 || (toast.type==\'error\' && toast.error)"><md-button class="flex-fixed m0 lm8" ng-if="toast.type==\'error\' && toast.error" ng-click="onDetails()">Details</md-button><md-button class="flex-fixed m0 lm8" ng-click="onAction(action)" ng-repeat="action in actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}(),function(t){try{t=angular.module("pipBasicControls.Templates")}catch(e){t=angular.module("pipBasicControls.Templates",[])}t.run(["$templateCache",function(t){t.put("toggle_buttons/toggle_buttons.html",'<div class="pip-toggle-buttons flex layout-row {{class}}" pip-selected="bufButtonIndex" pip-enter-space-press="enterSpacePress($event)" ng-if="$mdMedia(\'gt-xs\')"><md-button tabindex="-1" ng-repeat="button in buttons" ng-class="{\'md-accent md-raised selected color-accent-bg\' : currentButtonIndex == $index}" ng-attr-style="{{ \'background-color:\' + (currentButtonIndex == $index ? button.backgroundColor : \'\') + \'!important\' }}" class="pip-selectable pip-chip-button flex" ng-click="buttonSelected($index, $event)" ng-disabled="button.disabled || disabled()">{{button.name || button.title | translate}} <span ng-if="button.checked || button.complete || button.filled" class="pip-tagged">*</span></md-button></div><md-input-container class="md-block" ng-if="$mdMedia(\'xs\')"><md-select ng-model="currentButtonIndex" ng-disabled="disabled()" aria-label="DROPDOWN" md-on-close="buttonSelected(currentButtonIndex)"><md-option ng-repeat="action in buttons" value="{{ ::$index }}">{{ (action.title || action.name) | translate }} <span ng-if="action.checked || action.complete || action.filled" class="pip-tagged">*</span></md-option></md-select></md-input-container>')}])}(),function(t,e){"use strict";var o=t.module("pipColorPicker",["pipUtils","pipFocused","pipBasicControls.Templates"]);o.directive("pipColorPicker",function(){return{restrict:"EA",scope:{ngDisabled:"&",colors:"=pipColors",currentColor:"=ngModel",colorChange:"&ngChange"},templateUrl:"color_picker/color_picker.html",controller:"pipColorPickerController"}}),o.controller("pipColorPickerController",["$scope","$element","$attrs","$timeout",function(t,o,n,i){var a=["purple","lightgreen","green","darkred","pink","yellow","cyan"];t.class=n.class||"",(!t.colors||e.isArray(t.colors)&&0===t.colors.length)&&(t.colors=a),t.currentColor=t.currentColor||t.colors[0],t.currentColorIndex=t.colors.indexOf(t.currentColor),t.disabled=function(){return!t.ngDisabled||t.ngDisabled()},t.selectColor=function(e){t.disabled()||(t.currentColorIndex=e,t.currentColor=t.colors[t.currentColorIndex],i(function(){t.$apply()}),t.colorChange&&t.colorChange())},t.enterSpacePress=function(e){t.selectColor(e.index)}}])}(window.angular,window._),function(t){"use strict";var e=t.module("pipConfirmationDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(t){t.translations("en",{CONFIRM_TITLE:"Confirm"}),t.translations("ru",{CONFIRM_TITLE:"Подтвердите"})}]),e.factory("pipConfirmationDialog",["$mdDialog",function(t){return{show:function(e,o,n){t.show({targetEvent:e.event,templateUrl:"confirmation_dialog/confirmation_dialog.html",controller:"pipConfirmationDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){o&&o()},function(){n&&n()})}}}]),e.controller("pipConfirmationDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params",function(t,e,o,n,i){t.theme=e.$theme,t.title=i.title||"CONFIRM_TITLE",t.ok=i.ok||"OK",t.cancel=i.cancel||"CANCEL",t.onCancel=function(){o.cancel()},t.onOk=function(){o.hide()}}])}(window.angular),function(t){"use strict";var e=t.module("pipErrorDetailsDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);e.config(["pipTranslateProvider",function(t){t.translations("en",{ERROR_DETAILS:"Error details",CODE:"Code",PATH:"Path",ERROR:"Error code",METHOD:"Method",MESSAGE:"Message"}),t.translations("ru",{ERROR_DETAILS:"Детали ошибки",CODE:"Код",PATH:"Путь",ERROR:"Код ошибки",METHOD:"Метод",MESSAGE:"Сообщение"})}]),e.factory("pipErrorDetailsDialog",["$mdDialog",function(t){return{show:function(e,o,n){t.show({targetEvent:e.event,templateUrl:"error_details_dialog/error_details_dialog.html",controller:"pipErrorDetailsDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){o&&o()},function(){n&&n()})}}}]),e.controller("pipErrorDetailsDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params",function(t,e,o,n,i){t.theme=e.$theme,t.error=i.error,t.ok=i.ok||"OK",t.cancel=i.cancel||"CANCEL",t.onCancel=function(){o.cancel()},t.onOk=function(){o.hide()}}])}(window.angular),function(t,e,o){"use strict";var n=t.module("pipImageSlider",[]);n.directive("pipImageSlider",function(){return{scope:!1,controller:["$scope","$element","$attrs","$parse","$timeout","$interval","$pipImageSlider",function(t,n,i,a,s,l,r){function p(){C&&C(t,b)}function c(){h=l(function(){g=b+1===m.length?0:b+1,f="next",v()},w||y)}function d(){l.cancel(h)}function u(){d(),c()}var m,g,f,h,v,C=a(i.pipImageSliderIndex).assign,b=0,T=a(i.pipAnimationType)(t),y=4500,w=a(i.pipAnimationInterval)(t);n.addClass("pip-image-slider"),n.addClass("pip-animation-"+T),t.swipeStart=0,p(),s(function(){m=n.find(".pip-animation-block"),m.length>0&&o(m[0]).addClass("pip-show")}),c(),v=e.throttle(function(){r.toBlock(T,m,b,g,f),b=g,p()},600),t.nextBlock=function(){u(),g=b+1===m.length?0:b+1,f="next",v()},t.prevBlock=function(){u(),g=b-1<0?m.length-1:b-1,f="prev",v()},t.slideTo=function(t){t===b||t>m.length-1||(u(),g=t,f=t>b?"next":"prev",v())},n.on("$destroy",function(){d()})}]}}),n.directive("pipSliderButton",function(){return{scope:{},controller:["$scope","$element","$parse","$attrs",function(e,o,n,i){var a=n(i.pipButtonType)(e),s=n(i.pipSliderId)(e);o.on("click",function(){s&&a&&t.element(document.getElementById(s)).scope()[a+"Block"]()})}]}}),n.directive("pipSliderIndicator",function(){return{scope:!1,controller:["$scope","$element","$parse","$attrs",function(e,o,n,i){var a=n(i.pipSliderId)(e),s=n(i.pipSlideTo)(e);o.css("cursor","pointer"),o.on("click",function(){!a||s&&s<0||t.element(document.getElementById(a)).scope().slideTo(s)})}]}}),n.service("$pipImageSlider",["$timeout",function(t){function e(e,o){e.removeClass("animated").addClass("pip-next"),t(function(){e.addClass("animated").addClass("pip-show").removeClass("pip-next"),o.addClass("animated").removeClass("pip-show")},100)}function n(e,o){e.removeClass("animated"),t(function(){e.addClass("animated").addClass("pip-show"),o.addClass("animated").addClass("pip-next").removeClass("pip-show"),t(function(){o.removeClass("pip-next").removeClass("animated")},a-100)},100)}function i(t,i,a,s,l){var r=o(i[a]),p=s,c=o(i[p]);"carousel"===t?(o(i).removeClass("pip-next").removeClass("pip-prev"),l&&"prev"===l&&n(c,r),l&&"next"===l&&e(c,r),(!l||"next"!==l&&"prev"!==l)&&s&&s<a?n(c,r):e(c,r)):(r.addClass("animated").removeClass("pip-show"),c.addClass("animated").addClass("pip-show"))}var a=550;return{nextCarousel:e,prevCarousel:n,toBlock:i}}])}(window.angular,window._,window.jQuery),function(t,e){"use strict";var o=t.module("pipInformationDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);o.config(["pipTranslateProvider",function(t){t.translations("en",{INFORMATION_TITLE:"Information"}),t.translations("ru",{INFORMATION_TITLE:"Информация"})}]),o.factory("pipInformationDialog",["$mdDialog",function(t){return{show:function(e,o){t.show({targetEvent:e.event,templateUrl:"information_dialog/information_dialog.html",controller:"pipInformationDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(){o&&o()})}}}]),o.controller("pipInformationDialogController",["$scope","$rootScope","$mdDialog","pipTranslate","params","pipUtils",function(t,o,n,i,a,s){var l,r;t.theme=o.$theme,t.title=a.title||"INFORMATION_TITLE",l=i.translate(a.message),a.item&&(r=e.truncate(a.item,25),l=s.sprintf(l,r)),t.content=l,t.ok=a.ok||"OK",t.onOk=function(){n.hide()}}])}(window.angular,window._),function(t,e,o){"use strict";var n=t.module("pipMarkdown",["ngSanitize","pipUtils","pipTranslate"]);n.config(["pipTranslateProvider",function(t){t.translations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),t.translations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"})}]),n.directive("pipMarkdown",["$parse","pipUtils","pipTranslate",function(t,n,i){return{restrict:"EA",scope:!1,link:function(a,s,l){function r(t){var e="",n=[];return o.each(t,function(t){t.type&&"text"!==t.type&&(0===e.length&&(e=i.translate("MARKDOWN_ATTACHMENTS")),n.indexOf(t.type)<0&&(n.push(t.type),e+=n.length>1?", ":" ",e+=i.translate(t.type)))}),e}function p(t){var n,i,a,p,c;o.isArray(t)?(c=o.find(t,function(t){return"text"===t.type&&t.text}),n=c?c.text:r(t)):n=t,i=l.pipLineCount&&o.isNumber(u()),i=i&&n&&n.length>0,p={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},n=e(n||"",p),i&&(a=1.5*u()),s.html("<div"+(i?d()?'class="pip-markdown-content pip-markdown-list" style="max-height: '+a+'em">':' class="pip-markdown-content" style="max-height: '+a+'em">':d()?' class="pip-markdown-list">':">")+n+"</div>"),s.find("a").attr("target","blank"),!d()&&i&&s.append('<div class="pip-gradient-block"></div>')}var c=t(l.pipText),d=t(l.pipList),u=t(l.pipLineCount);p(c(a)),n.toBoolean(l.pipRebind)&&a.$watch(c,function(t){p(t)}),a.$on("pipWindowResized",function(){p(c(a))}),s.addClass("pip-markdown")}}}])}(window.angular,window.marked,window._),function(t,e,o){"use strict";var n=t.module("pipOptionsDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);n.config(["pipTranslateProvider",function(t){t.translations("en",{OPTIONS_TITLE:"Choose Option"}),t.translations("ru",{OPTIONS_TITLE:"Выберите опцию"})}]),n.factory("pipOptionsDialog",["$mdDialog",function(t){return{show:function(e,o,n){function i(){e.event&&e.event.currentTarget&&e.event.currentTarget.focus()}e.event&&(e.event.stopPropagation(),e.event.preventDefault()),t.show({targetEvent:e.event,templateUrl:"options_dialog/options_dialog.html",controller:"pipOptionsDialogController",locals:{params:e},clickOutsideToClose:!0}).then(function(t){i(),o&&o(t)},function(){i(),n&&n()})}}}]),n.controller("pipOptionsDialogController",["$scope","$rootScope","$mdDialog","params",function(t,n,i,a){function s(){var t;t=e(".pip-options-dialog .pip-list"),t.focus()}t.theme=n.$theme,t.title=a.title||"OPTIONS_TITLE",t.options=a.options,t.selectedOption=o.find(a.options,{active:!0})||{},t.selectedOptionName=t.selectedOption.name,t.applyButtonTitle=a.appleButtonTitle||"SELECT",t.deleted=a.deleted,t.deletedTitle=a.deletedTitle,t.onOptionSelect=function(e,o){e.stopPropagation(),t.selectedOptionName=o.name},t.onKeyPress=function(e){32!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),e.preventDefault(),t.onSelect())},t.onCancel=function(){i.cancel()},t.onSelect=function(){var e;e=o.find(a.options,{name:t.selectedOptionName}),i.hide({option:e,deleted:t.deleted})},setTimeout(s,500)}])}(window.angular,window.jQuery,window._),function(t,e,o){"use strict";var n=t.module("pipOptionsBigDialog",["ngMaterial","pipUtils","pipTranslate","pipBasicControls.Templates"]);n.config(["pipTranslateProvider",function(t){t.translations("en",{OPTIONS_TITLE:"Choose Option"}),t.translations("ru",{OPTIONS_TITLE:"Выберите опцию"})}]),n.factory("pipOptionsBigDialog",["$mdDialog",function(t){return{show:function(e,o,n){function i(){e.event&&e.event.currentTarget&&e.event.currentTarget.focus()}e.event&&(e.event.stopPropagation(),e.event.preventDefault()),t.show({targetEvent:e.event,templateUrl:"options_dialog/options_dialog_big.html",controller:"pipOptionsDialogBigController",locals:{params:e},clickOutsideToClose:!0}).then(function(t){i(),o&&o(t)},function(){i(),n&&n()})}}}]),n.controller("pipOptionsDialogBigController",["$scope","$rootScope","$mdDialog","params",function(t,n,i,a){function s(){var t;t=e(".pip-options-dialog .pip-list"),t.focus()}t.theme=n.$theme,t.title=a.title||"OPTIONS_TITLE",t.options=a.options,t.noActions=a.noActions||!1,t.noTitle=a.noTitle||!1,t.hint=a.hint||"",t.selectedOption=o.find(a.options,{active:!0})||{},t.selectedOptionName=t.selectedOption.name,t.optionIndex=o.findIndex(a.options,t.selectedOption),t.applyButtonTitle=a.applyButtonTitle||"SELECT",t.deleted=a.deleted,t.deletedTitle=a.deletedTitle,t.onOptionSelect=function(e,o){e.stopPropagation(),t.selectedOptionName=o.name,t.noActions&&t.onSelect()},t.onSelected=function(){t.selectedOptionName=t.options[t.optionIndex].name,t.noActions},t.onKeyUp=function(e,o){32!==e.keyCode&&13!==e.keyCode||(e.stopPropagation(),e.preventDefault(),void 0!==o&&o>-1&&o<t.options.length&&(t.selectedOptionName=t.options[o].name,t.onSelect()))},t.onCancel=function(){i.cancel()},t.onSelect=function(){var e;e=o.find(t.options,{name:t.selectedOptionName}),i.hide({option:e,deleted:t.deleted})},setTimeout(s,500)}])}(window.angular,window.jQuery,window._),function(t,e,o){"use strict";var n=t.module("pipPopover",["pipAssert"]);n.directive("pipPopover",function(){return{restrict:"EA",scope:!0,templateUrl:"popover/popover.template.html",controller:["$scope","$rootScope","$element","$timeout","$compile",function(t,n,i,a,s){function l(){g.addClass("opened"),e(".pip-popover-backdrop").focus(),t.params.timeout&&a(function(){p()},t.params.timeout)}function r(){t.params.cancelCallback&&t.params.cancelCallback(),p()}function p(){g.removeClass("opened"),a(function(){g.remove()},100)}function c(t){t.stopPropagation()}function d(){if(t.params.element){var o=e(t.params.element),n=o.offset(),i=o.width(),a=o.height(),s=e(document).width(),l=e(document).height(),r=g.find(".pip-popover");n&&r.css("max-width",s-(s-n.left)).css("max-height",l-(n.top+a)-32,0).css("left",n.left-r.width()+i/2).css("top",n.top+a+16)}}function u(){if(t.params.calcHeight!==!1){var e=g.find(".pip-popover"),o=e.find(".pip-title"),n=e.find(".pip-footer"),i=e.find(".pip-content"),a=e.height()-o.outerHeight(!0)-n.outerHeight(!0);i.css("max-height",Math.max(a,0)+"px").css("box-sizing","border-box")}}function m(){g.find(".pip-popover").find(".pip-content").css("max-height","100%"),d(),u()}var g,f;g=e(".pip-popover-backdrop"),g.on("click keydown scroll",r),g.addClass(t.params.responsive!==!1?"pip-responsive":""),a(function(){d(),t.params.template&&(f=s(t.params.template)(t),i.find(".pip-popover").append(f)),l()}),a(function(){u()},200),t.onPopoverClick=c,t=o.defaults(t,t.$parent),n.$on("pipPopoverResize",m),e(window).resize(m)}]}}),n.service("$pipPopover",["$compile","$rootScope","$timeout",function(t,n,i){function a(i){var a,l,p,c;a=e("body"),a.find("md-backdrop").length>0||(s(),l=n.$new(),p=i&&o.isObject(i)?i:{},l.params=p,l.locals=p.locals,c=t(r)(l),a.append(c))}function s(){var t=e(".pip-popover-backdrop");t.removeClass("opened"),i(function(){t.remove()},100)}function l(){n.$broadcast("pipPopoverResize")}var r;return r="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>",{show:a,hide:s,resize:l}}])}(window.angular,window.jQuery,window._),function(t){"use strict";var e=t.module("pipRoutingProgress",["ngMaterial"]);e.directive("pipRoutingProgress",function(){return{restrict:"EA",replace:!0,templateUrl:"progress/routing_progress.html"}})}(window.angular),function(t){"use strict";var e=t.module("pipRefreshButton",["ngMaterial"]);e.directive("pipRefreshButton",["$parse",function(t){return{restrict:"EA",scope:!1,template:String()+'<md-button class="pip-refresh-button" tabindex="-1" ng-click="onClick($event)" aria-label="REFRESH"><md-icon md-svg-icon="icons:refresh"></md-icon><span class="pip-refresh-text"></span></md-button>',replace:!1,link:function(e,o,n){function i(){d.hide()}var a,s,l,r=t(n.pipText),p=t(n.pipVisible),c=t(n.pipRefresh),d=o.children(".md-button"),u=d.children(".pip-refresh-text");l=function(){s=r(e),u.text(s),d.show(),a=d.width(),d.css("margin-left","-"+a/2+"px")},e.onClick=function(){c(e)},e.$watch(p,function(t){t?l():i()}),e.$watch(r,function(t){u.text(t)})}}}])}(window.angular),function(t){"use strict";var e=t.module("pipTagList",["pipCore"]);e.directive("pipTagList",["$parse",function(t){return{restrict:"EA",scope:{pipTags:"=",pipType:"=",pipTypeLocal:"="},templateUrl:"tags/tag_list.html",controller:["$scope","$element","$attrs","pipUtils",function(e,o,n,i){var a;a=t(n.pipTags),o.css("display","block"),e.tags=a(e),i.toBoolean(n.pipRebind)&&e.$watch(a,function(){e.tags=a(e)}),o.addClass("pip-tag-list")}]}}])}(window.angular),function(t,e){"use strict";var o=t.module("pipToasts",["pipTranslate","ngMaterial","pipAssert"]);o.controller("pipToastController",["$scope","$mdToast","toast","pipErrorDetailsDialog",function(e,o,n,i){e.message=n.message,e.actions=n.actions,e.toast=n,0===n.actions.length?e.actionLenght=0:1===n.actions.length?e.actionLenght=n.actions[0].toString().length:e.actionLenght=null,e.onDetails=function(){o.hide(),i.show({error:e.toast.error,ok:"Ok"},t.noop,t.noop)},e.onAction=function(t){o.hide({action:t,id:n.id,message:n.message})}}]),o.service("pipToasts",["$rootScope","$mdToast","pipAssert",function(t,o,n){function i(){var t;T.length>0&&(t=T[0],T.splice(0,1),a(t))}function a(t){v=t,o.show({templateUrl:"toast/toast.html",hideDelay:t.duration||C,position:"bottom left",controller:"pipToastController",locals:{toast:v,sounds:y}}).then(function(t){v.successCallback&&v.successCallback(t),v=null,i()},function(t){v.cancelCallback&&v.cancelCallback(t),v=null,i()})}function s(t){v&&"error"!==t.type?T.push(t):a(t)}function l(t){var o=[];e.each(T,function(e){e.type&&e.type===t||o.push(e)}),T=e.cloneDeep(o)}function r(t){e.remove(T,{id:t})}function p(t){return e.find(T,{id:t})}function c(){T=e.reject(T,function(t){return"error"===t.type}),v&&"error"===v.type&&(o.cancel(),i())}function d(){h()}function u(t,e,o,i,a){n.isDef(t,"pipToasts.showNotification: message should be defined"),n.isString(t,"pipToasts.showNotification: message should be a string"),n.isArray(e||[],"pipToasts.showNotification: actions should be an array"),o&&n.isFunction(o,"showNotification: successCallback should be a function"),i&&n.isFunction(i,"showNotification: cancelCallback should be a function"),s({id:a||null,type:"notification",message:t,actions:e||["ok"],successCallback:o,cancelCallback:i,duration:b})}function m(t,e,o,i){n.isDef(t,"pipToasts.showMessage: message should be defined"),n.isString(t,"pipToasts.showMessage: message should be a string"),e&&n.isFunction(e,"pipToasts.showMessage:successCallback should be a function"),o&&n.isFunction(o,"pipToasts.showMessage: cancelCallback should be a function"),s({id:i||null,type:"message",message:t,actions:["ok"],successCallback:e,cancelCallback:o})}function g(t,e,o,i,a){n.isDef(t,"pipToasts.showError: message should be defined"),n.isString(t,"pipToasts.showError: message should be a string"),e&&n.isFunction(e,"pipToasts.showError: successCallback should be a function"),o&&n.isFunction(o,"pipToasts.showError: cancelCallback should be a function"),s({id:i||null,error:a,type:"error",message:t,actions:["ok"],successCallback:e,cancelCallback:o})}function f(){o.cancel(),T=[]}function h(t){t?(n.isString(t,"pipToasts.clearToasts: type should be a string"),l(t)):(o.cancel(),T=[])}var v,C=2e4,b=2e4,T=[],y={};return t.$on("$stateChangeSuccess",c),t.$on("pipSessionClosed",d),{showNotification:u,showMessage:m,showError:g,hideAllToasts:f,clearToasts:h,removeToastsById:r,getToastById:p}}])}(window.angular,window._),function(t,e){"use strict";var o=t.module("pipToggleButtons",["pipBasicControls.Templates"]);o.directive("pipToggleButtons",function(){return{restrict:"EA",scope:{ngDisabled:"&",buttons:"=pipButtons",currentButtonValue:"=ngModel",currentButton:"=?pipButtonObject",change:"&ngChange"},templateUrl:"toggle_buttons/toggle_buttons.html",controller:["$scope","$element","$attrs","$mdMedia","$timeout",function(t,o,n,i,a){var s;t.$mdMedia=i,t.class=n.class||"",(!t.buttons||e.isArray(t.buttons)&&0===t.buttons.length)&&(t.buttons=[]),s=e.indexOf(t.buttons,e.find(t.buttons,{id:t.currentButtonValue})),t.currentButtonIndex=s<0?0:s,t.currentButton=t.buttons.length>0?t.buttons[t.currentButtonIndex]:t.currentButton,t.buttonSelected=function(e){t.disabled()||(t.currentButtonIndex=e,t.currentButton=t.buttons[t.currentButtonIndex],t.currentButtonValue=t.currentButton.id||e,a(function(){t.change&&t.change()}))},t.enterSpacePress=function(e){t.buttonSelected(e.index)},t.disabled=function(){if(t.ngDisabled)return t.ngDisabled()}}],link:function(t,e){e.on("focusin",function(){e.addClass("focused-container")}).on("focusout",function(){e.removeClass("focused-container")})}}})}(window.angular,window._);
!function(){"use strict";angular.module("pipNav",["pipDropdown","pipTabs","pipAppBar","pipSideNav"])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(e){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("appbar/appbar.html",'<md-toolbar md-theme-watch="true" ng-if="!$partialReset" ng-class="config.ngClasses" class="{{ config.cssClass }} color-primary-bg"><div class="md-toolbar-tools rp24-flex lp24-flex" ng-if="!searchEnabled"><md-button class="md-icon-button flex-fixed p0" ng-if="config.navIconType != \'none\'" ng-class="{ \'pip-third-party\': getParty() && !getUser(\'owner\') }" ng-click="onNavIconClick()" aria-label="menu"><md-icon ng-if="config.navIconType==\'menu\' && (!getParty() || getUser(\'owner\'))" md-svg-icon="icons:menu"></md-icon><pip-avatar ng-if="config.navIconType==\'menu\' && (getParty() && !getUser(\'owner\'))" pip-rebind-avatar="true" pip-rebind="true" pip-image-url="partyAvatarUrl" pip-party-id="getParty(\'id\')" class="pip-face" pip-party-name="getParty(\'name\')"></pip-avatar><md-icon ng-if="config.navIconType==\'back\'" md-svg-icon="icons:arrow-left"></md-icon></md-button><div class="flex-var text-overflow"><img class="pip-appbar-logo" ng-click="onLogoState(config.logoState)" ng-if="config.titleType == \'logo\'" ng-src="{{config.titleLogo}}"><div ng-if="config.titleType == \'text\'" class="text-overflow pip-appbar-text"><span ng-if="config.searchCriteria" ng-click="onSearchEnable()">{{config.searchCriteria}} -</span><span class="text-overflow">{{config.titleText | translate}}</span></div><div ng-if="config.titleType==\'breadcrumb\'"><div class="hide-xs text-overflow"><span ng-if="config.searchCriteria" ng-click="onSearchEnable()">{{config.searchCriteria}} -</span><span class="pip-appbar-breadcrumb" ng-repeat-start="item in config.titleBreadcrumb" ng-click="onBreadcrumbClick(item)" ng-init="stepWidth = 100/(config.titleBreadcrumb.length + 1)" ng-style="{\'max-width\': stepWidth + \'%\'}">{{item.title | translate}}</span><md-icon ng-repeat-end="" md-svg-icon="icons:chevron-right"></md-icon><span class="pip-title">{{config.titleText | translate}}</span></div><md-menu xmd-offset="0 48" class="hide-gt-xs"><span class="pip-appbar-mobile-breadcrumb layout-row" ng-click="$mdOpenMenu()" md-ink-ripple="" aria-label="open breadcrumb"><span class="text-overflow"><span ng-if="config.searchCriteria" ng-click="onSearchEnable()">{{config.searchCriteria}} -</span> {{config.titleText | translate}}</span><md-icon class="m0 flex-none" md-svg-icon="icons:triangle-down"></md-icon></span><md-menu-content width="3"><md-menu-item ng-repeat="item in config.titleBreadcrumb"><md-button ng-click="onBreadcrumbClick(item)"><span>{{item.title | translate}}</span></md-button></md-menu-item><md-menu-item><md-button><span class="text-grey">{{config.titleText | translate}}</span></md-button></md-menu-item></md-menu-content></md-menu></div></div><div class="flex-fixed pip-appbar-actions layout-row" ng-class="{ \'pip-language-action\': config.actionsType==\'language\' }"><md-menu ng-if="config.actionsType==\'language\'" md-position-mode="target-right target"><span class="pip-appbar-language" ng-click="$mdOpenMenu()" aria-label="language selection">{{language() | translate}}<md-icon md-svg-icon="icons:triangle-down"></md-icon></span><md-menu-content width="3"><md-menu-item ng-repeat="lang in config.languages"><md-button ng-click="onLanguageClick(lang)">{{lang | translate}}</md-button></md-menu-item></md-menu-content></md-menu><md-button class="md-icon-button m0" ng-if="config.searchVisible" ng-click="onSearchEnable()" aria-label="open search"><md-icon md-svg-icon="icons:search"></md-icon></md-button><div ng-if="config.actionsType==\'list\'"><md-menu md-position-mode="target-right target" ng-repeat="action in config.primaryGlobalActions"><md-button class="pip-appbar-action md-icon-button m0" ng-class="{ \'pip-appbar-hide-sm\': action.hideSmall }" ng-click="onActionClick(action, $mdOpenMenu);" ng-hide="actionHidden(action)" aria-label="{{action.tooltip | translate}}"><div class="pip-appbar-badge color-badge-bg" ng-if="action.count > 0">{{actionCount(action)}}</div><md-icon md-svg-icon="{{action.icon}}"></md-icon></md-button><md-menu-content width="3" ng-show="action.menu"><md-menu-item ng-repeat-start="subAction in action.subActions" ng-if="!subAction.divider" ng-hide="actionHidden(subAction)"><md-button ng-hide="subAction.divider" ng-click="onActionClick(subAction)">{{subAction.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if="subAction.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu><md-menu md-position-mode="target-right target" ng-repeat="action in config.primaryLocalActions"><md-button class="pip-appbar-action md-icon-button m0" ng-class="{ \'pip-appbar-hide-sm\': action.hideSmall, \'pip-appbar-show-sm\': action.showSmall,}" ng-click="onActionClick(action, $mdOpenMenu);" ng-hide="actionHidden(action)" aria-label="{{action.tooltip | translate}}"><div class="pip-appbar-badge" ng-show="action.count > 0">{{actionCount(action)}}</div><md-icon md-svg-icon="{{action.icon}}"></md-icon></md-button><md-menu-content width="3"><md-menu-item ng-repeat-start="subAction in action.subActions" ng-if="!subAction.divider" ng-hide="actionHidden(subAction)"><md-button ng-hide="subAction.divider" ng-click="onActionClick(subAction)">{{subAction.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if="subAction.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu><md-menu ng-if="secondaryActionsVisible()" md-position-mode="target-right target"><md-button class="md-icon-button m0" ng-click="onSecondaryActionClick(); openMenu($mdOpenMenu, $event);" aria-label="open actions"><md-icon md-svg-icon="icons:vdots"></md-icon></md-button><md-menu-content width="3"><md-menu-item ng-repeat-start="action in config.secondaryLocalActions" ng-if="!action.divider" ng-hide="actionHidden(action)"><md-button ng-hide="action.divider" ng-click="onActionClick(action)">{{action.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if="action.divider" ng-repeat-end=""></md-menu-divider><md-menu-divider ng-if="secondaryDividerVisible()"></md-menu-divider><md-menu-item ng-repeat-start="action in config.secondaryGlobalActions" ng-if="!action.divider" ng-hide="actionHidden(action)"><md-button ng-hide="action.divider" ng-click="onActionClick(action)">{{action.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if="action.divider" ng-repeat-end=""></md-menu-divider></md-menu-content></md-menu></div></div></div><div class="md-toolbar-tools layout-row" ng-if="searchEnabled"><md-button class="md-icon-button" aria-label="start search" ng-click="onSearchClick()"><md-icon md-svg-icon="icons:search"></md-icon></md-button><input class="pip-search-text flex" type="search" ng-model="search.text" ng-keydown="onSearchKeyDown($event)"><md-button class="md-icon-button" aria-label="clear search" ng-click="onSearchClear()"><md-icon md-svg-icon="icons:cross-circle"></md-icon></md-button></div></md-toolbar>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(e){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("dropdown/dropdown.html",'<md-content class="md-subhead color-primary-bg {{class}}" ng-if="show()" ng-class="{\'md-whiteframe-3dp\': $mdMedia(\'xs\')}"><div class="pip-divider position-top m0"></div><md-select ng-model="selectedIndex" ng-disabled="disabled()" md-container-class="pip-full-width-dropdown" aria-label="DROPDOWN" md-ink-ripple="" md-on-close="onSelect(selectedIndex)"><md-option ng-repeat="action in actions" value="{{ ::$index }}" ng-selected="activeIndex == $index ? true : false">{{ (action.title || action.name) | translate }}</md-option></md-select></md-content>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(e){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("sidenav/sidenav.html",'<md-sidenav class="md-sidenav-left md-whiteframe-z2 pip-sidenav color-content-bg" md-component-id="pip-sidenav" ng-if="!$partialReset" pip-focused=""><md-toolbar class="pip-sidenav-header" ng-class="{\'pip-sidenav-owner\': getUser(\'owner\')}" md-theme="{{ $theme|| getUser(\'theme\') || config.theme }}" ng-hide="!getParty() && !primaryPartyAvatar && !secondaryPartyAvatar"><md-button class="pip-sidenav-party md-icon-button" ng-click="onPartyClick()" aria-label="current party"><pip-avatar ng-if="!$avatarReset" pip-party-id="getParty(\'id\')" pip-default-icon="icon-person" pip-party-name="getParty(\'name\')" pip-image-url="primaryPartyAvatar" pip-rebind-avatar="true" pip-rebind="true"></pip-avatar></md-button><md-button class="pip-sidenav-user md-icon-button" ng-click="onUserClick()" ng-hide="getUser(\'owner\')" aria-label="current user"><pip-avatar class="pic-pic pip-face-ld" ng-if="!$avatarReset" pip-default-icon="icon-person" pip-rebind="true" pip-rebind-avatar="true" pip-party-id="getUser(\'id\')" pip-party-name="getUser(\'name\')" pip-image-url="secondaryPartyAvatar"></pip-avatar></md-button><div class="pip-sidenav-party-text"><a class="pip-sidenav-party-pri cursor-pointer" ng-click="onPartyClick()">{{ partyName || getParty(\'name\')}}</a><div class="pip-sidenav-party-sec" ng-show="getConnection() && !getUser(\'owner\')">{{getConnection(\'relation\') | translate}} <span ng-show="getConnection(\'relation_since\')">{{::\'SIDENAV_SINCE\' | translate}} {{getConnection(\'relation_since\') | formatLongDate}}</span></div></div></md-toolbar><md-list><div class="pip-section" ng-repeat="section in config.sections" ng-hide="section.access && !section.access(getParty(), getUser(), section)"><md-divider ng-show="$index > 0 && !isSectionEmpty(section.links)"></md-divider><md-subheader ng-show="section.title">{{::section.title | translate}}</md-subheader><md-list-item class="pip-focusable no-border" ng-repeat="link in section.links" ng-click="onLinkClick($event, link)" ng-hide="link.access && !link.access(getParty(), getUser(), link)"><md-icon md-svg-icon="{{link.icon}}" ng-hide="!link.icon" class="tm0 bm0"></md-icon><p>{{::link.title | translate}}</p></md-list-item></div></md-list></md-sidenav>')}])}(),function(n){try{n=angular.module("pipNav.Templates")}catch(e){n=angular.module("pipNav.Templates",[])}n.run(["$templateCache",function(n){n.put("tabs/tabs.html",'<md-toolbar class="pip-nav {{ class }}" ng-class="{\'pip-visible\': show(), \'pip-shadow\': showShadow()}"><md-tabs ng-if="$mdMedia(\'gt-xs\')" md-selected="activeTab" ng-class="{\'disabled\': disabled()}" md-stretch-tabs="true" md-dynamic-height="true"><md-tab ng-repeat="tab in tabs track by $index" ng-disabled="tabDisabled($index)" md-on-select="onSelect($index)"><md-tab-label>{{ ::tab.nameLocal }}<div class="pip-tabs-badge color-badge-bg" ng-if="tab.newCounts > 0 && tab.newCounts <= 99">{{ ::tab.newCounts }}</div><div class="pip-tabs-badge color-badge-bg" ng-if="tab.newCounts > 99">!</div></md-tab-label></md-tab></md-tabs><md-content class="md-subhead color-primary-bg md-hue-1" ng-if="$mdMedia(\'xs\')"><div class="pip-divider position-top m0"></div><md-select ng-model="activeIndex" ng-disabled="disabled()" md-container-class="pip-full-width-dropdown" aria-label="SELECT" md-ink-ripple="" md-on-close="onSelect(activeIndex)"><md-option ng-repeat="tab in tabs track by $index" value="{{ ::$index }}">{{ ::tab.nameLocal }}<div class="pip-tabs-badge color-badge-bg" ng-if="tab.newCounts > 0 && tab.newCounts <= 99">{{ ::tab.newCounts }}</div><div class="pip-tabs-badge color-badge-bg" ng-if="tab.newCounts > 99">!</div></md-option></md-select></md-content></md-toolbar>')}])}(),function(n,e,i){"use strict";var t=n.module("pipAppBar",["ngMaterial","pipTranslate","pipNav.Templates","pipAppBar.Service"]);t.config(["pipTranslateProvider",function(n){n.translations("en",{APPBAR_SEARCH:"Search"}),n.translations("ru",{APPBAR_SEARCH:"Поиск"})}]),t.directive("pipAppbar",function(){return{restrict:"E",scope:{title:"=pipTitle",showMenu:"=pipShowMenu",localActions:"=pipLocalActions",globalActions:"=pipGlobalActions",partyAvatarUrl:"=pipPartyAvatarUrl"},replace:!1,templateUrl:function(n,e){return"appbar/appbar.html"},controller:"pipAppBarController"}}),t.controller("pipAppBarController",["$scope","$element","$attrs","$rootScope","$window","$state","$location","pipTranslate","pipAppBar",function(n,t,a,o,c,s,r,l,d){function p(n){n&&s.go(n)}function u(e,i){n.originatorEv=i,e(i)}function m(n){if(o.$party)return n?o.$party[n]:o.$party}function g(n){if(o.$user)return n?o.$user[n]:o.$user}function b(e,i){n.config=i,n.searchEnabled=!1,n.search.text=""}function v(){return l.use()}function f(n){return n.access&&!n.access(o.$party,o.$user,n)}function h(n){return null===n.count||n.count<=0?"":n.count>99?"!":n.count}function y(n){var i=0;return e.each(n,function(n){f(n)||i++}),i}function w(){return y(n.config.secondaryGlobalActions)>0||y(n.config.secondaryLocalActions)>0}function A(){return y(n.config.secondaryGlobalActions)>0&&y(n.config.secondaryLocalActions)>0}function C(){var i,t;return e.isFunction(n.config.navIconCallback)?void n.config.navIconCallback():"back"!==n.config.navIconType?void o.$broadcast("pipAppBarNavIconClicked"):void("breadcrumb"===n.config.titleType?(i=n.config.titleBreadcrumb,e.isArray(i)&&i.length>0?(t=i[i.length-1].click,e.isFunction(t)?t():c.history.back()):c.history.back()):c.history.back())}function k(n){e.isFunction(n.click)&&n.click(n)}function $(n){setTimeout(function(){l.use(n),o.$apply()},0)}function S(n){var e,i={};if(null===n)return null;for(e in n)n.hasOwnProperty(e)&&(":party_id"===n[e]?i[e]=o.$party?o.$party.id:null:":user_id"===n[e]?i[e]=o.$user?o.$user.id:null:i[e]=n[e]);return i}function T(n){var e;return null===n?null:(e=n.replace(":party_id",o.$party?o.$party.id:""),e=e.replace(":user_id",o.user?o.$user.id:""))}function x(){var n;setTimeout(function(){n=i(".pip-search-text"),n.length>0&&n.focus()},0)}function I(e,i){if(e&&!e.divider)return e.close&&(n.originatorEv=null),e.menu?void i(n.originatorEv):e.callback?void e.callback():e.href?void(c.location.href=T(e.href)):e.url?void r.url(T(e.url)):e.state?void s.go(e.state,S(e.stateParams)):void(e.event?o.$broadcast(e.event):o.$broadcast("pipAppBarActionClicked",e.name))}function N(){n.search.text=n.config.searchCriteria,n.searchEnabled=!0,x()}function L(){var e=n.search.text;n.search.text="",n.searchEnabled=!1,n.config.searchCallback?n.config.searchCallback(e):o.$broadcast("pipAppBarSearchClicked",e)}function P(){n.search.text?(n.search.text="",x()):(n.searchEnabled=!1,L())}function E(e){return 13===e.keyCode?void n.onSearchClick():void(27===e.keyCode&&(n.searchEnabled=!1))}n.title&&d.showTitleText(n.title),n.showMenu&&d.showMenuNavIcon(),t.addClass("pip-appbar"),n.$emit("pipResizeWindow"),n.config=d.config(),n.localActions&&(d.showLocalActions(),n.config.primaryLocalActions=n.localActions[0],n.config.secondaryLocalActions=n.localActions[1]),n.globalActions&&(d.showLocalActions(),n.config.primaryGlobalActions=n.globalActions[0],n.config.secondaryGlobalActions=n.globalActions[0]),n.searchEnabled=!1,n.search={text:""},o.$on("pipAppBarChanged",b),n.language=v,n.actionHidden=f,n.actionCount=h,n.secondaryActionsVisible=w,n.secondaryDividerVisible=A,n.onNavIconClick=C,n.onBreadcrumbClick=k,n.onLanguageClick=$,n.onActionClick=I,n.onSearchEnable=N,n.onSearchClick=L,n.onSearchClear=P,n.onSearchKeyDown=E,n.onLogoState=p,n.getParty=m,n.getUser=g,n.openMenu=u}])}(window.angular,window._,window.jQuery),function(n,e){"use strict";var i=n.module("pipAppBar.Service",[]);i.provider("pipAppBar",function(){function n(n){return n&&(s.appTitleText=n),s.appTitleText}function i(n){return n&&(s.appTitleLogo=n),s.appTitleLogo}function t(n){return s.theme=n||s.theme,s.theme}function a(n,e){s.primaryGlobalActions=n||[],s.secondaryGlobalActions=e||[]}function o(n){s.primaryGlobalActions=n||[]}function c(n){s.secondaryGlobalActions=n||[]}var s={appTitleText:null,appTitleLogo:"images/piplife_logo.svg",theme:"blue",cssClass:"",ngClasses:{},logoState:null,navIconType:"none",navIconCallback:!1,titleType:"none",titleLogo:null,titleText:null,titleBreadcrumb:null,actionsType:"none",languages:["en","ru"],searchVisible:!1,searchCriteria:"",searchHistory:[],searchCallback:null,primaryGlobalActions:[],primaryLocalActions:[],secondaryGlobalActions:[],secondaryLocalActions:[]};this.appTitleText=n,this.appTitleLogo=i,this.theme=t,this.globalActions=a,this.globalPrimaryActions=o,this.globalSecondaryActions=c,this.$get=["$rootScope",function(n){function i(n){return s.logoState=n,s.logoState}function t(){return s.logoState}function a(){return s}function o(n){return void 0!=n&&(s.cssClass=n,I()),s.cssClass}function c(){s.ngClasses["pip-shadow"]=!1,s.ngClasses["pip-shadow-sm"]=!0,s.ngClasses["pip-shadow-xs"]=!1,I()}function r(){s.ngClasses["pip-shadow"]=!1,s.ngClasses["pip-shadow-sm"]=!0,s.ngClasses["pip-shadow-xs"]=!0,I()}function l(){s.ngClasses["pip-shadow"]=!0,I()}function d(){s.ngClasses["pip-shadow"]=!1,s.ngClasses["pip-shadow-sm"]=!1,s.ngClasses["pip-shadow-xs"]=!1,I()}function p(){s.navIconType="none",s.navIconCallback=null,I()}function u(n){s.navIconType="menu",s.navIconCallback=n,I()}function m(n){s.navIconType="back",s.navIconCallback=n,I()}function g(){s.titleType="none",s.titleLogo=null,s.titleText=null,s.titleBreadcrumb=null,I()}function b(n){s.titleType="logo",s.titleLogo=n,s.titleText=null,s.titleBreadcrumb=null,I()}function v(n){s.titleType="text",s.titleLogo=null,s.titleText=n,s.titleBreadcrumb=null,I()}function f(n,i){e.isArray(n)&&(i=n,n=i[i.length-1].title,i.splice(i.length-1,1)),s.titleType="breadcrumb",s.titleLogo=null,s.titleText=n,s.titleBreadcrumb=i,i.length>0?(s.navIconType="none"===s.navIconType?"none":s.navIconType,s.navIconCallback=i[i.length-1]):(s.navIconType="menu",s.navIconCallback=null),I()}function h(){b(s.appTitleLogo)}function y(){v(s.appTitleText)}function w(){s.actionsType="none",s.primaryLocalActions=[],s.secondaryLocalActions=[],I()}function A(n){s.actionsType="language",s.languages=n||s.languages,I()}function C(n,e){s.actionsType="list",s.primaryLocalActions=n||[],s.secondaryLocalActions=e||[],I()}function k(n,i){e.each(s.primaryGlobalActions,function(e){e.name===n&&(e.count=i)}),e.each(s.primaryLocalActions,function(e){e.name===n&&(e.count=i)}),I()}function $(n,e,i){s.searchVisible=!0,s.searchCallback=n,s.searchCriteria=e,s.searchHistory=i,I()}function S(){s.searchVisible=!1,s.searchCallback=null,s.searchCriteria=null,I()}function T(n){s.searchCriteria=n,I()}function x(n){s.searchHistory=n,I()}function I(){n.$broadcast("pipAppBarChanged",s)}return{config:a,cssClass:o,logoState:t,setLogoState:i,hideNavIcon:p,showMenuNavIcon:u,showBackNavIcon:m,showAppTitleLogo:h,showAppTitleText:y,showTitleLogo:b,showTitleText:v,showTitleBreadcrumb:f,hideTitle:g,showLanguage:A,showLocalActions:C,hideLocalActions:w,updateActionCount:k,showSearch:$,hideSearch:S,updateSearchCriteria:T,updateSearchHistory:x,showShadow:l,showShadowSm:c,showShadowSmXs:r,hideShadow:d}}]})}(window.angular,window._),function(){"use strict";var n=angular.module("pipDropdown",["pipAssert","pipNav.Templates"]);n.directive("pipDropdown",["$mdMedia","pipAssert",function(n,e){return{restrict:"E",scope:{ngDisabled:"&",actions:"=pipActions",showDropdown:"&pipShow",activeIndex:"=pipActiveIndex",select:"=pipDropdownSelect"},templateUrl:"dropdown/dropdown.html",controller:["$scope","$element","$attrs","localStorageService",function(i,t,a,o){i.class=(a.class||"")+" md-"+o.get("theme")+"-theme",e.isArray(i.actions,"pipDropdown: pip-actions attribute should take an array, but take "+typeof i.actions),i.$mdMedia=n,i.actions=i.actions&&_.isArray(i.actions)?i.actions:[],i.activeIndex=i.activeIndex||0,i.disabled=function(){return!!i.ngDisabled()&&i.ngDisabled()},i.onSelect=function(n){i.activeIndex=n,i.select&&i.select(i.actions[n],i.activeIndex)},i.show=function(){return!i.showDropdown()||i.showDropdown()}}]}}])}(),function(){"use strict";var n=angular.module("pipSideNav",["ngMaterial","pipTranslate","pipFocused","pipNav.Templates","pipSideNav.Service"]);n.config(["pipTranslateProvider",function(n){n.translations("en",{SIDENAV_SINCE:"since"}),n.translations("ru",{SIDENAV_SINCE:"с"})}]),n.directive("pipSidenav",function(){return{restrict:"EA",scope:{primaryPartyAvatar:"=pipPrimaryAvatar",secondaryPartyAvatar:"=pipSecondaryAvatar",partyName:"=pipName"},replace:!1,templateUrl:"sidenav/sidenav.html",controller:"pipSideNavController"}}),n.controller("pipSideNavController",["$scope","$element","$state","$rootScope","$window","$location","$timeout","pipState","pipTranslate","pipSideNav",function(n,e,i,t,a,o,c,s,r,l){function d(n){if(t.$party)return n?t.$party[n]:t.$party}function p(n){if(t.$user)return n?t.$user[n]:t.$user}function u(n){if(t.$connection)return n?t.$connection[n]:t.$connection}function m(n){return n&&n.access&&!n.access(t.$party,t.$user,n)}function g(n){var e=!0;return _.each(n,function(n){m(n)||(e=!1)}),e}function b(n){l.open()}function v(e,i){n.config=i}function f(){t.$broadcast("pipSideNavUserClicked"),l.close()}function h(){t.$broadcast("pipSideNavPartyClicked"),l.close()}function y(n){if(null==n)return null;var e={};for(var i in n)n.hasOwnProperty(i)&&(":party_id"==n[i]?e[i]=t.$party?t.$party.id:null:":user_id"==n[i]?e[i]=t.$user?t.$user.id:null:e[i]=n[i]);return e}function w(n){if(null==n)return null;var e=n.replace(":party_id",t.$party?t.$party.id:"");return e=e.replace(":user_id",t.$user?t.$user.id:"")}function A(n,e){return n.stopPropagation(),e?e.href?e.href.split("?")[0]===a.location.href.split("?")[0]?void l.close():(l.close(),void c(function(){a.location.href=w(e.href)},300)):e.url?e.url.split(/[\s\/?]+/)[1]===o.url().split(/[\s\/?]+/)[1]?void l.close():(l.close(),void c(function(){o.url(w(e.url))},300)):e.state?i.current.name===e.state?void l.close():(l.close(),void c(function(){s.go(e.state,y(e.stateParams))},300)):(e.event&&t.$broadcast("pipSideNavLinkClicked",e.event),void l.close()):void l.close()}e.addClass("pip-sidenav"),n.config=l.config(),n.$avatarReset=!1,t.$on("pipAppBarNavIconClicked",b),t.$on("pipSideNavChanged",v),n.itemVisible=m,n.onUserClick=f,n.onPartyClick=h,n.onLinkClick=A,n.isSectionEmpty=g,n.getParty=d,n.getUser=p,n.getConnection=u}])}(),function(){"use strict";var n=angular.module("pipSideNav.Service",["pipAssert","pipDebug"]);n.provider("pipSideNav",["pipAssertProvider","pipDebugProvider",function(n,e){function i(n){return o.theme=n||o.theme,o.theme}function t(e){n.isArray(e,"pipSideNavProvider.sections or pipSideNav.sections: sections should be an array"),_.each(e,function(e,i){e.access&&n.isFunction(e.access,"pipSideNavProvider.sections or pipSideNav.sections: in section number "+i+" with title "+e.title+" access should be a function"),e.links&&(n.isArray(e.links,"pipSideNavProvider.sections or pipSideNav.sections: in section number "+i+" with title "+e.title+" links should be an array"),_.each(e.links,function(t){t.access&&n.isFunction(t.access,"pipSideNavProvider.sections or pipSideNav.sections: in section number "+i+" with title "+e.title+" in link with title "+t.title+" access should be a function")}))})}function a(n){return e.enabled()&&t(n),_.isArray(n)&&(o.sections=n),o.sections}var o={theme:"blue",sections:[]};this.theme=i,this.sections=a,this.$get=["$rootScope","$mdSidenav",function(n,e){function t(){return o}function c(n){return i(n),r(),o.theme}function s(n){return a(n),r(),o.sections}function r(){n.$broadcast("pipSideNavChanged",o)}function l(n){e("pip-sidenav").open()}function d(n){e("pip-sidenav").close()}function p(){e("pip-sidenav").toggle()}return n.$on("pipSideNavOpen",l),n.$on("pipSideNavClose",d),{config:t,theme:c,sections:s,open:l,close:d,toggle:p}}]}])}(),function(){"use strict";var n=angular.module("pipTabs",["pipAssert","pipNav.Templates"]);n.directive("pipTabs",["$mdMedia","pipAssert",function(n,e){return{restrict:"E",scope:{ngDisabled:"&",tabs:"=pipTabs",showTabs:"&pipShowTabs",showTabsShadow:"&pipTabsShadow",activeIndex:"=pipActiveIndex",select:"=pipTabsSelect"},templateUrl:"tabs/tabs.html",controller:["$scope","$element","$attrs","$mdMedia","localStorageService","pipTranslate",function(n,i,t,a,o,c){n.class=(t.class||"")+" md-"+o.get("theme")+"-theme",e.isArray(n.tabs,"pipTabs: pipTabs attribute should take an array"),n.$mdMedia=a,n.tabs=n.tabs&&_.isArray(n.tabs)?n.tabs:[],n.tabs.length>0&&n.tabs[0].title?c.translateObjects(n.tabs,"title","nameLocal"):c.translateObjects(n.tabs,"name","nameLocal"),n.activeIndex=n.activeIndex||0,n.activeTab=n.activeIndex,n.disabled=function(){if(n.ngDisabled)return n.ngDisabled()},n.tabDisabled=function(e){return n.disabled()&&n.activeIndex!=e},n.onSelect=function(e){n.disabled()||(n.activeIndex=e,n.activeTab=n.activeIndex,n.select&&n.select(n.tabs[n.activeIndex],n.activeIndex))},n.showShadow=function(){return!!n.showTabsShadow&&n.showTabsShadow()},n.show=function(){return!n.showTabs||n.showTabs()}}]}}])}();
!function(){"use strict";angular.module("pipErrorHandling",["pipErrors.Pages","pipNoConnectionPanel"])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("maintenance/maintenance.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div style="background-image: url(\'images/maintenance.svg\');" class="pip-pic"></div><div class="pip-error-text">{{::\'ERROR_AVAILABLE_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_AVAILABLE_SUBTITLE\' | translate}}</div><div class="pip-error-subtext" ng-if="timeoutInterval">{{::\'ERROR_AVAILABLE_TRY_AGAIN\' | translate}} {{timeoutInterval}} sec.</div><div class="pip-error-actions h48 layout-column layout-align-center-center" ng-if="isCordova"><md-button class="md-accent" ng-click="onClose($event)" aria-label="CLOSE">{{::\'ERROR_AVAILABLE_CLOSE\' | translate}}</md-button></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("missing_route/missing_route.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div style="background-image: url(\'images/invalid_route.svg\');" class="pip-pic"></div><div class="pip-error-text">{{::\'ERROR_ROUTE_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_ROUTE_SUBTITLE\' | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="CONTINUE" class="md-accent" ng-click="onContinue($event)">{{::\'ERROR_ROUTE_CONTINUE\' | translate}}</md-button></div><div class="h48" ng-if="url"><a ng-href="{{url}}">{{::\'ERROR_ROUTE_TRY_AGAIN\' | translate }}: {{url}}</a></div><div class="h48" ng-if="urlBack"><a ng-href="{{urlBack}}">{{::\'ERROR_ROUTE_GO_BACK\' | translate }}: {{urlBack}}</a></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("no_connection/no_connection.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div style="background-image: url(\'images/no_response.svg\');" class="pip-pic"></div><div class="pip-error-text">{{::\'ERROR_RESPONDING_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_RESPONDING_SUBTITLE\' | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="RETRY" class="md-accent" ng-click="onRetry($event)">{{::\'ERROR_RESPONDING_RETRY\' | translate}}</md-button></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("no_connection/pip_no_connection_panel.html",'<div class="pip-empty pip-error layout-column layout-align-center-center flex"><img src="images/no_response.svg" class="pip-pic block"><div class="pip-error-text">{{::\'ERROR_RESPONDING_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_RESPONDING_SUBTITLE\' | translate}}</div><div class="pip-error-actions h48 layout-column layout-align-center-center"><md-button aria-label="RETRY" class="md-accent" ng-click="onRetry($event)">{{::\'ERROR_RESPONDING_RETRY\' | translate}}</md-button></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("unknown/unknown.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div style="background-image: url(\'images/unknown_error.svg\');" class="pip-pic"></div><div class="pip-error-text">{{::\'ERROR_UNKNOWN_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_UNKNOWN_SUBTITLE\' | translate}}</div><div class="pip-error-subtext" ng-if="showError && error_details && error_details.status"><div ng-if="error_details.code">Code: {{error_details.code}}</div><div ng-if="error_details.description">Description: {{error_details.description}}</div><div ng-if="error_details.status">HTTP status: {{error_details.status}}</div><div ng-if="error_details.server_stacktrace">Server stacktrace: {{error_details.server_stacktrace}}</div><div ng-if="error_details.client_stacktrace">Client stacktrace stacktrace: {{error_details.client_stacktrace}}</div></div><div class="pip-error-actions layout-column layout-align-center-center"><div class="h48" ng-if="isCordova"><md-button aria-label="CLOSE" class="md-accent" ng-click="onClose($event)">{{::\'ERROR_UNKNOWN_CLOSE\' | translate}}</md-button></div><div class="h48"><md-button aria-label="DETAILS" class="md-accent" ng-click="onDetails($event)">{{::\'ERROR_UNKNOWN_DETAILS\' | translate}}</md-button></div></div></div>')}])}(),function(r){try{r=angular.module("pipErrors.Templates")}catch(e){r=angular.module("pipErrors.Templates",[])}r.run(["$templateCache",function(r){r.put("unsupported/unsupported.html",'<div class="pip-error pip-empty layout-column flex layout-align-center-center"><div class="pip-error-text">{{::\'ERROR_UNSUPPORTED_TITLE\' | translate}}</div><div class="pip-error-subtext">{{::\'ERROR_UNSUPPORTED_SUBTITLE\' | translate}}</div><div class="pip-error-details layout-row layout-align-center-center" ng-if="$mdMedia(\'gt-xs\')"><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/ie.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx">{{::\'ERROR_UNSUPPORTED_IE\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_IE_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/fm.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.mozilla.org/ru/firefox/new/">{{::\'ERROR_UNSUPPORTED_FM\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_FM_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/gc.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.google.com/chrome/browser/desktop/index.html?platform=win64#">{{::\'ERROR_UNSUPPORTED_GC\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_GC_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/o.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="http://www.opera.com/ru/download">{{::\'ERROR_UNSUPPORTED_O\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_O_VER\' | translate}}</p></div></div></div><div class="pip-error-details" ng-if="$mdMedia(\'xs\')"><div class="layout-row layout-align-center-center"><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/ie.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx">{{::\'ERROR_UNSUPPORTED_IE\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_IE_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/fm.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.mozilla.org/ru/firefox/new/">{{::\'ERROR_UNSUPPORTED_FM\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_FM_VER\' | translate}}</p></div></div></div><div class="tm16 layout-row layout-align-center-center"><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/gc.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="https://www.google.com/chrome/browser/desktop/index.html?platform=win64#">{{::\'ERROR_UNSUPPORTED_GC\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_GC_VER\' | translate}}</p></div></div><div class="pip-error-details-item layout-column layout-align-center-center"><div style="background-image: url(\'images/o.svg\');" class="pip-pic"></div><div class="h64 tp16 bp16"><a class="text-body2 m0" target="_blank" href="http://www.opera.com/ru/download">{{::\'ERROR_UNSUPPORTED_O\' | translate}}</a><p class="text-body1 m0">{{::\'ERROR_UNSUPPORTED_O_VER\' | translate}}</p></div></div></div></div></div>')}])}(),function(){"use strict";var r=angular.module("pipErrors.Pages",["pipAppBar","pipRest.State","pipTransactions","pipRest","ngMaterial","pipErrors.Strings","pipErrors.NoConnection","pipErrors.MissingRoute","pipErrors.Unsupported","pipErrors.Unknown","pipErrors.Maintenance","pipErrors.Templates"]);r.config(["pipAuthStateProvider",function(r){r.state("errors_no_connection",{url:"/errors/no_connection",params:{error:null},auth:!1,controller:"pipErrorNoConnectionController",templateUrl:"no_connection/no_connection.html"}).state("errors_maintenance",{url:"/errors/maintenance",params:{error:null},auth:!1,controller:"pipErrorMaintenanceController",templateUrl:"maintenance/maintenance.html"}).state("errors_missing_route",{url:"/errors/missing_route",params:{unfoundState:null,fromState:null},auth:!0,controller:"pipErrorMissingRouteController",templateUrl:"missing_route/missing_route.html"}).state("errors_unsupported",{url:"/errors/unsupported",params:{error:null},auth:!1,controller:"pipErrorUnsupportedController",templateUrl:"unsupported/unsupported.html"}).state("errors_unknown",{url:"/errors/unknown",params:{error:null},auth:!1,controller:"pipErrorUnknownController",templateUrl:"unknown/unknown.html"})}])}(),function(){"use strict";var r=angular.module("pipErrors.Strings",["pipTranslate"]);r.config(["pipTranslateProvider",function(r){r.translations("en",{ERROR_ROUTE_TITLE:"Sorry, the page isn't available",ERROR_ROUTE_SUBTITLE:"The link you followed may be broken, or the page may have been removed.",ERROR_ROUTE_CONTINUE:"Continue",ERROR_ROUTE_TRY_AGAIN:"Try again",ERROR_ROUTE_GO_BACK:"Go Back",ERROR_ROUTE_PAGE_TITLE:"Wrong page",ERROR_UNKNOWN_TITLE:"Oops. Something went wrong",ERROR_UNKNOWN_SUBTITLE:"Unknown error occurred, but don't worry we already have been notified.",ERROR_UNKNOWN_CLOSE:"Close",ERROR_UNKNOWN_DETAILS:"Details",ERROR_AVAILABLE_TITLE:"The server is on maintenance",ERROR_AVAILABLE_SUBTITLE:"Sorry for the inconvenience. This application is undergoing maintenance for a short period. We'll be back soon. Thank for your patience.",ERROR_AVAILABLE_CLOSE:"Close",ERROR_AVAILABLE_TRY_AGAIN:"Try after",ERROR_RESPONDING_TITLE:"No connection to the server",ERROR_RESPONDING_SUBTITLE:"Unable to connect to the server. Check your Internet connection and try again.",ERROR_RESPONDING_RETRY:"Retry",ERROR_UNSUPPORTED_TITLE:"This browser is not supported",ERROR_UNSUPPORTED_SUBTITLE:"Our application using the latest technology. This makes the application faster and easier to use. Unfortunately, your browser doesn't support those technologies. Download on of these great browsers and you'll be on your way:",ERROR_UNSUPPORTED_O:"Opera",ERROR_UNSUPPORTED_O_VER:"Version 36+",ERROR_UNSUPPORTED_IE:"Internet Explorer",ERROR_UNSUPPORTED_IE_VER:"Version 11+",ERROR_UNSUPPORTED_GC:"Google Chrome",ERROR_UNSUPPORTED_GC_VER:"Version 48+",ERROR_UNSUPPORTED_FM:"Mozilla Firefox",ERROR_UNSUPPORTED_FM_VER:"Version 45+"}),r.translations("ru",{ERROR_ROUTE_TITLE:"Sorry, the page isn't available",ERROR_ROUTE_SUBTITLE:"The link you followed may be broken, or the page may have been removed.",ERROR_ROUTE_CONTINUE:"Continue",ERROR_ROUTE_TRY_AGAIN:"Try again",ERROR_ROUTE_GO_BACK:"Go Back",ERROR_ROUTE_PAGE_TITLE:"Wrong page",ERROR_UNKNOWN_TITLE:"Oops. Something went wrong",ERROR_UNKNOWN_SUBTITLE:"Unknown error occurred, but don't worry we already have been notified.",ERROR_UNKNOWN_CLOSE:"Close",ERROR_UNKNOWN_DETAILS:"Details",ERROR_AVAILABLE_TITLE:"The server is on maintenance",ERROR_AVAILABLE_SUBTITLE:"Sorry for the inconvenience. This application is undergoing maintenance for a short period. We'll be back soon. Thank for your patience.",ERROR_AVAILABLE_CLOSE:"Close",ERROR_AVAILABLE_TRY_AGAIN:"Try after",ERROR_RESPONDING_TITLE:"No connection to the server",ERROR_RESPONDING_SUBTITLE:"Unable to connect to server. Check your Internet connection and try again.",ERROR_RESPONDING_RETRY:"Retry",ERROR_UNSUPPORTED_TITLE:"This browser is not supported",ERROR_UNSUPPORTED_SUBTITLE:"Our application using the latest technology. This makes the application faster and easier to use. Unfortunately, your browser doesn't support those technologies. Download on of these great browsers and you'll be on your way:",ERROR_UNSUPPORTED_O:"Opera",ERROR_UNSUPPORTED_O_VER:"Version 35+",ERROR_UNSUPPORTED_IE:"Internet Explorer",ERROR_UNSUPPORTED_IE_VER:"Version 11+",ERROR_UNSUPPORTED_GC:"Google Chrome",ERROR_UNSUPPORTED_GC_VER:"Version 47+",ERROR_UNSUPPORTED_FM:"Mozilla Firefox",ERROR_UNSUPPORTED_FM_VER:"Version 43+"})}])}(),function(){"use strict";var r=angular.module("pipErrors.Maintenance",[]);r.controller("pipErrorMaintenanceController",["$scope","$state","$rootScope","pipAppBar",function(r,e,t,o){function a(){o.showMenuNavIcon(),o.showShadow(),o.showTitleBreadcrumb("ERROR_AVAILABLE_TITLE",[]),o.showLocalActions(null,[])}function n(){}t.$routing=!1,r.isCordova=!1,a(),r.error=e&&e.params&&e.params.error?e.params.error:{},r.timeoutInterval=r.error&&r.error.config&&r.error.config.params&&r.error.config.params.interval?r.error.config.params.interval:0,r.onClose=n}])}(),function(){"use strict";var r=angular.module("pipErrors.MissingRoute",[]);r.controller("pipErrorMissingRouteController",["$scope","$state","$rootScope","pipAppBar","pipAuthState",function(r,e,t,o,a){function n(){o.showMenuNavIcon(),o.showShadow(),o.showTitleBreadcrumb("ERROR_ROUTE_PAGE_TITLE",[]),o.showLocalActions(null,[])}function i(){a.goToAuthorized()}n(),t.$routing=!1,r.error=e&&e.params&&e.params.error?e.params.fromState:{},r.unfoundState=e&&e.params?e.params.unfoundState:{},r.url=r.unfoundState&&r.unfoundState.to?e.href(r.unfoundState.to,r.unfoundState.toParams,{absolute:!0}):"",r.urlBack=r.fromState&&r.fromState.to?e.href(r.fromState.to,r.fromState.fromParams,{absolute:!0}):"",r.onContinue=i}])}(),function(){"use strict";var r=angular.module("pipErrors.NoConnection",[]);r.controller("pipErrorNoConnectionController",["$scope","$state","$rootScope","$window","pipAppBar",function(r,e,t,o,a){function n(){o.history.back()}function i(){a.showMenuNavIcon(),a.showShadow(),a.showTitleBreadcrumb("ERROR_RESPONDING_TITLE",[]),a.showLocalActions(null,[])}t.$routing=!1,i(),r.error=e&&e.params&&e.params.error?e.params.error:{},r.onRetry=n}])}(),function(){"use strict";var r=angular.module("pipNoConnectionPanel",[]);r.directive("pipNoConnectionPanel",function(){return{restrict:"E",scope:{error:"=pipError",retry:"=pipRetry"},templateUrl:"no_connection/pip_no_connection_panel.html",controller:"pipNoConnectionPanelController"}}),r.controller("pipNoConnectionPanelController",["$scope","$element","$attrs","pipTranslate",function(r,e,t,o){function a(){r.retry&&angular.isFunction(r.retry)&&r.retry()}r.onRetry=a}])}(),function(){"use strict";var r=angular.module("pipErrors.Unknown",[]);r.controller("pipErrorUnknownController",["$scope","$state","$rootScope","pipAppBar",function(r,e,t,o){function a(){o.showMenuNavIcon(),o.showShadow(),o.showTitleBreadcrumb("ERROR_UNKNOWN_TITLE",[]),o.showLocalActions(null,[])}function n(){r.error_details={},r.error_details.code=r.error.code,r.error_details.description=r.error.message,r.error_details.status=r.error.status,r.error_details.server_stacktrace=function(){},r.error_details.client_stacktrace=function(){}}function i(){r.showError=!0}function s(){}t.$routing=!1,r.isCordova=!1,a(),r.error=e&&e.params&&e.params.error?e.params.error:{},r.error_details=null,r.onDetails=i,r.onClose=s,n()}])}(),function(){"use strict";var r=angular.module("pipErrors.Unsupported",[]);r.controller("pipErrorUnsupportedController",["$scope","$state","$rootScope","$mdMedia","pipAppBar",function(r,e,t,o,a){function n(){a.showMenuNavIcon(),a.showShadow(),a.showTitleBreadcrumb("ERROR_UNSUPPORTED_TITLE",[]),a.showLocalActions(null,[])}r.$mdMedia=o,t.$routing=!1,n(),r.error=e&&e.params&&e.params.error?e.params.error:{}}])}();