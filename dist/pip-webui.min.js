!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).buttons=t()}}(function(){return function t(e,n,i){function o(u,r){if(!n[u]){if(!e[u]){var l="function"==typeof require&&require;if(!r&&l)return l(u,!0);if(s)return s(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var a=n[u]={exports:{}};e[u][0].call(a.exports,function(t){var n=e[u][1][t];return o(n?n:t)},a,a.exports,t,e,n,i)}return n[u].exports}for(var s="function"==typeof require&&require,u=0;u<i.length;u++)o(i[u]);return o}({1:[function(t,e,n){function i(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}i.$inject=["$injector"],angular.module("pipButtons.Translate",[]).filter("translate",i)},{}],2:[function(t,e,n){function i(t,e){return{restrict:"A",scope:!1,controller:o}}i.$inject=["$parse","$timeout"];var o=function(){function t(t,e,n,i,o){"ngInject";var s=o(e.pipFabTooltipVisibility),u=o(e.pipFabShowTooltip),r=u.assign;n.$watch(s,function(t){_.isFunction(r)&&(t?i(function(){r(n,t)},600):r(n,t))})}return t.$inject=["$element","$attrs","$scope","$timeout","$parse"],t}();angular.module("pipFabTooltipVisibility",[]).directive("pipFabTooltipVisibility",i)},{}],3:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),t("./refresh_button/RefreshButton"),t("./toggle_buttons/ToggleButtons"),t("./fabs/FabTooltipVisibility"),angular.module("pipButtons",["pipToggleButtons","pipRefreshButton","pipFabTooltipVisibility"])},{"./fabs/FabTooltipVisibility":2,"./refresh_button/RefreshButton":4,"./toggle_buttons/ToggleButtons":5}],4:[function(t,e,n){var i={text:"<pipText",visible:"<pipVisible",onRefresh:"&?pipRefresh"},o=(function(){function t(){}t}(),function(){function t(t,e,n){this.$scope=t,this.$element=e,this.$attrs=n}return t.prototype.$postLink=function(){this._buttonElement=this.$element.children(".md-button"),this._textElement=this._buttonElement.children(".pip-refresh-text"),this.show()},t.prototype.$onChanges=function(t){t.visible.currentValue===!0?(this.text=t.text.currentValue,this.show()):this.hide()},t.prototype.onClick=function(t){this.onRefresh&&this.onRefresh({$event:t})},t.prototype.show=function(){if(void 0!==this._textElement&&void 0!==this._buttonElement){this._textElement.text(this.text),this._buttonElement.show();var t=this._buttonElement.width();this._buttonElement.css("margin-left","-"+t/2+"px")}},t.prototype.hide=function(){this._buttonElement.hide()},t}()),s={bindings:i,controller:o,template:'<md-button class="pip-refresh-button" tabindex="-1" ng-click="$ctrl.onClick($event)" aria-label="REFRESH"><md-icon md-svg-icon="icons:refresh"></md-icon><span class="pip-refresh-text"></span></md-button>'};angular.module("pipRefreshButton",["ngMaterial"]).component("pipRefreshButton",s)},{}],5:[function(t,e,n){var i=(function(){function t(){}t}(),{ngDisabled:"<?",buttons:"<pipButtons",currentButtonValue:"=ngModel",currentButton:"=?pipButtonObject",multiselect:"<?pipMultiselect",change:"&ngChange",onlyToggle:"<?pipOnlyToggle"}),o=(function(){function t(){}t}(),function(){function t(t,e,n,i,o){"ngInject";this.$element=t,this.$attrs=e,this.$scope=n,this.$timeout=i,this.pipMedia=o.has("pipMedia")?o.get("pipMedia"):null,this.class=e.class||"";var s=_.indexOf(this.buttons,_.find(this.buttons,{id:this.currentButtonValue}));this.currentButtonIndex=s<0?0:s,this.currentButton=this.buttons.length>0?this.buttons[this.currentButtonIndex]:this.currentButton}return t.$inject=["$element","$attrs","$scope","$timeout","$injector"],t.prototype.$onChanges=function(t){this.multiselect=!!t.multiselect&&t.multiselect.currentValue,this.disabled=!!t.ngDisabled&&t.ngDisabled.currentValue,this.onlyToggle=!!t.onlyToggle&&t.onlyToggle.currentValue,this.buttons=!t.buttons||_.isArray(t.buttons.currentValue)&&0===t.buttons.currentValue.length?[]:t.buttons.currentValue;var e=_.indexOf(this.buttons,_.find(this.buttons,{id:this.currentButtonValue}));this.currentButtonIndex=e<0?0:e,this.currentButton=this.buttons.length>0?this.buttons[this.currentButtonIndex]:this.currentButton},t.prototype.$postLink=function(){var t=this;this.$element.on("focusin",function(){t.$element.addClass("focused-container")}).on("focusout",function(){t.$element.removeClass("focused-container")})},t.prototype.buttonSelected=function(t){var e=this;this.disabled||(this.currentButtonIndex=t,this.currentButton=this.buttons[this.currentButtonIndex],this.currentButtonValue=this.currentButton.id||t,this.$timeout(function(){e.change&&e.change()}))},t.prototype.enterSpacePress=function(t){this.buttonSelected(t.index)},t.prototype.highlightButton=function(t){return!this.multiselect||_.isUndefined(this.currentButton.level)||_.isUndefined(this.buttons[t].level)?this.currentButtonIndex==t:this.currentButton.level>=this.buttons[t].level},t}()),s={bindings:i,templateUrl:"toggle_buttons/ToggleButtons.html",controller:o};angular.module("pipToggleButtons",["pipButtons.Templates"]).component("pipToggleButtons",s)},{}],6:[function(t,e,n){!function(t){try{t=angular.module("pipButtons.Templates")}catch(e){t=angular.module("pipButtons.Templates",[])}t.run(["$templateCache",function(t){t.put("toggle_buttons/ToggleButtons.html",'<div class="pip-toggle-buttons layout-row {{$ctrl.class}}" pip-selected="$ctrl.bufButtonIndex" pip-enter-space-press="$ctrl.enterSpacePress($event)" ng-if="!$ctrl.pipMedia(\'xs\') || $ctrl.onlyToggle"><md-button tabindex="-1" ng-repeat="button in $ctrl.buttons" ng-class="{\'md-accent md-raised selected color-accent-bg\' : $ctrl.highlightButton($index)}" ng-attr-style="{{ \'background-color:\' + ($ctrl.highlightButton($index) ? button.backgroundColor : \'\') + \'!important\' }}" class="pip-selectable pip-chip-button flex" ng-click="$ctrl.buttonSelected($index, $event)" ng-disabled="button.disabled || $ctrl.disabled">{{button.name || button.title | translate}} <span ng-if="button.checked || button.complete || button.filled" class="pip-tagged">*</span></md-button></div><md-input-container class="md-block" ng-if="$ctrl.pipMedia(\'xs\') && !$ctrl.onlyToggle"><md-select ng-model="$ctrl.currentButtonIndex" ng-disabled="$ctrl.disabled" aria-label="DROPDOWN" md-on-close="$ctrl.buttonSelected($ctrl.currentButtonIndex)"><md-option ng-repeat="action in $ctrl.buttons" value="{{ ::$index }}">{{ (action.title || action.name) | translate }} <span ng-if="action.checked || action.complete || action.filled" class="pip-tagged">*</span></md-option></md-select></md-input-container>')}])}()},{}]},{},[6,1,2,3,4,5])(6)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).behaviors=t()}}(function(){return function t(e,i,n){function o(r,a){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[r]={exports:{}};e[r][0].call(h.exports,function(t){var i=e[r][1][t];return o(i?i:t)},h,h.exports,t,e,i,n)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,i){var n=function(){function t(t){t.find("*").attr("pip-cancel-drag","pip-cancel-drag")}return t}(),o=function(){return{restrict:"A",link:function(t,e,i){new n(e)}}};angular.module("pipDraggable").directive("pipCancelDrag",o)},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s,r,a){this.$rootScope=t,this.$parse=e,this.$document=i,this.$window=n,this.pipDraggable=o,this.$scope=s,this.$element=r,this.$attrs=a,this.LONG_PRESS=50,this._centerAnchor=!1,this._hasTouch="ontouchstart"in window||window.DocumentTouch,this._pressEvents="touchstart mousedown",this._moveEvents="touchmove mousemove",this._releaseEvents="touchend mouseup",this._data=null,this._dragOffset=null,this._dragEnabled=!1,this._pressTimer=null,this._elementStyle={},this.scrollParent=!1,this.scrollContainer=angular.element(window),this._deregisterRootMoveListener=angular.noop,s.value=a.ngDrag,this._myid=s.$id,this.onDragStartCallback=e(a.pipDragStart)||null,this.onDragStopCallback=e(a.pipDragStop)||null,this.onDragSuccessCallback=e(a.pipDragSuccess)||null,this.allowTransform=!!angular.isDefined(a.allowTransform)&&s.$eval(a.allowTransform),this.getDragData=e(a.pipDragData),this.verticalScroll=a.pipVerticalScroll||!0,this.horizontalScroll=a.pipHorizontalScroll||!0,this.activationDistance=parseFloat(a.pipActivationDistance)||75,this.scrollDistance=parseFloat(a.pipActivationDistance)||50,this.scrollContainerGetter=e(a.pipScrollContainer),this.$element.css("cursor","move"),this.initialize()}return t.prototype.initialize=function(){this.$element.attr("pip-draggable","false");var t;t=this.$element[0].querySelectorAll?angular.element(this.$element[0].querySelectorAll("[pip-drag-handle]")):this.$element.find("[pip-drag-handle]"),t.length&&(this._dragHandle=t),this.toggleListeners(!0),this.scrollParent?this.scrollContainer=angular.element(this.$element.parent()):this.$attrs.pipScrollContainer?this.scrollContainer=angular.element(this.scrollContainerGetter(this.$scope)):this.scrollContainer=angular.element(window)},t.prototype.toggleListeners=function(t){var e=this;t&&(this.$scope.$on("$destroy",function(){e.onDestroy(t)}),this.$scope.$watch(this.$attrs.pipDrag,function(t,i){e.onEnableChange(t,i)}),this.$scope.$watch(this.$attrs.pipCenterAnchor,function(t,i){e.onCenterAnchor(t,i)}),this._dragHandle?this._dragHandle.on(this._pressEvents,function(t){e.onpress(t)}):this.$element.on(this._pressEvents,function(t){e.onpress(t)}),this._hasTouch||"img"!=this.$element[0].nodeName.toLowerCase()||this.$element.on("mousedown",function(){return!1}))},t.prototype.onDestroy=function(t){this.toggleListeners(!1)},t.prototype.onEnableChange=function(t,e){this._dragEnabled=t},t.prototype.onCenterAnchor=function(t,e){angular.isDefined(t)&&(this._centerAnchor=t||"true")},t.prototype.isClickableElement=function(t){return angular.isDefined(angular.element(t.target).attr("pip-cancel-drag"))},t.prototype.onpress=function(t){var e=this;this._dragEnabled&&(this.isClickableElement(t)||"mousedown"==t.type&&0!=t.button||(this.saveElementStyles(),this._hasTouch?(this.cancelPress(),this._pressTimer=setTimeout(function(){e.cancelPress(),e.onlongpress(t)},this.LONG_PRESS),this.$document.on(this._moveEvents,function(){e.cancelPress()}),this.$document.on(this._releaseEvents,function(){e.cancelPress()})):this.onlongpress(t)))},t.prototype.saveElementStyles=function(){this._elementStyle.left=this.$element.css("css")||0,this._elementStyle.top=this.$element.css("top")||0,this._elementStyle.position=this.$element.css("position"),this._elementStyle.width=this.$element.css("width")},t.prototype.cancelPress=function(){var t=this;clearTimeout(this._pressTimer),this.$document.off(this._moveEvents,function(){t.cancelPress()}),this.$document.off(this._releaseEvents,function(){t.cancelPress()})},t.prototype.onlongpress=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.offset=this.$element[0].getBoundingClientRect(),this.allowTransform?this._dragOffset=this.offset:this._dragOffset={left:document.body.scrollLeft,top:document.body.scrollTop},this.$element.centerX=this.$element[0].offsetWidth/2,this.$element.centerY=this.$element[0].offsetHeight/2,this._mx=this.pipDraggable.inputEvent(t).pageX,this._my=this.pipDraggable.inputEvent(t).pageY,this._mrx=this._mx-this.offset.left,this._mry=this._my-this.offset.top,this._centerAnchor?(this._tx=this._mx-this.$element.centerX-this.$window.pageXOffset,this._ty=this._my-this.$element.centerY-this.$window.pageYOffset):(this._tx=this._mx-this._mrx-this.$window.pageXOffset,this._ty=this._my-this._mry-this.$window.pageYOffset),this.$document.on(this._moveEvents,function(t){e.onmove(t)}),this.$document.on(this._releaseEvents,function(t){e.onrelease(t)}),this._deregisterRootMoveListener=this.$rootScope.$on("draggable:_triggerHandlerMove",function(t,i){e.onmove(i)}))},t.prototype.onmove=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.$element.hasClass("pip-dragging")||(this._data=this.getDragData(this.$scope),this.$element.addClass("pip-dragging"),this.$rootScope.$broadcast("draggable:start",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data}),this.onDragStartCallback&&this.$scope.$apply(function(){e.onDragStartCallback(e.$scope,{$data:e._data,$event:t})})),this._mx=this.pipDraggable.inputEvent(t).pageX,this._my=this.pipDraggable.inputEvent(t).pageY,(this.horizontalScroll||this.verticalScroll)&&this.dragToScroll(),this._centerAnchor?(this._tx=this._mx-this.$element.centerX-this._dragOffset.left,this._ty=this._my-this.$element.centerY-this._dragOffset.top):(this._tx=this._mx-this._mrx-this._dragOffset.left,this._ty=this._my-this._mry-this._dragOffset.top),this.moveElement(this._tx,this._ty),this.$rootScope.$broadcast("draggable:move",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data,uid:this._myid,dragOffset:this._dragOffset}))},t.prototype.onrelease=function(t){var e=this;this._dragEnabled&&(t.preventDefault(),this.$rootScope.$broadcast("draggable:end",{x:this._mx,y:this._my,tx:this._tx,ty:this._ty,event:t,element:this.$element,data:this._data,callback:this.onDragComplete,uid:this._myid}),this.$element.removeClass("pip-dragging"),this.$element.parent().find(".pip-drag-enter").removeClass("pip-drag-enter"),this.reset(),this.$document.off(this._moveEvents),this.$document.off(this._releaseEvents),this.onDragStopCallback&&this.$scope.$apply(function(){e.onDragStopCallback(e.$scope,{$data:e._data,$event:t})}),this._deregisterRootMoveListener())},t.prototype.onDragComplete=function(t){var e=this;this.onDragSuccessCallback&&this.$scope.$apply(function(){e.onDragSuccessCallback(e.$scope,{$data:e._data,$event:t})})},t.prototype.reset=function(){this.allowTransform?this.$element.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):this.$element.css({position:this._elementStyle.position,top:this._elementStyle.top,left:this._elementStyle.left,"z-index":"",width:this._elementStyle.width})},t.prototype.moveElement=function(t,e){var i=this.$element.css("width");this.allowTransform?this.$element.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+e+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+t+", "+e+")"}):this.$element.css({left:t+"px",top:e+"px",position:"fixed","z-index":100,width:i})},t.prototype.dragToScroll=function(){var t=0,e=0,i=function(t){return t.offset()||{left:0,top:0}};if(this.horizontalScroll){var n=i(this.scrollContainer).left,o=this.scrollContainer.innerWidth(),s=n+o;this._mx-n<this.activationDistance?t=-this.scrollDistance:s-this._mx<this.activationDistance&&(t=this.scrollDistance)}if(this.verticalScroll){var r=i(this.scrollContainer).top,a=this.scrollContainer.innerHeight(),c=r+a;this._my-r<this.activationDistance?e=30-this.scrollDistance:c-this._my<this.activationDistance&&(e=this.scrollDistance-30)}if(0!==t||0!==e){var l=this.scrollContainer.scrollLeft(),h=this.scrollContainer.scrollTop();this.scrollContainer.scrollLeft(l+t),this.scrollContainer.scrollTop(h+e)}},t}(),o=function(t,e,i,o,s){return{restrict:"A",link:function(r,a,c){new n(t,e,i,o,s,r,a,c)}}};o.$inject=["$rootScope","$parse","$document","$window","pipDraggable"],angular.module("pipDraggable").directive("pipDrag",o)},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.inputEvent=function(t){return angular.isDefined(t.touches)?t.touches[0]:angular.isDefined(t.originalEvent)&&angular.isDefined(t.originalEvent.touches)?t.originalEvent.touches[0]:t},t}();angular.module("pipDraggable").service("pipDraggable",n)},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s,r){this.$parse=t,this.$document=e,this.$timeout=i,this.pipDraggable=n,this.$scope=o,this.$element=s,this.$attrs=r,o.value=r.pipDrop,o.isTouching=!1,this._myid=o.$id,this.onDropCallback=t(r.pipDropSuccess),this.onDragStartCallback=t(r.pipDragStart),this.onDragStopCallback=t(r.pipDragStop),this.onDragMoveCallback=t(r.pipDragMove),this.initialize()}return t.prototype.initialize=function(){this.toggleListeners(!0)},t.prototype.toggleListeners=function(t){var e=this;t&&(this.$scope.$watch(this.$attrs.pipDrop,function(t,i){e.onEnableChange(t,i)}),this.$scope.$on("$destroy",function(t){e.onDestroy(t)}),this.$scope.$on("draggable:start",function(t,i){e.onDragStart(t,i)}),this.$scope.$on("draggable:move",function(t,i){e.onDragMove(t,i)}),this.$scope.$on("draggable:end",function(t,i){e.onDragEnd(t,i)}))},t.prototype.onDestroy=function(t){this.toggleListeners(!1)},t.prototype.onEnableChange=function(t,e){this._dropEnabled=t},t.prototype.onDragStart=function(t,e){var i=this;this._dropEnabled&&(this.isTouching(e.x,e.y,e.element),this.$attrs.pipDragStart&&this.$timeout(function(){i.onDragStartCallback(i.$scope,{$data:e.data,$event:e})}))},t.prototype.onDragMove=function(t,e){var i=this;this._dropEnabled&&(this.isTouching(e.x,e.y,e.element),this.$attrs.pipDragMove&&this.$timeout(function(){i.onDragMoveCallback(i.$scope,{$data:e.data,$event:e})}))},t.prototype.onDragEnd=function(t,e){var i=this;if(!this._dropEnabled||this._myid===e.uid)return void this.updateDragStyles(!1,e.element);this.isTouching(e.x,e.y,e.element)&&(e.callback&&e.callback(e),this.$attrs.pipDropSuccess&&this.$timeout(function(){i.onDropCallback(i.$scope,{$data:e.data,$event:e,$target:i.$scope.$eval(i.$scope.value)})})),this.$attrs.pipDragStop&&this.$timeout(function(){i.onDragStopCallback(i.$scope,{$data:e.data,$event:e})}),this.updateDragStyles(!1,e.element)},t.prototype.isTouching=function(t,e,i){var n=this.hitTest(t,e);return this.$scope.isTouching=n,n&&(this._lastDropTouch=this.$element),this.updateDragStyles(n,i),n},t.prototype.updateDragStyles=function(t,e){t?(this.$element.addClass("pip-drag-enter"),e.addClass("pip-drag-over")):this._lastDropTouch==this.$element&&(this._lastDropTouch=null,this.$element.removeClass("pip-drag-enter"),e.removeClass("pip-drag-over"))},t.prototype.hitTest=function(t,e){var i=this.$element[0].getBoundingClientRect();return t-=this.$document[0].body.scrollLeft+this.$document[0].documentElement.scrollLeft,e-=this.$document[0].body.scrollTop+this.$document[0].documentElement.scrollTop,t>=i.left&&t<=i.right&&e<=i.bottom&&e>=i.top},t}(),o=function(t,e,i,o){return{restrict:"A",link:function(s,r,a){new n(t,e,i,o,s,r,a)}}};o.$inject=["$parse","$document","$timeout","pipDraggable"],angular.module("pipDraggable").directive("pipDrop",o)},{}],5:[function(t,e,i){var n=function(){function t(t){this.$element=t,this.initialize()}return t.prototype.initialize=function(){this.$element.attr("pip-draggable","false"),this.toggleListeners(!0)},t.prototype.toggleListeners=function(t){var e=this;t&&this.$element.on("mousedown touchstart touchmove touchend touchcancel",function(t){e.absorbEvent_(t)})},t.prototype.absorbEvent_=function(t){var e=t.originalEvent;return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1},t}(),o=function(){return{restrict:"A",link:function(t,e,i){new n(e)}}};angular.module("pipDraggable").directive("pipPreventDrag",o)},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipDraggable",[]),t("./DraggableService"),t("./Drag"),t("./Drop"),t("./PreventDrag"),t("./CancelDrag")},{"./CancelDrag":1,"./Drag":2,"./DraggableService":3,"./Drop":4,"./PreventDrag":5}],7:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$scope=t,this.$element=e,this.$timeout=n,this.$mdConstant=o,this.$window=s,this.opacityDelta=.4,this.opacityLimit=.5,e.on("keydown",function(t){r.keydownListener(t)}),n(function(){r.init()}),i.ngModel&&t.$watch("ngModel",function(){n(this.init)},!0),i.pipFocusedData&&t.$watch("pipFocusedData",function(){n(this.init)},!0)}return t.prototype.init=function(){var t=this,e=this.$scope.pipWithHidden&&this.$scope.pipWithHidden()?".pip-focusable":".pip-focusable:visible";this.onFocusClass=this.$scope.pipFocusedClass?this.$scope.pipFocusedClass():"",this.controls=this.$element.find(e),this.controlsLength=this.controls.length,this.checkTabindex(this.controls),this.controls.on("focus",function(e){var i=e.currentTarget;$(i).hasClass("md-focused")||(t.$scope.pipRebind&&t.$scope.pipRebind()&&t.init(),t.$element.addClass("pip-focused-container"),$(i).addClass(t.onFocusClass),t.$scope.pipFocusedOpacity&&t.$scope.pipFocusedOpacity()?$(i).addClass("md-focused md-focused-opacity"):(t.color=$(i).css("backgroundColor"),t.oldBackgroundColor=t.color,$(i).css("backgroundColor",t.rgba(t.color)),$(i).addClass("md-focused")))}).on("focusout",function(e){var i=e.currentTarget;$(i).hasClass("md-focused")&&(t.$element.removeClass("pip-focused-container"),$(i).removeClass(t.onFocusClass),t.$scope.pipFocusedOpacity&&t.$scope.pipFocusedOpacity()?$(i).removeClass("md-focused"):($(i).css("backgroundColor",t.oldBackgroundColor),$(i).removeClass("md-focused md-focused-opacity")))})},t.prototype.rgba=function(t){if(this.$scope.pipFocusedColor&&this.$scope.pipFocusedColor())return this.$scope.pipFocusedColor();var e=t.split("(")[1].split(")")[0].split(",");if(!e||e.length<3)return"";var i,n,o,s;return s=3==e.length?1:parseFloat(e[3]),i=e[0],n=e[1],o=e[2],s<this.opacityLimit?s+=this.opacityDelta:s-=this.opacityDelta,"rgba("+i+", "+n+", "+o+", "+s+")"},t.prototype.setTabindex=function(t,e){t.attr("tabindex",e)},t.prototype.checkTabindex=function(t){_.findIndex(t,function(t){return t.tabindex>-1})==-1&&t.length>0&&this.$scope.pipFocusedTabindex&&this.setTabindex(angular.element(t[0]),this.$scope.pipFocusedTabindex())},t.prototype.keydownListener=function(t){var e=t.which||t.keyCode;if(e==this.$mdConstant.KEY_CODE.LEFT_ARROW||e==this.$mdConstant.KEY_CODE.UP_ARROW||e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW){t.preventDefault();var i=e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW?1:-1,n=this.controls.index(this.controls.filter(".md-focused"))+i;n>=0&&n<this.controlsLength&&this.controls[n].focus()}},t}(),o=function(t,e,i){return{scope:{pipFocusedColor:"&?",pipFocusedClass:"&?",pipFocusedRebind:"&?",pipFocusedTabindex:"&?",pipFocusedOpacity:"&?",pipFocusedData:"&?",pipWithHidden:"&?",pipRebind:"&?"},link:function(o,s,r){new n(o,s,r,t,e,i)}}};o.$inject=["$timeout","$mdConstant","$window"],angular.module("pipFocused",[]).directive("pipFocused",o)},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),t("./unsaved_changes/unsavedChanges"),t("./shortcuts/index"),t("./focused/focused"),t("./draggable/index"),t("./selected/selected"),t("./infinite_scroll/infiniteScroll"),angular.module("pipBehaviors",["pipFocused","pipSelected","pipInfiniteScroll","pipUnsavedChanges","pipDraggable","pipShortcuts"]),function(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}(t("./shortcuts/index"))},{"./draggable/index":6,"./focused/focused":7,"./infinite_scroll/infiniteScroll":9,"./selected/selected":10,"./shortcuts/index":16,"./unsaved_changes/unsavedChanges":17}],9:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$rootScope=t,this.$window=e,this.$interval=i,this.$scope=n,this.$element=o,this.$attrs=s,this.THROTTLE_MILLISECONDS=500,this.checkWhenEnabled=null,this.scrollContainer=null,this.immediateCheck=!0,this.scrollDistance=null,this.scrollEnabled=null,this.unregisterEventListener=null,this.useDocumentBottom=!1,this.windowElement=null,this.windowElement=angular.element(e),this.onContainerScrollThrottle=_.throttle(function(){r.onContainerScroll()},this.THROTTLE_MILLISECONDS),n.$on("$destroy",function(){if(r.scrollContainer.unbind("scroll",function(){r.onContainerScrollThrottle()}),null!==r.unregisterEventListener)return r.unregisterEventListener(),r.unregisterEventListener=null}),n.$watch("pipScrollDistance",function(t){r.handleScrollDistance(t)}),this.handleScrollDistance(n.pipScrollDistance),n.$watch("pipScrollDisabled",function(t){r.handleScrollDisabled(t)}),this.handleScrollDisabled(n.pipScrollDisabled),n.$watch("pipScrollUseDocumentBottom",function(t){r.handleScrollUseDocumentBottom(t)}),this.handleScrollUseDocumentBottom(n.pipScrollUseDocumentBottom),this.changeContainer(this.windowElement),n.pipScrollListenForEvent&&(this.unregisterEventListener=t.$on(n.pipScrollListenForEvent,function(){r.onContainerScrollThrottle()})),n.$watch("pipScrollContainer",function(t){t!=r.scrollContainer&&r.handleScrollContainer(t)}),this.handleScrollContainer(n.pipScrollContainer||[]),null!==s.pipScrollParent&&this.changeContainer(angular.element(o.parent())),null!==s.pipScrolImmediateCheck&&(this.immediateCheck=n.$eval(s.pipScrolImmediateCheck)),i(function(){if(this.immediateCheck)return this.onContainerScrollThrottle()},0,1)}return t.prototype.height=function(t){return t=t[0]||t,isNaN(t.offsetHeight)?t.document.documentElement.clientHeight:t.offsetHeight},t.prototype.offsetTop=function(t){if(t[0].getBoundingClientRect&&!t.css("none"))return t[0].getBoundingClientRect().top+this.pageYOffset(t)},t.prototype.pageYOffset=function(t){return t=t[0]||t,isNaN(window.pageYOffset)?t.document.documentElement.scrollTop:t.ownerDocument.defaultView.pageYOffset},t.prototype.onContainerScroll=function(){var t,e,i,n,o,s=this;return this.scrollContainer===this.windowElement?(t=this.height(this.scrollContainer)+this.pageYOffset(this.scrollContainer[0].document.documentElement),i=this.offsetTop(this.$element)+this.height(this.$element)):(t=this.height(this.scrollContainer),e=0,void 0!==this.offsetTop(this.scrollContainer)&&(e=this.offsetTop(this.scrollContainer)),i=this.offsetTop(this.$element)-e+this.height(this.$element)),this.useDocumentBottom&&(i=this.height((this.$element[0].ownerDocument||this.$element[0].document).documentElement)),n=i-t,o=n<=this.height(this.scrollContainer)*this.scrollDistance+1,o?(this.checkWhenEnabled=!0,this.scrollEnabled?this.$scope.$$phase||this.$rootScope.$$phase?this.$scope.pipInfiniteScroll():this.$scope.$apply(function(){s.$scope.pipInfiniteScroll()}):void 0):this.checkWhenEnabled=!1},t.prototype.handleScrollDistance=function(t){return this.scrollDistance=parseFloat(t)||0},t.prototype.handleScrollDisabled=function(t){this.scrollEnabled=!t,this.scrollEnabled&&this.checkWhenEnabled&&(this.checkWhenEnabled=!1,this.onContainerScrollThrottle())},t.prototype.handleScrollUseDocumentBottom=function(t){return this.useDocumentBottom=t},t.prototype.changeContainer=function(t){var e=this;if(this.scrollContainer&&this.scrollContainer.unbind("scroll",function(){e.onContainerScrollThrottle()}),this.scrollContainer=t,t)return this.scrollContainer.bind("scroll",function(){e.onContainerScrollThrottle()})},t.prototype.handleScrollContainer=function(t){if(null!=t&&0!==t.length){if(t instanceof HTMLElement?t=angular.element(t):"function"==typeof t.append?t=angular.element(t[t.length-1]):"string"==typeof t&&(t=this.$element.parents().find(t)),null!=t&&(!Array.isArray(t)||Array.isArray(t)&&t.length>0))return this.changeContainer(t);throw new Error("Invalid pip-scroll-container attribute.")}},t}(),o=function(t,e,i){return{scope:{pipInfiniteScroll:"&",pipScrollContainer:"=",pipScrollDistance:"=",pipScrollDisabled:"=",pipScrollUseDocumentBottom:"=",pipScrollListenForEvent:"@"},link:function(o,s,r){new n(t,e,i,o,s,r)}}};o.$inject=["$rootScope","$window","$interval"],angular.module("pipInfiniteScroll",[]).directive("pipInfiniteScroll",o)},{}],10:[function(t,e,i){var n=function(){function t(t,e,i,n,o,s){var r=this;this.$mdConstant=e,this.$timeout=i,this.$scope=n,this.$element=o,this.$attrs=s,this.touchBoundary=10,this.tapdelay=200,this.tapTimeout=700,this.indexGetter=s.pipSelected?t(s.pipSelected):null,this.indexSetter=this.indexGetter?this.indexGetter.assign:null,this.idGetter=s.pipSelectedId?t(s.pipSelectedId):null,this.idSetter=this.idGetter?this.idGetter.assign:null,this.changeGetter=s.pipSelect?t(s.pipSelect):null,this.enterSpaceGetter=s.pipEnterSpacePress?t(s.pipEnterSpacePress):null,this.noScroll=s.pipNoScroll,this.modifier=s.pipSkipHidden?":visible":"",this.className=s.pipTreeList?".pip-selectable-tree":".pip-selectable",this.selectedIndex=this.indexGetter(n),this.currentElementTabinex=o.attr("tabindex"),this.pipSelectedWatch=s.pipSelectedWatch,this.isScrolled=!1,o.attr("tabindex",this.currentElementTabinex||0),o.on("click",this.className,function(t){r.onClickEvent(t)}),o.on("touchstart",this.className,function(t){r.onTouchStart(t)}),o.on("touchmove",this.className,function(t){r.onTouchMove(t)}),o.on("touchend",this.className,function(t){r.onTouchEnd(t)}),o.on("touchcancel",this.className,function(t){r.onTouchCancel(t)}),o.on("keydown",function(t){r.onKeyDown(t)}),o.on("focusin",function(t){r.onFocusIn(t)}),o.on("focusout",function(t){r.onFocusOut(t)}),s.pipTreeList?n.$watch(this.idGetter,function(t){i(function(){r.selectItem({itemId:t,raiseEvent:!0})},0)}):n.$watch(this.indexGetter,function(t){r.selectItem({itemIndex:t})}),this.pipSelectedWatch&&n.$watch(this.pipSelectedWatch,function(){i(function(){r.selectedIndex=r.indexGetter(n),r.selectItem({itemIndex:r.selectedIndex})},100)}),this.selectItem({itemIndex:this.selectedIndex,items:o.find(this.className)})}return t.prototype.selectItem=function(t){if(!this.isScrolled){var e=t.itemIndex,i=t.itemId,n=t.items||this.$element.find(this.className+this.modifier),o=n.length,s=function(){return t.item?t.item:(void 0===e&&e===-1&&(e=n.index(n.filter("[pip-id="+i+"]"))),e>=0&&e<o&&n[e])},r=t.raiseEvent;s=s(),s&&(this.$element.find(this.className).removeClass("selected md-focused"),s=angular.element(s).addClass("selected md-focused").focus(),this.noScroll||this.scrollToItem(s),r&&this.defineSelectedIndex(n))}},t.prototype.defineSelectedIndex=function(t){var e=this,i=this.selectedIndex;this.selectedIndex=-1;for(var n=0;n<t.length;n++)if($(t[n]).hasClass("selected")){this.selectedIndex=n;break}var o=function(){var i=angular.element(t[e.selectedIndex]),n=i.attr("pip-id");e.indexSetter&&e.indexSetter(e.$scope,e.selectedIndex),e.idSetter&&e.idSetter(e.$scope,n),s()},s=function(){var n=angular.element(t[e.selectedIndex]),o=n.attr("pip-id");e.changeGetter&&e.changeGetter(e.$scope,{$event:{target:e.$element,item:n,index:e.selectedIndex,id:o,newIndex:e.selectedIndex,oldIndex:i}})};i!=this.selectedIndex&&this.selectedIndex!==-1?this.$scope.$apply(function(){o()}):this.$scope.$apply(function(){s()})},t.prototype.scrollToItem=function(t){var e=this;if(!this.noScroll&&t.offset()){var i=this.$element.offset().top,n=this.$element.height(),o=i+n,s=t.offset().top,r=t.outerHeight(!0),a=s+r,c=this.$element.scrollTop();this.isScrolled=!0,this.$timeout(function(){e.isScrolled=!1},100),i>s?this.$element.scrollTop(c+s-i):o<a&&this.$element.scrollTop(c+a-o)}},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i},t.prototype.onClickEvent=function(t){this.selectItem({item:t.currentTarget,raiseEvent:!0})},t.prototype.onTouchStart=function(t){var e=t.originalEvent;if(e.targetTouches.length>1)return!0;var i=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0];return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=i,this.touchStartX=n.pageX,this.touchStartY=n.pageY,!0},t.prototype.onTouchMove=function(t){if(!this.trackingClick)return!0;var e=t.originalEvent;return(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},t.prototype.onTouchEnd=function(t){this.targetElement;if(!this.trackingClick)return!0;var e=t.originalEvent;return e.timeStamp-this.lastClickTime<this.tapdelay?(this.cancelNextClick=!0,!0):e.timeStamp-this.trackingClickStart>this.tapTimeout||(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.selectItem({item:t.currentTarget,raiseEvent:!0}),!1)},t.prototype.onTouchCancel=function(t){this.trackingClick=!1,this.targetElement=null},t.prototype.onKeyDown=function(t){var e=t.which||t.keyCode;if(e==this.$mdConstant.KEY_CODE.ENTER||e==this.$mdConstant.KEY_CODE.SPACE)t.preventDefault(),t.stopPropagation(),this.enterSpaceGetter&&this.enterSpaceGetter(this.$scope,{$event:{target:this.$element,index:this.selectedIndex,item:this.$element.find(".selected")}});else if(e==this.$mdConstant.KEY_CODE.LEFT_ARROW||e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.UP_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW){t.preventDefault(),t.stopPropagation();var i=this.$element.find(this.className+this.modifier),n=e==this.$mdConstant.KEY_CODE.RIGHT_ARROW||e==this.$mdConstant.KEY_CODE.DOWN_ARROW?1:-1,o=this.selectedIndex+n;this.selectItem({itemIndex:o,items:i,raiseEvent:!0})}},t.prototype.onFocusIn=function(t){var e,i=this.$element.find(this.className+".selected");i.addClass("md-focused"),0===i.length&&(this.selectedIndex=this.indexGetter(this.$scope),e=this.$element.find(this.className+this.modifier),this.selectItem({itemIndex:this.selectedIndex||0,items:e,raiseEvent:!0}))},t.prototype.onFocusOut=function(t){this.$element.find(this.className+".md-focused"+this.modifier).removeClass("md-focused")},t}(),o=function(t,e,i){return{restrict:"A",scope:!1,link:function(o,s,r){new n(t,e,i,o,s,r)}}};o.$inject=["$parse","$mdConstant","$timeout"],angular.module("pipSelected",[]).directive("pipSelected",o)},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();i.ShortcutItem=n;var o=function(){function t(){this.globalShortcuts=[],this.localShortcuts=[],this.defaultOptions=null}return t}();i.ShortcutsConfig=o},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t}();n.Keydown="keydown",n.Keyup="keyup",n.Keypress="keypress",i.KeyboardEvent=n;var o=function(){function t(){}return t}();i.ShortcutOptions=o;var s=function(){function t(t,e,i,n){"ngInject";var o=this;this.shift_nums={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},this.special_keys={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},this.modifiers={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}},this.target=t,this.shorcut=e,this.event=i.Type,this.option=i,this.callback=n,this.eventCallback=function(t){var e,i=t||window.event;if(o.option.DisableInInput){var n;if(i.target?n=i.target:i.srcElement&&(n=i.srcElement),3==n.nodeType&&(n=n.parentNode),"INPUT"==n.tagName||"TEXTAREA"==n.tagName)return}i.keyCode?e=i.keyCode:i.which&&(e=i.which);var s=String.fromCharCode(e).toLowerCase();188==e&&(s=","),190==e&&(s=".");var r=o.shorcut.split("+"),a=0;i.ctrlKey&&(o.modifiers.ctrl.pressed=i.ctrlKey),i.shiftKey&&(o.modifiers.shift.pressed=i.shiftKey),i.altKey&&(o.modifiers.alt.pressed=i.altKey),i.metaKey&&(o.modifiers.meta.pressed=i.metaKey);var c=0;for(c=0;c<r.length;c++){var l=r[c];"ctrl"==l||"control"==l?(a++,o.modifiers.ctrl.wanted=!0):"shift"==l?(a++,o.modifiers.shift.wanted=!0):"alt"==l?(a++,o.modifiers.alt.wanted=!0):"meta"==l?(a++,o.modifiers.meta.wanted=!0):l.length>1?o.special_keys[l]==e&&a++:o.option.Keycode?o.option.Keycode==e&&a++:s==l?a++:o.shift_nums[s]&&i.shiftKey&&(s=o.shift_nums[s])==l&&a++}if(a==r.length&&o.modifiers.ctrl.pressed==o.modifiers.ctrl.wanted&&o.modifiers.shift.pressed==o.modifiers.shift.wanted&&o.modifiers.alt.pressed==o.modifiers.alt.wanted&&o.modifiers.meta.pressed==o.modifiers.meta.wanted&&(o.callback(i),!o.option.Propagate))return i.cancelBubble=!0,i.returnValue=!1,i.stopPropagation&&(i.stopPropagation(),i.preventDefault()),!1;o.modifiers.ctrl.pressed=!1,o.modifiers.shift.pressed=!1,o.modifiers.alt.pressed=!1,o.modifiers.meta.pressed=!1}}return t.$inject=["element","shorcutCombination","option","callback"],t}();i.Shortcut=s},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./Shortcut"),o=function(){function t(t,e){"ngInject";this._shortcuts={},this._log=t,this._defaultOption=e?_.defaults(e,this.getDefaultOption()):this.getDefaultOption()}return t.$inject=["$log","option"],t.prototype.getDefaultOption=function(){return{Type:n.KeyboardEvent.Keydown,Propagate:!1,DisableInInput:!1,Target:document,Keycode:null}},Object.defineProperty(t.prototype,"shortcuts",{get:function(){return this._shortcuts},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e,i){this.remove(t);var o=i?_.defaults(i,this._defaultOption):this._defaultOption,s=t.toLowerCase(),r=o.Target;if(!(r="string"==typeof o.Target?document.getElementById(o.Target):o.Target))return void this._log.error("Register shortcut: element undentified!");if(!s)return void this._log.error("Register shortcut: shortcut combination undentified!");if(!e)return void this._log.error("Register shortcut: shorcut callback undentified!");var a=new n.Shortcut(r,s,o,e);this._shortcuts[s]=a,r.addEventListener?r.addEventListener(o.Type,a.eventCallback,!1):r.attachEvent?r.attachEvent("on"+o.Type,a.eventCallback):r.on(o.Type,a.eventCallback)},t.prototype.remove=function(t){var e=t.toLowerCase(),i=this._shortcuts[e];if(delete this._shortcuts[e],i){var n=i.event,o=i.target,s=i.eventCallback;o.detachEvent?o.detachEvent("on"+n,s):o.removeEventListener?o.removeEventListener(n,s,!1):o.off(n,s)}},t}(),s=function(){function t(){}return Object.defineProperty(t.prototype,"option",{get:function(){
return this._option},set:function(t){this._option=t||new n.ShortcutOptions},enumerable:!0,configurable:!0}),t.prototype.$get=["$log",function(t){"ngInject";return null==this._service&&(this._service=new o(t,this._option)),this._service}],t}();angular.module("pipShortcuts").provider("pipShortcutBinding",s)},{"./Shortcut":12}],14:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(t,e,i,n,o,s){"ngInject";var r=this;return e.pipShortcutAction?(this.actionShortcuts=o(e.pipShortcutAction),this.actionShortcuts(i,{$event:{}}),e.pipShortcutName&&_.isString(e.pipShortcutName)?(this.nameShortcuts=e.pipShortcutName,this.options=e.pipShorcutOptions?e.pipShorcutOptions:{},this.options.Target=t,void s.add(this.nameShortcuts,function(t){r.actionShortcuts(i,{$event:{e:t}})},this.options)):void n.error("Shortcut name does not set.")):void n.error("Shortcut action does not set.")}return t.$inject=["$element","$attrs","$scope","$log","$parse","pipShortcutBinding"],t.prototype.keypressShortcut=function(t){this.actionShortcuts()},t}(),o=function(){return{restrict:"A",scope:!1,controller:n}};angular.module("pipShortcuts").directive("pipShortcut",o)},{}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./IShortcutsService");i.ShortcutsChangedEvent="pipShortcutsChanged";var o=function(){function t(t,e,i,n,o,s){this.$rootScope=e,this.$window=i,this.$location=n,this.$injector=o,this.pipShortcutBinding=s,this._config=t,this._oldConfig=_.cloneDeep(this._config),this.addShortcuts(this._config.globalShortcuts),this.addShortcuts(this._config.localShortcuts)}return t.prototype.sendChangeEvent=function(){this.removeShortcuts(this._oldConfig.globalShortcuts),this.removeShortcuts(this._oldConfig.localShortcuts),this.addShortcuts(this.config.globalShortcuts),this.addShortcuts(this.config.localShortcuts),this.$rootScope.$emit(i.ShortcutsChangedEvent,this.config),this._oldConfig=_.cloneDeep(this.config)},t.prototype.removeShortcuts=function(t){var e=this;_.each(t,function(t){e.pipShortcutBinding.remove(t.shortcut)})},t.prototype.keypressShortcut=function(t,e){if(!t.access||!_.isFunction(t.access)||t.access(e)){if(t.keypress)return void t.keypress(e);if(t.href)return void(this.$window.location.href=t.href);if(t.url)return void this.$location.url(t.url);if(t.state){if(this.$injector.has("$state")){var i=this.$injector.get("$state");i.go(t.state,t.stateParams)}}else t.event?this.$rootScope.$broadcast(t.event):this.$rootScope.$broadcast("pipShortcutKeypress",t.shortcut)}},t.prototype.addShortcuts=function(t){var e=this,i=this.config.defaultOptions?this.config.defaultOptions:{};_.each(t,function(t){var n,o=t.options?t.options:i;n=t.target?t.target:t.targetId,o.Target=n,e.pipShortcutBinding.add(t.shortcut,function(i){e.keypressShortcut(t,i)},o)})},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._config.defaultOptions},set:function(t){this._config.defaultOptions=t||null,this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalShortcuts",{get:function(){return this._config.globalShortcuts},set:function(t){this._config.globalShortcuts=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localShortcuts",{get:function(){return this._config.localShortcuts},set:function(t){this._config.localShortcuts=t||[],this.sendChangeEvent()},enumerable:!0,configurable:!0}),t}(),s=function(){function t(){this._config=new n.ShortcutsConfig}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},set:function(t){this._config=t||new n.ShortcutsConfig},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultOptions",{get:function(){return this._config.defaultOptions},set:function(t){this._config.defaultOptions=t||null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"globalShortcuts",{get:function(){return this._config.globalShortcuts},set:function(t){this._config.globalShortcuts=t||[]},enumerable:!0,configurable:!0}),t.prototype.$get=["$rootScope","$window","$location","$injector","pipShortcutBinding",function(t,e,i,n,s){"ngInject";return null==this._service&&(this._service=new o(this._config,t,e,i,n,s)),this._service}],t}();angular.module("pipShortcuts").provider("pipShortcuts",s)},{"./IShortcutsService":11}],16:[function(t,e,i){"use strict";function n(t){for(var e in t)i.hasOwnProperty(e)||(i[e]=t[e])}Object.defineProperty(i,"__esModule",{value:!0}),angular.module("pipShortcuts",["ngMaterial","ui.router"]),t("./ShortcutBindingService"),t("./ShortcutsService"),t("./ShortcutDirective"),n(t("./IShortcutsService")),n(t("./ShortcutsService"))},{"./IShortcutsService":11,"./ShortcutBindingService":13,"./ShortcutDirective":14,"./ShortcutsService":15}],17:[function(t,e,i){var n=function(){function t(t,e){e.onbeforeunload=function(){if(t.unsavedChangesAvailable())return t.unsavedChangesMessage};var i=t.$on("$stateChangeStart",function(i){t.unsavedChangesAvailable()&&!e.confirm(t.unsavedChangesMessage)?(_.isFunction(t.cancelLeave)&&t.cancelLeave(),i.preventDefault()):_.isFunction(t.afterLeave)&&t.afterLeave()});t.$on("$destroy",function(){e.onbeforeunload=null,i()})}return t}(),o=function(t){return{restrict:"AE",scope:{unsavedChangesAvailable:"&pipUnsavedChangesAvailable",unsavedChangesMessage:"@pipUnsavedChangesMessage",afterLeave:"&pipUnsavedChangesAfterLeave",cancelLeave:"&pipUnsavedChangesCancelLeave"},link:function(e){new n(e,t)}}};o.$inject=["$window"],angular.module("pipUnsavedChanges",[]).directive("pipUnsavedChanges",o)},{}]},{},[8])(8)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).controls=t()}}(function(){return function t(e,o,i){function s(r,a){if(!o[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(n)return n(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var c=o[r]={exports:{}};e[r][0].call(c.exports,function(t){var o=e[r][1][t];return s(o?o:t)},c,c.exports,t,e,o,i)}return o[r].exports}for(var n="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t,e,o){var i={ngDisabled:"<?ngDisabled",colors:"<pipColors",currentColor:"=ngModel",colorChange:"&?ngChange"},s=(function(){function t(){}t}(),["purple","lightgreen","green","darkred","pink","yellow","cyan"]),n=function(){function t(t,e,o,i){this.$scope=t,this.$element=e,this.$timeout=i,this.class=o.class||""}return t.prototype.$onChanges=function(t){this.colors=t.colors&&_.isArray(t.colors.currentValue)&&0!==t.colors.currentValue.length?t.colors.currentValue:s,this.currentColor=this.currentColor||this.colors[0],this.currentColorIndex=this.colors.indexOf(this.currentColor),this.ngDisabled=t.ngDisabled.currentValue},t.prototype.selectColor=function(t){var e=this;this.ngDisabled||(this.currentColorIndex=t,this.currentColor=this.colors[this.currentColorIndex],this.$timeout(function(){e.$scope.$apply()}),this.colorChange&&this.colorChange())},t.prototype.enterSpacePress=function(t){this.selectColor(t.index)},t}(),r={bindings:i,templateUrl:"color_picker/ColorPicker.html",controller:n};angular.module("pipColorPicker",["pipControls.Templates"]).component("pipColorPicker",r)},{}],2:[function(t,e,o){function i(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}i.$inject=["$injector"],angular.module("pipControls.Translate",[]).filter("translate",i)},{}],3:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e,o,i,s,n,r){var a=this;this.$scope=t,this.$element=e,this.$attrs=o,this.$parse=i,this.$timeout=s,this.$interval=n,this.pipImageSlider=r,this._index=0,this.DEFAULT_INTERVAL=4500,this.swipeStart=0,this._type=this.type(),this._interval=this.interval(),this.slideTo=this.slideToPrivate,e.addClass("pip-image-slider"),e.addClass("pip-animation-"+this._type),this.setIndex(),s(function(){a._blocks=e.find(".pip-animation-block"),a._blocks.length>0&&$(a._blocks[0]).addClass("pip-show")}),this.startInterval(),this._throttled=_.throttle(function(){r.toBlock(a._type,a._blocks,a._index,a._newIndex,a._direction),a._index=a._newIndex,a.setIndex()},700),o.id&&r.registerSlider(o.id,t),t.$on("$destroy",function(){a.stopInterval(),r.removeSlider(o.id)})}return t.$inject=["$scope","$element","$attrs","$parse","$timeout","$interval","pipImageSlider"],t.prototype.nextBlock=function(){this.restartInterval(),this._newIndex=this._index+1===this._blocks.length?0:this._index+1,this._direction="next",this._throttled()},t.prototype.prevBlock=function(){this.restartInterval(),this._newIndex=this._index-1<0?this._blocks.length-1:this._index-1,this._direction="prev",this._throttled()},t.prototype.slideToPrivate=function(t){t===this._index||t>this._blocks.length-1||(this.restartInterval(),this._newIndex=t,this._direction=t>this._index?"next":"prev",this._throttled())},t.prototype.setIndex=function(){this.$attrs.pipImageIndex&&(this.sliderIndex=this._index)},t.prototype.startInterval=function(){var t=this;this._timePromises=this.$interval(function(){t._newIndex=t._index+1===t._blocks.length?0:t._index+1,t._direction="next",t._throttled()},Number(this._interval||this.DEFAULT_INTERVAL))},t.prototype.stopInterval=function(){this.$interval.cancel(this._timePromises)},t.prototype.restartInterval=function(){this.stopInterval(),this.startInterval()},t}(),s=function(){return{scope:{sliderIndex:"=pipImageIndex",type:"&pipAnimationType",interval:"&pipAnimationInterval"},bindToController:!0,controller:i,controllerAs:"vm"}};angular.module("pipImageSlider").directive("pipImageSlider",s)},{}],4:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t){this.$timeout=t,this.ANIMATION_DURATION=550,this._sliders={}}return t.$inject=["$timeout"],t.prototype.registerSlider=function(t,e){this._sliders[t]=e},t.prototype.removeSlider=function(t){delete this._sliders[t]},t.prototype.getSliderScope=function(t){return this._sliders[t]},t.prototype.nextCarousel=function(t,e){t.addClass("pip-next"),this.$timeout(function(){t.addClass("animated").addClass("pip-show").removeClass("pip-next"),e.addClass("animated").removeClass("pip-show")},100)},t.prototype.prevCarousel=function(t,e){this.$timeout(function(){t.addClass("animated").addClass("pip-show"),e.addClass("animated").addClass("pip-next").removeClass("pip-show")},100)},t.prototype.toBlock=function(t,e,o,i,s){var n=$(e[o]),r=i,a=$(e[r]);"carousel"===t?($(e).removeClass("pip-next").removeClass("pip-prev").removeClass("animated"),!s||"prev"!==s&&"next"!==s?i&&i<o?this.prevCarousel(a,n):this.nextCarousel(a,n):"prev"===s?this.prevCarousel(a,n):this.nextCarousel(a,n)):(n.addClass("animated").removeClass("pip-show"),a.addClass("animated").addClass("pip-show"))},t}();angular.module("pipImageSlider.Service",[]).service("pipImageSlider",i)},{}],5:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e){var o=this;t.on("click",function(){o.sliderId()&&o.direction()&&e.getSliderScope(o.sliderId()).vm[o.direction()+"Block"]()})}return t.$inject=["$element","pipImageSlider"],t}(),s=function(){return{scope:{direction:"&pipButtonType",sliderId:"&pipSliderId"},controllerAs:"$ctlr",bindToController:!0,controller:i}};angular.module("pipSliderButton",[]).directive("pipSliderButton",s)},{}],6:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e){var o=this;t.css("cursor","pointer"),t.on("click",function(){o.sliderId()&&void 0!==o.slideTo()&&e.getSliderScope(o.sliderId()).vm.slideTo(o.slideTo())})}return t.$inject=["$element","pipImageSlider"],t}(),s=function(){return{scope:{slideTo:"&pipSlideTo",sliderId:"&pipSliderId"},controllerAs:"$ctlr",bindToController:!0,controller:i}};angular.module("pipSliderIndicator",[]).directive("pipSliderIndicator",s)},{}],7:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),angular.module("pipImageSlider",["pipSliderButton","pipSliderIndicator","pipImageSlider.Service"]),t("./ImageSlider"),t("./ImageSliderService"),t("./SliderButton"),t("./SliderIndicator")},{"./ImageSlider":3,"./ImageSliderService":4,"./SliderButton":5,"./SliderIndicator":6}],8:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),t("./dependencies/TranslateFilter"),t("./color_picker/ColorPicker"),t("./image_slider"),t("./markdown/Markdown"),t("./popover"),t("./progress/RoutingProgress"),t("./toast"),angular.module("pipControls",["pipMarkdown","pipColorPicker","pipRoutingProgress","pipPopover","pipImageSlider","pipToasts","pipControls.Translate"])},{"./color_picker/ColorPicker":1,"./dependencies/TranslateFilter":2,"./image_slider":7,"./markdown/Markdown":9,"./popover":12,"./progress/RoutingProgress":13,"./toast":16}],9:[function(t,e,o){var i=function(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;e&&(e.setTranslations("en",{MARKDOWN_ATTACHMENTS:"Attachments:",checklist:"Checklist",documents:"Documents",pictures:"Pictures",location:"Location",time:"Time"}),e.setTranslations("ru",{MARKDOWN_ATTACHMENTS:"Вложения:",checklist:"Список",documents:"Документы",pictures:"Изображения",location:"Местонахождение",time:"Время"}))};i.$inject=["$injector"];var s={text:"<pipText",isList:"<?pipList",clamp:"<?pipLineCount",rebind:"<?pipRebind"},n=(function(){function t(){}t}(),function(){function t(t,e,o){this.$scope=t,this.$element=e,this._pipTranslate=o.has("pipTranslate")?o.get("pipTranslate"):null}return t.prototype.$postLink=function(){this.bindText(this.text),this.$scope.$on("pipWindowResized",function(){this.bindText&&this.bindText(this._text(this._$scope))}),this.$element.addClass("pip-markdown")},t.prototype.$onChanges=function(t){var e=t.text.currentValue;this.rebind&&(this.text=e,this.bindText(this.text))},t.prototype.describeAttachments=function(t){var e="",o=[];return _.each(t,function(t){t.type&&"text"!==t.type&&(0===e.length&&this._pipTranslate&&(e=this._pipTranslate.translate("MARKDOWN_ATTACHMENTS")),o.indexOf(t.type)<0&&(o.push(t.type),e+=o.length>1?", ":" ",this._pipTranslate&&(e+=this._pipTranslate.translate(t.type))))}),e},t.prototype.bindText=function(t){var e,o,i,s,n;_.isArray(t)?(n=_.find(t,function(t){return"text"===t.type&&t.text}),e=n?n.text:this.describeAttachments(t)):e=t,o=this.clamp&&_.isNumber(this.clamp),o=o&&e&&e.length>0,s={gfm:!0,tables:!0,breaks:!0,sanitize:!0,pedantic:!0,smartLists:!0,smartypents:!1},e=marked(e||"",s),o&&(i=1.5*Number(this.clamp)),this.$element.html("<div"+(o?this.isList?'class="pip-markdown-content pip-markdown-list" style="max-height: '+i+'em">':' class="pip-markdown-content" style="max-height: '+i+'em">':this.isList?' class="pip-markdown-list">':">")+e+"</div>"),this.$element.find("a").attr("target","blank"),!this.isList&&o&&this.$element.append('<div class="pip-gradient-block"></div>')},t}()),r={controller:n,bindings:s};angular.module("pipMarkdown",["ngSanitize"]).run(i).component("pipMarkdown",r)},{}],10:[function(t,e,o){var i={params:"<pipParams"},s=function(){function t(t,e,o,i,s,n){var r=this;this.$scope=t,this.$timeout=i,this.$compile=s,this.$templateRequest=n,this.backdropElement=$(".pip-popover-backdrop"),this.backdropElement.on("click keydown scroll",function(){r.backdropClick()}),this.backdropElement.addClass(this.params.responsive!==!1?"pip-responsive":""),i(function(){r.position(),angular.extend(t,r.params.locals),r.params.template?(r.content=s(r.params.template)(t),o.find(".pip-popover").append(r.content),r.init()):r.$templateRequest(r.params.templateUrl,!1).then(function(e){r.content=s(e)(t),o.find(".pip-popover").append(r.content),r.init()})}),i(function(){r.calcHeight()},200),e.$on("pipPopoverResize",function(){r.onResize()}),$(window).resize(function(){r.onResize()})}return t.prototype.backdropClick=function(){this.params.cancelCallback&&this.params.cancelCallback(),this.closePopover()},t.prototype.closePopover=function(){var t=this;this.backdropElement.removeClass("opened"),this.$timeout(function(){t.backdropElement.remove()},100)},t.prototype.onPopoverClick=function(t){t.stopPropagation()},t.prototype.init=function(){this.backdropElement.addClass("opened"),$(".pip-popover-backdrop").focus(),this.params.timeout&&this.$timeout(function(){this.closePopover()},this.params.timeout)},t.prototype.position=function(){if(this.params.element){var t=$(this.params.element),e=t.offset(),o=t.width(),i=t.height(),s=$(document).width(),n=$(document).height(),r=this.backdropElement.find(".pip-popover");e&&r.css("max-width",s-(s-e.left)).css("max-height",n-(e.top+i)-32,0).css("left",e.left-r.width()+o/2).css("top",e.top+i+16)}},t.prototype.onResize=function(){this.backdropElement.find(".pip-popover").find(".pip-content").css("max-height","100%"),this.position(),this.calcHeight()},t.prototype.calcHeight=function(){if(this.params.calcHeight!==!1){var t=this.backdropElement.find(".pip-popover"),e=t.find(".pip-title"),o=t.find(".pip-footer"),i=t.find(".pip-content"),s=t.height()-e.outerHeight(!0)-o.outerHeight(!0);i.css("max-height",Math.max(s,0)+"px").css("box-sizing","border-box")}},t}(),n={bindings:i,templateUrl:"popover/Popover.html",controller:s};angular.module("pipPopover").component("pipPopover",n)},{}],11:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e,o){this.$compile=t,this.$rootScope=e,this.$timeout=o,this.popoverTemplate="<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller' tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>"}return t.$inject=["$compile","$rootScope","$timeout"],t.prototype.show=function(t){var e,o,i,s;e=$("body"),e.find("md-backdrop").length>0||(this.hide(),o=this.$rootScope.$new(),i=t&&_.isObject(t)?t:{},o.params=i,o.locals=i.locals,s=this.$compile(this.popoverTemplate)(o),e.append(s))},t.prototype.hide=function(){var t=$(".pip-popover-backdrop");t.removeClass("opened"),this.$timeout(function(){t.remove()},100)},t.prototype.resize=function(){this.$rootScope.$broadcast("pipPopoverResize")},t}();angular.module("pipPopover.Service",[]).service("pipPopoverService",i)},{}],12:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),angular.module("pipPopover",["pipPopover.Service"]),t("./Popover"),t("./PopoverService")},{"./Popover":10,"./PopoverService":11}],13:[function(t,e,o){var i={showProgress:"&",logoUrl:"@"},s=function(){function t(t,e){this.$element=e}return t.prototype.$postLink=function(){this._image=this.$element.find("img"),this.loadProgressImage()},t.prototype.loadProgressImage=function(){this.logoUrl&&this._image.attr("src",this.logoUrl)},t}(),n={bindings:i,templateUrl:"progress/RoutingProgress.html",controller:s};angular.module("pipRoutingProgress",["ngMaterial"]).component("pipRoutingProgress",n)},{}],14:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(){}return t}();o.Toast=i},{}],15:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function t(t,e,o){this.$mdToast=t,this.toast=e,this._pipErrorDetailsDialog=o.has("pipErrorDetailsDialog")?o.get("pipErrorDetailsDialog"):null,this.message=e.message,this.actions=e.actions,0===e.actions.length?this.actionLenght=0:this.actionLenght=1===e.actions.length?e.actions[0].toString().length:null,this.showDetails=null!=this._pipErrorDetailsDialog}return t.prototype.onDetails=function(){this.$mdToast.hide(),this._pipErrorDetailsDialog&&this._pipErrorDetailsDialog.show({error:this.toast.error,ok:"Ok"},angular.noop,angular.noop)},t.prototype.onAction=function(t){this.$mdToast.hide({action:t,id:this.toast.id,message:this.message})},t}(),s=function(){function t(t,e){var o=this;this.$mdToast=e,this.SHOW_TIMEOUT=2e4,this.SHOW_TIMEOUT_NOTIFICATIONS=2e4,this.toasts=[],this.sounds={},t.$on("$stateChangeSuccess",function(){o.onStateChangeSuccess()}),t.$on("pipSessionClosed",function(){o.onClearToasts()}),t.$on("pipIdentityChanged",function(){o.onClearToasts()})}return t.$inject=["$rootScope","$mdToast"],t.prototype.showNextToast=function(){var t;this.toasts.length>0&&(t=this.toasts[0],this.toasts.splice(0,1),this.showToast(t))},t.prototype.showToast=function(t){var e=this;this.currentToast=t,this.$mdToast.show({templateUrl:"toast/Toast.html",hideDelay:t.duration||this.SHOW_TIMEOUT,position:"bottom left",controller:i,controllerAs:"vm",locals:{toast:this.currentToast,sounds:this.sounds}}).then(function(t){e.showToastOkResult(t)},function(t){e.showToastCancelResult(t)})},t.prototype.showToastCancelResult=function(t){this.currentToast.cancelCallback&&this.currentToast.cancelCallback(t),this.currentToast=null,this.showNextToast()},t.prototype.showToastOkResult=function(t){this.currentToast.successCallback&&this.currentToast.successCallback(t),this.currentToast=null,this.showNextToast()},t.prototype.addToast=function(t){this.currentToast&&"error"!==t.type?this.toasts.push(t):this.showToast(t)},t.prototype.removeToasts=function(t){var e=[];_.each(this.toasts,function(o){o.type&&o.type===t||e.push(o)}),this.toasts=_.cloneDeep(e)},t.prototype.removeToastsById=function(t){_.remove(this.toasts,{id:t})},t.prototype.getToastById=function(t){return _.find(this.toasts,{id:t})},t.prototype.onStateChangeSuccess=function(){},t.prototype.onClearToasts=function(){this.clearToasts(null)},t.prototype.showNotification=function(t,e,o,i,s){this.addToast({id:s||null,type:"notification",message:t,actions:e||["ok"],successCallback:o,cancelCallback:i,duration:this.SHOW_TIMEOUT_NOTIFICATIONS})},t.prototype.showMessage=function(t,e,o,i){this.addToast({id:i||null,type:"message",message:t,actions:["ok"],successCallback:e,cancelCallback:o})},t.prototype.showError=function(t,e,o,i,s){this.addToast({id:i||null,error:s,type:"error",message:t||"Unknown error.",actions:["ok"],successCallback:e,cancelCallback:o})},t.prototype.hideAllToasts=function(){this.$mdToast.cancel(),this.toasts=[]},t.prototype.clearToasts=function(t){t?this.removeToasts(t):(this.$mdToast.cancel(),this.toasts=[])},t}();angular.module("pipToasts").service("pipToasts",s)},{}],16:[function(t,e,o){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),angular.module("pipToasts",["ngMaterial","pipControls.Translate"]),t("./ToastService"),t("./Toast")},{"./Toast":14,"./ToastService":15}],17:[function(t,e,o){!function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("color_picker/colorPicker.html",'<ul class="pip-color-picker {{$ctrl.class}}" pip-selected="$ctrl.currentColorIndex" pip-enter-space-press="$ctrl.enterSpacePress($event)"><li tabindex="-1" ng-repeat="color in $ctrl.colors track by color"><md-button tabindex="-1" class="md-icon-button pip-selectable" ng-click="$ctrl.selectColor($index)" aria-label="color" ng-disabled="$ctrl.ngDisabled"><md-icon ng-style="{\'color\': color}" md-svg-icon="icons:{{ color == $ctrl.currentColor ? \'circle\' : \'radio-off\' }}"></md-icon></md-button></li></ul>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("progress/routingProgress.html",'<div class="layout-column layout-align-center-center" ng-show="$ctrl.showProgress()"><div class="loader"><svg class="circular" viewbox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10"></circle></svg></div><img src="" height="40" width="40" class="pip-img"><md-progress-circular md-diameter="96" class="fix-ie"></md-progress-circular></div>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("popover/popover.html",'<div class="pip-popover" ng-click="$ctrl.params.onPopoverClick($event)"></div>')}])}(),function(t){try{t=angular.module("pipControls.Templates")}catch(e){t=angular.module("pipControls.Templates",[])}t.run(["$templateCache",function(t){t.put("toast/toast.html",'<md-toast class="md-action pip-toast" ng-class="{\'pip-error\': vm.toast.type==\'error\', \'pip-column-toast\': vm.toast.actions.length > 1 || vm.actionLenght > 4, \'pip-no-action-toast\': vm.actionLenght == 0}" style="height:initial; max-height: initial;"><span class="flex-var pip-text" ng-bind-html="vm.message"></span><div class="layout-row layout-align-end-start pip-actions" ng-if="vm.actions.length > 0 || (vm.toast.type==\'error\' && vm.toast.error)"><div class="flex" ng-if="vm.toast.actions.length > 1"></div><md-button class="flex-fixed pip-toast-button" ng-if="vm.toast.type==\'error\' && vm.toast.error && vm.showDetails" ng-click="vm.onDetails()">Details</md-button><md-button class="flex-fixed pip-toast-button" ng-click="vm.onAction(action)" ng-repeat="action in vm.actions" aria-label="{{::action| translate}}">{{::action| translate}}</md-button></div></md-toast>')}])}()},{}]},{},[17,8])(17)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).dates=t()}}(function(){return function t(e,n,i){function a(r,s){if(!n[r]){if(!e[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(o)return o(r,!0);var m=new Error("Cannot find module '"+r+"'");throw m.code="MODULE_NOT_FOUND",m}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return a(n?n:t)},u,u.exports,t,e,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)a(i[r]);return a}({1:[function(t,e,n){!function(){var t={timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"<ngModel",ngChange:"<"},e=(function(){function t(){}return t}(),function(){function t(t,e){this.localeDate=moment.localeData(),this.momentMonths=angular.isArray(this.localeDate._months)?this.localeDate._months:this.localeDate._months.format,this.momentDays=angular.isArray(this.localeDate._weekdays)?this.localeDate._weekdays:this.localeDate._weekdays.format,this.momentShortDays=this.localeDate._weekdaysMin,this.momentFirstDayOfWeek=this.localeDate._week.dow;var n=this.model?_.isDate(this.model)?this.model:new Date(this.model):null;this.day=n?n.getDate():null,this.month=n?n.getMonth()+1:null,this.year=n?n.getFullYear():null,this.days=this.dayList(this.month,this.year),this.months=this.monthList(),this.years=this.yearList(),this.disableControls=!!this.disabled&&this.disabled()}return t.prototype.$onChanges=function(t){t.model&&t.model.currentValue&&(this.model=t.model.currentValue,this.getValue(this.model))},t.prototype.dayList=function(t,e){var n=31,i=[];4===t||6===t||9===t||11===t?n=30:2===t&&(n=e&&e%4===0?29:28);for(var a=1;a<=n;a++)i.push(a);return i},t.prototype.monthList=function(){for(var t=[],e=1;e<=12;e++)t.push({id:e,name:this.momentMonths[e-1]});return t},t.prototype.yearList=function(){var t=(new Date).getFullYear(),e="future"===this.timeMode?t:t-100,n="past"===this.timeMode?t:t+100,i=[];if("past"===this.timeMode)for(var a=n;a>=e;a--)i.push(a);else for(var a=e;a<=n;a++)i.push(a);return i},t.prototype.adjustDay=function(){var t=this.dayList(this.month,this.year);this.days.length!==t.length&&(this.day>t.length&&(this.day=t.length),this.days=t)},t.prototype.getValue=function(t){var e=t?_.isDate(t)?t:new Date(t):null,n=e?e.getDate():null,i=e?e.getMonth()+1:null,a=e?e.getFullYear():null;this.month!==i&&this.year!==a&&(this.days=this.dayList(this.month,this.year)),this.day=n,this.month=i,this.year=a},t.prototype.setValue=function(){var t;this.day&&this.month&&this.year&&(t=new Date(this.year,this.month-1,this.day,0,0,0,0),this.model=t,this.ngChange(this.model))},t.prototype.onMonthChanged=function(){this.adjustDay(),this.setValue()},t.prototype.onYearChanged=function(){this.adjustDay(),this.setValue()},t}()),n={bindings:t,templateUrl:"date/Date.html",controller:e};angular.module("pipDate",["pipDates.Templates"]).component("pipDate",n)}()},{}],2:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(){}return t}();a.Year="year",a.Month="month",a.Week="week",a.IsWeek="isoweek",a.Day="day",a.All=["year","month","week","isoweek","day"],function(){var t=function(){function t(t){this._momentRanged=a.All,this._defaultFormat="LL",this._config=t||{timeZone:null}}return t.prototype.isUndefinedOrNull=function(t){return angular.isUndefined(t)||null===t},t.prototype.getRange=function(t){if(this.isUndefinedOrNull(t))return a.Day;var e=this._momentRanged.indexOf(t);return e<0?a.Day:this._momentRanged[e]},t.prototype.getOperationRange=function(t){if(this.isUndefinedOrNull(t))return a.Day;var e=t==a.IsWeek?a.Week:t,n=this._momentRanged.indexOf(e);return n<0?a.Day:this._momentRanged[n]},t.prototype.formatDay=function(t,e){var n,i=moment.localeData().longDateFormat(e?e:this._defaultFormat),a=i.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"").replace(/M/g,"");return this.isUndefinedOrNull(t)?"":(n=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),n.isValid()?n.format(a):"")},t.prototype.formatMonthDay=function(t,e){var n,i=e?e:this._defaultFormat,a=moment.localeData().longDateFormat(i),o=a.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"");return this.isUndefinedOrNull(t)?"":(n=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),n.isValid()?n.format(o):"")},t.prototype.formatRange=function(t,e,n){var i,a;n?n:this._defaultFormat;if(i=this.isUndefinedOrNull(t)?null:void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),a=this.isUndefinedOrNull(e)?null:void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(e).utcOffset(this._config.timeZone):moment(e),null===i&&null===a)return"";if(null===i)return a.format(n);if(null===a||i.isSame(a))return i.format(n);if(i.isAfter(a))throw new Error("Date range error. Start localDate is more than end localDate.");return i.year()==a.year()?i.month()==a.month()?this.formatDay(i,n)+"-"+a.format(n):this.formatMonthDay(i,n)+"-"+a.format(n):i.format(n)+"-"+a.format(n)},t.prototype.toStartRange=function(t,e){var n;if(this.isUndefinedOrNull(t))throw new Error("toStartRange - date is undefined or null");if(n=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),!n.isValid())throw new Error("toStartRange - localDate is invalid");return n.startOf(e).toDate()},t.prototype.toEndRange=function(t,e,n){var i,a,o;return this.isUndefinedOrNull(t)?"":(angular.isNumber(n)||(o=0),i=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),i.isValid()?(a=o?i.startOf(e).add(o,"milliseconds"):i.startOf(e),i.startOf(e).toDate()):"")},t.prototype.toDateWithTime=function(t,e,n,i){var a,o,r;return this.isUndefinedOrNull(t)?"":(a=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),a.isValid()?(r=moment(),o=i?a.format(n)+" "+a.format(e):a.format(e)+" "+a.format(n)):"")},t.prototype.toTodayDate=function(t,e,n){var i,a,o;return this.isUndefinedOrNull(t)?"":(i=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),i.isValid()?(o=moment(),a=o.year()==i.year()&&o.month()==i.month()&&o.day()==i.day()?i.format(n):i.format(e)+" "+i.format(n)):"")},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.prototype.useTimeZone=function(t){this._config.timeZone=t},t.prototype.getDateJSON=function(t){return JSON.stringify(moment(t))},t.prototype.getNextStart=function(t,e){var n,i,a;return this.isUndefinedOrNull(t)?"":(n=moment(t),n.isValid()?(i=this.getRange(e),a=moment(n).startOf(i).add(this.getOperationRange(i)),a.toDate()):"")},t.prototype.getPrevStart=function(t,e){var n,i,a;if(this.isUndefinedOrNull(t))throw new Error("getPrevStart - date is undefined or null");if(n=moment(t),!n.isValid())throw new Error("getPrevStart - localDate is invalid");return i=this.getRange(e),a=moment(n).startOf(i).add(-1,this.getOperationRange(i)),a.toDate()},t.prototype.getNowStart=function(t){var e,n,i;if(e=moment(),!e.isValid())throw new Error("getNowStart - localDate is invalid");return n=this.getRange(t),i=moment(e).startOf(n),i.toDate()},t.prototype.addHours=function(t,e){var n;if(this.isUndefinedOrNull(t)||!angular.isNumber(e))throw new Error("addHours - date is undefined or null or hours is not a number");if(n=moment(t),!n.isValid())throw new Error("addHours - localDate is invalid");return n.add(e,"hours").toDate()},t.prototype.toStartDay=function(t){return this.toStartRange(t,a.Day)},t.prototype.toEndDay=function(t,e){return this.toEndRange(t,a.Day,e)},t.prototype.toStartWeek=function(t){return this.toStartRange(t,a.Week)},t.prototype.toEndWeek=function(t,e){return this.toEndRange(t,a.Week,e)},t.prototype.toStartMonth=function(t){return this.toStartRange(t,a.Month)},t.prototype.toEndMonth=function(t,e){return this.toEndRange(t,a.Month,e)},t.prototype.toStartYear=function(t){return this.toStartRange(t,a.Year)},t.prototype.toEndYear=function(t,e){return this.toEndRange(t,a.Year,e)},t}(),e=function(){function t(t){this._config={timeZone:null},this._localDatetime=t}return t.prototype.useTimeZone=function(t){return this._localDatetime.useTimeZone(t)},t.prototype.getDateJSON=function(t){return this._localDatetime.getDateJSON(t)},t.prototype.getNextStart=function(t,e){return this._localDatetime.getNextStart(t,e)},t.prototype.getPrevStart=function(t,e){return this._localDatetime.getPrevStart(t,e)},t.prototype.getNowStart=function(t){return this._localDatetime.getNowStart(t)},t.prototype.addHours=function(t,e){return this._localDatetime.addHours(t,e)},t.prototype.toStartDay=function(t){return this._localDatetime.toStartDay(t)},t.prototype.toEndDay=function(t,e){return this._localDatetime.toEndDay(t,e)},t.prototype.toStartWeek=function(t){return this._localDatetime.toStartWeek(t)},t.prototype.toEndWeek=function(t,e){return this._localDatetime.toEndWeek(t,e)},t.prototype.toStartMonth=function(t){return this._localDatetime.toStartMonth(t)},t.prototype.toEndMonth=function(t,e){return this._localDatetime.toEndMonth(t,e)},t.prototype.toStartYear=function(t){return this._localDatetime.toStartYear(t)},t.prototype.toEndYear=function(t,e){return this._localDatetime.toEndYear(t,e)},t}(),n=function(t){function n(){return t.call(this,{timeZone:null})||this}return i(n,t),n.prototype.$get=function(){"ngInject";return null==this._service&&(this._service=new e(this)),this._service},n}(t);angular.module("pipDate.Convert",[]).provider("pipDateConvert",n)}()},{}],3:[function(t,e,n){"use strict";function i(t){"ngInject";return function(e,n){return t.formatTime(e,n)}}function a(t){"ngInject";return function(e,n){return t.formatDateOptional(e,n)}}function o(t){"ngInject";return function(e){return t.formatLongDate(e)}}function r(t){"ngInject";return function(e){return t.formatShortDate(e)}}function s(t){"ngInject";return function(e){return t.formatMiddleDate(e)}}function l(t){"ngInject";return function(e){return t.formatMonth(e)}}function m(t){"ngInject";return function(e){return t.formatLongMonth(e)}}function u(t){"ngInject";return function(e){return t.formatYear(e)}}function h(t){"ngInject";return function(e){return t.formatWeek(e)}}function d(t){"ngInject";return function(e){return t.formatShortWeek(e)}}function c(t){"ngInject";return function(e){return t.formatShortDateTime(e)}}function p(t){"ngInject";return function(e){return t.formatMiddleDateTime(e)}}function f(t){"ngInject";return function(e){return t.formatLongDateTime(e)}}function g(t){"ngInject";return function(e,n){return t.formatShortDateLongTime(e,n)}}function D(t){"ngInject";return function(e,n){return t.formatMiddleDateLongTime(e,n)}}function y(t){"ngInject";return function(e,n){return t.formatLongDateLongTime(e,n)}}function T(t){"ngInject";return function(e,n){return t.bbFormatDateLongTime(e,n)}}function v(t){"ngInject";return function(e){return t.formatFullDateTime(e)}}function S(t){"ngInject";return function(e){return t.formatShortTime(e)}}function _(t){"ngInject";return function(e){return t.formatLongTime(e)}}function L(t){"ngInject";return function(e){return t.formatShortDayOfWeek(e)}}function M(t){"ngInject";return function(e){return t.formatLongDayOfWeek(e)}}function $(t){"ngInject";return function(e){return t.formatLongMonthDay(e)}}function k(t){"ngInject";return function(e){return t.formatShortMonthDay(e)}}function w(t){"ngInject";return function(e,n){return t.formatDateRange(e,n)}}function I(t){"ngInject";return function(e,n){return t.formatDateTimeRange(e,n)}}function b(t){"ngInject";return function(e){return t.formatISOWeek(e)}}function O(t){"ngInject";return function(e){return t.formatShortISOWeek(e)}}function W(t){"ngInject";return function(e){return t.formatISOWeekOrdinal(e)}}function j(t){"ngInject";return function(e){return t.formatDateY(e)}}function C(t){"ngInject";return function(e){return t.formatLongDateY(e)}}function E(t){"ngInject";return function(e){return t.formatTodayDateLongTimeLong(e)}}function R(t){"ngInject";return function(e){return t.formatTodayDateShortTimeLong(e)}}function F(t){"ngInject";return function(e){return t.formatTodayDateLongTimeShort(e)}}function N(t){"ngInject";return function(e){return t.formatTodayDateShortTimeShort(e)}}function x(t){"ngInject";return function(e){return t.formatMillisecondsToSeconds(e)}}function Y(t){"ngInject";return function(e,n){return t.formatElapsedInterval(e,n)}}function Z(t){"ngInject";return function(e){return t.getDateJSON(e)}}i.$inject=["pipDateFormat"],a.$inject=["pipDateFormat"],o.$inject=["pipDateFormat"],r.$inject=["pipDateFormat"],s.$inject=["pipDateFormat"],l.$inject=["pipDateFormat"],m.$inject=["pipDateFormat"],u.$inject=["pipDateFormat"],h.$inject=["pipDateFormat"],d.$inject=["pipDateFormat"],c.$inject=["pipDateFormat"],p.$inject=["pipDateFormat"],f.$inject=["pipDateFormat"],g.$inject=["pipDateFormat"],D.$inject=["pipDateFormat"],y.$inject=["pipDateFormat"],T.$inject=["pipDateFormat"],v.$inject=["pipDateFormat"],S.$inject=["pipDateFormat"],_.$inject=["pipDateFormat"],L.$inject=["pipDateFormat"],M.$inject=["pipDateFormat"],$.$inject=["pipDateFormat"],k.$inject=["pipDateFormat"],w.$inject=["pipDateFormat"],I.$inject=["pipDateFormat"],b.$inject=["pipDateFormat"],O.$inject=["pipDateFormat"],W.$inject=["pipDateFormat"],j.$inject=["pipDateFormat"],C.$inject=["pipDateFormat"],E.$inject=["pipDateFormat"],R.$inject=["pipDateFormat"],F.$inject=["pipDateFormat"],N.$inject=["pipDateFormat"],x.$inject=["pipDateFormat"],Y.$inject=["pipDateFormat"],Z.$inject=["pipDateConvert"],Object.defineProperty(n,"__esModule",{value:!0}),angular.module("pipDate.Filter",[]).filter("formatTime",i).filter("formatDateOptional",a).filter("bbFormatDateLongTime",T).filter("formatShortDate",r).filter("formatMiddleDate",s).filter("formatLongDate",o).filter("formatMonth",l).filter("formatLongMonth",m).filter("formatYear",u).filter("formatWeek",h).filter("formatShortWeek",d).filter("formatShortDateTime",c).filter("formatMiddleDateTime",p).filter("formatLongDateTime",f).filter("formatShortDateLongTime",g).filter("formatMiddleDateLongTime",D).filter("formatLongDateLongTime",y).filter("formatFullDateTime",v).filter("formatShortTime",S).filter("formatLongTime",_).filter("formatShortDayOfWeek",L).filter("formatLongDayOfWeek",M).filter("formatLongMonthDay",$).filter("formatShortMonthDay",k).filter("formatDateRange",w).filter("formatDateTimeRange",I).filter("formatISOWeek",b).filter("formatShortISOWeek",O).filter("formatISOWeekOrdinal",W).filter("formatDateY",j).filter("formatLongDateY",C).filter("formatTodayDateLongTimeLong",E).filter("formatTodayDateShortTimeLong",R).filter("formatTodayDateLongTimeShort",F).filter("formatTodayDateShortTimeShort",N).filter("formatMillisecondsToSeconds",x).filter("formatElapsedInterval",Y)},{}],4:[function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(n,"__esModule",{value:!0}),function(){var t=function(){function t(t){this._momentRanged=new Array("year","month","week","isoweek","day"),this._defaultFormat="LL",this._config=t||{timeZone:null}}return t.prototype.isUndefinedOrNull=function(t){return angular.isUndefined(t)||null===t},t.prototype.formatDateTime=function(t,e){var n,i;return this.isUndefinedOrNull(t)?"":(n=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),n.isValid()?(i=e?e:this._defaultFormat,n.format(i)):"")},t.prototype.formatDateTimeY=function(t,e){var n,i,a;return this.isUndefinedOrNull(t)?"":(n=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),n.isValid()?(i=moment(),a=moment.localeData().longDateFormat(e?e:this._defaultFormat),i.year()==n.year()&&(a=a.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"")),n.format(a)):"")},t.prototype.formatDay=function(t,e){var n,i=moment.localeData().longDateFormat(e?e:this._defaultFormat),a=i.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"").replace(/M/g,"");return this.isUndefinedOrNull(t)?"":(n=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),n.isValid()?n.format(a):"")},t.prototype.formatMonthDay=function(t,e){var n,i=e?e:this._defaultFormat,a=moment.localeData().longDateFormat(i),o=a.replace(/Y/g,"").replace(/^\W|\W$|\W\W/,"");return this.isUndefinedOrNull(t)?"":(n=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),n.isValid()?n.format(o):"")},t.prototype.formatRange=function(t,e,n){var i,a;n?n:this._defaultFormat;if(i=this.isUndefinedOrNull(t)?null:void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),a=this.isUndefinedOrNull(e)?null:void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(e).utcOffset(this._config.timeZone):moment(e),null===i&&null===a)return"";if(null===i)return a.format(n);if(null===a||i.isSame(a))return i.format(n);if(i.isAfter(a))throw new Error("Date range error. Start date is more than end date.");return i.year()==a.year()?i.month()==a.month()?this.formatDay(i,n)+"-"+a.format(n):this.formatMonthDay(i,n)+"-"+a.format(n):i.format(n)+"-"+a.format(n)},t.prototype.toDateWithTime=function(t,e,n,i){var a,o,r;return this.isUndefinedOrNull(t)?"":(a=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),a.isValid()?(r=moment(),o=i?a.format(n)+" "+a.format(e):a.format(e)+" "+a.format(n)):"")},t.prototype.toTodayDate=function(t,e,n){var i,a,o;return this.isUndefinedOrNull(t)?"":(i=void 0!=this._config.timeZone&&null!=this._config.timeZone?moment(t).utcOffset(this._config.timeZone):moment(t),i.isValid()?(o=moment(),a=o.year()==i.year()&&o.month()==i.month()&&o.day()==i.day()?i.format(n):i.format(e)+" "+i.format(n)):"")},Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),t.prototype.useTimeZone=function(t){this._config.timeZone=t},t.prototype.formatTime=function(t,e){return this.formatDateTime(t,"LLL")},t.prototype.formatDateOptional=function(t,e){return this.formatDateTime(t,"L")},t.prototype.formatShortDate=function(t){return this.formatDateTime(t,"L")},t.prototype.bbFormatDateLongTime=function(t,e){return this.toDateWithTime(t,"MM/DD/YY","LTS",e)},t.prototype.formatMiddleDate=function(t){return this.formatDateTime(t,"ll")},t.prototype.formatLongDate=function(t){return this.formatDateTime(t,"LL")},t.prototype.formatMonth=function(t){return this.formatDateTime(t,"MM")},t.prototype.formatLongMonth=function(t){return this.formatDateTime(t,"MMMM")},t.prototype.formatYear=function(t){return this.formatDateTime(t,"YYYY")},t.prototype.formatWeek=function(t){return this.formatDateTime(t,"ww")},t.prototype.formatShortWeek=function(t){return this.formatDateTime(t,"w")},t.prototype.formatShortDateTime=function(t){return this.toDateWithTime(t,"L","LT")},t.prototype.formatMiddleDateTime=function(t){return this.formatDateTime(t,"lll")},t.prototype.formatLongDateTime=function(t){return this.formatDateTime(t,"LLL")},t.prototype.formatFullDateTime=function(t){return this.formatDateTime(t,"LLLL")},t.prototype.formatShortDateLongTime=function(t,e){return this.toDateWithTime(t,"L","LTS",e)},t.prototype.formatMiddleDateLongTime=function(t,e){return this.toDateWithTime(t,"ll","LTS",e)},t.prototype.formatLongDateLongTime=function(t,e){return this.toDateWithTime(t,"LL","LTS",e)},t.prototype.formatShortTime=function(t){return this.formatDateTime(t,"LT")},t.prototype.formatLongTime=function(t){return this.formatDateTime(t,"LTS")},t.prototype.formatShortDayOfWeek=function(t){return this.formatDateTime(t,"dd")},t.prototype.formatLongDayOfWeek=function(t){return this.formatDateTime(t,"dddd")},t.prototype.formatLongMonthDay=function(t){return this.formatMonthDay(t,"LL")},t.prototype.formatShortMonthDay=function(t){return this.formatMonthDay(t,"L")},t.prototype.formatDateRange=function(t,e){return this.formatRange(t,e,"LL")},t.prototype.formatDateTimeRange=function(t,e){return this.formatRange(t,e,"LLL")},t.prototype.formatISOWeek=function(t){return this.formatDateTime(t,"WW")},t.prototype.formatShortISOWeek=function(t){return this.formatDateTime(t,"W")},t.prototype.formatISOWeekOrdinal=function(t){return this.formatDateTime(t,"Wo")},t.prototype.formatDateY=function(t){return this.formatDateTimeY(t,"L")},t.prototype.formatLongDateY=function(t){return this.formatDateTimeY(t,"LL")},t.prototype.formatTodayDateLongTimeLong=function(t){return this.toTodayDate(t,"LL","LTS")},t.prototype.formatTodayDateShortTimeLong=function(t){return this.toTodayDate(t,"LL","LTS")},t.prototype.formatTodayDateLongTimeShort=function(t){return this.toTodayDate(t,"LL","LT")},t.prototype.formatTodayDateShortTimeShort=function(t){return this.toTodayDate(t,"ll","LT")},t.prototype.formatMillisecondsToSeconds=function(t){return""},t.prototype.formatElapsedInterval=function(t,e){var n,i;return this.isUndefinedOrNull(t)?"":(i=this.isUndefinedOrNull(e)?moment():moment(e),n=moment(t),n.isValid()&&i.isValid()?moment(n).fromNow(i):"")},t.prototype.getDateJSON=function(t){return JSON.stringify(moment(t))},t}(),e=function(){function t(t){this._config={timeZone:null},this._datetime=t}return t.prototype.useTimeZone=function(t){return this._datetime.useTimeZone(t)},t.prototype.formatTime=function(t,e){return this._datetime.formatTime(t,e)},t.prototype.formatDateOptional=function(t,e){return this._datetime.formatDateOptional(t,e)},t.prototype.formatShortDate=function(t){return this._datetime.formatShortDate(t)},t.prototype.formatMiddleDate=function(t){return this._datetime.formatMiddleDate(t)},t.prototype.formatLongDate=function(t){return this._datetime.formatLongDate(t)},t.prototype.formatMonth=function(t){return this._datetime.formatMonth(t)},t.prototype.formatLongMonth=function(t){return this._datetime.formatLongMonth(t)},t.prototype.formatYear=function(t){return this._datetime.formatYear(t)},t.prototype.formatWeek=function(t){return this._datetime.formatWeek(t)},t.prototype.formatShortWeek=function(t){return this._datetime.formatShortWeek(t)},t.prototype.formatShortDateTime=function(t){return this._datetime.formatShortDateTime(t)},t.prototype.formatMiddleDateTime=function(t){return this._datetime.formatMiddleDateTime(t)},t.prototype.formatLongDateTime=function(t){return this._datetime.formatLongDateTime(t)},t.prototype.formatFullDateTime=function(t){return this._datetime.formatFullDateTime(t)},t.prototype.formatShortDateLongTime=function(t,e){return this._datetime.formatShortDateLongTime(t,e)},t.prototype.formatMiddleDateLongTime=function(t,e){return this._datetime.formatMiddleDateLongTime(t,e)},t.prototype.formatLongDateLongTime=function(t,e){return this._datetime.formatLongDateLongTime(t,e)},t.prototype.bbFormatDateLongTime=function(t,e){return this._datetime.bbFormatDateLongTime(t,e)},t.prototype.formatShortTime=function(t){return this._datetime.formatShortTime(t)},t.prototype.formatLongTime=function(t){return this._datetime.formatLongTime(t)},t.prototype.formatShortDayOfWeek=function(t){return this._datetime.formatShortDayOfWeek(t)},t.prototype.formatLongDayOfWeek=function(t){return this._datetime.formatLongDayOfWeek(t)},t.prototype.formatLongMonthDay=function(t){return this._datetime.formatLongMonthDay(t)},t.prototype.formatShortMonthDay=function(t){return this._datetime.formatShortMonthDay(t)},t.prototype.formatDateRange=function(t,e){return this._datetime.formatDateRange(t,e)},t.prototype.formatDateTimeRange=function(t,e){return this._datetime.formatDateTimeRange(t,e)},t.prototype.formatISOWeek=function(t){return this._datetime.formatISOWeek(t)},t.prototype.formatShortISOWeek=function(t){return this._datetime.formatShortISOWeek(t)},t.prototype.formatISOWeekOrdinal=function(t){return this._datetime.formatISOWeekOrdinal(t)},t.prototype.formatDateY=function(t){return this._datetime.formatDateY(t)},t.prototype.formatLongDateY=function(t){return this._datetime.formatLongDateY(t)},t.prototype.formatTodayDateLongTimeLong=function(t){return this._datetime.formatTodayDateLongTimeLong(t)},t.prototype.formatTodayDateShortTimeLong=function(t){return this._datetime.formatTodayDateShortTimeLong(t)},t.prototype.formatTodayDateLongTimeShort=function(t){return this._datetime.formatTodayDateLongTimeShort(t)},t.prototype.formatTodayDateShortTimeShort=function(t){return this._datetime.formatTodayDateShortTimeShort(t)},t.prototype.formatMillisecondsToSeconds=function(t){return this._datetime.formatMillisecondsToSeconds(t)},t.prototype.formatElapsedInterval=function(t,e){return this._datetime.formatElapsedInterval(t,e)},t.prototype.getDateJSON=function(t){return this._datetime.getDateJSON(t)},t}(),n=function(t){function n(){return t.call(this,{timeZone:null})||this}return i(n,t),n.prototype.$get=function(){"ngInject";return null==this._service&&(this._service=new e(this)),this._service},n}(t);angular.module("pipDate.Format",[]).provider("pipDateFormat",n)}()},{}],5:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t}();n.DateTimeConfig=i},{}],6:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(){}return t}();n.DateTimeConfig=i},{}],7:[function(t,e,n){angular.module("pipDate.Common",["pipDate.Convert","pipDate.Format","pipDate.Filter"])},{}],8:[function(t,e,n){!function(){var t={timeMode:"@pipTimeMode",disabled:"&ngDisabled",model:"=ngModel",pipChanged:"&",type:"@pipDateRangeType",pipDateFormat:"@",pipNoLine:"@"},e=(function(){function t(){}return t}(),function(){function t(t,e,n,i,a,o){var r=this;this.$mdMedia=t,this.$timeout=e,this.prevState={},this.currentState={},this.localeDate=moment.localeData(),this.momentMonths=angular.isArray(this.localeDate._months)?this.localeDate._months:this.localeDate._months.standalone,this.momentDays=angular.isArray(this.localeDate._weekdays)?this.localeDate._weekdays:this.localeDate._weekdays.format,this.momentShortDays=this.localeDate._weekdaysMin,this.momentFirstDayOfWeek=this.localeDate._week.dow,this.currentDate=new Date,this.currentYear=this.currentDate.getUTCFullYear(),this.currentMonth=this.currentDate.getUTCMonth()+1,this.currentDay=this.currentDate.getUTCDate(),this.init(),this.disableControls=!!this.disabled&&this.disabled(),n.$watch("$ctrl.type",function(t,e){t!==e&&e&&r.init()})}return t.prototype.$onChanges=function(t){t.type&&t.type.currentValue&&(this.type=t.type.currentValue,this.init())},t.prototype.onMonthChanged=function(){if("weekly"===this.type){var t=void 0,e=void 0;t=new Date(Date.UTC(this.year,this.month-1,1)),e=t.getUTCDay()?t.getUTCDay():7,this.week=this.getWeekByDate(e,this.month-1,this.year),this.correctWeek(),this.adjustWeek()}else this.adjustDay();this.setValue()},t.prototype.onYearChanged=function(){var t,e;t=new Date(Date.UTC(this.year,this.month-1,1)),e=t.getUTCDay()?t.getUTCDay():7,"weekly"===this.type?(this.week=this.getWeekByDate(e,this.month-1,this.year),this.adjustWeek(),this.correctWeek()):this.adjustDay(),this.setValue()},t.prototype.onWeekChange=function(){"weekly"===this.type?(this.adjustWeek(),this.correctWeek()):this.adjustDay(),this.setValue()},t.prototype.isDay=function(){return"daily"===this.type},t.prototype.isWeek=function(){return"weekly"===this.type},t.prototype.isMonth=function(){return"daily"===this.type||"weekly"===this.type||"monthly"===this.type},t.prototype.onChange=function(){var t=this;this.pipChanged&&this.$timeout(function(){t.pipChanged()},0)},t.prototype.setCurrent=function(){this.currentState.day=this.day,this.currentState.month=this.month,this.currentState.year=this.year,this.currentState.week=this.week,this.currentState.dateRangeType=this.type,this.currentState.model=this.model},t.prototype.fillLists=function(){this.days=this.dayList(this.month,this.year),this.weeks=this.weekList(this.month,this.year),this.months=this.monthList(),this.shortMonths=this.monthList(),this.years=this.yearList()},t.prototype.correctWeek=function(){(!this.prevState.model||this.prevState.model&&this.prevState.model.getTime()>=this.model.getTime())&&this.weeks&&this.weeks[this.week]&&this.weeks[this.week].id<=0&&(this.month<12?this.month+=1:(this.month=1,this.year+=1),this.fillLists())},t.prototype.init=function(){var t;t=this.model?new Date(this.model):null,this.day=t?t.getUTCDate():null,this.month=t?t.getUTCMonth()+1:null,this.year=t?t.getUTCFullYear():null,this.week=t?this.getWeekByDate(this.day,this.month-1,this.year):null,this.fillLists(),"weekly"===this.type&&this.correctWeek(),this.adjustWeek(),this.setValue()},t.prototype.onYearClick=function(){this.year||(this.year=this.currentYear)},t.prototype.onMonthClick=function(){this.month||(this.month=this.currentMonth)},t.prototype.onDayClick=function(){this.year||(this.day=this.currentDay)},t.prototype.getCountDay=function(t,e){var n=31;if(4===t||6===t||9===t||11===t)return n=30;if(2===t){if(e)return n=e%4===0?29:28;n=28}return n},t.prototype.dayList=function(t,e){var n,i;n=this.getCountDay(t,e),this.nameDays=[],i=[];for(var a=1;a<=n;a++)i.push(a),this.nameDays.push(this.momentShortDays[moment([e,t-1,a]).weekday()]);return i},t.prototype.getWeekByDate=function(t,e,n){var i,a,o;return i=new Date(Date.UTC(n,e,t)),a=i.getUTCDay()?i.getUTCDay():7,o=1===a?t:t+1-a},t.prototype.getWeek=function(t,e,n){var i,a;return i=t+6>e?e-t-6:t+6,a=t>0?t:n+t,a.toString()+" - "+Math.abs(i).toString()},t.prototype.weekList=function(t,e){var n,i,a,o;for(n=[],i=this.getCountDay(t,e),o=this.getWeekByDate(1,t-1,e),a=t-1?this.getCountDay(t-1,e):this.getCountDay(12,e-1);o<i+1;)n.push({id:o,name:this.getWeek(o,i,a)}),o+=7;return n},t.prototype.monthList=function(){for(var t=[],e=1;e<=12;e++)t.push({id:e,name:this.momentMonths[e-1]});return t},t.prototype.yearList=function(){var t,e,n=[];switch(this.timeMode){case"future":t=this.currentYear,e=this.currentYear+100;break;case"past":t=this.currentYear-100,e=this.currentYear;break;case"now":t=this.currentYear-50,e=this.currentYear+100;break;default:t=this.currentYear-50,e=this.currentYear+50}if("future"===this.timeMode)for(var i=t;i<=e;i++)n.push(i);else for(var i=e;i>=t;i--)n.push(i);return n},t.prototype.adjustDay=function(){var t=this.dayList(this.month,this.year);switch(this.type){case"monthly":this.day=1;break;case"yearly":this.month=1,this.day=1;break;default:this.days.length!==t.length&&this.day>t.length&&(this.day=t.length)}this.days=t},t.prototype.adjustWeek=function(){var t=this.weekList(this.month,this.year);this.week=this.getWeekByDate(this.week,this.month-1,this.year),this.weeks=t},t.prototype.getValue=function(t){var e,n,i,a,o;e=t?new Date(t):null,n=e?e.getUTCDate():null,i=e?e.getUTCMonth()+1:null,a=e?e.getUTCFullYear():null,o=e?this.getWeekByDate(n,i-1,a):null,this.day===n&&this.month===i&&this.year===a&&this.week===o||(this.day=n,this.month=i,this.year=a,this.week=o,this.days=this.dayList(this.month,this.year),this.weeks=this.weekList(this.month,this.year))},t.prototype.setValue=function(){
var t;"weekly"===this.type?(t=new Date(this.year,this.month-1,this.week,0,0,0,0),t=new Date(t.getTime()-6e4*t.getTimezoneOffset()),this.model=t):(t=new Date(this.year,this.month-1,this.day,0,0,0,0),t=new Date(t.getTime()-6e4*t.getTimezoneOffset()),this.model=t),this.prevState=_.cloneDeep(this.currentState),this.setCurrent(),this.onChange()},t}()),n={bindings:t,templateUrl:"date_range/DateRange.html",controller:e};angular.module("pipDateRange",["pipDates.Templates"]).component("pipDateRange",n)}()},{}],9:[function(t,e,n){function i(t){var e=t.has("pipTranslate")?t.get("pipTranslate"):null;return function(t){return e?e.translate(t)||t:t}}i.$inject=["$injector"],angular.module("pipDates.Translate",[]).filter("translate",i)},{}],10:[function(t,e,n){angular.module("pipDates",["pipDate","pipDate.Common","pipTimeRange","pipTimeRangeEdit","pipDateRange","pipDates.Translate"])},{}],11:[function(t,e,n){!function(){var t=function(){function t(){}return t}(),e={start:"<pipStartDate",end:"<pipEndDate"},n=(function(){function t(){}return t}(),function(){function e(e,n,i){this.data=new t,this.defineStartDate(),this.defineEndDate(),i.addClass("pip-time-range")}return e.prototype.$onChanges=function(t){t.start&&t.start.currentValue&&(this.data.start=null,this.defineStartDate()),t.end&&t.end.currentValue&&(this.data.end=null,this.defineEndDate())},e.prototype.getDateJSON=function(t){return t?new Date(t):null},e.prototype.defineStartDate=function(){null!==this.start&&void 0!==this.start&&(this.data.start=_.isDate(this.start)?this.start:this.getDateJSON(this.start))},e.prototype.defineEndDate=function(){null!==this.end&&void 0!==this.end&&(this.data.end=_.isDate(this.end)?this.end:this.getDateJSON(this.end))},e.prototype.toBoolean=function(t){return null!=t&&(!!t&&(t=t.toString().toLowerCase(),"1"==t||"true"==t))},e}()),i={bindings:e,templateUrl:"time_range/TimeRange.html",controller:n};angular.module("pipTimeRange",[]).component("pipTimeRange",i)}()},{}],12:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.IntervalTimeRange=30,n.MinutesInHour=60,n.HoursInDay=24,n.MillisecondsInSecond=1e3;var i=function(){function t(){this.bind=!1}return t}(),a={pipStartDate:"<",pipChanged:"=",pipEndDate:"<",pipStartLabel:"@",pipEndLabel:"@",disabled:"&ngDisabled",pipHideTime:"=",pipSize:"="},o=(function(){function t(){}return t}(),function(){function t(t,e,n,a){this.$injector=t,this.pipDateConvert=e,this.$scope=n,this.startLabel="Start time",this.endLabel="End time",this.translate(),this.intervalTimeCollection=this.getTimeInterval(),this.data=new i,this.initDate(),this.defineDate(),a.addClass("pip-time-range-edit")}return t.prototype.$onChanges=function(t){t.pipStartDate&&t.pipStartDate.currentValue&&(this.pipStartDate=t.pipStartDate.currentValue,this.initDate(),this.defineDate()),t.pipEndDate&&t.pipEndDate.currentValue&&(this.pipEndDate=t.pipEndDate.currentValue,this.initDate(),this.defineDate())},t.prototype.translate=function(){var t=this.$injector.has("pipTranslate")?this.$injector.get("pipTranslate"):null;t&&(t.setTranslations("en",{EVENT_NEW_START_TIME:"Start time",EVENT_NEW_END_TIME:"End time"}),t.setTranslations("ru",{EVENT_NEW_START_TIME:"Начало",EVENT_NEW_END_TIME:"Конец"}),this.startLabel=this.pipStartLabel?t.translate(this.pipStartLabel):t.translate("EVENT_NEW_START_TIME"),this.endLabel=this.pipEndLabel?t.translate(this.pipEndLabel):t.translate("EVENT_NEW_END_TIME"))},t.prototype.getDateJSON=function(t){return t?new Date(t):null},t.prototype.setDuration=function(){var t,e;return this.data.startDate&&this.data.endDate?(t=new Date(this.data.startDate.getTime()+this.data.startTime*n.MinutesInHour*n.MillisecondsInSecond),e=new Date(this.data.endDate.getTime()+this.data.endTime*n.MinutesInHour*n.MillisecondsInSecond),e-t):null},t.prototype.validateStartDate=function(){var t,e,i,a,o;return this.data.startDate?((_.isUndefined(this.data.startTime)||_.isNull(this.data.startTime))&&(this.data.endTime?this.data.startTime=0===this.data.endTime?0:this.data.endTime-n.IntervalTimeRange:(e=new Date,o=t.getTime()-this.pipDateConvert.toStartDay(t),this.data.startTime=Math.floor(o/(n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond))*n.IntervalTimeRange)),e=new Date(this.data.startDate.getTime()+this.data.startTime*n.MinutesInHour*n.MillisecondsInSecond),this.data.duration?(i=new Date(e.getTime()+this.data.duration),this.data.endDate=this.pipDateConvert.toStartDay(i),a=i.getTime()-this.data.endDate.getTime(),this.data.endTime=Math.floor(a/(n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond))*n.IntervalTimeRange):(i=new Date(this.data.endDate.getTime()+this.data.endTime*n.MinutesInHour*n.MillisecondsInSecond),e>=i&&(this.data.endDate=this.pipDateConvert.toStartDay(new Date(e.getTime()+n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond)),this.data.endTime=(this.data.startTime+n.IntervalTimeRange)%(n.HoursInDay*n.MinutesInHour))),void(this.data.startTime=Math.round(this.data.startTime/n.IntervalTimeRange)*n.IntervalTimeRange)):void(this.data.startTime=null)},t.prototype.validateEndDate=function(){var t,e,i;return this.data.endDate?((_.isUndefined(this.data.endTime)||_.isNull(this.data.endTime))&&(this.data.startTime?this.data.endTime=this.data.startTime===n.HoursInDay*n.MinutesInHour-n.IntervalTimeRange?n.HoursInDay*n.MinutesInHour-n.IntervalTimeRange:this.data.startTime+n.IntervalTimeRange:(t=new Date,t=t.getTime()-this.pipDateConvert.toStartDay(t),this.data.endTime=Math.floor(t/(n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond))*n.IntervalTimeRange)),e=new Date(this.data.startDate.getTime()+this.data.startTime*n.MinutesInHour*n.MillisecondsInSecond),i=new Date(this.data.endDate.getTime()+this.data.endTime*n.MinutesInHour*n.MillisecondsInSecond),e>=i&&(this.data.startDate=this.pipDateConvert.toStartDay(new Date(i.getTime()-n.IntervalTimeRange*n.MinutesInHour*n.MillisecondsInSecond)),this.data.startTime=this.data.endTime%(n.HoursInDay*n.MinutesInHour)===0?n.HoursInDay*n.MinutesInHour-n.IntervalTimeRange:this.data.endTime-n.IntervalTimeRange),this.data.endTime=Math.round(this.data.endTime/n.IntervalTimeRange)*n.IntervalTimeRange,void(this.data.duration=this.setDuration())):void(this.data.endTime=null)},t.prototype.setDate=function(){var t;this.data||(this.data=new i),this.data.bind=!1,this.data.startDate&&(t=this.data.startTime?this.data.startTime*n.MinutesInHour*n.MillisecondsInSecond:0,this.pipStartDate=new Date(this.data.startDate.getTime()+t)),this.data.endDate&&(t=this.data.endTime?this.data.endTime*n.MinutesInHour*n.MillisecondsInSecond:0,this.pipEndDate=new Date(this.data.endDate.getTime()+t)),this.data.bind=!0},t.prototype.defineDate=function(){var t,e;null!==this.pipStartDate&&void 0!==this.pipStartDate&&(t=_.isDate(this.pipStartDate)?this.pipStartDate:null,t||(t=this.getDateJSON(this.pipStartDate)),this.data.startDate=this.pipDateConvert.toStartDay(t),this.data.startTime=(new Date(t)-this.data.startDate)/(n.MinutesInHour*n.MillisecondsInSecond)),null!==this.pipEndDate&&void 0!==this.pipEndDate&&(e=_.isDate(this.pipEndDate)?this.pipEndDate:null,t||(e=this.getDateJSON(this.pipEndDate)),this.data.endDate=this.pipDateConvert.toStartDay(e),this.data.endTime=(new Date(e)-this.data.endDate)/(n.MinutesInHour*n.MillisecondsInSecond)),this.validateStartDate(),this.validateEndDate(),this.data.duration=this.setDuration(),this.setDate()},t.prototype.getTimeInterval=function(){var t,e;t=[];for(var i=0;i<24;i++)for(var a=0;a<2;a++)e=a*n.IntervalTimeRange,t.push({id:i*n.MinutesInHour+e,time:_.pad(i.toString(),3,"0").substr(0,2)+":"+_.pad(e.toString(),2,"0")});return t},t.prototype.toBoolean=function(t){return null!=t&&(!!t&&(t=t.toString().toLowerCase(),"1"==t||"true"==t))},t.prototype.initDate=function(){this.data.startDate=null,this.data.startTime=null,this.data.endDate=null,this.data.endTime=null,this.data.duration=null,this.showTime=!this.toBoolean(this.pipHideTime)},t.prototype.onChangeStartDate=function(t){this.validateStartDate(),this.data.duration=this.setDuration(),this.setDate(),this.pipChanged(this.pipStartDate,this.pipEndDate)},t.prototype.onChangeEndDate=function(){this.validateEndDate(),this.data.duration=this.setDuration(),this.setDate(),this.pipChanged(this.pipStartDate,this.pipEndDate)},t.prototype.onChangeStartTime=function(){this.data.startDate||(this.data.startDate=this.pipDateConvert.toStartDay(new Date)),this.validateStartDate(),this.data.duration=this.setDuration(),this.setDate(),this.pipChanged(this.pipStartDate,this.pipEndDate)},t.prototype.onChangeEndTime=function(){this.data.endDate||(this.data.endDate=this.pipDateConvert.toStartDay(new Date)),this.validateEndDate(),this.data.duration=this.setDuration(),this.setDate(),this.pipChanged(this.pipStartDate,this.pipEndDate)},t.prototype.isDisabled=function(){return!!this.disabled&&this.disabled()},t}()),r={bindings:a,templateUrl:"time_range_edit/TimeRangeEdit.html",controller:o};angular.module("pipTimeRangeEdit",[]).component("pipTimeRangeEdit",r)},{}],13:[function(t,e,n){!function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("date/Date.html",'<div class="pip-date layout-row flex" tabindex="-1"><md-input-container class="input-container flex"><md-select class="pip-date-day flex" ng-disabled="$ctrl.disableControls" ng-model="$ctrl.day" placeholder="{{$ctrl.dayLabel}}" ng-change="$ctrl.setValue()"><md-option ng-value="opt" ng-repeat="opt in $ctrl.days track by opt">{{:: opt }}</md-option></md-select></md-input-container><div class="input-container-separator flex-fixed"></div><md-input-container class="input-container flex"><md-select class="pip-date-monthflex" ng-disabled="$ctrl.disableControls" ng-model="$ctrl.month" placeholder="{{$ctrl.monthLabel}}" ng-change="$ctrl.onMonthChanged()"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.months track by opt.id">{{:: opt.name }}</md-option></md-select></md-input-container><div class="input-container-separator flex-fixed"></div><md-input-container class="input-container flex"><md-select class="pip-date-year flex" ng-disabled="$ctrl.disableControls" ng-model="$ctrl.year" placeholder="{{$ctrl.yearLabel}}" ng-change="$ctrl.onYearChanged()"><md-option ng-value="opt" ng-repeat="opt in $ctrl.years track by opt">{{:: opt }}</md-option></md-select></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("date_range/DateRange.html",'<div class="pip-date-range layout-row flex" tabindex="-1"><md-input-container ng-show="$ctrl.isDay()" class="input-container pip-day flex" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-day" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" md-on-open="$ctrl.onDayClick()" ng-model="$ctrl.day" ng-change="$ctrl.setValue()" placeholder="{{$ctrl.dayLabel}}" aria-label="DAY"><md-option ng-value="opt" ng-repeat="opt in $ctrl.days track by opt">{{$ctrl.nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container ng-show="$ctrl.isWeek()" class="input-container flex" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-week" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" ng-model="$ctrl.week" ng-change="$ctrl.onWeekChange()" placeholder="{{$ctrl.weekLabel}}" aria-label="WEEK"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.weeks track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'space16\': $ctrl.$mdMedia(\'gt-xs\'), \'space8\': $ctrl.$mdMedia(\'xs\')}" ng-show="$ctrl.isDay() || $ctrl.isWeek()"></div><md-input-container ng-show="$ctrl.isMonth() && !$ctrl.monthFormatShort" class="input-container flex" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-month" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" md-on-open="$ctrl.onMonthClick()" ng-model="$ctrl.month" ng-change="$ctrl.onMonthChanged()" placeholder="{{$ctrl.monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.months track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container ng-show="$ctrl.isMonth() && $ctrl.monthFormatShort" class="flex input-container" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-month" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" md-on-open="$ctrl.onMonthClick()" ng-model="$ctrl.month" ng-change="$ctrl.onMonthChanged()" placeholder="{{$ctrl.monthLabel}}" aria-label="MONTH"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.shortMonths track by opt.id">{{ opt.name }}</md-option></md-select></md-input-container><div class="flex-fixed" ng-class="{\'space16\': $ctrl.$mdMedia(\'gt-xs\'), \'space8\': $ctrl.$mdMedia(\'xs\')}" ng-show="$ctrl.isMonth()"></div><md-input-container class="input-container flex" ng-class="{\'flex-fixed\' : $ctrl.$mdMedia(\'gt-xs\')}"><md-select class="select-year" ng-class="{\'pip-no-line\' : $ctrl.pipNoLine}" ng-disable="{{$ctrl.disableControls}}" md-on-open="$ctrl.onYearClick()" ng-model="$ctrl.year" ng-change="$ctrl.onYearChanged()" placeholder="{{$ctrl.yearLabel}}" aria-label="YEAR"><md-option ng-value="opt" ng-repeat="opt in $ctrl.years track by opt">{{ opt }}</md-option></md-select></md-input-container></div>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("time_range/TimeRange.html",'<p><span ng-if="$ctrl.data.start != null">{{$ctrl.data.start | formatLongDateTime}}</span> <span class="separator" ng-if="$ctrl.data.start && $ctrl.data.end">-</span> <span ng-if="$ctrl.data.end != null">{{$ctrl.data.end | formatLongDateTime}}</span></p>')}])}(),function(t){try{t=angular.module("pipDates.Templates")}catch(e){t=angular.module("pipDates.Templates",[])}t.run(["$templateCache",function(t){t.put("time_range_edit/TimeRangeEdit.html",'<div class="event-edit layout-row layout-xs-column flex layout-align-start-start"><div flex="47" class="start-time-container"><p class="text-caption text-grey">{{$ctrl.startLabel}}</p><div class="layout-row layout-align-space-between-center"><div class="pip-datepicker-container" flex="49"><md-datepicker ng-model="$ctrl.data.startDate" xmd-placeholder="{{$ctrl.startLabel}}" ng-change="$ctrl.onChangeStartDate()" ng-disabled="$ctrl.isDisabled()" aria-label="START-DATE"></md-datepicker></div><div flex="" ng-if="$ctrl.showTime"><md-input-container class="input-container"><md-select aria-label="START-TIME" ng-model="$ctrl.data.startTime" ng-disabled="$ctrl.isDisabled()" ng-change="$ctrl.onChangeStartTime($ctrl.data.startTime)"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex="47" class="end-time-container"><p class="text-caption text-grey">{{$ctrl.endLabel}}</p><div class="layout-row layout-align-space-between-center"><div class="pip-datepicker-container flex-49"><md-datepicker ng-model="$ctrl.data.endDate" xmd-placeholder="{{$ctrl.endLabel}}" ng-disabled="$ctrl.isDisabled()" ng-change="$ctrl.onChangeEndDate()" aria-label="END-DATE"></md-datepicker></div><div flex="" ng-if="$ctrl.showTime"><md-input-container class="input-container"><md-select aria-label="END-TIME" ng-model="$ctrl.data.endTime" ng-change="$ctrl.onChangeEndTime()" ng-disabled="$ctrl.isDisabled()"><md-option ng-value="opt.id" ng-repeat="opt in $ctrl.intervalTimeCollection track by opt.id">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>')}])}()},{}]},{},[13,2,3,4,5,6,7,8,1,9,10,12,11])(13)});


!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(e.pip||(e.pip={})).charts=t()}}(function(){return function t(e,i,a){function r(s,o){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return r(i?i:t)},h,h.exports,t,e,i,a)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<a.length;s++)r(a[s]);return r}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={series:"<pipSeries",xTickFormat:"<?pipXTickFormat",yTickFormat:"<?pipYTickFormat",interactiveLegend:"<?pipInterLegend"},r=(function(){function t(){}t}(),function(){function t(t,e,i,a){"ngInject";var r=this;this.$element=t,this.$scope=e,this.$timeout=i,this.pipChartColors=a,this.chart=null,this.height=270,this.colors=this.pipChartColors.generateMaterialColors(),e.$watch("$ctrl.legend",function(t){t&&(r.data=r.prepareData(t),r.legend=t,r.updateChart())},!0)}return t.$inject=["$element","$scope","$timeout","pipChartColors"],t.prototype.$onInit=function(){var t=this;this.data=this.prepareData(this.series),this.legend=_.clone(this.series),this.generateParameterColor(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(t.colors.map(function(e){return t.pipChartColors.materialColorToRgba(e)}))},this.instantiateChart()},t.prototype.$onChanges=function(t){this.xTickFormat=t.xTickFormat?t.xTickFormat.currentValue:null,this.yTickFormat=t.yTickFormat?t.yTickFormat.currentValue:null,this.interactiveLegend=t.interactiveLegend?t.interactiveLegend.currentValue:null,t.series&&t.series.currentValue!==t.series.previousValue&&(this.series=t.series.currentValue,this.data=this.prepareData(this.series),this.legend=_.clone(this.series),this.generateParameterColor(),this.updateChart())},t.prototype.updateChart=function(){this.chart&&(this.chartElem.datum(this.data).call(this.chart),this.configBarWidthAndLabel(),this.drawEmptyState())},t.prototype.instantiateChart=function(){var t=this;nv.addGraph(function(){return t.chart=nv.models.discreteBarChart().margin({top:10,right:0,bottom:10,left:50}).x(function(t){return t.label||t.key||t.x}).y(function(t){return t.value}).showValues(!0).staggerLabels(!0).showXAxis(!0).showYAxis(!0).valueFormat(d3.format("d")).duration(0).height(t.height).color(function(e){return t.data[e.series].color||t.pipChartColors.materialColorToRgba(t.colors[e.series])}),t.chart.tooltip.enabled(!1),t.chart.noData("There is no data right now..."),t.chart.yAxis.tickFormat(function(e){return t.yTickFormat?t.yTickFormat(e):e}),t.chart.xAxis.tickFormat(function(e){return t.xTickFormat?t.xTickFormat(e):e}),t.chartElem=d3.select(t.$element.get(0)).select(".bar-chart svg").datum(t.data).style("height","285px").call(t.chart),nv.utils.windowResize(function(){t.chart.update(),t.configBarWidthAndLabel(0),t.drawEmptyState()}),t.chart},function(){t.$timeout(function(){t.configBarWidthAndLabel()},0),t.drawEmptyState()})},t.prototype.prepareData=function(t){var e=[];return _.each(t,function(t){!t.disabled&&t.values&&e.push(t)}),_.cloneDeep(e)},t.prototype.drawEmptyState=function(){if(0===this.$element.find(".nv-noData").length)d3.select(this.$element.find(".empty-state")[0]).remove();else{var t=this.chartElem.append("g").classed("empty-state",!0),e=this.$element.find(".nvd3-svg").innerWidth(),i=.1*e;t.append("g").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",this.height-10).attr("width",38),t.append("g").attr("transform","translate(42, 60)").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",200).attr("width",38),t.append("g").attr("transform","translate(84, 160)").style("fill","rgba(0, 0, 0, 0.08)").append("rect").attr("height",100).attr("width",38),t.attr("transform","translate("+(50+i)+", 0), scale("+(e-2*i)/126+", 1)")}},t.prototype.configBarWidthAndLabel=function(t){var e=this;void 0===t&&(t=1e3);var i=this.$element.find(".nv-bar text"),a=this.$element.find(".nv-bar");this.$element.find(".nvd3-svg")[0].getBBox().height;d3.select(this.$element.find(".bar-chart")[0]).classed("visible",!0),_.each(a,function(a,r){var n=Number(d3.select(a).select("rect").attr("height")),s=Number(d3.select(a).select("rect").attr("width")),o=d3.select(a),l=d3.transform(o.attr("transform")).translate[0],c=d3.transform(o.attr("transform")).translate[1];o.attr("transform","translate("+Number(l+r*(s+15))+", "+(e.height-20)+")").select("rect").attr("height",0),o.transition().duration(t).attr("transform","translate("+Number(l+r*(s+15))+", "+c+")").select("rect").attr("height",n),d3.select(i[r]).attr("dy",n/2+10).attr("x",s/2)})},t.prototype.generateParameterColor=function(){var t=this;this.data&&_.each(this.data,function(e,i){e.values[0]&&(e.values[0].color=e.values[0].color||t.pipChartColors.getMaterialColor(i,t.colors),e.color=e.values[0].color)})},t}()),n={bindings:a,templateUrl:"bar_chart/BarChart.html",controller:r};angular.module("pipBarCharts",[]).component("pipBarChart",n)},{}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function t(t){"ngInject";this.$mdColorPalette=t}return t.$inject=["$mdColorPalette"],t.prototype.getMaterialColor=function(t,e){return!e||e.length<1?null:(t>=e.length&&(t=0),this.materialColorToRgba(e[t]))},t.prototype.materialColorToRgba=function(t){return"rgba("+this.$mdColorPalette[t][500].value[0]+","+this.$mdColorPalette[t][500].value[1]+","+this.$mdColorPalette[t][500].value[2]+","+(this.$mdColorPalette[t][500].value[3]||1)+")"},t.prototype.generateMaterialColors=function(){var t=this,e=_.map(this.$mdColorPalette,function(t,e){return e});return e=_.filter(e,function(e){return _.isObject(t.$mdColorPalette[e])&&_.isObject(t.$mdColorPalette[e][500])&&_.isArray(t.$mdColorPalette[e][500].value)})},t}();angular.module("pipChartColors",[]).service("pipChartColors",a)},{}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={series:"<pipSeries",interactive:"<pipInteractive"},r=(function(){function t(){}t}(),function(){function t(t,e,i,a){"ngInject";this.$element=t,this.$scope=e,this.$timeout=i,this.pipChartColors=a,this.colors=this.pipChartColors.generateMaterialColors()}return t.$inject=["$element","$scope","$timeout","pipChartColors"],t.prototype.$onInit=function(){this.updateLegends()},t.prototype.$onChanges=function(t){var e=this;t.series&&t.series.currentValue!==t.series.previousValue&&(this.series=t.series.currentValue,this.updateLegends()),t.interactive&&t.interactive.currentValue!==t.interactive.previousValue&&(this.interactive=t.interactive.currentValue,this.interactive===!0&&this.$timeout(function(){e.colorCheckboxes()},0))},t.prototype.updateLegends=function(){var t=this;this.$timeout(function(){t.animate(),t.colorCheckboxes()},0),this.prepareSeries()},t.prototype.colorCheckboxes=function(){var t=this,e=this.$element.find("md-checkbox .md-container");_.each(e,function(e,i){i>=t.series.length||$(e).css("color",t.series[i].color||t.colors[i]).find(".md-icon").css("background-color",t.series[i].color||t.colors[i])})},t.prototype.animate=function(){var t=this,e=this.$element.find(".chart-legend-item");_.each(e,function(e,i){t.$timeout(function(){$(e).addClass("visible")},200*i)})},t.prototype.prepareSeries=function(){var t=this;this.series&&_.each(this.series,function(e,i){var a=t.pipChartColors.getMaterialColor(i,t.colors);e.color=e.color||(e.values&&e.values[0]&&e.values[0].color?e.values[0].color:a),e.disabled=e.disabled||!1})},t}()),n={bindings:a,templateUrl:"chart_legend/ChartInteractiveLegend.html",controller:r};angular.module("pipChartLegends",[]).component("pipChartLegend",n)},{}],5:[function(t,e,i){angular.module("pipCharts",["pipBarCharts","pipLineCharts","pipPieCharts","pipChartLegends","pipChartColors","pipCharts.Templates"])},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={series:"<pipSeries",showYAxis:"<?pipYAxis",showXAxis:"<?pipXAxis",xFormat:"<?pipXFormat",xTickFormat:"<?pipXTickFormat",yTickFormat:"<?pipYTickFormat",xTickValues:"<?pipXTickValues",dynamic:"<?pipDynamic",fixedHeight:"<?pipDiagramHeight",dynamicHeight:"<?pipDynamicHeight",minHeight:"<?pipMinHeight",maxHeight:"<?pipMaxHeight",interactiveLegend:"<?pipInterLegend"},r=(function(){function t(){}t}(),function(){function t(t,e,i,a){"ngInject";var r=this;this.$element=t,this.$scope=e,this.$timeout=i,this.pipChartColors=a,this.HEIGHT=270,this.chart=null,this.chartElem=null,this.setZoom=null,this.updateZoomOptions=null,this.fixedHeight=this.HEIGHT,this.dynamicHeight=!1,this.minHeight=this.HEIGHT,this.maxHeight=this.HEIGHT,this.showYAxis=!0,this.showXAxis=!0,this.dynamic=!1,this.interactiveLegend=!1,this.colors=this.pipChartColors.generateMaterialColors(),e.$watch("$ctrl.legend",function(t){r.data=r.prepareData(t),r.legend=t,r.updateChart()},!0),e.$on("$destroy",function(){i(function(){d3.selectAll(".nvtooltip").style("opacity",0)},800)})}return t.$inject=["$element","$scope","$timeout","pipChartColors"],t.prototype.$onInit=function(){var t=this;this.data=this.prepareData(this.series)||[],this.legend=_.clone(this.series),this.sourceEvents=[],this.generateParameterColor(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(t.colors.map(function(e){return t.pipChartColors.materialColorToRgba(e)}))},this.instantiateChart()},t.prototype.$onChanges=function(t){this.fixedHeight=t.fixedHeight?t.fixedHeight.currentValue:this.HEIGHT,this.minHeight=t.minHeight?t.minHeight.currentValue:this.HEIGHT,this.maxHeight=t.maxHeight?t.maxHeight.currentValue:this.HEIGHT,this.dynamicHeight=t.dynamicHeight?t.dynamicHeight.currentValue:this.dynamicHeight,this.showXAxis=t.showXAxis?t.showXAxis.currentValue:this.showXAxis,this.showYAxis=t.showYAxis?t.showYAxis.currentValue:this.showYAxis,this.dynamic=t.dynamic?t.dynamic.currentValue:this.dynamic,this.interactiveLegend=t.interactiveLegend?t.interactiveLegend.currentValue:this.interactiveLegend,this.xFormat=t.xFormat?t.xFormat.currentValue:this.xFormat,this.xTickFormat=t.xTickFormat?t.xTickFormat.currentValue:this.xTickFormat,this.yTickFormat=t.yTickFormat?t.yTickFormat.currentValue:this.yTickFormat,t.xTickValues&&t.xTickValues.currentValue!==t.xTickValues.previousValue&&(this.xTickValues=t.xTickValues.currentValue,this.updateXTickValues(),this.chartElem&&this.chart&&this.chartElem.datum(this.data||[]).call(this.chart)),t.series&&t.series.currentValue!==t.series.previousValue&&this.updateSeries()},t.prototype.prepareData=function(t){var e=[];return _.each(t,function(t){!t.disabled&&t.values&&e.push(t)}),_.cloneDeep(e)},t.prototype.getHeight=function(){return this.dynamicHeight?Math.min(Math.max(this.minHeight,this.$element.parent().innerHeight()),this.maxHeight):this.fixedHeight},t.prototype.zoomIn=function(){this.setZoom&&this.setZoom("in")},t.prototype.zoomOut=function(){this.setZoom&&this.setZoom("out")},t.prototype.instantiateChart=function(){var t=this;nv.addGraph(function(){return t.chart=nv.models.lineChart().margin({top:20,right:20,bottom:30,left:30}).x(function(e){return void 0!==e&&void 0!==e.x?t.xFormat?t.xFormat(e.x):e.x:e}).y(function(t){return void 0!==t&&void 0!==t.value?t.value:t}).height(t.getHeight()-50).useInteractiveGuideline(!0).showXAxis(!0).showYAxis(!0).showLegend(!1).color(function(t){return t.color||d3.scale.paletteColors().range()}),t.chart.tooltip.enabled(!1),t.chart.noData("There is no data right now..."),t.chart.yAxis.tickFormat(function(e){return t.yTickFormat?t.yTickFormat(e):e}),t.chart.xAxis.tickFormat(function(e){return t.xTickFormat?t.xTickFormat(e):e}).tickValues(t.xTickValues&&_.isArray(t.xTickValues)&&t.xTickValues.length>2?d3.range(t.xTickValues[0],t.xTickValues[1],t.xTickValues[2]):null),t.chartElem=d3.select(t.$element.get(0)).select(".line-chart svg"),t.chartElem.datum(t.data||[]).style("height",t.getHeight()-50+"px").call(t.chart),$(".line-chart svg").on("touchstart touchmove",function(e){t.$timeout(function(){var t=$(".nvtooltip"),i=t.innerWidth(),a=$("body").innerWidth(),r=e.originalEvent.touches[0].pageX,n=e.originalEvent.touches[0].pageY;t.css("transform","translate("+(r+i>=a?r-i:r)+","+n+")"),t.css("left",0),t.css("top",0)})}),$(".line-chart svg").on("touchstart touchend",function(e){var i=function(){$(".nvtooltip").css("opacity",0)};i(),t.$timeout(function(){i()},500)}),t.dynamic&&t.addZoom(t.chart,t.chartElem),nv.utils.windowResize(function(){t.onResize()}),t.$scope.$on("pipMainResized",function(){t.onResize()}),t.chart},function(){t.drawEmptyState()})},t.prototype.updateXTickValues=function(){this.chart&&this.chart.xAxis.tickValues(this.xTickValues&&_.isArray(this.xTickValues)&&this.xTickValues.length>2?d3.range(this.xTickValues[0],this.xTickValues[1],this.xTickValues[2]):null)},t.prototype.updateChart=function(){this.chart&&(this.updateXTickValues(),this.chartElem.datum(this.data||[]).call(this.chart),this.drawEmptyState(),this.updateZoomOptions&&this.updateZoomOptions(this.data))},t.prototype.updateSeries=function(){this.data=this.prepareData(this.series),this.legend=_.clone(this.series),this.generateParameterColor(),this.updateChart()},t.prototype.onResize=function(){this.chart.height(this.getHeight()-50),this.chartElem.style("height",this.getHeight()-50+"px"),this.chart.update(),this.drawEmptyState()},t.prototype.drawEmptyState=function(){if(this.$element.find("text.nv-noData").get(0)){var t=this.$element.find(".line-chart").innerWidth(),e=this.$element.find(".line-chart").innerHeight();this.$element.find(".empty-state").get(0)?this.chartElem.select("image").attr("transform","scale("+t/1151+","+e/216+")"):(this.chartElem.append("defs").append("pattern").attr("height",1).attr("width",1).attr("x","0").attr("y","0").attr("id","bg").append("image").attr("x",17).attr("y",0).attr("height","216px").attr("width","1151px").attr("transform","scale("+t/1151+","+e/216+")").attr("xlink:href","images/line_chart_empty_state.svg"),this.chartElem.append("rect").classed("empty-state",!0).attr("height","100%").attr("width","100%").attr("fill","url(#bg)"))}else d3.select(this.$element.find(".empty-state")[0]).remove()},t.prototype.updateScroll=function(t,e){var i=e[1]-e[0],a=t[1]-t[0],r=a/i==1;$(this.$element[0]).find(".visual-scroll").css("opacity",function(){return r?0:1}),r||$(this.$element[0]).find(".scrolled-block").css("left",function(){return(t[0]-e[0])/i*100+"%"}).css("width",function(){return a/i*100+"%"})},t.prototype.generateParameterColor=function(){var t=this;this.data&&_.each(this.data,function(e,i){e.color=e.color||t.pipChartColors.getMaterialColor(i,t.colors)})},t.prototype.addZoom=function(t,e){var i=this,a=null,r=null,n=null,s=null,o=null,l=null,c=null,h=null,u=null,p=d3.behavior.zoom(),d=null,m=null,g=null;!function(t){a=t.yAxis,r=t.xAxis,n=t.xDomain||r.scale().domain,s=t.yDomain||a.scale().domain,o=t.update,l=r.scale(),c=a.scale(),h=r.scale().domain().slice(),u=a.scale().domain().slice(),d=h,m=p.scale(),g=p.translate(),l.nice(),c.nice()}(t);var f=function(t,e,i,a){return t[0]<e[0]&&(t[0]=e[0],d[0]!==e[0]||i!==m?t[1]+=e[0]-t[0]:(t[1]=d[1],a=_.clone(g))),t[1]>e[1]&&(t[1]=e[1],d[1]!==e[1]||i!==m?t[0]-=t[1]-e[1]:(t[0]=d[0],a=_.clone(g))),p.translate(a),d=_.clone(t),m=_.clone(i),g=_.clone(a),t},v=function(){p.scale(1),p.translate([0,0]),l.domain(h),p.x(l).y(c),e.call(p)},y=function(){1===d3.event.scale?(k(),v()):(n(f(l.domain(),h,d3.event.scale,d3.event.translate)),o()),i.updateScroll(l.domain(),h)};this.setZoom=function(t){var i=[e[0][0].getBBox().width/2,e[0][0].getBBox().height/2],a=p.translate(),r=x(i);"in"===t?m<4&&p.scale(m+.2):m>1&&p.scale(m-.2);var n=b(r);p.translate([a[0]+i[0]-n[0],a[1]+i[1]-n[1]]),p.event(e)};var C=function(t){var i=p.translate();"right"===t?i[0]-=20:i[0]+=20,p.translate(i),p.event(e)},x=function(t){var e=p.scale(),i=p.translate();return[(t[0]-i[0])/e,(t[1]-i[1])/e]},b=function(t){var e=p.scale(),i=p.translate();return[t[0]*e+i[0],t[1]*e+i[1]]},T=function(){switch(d3.event.keyCode){case 39:C("right");break;case 37:C("left");break;case 107:i.setZoom("in");break;case 109:i.setZoom("out")}},k=function(){n(h),o(),p.scale(1),p.translate([0,0]),m=1,g=[0,0]};p.x(l).y(c).scaleExtent([1,4]).on("zoom",y),e.call(p).on("dblclick.zoom",k),$(this.$element.get(0)).addClass("dynamic"),e.attr("focusable",!1).style("outline","none").on("keydown",T).on("focus",function(){})},t}()),n={bindings:a,templateUrl:"line_chart/LineChart.html",controller:r};angular.module("pipLineCharts",[]).component("pipLineChart",n)},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a={series:"<pipSeries",donut:"<?pipDonut",legend:"<?pipShowLegend",total:"<?pipShowTotal",size:"<?pipPieSize",centered:"<?pipCentered"},r=(function(){function t(){}t}(),function(){function t(t,e,i,a){"ngInject";this.$element=t,this.$scope=e,this.$timeout=i,this.pipChartColors=a,this.donut=!1,this.legend=!0,this.total=!0,this.size=250,this.centered=!1,this.chart=null,this.colors=this.pipChartColors.generateMaterialColors()}return t.$inject=["$element","$scope","$timeout","pipChartColors"],t.prototype.$onInit=function(){var t=this;this.data=this.series,this.generateParameterColor(),d3.scale.paletteColors=function(){return d3.scale.ordinal().range(t.colors.map(function(e){return t.pipChartColors.materialColorToRgba(e)}))},this.instantiateChart()},t.prototype.$onChanges=function(t){var e=this;this.legend=t.legend?t.legend.currentValue:this.legend,this.centered=t.centered?t.centered.currentValue:this.centered,this.donut=t.donut?t.donut.currentValue:this.donut,this.size=t.size?t.size.currentValue:this.size,this.total=t.total?t.total.currentValue:this.total,t.series&&t.series.currentValue!==t.series.previousValue&&(this.data=t.series.currentValue,this.generateParameterColor(),this.chart&&(this.chartElem.datum(this.data).call(this.chart),this.$timeout(function(){e.resizeTitleLabelUnwrap()}),this.drawEmptyState(d3.select(this.$element.get(0)).select(".pie-chart svg")[0][0])))},t.prototype.instantiateChart=function(){var t=this;nv.addGraph(function(){return t.chart=nv.models.pieChart().margin({top:0,right:0,bottom:0,left:0}).x(function(e){return t.donut?e.value:null}).y(function(t){return t.value}).height(Number(t.size)).width(Number(t.size)).showLabels(!0).labelThreshold(.001).growOnHover(!1).donut(t.donut).donutRatio(.5).color(function(t){return t.color||d3.scale.paletteColors().range()}),t.chart.tooltip.enabled(!1),t.chart.noData("There is no data right now..."),t.chart.showLegend(!1),t.chartElem=d3.select(t.$element.get(0)).select(".pie-chart").style("height",t.size+"px").style("width",t.centered?"100%":t.size+"px").select("svg").style("opacity",0).datum(t.data||[]).call(t.chart),nv.utils.windowResize(function(){t.chart.update(),t.$timeout(function(){t.resizeTitleLabelUnwrap()}),t.centerChart(),t.drawEmptyState(d3.select(t.$element.get(0)).select(".pie-chart svg")[0][0])}),t.chart},function(){t.$timeout(function(){var e=d3.select(t.$element.get(0)).select(".pie-chart svg")[0][0];t.renderTotalLabel(e),d3.select(e).transition().duration(1e3).style("opacity",1),t.$timeout(function(){t.resizeTitleLabelUnwrap()},800),t.centerChart(),t.drawEmptyState(e)})})},t.prototype.drawEmptyState=function(t){if(this.$element.find("text.nv-noData").get(0)){0===this.$element.find(".pip-empty-pie-text").length&&this.$element.find(".pie-chart").append("<div class='pip-empty-pie-text'>There is no data right now...</div>");var e=d3.layout.pie().sort(null),i=Number(this.size),a=d3.svg.arc().innerRadius(i/2-20).outerRadius(i/2-57);t=d3.select(t).append("g").classed("empty-state",!0).attr("transform","translate("+i/2+","+i/2+")");t.selectAll("path").data(e([1])).enter().append("path").attr("fill","rgba(0, 0, 0, 0.08)").attr("d",a)}else d3.select(this.$element.find(".empty-state")[0]).remove(),this.$element.find(".pip-empty-pie-text").remove()},t.prototype.centerChart=function(){if(this.centered){var t=d3.select(this.$element.get(0)).select(".pie-chart svg")[0][0],e=$(t).innerWidth()/2-(Number(this.size)||250)/2;d3.select(this.$element.find(".nv-pieChart")[0]).attr("transform","translate("+e+", 0)")}},t.prototype.renderTotalLabel=function(t){if((this.total||this.donut)&&this.data){var e=this.data.reduce(function(t,e){return t+e.value},0);e>=1e4&&(e=(e/1e3).toFixed(1)+"k"),d3.select(t).select(".nv-pie:not(.nvd3)").append("text").classed("label-total",!0).attr("text-anchor","middle").style("dominant-baseline","central").text(e),this.titleElem=d3.select(this.$element.find("text.label-total").get(0)).style("opacity",0)}},t.prototype.resizeTitleLabelUnwrap=function(){if((this.total||this.donut)&&this.data){var t=this.$element.find(".nvd3.nv-pieChart").get(0).getBBox();t.width&&t.height&&this.titleElem.style("font-size",~~t.width/4.5).style("opacity",1)}},t.prototype.generateParameterColor=function(){var t=this;this.data&&_.each(this.data,function(e,i){e.color=e.color||t.pipChartColors.getMaterialColor(i,t.colors)})},t}()),n={bindings:a,templateUrl:"pie_chart/PieChart.html",controller:r};angular.module("pipPieCharts",[]).component("pipPieChart",n)},{}],8:[function(t,e,i){!function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("bar_chart/BarChart.html",'<div class="bar-chart"><svg></svg></div><pip-chart-legend ng-show="$ctrl.legend" pip-series="$ctrl.legend" pip-interactive="$ctrl.interactiveLegend"></pip-chart-legend>')}])}(),function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("chart_legend/ChartInteractiveLegend.html",'<div><div class="chart-legend-item" ng-repeat="item in $ctrl.series" ng-show="item.values || item.value"><md-checkbox ng-model="item.disabled" ng-true-value="false" ng-false-value="true" ng-if="$ctrl.interactive" aria-label="{{ item.label }}"><p class="legend-item-value" ng-if="item.value" ng-style="{\'background-color\': item.color}">{{ item.value }}</p><p class="legend-item-label">{{:: item.label || item.key }}</p></md-checkbox><div ng-if="!$ctrl.interactive"><span class="bullet" ng-style="{\'background-color\': item.color}"></span> <span>{{:: item.label || item.key}}</span></div></div></div>')}])}(),function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("line_chart/LineChart.html",'<div class="line-chart" flex="auto" layout="column"><svg class="flex-auto" ng-class="{\'visible-x-axis\': $ctrl.showXAxis, \'visible-y-axis\': $ctrl.showYAxis}"></svg><div class="scroll-container"><div class="visual-scroll"><div class="scrolled-block"></div></div></div><md-button class="md-fab md-mini minus-button" ng-click="$ctrl.zoomOut()"><md-icon md-svg-icon="icons:minus-circle"></md-icon></md-button><md-button class="md-fab md-mini plus-button" ng-click="$ctrl.zoomIn()"><md-icon md-svg-icon="icons:plus-circle"></md-icon></md-button></div><pip-chart-legend pip-series="$ctrl.legend" pip-interactive="$ctrl.interactiveLegend"></pip-chart-legend>')}])}(),function(t){try{t=angular.module("pipCharts.Templates")}catch(e){t=angular.module("pipCharts.Templates",[])}t.run(["$templateCache",function(t){t.put("pie_chart/PieChart.html",'<div class="pie-chart" ng-class="{\'circle\': !$ctrl.donut}"><svg class="flex-auto"></svg></div><pip-chart-legend pip-series="$ctrl.data" pip-interactive="false" ng-if="$ctrl.legend"></pip-chart-legend>')}])}()},{}]},{},[8,1,2,3,4,5,6,7])(8)});


//# sourceMappingURL=pip-webui.min.js.map
