{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/index.ts","src/routing/BackDecorator.ts","src/routing/RedirectDecorator.ts","src/routing/RoutingEvents.ts","src/routing/index.ts","src/session/IdentityService.ts","src/session/SessionService.ts","src/session/index.ts","src/transactions/Transaction.ts","src/transactions/TransactionError.ts","src/transactions/TransactionService.ts","src/transactions/TransactionStrings.ts","src/transactions/index.ts","src/translate/TranslateDirective.ts","src/translate/TranslateFilter.ts","src/translate/TranslateService.ts","src/translate/Translation.ts","src/translate/index.ts","src/utilities/Codes.ts","src/utilities/Format.ts","src/utilities/PageResetService.ts","src/utilities/ScrollService.ts","src/utilities/SystemInfo.ts","src/utilities/Tags.ts","src/utilities/TimerService.ts","src/utilities/index.ts","src/buttons.ts","src/dependencies/translate.ts","src/fabs/fab_tooltip_visibility.ts","src/refresh_button/refresh_button.ts","src/toggle_buttons/toggle_buttons.ts","temp/pip-webui-buttons-html.min.js","src/split.ts","src/color_picker/color_picker.ts","src/controls.ts","src/image_slider/image_slider.ts","src/image_slider/image_slider_service.ts","src/image_slider/slider_button.ts","src/image_slider/slider_indicator.ts","src/markdown/markdown.ts","src/popover/popover.ts","src/popover/popover_service.ts","src/progress/routing_progress.ts","src/toast/toasts.ts","temp/pip-webui-controls-html.min.js","src/date/date.ts","src/date/date_filter.ts","src/date/date_service.ts","src/date_directive/date.ts","src/date_range_directive/date_range.ts","src/dates.ts","src/dependencies/translate.js","src/time_range_directive/time_range.ts","src/time_range_edit_directive/time_range_edit.ts","temp/pip-webui-dates-html.min.js","src/confirmation/ConfirmationController.ts","src/confirmation/ConfirmationParams.ts","src/confirmation/ConfirmationService.ts","src/confirmation/index.ts","src/dialogs.ts","src/error_details/ErrorDetailsController.ts","src/error_details/ErrorDetailsService.ts","src/error_details/index.ts","src/information/InformationController.ts","src/information/InformationService.ts","src/information/index.ts","src/options/OptionsBigController.ts","src/options/OptionsBigService.ts","src/options/OptionsController.ts","src/options/OptionsService.ts","src/options/index.ts","temp/pip-webui-dialogs-html.min.js","src/actions/ActionsService.ts","src/actions/PrimaryActionsDirective.ts","src/actions/SecondaryActionsDirective.ts","src/actions/index.ts","src/appbar/AppBarDirective.ts","src/appbar/AppBarPartDirective.ts","src/appbar/AppBarService.ts","src/appbar/index.ts","src/breadcrumb/BreadcrumbDirective.ts","src/breadcrumb/BreadcrumbService.ts","src/breadcrumb/index.ts","src/common/NavService.ts","src/dependencies/TranslateFilter.ts","src/dropdown/DropdownDirective.ts","src/header/NavHeaderDirective.ts","src/header/NavHeaderService.ts","src/header/index.ts","src/icon/NavIconDirective.ts","src/icon/NavIconService.ts","src/icon/index.ts","src/language/LanguagePickerDirective.ts","src/menu/NavMenuDirective.ts","src/menu/NavMenuService.ts","src/menu/index.ts","src/search/SearchBarDirective.ts","src/search/SearchService.ts","src/search/index.ts","src/sidenav/SideNavDirective.ts","src/sidenav/SideNavPartDirective.ts","src/sidenav/SideNavService.ts","src/sidenav/index.ts","src/tabs/TabsDirective.ts","temp/pip-webui-nav-html.min.js","src/bootbarn/BootBarnCoolTheme.ts","src/bootbarn/BootBarnMonochromeTheme.ts","src/bootbarn/BootBarnWarmTheme.ts","src/bootbarn/index.ts","src/common/ThemeService.ts","src/common/index.ts","src/default/DefaultAmberTheme.ts","src/default/DefaultBlueTheme.ts","src/default/DefaultGreenTheme.ts","src/default/DefaultGreyTheme.ts","src/default/DefaultNavyTheme.ts","src/default/DefaultOrangeTheme.ts","src/default/DefaultPinkTheme.ts","src/default/index.ts","src/common/errors_strings.ts","src/errors.ts","src/errors_pages/errors_module.ts","src/errors_pages/errors_pages.ts","src/errors_pages/errors_service.ts","src/forms/clear_errors.ts","src/forms/form_errors.ts","src/maintenance/maintenance.ts","src/missing_route/missing_route.ts","src/no_connection/no_connection.ts","src/no_connection_panel/no_connection_panel.ts","src/unknown/unknown.ts","src/unsupported/unsupported.ts","temp/pip-webui-errors-html.min.js","src/bar/bar_chart.ts","src/charts.ts","src/legend/interactive_legend.ts","src/line/line_chart.ts","src/pie/pie_chart.ts","temp/pip-webui-charts-html.min.js","src/location/location.ts","src/location_dialog/location_dialog.ts","src/location_edit/location_edit.ts","src/location_ip/location_ip.ts","src/location_map/location_map.ts","src/locations.ts","temp/pip-webui-locations-html.min.js","src/common/ButtonsUpload.ts","src/fail/FileFailController.ts","src/files.ts","src/select/FileSelectController.ts","src/service/FileUploadService.ts","src/start/FileStartController.ts","src/start/index.ts","src/success/FileSuccessController.ts","src/success/index.ts","src/upload/FileUploadController.ts","src/upload/index.ts","temp/pip-webui-files-html.min.js","src/Dashboard.ts","src/DashboardComponent.ts","src/DashboardController.ts","src/dialogs/add_component/AddComponentDialogController.ts","src/dialogs/add_component/AddComponentProvider.ts","src/dialogs/widget_config/ConfigDialogController.ts","src/dialogs/widget_config/ConfigDialogExtendComponent.ts","src/dialogs/widget_config/ConfigDialogService.ts","src/draggable/Draggable.ts","src/draggable/DraggableController.ts","src/draggable/DraggableDirective.ts","src/draggable/DraggableTileService.ts","src/draggable/draggable_group/DraggableTilesGroupDirective.ts","src/draggable/draggable_group/DraggableTilesGroupService.ts","src/utility/WidgetTemplateUtility.ts","src/widgets/Widgets.ts","src/widgets/calendar/WidgetCalendar.ts","src/widgets/event/WidgetEvent.ts","src/widgets/menu/WidgetMenuDirective.ts","src/widgets/menu/WidgetMenuService.ts","src/widgets/notes/WidgetNotes.ts","src/widgets/picture_slider/WidgetPictureSlider.ts","src/widgets/position/WidgetPosition.ts","src/widgets/statistics/WidgetStatistics.ts","temp/pip-webui-dashboard-html.min.js","src/SettingsModule.ts","src/settings_page/SettingsPageController.ts","src/settings_page/SettingsPageRoutes.ts","src/settings_page/index.ts","src/settings_service/SettingsService.ts","src/settings_service/index.ts","src/user_settings/user_settings.ts","src/user_settings/user_settings_basic_info.ts","src/user_settings/user_settings_change_password.ts","src/user_settings/user_settings_sessions.ts","src/user_settings/user_settings_strings.ts","src/user_settings/user_settings_verify_email.ts","temp/pip-webui-settings-html.min.js","src/help_common/HelpConfig.ts","src/help_common/HelpPageSelectedTab.ts","src/help_common/HelpStateConfig.ts","src/help_common/HelpTab.ts","src/help_page/HelpPageController.ts","src/help_page/HelpPageRoutes.ts","src/help_provider/HelpProvider.ts","src/help_service/HelpService.ts","src/pipHelp.ts","temp/pip-webui-help-html.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","services","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","__export","captureStateTranslations","$rootScope","$on","event","toState","toParams","fromState","fromParams","CurrentState","name","url","params","PreviousState","decorateBackStateService","$delegate","$window","goBack","history","back","goBackAndSelect","state","_","cloneDeep","extend","go","addBackStateDecorator","$provide","decorator","$inject","defineProperty","value","config","run","3","decorateRedirectStateProvider","redirect","RedirectedStates","addRedirectStateProviderDecorator","$timeout","isNull","preventDefault","transitionTo","location","addRedirectStateDecorator","hookRoutingEvents","$log","$state","RoutingVar","error","5","m","p","hasOwnProperty","./RedirectDecorator","./RoutingEvents","6","IdentityRootVar","IdentityChangedEvent","IdentityService","setRootVar","identity","_setRootVar","_identity","_rootScope","_log","prototype","$emit","debug","JSON","stringify","enumerable","configurable","IdentityProvider","_service","get","set","$get","provider","SessionRootVar","SessionOpenedEvent","SessionClosedEvent","SessionService","session","_session","isOpened","open","fullReset","partialReset","close","oldSession","SessionProvider","8","./SessionService","9","Transaction","scope","_scope","_id","_operation","_progress","_error","message","reset","busy","failed","empty","aborted","id","begin","operation","Date","getTime","toString","update","progress","Math","max","abort","10","TransactionError","decode","details","cause","stack_trace","data","statusText","status","11","TransactionService","_transactions","create","transaction","Transaction_1","service","12","$injector","pipTranslate","has","setTranslations","ENTERING","PROCESSING","LOADING","SAVING","configureTransactionStrings","13","./TransactionError","./TransactionService","./TransactionStrings","14","restrict","key1","key2","link","element","attrs","key","translate","text","html","directive","translateDirective","translateHtmlDirective","15","translateFilter","16","language","initTranslate","__extends","extendStatics","Object","setPrototypeOf","__proto__","Array","d","b","__","constructor","LanguageRootVar","LanguageChangedEvent","TranslateService","translation","persist","$mdDateLocale","_persist","_translation","_window","_mdDateLocale","localStorage","getItem","save","changeLocale","locale","localeDate","moment","localeData","months","isArray","_months","format","shortMonths","_monthsShort","days","_weekdays","shortDays","_weekdaysMin","firstDayOfWeek","_week","dow","setItem","PageResetService_1","ResetPageEvent","use","translations","translateArray","keys","translateSet","keyProp","valueProp","translateObjects","items","translateWithPrefix","prefix","translateSetWithPrefix","translateSetWithPrefix2","_super","_this","TranslateProvider","Translation","./Translation","17","en","ru","es","pt","de","fr","_language","map","_translations","isUndefined","values","k","push","each","item","replace","toUpperCase","./TranslateFilter","./TranslateService","19","Codes","hash","result","charCodeAt","verification","random","substr","Format","cache","sample","maxLength","indexOf","substring","strRepeat","str","qty","getType","variable","slice","toLowerCase","fmt","match","parse_tree","arg_names","exec","_fmt","field_list","replacement_field","field_match","argv","tree_length","node_type","output","arg","cursor","sprintf","test","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","abs","pad_character","charAt","pad_length","pad","join","args","_i","arguments","parseFormat","21","hookResetEvents","pipPageReset","ResetAreaEvent","area","resetArea","ResetRootVar","ResetAreaRootVar","PageResetService","_timeout","performReset","scrollTo","parentElement","childElement","animationDuration","undefined","setTimeout","$","position","scrollTop","top","animate","ScrollService","SystemInfo","ua","navigator","userAgent","search","version","browserName","browser","split","osAll","osAndroid","err","isDesktop","platform","isMobile","isCordova","isSupported","supported","edge","chrome","browserVersion","Tags","normalizeOne","tag","trim","compressOne","equal","tag1","tag2","normalizeAll","tags","isString","compressAll","searchFields","field","entity","hashTags","concat","uniq","TimerEvent","timeout","DefaultEvents","TimerService","$interval","_started","_events","_interval","isStarted","addEvent","existingEvent","find","newEvent","startEvent","removeEvent","stopEvent","splice","clearEvents","stop","interval","cancel","ex","start","buttons","ToggleButtonsFilter","filter","FabTooltipVisibilityController","$element","$attrs","$scope","$parse","trigGetter","showGetter","showSetter","assign","isOpen","isFunction","pipFabTooltipVisibility","controller","4","RefreshButtonBindings","visible","onRefresh","RefreshButtonChanges","RefreshButtonController","$postLink","_buttonElement","children","_textElement","show","$onChanges","changes","currentValue","hide","onClick","$event","width","css","RefreshButtonComponent","component","ToggleButtonsBindings","ToggleButton","ngDisabled","currentButtonValue","currentButton","multiselect","change","onlyToggle","ToggleButtonsChanges","ToggleButtonsController","pipMedia","class","index","currentButtonIndex","disabled","on","addClass","removeClass","buttonSelected","enterSpacePress","highlightButton","level","ToggleButtons","bindings","$templateCache","put","thisModule","pipSplit","splitElements","forwardTransition","addTransitionSequence","sequence","transitionSequences","toIndex","fromIndex","controls","DEFAULT_COLORS","ColorPickerController","_$timeout","_$scope","colors","colorChange","currentColor","currentColorIndex","selectColor","$apply","pipColorPicker","templateUrl","controllerAs","pipImageSliderController","pipImageSlider","_index","DEFAULT_INTERVAL","swipeStart","sliderIndex","_type","_$attrs","_$interval","slideToPrivate","setIndex","_blocks","startInterval","_throttled","throttle","toBlock","_newIndex","_direction","registerSlider","stopInterval","removeSlider","nextBlock","restartInterval","prevBlock","nextIndex","pipImageIndex","_timePromises","type","bindToController","ImageSliderService","ANIMATION_DURATION","_sliders","sliderId","sliderScope","getSliderScope","nextCarousel","prevCarousel","blocks","oldIndex","direction","blockIndex","pipButtonType","pipSliderId","vm","7","slideTo","pipSlideTo","Config","MARKDOWN_ATTACHMENTS","checklist","documents","pictures","time","MarkdownController","_pipTranslate","_$parse","_$injector","_$element","_text","_isList","_clamp","_rebind","bindText","newText","describeAttachments","array","attachTypes","attach","attachString","isClamped","height","options","obj","textString","pipLineCount","isNumber","gfm","tables","breaks","sanitize","pedantic","smartLists","smartypents","marked","attr","append","isList","clamp","rebind","PopoverController","$compile","template","calcH","calcHeight","cancelCallback","backdropElement","backdropClick","responsive","content","init","onResize","resize","closePopover","remove","onPopoverClick","$e","stopPropagation","focus","pos","offset","docWidth","document","docHeight","popover","left","title","footer","contentHeight","outerHeight","pipPopover","PopoverService","_$compile","_$rootScope","popoverTemplate","$new","isObject","locals","$broadcast","RoutingController","showProgress","logoUrl","_image","loadProgressImage","RoutingProgress","ToastController","$mdToast","toast","_pipErrorDetailsDialog","_$mdToast","actions","actionLenght","onDetails","ok","noop","onAction","action","ToastService","SHOW_TIMEOUT","SHOW_TIMEOUT_NOTIFICATIONS","toasts","sounds","onStateChangeSuccess","onClearToasts","showNextToast","showToast","currentToast","duration","then","showToastOkResult","showToastCancelResult","successCallback","addToast","removeToasts","removeToastsById","getToastById","clearToasts","showNotification","showMessage","showError","hideAllToasts","dates","formatTimeFilter","pipDateTime","formatTime","formatDateOptionalFilter","formatDateOptional","formatLongDateFilter","formatLongDate","formatShortDateFilter","formatShortDate","formatMiddleDateFilter","formatMiddleDate","formatMonthFilter","formatMonth","formatLongMonthFilter","formatLongMonth","formatYearFilter","formatYear","formatWeekFilter","formatWeek","formatShortWeekFilter","formatShortWeek","formatShortDateTimeFilter","formatShortDateTime","formatMiddleDateTimeFilter","formatMiddleDateTime","formatLongDateTimeFilter","formatLongDateTime","formatShortDateLongTimeFilter","firstTime","formatShortDateLongTime","formatMiddleDateLongTimeFilter","formatMiddleDateLongTime","formatLongDateLongTimeFilter","formatLongDateLongTime","bbFormatDateLongTimeFilter","bbFormatDateLongTime","formatFullDateTimeFilter","formatFullDateTime","formatShortTimeFilter","formatShortTime","formatLongTimeFilter","formatLongTime","formatShortDayOfWeekFilter","formatShortDayOfWeek","formatLongDayOfWeekFilter","formatLongDayOfWeek","formatLongMonthDayFilter","formatLongMonthDay","formatShortMonthDayFilter","formatShortMonthDay","formatDateRangeFilter","value1","value2","formatDateRange","formatDateTimeRangeFilter","formatDateTimeRange","formatISOWeekFilter","formatISOWeek","formatShortISOWeekFilter","formatShortISOWeek","formatISOWeekOrdinalFilter","formatISOWeekOrdinal","formatDateYFilter","formatDateY","formatLongDateYFilter","formatLongDateY","formatTodayDateLongTimeLongFilter","formatTodayDateLongTimeLong","formatTodayDateShortTimeLongFilter","formatTodayDateShortTimeLong","formatTodayDateLongTimeShortFilter","formatTodayDateLongTimeShort","formatTodayDateShortTimeShortFilter","formatTodayDateShortTimeShort","formatMillisecondsToSecondsFilter","formatMillisecondsToSeconds","formatElapsedIntervalFilter","formatElapsedInterval","getDateJSONFilter","getDateJSON","DateTimeConfig","DateTime","_momentRanged","_defaultFormat","_config","timeZone","isUndefinedOrNull","getRange","getOperationRange","range","formatDateTime","basicFormat","date","formatTpl","utcOffset","isValid","formatDateTimeY","nowDate","formatMoment","longDateFormat","year","formatDay","formatMonthYearless","formatMonthDay","formatLL","formatYearlessLL","formatRange","dateStart","dateEnd","isSame","isAfter","month","toStartRange","startOf","toDate","toEndRange","mssOffset","add","toDateWithTime","formatDate","toTodayDate","day","useTimeZone","fromNow","getNextStart","category","getPrevStart","getNowStart","addHours","hours","toStartDay","toEndDay","toStartWeek","toEndWeek","toStartMonth","toEndMonth","toStartYear","toEndYear","DateTimeService","datetime","_datetime","DateTimeProvider","timeMode","model","ngChange","dayList","count","monthList","momentMonths","yearList","currentYear","getFullYear","startYear","endYear","years","adjustDay","getValue","v","isDate","getDate","getMonth","setValue","DAY","MONTH","YEAR","dayLabel","monthLabel","yearLabel","onYearChanged","disableControls","$watch","newValue","pipChanged","pipDateRangeType","pipDateFormat","pipNoLine","$mdMedia","setCurrent","currentState","week","dateRangeType","fillLists","weeks","weekList","correctWeek","prevState","getUTCDate","getUTCMonth","getUTCFullYear","getWeekByDate","adjustWeek","getCountDay","nameDays","momentShortDays","weekday","dayOfWeek","startWeek","UTC","getUTCDay","getWeek","countDay","countPrevMonthDay","startDay","endDay","getTimezoneOffset","currentMonth","currentDay","currentDate","onDayChanged","onMonthChanged","onWeekChange","onChange","oldValue","onYearClick","onMonthClick","onDayClick","defineStartDate","pipStartDate","defineEndDate","pipEndDate","end","toBoolean","pipRebind","pipStartLabel","pipEndLabel","pipHideTime","pipSize","setDuration","startDate","endDate","startTime","endTime","validateStartDate","floor","round","validateEndDate","setDate","bind","defineDate","getTimeInterval","j","minutes","initDate","showTime","EVENT_NEW_END_TIME","EVENT_NEW_START_TIME","startLabel","endLabel","intervalTimeCollection","newV","onChangeEndDate","onChangeStartTime","onChangeEndTime","isDisabled","$watchGroup","dialogs","ConfirmationParams_1","ConfirmationDialogController","$mdDialog","ConfirmationParams","CONFIRM_TITLE","theme","onOk","onCancel","ConfirmationService","_mdDialog","targetEvent","./ConfirmationParams","./ConfirmationService","ErrorStrings","errorDetails","dismissButton","errorMessage","errorCode","errorMethod","errorPath","errorText","ErrorParams","ErrorDetailsDialogController","OK","CANCEL","ERROR_DETAILS","CODE","PATH","ERROR","METHOD","MESSAGE","DISMISS","$theme","ErrorDetailsService","./ErrorDetailsService","InformationStrings","InformationParams","InformationDialogController","INFORMATION_TITLE","pipFormat","truncate","InformationService","clickOutsideToClose","./InformationService","OptionsBigData","OptionsBigParams","noTitle","noActions","optionIndex","OptionsBigDialogController","onSelect","option","selectedOptionName","deleted","OPTIONS_TITLE","applyButtonTitle","selectedOption","active","deletedTitle","hint","focusInput","onOptionSelect","onSelected","onKeyUp","keyCode","list","OptionsBigService","OptionsData","icon","OptionsParams","OptionsDialogController","onKeyPress","OptionsService","./OptionsBigController","./OptionsBigService","./OptionsController","./OptionsService","18","nav","ActionsChangedEvent","SecondaryActionsOpenEvent","SimpleActionItem","ActionItem","ActionsConfig","primaryGlobalActions","primaryLocalActions","secondaryGlobalActions","secondaryLocalActions","ActionsService","sendChangeEvent","primaryActions","secondaryActions","updateCount","clearCounts","openMenuEvent","ActionsProvider","PrimaryActionsController","$location","pipActions","_element","_attrs","_injector","_location","_pipActions","DOCUMENTS_ATTACHED","ERROR_DOCUMENTS_LOADED","localActions","globalActions","onActionsChanged","isHidden","access","actionCount","clickAction","$mdOpenMenu","divider","subActions","originatorEv","click","href","_state","stateParams","primaryActionsDirective","SecondaryActionsController","onActionsMenuOpen","getMenu","menuFn","_menuFn","openMenu","ev","calcActions","secondaryActionsVisible","secondaryDividerVisible","secondaryActionsDirective","AppBarDirectiveController","pipAppBar","onAppBarChanged","appbarDirective","transclude","AppBarPartDirectiveController","_partName","pipAppbarPart","_partValue","parts","currentPartValue","appbarPartDirective","ngIfDirective","ngIf","priority","terminal","apply","AppBarChangedEvent","AppBarConfig","AppBarService","classes","sendConfigEvent","shadowBreakpoints","setShadow","hideShadow","reject","c","startsWith","breakpoints","bp","addShadow","removeShadow","cc","part","AppBarProvider","./AppBarDirective","./AppBarPartDirective","./AppBarService","BreadcrumbController","pipBreadcrumb","BreadcrumbService_1","BreadcrumbChangedEvent","onBreadcrumbChanged","BreadcrumbService_2","BreadcrumbBackEvent","onBreadcrumbBack","_media","openSearch","SearchService_1","OpenSearchEvent","actionsVisible","onOpenMenu","onSubActionClick","breadcrumbDirective","./BreadcrumbService","BreadcrumbItem","BreadcrumbConfig","BreadcrumbService","criteria","showText","showItems","BreadcrumbProvider","NavService","appbar","breadcrumb","sidenav","header","menu","showMenu","DropdownDirectiveController","_pipTheme","_pipMedia","currentTheme","themeClass","media","activeIndex","showDropdown","select","pipChange","dropdownDirective","NavHeaderDirectiveController","pipNavHeader","navConstant","_pipNavHeader","initImage","cleanupNavHeaderChanged","onNavHeaderChanged","cleanupSideNavStateChanged","onStateChanged","imageBlock","image","onload","onImageLoad","onerror","onImageError","initHeader","subtitle","imageUrl","imageCss","setImageMarginCSS","loadedDefaultImage","setImage","showHeader","cssParams","containerWidth","clientWidth","containerHeight","clientHeight","imageWidth","imageHeight","margin","loadError","defaultImageUrl","onUserClick","navHeaderDirective","NavHeaderChangedEvent","NavHeaderConfig","NavHeaderService","callbackOrEvent","NavHeaderProvider","clear","./NavHeaderService","NavIconClickedEvent","NavIconDirectiveController","pipNavIcon","onNavIconChanged","onNavIconClick","SideNavService_1","OpenSideNavEvent","navIconDirective","../sidenav/SideNavService","NavIconChangedEvent","NavIconConfig","NavIconService","setCallbackOrEvent","showIcon","showBack","showImage","NavIconProvider","setMenu","setIcon","setBack","20","./NavIconDirective","./NavIconService","TAB_BREAKPOINT","./appbar","./breadcrumb","./common/NavService","./dependencies/TranslateFilter","./dropdown/DropdownDirective","./header","./icon","./language/LanguagePickerDirective","./menu","./search","./sidenav","./tabs/TabsDirective","22","LanguagePickerDirectiveController","languages","_translate","setLanguages","selectedLanguage","onLanguageClick","languagePickerDirective","NavMenuDirectiveController","pipSideNav","pipNavMenu","setCollapsible","collapsed","isCollapsed","onExpand","expanded","pipSideNavElement","isSectionEmpty","linkCollection","onConfigChanged","sections","expand","isExpanded","expandedButton","sideNavState","isActive","parentState","includes","current","parent","defaultIcon","itemVisible","clickLink","navMenuDirective","24","NavMenuChangedEvent","NavMenuLink","NavMenuSection","NavMenuConfig","NavMenuService","updateBadgeStyle","style","links","badgeStyle","NavMenuProvider","25","./NavMenuService","26","SearchBarController","pipSearch","enabled","stateChange","SearchChangedEvent","onSearchChanged","focusText","enable","callback","SearchService_2","SearchActivatedEvent","onKeyDown","searchBarDirective","27","CloseSearchEvent","SearchConfig","SearchService","toggle","SearchProvider","./SearchService","29","SideNavDirectiveController","checkSafari","pipSystemInfo","setBreakpoints","xs","sm","md","lg","onSideNavChanged","onSideNavState","navState","setState","setSideNaveState","isResizing","mainWidth","mainContainer","innerWidth","sideNavWidth","currentWidth","mediaBreakpoints","sidenavState","isLockedOpen","showIconTooltype","xlarge","windowResize","debounce","sideNavDirective","SideNavPartDirectiveController","partName","partValue","pipSidenavPart","sidenavPartDirective","hookSideNavEvents","CloseSideNavEvent","SideNavStateChangedEvent","SideNavConfig","SideNavService","$mdSidenav","_sidenav","SideNavChangedEvent","SideNavProvider","32","./SideNavPartDirective","./SideNavService","33","Selected","activeTab","TabsDirectiveController","selected","setTheme","setMedia","initTabs","setTranslate","tabs","pipTabIndex","tabDisabled","log","console","showShadow","tabsDirective","showTabs","showTabsShadow","34","themes","configureBootBarnCoolTheme","$mdThemingProvider","coolBackgroundPalette","extendPalette","A100","A200","definePalette","coolPrimaryPalette","300","500","contrastLightColors","coolAccentPalette","A700","primaryPalette","default","hue-1","backgroundPalette","hue-2","warnPalette","accentPalette","alwaysWatchTheme","2","configureBootBarnMonochromeTheme","monochromeBackgroundPalette","monochromePrimaryPalette","monochromeAccentPalette","configureBootBarnWarmTheme","warmBackgroundPalette","warmPrimaryPalette","warmAccentPalette","warmErrorPalette","./BootBarnCoolTheme","./BootBarnMonochromeTheme","./BootBarnWarmTheme","initTheme","pipTheme","ThemeRootVar","ThemeChangedEvent","ThemeResetPage","ThemeConfig","ThemeService","$mdTheming","_currentTheme","body","newTheme","THEMES","ThemeProvider","configureDefaultAmberTheme","orangeBackgroundPalette","orangePrimaryPalette","900","configureDefaultBlueTheme","registerBlueTheme","themeName","bluePrimaryPalette","contrastDefaultColor","contrastDarkColors","blueBackgroundPalette","blueAccentPalette","600","setDefaultTheme","configureDefaultGreenTheme","greenBackgroundPalette","greenPrimaryPalette","greenAccentPalette","configureDefaultGreyTheme","thirdPartyPalette","configureDefaultNavyTheme","greyPalette","700","tealPalette","configureDefaultOrangeTheme","RedBackgroundPalette","RedPrimaryPalette","800","configureDefaultPinkTheme","PinkBackgroundPalette","PinkPrimaryPalette","configureDefaultTheme","errors","ERROR_ROUTE_TITLE","ERROR_ROUTE_SUBTITLE","ERROR_ROUTE_CONTINUE","ERROR_ROUTE_TRY_AGAIN","ERROR_ROUTE_GO_BACK","ERROR_ROUTE_PAGE_TITLE","ERROR_UNKNOWN_TITLE","ERROR_UNKNOWN_SUBTITLE","ERROR_UNKNOWN_CLOSE","ERROR_UNKNOWN_DETAILS","ERROR_AVAILABLE_TITLE","ERROR_AVAILABLE_SUBTITLE","ERROR_AVAILABLE_CLOSE","ERROR_AVAILABLE_TRY_AGAIN","ERROR_RESPONDING_TITLE","ERROR_RESPONDING_SUBTITLE","ERROR_RESPONDING_RETRY","ERROR_UNSUPPORTED_TITLE","ERROR_UNSUPPORTED_SUBTITLE","ERROR_UNSUPPORTED_O","ERROR_UNSUPPORTED_O_VER","ERROR_UNSUPPORTED_IE","ERROR_UNSUPPORTED_IE_VER","ERROR_UNSUPPORTED_GC","ERROR_UNSUPPORTED_GC_VER","ERROR_UNSUPPORTED_FM","ERROR_UNSUPPORTED_FM_VER","filterTranslate","ErrorsPageRun","pipErrorsService","errorConfig","Unsupported","Active","checkSupported","MissingRoute","unfoundState","to","NoConnection","noConnectionError","Unknown","unknownError","Maintenance","maintenanceError","goToErrors","ie","firefox","opera","AuthHttpResponseInterceptor","$q","responseError","rejection","maintenance_1","ErrorsPageConfig","$stateProvider","$httpProvider","interceptors","ErrorMaintenanceController","../maintenance/maintenance","ErrorStateItem","ErrorsConfig","Name","Event","Title","SubTitle","Breadcrumb","Image","ErrorsService","getErrorItemByKey","errorName","ErrorsProvider","configureErrorByKey","errorParams","defaultsDeep","configureErrors","ClearErrorsLink","$ctrls","_fieldController","_formController","clearFieldErrors","clearFormErrors","$error","prop","$setValidity","$serverError","clearErrors","FormErrors","errorsWithHint","isEmpty","touchedErrorsWithHint","form","$submitted","$touched","$dirty","resetFormErrors","$setPristine","$setUntouched","$setDirty","$setSubmitted","resetFieldsErrors","setFormError","errorFieldMap","goToUnhandledErrorPage","PipMaintenanceError","PipMaintenanceErrorConfig","PipMaintenanceErrorParams","_errorKey","pipNavService","appHeader","timeoutInterval","PipMissingRouteErrorState","ErrorMissingRouteController","absolute","urlBack","onContinue","PipNoConnectionError","ErrorNoConnectionController","onRetry","NoConnectionPanelController","_retry","PipUnknownErrorDetails","ErrorUnknownController","parseError","error_details","server_stacktrace","client_stacktrace","PipUnsupportedError","ErrorUnsupportedController","charts","pipBarChart","series","xTickFormat","yTickFormat","interactiveLegend","$mdColorPalette","prepareData","seria","drawEmptyState","d3","chartElem","classed","configBarWidthAndLabel","labels","chartBars","getBBox","barHeight","Number","barWidth","x","transform","y","transition","materialColorToRgba","color","getMaterialColor","generateParameterColor","forEach","chart","palette","legend","clone","scale","paletteColors","ordinal","updatedSeries","datum","updatedLegend","nv","addGraph","models","discreteBarChart","right","bottom","label","showValues","staggerLabels","showXAxis","showYAxis","valueFormat","tooltip","noData","yAxis","tickFormat","xAxis","utils","pipChartLegend","interactive","colorCheckboxes","checkboxContainers","legendTitles","prepareSeries","hex","pipLineChart","xFormat","xTickValues","dynamic","fixedHeight","dynamicHeight","minHeight","maxHeight","getHeight","innerHeight","updateScroll","domains","boundary","bDiff","domDiff","isEqual","addZoom","svg","setData","newChart","xDomain","domain","yDomain","redraw","xScale","yScale","x_boundary","y_boundary","prevXDomain","prevScale","d3zoom","prevTranslate","nice","fixDomain","updateChart","zoomed","unzoomed","step","which","coordinates","point","keypress","setZoom","scaleExtent","behavior","zoom","center0","translate0","coordinates0","center1","getXMinMax","maxVal","minVal","tempMinVal","tempMaxVal","min","updateZoomOptions","filteredColor","sourceEvents","isVisibleX","isVisibleY","zoomIn","zoomOut","tickValues","selectAll","heigth","lineChart","useInteractiveGuideline","showLegend","tooltipW","bodyWidth","originalEvent","removeTooltip","pipPieChart","donut","total","size","centered","pie","layout","sort","arc","innerRadius","outerRadius","enter","centerChart","svgElem","leftMargin","renderTotalLabel","totalVal","reduce","sum","curr","titleElem","resizeTitleLabelUnwrap","boxSize","resizeTitleLabel","newVal","pieChart","showLabels","labelThreshold","growOnHover","donutRatio","locations","pipLocationName","pipLocationPos","pipLocationResize","pipShowLocationIcon","pipCollapse","clearMap","$mapControl","$mapContainer","generateMap","showMap","google","maps","LatLng","appendTo","mapOptions","center","mapTypeId","MapTypeId","ROADMAP","disableDefaultUI","disableDoubleClickZoom","scrollwheel","draggable","Map","Marker","$name","$up","$down","collapsable","LocationDialogService","_$mdDialog","locationName","locationPos","LocationEditDialogController","_map","_marker","onSetLocation","geolocation","getCurrentPosition","coords","latitude","longitude","createMarker","setCenter","changeLocation","maximumAge","enableHighAccuracy","supportSet","mapContainer","trigger","setMap","animation","Animation","DROP","thisMarker_1","addListener","getPosition","tid","lat","lng","geocoder","Geocoder","geocode","results","GeocoderStatus","formatted_address","onAddPin","getCenter","onRemovePin","onZoomIn","getZoom","onZoomOut","onApply","LocationDialogRun","LOCATION_ADD_LOCATION","LOCATION_SET_LOCATION","LOCATION_ADD_PIN","LOCATION_REMOVE_PIN","$http","pipLocationEditDialog","pipLocationHolder","$empty","defineCoordinates","address","geometry","onMapClick","onMapKeyPress","defineCoordinatesDebounced","pipIpaddress","pipExtraInfo","ipAddress","response","geoplugin_latitude","geoplugin_longitude","extraInfo","city","geoplugin_city","regionCode","geoplugin_regionCode","region","geoplugin_regionName","areaCode","geoplugin_areaCode","countryCode","geoplugin_countryCode","country","geoplugin_countryName","continentCode","geoplugin_continentCode","pipLocationPositions","pipIconPath","pipDraggable","pipStretch","loc","determineCoordinates","fill","stroke","points","checkLocation","bounds","LatLngBounds","path","iconPath","fillColor","fillOpacity","strokeColor","strokeWeight","fitBounds","stretchMap","files","ButtonsUpload","filerTranslate","FileFailController","FileSelectController_1","FileFailController_1","FileUploadService_1","fileModelDirective","fileModel","modelSetter","fileSelectDirective","localFile","FileSelectController","fileFailDirective","./fail/FileFailController","./select/FileSelectController","./service/FileUploadService","./start/index","./success/index","./upload/index","onUploadButtonClick","onDeleteButtonClick","forml","getElementById","FileUploadState","All","Start","Upload","Fail","FileUploadService","upload","file","fd","FormData","lengthComputable","loaded","headers","Content-Type","success","FileStartController","fileStartDirective","FileStartController_1","FileSuccessController","FileSuccessController_1","FileSuccessBindings","fileSuccessDirective","FileUploadButtons","FileUploadController","buttonFunction","uploadButtons","failButtons","startButtons","onAbort","retry","FileUploadController_1","FileUploadBindings","FileUploadChanges","fileUploadDirective","./FileUploadController","dashboard","pipDashboard","gridOptions","groupAdditionalActions","groupedWidgets","DROP_TO_CREATE_NEW_GROUP","configureAvailableWidgets","pipAddComponentDialogProvider","configWidgetList","amount","DEFAULT_GRID_OPTIONS","draggableOptions","tileWidth","tileHeight","gutter","inline","$interpolate","pipAddComponentDialog","pipWidgetTemplate","groupIndex","addComponent","removeGroup","_includeTpl","groupMenuActions","defaultGroupMenuActions","_$interpolate","_pipAddComponentDialog","_pipWidgetTemplate","draggableGridOptions","widgetsContext","compileWidgets","group","removedWidgets","source","widget","colSpan","rowSpan","object","removeWidget","opts","getTemplate","activeGroup","addWidgets","widgets","widgetGroup","DashboardController","AddComponentDialogController","groups","activeGroupIndex","widgetList","defaultWidgets","encrease","widgetIndex","decrease","AddComponentDialogService","_widgetList","AddComponentDialogProvider","TileColors","all","TileSizes","WidgetConfigDialogController","dialogTitle","sizes","sizeId","sizeX","sizeY","./ConfigDialogService","$templateRequest","pipExtensionUrl","replaceWith","pipWidgetConfigComponent","WidgetConfigDialogService","./DraggableController","./DraggableDirective","./DraggableTileService","./draggable_group/DraggableTilesGroupDirective","./draggable_group/DraggableTilesGroupService","DraggableTileService_1","DraggableTilesGroupService_1","SIMPLE_LAYOUT_COLUMNS_COUNT","DEFAULT_TILE_WIDTH","DEFAULT_TILE_HEIGHT","UPDATE_GROUPS_EVENT","DEFAULT_OPTIONS","DraggableController","pipDragTile","pipTilesGrid","sourceDropZoneElem","isSameDropzone","tileGroups","merge","mobileBreakpoint","tilesTemplates","tile","tileScope","tilesContext","IDragTileConstructor","DragTileService","tpl","availableWidth","getContainerWidth","availableColumns","getAvailableColumns","setAvailableColumns","generateGrid","getSingleTileWidthForMobile","setTilesDimensions","calcContainerHeight","watch","prevVal","changedGroupIndex","addGroup","groupWidgetDiff","newTiles","addTilesIntoGroup","groupsContainers","updateTilesGroups","removeTiles","updateTilesOptions","onTitleClick","editingName","oldTitle","currentTarget","cancelEditing","onBlurTitleInput","onKyepressTitleInput","updateTilesTemplates","updateType","_a","from","elem","attributes","tileOptions","fromTileIndex","reIndexTiles","indexes","container","tiles","gIndex","child","removeGroups","newGroups","removeIndexes","remain","containers","findIndex","reverse","sourceGroup","$$phase","querySelectorAll","groupContaninerSelector","ITilesGridConstructor","TilesGridService","groupContainer","addTile","newTile","getCompiledTemplate","optionsGroup","optionGroup","updateTileOptions","initTilesGroups","onlyPosition","draggedTile","getActiveGroupAndTile","foundTile","getTileByNode","onDragStartListener","activeEntities","target","activeDraggedGroup","startDrag","onDragMoveListener","dx","dy","containerOffset","getContainerOffset","getTileByCoordinates","pageX","pageY","draggedTileIndex","getTileIndex","belowElemIndex","belowElement","swapTiles","setGroupContainersHeight","onDragEndListener","stopDrag","containerRect","getBoundingClientRect","tileGroup","moveTile","movedTile","removeTile","getElem","onDropListener","droppedGroupIndex","droppedGroup","onDropToFictGroupListener","onDropEnterListener","dragEvent","dragEnter","classList","onDropDeactivateListener","activeDropzoneClass","onDropLeaveListener","initialize","autoScroll","onstart","onmove","onend","dropzone","ondrop","ondragenter","ondropdeactivate","ondragleave","interact","DragDirective","$elem","$container","DEFAULT_TILE_SIZE","getSize","setSize","setPosition","updateElem","preview","zIndex","isAnimate","onTransitionEnd","off","setPreviewPosition","getOptions","setOptions","$attr","wrapComponent","docFrag","createDocumentFragment","$eval","pipDraggableTiles","appendChild","DraggableTile","columns","gridCells","isMobileLayout","MOBILE_LAYOUT_COLUMNS","getCellByPosition","row","col","getCells","prevCell","getAvailableCellsMobile","getAvailableCellsDesktop","leftCornerCell","rightCornerCell","getBasicRow","getCell","gridCopy","basicRow","basicCol","rowShift","prevTileSize","isCellFree","src","cell","getCellIndex","srcCell","rowIndex","reserveCells","clearElements","singleTileWidth","generateCells","newCellCount","colsInRow","rows","gridInRow","querySelector","srcTiles","tileSize","currIndex","startCell","cells","maxHeightSize","maxWidthSize","maxBy","node","beforeTile","movedTileIndex","beforeTileIndex","droppedTile","newGrid","ImageLoad","pipImageLoad","widgetTemplateService","strictCompile","interpolated","_$templateRequest","naturalWidth","naturalHeight","./event/WidgetEvent","./menu/WidgetMenuDirective","./menu/WidgetMenuService","./notes/WidgetNotes","./picture_slider/WidgetPictureSlider","./position/WidgetPosition","./statistics/WidgetStatistics","CalendarWidgetController","pipWidgetMenu","pipWidgetConfigDialogService","_configDialog","union","onConfigClick","dialogClass","extensionUrl","changeSize","MenuWidgetService","pipCalendarWidget","opacity","is","drawImage","EventWidgetController","onOpacitytest","_oldOpacity","pipEventWidget","pipMenuWidget","callAction","actionName","MenuWidgetProvider","NotesWidgetController","pipNotesWidget","PictureSliderController","animationType","_widgetUtility","animationInterval","WidgetMenuService_1","pipPictureSliderWidget","23","PositionWidgetController","showPosition","_locationDialog","openLocationEditDialog","reDrawPosition","hideColors","newPosition","locatioName","pipPositionWidget","../menu/WidgetMenuService","chartSize","SMALL_CHART","setChartSize","StatisticsWidgetController","BIG_CHART","pipStatisticsWidget","settings","SettingsPageSelectedTab","tabIndex","SettingsPageController","pipSettings","getTabs","tab","sortBy","initSelect","getDefaultTab","onDropdownSelect","onNavigationSelect","tabId","configureSettingsPageRoutes","auth","SettingsTab","SettingsStateConfig","SettingsConfig","titleText","titleLogo","isNavIcon","SettingsService","getFullStateName","setDefaultTab","defaultTab","showTitleText","newTitleText","showTitleLogo","newTitleLogo","showNavIcon","SettingsProvider","addTab","tabObj","existingTab","validateTab","stateConfig","pipSettingsProvider","pipTransaction","pipToasts","pipDataUser","pipDataParty","pipFormErrors","onPictureChanged","picture","onPictureCreated","sender","saveChanges","$party","$invalid","loc_pos","party","toJson","originalParty","updateParty","nameCopy","status_code","fromJson","$user","updateUser","setCurrentTheme","onChangePassword","email","answer","onVerifyEmail","user","email_ver","genders","omit","onExit","onChangeBasicInfo","repeat","changePasData","new_password","showRepeatHint","onCheckRepeatPassword","changePassword","1107","1105","errorsRepeatWithHint","formPart","pipDataSessionProvider","resolve","sessions","readSessionsResolver","sessionId","readSessionIdResolver","pipDataSession","eachSeries","removeSession","without","onRemove","onRemoveAll","pipTranslateProvider","SETTINGS_TITLE","SETTINGS_BASIC_INFO_TITLE","SETTINGS_ACTIVE_SESSIONS_TITLE","SETTINGS_BASIC_INFO_FULL_NAME","SETTINGS_BASIC_INFO_VERIFY_HINT","SETTINGS_BASIC_INFO_VERIFY_CODE","SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD","SETTINGS_BASIC_INFO_CHANGE_PASSWORD","SETTINGS_BASIC_INFO_NAME_HINT","SETTINGS_BASIC_INFO_WORDS_ABOUT_ME","SETTINGS_BASIC_INFO_GENDER","SETTINGS_BASIC_INFO_BIRTHDAY","SETTINGS_BASIC_INFO_LOCATION","SETTINGS_BASIC_INFO_PRIMARY_EMAIL","SETTINGS_BASIC_INFO_FROM","SETTINGS_BASIC_INFO_USER_ID","SETTINGS_CHANGE_PASSWORD_TITLE","SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD","SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD","SETTINGS_ACTIVE_SESSIONS_SUBTITLE","SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION","SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS","SETTINGS_ACTIVE_SESSION_OS","SETTINGS_ACTIVE_SESSION_ACTIVE","SETTINGS_BLACKLIST_TITLE","SETTINGS_BLACKLIST_SUBTITLE","SETTINGS_BLACKLIST_UNBLOCK","SETTINGS_BLACKLIST_EMPTY","SETTINGS_CONTACT_INFO_TITLE","SETTINGS_CONTACT_INFO_EMAIL","SETTINGS_CONTACT_INFO_ADD_EMAIL","SETTINGS_CONTACT_INFO_ADD_PHONE","SETTINGS_CONTACT_INFO_ADD_ADDRESS","SETTINGS_CONTACT_INFO_ADD_ACCOUNT","SETTINGS_CONTACT_INFO_ADD_URL","SETTINGS_CONTACT_INFO_ADDRESS","SETTINGS_CONTACT_INFO_PHONE","SETTINGS_CONTACT_INFO_ACCOUNT_NAME","SETTINGS_CONTACT_INFO_URL","THEME","HINT_PASSWORD","HINT_REPEAT_PASSWORD","ERROR_WRONG_PASSWORD","ERROR_IDENTICAL_PASSWORDS","REPEAT_PASSWORD_INVALID","ERROR_EMAIL_INVALID","requestEmailVerification","onVerify","verifyEmail","verifyData","1106","1103","emailVerified","onRequestVerificationClick","help","HelpConfig","HelpPageSelectedTab","HelpStateConfig","HelpTab","HelpPageSelectedTab_1","HelpPageController","pipHelp","../help_common/HelpPageSelectedTab","./HelpPageRoutes","configureHelpPageRoutes","HelpConfig_1","HelpService_1","HelpProvider","HelpService","../help_common/HelpConfig","../help_service/HelpService","./help_page/HelpPageController","./help_provider/HelpProvider","./help_service/HelpService"],"mappings":"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","file":"pip-webui.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import './common';\r\nimport './default';\r\nimport './bootbarn';\r\n\r\nexport * from './common';","export let CurrentState: any;\r\nexport let PreviousState: any;\r\n\r\n// Run function to set CurrentState and PreviousState global variables\r\nfunction captureStateTranslations($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    $rootScope.$on('$stateChangeSuccess',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            CurrentState = {\r\n                name: toState.name, \r\n                url: toState.url, \r\n                params: toParams\r\n            };\r\n\r\n            PreviousState = {\r\n                name: fromState.name, \r\n                url: fromState.url, \r\n                params: fromParams\r\n            };\r\n        }\r\n    );\r\n\r\n}\r\n\r\n// Decorator function to modify $state service by adding goBack and goBackAndSelect methods\r\nfunction decorateBackStateService($delegate: any, $window: ng.IWindowService): any {\r\n    \"ngInject\";\r\n\r\n    $delegate.goBack = goBack;\r\n    $delegate.goBackAndSelect = goBackAndSelect;\r\n\r\n    return $delegate;\r\n    //////////////////////////////////////////////////\r\n\r\n    function goBack(): void {\r\n        $window.history.back()\r\n    }\r\n\r\n    function goBackAndSelect(params: any): void {\r\n        // todo: define end fix PreviousState\r\n        if (PreviousState != null \r\n            && PreviousState.name != null) {\r\n\r\n            let state = _.cloneDeep(PreviousState);\r\n\r\n            // Override selected parameters\r\n            state.params = _.extend(state.params, params);\r\n\r\n            $delegate.go(state.name, state.params);\r\n        } else {\r\n            $window.history.back();\r\n        }\r\n    }\r\n}\r\n\r\n// Config function to decorate $state service\r\nfunction addBackStateDecorator($provide) {\r\n    $provide.decorator('$state', decorateBackStateService);\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .config(addBackStateDecorator)\r\n    .run(captureStateTranslations);\r\n    ","let RedirectedStates: any = {};\r\n\r\n// Decorator function to add $stateProvider redirect method\r\nfunction decorateRedirectStateProvider($delegate) {\r\n    \"ngInject\";\r\n\r\n    $delegate.redirect = redirect;\r\n\r\n    return $delegate;\r\n    /////////////////////////////////////////////\r\n\r\n    // Specify automatic redirect from one state to another\r\n    function redirect(fromState, toState) {\r\n        RedirectedStates[fromState] = toState;  \r\n        return this;\r\n    }\r\n}\r\n\r\n// Config function to decorate $state provider\r\nfunction addRedirectStateProviderDecorator($provide) {\r\n    \"ngInject\";\r\n\r\n    $provide.decorator('$state', decorateRedirectStateProvider);\r\n}\r\n\r\n// Decorator function to add redirect method to $state service\r\nfunction decorateRedirectStateService($delegate, $timeout) {\r\n    \"ngInject\";\r\n\r\n    $delegate.redirect = redirect;\r\n    \r\n    return $delegate;\r\n    ////////////////////////////////\r\n    \r\n    // Todo: Move this code directly to event handler?\r\n    // Todo: Nothing calls this code!!\r\n    function redirect(event, state, params) {\r\n        let toState = RedirectedStates[state.name];\r\n        if (_.isFunction(toState)) {\r\n            toState = toState(state.name, params);\r\n\r\n            if (_.isNull(toState))\r\n                throw new Error('Redirected toState cannot be null');\r\n        }\r\n\r\n        if (!!toState) {\r\n            $timeout(() => {\r\n                event.preventDefault();\r\n                $delegate.transitionTo(toState, params, {location: 'replace'});\r\n            });\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\n// Config function to decorate $state service\r\nfunction addRedirectStateDecorator($provide) {\r\n    \"ngInject\";\r\n\r\n    $provide.decorator('$state', decorateRedirectStateService);\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .config(addRedirectStateProviderDecorator)\r\n    .config(addRedirectStateDecorator);\r\n    ","export let RoutingVar: string = \"$routing\";\r\n\r\nfunction hookRoutingEvents(\r\n    $rootScope: ng.IRootScopeService,\r\n    $log: ng.ILogService,\r\n    $state: ng.ui.IStateService\r\n) {\r\n    \"ngInject\";\r\n\r\n    $rootScope.$on('$stateChangeStart',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            $rootScope[RoutingVar] = true;\r\n        }\r\n    );\r\n\r\n    $rootScope.$on('$stateChangeSuccess',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            // Unset routing variable to disable page transition\r\n            $rootScope[RoutingVar] = false;                \r\n        }\r\n    );\r\n\r\n    // Intercept route error\r\n    $rootScope.$on('$stateChangeError',\r\n        (event, toState, toParams, fromState, fromParams, error) => {\r\n            // Unset routing variable to disable page transition\r\n            $rootScope[RoutingVar] = false;\r\n\r\n            $log.error('Error while switching route to ' + toState.name);\r\n            $log.error(error);\r\n        }\r\n    );\r\n\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .run(hookRoutingEvents);\r\n    ","angular.module('pipRouting', ['ui.router']);\r\n\r\nimport './BackDecorator';\r\nimport './RedirectDecorator';\r\nimport './RoutingEvents';\r\n\r\nexport * from './BackDecorator';\r\nexport * from './RoutingEvents';\r\n","import { IIdentityService, IIdentityProvider } from './IIdentityService';\r\n\r\nexport let IdentityRootVar = \"$identity\";\r\nexport let IdentityChangedEvent = \"pipIdentityChanged\";\r\n\r\nclass IdentityService implements IIdentityService {\r\n    private _identity: any;\r\n    private _setRootVar: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n\r\n    public constructor(\r\n        setRootVar: boolean,\r\n        identity: any,\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._identity = identity;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n\r\n        this.setRootVar();\r\n    }\r\n\r\n    private setRootVar(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[IdentityRootVar] = this._identity;\r\n    }\r\n\r\n    public get identity(): any {\r\n        return this._identity;\r\n    }\r\n\r\n    public set identity(value: any) {\r\n        this._identity = value;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(IdentityChangedEvent, this._identity);\r\n\r\n        let identity: any = value || {};\r\n        this._log.debug(\"Changed identity to \" + JSON.stringify(identity));\r\n    }\r\n}\r\n\r\nclass IdentityProvider implements IdentityProvider {\r\n    private _setRootVar = true;\r\n    private _identity: any = null;\r\n    private _service: IdentityService = null;\r\n\r\n    public constructor() { }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get identity(): any {\r\n        return this._identity;  \r\n    }\r\n\r\n    public set identity(value: any) {\r\n        this._identity = value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new IdentityService(this._setRootVar, this._identity, $rootScope, $log);\r\n\r\n        return this._service;\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipSession')\r\n    .provider('pipIdentity', IdentityProvider);\r\n","import { ISessionService, ISessionProvider } from './ISessionService';\r\n\r\nexport const SessionRootVar = \"$session\";\r\nexport const SessionOpenedEvent = \"pipSessionOpened\";\r\nexport const SessionClosedEvent = \"pipSessionClosed\";\r\n\r\nclass SessionService implements ISessionService {\r\n    private _setRootVar: boolean;\r\n    private _session: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n\r\n    public constructor(\r\n        setRootVar: boolean, \r\n        session: any, \r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._session = session;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n\r\n        this.setRootVar();\r\n    }\r\n    \r\n    private setRootVar(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[SessionRootVar] = this._session;\r\n    }\r\n\r\n    public get session(): any {\r\n        return this._session;\r\n    }\r\n\r\n    public isOpened(): boolean {\r\n        return this._session != null;\r\n    }\r\n\r\n    public open(session: any, fullReset: boolean = false, partialReset: boolean = false) {\r\n        if (session == null)\r\n            throw new Error(\"Session cannot be null\");\r\n\r\n        this._session = session;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(SessionOpenedEvent, session);\r\n\r\n        this._log.debug(\"Opened session \" + session);\r\n    }\r\n\r\n    public close(fullReset: boolean = false, partialReset: boolean = false) {\r\n        let oldSession = this._session;\r\n\r\n        this._session = null;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(SessionClosedEvent, oldSession);\r\n\r\n        this._log.debug(\"Closed session \" + oldSession);\r\n    }\r\n}\r\n\r\nclass SessionProvider implements ISessionProvider {\r\n    private _setRootVar = true;\r\n    private _session: any = null;\r\n    private _service: SessionService = null;\r\n\r\n    public constructor() { }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get session(): any {\r\n        return this._session;  \r\n    }\r\n\r\n    public set session(value: any) {\r\n        this._session = value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SessionService(this._setRootVar, this._session, $rootScope, $log);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipSession')\r\n    .provider('pipSession', SessionProvider); \r\n","angular.module('pipSession', []);\r\n\r\nimport './IdentityService';\r\nimport './SessionService';\r\n\r\nexport * from './IIdentity';\r\nexport * from './IIdentityService';\r\nexport * from './IdentityService';\r\n\r\nexport * from './ISessionService';\r\nexport * from './SessionService';\r\n","import { TransactionError } from './TransactionError'\r\n\r\nexport class Transaction {\r\n    private _scope: string = null;\r\n    private _id: string = null;\r\n    private _operation: string = null;\r\n    private _error: TransactionError = new TransactionError();\r\n    private _progress: number = 0;\r\n\r\n    public constructor(scope: string) {\r\n        this._scope = scope;\r\n    }\r\n\r\n    public get scope(): string {\r\n        return this._scope;\r\n    }\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get operation(): string {\r\n        return this._operation;\r\n    }\r\n\r\n    public get progress(): number {\r\n        return this._progress;\r\n    }\r\n\r\n    public get error(): TransactionError {\r\n        return this._error;\r\n    }\r\n\r\n    public get errorMessage(): string {\r\n        return this._error.message;\r\n    }\r\n\r\n    public reset(): void {\r\n        this._id = null;\r\n        this._operation = null;\r\n        this._progress = 0;\r\n        this._error.reset();\r\n    }\r\n\r\n    public busy(): boolean {\r\n        return this._id != null;\r\n    }\r\n\r\n    public failed(): boolean {\r\n        return !this._error.empty();\r\n    }\r\n\r\n    public aborted(id: string): boolean {\r\n        return this._id != id;\r\n    }\r\n\r\n    public begin(operation: string): string {\r\n        // Transaction is already running\r\n        if (this._id != null) return null;\r\n\r\n        this._id = new Date().getTime().toString();\r\n        this._operation = operation || 'PROCESSING'\r\n        this._error.reset();\r\n\r\n        return this._id;\r\n    }\r\n\r\n    public update(progress: number): void {\r\n        this._progress = Math.max(progress, 100);\r\n    }\r\n\r\n    public abort(): void {\r\n        this._id = null;\r\n        this._error.reset();\r\n    }\r\n\r\n    public end(error?: any): void {\r\n        this._error.decode(error);\r\n        this._id = null;\r\n    }\r\n}\r\n","export class TransactionError {\r\n    public code: string;\r\n    public message: string;\r\n    public details: any;\r\n    public cause: string;\r\n    public stack_trace: string;\r\n\r\n    public constructor(error?: any) {\r\n        if (error != null)\r\n            this.decode(error);\r\n    }\r\n\r\n    public reset(): void {\r\n        this.code = null;\r\n        this.message = null;\r\n        this.details = null;\r\n        this.cause = null;\r\n        this.stack_trace = null;\r\n    }\r\n\r\n    public empty(): boolean {\r\n        return this.message = null && this.code == null;\r\n    }\r\n\r\n    public decode(error: any): void {\r\n        this.reset();\r\n\r\n        if (error == null) return;\r\n\r\n        // Process regular messages\r\n        if (error.message) {\r\n            this.message = error.message;\r\n        }\r\n\r\n        // Process server application errors\r\n        if (error.data) {\r\n            if (error.data.code) { \r\n                // process server error codes here\r\n                this.message = this.message || 'ERROR_' + error.data.code;\r\n                this.code = this.code || error.data.code;\r\n            }\r\n\r\n            if (error.data.message) {\r\n                this.message = this.message || error.data.message;\r\n            }\r\n\r\n            this.message = this.message || error.data;\r\n            this.details = this.details || error.data;\r\n\r\n            this.cause = error.data.cause;\r\n            this.stack_trace = error.data.stack_trace;\r\n            this.details = error.data.details;            \r\n        }\r\n\r\n        // Process standard HTTP errors\r\n        if (error.statusText) {\r\n            this.message = this.message || error.statusText;\r\n        }\r\n        if (error.status) {\r\n            this.message = this.message || 'ERROR_' + error.status;\r\n            this.code = this.code || error.status;\r\n        }\r\n        \r\n        this.message = this.message || error;\r\n        this.details = this.details || error;\r\n    }\r\n}\r\n","import { Transaction } from './Transaction';\r\nimport { ITransactionService } from './ITransactionService';\r\n\r\nclass TransactionService implements ITransactionService {\r\n    private _transactions: Transaction = <Transaction>{};\r\n\r\n    public constructor() {}\r\n\r\n    public create(scope?: string): Transaction {\r\n        let transaction: Transaction = new Transaction(scope);\r\n        \r\n        if (scope != null)\r\n            this._transactions[scope] = transaction;\r\n\r\n        return transaction;\r\n    }\r\n\r\n    public get(scope?: string): Transaction {\r\n        let transaction: Transaction = scope != null ? <Transaction>this._transactions[scope] : null;\r\n\r\n        if (transaction == null) {\r\n            transaction = new Transaction(scope);\r\n            if (scope != null)\r\n                this._transactions[scope] = transaction;\r\n        }\r\n\r\n        return transaction;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTransaction')\r\n    .service('pipTransaction', TransactionService);\r\n","import { ITranslateService } from '../translate/ITranslateService';\r\n\r\nfunction configureTransactionStrings($injector: ng.auto.IInjectorService) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate: ITranslateService = $injector.has('pipTranslateProvider') \r\n        ? <ITranslateService>$injector.get('pipTranslateProvider') : null;\r\n\r\n    if (pipTranslate) {\r\n        pipTranslate.setTranslations('en', {\r\n            'ENTERING': 'Entering...',\r\n            'PROCESSING': 'Processing...',\r\n            'LOADING': 'Loading...',\r\n            'SAVING': 'Saving...'\r\n        });\r\n\r\n        pipTranslate.setTranslations('ru', {\r\n            'ENTERING': '  ...',\r\n            'PROCESSING': '...',\r\n            'LOADING': '...',\r\n            'SAVING': '...'\r\n        });   \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipTransaction')\r\n    .config(configureTransactionStrings);\r\n","angular.module('pipTransaction', []);\r\n\r\nimport './TransactionStrings';\r\nimport './TransactionError';\r\nimport './Transaction';\r\nimport './TransactionService';\r\n\r\nexport * from './TransactionError';\r\nexport * from './Transaction';\r\nexport * from './ITransactionService';\r\n","import { ITranslateService } from '../translate/ITranslateService';\r\n\r\nfunction translateDirective(pipTranslate): ng.IDirective {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {\r\n            key1: '@pipTranslate',\r\n            key2: '@key'\r\n        },\r\n        link: (scope: any, element: ng.IAugmentedJQuery, attrs: ng.IAttributes) => {\r\n            let key: string = scope.key1 || scope.key2;\r\n            let value: string = pipTranslate.translate(key);\r\n            element.text(value);\r\n        }\r\n    };\r\n}\r\n\r\nfunction translateHtmlDirective(pipTranslate: ITranslateService): ng.IDirective {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {\r\n            key1: '@pipTranslateHtml',\r\n            key2: '@key'\r\n        },\r\n        link: (scope: any, element: ng.IAugmentedJQuery, attrs: ng.IAttributes) => {\r\n            let key: string = scope.key1 || scope.key2;\r\n            let value: string = pipTranslate.translate(key);\r\n            element.html(value);\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .directive('pipTranslate', translateDirective)\r\n    .directive('pipTranslateHtml', translateHtmlDirective);\r\n","import { ITranslateService } from './ITranslateService';\r\n\r\nfunction translateFilter(pipTranslate: ITranslateService) {\r\n    \"ngInject\";\r\n\r\n    return function (key: string) {\r\n        return pipTranslate.translate(key) || key;\r\n    }\r\n}\r\n\r\nfunction optionalTranslateFilter($injector: ng.auto.IInjectorService) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate: ITranslateService = $injector.has('pipTranslate') \r\n        ? <ITranslateService>$injector.get('pipTranslate') : null;\r\n\r\n    return function (key: string) {\r\n        return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .filter('translate', translateFilter);\r\n","import { Translation } from './Translation';\r\nimport { ResetPageEvent } from '../utilities/PageResetService';\r\nimport { ITranslateService, ITranslateProvider } from './ITranslateService';\r\n\r\nexport let LanguageRootVar = \"$language\";\r\nexport let LanguageChangedEvent = \"pipLanguageChanged\";    \r\n\r\nclass TranslateService implements ITranslateService {\r\n    private _translation: Translation;\r\n    private _setRootVar: boolean;\r\n    private _persist: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _window: ng.IWindowService;\r\n    private _mdDateLocale: angular.material.IDateLocaleProvider;\r\n\r\n    public constructor(\r\n        translation: Translation,\r\n        setRootVar: boolean,\r\n        persist: boolean,\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService,\r\n        $window: ng.IWindowService,\r\n        $mdDateLocale: angular.material.IDateLocaleProvider,\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._persist = persist;\r\n        this._translation = translation;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._window = $window;\r\n        this._mdDateLocale = $mdDateLocale;\r\n\r\n        if (this._persist && this._window.localStorage)\r\n            this._translation.language = this._window.localStorage.getItem('language') || this._translation.language;\r\n\r\n        this._log.debug(\"Set language to \" + this._translation.language);\r\n\r\n        this.save();\r\n    }\r\n\r\n    private changeLocale(locale: string) {\r\n        if (!locale) return;\r\n\r\n        // var localeDate: moment.MomentLanguageData;\r\n        var localeDate: any;\r\n\r\n        moment.locale(locale);\r\n        localeDate = moment.localeData();\r\n\r\n        this._mdDateLocale.months = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format;\r\n        this._mdDateLocale.shortMonths = angular.isArray(localeDate._monthsShort) ? localeDate._monthsShort : localeDate._monthsShort.format;\r\n        this._mdDateLocale.days = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format;\r\n        this._mdDateLocale.shortDays = localeDate._weekdaysMin;\r\n        this._mdDateLocale.firstDayOfWeek = localeDate._week.dow;\r\n    }\r\n\r\n    private save(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[LanguageRootVar] = this._translation.language;\r\n\r\n        if (this._persist && this._window.localStorage != null)\r\n            this._window.localStorage.setItem('language', this._translation.language);\r\n    }\r\n\r\n    public get language(): string {\r\n        return this._translation.language;\r\n    }\r\n\r\n    public set language(value: string) {\r\n        if (value != this._translation.language) {\r\n            this._translation.language = value;\r\n            \r\n            this._log.debug(\"Changing language to \" + value);\r\n\r\n            this.changeLocale(this._translation.language);\r\n            this.save();   \r\n\r\n            this._rootScope.$emit(LanguageChangedEvent, value);\r\n            this._rootScope.$emit(ResetPageEvent);\r\n        }\r\n    }\r\n\r\n    public use(language: string): string {\r\n        if (language != null)\r\n            this.language = language;\r\n        return this.language;\r\n    }\r\n\r\n    public setTranslations(language: string, translations: any): void {\r\n        return this._translation.setTranslations(language, translations);\r\n    }\r\n\r\n    public translations(language: string, translations: any): void {\r\n        return this._translation.setTranslations(language, translations);\r\n    }\r\n\r\n    public translate(key: string): string {\r\n        return this._translation.translate(key);\r\n    }\r\n\r\n    public translateArray(keys: string[]): string[] {\r\n        return this._translation.translateArray(keys);\r\n    }\r\n    \r\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n        return this._translation.translateSet(keys, keyProp, valueProp);\r\n    }\r\n\r\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n        return this._translation.translateObjects(items, keyProp, valueProp);\r\n    }\r\n\r\n    public translateWithPrefix(prefix: string, key: string) {\r\n        return this._translation.translateWithPrefix(prefix, key);\r\n    }\r\n\r\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        return this._translation.translateSetWithPrefix(prefix, keys, keyProp, valueProp);\r\n    }\r\n\r\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        return this._translation.translateSetWithPrefix2(prefix, keys, keyProp, valueProp);\r\n    }\r\n}\r\n\r\nclass TranslateProvider extends Translation implements ITranslateProvider {\r\n    private _translation: Translation;\r\n    private _setRootVar: boolean = true;\r\n    private _persist: boolean = true;\r\n    private _service: TranslateService;\r\n    \r\n    public constructor() {\r\n        super();\r\n    }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get persist(): boolean {\r\n        return this._persist;  \r\n    }\r\n\r\n    public set persist(value: boolean) {\r\n        this._persist = !!value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $window: ng.IWindowService,\r\n        $mdDateLocale: angular.material.IDateLocaleProvider\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null) \r\n            this._service = new TranslateService(this, this._setRootVar, this._persist, $rootScope, $log, $window, $mdDateLocale);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nfunction initTranslate(pipTranslate: ITranslateService) {\r\n    pipTranslate.language;\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .provider('pipTranslate', TranslateProvider)\r\n    .run(initTranslate);\r\n","export class Translation {\r\n    protected _language: string = 'en';\r\n    protected _translations = {\r\n        en: {\r\n            'en': 'English',\r\n            'ru': 'Russian',\r\n            'es': 'Spanish',\r\n            'pt': 'Portuguese',\r\n            'de': 'German',\r\n            'fr': 'French'\r\n        },\r\n        ru: {\r\n            'en': '',\r\n            'ru': '',\r\n            'es': '',\r\n            'pt': '',\r\n            'de': '',\r\n            'fr': ''\r\n        }\r\n    };\r\n\r\n    public constructor() {}\r\n\r\n    public get language(): string { return this._language; }\r\n    public set language(value: string) { this._language = value; }\r\n\r\n    public use(language: string): string {\r\n        if (language != null)\r\n            this._language = language;\r\n        return this._language;\r\n    }\r\n\r\n    // Set translation strings for specific language\r\n    public setTranslations(language: string, translations: any): void {\r\n        let map = this._translations[language] || {};\r\n        this._translations[language] = _.extend(map, translations);\r\n    }\r\n\r\n    // Yet another method to set translation strings for specific language\r\n    public translations(language: string, translations: any): void {\r\n        this.setTranslations(language, translations);\r\n    }\r\n\r\n    // Translate a string by key using set language\r\n    public translate(key: string): string {\r\n        if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n        let translations = this._translations[this._language] || {};\r\n        return translations[key] || key;\r\n    }\r\n\r\n    // Translate an array of strings\r\n    public translateArray(keys: string[]): string[] {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        let values: string[] = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (k: string) {\r\n            let key = k || '';\r\n            values.push(translations[key] || key);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate an array of strings into array of objects (set)\r\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n\r\n        let values: any[] = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key: string) {\r\n            let value: any = {};\r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[key] || key;\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate a collection of objects\r\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n        if (_.isNull(items) || items.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'name';\r\n        valueProp = valueProp || 'nameLocal';\r\n\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(items, function (item: any) {\r\n            let key = item[keyProp] || '';\r\n\r\n            item[valueProp] = translations[key] || key;\r\n        });\r\n\r\n        return items;\r\n    }\r\n\r\n    // Translate a string by key  with prefix using set language todo\r\n    public translateWithPrefix(prefix: string, key: string) {\r\n        prefix = prefix ? prefix + '_' : '';\r\n        key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n        if (key == null) return '';\r\n        let translations = this._translations[this._language] || {};\r\n        return translations[key] || key;\r\n    };\r\n\r\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key: string) {\r\n            let value: any = {}; \r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[prefix + '_' + key] || key;\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key: string) {\r\n            let value: any = {};\r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[prefix + key.replace(/ /g, '_').toUpperCase()]\r\n                || (prefix + key.replace(/ /g, '_').toUpperCase());\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n}\r\n","angular.module('pipTranslate', []);\r\n\r\nimport './Translation';\r\nimport './TranslateService';\r\nimport './TranslateFilter';\r\nimport './TranslateDirective';\r\n\r\nexport * from './Translation';\r\nexport * from './ITranslateService';\r\nexport * from './TranslateService';\r\n","import { ICodes } from './ICodes';\r\n\r\nclass Codes implements ICodes {\r\n    // Simple version of string hashcode\r\n    public hash(value: string): number {\r\n        if (value == null) return 0;\r\n        \r\n        let result: number = 0;\r\n        for (let i = 0; i < value.length; i++)\r\n            result += value.charCodeAt(i);\r\n\r\n        return result;\r\n    }\r\n\r\n    // Generates random big number for verification codes\r\n    public verification(): string {\r\n        return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipCodes', [])\r\n    .service('pipCodes', Codes);\r\n","import { IFormat } from './IFormat';\r\n\r\nclass Format implements IFormat {\r\n    // Cached for parsed formats\r\n    private cache = {};\r\n\r\n    // Creates a sample line from a text\r\n    public sample(value: string, maxLength: number): string {\r\n        if (!value || value == '') {\r\n            return '';\r\n        }\r\n\r\n        var length: number = value.indexOf('\\n');\r\n        length = length >= 0 ? length : value.length;\r\n        length = length < maxLength ? value.length : maxLength;\r\n\r\n        return value.substring(0, length);\r\n    }\r\n\r\n    private strRepeat(str: string, qty: number): string {\r\n        if (qty < 1) { \r\n            return '';\r\n        }\r\n        var result: string = '';\r\n        while (qty > 0) {\r\n            if (qty & 1) result += str;\r\n            qty >>= 1, str += str;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private getType(variable): string {\r\n        return toString.call(variable).slice(8, -1).toLowerCase();\r\n    }\r\n\r\n    private parseFormat(fmt: string): any {\r\n        let _fmt: string = fmt, match = [], parse_tree = [], arg_names: number = 0;\r\n        while (_fmt) {\r\n            if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                parse_tree.push(match[0]);\r\n            }\r\n            else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                parse_tree.push('%');\r\n            }\r\n            else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                if (match[2]) {\r\n                    arg_names |= 1;\r\n                    let field_list: string[] = [], replacement_field: string = match[2], field_match: string[] = [];\r\n                    if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                        field_list.push(field_match[1]);\r\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                            if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                            }\r\n                            else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                            }\r\n                            else {\r\n                                throw new Error('Unknown error');\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw new Error('Unknown error');\r\n                    }\r\n                    match[2] = field_list;\r\n                }\r\n                else {\r\n                    arg_names |= 2;\r\n                }\r\n                if (arg_names === 3) {\r\n                    throw new Error('Mixing positional and named placeholders is not (yet) supported');\r\n                }\r\n                parse_tree.push(match);\r\n            }\r\n            else {\r\n                throw new Error('Unknown error');\r\n            }\r\n            _fmt = _fmt.substring(match[0].length);\r\n        }\r\n        return parse_tree;\r\n    }\r\n\r\n    private format(parse_tree: any, argv: any): string {\r\n        let cursor: number = 0; \r\n        let tree_length: number = parse_tree.length; \r\n        let output = [];\r\n\r\n        for (let i = 0; i < tree_length; i++) {\r\n            let node_type = this.getType(parse_tree[i]);\r\n            if (node_type === 'string') {\r\n                output.push(parse_tree[i]);\r\n            }\r\n            else if (node_type === 'array') {\r\n                let match = parse_tree[i]; // convenience purposes only\r\n                let arg: any;\r\n                if (match[2]) { // keyword argument\r\n                    arg = argv[cursor];\r\n                    for (let k = 0; k < match[2].length; k++) {\r\n                        if (!arg.hasOwnProperty(match[2][k])) {\r\n                            throw new Error(this.sprintf('Property \"%s\" does not exist', match[2][k]));\r\n                        }\r\n                        arg = arg[match[2][k]];\r\n                    }\r\n                } else if (match[1]) { // positional argument (explicit)\r\n                    arg = argv[match[1]];\r\n                }\r\n                else { // positional argument (implicit)\r\n                    arg = argv[cursor++];\r\n                }\r\n\r\n                if (/[^s]/.test(match[8]) && (this.getType(arg) != 'number')) {\r\n                    throw new Error(this.sprintf('Expecting number but found %s', this.getType(arg)));\r\n                }\r\n                switch (match[8]) {\r\n                    case 'b': arg = arg.toString(2); break;\r\n                    case 'c': arg = String.fromCharCode(arg); break;\r\n                    case 'd': arg = parseInt(arg, 10); break;\r\n                    case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                    case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                    case 'o': arg = arg.toString(8); break;\r\n                    case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                    case 'u': arg = Math.abs(arg); break;\r\n                    case 'x': arg = arg.toString(16); break;\r\n                    case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                }\r\n                arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);                \r\n                let pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                let pad_length = match[6] - String(arg).length;\r\n                let pad = match[6] ? this.strRepeat(pad_character, pad_length) : '';\r\n                output.push(match[5] ? arg + pad : pad + arg);\r\n            }\r\n        }\r\n        return output.join('');\r\n    }\r\n    \r\n    public sprintf(message: string, ...args: any[]): string {\r\n        if (!this.cache.hasOwnProperty(message))\r\n            this.cache[message] = this.parseFormat(message);\r\n\r\n        return this.format(this.cache[message], args);\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipFormat', [])\r\n    .service('pipFormat', Format);\r\n","import { IPageResetService } from './IPageResetService';\r\n\r\n\r\nexport let ResetPageEvent: string = \"pipResetPage\";\r\nexport let ResetAreaEvent: string = \"pipResetArea\";\r\n\r\nexport let ResetRootVar: string = \"$reset\";\r\nexport let ResetAreaRootVar: string = \"$resetArea\";\r\n\r\n\r\nclass PageResetService implements IPageResetService {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public constructor(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $timeout: ng.ITimeoutService\r\n    ) {\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._timeout = $timeout;\r\n\r\n        $rootScope[ResetRootVar] = false;\r\n        $rootScope[ResetAreaRootVar] = null;\r\n    }\r\n\r\n    public reset(): void {\r\n        this._log.debug(\"Resetting the entire page\");\r\n        this.performReset(null);\r\n    }\r\n\r\n    public resetArea(area: string): void {\r\n        this._log.debug(\"Resetting the area \" + area);\r\n        this.performReset(area);\r\n    }\r\n\r\n    private performReset(area?: string): void {\r\n        this._rootScope[ResetRootVar] = area == null;\r\n        this._rootScope[ResetAreaRootVar] = area;\r\n\r\n        this._timeout(() => {\r\n            this._rootScope[ResetRootVar] = false;\r\n            this._rootScope[ResetAreaRootVar] = null;\r\n        }, 0);\r\n    }\r\n}\r\n\r\n\r\nfunction hookResetEvents(\r\n    $rootScope: ng.IRootScopeService, \r\n    pipPageReset: IPageResetService\r\n) {\r\n    $rootScope.$on(ResetPageEvent, () => { pipPageReset.reset(); });\r\n    $rootScope.$on(ResetAreaEvent, (event, area) => { pipPageReset.resetArea(area); });\r\n}\r\n\r\n\r\nangular.module('pipPageReset', [])\r\n    .service('pipPageReset', PageResetService)\r\n    .run(hookResetEvents);\r\n","import { IScrollService } from './IScrollService';\r\n\r\n\r\nclass ScrollService implements IScrollService {\r\n\r\n    public scrollTo(parentElement, childElement, animationDuration): void {\r\n        if (!parentElement || !childElement) return;\r\n        if (animationDuration == undefined) animationDuration = 300;\r\n\r\n        setTimeout(function () {\r\n            if (!$(childElement).position()) return;\r\n            var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n            if (modDiff < 20) return;\r\n            var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n            if (animationDuration > 0)\r\n                $(parentElement).animate({\r\n                    scrollTop: scrollTo + 'px'\r\n                }, animationDuration);\r\n        }, 100);\r\n    }\r\n\r\n}\r\n\r\n\r\nangular\r\n    .module('pipScroll', [])\r\n    .service('pipScroll', ScrollService);\r\n","import { ISystemInfo } from './ISystemInfo';\r\n\r\n\r\nclass SystemInfo implements ISystemInfo {\r\n    private _window: ng.IWindowService;\r\n\r\n    public constructor($window: ng.IWindowService) {\r\n        \"ngInject\";\r\n\r\n        this._window = $window;\r\n    }\r\n\r\n    // todo add support for iPhone\r\n    public get browserName(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        if (ua.search(/Edge/) > -1) return \"edge\";\r\n        if (ua.search(/MSIE/) > -1) return \"ie\";\r\n        if (ua.search(/Trident/) > -1) return \"ie\";\r\n        if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n        if (ua.search(/Opera/) > -1) return \"opera\";\r\n        if (ua.search(/OPR/) > -1) return \"opera\";\r\n        if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n        if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n        if (ua.search(/Safari/) > -1) return \"safari\";\r\n        if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n        \r\n        return \"unknown\";\r\n    }\r\n\r\n    public get browserVersion(): string {\r\n        let version;\r\n        let ua = this._window.navigator.userAgent;\r\n        let browser = this.browserName;\r\n\r\n        switch (browser) {\r\n            case \"edge\":\r\n                version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                break;\r\n            case \"ie\":\r\n                version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                break;\r\n            case \"ie11\":\r\n                browser = \"ie\";\r\n                version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                break;\r\n            case \"firefox\":\r\n                version = ua.split(\"Firefox/\")[1];\r\n                break;\r\n            case \"opera\":\r\n                version = ua.split(\"Version/\")[1];\r\n                break;\r\n            case \"operaWebkit\":\r\n                version = ua.split(\"OPR/\")[1];\r\n                break;\r\n            case \"yabrowser\":\r\n                version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"chrome\":\r\n                version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"safari\":\r\n                version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"maxthon\":\r\n                version = ua.split(\"Maxthon/\")[1];\r\n                break;\r\n        }\r\n\r\n        return version;\r\n    }\r\n    \r\n    public get platform(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) \r\n            return 'mobile';\r\n\r\n        return 'desktop';\r\n    }\r\n\r\n    public get os(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        try {\r\n            let osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [ua])[0].replace('sunos', 'solaris');\r\n            let osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n            return osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n        } catch (err) {\r\n            return 'unknown'\r\n        }\r\n    }\r\n\r\n    public isDesktop(): boolean {\r\n        return this.platform == 'desktop';\r\n    }\r\n\r\n    public isMobile(): boolean {\r\n        return this.platform == 'mobile';\r\n    }\r\n\r\n    // Todo: complete implementation\r\n    public isCordova(): boolean {\r\n        return false;\r\n    }\r\n\r\n    // Todo: Move to errors\r\n    public isSupported(supported?: any): boolean {\r\n        if (!supported) \r\n            supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n\r\n        let browser = this.browserName;\r\n        let version = this.browserVersion;\r\n        version = version.split(\".\")[0]\r\n\r\n        if (browser && supported[browser] && version >= supported[browser]) \r\n            return true;\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipSystemInfo', [])\r\n    .service('pipSystemInfo', SystemInfo);\r\n","import { ITags } from './ITags';\r\n\r\nclass Tags implements ITags {\r\n\r\n    public normalizeOne(tag: string): string {\r\n        return tag \r\n            ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n            : null;\r\n    }\r\n\r\n    public compressOne(tag: string): string {\r\n        return tag\r\n            ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n            : null;\r\n    }\r\n\r\n    public equal(tag1: string, tag2: string): boolean {\r\n        if (tag1 == null && tag2 == null)\r\n            return true;\r\n        if (tag1 == null || tag2 == null)\r\n            return false;\r\n        return this.compressOne(tag1) == this.compressOne(tag2);\r\n    }\r\n\r\n    public normalizeAll(tags: any): string[] {\r\n        if (_.isString(tags))\r\n            tags = tags.split(/( |,|;)+/);\r\n\r\n        tags = _.map(tags, (tag: string) => this.normalizeOne(tag));\r\n\r\n        return tags;\r\n    }\r\n\r\n    public compressAll(tags: any): string[] {\r\n        if (_.isString(tags))\r\n            tags = tags.split(/( |,|;)+/);\r\n\r\n        tags = _.map(tags, (tag: string) => this.compressOne(tag));\r\n\r\n        return tags;\r\n    }\r\n\r\n    public extract(entity: any, searchFields?: string[]): string[] {\r\n        let tags = this.normalizeAll(entity.tags);\r\n\r\n        _.each(searchFields, (field) => {\r\n            let text = entity[field] || '';\r\n\r\n            if (text != '') {\r\n                let hashTags = text.match(/#\\w+/g);\r\n                tags = tags.concat(this.normalizeAll(hashTags));\r\n            }\r\n        });\r\n\r\n        return _.uniq(tags);\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipTags', [])\r\n    .service('pipTags', Tags);\r\n","import { ITimerService } from './ITimerService';\r\n\r\nclass TimerEvent {\r\n    public event: string;\r\n    public timeout: number;\r\n    public interval: any;\r\n\r\n    public constructor(event: string, timeout: number) {\r\n        this.event = event;\r\n        this.timeout = timeout;\r\n    }\r\n}\r\n\r\n\r\nlet DefaultEvents: TimerEvent[] = [\r\n    new TimerEvent('pipAutoPullChanges', 60000), // 1 min\r\n    new TimerEvent('pipAutoUpdatePage', 15000), // 15 sec\r\n    new TimerEvent('pipAutoUpdateCollection', 300000) // 5 min\r\n];\r\n\r\n\r\nclass TimerService implements ITimerService {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _interval: ng.IIntervalService;        \r\n    private _started = false;\r\n    private _events: TimerEvent[] = _.cloneDeep(DefaultEvents);\r\n\r\n    public constructor(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $interval: ng.IIntervalService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._interval = $interval;\r\n    }\r\n\r\n    public isStarted(): boolean {\r\n        return this._started;\r\n    }\r\n\r\n    public addEvent(event: string, timeout: number): void {\r\n        var existingEvent = _.find(this._events, (e) => e.event == event);\r\n        if (existingEvent != null) return;\r\n\r\n        let newEvent = <TimerEvent> {\r\n            event: event,\r\n            timeout: timeout\r\n        };\r\n        this._events.push(newEvent);\r\n\r\n        if (this._started)\r\n            this.startEvent(newEvent);\r\n    }\r\n\r\n    public removeEvent(event: string): void {\r\n        for (let i = this._events.length - 1; i >= 0; i--) {\r\n            let existingEvent = this._events[i];\r\n            if (existingEvent.event == event) {\r\n                this.stopEvent(existingEvent);\r\n                this._events.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    public clearEvents(): void {\r\n        this.stop();\r\n        this._events = [];\r\n    }\r\n\r\n    private startEvent(event: TimerEvent): void {\r\n        event.interval = this._interval(\r\n            () => { \r\n                this._log.debug('Generated timer event ' + event.event); \r\n                this._rootScope.$emit(event.event)\r\n            },\r\n            event.timeout\r\n        )\r\n    }\r\n\r\n    private stopEvent(event: TimerEvent): void {\r\n        if (event.interval != null) {\r\n            try {\r\n                this._interval.cancel(event.interval);\r\n            } catch (ex) {\r\n                // Do nothing\r\n            }\r\n            event.interval = null;\r\n        }\r\n    }\r\n\r\n    public start(): void {\r\n        if (this._started) return;\r\n\r\n        _.each(this._events, (event) => {\r\n            this.startEvent(event);\r\n        });\r\n\r\n        this._started = true;\r\n    }\r\n\r\n    public stop(): void {\r\n        _.each(this._events, (event) => {\r\n            this.stopEvent(event);\r\n        });\r\n\r\n        this._started = false;\r\n    }\r\n}\r\n\r\n\r\nangular.module('pipTimer', [])\r\n    .service('pipTimer', TimerService);\r\n","import './Format';\r\nimport './TimerService';\r\nimport './ScrollService';\r\nimport './Tags';\r\nimport './Codes';\r\nimport './SystemInfo';\r\nimport './PageResetService';\r\n\r\nexport * from './IFormat';\r\nexport * from './ITimerService';\r\nexport * from './IScrollService';\r\nexport * from './ITags';\r\nexport * from './ICodes';\r\nexport * from './ISystemInfo';\r\nexport * from './IPageResetService';","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipButtons', [\r\n        'pipToggleButtons',\r\n        'pipRefreshButton',\r\n        'pipFabTooltipVisibility'\r\n    ]);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Optional filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    angular.module('pipHelp.Translate', [])\r\n           .filter('translate', ($injector) => {\r\n        let pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return (key) => {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nclass FabTooltipVisibilityController {\r\n    private _element;\r\n    private _scope: angular.IScope;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    constructor(\r\n        $element: any,\r\n        $attrs: angular.IAttributes,\r\n        $scope: angular.IScope,\r\n        $timeout: ng.ITimeoutService,\r\n        $parse\r\n    ) {\r\n        \"ngInject\";\r\n        let trigGetter = $parse($attrs['pipFabTooltipVisibility']),\r\n            showGetter = $parse($attrs['pipFabShowTooltip']),\r\n            showSetter = showGetter.assign;\r\n\r\n        $scope.$watch(trigGetter, (isOpen) => {\r\n            if (!_.isFunction(showSetter)) return;\r\n\r\n            if (isOpen) {\r\n                $timeout(() => {\r\n                    showSetter($scope, isOpen);\r\n                }, 600);\r\n            } else {\r\n                showSetter($scope, isOpen);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n(() => {\r\n    function pipFabTooltipVisibility($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: FabTooltipVisibilityController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipFabTooltipVisibility', [])\r\n        .directive('pipFabTooltipVisibility', pipFabTooltipVisibility);\r\n\r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ninterface IRefreshButtonBindings {\r\n    [key: string]: any;\r\n\r\n    text: any,\r\n    visible: any,\r\n    onRefresh: any\r\n}\r\n\r\nconst RefreshButtonBindings: IRefreshButtonBindings = {\r\n    text: '<pipText',\r\n    visible: '<pipVisible',\r\n    onRefresh: '&?pipRefresh'\r\n}\r\n\r\nclass RefreshButtonChanges implements ng.IOnChangesObject, IRefreshButtonBindings {\r\n    [key: string]: ng.IChangesObject<any>;\r\n    // Not one way bindings\r\n    onRefresh: ng.IChangesObject<({$event: any}) => ng.IPromise<any>>;\r\n    // One way bindings\r\n    text: ng.IChangesObject<string>;\r\n    visible: ng.IChangesObject<boolean>;\r\n}\r\n\r\nclass RefreshButtonController implements IRefreshButtonBindings {\r\n\r\n    private _textElement: any;\r\n    private _buttonElement: any;\r\n    private _width: number;\r\n\r\n    public text: string;\r\n    public visible: boolean;\r\n    public onRefresh: (param: {$event: ng.IAngularEvent}) => ng.IPromise<any>;\r\n\r\n    constructor(\r\n        private $scope: ng.IScope,\r\n        private $element: any,\r\n        private $attrs: ng.IAttributes\r\n    ) { }\r\n\r\n    public $postLink() {\r\n        this._buttonElement = this.$element.children('.md-button');\r\n        this._textElement = this._buttonElement.children('.pip-refresh-text');\r\n        \r\n        this.show();\r\n    }\r\n\r\n    public $onChanges(changes: RefreshButtonChanges) {\r\n        if (changes.visible.currentValue === true) {\r\n            this.text = changes.text.currentValue;\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    public onClick($event) {\r\n        if (this.onRefresh) {\r\n            this.onRefresh({$event: $event});\r\n        }\r\n    }\r\n\r\n    private show() {\r\n        if (this._textElement === undefined || this._buttonElement === undefined) {\r\n            return;\r\n        }\r\n        // Set new text\r\n        this._textElement.text(this.text);\r\n        // Show button\r\n        this._buttonElement.show();\r\n        // Adjust position\r\n        const width = this._buttonElement.width();\r\n        this._buttonElement.css('margin-left', '-' + width / 2 + 'px');\r\n    }\r\n\r\n    private hide() {\r\n        this._buttonElement.hide();\r\n    }\r\n}\r\n\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    const RefreshButtonComponent = {\r\n        bindings: RefreshButtonBindings,\r\n        controller: RefreshButtonController,\r\n        template: '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"$ctrl.onClick($event)\" aria-label=\"REFRESH\">' +\r\n            '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\r\n            '<span class=\"pip-refresh-text\"></span>' +\r\n            '</md-button>'\r\n    };\r\n\r\n    angular.module('pipRefreshButton', ['ngMaterial'])\r\n        .component('pipRefreshButton', RefreshButtonComponent);\r\n\r\n})();","// /// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nclass ToggleButton {\r\n    id: any;\r\n    name: string;\r\n    disabled: boolean;\r\n    level: number;\r\n    diselectable: boolean;\r\n    filled: boolean;\r\n}\r\n\r\ninterface IToggleButtonsBindings {\r\n    [key: string]: any;\r\n\r\n    ngDisabled: any,\r\n    buttons: any,\r\n    currentButtonValue: any,\r\n    currentButton: any,\r\n    multiselect: any,\r\n    change: any,\r\n    onlyToggle: any\r\n}\r\n\r\nconst ToggleButtonsBindings: IToggleButtonsBindings = {\r\n    ngDisabled: '<?',\r\n    buttons: '<pipButtons',\r\n    currentButtonValue: '=ngModel',\r\n    currentButton: '=?pipButtonObject',\r\n    multiselect: '<?pipMultiselect',\r\n    change: '&ngChange',\r\n    onlyToggle: '<?pipOnlyToggle'\r\n}\r\n\r\nclass ToggleButtonsChanges implements ng.IOnChangesObject, IToggleButtonsBindings {\r\n    [key: string]: ng.IChangesObject<any>;\r\n    // Not one way bindings\r\n    currentButtonValue: any;\r\n    currentButton: any;\r\n    change: ng.IChangesObject<() => ng.IPromise<void>>;\r\n    // One way bindings\r\n    ngDisabled: ng.IChangesObject<boolean>;\r\n    buttons: ng.IChangesObject<ToggleButton[]>;\r\n    multiselect: ng.IChangesObject<boolean>;\r\n    onlyToggle: ng.IChangesObject<boolean>;\r\n}\r\n\r\nclass ToggleButtonsController implements IToggleButtonsBindings {\r\n    lenght: number;\r\n\r\n    public ngDisabled: boolean;\r\n    public class: string;\r\n    public multiselect: boolean;\r\n    public buttons: ToggleButton[];\r\n    public disabled: boolean;\r\n    public currentButtonValue: any;\r\n    public currentButtonIndex: number;\r\n    public currentButton: any;\r\n    public change: () => ng.IPromise<any>;\r\n    public onlyToggle: boolean;\r\n    public pipMedia: any;\r\n\r\n    constructor(\r\n        private $element: any,\r\n        private $attrs: angular.IAttributes,\r\n        private $scope: angular.IScope,\r\n        private $timeout: ng.ITimeoutService,\r\n        $injector: ng.auto.IInjectorService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this.pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this.class = $attrs['class'] || '';\r\n        const index = _.indexOf(this.buttons, _.find(this.buttons, {\r\n            id: this.currentButtonValue\r\n        }));\r\n        this.currentButtonIndex = index < 0 ? 0 : index;\r\n        this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\r\n    }\r\n\r\n    public $onChanges(changes: ToggleButtonsChanges) {\r\n        this.multiselect = changes.multiselect ? changes.multiselect.currentValue : false;\r\n        this.disabled = changes.ngDisabled ? changes.ngDisabled.currentValue : false;\r\n        this.onlyToggle = changes.onlyToggle ? changes.onlyToggle.currentValue : false;\r\n\r\n        this.buttons = !changes.buttons || _.isArray(changes.buttons.currentValue) && changes.buttons.currentValue.length === 0 ? \r\n            [] : changes.buttons.currentValue;\r\n\r\n        const index = _.indexOf(this.buttons, _.find(this.buttons, {\r\n            id: this.currentButtonValue\r\n        }));\r\n        this.currentButtonIndex = index < 0 ? 0 : index;\r\n        this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\r\n    }\r\n\r\n    public $postLink() {\r\n        this.$element\r\n            .on('focusin', () => {\r\n                this.$element.addClass('focused-container');\r\n            })\r\n            .on('focusout', () => {\r\n                this.$element.removeClass('focused-container');\r\n            });\r\n    }\r\n\r\n    public buttonSelected(index) {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.currentButtonIndex = index;\r\n        this.currentButton = this.buttons[this.currentButtonIndex];\r\n        this.currentButtonValue = this.currentButton.id || index;\r\n\r\n        this.$timeout(() => {\r\n            if (this.change) {\r\n                this.change();\r\n            }\r\n        });\r\n    }\r\n\r\n    public enterSpacePress(event) {\r\n        this.buttonSelected(event.index);\r\n    }\r\n\r\n    public highlightButton(index) {\r\n        if (this.multiselect &&\r\n            !_.isUndefined(this.currentButton.level) &&\r\n            !_.isUndefined(this.buttons[index].level)) {\r\n\r\n            return this.currentButton.level >= this.buttons[index].level;\r\n        }\r\n\r\n        return this.currentButtonIndex == index;\r\n    }\r\n}\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    // We can use this variant, which requires less memory allocation\r\n    /*const ToggleButtons = {\r\n        bindings: ToggleButtonsBindings,\r\n        templateUrl: 'toggle_buttons/toggle_buttons.html',\r\n        controller: ToggleButtonsController,\r\n    }*/\r\n\r\n    // Or this variant, which safer\r\n    /*class ToggleButtons implements ng.IComponentOptions {\r\n        public bindings: IToggleButtonsBindings;\r\n        public controller: ng.Injectable<ng.IControllerConstructor>;\r\n        public templateUrl: string;\r\n\r\n        constructor() {\r\n            this.bindings = ToggleButtonsBindings;\r\n            this.controller = ToggleButtonsController;\r\n            this.templateUrl = 'toggle_buttons/toggle_buttons.html';\r\n        }\r\n    }*/\r\n\r\n    // Or, I think, this variant. \r\n    // This one is safe because we've specified interface and requires less memory allocation because we use constant.\r\n    const ToggleButtons: ng.IComponentOptions = {\r\n        bindings: ToggleButtonsBindings,\r\n        templateUrl: 'toggle_buttons/toggle_buttons.html',\r\n        controller: ToggleButtonsController\r\n    }\r\n\r\n    angular\r\n        .module('pipToggleButtons', ['pipButtons.Templates'])\r\n        .component('pipToggleButtons', ToggleButtons);\r\n    \r\n})();","(function(module) {\ntry {\n  module = angular.module('pipButtons.Templates');\n} catch (e) {\n  module = angular.module('pipButtons.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toggle_buttons/toggle_buttons.html',\n    '<div class=\"pip-toggle-buttons layout-row {{$ctrl.class}}\" pip-selected=\"$ctrl.bufButtonIndex\" pip-enter-space-press=\"$ctrl.enterSpacePress($event)\" ng-if=\"!$ctrl.pipMedia(\\'xs\\') || $ctrl.onlyToggle\"><md-button tabindex=\"-1\" ng-repeat=\"button in $ctrl.buttons\" ng-class=\"{\\'md-accent md-raised selected color-accent-bg\\' : $ctrl.highlightButton($index)}\" ng-attr-style=\"{{ \\'background-color:\\' + ($ctrl.highlightButton($index) ? button.backgroundColor : \\'\\') + \\'!important\\' }}\" class=\"pip-selectable pip-chip-button flex\" ng-click=\"$ctrl.buttonSelected($index, $event)\" ng-disabled=\"button.disabled || $ctrl.disabled\">{{button.name || button.title | translate}} <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span></md-button></div><md-input-container class=\"md-block\" ng-if=\"$ctrl.pipMedia(\\'xs\\') && !$ctrl.onlyToggle\"><md-select ng-model=\"$ctrl.currentButtonIndex\" ng-disabled=\"$ctrl.disabled\" aria-label=\"DROPDOWN\" md-on-close=\"$ctrl.buttonSelected($ctrl.currentButtonIndex)\"><md-option ng-repeat=\"action in $ctrl.buttons\" value=\"{{ ::$index }}\">{{ (action.title || action.name) | translate }} <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span></md-option></md-select></md-input-container>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-buttons-html.min.js.map\n","/**\r\n * @file Split layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global $, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSplit', []);\r\n\r\n    thisModule.run( function($rootScope, pipSplit) {\r\n        // Intercept routes\r\n        $rootScope.$on('$stateChangeStart',\r\n            function(event, toState, toParams, fromState, fromParams) {\r\n                // Split animation\r\n                var splitElements = $('.pip-split');\r\n                \r\n                if (splitElements.length > 0) {\r\n                    splitElements.removeClass('pip-transition-forward');\r\n                    splitElements.removeClass('pip-transition-back');\r\n                    if (toState.name != fromState.name) {\r\n                        if (pipSplit.forwardTransition(toState, fromState)) {\r\n                            splitElements.addClass('pip-transition-forward');\r\n                        } else {\r\n                            splitElements.addClass('pip-transition-back');\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        );\r\n\r\n    });\r\n\r\n    thisModule.provider('pipSplit', function(): any {\r\n        var transitionSequences = [];\r\n\r\n        this.addTransitionSequence = addTransitionSequence;\r\n\r\n        this.$get = function () {\r\n            return {\r\n                forwardTransition: forwardTransition\r\n            };\r\n        };\r\n\r\n        return;\r\n\r\n        //----------------------------\r\n\r\n        function addTransitionSequence(sequence) {\r\n            if (!_.isArray(sequence) || sequence.length == 0) {\r\n                throw new Error('Transition sequence must be an array of state names');\r\n            }\r\n\r\n            transitionSequences.push(sequence);\r\n        }\r\n\r\n        function forwardTransition(toState, fromState) {\r\n            var i, toIndex, fromIndex;\r\n\r\n            for (i = 0; i < transitionSequences.length; i++) {\r\n                toIndex = transitionSequences[i].indexOf(toState.name),\r\n                fromIndex = transitionSequences[i].indexOf(fromState.name);\r\n\r\n                if (toIndex > -1) {\r\n                    return toIndex > fromIndex;\r\n                }\r\n            }\r\n\r\n            return false\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","export interface IColorPicker {\r\n    class: string;\r\n    colors: string[];\r\n    currentColor: string;\r\n    currentColorIndex: number;\r\n    ngDisabled: Function;\r\n    colorChange: Function;\r\n\r\n    enterSpacePress(event): void;\r\n    disabled(): boolean;\r\n    selectColor(index: number);\r\n}\r\n\r\nconst DEFAULT_COLORS = ['purple', 'lightgreen', 'green', 'darkred', 'pink', 'yellow', 'cyan'];\r\n\r\nexport class ColorPickerController implements IColorPicker {\r\n\r\n    private _$timeout;\r\n    private _$scope: ng.IScope;\r\n\r\n    public class: string;\r\n    public colors: string[];\r\n    public currentColor: string;\r\n    public currentColorIndex: number;\r\n    public ngDisabled: Function;\r\n    public colorChange: Function;\r\n\r\n    constructor(\r\n        $scope: ng.IScope,\r\n        $element,\r\n        $attrs,\r\n        $timeout) {\r\n        this._$timeout = $timeout;\r\n        this._$scope = $scope;\r\n\r\n        this.class = $attrs.class || '';\r\n        this.colors = !$scope['vm']['colors'] || \r\n                _.isArray($scope['vm']['colors']) && $scope['vm']['colors'].length === 0 ? DEFAULT_COLORS : $scope['vm']['colors'];\r\n        this.colorChange = $scope['vm']['colorChange'] || null;\r\n        this.currentColor = $scope['vm']['currentColor'] || this.colors[0];\r\n        this.currentColorIndex = this.colors.indexOf(this.currentColor);\r\n        this.ngDisabled = $scope['vm']['ngDisabled'] || false;\r\n    }\r\n\r\n    public $onChanges(changes: any) {\r\n        this.colors = _.isArray(changes['colors'].currentValue) && changes['colors'].currentValue.length !== 0 ? \r\n            changes['colors'].currentValue : DEFAULT_COLORS;\r\n        this.currentColor = changes['currentColor'].currentValue || this.colors[0];\r\n    }\r\n\r\n    public disabled(): boolean {\r\n        if (this.ngDisabled) {\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    public selectColor(index: number) {\r\n        if (this.disabled()) {\r\n            return;\r\n        }\r\n        this.currentColorIndex = index;\r\n        this.currentColor = this.colors[this.currentColorIndex];\r\n        this._$timeout(() => {\r\n            this._$scope.$apply();\r\n        });\r\n\r\n        if (this.colorChange) {\r\n            this.colorChange();\r\n        }\r\n    };\r\n\r\n    public enterSpacePress(event): void {\r\n        this.selectColor(event.index);\r\n    };\r\n\r\n}\r\n\r\nconst pipColorPicker = {\r\n    bindings: {\r\n        ngDisabled: '<?ngDisabled',\r\n        colors: '<pipColors',\r\n        currentColor: '=ngModel',\r\n        colorChange: '<?ngChange'\r\n    },\r\n    templateUrl: 'color_picker/color_picker.html',\r\n    controller: ColorPickerController,\r\n    controllerAs: 'vm'\r\n}\r\n\r\nangular\r\n    .module('pipColorPicker', ['pipControls.Templates'])\r\n    .component('pipColorPicker', pipColorPicker);","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    angular.module('pipControls', [\r\n        'pipMarkdown',\r\n        'pipColorPicker',\r\n        'pipRoutingProgress',\r\n        'pipPopover',\r\n        'pipImageSlider',\r\n        'pipToasts',\r\n        'pipControls.Translate'\r\n    ]);\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nclass pipImageSliderController{\r\n\r\n    private _$attrs;\r\n    private _$interval: angular.IIntervalService;\r\n    private _$scope: angular.IScope;\r\n\r\n    private _blocks: any[];\r\n    private _index: number = 0;\r\n    private _newIndex: number;\r\n    private _direction: string;\r\n    private _type: any;\r\n    private DEFAULT_INTERVAL = 4500;\r\n    private _interval;\r\n    private _timePromises;\r\n    private _throttled: Function;\r\n\r\n    public swipeStart: number = 0;\r\n    public sliderIndex: number;\r\n    public slideTo: Function;\r\n\r\n    constructor(\r\n        $scope: ng.IScope, \r\n        $element, \r\n        $attrs, \r\n        $parse: ng.IParseService, \r\n        $timeout: angular.ITimeoutService,\r\n        $interval: angular.IIntervalService, \r\n        pipImageSlider) {\r\n\r\n        this.sliderIndex = $scope['vm']['sliderIndex'];\r\n        this._type = $scope['vm']['type']();\r\n        this._interval = $scope['vm']['interval']();\r\n        this._$attrs = $attrs;\r\n        this._$interval = $interval;\r\n        this._$scope = $scope;\r\n        $scope['slideTo'] = this.slideToPrivate;\r\n\r\n        $element.addClass('pip-image-slider');\r\n        $element.addClass('pip-animation-' + this._type);\r\n        \r\n        this.setIndex();\r\n\r\n        $timeout(() => {\r\n            this._blocks = $element.find('.pip-animation-block');\r\n            if (this._blocks.length > 0) {\r\n                $(this._blocks[0]).addClass('pip-show');\r\n            }\r\n        });\r\n\r\n        this.startInterval();\r\n\r\n        this._throttled = _.throttle(() => {\r\n            pipImageSlider.toBlock(this._type, this._blocks, this._index, this._newIndex, this._direction);\r\n            this._index = this._newIndex;\r\n            this.setIndex();\r\n        }, 700);\r\n        \r\n        if ($attrs.id) { pipImageSlider.registerSlider($attrs.id, $scope) }\r\n\r\n        $element.on('$destroy', () => {\r\n            this.stopInterval();\r\n            pipImageSlider.removeSlider($attrs.id);\r\n        });\r\n\r\n    }\r\n\r\n    public nextBlock() {\r\n        this.restartInterval();\r\n        this._newIndex = this._index + 1 === this._blocks.length ? 0 : this._index + 1;\r\n        this._direction = 'next';\r\n        this._throttled();\r\n    }\r\n\r\n    public prevBlock() {\r\n        this.restartInterval();\r\n        this._newIndex = this._index - 1 < 0 ? this._blocks.length - 1 : this._index - 1;\r\n        this._direction = 'prev';\r\n        this._throttled();\r\n    }\r\n\r\n    private slideToPrivate(nextIndex: number) {\r\n        if (nextIndex === this._index || nextIndex > this._blocks.length - 1) {\r\n            return;\r\n        }\r\n\r\n        this.restartInterval();\r\n        this._newIndex = nextIndex;\r\n        this._direction = nextIndex > this._index ? 'next' : 'prev';\r\n        this._throttled();\r\n    }\r\n\r\n    private setIndex() {\r\n        if (this._$attrs.pipImageIndex) this.sliderIndex = this._index;\r\n    }\r\n\r\n    private startInterval() {\r\n        this._timePromises = this._$interval(() => {\r\n            this._newIndex = this._index + 1 === this._blocks.length ? 0 : this._index + 1;\r\n            this._direction = 'next';\r\n            this._throttled();\r\n        }, this._interval || this.DEFAULT_INTERVAL);\r\n    }\r\n\r\n    private stopInterval() {\r\n        this._$interval.cancel(this._timePromises);\r\n    }\r\n\r\n    private restartInterval() {\r\n        this.stopInterval();\r\n        this.startInterval();\r\n    }\r\n}\r\n\r\n(() => {\r\n\r\n    function pipImageSlider() {\r\n        return {\r\n            scope: {\r\n                sliderIndex: '=pipImageIndex',\r\n                type: '&pipAnimationType',\r\n                interval: '&pipAnimationInterval'\r\n            },\r\n            bindToController: true,\r\n            controller: pipImageSliderController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipImageSlider', ['pipSliderButton', 'pipSliderIndicator', 'pipImageSlider.Service'])\r\n        .directive('pipImageSlider', pipImageSlider);\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ninterface IImageSliderService {\r\n    registerSlider(sliderId: string, sliderScope): void;\r\n    removeSlider(sliderId: string): void;\r\n    getSliderScope(sliderId: string);\r\n    nextCarousel(nextBlock, prevBlock): void;\r\n    prevCarousel(nextBlock, prevBlock): void;\r\n    toBlock(type: string, blocks: any[], oldIndex: number, nextIndex: number, direction: string): void;\r\n}\r\n\r\nclass ImageSliderService {\r\n    private _$timeout: angular.ITimeoutService;\r\n    private ANIMATION_DURATION: number = 550;\r\n    private _sliders = {};\r\n\r\n    constructor($timeout: angular.ITimeoutService) {\r\n        this._$timeout = $timeout;\r\n    }\r\n\r\n    public registerSlider(sliderId: string, sliderScope): void {\r\n        this._sliders[sliderId] = sliderScope;\r\n    }\r\n            \r\n    public removeSlider(sliderId: string): void {\r\n        delete this._sliders[sliderId];\r\n    }\r\n\r\n    public getSliderScope(sliderId: string) {\r\n        return this._sliders[sliderId];\r\n    }\r\n\r\n    public nextCarousel(nextBlock, prevBlock): void {\r\n        nextBlock.addClass('pip-next');\r\n                \r\n        this._$timeout(() => {\r\n            nextBlock.addClass('animated').addClass('pip-show').removeClass('pip-next');\r\n            prevBlock.addClass('animated').removeClass('pip-show');\r\n        }, 100);\r\n    }\r\n\r\n    public prevCarousel(nextBlock, prevBlock): void {\r\n        this._$timeout(() => {\r\n            nextBlock.addClass('animated').addClass('pip-show');\r\n            prevBlock.addClass('animated').addClass('pip-next').removeClass('pip-show');\r\n        }, 100);\r\n    }\r\n\r\n    public toBlock(type: string, blocks: any[], oldIndex: number, nextIndex: number, direction: string): void {\r\n        let prevBlock = $(blocks[oldIndex]),\r\n            blockIndex: number = nextIndex,\r\n            nextBlock = $(blocks[blockIndex]);\r\n\r\n        if (type === 'carousel') {\r\n            $(blocks).removeClass('pip-next').removeClass('pip-prev').removeClass('animated');\r\n\r\n            if (direction && (direction === 'prev' || direction === 'next')) {\r\n                if (direction === 'prev') {\r\n                    this.prevCarousel(nextBlock, prevBlock);\r\n                } else {\r\n                    this.nextCarousel(nextBlock, prevBlock);\r\n                }\r\n            } else {\r\n                if (nextIndex && nextIndex < oldIndex) {\r\n                    this.prevCarousel(nextBlock, prevBlock);\r\n                } else {\r\n                    this.nextCarousel(nextBlock, prevBlock);\r\n                }\r\n            }\r\n        } else {\r\n            prevBlock.addClass('animated').removeClass('pip-show');\r\n            nextBlock.addClass('animated').addClass('pip-show');\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n(() => {\r\n    'use strict';\r\n    angular\r\n        .module('pipImageSlider.Service', [])\r\n        .service('pipImageSlider', ImageSliderService);\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderButton', []);\r\n\r\n    thisModule.directive('pipSliderButton',\r\n        function () {\r\n            return {\r\n                scope: {},\r\n                controller: function ($scope, $element, $parse, $attrs, pipImageSlider) {\r\n                    var type = $parse($attrs.pipButtonType)($scope),\r\n                        sliderId = $parse($attrs.pipSliderId)($scope);\r\n\r\n                    $element.on('click', () => {\r\n                        if (!sliderId || !type) {\r\n                            return;\r\n                        }\r\n\r\n                        pipImageSlider.getSliderScope(sliderId).vm[type + 'Block']();\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderIndicator', []);\r\n\r\n    thisModule.directive('pipSliderIndicator',\r\n        function () {\r\n            return {\r\n                scope: false,\r\n                controller: ($scope, $element, $parse, $attrs, pipImageSlider) => {\r\n                    var sliderId = $parse($attrs.pipSliderId)($scope),\r\n                        slideTo = $parse($attrs.pipSlideTo)($scope);\r\n\r\n                    $element.css('cursor', 'pointer');\r\n                    $element.on('click',  () => {\r\n                        if (!sliderId || slideTo && slideTo < 0) {\r\n                            return;\r\n                        }\r\n                        pipImageSlider.getSliderScope(sliderId).vm.slideToPrivate(slideTo);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ndeclare var marked: any;\r\n\r\nfunction Config($injector) {\r\n    const pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n    if (pipTranslate) {\r\n        pipTranslate.setTranslations('en', {\r\n            'MARKDOWN_ATTACHMENTS': 'Attachments:',\r\n            'checklist': 'Checklist',\r\n            'documents': 'Documents',\r\n            'pictures': 'Pictures',\r\n            'location': 'Location',\r\n            'time': 'Time'\r\n        });\r\n        pipTranslate.setTranslations('ru', {\r\n            'MARKDOWN_ATTACHMENTS': ':',\r\n            'checklist': '',\r\n            'documents': '',\r\n            'pictures': '',\r\n            'location': '',\r\n            'time': ''\r\n        });\r\n    }\r\n}\r\n\r\nclass MarkdownController {\r\n    private _pipTranslate;\r\n    private _$parse: angular.IParseService;\r\n    private _$scope: angular.IScope;\r\n    private _$injector;\r\n    private _$element;\r\n    private _$attrs;\r\n    private _text;\r\n    private _isList;\r\n    private _clamp;\r\n    private _rebind;\r\n\r\n    constructor(\r\n        $scope: angular.IScope,\r\n        $parse: angular.IParseService,\r\n        $attrs,\r\n        $element,\r\n        $injector\r\n    ) {\r\n        this._pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        this._$parse = $parse;\r\n        this._$scope = $scope;\r\n        this._$injector = $injector;\r\n        this._$element = $element;\r\n        this._$attrs = $attrs;\r\n        this._text = $scope['$ctrl']['text'];\r\n        this._isList = $scope['$ctrl']['isList'];\r\n        this._clamp = $scope['$ctrl']['clamp'];\r\n        this._rebind = $scope['$ctrl']['rebind'];\r\n    }\r\n\r\n    public $postLink() {\r\n        // Fill the text\r\n        this.bindText(this._text);\r\n\r\n        this._$scope.$on('pipWindowResized', function () {\r\n            if (this.bindText) this.bindText(this._text(this._$scope));\r\n        });\r\n\r\n        // Add class\r\n        this._$element.addClass('pip-markdown');\r\n\r\n    }\r\n\r\n    public $onChanges(changes: any) {\r\n        const newText = changes['text'].currentValue;\r\n\r\n        if (this._rebind) {\r\n            if (this._text !== newText) {\r\n                this._text = newText;\r\n                this.bindText(this._text);\r\n            }\r\n        }\r\n    }\r\n\r\n    private describeAttachments(array) {\r\n        var attachString = '',\r\n            attachTypes = [];\r\n\r\n        _.each(array, function (attach) {\r\n            if (attach.type && attach.type !== 'text') {\r\n                if (attachString.length === 0 && this._pipTranslate) {\r\n                    attachString = this._pipTranslate.translate('MARKDOWN_ATTACHMENTS');\r\n                }\r\n\r\n                if (attachTypes.indexOf(attach.type) < 0) {\r\n                    attachTypes.push(attach.type);\r\n                    attachString += attachTypes.length > 1 ? ', ' : ' ';\r\n                    if (this._pipTranslate)\r\n                        attachString += this._pipTranslate.translate(attach.type);\r\n                }\r\n            }\r\n        });\r\n\r\n        return attachString;\r\n    }\r\n\r\n    private bindText(value) {\r\n        var textString, isClamped, height, options, obj;\r\n\r\n        if (_.isArray(value)) {\r\n            obj = _.find(value, function (item: any) {\r\n                return item.type === 'text' && item.text;\r\n            });\r\n\r\n            textString = obj ? obj.text : this.describeAttachments(value);\r\n        } else {\r\n            textString = value;\r\n        }\r\n\r\n        isClamped = this._$attrs.pipLineCount && _.isNumber(this._clamp);\r\n        isClamped = isClamped && textString && textString.length > 0;\r\n        options = {\r\n            gfm: true,\r\n            tables: true,\r\n            breaks: true,\r\n            sanitize: true,\r\n            pedantic: true,\r\n            smartLists: true,\r\n            smartypents: false\r\n        };\r\n        textString = marked(textString || '', options);\r\n        if (isClamped) {\r\n            height = 1.5 * this._clamp;\r\n        } \r\n        // Assign value as HTML\r\n        this._$element.html('<div' + (isClamped ? this._isList ? 'class=\"pip-markdown-content ' +\r\n            'pip-markdown-list\" style=\"max-height: ' + height + 'em\">' :\r\n            ' class=\"pip-markdown-content\" style=\"max-height: ' + height + 'em\">' : this._isList ?\r\n            ' class=\"pip-markdown-list\">' : '>') + textString + '</div>');\r\n        this._$element.find('a').attr('target', 'blank');\r\n        if (!this._isList && isClamped) {\r\n            this._$element.append('<div class=\"pip-gradient-block\"></div>');\r\n        }\r\n    }\r\n}\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    const MarkdownComponent = {\r\n        controller: MarkdownController,\r\n        bindings: {\r\n            text: '<pipText',\r\n            isList: '<?pipList',\r\n            clamp: '<?pipLineCount',\r\n            rebind: '<?pipRebind'\r\n        }\r\n    }\r\n\r\n    angular.module('pipMarkdown', ['ngSanitize'])\r\n        .run(Config)\r\n        .component('pipMarkdown', MarkdownComponent);\r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n\r\nexport class PopoverController {\r\n  \r\n    private _$timeout;\r\n    private _$scope: ng.IScope;\r\n\r\n    public timeout;\r\n    public backdropElement;\r\n    public content;\r\n    public element;\r\n    public calcH: boolean;\r\n\r\n    public templateUrl;\r\n    public template\r\n\r\n    public cancelCallback: Function;\r\n\r\n    constructor( \r\n        $scope: ng.IScope,\r\n        $rootScope,\r\n        $element,\r\n        $timeout, \r\n        $compile\r\n       ) {\r\n           //$scope = _.defaults($scope, $scope.$parent);    // eslint-disable-line \r\n           this._$timeout = $timeout;\r\n           this.templateUrl = $scope['params'].templateUrl;\r\n           this.template = $scope['params'].template;\r\n           this.timeout = $scope['params'].timeout;\r\n           this.element = $scope['params'].element;\r\n           this.calcH = $scope['params'].calcHeight;\r\n           this.cancelCallback = $scope['params'].cancelCallback;\r\n           this.backdropElement = $('.pip-popover-backdrop');\r\n           this.backdropElement.on('click keydown scroll',() =>{ this.backdropClick()});\r\n           this.backdropElement.addClass($scope['params'].responsive !== false ? 'pip-responsive' : '');\r\n\r\n           $timeout(() => {\r\n                this.position();\r\n                if ($scope['params'].template) {\r\n                    this.content = $compile($scope['params'].template)($scope);\r\n                    $element.find('.pip-popover').append(this.content);\r\n                }\r\n\r\n                this.init();\r\n           });\r\n\r\n           $timeout(() => { this.calcHeight(); }, 200);\r\n           $rootScope.$on('pipPopoverResize', () => { this.onResize()});\r\n           $(window).resize(() => { this.onResize() });\r\n\r\n    }\r\n\r\n    public backdropClick() {\r\n        if (this.cancelCallback) {\r\n            this.cancelCallback();\r\n        }\r\n        this.closePopover();\r\n    }\r\n\r\n    public closePopover() {\r\n        this.backdropElement.removeClass('opened');\r\n        this._$timeout(() => {\r\n            this.backdropElement.remove();\r\n        }, 100);\r\n    }\r\n\r\n    public onPopoverClick($e) {\r\n        $e.stopPropagation();\r\n    }\r\n\r\n\r\n    private init() {\r\n        this.backdropElement.addClass('opened');\r\n        $('.pip-popover-backdrop').focus();\r\n        if (this.timeout) {\r\n            this._$timeout(function () {\r\n                this.closePopover();\r\n            }, this.timeout);\r\n        }\r\n    }\r\n\r\n    private position() {\r\n        if (this.element) {\r\n            let element = $(this.element),\r\n                pos = element.offset(),\r\n                width = element.width(),\r\n                height = element.height(),\r\n                docWidth = $(document).width(),\r\n                docHeight = $(document).height(),\r\n                popover = this.backdropElement.find('.pip-popover');\r\n\r\n            if (pos) {\r\n                popover\r\n                    .css('max-width', docWidth - (docWidth - pos.left))\r\n                    .css('max-height', docHeight - (pos.top + height) - 32, 0)\r\n                    .css('left', pos.left - popover.width() + width / 2)\r\n                    .css('top', pos.top + height + 16);\r\n            }\r\n        }\r\n    }\r\n\r\n    private onResize() {\r\n        this.backdropElement.find('.pip-popover').find('.pip-content').css('max-height', '100%');\r\n        this.position();\r\n        this.calcHeight();\r\n    }\r\n\r\n    private calcHeight() {\r\n        if (this.calcH === false) { return; }\r\n        let popover = this.backdropElement.find('.pip-popover'),\r\n        title = popover.find('.pip-title'),\r\n        footer = popover.find('.pip-footer'),\r\n        content = popover.find('.pip-content'),\r\n        contentHeight = popover.height() - title.outerHeight(true) - footer.outerHeight(true);\r\n        content.css('max-height', Math.max(contentHeight, 0) + 'px').css('box-sizing', 'border-box');\r\n    }\r\n}\r\n\r\n(() => {\r\n    function pipPopover($parse: any) {\r\n        \"ngInject\";\r\n\r\n          return {\r\n                restrict: 'EA',\r\n                scope: true,\r\n                templateUrl: 'popover/popover.html',\r\n                controller: PopoverController,\r\n                controllerAs: 'vm'\r\n            };\r\n    }\r\n\r\n    angular\r\n        .module('pipPopover', ['pipPopover.Service'])\r\n        .directive('pipPopover', pipPopover);\r\n\r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nexport class PopoverService {\r\n  \r\n    private _$timeout;\r\n    private _$scope: ng.IScope;\r\n    private _$compile;\r\n    private _$rootScope: ng.IRootScopeService;\r\n\r\n    public popoverTemplate: string;\r\n\r\n    constructor( \r\n        $compile,\r\n        $rootScope, \r\n        $timeout\r\n       ) {\r\n           this._$compile = $compile;\r\n           this._$rootScope = $rootScope;\r\n           this._$timeout = $timeout;\r\n           this.popoverTemplate = \"<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller'\" +\r\n                \" tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>\";\r\n    }\r\n\r\n    public show(p) {\r\n        let element, scope: ng.IScope, params, content;\r\n            \r\n        element = $('body');\r\n        if (element.find('md-backdrop').length > 0) { return; }\r\n        this.hide();\r\n        scope = this._$rootScope.$new();\r\n        params = p && _.isObject(p) ? p : {};\r\n        scope['params'] = params;\r\n        scope['locals'] = params.locals;\r\n        content = this._$compile(this.popoverTemplate)(scope);\r\n        element.append(content);\r\n    }\r\n\r\n    public hide() {\r\n        let backdropElement = $('.pip-popover-backdrop');\r\n        backdropElement.removeClass('opened');\r\n        this._$timeout(() => {\r\n            backdropElement.remove();\r\n        }, 100);\r\n    }\r\n\r\n    public resize() {\r\n        this._$rootScope.$broadcast('pipPopoverResize');\r\n    }\r\n}\r\n\r\n\r\n(() => {\r\n    angular\r\n        .module('pipPopover.Service', [])\r\n        .service('pipPopoverService', PopoverService);\r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nclass RoutingController {\r\n    private _image: any;\r\n    private _$element;\r\n\r\n    public logoUrl: string;\r\n    public showProgress: Function;\r\n\r\n    constructor( \r\n        $scope: ng.IScope,\r\n        $element)\r\n    {\r\n\r\n        this._$element = $element;\r\n        this.showProgress = $scope['vm']['showProgress'];\r\n        this.logoUrl = $scope['vm']['logoUrl'];    \r\n    }\r\n\r\n    public $postLink() {\r\n        this._image = this._$element.find('img'); \r\n        this.loadProgressImage();\r\n    }\r\n\r\n    public loadProgressImage() {\r\n        if (this.logoUrl) {\r\n            this._image.attr('src', this.logoUrl);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n(() => {\r\n\r\n    const RoutingProgress = {\r\n            replace: true,\r\n            bindings: {\r\n                showProgress: '&',\r\n                logoUrl: '@'\r\n            },\r\n            templateUrl: 'progress/routing_progress.html',\r\n            controller: RoutingController,\r\n            controllerAs: 'vm'\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipRoutingProgress', ['ngMaterial'])\r\n        .component('pipRoutingProgress', RoutingProgress);\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ninterface IPipToast {\r\n    type: string;\r\n    id: string;\r\n    error: any;\r\n    message: string;\r\n    actions: string[];\r\n    duration: number;\r\n    successCallback: Function;\r\n    cancelCallback: Function\r\n}\r\n\r\nclass ToastController {\r\n    private _$mdToast: angular.material.IToastService;\r\n    private _pipErrorDetailsDialog;\r\n\r\n    public message: string;\r\n    public actions: string[];\r\n    public toast: IPipToast;\r\n    public actionLenght: number;\r\n    public showDetails: boolean;\r\n\r\n    constructor( \r\n        $mdToast: angular.material.IToastService, \r\n        toast: IPipToast, \r\n        $injector\r\n       ) {\r\n            this._pipErrorDetailsDialog = $injector.has('pipErrorDetailsDialog') \r\n                ? $injector.get('pipErrorDetailsDialog') : null;\r\n            this._$mdToast = $mdToast;\r\n            this.message = toast.message;\r\n            this.actions = toast.actions;\r\n            this.toast = toast;\r\n            \r\n            if (toast.actions.length === 0) {\r\n                this.actionLenght = 0;\r\n            } else {\r\n                this.actionLenght = toast.actions.length === 1 ? toast.actions[0].toString().length : null;\r\n            }\r\n\r\n            this.showDetails = this._pipErrorDetailsDialog != null;\r\n\r\n    }\r\n\r\n     public onDetails(): void {\r\n        this._$mdToast.hide();\r\n        if (this._pipErrorDetailsDialog) {\r\n            this._pipErrorDetailsDialog.show(\r\n            {\r\n                error: this.toast.error,\r\n                ok: 'Ok'\r\n            },\r\n            angular.noop,\r\n            angular.noop\r\n            );\r\n        }\r\n    }\r\n\r\n    public onAction(action): void {\r\n        this._$mdToast.hide(\r\n        {\r\n            action: action,\r\n            id: this.toast.id,\r\n            message: this.message\r\n        });\r\n\r\n    }\r\n}\r\n\r\ninterface IToastService {\r\n    showNextToast(): void;\r\n    showToast(toast: IPipToast): void;\r\n    addToast(toast): void;\r\n    removeToasts(type: string): void;\r\n    getToastById(id: string): IPipToast;\r\n    removeToastsById(id: string): void;\r\n    onClearToasts(): void;\r\n    showNotification(message: string, actions: string[], successCallback, cancelCallback, id: string);\r\n    showMessage(message: string, successCallback, cancelCallback, id?: string);\r\n    showError(message: string, successCallback, cancelCallback, id: string, error: any);\r\n    hideAllToasts(): void;\r\n    clearToasts(type?: string);\r\n}\r\n\r\nclass ToastService implements IToastService {\r\n    private SHOW_TIMEOUT: number = 20000;\r\n    private SHOW_TIMEOUT_NOTIFICATIONS: number = 20000;\r\n    private toasts: IPipToast[] = [];\r\n    private currentToast: any;\r\n    private sounds: any = {};\r\n\r\n    private _$mdToast: angular.material.IToastService;\r\n\r\n    constructor(\r\n        $rootScope: ng.IRootScopeService, \r\n        $mdToast: angular.material.IToastService) {\r\n\r\n        this._$mdToast = $mdToast;\r\n\r\n        $rootScope.$on('$stateChangeSuccess', () => {this.onStateChangeSuccess()});\r\n        $rootScope.$on('pipSessionClosed', () => {this.onClearToasts()});\r\n        $rootScope.$on('pipIdentityChanged', () => {this.onClearToasts()});\r\n    }\r\n\r\n    public showNextToast(): void {\r\n        let toast: IPipToast;\r\n\r\n        if (this.toasts.length > 0) {\r\n            toast = this.toasts[0];\r\n            this.toasts.splice(0, 1);\r\n            this.showToast(toast);\r\n        }\r\n    }\r\n\r\n     // Show toast\r\n     public showToast(toast: IPipToast): void {\r\n        this.currentToast = toast;\r\n\r\n        this._$mdToast.show({\r\n            templateUrl: 'toast/toast.html',\r\n            hideDelay: toast.duration || this.SHOW_TIMEOUT,\r\n            position: 'bottom left',\r\n            controller: ToastController,\r\n            controllerAs: 'vm',\r\n            locals: {\r\n                toast: this.currentToast,\r\n                sounds: this.sounds\r\n            }\r\n        })\r\n        .then( \r\n            (action: string) => {\r\n                this.showToastOkResult(action);\r\n            },\r\n            (action: string) => {\r\n                this.showToastCancelResult(action);\r\n            }\r\n        );\r\n    }\r\n\r\n    private showToastCancelResult(action: string):void {\r\n        if (this.currentToast.cancelCallback) {\r\n            this.currentToast.cancelCallback(action);\r\n        }\r\n        this.currentToast = null;\r\n        this.showNextToast();\r\n    }\r\n\r\n    private showToastOkResult(action: string): void {\r\n        if (this.currentToast.successCallback) {\r\n            this.currentToast.successCallback(action);\r\n        }\r\n        this.currentToast = null;\r\n        this.showNextToast();\r\n    }\r\n\r\n    public addToast(toast): void {\r\n        if (this.currentToast && toast.type !== 'error') {\r\n            this.toasts.push(toast);\r\n        } else {\r\n            this.showToast(toast);\r\n        }\r\n    }\r\n\r\n    public removeToasts(type: string): void {\r\n        let result: any[] = [];\r\n        _.each(this.toasts, (toast) => {\r\n            if (!toast.type || toast.type !== type) {\r\n                result.push(toast);\r\n            }\r\n        });\r\n        this.toasts = _.cloneDeep(result);\r\n    }\r\n\r\n    public removeToastsById(id: string): void {\r\n        _.remove(this.toasts, {id: id});\r\n    }\r\n\r\n    public getToastById(id: string): IPipToast {\r\n        return _.find(this.toasts, {id: id});\r\n    }\r\n\r\n    public onStateChangeSuccess() {}\r\n\r\n    public onClearToasts(): void {\r\n        this.clearToasts(null);\r\n    }\r\n\r\n    public showNotification(message: string, actions: string[], successCallback, cancelCallback, id: string) {\r\n        this.addToast({\r\n            id: id || null,\r\n            type: 'notification',\r\n            message: message,\r\n            actions: actions || ['ok'],\r\n            successCallback: successCallback,\r\n            cancelCallback: cancelCallback,\r\n            duration: this.SHOW_TIMEOUT_NOTIFICATIONS\r\n        });\r\n    }\r\n\r\n    public showMessage(message: string, successCallback, cancelCallback, id?: string) {\r\n        this.addToast({\r\n            id: id || null,\r\n            type: 'message',\r\n            message: message,\r\n            actions: ['ok'],\r\n            successCallback: successCallback,\r\n            cancelCallback: cancelCallback\r\n        });\r\n    }\r\n\r\n     public showError(message: string, successCallback, cancelCallback, id: string, error: any) {\r\n        this.addToast({\r\n            id: id || null,\r\n            error: error,\r\n            type: 'error',\r\n            message: message || 'Unknown error.',\r\n            actions: ['ok'],\r\n            successCallback: successCallback,\r\n            cancelCallback: cancelCallback\r\n        });\r\n    }\r\n\r\n    public hideAllToasts(): void {\r\n        this._$mdToast.cancel();\r\n        this.toasts = [];\r\n    }\r\n\r\n    public clearToasts(type?: string) {\r\n        if (type) {\r\n            // pipAssert.isString(type, 'pipToasts.clearToasts: type should be a string');\r\n            this.removeToasts(type);\r\n        } else {\r\n            this._$mdToast.cancel();\r\n            this.toasts = [];\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n(() => {\r\n    angular\r\n        .module('pipToasts', ['ngMaterial', 'pipControls.Translate'])\r\n        .service('pipToasts', ToastService);\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('color_picker/color_picker.html',\n    '<ul class=\"pip-color-picker {{vm.class}}\" pip-selected=\"vm.currentColorIndex\" pip-enter-space-press=\"vm.enterSpacePress($event)\"><li tabindex=\"-1\" ng-repeat=\"color in vm.colors track by color\"><md-button tabindex=\"-1\" class=\"md-icon-button pip-selectable\" ng-click=\"vm.selectColor($index)\" aria-label=\"color\" ng-disabled=\"vm.disabled()\"><md-icon ng-style=\"{\\'color\\': color}\" md-svg-icon=\"icons:{{ color == vm.currentColor ? \\'circle\\' : \\'radio-off\\' }}\"></md-icon></md-button></li></ul>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('popover/popover.html',\n    '<div ng-if=\"vm.templateUrl\" class=\"pip-popover flex layout-column\" ng-click=\"vm.onPopoverClick($event)\" ng-include=\"vm.templateUrl\"></div><div ng-if=\"vm.template\" class=\"pip-popover\" ng-click=\"vm.onPopoverClick($event)\"></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('progress/routing_progress.html',\n    '<div class=\"pip-routing-progress layout-column layout-align-center-center\" ng-show=\"vm.showProgress()\"><div class=\"loader\"><svg class=\"circular\" viewbox=\"25 25 50 50\"><circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"></circle></svg></div><img src=\"\" height=\"40\" width=\"40\" class=\"pip-img\"><md-progress-circular md-diameter=\"96\" class=\"fix-ie\"></md-progress-circular></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toast/toast.html',\n    '<md-toast class=\"md-action pip-toast\" ng-class=\"{\\'pip-error\\': vm.toast.type==\\'error\\', \\'pip-column-toast\\': vm.toast.actions.length > 1 || vm.actionLenght > 4, \\'pip-no-action-toast\\': vm.actionLenght == 0}\" style=\"height:initial; max-height: initial;\"><span class=\"flex-var pip-text\" ng-bind-html=\"vm.message\"></span><div class=\"layout-row layout-align-end-start pip-actions\" ng-if=\"vm.actions.length > 0 || (vm.toast.type==\\'error\\' && vm.toast.error)\"><div class=\"flex\" ng-if=\"vm.toast.actions.length > 1\"></div><md-button class=\"flex-fixed pip-toast-button\" ng-if=\"vm.toast.type==\\'error\\' && vm.toast.error && vm.showDetails\" ng-click=\"vm.onDetails()\">Details</md-button><md-button class=\"flex-fixed pip-toast-button\" ng-click=\"vm.onAction(action)\" ng-repeat=\"action in vm.actions\" aria-label=\"{{::action| translate}}\">{{::action| translate}}</md-button></div></md-toast>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-controls-html.min.js.map\n","'use strict';\r\n\r\nangular.module('pipDateTime', [\r\n    'pipDateTime.Service', 'pipDateTime.Filter'\r\n]);\r\n","'use strict';\r\n\r\nfunction formatTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";\r\n\r\n    return function (value: any, format: string): string {\r\n        return pipDateTime.formatTime(value, format);\r\n    }\r\n}\r\n\r\nfunction formatDateOptionalFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, format: string): string {\r\n        return pipDateTime.formatDateOptional(value, format);\r\n    }\r\n}\r\n\r\nfunction formatLongDateFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongDate(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortDate(value);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatMiddleDate(value);\r\n    }\r\n}\r\n\r\nfunction formatMonthFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any) {\r\n        return pipDateTime.formatMonth(value);\r\n    }\r\n}\r\n\r\nfunction formatLongMonthFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongMonth(value);\r\n    }\r\n}\r\n\r\nfunction formatYearFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatYear(value);\r\n    }\r\n}\r\n\r\nfunction formatWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatMiddleDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDateTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, firstTime: boolean): string {\r\n        return pipDateTime.formatShortDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, firstTime: boolean): string {\r\n        return pipDateTime.formatMiddleDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatLongDateLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, firstTime: boolean): string {\r\n        return pipDateTime.formatLongDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction bbFormatDateLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, firstTime: boolean): string {\r\n        return pipDateTime.bbFormatDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatFullDateTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatFullDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortTime(value);\r\n    }\r\n}\r\n\r\nfunction formatLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDayOfWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortDayOfWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDayOfWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongDayOfWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatLongMonthDayFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongMonthDay(value);\r\n    }\r\n}\r\n\r\nfunction formatShortMonthDayFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortMonthDay(value);\r\n    }\r\n}\r\n\r\nfunction formatDateRangeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value1: any, value2: any): string {\r\n        return pipDateTime.formatDateRange(value1, value2);\r\n    }\r\n}\r\n\r\nfunction formatDateTimeRangeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value1: any, value2: any): string {\r\n        return pipDateTime.formatDateTimeRange(value1, value2);\r\n    }\r\n}\r\n\r\nfunction formatISOWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatISOWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortISOWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortISOWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatISOWeekOrdinalFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatISOWeekOrdinal(value);\r\n    }\r\n}\r\n\r\nfunction formatDateYFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatDateY(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDateYFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongDateY(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateLongTimeLongFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatTodayDateLongTimeLong(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateShortTimeLongFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatTodayDateShortTimeLong(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateLongTimeShortFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatTodayDateLongTimeShort(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateShortTimeShortFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatTodayDateShortTimeShort(value);\r\n    }\r\n}\r\n\r\nfunction formatMillisecondsToSecondsFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatMillisecondsToSeconds(value);\r\n    }\r\n}\r\n\r\nfunction formatElapsedIntervalFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, start: any): string {\r\n        return pipDateTime.formatElapsedInterval(value, start);\r\n    }\r\n}\r\n\r\nfunction getDateJSONFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.getDateJSON(value);\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipDateTime.Filter', [])\r\n    .filter('formatTime', formatTimeFilter)\r\n    .filter('formatDateOptional', formatDateOptionalFilter)\r\n    .filter('bbFormatDateLongTime', bbFormatDateLongTimeFilter)\r\n    .filter('formatShortDate', formatShortDateFilter)\r\n    .filter('formatMiddleDate', formatMiddleDateFilter)\r\n    .filter('formatLongDate', formatLongDateFilter)\r\n    .filter('formatMonth', formatMonthFilter)\r\n    .filter('formatLongMonth', formatLongMonthFilter)\r\n    .filter('formatYear', formatYearFilter)\r\n    .filter('formatWeek', formatWeekFilter)\r\n    .filter('formatShortWeek', formatShortWeekFilter)\r\n    .filter('formatShortDateTime', formatShortDateTimeFilter)\r\n    .filter('formatMiddleDateTime', formatMiddleDateTimeFilter)    \r\n    .filter('formatLongDateTime', formatLongDateTimeFilter)\r\n    .filter('formatShortDateLongTime', formatShortDateLongTimeFilter)\r\n    .filter('formatMiddleDateLongTime', formatMiddleDateLongTimeFilter)    \r\n    .filter('formatLongDateLongTime', formatLongDateLongTimeFilter)    \r\n    .filter('formatFullDateTime', formatFullDateTimeFilter)\r\n    .filter('formatShortTime', formatShortTimeFilter)\r\n    .filter('formatLongTime', formatLongTimeFilter)\r\n    .filter('formatShortDayOfWeek', formatShortDayOfWeekFilter)\r\n    .filter('formatLongDayOfWeek', formatLongDayOfWeekFilter)\r\n    .filter('formatLongMonthDay', formatLongMonthDayFilter)\r\n    .filter('formatShortMonthDay', formatShortMonthDayFilter)\r\n    .filter('formatDateRange', formatDateRangeFilter)\r\n    .filter('formatDateTimeRange', formatDateTimeRangeFilter)\r\n    .filter('formatISOWeek', formatISOWeekFilter)\r\n    .filter('formatShortISOWeek', formatShortISOWeekFilter)\r\n    .filter('formatISOWeekOrdinal', formatISOWeekOrdinalFilter)\r\n    .filter('formatDateY', formatDateYFilter)\r\n    .filter('formatLongDateY', formatLongDateYFilter)\r\n    .filter('formatTodayDateLongTimeLong', formatTodayDateLongTimeLongFilter)\r\n    .filter('formatTodayDateShortTimeLong', formatTodayDateShortTimeLongFilter)\r\n    .filter('formatTodayDateLongTimeShort', formatTodayDateLongTimeShortFilter)\r\n    .filter('formatTodayDateShortTimeShort', formatTodayDateShortTimeShortFilter)\r\n    .filter('formatMillisecondsToSeconds', formatMillisecondsToSecondsFilter)\r\n    .filter('formatElapsedInterval', formatElapsedIntervalFilter);\r\n","'use strict';\r\n\r\nexport class DateTimeConfig {\r\n    timeZone: number;\r\n}\r\n\r\nexport interface IDateTimeService {\r\n    readonly config: DateTimeConfig;\r\n    useTimeZone(offset: number);\r\n\r\n    bbFormatDateLongTime(value: any, firstTime?: boolean): string; \r\n    \r\n    formatTime(value: any, format: string): string;\r\n    formatDateOptional(value: any, format: string): string;\r\n    formatShortDate(value: any): string;\r\n    formatMiddleDate(value: any): string;\r\n    formatLongDate(value: any): string;\r\n    formatMonth(value: any): string;\r\n    formatLongMonth(value: any): string;\r\n    formatYear(value: any): string;\r\n    formatWeek(value: any): string;\r\n    formatShortWeek(value: any): string;\r\n    formatShortDateTime(value: any): string;\r\n    formatMiddleDateTime(value: any): string;    \r\n    formatLongDateTime(value: any): string;\r\n    formatFullDateTime(value: any): string;\r\n    formatShortDateLongTime(value: any, firstTime?: boolean): string;\r\n    formatMiddleDateLongTime(value: any, firstTime?: boolean): string;    \r\n    formatLongDateLongTime(value: any, firstTime?: boolean): string;    \r\n    formatShortTime(value: any): string;\r\n    formatLongTime(value: any): string;\r\n    formatShortDayOfWeek(value: any): string;\r\n    formatLongDayOfWeek(value: any): string;\r\n    formatLongMonthDay(value: any): string;\r\n    formatShortMonthDay(value: any): string;\r\n    formatDateRange(value1: any, value2: any): string;\r\n    formatDateTimeRange(value1: any, value2: any): string;\r\n    formatISOWeek(value: any): string;\r\n    formatShortISOWeek(value: any): string;\r\n    formatISOWeekOrdinal(value: any): string;\r\n    formatDateY(value: any): string;\r\n    formatLongDateY(value: any): string;\r\n    formatTodayDateLongTimeLong(value: any): string;\r\n    formatTodayDateShortTimeLong(value: any): string;\r\n    formatTodayDateLongTimeShort(value: any): string;\r\n    formatTodayDateShortTimeShort(value: any): string;\r\n    formatMillisecondsToSeconds(value: any): string;\r\n    formatElapsedInterval(value: any, start: any): string;\r\n\r\n    getDateJSON(date: any): string;\r\n    getNextStart(value: any, category: string): any;\r\n    getPrevStart(value: any, category: string): any;\r\n    getNowStart(category: string): any;\r\n\r\n    addHours(value: any, hours: number): any;\r\n    toStartDay(value: any): any;\r\n    toEndDay(value: any, offset: number): any;\r\n    toStartWeek(value: any): any;\r\n    toEndWeek(value: any, offset: number): any;\r\n    toStartMonth(value: any): any;\r\n    toEndMonth(value: any, offset: number): any;\r\n    toStartYear(value: any): any;\r\n    toEndYear(value: any, offset: number): any;\r\n \r\n}\r\n\r\nexport interface IDateTimeProvider extends IDateTimeService, ng.IServiceProvider {\r\n\r\n}\r\n\r\nclass DateTime implements IDateTimeService {\r\n    private _config: DateTimeConfig;\r\n    protected _momentRanged = new Array('year', 'month', 'week', 'isoweek', 'day');\r\n    protected _defaultFormat = 'LL'\r\n\r\n    private isUndefinedOrNull(value: any): boolean {\r\n        return angular.isUndefined(value) || value === null;\r\n    }\r\n\r\n    private getRange(value: string): string {\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return 'day';\r\n        }\r\n\r\n        let index = this._momentRanged.indexOf(value)\r\n\r\n        if (index < 0) {\r\n            return 'day'\r\n        } else {\r\n            return this._momentRanged[index];\r\n        }\r\n    }\r\n\r\n    private getOperationRange(value: string): string {\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return 'day';\r\n        }\r\n\r\n        let range = value == 'isoweek' ? 'week' : value,\r\n            index = this._momentRanged.indexOf(range)\r\n\r\n        if (index < 0) {\r\n            return 'day'\r\n        } else {\r\n            return this._momentRanged[index];\r\n        }\r\n    }\r\n\r\n    private formatDateTime(value: any, basicFormat: string): string {\r\n        var date: any,\r\n            formatTpl: string;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        \r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        formatTpl = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n        return date.format(formatTpl);\r\n    }\r\n\r\n    private formatDateTimeY(value: any, basicFormat: string): string {\r\n        var date: any,\r\n            nowDate: any,\r\n            formatMoment: string;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        \r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        nowDate = moment();\r\n        formatMoment = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat);\r\n\r\n        if (nowDate.year() == date.year()) {\r\n            formatMoment = formatMoment.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '');\r\n        }\r\n\r\n        return date.format(formatMoment);\r\n    }\r\n\r\n    private formatDay(value: any, basicFormat: string): string {\r\n        var date: any,\r\n            format = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat),\r\n            formatMonthYearless = format.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '').replace(/M/g, '');\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        \r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return date.format(formatMonthYearless);\r\n    }\r\n\r\n    private formatMonthDay(value: any, basicFormat: string): string {\r\n        var date: any,\r\n            format = basicFormat ? basicFormat : this._defaultFormat,\r\n            formatLL = moment.localeData().longDateFormat(format),\r\n            formatYearlessLL = formatLL.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '');\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        \r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return date.format(formatYearlessLL);\r\n    }\r\n\r\n//  use timezone not testing\r\n    private formatRange(value1: any, value2: any, basicFormat: string): string {\r\n        var dateStart: any,\r\n            dateEnd: any,\r\n            format = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n        if (this.isUndefinedOrNull(value1)) {\r\n            dateStart = null;\r\n        } else {\r\n            dateStart = (this._config.timeZone != undefined && this._config.timeZone != null) ?  moment(value1).utcOffset(this._config.timeZone) : moment(value1);\r\n        }\r\n        if (this.isUndefinedOrNull(value2)) {\r\n            dateEnd = null;\r\n        } else {\r\n            dateEnd = (this._config.timeZone != undefined && this._config.timeZone != null) ?  moment(value2).utcOffset(this._config.timeZone) : moment(value2);\r\n        }\r\n\r\n        if (dateStart === null && dateEnd === null) return '';\r\n\r\n        if (dateStart === null) {\r\n            return dateEnd.format(basicFormat);\r\n        } else if (dateEnd === null || dateStart.isSame(dateEnd)) {\r\n            return dateStart.format(basicFormat);;\r\n        }\r\n\r\n        if (dateStart.isAfter(dateEnd)) {\r\n            // todo localization\r\n            throw new Error('Date range error. Start date is more than end date.');\r\n        }\r\n\r\n        if (dateStart.year() == dateEnd.year()) {\r\n            if (dateStart.month() == dateEnd.month()) {\r\n                return this.formatDay(dateStart, basicFormat) + '-' + dateEnd.format(basicFormat);\r\n            } else {\r\n                return this.formatMonthDay(dateStart, basicFormat) + '-' + dateEnd.format(basicFormat);\r\n            }\r\n        } else {\r\n            return dateStart.format(basicFormat) + '-' + dateEnd.format(basicFormat);\r\n        }\r\n    }\r\n\r\n    private toStartRange(value: any, range: string): any {\r\n        var date: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return date.startOf(range).toDate();\r\n    }\r\n\r\n    private toEndRange(value: any, range: string, offset: number): any {\r\n        var date: any,\r\n            result: any,\r\n            mssOffset: number;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (!angular.isNumber(offset)) {\r\n            mssOffset = 0;\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        if (mssOffset) {\r\n            result = date.startOf(range).add(mssOffset, 'milliseconds');\r\n        } else {\r\n            result = date.startOf(range);\r\n        }\r\n\r\n        return date.startOf(range).toDate();\r\n    }\r\n\r\n    private toDateWithTime(value: any, formatDate: string, formatTime: string, firstTime?: boolean): any {\r\n        var date: any,\r\n            result: string,\r\n            nowDate: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        nowDate = moment();\r\n        if (firstTime) {\r\n            result = date.format(formatTime) + ' ' + date.format(formatDate);\r\n        } else {\r\n            result = date.format(formatDate) + ' ' + date.format(formatTime);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private toTodayDate(value: any, formatDate: string, formatTime: string): any {\r\n        var date: any,\r\n            result: string,\r\n            nowDate: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        nowDate = moment();\r\n\r\n        if (nowDate.year() == date.year() && nowDate.month() == date.month() && nowDate.day() == date.day()) {\r\n            result = date.format(formatTime);\r\n        } else {\r\n            result = date.format(formatDate) + ' ' + date.format(formatTime);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public constructor(config: DateTimeConfig) { \r\n        this._config = config || { timeZone: null };\r\n    };\r\n\r\n    public get config(): DateTimeConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public useTimeZone(offset: number) {\r\n        this._config.timeZone = offset;\r\n    }\r\n    // formating functions \r\n    // -------------------\r\n\r\n    // todo Optional\r\n    public formatTime(value: any, format: string): string {\r\n        return this.formatDateTime(value, 'LLL');\r\n    }\r\n    // todo Optional\r\n    public formatDateOptional(value: any, format: string): string {\r\n        return this.formatDateTime(value, 'L');\r\n    }\r\n\r\n    // date formats\r\n    public formatShortDate(value: any): string {\r\n        return this.formatDateTime(value, 'L');\r\n    }\r\n\r\n    public bbFormatDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this.toDateWithTime(value, 'MM/DD/YY', 'LTS', firstTime); \r\n    }\r\n\r\n    public formatMiddleDate(value: any): string {\r\n        return this.formatDateTime(value, 'll');\r\n    }\r\n\r\n    public formatLongDate(value: any): string {\r\n        return this.formatDateTime(value, 'LL');\r\n    }\r\n\r\n    public formatMonth(value: any): string {\r\n        return this.formatDateTime(value, 'MM');\r\n    }\r\n\r\n    public formatLongMonth(value: any): string {\r\n        return this.formatDateTime(value, 'MMMM');\r\n    }\r\n\r\n    public formatYear(value: any): string {\r\n        return this.formatDateTime(value, 'YYYY');\r\n    }\r\n\r\n    public formatWeek(value: any): string {\r\n        return this.formatDateTime(value, 'ww');\r\n    }\r\n\r\n    public formatShortWeek(value: any): string {\r\n        return this.formatDateTime(value, 'w');\r\n    }\r\n\r\n    public formatShortDateTime(value: any): string {\r\n        return this.toDateWithTime(value, 'L', 'LT'); \r\n    }\r\n\r\n    public formatMiddleDateTime(value: any): string {\r\n        return this.formatDateTime(value, 'lll');\r\n    }\r\n\r\n    public formatLongDateTime(value: any): string {\r\n        return this.formatDateTime(value, 'LLL');\r\n    }\r\n\r\n    public formatFullDateTime(value: any): string {\r\n        return this.formatDateTime(value, 'LLLL');\r\n    }\r\n\r\n    public formatShortDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this.toDateWithTime(value, 'L', 'LTS', firstTime); \r\n    }\r\n\r\n    public formatMiddleDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this.toDateWithTime(value, 'll', 'LTS', firstTime);\r\n    }\r\n\r\n    public formatLongDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this.toDateWithTime(value, 'LL', 'LTS', firstTime);\r\n    }\r\n\r\n    public formatShortTime(value: any): string {\r\n        return this.formatDateTime(value, 'LT');\r\n    }\r\n\r\n    public formatLongTime(value: any): string {\r\n        return this.formatDateTime(value, 'LTS');\r\n    }\r\n\r\n    public formatShortDayOfWeek(value: any): string {\r\n        return this.formatDateTime(value, 'dd');\r\n    }\r\n\r\n    public formatLongDayOfWeek(value: any): string {\r\n        return this.formatDateTime(value, 'dddd');\r\n    }\r\n\r\n    // public formatTimeNumber(value: any): string {\r\n    //     return this.formatDateTime(value, 'LLL');\r\n    // }\r\n\r\n    // public formatLongTimeNumber(value: any): string {\r\n    //     return this.formatDateTime(value, 'LLLL');\r\n    // }\r\n\r\n    ///-----------------\r\n\r\n    public formatLongMonthDay(value: any): string {\r\n        return this.formatMonthDay(value, 'LL');\r\n    }\r\n\r\n    public formatShortMonthDay(value: any): string {\r\n        return this.formatMonthDay(value, 'L');\r\n    }\r\n\r\n    public formatDateRange(value1: any, value2: any): string {\r\n        return this.formatRange(value1, value2, 'LL');\r\n    }\r\n\r\n    public formatDateTimeRange(value1: any, value2: any): string {\r\n        return this.formatRange(value1, value2, 'LLL');\r\n    }\r\n\r\n    // iso function\r\n    // --------------\r\n\r\n    public formatISOWeek(value: any): string {\r\n        return this.formatDateTime(value, 'WW');\r\n    }\r\n\r\n    public formatShortISOWeek(value: any): string {\r\n        return this.formatDateTime(value, 'W');\r\n    }\r\n\r\n    public formatISOWeekOrdinal(value: any): string {\r\n        return this.formatDateTime(value, 'Wo');\r\n    }\r\n    // special formats \r\n    // --------------\r\n\r\n    // year option displays if the current year is not equal to, the date of \r\n    public formatDateY(value: any): string {\r\n        return this.formatDateTimeY(value, 'L');\r\n    }\r\n\r\n    // year option displays if the current year is not equal to, the date of\r\n    public formatLongDateY(value: any): string {\r\n        return this.formatDateTimeY(value, 'LL');\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // September 4 1986 8:30:25 PM or 8:30:25 PM\r\n    public formatTodayDateLongTimeLong(value: any): string {\r\n        return this.toTodayDate(value, 'LL', 'LTS')\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // Sep 4 1986 8:30:25 PM or 8:30:25 PM\r\n    public formatTodayDateShortTimeLong(value: any): string {\r\n        return this.toTodayDate(value, 'LL', 'LTS')\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // September 4 1986 8:30 PM or 8:30 PM\r\n    public formatTodayDateLongTimeShort(value: any): string {\r\n        return this.toTodayDate(value, 'LL', 'LT')\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // Sep 4 1986 8:30 PM or 8:30 PM\r\n    public formatTodayDateShortTimeShort(value: any): string {\r\n        return this.toTodayDate(value, 'll', 'LT')\r\n    }\r\n\r\n    // todo\r\n    public formatMillisecondsToSeconds(value: any): string {\r\n        return '';\r\n    }\r\n\r\n    // todo\r\n    public formatElapsedInterval(value: any, start: any): string {\r\n        var date: any,\r\n            nowDate: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n        if (this.isUndefinedOrNull(start)) {\r\n            nowDate = moment();\r\n        } else {\r\n            nowDate = moment(start);\r\n        }\r\n\r\n        date = moment(value);\r\n        if (!date.isValid() || !nowDate.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return moment(date).fromNow(nowDate);\r\n    }\r\n\r\n    public getDateJSON(date: any): string {\r\n        return JSON.stringify(moment(date));\r\n    }\r\n\r\n    // navigation functions \r\n    // ------------------\r\n\r\n    public getNextStart(value: any, category: string): any {\r\n        var date: any,\r\n            range: string,\r\n            result: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        date = moment(value);\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        range = this.getRange(category);\r\n        result = moment(date).startOf(range).add(this.getOperationRange(range));\r\n\r\n        return result.toDate();\r\n    }\r\n\r\n    public getPrevStart(value: any, category: string): any {\r\n        var date: any,\r\n            range: string,\r\n            result: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        date = moment(value);\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        range = this.getRange(category);\r\n        result = moment(date).startOf(range).add(-1, this.getOperationRange(range));\r\n\r\n        return result.toDate();\r\n    }\r\n\r\n    public getNowStart(category: string): any {\r\n        var date: any,\r\n            range: string,\r\n            result: any;\r\n\r\n        date = moment();\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        range = this.getRange(category)\r\n        result = moment(date).startOf(range);\r\n\r\n        return result.toDate();\r\n    }\r\n\r\n    public addHours(value: any, hours: number): any {\r\n        var date: any;\r\n\r\n        if (this.isUndefinedOrNull(value) || !angular.isNumber(hours)) {\r\n            return '';\r\n        }\r\n\r\n        date = moment(value);\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return date.add(hours, 'hours').toDate();\r\n    }\r\n\r\n    public toStartDay(value: any): any {\r\n        return this.toStartRange(value, 'day');\r\n    }\r\n\r\n    public toEndDay(value: any, offset: number): any {\r\n        return this.toEndRange(value, 'day', offset);\r\n    }\r\n\r\n    public toStartWeek(value: any): any {\r\n        return this.toStartRange(value, 'week');\r\n    }\r\n\r\n    public toEndWeek(value: any, offset: number): any {\r\n        return this.toEndRange(value, 'week', offset);\r\n    }\r\n\r\n    public toStartMonth(value: any): any {\r\n        return this.toStartRange(value, 'month');\r\n    }\r\n\r\n    public toEndMonth(value: any, offset: number): any {\r\n        return this.toEndRange(value, 'month', offset);\r\n    }\r\n\r\n    public toStartYear(value: any): any {\r\n        return this.toStartRange(value, 'year');\r\n    }\r\n\r\n    public toEndYear(value: any, offset: number): any {\r\n        return this.toEndRange(value, 'year', offset);\r\n    }\r\n\r\n}\r\n\r\nclass DateTimeService {\r\n    private _datetime: DateTime;\r\n    private _config: DateTimeConfig;\r\n\r\n    public constructor(\r\n        datetime: DateTime,\r\n    ) {\r\n        this._config = { timeZone: null};\r\n        this._datetime = datetime;\r\n    }\r\n\r\n    // todo Optional\r\n    public useTimeZone(offset: number): void {\r\n        return this._datetime.useTimeZone(offset);\r\n    }\r\n\r\n    // todo Optional\r\n    public formatTime(value: any, format: string): string {\r\n        return this._datetime.formatTime(value, format);\r\n    }\r\n\r\n    // todo Optional\r\n    public formatDateOptional(value: any, format: string): string {\r\n        return this._datetime.formatDateOptional(value, format);\r\n    }\r\n\r\n    public formatShortDate(value: any): string {\r\n        return this._datetime.formatShortDate(value);\r\n    }\r\n\r\n    public formatMiddleDate(value: any): string {\r\n        return this._datetime.formatMiddleDate(value);\r\n    }\r\n\r\n    public formatLongDate(value: any): string {\r\n        return this._datetime.formatLongDate(value);\r\n    }\r\n\r\n    public formatMonth(value: any): string {\r\n        return this._datetime.formatMonth(value);\r\n    }\r\n\r\n    public formatLongMonth(value: any): string {\r\n        return this._datetime.formatLongMonth(value);\r\n    }\r\n\r\n    public formatYear(value: any): string {\r\n        return this._datetime.formatYear(value);\r\n    }\r\n\r\n    public formatWeek(value: any): string {\r\n        return this._datetime.formatWeek(value);\r\n    }\r\n\r\n    public formatShortWeek(value: any): string {\r\n        return this._datetime.formatShortWeek(value);\r\n    }\r\n\r\n    public formatShortDateTime(value: any): string {\r\n        return this._datetime.formatShortDateTime(value);\r\n    }\r\n\r\n    public formatMiddleDateTime(value: any): string {\r\n        return this._datetime.formatMiddleDateTime(value);\r\n    }\r\n\r\n    public formatLongDateTime(value: any): string {\r\n        return this._datetime.formatLongDateTime(value);\r\n    }\r\n\r\n    public formatFullDateTime(value: any): string {\r\n        return this._datetime.formatFullDateTime(value);\r\n    }\r\n\r\n    public formatShortDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this._datetime.formatShortDateLongTime(value, firstTime);\r\n    }\r\n\r\n    public formatMiddleDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this._datetime.formatMiddleDateLongTime(value, firstTime);\r\n    }\r\n\r\n    public formatLongDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this._datetime.formatLongDateLongTime(value, firstTime);\r\n    }\r\n\r\n    public bbFormatDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this._datetime.bbFormatDateLongTime(value, firstTime);\r\n    }\r\n\r\n    public formatShortTime(value: any): string {\r\n        return this._datetime.formatShortTime(value);\r\n    }\r\n\r\n    public formatLongTime(value: any): string {\r\n        return this._datetime.formatLongTime(value);\r\n    }\r\n\r\n    public formatShortDayOfWeek(value: any): string {\r\n        return this._datetime.formatShortDayOfWeek(value);\r\n    }\r\n\r\n    public formatLongDayOfWeek(value: any): string {\r\n        return this._datetime.formatLongDayOfWeek(value);\r\n    }\r\n\r\n    public formatLongMonthDay(value: any): string {\r\n        return this._datetime.formatLongMonthDay(value);\r\n    }\r\n\r\n    public formatShortMonthDay(value: any): string {\r\n        return this._datetime.formatShortMonthDay(value);\r\n    }\r\n\r\n    public formatDateRange(value1: any, value2: any): string {\r\n        return this._datetime.formatDateRange(value1, value2);\r\n    }\r\n\r\n    public formatDateTimeRange(value1: any, value2: any): string {\r\n        return this._datetime.formatDateTimeRange(value1, value2);\r\n    }\r\n\r\n    // iso function\r\n    // --------------\r\n\r\n    public formatISOWeek(value: any): string {\r\n        return this._datetime.formatISOWeek(value);\r\n    }\r\n\r\n    public formatShortISOWeek(value: any): string {\r\n        return this._datetime.formatShortISOWeek(value);\r\n    }\r\n\r\n    public formatISOWeekOrdinal(value: any): string {\r\n        return this._datetime.formatISOWeekOrdinal(value);\r\n    }\r\n    // special formats \r\n    // --------------\r\n\r\n    // year option displays if the current year is not equal to, the date of \r\n    public formatDateY(value: any): string {\r\n        return this._datetime.formatDateY(value);\r\n    }\r\n\r\n    // year option displays if the current year is not equal to, the date of\r\n    public formatLongDateY(value: any): string {\r\n        return this._datetime.formatLongDateY(value);\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // September 4 1986 8:30:25 PM or 8:30:25 PM\r\n    public formatTodayDateLongTimeLong(value: any): string {\r\n        return this._datetime.formatTodayDateLongTimeLong(value);\r\n    }    \r\n\r\n    // date displays if the current date  is not equal now \r\n    // Sep 4 1986 8:30:25 PM or 8:30:25 PM\r\n    public formatTodayDateShortTimeLong(value: any): string {\r\n        return this._datetime.formatTodayDateShortTimeLong(value);\r\n    }     \r\n\r\n    // date displays if the current date  is not equal now \r\n    // September 4 1986 8:30 PM or 8:30 PM\r\n    public formatTodayDateLongTimeShort(value: any): string {\r\n        return this._datetime.formatTodayDateLongTimeShort(value);\r\n    }     \r\n\r\n    // date displays if the current date  is not equal now \r\n    // Sep 4 1986 8:30 PM or 8:30 PM\r\n    public formatTodayDateShortTimeShort(value: any): string {\r\n        return this._datetime.formatTodayDateShortTimeShort(value);\r\n    }     \r\n\r\n    // todo\r\n    public formatMillisecondsToSeconds(value: any) {\r\n        return this._datetime.formatMillisecondsToSeconds(value);\r\n    }\r\n\r\n    // todo\r\n    public formatElapsedInterval(value: any, start: any): string {\r\n        return this._datetime.formatElapsedInterval(value, start);\r\n    }\r\n\r\n    public getDateJSON(date: any): string {\r\n        return this._datetime.getDateJSON(date);\r\n    }\r\n\r\n    // navigation functions \r\n    // ------------------\r\n\r\n    public getNextStart(value: any, category: string): any {\r\n        return this._datetime.getNextStart(value, category);\r\n    }\r\n\r\n    public getPrevStart(value: any, category: string): any {\r\n        return this._datetime.getPrevStart(value, category);\r\n    }\r\n\r\n    public getNowStart(category: string): any {\r\n        return this._datetime.getNowStart(category);\r\n    }\r\n\r\n    public addHours(value: any, hours: number): any {\r\n        return this._datetime.addHours(value, hours);\r\n    }\r\n\r\n    public toStartDay(value: any): any {\r\n        return this._datetime.toStartDay(value);\r\n    }\r\n\r\n    public toEndDay(value: any, offset: number): any {\r\n        return this._datetime.toEndDay(value, offset);\r\n    }\r\n\r\n    public toStartWeek(value: any): any {\r\n        return this._datetime.toStartWeek(value);\r\n    }\r\n\r\n    public toEndWeek(value: any, offset: number): any {\r\n        return this._datetime.toEndWeek(value, offset);\r\n    }\r\n\r\n    public toStartMonth(value: any): any {\r\n        return this._datetime.toStartMonth(value);\r\n    }\r\n\r\n    public toEndMonth(value: any, offset: number): any {\r\n        return this._datetime.toEndMonth(value, offset);\r\n    }\r\n\r\n    public toStartYear(value: any): any {\r\n        return this._datetime.toStartYear(value);\r\n    }\r\n\r\n    public toEndYear(value: any, offset: number): any {\r\n        return this._datetime.toEndYear(value, offset);\r\n    }\r\n\r\n}\r\n\r\nclass DateTimeProvider extends DateTime implements IDateTimeProvider {\r\n    private _translation: DateTime;\r\n    private _service: DateTimeService;\r\n\r\n    public constructor() {\r\n        super({ timeZone: null });\r\n    }\r\n\r\n    public $get(): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new DateTimeService(this);\r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipDateTime.Service', [])\r\n    .provider('pipDateTime', DateTimeProvider);\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDate', ['pipDates.Templates']);\r\n\r\n    thisModule.directive('pipDate',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                require: 'ngModel',\r\n                scope: {\r\n                    timeMode: '@pipTimeMode',\r\n                    disabled: '&ngDisabled',\r\n                    model: '=ngModel',\r\n                    ngChange: '&'\r\n                },\r\n                templateUrl: 'date_directive/date.html',\r\n                controller: 'pipDateController'\r\n            };\r\n        }\r\n    );\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipDateController',\r\n        function ($scope, $element, $injector) { //pipTranslate\r\n            var value,\r\n                localeDate: any = moment.localeData(),\r\n                momentMonths = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format,\r\n                momentDays = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format,\r\n                momentShortDays = localeDate._weekdaysMin,\r\n                momentFirstDayOfWeek = localeDate._week.dow;\r\n\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            if (pipTranslate) {\r\n                pipTranslate.setTranslations('en', {\r\n                    DAY: 'Day',\r\n                    MONTH: 'Month',\r\n                    YEAR: 'Year'\r\n                });\r\n                pipTranslate.setTranslations('ru', {\r\n                    DAY: '',\r\n                    MONTH: '',\r\n                    YEAR: ''                    \r\n                });\r\n                $scope.dayLabel = pipTranslate.translate('DAY');\r\n                $scope.monthLabel = pipTranslate.translate('MONTH');\r\n                $scope.yearLabel = pipTranslate.translate('YEAR');\r\n            } else {\r\n                $scope.dayLabel = 'Day';\r\n                $scope.monthLabel = 'Month';                \r\n                $scope.yearLabel = 'Year';\r\n\r\n            }\r\n\r\n            function dayList(month, year) {\r\n                var count = 31, days = [], i;\r\n\r\n                if (month === 4 || month === 6 || month === 9 || month === 11) {\r\n                    count = 30;\r\n                } else if (month === 2) {\r\n                    if (year) {\r\n                        // Calculate leap year (primitive)\r\n                        count = year % 4 === 0 ? 29 : 28;\r\n                    } else {\r\n                        count = 28;\r\n                    }\r\n                }\r\n\r\n                for (i = 1; i <= count; i++) {\r\n                    days.push(i);\r\n                }\r\n\r\n                return days;\r\n            }\r\n\r\n            function monthList() {\r\n                var months = [], i;\r\n\r\n                for (i = 1; i <= 12; i++) {\r\n                    months.push({\r\n                        id: i,\r\n                        name: momentMonths[i-1]\r\n                    });\r\n                }\r\n\r\n                return months;\r\n            }\r\n\r\n            function yearList() {\r\n                var i,\r\n                    currentYear = new Date().getFullYear(),\r\n                    startYear = $scope.timeMode === 'future' ? currentYear : currentYear - 100,\r\n                    endYear = $scope.timeMode === 'past' ? currentYear : currentYear + 100,\r\n                    years = [];\r\n\r\n                if ($scope.timeMode === 'past') {\r\n                    for (i = endYear; i >= startYear; i--) {\r\n                        years.push(i);\r\n                    }\r\n                } else {\r\n                    for (i = startYear; i <= endYear; i++) {\r\n                        years.push(i);\r\n                    }\r\n                }\r\n\r\n                return years;\r\n            }\r\n\r\n            function adjustDay() {\r\n                var days = dayList($scope.month, $scope.year);\r\n\r\n                if ($scope.days.length !== days.length) {\r\n                    if ($scope.day > days.length) {\r\n                        $scope.day = days.length;\r\n                    }\r\n\r\n                    $scope.days = days;\r\n                }\r\n            }\r\n\r\n            function getValue(v) {\r\n                var value = v ? _.isDate(v) ? v : new Date(v) : null,\r\n                    day = value ? value.getDate() : null,\r\n                    month = value ? value.getMonth() + 1 : null,\r\n                    year = value ? value.getFullYear() : null;\r\n\r\n                // Update day list if month and year were changed\r\n                if ($scope.month !== month && $scope.year !== year) {\r\n                    $scope.days = dayList($scope.month, $scope.year);\r\n                }\r\n\r\n                // Assign values to scope\r\n                $scope.day = day;\r\n                $scope.month = month;\r\n                $scope.year = year;\r\n            }\r\n\r\n            function setValue() {\r\n                var value;\r\n\r\n                if ($scope.day && $scope.month && $scope.year) {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.day, 0, 0, 0, 0);\r\n                    $scope.model = value;\r\n                    $scope.ngChange();\r\n                }\r\n            }\r\n\r\n            $scope.onDayChanged = function () {\r\n                setValue();\r\n            };\r\n\r\n            $scope.onMonthChanged = function () {\r\n                adjustDay();\r\n                setValue();\r\n            };\r\n\r\n            $scope.onYearChanged = function () {\r\n                adjustDay();\r\n                setValue();\r\n            };\r\n\r\n            // Set initial values\r\n            value = $scope.model ? _.isDate($scope.model) ? $scope.model : new Date($scope.model) : null;\r\n            $scope.day = value ? value.getDate() : null;\r\n            $scope.month = value ? value.getMonth() + 1 : null;\r\n            $scope.year = value ? value.getFullYear() : null;\r\n\r\n\r\n\r\n            $scope.days = dayList($scope.month, $scope.year);\r\n            $scope.months = monthList();\r\n            $scope.years = yearList();\r\n\r\n            $scope.disableControls = $scope.disabled ? $scope.disabled() : false;\r\n\r\n            // React on changes\r\n            $scope.$watch('model', function (newValue) {\r\n                getValue(newValue);\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipDateRange', ['pipDates.Templates']);\r\n\r\n    thisModule.directive('pipDateRange',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                require: 'ngModel',\r\n                scope: {\r\n                    timeMode: '@pipTimeMode',\r\n                    disabled: '&ngDisabled',\r\n                    model: '=ngModel',\r\n                    pipChanged: '&',\r\n                    pipDateRangeType: '@',\r\n                    pipDateFormat: '@',\r\n                    pipNoLine: '@'\r\n                },\r\n                templateUrl: 'date_range_directive/date_range.html',\r\n                controller: 'pipDateRangeController'\r\n            };\r\n        });\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipDateRangeController',\r\n        function ($scope, $element, $mdMedia, $rootScope, $injector, $timeout) { //pipTranslate, \r\n            var currentDate,\r\n                currentYear,\r\n                currentMonth,\r\n                currentDay,\r\n                prevState: any = {}, \r\n                currentState: any = {},\r\n                localeDate: any = moment.localeData(),\r\n                momentMonths = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format,\r\n                momentDays = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format,\r\n                momentShortDays = localeDate._weekdaysMin,\r\n                momentFirstDayOfWeek = localeDate._week.dow;\r\n\r\n            // var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            // if (pipTranslate) {\r\n            //     pipTranslate.setTranslations('en', {\r\n            //         EVENT_NEW_START_TIME: 'Start time',\r\n            //         EVENT_NEW_END_TIME: 'End time'\r\n            //     });\r\n            //     pipTranslate.setTranslations('ru', {\r\n            //         EVENT_NEW_START_TIME: '',\r\n            //         EVENT_NEW_END_TIME: ''                \r\n            //     });\r\n            //     $scope.startLabel = $scope.pipStartLabel ? pipTranslate.translate($scope.pipStartLabel)\r\n            //             : pipTranslate.translate('EVENT_NEW_START_TIME');\r\n            //     $scope.endLabel = $scope.pipEndLabel ? pipTranslate.translate($scope.pipEndLabel)\r\n            //             : pipTranslate.translate('EVENT_NEW_END_TIME');\r\n            // } else {\r\n            //     $scope.startLabel = $scope.pipStartLabel ? $scope.pipStartLabel : 'Start time';\r\n            //     $scope.endLabel = $scope.pipEndLabel ? $scope.pipEndLabel : 'End time';              \r\n            // }\r\n\r\n            currentDate = new Date();\r\n            currentYear = currentDate.getUTCFullYear();\r\n            currentMonth = currentDate.getUTCMonth() + 1;\r\n            currentDay = currentDate.getUTCDate();\r\n\r\n            $scope.onDayChanged = function () {\r\n                setValue();\r\n            };\r\n\r\n            $scope.onMonthChanged = function () {\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    var date, dayOfWeek;\r\n\r\n                    date = new Date(Date.UTC($scope.year, $scope.month - 1, 1));\r\n                    dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n                    $scope.week = getWeekByDate(dayOfWeek, $scope.month - 1, $scope.year);\r\n                    correctWeek();\r\n                    adjustWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            $scope.onYearChanged = function () {\r\n                var date, dayOfWeek;\r\n\r\n                date = new Date(Date.UTC($scope.year, $scope.month - 1, 1));\r\n                dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    $scope.week = getWeekByDate(dayOfWeek, $scope.month - 1, $scope.year);\r\n                    adjustWeek();\r\n                    correctWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            $scope.onWeekChange = function () {\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    adjustWeek();\r\n                    correctWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            // visibility\r\n            $scope.isDay = function () {\r\n                return $scope.pipDateRangeType === 'daily';\r\n            };\r\n\r\n            $scope.isWeek = function () {\r\n                return $scope.pipDateRangeType === 'weekly';\r\n            };\r\n\r\n            $scope.isMonth = function () {\r\n                return $scope.pipDateRangeType === 'daily' ||\r\n                    $scope.pipDateRangeType === 'weekly' ||\r\n                    $scope.pipDateRangeType === 'monthly';\r\n            };\r\n\r\n            $scope.onChange = function () {\r\n                if ($scope.pipChanged) {\r\n                    $timeout(function() {\r\n                        $scope.pipChanged();\r\n                    }, 0);\r\n                }\r\n            };\r\n\r\n            function setCurrent() {\r\n                currentState.day = $scope.day;\r\n                currentState.month = $scope.month;\r\n                currentState.year = $scope.year;\r\n                currentState.week = $scope.week;\r\n                currentState.dateRangeType = $scope.pipDateRangeType;\r\n                currentState.model = $scope.model;\r\n            }\r\n\r\n            function fillLists() {\r\n                $scope.days = dayList($scope.month, $scope.year);\r\n                $scope.weeks = weekList($scope.month, $scope.year);\r\n                $scope.months = monthList();\r\n                $scope.shortMonths = monthList();\r\n                $scope.years = yearList();\r\n\r\n            }\r\n\r\n            function correctWeek() {\r\n                if (!prevState.model || prevState.model && prevState.model.getTime() >= $scope.model.getTime()) {\r\n                    // if shift week -> increase month\r\n                    if ($scope.weeks && $scope.weeks[$scope.week] && $scope.weeks[$scope.week].id <= 0) {\r\n                        if ($scope.month < 12) {\r\n                            $scope.month += 1;\r\n                        } else {\r\n                            $scope.month = 1;\r\n                            $scope.year += 1;\r\n                        }\r\n                        fillLists();\r\n                    }\r\n                }\r\n            }\r\n\r\n            function init() {\r\n                var value;\r\n\r\n                value = $scope.model ? new Date($scope.model) : null;\r\n                $scope.day = value ? value.getUTCDate() : null;\r\n                $scope.month = value ? value.getUTCMonth() + 1 : null;\r\n                $scope.year = value ? value.getUTCFullYear() : null;\r\n                $scope.week = value ? getWeekByDate($scope.day, $scope.month - 1, $scope.year) : null;\r\n\r\n                fillLists();\r\n\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    correctWeek();\r\n                    adjustWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            }\r\n\r\n            // Set initial values\r\n            $scope.$mdMedia = $mdMedia;\r\n\r\n            init();\r\n\r\n            $scope.disableControls = $scope.disabled ? $scope.disabled() : false;\r\n\r\n            // React on changes\r\n            $scope.$watch('model', function (newValue, oldValue) {\r\n                if (newValue !== oldValue) {\r\n                    getValue(newValue);\r\n                }\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n\r\n            $scope.$watch('pipDateRangeType', function (newValue, oldValue) {\r\n                if (newValue !== oldValue && oldValue) {\r\n                    init();\r\n                }\r\n            });\r\n\r\n            $scope.onYearClick = function () {\r\n                if (!$scope.year) {\r\n                    $scope.year = currentYear;\r\n                }\r\n            };\r\n\r\n            $scope.onMonthClick = function () {\r\n                if (!$scope.month) {\r\n                    $scope.month = currentMonth;\r\n                }\r\n            };\r\n\r\n            $scope.onDayClick = function () {\r\n                if (!$scope.year) {\r\n                    $scope.day = currentDay;\r\n                }\r\n            };\r\n            // ---------------------------------------------------------------------------------------\r\n\r\n            function getCountDay(month, year) {\r\n                var count = 31;\r\n\r\n                if (month === 4 || month === 6 || month === 9 || month === 11) {\r\n                    count = 30;\r\n                } else if (month === 2) {\r\n                    if (year) {\r\n                        // Calculate leap year (primitive)\r\n                        count = year % 4 === 0 ? 29 : 28;\r\n                    } else {\r\n                        count = 28;\r\n                    }\r\n                }\r\n\r\n                return count;\r\n            }\r\n\r\n            function dayList(month, year) {\r\n                var count, days, i, ln;\r\n\r\n              //  ln = $rootScope.$language || 'en';\r\n                count = getCountDay(month, year);\r\n                $scope.nameDays = [];\r\n                days = [];\r\n                for (i = 1; i <= count; i++) {\r\n                    days.push(i);\r\n                    $scope.nameDays.push(momentShortDays[moment([year, month - 1, i]).weekday()]);\r\n                }\r\n\r\n                return days;\r\n            }\r\n\r\n            function getWeekByDate(day, month, year) {\r\n                var date, dayOfWeek, startWeek;\r\n\r\n                date = new Date(Date.UTC(year, month, day));\r\n                dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n\r\n                if (dayOfWeek === 1) {\r\n                    startWeek = day;\r\n                } else {\r\n                    startWeek = day + 1 - dayOfWeek;\r\n                }\r\n\r\n                return startWeek;\r\n            }\r\n\r\n            function getWeek(day, countDay, countPrevMonthDay) {\r\n                var endDay, startDay;\r\n\r\n                endDay = day + 6 > countDay ? countDay - day - 6 : day + 6;\r\n                startDay = day > 0 ? day : countPrevMonthDay + day;\r\n\r\n                return startDay.toString() + ' - ' + (Math.abs(endDay)).toString();\r\n            }\r\n\r\n            function weekList(month, year) { //    \r\n                var weeks, countDay, countPrevMonthDay, startWeek;\r\n\r\n                weeks = [];  //        \r\n                countDay = getCountDay(month, year);\r\n                startWeek = getWeekByDate(1, month - 1, year);\r\n\r\n                countPrevMonthDay = month - 1 ? getCountDay(month - 1, year) : getCountDay(12, year - 1);\r\n                while (startWeek < countDay + 1) {\r\n                    weeks.push({\r\n                        id: startWeek,\r\n                        name: getWeek(startWeek, countDay, countPrevMonthDay)\r\n                    });\r\n                    startWeek = startWeek + 7;\r\n                }\r\n\r\n                return weeks;\r\n            }\r\n\r\n            function monthList() {\r\n                var months = [], i;\r\n\r\n                for (i = 1; i <= 12; i++) {\r\n                    months.push({\r\n                        id: i,\r\n                        name: momentMonths[i-1]\r\n                    });\r\n                }\r\n\r\n                return months;\r\n            }\r\n\r\n            function yearList() {\r\n                var startYear, i,\r\n                    endYear,\r\n                    years = [];\r\n\r\n                switch ($scope.timeMode) {\r\n                    case 'future':\r\n                        startYear = currentYear;\r\n                        endYear = currentYear + 100;\r\n                        break;\r\n                    case 'past':\r\n                        startYear = currentYear - 100;\r\n                        endYear = currentYear;\r\n                        break;\r\n                    case 'now':\r\n                        startYear = currentYear - 50;\r\n                        endYear = currentYear + 100;\r\n                        break;\r\n                    default:\r\n                        startYear = currentYear - 50;\r\n                        endYear = currentYear + 50;\r\n                        break;\r\n                }\r\n                if ($scope.timeMode === 'future') {\r\n                    for (i = startYear; i <= endYear; i++) {\r\n                        years.push(i);\r\n                    }\r\n                } else {\r\n                    for (i = endYear; i >= startYear; i--) {\r\n                        years.push(i);\r\n                    }\r\n                }\r\n\r\n                return years;\r\n            }\r\n\r\n            function adjustDay() {\r\n                var days = dayList($scope.month, $scope.year);\r\n\r\n                switch ($scope.pipDateRangeType) {\r\n                    case 'monthly':\r\n                        $scope.day = 1;\r\n                        break;\r\n                    case 'yearly':\r\n                        $scope.month = 1;\r\n                        $scope.day = 1;\r\n                        break;\r\n                    default:\r\n                        if ($scope.days.length !== days.length) {\r\n                            if ($scope.day > days.length) {\r\n                                $scope.day = days.length;\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n                $scope.days = days;\r\n            }\r\n\r\n            function adjustWeek() {\r\n                var weeks;\r\n\r\n                weeks = weekList($scope.month, $scope.year);\r\n                $scope.week = getWeekByDate($scope.week, $scope.month - 1, $scope.year);\r\n                $scope.weeks = weeks;\r\n            }\r\n\r\n            function getValue(v) {\r\n                var value, day, month, year, week;\r\n\r\n                value = v ? new Date(v) : null;\r\n                // Define values\r\n                day = value ? value.getUTCDate() : null;\r\n                month = value ? value.getUTCMonth() + 1 : null;\r\n                year = value ? value.getUTCFullYear() : null;\r\n                week = value ? getWeekByDate(day, month - 1, year) : null;\r\n                // Exit if nothing to update\r\n                if ($scope.day === day && $scope.month === month && $scope.year === year && $scope.week === week) {\r\n                    return;\r\n                }\r\n                // Assign values to scope\r\n                $scope.day = day;\r\n                $scope.month = month;\r\n                $scope.year = year;\r\n                $scope.week = week;\r\n\r\n                // Define data sources\r\n                $scope.days = dayList($scope.month, $scope.year);\r\n                $scope.weeks = weekList($scope.month, $scope.year);\r\n            }\r\n\r\n            function setValue() {\r\n                var value;\r\n\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.week, 0, 0, 0, 0);\r\n                    value = new Date(value.getTime() - value.getTimezoneOffset() * 60000);\r\n                    $scope.model = value;\r\n                } else {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.day, 0, 0, 0, 0);\r\n                    value = new Date(value.getTime() - value.getTimezoneOffset() * 60000);\r\n                    $scope.model = value;\r\n                }\r\n\r\n                prevState = _.cloneDeep(currentState);\r\n                setCurrent();\r\n                $scope.onChange();\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","'use strict';\r\n\r\nangular.module('pipDates', [\r\n    'pipDate',\r\n    'pipTimeRange',\r\n    'pipDateTime',\r\n    'pipTimeRangeEdit',\r\n    'pipDateRange',\r\n    'pipDates.Translate'\r\n]);\r\n","/**\r\n * @file Optional filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDates.Translate', []);\r\n\r\n    thisModule.filter('translate', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimeRange', []);\r\n\r\n    thisModule.directive('pipTimeRange',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipStartDate: '=',\r\n                    pipEndDate: '='\r\n                },\r\n                templateUrl: 'time_range_directive/time_range.html',\r\n                link: function ($scope: any, $element, $attrs) {\r\n\r\n                    function getDateJSON(value) {\r\n                        return value ? new Date(value) : null;\r\n                    }\r\n\r\n                    function defineStartDate() {\r\n                        if ($scope.pipStartDate !== null && $scope.pipStartDate !== undefined) {\r\n                            $scope.data.start = _.isDate($scope.pipStartDate) ? $scope.pipStartDate\r\n                                : getDateJSON($scope.pipStartDate);\r\n                        }\r\n                    }\r\n\r\n                    function defineEndDate() {\r\n                        if ($scope.pipEndDate !== null && $scope.pipEndDate !== undefined) {\r\n                            $scope.data.end = _.isDate($scope.pipEndDate) ? $scope.pipEndDate\r\n                                : getDateJSON($scope.pipEndDate);\r\n                        }\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    $scope.data = {};\r\n                    $scope.data.start = null;\r\n                    $scope.data.end = null;\r\n                    defineStartDate();\r\n                    defineEndDate();\r\n\r\n                    if (toBoolean((<any>$attrs).pipRebind)) {\r\n                        $scope.$watch('pipStartDate',\r\n                            function () {\r\n                                $scope.data.start = null;\r\n                                defineStartDate();\r\n                            }\r\n                        );\r\n                        $scope.$watch('pipEndDate',\r\n                            function () {\r\n                                $scope.data.end = null;\r\n                                defineEndDate();\r\n                            }\r\n                        );\r\n                    }\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-time-range');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimeRangeEdit', []);\r\n\r\n    thisModule.directive('pipTimeRangeEdit',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipStartDate: '=',\r\n                    pipChanged: '&',\r\n                    pipEndDate: '=',\r\n                    pipStartLabel: '@',\r\n                    pipEndLabel: '@',\r\n                    disabled: '&ngDisabled',\r\n                    pipHideTime: '=',\r\n                    pipSize: '='\r\n                },\r\n                templateUrl: 'time_range_edit_directive/time_range_edit.html',\r\n                controller: 'pipTimeRangeEditController'\r\n            };\r\n        }\r\n    );\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipTimeRangeEditController',\r\n        function ($scope, $element, $attrs, $injector, pipDateTime) { //pipTranslate\r\n\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            if (pipTranslate) {\r\n                pipTranslate.setTranslations('en', {\r\n                    EVENT_NEW_START_TIME: 'Start time',\r\n                    EVENT_NEW_END_TIME: 'End time'\r\n                });\r\n                pipTranslate.setTranslations('ru', {\r\n                    EVENT_NEW_START_TIME: '',\r\n                    EVENT_NEW_END_TIME: ''                \r\n                });\r\n                $scope.startLabel = $scope.pipStartLabel ? pipTranslate.translate($scope.pipStartLabel)\r\n                        : pipTranslate.translate('EVENT_NEW_START_TIME');\r\n                $scope.endLabel = $scope.pipEndLabel ? pipTranslate.translate($scope.pipEndLabel)\r\n                        : pipTranslate.translate('EVENT_NEW_END_TIME');\r\n            } else {\r\n                $scope.startLabel = $scope.pipStartLabel ? $scope.pipStartLabel : 'Start time';\r\n                $scope.endLabel = $scope.pipEndLabel ? $scope.pipEndLabel : 'End time';              \r\n            }\r\n\r\n            function getDateJSON(value) {\r\n                return value ? new Date(value) : null;\r\n            }\r\n\r\n            function setDuration() {\r\n                var start, end;\r\n\r\n                if (!$scope.data.startDate || !$scope.data.endDate) {\r\n                    return null;\r\n                }\r\n                \r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n                end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n\r\n                return end - start;\r\n            }\r\n\r\n            function validateStartDate() {\r\n                var date, start, end;\r\n                //     ,   \r\n                if (!$scope.data.startDate) {\r\n                    $scope.data.startTime = null;\r\n\r\n                    return;\r\n                }\r\n\r\n                // c     -  \r\n                if ($scope.data.startTime === undefined || $scope.data.startTime === null) {\r\n                    if (!$scope.data.endTime) {\r\n                        date = new Date();\r\n                        date = date.getTime() - pipDateTime.toStartDay(date);\r\n                        $scope.data.startTime = Math.floor(date / (30 * 60 * 1000)) * 30;\r\n                    } else {\r\n                        $scope.data.startTime = $scope.data.endTime === 0 ? 0 : $scope.data.endTime - 30;\r\n                    }\r\n                }\r\n\r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n\r\n                //   ,   .       \r\n                if ($scope.data.duration) {\r\n                    end = new Date(start.getTime() + $scope.data.duration);\r\n                    $scope.data.endDate = pipDateTime.toStartDay(end);\r\n                    end = end.getTime() - $scope.data.endDate.getTime();\r\n                    $scope.data.endTime = Math.floor(end / (30 * 60 * 1000)) * 30;\r\n                } else {\r\n                    //     \r\n                    end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n                    if (start >= end) {\r\n                        //    ,    \r\n                        $scope.data.endDate = pipDateTime.toStartDay(new Date(start.getTime() + 30 * 60000));\r\n                        $scope.data.endTime = ($scope.data.startTime + 30) % 1440;\r\n                    }\r\n                }\r\n\r\n                $scope.data.startTime = Math.round($scope.data.startTime / 30) * 30;\r\n            }\r\n\r\n            function validateEndDate() {\r\n                var date, start, end;\r\n\r\n                //     ,   \r\n                if (!$scope.data.endDate) {\r\n                    $scope.data.endTime = null;\r\n\r\n                    return;\r\n                }\r\n\r\n                // c     -  \r\n                if ($scope.data.endTime === undefined || $scope.data.endTime === null) {\r\n                    if (!$scope.data.startTime) {\r\n                        date = new Date();\r\n                        date = date.getTime() - pipDateTime.toStartDay(date);\r\n                        $scope.data.endTime = Math.floor(date / (30 * 60 * 1000)) * 30;\r\n                    } else {\r\n                        $scope.data.endTime = $scope.data.startTime === 1410 ? 1410 : $scope.data.startTime + 30;\r\n                    }\r\n                }\r\n\r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n                end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n\r\n                if (start >= end) {\r\n                    //    ,    \r\n                    $scope.data.startDate = pipDateTime.toStartDay(new Date(end.getTime() - 30 * 60000));\r\n                    $scope.data.startTime = $scope.data.endTime % 1440 === 0 ? 1410 : $scope.data.endTime - 30;\r\n                }\r\n\r\n                $scope.data.endTime = Math.round($scope.data.endTime / 30) * 30;\r\n                $scope.data.duration = setDuration();\r\n            }\r\n\r\n            function setDate() {\r\n                var time;\r\n\r\n                $scope.data.bind = false;\r\n\r\n                if ($scope.data.startDate) {\r\n                    time = $scope.data.startTime ? $scope.data.startTime * 60 * 1000 : 0;\r\n                    $scope.pipStartDate = new Date($scope.data.startDate.getTime() + time);\r\n                }\r\n\r\n                if ($scope.data.endDate) {\r\n                    time = $scope.data.endTime ? $scope.data.endTime * 60 * 1000 : 0;\r\n                    $scope.pipEndDate = new Date($scope.data.endDate.getTime() + time);\r\n                }\r\n\r\n                $scope.data.bind = true;\r\n            }\r\n\r\n            function defineDate() {\r\n                var start, end;\r\n\r\n                if ($scope.pipStartDate !== null && $scope.pipStartDate !== undefined) {\r\n                    start = _.isDate($scope.pipStartDate) ? $scope.pipStartDate : null;\r\n\r\n                    if (!start) {\r\n                        start = getDateJSON($scope.pipStartDate);\r\n                    }\r\n\r\n                    $scope.data.startDate = pipDateTime.toStartDay(start);\r\n                    $scope.data.startTime = (<any>new Date(start) - $scope.data.startDate) / (60 * 1000);\r\n                }\r\n\r\n                if ($scope.pipEndDate !== null && $scope.pipEndDate !== undefined) {\r\n                    end = _.isDate($scope.pipEndDate) ? $scope.pipEndDate : null;\r\n\r\n                    if (!start) {\r\n                        end = getDateJSON($scope.pipEndDate);\r\n                    }\r\n\r\n                    $scope.data.endDate = pipDateTime.toStartDay(end);\r\n                    $scope.data.endTime = (<any>new Date(end) - $scope.data.endDate) / (60 * 1000);\r\n                }\r\n\r\n                validateStartDate();\r\n                validateEndDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n            }\r\n\r\n            function getTimeInterval() {\r\n                var result, i, j, minutes;\r\n\r\n                result = [];\r\n                for (i = 0; i < 24; i++) {\r\n                    for (j = 0; j < 2; j++) {\r\n                        minutes = j * 30;\r\n                        result.push({\r\n                            id: i * 60 + minutes,\r\n                            time: _.pad(i.toString(), 3, '0').substr(0, 2) + ':' + _.pad(minutes.toString(), 2, '0')\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            }\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            function initDate() {\r\n                $scope.data.startDate = null;\r\n                $scope.data.startTime = null;\r\n                $scope.data.endDate = null;\r\n                $scope.data.endTime = null;\r\n                $scope.data.duration = null;\r\n                $scope.showTime = !toBoolean($scope.pipHideTime);\r\n            }\r\n\r\n            // initialize data\r\n            $scope.intervalTimeCollection = getTimeInterval();\r\n            $scope.data = {};\r\n            initDate();\r\n            defineDate();\r\n\r\n            // process function\r\n            $scope.onChangeStartDate = function (newV) {\r\n                validateStartDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeEndDate = function () {\r\n                validateEndDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeStartTime = function () {\r\n                if (!$scope.data.startDate) {\r\n                    $scope.data.startDate = pipDateTime.toStartDay(new Date());\r\n                }\r\n                validateStartDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeEndTime = function () {\r\n                if (!$scope.data.endDate) {\r\n                    $scope.data.endDate = pipDateTime.toStartDay(new Date());\r\n                }\r\n\r\n                validateEndDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.isDisabled = function () {\r\n                if ($scope.disabled) {\r\n                    return $scope.disabled();\r\n                }\r\n\r\n                return false;\r\n            };\r\n\r\n            $scope.$watchGroup([$scope.pipStartDate, $scope.pipEndDate], function () {\r\n                if ($scope.data.bind) {\r\n                    initDate();\r\n                    defineDate();\r\n                }\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n\r\n            // Add class\r\n            $element.addClass('pip-time-range-edit');\r\n        }\r\n    );\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('date_directive/date.html',\n    '<div class=\"pip-date layout-row flex\" tabindex=\"-1\"><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-day flex\" ng-disabled=\"disableControls\" ng-model=\"day\" placeholder=\"{{dayLabel}}\" ng-change=\"onDayChanged()\"><md-option ng-value=\"opt\" ng-repeat=\"opt in days track by opt\">{{:: opt }}</md-option></md-select></md-input-container><div class=\"input-container-separator flex-fixed\"></div><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-monthflex\" ng-disabled=\"disableControls\" ng-model=\"month\" placeholder=\"{{monthLabel}}\" ng-change=\"onMonthChanged()\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in months track by opt.id\">{{:: opt.name }}</md-option></md-select></md-input-container><div class=\"input-container-separator flex-fixed\"></div><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-year flex\" ng-disabled=\"disableControls\" ng-model=\"year\" placeholder=\"{{yearLabel}}\" ng-change=\"onYearChanged()\"><md-option ng-value=\"opt\" ng-repeat=\"opt in years track by opt\">{{:: opt }}</md-option></md-select></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('date_range_directive/date_range.html',\n    '<div class=\"pip-date-range layout-row flex\" tabindex=\"-1\"><md-input-container ng-show=\"isDay()\" class=\"input-container pip-day flex\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-day\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" md-on-open=\"onDayClick()\" ng-model=\"day\" ng-change=\"onDayChanged()\" placeholder=\"{{dayLabel}}\" aria-label=\"DAY\"><md-option ng-value=\"opt\" ng-repeat=\"opt in days track by opt\">{{nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container ng-show=\"isWeek()\" class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-week\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" ng-model=\"week\" ng-change=\"onWeekChange()\" placeholder=\"{{weekLabel}}\" aria-label=\"WEEK\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in weeks track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><div class=\"flex-fixed\" ng-class=\"{\\'space16\\': $mdMedia(\\'gt-xs\\'), \\'space8\\': $mdMedia(\\'xs\\')}\" ng-show=\"isDay() || isWeek()\"></div><md-input-container ng-show=\"isMonth() && !monthFormatShort\" class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-month\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" md-on-open=\"onMonthClick()\" ng-model=\"month\" ng-change=\"onMonthChanged()\" placeholder=\"{{monthLabel}}\" aria-label=\"MONTH\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in months track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container ng-show=\"isMonth() && monthFormatShort\" class=\"flex input-container\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-month\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" md-on-open=\"onMonthClick()\" ng-model=\"month\" ng-change=\"onMonthChanged()\" placeholder=\"{{monthLabel}}\" aria-label=\"MONTH\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in shortMonths track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><div class=\"flex-fixed\" ng-class=\"{\\'space16\\': $mdMedia(\\'gt-xs\\'), \\'space8\\': $mdMedia(\\'xs\\')}\" ng-show=\"isMonth()\"></div><md-input-container class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-year\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" md-on-open=\"onYearClick()\" ng-model=\"year\" ng-change=\"onYearChanged()\" placeholder=\"{{yearLabel}}\" aria-label=\"YEAR\"><md-option ng-value=\"opt\" ng-repeat=\"opt in years track by opt\">{{ opt }}</md-option></md-select></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('time_range_directive/time_range.html',\n    '<p><span ng-if=\"data.start != null\">{{data.start | formatLongDateTime}}</span> <span class=\"separator\" ng-if=\"data.start && data.end\">-</span> <span ng-if=\"data.end != null\">{{data.end | formatLongDateTime}}</span></p>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('time_range_edit_directive/time_range_edit.html',\n    '<div class=\"event-edit layout-row layout-xs-column flex layout-align-start-start\"><div flex=\"47\" class=\"start-time-container\"><p class=\"text-caption text-grey\">{{startLabel}}</p><div class=\"layout-row layout-align-space-between-center\"><div class=\"pip-datepicker-container\" flex=\"49\"><md-datepicker ng-model=\"data.startDate\" xmd-placeholder=\"{{startLabel}}\" ng-change=\"onChangeStartDate()\" ng-disabled=\"isDisabled()\" aria-label=\"START-DATE\"></md-datepicker></div><div flex=\"\" ng-if=\"showTime\"><md-input-container class=\"input-container\"><md-select aria-label=\"START-TIME\" ng-model=\"data.startTime\" ng-disabled=\"isDisabled()\" ng-change=\"onChangeStartTime(data.startTime)\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in intervalTimeCollection track by opt.id\">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex=\"47\" class=\"end-time-container\"><p class=\"text-caption text-grey\">{{endLabel}}</p><div class=\"layout-row layout-align-space-between-center\"><div class=\"pip-datepicker-container flex-49\"><md-datepicker ng-model=\"data.endDate\" xmd-placeholder=\"{{endLabel}}\" ng-disabled=\"isDisabled()\" ng-change=\"onChangeEndDate()\" aria-label=\"END-DATE\"></md-datepicker></div><div flex=\"\" ng-if=\"showTime\"><md-input-container class=\"input-container\"><md-select aria-label=\"END-TIME\" ng-model=\"data.endTime\" ng-change=\"onChangeEndTime()\" ng-disabled=\"isDisabled()\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in intervalTimeCollection track by opt.id\">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-dates-html.min.js.map\n","import { ConfirmationParams } from './ConfirmationParams';\r\n\r\nexport class ConfirmationDialogController {\r\n\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public theme: string;\r\n    public config: ConfirmationParams;\r\n\r\n    constructor(\r\n        $mdDialog: angular.material.IDialogService,\r\n        $injector: ng.auto.IInjectorService,\r\n        $rootScope: ng.IRootScopeService,\r\n        params: ConfirmationParams) \r\n    {\r\n        \"ngInject\";\r\n        this.config = new ConfirmationParams();\r\n\r\n        let pipTranslate: pip.services.ITranslateService;\r\n        pipTranslate = $injector.has('pipTranslate') ? <pip.services.ITranslateService>$injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', { 'CONFIRM_TITLE': 'Confirm' });\r\n            pipTranslate.translations('ru', { 'CONFIRM_TITLE': ''});\r\n\r\n            this.config.title = pipTranslate.translate(params.title) || pipTranslate.translate('CONFIRM_TITLE');\r\n            this.config.ok = pipTranslate.translate(params.ok) || pipTranslate.translate('OK');\r\n            this.config.cancel = pipTranslate.translate(params.cancel) || ('CANCEL');\r\n        } else {\r\n            this.config.title = params.title || 'Confirm';\r\n            this.config.ok = params.ok || 'OK';\r\n            this.config.cancel = params.cancel || 'Cancel';\r\n        }\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this.theme = $rootScope['$theme'];\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipConfirmationDialog', [\r\n        'ngMaterial', \r\n        'pipDialogs.Translate',\r\n        'pipDialogs.Templates'\r\n    ])\r\n    .controller('pipConfirmationDialogController', ConfirmationDialogController);","export class ConfirmationParams {\r\n    public ok: string = 'OK';\r\n    public title?: string; \r\n    public cancel: string = 'Cancel';\r\n    public event?: MouseEvent;\r\n}\r\n","import { ConfirmationParams } from './ConfirmationParams';\r\n\r\nexport interface IConfirmationService {\r\n    show(params: ConfirmationParams, successCallback?: () => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass ConfirmationService implements IConfirmationService {\r\n    private _mdDialog: angular.material.IDialogService;\r\n    \r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n\r\n    public show(params: ConfirmationParams, successCallback?: () => void, cancelCallback?: () => void) {\r\n        this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'confirmation/ConfirmationDialog.html',\r\n            controller: 'pipConfirmationDialogController',\r\n            controllerAs: 'vm',\r\n            locals: { params: params },\r\n            clickOutsideToClose: true\r\n        })\r\n        .then(() => {\r\n            if (successCallback) {\r\n                successCallback();\r\n            }\r\n        }, \r\n        () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipConfirmationDialog')\r\n    .service('pipConfirmationDialog', ConfirmationService);","import './ConfirmationController';\r\nimport './ConfirmationService';\r\nimport './ConfirmationParams';","/**\r\n * @file Registration of dialogs\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n'use strict';\r\n\r\nimport './error_details';\r\nimport './information';\r\nimport './options';\r\nimport './confirmation';\r\n\r\nangular\r\n    .module('pipDialogs', [\r\n        'pipInformationDialog',\r\n        'pipConfirmationDialog',\r\n        'pipOptionsDialog',\r\n        'pipOptionsBigDialog',\r\n        'pipErrorDetailsDialog',\r\n        //'pipErrorDetails2Dialog'\r\n    ]);\r\n\r\nexport * from './error_details';\r\n//export * from './error_details2';\r\nexport * from './information';\r\nexport * from './options';\r\nexport * from './confirmation';\r\n","'use strict';\r\n\r\nimport IWindowService = angular.IWindowService;\r\n\r\nexport class ErrorStrings {\r\n    public ok: string = 'OK';\r\n    public cancel: string = 'Cancel';\r\n    public errorDetails: string = 'Error details';\r\n    public dismissButton: string = 'Dismiss';\r\n    public errorMessage: string = 'Message';\r\n    public errorCode: string = 'Code';\r\n    public errorMethod: string = 'Method';\r\n    public errorPath: string = 'Path';\r\n    public error: string = 'Error';\r\n    public errorText: string = 'Error';   \r\n}\r\n\r\nexport class ErrorParams {\r\n    public ok: string = 'OK';\r\n    public cancel: string = 'CANCEL';\r\n    public error: string = 'ERROR';\r\n}\r\n\r\nexport class ErrorDetailsDialogController {\r\n    public $mdDialog: ng.material.IDialogService;\r\n    public theme: string;\r\n    public config: ErrorStrings;\r\n\r\n    constructor(\r\n        $mdDialog: ng.material.IDialogService,\r\n        $injector: ng.auto.IInjectorService,\r\n        $rootScope: ng.IRootScopeService, \r\n        params: ErrorParams) \r\n    {\r\n        \"ngInject\";\r\n        this.config = new ErrorStrings();\r\n        let pipTranslate: pip.services.ITranslateService = $injector.has('pipTranslate') \r\n            ? <pip.services.ITranslateService>$injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', {\r\n                'OK': 'Ok',\r\n                'CANCEL': 'Cancel',\r\n                'ERROR_DETAILS': 'Error details',\r\n                'CODE': 'Error code',\r\n                'PATH': 'Path',\r\n                'ERROR': 'Error',\r\n                'METHOD': 'Method',\r\n                'MESSAGE': 'Message',\r\n                'DISMISS': 'Dismiss'\r\n            });\r\n            pipTranslate.translations('ru', {\r\n                'OK': '',\r\n                'CANCEL': '',                    \r\n                'ERROR_DETAILS': ' ',\r\n                'CODE': ' ',\r\n                'PATH': '',\r\n                'ERROR': '',\r\n                'METHOD': '',\r\n                'MESSAGE': ''\r\n            });\r\n            this.config.ok = pipTranslate.translate(params.ok) || pipTranslate.translate('OK');\r\n            this.config.cancel = pipTranslate.translate(params.cancel) || pipTranslate.translate('CANCEL');\r\n            this.config.errorDetails = pipTranslate.translate('ERROR_DETAILS');\r\n            this.config.dismissButton = pipTranslate.translate('DISMISS');\r\n            this.config.errorMessage = pipTranslate.translate('MESSAGE');\r\n            this.config.errorCode = pipTranslate.translate('CODE');\r\n            this.config.errorMethod = pipTranslate.translate('METHOD');\r\n            this.config.errorPath = pipTranslate.translate('PATH');\r\n            this.config.errorText = pipTranslate.translate('ERROR');                \r\n        } else {\r\n            this.config.ok = params.ok || 'Ok';\r\n            this.config.cancel = params.cancel || 'Cancel';\r\n        }\r\n        \r\n        this.$mdDialog = $mdDialog;\r\n        this.theme = $rootScope.$theme;\r\n        this.config.error = params.error;\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipErrorDetailsDialog')\r\n    .controller('pipErrorDetailsDialogController', ErrorDetailsDialogController);","\r\nclass ErrorDetailsService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    public constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public show(params, successCallback, cancelCallback) {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'error_details/ErrorDetails.html',\r\n            controller: 'pipErrorDetailsDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then(() => {\r\n            if (successCallback) {\r\n                successCallback();\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n                \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipErrorDetailsDialog')\r\n    .service('pipErrorDetailsDialog', ErrorDetailsService);","'use strict';\r\n\r\nangular\r\n    .module('pipErrorDetailsDialog', [\r\n        'ngMaterial', \r\n        'pipDialogs.Translate',\r\n        'pipDialogs.Templates']);\r\n\r\nimport './ErrorDetailsService';\r\nimport './ErrorDetailsController';\r\n","'use strict';\r\n\r\nimport IWindowService = angular.IWindowService;\r\n\r\nexport class InformationStrings {\r\n    public ok: string = 'OK';\r\n    public title: string; \r\n    public message: string;\r\n    public error: string;\r\n    public content;\r\n}\r\n\r\nexport class InformationParams {\r\n    public ok: string = 'OK';\r\n    public title?: string; \r\n    public message?: string;\r\n    public error?: string;\r\n    public item: any;\r\n}\r\n\r\nexport class InformationDialogController {\r\n\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public theme: string;\r\n    public config: InformationStrings;\r\n\r\n    constructor(\r\n        $mdDialog: angular.material.IDialogService,\r\n        $injector: ng.auto.IInjectorService,\r\n        $rootScope: ng.IRootScopeService, \r\n        params: InformationParams) \r\n    {\r\n        \"ngInject\";\r\n        this.config = new InformationStrings();\r\n\r\n        let content = params.message, item;\r\n\r\n        let pipTranslate: pip.services.ITranslateService = $injector.has('pipTranslate') ? <pip.services.ITranslateService>$injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', { 'INFORMATION_TITLE': 'Information'});\r\n            pipTranslate.translations('ru', { 'INFORMATION_TITLE': '' });\r\n\r\n            this.config.title = pipTranslate.translate(params.title) || pipTranslate.translate('INFORMATION_TITLE');\r\n            this.config.ok = pipTranslate.translate(params.ok) || pipTranslate.translate('OK');\r\n            content = pipTranslate.translate(content);\r\n        } else {\r\n            this.config.title = params.title || 'Information';\r\n            this.config.ok = params.ok || 'OK';\r\n        }\r\n\r\n        let pipFormat: pip.services.IFormat = $injector.has('pipFormat') ? <pip.services.IFormat>$injector.get('pipFormat') : null;\r\n\r\n        if (params.item && pipFormat) {\r\n            item = _.truncate(params.item, 25);\r\n            content = pipFormat.sprintf(content, item);\r\n        }\r\n        this.config.content = content;\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this.theme = $rootScope['$theme'];\r\n        this.config.error = params.error;\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipInformationDialog')\r\n    .controller('pipInformationDialogController', InformationDialogController);","export interface IInformationService {\r\n    show(params, successCallback?: () => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass InformationService implements IInformationService {\r\n    private _mdDialog: angular.material.IDialogService;\r\n    \r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n\r\n    public show(params, successCallback?: () => void, cancelCallback?: () => void) {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'information/InformationDialog.html',\r\n            controller: 'pipInformationDialogController',\r\n            controllerAs: 'vm',\r\n            locals: { params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then(function () {\r\n            if (successCallback) {\r\n                successCallback();\r\n            }\r\n        });\r\n                \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipInformationDialog')\r\n    .service('pipInformationDialog', InformationService);","'use strict';\r\n\r\nangular\r\n    .module('pipInformationDialog', [\r\n        'ngMaterial',\r\n        'pipDialogs.Translate', \r\n        'pipDialogs.Templates']);\r\n\r\nimport './InformationService';\r\nimport './InformationController';\r\n","'use strict';\r\n\r\nimport IWindowService = angular.IWindowService;\r\n\r\nexport class OptionsBigData {\r\n    public name: string;\r\n    public title: string;\r\n    public subtitle: string;\r\n}\r\n\r\nexport class OptionsBigParams {\r\n    public title?: string;  \r\n    public applyButtonTitle?: string;\r\n    public options?: OptionsBigData[];\r\n    public selectedOption?: OptionsBigData;\r\n    public deleted?: boolean;\r\n    public selectedOptionName?: string;\r\n    public deletedTitle?: string;\r\n    public hint?: string;\r\n    public noTitle: boolean = false;\r\n    public noActions: boolean = false;\r\n    public optionIndex: number = 0;\r\n}\r\n\r\nexport interface IOptionsBigDialogController {\r\n    onOk(): void;\r\n    onCancel(): void;\r\n    onKeyUp(event: JQueryKeyEventObject, index: number): void;\r\n    onOptionSelect(event: ng.IAngularEvent, option: OptionsBigData);\r\n    onSelected(): void;\r\n    onSelect: Function;\r\n    config: OptionsBigParams;\r\n    theme: string;\r\n}\r\n\r\nexport class OptionsBigDialogController implements IOptionsBigDialogController {\r\n\r\n    private $mdDialog: angular.material.IDialogService;\r\n    public theme: string;\r\n    public config: OptionsBigParams;\r\n\r\n    constructor(\r\n        $mdDialog: angular.material.IDialogService,\r\n        $injector: ng.auto.IInjectorService, \r\n        $rootScope: ng.IRootScopeService, \r\n        params: OptionsBigParams) \r\n    {\r\n        \"ngInject\";\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this.config = new OptionsBigParams();\r\n        var pipTranslate: pip.services.ITranslateService = $injector.has('pipTranslate') ? <pip.services.ITranslateService>$injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', { 'OPTIONS_TITLE': 'Choose Option'});\r\n            pipTranslate.translations('ru', { 'OPTIONS_TITLE': ' '});\r\n\r\n            this.config.title =  pipTranslate.translate(params.title) || pipTranslate.translate('OPTIONS_TITLE');\r\n            this.config.applyButtonTitle = pipTranslate.translate(params.applyButtonTitle) || pipTranslate.translate('SELECT');\r\n        } else {\r\n            this.config.title = params.title || 'Choose Option';\r\n            this.config.applyButtonTitle = params.applyButtonTitle || 'Select';\r\n        }\r\n\r\n        this.theme = $rootScope['$theme'];\r\n        this.config.options = params.options;\r\n        this.config.selectedOption = _.find(params.options, {active: true}) || new OptionsBigData();\r\n        this.config.selectedOptionName = this.config.selectedOption.name;\r\n        this.config.deleted = params.deleted;\r\n        this.config.deletedTitle = params.deletedTitle;\r\n        this.config.noActions = params.noActions || false;\r\n        this.config.noTitle = params.noTitle || false;\r\n        this.config.hint = params.hint || '';\r\n\r\n        setTimeout(this.focusInput, 500);\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    public onOptionSelect(event: ng.IAngularEvent, option: OptionsBigData) {\r\n        event.stopPropagation();\r\n        this.config.selectedOptionName = option.name;\r\n\r\n        if (this.config.noActions) {\r\n            this.onSelect();\r\n        }\r\n    }\r\n\r\n    public onSelected() {\r\n        this.config.selectedOptionName = this.config.options[this.config.optionIndex].name;\r\n\r\n        if (this.config.noActions) {\r\n               this.onSelect();\r\n        }\r\n    }\r\n\r\n    public onKeyUp(event: JQueryKeyEventObject, index: number) {\r\n        if (event.keyCode === 32 || event.keyCode === 13) {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            if (index !== undefined && index > -1 && index < this.config.options.length) {\r\n                this.config.selectedOptionName = this.config.options[index].name;\r\n                this.onSelect();\r\n            }\r\n        }\r\n    }\r\n    \r\n    public onSelect = function () {\r\n        let option: OptionsBigData;\r\n        option = <OptionsBigData>_.find(this.config.options, {name: this.config.selectedOptionName}) || new OptionsBigData();\r\n        this.$mdDialog.hide({option: option, deleted: this.config.deleted});\r\n    };\r\n\r\n\r\n    private focusInput() {\r\n        let list;\r\n        list = $('.pip-options-dialog .pip-list');\r\n        list.focus();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipOptionsBigDialog')\r\n    .controller('pipOptionsBigDialogController', OptionsBigDialogController);","export interface IOptionsBigService {\r\n    show(params, successCallback?: (option) => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass OptionsBigService implements IOptionsBigService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public show(params, successCallback?: (option) => void, cancelCallback?: () => void): any {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'options/OptionsBigDialog.html',\r\n            controller: 'pipOptionsBigDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then((option) => {\r\n            if (successCallback) {\r\n                successCallback(option);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipOptionsBigDialog')\r\n    .service('pipOptionsBigDialog', OptionsBigService);","'use strict';\r\n\r\nimport IWindowService = angular.IWindowService;\r\n\r\nexport class OptionsData {\r\n    public icon: string = 'star';\r\n    public name: string;\r\n    public title: string;\r\n    public active: boolean = true; \r\n}\r\n\r\nexport class OptionsParams {\r\n    public title?: string;  \r\n    public applyButtonTitle?: string;\r\n    public options?: OptionsData[];\r\n    public selectedOption?: OptionsData;\r\n    public deleted?: boolean;\r\n    public selectedOptionName?: string;\r\n    public deletedTitle?: string;\r\n}\r\n\r\nexport class OptionsDialogController {\r\n\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public theme: string;\r\n    public config: OptionsParams;\r\n\r\n    constructor(\r\n        $mdDialog: angular.material.IDialogService,\r\n        $injector: ng.auto.IInjectorService, \r\n        $rootScope: ng.IRootScopeService, \r\n        params: OptionsParams) {\r\n        \"ngInject\";\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this.config = new OptionsParams();\r\n        var pipTranslate: pip.services.ITranslateService = $injector.has('pipTranslate') ? <pip.services.ITranslateService>$injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', { 'OPTIONS_TITLE': 'Choose Option'});\r\n            pipTranslate.translations('ru', { 'OPTIONS_TITLE': ' '});\r\n\r\n            this.config.title = pipTranslate.translate(params.title) || pipTranslate.translate('OPTIONS_TITLE');\r\n            this.config.applyButtonTitle = pipTranslate.translate(params.applyButtonTitle) || pipTranslate.translate('SELECT');\r\n        } else {\r\n            this.config.title = params.title || 'Choose Option';\r\n            this.config.applyButtonTitle = params.applyButtonTitle || 'Select';\r\n        }\r\n\r\n        this.theme = $rootScope['$theme'];\r\n        this.config.options = params.options;\r\n        this.config.selectedOption = _.find(params.options, {active: true}) || new OptionsData();\r\n        this.config.selectedOptionName = this.config.selectedOption.name;\r\n        this.config.deleted = params.deleted;\r\n        this.config.deletedTitle = params.deletedTitle;\r\n\r\n        setTimeout(this.focusInput, 500);\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    public onOptionSelect(event: ng.IAngularEvent, option: OptionsData) {\r\n        event.stopPropagation();\r\n        this.config.selectedOptionName = option.name;\r\n    }\r\n            \r\n    public onKeyPress (event: JQueryKeyEventObject) {\r\n        if (event.keyCode === 32 || event.keyCode === 13) {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            this.onSelect();\r\n        }\r\n    }\r\n\r\n    public onSelect() {\r\n        let option: OptionsData;\r\n        option = _.find(this.config.options, {name: this.config.selectedOptionName});\r\n\r\n        this.$mdDialog.hide({option: option, deleted: this.config.deleted});\r\n    }\r\n\r\n    private focusInput() {\r\n        let list;\r\n        list = $('.pip-options-dialog .pip-list');\r\n        list.focus();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipOptionsDialog')\r\n    .controller('pipOptionsDialogController', OptionsDialogController);","\r\nexport interface IOptionsService {\r\n    show(params, successCallback?: (option) => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass OptionsService implements IOptionsService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    public constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public  show(params, successCallback?: (option) => void, cancelCallback?: () => void): any {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'options/OptionsDialog.html',\r\n            controller: 'pipOptionsDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then((option) => {\r\n            if (successCallback) {\r\n                successCallback(option.option);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n                \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipOptionsDialog')\r\n    .service('pipOptionsDialog', OptionsService);","'use strict';\r\n\r\nangular\r\n    .module('pipOptionsDialog', [\r\n        'ngMaterial', \r\n        'pipDialogs.Translate',\r\n        'pipDialogs.Templates']);\r\n\r\nimport './OptionsService';\r\nimport './OptionsController';\r\n\r\n\r\nangular\r\n    .module('pipOptionsBigDialog', [\r\n        'ngMaterial', \r\n        'pipDialogs.Translate',\r\n        'pipDialogs.Templates']);\r\n        \r\nimport './OptionsBigService';\r\nimport './OptionsBigController';","(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('confirmation/ConfirmationDialog.html',\n    '<md-dialog class=\"pip-dialog pip-confirmation-dialog layout-column\" width=\"400\" md-theme=\"{{::vm.theme}}\"><div class=\"pip-header\"><h3>{{:: vm.config.title}}</h3></div><div class=\"pip-footer\"><div><md-button ng-click=\"vm.onCancel()\">{{:: vm.config.cancel}}</md-button><md-button class=\"md-accent\" ng-click=\"vm.onOk()\">{{:: vm.config.ok}}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('error_details/ErrorDetails.html',\n    '<md-dialog class=\"pip-dialog pip-error-details-dialog layout-column\" width=\"400\" md-theme=\"{{vm.theme}}\"><div class=\"pip-body\"><div class=\"pip-header\"><h3>{{::vm.config.errorDetails | translate}}</h3></div><div class=\"layout-row layout-align-start-center error-section text-body2 color-secondary-text\" ng-if=\"vm.config.error.code || (vm.config.error.data && error.data.code)\">{{::vm.config.errorCode | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.code || (vm.config.error.data && vm.config.error.data.code)\">{{vm.config.error.code || vm.config.error.data.code}}</div><div class=\"layout-row layout-align-start-center error-section text-body2 color-secondary-text\" ng-if=\"vm.config.error.path || (vm.config.error.data && vm.config.error.data.path)\">{{::vm.config.errorPath | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.path || (vm.config.error.data && vm.config.error.data.path)\">{{vm.config.error.path || vm.config.error.data.path}}</div><div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\" ng-if=\"vm.config.error.error || (vm.config.error.data && vm.config.error.data.error)\">{{::vm.config.errorText | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.error || (vm.config.error.data && vm.config.error.data.error)\">{{vm.config.error.error || vm.config.error.data.error}}</div><div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\" ng-if=\"vm.config.error.method || (vm.config.error.data && vm.config.error.data.method)\">{{::vm.config.errorMethod | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.method || (vm.config.error.data && vm.config.error.data.method)\">{{vm.config.error.method || vm.config.error.data.method}}</div><div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\" ng-if=\"vm.config.error.message || (vm.config.error.data && vm.config.error.data.message)\">{{::vm.config.errorMessage | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.message || (vm.config.error.data && vm.config.error.data.message)\">{{vm.config.error.message || vm.config.error.data.message}}</div></div><div class=\"pip-footer\"><div><md-button class=\"md-accent m0\" ng-click=\"vm.onOk()\">{{::vm.config.dismissButton | translate}}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('information/InformationDialog.html',\n    '<md-dialog class=\"pip-dialog pip-information-dialog layout-column\" width=\"400\" md-theme=\"{{vm.theme}}\"><div class=\"pip-header\"><h3>{{:: vm.config.title | translate }}</h3></div><div class=\"pip-body\"><div class=\"pip-content\">{{ vm.config.content }}</div></div><div class=\"pip-footer\"><div><md-button class=\"md-accent\" ng-click=\"vm.onOk()\">{{ vm.config.ok | translate }}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('options/OptionsBigDialog.html',\n    '<md-dialog class=\"pip-dialog pip-options-dialog-big layout-column\" min-width=\"400\" md-theme=\"{{vm.theme}}\"><md-dialog-content class=\"pip-body pip-scroll\" ng-class=\"{\\'bp24\\': !vm.config.noActions}\"><div class=\"pip-header\" ng-class=\"{\\'header-hint\\': vm.config.noTitle && vm.config.hint}\"><h3 class=\"m0\" ng-if=\"!vm.config.noTitle\">{{::vm.config.title | translate}}</h3><div ng-show=\"vm.config.noTitle && vm.config.hint\" class=\"dialog-hint layout-row layout-align-start-center\"><div class=\"hint-icon-container flex-fixed\"><md-icon md-svg-icon=\"icons:info-circle-outline\"></md-icon></div><div>{{::vm.config.hint | translate}}</div></div></div><div class=\"content-divider\" ng-if=\"!noTitle\"></div><div class=\"pip-content\"><div class=\"spacer8\" ng-if=\"noTitle && hint\"></div><md-list class=\"pip-menu pip-ref-list\" pip-selected=\"vm.config.optionIndex\" index=\"{{vm.config.optionIndex }}\" pip-select=\"vm.onSelected($event)\"><md-list-item class=\"pip-ref-list-item pip-selectable layout-row layout-align-start-center\" ng-class=\"{\\'selected md-focused\\' : option.name == selectedOptionName, \\'divider-bottom\\': $index != options.length - 1}\" md-ink-ripple=\"\" ng-keyup=\"vm.onKeyUp($event, $index)\" ng-repeat=\"option in vm.config.options\"><div class=\"pip-content content-stretch\" ng-click=\"vm.onOptionSelect($event, option)\"><p class=\"pip-title spacer-right\" ng-if=\"option.title\" style=\"margin-bottom: 4px !important;\">{{::option.title | translate}}</p><div class=\"pip-subtitle spacer-right\" style=\"height: inherit\" ng-if=\"option.subtitle\">{{::option.subtitle | translate}}</div><div class=\"pip-subtitle spacer-right\" style=\"height: inherit\" ng-if=\"option.text\" ng-bind-html=\"option.text | translate\"></div></div></md-list-item></md-list></div><div class=\"spacer8\" ng-if=\"vm.config.noActions\"></div></md-dialog-content><div class=\"pip-footer\" ng-if=\"!vm.config.noActions\"><div><md-button class=\"pip-cancel\" ng-click=\"vm.onCancel()\">{{::\\'CANCEL\\' | translate}}</md-button><md-button class=\"pip-submit md-accent\" ng-click=\"vm.onSelect()\" style=\"margin-right: -6px\">{{::vm.config.applyButtonTitle | translate}}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('options/OptionsDialog.html',\n    '<md-dialog class=\"pip-dialog pip-options-dialog layout-column\" min-width=\"400\" md-theme=\"{{vm.theme}}\"><md-dialog-content class=\"pip-body lp0 tp0 rp0 bp24 pip-scroll\"><div class=\"pip-header\"><h3>{{::vm.config.title | translate}}</h3><div ng-show=\"vm.config.deletedTitle\" class=\"header-option text-subhead1 divider-bottom\"><md-checkbox ng-model=\"deleted\" aria-label=\"CHECKBOX\">{{::vm.config.deletedTitle | translate}}</md-checkbox></div></div><div class=\"pip-content\"><md-radio-group ng-model=\"vm.config.selectedOptionName\" class=\"pip-list md-primary\" md-no-ink=\"true\" ng-keypress=\"vm.onKeyPress($event)\" tabindex=\"0\"><div ng-repeat=\"option in vm.config.options\" class=\"pip-list-item\" md-ink-ripple=\"\" ui-event=\"{ click: \\'vm.onOptionSelect($event, option)\\' }\" ng-class=\"{ selected: option.name == vm.config.selectedOptionName }\"><div class=\"pip-list-item item-padding\"><md-icon class=\"pip-option-icon\" md-svg-icon=\"icons:{{option.icon}}\" ng-if=\"option.icon\"></md-icon><div class=\"pip-option-title\">{{::option.title | translate}}</div><md-radio-button ng-value=\"option.name\" tabindex=\"-1\" aria-label=\"{{::option.title | translate}}\"></md-radio-button></div></div></md-radio-group></div></md-dialog-content><div class=\"pip-footer\"><div><md-button class=\"pip-cancel\" ng-click=\"vm.onCancel()\">{{::\\'CANCEL\\' | translate}}</md-button><md-button class=\"pip-submit md-accent\" ng-click=\"vm.onSelect()\">{{::vm.config.applyButtonTitle | translate}}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-dialogs-html.min.js.map\n","'use strict';\r\n\r\nexport let ActionsChangedEvent = 'pipActionsChanged';\r\nexport let SecondaryActionsOpenEvent = 'pipSecondaryActionsOpen';\r\n\r\nexport class SimpleActionItem {\r\n    // Name to refer to the item\r\n    public name: string;\r\n    // Link visible title\r\n    public title?: string;\r\n    // Show divider instead of title\r\n    public divider?: boolean;\r\n    // Icon name from $iconProvider\r\n    public icon?: string;\r\n    // Counter badge\r\n    public count?: number;\r\n    // Access function\r\n    public access?: (action: SimpleActionItem) => boolean;\r\n    // Show on specified breakpoints\r\n    public breakpoints?: string[];\r\n    // window.location.href\r\n    public href?: string;\r\n    // $location.url\r\n    public url?: string;\r\n    // $state.go(state, stateParams)\r\n    public state?: string;\r\n    // Parameters for $state.go(state, stateParams)\r\n    public stateParams?: any;\r\n    // $rootScope.broadcast(event)\r\n    public event?: string;\r\n    // Click callback\r\n    public click?: (action: SimpleActionItem) => void;\r\n}\r\n\r\nexport class ActionItem extends SimpleActionItem {\r\n    public subActions: SimpleActionItem[];\r\n}\r\n\r\nexport class ActionsConfig {\r\n    // Primary global actions visible on the screen\r\n    public primaryGlobalActions: ActionItem[] = [];\r\n    // Primary local actions visible on the screen\r\n    public primaryLocalActions: ActionItem[] = [];\r\n\r\n    // Secondary global actions available in popup\r\n    public secondaryGlobalActions: ActionItem[] = [];\r\n    // Secondary local actions available in popup\r\n    public secondaryLocalActions: ActionItem[]= [];\r\n}\r\n\r\nexport interface IActionsService {\r\n    readonly config: ActionsConfig;\r\n\r\n    primaryGlobalActions: ActionItem[];\r\n    primaryLocalActions: ActionItem[];\r\n    secondaryGlobalActions: ActionItem[];\r\n    secondaryLocalActions: ActionItem[];    \r\n\r\n    show(primaryActions?: ActionItem[], secondaryActions?: ActionItem[]): void;\r\n    hide(): void;\r\n    updateCount(link: string, count: number): void; \r\n    clearCounts(): void;\r\n    openMenuEvent(): void;\r\n}\r\n\r\nexport interface IActionsProvider extends ng.IServiceProvider {\r\n    config: ActionsConfig;\r\n    \r\n    primaryGlobalActions: ActionItem[];\r\n    primaryLocalActions: ActionItem[];\r\n    secondaryGlobalActions: ActionItem[];\r\n    secondaryLocalActions: ActionItem[];    \r\n}\r\n\r\nclass ActionsService implements IActionsService {\r\n    private _config: ActionsConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        config: ActionsConfig,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config(): ActionsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get primaryGlobalActions(): ActionItem[] {\r\n        return this._config.primaryGlobalActions;\r\n    }\r\n\r\n    public set primaryGlobalActions(value: ActionItem[]) {\r\n        this._config.primaryGlobalActions = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get secondaryGlobalActions(): ActionItem[] {\r\n        return this._config.secondaryGlobalActions;\r\n    }\r\n\r\n    public set secondaryGlobalActions(value: ActionItem[]) {\r\n        this._config.secondaryGlobalActions = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get primaryLocalActions(): ActionItem[] {\r\n        return this._config.primaryLocalActions;\r\n    }\r\n\r\n    public set primaryLocalActions(value: ActionItem[]) {\r\n        this._config.primaryLocalActions = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get secondaryLocalActions(): ActionItem[] {\r\n        return this._config.secondaryLocalActions;\r\n    }\r\n\r\n    public set secondaryLocalActions(value: ActionItem[]) {\r\n        this._config.secondaryLocalActions = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public show(primaryActions?: ActionItem[], secondaryActions?: ActionItem[]): void {\r\n        this._config.primaryLocalActions = primaryActions || [];\r\n        this._config.secondaryLocalActions = secondaryActions || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public hide(): void {\r\n        this._config.primaryLocalActions = [];\r\n        this._config.secondaryLocalActions = [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public updateCount(action: string, count: number) {\r\n        if (action == null || !_.isNumber(count)) return;\r\n\r\n        _.each(this._config.primaryGlobalActions, (a) => {\r\n            if (a.name == action)\r\n                a.count = count;\r\n        });\r\n        _.each(this._config.primaryLocalActions, (a) => {\r\n            if (a.name == action)\r\n                a.count = count;\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public clearCounts(): void {\r\n        _.each(this._config.primaryGlobalActions, (a) => {\r\n            a.count = null;\r\n        });\r\n        _.each(this._config.primaryLocalActions, (a) => {\r\n            a.count = null;\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    private sendChangeEvent() {\r\n        this._rootScope.$emit(ActionsChangedEvent, this._config);\r\n    }\r\n\r\n    public openMenuEvent(): void {\r\n        this._rootScope.$emit(SecondaryActionsOpenEvent);\r\n    }\r\n}\r\n\r\nclass ActionsProvider implements IActionsProvider {\r\n    private _config: ActionsConfig = new ActionsConfig();\r\n    private _service: ActionsService;\r\n\r\n    public get config(): ActionsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: ActionsConfig) {\r\n        this._config = value || new ActionsConfig();\r\n    }\r\n\r\n    public get primaryGlobalActions(): ActionItem[] {\r\n        return this._config.primaryGlobalActions;\r\n    }\r\n\r\n    public set primaryGlobalActions(value: ActionItem[]) {\r\n        this._config.primaryGlobalActions = value || [];\r\n    }\r\n\r\n    public get secondaryGlobalActions(): ActionItem[] {\r\n        return this._config.secondaryGlobalActions;\r\n    }\r\n\r\n    public set secondaryGlobalActions(value: ActionItem[]) {\r\n        this._config.secondaryGlobalActions = value || [];\r\n    }\r\n\r\n    public get primaryLocalActions(): ActionItem[] {\r\n        return this._config.primaryLocalActions;\r\n    }\r\n\r\n    public set primaryLocalActions(value: ActionItem[]) {\r\n        this._config.primaryLocalActions = value || [];\r\n    }\r\n\r\n    public get secondaryLocalActions(): ActionItem[] {\r\n        return this._config.secondaryLocalActions;\r\n    }\r\n\r\n    public set secondaryLocalActions(value: ActionItem[]) {\r\n        this._config.secondaryLocalActions = value || [];\r\n    }\r\n\r\n    public $get($rootScope) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new ActionsService(this._config, $rootScope);\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipActions')\r\n    .provider('pipActions', ActionsProvider);\r\n\r\n","'use strict';\r\n\r\nimport { IActionsService, ActionItem, ActionsConfig } from \"./ActionsService\";\r\n// Prevent junk from going into typescript definitions\r\n\r\n// todo: create class ActionsController and extend it \r\n\r\nclass PrimaryActionsController {\r\n    private _element: ng.IAugmentedJQuery;\r\n    private _attrs: ng.IAttributes;\r\n    private _injector: ng.auto.IInjectorService;\r\n    private _scope: angular.IScope;\r\n    private _log: ng.ILogService;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _window: ng.IWindowService;\r\n    private _location: ng.ILocationService;\r\n    private _pipActions: IActionsService;\r\n    private _pipTranslate: pip.services.ITranslateService\r\n\r\n    public config: ActionsConfig;\r\n\r\n    constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $attrs: ng.IAttributes,\r\n        $injector: ng.auto.IInjectorService,\r\n        $scope: angular.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        $window: ng.IWindowService,\r\n        $location: ng.ILocationService,\r\n        pipActions: IActionsService\r\n\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._element = $element;\r\n        this._attrs = $attrs;\r\n        this._scope = $scope;\r\n        this._injector = $injector;\r\n        this._log = $log;\r\n        this._rootScope = $rootScope;\r\n        this._window = $window;\r\n        this._location = $location;\r\n        this._pipActions = pipActions;\r\n\r\n\r\n        this._pipTranslate = this._injector.has('pipTranslate') ? <pip.services.ITranslateService>this._injector.get('pipTranslate') : null;\r\n        if (this._pipTranslate && this._pipTranslate.setTranslations) {\r\n            this._pipTranslate.setTranslations('en', {\r\n                DOCUMENTS_ATTACHED: 'document(s) attached',\r\n                ERROR_DOCUMENTS_LOADED: 'Error: <%= error_number %> document(s) are not loaded'\r\n            });\r\n            this._pipTranslate.setTranslations('ru', {\r\n                DOCUMENTS_ATTACHED: ' ',\r\n                ERROR_DOCUMENTS_LOADED: ': <%= error_number %> ()  '\r\n\r\n            });\r\n        }\r\n\r\n        // Apply class and call resize\r\n        this._element.addClass('pip-primary-actions');\r\n\r\n        if (this._scope.localActions) {\r\n            pipActions.primaryLocalActions = this._scope.localActions;\r\n        }\r\n\r\n        if (this._scope.globalActions) {\r\n            pipActions.primaryGlobalActions = this._scope.globalActions;\r\n        }\r\n\r\n        this.config = pipActions.config;\r\n\r\n        this._rootScope.$on('pipActionsChanged', (event: ng.IAngularEvent, config: ActionsConfig) => {\r\n            this.onActionsChanged(event, config);\r\n        });\r\n\r\n    }\r\n\r\n    private onActionsChanged(event: ng.IAngularEvent, config: ActionsConfig) {\r\n        this.config = config;\r\n    }\r\n\r\n    public isHidden(action: ActionItem): boolean {\r\n        // Todo: Check breakpoints here\r\n        return action.access && !action.access(action);\r\n    }\r\n\r\n    public actionCount(action: ActionItem): string {\r\n        if (action.count === null || action.count <= 0) {\r\n            return '';\r\n        }\r\n        if (action.count > 99) {\r\n            return '!';\r\n        }\r\n\r\n        return String(action.count);\r\n    }\r\n\r\n    public clickAction(action: ActionItem, $mdOpenMenu: Function): void {\r\n        if (!action || action.divider) {\r\n            return;\r\n        }\r\n\r\n        // todo: do not supported into ActionItem\r\n        // if (action.close) {\r\n        //     this._scope.originatorEv = null;\r\n        // }\r\n\r\n        if (action.subActions) {\r\n            $mdOpenMenu(this._scope.originatorEv);\r\n            return;\r\n        }\r\n\r\n        if (_.isFunction(action.click)) {\r\n            action.click(action);\r\n            return;\r\n        }\r\n\r\n        if (action.href) {\r\n            this._window.location.href = action.href;\r\n            return;\r\n        }\r\n\r\n        if (action.url) {\r\n            this._location.url(action.url);\r\n            return;\r\n        }\r\n\r\n        if (action.state) {\r\n            if (this._injector.has('this._state')) {\r\n                let _state: angular.ui.IStateService = this._injector.has('pipTranslate') ? <angular.ui.IStateService>this._injector.get('$state') : null ;\r\n                if (_state) {\r\n                    _state.go(action.state, action.stateParams);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (action.event) {\r\n            this._rootScope.$broadcast(action.event);\r\n        } else {\r\n            // Otherwise raise notification\r\n            this._rootScope.$broadcast('pipActionClicked', action.name);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n(() => {\r\n    function primaryActionsDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                localActions: '=pipLocalActions',\r\n                globalActions: '=pipGlobalActions'\r\n            },\r\n            replace: false,\r\n            templateUrl: 'actions/PrimaryActions.html',\r\n            controller: PrimaryActionsController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipActions')\r\n        .directive('pipPrimaryActions', primaryActionsDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { IActionsService, ActionItem, ActionsConfig } from \"./ActionsService\";\r\n\r\n// Prevent junk from going into typescript definitions\r\n\r\n// todo: create class ActionsController and extend it \r\n\r\nclass SecondaryActionsController {\r\n    private _element: ng.IAugmentedJQuery;\r\n    private _attrs: ng.IAttributes;\r\n    private _injector: ng.auto.IInjectorService;\r\n    private _scope: angular.IScope;\r\n    private _log: ng.ILogService;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _window: ng.IWindowService;\r\n    private _location: ng.ILocationService;\r\n    private _pipActions: IActionsService;\r\n    private _pipTranslate: pip.services.ITranslateService\r\n    private _menuFn: Function;\r\n    public config: ActionsConfig;\r\n\r\n    constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $attrs: ng.IAttributes,\r\n        $injector: ng.auto.IInjectorService,\r\n        $scope: angular.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        $window: ng.IWindowService,\r\n        $location: ng.ILocationService,\r\n        pipActions: IActionsService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._element = $element;\r\n        this._attrs = $attrs;\r\n        this._scope = $scope;\r\n        this._injector = $injector;\r\n        this._log = $log;\r\n        this._rootScope = $rootScope;\r\n        this._window = $window;\r\n        this._location = $location;\r\n        this._pipActions = pipActions;\r\n\r\n        // Apply class and call resize\r\n        this._element.addClass('pip-secondary-actions');\r\n\r\n        if (this._scope.localActions) {\r\n            pipActions.secondaryLocalActions = this._scope.localActions;\r\n        }\r\n\r\n        if (this._scope.globalActions) {\r\n            pipActions.secondaryGlobalActions = this._scope.globalActions;\r\n        }\r\n\r\n        this.config = pipActions.config;\r\n\r\n        this._rootScope.$on('pipActionsChanged', (event: ng.IAngularEvent, config: ActionsConfig) => {\r\n            this.onActionsChanged(event, config);\r\n        });\r\n\r\n        this._rootScope.$on('pipSecondaryActionsOpen', () => {\r\n            this.onActionsMenuOpen();\r\n        });\r\n\r\n    }\r\n\r\n    public getMenu(menuFn: Function): void {\r\n         this._menuFn = menuFn;\r\n    }\r\n\r\n    public onActionsMenuOpen(): void {\r\n        this._menuFn();\r\n    }\r\n\r\n    public openMenu($mdOpenMenu: Function, ev: ng.IAngularEvent): void {\r\n        this._scope.originatorEv = ev;\r\n        $mdOpenMenu(ev);\r\n    }\r\n\r\n    private onActionsChanged(event: ng.IAngularEvent, config: ActionsConfig) {\r\n        this.config = config;\r\n    }\r\n\r\n    public isHidden(action: ActionItem): boolean {\r\n        // Todo: Check breakpoints here\r\n        return action.access && !action.access(action);\r\n    }\r\n\r\n    public actionCount(action: ActionItem): string {\r\n        if (action.count === null || action.count <= 0) {\r\n            return '';\r\n        }\r\n        if (action.count > 99) {\r\n            return '!';\r\n        }\r\n\r\n        return String(action.count);\r\n    }\r\n\r\n\r\n    private calcActions(actions: ActionItem[]): number {\r\n        let count: number = 0;\r\n\r\n        _.each(actions, (action: ActionItem) => {\r\n            if (!this.isHidden(action)) {\r\n                count++;\r\n            }\r\n        });\r\n\r\n        return count;\r\n    }\r\n\r\n    public secondaryActionsVisible() {\r\n        return this.calcActions(this.config.secondaryGlobalActions) > 0 ||\r\n            this.calcActions(this.config.secondaryLocalActions) > 0;\r\n    }\r\n\r\n    public secondaryDividerVisible() {\r\n        return this.calcActions(this.config.secondaryGlobalActions) > 0 &&\r\n            this.calcActions(this.config.secondaryLocalActions) > 0;\r\n    }\r\n\r\n    public clickAction(action: ActionItem, $mdOpenMenu: Function): void {\r\n        if (!action || action.divider) {\r\n            return;\r\n        }\r\n\r\n        // todo: do not supported into ActionItem\r\n        // if (action.close) {\r\n        //     this._scope.originatorEv = null;\r\n        // }\r\n\r\n        if (action.subActions) {\r\n            $mdOpenMenu(this._scope.originatorEv);\r\n            return;\r\n        }\r\n\r\n        if (action.click) {\r\n            action.click(action);\r\n            return;\r\n        }\r\n\r\n        if (action.href) {\r\n            this._window.location.href = action.href;\r\n            return;\r\n        }\r\n\r\n        if (action.url) {\r\n            this._location.url(action.url);\r\n            return;\r\n        }\r\n\r\n        if (action.state) {\r\n            if (this._injector.has('this._state')) {\r\n                let _state: angular.ui.IStateService = this._injector.has('pipTranslate') ? <angular.ui.IStateService>this._injector.get('$state') : null;\r\n                if (_state) {\r\n                    _state.go(action.state, action.stateParams);\r\n                }\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (action.event) {\r\n            this._rootScope.$broadcast(action.event);\r\n        } else {\r\n            // Otherwise raise notification\r\n            this._rootScope.$broadcast('pipActionClicked', action.name);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n(() => {\r\n    function secondaryActionsDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                localActions: '=pipLocalActions',\r\n                globalActions: '=pipGlobalActions'\r\n            },\r\n            replace: false,\r\n            templateUrl: 'actions/SecondaryActions.html',\r\n            controller: SecondaryActionsController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipActions')\r\n        .directive('pipSecondaryActions', secondaryActionsDirective);\r\n\r\n})();\r\n","'use strict';\r\n\r\nangular.module('pipActions', ['ngMaterial', 'pipNav.Templates', 'ui.router']);\r\n\r\nimport './ActionsService';\r\nimport './PrimaryActionsDirective';\r\nimport './SecondaryActionsDirective';\r\n\r\nexport * from './ActionsService';","'use strict';\r\n\r\nimport { IAppBarService, AppBarConfig } from \"./AppBarService\";\r\n// Prevent junk from going into typescript definitions\r\n\r\nclass AppBarDirectiveController {\r\n    public config: AppBarConfig;\r\n\r\n    constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $scope: angular.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        pipAppBar: IAppBarService\r\n    ) {\r\n        \"ngInject\";\r\n        // Apply class and call resize\r\n        $element.addClass('pip-appbar');\r\n        $element.addClass('color-primary-bg');\r\n\r\n        $scope.config = pipAppBar.config;\r\n\r\n        $rootScope.$on('pipAppBarChanged', (event: ng.IAngularEvent, config: AppBarConfig) => {\r\n            this.onAppBarChanged(event, config)\r\n        });\r\n    }\r\n\r\n    public onAppBarChanged(event: ng.IAngularEvent, config: AppBarConfig) {\r\n        this.config = config;\r\n    }\r\n    \r\n}\r\n\r\n(() => {\r\n    function appbarDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            transclude: true,\r\n            scope: true,\r\n            templateUrl: 'appbar/AppBar.html',\r\n            controller: AppBarDirectiveController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipAppBar')\r\n        .directive('pipAppbar', appbarDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\nimport { AppBarConfig, IAppBarService } from \"./AppBarService\";\r\n\r\nclass AppBarPartDirectiveController {\r\n    private _scope: ng.IScope;\r\n    private _partName: string;\r\n    private _partValue: string;\r\n\r\n    constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $attrs: ng.IAttributes,\r\n        $scope: ng.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        pipAppBar: IAppBarService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._scope = $scope;\r\n        this._partName = String($attrs.pipAppbarPart);\r\n        this._partValue = null;\r\n\r\n        // Break part apart\r\n        let pos: number = this._partName.indexOf(':');\r\n        if (pos > 0) {\r\n            this._partValue = this._partName.substr(pos + 1);\r\n            this._partName = this._partName.substr(0, pos);\r\n        }\r\n\r\n        // onAppBarChanged(null, pipAppBar.config);\r\n        $rootScope.$on('pipAppBarChanged', (event: ng.IAngularEvent, config: AppBarConfig) => {\r\n            this.onAppBarChanged(null, config)\r\n        });\r\n\r\n    }\r\n\r\n    private onAppBarChanged(event: ng.IAngularEvent, config: AppBarConfig) {\r\n        let parts: any = config.parts || {};\r\n        let currentPartValue = parts[this._partName];\r\n\r\n        // Set visible variable to switch ngIf\r\n        let visible: boolean = !!(this._partValue ? currentPartValue == this._partValue : currentPartValue);\r\n\r\n        if (visible != this._scope['visible'])\r\n            this._scope['visible'] = visible;\r\n    }\r\n\r\n}\r\n\r\n// Example is taken from here: http://stackoverflow.com/questions/20325480/angularjs-whats-the-best-practice-to-add-ngif-to-a-directive-programmatically\r\n(() => {\r\n    function appbarPartDirective(ngIfDirective) {\r\n        \"ngInject\";\r\n\r\n        var ngIf = ngIfDirective[0];\r\n\r\n        return {\r\n            transclude: ngIf.transclude,\r\n            priority: ngIf.priority,\r\n            terminal: ngIf.terminal,\r\n            restrict: ngIf.restrict,\r\n            scope: true,\r\n            link: function linkFunction($scope: ng.IScope, $element: ng.IAugmentedJQuery, $attrs: ng.IAttributes) {\r\n                // Visualize based on visible variable in scope\r\n                $attrs.ngIf = function () {\r\n                    return $scope.visible;\r\n                };\r\n                ngIf.link.apply(ngIf, arguments);\r\n            },\r\n            controller: AppBarPartDirectiveController\r\n        };\r\n    }\r\n\r\n    angular.module('pipAppBar')\r\n        .directive('pipAppbarPart', appbarPartDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let AppBarChangedEvent = 'pipAppBarChanged';\r\n\r\nexport class AppBarConfig {\r\n    visible: boolean;\r\n    parts: any;\r\n    classes: string[];\r\n} \r\n\r\nexport interface IAppBarService {\r\n    readonly config: AppBarConfig;\r\n    readonly classes: string[];\r\n    parts: any;\r\n\r\n    show(parts?: any, classes?: string[], shadowBreakpoints?: string[]): void;\r\n    hide(): void;\r\n \r\n    addShadow(...breakpoints: string[]): void;\r\n    removeShadow(): void;\r\n \r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n \r\n    part(part: string, value: any): void;\r\n}\r\n\r\nexport interface IAppBarProvider extends ng.IServiceProvider {\r\n    config: AppBarConfig;\r\n    parts: any;\r\n    classes: string[];\r\n\r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n\r\n    part(part: string, value: any): void;\r\n}\r\n\r\nclass AppBarService implements IAppBarService {\r\n    private _config: AppBarConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(config: AppBarConfig, $rootScope: ng.IRootScopeService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config(): AppBarConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public show(parts?: any, classes?: string[], shadowBreakpoints?: string[]): void {\r\n        this._config.visible = true;\r\n        this._config.parts = parts || this._config.parts || {};\r\n        this._config.classes = classes || this._config.classes || [];\r\n        if (shadowBreakpoints) {\r\n            this.setShadow(shadowBreakpoints); \r\n        }\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public hide(): void {\r\n        this._config.visible = false;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private hideShadow(): void {\r\n        this._config.classes = _.reject(this._config.classes, (c) => c.startsWith('pip-shadow'));\r\n    }\r\n\r\n    private setShadow(breakpoints: string[]): void {\r\n        this.hideShadow();\r\n\r\n        if (breakpoints != null && breakpoints.length > 0) {\r\n            _.each(breakpoints, (bp) => {\r\n                this._config.classes.push('pip-shadow-' + bp);\r\n            });\r\n        } else {\r\n            this._config.classes.push('pip-shadow');\r\n        }\r\n    }\r\n\r\n    public addShadow(...breakpoints: string[]): void {\r\n        this.setShadow(breakpoints);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public removeShadow(): void {\r\n        this.hideShadow();\r\n        this.sendConfigEvent();\r\n    }\r\n \r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n \r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n        this._rootScope.$broadcast(AppBarChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass AppBarProvider implements IAppBarProvider {\r\n    private _config: AppBarConfig = {\r\n        visible: true,\r\n        parts: {},\r\n        classes: []\r\n    };\r\n    private _service: AppBarService;\r\n\r\n    public get config(): AppBarConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: AppBarConfig) {\r\n        this._config = value || new AppBarConfig();\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public set classes(value: string[]) {\r\n        this._config.classes = value || [];\r\n    }\r\n\r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n    }\r\n \r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new AppBarService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    }     \r\n}\r\n\r\nangular\r\n    .module('pipAppBar')\r\n    .provider('pipAppBar', AppBarProvider);\r\n","'use strict';\r\n\r\nangular\r\n    .module('pipAppBar', ['ngMaterial', 'pipNav.Templates']);\r\n\r\nimport './AppBarService';\r\nimport './AppBarDirective';\r\nimport './AppBarPartDirective';\r\n\r\nexport * from './AppBarService';\r\n","'use strict';\r\n\r\nimport { SimpleActionItem } from '../actions/ActionsService';\r\nimport { BreadcrumbItem } from './BreadcrumbService';\r\nimport { BreadcrumbConfig } from './BreadcrumbService';\r\nimport { IBreadcrumbService } from './BreadcrumbService';\r\nimport { BreadcrumbChangedEvent } from './BreadcrumbService';\r\nimport { BreadcrumbBackEvent } from './BreadcrumbService';\r\nimport { OpenSearchEvent } from '../search/SearchService'\r\n\r\n// Prevent junk from going into typescript definitions\r\nclass BreadcrumbController {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _window: ng.IWindowService;\r\n    private _location: ng.ILocationService;\r\n    private _injector: ng.auto.IInjectorService;\r\n    private originatorEv: Event;\r\n    private _media: any;\r\n\r\n    public config: BreadcrumbConfig;\r\n\r\n    public constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $rootScope: ng.IRootScopeService,\r\n        $window: ng.IWindowService,\r\n        $state: ng.ui.IStateService,\r\n        $location: ng.ILocationService,\r\n        $injector: ng.auto.IInjectorService,\r\n        pipBreadcrumb: IBreadcrumbService,\r\n        $mdMedia: angular.material.IMedia\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._rootScope = $rootScope;\r\n        this._window = $window;\r\n        this._location = $location;\r\n        this._injector = $injector;\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-breadcrumb');\r\n\r\n        this.config = pipBreadcrumb.config;\r\n\r\n        $rootScope.$on(BreadcrumbChangedEvent, (event: ng.IAngularEvent, config: BreadcrumbConfig) => {\r\n            this.onBreadcrumbChanged(event, config);\r\n        });\r\n        $rootScope.$on(BreadcrumbBackEvent, () => { this.onBreadcrumbBack(); });\r\n\r\n        let pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this._media = pipMedia !== undefined ? pipMedia : $mdMedia;\r\n    }\r\n\r\n    private onBreadcrumbChanged(event: ng.IAngularEvent, config: BreadcrumbConfig): void {\r\n        this.config = config;\r\n    }\r\n\r\n    private onBreadcrumbBack(): void {\r\n        let items: BreadcrumbItem[] = this.config.items;\r\n        // Go to the last breadcrumb item\r\n        if (_.isArray(items) && items.length > 0) {\r\n            let item: BreadcrumbItem = items[items.length - 1];\r\n            if (_.isFunction(item.click)) {\r\n                item.click(item);\r\n            } else {\r\n                this._window.history.back();\r\n            }\r\n        } else {\r\n            this._window.history.back();\r\n        }\r\n    }\r\n\r\n    public onClick(item: BreadcrumbItem): void {\r\n        if (_.isFunction(item.click)) {\r\n            item.click(item);\r\n        }\r\n    }\r\n\r\n    public openSearch(): void {\r\n        this._rootScope.$broadcast(OpenSearchEvent);\r\n    }\r\n\r\n    public actionsVisible(item: BreadcrumbItem): boolean {\r\n\r\n        return angular.isArray(item.subActions) && item.subActions.length > 1;\r\n    }\r\n\r\n    public onOpenMenu($mdOpenMenu: Function, event: Event): void {\r\n        this.originatorEv = event;\r\n        $mdOpenMenu(this.originatorEv);\r\n    }\r\n\r\n    public onSubActionClick(action: SimpleActionItem): void {\r\n        if (!action || action.divider) {\r\n            return;\r\n        }\r\n\r\n        if (_.isFunction(action.click)) {\r\n            action.click(action);\r\n            return;\r\n        }\r\n\r\n        if (action.href) {\r\n            this._window.location.href = action.href;\r\n            return;\r\n        }\r\n\r\n        if (action.url) {\r\n            this._location.url(action.url);\r\n            return;\r\n        }\r\n\r\n        if (action.state) {\r\n            if (this._injector.has('$state')) {\r\n                let _state: angular.ui.IStateService = this._injector.get('$state') as ng.ui.IStateService\r\n                _state.go(action.state, action.stateParams);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (action.event) {\r\n            this._rootScope.$broadcast(action.event);\r\n            this.originatorEv = null;\r\n        } else {\r\n            // Otherwise raise notification\r\n            this._rootScope.$broadcast('pipActionClicked', action.name);\r\n            this.originatorEv = null;\r\n        }\r\n    }\r\n}\r\n\r\n(() => {\r\n    function breadcrumbDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {},\r\n            replace: false,\r\n            templateUrl: 'breadcrumb/Breadcrumb.html',\r\n            controller: BreadcrumbController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n\r\n    angular.module('pipBreadcrumb')\r\n        .directive('pipBreadcrumb', breadcrumbDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { SimpleActionItem } from '../actions/ActionsService';\r\nexport let BreadcrumbChangedEvent = \"pipBreadcrumbChanged\";\r\nexport let BreadcrumbBackEvent = \"pipBreadcrumbBack\";\r\n\r\nexport class BreadcrumbItem {\r\n    title: string;\r\n    click?: (item: BreadcrumbItem) => void;   \r\n    subActions?: SimpleActionItem[]; \r\n}\r\n\r\nexport class BreadcrumbConfig {\r\n    text: string;\r\n    items: BreadcrumbItem[];\r\n    criteria: string;\r\n}\r\n\r\nexport interface IBreadcrumbService {\r\n    config: BreadcrumbConfig;\r\n    text: string;\r\n    items: BreadcrumbItem[];\r\n    criteria: string;\r\n\r\n    showText(text: string, criteria?: string): void;\r\n    showItems(items: BreadcrumbItem[], criteria?: string): void;\r\n}\r\n\r\nexport interface IBreadcrumbProvider extends ng.IServiceProvider {\r\n    text: string;\r\n}\r\n\r\nclass BreadcrumbService implements IBreadcrumbService {\r\n    private _config: BreadcrumbConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        config: BreadcrumbConfig,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config() {\r\n        return this._config;\r\n    }\r\n\r\n    public get text(): string {\r\n        return this._config.text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        this._config.text = value;\r\n        this._config.items = null;\r\n\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get items(): BreadcrumbItem[] {\r\n        return this._config.items;\r\n    }\r\n\r\n    public set items(value: BreadcrumbItem[]) {\r\n        this._config.text = null;\r\n        this._config.items = value;\r\n\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get criteria(): string {\r\n        return this._config.criteria;\r\n    }\r\n\r\n    public set criteria(value: string) {\r\n        this._config.criteria = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showText(text: string, criteria?: string): void {\r\n        this._config.text = text;\r\n        this._config.items = null;\r\n        this._config.criteria = criteria;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showItems(items: BreadcrumbItem[], criteria?: string): void {\r\n        this._config.items = items || [];\r\n        this._config.text = null;\r\n        this._config.criteria = criteria;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public sendConfigEvent() {\r\n        this._rootScope.$broadcast(BreadcrumbChangedEvent, this._config);\r\n    }\r\n}\r\n\r\n\r\nclass BreadcrumbProvider implements IBreadcrumbProvider {\r\n    private _config: BreadcrumbConfig = { \r\n        text: null,\r\n        items: null,\r\n        criteria: null\r\n    };\r\n    private _service: BreadcrumbService;\r\n\r\n    public get text(): string {\r\n        return this._config.text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        this._config.text = value;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new BreadcrumbService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\n\r\nangular.module('pipBreadcrumb')\r\n    .provider('pipBreadcrumb', BreadcrumbProvider);\r\n","'use strict';\r\n\r\nangular.module('pipBreadcrumb', ['ngMaterial', 'pipNav.Templates', 'pipNav.Translate']);\r\n\r\nimport './BreadcrumbDirective';\r\nimport './BreadcrumbService';\r\n\r\nexport * from './BreadcrumbService';\r\n\r\n\r\n","'use strict';\r\n\r\nimport { INavIconService } from '../icon/NavIconService';\r\nimport { INavMenuService } from '../menu/NavMenuService';\r\nimport { INavHeaderService } from '../header/NavHeaderService';\r\nimport { IBreadcrumbService } from '../breadcrumb/BreadcrumbService';\r\nimport { ISearchService } from '../search/SearchService';\r\nimport { IActionsService } from '../actions/ActionsService';\r\nimport { IAppBarService } from '../appbar/AppBarService';\r\nimport { ISideNavService } from '../sidenav/SideNavService';\r\n\r\nexport interface INavService {\r\n    appbar: IAppBarService;\r\n    icon: INavIconService;\r\n    breadcrumb: IBreadcrumbService;\r\n    actions: IActionsService;\r\n    search: ISearchService;\r\n    sidenav: ISideNavService;\r\n    header: INavHeaderService;\r\n    menu: INavMenuService;\r\n\r\n    reset(): void;\r\n}\r\n\r\nclass NavService implements INavService {\r\n\r\n    public constructor($injector: ng.auto.IInjectorService) {\r\n        \"ngInject\";\r\n\r\n        this.appbar = $injector.has('pipAppBar') ? <IAppBarService>$injector.get('pipAppBar') : null;\r\n        this.icon = $injector.has('pipNavIcon') ? <INavIconService>$injector.get('pipNavIcon') : null;\r\n        this.breadcrumb = $injector.has('pipBreadcrumb') ? <IBreadcrumbService>$injector.get('pipBreadcrumb') : null;\r\n        this.actions = $injector.has('pipActions') ? <IActionsService>$injector.get('pipActions') : null;\r\n        this.search = $injector.has('pipSearch') ? <ISearchService>$injector.get('pipSearch') : null;\r\n        this.sidenav = $injector.has('pipSideNav') ? <ISideNavService>$injector.get('pipSideNav') : null;\r\n        this.header = $injector.has('pipNavHeader') ? <INavHeaderService>$injector.get('pipNavHeader') : null;\r\n        this.menu = $injector.has('pipNavMenu') ? <INavMenuService>$injector.get('pipNavMenu') : null;\r\n    }\r\n\r\n    public appbar: IAppBarService;\r\n    public icon: INavIconService;\r\n    public breadcrumb: IBreadcrumbService;\r\n    public actions: IActionsService;\r\n    public search: ISearchService;\r\n    public sidenav: ISideNavService;\r\n    public header: INavHeaderService;\r\n    public menu: INavMenuService;\r\n\r\n    public reset() {\r\n        // Reset appbar\r\n        if (this.appbar) {\r\n            this.appbar.show();\r\n        }\r\n\r\n        // Reset icon\r\n        if (this.icon) {\r\n            this.icon.showMenu();\r\n        }\r\n\r\n        // Reset breadcrumb\r\n        if (this.breadcrumb) {\r\n            this.breadcrumb.showText(null);\r\n        }\r\n\r\n        // Reset actions\r\n        if (this.actions) {\r\n            this.actions.show();\r\n        }\r\n\r\n        // Reset search\r\n        if (this.search) {\r\n            this.search.set(null);\r\n        }\r\n\r\n        if (this.sidenav) {\r\n            this.sidenav.show();\r\n        }\r\n\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipNavService', [])\r\n    .service('pipNavService', NavService);","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction translateFilter($injector: ng.auto.IInjectorService) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate: pip.services.ITranslateService = $injector.has('pipTranslate') ? <pip.services.ITranslateService>$injector.get('pipTranslate') : null;\r\n\r\n    return function (key: string) {\r\n        return pipTranslate ? pipTranslate.translate(key) || key : key;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipNav.Translate', [])\r\n    .filter('translate', translateFilter);\r\n\r\n})();\r\n\r\n","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n\r\nclass DropdownDirectiveController {\r\n    private _element: ng.IAugmentedJQuery;\r\n    private _attrs: ng.IAttributes;\r\n    private _injector: ng.auto.IInjectorService;\r\n    private _scope: angular.IScope;\r\n    private _log: ng.ILogService;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _pipTranslate: pip.services.ITranslateService;\r\n\r\n    private _pipTheme: pip.themes.IThemeService;\r\n    private _pipMedia: pip.layouts.IMediaService;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public themeClass: string;\r\n    public media: any;\r\n    public actions: any; // string or array\r\n    public activeIndex: number;\r\n    public selectedIndex: number;\r\n    public currentTheme: string;\r\n\r\n    constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $attrs: ng.IAttributes,\r\n        $injector: ng.auto.IInjectorService,\r\n        $scope: angular.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        $mdMedia: angular.material.IMedia,\r\n        $timeout: ng.ITimeoutService\r\n\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._element = $element;\r\n        this._attrs = $attrs;\r\n        this._scope = $scope;\r\n        this._injector = $injector;\r\n        this._log = $log;\r\n        this._rootScope = $rootScope;\r\n        this._timeout = $timeout;\r\n\r\n        this._pipTheme = $injector.has('pipTheme') ? <pip.themes.IThemeService>$injector.get('pipTheme') : null;\r\n        this._pipMedia = $injector.has('pipMedia') ? <pip.layouts.IMediaService>$injector.get('pipMedia') : null;\r\n\r\n        if (this._pipTheme) {\r\n            this.currentTheme = this._pipTheme.theme;\r\n        } else if (this._rootScope['$theme']) {\r\n            this.currentTheme = this._rootScope['$theme'];\r\n        }\r\n\r\n        this.themeClass = ($attrs.class || '') + ' md-' + this.currentTheme + '-theme';\r\n\r\n        //pipAssert.isArray($scope.actions, 'pipDropdown: pip-actions attribute should take an array, but take ' + typeof $scope.actions);\r\n        this.media = this._pipMedia !== undefined ? this._pipMedia : $mdMedia;\r\n        this.actions = ($scope['actions'] && _.isArray($scope['actions'])) ? $scope['actions'] : [];\r\n        this.activeIndex = $scope['activeIndex'] || 0;\r\n    }\r\n\r\n\r\n    public disabled(): boolean {\r\n        if (this._scope['ngDisabled']) {\r\n            return this._scope['ngDisabled']();\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    public onSelect(index: number): void {\r\n        this.activeIndex = index;\r\n        this._scope['activeIndex'] = index;\r\n        if (this._scope['select']) {\r\n            this._scope['select'](this.actions[index], this.activeIndex);\r\n        }\r\n\r\n        if (this._scope['pipChange']) {\r\n            this._timeout(() => {\r\n                this._scope['pipChange']();\r\n            });\r\n        }\r\n    }\r\n\r\n    public show(): boolean {\r\n        let result: boolean;\r\n        if (this._scope['showDropdown']()) {\r\n            return !!this._scope['showDropdown']();\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n}\r\n\r\n(() => {\r\n\r\n    function dropdownDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                ngDisabled: '&',\r\n                actions: '=pipActions',\r\n                showDropdown: '&pipShow',\r\n                activeIndex: '=pipActiveIndex',\r\n                select: '=pipDropdownSelect',\r\n                pipChange: '&'\r\n            },\r\n            templateUrl: 'dropdown/Dropdown.html',\r\n            controller: DropdownDirectiveController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipDropdown', ['pipNav.Templates'])\r\n        .directive('pipDropdown', dropdownDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\nimport { INavHeaderService, NavHeaderConfig } from \"./NavHeaderService\";\r\n\r\n    class NavHeaderDirectiveController {\r\n    private _element: ng.IAugmentedJQuery;\r\n    private _scope: angular.IScope;\r\n    private _log: ng.ILogService;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _timeout: ng.ITimeoutService;\r\n    private _pipNavHeader: INavHeaderService;\r\n\r\npublic title: string;\r\npublic subtitle: string;\r\npublic imageUrl: string;\r\npublic imageCss: string;\r\npublic image: ng.IAugmentedJQuery;\r\npublic imageBlock: ng.IAugmentedJQuery;\r\npublic loadedDefaultImage: boolean;\r\npublic showHeader: boolean;\r\n\r\n    constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $scope: angular.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        $timeout: ng.ITimeoutService,\r\n        pipNavHeader: INavHeaderService,\r\n        navConstant: any\r\n\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._element = $element;\r\n        this._scope = $scope;\r\n        this._log = $log;\r\n        this._rootScope = $rootScope;\r\n        this._timeout = $timeout;\r\n        this._pipNavHeader = pipNavHeader;\r\n\r\n        // Apply class and call resize\r\n        this._element.addClass('pip-sticky-nav-header');\r\n\r\n\r\n        this.initImage();\r\n\r\n        let cleanupNavHeaderChanged: Function = this._rootScope.$on('pipNavHeaderChanged', ($event: ng.IAngularEvent, config: NavHeaderConfig) => {\r\n            this.onNavHeaderChanged($event, config)\r\n        });\r\n        let cleanupSideNavStateChanged: Function = this._rootScope.$on('pipSideNavStateChanged', ($event: ng.IAngularEvent, state: any) => { //navState\r\n            this.onStateChanged($event, state)\r\n        });\r\n\r\n        $scope.$on('$destroy', () => {\r\n            if (angular.isFunction(cleanupNavHeaderChanged)) {\r\n                cleanupNavHeaderChanged();\r\n            }\r\n            if (angular.isFunction(cleanupSideNavStateChanged)) {\r\n                cleanupSideNavStateChanged();\r\n            }            \r\n        });\r\n\r\n    }\r\n\r\n    private initImage() {\r\n        this.imageBlock = this._element.find('.pip-sticky-nav-header-user')\r\n\r\n        this._timeout(() => {\r\n            this.image = this._element.find('.pip-sticky-nav-header-user-image');\r\n\r\n            if (this.image[0]) {\r\n                this.image[0].onload =  (() => this.onImageLoad());\r\n                \r\n                // ($event: HTMLElement, erroev: Event): any =>  {\r\n                //     this.onImageLoad($event);\r\n                //     return null;\r\n                // }\r\n                this.image[0].onerror = (() => this.onImageError());\r\n                // ($event: ng.IAngularEvent) => {\r\n                //     this.onImageError($event);\r\n                // }\r\n            } else {\r\n                this.image.onload = (() => this.onImageLoad());\r\n                this.image.onerror = (() => this.onImageError());\r\n            }\r\n\r\n            this.onNavHeaderChanged(null, this._pipNavHeader.config);\r\n        }, 20);        \r\n    }\r\n\r\n       private initHeader() {\r\n            if (!this._pipNavHeader.config) return;\r\n\r\n            this.title = this._pipNavHeader.config.title;\r\n            this.subtitle = this._pipNavHeader.config.subtitle;\r\n            this.imageUrl = this._pipNavHeader.config.imageUrl;\r\n            this.imageCss = this._pipNavHeader.config.imageCss;\r\n        }\r\n\r\n        // // When image is loaded resize/reposition it\r\n        // private onImageLoad($event) {\r\n        //     let image: ng.IAugmentedJQuery = $($event.target);\r\n        //     this.setImageMarginCSS(image);\r\n        // };\r\n\r\n        // private onImageError($event) {\r\n        //     if (this.loadedDefaultImage) return;\r\n        //     this._scope.$apply(() => {\r\n        //         this.setImage(this._pipNavHeader.config, true);\r\n        //     });\r\n        // };\r\n        // When image is loaded resize/reposition it\r\n        private onImageLoad() {\r\n            this.setImageMarginCSS(this.image);\r\n        };\r\n\r\n        private onImageError() {\r\n            if (this.loadedDefaultImage) return;\r\n            this._scope.$apply(() => {\r\n                this.setImage(this._pipNavHeader.config, true);\r\n            });\r\n        };\r\n\r\n        private onStateChanged(event: ng.IAngularEvent, state: any) { // navState\r\n            if (state === undefined) return;\r\n\r\n            if (state.id == 'toggle') {\r\n                this._timeout(function () {\r\n                    this.showHeader = state && state.id == 'toggle';\r\n                }, 400);\r\n            } else {\r\n                this.showHeader = false;\r\n            }\r\n        }\r\n\r\n        private setImageMarginCSS(image: ng.IAugmentedJQuery) { //image[0]\r\n            var cssParams = {},\r\n                containerWidth = this.imageBlock.width ? this.imageBlock.width() : this.imageBlock.clientWidth,\r\n                containerHeight = this.imageBlock.height ? this.imageBlock.height() : this.imageBlock.clientHeight,\r\n                imageWidth = image[0]['naturalWidth'] || image.width,\r\n                imageHeight = image[0]['naturalHeight'] || image.height,\r\n                margin = 0;\r\n\r\n            if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n                margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n                cssParams['margin-left'] = '' + margin + 'px';\r\n                cssParams['height'] = '' + containerHeight + 'px';\r\n                cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px';\r\n                cssParams['margin-top'] = '';\r\n            } else {\r\n                margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n                cssParams['margin-top'] = '' + margin + 'px';\r\n                cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px';\r\n                cssParams['width'] = '' + containerWidth + 'px';\r\n                cssParams['margin-left'] = '';\r\n            }\r\n\r\n            image.css(cssParams);\r\n        };\r\n\r\n        private setImage(config, loadError: boolean) {\r\n            if (!config) return;\r\n\r\n            var url: string;\r\n\r\n            if (!loadError && !!config.imageUrl && !this.loadedDefaultImage) {\r\n                url = config.imageUrl;\r\n            } else {\r\n                this.loadedDefaultImage = true;\r\n                url = config.defaultImageUrl;\r\n            }\r\n\r\n            if (url && this.image) {\r\n                this.image.attr('src', url);\r\n            } else {\r\n                this.imageBlock.css('display', 'none');\r\n            }\r\n        }\r\n\r\n        private onNavHeaderChanged($event: ng.IAngularEvent, config: NavHeaderConfig) {\r\n            if (!config) return;\r\n            this.setImage(config, false)\r\n\r\n            this.title = config.title;\r\n            this.subtitle = config.subtitle;\r\n            this.imageUrl = config.imageUrl;\r\n            this.imageCss = config.imageCss;\r\n        }\r\n\r\n        public onUserClick() {\r\n            this._rootScope.$broadcast('pipNavUserClicked'); // todo\r\n        }\r\n\r\n    }\r\n\r\n(() => {\r\n    function navHeaderDirective() {\r\n        return {\r\n            restrict: 'EA',\r\n            replace: false,\r\n            templateUrl: 'header/NavHeader.html',\r\n            controller: NavHeaderDirectiveController,\r\n            controllerAs: 'vm'\r\n\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipNavHeader')\r\n        .directive('pipNavHeader', navHeaderDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let NavHeaderChangedEvent = 'pipNavHeaderChanged';\r\n\r\nexport class NavHeaderConfig {\r\n    // Image url\r\n    public imageUrl: string;\r\n    // Image url\r\n    public defaultImageUrl: string;\r\n    // Title\r\n    public title: string;\r\n    // Subtitle\r\n    public subtitle: string;\r\n    // image styles\r\n    public imageCss: string;\r\n    // Handle header click event\r\n    click: () => void;\r\n    // Event name\r\n    event: string\r\n};\r\n\r\nexport interface INavHeaderService {\r\n    readonly config: NavHeaderConfig;\r\n    imageUrl: string;\r\n    title: string;\r\n    subtitle: string;\r\n    event: string;\r\n\r\n    show(title: string, subtitle: string, imageUrl: string, callbackOrEvent?: any): void;\r\n    hide(): void;\r\n    click: () => void;\r\n}\r\n\r\nexport interface INavHeaderProvider extends ng.IServiceProvider {\r\n    config: NavHeaderConfig;\r\n    defaultImageUrl: string;\r\n    imageUrl: string;\r\n    title: string;\r\n    subtitle: string;\r\n    event: string;\r\n\r\n    set(title: string, subtitle: string, imageUrl: string, callbackOrEvent?: any): void;\r\n    clear(): void;\r\n    click: () => void;\r\n}\r\n\r\nclass NavHeaderService {\r\n    private _config: NavHeaderConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(config: NavHeaderConfig, $rootScope: ng.IRootScopeService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config(): NavHeaderConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get title(): string {\r\n        return this._config.title;\r\n    }\r\n\r\n    public set title(value: string) {\r\n        this._config.title = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get subtitle(): string {\r\n        return this._config.subtitle;\r\n    }\r\n\r\n    public set subtitle(value: string) {\r\n        this._config.subtitle = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get imageUrl(): string {\r\n        return this._config.imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        this._config.imageUrl = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get click(): () => void {\r\n        return this._config.click;\r\n    }\r\n\r\n    public set click(value: () => void) {\r\n        this._config.click = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get event(): string {\r\n        return this._config.event;\r\n    }\r\n\r\n    public set event(value: string) {\r\n        this._config.event = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public show(title: string, subtitle: string, imageUrl: string, callbackOrEvent?: any): void {\r\n        this._config.title = title;\r\n        this._config.subtitle = subtitle;\r\n        this._config.imageUrl = imageUrl;\r\n\r\n        if (_.isFunction(callbackOrEvent)) {\r\n            this._config.click = callbackOrEvent;\r\n        } else {\r\n            this._config.click = null;\r\n        }\r\n        if (_.isString(callbackOrEvent)) {\r\n            this._config.event = callbackOrEvent;\r\n        } else {\r\n            this._config.event = null;\r\n        }\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public hide(): void {\r\n        this._config.title = null;\r\n        this._config.subtitle = null;\r\n        this._config.imageUrl = null;\r\n        this._config.click = null;\r\n        this._config.event = null;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n        this._rootScope.$emit(NavHeaderChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass NavHeaderProvider implements INavHeaderProvider {\r\n    private _config: NavHeaderConfig = new NavHeaderConfig();\r\n    private _service: NavHeaderService;\r\n\r\n    public get config(): NavHeaderConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: NavHeaderConfig) {\r\n        this._config = value || new NavHeaderConfig();\r\n    }\r\n\r\n    public get defaultImageUrl(): string {\r\n        return this._config.defaultImageUrl;\r\n    }\r\n\r\n    public set defaultImageUrl(value: string) {\r\n        this._config.defaultImageUrl = value;\r\n    }\r\n\r\n    public get title(): string {\r\n        return this._config.title;\r\n    }\r\n\r\n    public set title(value: string) {\r\n        this._config.title = value;\r\n    }\r\n\r\n    public get subtitle(): string {\r\n        return this._config.subtitle;\r\n    }\r\n\r\n    public set subtitle(value: string) {\r\n        this._config.subtitle = value;\r\n    }\r\n\r\n    public get imageUrl(): string {\r\n        return this._config.imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        this._config.imageUrl = value;\r\n    }\r\n\r\n    public get click(): () => void {\r\n        return this._config.click;\r\n    }\r\n\r\n    public set click(value: () => void) {\r\n        this._config.click = value;\r\n    }\r\n\r\n    public get event(): string {\r\n        return this._config.event;\r\n    }\r\n\r\n    public set event(value: string) {\r\n        this._config.event = value;\r\n    }\r\n\r\n    public set(title: string, subtitle: string, imageUrl: string, callbackOrEvent?: any): void {\r\n        this._config.title = title;\r\n        this._config.subtitle = subtitle;\r\n        this._config.imageUrl = imageUrl;\r\n\r\n        if (_.isFunction(callbackOrEvent)) {\r\n            this._config.click = callbackOrEvent;\r\n        } else {\r\n            this._config.click = null;\r\n        }\r\n        if (_.isString(callbackOrEvent)) {\r\n            this._config.event = callbackOrEvent;\r\n        } else {\r\n            this._config.event = null;\r\n        }\r\n    }\r\n\r\n    public clear(): void {\r\n        this._config.title = null;\r\n        this._config.subtitle = null;\r\n        this._config.imageUrl = null;\r\n        this._config.click = null;\r\n        this._config.event = null;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new NavHeaderService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    }\r\n\r\n}\r\n\r\n\r\nangular\r\n    .module('pipNavHeader')\r\n    .provider('pipNavHeader', NavHeaderProvider);\r\n","'use strict';\r\n\r\nangular.module('pipNavHeader', ['ngMaterial', 'pipNav.Templates']);\r\n\r\nimport './NavHeaderService';\r\nimport './NavHeaderDirective';\r\n\r\nexport * from './NavHeaderService';","'use strict';\r\nimport { OpenSideNavEvent } from \"../sidenav/SideNavService\";\r\nimport {  INavIconService, NavIconConfig } from \"./NavIconService\";\r\n// Prevent junk from going into typescript definitions\r\nexport let NavIconClickedEvent = 'pipNavIconClicked';\r\n\r\nclass NavIconDirectiveController {\r\n    private _element: ng.IAugmentedJQuery;\r\n    private _scope: angular.IScope;\r\n    private _log: ng.ILogService;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _window: ng.IWindowService;\r\n\r\n    public config: NavIconConfig;\r\n\r\n    constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $scope: angular.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        $window: ng.IWindowService,\r\n        pipNavIcon: INavIconService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._element = $element;\r\n        this._scope = $scope;\r\n        this._log = $log;\r\n        this._rootScope = $rootScope;\r\n        this._window = $window;\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-nav-icon');\r\n\r\n        this.config = pipNavIcon.config;\r\n\r\n        $rootScope.$on('pipNavIconChanged', (event: ng.IAngularEvent, config: NavIconConfig) => {\r\n            this.onNavIconChanged(event, config)\r\n        });\r\n\r\n    }\r\n\r\n    public onNavIconChanged(event: ng.IAngularEvent, config: NavIconConfig): void {\r\n        this.config = config;\r\n    }\r\n\r\n    public onNavIconClick(): void {\r\n        if (_.isFunction(this.config.click)) {\r\n            // Execute nav icon callback\r\n            this.config.click();\r\n        } else if (this.config.event) {\r\n            this._rootScope.$broadcast(this.config.event);\r\n        } else if (this.config.type == 'menu') {\r\n            this._rootScope.$broadcast(OpenSideNavEvent);\r\n        } else if (this.config.type == 'back') {\r\n            this._window.history.back();\r\n        } else {\r\n            this._rootScope.$broadcast(NavIconClickedEvent);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n(() => {\r\n    function navIconDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                type: '=pipType',\r\n                imageUrl: '=pipImageUrl',\r\n                icon: '=pipIcon'\r\n            },\r\n            replace: false,\r\n            templateUrl: 'icon/NavIcon.html',\r\n            controller: NavIconDirectiveController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipNavIcon')\r\n        .directive('pipNavIcon', navIconDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let NavIconChangedEvent = 'pipNavIconChanged';\r\n\r\nexport class NavIconConfig {\r\n    // Type of nav icon: 'back', 'menu', 'image' or 'none'\r\n    public type: string;\r\n    // Image url\r\n    public imageUrl: string;\r\n    // Icon name\r\n    public icon: string;\r\n    // Handle nav icon click event\r\n    click: () => void;\r\n    // Event name\r\n    event: string\r\n};\r\n\r\nexport interface INavIconService {\r\n    readonly config: NavIconConfig;\r\n\r\n    showMenu(callbackOrEvent?: any): void;\r\n    showIcon(icon: string, callbackOrEvent?: any): void;\r\n    showBack(callbackOrEvent?: any): void;\r\n    showImage(imageUrl: string, callbackOrEvent?: any): void;\r\n    hide(): void;\r\n}\r\n\r\nexport interface INavIconProvider extends ng.IServiceProvider {\r\n    config: NavIconConfig;\r\n\r\n    setMenu(callbackOrEvent?: any): void;\r\n    setIcon(icon: string, callbackOrEvent?: any): void;\r\n    setBack(callbackOrEvent?: any): void;\r\n    setImage(imageUrl: string, callbackOrEvent?: any): void;\r\n    clear(): void;\r\n}\r\n\r\nclass NavIconService implements INavIconService {\r\n    private _config: NavIconConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(config: NavIconConfig, $rootScope: ng.IRootScopeService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config(): NavIconConfig {\r\n        return this._config;\r\n    }\r\n\r\n    private setCallbackOrEvent(callbackOrEvent?: any): void {\r\n        if (_.isFunction(callbackOrEvent)) {\r\n            this._config.click = callbackOrEvent;\r\n            this._config.event = null;\r\n        } else if (_.isString(callbackOrEvent)) {\r\n            this._config.click = null;\r\n            this._config.event = callbackOrEvent;\r\n        } else {\r\n            this._config.click = null;\r\n            this._config.event = null;\r\n        }\r\n    }\r\n\r\n    public showMenu(callbackOrEvent?: any): void {\r\n        this._config.type = 'menu';\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showIcon(icon: string, callbackOrEvent?: any): void {\r\n        this._config.type = 'icon';\r\n        this._config.icon = icon;\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showBack(callbackOrEvent?: any): void {\r\n        this._config.type = 'back';\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showImage(imageUrl: string, callbackOrEvent?: any): void {\r\n        this._config.type = 'image';\r\n        this._config.imageUrl = imageUrl;\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public hide(): void {\r\n        this._config.type = 'none';\r\n        this.setCallbackOrEvent(null);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n        this._rootScope.$broadcast(NavIconChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass NavIconProvider implements INavIconProvider {\r\n    private _config: NavIconConfig = new NavIconConfig();\r\n    private _service: NavIconService;\r\n\r\n    public get config(): NavIconConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: NavIconConfig) {\r\n        this._config = value || new NavIconConfig();\r\n    }\r\n\r\n    private setCallbackOrEvent(callbackOrEvent?: any): void {\r\n        if (_.isFunction(callbackOrEvent))\r\n            this._config.click = callbackOrEvent;\r\n        else this._config.click = null;\r\n\r\n        if (_.isString(callbackOrEvent))\r\n            this._config.event = callbackOrEvent;\r\n        else this._config.event = null;\r\n    }\r\n\r\n    public setMenu(callbackOrEvent?: any): void {\r\n        this._config.type = 'menu';\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n    }\r\n\r\n    public setIcon(icon: string, callbackOrEvent?: any): void {\r\n        this._config.type = 'icon';\r\n        this._config.icon = icon;\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n    }\r\n\r\n    public setBack(callbackOrEvent?: any): void {\r\n        this._config.type = 'back';\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n    }\r\n\r\n    public setImage(imageUrl: string, callbackOrEvent?: any): void {\r\n        this._config.type = 'image';\r\n        this._config.imageUrl = imageUrl;\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n    }\r\n\r\n    public clear(): void {\r\n        this._config.type = 'none';\r\n        this.setCallbackOrEvent(null);\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new NavIconService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    }\r\n     \r\n}\r\n\r\n\r\nangular\r\n    .module('pipNavIcon')\r\n    .provider('pipNavIcon', NavIconProvider);\r\n","'use strict';\r\n\r\nangular.module('pipNavIcon', ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates']);\r\n\r\nimport './NavIconService';\r\nimport './NavIconDirective';\r\n\r\nexport * from './NavIconService';\r\n","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n\r\n\r\nclass LanguagePickerDirectiveController {\r\n    private _element: ng.IAugmentedJQuery;\r\n    private _attrs: ng.IAttributes;\r\n    private _injector: ng.auto.IInjectorService;\r\n    private _scope: ng.IScope;\r\n    private _log: ng.ILogService;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _translate: pip.services.ITranslateService;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public languages: string[] = ['en', 'ru'];\r\n    public selectedLanguage: string;\r\n\r\n    public constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $attrs: ng.IAttributes,\r\n        $injector: ng.auto.IInjectorService,\r\n        $scope: ng.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        $timeout: ng.ITimeoutService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._element = $element;\r\n        this._attrs = $attrs;\r\n        this._scope = $scope;\r\n        this._injector = $injector;\r\n        this._log = $log;\r\n        this._rootScope = $rootScope;\r\n        this._timeout = $timeout;\r\n        this._translate = $injector.has('pipTranslate') ? <pip.services.ITranslateService>$injector.get('pipTranslate') : null;\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-language-picker');\r\n\r\n        this.setLanguages($scope['languages']);\r\n\r\n        this.selectedLanguage = $scope['value'] || this.languages[0]; \r\n    }\r\n\r\n    public get language() {\r\n        return this._translate ? this._translate.language : null;\r\n    }\r\n\r\n    public setLanguages(languages: string[]): void {\r\n        this.languages = languages.length > 0 ? languages : ['en', 'ru'];\r\n    }\r\n\r\n    public onLanguageClick(language: string) {\r\n        if (this._translate != null) {\r\n            this.selectedLanguage = language;\r\n            // this._timeout(() => {\r\n                this._translate.language = this.selectedLanguage;\r\n            // }, 0);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n(() => {\r\n    function languagePickerDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                languages: '=languages',\r\n                value: '=value'\r\n            },\r\n            replace: false,\r\n            templateUrl: function (element, attr) {\r\n                return 'language/LanguagePicker.html';\r\n            },\r\n            controller: LanguagePickerDirectiveController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipLanguagePicker', [\r\n            'ngMaterial', 'pipNav.Translate', 'pipNav.Templates'\r\n        ])\r\n        .directive('pipLanguagePicker', languagePickerDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function NavMenuDirectiveController($scope, $element, $rootScope, $window, $location, $timeout, $injector, pipSideNav, pipNavMenu) {\r\n        \"ngInject\";\r\n\r\n        var animationDuration = 450,\r\n            pipSideNavElement = $element.parent().parent();\r\n        // Apply class and call resize\r\n        $element.addClass('pip-sticky-nav-menu');\r\n\r\n        $scope.sections = $scope.sections || pipNavMenu.sections;\r\n        // $scope.showTooltip = true;\r\n        // pipNavMenu.sections = $scope.sections;\r\n        setCollapsible();\r\n        // todo set from services\r\n        $scope.defaultIcon = pipNavMenu.defaultIcon;\r\n\r\n        onStateChanged(null, pipSideNav.state);\r\n\r\n        $rootScope.$on('pipNavMenuChanged', onConfigChanged);\r\n        $rootScope.$on('pipSideNavStateChanged', onStateChanged);\r\n\r\n        $scope.itemVisible = isHidden;\r\n        $scope.clickLink = clickLink;\r\n        $scope.isSectionEmpty = isSectionEmpty;\r\n        $scope.onExpand = onExpand;\r\n        $scope.isActive = isActive;\r\n\r\n        return;\r\n\r\n        function setCollapsible() {\r\n            var collapsed;\r\n            if (angular.isFunction($scope.collapsed)) {\r\n                collapsed = $scope.collapsed();\r\n            } else {\r\n                collapsed = $scope.collapsed !== false && $scope.collapsed !== 'false';\r\n            }\r\n\r\n            $scope.isCollapsed = collapsed;\r\n        }\r\n\r\n        function onExpand() {\r\n            if (!$scope.isCollapsed) { return }\r\n\r\n            $scope.expanded = !$scope.expanded;\r\n\r\n            if ($scope.expanded) {\r\n                pipSideNavElement.removeClass('pip-sticky-nav-small');\r\n            } else {\r\n                pipSideNavElement.addClass('pip-sticky-nav-small');\r\n            }\r\n            $rootScope.$emit('pipNavExpanded', $scope.expanded);\r\n        }\r\n\r\n        function isHidden(item) {\r\n            return item && item.access && !item.access(item);\r\n        }\r\n\r\n        function isSectionEmpty(linkCollection) {\r\n            var result = true;\r\n            _.each(linkCollection, function (link) {\r\n                if (!isHidden(link))\r\n                    result = false;\r\n            });\r\n            return result;\r\n        }\r\n\r\n        function onConfigChanged(event, config) {\r\n            if (!config) return;\r\n\r\n            $scope.sections = config.sections;\r\n        }\r\n\r\n        function onStateChanged(event, state) {\r\n            // SS> You shall not set it into the menu state. Instead it shall be controlled by the state of Sidenav\r\n            //pipNavMenu.collapsed(state.expand);\r\n            if (!state) return;\r\n\r\n            $scope.isCollapsed = state.expand;\r\n            $scope.expanded = state.isExpanded;\r\n            $scope.expandedButton = state.expandedButton;\r\n\r\n            $scope.sideNavState = state;\r\n        }\r\n\r\n        function isActive(link) {\r\n            if (link.parentState) {\r\n                var $state = $injector.has('$state') ? $injector.get('$state') : null;\r\n                if ($state != null && $state.includes(link.parentState)) {\r\n                    return true;\r\n                }\r\n            } else if (link.state) {\r\n                var $state = $injector.has('$state') ? $injector.get('$state') : null;\r\n                if ($state != null && $state.includes(link.state)) {\r\n                    return true;\r\n                }\r\n            } else if (link.href) {\r\n                if (link.href.split('?')[0] === $window.location.href.split('?')[0]) {\r\n                    return true;\r\n                }\r\n            } else if (link.url) {\r\n                if (link.url.split(/[\\s/?]+/)[1] === $location.url().split(/[\\s/?]+/)[1]) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n\r\n            return false;\r\n        }\r\n\r\n        function clickLink(event, link) {\r\n            event.stopPropagation();\r\n\r\n            if (!link) {\r\n                pipSideNav.close();\r\n                return;\r\n            }\r\n\r\n            if (link.href) {\r\n                if (link.href.split('?')[0] === $window.location.href.split('?')[0]) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                pipSideNav.close();\r\n                $timeout(function () {\r\n                    $window.location.href = link.href;\r\n                }, animationDuration);\r\n\r\n                return;\r\n            }\r\n            else if (link.url) {\r\n                if (link.url.split(/[\\s/?]+/)[1] === $location.url().split(/[\\s/?]+/)[1]) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                pipSideNav.close();\r\n                $timeout(function () {\r\n                    $location.url(link.url);\r\n                }, animationDuration);\r\n\r\n                return;\r\n            }\r\n            else if (link.state) {\r\n                var $state = $injector.has('$state') ? $injector.get('$state') : null;\r\n\r\n                if ($state != null && $state.current.name === link.state) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                pipSideNav.close();\r\n                $timeout(function () {\r\n                    if ($injector.has('$state')) {\r\n                        var $state = $injector.get('$state');\r\n                        $state.go(link.state, link.stateParams);\r\n                    }\r\n                }, animationDuration);\r\n\r\n                return;\r\n            }\r\n            else if (link.event)\r\n                $rootScope.$broadcast(link.event, link);\r\n\r\n            pipSideNav.close();\r\n        }\r\n    }\r\n\r\n    function navMenuDirective() {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                // sections: '?=pipSections',\r\n                // collapsed: '=pipCollapsed'\r\n            },\r\n            replace: false,\r\n            templateUrl: 'menu/NavMenu.html',\r\n            controller: NavMenuDirectiveController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipNavMenu')\r\n        .directive('pipNavMenu', navMenuDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let NavMenuChangedEvent = 'pipNavMenuChanged';\r\n\r\nexport class NavMenuLink {\r\n    // Name to refer to the item\r\n    public name: string;\r\n    // Link visible title\r\n    public title: string;\r\n    // Tooltip text\r\n    public tooltipText?: string;    \r\n    // Icon name from $iconProvider\r\n    public icon?: string;\r\n    // Counter badge\r\n    public count?: number;\r\n    // class for badge style\r\n    public badgeStyle?: string;\r\n    // Access function\r\n    public access?: (link: NavMenuLink) => boolean;\r\n    // window.location.href\r\n    public href?: string;\r\n    // $location.url\r\n    public url?: string;\r\n    // $state.go(state, stateParams)\r\n    public state?: string;\r\n    // Parameters for $state.go(state, stateParams)\r\n    public stateParams?: any;\r\n    // parent state or parent state for selection item \r\n    public parentState?: string;\r\n    // $rootScope.broadcast(event)\r\n    public event?: string;\r\n    // Click callback\r\n    public click?: (link: NavMenuLink) => void;\r\n}\r\n\r\nexport class NavMenuSection {\r\n    // Name to refer to the section\r\n    public name: string;\r\n    // Section visible title\r\n    public title?: string;\r\n    // Tooltip text\r\n    public tooltipText?: string;      \r\n    // Icon name from $iconProvider\r\n    public icon?: string;\r\n    // Links shown in the section\r\n    public links: NavMenuLink[];\r\n    // Access function\r\n    public access?: (section: NavMenuSection) => boolean;\r\n}\r\n\r\nexport class NavMenuConfig {\r\n    sections: NavMenuSection[];\r\n    defaultIcon: string;\r\n}\r\n\r\nexport interface INavMenuService {\r\n    sections: NavMenuSection[];\r\n    defaultIcon: string;\r\n    updateCount(link: string, count: number): void; \r\n    updateBadgeStyle(link: string, style: string): void;\r\n    clearCounts(): void;\r\n}\r\n\r\nexport interface INavMenuProvider extends ng.IServiceProvider {\r\n    sections: NavMenuSection[];\r\n    defaultIcon: string;\r\n}\r\n\r\nclass NavMenuService implements INavMenuService {\r\n    private _config: NavMenuConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        config: NavMenuConfig,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get sections(): NavMenuSection[] {\r\n        return this._config.sections;\r\n    }\r\n\r\n    public set sections(value: NavMenuSection[]) {\r\n        this._config.sections = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get defaultIcon(): string {\r\n        return this._config.defaultIcon;\r\n    }\r\n\r\n    public updateBadgeStyle(link: string, style: string): void {\r\n        if (link == null || !_.isString(style)) return;\r\n\r\n        _.each(this._config.sections, (s) => {\r\n            _.each(s.links, (l) => {\r\n                if (l.name == link)\r\n                    l.badgeStyle = style;\r\n            });\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public set defaultIcon(value: string) {\r\n        this._config.defaultIcon = value;\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public updateCount(link: string, count: number): void {\r\n        if (link == null || !_.isNumber(count)) return;\r\n\r\n        _.each(this._config.sections, (s) => {\r\n            _.each(s.links, (l) => {\r\n                if (l.name == link)\r\n                    l.count = count;\r\n            });\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public clearCounts(): void {\r\n        _.each(this._config.sections, (s) => {\r\n            _.each(s.links, (l) => {\r\n                l.count = null;\r\n            });\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    private sendChangeEvent() {\r\n        this._rootScope.$emit(NavMenuChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass NavMenuProvider implements INavMenuProvider {\r\n    private _config: NavMenuConfig = {\r\n        sections: [],\r\n        defaultIcon: 'icons:folder'\r\n    };\r\n    private _service: NavMenuService;\r\n\r\n    public get sections(): NavMenuSection[] {\r\n        return this._config.sections;\r\n    }\r\n\r\n    public set sections(value: NavMenuSection[]) {\r\n        this._config.sections = value || [];\r\n    }\r\n\r\n    public get defaultIcon(): string {\r\n        return this._config.defaultIcon;\r\n    }\r\n\r\n    public set defaultIcon(value: string) {\r\n        this._config.defaultIcon = value;\r\n    }\r\n\r\n    public $get($rootScope) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new NavMenuService(this._config, $rootScope);\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipNavMenu')\r\n    .provider('pipNavMenu', NavMenuProvider);\r\n","'use strict';\r\n\r\nangular.module('pipNavMenu', ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates']);\r\n\r\nimport './NavMenuService';\r\nimport './NavMenuDirective';\r\n\r\nexport * from './NavMenuService';","'use strict';\r\n\r\nimport { SearchConfig } from './SearchService';\r\nimport { ISearchService } from './SearchService';\r\nimport { SearchChangedEvent } from './SearchService';\r\nimport { SearchActivatedEvent } from './SearchService';\r\n\r\n// Prevent junk from going into typescript definitions\r\n\r\n\r\nclass SearchBarController {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _element: any;\r\n\r\n    public config: SearchConfig;\r\n    public enabled: boolean = false;\r\n    public search: any = { text: '' };\r\n\r\n    public constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $rootScope: ng.IRootScopeService,\r\n        pipSearch: ISearchService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._rootScope = $rootScope;\r\n        this._element = $element;\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-search-bar');\r\n\r\n        this.config = pipSearch.config;\r\n        this.stateChange();\r\n        $rootScope.$on(SearchChangedEvent, (event: ng.IAngularEvent, config: SearchConfig) => {\r\n            this.onSearchChanged(event, config);\r\n        });\r\n    }\r\n\r\n    private stateChange(): void {\r\n        if (this.enabled) {\r\n            this._element.addClass('w-stretch');\r\n            this._element.parent().addClass('pip-search-active');\r\n\r\n        } else {\r\n            this._element.removeClass('w-stretch');\r\n            this._element.parent().removeClass('pip-search-active');\r\n        }\r\n    }\r\n\r\n    private onSearchChanged(event: ng.IAngularEvent, config: SearchConfig): void {\r\n        this.config = config;\r\n        this.enabled = false;\r\n        this.search.text = '';\r\n        this.stateChange();\r\n    }\r\n\r\n    private focusText(): void {\r\n        setTimeout(() => {\r\n            let element: JQuery = $('.pip-search-text');\r\n            if (element.length > 0)\r\n                element.focus();\r\n        }, 0);\r\n    }\r\n\r\n    public enable(): void {\r\n        this.search.text = this.config.criteria;\r\n        this.enabled = true;\r\n        this.focusText();\r\n        this.stateChange();\r\n    }\r\n\r\n    public onClick(): void {\r\n        let search = this.search.text;\r\n\r\n        this.search.text = '';\r\n        this.enabled = false;\r\n        this.stateChange();\r\n\r\n        if (this.config.callback) {\r\n            this.config.callback(search);\r\n        } else {\r\n            this._rootScope.$broadcast(SearchActivatedEvent, search);\r\n        }\r\n    }\r\n\r\n    public clear(): void {\r\n        if (this.search.text) {\r\n            this.search.text = '';\r\n            this.focusText();\r\n        } else {\r\n            this.enabled = false;\r\n            this.stateChange();\r\n            this.onClick();\r\n        }\r\n    }\r\n\r\n    public onKeyDown(event: KeyboardEvent): void {\r\n        // Enter pressed\r\n        if (event.keyCode === 13)\r\n            this.onClick();\r\n        // ESC pressed\r\n        else if (event.keyCode === 27) {\r\n            this.enabled = false;\r\n            this.stateChange();\r\n        }\r\n    }\r\n}\r\n\r\n(() => {\r\n    function searchBarDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {},\r\n            replace: false,\r\n            templateUrl: 'search/SearchBar.html',\r\n            controller: SearchBarController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n    angular.module('pipSearchBar')\r\n        .directive('pipSearchBar', searchBarDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let OpenSearchEvent = 'pipOpenSearch';\r\nexport let CloseSearchEvent = 'pipCloseSearch';\r\nexport let SearchChangedEvent = 'pipSearchChanged';\r\nexport let SearchActivatedEvent = 'pipSearchActivated';\r\n\r\nexport class SearchConfig {\r\n    // Search visible\r\n    public visible: boolean;\r\n    // Search criteria\r\n    public criteria: string;\r\n    // Custom search parameters\r\n    public params: any;\r\n    // History for search autocomplete\r\n    public history: string[];\r\n    // Callback for search\r\n    callback: (criteria: string) => void;\r\n}\r\n\r\nexport interface ISearchService {\r\n    config: SearchConfig;\r\n    criteria: string;\r\n    params: any;\r\n    history: string[];\r\n    callback: (criteria: string) => void;\r\n\r\n    set(callback: (criteria: string) => void, criteria?: string, params?: any, history?: string[]): void;\r\n    clear(): void;\r\n    open(): void;\r\n    close(): void;\r\n    toggle(): void;\r\n}\r\n\r\nexport interface ISearchProvider extends ng.IServiceProvider {    \r\n}\r\n\r\n\r\nclass SearchService implements ISearchService {\r\n    private _config: SearchConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        config: SearchConfig,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n\r\n        $rootScope.$on(OpenSearchEvent, () => { this.open });\r\n        $rootScope.$on(CloseSearchEvent, () => { this.close });\r\n    }\r\n\r\n    public get config(): SearchConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get criteria(): string {\r\n        return this._config.criteria;\r\n    }\r\n\r\n    public set criteria(value: string) {\r\n        this._config.criteria = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get params(): any {\r\n        return this._config.params;\r\n    }\r\n\r\n    public set params(value: any) {\r\n        this._config.params = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get history(): string[] {\r\n        return this._config.history;\r\n    }\r\n\r\n    public set history(value: string[]) {\r\n        this._config.history = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get callback(): (criteria: string) => void {\r\n        return this._config.callback;\r\n    }\r\n\r\n    public set callback(value: (criteria: string) => void) {\r\n        this._config.callback = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public set(callback: (criteria: string) => void, criteria?: string, params?: any, history?: string[]): void {\r\n        this._config.callback = callback;\r\n        this._config.criteria = criteria;\r\n        this._config.params = params;\r\n        this._config.history = history;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public clear(): void {\r\n        this._config.callback = null;\r\n        this._config.criteria = null;\r\n        this._config.params = null;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public open(): void {\r\n        this._config.visible = true;\r\n        this.sendConfigEvent();                \r\n    }\r\n            \r\n    public close(): void {\r\n        this._config.visible = false;        \r\n        this.sendConfigEvent();                \r\n    }                \r\n\r\n    public toggle(): void {\r\n        this._config.visible = !this._config.visible;\r\n        this.sendConfigEvent();                \r\n    }                   \r\n\r\n    private sendConfigEvent(): void {\r\n        this._rootScope.$broadcast(SearchChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass SearchProvider implements ISearchProvider {\r\n    private _config: SearchConfig = new SearchConfig();\r\n    private _service: SearchService = null;\r\n\r\n    public $get($rootScope: ng.IRootScopeService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SearchService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    } \r\n}\r\n\r\n\r\nangular.module('pipSearchBar')\r\n    .provider('pipSearch', SearchProvider);\r\n","'use strict';\r\n\r\nangular.module('pipSearchBar', ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates']);\r\n\r\nimport './SearchService';\r\nimport './SearchBarDirective';\r\n\r\nexport * from './SearchService';","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function SideNavDirectiveController($scope, $element, $rootScope, $injector, $mdMedia, $timeout, pipSideNav) {\r\n        \"ngInject\";\r\n\r\n        // var pipMedia = $mdMedia, \r\n        var pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null,\r\n            pipSystemInfo = $injector.has('pipSystemInfo') ? $injector.get('pipSystemInfo') : null,\r\n            mainContainer = '.pip-main',\r\n            bigWidth = 320, // expanded sidenav width\r\n            middleWidth = 240,\r\n            smallWidth = 72, // shrink sidenav width\r\n            isResizing = false,\r\n            animationDuration = 600,\r\n            mediaBreakpoints;\r\n\r\n        pipMedia = pipMedia !== undefined ? pipMedia : $mdMedia;\r\n\r\n        $scope.navState = { // todo create type\r\n            toggle: { // media(sm, xs)\r\n                id: 'toggle',\r\n                addClass: 'sidenav-mobile', // change size, color, selected?\r\n                showHeader: true,\r\n                isLockedOpen: false,\r\n                expandedButton: false,\r\n                isExpanded: true,\r\n                expand: true,\r\n                showIconTooltype: false\r\n            },\r\n            small: { // media(md)\r\n                id: 'small',\r\n                addClass: 'pip-sticky-nav-small sidenav-smalldesktop', // change size, color, selected?\r\n                showHeader: false,\r\n                isLockedOpen: true,\r\n                expandedButton: false,\r\n                isExpanded: false,\r\n                expand: false,\r\n                showIconTooltype: true\r\n            },\r\n            large: { // media(lg)\r\n                id: 'large',\r\n                addClass: 'sidenav-smalldesktop', // change size, color, selected?\r\n                showHeader: false,\r\n                isLockedOpen: true,\r\n                expandedButton: true,\r\n                isExpanded: true,\r\n                expand: true,\r\n                showIconTooltype: true\r\n            },\r\n            xlarge: { // media(xl)\r\n                id: 'xlarge',\r\n                addClass: 'sidenav-desktop', // change size, color, selected?\r\n                showHeader: false,\r\n                isLockedOpen: true,\r\n                expandedButton: false,\r\n                isExpanded: true,\r\n                expand: true,\r\n                showIconTooltype: false\r\n            }\r\n        };\r\n\r\n        mediaBreakpoints = setBreakpoints();\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-sticky-sidenav');\r\n\r\n        // check Safari\r\n        checkSafari();\r\n\r\n        if (pipSideNav.config && pipSideNav.config.type != 'popup') {\r\n            $timeout(function () {\r\n                setSideNaveState()\r\n            }, 100);\r\n\r\n            var windowResize = _.debounce(setSideNaveState, 10);\r\n            $rootScope.$on('pipMainResized', windowResize);\r\n            $rootScope.$on('pipSideNavState', onSideNavState);\r\n        } else {\r\n            isResizing = false;\r\n            $scope.sidenavState = null;\r\n            $timeout(function () {\r\n                setState('toggle');\r\n            }, 100);\r\n\r\n        }\r\n\r\n        $rootScope.$on('pipNavIconClicked', onNavIconClick);\r\n        $rootScope.$on('pipSideNavChanged', onSideNavChanged);\r\n\r\n        return;\r\n\r\n        function checkSafari() {\r\n            if (!pipSystemInfo || pipSystemInfo.browserName != 'safari') {\r\n                // $element.addClass('sidenav-animate');\r\n            }\r\n        }\r\n\r\n        //------------------------\r\n        function setBreakpoints() {\r\n            if (!pipMedia || !angular.isObject(pipMedia.breakpoints)) {\r\n                return { xs: 639, sm: 959, md: 1024, lg: 1919 };\r\n            } else {\r\n                return pipMedia.breakpoints;\r\n            }\r\n        }\r\n\r\n        function onSideNavChanged(event, config) {\r\n            var config = config || {};\r\n\r\n            if (config.visible) {\r\n                $element.css('display', 'block');\r\n            } else {\r\n                $element.css('display', 'none');\r\n            }\r\n        }\r\n\r\n        function onNavIconClick(event) {\r\n            pipSideNav.open();\r\n        }\r\n\r\n        function onSideNavState(event, state) {\r\n            if (angular.isString(state) && $scope.navState[state] !== undefined) {\r\n                setState(state);\r\n            }\r\n        }\r\n\r\n        function setSideNaveState() {\r\n            if (pipSideNav.config && pipSideNav.config.type == 'popup') { return }\r\n\r\n            if (isResizing) {\r\n                $timeout(setSideNaveState, animationDuration); // for \r\n\r\n                return;\r\n            }\r\n\r\n            let mainWidth = $(mainContainer).innerWidth();\r\n            let sideNavWidth = $('.pip-sticky-sidenav').innerWidth();\r\n            let currentWidth = sideNavWidth ? sideNavWidth + 2 : 0; // add border width\r\n\r\n            if (mainWidth + currentWidth < mediaBreakpoints.sm ) {\r\n                setState('toggle', );\r\n                return;\r\n            }            \r\n            if (mainWidth + currentWidth < mediaBreakpoints.md ) {\r\n                setState('small');\r\n                return;\r\n            }   \r\n            if (mainWidth + currentWidth < mediaBreakpoints.lg ) {\r\n                setState('large');\r\n                return;\r\n            }        \r\n            setState('xlarge');     \r\n        }\r\n\r\n        function setState(state: string) {\r\n            if (isResizing) return;\r\n            if ($scope.sidenavState && $scope.sidenavState.id == state) return;\r\n\r\n            if (state != 'toggle') {\r\n                $element.removeClass('sidenav-mobile');\r\n            }\r\n\r\n            if (state != 'small') {\r\n                $element.removeClass('pip-sticky-nav-small');\r\n            }\r\n\r\n            if (state != 'xlarge') {\r\n                $element.removeClass('sidenav-desktop');\r\n            }\r\n\r\n            if (state != 'large') {\r\n                $element.removeClass('sidenav-smalldesktop');\r\n            }\r\n\r\n            isResizing = true;\r\n            if (state == 'toggle') {\r\n                pipSideNav.close();\r\n            }\r\n            $scope.sidenavState = $scope.navState[state];\r\n            $element.addClass($scope.sidenavState.addClass);\r\n\r\n            pipSideNav.state = $scope.sidenavState;\r\n            // check sideNav State\r\n            $timeout(function () {\r\n                setSideNaveState()\r\n            }, 15);\r\n\r\n            // complete animation\r\n            $timeout(function () {\r\n                isResizing = false;\r\n            }, animationDuration); //animationDuration\r\n\r\n        }\r\n    }\r\n\r\n    function sideNavDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            transclude: true,\r\n            scope: true,\r\n            templateUrl: 'sidenav/SideNav.html',\r\n            controller: SideNavDirectiveController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipSideNav')\r\n        .directive('pipSidenav', sideNavDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function SideNavPartDirectiveController($scope, $element, $attrs, $rootScope, pipSideNav) {\r\n        \"ngInject\";\r\n\r\n        var partName = '' + $attrs.pipSidenavPart;\r\n        var partValue = null;\r\n\r\n        // Break part apart\r\n        var pos = partName.indexOf(':');\r\n        if (pos > 0) {\r\n            partValue = partName.substr(pos + 1);\r\n            partName = partName.substr(0, pos);\r\n        }\r\n\r\n        onSideNavChanged(null, pipSideNav.config)\r\n        $rootScope.$on('pipSideNavChanged', onSideNavChanged);\r\n\r\n        function onSideNavChanged(event, config) {\r\n            var parts = config.parts || {};\r\n            var currentPartValue = parts[partName];\r\n            var visible = !!(partValue ? currentPartValue == partValue : currentPartValue);\r\n\r\n            if (visible != $scope.visible)\r\n                $scope.visible = visible;\r\n        }\r\n\r\n    }\r\n\r\n    function sidenavPartDirective(ngIfDirective) {\r\n        \"ngInject\";\r\n\r\n        var ngIf = ngIfDirective[0];\r\n\r\n        return {\r\n            transclude: ngIf.transclude,\r\n            priority: ngIf.priority,\r\n            terminal: ngIf.terminal,\r\n            restrict: ngIf.restrict,\r\n            scope: true,\r\n            link: function linkFunction($scope: any, $element, $attrs) {\r\n                $attrs.ngIf = function () { return $scope.visible };\r\n                ngIf.link.apply(ngIf, arguments);\r\n            },\r\n            controller: SideNavPartDirectiveController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipSideNav')\r\n        .directive('pipSidenavPart', sidenavPartDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let SideNavChangedEvent = 'pipSideNavChanged';\r\nexport let SideNavStateChangedEvent = 'pipSideNavStateChanged';\r\nexport let OpenSideNavEvent = 'pipOpenSideNav';\r\nexport let CloseSideNavEvent = 'pipCloseSideNav';\r\n\r\nexport class SideNavConfig {\r\n    parts: any;\r\n    classes: string[];\r\n    state: any;\r\n    type: string;\r\n    visible: boolean;\r\n}\r\n\r\nexport interface ISideNavService {\r\n    readonly config: SideNavConfig;\r\n    readonly classes: string[];\r\n    parts: any;\r\n    state: any;\r\n\r\n    open(): void;\r\n    close(): void;\r\n    toggle(): void;\r\n    show(): void;\r\n    hide(): void;\r\n\r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n\r\n    part(part: string, value: any): void;\r\n}\r\n\r\nexport interface ISideNavProvider extends ng.IServiceProvider {\r\n    config: SideNavConfig;\r\n    parts: any;\r\n    type: string;\r\n    visible: boolean;\r\n    classes: string[];\r\n\r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n\r\n    part(part: string, value: any): void;\r\n}\r\n\r\nclass SideNavService implements ISideNavService {\r\n    private _config: SideNavConfig;\r\n    private _state: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _sidenav: ng.material.ISidenavService;\r\n\r\n\r\n    public constructor(config: SideNavConfig, $rootScope: ng.IRootScopeService, $mdSidenav: ng.material.ISidenavService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n        this._sidenav = $mdSidenav;\r\n    }\r\n\r\n    public get config(): SideNavConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get state(): any {\r\n        return this._state;\r\n    }\r\n\r\n    public set state(value: any) {\r\n        this._state = value || {};\r\n        this._rootScope.$broadcast(SideNavStateChangedEvent, value);\r\n    }\r\n\r\n    public open() {\r\n        this._sidenav('pip-sticky-sidenav').open();\r\n    }\r\n\r\n    public close() {\r\n        this._sidenav('pip-sticky-sidenav').close();\r\n    }\r\n\r\n    public toggle() {\r\n        this._sidenav('pip-sticky-sidenav').toggle();\r\n    }\r\n\r\n    public show() {\r\n        if (!this._config.visible) {\r\n            this._config.visible = true;\r\n            this.sendConfigEvent();\r\n        }\r\n    }\r\n\r\n    public hide() {\r\n        if (this._config.visible) {\r\n            this._config.visible = false;\r\n            this.sendConfigEvent();\r\n        }\r\n    }\r\n\r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n        this._rootScope.$emit(SideNavChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass SideNavProvider implements ISideNavProvider {\r\n    private _config: SideNavConfig = {\r\n        parts: {},\r\n        classes: [],\r\n        type: 'popup',\r\n        state: null,\r\n        visible: true\r\n    };\r\n\r\n    private _service: SideNavService;\r\n\r\n    public get config(): SideNavConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: SideNavConfig) {\r\n        this._config = value || new SideNavConfig();\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n    }\r\n\r\n    public get type(): string {\r\n        return this._config.type;\r\n    }\r\n\r\n    public set type(value: string) {\r\n        this._config.type = value;\r\n    }\r\n\r\n    public get visible(): boolean {\r\n        return this._config.visible;\r\n    }\r\n\r\n    public set visible(value: boolean) {\r\n        this._config.visible = value;\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public set classes(value: string[]) {\r\n        this._config.classes = value || [];\r\n    }\r\n\r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n    }\r\n\r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService, $mdSidenav: ng.material.ISidenavService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SideNavService(this._config, $rootScope, $mdSidenav);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nfunction hookSideNavEvents($rootScope: ng.IRootScopeService, pipSideNav: ISideNavService) {\r\n    $rootScope.$on(OpenSideNavEvent, () => { pipSideNav.open(); });\r\n    $rootScope.$on(CloseSideNavEvent, () => { pipSideNav.close(); });\r\n}\r\n\r\nangular\r\n    .module('pipSideNav')\r\n    .provider('pipSideNav', SideNavProvider)\r\n    .run(hookSideNavEvents);\r\n","'use strict';\r\n\r\nangular.module('pipSideNav', ['ngMaterial', 'pipNav.Templates']);\r\n\r\nimport './SideNavService';\r\nimport './SideNavPartDirective';\r\nimport './SideNavDirective';\r\n\r\nexport * from './SideNavService';","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n\r\nclass Selected {\r\n    activeIndex: number = 0;\r\n    activeTab: number = 0;\r\n}\r\n\r\nclass TabsDirectiveController {\r\n\r\n    private _element: ng.IAugmentedJQuery;\r\n    private _attrs: ng.IAttributes;\r\n    private _injector: ng.auto.IInjectorService;\r\n    private _scope: angular.IScope;\r\n    private _log: ng.ILogService;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _pipTranslate: pip.services.ITranslateService;\r\n\r\n    private _pipTheme: pip.themes.IThemeService;\r\n    private _pipMedia: pip.layouts.IMediaService;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public themeClass: string;\r\n    public media: any;\r\n    public pipTabIndex: number;\r\n    public selected: Selected;\r\n    public tabs: any[];\r\n    public currentTheme: string;\r\n    public breakpoints: string;\r\n\r\n    constructor(\r\n        $element: ng.IAugmentedJQuery,\r\n        $attrs: ng.IAttributes,\r\n        $injector: ng.auto.IInjectorService,\r\n        $scope: angular.IScope,\r\n        $log: ng.ILogService,\r\n        $rootScope: ng.IRootScopeService,\r\n        $mdMedia: angular.material.IMedia,\r\n        $timeout: ng.ITimeoutService,\r\n        navConstant: any\r\n\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._element = $element;\r\n        this._attrs = $attrs;\r\n        this._scope = $scope;\r\n        this._injector = $injector;\r\n        this._log = $log;\r\n        this._rootScope = $rootScope;\r\n        this._timeout = $timeout;\r\n\r\n        this.selected = new Selected();\r\n        this.setTheme();\r\n        this.setMedia($mdMedia);\r\n        this.initTabs();\r\n\r\n        this.breakpoints = this._scope['breakpoints'] ? this._scope['breakpoints'] : navConstant.TAB_BREAKPOINT;\r\n\r\n        if (this.toBoolean($attrs['pipRebind'])) {\r\n            this._scope.$watch(() => this._scope['activeIndex'],\r\n                (newValue: number, oldValue: number) => {\r\n                    this.selected.activeIndex = newValue || 0;\r\n                    this.selected.activeTab = this.selected.activeIndex;\r\n                }\r\n            );\r\n        }\r\n\r\n    }\r\n\r\n    private setTheme(): void {\r\n        this._pipTheme = this._injector.has('pipTheme') ? <pip.themes.IThemeService>this._injector.get('pipTheme') : null;\r\n        if (this._pipTheme) {\r\n            this.currentTheme = this._pipTheme.theme;\r\n        } else if (this._rootScope['$theme']) {\r\n            this.currentTheme = this._rootScope['$theme'];\r\n        }\r\n\r\n        this.themeClass = (this._attrs['class'] || '') + ' md-' + this.currentTheme + '-theme';\r\n    }\r\n\r\n    private setMedia($mdMedia: angular.material.IMedia): void {\r\n        this._pipMedia = this._injector.has('pipMedia') ? <pip.layouts.IMediaService>this._injector.get('pipMedia') : null;\r\n        this.media = this._pipMedia !== undefined ? this._pipMedia : $mdMedia;\r\n    }\r\n\r\n    private setTranslate(): void {\r\n        this._pipTranslate = this._injector.has('pipTranslate') ? <pip.services.ITranslateService>this._injector.get('pipTranslate') : null;\r\n        if (this._pipTranslate) {\r\n            if (this.tabs.length > 0 && this.tabs[0].title) {\r\n                this._pipTranslate.translateObjects(this.tabs, 'title', 'nameLocal');\r\n            } else {\r\n                this._pipTranslate.translateObjects(this.tabs, 'name', 'nameLocal');\r\n            }\r\n        }\r\n    }\r\n\r\n    private initTabs(): void {\r\n        this.tabs = (this._scope['tabs'] && _.isArray(this._scope['tabs'])) ? this._scope['tabs'] : [];\r\n        this.pipTabIndex = this._attrs['pipTabIndex'] ? parseInt(this._attrs['pipTabIndex']) : 0;\r\n        this.selected.activeIndex = this._scope['activeIndex'] || 0;\r\n        this.selected.activeTab = this.selected.activeIndex;\r\n\r\n\r\n\r\n        if (this.pipTabIndex) {\r\n            this._timeout(() => {\r\n                let a = this._element.find('md-tabs-canvas');\r\n                if (a && a[0]) {\r\n                    angular.element(a[0]).attr('tabindex', this.pipTabIndex);\r\n                }\r\n                a.on('focusout', function () {\r\n                    angular.element(a[0]).attr('tabindex', this.pipTabIndex);\r\n                    this._timeout(() => {\r\n                        angular.element(a[0]).attr('tabindex', this.pipTabIndex);\r\n                    }, 50);\r\n                });\r\n            }, 1000);\r\n        }\r\n        this.setTranslate();\r\n    }\r\n\r\n\r\n    public disabled(): boolean {\r\n        if (this._scope['ngDisabled']) {\r\n            return this._scope['ngDisabled']();\r\n        }\r\n\r\n        return false;\r\n    };\r\n\r\n    public tabDisabled(index: number): boolean {\r\n        return (this.disabled() && this.selected.activeIndex != index);\r\n    };\r\n\r\n    public onSelect(index: number): void {\r\n        console.log('onSelect', index);\r\n        if (this.disabled()) return;\r\n\r\n\r\n        this.selected.activeIndex = index;\r\n        this.selected.activeTab = this.selected.activeIndex;\r\n        this._timeout(() => {\r\n            this._scope['activeIndex'] = index;\r\n            console.log('activeIndex', this._scope['activeIndex']);\r\n            if (this._scope['select']) {\r\n                this._scope['select'](this.tabs[this.selected.activeIndex], this.selected.activeIndex);\r\n            }\r\n        }, 0);\r\n\r\n    };\r\n\r\n    public showShadow(): boolean {\r\n        if (this._scope['showTabsShadow']) {\r\n            return this._scope['showTabsShadow']();\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    public show(): boolean {\r\n        if (this._scope['showTabs']) {\r\n            return this._scope['showTabs']();\r\n        } else {\r\n            return true;\r\n        }\r\n    };\r\n\r\n    public toBoolean(value: any): boolean {\r\n        if (value == null) return false;\r\n        if (!value) return false;\r\n        value = value.toString().toLowerCase();\r\n        return value == '1' || value == 'true';\r\n    }\r\n\r\n}\r\n\r\n(() => {\r\n    function tabsDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                ngDisabled: '&',\r\n                tabs: '=pipTabs',\r\n                showTabs: '&pipShowTabs',\r\n                showTabsShadow: '&pipTabsShadow',\r\n                activeIndex: '=pipActiveIndex',\r\n                select: '=pipTabsSelect',\r\n                breakpoints: '=pipBreakpoints'\r\n            },\r\n            templateUrl: 'tabs/Tabs.html',\r\n            controller: TabsDirectiveController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n\r\n    angular\r\n        .module(\"pipTabs\", ['pipNav.Templates'])\r\n        .directive('pipTabs', tabsDirective);\r\n\r\n})();","(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('actions/PrimaryActions.html',\n    '<div pip-focused=\"\" pip-focused-tabindex=\"2\"><md-menu md-position-mode=\"target-right target\" class=\"pip-primary-actions\" ng-repeat=\"action in vm.config.primaryLocalActions\"><md-button class=\"pip-primary-actions-action md-icon-button pip-focusable\" ng-click=\"vm.clickAction(action, $mdOpenMenu);\" tabindex=\"-1\" ng-hide=\"vm.isHidden(action)\" aria-label=\"{{ action.title | translate }}\"><div class=\"pip-primary-actions-badge\" ng-show=\"action.count > 0\">{{ vm.actionCount(action) }}</div><md-icon md-svg-icon=\"{{ action.icon}}\"></md-icon></md-button><md-menu-content width=\"3\"><md-menu-item ng-repeat-start=\"subAction in action.subActions\" ng-if=\"!subAction.divider\" ng-hide=\"vm.isHidden(subAction)\"><md-button class=\"pip-focusable\" ng-hide=\"subAction.divider\" tabindex=\"-1\" ng-click=\"vm.clickAction(subAction)\">{{ ::subAction.title | translate }}</md-button></md-menu-item><md-menu-divider ng-if=\"subAction.divider\" ng-repeat-end=\"\"></md-menu-divider></md-menu-content></md-menu><md-menu md-position-mode=\"target-right target\" class=\"pip-primary-actions\" ng-repeat=\"action in vm.config.primaryGlobalActions\"><md-button class=\"pip-primary-actions-action md-icon-button pip-focusable\" ng-click=\"vm.clickAction(action, $mdOpenMenu);\" ng-hide=\"vm.isHidden(action)\" tabindex=\"-1\" aria-label=\"{{ action.title | translate }}\"><div class=\"pip-primary-actions-badge color-badge-bg\" ng-show=\"action.count > 0\">{{ vm.actionCount(action) }}</div><md-icon md-svg-icon=\"{{ action.icon }}\"></md-icon></md-button><md-menu-content width=\"3\"><md-menu-item ng-repeat-start=\"subAction in action.subActions\" ng-if=\"!subAction.divider\" ng-hide=\"vm.isHidden(subAction)\"><md-button class=\"pip-focusable\" ng-hide=\"subAction.divider\" tabindex=\"-1\" ng-click=\"vm.clickAction(subAction)\">{{ subAction.title | translate }}</md-button></md-menu-item><md-menu-divider ng-if=\"subAction.divider\" ng-repeat-end=\"\"></md-menu-divider></md-menu-content></md-menu></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('actions/SecondaryActions.html',\n    '<md-menu ng-if=\"vm.secondaryActionsVisible()\" md-position-mode=\"target-right target\"><md-button class=\"md-icon-button\" tabindex=\"3\" ng-init=\"vm.getMenu($mdOpenMenu)\" ng-click=\"vm.onSecondaryActionClick(); vm.openMenu($mdOpenMenu, $event);\" aria-label=\"open actions\"><md-icon md-svg-icon=\"icons:vdots\"></md-icon></md-button><md-menu-content width=\"3\"><md-menu-item ng-repeat-start=\"action in vm.config.secondaryLocalActions\" ng-if=\"!action.divider\" ng-hide=\"vm.isHidden(action)\"><md-button ng-hide=\"action.divider\" ng-click=\"vm.clickAction(action)\">{{ ::action.title | translate }}</md-button></md-menu-item><md-menu-divider ng-if=\"action.divider\" ng-repeat-end=\"\"></md-menu-divider><md-menu-divider ng-if=\"vm.secondaryDividerVisible()\"></md-menu-divider><md-menu-item ng-repeat-start=\"action in vm.config.secondaryGlobalActions\" ng-if=\"!action.divider\" ng-hide=\"vm.isHidden(action)\"><md-button ng-hide=\"action.divider\" ng-click=\"vm.clickAction(action)\">{{ ::action.title | translate }}</md-button></md-menu-item><md-menu-divider ng-if=\"action.divider\" ng-repeat-end=\"\"></md-menu-divider></md-menu-content></md-menu>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('appbar/AppBar.html',\n    '<md-toolbar class=\"{{ vm.config.classes.join(\\' \\') }}\" ng-if=\"vm.config.visible\" ng-transclude=\"\"></md-toolbar>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('breadcrumb/Breadcrumb.html',\n    '<div class=\"pip-breadcrumb-block\"><div class=\"text-overflow\" ng-if=\"!vm._media(\\'xs\\')\"><span ng-if=\"vm.config.criteria\" ng-click=\"vm.openSearch()\">{{ vm.config.criteria }} -</span><span class=\"pip-breadcrumb-item {{ $last ? \\'breadcrumb-accent\\' : \\'\\' }}\" ng-if=\"vm.config.items && vm.config.items.length > 0\" ng-repeat-start=\"item in vm.config.items\" ng-click=\"vm.onClick(item)\" ng-init=\"stepWidth = 100/(vm.config.items.length + 1)\" ng-class=\"{\\'cursor-pointer\\': !$last}\" ng-style=\"{\\'max-width\\': stepWidth + \\'%\\'}\"><span ng-if=\"!$last || !vm.actionsVisible(item)\">{{ item.title | translate }}</span><div ng-if=\"$last && vm.actionsVisible(item)\" style=\"display: inline-block; position: relative;\"><md-menu md-offset=\"0 44\"><span class=\"layout-row pip-breadcrumb-item-menu cursor-pointer {{ $last ? \\'breadcrumb-accent\\' : \\'\\' }}\" ng-click=\"vm.onOpenMenu($mdOpenMenu, $event)\" md-ink-ripple=\"\" aria-label=\"open breadcrumb actions\">{{ item.title | translate }}<md-icon class=\"pip-triangle-down\" md-svg-icon=\"icons:triangle-down\"></md-icon></span><md-menu-content width=\"4\"><md-menu-item ng-if=\"!subItem.divider\" ng-repeat-start=\"subItem in item.subActions\"><md-button ng-click=\"vm.onSubActionClick(subItem)\" ng-if=\"!action.divider\" tabindex=\"4\"><md-icon md-menu-align-target=\"\" ng-if=\"subItem.icon\" md-svg-icon=\"{{ subItem.icon }}\"></md-icon><span>{{ subItem.title | translate }}</span></md-button></md-menu-item><md-menu-divider ng-if=\"subItem.divider\" ng-repeat-end=\"\"></md-menu-divider></md-menu-content></md-menu></div></span><md-icon ng-repeat-end=\"\" md-svg-icon=\"icons:chevron-right\" ng-hide=\"$last\"></md-icon><span class=\"pip-title breadcrumb-accent\" ng-if=\"vm.config.text\">{{ vm.config.text | translate }}</span></div><div style=\"position: relative;\" ng-if=\"vm._media(\\'xs\\')\"><md-menu md-offset=\"0 44\"><span class=\"pip-mobile-breadcrumb layout-row\" ng-click=\"vm.config.items && vm.config.items.length > 1 ? $mdOpenMenu() : return\"><span class=\"text-overflow\"><span ng-if=\"vm.config.criteria\" ng-click=\"vm.openSearch()\">{{ vm.config.criteria }} -</span> <span class=\"breadcrumb-accent\" ng-if=\"vm.config.text\">{{ vm.config.text | translate }}</span> <span ng-if=\"vm.config.items && vm.config.items.length > 0\" class=\"breadcrumb-accent {{ (vm.config.items && vm.config.items.length > 1) ? \\'cursor-pointer\\' : \\'\\' }}\">{{ vm.config.items[vm.config.items.length - 1].title | translate }}</span></span><md-icon class=\"pip-triangle-down cursor-pointer breadcrumb-accent\" md-svg-icon=\"icons:triangle-down\" ng-if=\"vm.config.items && vm.config.items.length > 1\"></md-icon></span><md-menu-content width=\"4\"><md-menu-item ng-repeat=\"item in vm.config.items\" ng-if=\"vm.config.items && vm.config.items.length > 0\"><md-button ng-click=\"vm.onClick(item)\" tabindex=\"5\"><md-icon md-menu-align-target=\"\" ng-if=\"item.icon\" md-svg-icon=\"{{ item.icon }}\"></md-icon><span>{{ item.title | translate }}</span></md-button></md-menu-item><md-menu-item ng-if=\"vm.config.text\"><md-button tabindex=\"5\"><span class=\"text-grey\">{{ vm.config.text | translate }}</span></md-button></md-menu-item></md-menu-content></md-menu></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dropdown/Dropdown.html',\n    '<md-toolbar class=\"md-subhead color-primary-bg {{ vm.themeClass}}\" ng-if=\"vm.show()\" ng-class=\"{\\'md-whiteframe-3dp\\': vm.media(\\'xs\\')}\"><div class=\"pip-divider\"></div><md-select ng-model=\"vm.selectedIndex\" tabindex=\"15\" ng-disabled=\"vm.disabled()\" md-container-class=\"pip-full-width-dropdown\" aria-label=\"DROPDOWN\" md-ink-ripple=\"\" md-on-close=\"vm.onSelect(vm.selectedIndex)\"><md-option ng-repeat=\"action in vm.actions\" value=\"{{ ::$index }}\" ng-selected=\"vm.activeIndex == $index ? true : false\">{{ (action.title || action.name || action) | translate }}</md-option></md-select></md-toolbar>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('header/NavHeader.html',\n    '<md-toolbar ng-show=\"showHeader\" class=\"layout-row layout-align-start-center\"><div class=\"flex-fixed pip-sticky-nav-header-user\"><md-button class=\"md-icon-button\" ng-click=\"onUserClick()\" aria-label=\"current user\" tabindex=\"-1\"><img src=\"\" class=\"pip-sticky-nav-header-user-image\" ng-class=\"imageCss\"></md-button></div><div class=\"pip-sticky-nav-header-user-text\"><div class=\"pip-sticky-nav-header-user-pri\" ng-click=\"onUserClick()\" tabindex=\"-1\">{{ title | translate }}</div><div class=\"pip-sticky-nav-header-user-sec\">{{ subtitle | translate }}</div></div></md-toolbar>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('icon/NavIcon.html',\n    '<md-button class=\"md-icon-button pip-nav-icon\" ng-if=\"vm.config.type != \\'none\\'\" ng-class=\"vm.config.class\" ng-click=\"vm.onNavIconClick()\" tabindex=\"{{ vm.config.type==\\'menu\\' || vm.config.type==\\'back\\' ? 4 : -1 }}\" aria-label=\"menu\"><md-icon ng-if=\"vm.config.type==\\'menu\\'\" md-svg-icon=\"icons:menu\"></md-icon><img ng-src=\"{{ vm.config.imageUrl }}\" ng-if=\"vm.config.type==\\'image\\'\" height=\"24\" width=\"24\"><md-icon ng-if=\"vm.config.type==\\'back\\'\" md-svg-icon=\"icons:arrow-left\"></md-icon><md-icon ng-if=\"vm.config.type==\\'icon\\'\" md-svg-icon=\"{{ vm.config.icon }}\"></md-icon></md-button>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('language/LanguagePicker.html',\n    '<md-menu md-position-mode=\"target-right target\"><span class=\"pip-language\" ng-click=\"$mdOpenMenu()\" aria-label=\"language selection\">{{ vm.selectedLanguage | translate }}<md-icon md-svg-icon=\"icons:triangle-down\"></md-icon></span><md-menu-content width=\"3\"><md-menu-item ng-repeat=\"language in vm.languages\"><md-button ng-click=\"vm.onLanguageClick(language)\" tabindex=\"7\">{{ language | translate }}</md-button></md-menu-item></md-menu-content></md-menu>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('menu/NavMenu.html',\n    '<div ng-if=\"sections && sections.length\"><md-list class=\"sidenav-list\" pip-focused=\"\" pip-focused-tabindex=\"10\" pip-with-hidden=\"true\"><md-list-item class=\"no-border pip-sticky-nav-menu-item pip-sticky-nav-expanded-button\" ng-click=\"onExpand()\" ng-disabled=\"!isCollapsed\" tabindex=\"-1\" ng-if=\"expandedButton\"><md-icon md-svg-icon=\"icons:chevron-left\" ng-if=\"expanded\" class=\"pip-sticky-nav-menu-icon\"></md-icon><md-icon md-svg-icon=\"icons:chevron-right\" ng-if=\"!expanded\" class=\"pip-sticky-nav-menu-icon\"></md-icon></md-list-item><md-divider ng-show=\"expandedButton\"></md-divider><div class=\"pip-section\" ng-repeat=\"section in sections\" ng-hide=\"section.access && !section.access(section)\"><md-divider ng-show=\"$index > 0 && !isSectionEmpty(section.links)\"></md-divider><md-subheader ng-show=\"section.title\" style=\"height: 48px;\"><span ng-if=\"expanded\" class=\"pip-sticky-nav-menu-title section-title\">{{::section.title | translate}}</span><md-icon md-svg-icon=\"{{section.icon}}\" ng-if=\"!sideNavState.showIconTooltype && !expanded && section.icon\" class=\"pip-sticky-nav-menu-icon section-icon\"></md-icon><md-icon md-svg-icon=\"{{section.icon}}\" ng-if=\"sideNavState.showIconTooltype && !expanded && section.icon\" class=\"pip-sticky-nav-menu-icon section-icon\"><md-tooltip md-visible=\"showTooltip\" md-direction=\"right\" class=\"sidenav-icon-tooltip\">{{::section.tooltipText || section.title | translate}}</md-tooltip></md-icon><md-icon md-svg-icon=\"{{defaultIcon}}\" ng-if=\"!sideNavState.showIconTooltype && !expanded && !section.icon\" class=\"pip-sticky-nav-menu-icon section-icon\"></md-icon><md-icon md-svg-icon=\"{{defaultIcon}}\" ng-if=\"sideNavState.showIconTooltype && !expanded && !section.icon\" class=\"pip-sticky-nav-menu-icon section-icon\"><md-tooltip md-visible=\"showTooltip\" class=\"md-secondary\">{{::section.tooltipText || section.title | translate}}</md-tooltip></md-icon></md-subheader><md-list-item class=\"no-border pip-sticky-nav-menu-item pip-focusable\" ng-repeat=\"link in section.links\" tabindex=\"-1\" ng-class=\"{\\'active\\': isActive(link)}\" ng-hide=\"link.access && !link.access(link)\"><md-button class=\"layout-row layout-align-start-center pip-button-block\" tabindex=\"-1\" ng-click=\"clickLink($event, link)\"><md-tooltip md-visible=\"showTooltip\" md-direction=\"right\">{{::link.tooltipText | translate}}</md-tooltip><div class=\"pip-sticky-nav-menu-icon-block\"><md-icon md-svg-icon=\"{{link.icon}}\" ng-if=\"!(sideNavState.showIconTooltype && !link.tooltipText && !expanded)\" ng-hide=\"!link.icon\" class=\"pip-sticky-nav-menu-icon flex-fixed\"></md-icon><md-icon md-svg-icon=\"{{link.icon}}\" ng-hide=\"!link.icon\" ng-if=\"sideNavState.showIconTooltype && !link.tooltipText && !expanded\" class=\"pip-sticky-nav-menu-icon flex-fixed\"><md-tooltip md-visible=\"showTooltip\" md-direction=\"right\" class=\"sidenav-icon-tooltip\">{{::link.tooltipText || link.title | translate}}</md-tooltip></md-icon></div><div class=\"pip-sticky-nav-menu-title\">{{::link.title | translate}}</div><div class=\"pip-sticky-nav-menu-badge {{ link.badgeStyle ? link.badgeStyle : \\'color-badge-bg\\' }} flex-fixed\" ng-if=\"link.count && link.count < 100\">{{link.count}}</div><div class=\"pip-sticky-nav-menu-badge {{ link.badgeStyle ? link.badgeStyle : \\'color-badge-bg\\' }} flex-fixed\" ng-if=\"link.count && link.count > 99\">!</div></md-button></md-list-item></div></md-list></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('search/SearchBar.html',\n    '<div class=\"md-toolbar-tools pip-search-container\" ng-if=\"vm.enabled\"><div class=\"layout-row pip-search-selected\"><md-button class=\"md-icon-button\" tabindex=\"6\" aria-label=\"start search\" ng-click=\"vm.onClick()\"><md-icon md-svg-icon=\"icons:search\"></md-icon></md-button><input class=\"pip-search-text flex\" type=\"search\" tabindex=\"6\" ng-model=\"vm.search.text\" ng-keydown=\"vm.onKeyDown($event)\"><md-button class=\"md-icon-button\" tabindex=\"6\" aria-label=\"clear search\" ng-click=\"vm.clear()\"><md-icon md-svg-icon=\"icons:cross-circle\"></md-icon></md-button></div></div><div class=\"md-toolbar-tools layout-row layout-align-end-center flex-fixed lp0 rp0\" ng-if=\"!vm.enabled\"><md-button class=\"md-icon-button\" tabindex=\"5\" aria-label=\"start search\" ng-click=\"vm.enable()\"><md-icon md-svg-icon=\"icons:search\"></md-icon></md-button></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('sidenav/SideNav.html',\n    '<md-sidenav class=\"md-sidenav-left\" md-is-locked-open=\"sidenavState.isLockedOpen\" md-component-id=\"pip-sticky-sidenav\" ng-transclude=\"\"></md-sidenav>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('tabs/Tabs.html',\n    '<md-toolbar class=\"pip-nav {{ vm.themeClass }}\" ng-class=\"{\\'pip-visible\\': vm.show(), \\'pip-shadow\\': vm.showShadow()}\"><md-tabs ng-if=\"vm.media(vm.breakpoints)\" md-selected=\"vm.selected.activeTab\" ng-class=\"{\\'disabled\\': vm.disabled()}\" md-stretch-tabs=\"true\" md-dynamic-height=\"true\"><md-tab ng-repeat=\"tab in vm.tabs track by $index\" ng-disabled=\"vm.tabDisabled($index)\" md-on-select=\"vm.onSelect($index)\"><md-tab-label>{{:: tab.nameLocal }}<div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 0 && tab.newCounts <= 99\">{{ tab.newCounts }}</div><div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 99\">!</div></md-tab-label></md-tab></md-tabs><div class=\"md-subhead pip-tabs-content color-primary-bg\" ng-if=\"!vm.media(vm.breakpoints)\"><div class=\"pip-divider position-top m0\"></div><md-select ng-model=\"vm.selected.activeIndex\" ng-disabled=\"vm.disabled()\" md-container-class=\"pip-full-width-dropdown\" aria-label=\"SELECT\" md-ink-ripple=\"\" md-on-close=\"vm.onSelect(vm.selected.activeIndex)\"><md-option ng-repeat=\"tab in vm.tabs track by $index\" class=\"pip-tab-option\" value=\"{{ ::$index }}\">{{ ::tab.nameLocal }}<div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 0 && tab.newCounts <= 99\">{{ tab.newCounts }}</div><div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 99\">!</div></md-option></md-select></div></md-toolbar>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-nav-html.min.js.map\n","function configureBootBarnCoolTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     'bootbarn-cool': 'Cool'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     'bootbarn-cool': ''\r\n    // });\r\n    \r\n    let coolBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(69, 90, 100, 1)'\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-cool-background', coolBackgroundPalette);\r\n\r\n    let coolPrimaryPalette = $mdThemingProvider.extendPalette('grey', {\r\n        '300': 'rgba(69, 90, 100, .54)',\r\n        '500': 'rgba(69, 90, 100, 1)',\r\n        'contrastLightColors': ['500', '300']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-cool-primary', coolPrimaryPalette);\r\n\r\n\r\n    let coolAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n        'A700': 'rgba(76, 175, 80, 1)',\r\n        'contrastLightColors': ['A700']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-cool-accent', coolAccentPalette);\r\n\r\n    $mdThemingProvider.theme('bootbarn-cool')\r\n        .primaryPalette('bootbarn-cool-primary', {\r\n            'default': '500',\r\n            'hue-1': '300'\r\n        })\r\n        .backgroundPalette('bootbarn-cool-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('bootbarn-cool-accent', {\r\n            'default': 'A700'\r\n        });\r\n\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.BootBarn.Cool', [ 'ngMaterial' ])\r\n    .config(configureBootBarnCoolTheme);\r\n","function configureBootBarnMonochromeTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     'bootbarn-monochrome': 'Monochrome'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     'bootbarn-monochrome': ''\r\n    // });\r\n    \r\n    let monochromeBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(38, 50, 56, 1)'\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-monochrome-background', monochromeBackgroundPalette);\r\n\r\n    let monochromePrimaryPalette = $mdThemingProvider.extendPalette('grey', {\r\n        '300': 'rgba(38, 50, 56, .54)',\r\n        '500': 'rgba(38, 50, 56, 1)',\r\n        'contrastLightColors': ['500', '300']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-monochrome-primary', monochromePrimaryPalette);\r\n\r\n    let monochromeAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n        'A700': 'rgba(76, 175, 80, 1)',\r\n        'contrastLightColors': ['A700']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-monochrome-accent', monochromeAccentPalette);\r\n\r\n    $mdThemingProvider.theme('bootbarn-monochrome')\r\n        .primaryPalette('bootbarn-monochrome-primary', {\r\n            'default': '500',\r\n            'hue-1': '300'\r\n        })\r\n        .backgroundPalette('bootbarn-monochrome-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('bootbarn-monochrome-accent', {\r\n            'default': 'A700'\r\n        });\r\n\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.BootBarn.Monochrome', [ 'ngMaterial' ])\r\n    .config(configureBootBarnMonochromeTheme);\r\n","function configureBootBarnWarmTheme($mdThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     'bootbarn-warm': 'Warm'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     'bootbarn-warm': ''\r\n    // });\r\n\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    let warmBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(177, 55, 34, 1)'\r\n        })\r\n        ;\r\n    $mdThemingProvider.definePalette('bootbarn-warm-background', warmBackgroundPalette);\r\n\r\n    let warmPrimaryPalette = $mdThemingProvider.extendPalette('brown', {\r\n        '300': 'rgba(177, 55, 34, .54)',\r\n        '500': 'rgba(177, 55, 34, 1)',\r\n        'contrastLightColors': ['500', '300']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-warm-primary', warmPrimaryPalette);\r\n\r\n\r\n    let warmAccentPalette = $mdThemingProvider.extendPalette('amber', {\r\n        'A700': 'rgba(127, 148, 92, 1)',\r\n        'contrastLightColors': ['A700']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-warm-accent', warmAccentPalette);\r\n\r\n    let warmErrorPalette = $mdThemingProvider.extendPalette('red', {\r\n        'A200': 'rgba(255, 82, 82, 1)',\r\n        'contrastLightColors': ['A200']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-warm-error', warmErrorPalette);\r\n\r\n    $mdThemingProvider.theme('bootbarn-warm')\r\n    .primaryPalette('bootbarn-warm-primary', {\r\n        'default': '500',\r\n        'hue-1': '300'\r\n    })\r\n    .backgroundPalette('bootbarn-warm-background', {\r\n        'default': '50',  // background\r\n        'hue-1': 'A200',  // tiles dialog\r\n        'hue-2': 'A700'   // app bar\r\n    })\r\n    .warnPalette('bootbarn-warm-error', {\r\n        'default': 'A200'\r\n    })\r\n    .accentPalette('bootbarn-warm-accent', {\r\n        'default': 'A700'\r\n    });\r\n}\r\n\r\nangular.module('pipTheme.BootBarn.Warm', [ 'ngMaterial' ])\r\n    .config(configureBootBarnWarmTheme);\r\n","import './BootBarnCoolTheme';\r\nimport './BootBarnWarmTheme';\r\nimport './BootBarnMonochromeTheme';\r\n\r\nangular.module('pipTheme.BootBarn', [\r\n    'ngMaterial',\r\n    'pipTheme.BootBarn.Warm',\r\n    'pipTheme.BootBarn.Cool',\r\n    'pipTheme.BootBarn.Monochrome',\r\n]);\r\n","import { IThemeService, IThemeProvider } from './IThemeService';\r\n\r\nexport let ThemeRootVar = \"$theme\";\r\nexport let ThemeChangedEvent = \"pipThemeChanged\";    \r\nexport let ThemeResetPage = \"pipResetPage\";    \r\n\r\nclass ThemeConfig {\r\n    public theme: string;\r\n}\r\n\r\nclass ThemeService implements IThemeService {\r\n    private _config: ThemeConfig;\r\n    private _setRootVar: boolean;\r\n    private _persist: boolean;\r\n    private _currentTheme: string = null;\r\n\r\n    public constructor(\r\n        private $log: ng.ILogService,\r\n        private $rootScope: ng.IRootScopeService,\r\n        private $window: ng.IWindowService,\r\n        private $mdTheming,\r\n        config: ThemeConfig,\r\n        setRootVar: boolean,\r\n        persist: boolean,\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._persist = persist;\r\n        this._config = config;\r\n\r\n        //if (this._persist && this.$window.localStorage && this._config.theme == \"default\")\r\n        this._config.theme = this.$window.localStorage.getItem('theme') || this._config.theme || 'default';\r\n\r\n        this.$log.debug(\"Set theme to \" + this._config.theme);\r\n\r\n        // Define theme for angular material \r\n        $('body').attr('md-theme', '{{' + ThemeRootVar + '}}');\r\n        this.save();\r\n    }\r\n\r\n    private save(): void {\r\n        let body = $('body');\r\n        let newTheme: string = this._config.theme;\r\n\r\n        // Switch material theme\r\n        // body.attr('md-theme', newTheme);\r\n\r\n        // Change custom theme\r\n        body.addClass(newTheme);\r\n        if (this._currentTheme != null && this._currentTheme != newTheme)\r\n            body.removeClass(this._currentTheme);            \r\n\r\n        this._currentTheme = newTheme;\r\n\r\n        // Set root scope variable\r\n        if (this._setRootVar)\r\n            this.$rootScope[ThemeRootVar] = this._config.theme;\r\n\r\n        // Save in local storage\r\n        if (this._persist && this.$window.localStorage != null)\r\n            this.$window.localStorage.setItem('theme', this._config.theme);\r\n    }\r\n\r\n    public get theme(): string {\r\n        return this._config.theme;\r\n    }\r\n\r\n    public set theme(value: string) {\r\n        if (value != this._config.theme) {\r\n            if (!(value in this.$mdTheming.THEMES))\r\n                throw new Error('Theme ' + value + ' is not defined. Please, register it first with $mdThemingProvider');\r\n\r\n            this._config.theme = value;\r\n            \r\n            this.$log.debug(\"Changing theme to \" + value);\r\n\r\n            this.save();                \r\n\r\n            this.$rootScope.$emit(ThemeChangedEvent, value);\r\n            this.$rootScope.$emit(ThemeResetPage);\r\n        }\r\n    }\r\n\r\n    public use(theme: string): string {\r\n        if (theme != null) {\r\n            this._config.theme = theme;\r\n            this.save();    \r\n        }     \r\n        return this._config.theme;\r\n    }\r\n\r\n}\r\n\r\nclass ThemeProvider implements IThemeProvider {\r\n    private _config: ThemeConfig = new ThemeConfig();\r\n    private _setRootVar: boolean = true;\r\n    private _persist: boolean = true;\r\n    private _service: ThemeService;\r\n    \r\n    public constructor() {\r\n        this._config.theme = \"default\";\r\n    }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get persist(): boolean {\r\n        return this._persist;  \r\n    }\r\n\r\n    public set persist(value: boolean) {\r\n        this._persist = !!value;\r\n    }\r\n\r\n    public get theme(): string {\r\n        return this._config.theme;\r\n    }\r\n\r\n    public set theme(value: string) {\r\n        this._config.theme = value;\r\n    }\r\n\r\n    public use(theme: string): string {\r\n        if (theme != null) {\r\n            this._config.theme = theme;\r\n            let body = $('body');\r\n            body.addClass(this._config.theme);\r\n        }\r\n        return this._config.theme;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $window: ng.IWindowService,\r\n        $mdTheming: any\r\n    ): ThemeService {\r\n        \"ngInject\";\r\n        if (_.isUndefined(this._service) || _.isNull(this._service))  {\r\n            this._service = new ThemeService($log, $rootScope, $window, this._config,  $mdTheming, this._setRootVar, this._persist);\r\n        }\r\n         \r\n        return this._service;\r\n    }\r\n}\r\n\r\nfunction initTheme(pipTheme: IThemeService) {\r\n    pipTheme.theme;\r\n}\r\n\r\nangular\r\n    .module('pipTheme')\r\n    .provider('pipTheme', ThemeProvider)\r\n    .run(initTheme);\r\n","'use strict';\r\n\r\nangular.module('pipTheme', ['ngMaterial']);\r\n\r\nimport './ThemeService';\r\n\r\nexport * from './IThemeService';\r\nexport * from './ThemeService';\r\n","function configureDefaultAmberTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     amber: 'Amber'\r\n    // });\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     amber: ''\r\n    // });\r\n\r\n    let orangeBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(255, 152, 0, 1)'\r\n    });\r\n    $mdThemingProvider.definePalette('orange-background', orangeBackgroundPalette);\r\n\r\n    let orangePrimaryPalette = $mdThemingProvider.extendPalette('orange', {\r\n        '800': 'rgba(255, 152, 0, 1)',\r\n        '900': 'rgba(255, 152, 0, .54);'\r\n    });\r\n    $mdThemingProvider.definePalette('orange-primary', orangePrimaryPalette);\r\n\r\n    $mdThemingProvider.theme('amber')\r\n        .primaryPalette('orange-primary', {\r\n            'default': '800',\r\n            'hue-1': '900'\r\n        })\r\n        .backgroundPalette('orange-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('orange', {\r\n            'default': '900'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Amber', [ 'ngMaterial' ])\r\n    .config(configureDefaultAmberTheme);\r\n","function configureDefaultBlueTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     blue: 'Blue',\r\n    // });\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     blue: ''\r\n    // });\r\n\r\n    registerBlueTheme('default');\r\n    registerBlueTheme('blue');\r\n\r\n    $mdThemingProvider.setDefaultTheme('default');\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    function registerBlueTheme(themeName) {\r\n        let bluePrimaryPalette = $mdThemingProvider.extendPalette('blue', {\r\n            'contrastDefaultColor': 'light',\r\n            'contrastDarkColors': undefined\r\n        });\r\n        $mdThemingProvider.definePalette('blue-primary', bluePrimaryPalette);\r\n\r\n        let blueBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(33, 150, 243, 1)'\r\n        });\r\n        $mdThemingProvider.definePalette('blue-background', blueBackgroundPalette);\r\n\r\n        let blueAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n            '600': 'rgba(0, 200, 83, 1)'\r\n        });\r\n        $mdThemingProvider.definePalette('blue-accent', blueAccentPalette);\r\n\r\n        $mdThemingProvider.theme(themeName)\r\n            .primaryPalette('blue-primary', {\r\n                'default': '500',\r\n                'hue-1': '300'\r\n            })\r\n            .backgroundPalette('blue-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('blue-accent', {\r\n                'default': '600'\r\n            });\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Blue', [ 'ngMaterial' ])\r\n    .config(configureDefaultBlueTheme);\r\n","function configureDefaultGreenTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     green: 'Green'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     green: ''\r\n    // });\r\n\r\n    let greenBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(76, 175, 80, 1)'\r\n    });\r\n    $mdThemingProvider.definePalette('green-background', greenBackgroundPalette);\r\n\r\n    let greenPrimaryPalette = $mdThemingProvider.extendPalette('green', {\r\n        '300': '#9ed4a1',\r\n        'contrastLightColors': ['500', '300']\r\n    });\r\n    $mdThemingProvider.definePalette('green-primary', greenPrimaryPalette);\r\n\r\n\r\n    let greenAccentPalette = $mdThemingProvider.extendPalette('amber', {\r\n        'contrastLightColors': ['A700']\r\n    });\r\n    $mdThemingProvider.definePalette('green-accent', greenAccentPalette);\r\n\r\n    $mdThemingProvider.theme('green')\r\n        .primaryPalette('green-primary', {\r\n            'default': '500',\r\n            'hue-1': '300'\r\n        })\r\n        .backgroundPalette('green-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('green-accent', {\r\n            'default': 'A700'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Green', [ 'ngMaterial' ])\r\n    .config(configureDefaultGreenTheme);\r\n","function configureDefaultGreyTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     grey: 'Grey'\r\n    // });\r\n    \r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     grey: ''\r\n    // });\r\n\r\n    let thirdPartyPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(255, 152, 0, 1)',\r\n        'A400': '#a9b9c0',\r\n        '500': '#607D8B',\r\n        'A700': '#90A4AE',\r\n        //'800': '',\r\n        'contrastDefaultColor': 'dark',\r\n        'contrastLightColors': ['300', '400', '500', '600', '700', '800', '900', 'A700']\r\n    });\r\n    $mdThemingProvider.definePalette('third-party', thirdPartyPalette);\r\n\r\n\r\n    $mdThemingProvider.theme('grey')\r\n        .primaryPalette('third-party', {\r\n            'default': '500',\r\n            'hue-1': 'A400'\r\n        })\r\n        .backgroundPalette('third-party', {\r\n            'default': '50',  // background\r\n            'hue-1': '500',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('third-party', {\r\n            'default': 'A700'\r\n        });\r\n    \r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Grey', [ 'ngMaterial' ])\r\n    .config(configureDefaultGreyTheme);\r\n","function configureDefaultNavyTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     navy: 'Navy'\r\n    // });\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     navy: '-'\r\n    // });\r\n\r\n    let greyPalette = $mdThemingProvider.extendPalette('grey', {\r\n        '700': 'rgba(86, 97, 125, 1)',\r\n        '800': 'rgba(86, 97, 125, .54)',\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n    });\r\n    $mdThemingProvider.definePalette('grey', greyPalette);\r\n\r\n    let tealPalette = $mdThemingProvider.extendPalette('teal', {\r\n        'contrastLightColors': ['500', '600', '700', '800', '900', 'A700']\r\n    });\r\n    $mdThemingProvider.definePalette('teal', tealPalette);\r\n\r\n    $mdThemingProvider.theme('navy')\r\n        .primaryPalette('grey', {\r\n            'default': '700',\r\n            'hue-1': '800'\r\n        })\r\n        .backgroundPalette('grey', {\r\n            'default': '50',  // background\r\n            'hue-1': '700',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('teal', {\r\n            'default': 'A700'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Navy', [ 'ngMaterial' ])\r\n    .config(configureDefaultNavyTheme);\r\n","function configureDefaultOrangeTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     orange: 'Orange'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     orange: ''\r\n    // });\r\n\r\n    let RedBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(255, 112, 67, 1)',\r\n        'contrastLightColors': ['600', '700', '800', '900', 'A200']\r\n    });\r\n    $mdThemingProvider.definePalette('red-background', RedBackgroundPalette);\r\n\r\n    let RedPrimaryPalette = $mdThemingProvider.extendPalette('orange', {\r\n        '800': 'rgba(255, 112, 67, 1)',\r\n        '900': 'rgba(255, 152, 67, .54)',\r\n        'A100': 'rgba(255, 171, 64, 1)',\r\n        'contrastLightColors': ['800', '900', 'A100']\r\n    });\r\n    $mdThemingProvider.definePalette('red-primary', RedPrimaryPalette);\r\n\r\n    $mdThemingProvider.theme('orange')\r\n        .primaryPalette('red-primary', {\r\n            'default': '800',\r\n            'hue-1': '900'\r\n        })\r\n        .backgroundPalette('red-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('red-primary', {\r\n            'default': 'A100'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Orange', [ 'ngMaterial' ])\r\n    .config(configureDefaultOrangeTheme);\r\n","function configureDefaultPinkTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     pink: 'Pink'\r\n    // });\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     pink: '',\r\n\r\n    // });\r\n\r\n    let PinkBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(188, 86, 121, 1)',\r\n        'contrastDefaultColor': 'dark',\r\n        'contrastLightColors': ['A200', 'A700']\r\n    });\r\n    $mdThemingProvider.definePalette('pink-background', PinkBackgroundPalette);\r\n\r\n    let PinkPrimaryPalette = $mdThemingProvider.extendPalette('pink', {\r\n        '600': 'rgba(255, 128, 171, 1)',\r\n        '700': 'rgba(188, 86, 121, .54)',\r\n        '900': 'rgba(188, 86, 121, 1)',\r\n        'contrastDefaultColor': 'light'\r\n    });\r\n    $mdThemingProvider.definePalette('pink-primary', PinkPrimaryPalette);\r\n\r\n    $mdThemingProvider.theme('pink')\r\n        .primaryPalette('pink-primary', {\r\n            'default': '900',\r\n            'hue-1': '700'\r\n        })\r\n        .backgroundPalette('pink-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('pink-primary', {\r\n            'default': '600'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Pink', [ 'ngMaterial' ])\r\n    .config(configureDefaultPinkTheme);\r\n","import './DefaultBlueTheme';\r\nimport './DefaultPinkTheme';\r\nimport './DefaultAmberTheme';\r\nimport './DefaultOrangeTheme';\r\nimport './DefaultGreenTheme';\r\nimport './DefaultNavyTheme';\r\nimport './DefaultGreyTheme';\r\n\r\nfunction configureDefaultTheme($mdThemingProvider) {\r\n    $mdThemingProvider.setDefaultTheme('default');\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular.module('pipTheme.Default', [\r\n        'ngMaterial',\r\n        'pipTheme.Blue', \r\n        'pipTheme.Pink',\r\n        'pipTheme.Amber', \r\n        'pipTheme.Orange', \r\n        'pipTheme.Green', \r\n        'pipTheme.Navy', \r\n        'pipTheme.Grey'\r\n    ])\r\n    .config(configureDefaultTheme);\r\n","/**\r\n * @file Errors string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Strings', ['pipTranslate']);\r\n\r\n    thisModule.run(($injector: angular.auto.IInjectorService) => {\r\n        let pipTranslate: any = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate == null) return;\r\n\r\n        // Set translation strings for the module\r\n        pipTranslate.translations('en', {\r\n            'ERROR_ROUTE_TITLE': 'Sorry, the page isn\\'t available',\r\n            'ERROR_ROUTE_SUBTITLE': 'The link you followed may be broken, or the page may have been removed.',\r\n            'ERROR_ROUTE_CONTINUE': 'Continue',\r\n            'ERROR_ROUTE_TRY_AGAIN': 'Try again',\r\n            'ERROR_ROUTE_GO_BACK': 'Go Back',\r\n            'ERROR_ROUTE_PAGE_TITLE': 'Wrong page',\r\n\r\n            'ERROR_UNKNOWN_TITLE': 'Oops. Something went wrong',\r\n            'ERROR_UNKNOWN_SUBTITLE': 'Unknown error occurred, but don\\'t worry we already have been notified.',\r\n            'ERROR_UNKNOWN_CLOSE': 'Close',\r\n            'ERROR_UNKNOWN_DETAILS': 'Details',\r\n\r\n            'ERROR_AVAILABLE_TITLE': 'The server is on maintenance',\r\n            'ERROR_AVAILABLE_SUBTITLE': 'Sorry for the inconvenience. This application is undergoing maintenance for ' +\r\n                                            'a short period. We\\'ll be back soon. Thank for your patience.',\r\n            'ERROR_AVAILABLE_CLOSE': 'Close',\r\n            'ERROR_AVAILABLE_TRY_AGAIN': 'Try after',\r\n\r\n            'ERROR_RESPONDING_TITLE': 'No connection to the server',\r\n            'ERROR_RESPONDING_SUBTITLE': 'Unable to connect to the server. Check your Internet connection and try again.',\r\n            'ERROR_RESPONDING_RETRY': 'Retry',\r\n\r\n            'ERROR_UNSUPPORTED_TITLE': 'This browser is not supported',\r\n            'ERROR_UNSUPPORTED_SUBTITLE': 'Our application using the latest technology. This makes the application faster ' +\r\n                                          'and easier to use. Unfortunately, your browser doesn\\'t support those ' +\r\n                                          'technologies. Download one of these great browsers and you\\'ll be on your way:',\r\n            'ERROR_UNSUPPORTED_O': 'Opera',\r\n            'ERROR_UNSUPPORTED_O_VER': 'Version 36+',\r\n            'ERROR_UNSUPPORTED_IE': 'Internet Explorer',\r\n            'ERROR_UNSUPPORTED_IE_VER': 'Version 11+',\r\n            'ERROR_UNSUPPORTED_GC': 'Google Chrome',\r\n            'ERROR_UNSUPPORTED_GC_VER': 'Version 48+',\r\n            'ERROR_UNSUPPORTED_FM': 'Mozilla Firefox',\r\n            'ERROR_UNSUPPORTED_FM_VER': 'Version 45+'\r\n\r\n        });\r\n\r\n        pipTranslate.translations('ru', {\r\n            'ERROR_ROUTE_TITLE': 'Sorry, the page isn\\'t available',\r\n            'ERROR_ROUTE_SUBTITLE': 'The link you followed may be broken, or the page may have been removed.',\r\n            'ERROR_ROUTE_CONTINUE': 'Continue',\r\n            'ERROR_ROUTE_TRY_AGAIN': 'Try again',\r\n            'ERROR_ROUTE_GO_BACK': 'Go Back',\r\n            'ERROR_ROUTE_PAGE_TITLE': 'Wrong page',\r\n\r\n            'ERROR_UNKNOWN_TITLE': 'Oops. Something went wrong',\r\n            'ERROR_UNKNOWN_SUBTITLE': 'Unknown error occurred, but don\\'t worry we already have been notified.',\r\n            'ERROR_UNKNOWN_CLOSE': 'Close',\r\n            'ERROR_UNKNOWN_DETAILS': 'Details',\r\n\r\n            'ERROR_AVAILABLE_TITLE': 'The server is on maintenance',\r\n            'ERROR_AVAILABLE_SUBTITLE': 'Sorry for the inconvenience. This application is undergoing maintenance for ' +\r\n            'a short period. We\\'ll be back soon. Thank for your patience.',\r\n            'ERROR_AVAILABLE_CLOSE': 'Close',\r\n            'ERROR_AVAILABLE_TRY_AGAIN': 'Try after',\r\n\r\n            'ERROR_RESPONDING_TITLE': 'No connection to the server',\r\n            'ERROR_RESPONDING_SUBTITLE': 'Unable to connect to server. Check your Internet connection and try again.',\r\n            'ERROR_RESPONDING_RETRY': 'Retry',\r\n\r\n            'ERROR_UNSUPPORTED_TITLE': 'This browser is not supported',\r\n            'ERROR_UNSUPPORTED_SUBTITLE': 'Our application using the latest technology. This makes the application faster ' +\r\n            'and easier to use. Unfortunately, your browser doesn\\'t support those ' +\r\n            'technologies. Download one of these great browsers and you\\'ll be on your way:',            \r\n            'ERROR_UNSUPPORTED_O': 'Opera',\r\n            'ERROR_UNSUPPORTED_O_VER': 'Version 35+',\r\n            'ERROR_UNSUPPORTED_IE': 'Internet Explorer',\r\n            'ERROR_UNSUPPORTED_IE_VER': 'Version 11+',\r\n            'ERROR_UNSUPPORTED_GC': 'Google Chrome',\r\n            'ERROR_UNSUPPORTED_GC_VER': 'Version 47+',\r\n            'ERROR_UNSUPPORTED_FM': 'Mozilla Firefox',\r\n            'ERROR_UNSUPPORTED_FM_VER': 'Version 43+'\r\n\r\n        });\r\n    });\r\n\r\n})();","/**\r\n * @file Registration of all error handling components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    angular.module('pipErrors', [\r\n        'pipErrors.Pages',\r\n        'pipErrorsService',\r\n        'pipNoConnectionPanel',\r\n        'pipClearErrors',\r\n\t    'pipFormErrors'\r\n\r\n    ]);\r\n    \r\n})();","'use strict';\r\n\r\nangular.module('pipErrorsService', []);\r\n\r\nimport './errors_service';","/* global angular */\r\n\r\nimport {IErrorsService, ErrorsConfig} from './errors_service';\r\n\r\nclass ErrorsPageRun {\r\n    constructor(\r\n        $rootScope: ng.IRootScopeService, \r\n        private $state: ng.ui.IStateService, \r\n        private $injector: angular.auto.IInjectorService, \r\n        pipErrorsService: IErrorsService) {\r\n\r\n        let errorConfig: ErrorsConfig = pipErrorsService.config;\r\n\r\n            if (errorConfig.Unsupported.Active) {\r\n                this.checkSupported();\r\n            }\r\n\r\n            if (errorConfig.MissingRoute.Active) {\r\n                $rootScope.$on('$stateNotFound',\r\n                    (\r\n                        event: angular.IAngularEvent, \r\n                        unfoundState: ng.ui.IState, \r\n                        fromState: ng.ui.IState, \r\n                        fromParams: any) => {\r\n                        event.preventDefault();\r\n\r\n                        $state.go('errors_missing_route', {\r\n                            unfoundState: unfoundState,\r\n                            fromState: {\r\n                                to: fromState ? fromState.name : '',\r\n                                fromParams: fromParams\r\n                            }\r\n                        }\r\n                        );\r\n                        $rootScope['$routing'] = false;\r\n                    }\r\n                );\r\n            }\r\n\r\n            if (errorConfig.NoConnection.Active) {\r\n                $rootScope.$on('pipNoConnectionError', \r\n                (event: angular.IAngularEvent, params) => { \r\n                    this.noConnectionError(event, params)\r\n                });\r\n            }\r\n\r\n            if (errorConfig.Unknown.Active) {\r\n                $rootScope.$on('pipUnknownError',\r\n                (event: angular.IAngularEvent, params) => { \r\n                    this.unknownError(event, params)\r\n                });\r\n            }\r\n\r\n            if (errorConfig.Maintenance.Active) {\r\n                $rootScope.$on('pipMaintenanceError',\r\n                (event: angular.IAngularEvent, params) => { \r\n                    this.maintenanceError(event, params)\r\n                });\r\n            }\r\n    }\r\n\r\n    private goToErrors(toState: string, params) {\r\n        if (toState == null)\r\n            throw new Error('Error state was not defined');\r\n\r\n        this.$state.go(toState, params);\r\n    }\r\n\r\n    private maintenanceError(event: angular.IAngularEvent, params) {\r\n        this.goToErrors('errors_maintenance', params);\r\n    }\r\n\r\n    private noConnectionError(event: angular.IAngularEvent, params) {\r\n        this.goToErrors('errors_no_connection', params);\r\n    }\r\n\r\n    private unknownError(event: angular.IAngularEvent, params) {\r\n        this.goToErrors('errors_unknown', params);\r\n    }\r\n// todo: implement this into puplic service\r\n    private checkSupported(supported?: any) {\r\n        let pipSystemInfo: any = this.$injector.has('pipSystemInfo') ? this.$injector.get('pipSystemInfo') : null;\r\n        if (!pipSystemInfo) { return; }\r\n\r\n                // todo make configured\r\n        if (!supported) {\r\n            supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n        }\r\n\r\n        let browser: string = pipSystemInfo.browserName;\r\n        let version: string = pipSystemInfo.browserVersion;\r\n            version = version.split(\".\")[0]\r\n\r\n        if (browser && supported[browser] && version >= supported[browser]) {\r\n            return;\r\n        }\r\n                // if not supported\r\n        this.$state.go('errors_unsupported');\r\n    }\r\n}\r\n\r\ninterface IAuthHttpResponseInterceptor {\r\n    responseError(rejection);\r\n}\r\n\r\nclass AuthHttpResponseInterceptor implements IAuthHttpResponseInterceptor{\r\n    constructor(\r\n        private $q: ng.IQService, \r\n        private $location: ng.ILocationService, \r\n        private $rootScope: ng.IRootScopeService) {}\r\n    public responseError(rejection) {\r\n        let toState: string = this.$rootScope['$state'] && this.$rootScope['$state'].name ? this.$rootScope['$state'].name : null,\r\n            toParams = this.$rootScope['$state'] && this.$rootScope['$state'].params ? this.$rootScope['$state'].params : null;\r\n\r\n        switch (rejection.status) {\r\n            case 503:\r\n                //available (maintenance)\r\n                this.$rootScope.$emit('pipMaintenanceError', { error: rejection });\r\n                break;\r\n            case -1:\r\n                this.$rootScope.$emit('pipNoConnectionError', { error: rejection });\r\n                break;\r\n            default:\r\n                console.error(\"errors_unknown\", rejection);\r\n                break;\r\n        }\r\n\r\n        return this.$q.reject(rejection);\r\n    }\r\n\r\n}\r\n\r\n    import {ErrorMaintenanceController} from '../maintenance/maintenance';\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    function ErrorsPageConfig(\r\n        $stateProvider: ng.ui.IStateProvider, \r\n        $httpProvider: ng.IHttpProvider\r\n    ) {\r\n        // Attach interceptor to react on unauthorized errors\r\n        $httpProvider.interceptors.push('pipAuthHttpResponseInterceptor');\r\n\r\n            // Configure module routes\r\n        $stateProvider\r\n                .state('errors_no_connection', {\r\n                    url: '/errors/no_connection',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorNoConnectionController',\r\n                     controllerAs: '$ctrl',\r\n                    templateUrl: 'no_connection/no_connection.html'\r\n                })\r\n                .state('errors_maintenance', {\r\n                    url: '/errors/maintenance',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: ErrorMaintenanceController,\r\n                    controllerAs: '$ctrl',\r\n                    templateUrl: 'maintenance/maintenance.html'\r\n                })\r\n                .state('errors_missing_route', {\r\n                    url: '/errors/missing_route',\r\n                    params: {\r\n                        unfoundState: null,\r\n                        fromState: null\r\n                    },\r\n                    controller: 'pipErrorMissingRouteController',\r\n                    controllerAs: '$ctrl',\r\n                    templateUrl: 'missing_route/missing_route.html'\r\n                })\r\n                .state('errors_unsupported', {\r\n                    url: '/errors/unsupported',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controllerAs: '$ctrl',\r\n                    controller: 'pipErrorUnsupportedController',\r\n                    templateUrl: 'unsupported/unsupported.html'\r\n                })\r\n                .state('errors_unknown', {\r\n                    url: '/errors/unknown',\r\n                    params: {\r\n                        error: null\r\n                    }, \r\n                    controllerAs: '$ctrl',\r\n                    controller: 'pipErrorUnknownController',\r\n                    templateUrl: 'unknown/unknown.html'\r\n                });\r\n    }\r\n\r\n    angular.module('pipErrors.Pages', [\r\n        'ngMaterial',\r\n        'pipErrors.Strings', 'pipErrors.NoConnection', 'pipErrors.MissingRoute', 'pipErrors.Unsupported',\r\n        'pipErrors.Unknown', 'pipErrors.Maintenance', 'pipErrors.Translate', 'pipErrors.Templates'\r\n    ])\r\n    .config(ErrorsPageConfig)\r\n    .run((\r\n        $rootScope: ng.IRootScopeService, \r\n        $state: ng.ui.IStateService, \r\n        $injector: angular.auto.IInjectorService, \r\n        pipErrorsService: IErrorsService) => {\r\n        let run = new ErrorsPageRun($rootScope, $state, $injector, pipErrorsService);\r\n    })\r\n    .service('pipAuthHttpResponseInterceptor', AuthHttpResponseInterceptor);\r\n\r\n})();\r\n\r\n","'use strict';\r\n\r\nexport class ErrorStateItem {\r\n    Active: boolean;\r\n    Name: string;\r\n    Event: string;\r\n    Title: string;\r\n    SubTitle: String;\r\n    Breadcrumb: string;\r\n    Image: string;\r\n    Params?: any;\r\n}\r\n\r\nexport class ErrorsConfig {\r\n    Maintenance: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_maintenance',\r\n        Event: 'pipMaintenanceError',\r\n        Title: 'ERROR_AVAILABLE_TITLE',\r\n        SubTitle: 'ERROR_AVAILABLE_SUBTITLE',\r\n        Breadcrumb: 'ERROR_AVAILABLE_TITLE',\r\n        Image: 'images/maintenance.svg'\r\n        \r\n    };\r\n    MissingRoute: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_missing_route',\r\n        Event: '$stateNotFound',\r\n        Title: 'ERROR_ROUTE_TITLE',\r\n        SubTitle: 'ERROR_ROUTE_SUBTITLE',\r\n        Breadcrumb: 'ERROR_ROUTE_PAGE_TITLE',\r\n        Image: 'images/invalid_route.svg'\r\n    };\r\n    NoConnection: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_no_connection',\r\n        Event: 'pipNoConnectionError',\r\n        Title: 'ERROR_RESPONDING_TITLE',\r\n        SubTitle: 'ERROR_RESPONDING_SUBTITLE',\r\n        Breadcrumb: 'ERROR_RESPONDING_TITLE',\r\n        Image: 'images/no_response.svg'\r\n    };\r\n    Unknown: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_unknown',\r\n        Event: 'pipUnknownError',\r\n        Title: 'ERROR_UNKNOWN_TITLE',\r\n        SubTitle: 'ERROR_UNKNOWN_SUBTITLE',\r\n        Breadcrumb: 'ERROR_UNKNOWN_TITLE',\r\n        Image: 'images/unknown_error.svg'\r\n    };\r\n    Unsupported: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_unsupported',\r\n        Event: '',\r\n        Title: 'ERROR_UNSUPPORTED_TITLE',\r\n        SubTitle: 'ERROR_UNSUPPORTED_SUBTITLE',\r\n        Breadcrumb: 'ERROR_UNSUPPORTED_TITLE',\r\n        Image: '',\r\n        Params: {\r\n            supported: {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, \r\n                opera: 35,\r\n                chrome: 47\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IErrorsService {\r\n    getErrorItemByKey(errorName: string): ErrorStateItem;\r\n\r\n    config: ErrorsConfig;\r\n}\r\n\r\nexport interface IErrorsProvider extends ng.IServiceProvider {\r\n    configureErrorByKey(errorName: string, errorParams: ErrorStateItem): void;\r\n    configureErrors(value: ErrorsConfig): void;\r\n    config: ErrorsConfig;\r\n}\r\n\r\nclass ErrorsService implements IErrorsService {\r\n    private _config: ErrorsConfig;\r\n\r\n    public constructor(\r\n        config: ErrorsConfig\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._config = config || new ErrorsConfig();\r\n    }\r\n\r\n    public get config(): ErrorsConfig {\r\n        console.log(this._config);\r\n        return this._config;\r\n    }\r\n\r\n    public getErrorItemByKey(errorName: string): ErrorStateItem {\r\n        if (!errorName || !this._config[errorName]) {\r\n            return null;\r\n        }\r\n\r\n        return this._config[errorName];\r\n    }\r\n\r\n}\r\n\r\nclass ErrorsProvider implements IErrorsProvider {\r\n    private _service: ErrorsService;\r\n    public config: ErrorsConfig;\r\n\r\n    constructor() {\r\n        this.config = new ErrorsConfig();\r\n    }\r\n\r\n    public configureErrorByKey(errorName: string, errorParams: ErrorStateItem): void {\r\n        if (!errorName || !errorParams) return;\r\n        if (!this.config[errorName]) return;\r\n\r\n        this.config[errorName] = <ErrorStateItem>_.defaultsDeep(errorParams, this.config[errorName]);\r\n    }\r\n\r\n    public configureErrors(value: ErrorsConfig): void {\r\n        if (!value) return;\r\n\r\n        this.config = <ErrorsConfig>_.defaultsDeep(value, this.config);\r\n    }\r\n\r\n    public $get(): ErrorsService {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null ) {\r\n            this._service = new ErrorsService(this.config);\r\n        }\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\n(() => {\r\nangular\r\n    .module('pipErrorsService')\r\n    .provider('pipErrorsService', ErrorsProvider);\r\n\r\n})();\r\n","/**\r\n * @file Special error handling for forms\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\nclass ClearErrorsLink {\r\n    private _fieldController: any;\r\n    private _formController: any;\r\n\r\n    constructor(\r\n        $scope: ng.IScope,\r\n        $element: ng.IRootElementService, \r\n        $attrs: ng.IAttributes, \r\n        $ctrls\r\n    ) {\r\n        this._fieldController = $ctrls[0],\r\n        this._formController = $ctrls[1];\r\n\r\n        $scope.$watch($attrs['ngModel'], (newValue) => {\r\n            this.clearFieldErrors();\r\n            this.clearFormErrors();\r\n        });\r\n    }\r\n\r\n    private clearFieldErrors() {\r\n        let errors = this._fieldController.$error;\r\n\r\n        for (let prop in errors) {\r\n            if (errors.hasOwnProperty(prop) && prop.substring(0, 6) == 'ERROR_') {\r\n                this._fieldController.$setValidity(prop, true);\r\n            }\r\n        }\r\n    }\r\n\r\n    private clearFormErrors() {\r\n        this._formController.$serverError = {};\r\n    }\r\n}\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    function clearErrors () {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['ngModel', '^?form'],\r\n            link: ClearErrorsLink\r\n        };\r\n    }\r\n\r\n    var thisModule = angular.module('pipClearErrors', []);\r\n\r\n    thisModule.directive('pipClearErrors', clearErrors);\r\n\r\n})();","/**\r\n * @file Form error utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n *\r\n */\r\n \r\n /* global _, angular */\r\n\r\n class FormErrors {\r\n\r\n    constructor(private $rootScope: ng.IRootScopeService) {}\r\n\r\n    public errorsWithHint(field) {\r\n        if (field == null) return;\r\n\t\t\t\r\n        return _.isEmpty(field.$error) ? { hint: true } : field.$error;\r\n    };\r\n\r\n    public touchedErrorsWithHint(form: ng.IFormController, field) {\r\n        if (form == null) return;\r\n        if (field == null) return;\r\n\r\n        if (form.$submitted && (field.$touched || form.$dirty) || !form.$submitted && (field.$touched || field.$dirty)) {\r\n            let result = _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n            return result;\r\n        }\r\n        return { hint: true };\r\n    }\r\n\r\n    public resetFormErrors(form: ng.IFormController, errors?: boolean): void {\r\n        form.$setPristine();\r\n        form.$setUntouched();\r\n\r\n        if (errors) {\r\n            form.$setDirty();\r\n            form.$setSubmitted();\r\n        }\r\n\r\n        form['$serverError'] = {};\r\n    }\r\n\r\n    public resetFieldsErrors(form: ng.IFormController, field) {\r\n        if (!form) return;\r\n        if (field && form[field] && form[field].$error) {\r\n            form[field].$error = {};\r\n        } else {\r\n            for (let prop in form) {\r\n                if (form[prop] && form[prop].$error) {\r\n                    form[prop].$error = {};\r\n                }\r\n            }\r\n            if (form && form.$error) { \r\n                form.$error = {}; \r\n            }\r\n        }\r\n    }\r\n\r\n    public setFormError(form: ng.IFormController, error, errorFieldMap) {\r\n            if (error == null) return;\r\n            // Prepare form server errors\r\n            form['$serverError'] = form['$serverError'] || {};\r\n            // Prepare error code\r\n            let code: string = error.code || (error.data || {}).code || null;\r\n            if (!code && error.status) code = error.status;\r\n\r\n            if (code) {\r\n                let errorName = 'ERROR_' + code,\r\n                    field = errorFieldMap ? errorFieldMap[code] : null;\r\n                // Set server error to fields\r\n                if (field && form[field] && form[field].$setValidity) {\r\n                    form[field].$setValidity(errorName, false);\r\n                    return;\r\n                }\r\n\r\n                // Set server error to form\r\n                if (field == 'form') {\r\n                    form['$serverError'][errorName] = true;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // if undefined error for this form or code === undefined/null, go to unhandled error page\r\n            if (error.data && error.data.message) {\r\n                form['$serverError']['ERROR_UNKNOWN'] = error.data.message;\r\n                this.goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            // Set as undefined error\r\n            if (error.message) {\r\n                form['$serverError']['ERROR_UNKNOWN'] = error.message;\r\n                this.goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            if (error.name) {\r\n                form['$serverError']['ERROR_UNKNOWN'] = error.name;\r\n                this.goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            \r\n            form['$serverError']['ERROR_UNKNOWN'] = error;\r\n            this.goToUnhandledErrorPage(error);\r\n        }\r\n\r\n        private goToUnhandledErrorPage(error) {\r\n            this.$rootScope.$emit('pipUnhandledInternalError', {\r\n                error: error\r\n            });\r\n        };\r\n }\r\n \r\n(() => {\r\n    'use strict';\r\n\r\n    angular.module('pipFormErrors', [])\r\n    .service('pipFormErrors', FormErrors);\r\n\r\n})();","/**\r\n * @file Maintenance error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\nimport {IErrorsService, ErrorsConfig, ErrorStateItem} from '../errors_pages/errors_service';\r\n\r\nexport class PipMaintenanceError {\r\n    config?: PipMaintenanceErrorConfig;\r\n}\r\nexport class PipMaintenanceErrorConfig {\r\n    params?: PipMaintenanceErrorParams;\r\n}\r\nexport class PipMaintenanceErrorParams {\r\n    interval?: number = 0;\r\n}\r\n\r\nexport class ErrorMaintenanceController {\r\n    private _errorKey: string = 'Maintenance';\r\n    private pipNavService;\r\n\r\n    public errorConfig: ErrorStateItem;\r\n    public isCordova: boolean = false;\r\n    public media;\r\n    public error: PipMaintenanceError;\r\n    public timeoutInterval: number;\r\n\r\n    constructor(\r\n        $scope: ng.IScope,\r\n        $state: ng.ui.IStateService, \r\n        $rootScope: ng.IRootScopeService,\r\n        $mdMedia: angular.material.IMedia, \r\n        $injector: angular.auto.IInjectorService, \r\n        pipErrorsService: IErrorsService) {\r\n\r\n        let pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this.errorConfig = pipErrorsService.getErrorItemByKey(this._errorKey);\r\n        this.pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n\r\n        this.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        $rootScope['$routing'] = false;\r\n        this.appHeader();\r\n\r\n        this.error = $state && $state.params && $state.params['error'] ?  $state.params['error'] : {};\r\n        this.timeoutInterval = this.error && this.error.config &&\r\n            this.error.config.params && this.error.config.params.interval ? this.error.config.params.interval : 0;\r\n\r\n    }\r\n\r\n    private appHeader(): void {\r\n        if (!this.pipNavService) return;\r\n\r\n        this.pipNavService.appbar.addShadow();\r\n        this.pipNavService.icon.showMenu();\r\n        this.pipNavService.breadcrumb.text = this.errorConfig.Breadcrumb;\r\n        this.pipNavService.actions.hide();\r\n    }\r\n}\r\n\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    angular.module('pipErrors.Maintenance', []).controller('PipErrorMaintenanceController', ErrorMaintenanceController);\r\n\r\n})();\r\n","/**\r\n * @file Missing route error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\nimport {IErrorsService, ErrorsConfig, ErrorStateItem} from '../errors_pages/errors_service';\r\n\r\nclass PipMissingRouteErrorState {\r\n   to: string;\r\n   toParams: any;\r\n   fromParams: any;\r\n}\r\n\r\nclass ErrorMissingRouteController {\r\n    private _errorKey: string = 'MissingRoute';\r\n    private pipNavService;\r\n\r\n    public errorConfig: ErrorStateItem;\r\n    public isCordova: boolean = false;\r\n    public media;\r\n    public fromState: PipMissingRouteErrorState;\r\n    public unfoundState: PipMissingRouteErrorState;\r\n    public url: string;\r\n    public urlBack: string;\r\n\r\n    constructor(\r\n        $scope: ng.IScope,\r\n        $state: ng.ui.IStateService, \r\n        $rootScope: ng.IRootScopeService,\r\n        $mdMedia: angular.material.IMedia, \r\n        $injector: angular.auto.IInjectorService, \r\n        pipErrorsService: IErrorsService) {\r\n\r\n        let pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this.errorConfig = pipErrorsService.getErrorItemByKey(this._errorKey);\r\n        this.pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n\r\n        this.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        $rootScope['$routing'] = false;\r\n        this.appHeader();\r\n\r\n        this.fromState = $state && $state.params && $state.params['fromState'] ?  $state.params['fromState'] : {};\r\n        this.unfoundState = $state && $state.params ?  $state.params['unfoundState'] : {};\r\n        this.url = this.unfoundState && this.unfoundState.to ? $state.href(this.unfoundState.to, this.unfoundState.toParams, {absolute: true}) : '';\r\n        this.urlBack = this.fromState && this.fromState.to ? $state.href(this.fromState.to, this.fromState.fromParams, {absolute: true}) : '';\r\n\r\n    }\r\n\r\n    private appHeader(): void {\r\n        if (!this.pipNavService) return;\r\n\r\n        this.pipNavService.appbar.addShadow();\r\n        this.pipNavService.icon.showMenu();\r\n        this.pipNavService.breadcrumb.text = this.errorConfig.Breadcrumb;\r\n        this.pipNavService.actions.hide();\r\n    }\r\n\r\n    public  onContinue() {\r\n            // Todo: Go to default state '/'\r\n            //pipAuthState.goToAuthorized();\r\n    };\r\n}\r\n\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    angular.module('pipErrors.MissingRoute', [])\r\n        .controller('pipErrorMissingRouteController', ErrorMissingRouteController);\r\n\r\n})();\r\n","/**\r\n * @file No connection error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\nimport {IErrorsService, ErrorsConfig, ErrorStateItem} from '../errors_pages/errors_service';\r\n\r\nexport class PipNoConnectionError {\r\n    config?: any;\r\n}\r\n\r\nexport class ErrorNoConnectionController {\r\n    private _errorKey: string = 'NoConnection';\r\n    private pipNavService;\r\n\r\n    public errorConfig: ErrorStateItem;\r\n    public isCordova: boolean = false;\r\n    public media;\r\n    public error: PipNoConnectionError;\r\n\r\n    constructor(\r\n        private $window: ng.IWindowService,\r\n        $scope: ng.IScope,\r\n        $state: ng.ui.IStateService, \r\n        $rootScope: ng.IRootScopeService,\r\n        $mdMedia: angular.material.IMedia, \r\n        $injector: angular.auto.IInjectorService, \r\n        pipErrorsService: IErrorsService) {\r\n\r\n        let pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this.errorConfig = pipErrorsService.getErrorItemByKey(this._errorKey);\r\n        this.pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n\r\n        this.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        $rootScope['$routing'] = false;\r\n        this.appHeader();\r\n\r\n        this.error = $state && $state.params && $state.params['error'] ?  $state.params['error'] : {};\r\n\r\n    }\r\n\r\n    private appHeader(): void {\r\n        if (!this.pipNavService) return;\r\n\r\n        this.pipNavService.appbar.addShadow();\r\n        this.pipNavService.icon.showMenu();\r\n        this.pipNavService.breadcrumb.text = this.errorConfig.Breadcrumb;\r\n        this.pipNavService.actions.hide();\r\n    }\r\n\r\n    public onRetry() {\r\n        this.$window.history.back();\r\n    }\r\n}\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.NoConnection', []);\r\n\r\n    thisModule.controller('pipErrorNoConnectionController',  ErrorNoConnectionController);\r\n\r\n\r\n})();\r\n","/**\r\n * @file No Connection Error panel\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\nclass NoConnectionPanelController {\r\n    private _retry: Function;\r\n    constructor($scope: ng.IScope){\r\n        this._retry = $scope['retry'];\r\n    }\r\n\r\n    public onRetry() {\r\n        if (this._retry && angular.isFunction(this._retry)) this._retry();\r\n    }\r\n}\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipNoConnectionPanel\", ['pipErrors.Translate']);\r\n\r\n    thisModule.directive('pipNoConnectionPanel',\r\n        () => {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    error: '=pipError',\r\n                    retry: '=pipRetry'\r\n                },\r\n                templateUrl: 'no_connection_panel/no_connection_panel.html',\r\n                controller: 'pipNoConnectionPanelController',\r\n                controllerAs: '$ctrl'\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipNoConnectionPanelController', NoConnectionPanelController);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Unknown error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\nimport {IErrorsService, ErrorsConfig, ErrorStateItem} from '../errors_pages/errors_service';\r\n\r\nexport class PipUnknownErrorDetails {\r\n    code: number;\r\n    message: string;\r\n    status: string;\r\n    server_stacktrace: Function;\r\n    client_stacktrace: Function;\r\n}\r\n\r\nexport class ErrorUnknownController {\r\n    private _errorKey: string = 'Unknown';\r\n    private pipNavService;\r\n\r\n    public errorConfig: ErrorStateItem;\r\n    public isCordova: boolean = false;\r\n    public media;\r\n    public error: PipUnknownErrorDetails;\r\n    public error_details: PipUnknownErrorDetails;\r\n    public showError: boolean;\r\n\r\n    constructor(\r\n        $scope: ng.IScope,\r\n        $state: ng.ui.IStateService, \r\n        $rootScope: ng.IRootScopeService,\r\n        $mdMedia: angular.material.IMedia, \r\n        $injector: angular.auto.IInjectorService, \r\n        pipErrorsService: IErrorsService) {\r\n\r\n        let pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this.errorConfig = pipErrorsService.getErrorItemByKey(this._errorKey);\r\n        this.pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n\r\n        this.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        $rootScope['$routing'] = false;\r\n        this.showError = $scope['showError'];\r\n        this.appHeader();\r\n\r\n        this.error = $state && $state.params && $state.params['error'] ?  $state.params['error'] : {};\r\n        \r\n        this.parseError();\r\n\r\n    }\r\n\r\n    private appHeader(): void {\r\n        if (!this.pipNavService) return;\r\n\r\n        this.pipNavService.appbar.addShadow();\r\n        this.pipNavService.icon.showMenu();\r\n        this.pipNavService.breadcrumb.text = this.errorConfig.Breadcrumb;\r\n        this.pipNavService.actions.hide();\r\n    }\r\n\r\n    private parseError() {\r\n        this.error_details = new PipUnknownErrorDetails();\r\n        this.error_details.code = this.error.code;\r\n        this.error_details.message = this.error.message;\r\n        this.error_details.status = this.error.status;\r\n\r\n        this.error_details.server_stacktrace = () => {};\r\n\r\n        this.error_details.client_stacktrace = () => {};\r\n    }\r\n\r\n    public onDetails() {\r\n        this.showError = true;\r\n    }\r\n\r\n}\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Unknown', []);\r\n\r\n    thisModule.controller('pipErrorUnknownController', ErrorUnknownController);\r\n\r\n})();\r\n","/**\r\n * @file Unsupported error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n\r\nimport {IErrorsService, ErrorsConfig, ErrorStateItem} from '../errors_pages/errors_service';\r\n\r\nexport class PipUnsupportedError {\r\n    config?: any;\r\n}\r\n\r\nexport class ErrorUnsupportedController {\r\n    private _errorKey: string = 'Unsupported';\r\n    private pipNavService;\r\n\r\n    public errorConfig: ErrorStateItem;\r\n    public isCordova: boolean = false;\r\n    public media;\r\n    public error: PipUnsupportedError;\r\n\r\n    constructor(\r\n        $scope: ng.IScope,\r\n        $state: ng.ui.IStateService, \r\n        $rootScope: ng.IRootScopeService,\r\n        $mdMedia: angular.material.IMedia, \r\n        $injector: angular.auto.IInjectorService, \r\n        pipErrorsService: IErrorsService) {\r\n\r\n        let pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this.errorConfig = pipErrorsService.getErrorItemByKey(this._errorKey);\r\n        this.pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n\r\n        this.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        $rootScope['$routing'] = false;\r\n        this.appHeader();\r\n\r\n        this.error = $state && $state.params && $state.params['error'] ?  $state.params['error'] : {};\r\n\r\n    }\r\n\r\n    private appHeader(): void {\r\n        if (!this.pipNavService) return;\r\n\r\n        this.pipNavService.appbar.addShadow();\r\n        this.pipNavService.icon.showMenu();\r\n        this.pipNavService.breadcrumb.text = this.errorConfig.Breadcrumb;\r\n        this.pipNavService.actions.hide();\r\n    }\r\n}\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Unsupported', []);\r\n\r\n    thisModule.controller('pipErrorUnsupportedController', ErrorUnsupportedController);\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('maintenance/maintenance.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><img src=\"{{$ctrl.errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::\\'ERROR_AVAILABLE_TITLE\\' | translate}}</div><div class=\"pip-error-subtext\">{{::\\'ERROR_AVAILABLE_SUBTITLE\\' | translate}}</div><div class=\"pip-error-subtext\" ng-if=\"$ctrl.timeoutInterval\">{{::\\'ERROR_AVAILABLE_TRY_AGAIN\\' | translate}} {{timeoutInterval}} sec.</div><div class=\"pip-error-actions h48 layout-column layout-align-center-center\" ng-if=\"$ctrl.isCordova\"><md-button class=\"md-accent\" ng-click=\"$ctrl.onClose($event)\" aria-label=\"CLOSE\">{{::\\'ERROR_AVAILABLE_CLOSE\\' | translate}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('no_connection/no_connection.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><img src=\"{{$ctrl.errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::$ctrl.errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::$ctrl.errorConfig.SubTitle | translate}}</div><div class=\"pip-error-actions h48 layout-column layout-align-center-center\"><md-button aria-label=\"RETRY\" class=\"md-accent\" ng-click=\"$ctrl.onRetry($event)\">{{::\\'ERROR_RESPONDING_RETRY\\' | translate}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('no_connection_panel/no_connection_panel.html',\n    '<div class=\"pip-error-page pip-error layout-column layout-align-center-center flex\"><img src=\"{{$ctrl.errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::$ctrl.errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::$ctrl.errorConfig.SubTitle | translate}}</div><div class=\"pip-error-actions h48 layout-column layout-align-center-center\"><md-button aria-label=\"RETRY\" class=\"md-accent\" ng-click=\"$ctrl.onRetry($event)\">{{::\\'ERROR_RESPONDING_RETRY\\' | translate}}</md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('missing_route/missing_route.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><img src=\"{{$ctrl.errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::$ctrl.errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::$ctrl.errorConfig.SubTitle | translate}}</div><div class=\"pip-error-actions h48 layout-column layout-align-center-center\"><md-button aria-label=\"CONTINUE\" class=\"md-accent\" ng-click=\"$ctrl.onContinue($event)\">{{::\\'ERROR_ROUTE_CONTINUE\\' | translate}}</md-button></div><div class=\"h48\" ng-if=\"url\"><a ng-href=\"{{$ctrl.url}}\">{{::\\'ERROR_ROUTE_TRY_AGAIN\\' | translate }}: {{$ctrl.url}}</a></div><div class=\"h48\" ng-if=\"urlBack\"><a ng-href=\"{{$ctrl.urlBack}}\">{{::\\'ERROR_ROUTE_GO_BACK\\' | translate }}: {{$ctrl.urlBack}}</a></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('unknown/unknown.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><img src=\"{{$ctrl.errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::$ctrl.errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::$ctrl.errorConfig.SubTitle | translate}}</div><div class=\"pip-error-subtext\" ng-if=\"$ctrl.showError && $ctrl.error_details && $ctrl.error_details.message\"><div ng-if=\"$ctrl.error_details.code\">Code: {{$ctrl.error_details.code}}</div><div ng-if=\"$ctrl.error_details.message\">Description: {{$ctrl.error_details.message}}</div><div ng-if=\"$ctrl.error_details.status\">HTTP status: {{$ctrl.error_details.status}}</div><div ng-if=\"$ctrl.error_details.server_stacktrace\">Server stacktrace: {{$ctrl.error_details.server_stacktrace}}</div><div ng-if=\"$ctrl.error_details.client_stacktrace\">Client stacktrace stacktrace: {{$ctrl.error_details.client_stacktrace}}</div></div><div class=\"pip-error-actions layout-column layout-align-center-center\"><div class=\"h48\" ng-if=\"$ctrl.isCordova\"><md-button aria-label=\"CLOSE\" class=\"md-accent\" ng-click=\"$ctrl.onClose($event)\">{{::\\'ERROR_UNKNOWN_CLOSE\\' | translate}}</md-button></div><div class=\"h48\" ng-if=\"$ctrl.error_details && $ctrl.error_details.status\"><md-button aria-label=\"DETAILS\" class=\"md-accent\" ng-click=\"$ctrl.onDetails($event)\">{{::\\'ERROR_UNKNOWN_DETAILS\\' | translate}}</md-button></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('unsupported/unsupported.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><div class=\"pip-error-text\">{{::$ctrl.errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::$ctrl.errorConfig.SubTitle | translate}}</div><div class=\"pip-error-details layout-row layout-align-center-center\" ng-if=\"$ctrl.media(\\'gt-xs\\')\"><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/ie.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx\">{{::\\'ERROR_UNSUPPORTED_IE\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_IE_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/fm.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.mozilla.org/ru/firefox/new/\">{{::\\'ERROR_UNSUPPORTED_FM\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_FM_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/gc.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.google.com/chrome/browser/desktop/index.html?platform=win64#\">{{::\\'ERROR_UNSUPPORTED_GC\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_GC_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/o.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"http://www.opera.com/ru/download\">{{::\\'ERROR_UNSUPPORTED_O\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_O_VER\\' | translate}}</p></div></div></div><div class=\"pip-error-details\" ng-if=\"$ctrl.media(\\'xs\\')\"><div class=\"layout-row layout-align-center-center\"><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/ie.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx\">{{::\\'ERROR_UNSUPPORTED_IE\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_IE_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/fm.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.mozilla.org/ru/firefox/new/\">{{::\\'ERROR_UNSUPPORTED_FM\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_FM_VER\\' | translate}}</p></div></div></div><div class=\"tm16 layout-row layout-align-center-center\"><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/gc.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.google.com/chrome/browser/desktop/index.html?platform=win64#\">{{::\\'ERROR_UNSUPPORTED_GC\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_GC_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/o.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"http://www.opera.com/ru/download\">{{::\\'ERROR_UNSUPPORTED_O\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_O_VER\\' | translate}}</p></div></div></div></div></div></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-errors-html.min.js.map\n","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipBarCharts\r\n     *\r\n     * @description\r\n     * Bar chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipBarCharts', [])\r\n        .directive('pipBarChart', pipBarChart);\r\n\r\n    function pipBarChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                xTickFormat: '=pipXTickFormat',\r\n                yTickFormat: '=pipYTickFormat',\r\n                interactiveLegend: '=pipInterLegend'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'barChart',\r\n            templateUrl: 'bar/bar_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                let vm = this;\r\n                let chart = null;\r\n                let chartElem = null;\r\n                let colors = _.map($mdColorPalette, function (palette, color) {\r\n                    return color;\r\n                });\r\n                colors = _.filter(colors, function(color){\r\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\r\n                });                \r\n                let height = 270;\r\n\r\n                vm.data = prepareData(vm.series) || [];\r\n                vm.legend = _.clone(vm.series);\r\n                \r\n                if ((vm.series || []).length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                $scope.$watch('barChart.series', function (updatedSeries) {\r\n                    vm.data = prepareData(updatedSeries);\r\n                    vm.legend = _.clone(vm.series);\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                        configBarWidthAndLabel();\r\n                        drawEmptyState();\r\n                    }\r\n                });\r\n\r\n                $scope.$watch('barChart.legend', function(updatedLegend) {\r\n                    vm.data = prepareData(updatedLegend);\r\n                    vm.legend = updatedLegend;\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                        configBarWidthAndLabel();\r\n                        drawEmptyState();\r\n                    }\r\n                }, true);\r\n\r\n                function prepareData(data) {\r\n                    let result = [];\r\n                    _.each(data, (seria) => {\r\n                        if (!seria.disabled && seria.values) result.push(seria);\r\n                    });\r\n\r\n                    return _.cloneDeep(result);\r\n                }\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(function () {\r\n                    chart = nv.models.discreteBarChart()\r\n                        .margin({top: 10, right: 0, bottom: 10, left: 50})\r\n                        .x(function (d) { return d.label || d.key || d.x; })\r\n                        .y(function (d) { return d.value; })\r\n                        .showValues(true)\r\n                        .staggerLabels(true) \r\n                        .showXAxis(true)\r\n                        .showYAxis(true)\r\n                        .valueFormat(<any>d3.format('d'))\r\n                        .duration(0)\r\n                        .height(height)\r\n                        .color(function(d) {\r\n                            return vm.data[d.series].color || materialColorToRgba(colors[d.series]);\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('There is no data right now...');\r\n\r\n                    chart.yAxis\r\n                        .tickFormat(function (d) {\r\n                            return vm.yTickFormat ? vm.yTickFormat(d) : d;\r\n                        });\r\n\r\n                    chart.xAxis\r\n                        .tickFormat(function (d) {\r\n                            return vm.xTickFormat ? vm.xTickFormat(d) : d;\r\n                        });\r\n\r\n                    chartElem = d3.select($element.get(0))\r\n                        .select('.bar-chart svg')\r\n                        .datum(vm.data)\r\n                        .style('height', '285px')\r\n                        .call(chart);\r\n\r\n                    nv.utils.windowResize(() => {\r\n                        chart.update();\r\n                         configBarWidthAndLabel(0);\r\n                         drawEmptyState();\r\n                    });\r\n\r\n                    return chart;\r\n                }, function () {\r\n\r\n                    $timeout(configBarWidthAndLabel, 0);\r\n                    drawEmptyState();\r\n                });\r\n\r\n                function drawEmptyState() {\r\n                    if ($element.find('.nv-noData').length === 0) {\r\n                        d3.select($element.find('.empty-state')[0]).remove();\r\n                    } else {\r\n                        let g = chartElem.append('g').classed('empty-state', true),\r\n                            width = $element.find('.nvd3-svg').innerWidth(),\r\n                            margin = width * 0.1;\r\n\r\n                        g.append('g')\r\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                            .append('rect')\r\n                            .attr('height', height - 10)\r\n                            .attr('width', 38);\r\n\r\n                        g.append('g')\r\n                            .attr('transform', 'translate(42, 60)')\r\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                            .append('rect')\r\n                            .attr('height', 200)\r\n                            .attr('width', 38);\r\n\r\n                        g.append('g')\r\n                            .attr('transform', 'translate(84, 160)')\r\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                            .append('rect')\r\n                            .attr('height', 100)\r\n                            .attr('width', 38);\r\n\r\n                        g.attr('transform', 'translate(' + (50 + margin) + ', 0), ' + 'scale(' + ((width - 2*margin) / 126) + ', 1)' );\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Aligns value label according to parent container size.\r\n                 * @return {void}\r\n                 */\r\n                function configBarWidthAndLabel(timeout: number = 1000) {\r\n                    var labels = $element.find('.nv-bar text'),\r\n                        chartBars = $element.find('.nv-bar'),\r\n                        parentHeight = (<any>$element.find('.nvd3-svg')[0]).getBBox().height;\r\n\r\n                    d3.select($element.find('.bar-chart')[0]).classed('visible', true);\r\n\r\n                    chartBars.each(function (index, item) {\r\n                        var barHeight = Number(d3.select(<any>item).select('rect').attr('height')),\r\n                            barWidth = Number(d3.select(<any>item).select('rect').attr('width')),\r\n                            element = d3.select(<any>item),\r\n                            x = d3.transform(element.attr('transform')).translate[0],\r\n                            y = d3.transform(element.attr('transform')).translate[1];\r\n\r\n                        element\r\n                            .attr('transform', 'translate(' + Number(x + index * (barWidth + 15)) + ', ' + (height - 20) + ')')\r\n                            .select('rect').attr('height', 0);\r\n\r\n                        element\r\n                            .transition()\r\n                            .duration(timeout)\r\n                            .attr('transform', 'translate(' + Number(x + index * (barWidth + 15)) + ', ' + y + ')')\r\n                            .select('rect').attr('height', barHeight);\r\n\r\n                        d3.select(labels[index])\r\n                            .attr('dy', barHeight / 2 + 10)\r\n                            .attr('x', barWidth / 2);\r\n                    });\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function getMaterialColor(index) {\r\n                    if (!colors || colors.length < 1) return null;\r\n\r\n                    if (index >= colors.length) {\r\n                        index = 0;\r\n                    }\r\n\r\n                    return materialColorToRgba(colors[index]);\r\n                } \r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    if (!vm.data) return;\r\n\r\n                    vm.data.forEach(function (item, index) {\r\n                        if (item.values[0]) {\r\n                            item.values[0].color = item.values[0].color || getMaterialColor(index);\r\n                            item.color = item.values[0].color;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","/**\r\n * @file Registration of chart WebUI controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipCharts', [\r\n        'pipBarCharts',\r\n        'pipLineCharts',\r\n        'pipPieCharts',\r\n        'pipChartLegends',\r\n        'pipCharts.Templates'\r\n    ]);\r\n\r\n})();\r\n\r\n","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipLegends\r\n     *\r\n     * @description\r\n     * Legend of charts\r\n     */\r\n    angular.module('pipChartLegends', [])\r\n        .directive('pipChartLegend', pipChartLegend);\r\n\r\n    function pipChartLegend() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                interactive: '=pipInteractive'\r\n            },\r\n            templateUrl: 'legend/interactive_legend.html',\r\n            controller: function ($element, $scope, $timeout, $mdColorPalette) {\r\n                var colors = _.map($mdColorPalette, function (palette) {\r\n                    return palette[500].hex;\r\n                });\r\n                colors = _.filter(colors, function(color){\r\n                    return color !== undefined && color !== null;\r\n                });  \r\n                function colorCheckboxes() {\r\n                    var checkboxContainers = $($element).find('md-checkbox .md-container');\r\n\r\n                    checkboxContainers.each(function (index, item) {\r\n                        if (index >= $scope.series.length) {\r\n                            return \r\n                        }\r\n                        $(item)\r\n                            .css('color', $scope.series[index].color || colors[index])\r\n                            .find('.md-icon')\r\n                            .css('background-color', $scope.series[index].color || colors[index]);\r\n                    });\r\n                }\r\n\r\n                function animate() {\r\n                    var legendTitles = $($element).find('.chart-legend-item');\r\n\r\n                    legendTitles.each(function (index, item) {\r\n                        $timeout(function () {\r\n                            $(item).addClass('visible');\r\n                        }, 200 * index);\r\n                    });\r\n                }\r\n                \r\n                function prepareSeries() {\r\n                    if (!$scope.series) return;\r\n\r\n                    $scope.series.forEach(function (item, index) {\r\n                        item.color = item.color || (item.values && item.values[0] && item.values[0].color ? item.values[0].color : colors[index]);\r\n                        item.disabled = item.disabled || false;\r\n                    });   \r\n                }\r\n\r\n                $scope.$watch('series', function () {\r\n                    $timeout(function () {\r\n                        animate();\r\n                        colorCheckboxes();\r\n                    }, 0);\r\n                    prepareSeries();\r\n                }, true);\r\n\r\n                $scope.$watch('interactive', function (newValue, oldValue) {\r\n                    if (newValue == true && newValue != oldValue) {\r\n                        $timeout(colorCheckboxes, 0);\r\n                    }\r\n                });\r\n\r\n                $timeout(function () {\r\n                    animate();\r\n                    colorCheckboxes();\r\n                }, 0);\r\n                prepareSeries();\r\n            }\r\n        };\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipLineCharts\r\n     *\r\n     * @description\r\n     * Line chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipLineCharts', [])\r\n        .directive('pipLineChart', pipLineChart);\r\n\r\n    function pipLineChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                showYAxis: '=pipYAxis',\r\n                showXAxis: '=pipXAxis',\r\n                xFormat: '=pipXFormat',\r\n                xTickFormat: '=pipXTickFormat',\r\n                yTickFormat: '=pipYTickFormat',\r\n                xTickValues: '=pipXTickValues',\r\n                dynamic: '=pipDynamic',\r\n                fixedHeight: '@pipDiagramHeight',\r\n                dynamicHeight: '@pipDynamicHeight',\r\n                minHeight: '@pipMinHeight',\r\n                maxHeight: '@pipMaxHeight',\r\n                interactiveLegend: '=pipInterLegend'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'lineChart',\r\n            templateUrl: 'line/line_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                var vm        = this;\r\n                var chart     = null;\r\n                var chartElem = null;\r\n                var setZoom = null;\r\n                var updateZoomOptions = null;\r\n                var fixedHeight = vm.fixedHeight || 270;\r\n                var dynamicHeight = vm.dynamicHeight || false;\r\n                var minHeight = vm.minHeight || fixedHeight;\r\n                var maxHeight = vm.maxHeight || fixedHeight;\r\n\r\n                var filteredColor = _.filter($mdColorPalette, function(palette, color){\r\n                    return _.isObject(color) && _.isObject(color[500] && _.isArray(color[500].value));\r\n                });\r\n                var colors = _.map(filteredColor, function (palette, color) {\r\n                    return color;\r\n                });\r\n                colors = _.filter(colors, function(color){\r\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\r\n                });\r\n                vm.data = prepareData(vm.series) || [];\r\n                vm.legend = _.clone(vm.series);\r\n                vm.sourceEvents = [];\r\n                \r\n                vm.isVisibleX = function () {\r\n                    return vm.showXAxis == undefined ? true : vm.showXAxis; \r\n                };\r\n\r\n                vm.isVisibleY = function () {\r\n                    return vm.showYAxis == undefined ? true : vm.showYAxis;\r\n                };\r\n\r\n                vm.zoomIn = function () {\r\n                    if (setZoom) {\r\n                        setZoom('in');\r\n                    }\r\n                };\r\n\r\n                vm.zoomOut = function () {\r\n                    if (setZoom) {\r\n                        setZoom('out');\r\n                    }\r\n                };\r\n                \r\n                if (vm.series && vm.series.length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                // Sets colors of items\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                $scope.$watch('lineChart.series', function (updatedSeries) {\r\n                    vm.data = prepareData(updatedSeries);\r\n                    vm.legend = _.clone(vm.series);\r\n\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                         chart.xAxis\r\n                            .tickValues(vm.xTickValues && _.isArray(vm.xTickValues) && vm.xTickValues.length > 2 ? \r\n                                d3.range(vm.xTickValues[0], vm.xTickValues[1], vm.xTickValues[2]) : null);\r\n\r\n                        chartElem.datum(vm.data || []).call(chart);\r\n                        drawEmptyState();\r\n                        \r\n                        if (updateZoomOptions) updateZoomOptions(vm.data);\r\n                    }\r\n                }, true);\r\n\r\n                $scope.$watch('lineChart.legend', function(updatedLegend) {\r\n                    vm.data = prepareData(updatedLegend);\r\n                    vm.legend = updatedLegend;\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data || []).call(chart);\r\n                        drawEmptyState();\r\n\r\n                        if (updateZoomOptions) updateZoomOptions(vm.data);\r\n                    }\r\n                }, true);\r\n\r\n                $scope.$on('$destroy', () => {\r\n                   setTimeout(()=> {d3.selectAll('.nvtooltip').style('opacity', 0); }, 800)\r\n                });\r\n\r\n                function prepareData(data) {\r\n                    let result = [];\r\n                    _.each(data, (seria) => {\r\n                        if (!seria.disabled && seria.values) result.push(seria);\r\n                    });\r\n\r\n                    return _.cloneDeep(result);\r\n                }\r\n\r\n                var getHeight = () => {\r\n                    if (dynamicHeight) {\r\n                        const heigth = Math.min(Math.max(minHeight, $element.parent().innerHeight()), maxHeight);\r\n                        return heigth;\r\n                    } else {\r\n                        return fixedHeight;\r\n                    }\r\n                };\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(() => {\r\n                    chart = nv.models.lineChart()\r\n                        .margin({ top: 20, right: 20, bottom: 30, left: 30 })\r\n                        .x(function (d) {\r\n                            return (d !== undefined && d.x !== undefined) ? (vm.xFormat ? vm.xFormat(d.x) : d.x) : d;\r\n                        })\r\n                        .y(function (d) {\r\n                            return (d !== undefined && d.value !== undefined) ? d.value : d;\r\n                        })\r\n                        .height(getHeight() - 50)\r\n                        .useInteractiveGuideline(true)\r\n                        .showXAxis(true)\r\n                        .showYAxis(true)\r\n                        .showLegend(false)\r\n                        .color(function(d) {\r\n                            return d.color || (<any>d3.scale).paletteColors().range();\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('There is no data right now...');\r\n\r\n                    chart.yAxis\r\n                        .tickFormat(function (d) {\r\n                            return vm.yTickFormat ? vm.yTickFormat(d) : d;\r\n                        });\r\n\r\n                    chart.xAxis\r\n                        .tickFormat(function (d) {\r\n                            return vm.xTickFormat ? vm.xTickFormat(d) : d;\r\n                        })\r\n                        .tickValues(vm.xTickValues && _.isArray(vm.xTickValues) && vm.xTickValues.length > 2 ? \r\n                                d3.range(vm.xTickValues[0], vm.xTickValues[1], vm.xTickValues[2]) : null);\r\n\r\n                    chartElem = d3.select($element.get(0)).select('.line-chart svg');\r\n                    chartElem.datum(vm.data || []).style('height', (getHeight() - 50) + 'px').call(chart);\r\n                    // Handle touches for correcting tooltip position\r\n                    $('.line-chart svg').on('touchstart touchmove', (e) => { \r\n                        setTimeout(() => {\r\n                            let tooltip = $('.nvtooltip'),\r\n                                tooltipW = tooltip.innerWidth(),\r\n                                bodyWidth = $('body').innerWidth(),\r\n                                x = e.originalEvent['touches'][0]['pageX'],\r\n                                y = e.originalEvent['touches'][0]['pageY'];\r\n\r\n                            tooltip.css('transform', 'translate(' \r\n                                + (x + tooltipW >= bodyWidth ? (x - tooltipW) : x) + ',' \r\n                                + y + ')');\r\n                            tooltip.css('left', 0); \r\n                            tooltip.css('top', 0);\r\n                        }); \r\n                    });\r\n\r\n                    $('.line-chart svg').on('touchstart touchend', (e) => { \r\n                        let removeTooltip = () => {\r\n                            let tooltip = $('.nvtooltip');\r\n                            tooltip.css('opacity', 0);\r\n                        };\r\n\r\n                        removeTooltip();\r\n\r\n                        setTimeout(() => {\r\n                            removeTooltip();\r\n                        }, 500); \r\n                    });\r\n\r\n                    if (vm.dynamic) {\r\n                        addZoom(chart, chartElem);\r\n                    }\r\n\r\n                    nv.utils.windowResize(() => { onResize(); });\r\n\r\n                    $scope.$on('pipMainResized', () => { onResize(); });\r\n\r\n                    return chart;\r\n                }, () => {\r\n                    drawEmptyState();\r\n                });\r\n\r\n                function onResize() {\r\n                    chart.height(getHeight() - 50);\r\n                    chartElem.style('height', (getHeight() - 50) + 'px');\r\n                    chart.update();\r\n                    drawEmptyState();\r\n                }\r\n\r\n                function drawEmptyState() {\r\n                    if (!$element.find('text.nv-noData').get(0)) {\r\n                        d3.select($element.find('.empty-state')[0]).remove();\r\n                    } else {\r\n                        let containerWidth = $element.find('.line-chart').innerWidth(),\r\n                            containerHeight = $element.find('.line-chart').innerHeight();\r\n                        \r\n                        if ($element.find('.empty-state').get(0)) {\r\n                            chartElem\r\n                                .select('image')\r\n                                .attr('transform', 'scale(' + (containerWidth / 1151) + ',' + (containerHeight / 216) + ')');\r\n                        } else {\r\n                            chartElem\r\n                                .append(\"defs\")\r\n                                .append(\"pattern\")\r\n                                .attr(\"height\", 1)\r\n                                .attr(\"width\", 1)\r\n                                .attr(\"x\", \"0\")\r\n                                .attr(\"y\", \"0\")\r\n                                .attr(\"id\", \"bg\")\r\n                                .append(\"image\")\r\n                                .attr('x', 17)\r\n                                .attr('y', 0)\r\n                                .attr('height', \"216px\")\r\n                                .attr('width', \"1151px\")\r\n                                .attr('transform', 'scale(' + (containerWidth / 1151) + ',' + (containerHeight / 216) + ')')\r\n                                .attr(\"xlink:href\", \"images/line_chart_empty_state.svg\");\r\n\r\n                            chartElem\r\n                                .append('rect')\r\n                                .classed('empty-state', true)\r\n                                .attr('height', \"100%\")\r\n                                .attr('width', \"100%\")\r\n                                .attr('fill', 'url(#bg)');\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function updateScroll(domains, boundary) {\r\n                    var bDiff = boundary[1] - boundary[0],\r\n                        domDiff = domains[1] - domains[0],\r\n                        isEqual = (domains[1] - domains[0])/bDiff === 1;\r\n\r\n                    $($element[0]).find('.visual-scroll')\r\n                        .css('opacity', function () {\r\n                            return isEqual ? 0 : 1;\r\n                        });\r\n\r\n                    if (isEqual) return;\r\n                    \r\n                    $($element[0]).find('.scrolled-block')\r\n                        .css('left', function () {\r\n                            return domains[0]/bDiff * 100 + '%';\r\n                        })\r\n                        .css('width', function () {\r\n                            return domDiff/bDiff * 100 + '%';\r\n                        });\r\n                }\r\n\r\n                function addZoom(chart, svg) {\r\n                    // scaleExtent\r\n                    var scaleExtent = 4;\r\n\r\n                    // parameters\r\n                    var yAxis       = null;\r\n                    var xAxis       = null;\r\n                    var xDomain     = null;\r\n                    var yDomain     = null;\r\n                    var redraw      = null;\r\n                    var svg         = svg;\r\n\r\n                    // scales\r\n                    var xScale = null;\r\n                    var yScale = null;\r\n\r\n                    // min/max boundaries\r\n                    var x_boundary = null;\r\n                    var y_boundary = null;\r\n\r\n                    // create d3 zoom handler\r\n                    var d3zoom = d3.behavior.zoom();\r\n                    var prevXDomain = null;\r\n                    var prevScale = null;\r\n                    var prevTranslate = null;\r\n\r\n                    setData(chart);\r\n\r\n                    function setData(newChart) {\r\n                        // parameters\r\n                        yAxis       = newChart.yAxis;\r\n                        xAxis       = newChart.xAxis;\r\n                        xDomain     = newChart.xDomain || xAxis.scale().domain;\r\n                        yDomain     = newChart.yDomain || yAxis.scale().domain;\r\n                        redraw      = newChart.update;\r\n\r\n                        // scales\r\n                        xScale = xAxis.scale();\r\n                        yScale = yAxis.scale();\r\n\r\n                        // min/max boundaries\r\n                        x_boundary = xAxis.scale().domain().slice();\r\n                        y_boundary = yAxis.scale().domain().slice();\r\n\r\n                        // create d3 zoom handler\r\n                        prevXDomain = x_boundary;\r\n                        prevScale = d3zoom.scale();\r\n                        prevTranslate = d3zoom.translate();\r\n\r\n                        // ensure nice axis\r\n                        xScale.nice();\r\n                        yScale.nice();\r\n                    }\r\n\r\n                    // fix domain\r\n                    function fixDomain(domain, boundary, scale, translate) {\r\n                        if (domain[0] < boundary[0]) {\r\n                            domain[0] = boundary[0];\r\n                            if (prevXDomain[0] !== boundary[0] || scale !== prevScale) {\r\n                                domain[1] += (boundary[0] - domain[0]);\r\n                            } else {\r\n                                domain[1] = prevXDomain[1];\r\n                                translate = _.clone(prevTranslate);\r\n                            }\r\n\r\n                        }\r\n                        if (domain[1] > boundary[1]) {\r\n                            domain[1] = boundary[1];\r\n                            if (prevXDomain[1] !== boundary[1] || scale !== prevScale) {\r\n                                domain[0] -= (domain[1] - boundary[1]);\r\n                            } else {\r\n                                domain[0] = prevXDomain[0];\r\n                                translate = _.clone(prevTranslate);\r\n                            }\r\n                        }\r\n\r\n                        d3zoom.translate(translate);\r\n                        prevXDomain = _.clone(domain);\r\n                        prevScale = _.clone(scale);\r\n                        prevTranslate = _.clone(translate);\r\n                        return domain;\r\n                    }\r\n\r\n                    function updateChart() {\r\n                        d3zoom.scale(1);\r\n                        d3zoom.translate([0,0]);\r\n                        xScale.domain(x_boundary);\r\n                        d3zoom.x(xScale).y(yScale);\r\n                        svg.call(d3zoom);\r\n                    }\r\n\r\n                    // zoom event handler\r\n                    function zoomed() {\r\n                        // Switch off vertical zooming temporary\r\n                        // yDomain(yScale.domain());\r\n\r\n                        if ((<any>d3.event).scale === 1) {\r\n                            unzoomed();\r\n                            updateChart();\r\n                        } else {\r\n                            xDomain(fixDomain(xScale.domain(), x_boundary, (<any>d3.event).scale, (<any>d3.event).translate));\r\n                            redraw();\r\n                        }\r\n\r\n                        updateScroll(xScale.domain(), x_boundary);\r\n                    }\r\n\r\n                    //\r\n                    setZoom = function(which) {\r\n                        var center0 = [svg[0][0].getBBox().width / 2, svg[0][0].getBBox().height / 2];\r\n                        var translate0 = d3zoom.translate(), coordinates0 = coordinates(center0);\r\n\r\n                        if (which === 'in') {\r\n                            if (prevScale < scaleExtent) d3zoom.scale(prevScale + 0.2);\r\n                        } else {\r\n                            if (prevScale > 1) d3zoom.scale(prevScale - 0.2);\r\n                        }\r\n\r\n                        var center1 = point(coordinates0);\r\n                        d3zoom.translate([translate0[0] + center0[0] - center1[0], translate0[1] + center0[1] - center1[1]]);\r\n\r\n                        d3zoom.event(svg);\r\n                    };\r\n\r\n                    function step(which) {\r\n                        var translate = d3zoom.translate();\r\n\r\n                        if (which === 'right') {\r\n                            translate[0] -= 20;\r\n                        } else {\r\n                            translate[0] += 20;\r\n                        }\r\n\r\n                        d3zoom.translate(translate);\r\n                        d3zoom.event(svg);\r\n                    }\r\n\r\n                    function coordinates(point) {\r\n                        var scale = d3zoom.scale(), translate = d3zoom.translate();\r\n                        return [(point[0] - translate[0]) / scale, (point[1] - translate[1]) / scale];\r\n                    }\r\n\r\n                    function point(coordinates) {\r\n                        var scale = d3zoom.scale(), translate = d3zoom.translate();\r\n                        return [coordinates[0] * scale + translate[0], coordinates[1] * scale + translate[1]];\r\n                    }\r\n\r\n                    function keypress() {\r\n                        switch((<any>d3.event).keyCode) {\r\n                            case 39: step('right'); break;\r\n                            case 37: step('left'); break;\r\n                            case 107: setZoom('in'); break;\r\n                            case 109: setZoom('out');\r\n                        }\r\n                    }\r\n\r\n                    // zoom event handler\r\n                    function unzoomed() {\r\n                        xDomain(x_boundary);\r\n                        redraw();\r\n                        d3zoom.scale(1);\r\n                        d3zoom.translate([0,0]);\r\n                        prevScale = 1;\r\n                        prevTranslate = [0,0];\r\n                    }\r\n\r\n                    // initialize wrapper\r\n                    d3zoom.x(xScale)\r\n                        .y(yScale)\r\n                        .scaleExtent([1, scaleExtent])\r\n                        .on('zoom', zoomed);\r\n\r\n                    // add handler\r\n                    svg.call(d3zoom).on('dblclick.zoom', unzoomed);\r\n                    $($element.get(0)).addClass('dynamic');\r\n\r\n                    // add keyboard handlers\r\n                    svg\r\n                        .attr('focusable', false)\r\n                        .style('outline', 'none')\r\n                        .on('keydown', keypress)\r\n                        .on('focus', function () {});\r\n\r\n                    var getXMinMax = function(data) {\r\n                        var maxVal, minVal = null;\r\n\r\n                        for(var i=0;i<data.length;i++) {\r\n                            if (!data[i].disabled) {\r\n                                var tempMinVal = d3.max(data[i].values, function(d: any) { return vm.xFormat ? vm.xFormat(d.x) : d.x;} );\r\n                                var tempMaxVal = d3.min(data[i].values, function(d: any) { return vm.xFormat ? vm.xFormat(d.x) : d.x;} );\r\n                                minVal = (!minVal || tempMinVal < minVal) ? tempMinVal : minVal;\r\n                                maxVal = (!maxVal || tempMaxVal > maxVal) ? tempMaxVal : maxVal;\r\n                            }\r\n                        }\r\n                        return [maxVal, minVal];\r\n                    };\r\n\r\n                    updateZoomOptions = function(data) {\r\n                        yAxis = chart.yAxis;\r\n                        xAxis = chart.xAxis;\r\n\r\n                        xScale = xAxis.scale();\r\n                        yScale = yAxis.scale();\r\n\r\n                        x_boundary = getXMinMax(data);\r\n\r\n                        if (d3zoom.scale() === 1) {\r\n                            d3zoom.x(xScale).y(yScale);\r\n                            svg.call(d3zoom);\r\n                            d3zoom.event(svg);\r\n                        }\r\n\r\n                        updateScroll(xScale.domain(), x_boundary);\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function getMaterialColor(index) {\r\n                    if (!colors || colors.length < 1) return null;\r\n\r\n                    if (index >= colors.length) {\r\n                        index = 0;\r\n                    }\r\n\r\n                    return materialColorToRgba(colors[index]);\r\n                }                \r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    if (!vm.data) return;\r\n\r\n                    vm.data.forEach(function (item, index) {\r\n                        item.color = item.color || getMaterialColor(index);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipPieCharts\r\n     *\r\n     * @description\r\n     * Line chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipPieCharts', [])\r\n        .directive('pipPieChart', pipPieChart);\r\n\r\n    function pipPieChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                donut: '=pipDonut',\r\n                legend: '=pipShowLegend',\r\n                total: '=pipShowTotal',\r\n                size: '=pipPieSize',\r\n                centered: '=pipCentered'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'pieChart',\r\n            templateUrl: 'pie/pie_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                var vm               = this;\r\n                var chart            = null;\r\n                var titleElem        = null;\r\n                var chartElem        = null;\r\n                var colors           = _.map($mdColorPalette, function (palette, color) {\r\n                    return color;\r\n                });\r\n                colors = _.filter(colors, function(color){\r\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\r\n                });                \r\n                var resizeTitleLabel = resizeTitleLabelUnwrap;\r\n\r\n                vm.data = vm.data || [];\r\n\r\n                vm.showLegend = function () {\r\n                    return vm.legend !== undefined ? vm.legend: true;\r\n                };\r\n\r\n                if (vm.series && vm.series.length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                $scope.$watch('pieChart.series', function (newVal) {\r\n                    vm.data = newVal;\r\n\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                        $timeout(resizeTitleLabel);\r\n                        drawEmptyState(d3.select($element.get(0)).select('.pie-chart svg')[0][0]);\r\n                    }\r\n                }, true);\r\n\r\n                // Sets colors of items\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(() => {\r\n                    chart = nv.models.pieChart()\r\n                        .margin({ top: 0, right: 0, bottom: 0, left: 0 })\r\n                        .x(function (d) {\r\n                            return vm.donut ? d.value : null;\r\n                        })\r\n                        .y(function (d) {\r\n                            return d.value;\r\n                        })\r\n                        .height(vm.size || 250)\r\n                        .width(vm.size || 250)\r\n                        .showLabels(true)\r\n                        .labelThreshold(.001)\r\n                        .growOnHover(false)\r\n                        .donut(vm.donut)\r\n                        .donutRatio(0.5)\r\n                        .color(function(d) {\r\n                            return d.color || (<any>d3.scale).paletteColors().range();\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('There is no data right now...');\r\n                    chart.showLegend(false);\r\n\r\n                    chartElem = d3.select($element.get(0))\r\n                        .select('.pie-chart')\r\n                        .style('height', (vm.size || 250) + 'px')\r\n                        .style('width', vm.centered ? '100%' : (vm.size || 250) + 'px')\r\n                        .select('svg')\r\n                        .style('opacity', 0)\r\n                        .datum(vm.data || [])\r\n                        .call(chart);\r\n\r\n                    nv.utils.windowResize(function () {\r\n                        chart.update();\r\n                        $timeout(resizeTitleLabel);\r\n                        centerChart();\r\n                        drawEmptyState(d3.select($element.get(0)).select('.pie-chart svg')[0][0]);\r\n                    });\r\n\r\n                    return chart;\r\n                }, () => {\r\n                    $timeout(function () {\r\n                        var svgElem  = d3.select($element.get(0)).select('.pie-chart svg')[0][0];\r\n                        renderTotalLabel(svgElem);\r\n                        d3.select(svgElem)\r\n                            .transition()\r\n                            .duration(1000)\r\n                            .style('opacity', 1);\r\n                        \r\n                        $timeout(resizeTitleLabelUnwrap, 800);\r\n                        centerChart();\r\n                        drawEmptyState(svgElem);\r\n                    });\r\n                });\r\n\r\n                function drawEmptyState(svg) {\r\n                    if (!$element.find('text.nv-noData').get(0)) {\r\n                        d3.select($element.find('.empty-state')[0]).remove();\r\n                        $element.find('.pip-empty-pie-text').remove();\r\n                    } else {\r\n                    \r\n                        if ($element.find('.pip-empty-pie-text').length === 0) { \r\n                            $element.find('.pie-chart')\r\n                                .append(\"<div class='pip-empty-pie-text'>There is no data right now...</div>\");\r\n                        }\r\n\r\n                        var pie = d3.layout.pie().sort(null),\r\n                            size = Number(vm.size || 250);\r\n\r\n                        var arc = d3.svg.arc()\r\n                            .innerRadius(size / 2 - 20)\r\n                            .outerRadius(size / 2 - 57);\r\n                    \r\n                        svg = d3.select(svg)\r\n                            .append(\"g\")\r\n                            .classed('empty-state', true)\r\n                            .attr('transform', \"translate(\" + size / 2 + \",\" + size / 2 + \")\");\r\n                    \r\n                        var path = svg.selectAll(\"path\")\r\n                            .data(pie([1]))\r\n                            .enter().append(\"path\")\r\n                            .attr(\"fill\", \"rgba(0, 0, 0, 0.08)\")\r\n                            .attr(\"d\", <any>arc);\r\n                    }\r\n                }\r\n\r\n                function centerChart() {\r\n                    if (vm.centered) {\r\n                        let svgElem  = d3.select($element.get(0)).select('.pie-chart svg')[0][0],\r\n                        leftMargin = $(svgElem).innerWidth() / 2 - (vm.size || 250) / 2;\r\n                        d3.select($element.find('.nv-pieChart')[0]).attr('transform', 'translate(' + leftMargin + ', 0)');\r\n                    }\r\n                }\r\n\r\n                function renderTotalLabel(svgElem) {\r\n                    if ((!vm.total && !vm.donut) || !vm.data) return;\r\n\r\n                    let totalVal = vm.data.reduce(function (sum, curr) {\r\n                        return sum + curr.value;\r\n                    }, 0);\r\n\r\n                    if (totalVal >= 10000) totalVal = (totalVal / 1000).toFixed(1) + 'k';\r\n                    \r\n                    d3.select(svgElem)\r\n                        .select('.nv-pie:not(.nvd3)')\r\n                        .append('text')\r\n                        .classed('label-total', true)\r\n                        .attr('text-anchor', 'middle')\r\n                        .style('dominant-baseline', 'central')\r\n                        .text(totalVal);\r\n\r\n                    titleElem = d3.select($element.find('text.label-total').get(0)).style('opacity', 0);\r\n                }\r\n\r\n                function resizeTitleLabelUnwrap() {\r\n                    if ((!vm.total && !vm.donut) || !vm.data) return;\r\n\r\n                    var boxSize =  $element.find('.nvd3.nv-pieChart').get(0).getBBox();\r\n\r\n                    if (!boxSize.width || !boxSize.height) {\r\n                        return;\r\n                    }\r\n\r\n                    titleElem.style('font-size', ~~boxSize.width / 4.5).style('opacity', 1);\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function getMaterialColor(index) {\r\n                    if (!colors || colors.length < 1) return null;\r\n\r\n                    if (index >= colors.length) {\r\n                        index = 0;\r\n                    }\r\n\r\n                    return materialColorToRgba(colors[index]);\r\n                } \r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    if (!vm.data) return;\r\n\r\n                    vm.data.forEach(function (item, index) {\r\n                        item.color = item.color || getMaterialColor(index);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('bar/bar_chart.html',\n    '<div class=\"bar-chart\"><svg></svg></div><pip-chart-legend pip-series=\"barChart.legend\" pip-interactive=\"barChart.interactiveLegend\"></pip-chart-legend>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('legend/interactive_legend.html',\n    '<div><div class=\"chart-legend-item\" ng-repeat=\"item in series\" ng-show=\"item.values || item.value\"><md-checkbox ng-model=\"item.disabled\" ng-true-value=\"false\" ng-false-value=\"true\" ng-if=\"interactive\" aria-label=\"{{ item.label }}\"><p class=\"legend-item-value\" ng-if=\"item.value\" ng-style=\"{\\'background-color\\': item.color}\">{{ item.value }}</p><p class=\"legend-item-label\">{{:: item.label || item.key }}</p></md-checkbox><div ng-if=\"!interactive\"><span class=\"bullet\" ng-style=\"{\\'background-color\\': item.color}\"></span> <span>{{:: item.label || item.key}}</span></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('line/line_chart.html',\n    '<div class=\"line-chart\" flex=\"auto\" layout=\"column\"><svg class=\"flex-auto\" ng-class=\"{\\'visible-x-axis\\': lineChart.isVisibleX(), \\'visible-y-axis\\': lineChart.isVisibleY()}\"></svg><div class=\"scroll-container\"><div class=\"visual-scroll\"><div class=\"scrolled-block\"></div></div></div><md-button class=\"md-fab md-mini minus-button\" ng-click=\"lineChart.zoomOut()\"><md-icon md-svg-icon=\"icons:minus-circle\"></md-icon></md-button><md-button class=\"md-fab md-mini plus-button\" ng-click=\"lineChart.zoomIn()\"><md-icon md-svg-icon=\"icons:plus-circle\"></md-icon></md-button></div><pip-chart-legend pip-series=\"lineChart.legend\" pip-interactive=\"lineChart.interactiveLegend\"></pip-chart-legend>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('pie/pie_chart.html',\n    '<div class=\"pie-chart\" ng-class=\"{\\'circle\\': !pieChart.donut}\"><svg class=\"flex-auto\"></svg></div><pip-chart-legend pip-series=\"pieChart.data\" pip-interactive=\"false\" ng-if=\"pieChart.showLegend()\"></pip-chart-legend>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-charts-html.min.js.map\n","/**\r\n * @file Location control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n\r\n/* global angular, google */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocation\", []);\r\n\r\n    thisModule.directive('pipLocation', \r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipLocationName: '&',\r\n                    pipLocationPos: '&',\r\n                    pipLocationResize: '&',\r\n                    pipShowLocationIcon: '='\r\n                },\r\n                template: \r\n                    function($element, $attrs: any) {\r\n                        function toBoolean(value) {\r\n                            if (value == null) return false;\r\n                            if (!value) return false;\r\n                            value = value.toString().toLowerCase();\r\n                            return value == '1' || value == 'true';\r\n                        }\r\n\r\n                        if (toBoolean($attrs.pipCollapse)) {\r\n                            return String()\r\n                                + '<div class=\"pip-location-name location-collapse\" ng-click=\"pipLocationResize()\" ng-hide=\"!pipLocationName()\"'\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\">'\r\n                                + '<md-icon md-svg-icon=\"icons:location\" class=\"flex-fixed pip-icon\" ng-if=\"pipShowLocationIcon\"></md-icon>'\r\n                                + '<span class=\"pip-location-text\">{{pipLocationName()}}</span> '\r\n                                + '</div>'\r\n                                + '<div class=\"pip-location-container\" ng-hide=\"!pipLocationPos()\"></div>';\r\n                        } else {\r\n                            return String()\r\n                                + '<md-button class=\"pip-location-name\" ng-click=\"pipLocationResize()\" '\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\">'\r\n                                + '<div class=\"layout-align-start-center layout-row w-stretch\">'\r\n                                + '<md-icon md-svg-icon=\"icons:location\" class=\"flex-fixed pip-icon\" ng-if=\"pipShowLocationIcon\"></md-icon>'\r\n                                + '<span class=\"pip-location-text flex\">{{pipLocationName()}}</span>'\r\n                                + '<md-icon md-svg-icon=\"icons:triangle-down\" class=\"flex-fixed\" ng-if=\"!showMap\"></md-icon>'\r\n                                + '<md-icon md-svg-icon=\"icons:triangle-up\" class=\"flex-fixed\" ng-if=\"showMap\"></md-icon>'\r\n                                + '</div></md-button>'\r\n                                + '<div class=\"pip-location-container\"'\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\"></div>';\r\n                        }\r\n                    },\r\n                controller: 'pipLocationController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationController',\r\n        function ($scope, $element, $attrs) {\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            var \r\n                $name = $element.children('.pip-location-name'),\r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null,\r\n                $up = $element.find('.icon-up'),\r\n                $down = $element.find('.icon-down'),\r\n                collapsable = toBoolean($attrs.pipCollapse);\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n                $mapContainer.hide();\r\n            };\r\n\r\n            function generateMap() {\r\n                var location = $scope.pipLocationPos();\r\n                \r\n                // Safeguard for bad coordinates\r\n                if ($scope.showMap == false || location == null\r\n                    || location.coordinates == null\r\n                    || location.coordinates.length < 0) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Determine map coordinates\r\n                var coordinates = new google.maps.LatLng(\r\n                    location.coordinates[0],\r\n                    location.coordinates[1]\r\n                );\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapContainer.show();\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map with point marker\r\n                var \r\n                    mapOptions = {\r\n                        center: coordinates,\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: false,\r\n                        draggable: false\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions);\r\n                    \r\n                new google.maps.Marker({\r\n                    position: coordinates,\r\n                    map: map\r\n                });\r\n            };\r\n\r\n            // Process user actions\r\n            if (!collapsable) {\r\n                $scope.showMap = false;\r\n                $up.hide();\r\n                $mapContainer.hide();\r\n\r\n                $name.click(function (event) {\r\n                    event.stopPropagation();\r\n                    if ($attrs.disabled) return;\r\n                    $scope.showMap = !$scope.showMap;\r\n                    $up[$scope.showMap ? 'show' : 'hide']();\r\n                    $down[!$scope.showMap ? 'show' : 'hide']();\r\n                    generateMap();\r\n                });\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch($scope.pipLocationPos,\r\n                    function (newValue) {\r\n                        generateMap();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location');\r\n\r\n            // Visualize map\r\n            if ($scope.pipLocationPos()) generateMap();\r\n            else clearMap();\r\n        }    \r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Location edit dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n */\r\n \r\n/* global angular, google */\r\n\r\nclass LocationDialogService {\r\n    private _$mdDialog: angular.material.IDialogService;\r\n\r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._$mdDialog = $mdDialog;\r\n    }\r\n\r\n    public show (params, successCallback, cancelCallback) {\r\n        this._$mdDialog.show({\r\n            controller: 'pipLocationEditDialogController',\r\n            controllerAs: '$ctrl',\r\n            templateUrl: 'location_dialog/location_dialog.html',\r\n            locals: {\r\n                locationName: params.locationName,\r\n                locationPos: params.locationPos\r\n            },\r\n            clickOutsideToClose: true\r\n        })\r\n        .then((result) => {\r\n            if (successCallback) {\r\n                successCallback(result);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nclass LocationEditDialogController {\r\n    private _map = null;\r\n    private _marker = null;\r\n    private _$scope: ng.IScope;\r\n    private _$mdDialog: angular.material.IDialogService;\r\n\r\n    public theme: string;\r\n    public locationPos;\r\n    public locationName;\r\n    public supportSet: boolean;\r\n\r\n    constructor(\r\n        $scope: ng.IScope, \r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: angular.ITimeoutService, \r\n        $mdDialog: angular.material.IDialogService,\r\n        locationPos, \r\n        locationName) {\r\n\r\n        this._$mdDialog = $mdDialog;\r\n        this._$scope = $scope;\r\n        this.theme = $rootScope['$theme'];\r\n        this.locationPos = locationPos && locationPos.type == 'Point'\r\n                && locationPos.coordinates && locationPos.coordinates.length == 2\r\n                ? locationPos : null;\r\n        this.locationName = locationName;\r\n        this.supportSet = navigator.geolocation != null;\r\n\r\n         // Wait until dialog is initialized\r\n        $timeout(() => {\r\n            let mapContainer = $('.pip-location-edit-dialog .pip-location-container');\r\n            // Calculate coordinate of the center\r\n            let coordinates = this.locationPos ?\r\n                new google.maps.LatLng(\r\n                    this.locationPos.coordinates[0],\r\n                    this.locationPos.coordinates[1]\r\n                ) : null;\r\n\r\n                // Create the map with point marker\r\n            let mapOptions = {\r\n                center: new google.maps.LatLng(0, 0),\r\n                zoom: 1,\r\n                mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                disableDefaultUI: true\r\n            }\r\n            if (coordinates != null) {\r\n                mapOptions.center = coordinates;\r\n                mapOptions.zoom = 12;\r\n            }\r\n\r\n            this._map = new google.maps.Map(mapContainer[0], mapOptions);\r\n            this._marker = this.createMarker(coordinates);\r\n\r\n                // Fix resizing issue\r\n            setTimeout(() => {\r\n                google.maps.event.trigger(this._map, 'resize');\r\n            }, 1000);\r\n        }, 0);\r\n\r\n        $scope.$on('pipLayoutResized', () => {\r\n            if (this._map == null) return;\r\n            google.maps.event.trigger(this._map, 'resize');\r\n        });\r\n\r\n    }\r\n\r\n    public createMarker (coordinates) {\r\n        if (this._marker) this._marker.setMap(null);\r\n        if (coordinates) {\r\n            this._marker = new google.maps.Marker({ \r\n                position: coordinates, \r\n                map: this._map,\r\n                draggable: true,\r\n                animation: google.maps.Animation.DROP\r\n            });\r\n\r\n            let thisMarker = this._marker;\r\n            google.maps.event.addListener(thisMarker, 'dragend', () => {\r\n                let coordinates = thisMarker.getPosition(); \r\n                    this.changeLocation(coordinates, null);\r\n            });\r\n        } else {\r\n            this._marker = null;\r\n        }\r\n\r\n        return this._marker;\r\n    }\r\n\r\n    public changeLocation(coordinates, tid) {\r\n        this.locationPos = {\r\n            type: 'Point',\r\n            coordinates: [coordinates.lat(), coordinates.lng()]\r\n        };\r\n        this.locationName = null;\r\n\r\n        if (tid == null) {\r\n            // tid = $scope.transaction.begin();\r\n            if (tid == null) return;\r\n        }\r\n\r\n        // Read address\r\n        let geocoder = new google.maps.Geocoder();\r\n        geocoder.geocode({ location: coordinates }, (results, status) => {\r\n            // if ($scope.transaction.aborted(tid)) return;\r\n\r\n            // Process positive response\r\n            if (status == google.maps.GeocoderStatus.OK && results && results.length > 0) {\r\n                this.locationName = results[0].formatted_address;\r\n            }\r\n\r\n                    // $scope.transaction.end();\r\n            this._$scope.$apply();\r\n        })\r\n    }\r\n    public onAddPin() {\r\n        if (this._map == null) return;\r\n\r\n        let coordinates = this._map.getCenter();\r\n            this._marker = this.createMarker(coordinates);\r\n            this.changeLocation(coordinates, null);\r\n    }\r\n\r\n    public onRemovePin() {\r\n        if (this._map == null) return;\r\n        this._marker = this.createMarker(null);\r\n        this.locationPos = null;\r\n        this.locationName = null;\r\n    }\r\n\r\n    public onZoomIn() {\r\n        if (this._map == null) return;\r\n        let zoom = this._map.getZoom();\r\n        this._map.setZoom(zoom + 1);\r\n    }\r\n\r\n    public onZoomOut() {\r\n        if (this._map == null) return;\r\n        let zoom = this._map.getZoom();\r\n        this._map.setZoom(zoom > 1 ? zoom - 1 : zoom);\r\n    }\r\n\r\n    public onSetLocation = function () {\r\n        if (this._map == null) return;\r\n\r\n                // var tid = $scope.transaction.begin();\r\n                // if (tid == null) return;\r\n\r\n        navigator.geolocation.getCurrentPosition(\r\n            (position) => {\r\n                        // if ($scope.transaction.aborted(tid)) return;\r\n\r\n                let coordinates = new google.maps.LatLng(\r\n                    position.coords.latitude, position.coords.longitude);\r\n                this._marker = this.createMarker(coordinates);\r\n                this._map.setCenter(coordinates);\r\n                this._map.setZoom(12);\r\n                this.changeLocation(coordinates, null);\r\n            },\r\n            () => {\r\n                        // $scope.transaction.end();\r\n                this.$scope.$apply();\r\n            },\r\n        {\r\n            maximumAge: 0,\r\n            enableHighAccuracy: true,\r\n            timeout: 5000\r\n        });\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this._$mdDialog.cancel();\r\n    }\r\n\r\n    public onApply(): void {\r\n        this._$mdDialog.hide({\r\n            location: this.locationPos,\r\n            locationPos: this.locationPos,\r\n            locationName: this.locationName   \r\n        })\r\n    }\r\n\r\n    \r\n\r\n}\r\n\r\n(() => {\r\n    'use strict';\r\n    function LocationDialogRun ($injector) {\r\n        let pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'LOCATION_ADD_LOCATION': 'Add location',\r\n                'LOCATION_SET_LOCATION': 'Set location',\r\n                'LOCATION_ADD_PIN': 'Add pin',\r\n                'LOCATION_REMOVE_PIN': 'Remove pin'\r\n            });\r\n            pipTranslate.setTranslations('ru', {\r\n                'LOCATION_ADD_LOCATION': ' ',\r\n                'LOCATION_SET_LOCATION': ' ',\r\n                'LOCATION_ADD_PIN': ' ',\r\n                'LOCATION_REMOVE_PIN': ' '\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    angular.module('pipLocationEditDialog', ['ngMaterial',  'pipLocations.Templates'])\r\n           .run(LocationDialogRun)\r\n           .service('pipLocationEditDialog', LocationDialogService)\r\n           .controller('pipLocationEditDialogController', LocationEditDialogController \r\n        /*function ($scope, $rootScope, $timeout, $mdDialog,  locationPos, locationName) {\r\n\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.locationPos = locationPos && locationPos.type == 'Point'\r\n                && locationPos.coordinates && locationPos.coordinates.length == 2\r\n                ? locationPos : null;\r\n            $scope.locationName = locationName;\r\n            $scope.supportSet = navigator.geolocation != null;\r\n\r\n            // $scope.transaction = pipTransaction('location_edit_dialog', $scope);\r\n\r\n            var map = null, marker = null;\r\n\r\n            function createMarker (coordinates) {\r\n                if (marker) marker.setMap(null);\r\n                \r\n                if (coordinates) {\r\n                    marker = new google.maps.Marker({ \r\n                        position: coordinates, \r\n                        map: map,\r\n                        draggable: true,\r\n                        animation: google.maps.Animation.DROP\r\n                    });\r\n\r\n                    var thisMarker = marker;\r\n                    google.maps.event.addListener(thisMarker, 'dragend', function() {\r\n                       var coordinates = thisMarker.getPosition(); \r\n                       changeLocation(coordinates, null);\r\n                    });\r\n                } else {\r\n                    marker = null;\r\n                }\r\n\r\n                return marker;\r\n            };\r\n\r\n            function changeLocation(coordinates, tid) {\r\n                $scope.locationPos = {\r\n                    type: 'Point',\r\n                    coordinates: [coordinates.lat(), coordinates.lng()]\r\n                };\r\n                $scope.locationName = null;\r\n\r\n                if (tid == null) {\r\n                    // tid = $scope.transaction.begin();\r\n                    if (tid == null) return;\r\n                }\r\n\r\n                // Read address\r\n                var geocoder = new google.maps.Geocoder();\r\n                geocoder.geocode({ location: coordinates }, function(results, status) {\r\n                    // if ($scope.transaction.aborted(tid)) return;\r\n\r\n                    // Process positive response\r\n                    if (status == google.maps.GeocoderStatus.OK\r\n                        && results && results.length > 0) {\r\n                        $scope.locationName = results[0].formatted_address;\r\n                    }\r\n\r\n                    // $scope.transaction.end();\r\n                    $scope.$apply();\r\n                });\r\n            };\r\n\r\n            // Wait until dialog is initialized\r\n            $timeout(function () {\r\n                var mapContainer = $('.pip-location-edit-dialog .pip-location-container');\r\n\r\n                // Calculate coordinate of the center\r\n                var coordinates = $scope.locationPos ?\r\n                    new google.maps.LatLng(\r\n                        $scope.locationPos.coordinates[0],\r\n                        $scope.locationPos.coordinates[1]\r\n                    ) : null;\r\n\r\n                // Create the map with point marker\r\n                var mapOptions = {\r\n                    center: new google.maps.LatLng(0, 0),\r\n                    zoom: 1,\r\n                    mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                    disableDefaultUI: true\r\n                };\r\n                if (coordinates != null) {\r\n                    mapOptions.center = coordinates;\r\n                    mapOptions.zoom = 12;\r\n                }\r\n\r\n                map = new google.maps.Map(mapContainer[0], mapOptions);\r\n                marker = createMarker(coordinates);\r\n\r\n                // Fix resizing issue\r\n                setTimeout(function () {\r\n                    google.maps.event.trigger(map, 'resize');\r\n                }, 1000);\r\n            }, 0);\r\n\r\n            $scope.$on('pipLayoutResized', function (event) {\r\n                if (map == null) return;\r\n                google.maps.event.trigger(map, 'resize');\r\n            });\r\n\r\n            $scope.onAddPin = function () {\r\n                if (map == null) return;\r\n\r\n                var coordinates = map.getCenter();\r\n                marker = createMarker(coordinates);\r\n                changeLocation(coordinates, null);\r\n            };\r\n\r\n            $scope.onRemovePin = function () {\r\n                if (map == null) return;\r\n                marker = createMarker(null);\r\n                $scope.locationPos = null;\r\n                $scope.locationName = null;\r\n            };\r\n\r\n            $scope.onZoomIn = function () {\r\n                if (map == null) return;\r\n                var zoom = map.getZoom();\r\n                map.setZoom(zoom + 1);\r\n            };\r\n\r\n            $scope.onZoomOut = function () {\r\n                if (map == null) return;\r\n                var zoom = map.getZoom();\r\n                map.setZoom(zoom > 1 ? zoom - 1 : zoom);\r\n            };\r\n\r\n            $scope.onSetLocation = function () {\r\n                if (map == null) return;\r\n\r\n                // var tid = $scope.transaction.begin();\r\n                // if (tid == null) return;\r\n\r\n                navigator.geolocation.getCurrentPosition(\r\n                    function (position) {\r\n                        // if ($scope.transaction.aborted(tid)) return;\r\n\r\n                        var coordinates = new google.maps.LatLng(\r\n                            position.coords.latitude, position.coords.longitude);\r\n\r\n                        marker = createMarker(coordinates);\r\n                        map.setCenter(coordinates);\r\n                        map.setZoom(12);\r\n\r\n                        changeLocation(coordinates, null);\r\n                    },\r\n                    function () {\r\n                        // $scope.transaction.end();\r\n                        $scope.$apply();\r\n                    },\r\n                    {\r\n                        maximumAge: 0,\r\n                        enableHighAccuracy: true,\r\n                        timeout: 5000\r\n                    }\r\n                );\r\n            };\r\n\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n\r\n            $scope.onApply = function () {\r\n                $mdDialog.hide({\r\n                    location: $scope.locationPos,\r\n                    locationPos: $scope.locationPos,\r\n                    locationName: $scope.locationName   \r\n                });\r\n            };\r\n        }*/\r\n    );\r\n})();\r\n","/**\r\n * @file Location edit control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationEdit\", ['pipLocationEditDialog']);\r\n\r\n    thisModule.directive('pipLocationEdit',\r\n        function ($parse, $http, pipLocationEditDialog) {\r\n            return {\r\n                restrict: 'EAC',\r\n                scope: {\r\n                    pipLocationName: '=',\r\n                    pipLocationPos: '=',\r\n                    pipLocationHolder: '=',\r\n                    ngDisabled: '&',\r\n                    pipChanged: '&'\r\n                },\r\n                template: String()\r\n                    + '<md-input-container class=\"md-block\">'\r\n                    + '<label>{{ \\'LOCATION\\' | translate }}</label>'\r\n                    + '<input ng-model=\"pipLocationName\"'\r\n                    + 'ng-disabled=\"ngDisabled()\"/></md-input-container>'\r\n                    + '<div class=\"pip-location-empty\" layout=\"column\" layout-align=\"center center\">'\r\n                    + '<md-button class=\"md-raised\" ng-disabled=\"ngDisabled()\" ng-click=\"onSetLocation()\"'\r\n                    + 'aria-label=\"LOCATION_ADD_LOCATION\">'\r\n                    + '<span class=\"icon-location\"></span> {{::\\'LOCATION_ADD_LOCATION\\' | translate }}'\r\n                    + '</md-button></div>'\r\n                    + '<div class=\"pip-location-container\" tabindex=\"{{ ngDisabled() ? -1 : 0 }}\"'\r\n                    + ' ng-click=\"onMapClick($event)\" ng-keypress=\"\"onMapKeyPress($event)\"></div>',\r\n                controller: function ($scope, $element) {\r\n                    $element.find('md-input-container').attr('md-no-float', !!$scope.pipLocationHolder);\r\n                },\r\n                link: function ($scope: any, $element) {\r\n\r\n                    var \r\n                        $empty = $element.children('.pip-location-empty'),\r\n                        $mapContainer = $element.children('.pip-location-container'),\r\n                        $mapControl = null;\r\n\r\n                    function clearMap() {\r\n                        // Remove map control\r\n                        if ($mapControl) $mapControl.remove();\r\n                        $mapControl = null;\r\n\r\n                        // Toggle control visibility\r\n                        $mapContainer.hide();\r\n                        $empty.show();\r\n                    };\r\n\r\n                    function generateMap() {\r\n                        // Safeguard for bad coordinates\r\n                        var location = $scope.pipLocationPos;\r\n                        if (location == null || location.coordinates == null || location.coordinates.length < 0) {\r\n                            clearMap();\r\n                            return;\r\n                        }\r\n\r\n                        // Determine map coordinates\r\n                        var coordinates = new google.maps.LatLng(\r\n                            location.coordinates[0],\r\n                            location.coordinates[1]\r\n                        );\r\n\r\n                        // Clean up the control\r\n                        if ($mapControl) $mapControl.remove();\r\n\r\n                        // Toggle control visibility\r\n                        $mapContainer.show();\r\n                        $empty.hide();\r\n\r\n                        // Add a new map\r\n                        $mapControl = $('<div></div>');\r\n                        $mapControl.appendTo($mapContainer);\r\n\r\n                        // Create the map with point marker\r\n                        var mapOptions = {\r\n                            center: coordinates,\r\n                            zoom: 12,\r\n                            mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                            disableDefaultUI: true,\r\n                            disableDoubleClickZoom: true,\r\n                            scrollwheel: false,\r\n                            draggable: false\r\n                        };\r\n                        var map = new google.maps.Map($mapControl[0], mapOptions);\r\n                        var marker = new google.maps.Marker({\r\n                            position: coordinates,\r\n                            map: map\r\n                        });\r\n                    };\r\n\r\n                    function defineCoordinates() {\r\n                        var locationName = $scope.pipLocationName;\r\n\r\n                        if (locationName == '') {\r\n                            $scope.pipLocationPos = null;\r\n                            clearMap();\r\n                            $scope.$apply();\r\n                            return;\r\n                        }\r\n\r\n                    //    $http.get('http://maps.googleapis.com/maps/api/geocode/json?address=' + locationName)\r\n                    //    .success(function (response) { ... })\r\n                    //    .error(function (response) {... });\r\n\r\n                        var geocoder = new google.maps.Geocoder();\r\n                        geocoder.geocode({ address: locationName }, function(results, status) {\r\n                            $scope.$apply(function() {\r\n                                // Process response\r\n                                if (status == google.maps.GeocoderStatus.OK) {\r\n                                    // Check for empty results\r\n                                    if (results == null || results.length == 0) {\r\n                                        $scope.pipLocationPos = null;\r\n                                        clearMap();\r\n                                        return;\r\n                                    }\r\n\r\n                                    var \r\n                                        geometry = results[0].geometry || {},\r\n                                        location = geometry.location || {};\r\n\r\n                                    // Check for empty results again\r\n                                    if (location.lat == null || location.lng == null) {\r\n                                        $scope.pipLocationPos = null;\r\n                                        clearMap();\r\n                                        return;\r\n                                    }\r\n\r\n                                    $scope.pipLocationPos = {\r\n                                        type: 'Point',\r\n                                        coordinates: [\r\n                                            location.lat(),\r\n                                            location.lng()\r\n                                        ]\r\n                                    };\r\n\r\n                                    //generateMap();                                \r\n                                } \r\n                                // Process error...\r\n                                else {\r\n                                    $scope.pipLocationPos = null;\r\n                                    //clearMap();                                \r\n                                }\r\n                            });\r\n                        });\r\n\r\n                    };\r\n                    var defineCoordinatesDebounced = _.debounce(defineCoordinates, 2000);\r\n\r\n                    // Process user actions\r\n                    \r\n                    $scope.onSetLocation = function() {\r\n                        if ($scope.ngDisabled()) return;\r\n                          \r\n                        pipLocationEditDialog.show(\r\n                            {\r\n                                locationName: $scope.pipLocationName,\r\n                                locationPos: $scope.pipLocationPos\r\n                            },\r\n                            function (result) {\r\n                                var \r\n                                    location = result.location,\r\n                                    locationName = result.locationName;\r\n\r\n                                // Do not change anything if location is about the same\r\n                                if ($scope.pipLocationPos && $scope.pipLocationPos.type == 'Point'\r\n                                    && $scope.pipLocationPos.coordinates.length == 2\r\n                                    && location && location.coordinates.length == 2\r\n                                    && ($scope.pipLocationPos.coordinates[0] - location.coordinates[0]) < 0.0001\r\n                                    && ($scope.pipLocationPos.coordinates[1] - location.coordinates[1]) < 0.0001\r\n                                    && (locationName == $scope.pipLocationName)) {\r\n                                    return;        \r\n                                }\r\n\r\n                                $scope.pipLocationPos = location;\r\n                                $scope.pipLocationName = locationName;\r\n\r\n                                if (locationName == null && location != null) {\r\n                                    $scope.pipLocationName = \r\n                                        '(' + result.location.coordinates[0]\r\n                                        + ',' + result.location.coordinates[1] + ')';\r\n                                }\r\n                                $scope.pipChanged();\r\n                                $mapContainer[0].focus();\r\n                            }\r\n                        );\r\n                    };\r\n\r\n                    $scope.onMapClick = function ($event) {\r\n                        if ($scope.ngDisabled()) return;\r\n\r\n                        $mapContainer[0].focus();\r\n                        $scope.onSetLocation();\r\n                        //$event.stopPropagation();\r\n                    };\r\n\r\n                    $scope.onMapKeyPress = function($event) {\r\n                        if ($scope.ngDisabled()) return;\r\n\r\n                        if ($event.keyCode == 13 || $event.keyCode == 32) {\r\n                            $scope.onSetLocation();\r\n                            //$event.stopPropagation();\r\n                        }  \r\n                    };\r\n\r\n                    // Watch for location name changes\r\n                    $scope.$watch(\r\n                        function () {\r\n                            return $scope.pipLocationName\r\n                        },\r\n                        function (newValue, oldValue) {\r\n                            if (newValue != oldValue)\r\n                                defineCoordinatesDebounced();\r\n                        }\r\n                    );\r\n\r\n                    $scope.$watch(\r\n                        function () {\r\n                            return $scope.pipLocationPos\r\n                        },\r\n                        function () {\r\n                            generateMap();\r\n                        }\r\n                    );\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-location-edit');\r\n\r\n                    // Visualize map\r\n                    if ($scope.pipLocationPos) generateMap();\r\n                    else clearMap();\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Location IP control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n \r\n/* global angular, google */\r\n\r\ndeclare let google: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationIp\", []);\r\n\r\n    thisModule.directive('pipLocationIp',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipIpaddress: '&',\r\n                    pipExtraInfo: '&'\r\n                },\r\n                template: '<div class=\"pip-location-container\"></div>',\r\n                controller: 'pipLocationIpController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationIpController',\r\n        function ($scope, $element, $attrs, $http) {\r\n\r\n            var \r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null;\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n            }\r\n\r\n            function generateMap(latitude, longitude) {\r\n                // Safeguard for bad coordinates\r\n                if (latitude == null || longitude == null) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Determine map coordinates\r\n                var coordinates = new google.maps.LatLng(\r\n                    latitude,\r\n                    longitude\r\n                );\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map with point marker\r\n                var \r\n                    mapOptions = {\r\n                        center: coordinates,\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: false,\r\n                        draggable: false\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions);\r\n                    \r\n                new google.maps.Marker({\r\n                    position: coordinates,\r\n                    map: map\r\n                });\r\n            }\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            function defineCoordinates() {\r\n                var ipAddress = $scope.pipIpaddress();\r\n\r\n                if (ipAddress == '') {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Todo: Find more reliable geocoding service to locate ip addresses\r\n                $http.jsonp('https://www.geoplugin.net/json.gp?ip=' + ipAddress + '&jsoncallback=JSON_CALLBACK')\r\n                .success(function (response) {\r\n                    if (response != null \r\n                        && response.geoplugin_latitude != null\r\n                        && response.geoplugin_longitude != null) {\r\n                        \r\n                        generateMap(response.geoplugin_latitude, response.geoplugin_longitude);\r\n\r\n                        if ($scope.pipExtraInfo) {\r\n                            var extraInfo = {\r\n                                city: response.geoplugin_city,  \r\n                                regionCode: response.geoplugin_regionCode,  \r\n                                region: response.geoplugin_regionName,  \r\n                                areaCode: response.geoplugin_areaCode,  \r\n                                countryCode: response.geoplugin_countryCode,  \r\n                                country: response.geoplugin_countryName,  \r\n                                continentCode: response.geoplugin_continentCode\r\n                            };\r\n                            $scope.pipExtraInfo({ extraInfo: extraInfo });\r\n                        }\r\n                    } else {\r\n                        clearMap();\r\n                    }\r\n                })\r\n                .error(function (response) {\r\n                    console.error(response);\r\n                    clearMap();\r\n                });\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch(\r\n                    function () {\r\n                        return $scope.pipIpaddress()\r\n                    },\r\n                    function (newValue) {\r\n                        defineCoordinates();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location-ip');\r\n\r\n            // Visualize map\r\n            defineCoordinates();\r\n        }        \r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Location map control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular, google */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationMap\", []);\r\n\r\n    thisModule.directive('pipLocationMap',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipLocationPos: '&',\r\n                    pipLocationPositions: '&',\r\n                    pipIconPath: '&',\r\n                    pipDraggable: '&',\r\n                    pipStretch: '&'\r\n                },\r\n                template: '<div class=\"pip-location-container\"></div>',\r\n                controller: 'pipLocationMapController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationMapController',\r\n        ['$scope', '$element', '$attrs', '$parse', '$timeout', function ($scope, $element, $attrs, $parse, $timeout) {\r\n            var\r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null,\r\n                stretchMap = $scope.pipStretch() || false,\r\n                iconPath = $scope.pipIconPath();\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n            }\r\n\r\n            function checkLocation (loc) {\r\n                return !(loc == null\r\n                || loc.coordinates == null\r\n                || loc.coordinates.length < 0);\r\n            }\r\n\r\n            function determineCoordinates(loc) {\r\n                var point = new google.maps.LatLng(\r\n                    loc.coordinates[0],\r\n                    loc.coordinates[1]\r\n                );\r\n\r\n                point.fill = loc.fill;\r\n                point.stroke = loc.stroke;\r\n\r\n                return point;\r\n            }\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            function generateMap() {\r\n                var location = $scope.pipLocationPos(),\r\n                    locations = $scope.pipLocationPositions(),\r\n                    points = [],\r\n                    draggable = $scope.pipDraggable() || false;\r\n\r\n                // Safeguard for bad coordinates\r\n                if (checkLocation(location)) {\r\n                    points.push(determineCoordinates(location));\r\n                } else {\r\n                    if (locations && locations.length && locations.length > 0) {\r\n                        locations.forEach(function (loc) {\r\n                            if (checkLocation(loc)) {\r\n                                points.push(determineCoordinates(loc));\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                if (points.length === 0) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map\r\n                var\r\n                    mapOptions = {\r\n                        center: points[0],\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: draggable,\r\n                        draggable: draggable\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions),\r\n                    bounds = new google.maps.LatLngBounds();\r\n\r\n                // Create markers\r\n                points.forEach(function(point) {\r\n                    var icon = {\r\n                        path: iconPath,\r\n                        fillColor: point.fill || '#EF5350',\r\n                        fillOpacity: 1,\r\n                        scale: 1,\r\n                        strokeColor: point.stroke || 'white',\r\n                        strokeWeight: 5\r\n                    };\r\n\r\n                    new google.maps.Marker({\r\n                        position: point,\r\n                        map: map,\r\n                        icon: iconPath ? icon : null\r\n                    });\r\n                    bounds.extend(point);\r\n                });\r\n\r\n                // Auto-config of zoom and center\r\n                if (points.length > 1) map.fitBounds(bounds);\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch(\r\n                    function () {\r\n                        return $scope.pipLocationPos()\r\n                    },\r\n                    function () {\r\n                        generateMap();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location-map');\r\n            if (stretchMap) $mapContainer.addClass('stretch');\r\n\r\n            // Visualize map\r\n            if ($scope.pipLocationPos() || $scope.pipLocationPositions()) $timeout(generateMap, 200);\r\n            else clearMap();\r\n        }]\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipLocations', [        \r\n        'pipLocation',\r\n        'pipLocationMap',\r\n        'pipLocationIp',\r\n        'pipLocationEditDialog',\r\n        'pipLocationEdit',\r\n        'pipLocations.Translate'\r\n    ]);\r\n    \r\n})();\r\n\r\n\r\n","(function(module) {\ntry {\n  module = angular.module('pipLocations.Templates');\n} catch (e) {\n  module = angular.module('pipLocations.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('location_dialog/location_dialog.html',\n    '<md-dialog class=\"pip-dialog pip-location-edit-dialog layout-column\" md-theme=\"{{$ctrl.theme}}\"><div class=\"pip-header layout-column layout-align-start-start\"><md-progress-linear ng-show=\"$ctrl.transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\"></md-progress-linear><h3 class=\"flex\">{{ \\'LOCATION_SET_LOCATION\\' | translate }}</h3></div><div class=\"pip-footer\"><div class=\"layout-row layout-align-start-center\"><md-button class=\"md-accent\" ng-click=\"$ctrl.onAddPin()\" ng-show=\"$ctrl.locationPos == null\" ng-disabled=\"$ctrl.transaction.busy()\" aria-label=\"{{ ::\\'LOCATION_ADD_PIN\\' }}\">{{ ::\\'LOCATION_ADD_PIN\\' | translate }}</md-button><md-button class=\"md-accent\" ng-click=\"$ctrl.onRemovePin()\" ng-show=\"$ctrl.locationPos != null\" ng-disabled=\"$ctrl.transaction.busy()\" aria-label=\"{{ ::\\'LOCATION_REMOVE_PIN\\' }}\">{{ ::\\'LOCATION_REMOVE_PIN\\' | translate }}</md-button></div><div class=\"flex\"></div><div class=\"layout-row layout-align-end-center\"><md-button ng-click=\"$ctrl.onCancel()\" aria-label=\"{{ ::\\'CANCEL\\' }}\">{{ ::\\'CANCEL\\' | translate }}</md-button><md-button class=\"md-accent\" ng-click=\"$ctrl.onApply()\" ng-disabled=\"$ctrl.transaction.busy()\" aria-label=\"{{ ::\\'APPLY\\' }}\">{{ ::\\'APPLY\\' | translate }}</md-button></div></div><div class=\"pip-body\"><div class=\"pip-location-container\"></div><md-button class=\"md-icon-button md-fab pip-zoom-in\" ng-click=\"$ctrl.onZoomIn()\" aria-label=\"{{ ::\\'LOCATION_ZOOM_IN\\' }}\"><md-icon md-svg-icon=\"icons:plus\"></md-icon></md-button><md-button class=\"md-icon-button md-fab pip-zoom-out\" ng-click=\"$ctrl.onZoomOut()\" aria-label=\"{{ ::\\'LOCATION_ZOOM_OUT\\' }}\"><md-icon md-svg-icon=\"icons:minus\"></md-icon></md-button><md-button class=\"md-icon-button md-fab pip-set-location\" ng-click=\"$ctrl.onSetLocation()\" aria-label=\"{{ ::\\'LOCATION_SET_LOCATION\\' }}\" ng-show=\"supportSet\" ng-disabled=\"transaction.busy()\"><md-icon md-svg-icon=\"icons:target\"></md-icon></md-button></div></md-dialog>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-locations-html.min.js.map\n","export class ButtonsUpload {\r\n    public title: string;\r\n    public click: Function;\r\n}","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileFailController {\r\n    name: string;\r\n    type: string;\r\n    error: string;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileFailController implements IFileFailController {\r\n    public name: string;\r\n    public type: string;\r\n    public error: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n        this.type = $scope['type'] || 'file';\r\n        this.name = $scope['name'];\r\n        this.buttons = $scope['buttons'] || null;\r\n        this.error = $scope['error'] || null;\r\n        \r\n        $scope.$watch('error', (error: string) => {\r\n            this.error = error;\r\n        })\r\n      \r\n    }\r\n}","\r\nimport {FileSelectController} from './select/FileSelectController';\r\nimport {FileFailController} from './fail/FileFailController';\r\nimport {FileUploadService} from './service/FileUploadService';\r\n\r\nimport './success/index';\r\nimport './upload/index';\r\nimport './start/index';\r\n\r\n(() => {\r\n    function fileModelDirective($parse: any) {\r\n        \"ngInject\";\r\n\r\n        return {\r\n            restrict: 'A',\r\n            link: (scope, element, attrs) => {\r\n                let model = $parse(attrs.fileModel);\r\n                let modelSetter = model.assign;\r\n                \r\n                element.bind('change', () => {\r\n                    scope.$apply(() => {\r\n                        modelSetter(scope, element[0].files[0]);\r\n                    });\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function fileSelectDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            scope: {\r\n                localFile: '='\r\n            },\r\n            controller: FileSelectController,\r\n            controllerAs: 'vm',\r\n            templateUrl: 'select/FileSelect.html'\r\n        };\r\n    }\r\n     function fileFailDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileFailController,\r\n            controllerAs: 'vm',\r\n            scope: {\r\n                buttons: '=?pipButtons',\r\n                name: '=pipName',\r\n                type: '=?pipType',\r\n                error: '=pipError'\r\n            },\r\n            templateUrl: 'fail/FileFail.html'\r\n        };\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipFiles', ['pipFiles.SuccessUpload', 'pipFiles.FileUpload', 'pipFiles.StartUpload'])\r\n        .directive('fileModel', fileModelDirective)\r\n        .directive('pipFileSelect', fileSelectDirective)\r\n        .directive('pipFailUpload', fileFailDirective)\r\n        .service('pipFileUpload', FileUploadService);\r\n\r\n\r\n})();\r\n","export interface IFileSelectController {\r\n    localFile: any;\r\n    onUploadButtonClick(): void ;\r\n    onDeleteButtonClick(): void;\r\n}\r\n\r\nexport class FileSelectController implements IFileSelectController {\r\n    public localFile: any;\r\n    \r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        this.localFile = $scope['localFile'];\r\n        $scope.$watch('vm.localFile', (item) => {\r\n            $scope['localFile'] = item;\r\n        }) \r\n    }\r\n\r\n    public onUploadButtonClick(): void {\r\n        $('#inp_file').click();\r\n    }\r\n\r\n    public onDeleteButtonClick(): void {\r\n        this.localFile = null;\r\n        let forml = document.getElementById('inp_form');\r\n        (<any>forml).reset();\r\n\r\n    }\r\n}","export class FileUploadState {\r\n    public static All: string[] = ['start', 'upload', 'fail'];\r\n    public static Start: string = 'start';\r\n    public static Upload: string = 'upload';\r\n    public static Fail: string = 'fail';\r\n}\r\n\r\nexport interface IFileUploadService {\r\n    progress: number;\r\n    state: string;\r\n    error: string;\r\n    upload(url: string, file: any, transaction: any, callback?: (data: any, err: any) => void): void;\r\n}\r\n\r\nexport class FileUploadService implements IFileUploadService {\r\n    public progress: number;\r\n    public state: string;\r\n    public error: string = null;\r\n\r\n    public constructor( private $http: ng.IHttpService) {}\r\n\r\n    public upload(url: string, file: any, callback?: (data: any, err: any) => void): void {\r\n        \r\n        let fd: FormData = new FormData();\r\n        fd.append('file', file);\r\n        \r\n        this.progress = 0;\r\n        this.state = FileUploadState.Start;\r\n        this.$http.post(url, fd, <any>{\r\n            uploadEventHandlers: {\r\n                progress: (e: any) => {\r\n                    if (e.lengthComputable) {\r\n                        this.progress = (e.loaded / e.total) * 100;\r\n                    }\r\n                }\r\n            },\r\n            headers: { 'Content-Type': undefined }\r\n        })    \r\n        .success((response: any) => {\r\n            this.state = FileUploadState.Upload;\r\n\r\n            if (callback) callback(response, null);\r\n        })    \r\n        .error((response: any) => {\r\n            this.state = FileUploadState.Fail;\r\n            this.error = response.Error || response;\r\n\r\n            if (callback) callback(null, response);\r\n        });\r\n    }\r\n}","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileStartController {\r\n    name: string;\r\n    type: string;\r\n    progress: number;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileStartController implements IFileStartController {\r\n    public name: string;\r\n    public progress: number = 0;\r\n    public type: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n      \r\n        $scope.$watch('progress', (progress: number) => {\r\n            this.progress = progress;\r\n        })\r\n    }\r\n}","\r\nimport {FileStartController} from './FileStartController';\r\n\r\n(() => {\r\n \r\n    const fileStartDirective = {\r\n        restrict: 'E',\r\n        replace: true,\r\n        controller: FileStartController,\r\n        controllerAs: 'vm',\r\n        bindings: {\r\n            buttons: '=?pipButtons',\r\n            name: '=pipName',\r\n            type: '=?pipType',\r\n            progress: '=?pipProgress'\r\n        },\r\n        templateUrl: 'start/FileStart.html'\r\n    };\r\n\r\n    angular\r\n        .module('pipFiles.StartUpload', [])\r\n        .component('pipStartUpload', fileStartDirective)\r\n\r\n\r\n})();\r\n","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nimport { IFileSuccessBindings} from './index';\r\n\r\nexport interface IFileSuccessController {\r\n    name: string;\r\n    type: string;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileSuccessController implements IFileSuccessController, IFileSuccessBindings {\r\n    public name: string;\r\n    public type: string = 'file';\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor() {}\r\n\r\n    public $onChanges(changes) {}\r\n}","\r\nimport {FileSuccessController} from './FileSuccessController';\r\n\r\nexport interface IFileSuccessBindings {\r\n    [key: string]: any;\r\n\r\n    type: any\r\n    buttons: any,\r\n    name: any\r\n}\r\n\r\nconst FileSuccessBindings: IFileSuccessBindings = {\r\n    buttons: '=?pipButtons',\r\n    name: '=pipName',\r\n    type: '=?pipType',\r\n};\r\n\r\n(() => {\r\n \r\n     const fileSuccessDirective = {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileSuccessController,\r\n            controllerAs: 'vm',\r\n            bindings: FileSuccessBindings,\r\n            templateUrl: 'success/FileSuccess.html'\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipFiles.SuccessUpload', [])\r\n        .component('pipSuccesUpload', fileSuccessDirective)\r\n\r\n\r\n})();\r\n","\r\nimport {\r\n    IFileUploadService\r\n} from \"../service/FileUploadService\";\r\n\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nimport {\r\n    FileUploadChanges\r\n} from \"./index\";\r\n\r\nexport interface IFileUploadController {\r\n    name: string;\r\n    type: string;\r\n    state: string;\r\n    progress: number;\r\n    onCancel(): void;\r\n    onRetry(): void;\r\n    onAbort(): void;\r\n}\r\n\r\nexport class FileUploadButtons {\r\n    retry: Function;\r\n    cancel: Function;\r\n    abort: Function;\r\n}\r\n\r\nexport class FileUploadController implements IFileUploadController {\r\n    public buttonFunction: FileUploadButtons;\r\n    public uploadButtons: ButtonsUpload[];\r\n    public failButtons: ButtonsUpload[];\r\n    public startButtons: ButtonsUpload[];\r\n\r\n    public name: string;\r\n    public type: string;\r\n    public state: string;\r\n    public progress: number;\r\n    public buttons: boolean;\r\n    public error: string = null;\r\n\r\n    constructor( $scope: ng.IScope ) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n        if (this.buttonFunction) {\r\n            this.uploadButtons = [];\r\n            this.failButtons = [\r\n                {title: 'Cancel', click: () => { this.onCancel()}},\r\n                {title: 'Retry', click: () => { this.onRetry()}}\r\n            ];\r\n            this.startButtons = [\r\n                {title: 'Abort', click: () => { this.onAbort() }}\r\n            ];\r\n        }\r\n    }\r\n\r\n    \r\n    public $onChanges(changes: FileUploadChanges) {\r\n        if (changes.state) {\r\n            this.state = changes.state.currentValue;\r\n        }\r\n\r\n        if (changes.progress) {\r\n            this.progress = changes.progress.currentValue;\r\n        }\r\n\r\n        if (changes.error) {\r\n            this.error = changes.error.currentValue;\r\n        }\r\n\r\n    }\r\n\r\n    public onCancel(): void {\r\n        if (this.buttonFunction.cancel) this.buttonFunction.cancel();\r\n    }\r\n\r\n    public onRetry(): void {\r\n        if (this.buttonFunction.retry) this.buttonFunction.retry();\r\n    }\r\n\r\n    public onAbort() {\r\n        if (this.buttonFunction.abort) this.buttonFunction.abort();\r\n    }\r\n\r\n}","\r\nimport {FileUploadController, FileUploadButtons} from './FileUploadController';\r\n\r\nexport interface IFileUploadBindings {\r\n    [key: string]: any;\r\n\r\n    buttonFunction: any,\r\n    buttons: any,\r\n    error: any,\r\n    name: any,\r\n    state: any,\r\n    type: any,\r\n    progress: any\r\n}\r\n\r\nconst FileUploadBindings: IFileUploadBindings = {\r\n    buttonFunction: '<?pipButtonFunctions',\r\n    buttons: '<?pipButtons',\r\n    error: '<?pipError',\r\n    name: '<pipName',\r\n    state: '<pipState',\r\n    type: '<?pipType',\r\n    progress: '<pipProgress'\r\n}\r\n\r\nexport class FileUploadChanges implements ng.IOnChangesObject, IFileUploadBindings {\r\n    [key: string]: ng.IChangesObject<any>;\r\n    // Not one way bindings\r\n\r\n    buttonFunction: ng.IChangesObject<FileUploadButtons>;\r\n    buttons: ng.IChangesObject<boolean>;\r\n    error: ng.IChangesObject<string>;\r\n    name: ng.IChangesObject<string>;\r\n    state: ng.IChangesObject<string>;\r\n    type: ng.IChangesObject<string>;\r\n    progress: ng.IChangesObject<number>;\r\n    //currentButtonValue: any;\r\n    //currentButton: any;\r\n    //change: ng.IChangesObject<() => ng.IPromise<void>>;\r\n    // One way bindings\r\n}\r\n\r\nconst fileUploadDirective = {\r\n    controller: FileUploadController,\r\n    bindings: FileUploadBindings,\r\n    templateUrl: 'upload/FileUpload.html'\r\n};\r\n\r\n\r\n(() => {\r\n\r\n    angular\r\n        .module('pipFiles.FileUpload', [])\r\n        .component('pipFileUpload', fileUploadDirective)\r\n       \r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('fail/FileFail.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon color-badge-bg\"><md-icon md-svg-icon=\"icons:cross\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploading {{vm.type}} failed with errors!</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div><div class=\"color-error pip-error\">{{vm.error}}</div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons && vm.buttons.length > 0\"><div><md-button class=\"md-accent\" ng-repeat=\"fail in vm.buttons\" ng-click=\"fail.click()\">{{::fail.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('select/FileSelect.html',\n    '<div class=\"pip-file-select\"><form id=\"inp_form\" class=\"pip-hidden-form\"><input type=\"file\" file-model=\"vm.localFile\" id=\"inp_file\" ng-model=\"vm.localFile\"></form><md-button class=\"md-raised md-accent pip-button\" ng-click=\"vm.onUploadButtonClick()\" ng-if=\"!vm.localFile\">Choose File</md-button><div ng-if=\"vm.localFile.name\" class=\"pip-file layout-row layout-align-start-center\"><md-icon md-svg-icon=\"icons:document\" class=\"pip-icon\"></md-icon><div class=\"flex\"><div class=\"text-body2 text-overflow\">{{vm.localFile.name}}</div><div ng-if=\"vm.localFile.size\" class=\"color-secondary-text\">{{vm.localFile.size}}</div></div><md-button ng-click=\"vm.onDeleteButtonClick()\" class=\"md-icon-button\"><md-icon md-svg-icon=\"icons:cross-circle\"></md-icon></md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('start/FileStart.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon bb-orange\"><md-icon md-svg-icon=\"icons:play\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploading {{::vm.type}}</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div><div><md-progress-linear md-mode=\"determinate\" class=\"md-accent\" value=\"{{vm.progress}}\" ng-if=\"vm.progress < 100\"></md-progress-linear><md-progress-linear md-mode=\"indeterminate\" class=\"md-accent\" ng-if=\"vm.progress == 100\"></md-progress-linear></div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons\"><div><md-button class=\"md-accent\" ng-repeat=\"start in vm.buttons\" ng-click=\"start.click()\">{{start.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('success/FileSuccess.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon bb-green\"><md-icon md-svg-icon=\"icons:check\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploaded {{::vm.type}} successfully!</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons && vm.buttons.length > 0\"><div><md-button class=\"md-accent\" ng-repeat=\"start in vm.buttons\" ng-click=\"start.click()\">{{start.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('upload/FileUpload.html',\n    '<div><pip-succes-upload ng-if=\"$ctrl.state == \\'upload\\'\" pip-name=\"$ctrl.name\" pip-type=\"$ctrl.type\" pip-buttons=\"$ctrl.buttons\"></pip-succes-upload><pip-fail-upload ng-if=\"$ctrl.state == \\'fail\\'\" pip-name=\"$ctrl.name\" pip-type=\"$ctrl.type\" pip-error=\"$ctrl.error\" pip-buttons=\"$ctrl.failButtons\"></pip-fail-upload><pip-start-upload ng-if=\"$ctrl.state == \\'start\\'\" pip-name=\"$ctrl.name\" pip-type=\"$ctrl.type\" pip-progress=\"$ctrl.progress\" pip-buttons=\"$ctrl.startButtons\"></pip-start-upload></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-files-html.min.js.map\n","import './widgets/Widgets';\r\nimport './draggable/Draggable';\r\n\r\n(function () {\r\n  'use strict';\r\n\r\n  angular.module('pipDashboard', [\r\n    'pipWidget', \r\n    'pipDragged', \r\n    'pipWidgetConfigDialog', \r\n    'pipAddDashboardComponentDialog',\r\n    'pipDashboard.Templates',\r\n\r\n    // External pip modules\r\n    'pipLayout',\r\n    'pipLocations',\r\n    'pipDateTime',\r\n    'pipCharts',\r\n    'pipTranslate',\r\n    'pipControls'\r\n  ]);\r\n  \r\n})();\r\n\r\nimport './utility/WidgetTemplateUtility';\r\nimport './dialogs/widget_config/ConfigDialogController';\r\nimport './dialogs/add_component/AddComponentDialogController';\r\nimport './DashboardController';\r\nimport './DashboardComponent';\r\n","(function () {\r\n  'use strict';\r\n\r\n  const pipDashboard = {\r\n    bindings: {\r\n      gridOptions: '=pipGridOptions',\r\n      groupAdditionalActions: '=pipGroupActions',\r\n      groupedWidgets: '=pipGroups'\r\n    },\r\n    controller: 'pipDashboardCtrl',\r\n    controllerAs: 'dashboardCtrl',\r\n    templateUrl: 'Dashboard.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipDashboard')\r\n    .component('pipDashboard', pipDashboard);\r\n})();","'use strict';\r\n\r\nimport { IWidgetTemplateService } from './utility/WidgetTemplateUtility';\r\n\r\nfunction setTranslations($injector) {\r\n  var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n  if (pipTranslate) {\r\n    pipTranslate.setTranslations('en', {\r\n      DROP_TO_CREATE_NEW_GROUP: 'Drop here to create new group',\r\n    });\r\n    pipTranslate.setTranslations('ru', {\r\n      DROP_TO_CREATE_NEW_GROUP: '     '\r\n    });\r\n  }\r\n}\r\n\r\nfunction configureAvailableWidgets(pipAddComponentDialogProvider) {\r\n  pipAddComponentDialogProvider.configWidgetList([\r\n    [{\r\n        title: 'Event',\r\n        icon: 'document',\r\n        name: 'event',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Position',\r\n        icon: 'location',\r\n        name: 'position',\r\n        amount: 0\r\n      }\r\n    ],\r\n    [{\r\n        title: 'Calendar',\r\n        icon: 'date',\r\n        name: 'calendar',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Sticky Notes',\r\n        icon: 'note-take',\r\n        name: 'notes',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Statistics',\r\n        icon: 'tr-statistics',\r\n        name: 'statistics',\r\n        amount: 0\r\n      }\r\n    ]\r\n  ]);\r\n}\r\n\r\nimport { IAddComponentDialogService } from './dialogs/add_component/AddComponentProvider'\r\n\r\nclass draggableOptions {\r\n  tileWidth: number;\r\n  tileHeight: number;\r\n  gutter: number;\r\n  inline: boolean;\r\n}\r\n\r\nlet DEFAULT_GRID_OPTIONS: draggableOptions = {\r\n  tileWidth: 150, // 'px'\r\n  tileHeight: 150, // 'px'\r\n  gutter: 10, // 'px'\r\n  inline: false\r\n};\r\n\r\nclass DashboardController {\r\n  private defaultGroupMenuActions: any = [{\r\n      title: 'Add Component',\r\n      callback: (groupIndex) => {\r\n        this.addComponent(groupIndex);\r\n      }\r\n    },\r\n    {\r\n      title: 'Remove',\r\n      callback: (groupIndex) => {\r\n        this.removeGroup(groupIndex);\r\n      }\r\n    },\r\n    {\r\n      title: 'Configurate',\r\n      callback: (groupIndex) => {\r\n        console.log('configurate group with index:', groupIndex);\r\n      }\r\n    }\r\n  ];\r\n  private _$scope: angular.IScope;\r\n  private _$rootScope: angular.IRootScopeService;\r\n  private _$attrs: any;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _$interpolate: angular.IInterpolateService;\r\n  private _pipAddComponentDialog: IAddComponentDialogService;\r\n  private _pipWidgetTemplate: IWidgetTemplateService;\r\n  private _includeTpl: string = '<pip-{{ type }}-widget group=\"groupIndex\" index=\"index\"' +\r\n    'pip-options=\"$parent.dashboardCtrl.groupedWidgets[groupIndex][\\'source\\'][index].opts\">' +\r\n    '</pip-{{ type }}-widget>';\r\n\r\n  public groupedWidgets: any;\r\n  public draggableGridOptions: draggableOptions;\r\n  public widgetsTemplates: any;\r\n  public groupMenuActions: any = this.defaultGroupMenuActions;\r\n  public widgetsContext: any;\r\n\r\n  constructor(\r\n    $scope: angular.IScope,\r\n    $rootScope: angular.IRootScopeService,\r\n    $attrs: any,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    $interpolate: angular.IInterpolateService,\r\n    pipAddComponentDialog: IAddComponentDialogService,\r\n    pipWidgetTemplate: IWidgetTemplateService\r\n  ) {\r\n    this._$scope = $scope;\r\n    this._$rootScope = $rootScope;\r\n    this._$attrs = $attrs;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    this._$interpolate = $interpolate;\r\n    this._pipAddComponentDialog = pipAddComponentDialog;\r\n    this._pipWidgetTemplate = pipWidgetTemplate;\r\n\r\n    // Add class to style scroll bar\r\n    $element.addClass('pip-scroll');\r\n\r\n    // Set tiles grid options\r\n    this.draggableGridOptions = $scope['gridOptions'] || DEFAULT_GRID_OPTIONS;\r\n\r\n    // Switch inline displaying\r\n    if (this.draggableGridOptions.inline === true) {\r\n      $element.addClass('inline-grid');\r\n    }\r\n    // Extend group's menu actions\r\n    if ($scope['groupAdditionalActions']) angular.extend(this.groupMenuActions, $scope['groupAdditionalActions']);\r\n\r\n    // Compile widgets\r\n    this.widgetsContext = $scope;\r\n    this.compileWidgets();\r\n\r\n    this._$timeout(() => {\r\n      this._$element.addClass('visible');\r\n    }, 700);\r\n  }\r\n\r\n  private compileWidgets() {\r\n    _.each(this.groupedWidgets, (group, groupIndex) => {\r\n        group.removedWidgets = group.removedWidgets || [],\r\n        group.source = group.source.map((widget, index) => {\r\n          // Establish default props\r\n          widget.size = widget.size || {\r\n            colSpan: 1,\r\n            rowSpan: 1\r\n          };\r\n          widget.index = index;\r\n          widget.groupIndex = groupIndex;\r\n          widget.menu = widget.menu || {};\r\n          angular.extend(widget.menu, [{\r\n            title: 'Remove',\r\n            click: (item, params, object) => {\r\n              this.removeWidget(item, params, object);\r\n            }\r\n          }]);\r\n\r\n          return {\r\n            opts: widget,\r\n            template: this._pipWidgetTemplate.getTemplate(widget, this._includeTpl)\r\n          };\r\n        })\r\n    });\r\n  }\r\n\r\n  public addComponent(groupIndex) {\r\n    this._pipAddComponentDialog\r\n      .show(this.groupedWidgets, groupIndex)\r\n      .then((data) => {\r\n        var activeGroup;\r\n\r\n        if (!data) {\r\n          return;\r\n        }\r\n\r\n        if (data.groupIndex !== -1) {\r\n          activeGroup = this.groupedWidgets[data.groupIndex];\r\n        } else {\r\n          activeGroup = {\r\n            title: 'New group',\r\n            source: []\r\n          };\r\n        }\r\n\r\n        this.addWidgets(activeGroup.source, data.widgets);\r\n\r\n        if (data.groupIndex === -1) {\r\n          this.groupedWidgets.push(activeGroup);\r\n        }\r\n\r\n        this.compileWidgets();\r\n      });\r\n  };\r\n\r\n  public removeGroup = (groupIndex) => {\r\n    console.log('removeGroup', groupIndex);\r\n    this.groupedWidgets.splice(groupIndex, 1);\r\n  }\r\n\r\n  private addWidgets(group, widgets) {\r\n    widgets.forEach((widgetGroup) => {\r\n      widgetGroup.forEach((widget) => {\r\n        if (widget.amount) {\r\n          Array.apply(null, Array(widget.amount)).forEach(() => {\r\n            group.push({\r\n              type: widget.name\r\n            });\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private removeWidget(item, params, object) {\r\n    this.groupedWidgets[params.options.groupIndex].removedWidgets = [];\r\n    this.groupedWidgets[params.options.groupIndex].removedWidgets.push(params.options.index);\r\n    this.groupedWidgets[params.options.groupIndex].source.splice(params.options.index, 1);\r\n    this._$timeout(() => {\r\n      this.groupedWidgets[params.options.groupIndex].removedWidgets = [];\r\n    });\r\n  }\r\n\r\n}\r\n\r\nangular\r\n  .module('pipDashboard')\r\n  .config(configureAvailableWidgets)\r\n  .run(setTranslations)\r\n  .controller('pipDashboardCtrl', DashboardController);","'use strict';\r\n\r\nexport class AddComponentDialogController {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    public activeGroupIndex: number;\r\n    public defaultWidgets: any;\r\n    public groups: any;\r\n\r\n    constructor(\r\n        groups, \r\n        activeGroupIndex, \r\n        widgetList,\r\n        $mdDialog: angular.material.IDialogService\r\n    ) {\r\n        this.activeGroupIndex = _.isNumber(activeGroupIndex) ? activeGroupIndex : -1;\r\n        this.defaultWidgets   = _.cloneDeep(widgetList);\r\n        this.groups = _.map(groups, function (group) {\r\n          return group['title'];\r\n        });\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n\r\n    public add () {\r\n          this._mdDialog.hide({\r\n            groupIndex: this.activeGroupIndex,\r\n            widgets   : this.defaultWidgets\r\n          });\r\n        };\r\n\r\n    public cancel () {\r\n          this._mdDialog.cancel();\r\n        };\r\n\r\n    public encrease (groupIndex, widgetIndex) {\r\n          var widget = this.defaultWidgets[groupIndex][widgetIndex];\r\n          widget.amount++;\r\n    };\r\n\r\n    public decrease (groupIndex, widgetIndex) {\r\n          var widget    = this.defaultWidgets[groupIndex][widgetIndex];\r\n          widget.amount = widget.amount ? widget.amount - 1 : 0;\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipAddDashboardComponentDialog', ['ngMaterial'])\r\n    .controller('pipAddDashboardComponentDialogController', AddComponentDialogController);\r\n\r\nimport './AddComponentProvider';","'use strict';\r\n\r\nexport interface IAddComponentDialogService {\r\n  show(groups, activeGroupIndex): any;\r\n}\r\n\r\nclass AddComponentDialogService implements IAddComponentDialogService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    private _widgetList: any;\r\n\r\n    public constructor(widgetList: any, $mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n        this._widgetList = widgetList;\r\n    }\r\n\r\n    public show(groups, activeGroupIndex) {\r\n        return this._mdDialog\r\n          .show({\r\n            templateUrl     : 'dialogs/add_component/AddComponent.html',\r\n            bindToController: true,\r\n            controller      : 'pipAddDashboardComponentDialogController',\r\n            controllerAs    : 'dialogCtrl',\r\n            resolve: {\r\n              groups: () => {\r\n                return groups;\r\n              },\r\n              activeGroupIndex: () => {\r\n                return activeGroupIndex;\r\n              },\r\n              widgetList: () => {\r\n                return this._widgetList;\r\n              }\r\n           }\r\n          });\r\n      };\r\n}\r\n\r\nclass AddComponentDialogProvider {\r\n  private _service: AddComponentDialogService;\r\n  private _widgetList: any = null;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public configWidgetList = function (list) {\r\n      this._widgetList = list;\r\n  };\r\n\r\n  public $get($mdDialog: angular.material.IDialogService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new AddComponentDialogService(this._widgetList, $mdDialog);\r\n        \r\n        return this._service;\r\n  }\r\n}\r\n\r\nangular\r\n    .module('pipDashboard')\r\n    .provider('pipAddComponentDialog', AddComponentDialogProvider);\r\n","'use strict';\r\n\r\nclass TileColors {\r\n    static all: string[] = ['purple', 'green', 'gray', 'orange', 'blue'];\r\n}\r\n\r\nclass TileSizes {\r\n    static all: any = [\r\n        {name: 'SMALL', id: '11'},\r\n        {name: 'WIDE', id: '21'},\r\n        {name: 'LARGE', id: '22'}\r\n    ];\r\n}\r\n\r\nexport class WidgetConfigDialogController {\r\n    public dialogTitle: string = \"Edit tile\";\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public transclude: any;\r\n    public params: any;\r\n    public colors: string[] = TileColors.all;\r\n    public sizes: any = TileSizes.all;\r\n    public sizeId: string = TileSizes.all[0].id;\r\n\r\n    private _$element: any;\r\n    private _$timeout: angular.ITimeoutService;\r\n\r\n    constructor(\r\n        params,\r\n        $mdDialog: angular.material.IDialogService,\r\n        $compile: angular.ICompileService,\r\n        $timeout: angular.ITimeoutService,\r\n        $injector,\r\n        $scope: angular.IScope,\r\n        $rootScope) {\r\n        \"ngInject\";\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this._$timeout = $timeout;\r\n\r\n        this.params = params;\r\n        angular.extend(this, this.params);\r\n        this.sizeId = '' + this.params.size.colSpan + this.params.size.rowSpan;\r\n    }\r\n\r\n    public onApply(): void {\r\n        this['size'].sizeX = Number(this.sizeId.substr(0, 1));\r\n        this['size'].sizeY = Number(this.sizeId.substr(1, 1));\r\n        this.$mdDialog.hide(this);\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipWidgetConfigDialog', ['ngMaterial'])\r\n    .controller('pipWidgetConfigDialogController', WidgetConfigDialogController);\r\n\r\nimport './ConfigDialogService';\r\nimport './ConfigDialogExtendComponent';","\r\n(() => {\r\n    'use strict';\r\n    \r\n    function pipWidgetConfigComponent(\r\n        $templateRequest: angular.ITemplateRequestService,\r\n        $compile: angular.ICompileService\r\n    ) {\r\n        return {\r\n            restrict: 'E',\r\n            templateUrl: 'dialogs/widget_config/ConfigDialogExtendComponent.html',\r\n            scope: false,\r\n            link: ($scope: angular.IScope, $element: any, $attrs: any) => {\r\n                $templateRequest($attrs.pipExtensionUrl, false).then((html) => {\r\n                    $element.find('pip-extension-point').replaceWith($compile(html)($scope));\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipWidgetConfigDialog')\r\n        .directive('pipWidgetConfigExtendComponent', pipWidgetConfigComponent);\r\n\r\n})();","export interface IWidgetConfigService {\r\n    show(params: any, successCallback?: (key) => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass WidgetConfigDialogService {\r\n  public _mdDialog: angular.material.IDialogService;\r\n    public constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public show(params, successCallback?: (key) => void, cancelCallback?: () => void) {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: params.templateUrl || 'dialogs/widget_config/ConfigDialog.html',\r\n            controller: 'pipWidgetConfigDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then((key) => {\r\n            if (successCallback) {\r\n                successCallback(key);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });         \r\n    }\r\n}\r\n\r\n\r\n(() => {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidgetConfigDialog')\r\n    .service('pipWidgetConfigDialogService', WidgetConfigDialogService);\r\n  \r\n})();\r\n","(function () {\r\n  'use strict';\r\n\r\n  angular.module('pipDragged', []);\r\n})();\r\n\r\nimport './DraggableTileService';\r\nimport './DraggableController';\r\nimport './DraggableDirective';\r\nimport './draggable_group/DraggableTilesGroupService'\r\nimport './draggable_group/DraggableTilesGroupDirective'","'use strict';\r\n\r\ndeclare var interact;\r\n\r\nimport { DragTileService, IDragTileService, IDragTileConstructor } from './DraggableTileService';\r\nimport { TilesGridService, ITilesGridService, ITilesGridConstructor } from './draggable_group/DraggableTilesGroupService';\r\n\r\nlet SIMPLE_LAYOUT_COLUMNS_COUNT: number = 2;\r\nexport let DEFAULT_TILE_WIDTH: number = 150;\r\nexport let DEFAULT_TILE_HEIGHT: number = 150;\r\nexport let UPDATE_GROUPS_EVENT = \"pipUpdateDashboardGroupsConfig\";\r\n\r\nlet DEFAULT_OPTIONS = {\r\n    tileWidth              : DEFAULT_TILE_WIDTH,   // 'px'\r\n    tileHeight             : DEFAULT_TILE_HEIGHT,   // 'px'\r\n    gutter                 : 20,    // 'px'\r\n    container              : 'pip-draggable-grid:first-of-type',\r\n    //mobileBreakpoint       : XXX,   // Get from pipMedia Service in the constructor\r\n    activeDropzoneClass    : 'dropzone-active',\r\n    groupContaninerSelector: '.pip-draggable-group:not(.fict-group)',\r\n};\r\n\r\nclass DraggableController {\r\n  public opts: any;\r\n  public groups: any;\r\n  public sourceDropZoneElem: any = null;\r\n  public isSameDropzone: boolean = true;\r\n  public tileGroups: any = null;\r\n  public availableWidth: any;\r\n  public availableColumns: any;\r\n  public groupsContainers: any;\r\n  public container: any;\r\n  public activeDraggedGroup: any;\r\n  public draggedTile: any;\r\n  public containerOffset: any;\r\n\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _$rootScope: angular.IRootScopeService;\r\n  private _$scope: angular.IScope;\r\n  private _$compile: angular.ICompileService;\r\n  private _$element: any;\r\n\r\n  constructor(\r\n    $scope: angular.IScope, \r\n    $rootScope: angular.IRootScopeService, \r\n    $compile: angular.ICompileService, \r\n    $timeout: angular.ITimeoutService,\r\n    $element: any, \r\n    pipDragTile: IDragTileService, \r\n    pipTilesGrid: ITilesGridService,\r\n    pipMedia: pip.layouts.IMediaService\r\n  ) {\r\n    this._$timeout = $timeout;\r\n    this._$rootScope = $rootScope;\r\n    this._$scope = $scope;\r\n    this._$compile = $compile;\r\n    this._$element = $element;\r\n\r\n    this.opts = _.merge({ mobileBreakpoint: pipMedia.breakpoints.xs }, DEFAULT_OPTIONS, $scope['draggableCtrl'].options);\r\n\r\n    this.groups = $scope['draggableCtrl'].tilesTemplates.map((group, groupIndex) => {\r\n      return {\r\n        title : group.title,\r\n        editingName : false,\r\n        index: groupIndex,\r\n        source: group.source.map((tile) => {\r\n          let tileScope = $rootScope.$new(false, $scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex;\r\n\r\n          return IDragTileConstructor(DragTileService, {\r\n            tpl    : $compile(tile.template)(tileScope),\r\n            options: tile.opts,\r\n            size   : tile.opts.size\r\n          });\r\n        })\r\n      };\r\n    });\r\n\r\n    // Add templates watcher\r\n    $scope.$watch('draggableCtrl.tilesTemplates', (newVal) => {\r\n      this.watch(newVal);\r\n    }, true);\r\n\r\n    // Initialize data\r\n    this.initialize();\r\n\r\n    // Resize handler TODO: replace by pip resize watchers\r\n    $(window).on('resize', _.debounce(() => {\r\n      this.availableWidth   = this.getContainerWidth();\r\n      this.availableColumns = this.getAvailableColumns(this.availableWidth);\r\n\r\n      this.tileGroups.forEach((group) => {\r\n        group\r\n          .setAvailableColumns(this.availableColumns)\r\n          .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n          .setTilesDimensions()\r\n          .calcContainerHeight();\r\n      });\r\n    }, 50));\r\n  }\r\n\r\n  // Watch handler\r\n  private watch(newVal) {\r\n      const prevVal = this.groups;\r\n      let changedGroupIndex = null;\r\n\r\n      if (newVal.length > prevVal.length) {\r\n        this.addGroup(newVal[newVal.length - 1]);\r\n\r\n        return;\r\n      }\r\n\r\n      if (newVal.length < prevVal.length) {\r\n        this.removeGroups(newVal);\r\n\r\n        return;\r\n      }\r\n\r\n      for (let i = 0; i < newVal.length; i++) {\r\n        const groupWidgetDiff = prevVal[i].source.length - newVal[i].source.length;\r\n        if (groupWidgetDiff || (newVal[i].removedWidgets && newVal[i].removedWidgets.length > 0)) {\r\n          changedGroupIndex = i;\r\n\r\n          if (groupWidgetDiff < 0) {\r\n            const newTiles = newVal[changedGroupIndex].source.slice(groupWidgetDiff);\r\n            \r\n            _.each(newTiles, (tile) => {\r\n              console.log('tile', tile);\r\n            });\r\n\r\n            this.addTilesIntoGroup(newTiles, this.tileGroups[changedGroupIndex], this.groupsContainers[changedGroupIndex]);\r\n\r\n            this._$timeout(() => { this.updateTilesGroups(); });\r\n          } else {\r\n            this.removeTiles(this.tileGroups[changedGroupIndex], newVal[changedGroupIndex].removedWidgets, this.groupsContainers[changedGroupIndex]);\r\n            this.updateTilesOptions(newVal);\r\n            this._$timeout(() => { this.updateTilesGroups(); });\r\n          }\r\n\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (newVal && this.tileGroups) {\r\n        this.updateTilesOptions(newVal);\r\n        this._$timeout(() => { this.updateTilesGroups(); });\r\n      }\r\n  }\r\n\r\n  // Inline edit group handlers\r\n  public onTitleClick(group, event) {\r\n      if (!group.editingName) {\r\n        group.oldTitle = _.clone(group.title);\r\n        group.editingName = true;\r\n        this._$timeout(() => {\r\n          $(event.currentTarget.children[0]).focus();\r\n        });\r\n      }\r\n  }\r\n\r\n  public cancelEditing (group) {\r\n      group.title = group.oldTitle;\r\n    }\r\n\r\n    public onBlurTitleInput (group) {\r\n      this._$timeout(() => {\r\n        group.editingName = false;\r\n        this._$rootScope.$broadcast(UPDATE_GROUPS_EVENT, this.groups);\r\n        // Update title in outer scope\r\n        this._$scope['draggableCtrl'].tilesTemplates[group.index].title = group.title;\r\n      }, 100);\r\n    }\r\n\r\n    public onKyepressTitleInput (group, event) {\r\n      if (event.keyCode === 13) {\r\n        this.onBlurTitleInput(group);\r\n      }\r\n    }\r\n\r\n    // Update outer scope functions\r\n    private updateTilesTemplates(updateType: string, source?: any) {\r\n      switch(updateType) {\r\n        case 'addGroup': \r\n          if (this.groups.length !== this._$scope['draggableCtrl'].tilesTemplates.length) {\r\n              this._$scope['draggableCtrl'].tilesTemplates.push(source);\r\n          }          \r\n          break;\r\n        case 'moveTile': \r\n          const {fromIndex, toIndex, tileOptions, fromTileIndex} = {\r\n            fromIndex: source.from.elem.attributes['data-group-id'].value,\r\n            toIndex: source.to.elem.attributes['data-group-id'].value,\r\n            tileOptions: source.tile.opts.options,\r\n            fromTileIndex: source.tile.opts.options.index\r\n          }\r\n          this._$scope['draggableCtrl'].tilesTemplates[fromIndex].source.splice(fromTileIndex, 1);\r\n          this._$scope['draggableCtrl'].tilesTemplates[toIndex].source.push({opts: tileOptions});\r\n\r\n          this.reIndexTiles(source.from.elem);\r\n          this.reIndexTiles(source.to.elem);\r\n          break;\r\n      }\r\n    }\r\n\r\n    // Manage tiles functions\r\n    private removeTiles(group, indexes, container) {\r\n      const tiles = $(container).find('.pip-draggable-tile');\r\n\r\n      _.each(indexes, (index) => {\r\n        group.tiles.splice(index, 1);\r\n        tiles[index].remove();\r\n      });\r\n\r\n      this.reIndexTiles(container);\r\n    }\r\n\r\n    private reIndexTiles(container, gIndex?) {\r\n      const tiles = $(container).find('.pip-draggable-tile'),\r\n            groupIndex = gIndex === undefined ? container.attributes['data-group-id'].value : gIndex;\r\n\r\n      _.each(tiles, (tile, index) => {\r\n        let child = $(tile).children()[0];\r\n        angular.element(child).scope()['index'] = index;\r\n        angular.element(child).scope()['groupIndex'] = groupIndex;\r\n      });\r\n    }\r\n\r\n    private removeGroups(newGroups) {\r\n      const removeIndexes = [],\r\n            remain = [],\r\n            containers = [];\r\n\r\n\r\n      _.each(this.groups, (group, index) => {\r\n          if (_.findIndex(newGroups, (g) => { return g['title'] === group.title}) < 0) {\r\n            removeIndexes.push(index);\r\n          } else {\r\n            remain.push(index);\r\n          }\r\n      });\r\n\r\n      _.each(removeIndexes.reverse(), (index) => {\r\n          this.groups.splice(index, 1);\r\n          this.tileGroups.splice(index, 1);\r\n      });\r\n\r\n      _.each(remain, (index) => {\r\n          containers.push(this.groupsContainers[index]);\r\n      });\r\n      \r\n       this.groupsContainers = containers;\r\n\r\n      _.each(this.groupsContainers, (container, index) => {\r\n          this.reIndexTiles(container, index);\r\n      });\r\n    }\r\n\r\n    private addGroup(sourceGroup) {\r\n      let group = {\r\n        title : sourceGroup.title,\r\n        source: sourceGroup.source.map((tile) => {\r\n          let tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n          return IDragTileConstructor(DragTileService, {\r\n            tpl    : this._$compile(tile.template)(tileScope),\r\n            options: tile.opts,\r\n            size   : tile.opts.size\r\n          });\r\n        })\r\n      };\r\n\r\n      this.groups.push(group);\r\n      if (!this._$scope.$$phase) this._$scope.$apply();\r\n\r\n      this._$timeout(() => {\r\n        this.groupsContainers = document.querySelectorAll(this.opts.groupContaninerSelector);\r\n        this.tileGroups.push(\r\n          ITilesGridConstructor(TilesGridService, group.source, this.opts, this.availableColumns, this.groupsContainers[this.groupsContainers.length - 1])\r\n            .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n            .setTilesDimensions()\r\n            .calcContainerHeight()\r\n        );\r\n      });\r\n\r\n      this.updateTilesTemplates('addGroup', sourceGroup);\r\n    }\r\n\r\n    private addTilesIntoGroup(newTiles, group, groupContainer) {\r\n      newTiles.forEach((tile) => {\r\n        const tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n        tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n        tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n\r\n        const newTile = IDragTileConstructor(DragTileService,{\r\n          tpl    : this._$compile(tile.template)(tileScope),\r\n          options: tile.opts,\r\n          size   : tile.opts.size\r\n        });\r\n\r\n        group.addTile(newTile);\r\n\r\n        $('<div>')\r\n          .addClass('pip-draggable-tile')\r\n          .append(newTile.getCompiledTemplate())\r\n          .appendTo(groupContainer);\r\n      });\r\n    }\r\n\r\n    private updateTilesOptions(optionsGroup) {\r\n      optionsGroup.forEach((optionGroup) => {\r\n        optionGroup.source.forEach((tileOptions) => {\r\n          this.tileGroups.forEach((group) => {\r\n            group.updateTileOptions(tileOptions.opts);\r\n          });\r\n        });\r\n      });\r\n    }\r\n\r\n    private initTilesGroups(tileGroups, opts, groupsContainers) {\r\n      return tileGroups.map((group, index) => {\r\n        return ITilesGridConstructor(TilesGridService, group.source, opts, this.availableColumns, groupsContainers[index])\r\n          .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n          .setTilesDimensions()\r\n          .calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private updateTilesGroups(onlyPosition?, draggedTile?) {\r\n      this.tileGroups.forEach((group) => {\r\n        if (!onlyPosition) {\r\n          group.generateGrid(this.getSingleTileWidthForMobile(this.availableWidth));\r\n        }\r\n\r\n        group\r\n          .setTilesDimensions(onlyPosition, draggedTile)\r\n          .calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private getContainerWidth(): any {\r\n      const container = this._$scope['$container'] || $('body');\r\n      return container.width();\r\n    }\r\n\r\n    private getAvailableColumns(availableWidth): any {\r\n      return this.opts.mobileBreakpoint > availableWidth ? SIMPLE_LAYOUT_COLUMNS_COUNT\r\n        : Math.floor(availableWidth / (this.opts.tileWidth + this.opts.gutter));\r\n    }\r\n\r\n    private getActiveGroupAndTile(elem): any {\r\n      const active = {};\r\n\r\n      this.tileGroups.forEach((group) => {\r\n        const foundTile = group.getTileByNode(elem);\r\n\r\n        if (foundTile) {\r\n          active['group'] = group;\r\n          active['tile']  = foundTile;\r\n          return;\r\n        }\r\n      });\r\n\r\n      return active;\r\n    }\r\n\r\n    private getSingleTileWidthForMobile(availableWidth): any {\r\n      return this.opts.mobileBreakpoint > availableWidth ? availableWidth / 2 - this.opts.gutter : null;\r\n    }\r\n\r\n    private onDragStartListener(event) {\r\n      const activeEntities = this.getActiveGroupAndTile(event.target);\r\n\r\n      this.container          = $(event.target).parent('.pip-draggable-group').get(0);\r\n      this.draggedTile        = activeEntities['tile'];\r\n      this.activeDraggedGroup = activeEntities['group'];\r\n      \r\n      this._$element.addClass('drag-transfer');\r\n\r\n      this.draggedTile.startDrag();\r\n    }\r\n\r\n    private onDragMoveListener(event) {\r\n      const target = event.target;\r\n      const x      = (parseFloat(target.style.left) || 0) + event.dx;\r\n      const y      = (parseFloat(target.style.top) || 0) + event.dy;\r\n\r\n      this.containerOffset = this.getContainerOffset();\r\n\r\n      target.style.left = x + 'px'; // TODO [apidhirnyi] Extract units into options section\r\n      target.style.top  = y + 'px';\r\n\r\n      const belowElement = this.activeDraggedGroup.getTileByCoordinates({\r\n        left: event.pageX - this.containerOffset.left,\r\n        top : event.pageY - this.containerOffset.top\r\n      }, this.draggedTile);\r\n\r\n      if (belowElement) {\r\n        const draggedTileIndex = this.activeDraggedGroup.getTileIndex(this.draggedTile);\r\n        const belowElemIndex   = this.activeDraggedGroup.getTileIndex(belowElement);\r\n\r\n        if ((draggedTileIndex + 1) === belowElemIndex) {\r\n          return;\r\n        }\r\n\r\n        this.activeDraggedGroup\r\n          .swapTiles(this.draggedTile, belowElement)\r\n          .setTilesDimensions(true, this.draggedTile);\r\n\r\n        this._$timeout(() => { this.setGroupContainersHeight(); }, 0);\r\n      }\r\n    }\r\n\r\n    private onDragEndListener() {\r\n      this.draggedTile.stopDrag(this.isSameDropzone);\r\n\r\n      this._$element.removeClass('drag-transfer');\r\n      this.activeDraggedGroup = null;\r\n      this.draggedTile        = null;\r\n    }\r\n\r\n    private getContainerOffset() {\r\n      const containerRect = this.container.getBoundingClientRect();\r\n\r\n      return {\r\n        left: containerRect.left,\r\n        top : containerRect.top\r\n      };\r\n    }\r\n\r\n    private setGroupContainersHeight() {\r\n      this.tileGroups.forEach((tileGroup) => {\r\n        tileGroup.calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private moveTile(from, to, tile) {\r\n      let elem;\r\n      const movedTile = from.removeTile(tile);\r\n      const tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n\r\n      $(this.groupsContainers[_.findIndex(this.tileGroups, from)])\r\n        .find(movedTile.getElem())\r\n        .remove();\r\n\r\n      if (to !== null) {\r\n        to.addTile(movedTile);\r\n\r\n        elem = this._$compile(movedTile.getElem())(tileScope);\r\n\r\n        $(this.groupsContainers[_.findIndex(this.tileGroups, to)])\r\n          .append(elem);\r\n\r\n        this._$timeout(to.setTilesDimensions.bind(to, true));\r\n      }\r\n\r\n      this.updateTilesTemplates('moveTile', {from: from, to: to, tile: movedTile});\r\n    }\r\n\r\n    private onDropListener(event) {\r\n      const droppedGroupIndex = event.target.attributes['data-group-id'].value;\r\n      const droppedGroup      = this.tileGroups[droppedGroupIndex];\r\n\r\n      if (this.activeDraggedGroup !== droppedGroup) {\r\n        this.moveTile(this.activeDraggedGroup, droppedGroup, this.draggedTile);\r\n      }\r\n\r\n      this.updateTilesGroups(true);\r\n      this.sourceDropZoneElem = null;\r\n    }\r\n\r\n    private onDropToFictGroupListener(event) {\r\n      const from = this.activeDraggedGroup;\r\n      const tile = this.draggedTile;\r\n\r\n      this.addGroup({title: 'New group', source: []});\r\n      this._$timeout(() => {\r\n        this.moveTile(from, this.tileGroups[this.tileGroups.length - 1], tile);\r\n        this.updateTilesGroups(true);\r\n      });\r\n\r\n      this.sourceDropZoneElem = null;\r\n    }\r\n\r\n    private onDropEnterListener(event) {\r\n      if (!this.sourceDropZoneElem) {\r\n        this.sourceDropZoneElem = event.dragEvent.dragEnter;\r\n      }\r\n\r\n      if (this.sourceDropZoneElem !== event.dragEvent.dragEnter) {\r\n        event.dragEvent.dragEnter.classList.add('dropzone-active');\r\n        $('body').css('cursor', 'copy');\r\n        this.isSameDropzone = false;\r\n      } else {\r\n        $('body').css('cursor', '');\r\n        this.isSameDropzone = true;\r\n      }\r\n    }\r\n\r\n    private onDropDeactivateListener(event) {\r\n      if (this.sourceDropZoneElem !== event.target) {\r\n        event.target.classList.remove(this.opts.activeDropzoneClass);\r\n        $('body').css('cursor', '');\r\n      }\r\n    }\r\n\r\n    private onDropLeaveListener(event) {\r\n      event.target.classList.remove(this.opts.activeDropzoneClass);\r\n    }\r\n\r\n    private initialize() {\r\n      this._$timeout(() => {\r\n        this.availableWidth   = this.getContainerWidth();\r\n        this.availableColumns = this.getAvailableColumns(this.availableWidth);\r\n        this.groupsContainers = document.querySelectorAll(this.opts.groupContaninerSelector);\r\n        this.tileGroups       = this.initTilesGroups(this.groups, this.opts, this.groupsContainers);\r\n\r\n        interact('.pip-draggable-tile')\r\n          .draggable({\r\n            // enable autoScroll\r\n            autoScroll: true,\r\n            onstart: (event) => { this.onDragStartListener(event) },\r\n            onmove : (event) => { this.onDragMoveListener(event) },\r\n            onend  : (event) => { this.onDragEndListener() }\r\n          });\r\n        \r\n        interact('.pip-draggable-group.fict-group')\r\n          .dropzone({\r\n            ondrop: (event) => { console.log('here');  this.onDropToFictGroupListener(event) },\r\n            ondragenter     : (event) => { this.onDropEnterListener(event) },\r\n            ondropdeactivate: (event) => { this.onDropDeactivateListener(event) },\r\n            ondragleave     : (event) => { this.onDropLeaveListener(event) }\r\n          })\r\n        \r\n        interact('.pip-draggable-group')\r\n          .dropzone({\r\n            ondrop          : (event) => { this.onDropListener(event) },\r\n            ondragenter     : (event) => { this.onDropEnterListener(event) },\r\n            ondropdeactivate: (event) => { this.onDropDeactivateListener(event) },\r\n            ondragleave     : (event) => { this.onDropLeaveListener(event) }\r\n          });\r\n\r\n        this._$scope['$container']\r\n          .on('mousedown touchstart', 'md-menu .md-icon-button', () => {\r\n            interact('.pip-draggable-tile').draggable(false);\r\n            $(this).trigger('click');\r\n          })\r\n          .on('mouseup touchend', () => {\r\n            interact('.pip-draggable-tile').draggable(true);\r\n          });\r\n      }, 0);\r\n    }\r\n\r\n}\r\n\r\n\r\nangular\r\n    .module('pipDragged')\r\n    .controller('pipDraggableCtrl', DraggableController);\r\n","'use strict';\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .directive('pipDraggableGrid', DragDirective);\r\n\r\nfunction DragDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    scope: {\r\n      tilesTemplates: '=pipTilesTemplates',\r\n      tilesContext: '=pipTilesContext',\r\n      options: '=pipDraggableGrid',\r\n      groupMenuActions: '=pipGroupMenuActions'\r\n    },\r\n    templateUrl: 'draggable/Draggable.html',\r\n    bindToController: true,\r\n    controllerAs: 'draggableCtrl',\r\n    controller: 'pipDraggableCtrl',\r\n    link: function ($scope, $elem) {\r\n      $scope.$container = $elem;\r\n    }\r\n  };\r\n}","'use strict';\r\n\r\nexport interface DragTileConstructor {\r\n  new (options: any);\r\n}\r\n\r\nexport function IDragTileConstructor(constructor: DragTileConstructor, options: any): IDragTileService {\r\n  return new constructor(options);\r\n}\r\n\r\nexport interface IDragTileService {\r\n  tpl: any;\r\n  opts: any;\r\n  size: any;\r\n  elem: any;\r\n  preview: any;\r\n  getSize(): any;\r\n  setSize(width, height): any;\r\n  setPosition(left, top): any;\r\n  getCompiledTemplate(): any;\r\n  updateElem(parent): any;\r\n  getElem(): any;\r\n  startDrag(): any;\r\n  stopDrag(isAnimate): any;\r\n  setPreviewPosition(coords): void;\r\n  getOptions(): any;\r\n  setOptions(options): any;\r\n}\r\n\r\nlet DEFAULT_TILE_SIZE = {\r\n  colSpan: 1,\r\n  rowSpan: 1\r\n};\r\n\r\nexport class DragTileService implements IDragTileService {\r\n  public tpl: any;\r\n  public opts: any;\r\n  public size: any;\r\n  public elem: any;\r\n  public preview: any;\r\n\r\n  constructor (options: any) {\r\n    this.tpl = options.tpl.get(0);\r\n    this.opts = options;\r\n    this.size = _.merge({}, DEFAULT_TILE_SIZE, options.size);\r\n    this.elem = null;\r\n  }\r\n\r\n  public getSize(): any {\r\n    return this.size;\r\n  }\r\n\r\n  public setSize(width, height): any {\r\n    this.size.width = width;\r\n    this.size.height = height;\r\n\r\n    if (this.elem) {\r\n      this.elem.css({\r\n        width: width,\r\n        height: height\r\n      });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  public setPosition(left, top): any {\r\n    this.size.left = left;\r\n    this.size.top = top;\r\n\r\n    if (this.elem) {\r\n      this.elem.css({\r\n        left: left,\r\n        top: top\r\n      });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  public getCompiledTemplate(): any {\r\n    return this.tpl;\r\n  };\r\n\r\n  public updateElem(parent): any {\r\n    this.elem = $(this.tpl).parent(parent);\r\n\r\n    return this;\r\n  };\r\n\r\n  public getElem(): any {\r\n    return this.elem.get(0);\r\n  };\r\n\r\n  public startDrag(): any {\r\n    this.preview = $('<div>')\r\n      .addClass('pip-dragged-preview')\r\n      .css({\r\n        position: 'absolute',\r\n        left: this.elem.css('left'),\r\n        top: this.elem.css('top'),\r\n        width: this.elem.css('width'),\r\n        height: this.elem.css('height')\r\n      });\r\n\r\n    this.elem\r\n      .addClass('no-animation')\r\n      .css({\r\n        zIndex: '9999'\r\n      })\r\n      .after(this.preview);\r\n\r\n    return this;\r\n  };\r\n\r\n  public stopDrag(isAnimate): any {\r\n    let self = this;\r\n\r\n    if (isAnimate) {\r\n      this.elem\r\n        .removeClass('no-animation')\r\n        .css({\r\n          left: this.preview.css('left'),\r\n          top: this.preview.css('top')\r\n        })\r\n        .on('transitionend', onTransitionEnd);\r\n    } else {\r\n      self.elem\r\n        .css({\r\n          left: self.preview.css('left'),\r\n          top: self.preview.css('top'),\r\n          zIndex: ''\r\n        })\r\n        .removeClass('no-animation');\r\n\r\n      self.preview.remove();\r\n      self.preview = null;\r\n    }\r\n\r\n    return this;\r\n\r\n    function onTransitionEnd() {\r\n      if (self.preview) {\r\n        self.preview.remove();\r\n        self.preview = null;\r\n      }\r\n\r\n      self.elem\r\n        .css('zIndex', '')\r\n        .off('transitionend', onTransitionEnd);\r\n    }\r\n  };\r\n\r\n  public setPreviewPosition(coords) {\r\n    this.preview.css(coords);\r\n  };\r\n\r\n  public getOptions(): any {\r\n    return this.opts.options;\r\n  };\r\n\r\n  public setOptions(options): any {\r\n    _.merge(this.opts.options, options);\r\n    _.merge(this.size, options.size);\r\n\r\n    return this;\r\n  };\r\n}\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .service('pipDragTile', function () {\r\n    return function (options) {\r\n      let newTile = new DragTileService(options);\r\n\r\n      return newTile;\r\n    }\r\n  });","'use strict';\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .directive('pipDraggableTiles', DraggableTile);\r\n\r\nfunction DraggableTile() {\r\n  return {\r\n    restrict: 'A',\r\n    link: function ($scope, $elem, $attr) {\r\n      var docFrag = document.createDocumentFragment();\r\n      var group = $scope.$eval($attr.pipDraggableTiles);\r\n\r\n      group.forEach(function (tile) {\r\n        var tpl = wrapComponent(tile.getCompiledTemplate());\r\n        docFrag.appendChild(tpl);\r\n      });\r\n\r\n      $elem.append(docFrag);\r\n\r\n      function wrapComponent(elem) {\r\n        return $('<div>')\r\n          .addClass('pip-draggable-tile')\r\n          .append(elem)\r\n          .get(0);\r\n      }\r\n    }\r\n  };\r\n}","'use strict';\r\n\r\nexport interface TilesGridConstructor {\r\n  new (tiles, options, columns, elem);\r\n}\r\n\r\nexport function ITilesGridConstructor(constructor: TilesGridConstructor, tiles, options, columns, elem):ITilesGridService {\r\n  return new constructor(tiles, options, columns, elem);\r\n}\r\n\r\nexport interface ITilesGridService {\r\n  tiles: any;\r\n  opts: any;\r\n  columns: any;\r\n  elem: any;\r\n  gridCells: any;\r\n  inline: boolean;\r\n  isMobileLayout: boolean;\r\n\r\n  addTile(tile): any;\r\n  getCellByPosition(row, col): any;\r\n  getCells(prevCell, rowSpan, colSpan): any;\r\n  getAvailableCellsDesktop(prevCell, rowSpan, colSpan): any;\r\n  getCell(src, basicRow, basicCol, columns): any;\r\n  getAvailableCellsMobile(prevCell, rowSpan, colSpan): any;\r\n  getBasicRow(prevCell): any;\r\n  isCellFree(row, col): any;\r\n  getCellIndex(srcCell): any;\r\n  reserveCells(start, end, elem): void;\r\n  clearElements(): void;\r\n  setAvailableColumns(columns): any;\r\n  generateGrid(singleTileWidth?): any;\r\n  setTilesDimensions(onlyPosition, draggedTile): any;\r\n  calcContainerHeight(): any;\r\n  getTileByNode(node): any;\r\n  getTileByCoordinates(coords, draggedTile): any;\r\n  getTileIndex(tile): any;\r\n  swapTiles(movedTile, beforeTile): any;\r\n  removeTile(removeTile): any;\r\n  updateTileOptions(opts): any;\r\n}\r\n\r\nlet MOBILE_LAYOUT_COLUMNS = 2;\r\n\r\nexport class TilesGridService implements ITilesGridService {\r\n  public tiles: any;\r\n  public opts: any;\r\n  public columns: any;\r\n  public elem: any;\r\n  public gridCells: any = [];\r\n  public inline: boolean = false;\r\n  public isMobileLayout: boolean;\r\n\r\n  constructor(tiles, options, columns, elem) {\r\n    this.tiles = tiles;\r\n    this.opts = options;\r\n    this.columns = columns || 0; // available columns in a row\r\n    this.elem = elem;\r\n    this.gridCells = [];\r\n    this.inline = options.inline || false;\r\n    this.isMobileLayout = columns === MOBILE_LAYOUT_COLUMNS;\r\n  }\r\n\r\n  public addTile(tile): any {\r\n    this.tiles.push(tile);\r\n    if (this.tiles.length === 1) {\r\n      this.generateGrid();\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  public getCellByPosition(row, col): any {\r\n    return this.gridCells[row][col];\r\n  };\r\n\r\n  public getCells(prevCell, rowSpan, colSpan): any {\r\n    if (this.isMobileLayout) {\r\n      return this.getAvailableCellsMobile(prevCell, rowSpan, colSpan);\r\n    } else {\r\n      return this.getAvailableCellsDesktop(prevCell, rowSpan, colSpan);\r\n    }\r\n  };\r\n\r\n  public getAvailableCellsDesktop(prevCell, rowSpan, colSpan): any {\r\n    let leftCornerCell;\r\n    let rightCornerCell;\r\n    let basicCol = prevCell && prevCell.col || 0;\r\n    let basicRow = this.getBasicRow(prevCell);\r\n\r\n    // Small tile\r\n    if (colSpan === 1 && rowSpan === 1) {\r\n      let gridCopy = this.gridCells.slice();\r\n\r\n      if (!prevCell) {\r\n        leftCornerCell = gridCopy[0][0];\r\n      } else {\r\n        leftCornerCell = this.getCell(gridCopy, basicRow, basicCol, this.columns);\r\n\r\n        if (!leftCornerCell) {\r\n          let rowShift = this.isMobileLayout ? 1 : 2;\r\n          leftCornerCell = this.getCell(gridCopy, basicRow + rowShift, 0, this.columns);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Medium tile\r\n    if (colSpan === 2 && rowSpan === 1) {\r\n      let prevTileSize = prevCell && prevCell.elem.size || null;\r\n\r\n      if (!prevTileSize) {\r\n        leftCornerCell = this.getCellByPosition(basicRow, basicCol);\r\n        rightCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n      } else if (prevTileSize.colSpan === 2 && prevTileSize.rowSpan === 2) {\r\n        if (this.columns - basicCol - 2 > 0) {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n        }\r\n      } else if (prevTileSize.colSpan === 2 && prevTileSize.rowSpan === 1) {\r\n        if (prevCell.row % 2 === 0) {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 1, basicCol - 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol);\r\n        } else {\r\n          if (this.columns - basicCol - 3 >= 0) {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          } else {\r\n            leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n            rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n          }\r\n        }\r\n      } else if (prevTileSize.colSpan === 1 && prevTileSize.rowSpan === 1) {\r\n        if (this.columns - basicCol - 3 >= 0) {\r\n          if (this.isCellFree(basicRow, basicCol + 1)) {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          } else {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 3);\r\n          }\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Big tile\r\n    if (!prevCell && rowSpan === 2 && colSpan === 2) {\r\n      leftCornerCell = this.getCellByPosition(basicRow, basicCol);\r\n      rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 1);\r\n    } else if (rowSpan === 2 && colSpan === 2) {\r\n      if (this.columns - basicCol - 2 > 0) {\r\n        if (this.isCellFree(basicRow, basicCol + 1)) {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 2);\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 3);\r\n        }\r\n      } else {\r\n        leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n        rightCornerCell = this.getCellByPosition(basicRow + 3, 1);\r\n      }\r\n    }\r\n\r\n    return {\r\n      start: leftCornerCell,\r\n      end: rightCornerCell\r\n    };\r\n  };\r\n\r\n  public getCell(src, basicRow, basicCol, columns): any {\r\n    let cell;\r\n    let col;\r\n    let row;\r\n\r\n    if (this.isMobileLayout) {\r\n      // mobile layout\r\n      for (col = basicCol; col < columns; col++) {\r\n        if (!src[basicRow][col].elem) {\r\n          cell = src[basicRow][col];\r\n          break;\r\n        }\r\n      }\r\n\r\n      return cell;\r\n    }\r\n\r\n    // desktop\r\n    for (col = basicCol; col < columns; col++) {\r\n      for (row = 0; row < 2; row++) {\r\n        if (!src[row + basicRow][col].elem) {\r\n          cell = src[row + basicRow][col];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (cell) {\r\n        return cell;\r\n      }\r\n    }\r\n  };\r\n\r\n  public getAvailableCellsMobile(prevCell, rowSpan, colSpan): any {\r\n    let leftCornerCell;\r\n    let rightCornerCell;\r\n    let basicRow = this.getBasicRow(prevCell);\r\n    let basicCol = prevCell && prevCell.col || 0;\r\n\r\n\r\n    if (colSpan === 1 && rowSpan === 1) {\r\n      let gridCopy = this.gridCells.slice();\r\n\r\n      if (!prevCell) {\r\n        leftCornerCell = gridCopy[0][0];\r\n      } else {\r\n        leftCornerCell = this.getCell(gridCopy, basicRow, basicCol, this.columns);\r\n\r\n        if (!leftCornerCell) {\r\n          let rowShift = this.isMobileLayout ? 1 : 2;\r\n          leftCornerCell = this.getCell(gridCopy, basicRow + rowShift, 0, this.columns);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!prevCell) {\r\n      leftCornerCell = this.getCellByPosition(basicRow, 0);\r\n      rightCornerCell = this.getCellByPosition(basicRow + rowSpan - 1, 1);\r\n    } else if (colSpan === 2) {\r\n      leftCornerCell = this.getCellByPosition(basicRow + 1, 0);\r\n      rightCornerCell = this.getCellByPosition(basicRow + rowSpan, 1);\r\n    }\r\n\r\n    return {\r\n      start: leftCornerCell,\r\n      end: rightCornerCell\r\n    };\r\n  };\r\n\r\n  public getBasicRow(prevCell): any {\r\n    let basicRow;\r\n\r\n    if (this.isMobileLayout) {\r\n      if (prevCell) {\r\n        basicRow = prevCell && prevCell.row || 0;\r\n      } else {\r\n        basicRow = 0;\r\n      }\r\n    } else {\r\n      if (prevCell) {\r\n        basicRow = prevCell.row % 2 === 0 ? prevCell.row : prevCell.row - 1;\r\n      } else {\r\n        basicRow = 0;\r\n      }\r\n    }\r\n\r\n    return basicRow;\r\n  };\r\n\r\n  public isCellFree(row, col): any {\r\n    return !this.gridCells[row][col].elem;\r\n  };\r\n\r\n  public getCellIndex(srcCell): any {\r\n    let self = this;\r\n    let index;\r\n\r\n    this.gridCells.forEach((row, rowIndex) => {\r\n      index = _.findIndex(self.gridCells[rowIndex], (cell) => {\r\n        return cell === srcCell;\r\n      });\r\n\r\n      if (index !== -1) {\r\n        return;\r\n      }\r\n    });\r\n\r\n    return index !== -1 ? index : 0;\r\n  };\r\n\r\n  public reserveCells(start, end, elem) {\r\n    this.gridCells.forEach((row) => {\r\n      row.forEach((cell) => {\r\n        if (cell.row >= start.row && cell.row <= end.row &&\r\n          cell.col >= start.col && cell.col <= end.col) {\r\n          cell.elem = elem;\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  public clearElements() {\r\n    this.gridCells.forEach((row) => {\r\n      row.forEach((tile) => {\r\n        tile.elem = null;\r\n      });\r\n    });\r\n  };\r\n\r\n  public setAvailableColumns(columns): any {\r\n    this.isMobileLayout = columns === MOBILE_LAYOUT_COLUMNS;\r\n    this.columns = columns;\r\n\r\n    return this;\r\n  };\r\n\r\n  public generateGrid(singleTileWidth?): any {\r\n    let self = this;\r\n    let colsInRow = 0;\r\n    let rows = 0;\r\n    let tileWidth = singleTileWidth || this.opts.tileWidth;\r\n    let offset = document.querySelector('.pip-draggable-group-title').getBoundingClientRect();\r\n    let gridInRow = [];\r\n\r\n    this.gridCells = [];\r\n\r\n    this.tiles.forEach((tile, index, srcTiles) => {\r\n      let tileSize = tile.getSize();\r\n\r\n      generateCells(tileSize.colSpan);\r\n\r\n      if (srcTiles.length === index + 1) {\r\n        if (colsInRow < self.columns) {\r\n          generateCells(self.columns - colsInRow);\r\n        }\r\n\r\n        // Generate more cells for extends tile size to big\r\n        if (self.tiles.length * 2 > self.gridCells.length) {\r\n          Array.apply(null, Array(self.tiles.length * 2 - self.gridCells.length)).forEach(() => {\r\n            generateCells(self.columns);\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    function generateCells(newCellCount) {\r\n        Array.apply(null, Array(newCellCount)).forEach(() => {\r\n          if (self.columns < colsInRow + 1) {\r\n            rows++;\r\n            colsInRow = 0;\r\n\r\n            self.gridCells.push(gridInRow);\r\n            gridInRow = [];\r\n          }\r\n\r\n          let top = rows * self.opts.tileHeight + (rows ? rows * self.opts.gutter : 0) + offset.height;\r\n          let left = colsInRow * tileWidth + (colsInRow ? colsInRow * self.opts.gutter : 0);\r\n\r\n          // Describe grid cell size through block corners coordinates\r\n          gridInRow.push({\r\n            top: top,\r\n            left: left,\r\n            bottom: top + self.opts.tileHeight,\r\n            right: left + tileWidth,\r\n            row: rows,\r\n            col: colsInRow\r\n          });\r\n\r\n          colsInRow++;\r\n        });\r\n      }\r\n\r\n    return this;\r\n  };\r\n\r\n  public setTilesDimensions(onlyPosition, draggedTile): any {\r\n    let self = this;\r\n    let currIndex = 0;\r\n    let prevCell;\r\n\r\n    if (onlyPosition) {\r\n      self.clearElements();\r\n    }\r\n\r\n    this.tiles.forEach((tile) => {\r\n      let tileSize = tile.getSize();\r\n      let startCell;\r\n      let width;\r\n      let height;\r\n      let cells;\r\n\r\n      tile.updateElem('.pip-draggable-tile');\r\n      if (tileSize.colSpan === 1) {\r\n        if (prevCell && prevCell.elem.size.colSpan === 2 && prevCell.elem.size.rowSpan === 1) {\r\n          startCell = self.getCells(self.getCellByPosition(prevCell.row, prevCell.col - 1), 1, 1).start;\r\n        } else {\r\n          startCell = self.getCells(prevCell, 1, 1).start;\r\n        }\r\n\r\n\r\n        if (!onlyPosition) {\r\n          width = startCell.right - startCell.left;\r\n          height = startCell.bottom - startCell.top;\r\n        }\r\n\r\n        prevCell = startCell;\r\n\r\n        self.reserveCells(startCell, startCell, tile);\r\n\r\n        currIndex++;\r\n      } else if (tileSize.colSpan === 2) {\r\n        cells = self.getCells(prevCell, tileSize.rowSpan, tileSize.colSpan);\r\n        startCell = cells.start;\r\n\r\n        if (!onlyPosition) {\r\n          width = cells.end.right - cells.start.left;\r\n          height = cells.end.bottom - cells.start.top;\r\n        }\r\n\r\n        prevCell = cells.end;\r\n\r\n        self.reserveCells(cells.start, cells.end, tile);\r\n\r\n        currIndex += 2;\r\n      }\r\n\r\n      // Render preview\r\n      // while tiles from group is dragged\r\n      if (draggedTile === tile) {\r\n        tile.setPreviewPosition({\r\n          left: startCell.left,\r\n          top: startCell.top\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      if (!onlyPosition) {\r\n        tile.setSize(width, height);\r\n      }\r\n\r\n      tile.setPosition(startCell.left, startCell.top);\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\n  public calcContainerHeight(): any {\r\n    let maxHeightSize, maxWidthSize;\r\n\r\n    if (!this.tiles.length) {\r\n      return this;\r\n    }\r\n\r\n    maxHeightSize = _.maxBy(this.tiles, (tile) => {\r\n      let tileSize = tile['getSize']();\r\n      return tileSize.top + tileSize.height;\r\n    })['getSize']();\r\n\r\n    this.elem.style.height = maxHeightSize.top + maxHeightSize.height + 'px';\r\n\r\n    if (this.inline) {\r\n      maxWidthSize = _.maxBy(this.tiles, (tile) => {\r\n        let tileSize = tile['getSize']();\r\n        return tileSize.left + tileSize.width;\r\n      })['getSize']();\r\n\r\n      this.elem.style.width = maxWidthSize.left + maxWidthSize.width + 'px';\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  public getTileByNode(node): any {\r\n    let foundTile = this.tiles.filter((tile) => {\r\n      return node === tile.getElem();\r\n    });\r\n\r\n    return foundTile.length ? foundTile[0] : null;\r\n  };\r\n\r\n  public getTileByCoordinates(coords, draggedTile): any {\r\n    return this.tiles\r\n      .filter((tile) => {\r\n        let tileSize = tile.getSize();\r\n\r\n        return tile !== draggedTile &&\r\n          tileSize.left <= coords.left && coords.left <= (tileSize.left + tileSize.width) &&\r\n          tileSize.top <= coords.top && coords.top <= (tileSize.top + tileSize.height);\r\n      })[0] || null;\r\n  };\r\n\r\n  public getTileIndex(tile): any {\r\n    return _.findIndex(this.tiles, tile);\r\n  };\r\n\r\n  public swapTiles(movedTile, beforeTile): any {\r\n    let movedTileIndex = _.findIndex(this.tiles, movedTile);\r\n    let beforeTileIndex = _.findIndex(this.tiles, beforeTile);\r\n\r\n    this.tiles.splice(movedTileIndex, 1);\r\n    this.tiles.splice(beforeTileIndex, 0, movedTile);\r\n\r\n    return this;\r\n  };\r\n\r\n  public removeTile(removeTile): any {\r\n    let droppedTile;\r\n\r\n    this.tiles.forEach((tile, index, tiles) => {\r\n      if (tile === removeTile) {\r\n        droppedTile = tiles.splice(index, 1)[0];\r\n        return false;\r\n      }\r\n    });\r\n\r\n    return droppedTile;\r\n  };\r\n\r\n  public updateTileOptions(opts): any {\r\n    let index = _.findIndex(this.tiles, (tile) => {\r\n      return tile['getOptions']() === opts;\r\n    });\r\n\r\n    if (index !== -1) {\r\n      this.tiles[index].setOptions(opts);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n}\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .service('pipTilesGrid', function () {\r\n    return function (tiles, options, columns, elem) {\r\n      let newGrid = new TilesGridService(tiles, options, columns, elem);\r\n\r\n      return newGrid;\r\n    }\r\n  });","export interface IWidgetTemplateService {\r\n    getTemplate(source, tpl ? , tileScope ? , strictCompile ? ): any;\r\n    setImageMarginCSS($element, image): void;\r\n}\r\n\r\nclass widgetTemplateService implements IWidgetTemplateService {\r\n    private _$interpolate: angular.IInterpolateService;\r\n    private _$compile: angular.ICompileService;\r\n    private _$templateRequest: angular.ITemplateRequestService;\r\n\r\n    constructor(\r\n        $interpolate: angular.IInterpolateService,\r\n        $compile: angular.ICompileService,\r\n        $templateRequest: angular.ITemplateRequestService\r\n    ) {\r\n        this._$interpolate = $interpolate;\r\n        this._$compile = $compile;\r\n        this._$templateRequest = $templateRequest;\r\n    }\r\n\r\n    public getTemplate(source, tpl ? , tileScope ? , strictCompile ? ): any {\r\n        const {\r\n            template,\r\n            templateUrl,\r\n            type\r\n        } = source;\r\n        let result;\r\n\r\n        if (type) {\r\n            const interpolated = tpl ? this._$interpolate(tpl)(source) : this._$interpolate(template)(source);\r\n            return strictCompile == true ?\r\n                (tileScope ? this._$compile(interpolated)(tileScope) : this._$compile(interpolated)) :\r\n                interpolated;\r\n        }\r\n\r\n        if (template) {\r\n            return tileScope ? this._$compile(template)(tileScope) : this._$compile(template);\r\n        }\r\n\r\n        if (templateUrl) {\r\n            this._$templateRequest(templateUrl, false).then((html) => {\r\n                result = tileScope ? this._$compile(html)(tileScope) : this._$compile(html);\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public setImageMarginCSS($element, image) {\r\n        let\r\n            containerWidth = $element.width ? $element.width() : $element.clientWidth, \r\n            containerHeight = $element.height ? $element.height() : $element.clientHeight,\r\n            imageWidth = (image[0] ? image[0].naturalWidth : image.naturalWidth) || image.width,\r\n            imageHeight = (image[0] ? image[0].naturalHeight : image.naturalWidth) || image.height,\r\n            margin = 0,\r\n            cssParams = {};\r\n\r\n        if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n            margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n            cssParams['margin-left'] = '' + margin + 'px';\r\n            cssParams['height'] = '' + containerHeight + 'px'; //'100%';\r\n            cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px'; //'100%';\r\n            cssParams['margin-top'] = '';\r\n        } else {\r\n            margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n            cssParams['margin-top'] = '' + margin + 'px';\r\n            cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px'; //'100%';\r\n            cssParams['width'] = '' + containerWidth + 'px'; //'100%';\r\n            cssParams['margin-left'] = '';\r\n        }\r\n\r\n        $(image).css(cssParams);\r\n    }\r\n}\r\n\r\n// image load directive TODO: remove to pipImageUtils\r\nfunction ImageLoad($parse) {\r\n    return {\r\n        restrict: 'A',\r\n        link: function(scope, element, attrs) {\r\n            var callback = $parse(attrs.pipImageLoad);\r\n            element.bind('load', (event) => {\r\n                callback(scope, {$event: event});\r\n            });\r\n        } \r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipDashboard')\r\n    .service('pipWidgetTemplate', widgetTemplateService)\r\n    .directive('pipImageLoad', ImageLoad);","(() => {\r\n  'use strict';\r\n\r\n  angular.module('pipWidget', []);\r\n})();\r\n\r\nimport './calendar/WidgetCalendar';\r\nimport './event/WidgetEvent';\r\nimport './menu/WidgetMenuService';\r\nimport './menu/WidgetMenuDirective';\r\nimport './notes/WidgetNotes';\r\nimport './position/WidgetPosition';\r\nimport './statistics/WidgetStatistics';\r\nimport './picture_slider/WidgetPictureSlider';\r\n","import { MenuWidgetService } from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass CalendarWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n\r\n  public color: string = 'blue';\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._configDialog = pipWidgetConfigDialogService;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n        this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n        }});\r\n        this['options'].date = this['options'].date || new Date();\r\n        this.color = this['options'].color || this.color;\r\n      }\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size,\r\n      date: this['options'].date,\r\n      extensionUrl: 'widgets/calendar/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].date = result.date;\r\n    });\r\n  }\r\n\r\n}\r\n\r\n(() => {\r\n\r\n  let pipCalendarWidget = {\r\n      bindings        : {\r\n        options: '=pipOptions',\r\n      },\r\n      controller      : CalendarWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/calendar/WidgetCalendar.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipCalendarWidget', pipCalendarWidget);\r\n\r\n})();\r\n","import { MenuWidgetService} from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass EventWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _oldOpacity: number;\r\n\r\n  public color: string = 'gray';\r\n  public opacity: number = 0.57;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n\r\n    if (this['options']) {\r\n      if (this['options']['menu']) this.menu = _.union(this.menu, this['options']['menu']);\r\n    }\r\n\r\n    this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n    }});\r\n    this.color = this['options'].color || this.color;\r\n    this.opacity = this['options'].opacity || this.opacity;\r\n\r\n    this.drawImage();\r\n\r\n    // TODO it doesn't work\r\n    $scope.$watch(() => { return $element.is(':visible'); }, (newVal) => {\r\n      this.drawImage();\r\n    });\r\n  }\r\n\r\n  private drawImage() {\r\n    if (this['options'].image) {\r\n      this._$timeout(() => {\r\n        this.onImageLoad(this._$element.find('img'));\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._oldOpacity = _.clone(this.opacity);\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size || {colSpan: 1, rowSpan: 1},\r\n      date: this['options'].date,\r\n      title: this['options'].title,\r\n      text: this['options'].text,\r\n      opacity: this.opacity,\r\n      onOpacitytest: (opacity) => {\r\n        this.opacity = opacity;\r\n      },\r\n      extensionUrl: 'widgets/event/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].date = result.date;\r\n      this['options'].title = result.title;\r\n      this['options'].text = result.text;\r\n      this['options'].opacity = result.opacity;\r\n    }, () => {\r\n      this.opacity = this._oldOpacity;\r\n    });\r\n  }\r\n\r\n  private onImageLoad(image) {\r\n    this.setImageMarginCSS(this._$element.parent(), image);\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    if (this['options'].image) {\r\n      this._$timeout(() => {\r\n        this.setImageMarginCSS(this._$element.parent(), this._$element.find('img'));\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  // Later replace by pipImageUtils sevice's function\r\n  private setImageMarginCSS($element, image) {\r\n    let\r\n      containerWidth = $element.width ? $element.width() : $element.clientWidth, // || 80,\r\n      containerHeight = $element.height ? $element.height() : $element.clientHeight, // || 80,\r\n      imageWidth = image[0].naturalWidth || image.width,\r\n      imageHeight = image[0].naturalHeight || image.height,\r\n      margin = 0,\r\n      cssParams = {};\r\n\r\n    if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n      margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n      cssParams['margin-left'] = '' + margin + 'px';\r\n      cssParams['height'] = '' + containerHeight + 'px'; //'100%';\r\n      cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px'; //'100%';\r\n      cssParams['margin-top'] = '';\r\n    } else {\r\n      margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n      cssParams['margin-top'] = '' + margin + 'px';\r\n      cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px'; //'100%';\r\n      cssParams['width'] = '' + containerWidth + 'px'; //'100%';\r\n      cssParams['margin-left'] = '';\r\n    }\r\n\r\n    image.css(cssParams);\r\n  }\r\n}\r\n\r\n\r\n(() => {\r\n  let pipEventWidget =  {\r\n      bindings: {\r\n        options: '=pipOptions'\r\n      },\r\n      controller: EventWidgetController,\r\n      controllerAs: 'widgetCtrl',\r\n      templateUrl: 'widgets/event/WidgetEvent.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipEventWidget', pipEventWidget);\r\n})();","(() => {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .directive('pipMenuWidget', pipMenuWidget);\r\n\r\n  function pipMenuWidget() {\r\n    return {\r\n      restrict        : 'EA',\r\n      templateUrl     : 'widgets/menu/WidgetMenu.html'\r\n    };\r\n  }\r\n})();\r\n","\r\nexport class MenuWidgetService {\r\n  public menu: any = [\r\n    {\r\n      title: 'Change Size',\r\n      action: angular.noop,\r\n      submenu: [{\r\n          title: '1 x 1',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 1,\r\n            sizeY: 1\r\n          }\r\n        },\r\n        {\r\n          title: '2 x 1',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 2,\r\n            sizeY: 1\r\n          }\r\n        },\r\n        {\r\n          title: '2 x 2',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 2,\r\n            sizeY: 2\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  constructor() {\r\n    \"ngInject\";\r\n  }\r\n\r\n  public callAction(actionName, params, item) {\r\n    if (this[actionName]) {\r\n      this[actionName].call(this, params);\r\n    }\r\n\r\n    if (item['click']) {\r\n      item['click'].call(item, params, this);\r\n    }\r\n  };\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n  };\r\n}\r\n\r\nclass MenuWidgetProvider {\r\n    private _service: MenuWidgetService;\r\n\r\n    constructor() {\r\n    }\r\n\r\n   public $get() {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new MenuWidgetService();\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .provider('pipWidgetMenu', MenuWidgetProvider);\r\n})();","'use strict';\r\n\r\nimport { MenuWidgetService } from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass NotesWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n\r\n  public color: string = 'orange';\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._configDialog = pipWidgetConfigDialogService;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n      }\r\n\r\n      this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n      }});\r\n      this.color = this['options'].color || this.color;\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size,\r\n      title: this['options'].title,\r\n      text: this['options'].text,\r\n      extensionUrl: 'widgets/notes/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].text = result.text;\r\n      this['options'].title = result.title;\r\n    });\r\n  }\r\n}\r\n\r\n  let pipNotesWidget = {\r\n      bindings           : {\r\n        options: '=pipOptions'\r\n      },\r\n      controller      : NotesWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/notes/WidgetNotes.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipNotesWidget', pipNotesWidget);\r\n\r\n","'use strict';\r\n\r\nimport {\r\n  MenuWidgetService\r\n} from '../menu/WidgetMenuService';\r\nimport {\r\n  IWidgetConfigService\r\n} from '../../dialogs/widget_config/ConfigDialogService';\r\nimport {\r\n  IWidgetTemplateService\r\n} from '../../utility/WidgetTemplateUtility';\r\n\r\nclass PictureSliderController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _widgetUtility: IWidgetTemplateService;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n\r\n  public animationType: string = 'fading';\r\n  public animationInterval: number = 5000;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    pipWidgetConfigDialogService: IWidgetConfigService,\r\n    pipWidgetTemplate: IWidgetTemplateService\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n    this._widgetUtility = pipWidgetTemplate;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    if (this['options']) {\r\n      this.animationType = this['options'].animationType || this.animationType;\r\n      this.animationInterval = this['options'].animationInterval || this.animationInterval;\r\n    }\r\n  }\r\n\r\n  public onImageLoad($event) {\r\n    this._$timeout(() => {\r\n      this._widgetUtility.setImageMarginCSS(this._$element.parent(), $event.target);\r\n    });\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this._$timeout(() => {\r\n      _.each(this._$element.find('img'), (image) => {\r\n        this._widgetUtility.setImageMarginCSS(this._$element.parent(), image);\r\n      });\r\n    }, 500);\r\n  }\r\n}\r\n\r\nlet pipPictureSliderWidget = {\r\n  bindings: {\r\n    options: '=pipOptions',\r\n    index: '=',\r\n    group: '='\r\n  },\r\n  controller: PictureSliderController,\r\n  templateUrl: 'widgets/picture_slider/WidgetPictureSlider.html',\r\n  controllerAs: 'widgetCtrl'\r\n}\r\n\r\nangular\r\n  .module('pipWidget')\r\n  .component('pipPictureSliderWidget', pipPictureSliderWidget);","import {\r\n  MenuWidgetService\r\n} from '../menu/WidgetMenuService';\r\nimport {\r\n  IWidgetConfigService\r\n} from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass PositionWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _locationDialog: any;\r\n\r\n  public showPosition: boolean = true;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $timeout: angular.ITimeoutService,\r\n    $element: any,\r\n    pipWidgetConfigDialogService: IWidgetConfigService,\r\n    pipLocationEditDialog: any,\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._$timeout = $timeout;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n    this._locationDialog = pipLocationEditDialog;\r\n\r\n    if (this['options']) {\r\n      if (this['options']['menu']) this.menu = _.union(this.menu, this['options']['menu']);\r\n    }\r\n\r\n    this.menu.push({\r\n      title: 'Configurate',\r\n      click: () => {\r\n        this.onConfigClick();\r\n      }\r\n    });\r\n    this.menu.push({\r\n      title: 'Change location',\r\n      click: () => {\r\n        this.openLocationEditDialog();\r\n      }\r\n    });\r\n\r\n    this['options'].location = this['options'].location || this['options'].position;\r\n\r\n    $scope.$watch('widgetCtrl.options.location', () => {\r\n      this.reDrawPosition();\r\n    });\r\n\r\n    // TODO it doesn't work\r\n    $scope.$watch(() => { return $element.is(':visible'); }, (newVal) => {\r\n      if (newVal == true) this.reDrawPosition();\r\n    });\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-position-config',\r\n      size: this['options'].size,\r\n      locationName: this['options'].locationName,\r\n      hideColors: true,\r\n      extensionUrl: 'widgets/position/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.changeSize(result.size);\r\n      this['options'].locationName = result.locationName;\r\n    });\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this.reDrawPosition();\r\n  }\r\n\r\n  public openLocationEditDialog() {\r\n    this._locationDialog.show({\r\n      locationName: this['options'].locationName,\r\n      locationPos: this['options'].location\r\n    }, (newPosition) => {\r\n      if (newPosition) {\r\n        this['options'].location = newPosition.location;\r\n        this['options'].locationName = newPosition.locatioName;\r\n      }\r\n    });\r\n  }\r\n\r\n  private reDrawPosition() {\r\n    this.showPosition = false;\r\n    this._$timeout(() => {\r\n      this.showPosition = true;\r\n    }, 50);\r\n  }\r\n}\r\n\r\n\r\nlet pipPositionWidget = {\r\n  bindings: {\r\n    options: '=pipOptions',\r\n    index: '=',\r\n    group: '='\r\n  },\r\n  controller: PositionWidgetController,\r\n  controllerAs: 'widgetCtrl',\r\n  templateUrl: 'widgets/position/WidgetPosition.html'\r\n}\r\n\r\nangular\r\n  .module('pipWidget')\r\n  .component('pipPositionWidget', pipPositionWidget);","import { MenuWidgetService } from '../menu/WidgetMenuService';\r\n\r\nlet SMALL_CHART: number = 70;\r\nlet BIG_CHART: number = 250;\r\n\r\nclass StatisticsWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$timeout: angular.ITimeoutService;\r\n\r\n  public reset: boolean = false;\r\n  public chartSize: number = SMALL_CHART;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $timeout: angular.ITimeoutService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._$timeout = $timeout;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n      }\r\n\r\n      this.setChartSize();\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this.reset = true;\r\n    this.setChartSize();\r\n    this._$timeout(() => {\r\n      this.reset = false;\r\n    }, 500);\r\n  }\r\n\r\n  private setChartSize() {\r\n    this.chartSize = this['options'].size.colSpan == 2 && this['options'].size.rowSpan == 2 ? BIG_CHART : SMALL_CHART;\r\n  }\r\n}\r\n\r\n(() => {\r\n  'use strict';\r\n\r\n  let pipStatisticsWidget = {\r\n      bindings           : {\r\n        options: '=pipOptions'\r\n      },\r\n      bindToController: true,\r\n      controller      : StatisticsWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/statistics/WidgetStatistics.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipStatisticsWidget', pipStatisticsWidget);\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('Dashboard.html',\n    '<md-button class=\"md-accent md-raised md-fab layout-column layout-align-center-center\" aria-label=\"Add component\" ng-click=\"dashboardCtrl.addComponent()\"><md-icon md-svg-icon=\"icons:plus\" class=\"md-headline centered-add-icon\"></md-icon></md-button><div class=\"pip-draggable-grid-holder\"><pip-draggable-grid pip-tiles-templates=\"dashboardCtrl.groupedWidgets\" pip-tiles-context=\"dashboardCtrl.widgetsContext\" pip-draggable-grid=\"dashboardCtrl.draggableGridOptions\" pip-group-menu-actions=\"dashboardCtrl.groupMenuActions\"></pip-draggable-grid><md-progress-circular md-mode=\"indeterminate\" class=\"progress-ring\"></md-progress-circular></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('draggable/Draggable.html',\n    '<div class=\"pip-draggable-holder\"><div class=\"pip-draggable-group\" ng-repeat=\"group in draggableCtrl.groups\" data-group-id=\"{{ $index }}\" pip-draggable-tiles=\"group.source\"><div class=\"pip-draggable-group-title layout-row layout-align-start-center\"><div class=\"title-input-container\" ng-click=\"draggableCtrl.onTitleClick(group, $event)\"><input ng-if=\"group.editingName\" ng-blur=\"draggableCtrl.onBlurTitleInput(group)\" ng-keypress=\"draggableCtrl.onKyepressTitleInput(group, $event)\" ng-model=\"group.title\"><div class=\"text-overflow flex-none\" ng-if=\"!group.editingName\">{{ group.title }}</div></div><md-button class=\"md-icon-button flex-none layout-align-center-center\" ng-show=\"group.editingName\" ng-click=\"draggableCtrl.cancelEditing(group)\" aria-label=\"Cancel\"><md-icon md-svg-icon=\"icons:cross\"></md-icon></md-button><md-menu class=\"flex-none layout-column\" md-position-mode=\"target-right target\" ng-show=\"!group.editingName\"><md-button class=\"md-icon-button flex-none layout-align-center-center\" ng-click=\"$mdOpenMenu(); groupId = $index\" aria-label=\"Menu\"><md-icon md-svg-icon=\"icons:dots\"></md-icon></md-button><md-menu-content width=\"4\"><md-menu-item ng-repeat=\"action in draggableCtrl.groupMenuActions\"><md-button ng-click=\"action.callback(groupId)\">{{ action.title }}</md-button></md-menu-item></md-menu-content></md-menu></div></div><div class=\"pip-draggable-group fict-group layout-align-center-center layout-column tm16\"><div class=\"fict-group-text-container\"><md-icon md-svg-icon=\"icons:plus\"></md-icon>{{ \\'DROP_TO_CREATE_NEW_GROUP\\' | translate }}</div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/add_component/AddComponent.html',\n    '<md-dialog class=\"pip-dialog pip-add-component-dialog\"><md-dialog-content class=\"layout-column\"><div class=\"theme-divider p16 flex-auto\"><h3 class=\"hide-xs m0 bm16 theme-text-primary\" hide-xs=\"\">Add component<md-input-container class=\"layout-row flex-auto m0\"><md-select class=\"flex-auto m0 theme-text-primary\" ng-model=\"dialogCtrl.activeGroupIndex\" placeholder=\"Create New Group\" aria-label=\"Group\"><md-option ng-value=\"$index\" ng-repeat=\"group in dialogCtrl.groups\">{{ group }}</md-option></md-select></md-input-container></h3></div><div class=\"pip-body pip-scroll p0 flex-auto\"><p class=\"md-body-1 theme-text-secondary m0 lp16 rp16\">Use \"Enter\" or \"+\" buttons on keyboard to encrease and \"Delete\" or \"-\" to decrease tiles amount</p><md-list ng-init=\"groupIndex = $index\" ng-repeat=\"group in dialogCtrl.defaultWidgets\"><md-list-item class=\"layout-row pip-list-item lp16 rp16\" ng-repeat=\"item in group\"><div class=\"icon-holder flex-none\"><md-icon md-svg-icon=\"icons:{{:: item.icon }}\"></md-icon><div class=\"pip-badge theme-badge md-warn\" ng-if=\"item.amount\"><span>{{ item.amount }}</span></div></div><span class=\"flex-auto lm24 theme-text-primary\">{{:: item.title }}</span><md-button class=\"md-icon-button flex-none\" ng-click=\"dialogCtrl.encrease(groupIndex, $index)\" aria-label=\"Encrease\"><md-icon md-svg-icon=\"icons:plus-circle\"></md-icon></md-button><md-button class=\"md-icon-button flex-none\" ng-click=\"dialogCtrl.decrease(groupIndex, $index)\" aria-label=\"Decrease\"><md-icon md-svg-icon=\"icons:minus-circle\"></md-icon></md-button></md-list-item><md-divider class=\"lm72 tm8 bm8\" ng-if=\"groupIndex !== (dialogCtrl.defaultWidgets.length - 1)\"></md-divider></md-list></div></md-dialog-content><md-dialog-actions class=\"flex-none layout-align-end-center theme-divider divider-top theme-text-primary\"><md-button ng-click=\"dialogCtrl.cancel()\" aria-label=\"Add\">Cancel</md-button><md-button ng-click=\"dialogCtrl.add()\" arial-label=\"Cancel\">Add</md-button></md-dialog-actions></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/widget_config/ConfigDialog.html',\n    '<md-dialog class=\"pip-dialog pip-widget-config-dialog {{ vm.params.dialogClass }}\" width=\"400\" md-theme=\"{{vm.theme}}\"><pip-widget-config-extend-component class=\"layout-column\" pip-extension-url=\"{{ vm.params.extensionUrl }}\"></pip-widget-config-extend-component></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/widget_config/ConfigDialogExtendComponent.html',\n    '<h3 class=\"tm0 flex-none\">{{vm.dialogTitle}}</h3><div class=\"pip-body pip-scroll p16 bp0 flex-auto\"><pip-extension-point></pip-extension-point><pip-toggle-buttons class=\"bm16\" ng-if=\"!vm.hideSizes\" pip-buttons=\"vm.sizes\" ng-model=\"vm.sizeId\"></pip-toggle-buttons><pip-color-picker ng-if=\"!vm.hideColors\" pip-colors=\"vm.colors\" ng-model=\"vm.color\"></pip-color-picker></div><div class=\"pip-footer flex-none\"><div><md-button class=\"md-accent\" ng-click=\"vm.onCancel()\">Cancel</md-button><md-button class=\"md-accent\" ng-click=\"vm.onApply()\">Apply</md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/calendar/ConfigDialogExtension.html',\n    '<div class=\"w-stretch bm16\">Date:<md-datepicker ng-model=\"vm.date\" class=\"w-stretch\"></md-datepicker></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/calendar/WidgetCalendar.html',\n    '<div class=\"widget-box pip-calendar-widget {{ widgetCtrl.color }} layout-column layout-fill tp0\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><div class=\"widget-heading layout-row layout-align-end-center flex-none\"><pip-menu-widget></pip-menu-widget></div><div class=\"widget-content flex-auto layout-row layout-align-center-center\" ng-if=\"widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1\"><span class=\"date lm24 rm12\">{{ widgetCtrl.options.date.getDate() }}</span><div class=\"flex-auto layout-column\"><span class=\"weekday md-headline\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"month-year md-headline\">{{ widgetCtrl.options.date | formatLongMonth }} {{ widgetCtrl.options.date | formatYear }}</span></div></div><div class=\"widget-content flex-auto layout-column layout-align-space-around-center\" ng-hide=\"widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1\"><span class=\"weekday md-headline\" ng-hide=\"widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"weekday\" ng-show=\"widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"date lm12 rm12\">{{ widgetCtrl.options.date.getDate() }}</span> <span class=\"month-year md-headline\">{{ widgetCtrl.options.date | formatLongMonth }} {{ widgetCtrl.options.date | formatYear }}</span></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/event/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Title:</label> <input type=\"text\" ng-model=\"vm.title\"></md-input-container>Date:<md-datepicker ng-model=\"vm.date\" class=\"w-stretch bm8\"></md-datepicker><md-input-container class=\"w-stretch\"><label>Description:</label> <textarea type=\"text\" ng-model=\"vm.text\">\\n' +\n    '    </textarea></md-input-container>Backdrop\\'s opacity:<md-slider aria-label=\"opacity\" type=\"number\" min=\"0.1\" max=\"0.9\" step=\"0.01\" ng-model=\"vm.opacity\" ng-change=\"vm.onOpacitytest(vm.opacity)\"></md-slider></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/event/WidgetEvent.html',\n    '<div class=\"widget-box pip-event-widget {{ widgetCtrl.color }} layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><img ng-if=\"widgetCtrl.options.image\" ng-src=\"{{widgetCtrl.options.image}}\" alt=\"{{widgetCtrl.options.title || widgetCtrl.options.name}}\"><div class=\"text-backdrop\" style=\"background-color: rgba(0, 0, 0, {{ widgetCtrl.opacity }})\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"text-container flex-auto pip-scroll\"><p class=\"date flex-none\" ng-if=\"widgetCtrl.options.date\">{{ widgetCtrl.options.date | formatShortDate }}</p><p class=\"text flex-auto\">{{ widgetCtrl.options.text || widgetCtrl.options.description }}</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/menu/WidgetMenu.html',\n    '<md-menu class=\"widget-menu\" md-position-mode=\"target-right target\"><md-button class=\"md-icon-button flex-none\" ng-click=\"$mdOpenMenu()\" aria-label=\"Menu\"><md-icon md-svg-icon=\"icons:vdots\"></md-icon></md-button><md-menu-content width=\"4\"><md-menu-item ng-repeat=\"item in widgetCtrl.menu\"><md-button ng-if=\"!item.submenu\" ng-click=\"widgetCtrl.callAction(item.action, item.params, item)\">{{:: item.title }}</md-button><md-menu ng-if=\"item.submenu\"><md-button ng-click=\"widgetCtrl.callAction(item.action)\">{{:: item.title }}</md-button><md-menu-content><md-menu-item ng-repeat=\"subitem in item.submenu\"><md-button ng-click=\"widgetCtrl.callAction(subitem.action, subitem.params, subitem)\">{{:: subitem.title }}</md-button></md-menu-item></md-menu-content></md-menu></md-menu-item></md-menu-content></md-menu>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/notes/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Title:</label> <input type=\"text\" ng-model=\"vm.title\"></md-input-container><md-input-container class=\"w-stretch tm0\"><label>Text:</label> <textarea type=\"text\" ng-model=\"vm.text\">\\n' +\n    '    </textarea></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/notes/WidgetNotes.html',\n    '<div class=\"widget-box pip-notes-widget {{ widgetCtrl.color }} layout-column\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\" ng-if=\"widgetCtrl.options.title || widgetCtrl.options.name\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span></div><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget><div class=\"text-container flex-auto pip-scroll\"><p>{{ widgetCtrl.options.text }}</p></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/picture_slider/WidgetPictureSlider.html',\n    '<div class=\"widget-box pip-picture-slider-widget {{ widgetCtrl.color }} layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\" index=\"{{ widgetCtrl.index }}\" group=\"{{ widgetCtrl.group }}\"><div class=\"widget-heading lp16 rp8 layout-row layout-align-end-center flex-none\"><span class=\"flex text-overflow\">{{ widgetCtrl.options.title }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"slider-container\"><div pip-image-slider=\"\" pip-animation-type=\"\\'fading\\'\" pip-animation-interval=\"widgetCtrl.animationInterval\" ng-if=\"widgetCtrl.animationType == \\'fading\\'\"><div class=\"pip-animation-block\" ng-repeat=\"slide in widgetCtrl.options.slides\"><img ng-src=\"{{ slide.image }}\" alt=\"{{ slide.image }}\" pip-image-load=\"widgetCtrl.onImageLoad($event)\"><p class=\"slide-text\" ng-if=\"slide.text\">{{ slide.text }}</p></div></div><div pip-image-slider=\"\" pip-animation-type=\"\\'carousel\\'\" pip-animation-interval=\"widgetCtrl.animationInterval\" ng-if=\"widgetCtrl.animationType == \\'carousel\\'\"><div class=\"pip-animation-block\" ng-repeat=\"slide in widgetCtrl.options.slides\"><img ng-src=\"{{ slide.image }}\" alt=\"{{ slide.image }}\" pip-image-load=\"widgetCtrl.onImageLoad($event)\"><p class=\"slide-text\" ng-if=\"slide.text\">{{ slide.text }}</p></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/position/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Location name:</label> <input type=\"text\" ng-model=\"vm.locationName\"></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/position/WidgetPosition.html',\n    '<div class=\"pip-position-widget widget-box p0 layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\" index=\"{{ widgetCtrl.index }}\" group=\"{{ widgetCtrl.group }}\"><div class=\"position-absolute-right-top\" ng-if=\"!widgetCtrl.options.locationName\"><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"widget-heading lp16 rp8 layout-row layout-align-end-center flex-none\" ng-if=\"widgetCtrl.options.locationName\"><span class=\"flex text-overflow\">{{ widgetCtrl.options.locationName }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><pip-location-map class=\"flex\" ng-if=\"widgetCtrl.showPosition\" pip-stretch=\"true\" pip-rebind=\"true\" pip-location-pos=\"widgetCtrl.options.location\"></pip-location-map></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/statistics/WidgetStatistics.html',\n    '<div class=\"widget-box pip-statistics-widget layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span><pip-menu-widget></pip-menu-widget></div><div class=\"widget-content flex-auto layout-row layout-align-center-center\" ng-if=\"widgetCtrl.options.series && !widgetCtrl.reset\"><pip-pie-chart pip-series=\"widgetCtrl.options.series\" ng-if=\"!widgetCtrl.options.chartType || widgetCtrl.options.chartType == \\'pie\\'\" pip-donut=\"true\" pip-pie-size=\"widgetCtrl.chartSize\" pip-show-total=\"true\" pip-centered=\"true\"></pip-pie-chart></div></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-dashboard-html.min.js.map\n","'use strict';\r\n\r\nimport './settings_service/index';\r\nimport './settings_page/index';\r\n\r\nangular.module('pipSettings', [\r\n    'pipSettings.Service',\r\n    'pipSettings.Page'\r\n]);\r\n\r\nexport * from './settings_service';\r\nexport * from './settings_page';","// Prevent junk from going into typescript definitions\r\n\r\nimport {ISettingsService, SettingsTab} from '../settings_service/SettingsService';\r\n\r\nexport class SettingsPageSelectedTab {\r\n    public tab: SettingsTab;\r\n    public tabIndex: number = 0;\r\n    public tabId: string;\r\n}\r\n\r\ninterface ISettingsPageController {\r\n    tabs: SettingsTab[];\r\n    selected: SettingsPageSelectedTab;\r\n    onDropdownSelect: Function;\r\n    onNavigationSelect(state: string): void;\r\n}\r\n\r\n\r\n\r\n(() => {\r\n\r\n    class SettingsPageController implements ISettingsPageController {\r\n    public tabs: SettingsTab[];\r\n    public selected: SettingsPageSelectedTab;\r\n    public onDropdownSelect: Function;\r\n\r\n    constructor(\r\n        private $state: ng.ui.IStateService,\r\n        pipNavService: pip.nav.INavService,\r\n        pipSettings: ISettingsService,\r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: angular.ITimeoutService\r\n    ) {\r\n\r\n        this.tabs = _.filter(pipSettings.getTabs(), (tab: SettingsTab) => {\r\n                if (tab.visible === true && (tab.access ? tab.access($rootScope['$user'], tab) : true)) {\r\n                    return tab;\r\n                }\r\n            });\r\n\r\n        this.tabs = _.sortBy(this.tabs, 'index');\r\n\r\n        this.selected = new SettingsPageSelectedTab();\r\n        if (this.$state.current.name !== 'settings') {\r\n            this.initSelect(this.$state.current.name);\r\n        } else if (this.$state.current.name === 'settings' && pipSettings.getDefaultTab()) {\r\n            this.initSelect(pipSettings.getDefaultTab().state);\r\n        } else {\r\n            $timeout(() => {\r\n                if (pipSettings.getDefaultTab()) {\r\n                    this.initSelect(pipSettings.getDefaultTab().state);\r\n                }\r\n                if (!pipSettings.getDefaultTab() && this.tabs.length > 0) {\r\n                     this.initSelect(this.tabs[0].state);\r\n                }\r\n            });\r\n        }\r\n\r\n        pipNavService.icon.showMenu();\r\n        pipNavService.breadcrumb.text = \"Settings\";\r\n        pipNavService.actions.hide();\r\n        pipNavService.appbar.removeShadow();\r\n        \r\n        this.onDropdownSelect = (state) => {\r\n            this.onNavigationSelect(state.state);\r\n        }\r\n    }\r\n\r\n    private initSelect(state: string): void {\r\n        this.selected.tab = _.find(this.tabs, (tab: SettingsTab) => {\r\n            return tab.state === state;\r\n        });\r\n        this.selected.tabIndex = _.indexOf(this.tabs, this.selected.tab);\r\n        this.selected.tabId = state;\r\n    }\r\n\r\n    public onNavigationSelect(state: string): void {\r\n        this.initSelect(state);\r\n\r\n        if (this.selected.tab) {\r\n            this.$state.go(state);\r\n        }\r\n    }\r\n}\r\n\r\nangular.module('pipSettings.Page')\r\n    .controller('pipSettingsPageController', SettingsPageController);\r\n})();","'use strict';\r\n\r\nfunction configureSettingsPageRoutes($stateProvider) {\r\n    $stateProvider\r\n        .state('settings', {\r\n            url: '/settings?party_id',\r\n            auth: true,\r\n            controllerAs: 'vm',\r\n            controller: 'pipSettingsPageController',\r\n            templateUrl: 'settings_page/SettingsPage.html'\r\n        });\r\n       \r\n}\r\n\r\nangular.module('pipSettings.Page')\r\n    .config(configureSettingsPageRoutes);\r\n","'use strict';\r\n\r\nangular.module('pipSettings.Page', [\r\n    'ui.router', \r\n    'pipSettings.Service',\r\n    'pipNav', \r\n    'pipSelected',\r\n    'pipTranslate',\r\n    'pipSettings.Templates'\r\n    ]);\r\n\r\n\r\nimport './SettingsPageController';\r\nimport './SettingsPageRoutes';","'use strict';\r\n\r\nexport class SettingsTab {\r\n    public state: string;\r\n    public title: string;\r\n    public index: number;\r\n    public access: Function;\r\n    public visible: boolean;\r\n    public stateConfig: SettingsStateConfig;\r\n}\r\n\r\nexport class SettingsStateConfig {\r\n    public url: string;\r\n    public auth: boolean = false;\r\n    public templateUrl?: string;\r\n    public template?: string;\r\n}\r\n\r\nexport interface ISettingsService {\r\n    getDefaultTab(): SettingsTab;\r\n    showTitleText (newTitleText: string): void;\r\n    showTitleLogo(newTitleLogo);\r\n    setDefaultTab(name: string): void;\r\n    showNavIcon(value: boolean): boolean;\r\n    getTabs(): SettingsTab[];\r\n}\r\n\r\nexport interface ISettingsProvider extends ng.IServiceProvider {\r\n    getDefaultTab(): SettingsTab;\r\n    addTab(tabObj: SettingsTab): void;\r\n    setDefaultTab(name: string): void;\r\n    getFullStateName(state: string): string;\r\n}\r\n\r\nexport class SettingsConfig {\r\n\r\n    public defaultTab: string;\r\n    public tabs: SettingsTab[] = [];\r\n    public titleText: string = 'SETTINGS_TITLE';\r\n    public titleLogo: boolean = null;\r\n    public isNavIcon: boolean = true;\r\n\r\n}\r\n\r\nclass SettingsService implements ISettingsService {\r\n    private _config: SettingsConfig;\r\n\r\n    public constructor(config: SettingsConfig) {\r\n        \"ngInject\";\r\n        this._config = config;\r\n    }\r\n\r\n    private getFullStateName(state: string): string {\r\n        return 'settings.' + state;\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        if (!_.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n    }\r\n\r\n    public getDefaultTab(): SettingsTab {\r\n        let defaultTab: SettingsTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === defaultTab.state;\r\n        });\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public getTabs(): SettingsTab[] {\r\n        return _.cloneDeep(this._config.tabs);\r\n    }\r\n\r\n}\r\n\r\nclass SettingsProvider implements ISettingsProvider {\r\n    private _service: SettingsService;\r\n    private _config: SettingsConfig = new SettingsConfig();\r\n\r\n    constructor(private $stateProvider: ng.ui.IStateProvider) {}\r\n\r\n    public getFullStateName(state: string): string {\r\n        return 'settings.' + state;\r\n    }\r\n\r\n    public getDefaultTab(): SettingsTab {\r\n        let defaultTab: SettingsTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === defaultTab.state;\r\n        });\r\n\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public addTab(tabObj: SettingsTab): void {\r\n        let existingTab: SettingsTab;\r\n\r\n        this.validateTab(tabObj);\r\n        existingTab = _.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + tabObj.state;\r\n        });\r\n        if (existingTab) {\r\n            throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n        }\r\n\r\n        this._config.tabs.push({\r\n            state: this.getFullStateName(tabObj.state),\r\n            title: tabObj.title,\r\n            index: tabObj.index || 100000,\r\n            access: tabObj.access,\r\n            visible: tabObj.visible !== false,\r\n            stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n        });\r\n        this.$stateProvider.state(this.getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n        // if we just added first state and no default state is specified\r\n        if (typeof this._config.defaultTab === 'undefined' && this._config.tabs.length === 1) {\r\n            this.setDefaultTab(tabObj.state);\r\n        }\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        // TODO [apidhirnyi] extract expression inside 'if' into variable. It isn't readable now.\r\n        if (!_.find(this._config.tabs, (tab: SettingsTab) => {\r\n            return tab.state === 'settings.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n        //this.$stateProvider.go(this._config.defaultTab);\r\n            //pipAuthStateProvider.redirect('settings', getFullStateName(name));\r\n    }\r\n\r\n    /**\r\n     * Validates passed tab config object\r\n     * If passed tab is not valid it will throw an error\r\n     */\r\n\r\n    private validateTab(tabObj: SettingsTab): void {\r\n        if (!tabObj || !_.isObject(tabObj)) {\r\n            throw new Error('Invalid object');\r\n        }\r\n\r\n        if (tabObj.state === null || tabObj.state === '') {\r\n            throw new Error('Tab should have valid Angular UI router state name');\r\n        }\r\n\r\n        if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n            throw new Error('\"access\" should be a function');\r\n        }\r\n\r\n        if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n            throw new Error('Invalid state configuration object');\r\n        }\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public $get(): ISettingsService {\r\n        \"ngInject\";\r\n\r\n        if (_.isNull(this._service) || _.isUndefined(this._service)) {\r\n            this._service = new SettingsService(this._config);\r\n        }\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipSettings.Service')\r\n    .provider('pipSettings', SettingsProvider);\r\n\r\n","'use strict';\r\n\r\nangular.module('pipSettings.Service', []);\r\n\r\nimport './SettingsService';","/**\r\n * @file Settings tab logic\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipUserSettings', [\r\n        'ngMaterial', 'pipData',\r\n        'pipSettings.Service',\r\n        'pipSettings.Page',\r\n\r\n        'pipUserSettings.Strings',\r\n        'pipUserSettings.Sessions',\r\n        'pipUserSettings.BasicInfo',\r\n        'pipSettings.Templates'\r\n    ]);\r\n\r\n})();\r\n","/**\r\n * @file Settings basic info controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.BasicInfo',\r\n        ['pipUserSettings.ChangePassword', 'pipUserSettings.VerifyEmail', \r\n            'pipSettings.Service', 'pipSettings.Page',]);\r\n\r\n    thisModule.config(function (pipSettingsProvider) {\r\n        pipSettingsProvider.addTab({\r\n            state: 'basic_info',\r\n            index: 1,\r\n            title: 'SETTINGS_BASIC_INFO_TITLE',\r\n            stateConfig: {\r\n                url: '/basic_info',\r\n                controller: 'pipUserSettingsBasicInfoController',\r\n                templateUrl: 'user_settings/user_settings_basic_info.html',\r\n                auth: true\r\n            }\r\n        });\r\n\r\n        pipSettingsProvider.setDefaultTab('basic_info');\r\n    });\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n     *\r\n     * @description\r\n     * Controller for the predefined 'basic_info' state.\r\n     * Provides sync changes user's profile with remote profile.\r\n     * On state exit everything is saved on the server.\r\n     */\r\n    thisModule.controller('pipUserSettingsBasicInfoController',\r\n        function ($scope, $rootScope, $mdDialog, $state, $window, $timeout, $mdTheming,\r\n                  pipTranslate, pipTransaction, pipTheme,\r\n                  pipToasts, pipDataUser, pipDataParty, pipFormErrors) {\r\n\r\n            try {\r\n                $scope.originalParty = angular.toJson($rootScope.$party);\r\n            } catch (err) {\r\n                throw err;\r\n            }\r\n\r\n            $scope.nameCopy = $rootScope.$party.name;\r\n\r\n            $timeout(function () {\r\n                $scope.loc_pos = $rootScope.$party.loc_pos;\r\n            });\r\n\r\n            $scope.genders = pipTranslate.translateSet(['male', 'female', 'n/s']);\r\n            $scope.languages = pipTranslate.translateSet(['ru', 'en']);\r\n\r\n            $scope.transaction = pipTransaction('settings.basic_info', $scope);\r\n\r\n            $scope.themes = _.keys(_.omit($mdTheming.THEMES, 'default'));\r\n\r\n            $state.get('settings.basic_info').onExit = saveChanges;\r\n\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            /** @see onChangePassword */\r\n            $scope.onChangePassword = onChangePassword;\r\n            /** @see onVerifyEmail */\r\n            $scope.onVerifyEmail = onVerifyEmail;\r\n            /** @see onPictureCreated */\r\n            $scope.onPictureCreated = onPictureCreated;\r\n            /** @see onPictureChanged */\r\n            $scope.onPictureChanged = onPictureChanged;\r\n            /** @see updateUser */\r\n            $scope.onChangeUser = _.debounce(updateUser, 2000);\r\n            /** @see saveChanges */\r\n            $scope.onChangeBasicInfo = _.debounce(saveChanges, 2000);\r\n\r\n            function onPictureChanged() {\r\n                $scope.picture.save(\r\n                    function () {\r\n                        $rootScope.$broadcast('pipPartyAvatarUpdated');\r\n                    },\r\n                    function (error) {\r\n                        return new Error(error);\r\n                    }\r\n                );\r\n            }\r\n\r\n            function onPictureCreated($event) {\r\n                $scope.picture = $event.sender;\r\n                $scope.picture.save(\r\n                    function () {\r\n                        $rootScope.$broadcast('pipPartyAvatarUpdated');\r\n                    },\r\n                    function (error) {\r\n                        return new Error(error);\r\n                    }\r\n                );\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangeBasicInfo\r\n             *\r\n             * @description\r\n             * Saves changes onto server.\r\n             * This method responses on change of the input information.\r\n             * It is updated user's party profile. Also it updates user's profile in $rootScope.\r\n             */\r\n            function saveChanges() {\r\n                if ($scope.form) {\r\n                    $scope.form.$setSubmitted();\r\n                }\r\n\r\n                if ($rootScope.$party) {\r\n\r\n                    if ($rootScope.$party.type === 'person' && $scope.form.$invalid) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check to avoid unnecessary savings\r\n                    $rootScope.$party.loc_pos = $scope.loc_pos;\r\n                    try {\r\n                        var party = angular.toJson($rootScope.$party);\r\n                    } catch (err) {\r\n                        throw err;\r\n                    }\r\n\r\n                    if (party !== $scope.originalParty) {\r\n                        var tid = $scope.transaction.begin('UPDATING');\r\n\r\n                        pipDataParty.updateParty($rootScope.$party,\r\n                            function (data) {\r\n                                if ($scope.transaction.aborted(tid)) {\r\n                                    return;\r\n                                }\r\n                                $scope.transaction.end();\r\n\r\n                                $scope.originalParty = party;\r\n                                $scope.nameCopy = data.name;\r\n                            }, function (error) {\r\n                                $scope.transaction.end(error);\r\n                                $scope.message = String() + 'ERROR_' + error.status || error.data.status_code;\r\n                                $rootScope.$party = angular.fromJson($scope.originalParty);\r\n                            }\r\n                        );\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangeUser\r\n             *\r\n             * @description\r\n             * Saves changes onto server.\r\n             * This method responses on change of the user's profile information.\r\n             * Also it updates user's profile in $rootScope.\r\n             */\r\n            function updateUser() {\r\n                var tid = $scope.transaction.begin('RequestEmailVerification');\r\n\r\n                if ($rootScope.$user.id === $rootScope.$party.id) {\r\n                    pipDataUser.updateUser(\r\n                        {\r\n                            item: $rootScope.$user\r\n                        },\r\n                        function (data) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n\r\n                            pipTranslate.use(data.language);\r\n                            $rootScope.$user.language = data.language;\r\n                            $rootScope.$user.theme = data.theme;\r\n                            if ($rootScope.$user.theme) {\r\n                                pipTheme.setCurrentTheme($rootScope.$user.theme, true);\r\n                            }\r\n\r\n                        }, function (error) {\r\n                            var message;\r\n                            \r\n                            $scope.transaction.end(error);\r\n                            message = String() + 'ERROR_' + error.status || error.data.status_code;\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangePassword\r\n             *\r\n             * @description\r\n             * It opens a dialog panel to change password.\r\n             *\r\n             * @param {Object} event    Triggered event object\r\n             */\r\n            function onChangePassword(event) {\r\n                var message;\r\n\r\n                $mdDialog.show({\r\n                    templateUrl: 'user_settings/user_settings_change_password.html',\r\n                    controller: 'pipUserSettingsChangePasswordController',\r\n                    targetEvent: event,\r\n                    locals: {email: $rootScope.$party.email}\r\n                }).then(\r\n                    function (answer) {\r\n                        if (answer) {\r\n                            message = String() + 'RESET_PWD_SUCCESS_TEXT';\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    });\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onVerifyEmail\r\n             *\r\n             * @description\r\n             * It opens a dialog panel to change password.\r\n             *\r\n             * @param {Object} event    Triggered event object\r\n             */\r\n            function onVerifyEmail(event) {\r\n                var message;\r\n\r\n                $mdDialog.show({\r\n                    templateUrl: 'user_settings/user_settings_verify_email.html',\r\n                    controller: 'pipUserSettingsVerifyEmailController',\r\n                    targetEvent: event,\r\n                    locals: {email: $rootScope.$party.email}\r\n                }).then(\r\n                    function (answer) {\r\n                        $scope.user.email_ver = answer;\r\n                        if (answer) {\r\n                            message = String() + 'VERIFY_EMAIL_SUCCESS_TEXT';\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings change password controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.ChangePassword', []);\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n     *\r\n     * @description\r\n     * Controller for dialog panel of password change.\r\n     */\r\n    thisModule.controller('pipUserSettingsChangePasswordController',\r\n        function ($scope, $rootScope, $mdDialog, email, pipDataUser, pipTransaction, pipFormErrors) {\r\n\r\n            $scope.transaction = pipTransaction('settings.change_password', $scope);\r\n            $scope.errorsRepeatWithHint = function (form, formPart) {\r\n                if ($scope.showRepeatHint) {\r\n                    return pipFormErrors.errorsWithHint(form, formPart);\r\n                }\r\n\r\n                return {};\r\n            };\r\n            $scope.showRepeatHint = true;\r\n            $scope.changePasData = {};\r\n\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            $scope.onCancel = onCancel;\r\n            $scope.onCheckRepeatPassword = onCheckRepeatPassword;\r\n            $scope.onApply = onApply;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onCancel\r\n             *\r\n             * @description\r\n             * Closes opened dialog panel.\r\n             */\r\n            function onCancel() {\r\n                $mdDialog.cancel();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onCheckRepeatPassword\r\n             *\r\n             * @description\r\n             * Validates a password typed into password fields.\r\n             */\r\n            function onCheckRepeatPassword() {\r\n                if ($scope.changePasData) {\r\n                    if ($scope.repeat === $scope.changePasData.new_password || $scope.repeat === '' || !$scope.repeat) {\r\n                        $scope.form.repeat.$setValidity('repeat', true);\r\n                        if ($scope.repeat === $scope.changePasData.new_password) {\r\n                            $scope.showRepeatHint = false;\r\n                        } else {\r\n                            $scope.showRepeatHint = true;\r\n                        }\r\n                    } else {\r\n                        $scope.showRepeatHint = true;\r\n                        $scope.form.repeat.$setValidity('repeat', false);\r\n                    }\r\n                }\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onApply\r\n             *\r\n             * @description\r\n             * Approves password change and sends request to the server on password change.\r\n             */\r\n            function onApply() {\r\n                $scope.onCheckRepeatPassword();\r\n\r\n                if ($scope.form.$invalid) {\r\n                    return;\r\n                }\r\n\r\n                if (!$scope.transaction.begin('CHANGE_PASSWORD')) {\r\n                    return;\r\n                }\r\n\r\n                $scope.changePasData.email = email;\r\n\r\n                pipDataUser.changePassword(\r\n                    $scope.changePasData,\r\n                    function () {\r\n                        $scope.transaction.end();\r\n                        $mdDialog.hide(true);\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n                        pipFormErrors.setFormError(\r\n                            $scope.form, error,\r\n                            {\r\n                                1107: 'oldPassword',\r\n                                1105: 'newPassword'\r\n                            }\r\n                        );\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings sessions controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.Sessions', [\r\n        'pipSettings.Service', 'pipSettings.Page',]);\r\n\r\n    thisModule.config(function (pipSettingsProvider, pipDataSessionProvider) {\r\n        pipSettingsProvider.addTab({\r\n            state: 'sessions',\r\n            index: 3,\r\n            title: 'SETTINGS_ACTIVE_SESSIONS_TITLE',\r\n            stateConfig: {\r\n                url: '/sessions',\r\n                controller: 'pipUserSettingsSessionsController',\r\n                templateUrl: 'user_settings/user_settings_sessions.html',\r\n                auth: true,\r\n                resolve: {\r\n                    sessions: pipDataSessionProvider.readSessionsResolver,\r\n                    sessionId: pipDataSessionProvider.readSessionIdResolver\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n     *\r\n     * @description\r\n     * Controller provides an interface for managing active sessions.\r\n     */\r\n    thisModule.controller('pipUserSettingsSessionsController',\r\n        function ($scope, pipTransaction, pipDataSession, sessions, sessionId) {\r\n\r\n            $scope.sessionId = sessionId;\r\n            $scope.transaction = pipTransaction('settings.sessions', $scope);\r\n            $scope.sessions = sessions;\r\n\r\n            $scope.onRemoveAll = onRemoveAll;\r\n            $scope.onRemove = onRemove;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n             * @name pipUserSettings.Sessions.pipUserSettingsSessionsController:onRemoveAll\r\n             *\r\n             * @description\r\n             * Closes all active session.\r\n             */\r\n            function onRemoveAll() {\r\n                var tid = $scope.transaction.begin('REMOVING');\r\n\r\n                async.eachSeries(\r\n                    $scope.sessions,\r\n                    function (session: any, callback) {\r\n                        if (session.id == $scope.sessionId) {\r\n                            callback();\r\n                        } else {\r\n                            pipDataSession.removeSession(\r\n                                {\r\n                                    session: session\r\n                                },\r\n                                function () {\r\n                                    $scope.sessions = _.without($scope.sessions, session);\r\n                                    callback();\r\n                                },\r\n                                function (error) {\r\n                                    callback;\r\n                                }\r\n                            );\r\n                        }\r\n                    },\r\n                    function (err) {\r\n                        if (err) {\r\n                            $scope.transaction.end(err);\r\n                        }\r\n                        if ($scope.transaction.aborted(tid)) {\r\n                            return;\r\n                        }\r\n                        $scope.transaction.end();\r\n                    });                \r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n             * @name pipUserSettings.Sessions.pipUserSettingsSessionsController:onRemove\r\n             *\r\n             * @description\r\n             * Closes passed session.\r\n             *\r\n             * @param {Object} session  Session configuration object\r\n             */\r\n            function onRemove(session, callback) {\r\n                if (session.id === $scope.sessionId) {\r\n                    return;\r\n                }\r\n                var tid = $scope.transaction.begin('REMOVING');\r\n                pipDataSession.removeSession(\r\n                    {\r\n                        session: session\r\n                    },\r\n                    function () {\r\n                        if ($scope.transaction.aborted(tid)) {\r\n                            return;\r\n                        }\r\n                        $scope.transaction.end();\r\n\r\n                        $scope.sessions = _.without($scope.sessions, session);\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n                        $scope.message = 'ERROR_' + error.status || error.data.status_code;\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* eslint-disable quote-props */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.Strings', ['pipTranslate']);\r\n\r\n    thisModule.config(function (pipTranslateProvider) {\r\n\r\n        // Set translation strings for the module\r\n        pipTranslateProvider.translations('en', {\r\n            'SETTINGS_TITLE': 'Settings',\r\n            'SETTINGS_BASIC_INFO_TITLE': 'Basic info',\r\n            'SETTINGS_ACTIVE_SESSIONS_TITLE': 'Active sessions',\r\n\r\n            'SETTINGS_BASIC_INFO_FULL_NAME': 'Full name',\r\n            'SETTINGS_BASIC_INFO_VERIFY_HINT': 'Please, verify your email address.',\r\n            'SETTINGS_BASIC_INFO_VERIFY_CODE': 'Verify email address',\r\n            'SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD': 'Your password was changed on ',\r\n            'SETTINGS_BASIC_INFO_CHANGE_PASSWORD': 'Change your password',\r\n            'SETTINGS_BASIC_INFO_NAME_HINT': 'Please, use your real name to let other people know who you are.',\r\n            'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME': 'Few words about yourself',\r\n\r\n            'SETTINGS_BASIC_INFO_GENDER': 'Gender',\r\n            'SETTINGS_BASIC_INFO_BIRTHDAY': 'Birthday',\r\n            'SETTINGS_BASIC_INFO_LOCATION': 'Current location',\r\n            'SETTINGS_BASIC_INFO_PRIMARY_EMAIL': 'Primary email',\r\n            'SETTINGS_BASIC_INFO_FROM': 'User since ',\r\n            'SETTINGS_BASIC_INFO_USER_ID': 'User ID',\r\n\r\n            'SETTINGS_CHANGE_PASSWORD_TITLE': 'Change password',\r\n            'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD': 'New password',\r\n            'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD': 'Repeat password',\r\n            'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD': 'Current password',\r\n\r\n            'SETTINGS_ACTIVE_SESSIONS_SUBTITLE': ' If you notice any unfamiliar devices or locations, click' +\r\n            '\"Close Session\" to end the session.',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION': 'Close session',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS': 'Close active sessions',\r\n            'SETTINGS_ACTIVE_SESSION_OS': 'OS: ',\r\n            'SETTINGS_ACTIVE_SESSION_IP': 'IP: ',\r\n            'SETTINGS_ACTIVE_SESSION_ACTIVE': 'active',\r\n\r\n            'SETTINGS_BLACKLIST_TITLE': 'Blacklist',\r\n            'SETTINGS_BLACKLIST_SUBTITLE': 'Parties from blacklist will not be able to send you invitations and ' +\r\n            'private messages.',\r\n            'SETTINGS_BLACKLIST_UNBLOCK': 'Unblock',\r\n            'SETTINGS_BLACKLIST_EMPTY': 'You have no blocked parties',\r\n\r\n            'SETTINGS_CONTACT_INFO_TITLE': 'Contact info',\r\n            'SETTINGS_CONTACT_INFO_EMAIL': 'Email',\r\n            'SETTINGS_CONTACT_INFO_ADD_EMAIL': 'Add email',\r\n            'SETTINGS_CONTACT_INFO_ADD_PHONE': 'Add phone',\r\n            'SETTINGS_CONTACT_INFO_ADD_ADDRESS': 'Add address',\r\n            'SETTINGS_CONTACT_INFO_ADD_ACCOUNT': 'Add account',\r\n            'SETTINGS_CONTACT_INFO_ADD_URL': 'Add URL',\r\n            'SETTINGS_CONTACT_INFO_ADDRESS': 'Address',\r\n            'SETTINGS_CONTACT_INFO_PHONE': 'Phone',\r\n            'SETTINGS_CONTACT_INFO_ACCOUNT_NAME': 'Account name',\r\n            'SETTINGS_CONTACT_INFO_URL': 'URL',\r\n\r\n            'THEME': 'Theme',\r\n\r\n            'HINT_PASSWORD': 'Minimum 6 characters',\r\n            'HINT_REPEAT_PASSWORD': 'Repeat password',\r\n\r\n            'ERROR_WRONG_PASSWORD': 'Wrong password',\r\n            'ERROR_IDENTICAL_PASSWORDS': 'Old and new passwords are identical',\r\n            'REPEAT_PASSWORD_INVALID': 'Password does not match',\r\n            'ERROR_EMAIL_INVALID': 'Please, enter a valid email'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'SETTINGS_TITLE': '',\r\n            'SETTINGS_BASIC_INFO_TITLE': ' ',\r\n            'SETTINGS_ACTIVE_SESSIONS_TITLE': ' ',\r\n\r\n            'SETTINGS_BASIC_INFO_FULL_NAME': ' ',\r\n            'SETTINGS_BASIC_INFO_NAME_HINT': ',   ,     ',\r\n            'SETTINGS_BASIC_INFO_VERIFY_HINT': ',     ',\r\n            'SETTINGS_BASIC_INFO_VERIFY_CODE': '  .',\r\n            'SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD': '    ',\r\n            'SETTINGS_BASIC_INFO_CHANGE_PASSWORD': ' ',\r\n\r\n            'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME': '   ',\r\n            'SETTINGS_BASIC_INFO_GENDER': '',\r\n            'SETTINGS_BASIC_INFO_BIRTHDAY': ' ',\r\n            'SETTINGS_BASIC_INFO_LOCATION': ' ',\r\n            'SETTINGS_BASIC_INFO_PRIMARY_EMAIL': '  . ',\r\n            'SETTINGS_BASIC_INFO_FROM': ' ',\r\n            'SETTINGS_BASIC_INFO_USER_ID': ' ',\r\n\r\n            'SETTINGS_CHANGE_PASSWORD_TITLE': ' ',\r\n            'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD': ' ',\r\n            'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD': '',\r\n            'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD': ' ',\r\n\r\n            'SETTINGS_ACTIVE_SESSIONS_SUBTITLE': '   -    ' +\r\n            ',   \" \",   .',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION': ' ',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS': '  ',\r\n            'SETTINGS_ACTIVE_SESSION_OS': ': ',\r\n            'SETTINGS_ACTIVE_SESSION_IP': 'IP: ',\r\n            'SETTINGS_ACTIVE_SESSION_ACTIVE': '',\r\n\r\n            'SETTINGS_BLACKLIST_TITLE': '',\r\n            'SETTINGS_BLACKLIST_SUBTITLE': '     ' +\r\n            '      .',\r\n            'SETTINGS_BLACKLIST_UNBLOCK': '',\r\n            'SETTINGS_BLACKLIST_EMPTY': '    ',\r\n\r\n            'SETTINGS_CONTACT_INFO_TITLE': '',\r\n            'SETTINGS_CONTACT_INFO_EMAIL': '  ',\r\n            'SETTINGS_CONTACT_INFO_ADD_EMAIL': '  . ',\r\n            'SETTINGS_CONTACT_INFO_ADD_PHONE': ' ',\r\n            'SETTINGS_CONTACT_INFO_ADD_ADDRESS': ' ',\r\n            'SETTINGS_CONTACT_INFO_ADD_ACCOUNT': ' ',\r\n            'SETTINGS_CONTACT_INFO_ADD_URL': ' -',\r\n            'SETTINGS_CONTACT_INFO_ADDRESS': '',\r\n            'SETTINGS_CONTACT_INFO_PHONE': '',\r\n            'SETTINGS_CONTACT_INFO_ACCOUNT_NAME': '  ',\r\n            'SETTINGS_CONTACT_INFO_URL': ' ',\r\n\r\n            'THEME': '',\r\n\r\n            'HINT_PASSWORD': ' 6 ',\r\n            'HINT_REPEAT_PASSWORD': ' ',\r\n\r\n            'ERROR_WRONG_PASSWORD': ' ',\r\n            'ERROR_IDENTICAL_PASSWORDS': '    ',\r\n            'REPEAT_PASSWORD_INVALID': '  ',\r\n            'ERROR_EMAIL_INVALID': ',   .'\r\n        });\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Settings verify email controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.VerifyEmail', []);\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n     *\r\n     * @description\r\n     * Controller for verify email dialog panel.\r\n     */\r\n    thisModule.controller('pipUserSettingsVerifyEmailController',\r\n        function ($scope, $rootScope, $mdDialog, pipTransaction, pipFormErrors, pipDataUser, email) {\r\n\r\n            $scope.emailVerified = false;\r\n            $scope.data = {\r\n                email: email,\r\n                code: ''\r\n            };\r\n            $scope.transaction = pipTransaction('settings.verify_email', $scope);\r\n\r\n            /** @see onAbort */\r\n            $scope.onAbort = onAbort;\r\n            /** @see onRequestVerificationClick*/\r\n            $scope.onRequestVerificationClick = onRequestVerificationClick;\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            /** @see onVerify */\r\n            $scope.onVerify = onVerify;\r\n            /** @see onCancel */\r\n            $scope.onCancel = onCancel;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onAbort\r\n             *\r\n             * @description\r\n             * Aborts a verify request.\r\n             */\r\n            function onAbort() {\r\n                $scope.transaction.abort();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onCancel\r\n             *\r\n             * @description\r\n             * Closes opened dialog panel.\r\n             */\r\n            function onCancel() {\r\n                $mdDialog.cancel();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onRequestVerificationClick\r\n             *\r\n             * @description\r\n             * Sends request to verify entered email.\r\n             */\r\n            function onRequestVerificationClick() {\r\n                    var tid = $scope.transaction.begin('RequestEmailVerification');\r\n\r\n                pipDataUser.requestEmailVerification(\r\n                    {},                         \r\n                    function (result) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n                        }, \r\n                        function (error) {\r\n                            $scope.transaction.end(error);\r\n                        }\r\n                    );\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onVerify\r\n             *\r\n             * @description\r\n             * Initiates request on verify email on the server.\r\n             */\r\n            function onVerify() {\r\n                $scope.form.$setSubmitted();\r\n\r\n                if ($scope.form.$invalid) {\r\n                    return;\r\n                }\r\n                var tid = $scope.transaction.begin('Verifying');\r\n\r\n                pipDataUser.verifyEmail(\r\n                    {\r\n                        email: $scope.data.email,\r\n                        code: $scope.data.code\r\n                    }, \r\n                    function (verifyData) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n\r\n                        $mdDialog.hide(true);\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n\r\n                        pipFormErrors.setFormError(\r\n                            $scope.form, error,\r\n                            {\r\n                                1106: 'email',\r\n                                1103: 'code'\r\n                            }\r\n                        );\r\n\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('settings_page/SettingsPage.html',\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar><pip-document width=\"800\" min-height=\"400\" class=\"pip-settings\"><div class=\"pip-menu-container\" ng-hide=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\"><md-list class=\"pip-menu pip-simple-list\" pip-selected=\"vm.selected.tabIndex\" pip-selected-watch=\"vm.selected.navId\" pip-select=\"vm.onNavigationSelect($event.id)\"><md-list-item class=\"pip-simple-list-item pip-selectable flex\" ng-repeat=\"tab in vm.tabs track by tab.state\" ng-if=\"vm.$party.id == vm.$user.id || tab.state == \\'settings.basic_info\\'|| tab.state ==\\'settings.contact_info\\' || tab.state ==\\'settings.blacklist\\'\" md-ink-ripple=\"\" pip-id=\"{{:: tab.state }}\"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class=\"pip-content-container\"><pip-dropdown pip-actions=\"vm.tabs\" pip-dropdown-select=\"vm.onDropdownSelect\" pip-active-index=\"vm.selected.tabIndex\"></pip-dropdown><div class=\"pip-body tp24-flex layout-column\" ui-view=\"\"></div></div></div><div class=\"layout-column layout-align-center-center flex\" ng-show=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\">{{::\\'ERROR_400\\' | translate}}</div></pip-document>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('user_settings/user_settings_basic_info.html',\n    '<form name=\"form\" class=\"w-stretch\" novalidate=\"\"><md-progress-linear class=\"pip-progress-top\" ng-show=\"transaction.busy()\" md-mode=\"indeterminate\"></md-progress-linear><div class=\"layout-row bm12\"><div class=\"md-tile-left\"><pip-avatar-edit pip-party-id=\"$party.id\" pip-created=\"onPictureCreated($event)\" pip-changed=\"onPictureChanged($control, $event)\"></pip-avatar-edit></div><div class=\"md-tile-content tp0 layout-align-center\"><h3 class=\"tm16 bm8 text-one-line\">{{ nameCopy }}</h3><p class=\"text-primary text-overflow m0\">{{::\\'SETTINGS_BASIC_INFO_FROM\\' | translate}} {{$user.signup | formatLongDate }}</p></div></div><md-input-container class=\"md-block\"><label>{{::\\'SETTINGS_BASIC_INFO_FULL_NAME\\' | translate}}</label> <input name=\"fullName\" step=\"any\" type=\"text\" tabindex=\"0\" required=\"\" ng-model=\"$party.name\" ng-disabled=\"transaction.busy()\" ng-change=\"onChangeBasicInfo()\"><div class=\"hint\" ng-if=\"errorsWithHint(form, form.fullName).hint\">{{::\\'ERROR_FULLNAME_INVALID\\' | translate}}</div></md-input-container><md-input-container class=\"md-block bm0\"><label>{{::\\'SETTINGS_BASIC_INFO_PRIMARY_EMAIL\\' | translate}}</label> <input name=\"email\" type=\"email\" required=\"\" ng-model=\"$party.email\" ng-change=\"onChangeBasicInfo()\" pip-email-unique=\"{{$party.email}}\"><div class=\"hint\" ng-if=\"errorsWithHint(form, form.email).hint && !$user.email_ver\">{{::\\'SETTINGS_BASIC_INFO_VERIFY_HINT\\' | translate}}</div><div ng-messages=\"errorsWithHint(form.email)\" ng-hide=\"$party.type ==\\'team\\'\"><div ng-message=\"email\">{{::\\'ERROR_EMAIL_INVALID\\' | translate}}</div><div ng-message=\"emailUnique\">{{::\\'ERROR_EMAIL_INVALID\\' | translate}}</div></div></md-input-container><md-button class=\"md-raised bm16 tm8 rm8\" ng-click=\"onVerifyEmail($event)\" ng-hide=\"$user.email_ver || $party.type ==\\'team\\'\">{{::\\'SETTINGS_BASIC_INFO_VERIFY_CODE\\' | translate}}</md-button><md-button ng-click=\"onChangePassword($event)\" class=\"md-raised bm16 tm8\" ng-hide=\"$party.type ==\\'team\\'\">{{::\\'SETTINGS_BASIC_INFO_CHANGE_PASSWORD\\' | translate}}</md-button><md-input-container class=\"md-block flex\"><label>{{::\\'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME\\' | translate }}</label> <textarea ng-model=\"$party.about\" columns=\"1\" ng-change=\"onChangeBasicInfo()\"></textarea></md-input-container><md-input-container class=\"md-block\" ng-hide=\"$party.type ==\\'team\\'\"><label>{{::\\'GENDER\\' | translate}}</label><md-select ng-model=\"$party.gender\" ng-change=\"onChangeBasicInfo()\" placeholder=\"{{\\'GENDER\\' | translate}}\"><md-option ng-value=\"gender.id\" ng-repeat=\"gender in genders\">{{gender.name}}</md-option></md-select></md-input-container><div ng-hide=\"$party.type ==\\'team\\'\"><p class=\"text-caption text-grey tm0 bm0\">{{::\\'SETTINGS_BASIC_INFO_BIRTHDAY\\' | translate}}</p><pip-date ng-model=\"$party.birthday\" ng-change=\"onChangeBasicInfo()\" pip-time-mode=\"past time-mode=\" past\"=\"\"></pip-date></div><md-input-container class=\"md-block\" ng-hide=\"$party.type ==\\'team\\'\"><label>{{::\\'LANGUAGE\\' | translate}}</label><md-select placeholder=\"{{\\'LANGUAGE\\' | translate}}\" ng-model=\"$user.language\" ng-change=\"onChangeUser()\"><md-option ng-value=\"language.id\" ng-repeat=\"language in languages\">{{language.name}}</md-option></md-select></md-input-container><md-input-container class=\"md-block\" ng-if=\"$party.type !=\\'team\\'\"><label>{{::\\'THEME\\' | translate}}</label><md-select class=\"w-stretch theme-text-primary\" ng-model=\"$user.theme\" ng-change=\"onChangeUser()\" ng-disabled=\"transaction.busy()\"><md-option ng-value=\"theme\" ng-repeat=\"theme in themes\" ng-selected=\"$theme == theme ? true : false\">{{ theme | translate }}</md-option></md-select></md-input-container><pip-location-edit class=\"map-edit bm24-flex\" ng-hide=\"$party.type ==\\'team\\'\" pip-changed=\"onChangeBasicInfo()\" pip-location-name=\"$party.loc_name\" pip-location-pos=\"loc_pos\"></pip-location-edit></form>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('user_settings/user_settings_change_password.html',\n    '<md-dialog class=\"pip-dialog layout-column\" width=\"440\"><form name=\"form\" ng-submit=\"onApply()\"><div class=\"pip-header\"><h3 class=\"m0\">{{::\\'SETTINGS_CHANGE_PASSWORD_TITLE\\' | translate : module}}</h3></div><div class=\"pip-body\"><div class=\"pip-content\"><div class=\"text-error bm8\" ng-messages=\"form.$serverError\"><div ng-message=\"ERROR_UNKNOWN\">{{ form.$serverError.ERROR_UNKNOWN | translate }}</div></div><md-input-container class=\"md-block\"><label>{{::\\'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD\\' | translate }}</label> <input name=\"oldPassword\" type=\"password\" ng-model=\"changePasData.old_password\" ng-required=\"change_password.$submitted\" pip-clear-errors=\"\"><div ng-messages=\"errorsWithHint(form, form.oldPassword)\"><div ng-message=\"required\">{{::\\'ERROR_REQUIRED\\' | translate }}</div><div ng-message=\"ERROR_1107\">{{::\\'ERROR_WRONG_PASSWORD\\' | translate }}</div></div></md-input-container><md-input-container class=\"md-block\"><label>{{\\'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD\\' | translate }}</label> <input name=\"newPassword\" type=\"password\" ng-model=\"changePasData.new_password\" ng-change=\"onCheckRepeatPassword()\" ng-required=\"change_password.$submitted\" ng-minlength=\"6\" pip-clear-errors=\"\"><div class=\"hint\" ng-if=\"errorsWithHint(form, form.newPassword).hint\">{{ \\'HINT_PASSWORD\\' | translate }}</div><div ng-messages=\"errorsWithHint(form, form.newPassword)\"><div ng-message=\"required\">{{::\\'ERROR_REQUIRED\\' | translate}}</div><div ng-message=\"minlength\">{{::\\'HINT_PASSWORD\\' | translate }}</div><div ng-message=\"ERROR_1105\">{{::\\'ERROR_IDENTICAL_PASSWORDS\\' | translate }}</div></div></md-input-container><md-input-container class=\"md-block\"><label>{{ \\'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD\\' | translate }}</label> <input name=\"repeat\" type=\"password\" ng-model=\"repeat\" ng-change=\"onCheckRepeatPassword()\" ng-required=\"change_password.$submitted\" ng-minlength=\"6\"><div class=\"hint\" ng-if=\"errorsRepeatWithHint(form.repeat).hint\">{{::\\'HINT_REPEAT_PASSWORD\\' | translate }}</div><div ng-messages=\"errorsRepeatWithHint(form.repeat)\"><div ng-message=\"required\">{{::\\'ERROR_REQUIRED\\' | translate }}</div><div ng-message=\"minlength\">{{::\\'HINT_PASSWORD\\' | translate }}</div><div ng-message=\"repeat\">{{::\\'REPEAT_PASSWORD_INVALID\\' | translate }}</div></div></md-input-container></div></div><div class=\"pip-footer\"><div><md-button aria-label=\"xxx\" ng-click=\"onCancel()\">{{::\\'CANCEL\\' | translate }}</md-button><md-button type=\"submit\" class=\"md-accent\" aria-label=\"xxx\">{{::\\'APPLY\\' | translate : module}}</md-button></div></div></form></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('user_settings/user_settings_sessions.html',\n    '<md-progress-linear ng-show=\"transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\"></md-progress-linear><div class=\"pip-details-title pip-sessions\"><p class=\"pip-title bm16\">{{::\\'SETTINGS_ACTIVE_SESSIONS_TITLE\\' | translate}}</p><p class=\"pip-subtitle\">{{::\\'SETTINGS_ACTIVE_SESSIONS_SUBTITLE\\' | translate}}</p></div><md-list class=\"w-stretch\"><div ng-repeat=\"session in sessions\"><div class=\"layout-row\" ng-init=\"showBlock = session.id != sessionId\" ng-click=\"showBlock = !showBlock\"><p class=\"m0 text-subhead2 text-overflow max-w50-stretch\">{{::session.client}}</p><p class=\"m0 lp4 text-body1 color-secondary-text flex\">{{::\\'SETTINGS_ACTIVE_SESSION_ACTIVE\\' | translate}}</p><p class=\"m0 text-body1 color-secondary-text\">{{::country}}<md-icon ng-if=\"showBlock\" md-svg-icon=\"icons:triangle-up\"></md-icon><md-icon ng-if=\"!showBlock\" md-svg-icon=\"icons:triangle-down\"></md-icon></p></div><div class=\"layout-row bm8 bp8\" ng-class=\"{\\'divider-bottom\\':!$last}\"><div class=\"flex-50\"><p class=\"m0 bm4 text-body1 text-overflow color-secondary-text\">{{session.last_req | date : \\'medium\\'}}</p><p class=\"m0 bm4 text-body1 text-overflow color-secondary-text\" ng-show=\"showBlock\">{{::\\'SETTINGS_ACTIVE_SESSION_OS\\' | translate}}{{::session.platform}}</p><p class=\"m0 bm4 text-body1 text-overflow color-secondary-text\" ng-show=\"showBlock\">{{::\\'SETTINGS_ACTIVE_SESSION_IP\\' | translate}}{{::session.address}}</p><md-button class=\"md-raised\" ng-show=\"showBlock && session.id != sessionId\" ng-click=\"onRemove(session)\">{{::\\'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION\\' | translate}}</md-button></div><pip-location-ip class=\"map-edit flex-50\" ng-if=\"showBlock\" pip-ipaddress=\"session.address\" pip-extra-info=\"country = extraInfo.country\"></pip-location-ip></div></div></md-list><div class=\"layout-row layout-align-end-center\"><md-button class=\"md-raised\" ng-show=\"sessions.length > 1\" ng-click=\"onRemoveAll()\">{{::\\'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS\\' | translate}}</md-button></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('user_settings/user_settings_verify_email.html',\n    '<md-dialog class=\"pip-dialog layout-column\" width=\"440\"><div class=\"pip-body\"><div class=\"pip-content\"><md-progress-linear ng-show=\"transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\"></md-progress-linear><h2>{{::\\'VERIFY_EMAIL_TITLE\\' | translate}}</h2><p class=\"title-padding\">{{::\\'VERIFY_EMAIL_TEXT_1\\' | translate}}</p><form name=\"form\" novalidate=\"\"><div ng-messages=\"form.$serverError\" class=\"text-error bm8\"><div ng-message=\"ERROR_UNKNOWN\">{{ form.$serverError.ERROR_UNKNOWN | translate }}</div></div><md-input-container class=\"display bp4 md-block\"><label>{{::\\'EMAIL\\' | translate}}</label> <input name=\"email\" type=\"email\" ng-model=\"data.email\" required=\"\" step=\"any\" pip-clear-errors=\"\" tabindex=\"1\" ng-disabled=\"transaction.busy()\" pip-test=\"input-email\"><div class=\"hint\" ng-if=\"errorsWithHint(form, form.email).hint\">{{::\\'HINT_EMAIL\\' | translate}}</div><div ng-messages=\"errorsWithHint(form, form.email)\" xng-if=\"!form.email.$pristine\"><div ng-message=\"required\">{{::\\'ERROR_EMAIL_INVALID\\' | translate }}</div><div ng-message=\"ERROR_1106\">{{::\\'ERROR_USER_NOT_FOUND\\' | translate}}</div></div></md-input-container><md-input-container class=\"md-block\"><label>{{::\\'ENTRY_VERIFICATION_CODE\\' | translate}}</label> <input name=\"code\" ng-disabled=\"transaction.busy()\" tabindex=\"0\" ng-model=\"data.code\" required=\"\" pip-clear-errors=\"\"><div ng-messages=\"errorsWithHint(form, form.code)\"><div ng-message=\"required\">{{::\\'ERROR_CODE_INVALID\\' | translate }}</div><div ng-message=\"ERROR_1103\">{{::\\'ERROR_CODE_WRONG\\' | translate }}</div></div></md-input-container><p>{{::\\'VERIFY_EMAIL_TEXT_21\\' | translate}} <a ng-click=\"onRequestVerificationClick()\" class=\"pointer\" tabindex=\"0\">{{::\\'VERIFY_EMAIL_RESEND\\' | translate}}</a> {{::\\'VERIFY_EMAIL_TEXT_22\\' | translate}}</p></form></div></div><div class=\"pip-footer\"><md-button ng-click=\"onCancel()\" ng-hide=\"transaction.busy()\" aria-label=\"xxx\">{{::\\'CANCEL\\' | translate}}</md-button><md-button class=\"md-accent\" ng-click=\"onVerify()\" ng-hide=\"transaction.busy()\" tabindex=\"0\" aria-label=\"xxx\" ng-disabled=\"data.code.length == 0 || data.email.length == 0 || (!data.email && form.$pristine) || (!data.code)\">{{::\\'VERIFY\\' | translate}}</md-button><md-button class=\"md-warn\" ng-show=\"transaction.busy()\" ng-click=\"transaction.abort()\" tabindex=\"0\" aria-label=\"xxx\">{{::\\'CANCEL\\' | translate}}</md-button></div></md-dialog>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-settings-html.min.js.map\n","import {HelpTab} from \"./HelpTab\";\r\n\r\nexport class HelpConfig {\r\n\r\n    public defaultTab: string;\r\n    public tabs: HelpTab[] = [];\r\n    public titleText: string = 'SETTINGS_TITLE';\r\n    public titleLogo: string = null;\r\n    public isNavIcon: boolean = true;\r\n\r\n}\r\n","import {HelpTab} from \"./HelpTab\";\r\n\r\nexport class HelpPageSelectedTab {\r\n    public tab: HelpTab;\r\n    public tabIndex: number;\r\n    public tabId: string;\r\n}","export class HelpStateConfig {\r\n    public url: string;\r\n    public auth: boolean = false;\r\n    public templateUrl?: string;\r\n    public template?: string;\r\n}","import {HelpStateConfig} from './HelpStateConfig';\r\n\r\nexport class HelpTab {\r\n    public state: string;\r\n    public title: string;\r\n    public index: number;\r\n    public access: Function;\r\n    public visible: boolean;\r\n    public stateConfig: HelpStateConfig;\r\n}","// Prevent junk from going into typescript definitions\r\nimport {IHelpService} from '../help_service/HelpService';\r\nimport {HelpTab} from '../help_common/HelpTab';\r\nimport {HelpPageSelectedTab} from '../help_common/HelpPageSelectedTab';\r\n\r\ninterface IHelpPage {\r\n    tabs: HelpTab[];\r\n    selected: HelpPageSelectedTab;\r\n    onDropdownSelect: Function;\r\n    onNavigationSelect(state: string): void;\r\n}\r\n\r\nclass HelpPageController implements IHelpPage {\r\n    public tabs: HelpTab[];\r\n    public selected: HelpPageSelectedTab;\r\n    public onDropdownSelect: Function;\r\n\r\n    constructor(\r\n        private $log: ng.ILogService,\r\n        private $state: ng.ui.IStateService,\r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: angular.ITimeoutService,\r\n        pipNavService: pip.nav.INavService,\r\n        pipHelp: IHelpService\r\n    ) {\r\n\r\n        this.tabs = _.filter(pipHelp.getTabs(), (tab: HelpTab) =>{\r\n            if (tab.visible === true) {\r\n                    return tab;\r\n            }\r\n        });\r\n\r\n        this.tabs = _.sortBy(this.tabs, 'index');\r\n\r\n        this.selected = new HelpPageSelectedTab();\r\n        if (this.$state.current.name !== 'help') {\r\n            this.initSelect(this.$state.current.name);\r\n        } else if (this.$state.current.name === 'help' && pipHelp.getDefaultTab()) {\r\n            this.initSelect(pipHelp.getDefaultTab().state);\r\n        } else {\r\n            $timeout(() => {\r\n                if (pipHelp.getDefaultTab()) {\r\n                    this.initSelect(pipHelp.getDefaultTab().state);\r\n                }\r\n                if (!pipHelp.getDefaultTab() && this.tabs && this.tabs.length > 0) {\r\n                    this.initSelect(this.tabs[0].state);\r\n                }\r\n            });\r\n        }\r\n\r\n        pipNavService.icon.showMenu();\r\n        pipNavService.breadcrumb.text = \"Help\";\r\n        pipNavService.actions.hide();\r\n        pipNavService.appbar.removeShadow();\r\n        \r\n        this.onDropdownSelect = (state) => {\r\n            this.onNavigationSelect(state.state);\r\n        }\r\n    }\r\n\r\n    private initSelect(state: string): void {\r\n        this.selected.tab = _.find(this.tabs, (tab: HelpTab) => {\r\n            return tab.state === state;\r\n        });\r\n        this.selected.tabIndex = _.indexOf(this.tabs, this.selected.tab);\r\n        this.selected.tabId = state;\r\n    }\r\n\r\n    public onNavigationSelect(state: string): void {\r\n        this.initSelect(state);\r\n\r\n        if (this.selected.tab) {\r\n            this.$state.go(state);\r\n        }\r\n    }\r\n}\r\n\r\n(() => {\r\n\r\nangular.module('pipHelp.Page', [\r\n    'ui.router', \r\n    'pipHelp.Service',\r\n    'pipNav', \r\n    'pipSelected',\r\n    'pipTranslate',\r\n    'pipHelp.Templates'\r\n    ])\r\n    .controller('pipHelpPageController', HelpPageController);\r\n})();\r\n\r\nimport './HelpPageRoutes';","'use strict';\r\n\r\nfunction configureHelpPageRoutes($stateProvider) {\r\n    $stateProvider\r\n        .state('help', {\r\n            url: '/help?party_id',\r\n            auth: true,\r\n            controllerAs: '$ctrl',\r\n            controller: 'pipHelpPageController',\r\n            templateUrl: 'help_page/HelpPage.html'\r\n        });      \r\n}\r\n\r\nangular.module('pipHelp.Page')\r\n    .config(configureHelpPageRoutes);\r\n","import {HelpTab} from \"../help_common/HelpTab\";\r\nimport {HelpConfig} from \"../help_common/HelpConfig\";\r\nimport {HelpService} from \"../help_service/HelpService\";\r\n\r\nexport interface IHelpProvider extends ng.IServiceProvider {\r\n    getDefaultTab(): HelpTab;\r\n    addTab(tabObj: HelpTab): void;\r\n    setDefaultTab(name: string): void;\r\n    getFullStateName(state: string): string;\r\n}\r\n\r\nclass HelpProvider implements IHelpProvider {\r\n    private _service: HelpService;\r\n    private _config: HelpConfig = new HelpConfig();\r\n\r\n    constructor( private $stateProvider: ng.ui.IStateProvider) {}\r\n\r\n    public getFullStateName(state: string): string {\r\n        return 'help.' + state;\r\n    }\r\n\r\n    public getDefaultTab(): HelpTab {\r\n        let defaultTab: HelpTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, (p) => {\r\n            return p.state === this._config.defaultTab;\r\n        });\r\n\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public addTab(tabObj: HelpTab): void {\r\n        let existingTab: HelpTab;\r\n        this.validateTab(tabObj);\r\n        existingTab = _.find(this._config.tabs, (p) => {\r\n            return p.state === 'help.' + tabObj.state;\r\n        });\r\n        if (existingTab) {\r\n            throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n        }\r\n\r\n        this._config.tabs.push({\r\n            state: this.getFullStateName(tabObj.state),\r\n            title: tabObj.title,\r\n            index: tabObj.index || 100000,\r\n            access: tabObj.access,\r\n            visible: tabObj.visible !== false,\r\n            stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n        });\r\n        this.$stateProvider.state(this.getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n        // if we just added first state and no default state is specified\r\n        if (typeof _.isUndefined(this._config.defaultTab) && this._config.tabs.length === 1) {\r\n            this.setDefaultTab(tabObj.state);\r\n        }\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        // TODO [apidhirnyi] extract expression inside 'if' into variable. It isn't readable now.\r\n        if (!_.find(this._config.tabs, (tab: HelpTab) => {\r\n            return tab.state === 'help.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n        //this.$stateProvider.go(this._config.defaultTab);\r\n            //pipAuthStateProvider.redirect('help', getFullStateName(name));\r\n    }\r\n\r\n    /**\r\n     * Validates passed tab config object\r\n     * If passed tab is not valid it will throw an error\r\n     */\r\n\r\n    private validateTab(tabObj: HelpTab) {\r\n        if (!tabObj || !_.isObject(tabObj)) {\r\n            throw new Error('Invalid object');\r\n        }\r\n\r\n        if (tabObj.state === null || tabObj.state === '') {\r\n            throw new Error('Tab should have valid Angular UI router state name');\r\n        }\r\n\r\n        if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n            throw new Error('\"access\" should be a function');\r\n        }\r\n\r\n        if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n            throw new Error('Invalid state configuration object');\r\n        }\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo: string): string {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (!_.isNull(value) && !_.isUndefined(value)) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public $get() {\r\n        \"ngInject\";\r\n\r\n        if (_.isNull(this._service) || _.isUndefined(this._service)) {\r\n            this._service = new HelpService(this._config);\r\n        }\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipHelp.Service', [])\r\n    .provider('pipHelp', HelpProvider);","'use strict';\r\n\r\nimport {HelpTab} from \"../help_common/HelpTab\";\r\nimport {HelpConfig} from \"../help_common/HelpConfig\";\r\n\r\nexport interface IHelpService {\r\n    getDefaultTab(): HelpTab;\r\n    showTitleText (newTitleText: string): string;\r\n    showTitleLogo(newTitleLogo: string);\r\n    setDefaultTab(name: string): void;\r\n    showNavIcon(value: boolean): boolean;\r\n    getTabs(): HelpTab[];\r\n}\r\n\r\nexport class HelpService implements IHelpService {\r\n\r\n    public constructor( private _config: HelpConfig) {\r\n        \"ngInject\";\r\n    }\r\n\r\n    private getFullStateName(state: string): string {\r\n        return 'help.' + state;\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        if (!_.find(this._config.tabs, (tab) => {\r\n            return tab.state === 'help.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n    }\r\n\r\n    public getDefaultTab(): HelpTab {\r\n        let defaultTab: HelpTab;\r\n        defaultTab = _.find(this._config.tabs, (p: HelpTab) => {\r\n            return p.state === this._config.defaultTab;\r\n        });\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo: string): string {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean): boolean {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public getTabs(): HelpTab[] {\r\n        return _.cloneDeep(this._config.tabs);\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n","/**\r\n * @file Registration of all help components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\nimport './help_provider/HelpProvider';\r\nimport './help_page/HelpPageController';\r\n\r\nangular.module('pipHelp', [\r\n    'pipHelp.Service',\r\n    'pipHelp.Page'\r\n]);\r\n\r\nexport * from './help_service/HelpService';\r\nexport * from './help_page/HelpPageController';","(function(module) {\ntry {\n  module = angular.module('pipHelp.Templates');\n} catch (e) {\n  module = angular.module('pipHelp.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('help_page/HelpPage.html',\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar><pip-document width=\"800\" min-height=\"400\" class=\"pip-help\"><div class=\"pip-menu-container\" ng-hide=\"$ctrl.manager === false || !$ctrl.tabs || $ctrl.tabs.length < 1\"><md-list class=\"pip-menu pip-simple-list\" pip-selected=\"$ctrl.selected.tabIndex\" pip-selected-watch=\"$ctrl.selected.navId\" pip-select=\"$ctrl.onNavigationSelect($event.id)\"><md-list-item class=\"pip-simple-list-item pip-selectable flex\" ng-repeat=\"tab in $ctrl.tabs track by tab.state\" md-ink-ripple=\"\" pip-id=\"{{:: tab.state }}\"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class=\"pip-content-container\"><pip-dropdown pip-actions=\"$ctrl.tabs\" pip-dropdown-select=\"$ctrl.onDropdownSelect\" pip-active-index=\"$ctrl.selected.tabIndex\"></pip-dropdown><div class=\"pip-body p0 layout-column\" ui-view=\"\"></div></div></div><div class=\"layout-column layout-align-center-center flex\" ng-show=\"$ctrl.manager === false || !$ctrl.tabs || $ctrl.tabs.length < 1\">{{::\\'ERROR_400\\' | translate}}</div></pip-document>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-help-html.min.js.map\n"]}