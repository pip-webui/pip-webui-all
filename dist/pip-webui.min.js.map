{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/dependencies/TranslateFilter.ts","src/fabs/FabTooltipVisibility.ts","src/index.ts","src/refresh_button/RefreshButton.ts","src/toggle_buttons/ToggleButtons.ts","temp/pip-webui-buttons-html.min.js","src/draggable/CancelDrag.ts","src/draggable/Drag.ts","src/draggable/DraggableService.ts","src/draggable/Drop.ts","src/draggable/PreventDrag.ts","src/draggable/index.ts","src/focused/focused.ts","src/infinite_scroll/infiniteScroll.ts","src/selected/selected.ts","src/shortcuts/IShortcutsService.ts","src/shortcuts/Shortcut.ts","src/shortcuts/ShortcutBindingService.ts","src/shortcuts/ShortcutDirective.ts","src/shortcuts/ShortcutsService.ts","src/shortcuts/index.ts","src/unsaved_changes/unsavedChanges.ts","src/color_picker/ColorPicker.ts","src/image_slider/ImageSlider.ts","src/image_slider/ImageSliderService.ts","src/image_slider/SliderButton.ts","src/image_slider/SliderIndicator.ts","src/image_slider/index.ts","src/markdown/Markdown.ts","src/popover/Popover.ts","src/popover/PopoverService.ts","src/popover/index.ts","src/progress/RoutingProgress.ts","src/toast/Toast.ts","src/toast/ToastService.ts","src/toast/index.ts","temp/pip-webui-controls-html.min.js","src/date/Date.ts","src/date_format/DateConvertService.ts","src/date_format/DateFormatFilter.ts","src/date_format/DateFormatService.ts","src/date_format/index.ts","src/date_format/IDateConvertService.ts","src/date_format/IDateFormatService.ts","src/date_range/DateRange.ts","src/time_range/TimeRange.ts","src/time_range_edit/TimeRangeEdit.ts","temp/pip-webui-dates-html.min.js","src/bar_chart/BarChart.ts","src/chart_colors/ChartColorsService.ts","src/chart_legend/ChartInteractiveLegend.ts","src/line_chart/LineChart.ts","src/pie_chart/PieChart.ts","temp/pip-webui-charts-html.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","buttons","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","translate","$injector","pipTranslate","has","get","key","$inject","filter","2","pipFabTooltipVisibility","$parse","$timeout","restrict","scope","controller","FabTooltipVisibilityController_1","$element","$attrs","$scope","showGetter","showSetter","assign","$watch","trigGetter","isOpen","_","isFunction","angular","3","Object","defineProperty","value","./refresh_button/RefreshButton","./toggle_buttons/ToggleButtons","4","RefreshButtonBindings","text","visible","onRefresh","RefreshButtonChanges","RefreshButtonController","prototype","$postLink","_buttonElement","children","_textElement","show","$onChanges","changes","currentValue","hide","onClick","$event","undefined","width","css","RefreshButtonComponent","component","ToggleButtonsBindings","ToggleButton","ngDisabled","currentButtonValue","currentButton","multiselect","change","onlyToggle","ToggleButtonsChanges","ToggleButtonsController","pipMedia","class","index","indexOf","find","id","currentButtonIndex","disabled","isArray","_this","on","addClass","removeClass","buttonSelected","enterSpacePress","event","highlightButton","isUndefined","level","ToggleButtons","bindings","6","run","$templateCache","put","behaviors","CancelDragLink_1","attr","CancelDrag","link","directive","DragLink_1","$rootScope","$document","$window","pipDraggable","LONG_PRESS","_centerAnchor","_hasTouch","DocumentTouch","_pressEvents","_moveEvents","_releaseEvents","_data","_dragOffset","_dragEnabled","_pressTimer","_elementStyle","scrollParent","scrollContainer","element","_deregisterRootMoveListener","noop","ngDrag","_myid","$id","onDragStartCallback","pipDragStart","onDragStopCallback","pipDragStop","onDragSuccessCallback","pipDragSuccess","allowTransform","isDefined","$eval","getDragData","pipDragData","verticalScroll","pipVerticalScroll","horizontalScroll","pipHorizontalScroll","activationDistance","parseFloat","pipActivationDistance","scrollDistance","scrollContainerGetter","pipScrollContainer","initialize","dragHandles","querySelectorAll","_dragHandle","toggleListeners","parent","enable","$on","onDestroy","pipDrag","newVal","oldVal","onEnableChange","pipCenterAnchor","onCenterAnchor","onpress","nodeName","toLowerCase","isClickableElement","evt","target","type","button","saveElementStyles","cancelPress","setTimeout","onlongpress","left","top","position","clearTimeout","off","preventDefault","offset","getBoundingClientRect","document","body","scrollLeft","scrollTop","centerX","offsetWidth","centerY","offsetHeight","_mx","inputEvent","pageX","_my","pageY","_mrx","_mry","_tx","pageXOffset","_ty","pageYOffset","onmove","onrelease","origEvent","hasClass","$broadcast","x","y","tx","ty","data","$apply","$data","dragToScroll","moveElement","uid","dragOffset","callback","onDragComplete","reset","transform","z-index","-webkit-transform","-ms-transform","eWidth","scrollX","scrollY","containerLeft","containerWidth","innerWidth","containerRight","containerTop","containerHeight","innerHeight","containerBottom","containerScrollLeft","containerScrollTop","Drag","DraggableService","touches","originalEvent","DropLink_1","pipDrop","isTouching","onDropCallback","pipDropSuccess","onDragMoveCallback","pipDragMove","obj","onDragStart","onDragMove","onDragEnd","_dropEnabled","updateDragStyles","$target","mouseX","mouseY","dragElement","touching","hitTest","_lastDropTouch","bounds","documentElement","right","bottom","Drop","5","PreventDragLink_1","absorbEvent_","stopPropagation","cancelBubble","returnValue","./Drag","./DraggableService","./Drop","./PreventDrag","7","FocusedLink_1","$mdConstant","opacityDelta","opacityLimit","keydownListener","init","ngModel","pipFocusedData","selector","pipWithHidden","onFocusClass","pipFocusedClass","controls","controlsLength","checkTabindex","currentTarget","$","pipRebind","pipFocusedOpacity","color","oldBackgroundColor","rgba","pipFocusedColor","arr","split","red","blue","green","opacity","setTabindex","findIndex","c","pipFocusedTabindex","keyCode","which","KEY_CODE","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","increment","moveToControl","focus","pipFocusedRebind","p","m","hasOwnProperty","./focused/focused","./infinite_scroll/infiniteScroll","./selected/selected","./shortcuts/index","./unsaved_changes/unsavedChanges","9","InfiniteScrollLink_1","$interval","THROTTLE_MILLISECONDS","checkWhenEnabled","immediateCheck","scrollEnabled","unregisterEventListener","useDocumentBottom","windowElement","onContainerScrollThrottle","throttle","onContainerScroll","unbind","v","handleScrollDistance","pipScrollDistance","handleScrollDisabled","pipScrollDisabled","handleScrollUseDocumentBottom","pipScrollUseDocumentBottom","pipScrollListenForEvent","newContainer","handleScrollContainer","pipScrollParent","changeContainer","pipScrolImmediateCheck","height","isNaN","clientHeight","offsetTop","ownerDocument","defaultView","containerTopOffset","elementBottom","remaining","shouldScroll","$$phase","pipInfiniteScroll","bind","HTMLElement","append","parents","Array","InfiniteScroll","SelectedLink_1","touchBoundary","tapdelay","tapTimeout","indexGetter","pipSelected","indexSetter","idGetter","pipSelectedId","idSetter","changeGetter","pipSelect","enterSpaceGetter","pipEnterSpacePress","noScroll","pipNoScroll","modifier","pipSkipHidden","className","pipTreeList","selectedIndex","currentElementTabinex","pipSelectedWatch","isScrolled","onClickEvent","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","onKeyDown","onFocusIn","onFocusOut","newSelectedId","selectItem","itemId","raiseEvent","newSelectedIndex","itemIndex","items","itemParams","itemsLength","item","scrollToItem","defineSelectedIndex","updateIndex","selectedItem","selectedId","onSelect","newIndex","oldIndex","oldSelectedIndex","$item","itemTop","itemHeight","outerHeight","itemBottom","getTargetElementFromEventTarget","eventTarget","nodeType","Node","TEXT_NODE","parentNode","touchHasMoved","touch","changedTouches","boundary","Math","abs","touchStartX","touchStartY","ev","targetElement","trackingClick","trackingClickStart","timeStamp","lastClickTime","cancelNextClick","ENTER","SPACE","inc","Selected","11","ShortcutItem","ShortcutsConfig","globalShortcuts","localShortcuts","12","KeyboardEvent","Keydown","Keyup","Keypress","ShortcutOptions","Shortcut","shorcutCombination","option","shift_nums","`","8","0","-","=",";","'",",",".","/","\\","special_keys","esc","escape","tab","space","return","enter","backspace","scrolllock","scroll_lock","scroll","capslock","caps_lock","caps","numlock","num_lock","num","pause","break","insert","home","delete","end","pageup","page_up","pu","pagedown","page_down","pd","up","down","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifiers","shift","wanted","pressed","ctrl","alt","meta","shorcut","Type","DisableInInput","element_1","srcElement","tagName","character","String","fromCharCode","keys","kp","ctrlKey","shiftKey","altKey","metaKey","k","Keycode","Propagate","ShortcutBindingService_1","$log","_shortcuts","_log","_defaultOption","defaults","getDefaultOption","Shortcut_1","Target","enumerable","configurable","add","shortcut","remove","shortcutOption","shortcutCombination","getElementById","error","newKeyboardShortcut","addEventListener","eventCallback","attachEvent","binding","detachEvent","removeEventListener","ShortcutBindingProvider","_option","set","$get","_service","provider","14","ShortcutController","pipShortcutBinding","pipShortcutAction","actionShortcuts","pipShortcutName","isString","nameShortcuts","options","pipShorcutOptions","keypressShortcut","action","shortcutsDirective","ShortcutsChangedEvent","ShortcutsService","config","$location","_config","_oldConfig","cloneDeep","addShortcuts","sendChangeEvent","removeShortcuts","$emit","collection","access","keypress","href","location","url","state","$state","stateParams","generalOptions","defaultOptions","each","targetId","ShortcutsProvider","IShortcutsService_1","./IShortcutsService","16","__export","./ShortcutBindingService","./ShortcutDirective","./ShortcutsService","17","onbeforeunload","unsavedChangesAvailable","unsavedChangesMessage","unbindFunc","confirm","cancelLeave","afterLeave","ColorPickerBindings","colors","currentColor","colorChange","DEFAULT_COLORS_1","ColorPickerChanges","ColorPickerController","currentColorIndex","selectColor","pipColorPicker","templateUrl","translateFilter","pipImageSliderController_1","pipImageSlider","_index","DEFAULT_INTERVAL","swipeStart","_type","_interval","interval","slideTo","slideToPrivate","setIndex","_blocks","startInterval","_throttled","toBlock","_newIndex","_direction","registerSlider","stopInterval","removeSlider","nextBlock","restartInterval","prevBlock","nextIndex","pipImageIndex","sliderIndex","_timePromises","Number","cancel","bindToController","controllerAs","ImageSliderService","ANIMATION_DURATION","_sliders","sliderId","sliderScope","getSliderScope","nextCarousel","prevCarousel","blocks","direction","blockIndex","vm","SliderButtonController_1","SliderIndicatorController_1","SliderIndicator","./ImageSlider","./ImageSliderService","./SliderButton","./SliderIndicator","./dependencies/TranslateFilter","./image_slider","./markdown/Markdown","./popover","./progress/RoutingProgress","./toast","setTranslations","MARKDOWN_ATTACHMENTS","checklist","documents","pictures","time","MarkdownBindings","isList","clamp","rebind","MarkdownController","MarkdownChanges","bindText","_text","_$scope","newText","describeAttachments","array","attachTypes","attach","attachString","_pipTranslate","push","textString","isClamped","isNumber","gfm","tables","breaks","sanitize","pedantic","smartLists","smartypents","marked","html","ConfigTranslations","MarkdownComponent","PopoverController","$compile","$templateRequest","backdropElement","backdropClick","params","responsive","extend","locals","template","content","then","calcHeight","onResize","resize","cancelCallback","closePopover","onPopoverClick","timeout","pos","docWidth","docHeight","popover","title","footer","contentHeight","max","PopoverBindings","Popover","PopoverService","popoverTemplate","$new","isObject","service","./PopoverService","13","RoutingBindings","showProgress","RoutingController","_image","loadProgressImage","logoUrl","RoutingProgress","Toast","ToastController_1","$mdToast","toast","_pipErrorDetailsDialog","message","actions","actionLenght","toString","onDetails","ok","onAction","ToastService","SHOW_TIMEOUT","SHOW_TIMEOUT_NOTIFICATIONS","toasts","sounds","onStateChangeSuccess","onClearToasts","showNextToast","splice","showToast","hideDelay","duration","currentToast","showToastOkResult","showToastCancelResult","successCallback","addToast","removeToasts","result","removeToastsById","getToastById","clearToasts","showNotification","showMessage","showError","hideAllToasts","./Toast","./ToastService","dates","DateBindings","timeMode","model","ngChange","DateController","DateChanges","localeDate","moment","localeData","momentMonths","format","momentDays","momentShortDays","momentFirstDayOfWeek","dow","isDate","Date","day","getDate","month","getMonth","year","getFullYear","days","dayList","months","monthList","years","yearList","disableControls","getValue","count","name","currentYear","startYear","endYear","adjustDay","setValue","onMonthChanged","onYearChanged","DateComponent","MomentRange","Year","Month","Week","IsWeek","Day","All","DateTimeConvert","_momentRanged","_defaultFormat","timeZone","isUndefinedOrNull","date","getRange","getOperationRange","range","formatDay","basicFormat","localDate","longDateFormat","formatMonthYearless","replace","utcOffset","isValid","formatMonthDay","formatLL","formatYearlessLL","formatRange","date1","date2","localDateStart","localDateEnd","isSame","isAfter","toStartRange","startOf","toDate","toEndRange","mssOffset","toDateWithTime","formatDate","formatTime","firstTime","nowDate","toTodayDate","useTimeZone","getDateJSON","JSON","stringify","getNextStart","getPrevStart","getNowStart","addHours","hours","toStartDay","toEndDay","toStartWeek","toEndWeek","toStartMonth","toEndMonth","toStartYear","toEndYear","DateTimeConvertService","localDatetime","_localDatetime","DateConvertProvider","_super","__extends","formatTimeFilter","pipDateFormat","formatDateOptionalFilter","formatDateOptional","formatLongDateFilter","formatLongDate","formatShortDateFilter","formatShortDate","formatMiddleDateFilter","formatMiddleDate","formatMonthFilter","formatMonth","formatLongMonthFilter","formatLongMonth","formatYearFilter","formatYear","formatWeekFilter","formatWeek","formatShortWeekFilter","formatShortWeek","formatShortDateTimeFilter","formatShortDateTime","formatMiddleDateTimeFilter","formatMiddleDateTime","formatLongDateTimeFilter","formatLongDateTime","formatShortDateLongTimeFilter","formatShortDateLongTime","formatMiddleDateLongTimeFilter","formatMiddleDateLongTime","formatLongDateLongTimeFilter","formatLongDateLongTime","bbFormatDateLongTimeFilter","bbFormatDateLongTime","formatFullDateTimeFilter","formatFullDateTime","formatShortTimeFilter","formatShortTime","formatLongTimeFilter","formatLongTime","formatShortDayOfWeekFilter","formatShortDayOfWeek","formatLongDayOfWeekFilter","formatLongDayOfWeek","formatLongMonthDayFilter","formatLongMonthDay","formatShortMonthDayFilter","formatShortMonthDay","formatDateRangeFilter","value1","value2","formatDateRange","formatDateTimeRangeFilter","formatDateTimeRange","formatISOWeekFilter","formatISOWeek","formatShortISOWeekFilter","formatShortISOWeek","formatISOWeekOrdinalFilter","formatISOWeekOrdinal","formatDateYFilter","formatDateY","formatLongDateYFilter","formatLongDateY","formatTodayDateLongTimeLongFilter","formatTodayDateLongTimeLong","formatTodayDateShortTimeLongFilter","formatTodayDateShortTimeLong","formatTodayDateLongTimeShortFilter","formatTodayDateLongTimeShort","formatTodayDateShortTimeShortFilter","formatTodayDateShortTimeShort","formatMillisecondsToSecondsFilter","formatMillisecondsToSeconds","formatElapsedIntervalFilter","start","formatElapsedInterval","getDateJSONFilter","pipDateConvert","setPrototypeOf","d","b","__proto__","__","constructor","create","DateFormatService","formatDateTime","formatTpl","formatDateTimeY","formatMoment","dateStart","dateEnd","fromNow","DateTimeFormatService","datetime","_datetime","DateFormatProvider","DateTimeConfig","DateRangeBindings","DateRangeChanges","DateRangeController","$mdMedia","prevState","currentState","_months","standalone","_weekdays","_weekdaysMin","_week","currentDate","getUTCFullYear","currentMonth","getUTCMonth","currentDay","getUTCDate","newValue","oldValue","dayOfWeek","UTC","getUTCDay","week","getWeekByDate","correctWeek","adjustWeek","onWeekChange","isDay","isWeek","isMonth","onChange","pipChanged","setCurrent","dateRangeType","fillLists","weeks","weekList","shortMonths","getTime","onYearClick","onMonthClick","onDayClick","getCountDay","nameDays","weekday","startWeek","getWeek","countDay","countPrevMonthDay","startDay","endDay","getTimezoneOffset","daterange","TimeRangeData","TimeRangeController","TimeRangeChanges","defineStartDate","defineEndDate","toBoolean","TimeRangeBindings","TimeRangeComponent","IntervalTimeRange","MinutesInHour","TimeRangeEditData_1","pipStartDate","startLabel","endLabel","intervalTimeCollection","getTimeInterval","initDate","defineDate","pipEndDate","EVENT_NEW_START_TIME","EVENT_NEW_END_TIME","pipStartLabel","pipEndLabel","setDuration","startDate","endDate","startTime","MillisecondsInSecond","endTime","validateStartDate","isNull","floor","HoursInDay","round","TimeRangeEditController","validateEndDate","setDate","minutes","j","pad","substr","showTime","pipHideTime","onChangeStartDate","newV","onChangeEndDate","onChangeStartTime","onChangeEndTime","isDisabled","TimeRangeEditComponent","TimeRangeEditBindings","charts","BarChartBindings","series","xTickFormat","yTickFormat","interactiveLegend","BarChartController","BarChartBindingsChanges","pipChartColors","chart","generateMaterialColors","updatedLegend","prepareData","legend","updateChart","$onInit","clone","generateParameterColor","paletteColors","d3","scale","ordinal","map","materialColorToRgba","instantiateChart","previousValue","chartElem","datum","configBarWidthAndLabel","drawEmptyState","nv","models","discreteBarChart","margin","label","showValues","staggerLabels","showXAxis","showYAxis","valueFormat","tooltip","enabled","noData","yAxis","tickFormat","xAxis","select","style","windowResize","update","seria","values","classed","labels","chartBars","getBBox","barHeight","barWidth","transition","getMaterialColor","BarChart","ChartColorsService","$mdColorPalette","palette","ChartLegendBindings","interactive","ChartLegendBindingsChanges","ChartLegendController","updateLegends","colorCheckboxes","animate","prepareSeries","checkboxContainers","legendTitles","materialColor","ChartLegend","LineChartBindings","xFormat","xTickValues","dynamic","fixedHeight","dynamicHeight","minHeight","maxHeight","LineChartBindingsChanges","LineChartController","HEIGHT","setZoom","updateZoomOptions","selectAll","updateXTickValues","updateSeries","getHeight","min","zoomIn","zoomOut","lineChart","useInteractiveGuideline","showLegend","tickValues","tooltipW","bodyWidth","removeTooltip","addZoom","updateScroll","domains","bDiff","domDiff","isEqual","svg","xDomain","yDomain","redraw","xScale","yScale","x_boundary","y_boundary","d3zoom","behavior","zoom","prevXDomain","prevScale","prevTranslate","newChart","domain","slice","nice","zoomed","unzoomed","fixDomain","translate0","coordinates0","coordinates","center0","center1","point","step","scaleExtent","LineChart","PieChartBindings","donut","total","size","centered","PieChartBindingsChanges","PieChartController","resizeTitleLabelUnwrap","pieChart","showLabels","labelThreshold","growOnHover","donutRatio","centerChart","renderTotalLabel","svgElem","layout","pie","sort","arc","innerRadius","outerRadius","leftMargin","totalVal","reduce","sum","curr","toFixed","titleElem","boxSize","PieChart"],"mappings":"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","file":"pip-webui.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","{\r\n    function translateFilter($injector: angular.auto.IInjectorService) {\r\n        let pipTranslate: any = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return (key: string) => {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipDates.Translate', [])\r\n        .filter('translate', translateFilter);\r\n}","{\r\n\r\nclass FabTooltipVisibilityController {\r\n    private _element;\r\n    private _scope: angular.IScope;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    constructor(\r\n        $element: any,\r\n        $attrs: angular.IAttributes,\r\n        $scope: angular.IScope,\r\n        $timeout: ng.ITimeoutService,\r\n        $parse\r\n    ) {\r\n        \"ngInject\";\r\n        let trigGetter = $parse($attrs['pipFabTooltipVisibility']),\r\n            showGetter = $parse($attrs['pipFabShowTooltip']),\r\n            showSetter = showGetter.assign;\r\n\r\n        $scope.$watch(trigGetter, (isOpen) => {\r\n            if (!_.isFunction(showSetter)) return;\r\n\r\n            if (isOpen) {\r\n                $timeout(() => {\r\n                    showSetter($scope, isOpen);\r\n                }, 600);\r\n            } else {\r\n                showSetter($scope, isOpen);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\n\r\nfunction pipFabTooltipVisibility($parse, $timeout): ng.IDirective {\r\n    return {\r\n        restrict: 'A',\r\n        scope: false,\r\n        controller: FabTooltipVisibilityController\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipFabTooltipVisibility', [])\r\n    .directive('pipFabTooltipVisibility', pipFabTooltipVisibility);\r\n\r\n}","﻿angular.module('pipCharts', [\r\n    'pipBarCharts',\r\n    'pipLineCharts',\r\n    'pipPieCharts',\r\n    'pipChartLegends',\r\n    'pipChartColors',\r\n    'pipCharts.Templates'\r\n]);","{\r\n\r\ninterface IRefreshButtonBindings {\r\n    [key: string]: any;\r\n\r\n    text: any;\r\n    visible: any;\r\n    onRefresh: any\r\n}\r\n\r\nconst RefreshButtonBindings: IRefreshButtonBindings = {\r\n    text: '<pipText',\r\n    visible: '<pipVisible',\r\n    onRefresh: '&?pipRefresh'\r\n}\r\n\r\nclass RefreshButtonChanges implements ng.IOnChangesObject, IRefreshButtonBindings {\r\n    [key: string]: ng.IChangesObject < any > ;\r\n    // Not one way bindings\r\n    onRefresh: ng.IChangesObject < ({\r\n        $event: any\r\n    }) => ng.IPromise < any >> ;\r\n    // One way bindings\r\n    text: ng.IChangesObject < string > ;\r\n    visible: ng.IChangesObject < boolean > ;\r\n}\r\n\r\nclass RefreshButtonController implements IRefreshButtonBindings {\r\n\r\n    private _textElement: any;\r\n    private _buttonElement: any;\r\n    private _width: number;\r\n\r\n    public text: string;\r\n    public visible: boolean;\r\n    public onRefresh: (param: {\r\n        $event: ng.IAngularEvent\r\n    }) => ng.IPromise < any > ;\r\n\r\n    constructor(\r\n        private $scope: ng.IScope,\r\n        private $element: any,\r\n        private $attrs: ng.IAttributes\r\n    ) {}\r\n\r\n    public $postLink() {\r\n        this._buttonElement = this.$element.children('.md-button');\r\n        this._textElement = this._buttonElement.children('.pip-refresh-text');\r\n\r\n        this.show();\r\n    }\r\n\r\n    public $onChanges(changes: RefreshButtonChanges) {\r\n        if (changes.visible.currentValue === true) {\r\n            this.text = changes.text.currentValue;\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    public onClick($event) {\r\n        if (this.onRefresh) {\r\n            this.onRefresh({\r\n                $event: $event\r\n            });\r\n        }\r\n    }\r\n\r\n    private show() {\r\n        if (this._textElement === undefined || this._buttonElement === undefined) {\r\n            return;\r\n        }\r\n        // Set new text\r\n        this._textElement.text(this.text);\r\n        // Show button\r\n        this._buttonElement.show();\r\n        // Adjust position\r\n        const width = this._buttonElement.width();\r\n        this._buttonElement.css('margin-left', '-' + width / 2 + 'px');\r\n    }\r\n\r\n    private hide() {\r\n        this._buttonElement.hide();\r\n    }\r\n}\r\n\r\n\r\nconst RefreshButtonComponent: ng.IComponentOptions = {\r\n    bindings: RefreshButtonBindings,\r\n    controller: RefreshButtonController,\r\n    template: '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"$ctrl.onClick($event)\" aria-label=\"REFRESH\">' +\r\n        '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\r\n        '<span class=\"pip-refresh-text\"></span>' +\r\n        '</md-button>'\r\n};\r\n\r\nangular\r\n    .module('pipRefreshButton', ['ngMaterial'])\r\n    .component('pipRefreshButton', RefreshButtonComponent);\r\n\r\n}","{\r\n\r\nclass ToggleButton {\r\n    id: any;\r\n    name: string;\r\n    disabled: boolean;\r\n    level: number;\r\n    diselectable: boolean;\r\n    filled: boolean;\r\n}\r\n\r\ninterface IToggleButtonsBindings {\r\n    [key: string]: any;\r\n\r\n    ngDisabled: any;\r\n    buttons: any;\r\n    currentButtonValue: any;\r\n    currentButton: any;\r\n    multiselect: any;\r\n    change: any;\r\n    onlyToggle: any\r\n}\r\n\r\nconst ToggleButtonsBindings: IToggleButtonsBindings = {\r\n    ngDisabled: '<?',\r\n    buttons: '<pipButtons',\r\n    currentButtonValue: '=ngModel',\r\n    currentButton: '=?pipButtonObject',\r\n    multiselect: '<?pipMultiselect',\r\n    change: '&ngChange',\r\n    onlyToggle: '<?pipOnlyToggle'\r\n}\r\n\r\nclass ToggleButtonsChanges implements ng.IOnChangesObject, IToggleButtonsBindings {\r\n    [key: string]: ng.IChangesObject < any > ;\r\n    // Not one way bindings\r\n    currentButtonValue: any;\r\n    currentButton: any;\r\n    change: ng.IChangesObject < () => ng.IPromise < void >> ;\r\n    // One way bindings\r\n    ngDisabled: ng.IChangesObject < boolean > ;\r\n    buttons: ng.IChangesObject < ToggleButton[] > ;\r\n    multiselect: ng.IChangesObject < boolean > ;\r\n    onlyToggle: ng.IChangesObject < boolean > ;\r\n}\r\n\r\nclass ToggleButtonsController implements IToggleButtonsBindings {\r\n    lenght: number;\r\n\r\n    public ngDisabled: boolean;\r\n    public class: string;\r\n    public multiselect: boolean;\r\n    public buttons: ToggleButton[];\r\n    public disabled: boolean;\r\n    public currentButtonValue: any;\r\n    public currentButtonIndex: number;\r\n    public currentButton: any;\r\n    public change: () => ng.IPromise < any > ;\r\n    public onlyToggle: boolean;\r\n    public pipMedia: any;\r\n\r\n    constructor(\r\n        private $element: any,\r\n        private $attrs: angular.IAttributes,\r\n        private $scope: angular.IScope,\r\n        private $timeout: ng.ITimeoutService,\r\n        $injector: ng.auto.IInjectorService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this.pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this.class = $attrs['class'] || '';\r\n        const index = _.indexOf(this.buttons, _.find(this.buttons, {\r\n            id: this.currentButtonValue\r\n        }));\r\n        this.currentButtonIndex = index < 0 ? 0 : index;\r\n        this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\r\n    }\r\n\r\n    public $onChanges(changes: ToggleButtonsChanges) {\r\n        this.multiselect = changes.multiselect ? changes.multiselect.currentValue : false;\r\n        this.disabled = changes.ngDisabled ? changes.ngDisabled.currentValue : false;\r\n        this.onlyToggle = changes.onlyToggle ? changes.onlyToggle.currentValue : false;\r\n\r\n        this.buttons = !changes.buttons || _.isArray(changes.buttons.currentValue) && changes.buttons.currentValue.length === 0 ? [] : changes.buttons.currentValue;\r\n\r\n        const index = _.indexOf(this.buttons, _.find(this.buttons, {\r\n            id: this.currentButtonValue\r\n        }));\r\n        this.currentButtonIndex = index < 0 ? 0 : index;\r\n        this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\r\n    }\r\n\r\n    public $postLink() {\r\n        this.$element\r\n            .on('focusin', () => {\r\n                this.$element.addClass('focused-container');\r\n            })\r\n            .on('focusout', () => {\r\n                this.$element.removeClass('focused-container');\r\n            });\r\n    }\r\n\r\n    public buttonSelected(index) {\r\n        if (this.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.currentButtonIndex = index;\r\n        this.currentButton = this.buttons[this.currentButtonIndex];\r\n        this.currentButtonValue = this.currentButton.id || index;\r\n\r\n        this.$timeout(() => {\r\n            if (this.change) {\r\n                this.change();\r\n            }\r\n        });\r\n    }\r\n\r\n    public enterSpacePress(event) {\r\n        this.buttonSelected(event.index);\r\n    }\r\n\r\n    public highlightButton(index) {\r\n        if (this.multiselect &&\r\n            !_.isUndefined(this.currentButton.level) &&\r\n            !_.isUndefined(this.buttons[index].level)) {\r\n\r\n            return this.currentButton.level >= this.buttons[index].level;\r\n        }\r\n\r\n        return this.currentButtonIndex == index;\r\n    }\r\n}\r\n\r\nconst ToggleButtons: ng.IComponentOptions = {\r\n    bindings: ToggleButtonsBindings,\r\n    templateUrl: 'toggle_buttons/ToggleButtons.html',\r\n    controller: ToggleButtonsController\r\n}\r\n\r\nangular\r\n    .module('pipToggleButtons', ['pipButtons.Templates'])\r\n    .component('pipToggleButtons', ToggleButtons);\r\n\r\n}","(function(module) {\ntry {\n  module = angular.module('pipButtons.Templates');\n} catch (e) {\n  module = angular.module('pipButtons.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toggle_buttons/ToggleButtons.html',\n    '<div class=\"pip-toggle-buttons layout-row {{$ctrl.class}}\" pip-selected=\"$ctrl.bufButtonIndex\" pip-enter-space-press=\"$ctrl.enterSpacePress($event)\" ng-if=\"!$ctrl.pipMedia(\\'xs\\') || $ctrl.onlyToggle\"><md-button tabindex=\"-1\" ng-repeat=\"button in $ctrl.buttons\" ng-class=\"{\\'md-accent md-raised selected color-accent-bg\\' : $ctrl.highlightButton($index)}\" ng-attr-style=\"{{ \\'background-color:\\' + ($ctrl.highlightButton($index) ? button.backgroundColor : \\'\\') + \\'!important\\' }}\" class=\"pip-selectable pip-chip-button flex\" ng-click=\"$ctrl.buttonSelected($index, $event)\" ng-disabled=\"button.disabled || $ctrl.disabled\">{{button.name || button.title | translate}} <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span></md-button></div><md-input-container class=\"md-block\" ng-if=\"$ctrl.pipMedia(\\'xs\\') && !$ctrl.onlyToggle\"><md-select ng-model=\"$ctrl.currentButtonIndex\" ng-disabled=\"$ctrl.disabled\" aria-label=\"DROPDOWN\" md-on-close=\"$ctrl.buttonSelected($ctrl.currentButtonIndex)\"><md-option ng-repeat=\"action in $ctrl.buttons\" value=\"{{ ::$index }}\">{{ (action.title || action.name) | translate }} <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span></md-option></md-select></md-input-container>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-buttons-html.min.js.map\n","{\r\n    class CancelDragLink {\r\n        constructor(\r\n            $element: JQuery\r\n        ) {\r\n            $element.find('*').attr('pip-cancel-drag', 'pip-cancel-drag');\r\n        }\r\n    }\r\n\r\n    const CancelDrag = function (): ng.IDirective {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (\r\n                $scope: ng.IScope,\r\n                $element: JQuery,\r\n                $attrs: ng.IAttributes\r\n            ) {\r\n                new CancelDragLink($element);\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module(\"pipDraggable\")\r\n        .directive('pipCancelDrag', CancelDrag);\r\n}","import { IDraggableService } from './DraggableService';\r\n\r\n{\r\n    interface IDragLinkScope extends ng.IScope {\r\n        value: any;\r\n    }\r\n\r\n    interface IDragLinkAttributes extends ng.IAttributes {\r\n        ngDrag: any;\r\n        pipDragStart: any;\r\n        pipDragStop: any;\r\n        pipDragSuccess: any;\r\n        allowTransform: any;\r\n        pipDragData: any;\r\n        pipVerticalScroll: any;\r\n        pipHorizontalScroll: any;\r\n        pipActivationDistance: any;\r\n        pipScrollContainer: any;\r\n        pipDrag: any;\r\n        pipCenterAnchor: any;\r\n    }\r\n\r\n    class DragLink {\r\n        private LONG_PRESS: number = 50; // 50ms for longpress\r\n        private offset: any;\r\n        private _centerAnchor: boolean = false;\r\n        private _mx: number;\r\n        private _my: number;\r\n        private _tx: number;\r\n        private _ty: number;\r\n        private _mrx: number;\r\n        private _mry: number;\r\n        private _hasTouch: boolean = ('ontouchstart' in window) || ( < any > window).DocumentTouch; // && document instanceof DocumentTouch; // DocumentTouch is not defined!\r\n        private _pressEvents: string = 'touchstart mousedown';\r\n        private _moveEvents: string = 'touchmove mousemove';\r\n        private _releaseEvents: string = 'touchend mouseup';\r\n        private _dragHandle: any;\r\n\r\n        // to identify the element in order to prevent getting superflous events when a single element has both drag and drop directives on it.\r\n        private _myid: string | number;\r\n        private _data: any = null;\r\n\r\n        private _dragOffset: any = null;\r\n\r\n        private _dragEnabled: boolean = false;\r\n\r\n        private _pressTimer: any = null;\r\n\r\n        private _elementStyle: any = {};\r\n\r\n        private onDragStartCallback: Function;\r\n        private onDragStopCallback: Function;\r\n        private onDragSuccessCallback: Function;\r\n        private allowTransform: boolean;\r\n\r\n        private getDragData: any;\r\n        private verticalScroll: boolean;\r\n        private horizontalScroll: boolean;\r\n        private activationDistance: number;\r\n        private scrollDistance: number;\r\n        private scrollParent: boolean = false;\r\n\r\n        private scrollContainer: JQuery = angular.element(window);\r\n        private scrollContainerGetter: any;\r\n\r\n        // deregistration function for mouse move events in $rootScope triggered by jqLite trigger handler\r\n        private _deregisterRootMoveListener: Function = angular.noop;\r\n\r\n        constructor(\r\n            private $rootScope: ng.IRootScopeService,\r\n            private $parse: ng.IParseService,\r\n            private $document: ng.IDocumentService,\r\n            private $window: ng.IWindowService,\r\n            private pipDraggable: IDraggableService,\r\n            private $scope: IDragLinkScope,\r\n            private $element: JQuery,\r\n            private $attrs: IDragLinkAttributes\r\n        ) {\r\n            $scope.value = $attrs.ngDrag;\r\n            this._myid = $scope.$id;\r\n            this.onDragStartCallback = $parse($attrs.pipDragStart) || null;\r\n            this.onDragStopCallback = $parse($attrs.pipDragStop) || null;\r\n            this.onDragSuccessCallback = $parse($attrs.pipDragSuccess) || null;\r\n            this.allowTransform = angular.isDefined($attrs.allowTransform) ? $scope.$eval($attrs.allowTransform) : false;\r\n\r\n            this.getDragData = $parse($attrs.pipDragData);\r\n            this.verticalScroll = $attrs.pipVerticalScroll || true;\r\n            this.horizontalScroll = $attrs.pipHorizontalScroll || true;\r\n            this.activationDistance = parseFloat($attrs.pipActivationDistance) || 75;\r\n            this.scrollDistance = parseFloat($attrs.pipActivationDistance) || 50;\r\n            this.scrollContainerGetter = $parse($attrs.pipScrollContainer);\r\n\r\n            this.$element.css('cursor', 'move');\r\n            this.initialize();\r\n        }\r\n\r\n        private initialize() {\r\n            this.$element.attr('pip-draggable', 'false'); // prevent native drag\r\n            // check to see if drag handle(s) was specified\r\n            // if querySelectorAll is available, we use this instead of find\r\n            // as JQLite find is limited to tagnames\r\n            let dragHandles: any;\r\n            if (this.$element[0].querySelectorAll) {\r\n                dragHandles = angular.element(this.$element[0].querySelectorAll('[pip-drag-handle]'));\r\n            } else {\r\n                dragHandles = this.$element.find('[pip-drag-handle]');\r\n            }\r\n            if (dragHandles.length) {\r\n                this._dragHandle = dragHandles;\r\n            }\r\n            this.toggleListeners(true);\r\n\r\n            // Initialize scroll container\r\n            if (this.scrollParent) {\r\n                this.scrollContainer = angular.element(this.$element.parent());\r\n            } else if (this.$attrs.pipScrollContainer) {\r\n                this.scrollContainer = angular.element(this.scrollContainerGetter(this.$scope));\r\n            } else {\r\n                this.scrollContainer = angular.element(window);\r\n            }\r\n        }\r\n\r\n        private toggleListeners(enable) {\r\n            if (!enable) return;\r\n            // add listeners.\r\n\r\n            this.$scope.$on('$destroy', () => {\r\n                this.onDestroy(enable);\r\n            });\r\n            this.$scope.$watch(this.$attrs.pipDrag, (newVal, oldVal) => {\r\n                this.onEnableChange(newVal, oldVal);\r\n            });\r\n            this.$scope.$watch(this.$attrs.pipCenterAnchor, (newVal, oldVal) => {\r\n                this.onCenterAnchor(newVal, oldVal);\r\n            });\r\n            // wire up touch events\r\n            if (this._dragHandle) {\r\n                // handle(s) specified, use those to initiate drag\r\n                this._dragHandle.on(this._pressEvents, (event) => {\r\n                    this.onpress(event);\r\n                });\r\n            } else {\r\n                // no handle(s) specified, use the element as the handle\r\n                this.$element.on(this._pressEvents, (event) => {\r\n                    this.onpress(event);\r\n                });\r\n            }\r\n            if (!this._hasTouch && this.$element[0].nodeName.toLowerCase() == \"img\") {\r\n                this.$element.on('mousedown', () => {\r\n                    return false;\r\n                }); // prevent native drag for images\r\n            }\r\n        }\r\n\r\n        private onDestroy(enable) {\r\n            this.toggleListeners(false);\r\n        }\r\n\r\n        private onEnableChange(newVal, oldVal) {\r\n            this._dragEnabled = (newVal);\r\n        }\r\n\r\n        private onCenterAnchor(newVal, oldVal) {\r\n            if (angular.isDefined(newVal))\r\n                this._centerAnchor = (newVal || 'true');\r\n        }\r\n\r\n        private isClickableElement(evt) {\r\n            return (\r\n                angular.isDefined(angular.element(evt.target).attr(\"pip-cancel-drag\"))\r\n            );\r\n        }\r\n\r\n        /*\r\n         * When the element is clicked start the drag behaviour\r\n         * On touch devices as a small delay so as not to prevent native window scrolling\r\n         */\r\n        private onpress(evt) {\r\n            if (!this._dragEnabled) return;\r\n\r\n            if (this.isClickableElement(evt)) {\r\n                return;\r\n            }\r\n\r\n            if (evt.type == \"mousedown\" && evt.button != 0) {\r\n                // Do not start dragging on right-click\r\n                return;\r\n            }\r\n\r\n            this.saveElementStyles();\r\n\r\n            if (this._hasTouch) {\r\n                this.cancelPress();\r\n                this._pressTimer = setTimeout(() => {\r\n                    this.cancelPress();\r\n                    this.onlongpress(evt);\r\n                }, this.LONG_PRESS);\r\n                this.$document.on(this._moveEvents, () => {\r\n                    this.cancelPress();\r\n                });\r\n                this.$document.on(this._releaseEvents, () => {\r\n                    this.cancelPress();\r\n                });\r\n            } else {\r\n                this.onlongpress(evt);\r\n            }\r\n        }\r\n\r\n        private saveElementStyles() {\r\n            this._elementStyle.left = this.$element.css('css') || 0;\r\n            this._elementStyle.top = this.$element.css('top') || 0;\r\n            this._elementStyle.position = this.$element.css('position');\r\n            this._elementStyle.width = this.$element.css('width');\r\n        }\r\n\r\n        private cancelPress() {\r\n            clearTimeout(this._pressTimer);\r\n            this.$document.off(this._moveEvents, () => {\r\n                this.cancelPress();\r\n            });\r\n            this.$document.off(this._releaseEvents, () => {\r\n                this.cancelPress();\r\n            });\r\n        }\r\n\r\n        private onlongpress(evt) {\r\n            if (!this._dragEnabled) return;\r\n            evt.preventDefault();\r\n\r\n            this.offset = this.$element[0].getBoundingClientRect();\r\n            if (this.allowTransform)\r\n                this._dragOffset = this.offset;\r\n            else {\r\n                this._dragOffset = {\r\n                    left: document.body.scrollLeft,\r\n                    top: document.body.scrollTop\r\n                };\r\n            }\r\n\r\n\r\n            ( < any > this.$element).centerX = this.$element[0].offsetWidth / 2;\r\n            ( < any > this.$element).centerY = this.$element[0].offsetHeight / 2;\r\n\r\n            this._mx = this.pipDraggable.inputEvent(evt).pageX;\r\n            this._my = this.pipDraggable.inputEvent(evt).pageY;\r\n            this._mrx = this._mx - this.offset.left;\r\n            this._mry = this._my - this.offset.top;\r\n            if (this._centerAnchor) {\r\n                this._tx = this._mx - ( < any > this.$element).centerX - this.$window.pageXOffset;\r\n                this._ty = this._my - ( < any > this.$element).centerY - this.$window.pageYOffset;\r\n            } else {\r\n                this._tx = this._mx - this._mrx - this.$window.pageXOffset;\r\n                this._ty = this._my - this._mry - this.$window.pageYOffset;\r\n            }\r\n\r\n            this.$document.on(this._moveEvents, (event) => {\r\n                this.onmove(event);\r\n            });\r\n            this.$document.on(this._releaseEvents, (event) => {\r\n                this.onrelease(event);\r\n            });\r\n            // This event is used to receive manually triggered mouse move events\r\n            // jqLite unfortunately only supports triggerHandler(...)\r\n            // See http://api.jquery.com/triggerHandler/\r\n            // _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', onmove);\r\n            this._deregisterRootMoveListener = this.$rootScope.$on('draggable:_triggerHandlerMove', (event, origEvent) => {\r\n                this.onmove(origEvent);\r\n            });\r\n        }\r\n\r\n        private onmove(evt) {\r\n            if (!this._dragEnabled) return;\r\n            evt.preventDefault();\r\n            if (!this.$element.hasClass('pip-dragging')) {\r\n                this._data = this.getDragData(this.$scope);\r\n                this.$element.addClass('pip-dragging');\r\n                this.$rootScope.$broadcast('draggable:start', {\r\n                    x: this._mx,\r\n                    y: this._my,\r\n                    tx: this._tx,\r\n                    ty: this._ty,\r\n                    event: evt,\r\n                    element: this.$element,\r\n                    data: this._data\r\n                });\r\n\r\n                if (this.onDragStartCallback) {\r\n                    this.$scope.$apply(() => {\r\n                        this.onDragStartCallback(this.$scope, {\r\n                            $data: this._data,\r\n                            $event: evt\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n\r\n            this._mx = this.pipDraggable.inputEvent(evt).pageX;\r\n            this._my = this.pipDraggable.inputEvent(evt).pageY;\r\n\r\n            if (this.horizontalScroll || this.verticalScroll) {\r\n                this.dragToScroll();\r\n            }\r\n\r\n            if (this._centerAnchor) {\r\n                this._tx = this._mx - ( < any > this.$element).centerX - this._dragOffset.left;\r\n                this._ty = this._my - ( < any > this.$element).centerY - this._dragOffset.top;\r\n            } else {\r\n                this._tx = this._mx - this._mrx - this._dragOffset.left;\r\n                this._ty = this._my - this._mry - this._dragOffset.top;\r\n            }\r\n\r\n            this.moveElement(this._tx, this._ty);\r\n\r\n            this.$rootScope.$broadcast('draggable:move', {\r\n                x: this._mx,\r\n                y: this._my,\r\n                tx: this._tx,\r\n                ty: this._ty,\r\n                event: evt,\r\n                element: this.$element,\r\n                data: this._data,\r\n                uid: this._myid,\r\n                dragOffset: this._dragOffset\r\n            });\r\n        }\r\n\r\n        private onrelease(evt) {\r\n            if (!this._dragEnabled)\r\n                return;\r\n            evt.preventDefault();\r\n            this.$rootScope.$broadcast('draggable:end', {\r\n                x: this._mx,\r\n                y: this._my,\r\n                tx: this._tx,\r\n                ty: this._ty,\r\n                event: evt,\r\n                element: this.$element,\r\n                data: this._data,\r\n                callback: this.onDragComplete,\r\n                uid: this._myid\r\n            });\r\n            this.$element.removeClass('pip-dragging');\r\n            this.$element.parent().find('.pip-drag-enter').removeClass('pip-drag-enter');\r\n            this.reset();\r\n            this.$document.off(this._moveEvents);\r\n            this.$document.off(this._releaseEvents);\r\n            if (this.onDragStopCallback) {\r\n                this.$scope.$apply(() => {\r\n                    this.onDragStopCallback(this.$scope, {\r\n                        $data: this._data,\r\n                        $event: evt\r\n                    });\r\n                });\r\n            }\r\n\r\n            this._deregisterRootMoveListener();\r\n        }\r\n\r\n        private onDragComplete(evt) {\r\n            if (!this.onDragSuccessCallback) return;\r\n\r\n            this.$scope.$apply(() => {\r\n                this.onDragSuccessCallback(this.$scope, {\r\n                    $data: this._data,\r\n                    $event: evt\r\n                });\r\n            });\r\n        }\r\n\r\n        private reset() {\r\n            if (this.allowTransform)\r\n                this.$element.css({\r\n                    transform: '',\r\n                    'z-index': '',\r\n                    '-webkit-transform': '',\r\n                    '-ms-transform': ''\r\n                });\r\n            else {\r\n                this.$element.css({\r\n                    position: this._elementStyle.position,\r\n                    top: this._elementStyle.top,\r\n                    left: this._elementStyle.left,\r\n                    'z-index': '',\r\n                    width: this._elementStyle.width\r\n                });\r\n            }\r\n        }\r\n\r\n        private moveElement(x, y) {\r\n            const eWidth = this.$element.css('width');\r\n            if (this.allowTransform) {\r\n                this.$element.css({\r\n                    transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                    'z-index': 99999,\r\n                    '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                    '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n                });\r\n            } else {\r\n                this.$element.css({\r\n                    'left': x + 'px',\r\n                    'top': y + 'px',\r\n                    'position': 'fixed',\r\n                    'z-index': 100,\r\n                    width: eWidth\r\n                });\r\n            }\r\n        }\r\n\r\n        private dragToScroll() {\r\n            let scrollX = 0,\r\n                scrollY = 0,\r\n                offset = (element) => {\r\n                    return element.offset() || {\r\n                        left: 0,\r\n                        top: 0\r\n                    };\r\n                };\r\n\r\n            if (this.horizontalScroll) {\r\n                const\r\n                    containerLeft = offset(this.scrollContainer).left,\r\n                    containerWidth = this.scrollContainer.innerWidth(),\r\n                    containerRight = containerLeft + containerWidth;\r\n\r\n                if ((this._mx - containerLeft) < this.activationDistance) {\r\n                    scrollX = -this.scrollDistance;\r\n                } else if ((containerRight - this._mx) < this.activationDistance) {\r\n                    scrollX = this.scrollDistance;\r\n                }\r\n            }\r\n\r\n            if (this.verticalScroll) {\r\n                const\r\n                    containerTop = offset(this.scrollContainer).top,\r\n                    containerHeight = this.scrollContainer.innerHeight(),\r\n                    containerBottom = containerTop + containerHeight;\r\n\r\n                if ((this._my - containerTop) < this.activationDistance) {\r\n                    scrollY = -this.scrollDistance + 30;\r\n                } else if ((containerBottom - this._my) < this.activationDistance) {\r\n                    scrollY = this.scrollDistance - 30;\r\n                }\r\n            }\r\n            if (scrollX !== 0 || scrollY !== 0) {\r\n                const\r\n                    containerScrollLeft = this.scrollContainer.scrollLeft(),\r\n                    containerScrollTop = this.scrollContainer.scrollTop();\r\n\r\n                this.scrollContainer.scrollLeft(containerScrollLeft + scrollX);\r\n                this.scrollContainer.scrollTop(containerScrollTop + scrollY);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    const Drag = function (\r\n        $rootScope: ng.IRootScopeService,\r\n        $parse: ng.IParseService,\r\n        $document: ng.IDocumentService,\r\n        $window: ng.IWindowService,\r\n        pipDraggable: IDraggableService,\r\n    ): ng.IDirective {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (\r\n                $scope: IDragLinkScope,\r\n                $element: JQuery,\r\n                $attrs: IDragLinkAttributes\r\n            ) {\r\n                new DragLink($rootScope, $parse, $document, $window, pipDraggable, $scope, $element, $attrs);\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module(\"pipDraggable\")\r\n        .directive('pipDrag', Drag);\r\n}","export interface IDraggableService {\r\n    inputEvent(event: any);\r\n}\r\n\r\nclass DraggableService implements IDraggableService {\r\n    public inputEvent(event) {\r\n        if (angular.isDefined(event.touches)) {\r\n            return event.touches[0];\r\n        }\r\n        //Checking both is not redundent. If only check if touches isDefined, angularjs isDefnied will return error and stop the remaining scripty if event.originalEvent is not defined.\r\n        else if (angular.isDefined(event.originalEvent) && angular.isDefined(event.originalEvent.touches)) {\r\n            return event.originalEvent.touches[0];\r\n        }\r\n        return event;\r\n    };\r\n}\r\n\r\nangular\r\n    .module(\"pipDraggable\")\r\n    .service('pipDraggable', DraggableService);\r\n    ","import { IDraggableService } from './DraggableService';\r\n\r\n{\r\n    interface IDropLinkScope extends ng.IScope {\r\n        value: any;\r\n        isTouching: any;\r\n    }\r\n\r\n    interface IDropLinkAttributes extends ng.IAttributes {\r\n        pipDrop: any;\r\n        pipDropSuccess: any;\r\n        pipDragStart: any;\r\n        pipDragStop: any;\r\n        pipDragMove: any;\r\n    }\r\n\r\n    class DropLink {\r\n\r\n        private _lastDropTouch: any;\r\n        private _myid: number | string;\r\n        private _dropEnabled: boolean;\r\n\r\n        private onDropCallback: Function; // || function(){};\r\n        private onDragStartCallback: Function;\r\n        private onDragStopCallback: Function;\r\n        private onDragMoveCallback: Function;\r\n\r\n        constructor(\r\n            private $parse: ng.IParseService,\r\n            private $document: ng.IDocumentService,\r\n            private $timeout: ng.ITimeoutService,\r\n            private pipDraggable: IDraggableService,\r\n            private $scope: IDropLinkScope,\r\n            private $element: JQuery,\r\n            private $attrs: IDropLinkAttributes\r\n        ) {\r\n            $scope.value = $attrs.pipDrop;\r\n            $scope.isTouching = false;\r\n\r\n            this._myid = $scope.$id;\r\n            this.onDropCallback = $parse($attrs.pipDropSuccess); // || function(){};\r\n            this.onDragStartCallback = $parse($attrs.pipDragStart);\r\n            this.onDragStopCallback = $parse($attrs.pipDragStop);\r\n            this.onDragMoveCallback = $parse($attrs.pipDragMove);\r\n\r\n            this.initialize();\r\n        }\r\n\r\n        private initialize() {\r\n            this.toggleListeners(true);\r\n        }\r\n\r\n        private toggleListeners(enable) {\r\n            // remove listeners\r\n            if (!enable) return;\r\n            // add listeners.\r\n            this.$scope.$watch(this.$attrs.pipDrop, (newVal, oldVal) => {\r\n                this.onEnableChange(newVal, oldVal);\r\n            });\r\n            this.$scope.$on('$destroy', (event) => {\r\n                this.onDestroy(event);\r\n            });\r\n            this.$scope.$on('draggable:start', (evt, obj) => {\r\n                this.onDragStart(evt, obj);\r\n            });\r\n            this.$scope.$on('draggable:move', (evt, obj) => {\r\n                this.onDragMove(evt, obj);\r\n            });\r\n            this.$scope.$on('draggable:end', (evt, obj) => {\r\n                this.onDragEnd(evt, obj);\r\n            });\r\n        }\r\n\r\n        private onDestroy(enable) {\r\n            this.toggleListeners(false);\r\n        }\r\n\r\n        private onEnableChange(newVal, oldVal) {\r\n            this._dropEnabled = newVal;\r\n        }\r\n\r\n        private onDragStart(evt, obj) {\r\n            if (!this._dropEnabled) return;\r\n            this.isTouching(obj.x, obj.y, obj.element);\r\n\r\n            if (this.$attrs.pipDragStart) {\r\n                this.$timeout(() => {\r\n                    this.onDragStartCallback(this.$scope, {\r\n                        $data: obj.data,\r\n                        $event: obj\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n        private onDragMove(evt, obj) {\r\n            if (!this._dropEnabled) return;\r\n            this.isTouching(obj.x, obj.y, obj.element);\r\n\r\n            if (this.$attrs.pipDragMove) {\r\n                this.$timeout(() => {\r\n                    this.onDragMoveCallback(this.$scope, {\r\n                        $data: obj.data,\r\n                        $event: obj\r\n                    });\r\n                });\r\n            }\r\n        }\r\n\r\n        private onDragEnd(evt, obj) {\r\n            // don't listen to drop events if this is the element being dragged\r\n            // only update the styles and return\r\n            if (!this._dropEnabled || this._myid === obj.uid) {\r\n                this.updateDragStyles(false, obj.element);\r\n                return;\r\n            }\r\n\r\n            if (this.isTouching(obj.x, obj.y, obj.element)) {\r\n                // call the pipDraggable pipDragSuccess element callback\r\n                if (obj.callback) {\r\n                    obj.callback(obj);\r\n                }\r\n\r\n                if (this.$attrs.pipDropSuccess) {\r\n                    this.$timeout(() => {\r\n                        this.onDropCallback(this.$scope, {\r\n                            $data: obj.data,\r\n                            $event: obj,\r\n                            $target: this.$scope.$eval(this.$scope.value)\r\n                        });\r\n                    });\r\n                }\r\n            }\r\n\r\n            if (this.$attrs.pipDragStop) {\r\n                this.$timeout(() => {\r\n                    this.onDragStopCallback(this.$scope, {\r\n                        $data: obj.data,\r\n                        $event: obj\r\n                    });\r\n                });\r\n            }\r\n\r\n            this.updateDragStyles(false, obj.element);\r\n        }\r\n\r\n        private isTouching(mouseX, mouseY, dragElement) {\r\n            const touching = this.hitTest(mouseX, mouseY);\r\n            this.$scope.isTouching = touching;\r\n            if (touching) {\r\n                this._lastDropTouch = this.$element;\r\n            }\r\n            this.updateDragStyles(touching, dragElement);\r\n            return touching;\r\n        }\r\n\r\n        private updateDragStyles(touching, dragElement) {\r\n            if (touching) {\r\n                this.$element.addClass('pip-drag-enter');\r\n                dragElement.addClass('pip-drag-over');\r\n            } else if (this._lastDropTouch == this.$element) {\r\n                this._lastDropTouch = null;\r\n                this.$element.removeClass('pip-drag-enter');\r\n                dragElement.removeClass('pip-drag-over');\r\n            }\r\n        };\r\n\r\n        private hitTest(x, y) {\r\n            const bounds = this.$element[0].getBoundingClientRect();\r\n            x -= this.$document[0].body.scrollLeft + this.$document[0].documentElement.scrollLeft;\r\n            y -= this.$document[0].body.scrollTop + this.$document[0].documentElement.scrollTop;\r\n            return x >= bounds.left &&\r\n                x <= bounds.right &&\r\n                y <= bounds.bottom &&\r\n                y >= bounds.top;\r\n        }\r\n    }\r\n\r\n    const Drop = function (\r\n        $parse: ng.IParseService,\r\n        $document: ng.IDocumentService,\r\n        $timeout: ng.ITimeoutService,\r\n        pipDraggable: IDraggableService,\r\n    ): ng.IDirective {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (\r\n                $scope: IDropLinkScope,\r\n                $element: JQuery,\r\n                $attrs: IDropLinkAttributes\r\n            ) {\r\n                new DropLink($parse, $document, $timeout, pipDraggable, $scope, $element, $attrs);\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module(\"pipDraggable\")\r\n        .directive('pipDrop', Drop);\r\n}","{\r\n\r\n    class PreventDragLink {\r\n        constructor(\r\n            private $element: JQuery\r\n        ) {\r\n            this.initialize();\r\n        }\r\n\r\n        private initialize() {\r\n            this.$element.attr('pip-draggable', 'false');\r\n            this.toggleListeners(true);\r\n        }\r\n\r\n        private toggleListeners(enable) {\r\n            // remove listeners\r\n            if (!enable) return;\r\n            // add listeners.\r\n            this.$element.on('mousedown touchstart touchmove touchend touchcancel', (event) => { this.absorbEvent_(event); });\r\n        }\r\n\r\n        private absorbEvent_(event) {\r\n            const e = event.originalEvent;\r\n            e.preventDefault && e.preventDefault();\r\n            e.stopPropagation && e.stopPropagation();\r\n            e.cancelBubble = true;\r\n            e.returnValue = false;\r\n            return false;\r\n        }\r\n\r\n    }\r\n\r\n    const PreventDrag = function (): ng.IDirective {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (\r\n                $scope: ng.IScope,\r\n                $element: JQuery,\r\n                $attrs: ng.IAttributes\r\n            ) {\r\n                new PreventDragLink($element);\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module(\"pipDraggable\")\r\n        .directive('pipPreventDrag', PreventDrag);\r\n}","angular.module(\"pipDraggable\", []);\r\n\r\nimport './DraggableService';\r\nimport './Drag';\r\nimport './Drop';\r\nimport './PreventDrag';\r\nimport './CancelDrag';\r\n","{\r\n    interface FocusedScope extends ng.IScope {\r\n        pipFocusedColor: Function;\r\n        pipFocusedClass: Function;\r\n        pipFocusedRebind: Function;\r\n        pipFocusedTabindex: Function;\r\n        pipFocusedOpacity: Function;\r\n        pipFocusedData: Function;\r\n        pipWithHidden: Function;\r\n        pipRebind: Function;\r\n    }\r\n\r\n    interface FocusedAttributes extends ng.IAttributes {\r\n        ngModel: any;\r\n        pipFocusedData: any;\r\n    }\r\n\r\n    class FocusedLink implements ng.IDirective {\r\n        private controls: JQuery;\r\n        private controlsLength: number;\r\n        private color: string;\r\n        private opacityDelta: number = 0.4;\r\n        private opacityLimit: number = 0.5;\r\n        private oldBackgroundColor: string;\r\n        private onFocusClass: string;\r\n\r\n        constructor(\r\n            private $scope: FocusedScope,\r\n            private $element: JQuery,\r\n            $attrs: FocusedAttributes,\r\n            private $timeout: ng.ITimeoutService,\r\n            private $mdConstant: any,\r\n            private $window: ng.IWindowService\r\n        ) {\r\n\r\n            $element.on('keydown', (e) => {\r\n                this.keydownListener(e);\r\n            });\r\n\r\n            $timeout(() => {\r\n                this.init();\r\n            });\r\n\r\n            if ($attrs.ngModel) {\r\n                $scope.$watch('ngModel', function () {\r\n                    $timeout(this.init);\r\n                }, true);\r\n            }\r\n\r\n            if ($attrs.pipFocusedData) {\r\n                $scope.$watch('pipFocusedData', function () {\r\n                    $timeout(this.init);\r\n                }, true);\r\n            }\r\n        }\r\n\r\n        private init() {\r\n            const selector = this.$scope.pipWithHidden && this.$scope.pipWithHidden() ? '.pip-focusable' : '.pip-focusable:visible';\r\n            this.onFocusClass = this.$scope.pipFocusedClass ? this.$scope.pipFocusedClass() : '';\r\n            this.controls = this.$element.find(selector);\r\n            this.controlsLength = this.controls.length;\r\n            this.checkTabindex(this.controls);\r\n            // Add event listeners\r\n            this.controls.on('focus', (event) => {\r\n                const target = event.currentTarget;\r\n                if ($(target).hasClass('md-focused')) {\r\n                    return;\r\n                }\r\n                if (this.$scope.pipRebind && this.$scope.pipRebind()) {\r\n                    this.init();\r\n                }\r\n                this.$element.addClass('pip-focused-container');\r\n                $(target).addClass(this.onFocusClass);\r\n                if (!this.$scope.pipFocusedOpacity || !this.$scope.pipFocusedOpacity()) {\r\n\r\n                    this.color = $(target).css('backgroundColor');\r\n                    this.oldBackgroundColor = this.color;\r\n                    $(target).css('backgroundColor', this.rgba(this.color));\r\n                    $(target).addClass('md-focused');\r\n                } else {\r\n                    $(target).addClass('md-focused md-focused-opacity');\r\n                }\r\n\r\n            }).on('focusout', (event) => {\r\n                const target = event.currentTarget;\r\n                if (!$(target).hasClass('md-focused')) {\r\n                    return;\r\n                }\r\n                this.$element.removeClass('pip-focused-container');\r\n                $(target).removeClass(this.onFocusClass);\r\n                if (!this.$scope.pipFocusedOpacity || !this.$scope.pipFocusedOpacity()) {\r\n                    $(target).css('backgroundColor', this.oldBackgroundColor);\r\n                    $(target).removeClass('md-focused md-focused-opacity');\r\n                } else {\r\n                    $(target).removeClass('md-focused');\r\n                }\r\n            });\r\n        }\r\n\r\n        private rgba(color) {\r\n            if (this.$scope.pipFocusedColor && this.$scope.pipFocusedColor()) {\r\n                return this.$scope.pipFocusedColor();\r\n            }\r\n\r\n            const arr = color.split(\"(\")[1].split(\")\")[0].split(\",\");\r\n\r\n            if (!arr || arr.length < 3) {\r\n                return ''\r\n            }\r\n\r\n            let red, blue, green, opacity;\r\n\r\n            opacity = arr.length == 3 ? 1 : parseFloat(arr[3]);\r\n            red = arr[0];\r\n            blue = arr[1];\r\n            green = arr[2];\r\n\r\n            if (opacity < this.opacityLimit) {\r\n                opacity += this.opacityDelta;\r\n            } else {\r\n                opacity -= this.opacityDelta;\r\n            }\r\n\r\n            return 'rgba(' + red + ', ' + blue + ', ' + green + ', ' + opacity + ')';\r\n        }\r\n\r\n        private setTabindex(element, value) {\r\n            element.attr('tabindex', value);\r\n        }\r\n\r\n        private checkTabindex(controls) {\r\n            const index = _.findIndex(controls, (c) => {\r\n                return c['tabindex'] > -1;\r\n            });\r\n\r\n            if (index == -1 && controls.length > 0 && this.$scope.pipFocusedTabindex) {\r\n                this.setTabindex(angular.element(controls[0]), this.$scope.pipFocusedTabindex());\r\n            }\r\n        }\r\n\r\n        private keydownListener(e) {\r\n            const keyCode = e.which || e.keyCode;\r\n            // Check control keyCode\r\n            if (keyCode == this.$mdConstant.KEY_CODE.LEFT_ARROW ||\r\n                keyCode == this.$mdConstant.KEY_CODE.UP_ARROW ||\r\n                keyCode == this.$mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                keyCode == this.$mdConstant.KEY_CODE.DOWN_ARROW\r\n            ) {\r\n                e.preventDefault();\r\n\r\n                const\r\n                    increment = (keyCode == this.$mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == this.$mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                    moveToControl = this.controls.index(this.controls.filter(\".md-focused\")) + increment;\r\n                // Move focus to next control\r\n                if (moveToControl >= 0 && moveToControl < this.controlsLength) {\r\n                    this.controls[moveToControl].focus();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    const Focused = function ($timeout: ng.ITimeoutService, \r\n        $mdConstant: any, \r\n        $window: ng.IWindowService\r\n    ): ng.IDirective {\r\n        return {\r\n            scope: {\r\n                pipFocusedColor: '&?',\r\n                pipFocusedClass: '&?',\r\n                pipFocusedRebind: '&?',\r\n                pipFocusedTabindex: '&?',\r\n                pipFocusedOpacity: '&?',\r\n                pipFocusedData: '&?',\r\n                pipWithHidden: '&?',\r\n                pipRebind: '&?'\r\n            },\r\n            link: function($scope: FocusedScope, $element: JQuery, $attrs: FocusedAttributes) {\r\n                new FocusedLink($scope, $element, $attrs, $timeout, $mdConstant, $window);\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module(\"pipFocused\", [])\r\n        .directive('pipFocused', Focused);\r\n}","{\r\n    interface InfiniteScrollScope extends ng.IScope {\r\n        pipInfiniteScroll: Function;\r\n        pipScrollContainer: JQuery;\r\n        pipScrollDistance: number | string;\r\n        pipScrollDisabled: boolean;\r\n        pipScrollUseDocumentBottom: boolean;\r\n        pipScrollListenForEvent: string;\r\n    }\r\n\r\n    interface InfiniteScrollAttributes extends ng.IAttributes {\r\n        pipScrollParent: any;\r\n        pipScrolImmediateCheck: any;\r\n    }\r\n\r\n    class InfiniteScrollLink {\r\n        private THROTTLE_MILLISECONDS: number = 500;\r\n        private checkWhenEnabled = null;\r\n        private scrollContainer = null;\r\n        private immediateCheck = true;\r\n        private scrollDistance = null;\r\n        private scrollEnabled = null;\r\n        private unregisterEventListener = null;\r\n        private useDocumentBottom = false;\r\n        private windowElement = null;\r\n        private onContainerScrollThrottle: Function;\r\n\r\n        constructor(\r\n            private $rootScope: ng.IRootScopeService,\r\n            private $window: ng.IWindowService,\r\n            private $interval: ng.IIntervalService,\r\n            private $scope: InfiniteScrollScope,\r\n            private $element: JQuery,\r\n            private $attrs: InfiniteScrollAttributes\r\n        ) {\r\n            this.windowElement = angular.element($window);\r\n\r\n            this.onContainerScrollThrottle = _.throttle(() => {\r\n                this.onContainerScroll();\r\n            }, this.THROTTLE_MILLISECONDS);\r\n\r\n            $scope.$on('$destroy', () => {\r\n                this.scrollContainer.unbind('scroll', () => {\r\n                    this.onContainerScrollThrottle();\r\n                });\r\n                if (this.unregisterEventListener !== null) {\r\n                    this.unregisterEventListener();\r\n                    return this.unregisterEventListener = null;\r\n                }\r\n            });\r\n\r\n            $scope.$watch('pipScrollDistance', (v) => {\r\n                this.handleScrollDistance(v);\r\n            });\r\n            this.handleScrollDistance($scope.pipScrollDistance);\r\n\r\n            $scope.$watch('pipScrollDisabled', (v) => {\r\n                this.handleScrollDisabled(v);\r\n            });\r\n            this.handleScrollDisabled($scope.pipScrollDisabled);\r\n\r\n            $scope.$watch('pipScrollUseDocumentBottom', (v) => {\r\n                this.handleScrollUseDocumentBottom(v);\r\n            });\r\n            this.handleScrollUseDocumentBottom($scope.pipScrollUseDocumentBottom);\r\n\r\n            this.changeContainer(this.windowElement);\r\n            if ($scope.pipScrollListenForEvent) {\r\n                this.unregisterEventListener = $rootScope.$on($scope.pipScrollListenForEvent, () => {\r\n                    this.onContainerScrollThrottle();\r\n                });\r\n            }\r\n\r\n            $scope.$watch('pipScrollContainer', (newContainer) => {\r\n                if (newContainer != this.scrollContainer)\r\n                    this.handleScrollContainer(newContainer);\r\n            });\r\n            this.handleScrollContainer($scope.pipScrollContainer || []);\r\n\r\n            if ($attrs.pipScrollParent !== null) {\r\n                this.changeContainer(angular.element($element.parent()));\r\n            }\r\n            if ($attrs.pipScrolImmediateCheck !== null) {\r\n                this.immediateCheck = $scope.$eval($attrs.pipScrolImmediateCheck);\r\n            }\r\n\r\n            $interval((function () {\r\n                if (this.immediateCheck) {\r\n                    return this.onContainerScrollThrottle();\r\n                }\r\n            }), 0, 1);\r\n        }\r\n\r\n        private height(element) {\r\n            element = element[0] || element;\r\n            if (isNaN(element.offsetHeight)) {\r\n                return element.document.documentElement.clientHeight;\r\n            } else {\r\n                return element.offsetHeight;\r\n            }\r\n        }\r\n\r\n        private offsetTop(element) {\r\n            if (!element[0].getBoundingClientRect || element.css('none')) {\r\n                return;\r\n            }\r\n            return element[0].getBoundingClientRect().top + this.pageYOffset(element);\r\n        }\r\n\r\n        private pageYOffset(element) {\r\n            element = element[0] || element;\r\n            if (isNaN(window.pageYOffset)) {\r\n                return element.document.documentElement.scrollTop;\r\n            } else {\r\n                return element.ownerDocument.defaultView.pageYOffset;\r\n            }\r\n        }\r\n\r\n        private onContainerScroll() {\r\n            let containerBottom,\r\n                containerTopOffset,\r\n                elementBottom,\r\n                remaining,\r\n                shouldScroll;\r\n\r\n            if (this.scrollContainer === this.windowElement) {\r\n                containerBottom = this.height(this.scrollContainer) + this.pageYOffset(this.scrollContainer[0].document.documentElement);\r\n                elementBottom = this.offsetTop(this.$element) + this.height(this.$element);\r\n            } else {\r\n                containerBottom = this.height(this.scrollContainer);\r\n                containerTopOffset = 0;\r\n                if (this.offsetTop(this.scrollContainer) !== void 0) {\r\n                    containerTopOffset = this.offsetTop(this.scrollContainer);\r\n                }\r\n                elementBottom = this.offsetTop(this.$element) - containerTopOffset + this.height(this.$element);\r\n            }\r\n\r\n            if (this.useDocumentBottom) {\r\n                elementBottom = this.height((this.$element[0].ownerDocument || ( < any > this.$element[0]).document).documentElement);\r\n            }\r\n\r\n            remaining = elementBottom - containerBottom;\r\n            shouldScroll = remaining <= this.height(this.scrollContainer) * this.scrollDistance + 1;\r\n\r\n            if (shouldScroll) {\r\n                this.checkWhenEnabled = true;\r\n                if (this.scrollEnabled) {\r\n                    if (this.$scope.$$phase || this.$rootScope.$$phase) {\r\n                        return this.$scope.pipInfiniteScroll();\r\n                    } else {\r\n                        return this.$scope.$apply(() => {\r\n                            this.$scope.pipInfiniteScroll();\r\n                        });\r\n                    }\r\n                }\r\n            } else {\r\n                return this.checkWhenEnabled = false;\r\n            }\r\n        }\r\n\r\n        private handleScrollDistance(v) {\r\n            return this.scrollDistance = parseFloat(v) || 0;\r\n        }\r\n\r\n        private handleScrollDisabled(v) {\r\n            this.scrollEnabled = !v;\r\n            if (this.scrollEnabled && this.checkWhenEnabled) {\r\n                this.checkWhenEnabled = false;\r\n                this.onContainerScrollThrottle();\r\n            }\r\n        }\r\n\r\n        private handleScrollUseDocumentBottom(v) {\r\n            return this.useDocumentBottom = v;\r\n        }\r\n\r\n        private changeContainer(newContainer) {\r\n            if (this.scrollContainer) {\r\n                this.scrollContainer.unbind('scroll', () => {\r\n                    this.onContainerScrollThrottle();\r\n                });\r\n            }\r\n\r\n            this.scrollContainer = newContainer;\r\n            if (newContainer) {\r\n                return this.scrollContainer.bind('scroll', () => {\r\n                    this.onContainerScrollThrottle();\r\n                });\r\n            }\r\n        }\r\n\r\n        private handleScrollContainer(newContainer) {\r\n            if ((newContainer == null) || newContainer.length === 0) {\r\n                return;\r\n            }\r\n            if (newContainer instanceof HTMLElement) {\r\n                newContainer = angular.element(newContainer);\r\n            } else if (typeof newContainer.append === 'function') {\r\n                newContainer = angular.element(newContainer[newContainer.length - 1]);\r\n            } else if (typeof newContainer === 'string') {\r\n                newContainer = this.$element.parents().find(newContainer);\r\n            }\r\n\r\n            if (newContainer != null && (!Array.isArray(newContainer) ||\r\n                    (Array.isArray(newContainer) && newContainer.length > 0))) {\r\n                return this.changeContainer(newContainer);\r\n            } else {\r\n                throw new Error(\"Invalid pip-scroll-container attribute.\");\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    const InfiniteScroll = function (\r\n        $rootScope: ng.IRootScopeService,\r\n        $window: ng.IWindowService,\r\n        $interval: ng.IIntervalService\r\n    ): ng.IDirective {\r\n        return {\r\n            scope: {\r\n                pipInfiniteScroll: '&',\r\n                pipScrollContainer: '=',\r\n                pipScrollDistance: '=',\r\n                pipScrollDisabled: '=',\r\n                pipScrollUseDocumentBottom: '=',\r\n                pipScrollListenForEvent: '@'\r\n            },\r\n            link: function (\r\n                $scope: InfiniteScrollScope,\r\n                $element: JQuery,\r\n                $attrs: InfiniteScrollAttributes\r\n            ) {\r\n                new InfiniteScrollLink($rootScope, $window, $interval, $scope, $element, $attrs);\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module(\"pipInfiniteScroll\", [])\r\n        .directive('pipInfiniteScroll', InfiniteScroll);\r\n}","{\r\n    interface SelectedAttributes extends ng.IAttributes {\r\n        pipSelected: any;\r\n        pipSelectedId: any;\r\n        pipSelect: any;\r\n        pipEnterSpacePress: any;\r\n        pipNoScroll: any;\r\n        pipSkipHidden: any;\r\n        pipTreeList: any;\r\n        pipSelectedWatch: any;\r\n    }\r\n\r\n    class SelectedLink {\r\n        private indexGetter: any;\r\n        private indexSetter: any;\r\n        private idSetter: any;\r\n        private idGetter: any;\r\n        private changeGetter: any;\r\n        private enterSpaceGetter: any;\r\n        private noScroll: any;\r\n        private modifier: any;\r\n        private className: any;\r\n        private selectedIndex: any;\r\n        private currentElementTabinex: any;\r\n        private pipSelectedWatch: any;\r\n        private isScrolled: any;\r\n        // Variables for touch functions\r\n        private touchStartX: any;\r\n        private touchStartY: any;\r\n        private trackingClick: any;\r\n        private trackingClickStart: any;\r\n        private targetElement: any;\r\n        private lastClickTime: any;\r\n        private cancelNextClick: any;\r\n        // Constants for touch functions\r\n        private touchBoundary: number = 10;\r\n        private tapdelay: number = 200;\r\n        private tapTimeout: number = 700;\r\n\r\n        constructor(\r\n            $parse: ng.IParseService,\r\n            private $mdConstant: any,\r\n            private $timeout: ng.ITimeoutService,\r\n            private $scope: ng.IScope,\r\n            private $element: JQuery,\r\n            private $attrs: SelectedAttributes\r\n        ) {\r\n            this.indexGetter = $attrs.pipSelected ? $parse($attrs.pipSelected) : null;\r\n            this.indexSetter = this.indexGetter ? this.indexGetter.assign : null;\r\n            this.idGetter = $attrs.pipSelectedId ? $parse($attrs.pipSelectedId) : null;\r\n            this.idSetter = this.idGetter ? this.idGetter.assign : null;\r\n            this.changeGetter = $attrs.pipSelect ? $parse($attrs.pipSelect) : null;\r\n            this.enterSpaceGetter = $attrs.pipEnterSpacePress ? $parse($attrs.pipEnterSpacePress) : null;\r\n            this.noScroll = $attrs.pipNoScroll;\r\n            this.modifier = $attrs.pipSkipHidden ? ':visible' : '';\r\n            this.className = $attrs.pipTreeList ? '.pip-selectable-tree' : '.pip-selectable';\r\n            this.selectedIndex = this.indexGetter($scope);\r\n            this.currentElementTabinex = $element.attr('tabindex');\r\n            this.pipSelectedWatch = $attrs.pipSelectedWatch;\r\n            this.isScrolled = false;\r\n\r\n            $element.attr('tabindex', this.currentElementTabinex || 0);\r\n\r\n            $element.on('click', this.className, (event) => {\r\n                this.onClickEvent(event);\r\n            });\r\n            $element.on('touchstart', this.className, (event) => {\r\n                this.onTouchStart(event);\r\n            });\r\n            $element.on('touchmove', this.className, (event) => {\r\n                this.onTouchMove(event);\r\n            });\r\n            $element.on('touchend', this.className, (event) => {\r\n                this.onTouchEnd(event);\r\n            });\r\n            $element.on('touchcancel', this.className, (event) => {\r\n                this.onTouchCancel(event);\r\n            });\r\n            $element.on('keydown', (event) => {\r\n                this.onKeyDown(event);\r\n            });\r\n            $element.on('focusin', (event) => {\r\n                this.onFocusIn(event);\r\n            });\r\n            $element.on('focusout', (event) => {\r\n                this.onFocusOut(event);\r\n            });\r\n\r\n            // Watch selected item index\r\n            if (!$attrs.pipTreeList) {\r\n                $scope.$watch(this.indexGetter, (newSelectedIndex) => {\r\n                    this.selectItem({\r\n                        itemIndex: newSelectedIndex\r\n                    });\r\n                });\r\n            } else {\r\n                $scope.$watch(this.idGetter, (newSelectedId) => {\r\n                    $timeout(() => {\r\n                        this.selectItem({\r\n                            itemId: newSelectedId,\r\n                            raiseEvent: true\r\n                        });\r\n                    }, 0);\r\n                });\r\n            }\r\n\r\n            // Watch resync selection\r\n            if (this.pipSelectedWatch) {\r\n                $scope.$watch(this.pipSelectedWatch, () => {\r\n                    // Delay update to allow ng-repeat to update DOM\r\n                    $timeout(() => {\r\n                        this.selectedIndex = this.indexGetter($scope);\r\n                        this.selectItem({\r\n                            itemIndex: this.selectedIndex\r\n                        });\r\n                    }, 100);\r\n                });\r\n            }\r\n\r\n            // Select item defined by index\r\n            this.selectItem({\r\n                itemIndex: this.selectedIndex,\r\n                items: $element.find(this.className)\r\n            });\r\n        }\r\n\r\n        private selectItem(itemParams) {\r\n            if (this.isScrolled) return;\r\n            let itemIndex = itemParams.itemIndex,\r\n                itemId = itemParams.itemId,\r\n                items = itemParams.items || this.$element.find(this.className + this.modifier),\r\n                itemsLength = items.length,\r\n                item = () => {\r\n                    if (itemParams.item) return itemParams.item;\r\n                    if (itemIndex === undefined && itemIndex === -1) {\r\n                        itemIndex = items.index(items.filter('[pip-id=' + itemId + ']'));\r\n                    }\r\n                    if (itemIndex >= 0 && itemIndex < itemsLength) {\r\n                        return items[itemIndex]\r\n                    }\r\n\r\n                    return false;\r\n                },\r\n                raiseEvent = itemParams.raiseEvent;\r\n                item = item();\r\n            if (item) {\r\n                this.$element.find(this.className).removeClass('selected md-focused');\r\n                item = <any>angular.element(item)\r\n                    .addClass('selected md-focused')\r\n                    .focus();\r\n                if (!this.noScroll) this.scrollToItem(item);\r\n                if (raiseEvent) this.defineSelectedIndex(items);\r\n            }\r\n        };\r\n\r\n        private defineSelectedIndex(items) {\r\n            const oldSelectedIndex = this.selectedIndex;\r\n            this.selectedIndex = -1;\r\n            for (var index = 0; index < items.length; index++) {\r\n                if ($(items[index]).hasClass('selected')) {\r\n                    this.selectedIndex = index;\r\n\r\n                    break;\r\n                }\r\n            }\r\n\r\n            const updateIndex = () => {\r\n                const selectedItem = angular.element(items[this.selectedIndex]),\r\n                    selectedId = selectedItem.attr('pip-id');\r\n\r\n                if (this.indexSetter) this.indexSetter(this.$scope, this.selectedIndex);\r\n                if (this.idSetter) this.idSetter(this.$scope, selectedId);\r\n                onSelect();\r\n            };\r\n\r\n            const onSelect = () => {\r\n                const selectedItem = angular.element(items[this.selectedIndex]),\r\n                    selectedId = selectedItem.attr('pip-id');\r\n\r\n                if (this.changeGetter) {\r\n                    this.changeGetter(this.$scope, {\r\n                        $event: {\r\n                            target: this.$element,\r\n                            item: selectedItem,\r\n                            index: this.selectedIndex,\r\n                            id: selectedId,\r\n                            newIndex: this.selectedIndex,\r\n                            oldIndex: oldSelectedIndex\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            // Execute callback to notify about item select\r\n            if (oldSelectedIndex != this.selectedIndex && this.selectedIndex !== -1) {\r\n                this.$scope.$apply(() => { updateIndex(); });\r\n            } else {\r\n                this.$scope.$apply(() => { onSelect(); });\r\n            }\r\n        };\r\n\r\n        private scrollToItem($item) {\r\n            if (this.noScroll || !$item.offset()) return;\r\n\r\n            const\r\n                containerTop = this.$element.offset().top,\r\n                containerHeight = this.$element.height(),\r\n                containerBottom = containerTop + containerHeight,\r\n                itemTop = $item.offset().top,\r\n                itemHeight = $item.outerHeight(true),\r\n                itemBottom = itemTop + itemHeight,\r\n                containerScrollTop = this.$element.scrollTop();\r\n\r\n            this.isScrolled = true;\r\n            this.$timeout(() => {\r\n                this.isScrolled = false;\r\n            }, 100);\r\n\r\n            if (containerTop > itemTop) {\r\n                this.$element.scrollTop(containerScrollTop + itemTop - containerTop);\r\n            } else if (containerBottom < itemBottom) {\r\n                this.$element.scrollTop(containerScrollTop + itemBottom - containerBottom);\r\n            }\r\n        };\r\n\r\n        private getTargetElementFromEventTarget(eventTarget) {\r\n            // On some older browsers the event target may be a text node.\r\n            if (eventTarget.nodeType === Node.TEXT_NODE) {\r\n                return eventTarget.parentNode;\r\n            }\r\n\r\n            return eventTarget;\r\n        };\r\n\r\n        private touchHasMoved(event) {\r\n            const touch = event.changedTouches[0],\r\n                boundary = this.touchBoundary; // Touchmove boundary, beyond which a click will be cancelled.\r\n\r\n            if (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n        private onClickEvent(event) {\r\n            this.selectItem({\r\n                item: event.currentTarget,\r\n                raiseEvent: true\r\n            });\r\n        }\r\n\r\n        private onTouchStart(event) {\r\n            const ev = event.originalEvent;\r\n            if (ev['targetTouches'].length > 1) {\r\n                return true;\r\n            }\r\n            const targetElement = this.getTargetElementFromEventTarget(ev.target),\r\n                touch = ev['targetTouches'][0];\r\n\r\n            this.trackingClick = true;\r\n            this.trackingClickStart = ev.timeStamp;\r\n            this.targetElement = targetElement;\r\n\r\n            this.touchStartX = touch.pageX;\r\n            this.touchStartY = touch.pageY;\r\n\r\n            /*if ((ev.timeStamp - this.lastClickTime) < this.tapdelay) {\r\n                //  event.preventDefault();\r\n            }*/\r\n\r\n            return true;\r\n        }\r\n\r\n        private onTouchMove(event) {\r\n            if (!this.trackingClick) {\r\n                return true;\r\n            }\r\n            const ev = event.originalEvent;\r\n            // If the touch has moved, cancel the click tracking\r\n            if (this.targetElement !== this.getTargetElementFromEventTarget(ev.target) || this.touchHasMoved(ev)) {\r\n                this.trackingClick = false;\r\n                this.targetElement = null;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        private onTouchEnd(event) {\r\n            let forElement, newTrackingClickStart, targetTagName, scrollParent, touch, newtargetElement = this.targetElement;\r\n\r\n            if (!this.trackingClick) {\r\n                return true;\r\n            }\r\n            const ev = event.originalEvent;\r\n            // Prevent phantom clicks on fast double-tap \r\n            if ((ev.timeStamp - this.lastClickTime) < this.tapdelay) {\r\n                this.cancelNextClick = true;\r\n                return true;\r\n            }\r\n\r\n            if ((ev.timeStamp - this.trackingClickStart) > this.tapTimeout) {\r\n                return true;\r\n            }\r\n\r\n            // Reset to prevent wrong click cancel on input \r\n            this.cancelNextClick = false;\r\n\r\n            this.lastClickTime = event.timeStamp;\r\n\r\n            newTrackingClickStart = this.trackingClickStart;\r\n            this.trackingClick = false;\r\n            this.trackingClickStart = 0;\r\n\r\n            this.selectItem({\r\n                item: event.currentTarget,\r\n                raiseEvent: true\r\n            });\r\n\r\n            return false;\r\n        }\r\n\r\n        private onTouchCancel(event) {\r\n            this.trackingClick = false;\r\n            this.targetElement = null;\r\n        }\r\n\r\n        private onKeyDown(event) {\r\n            var keyCode = event.which || event.keyCode;\r\n\r\n            // Check control keyCode\r\n            if (keyCode == this.$mdConstant.KEY_CODE.ENTER || keyCode == this.$mdConstant.KEY_CODE.SPACE) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                if (this.enterSpaceGetter) {\r\n                    this.enterSpaceGetter(this.$scope, {\r\n                        $event: {\r\n                            target: this.$element,\r\n                            index: this.selectedIndex,\r\n                            item: this.$element.find('.selected')\r\n                        }\r\n                    });\r\n                }\r\n\r\n            } else\r\n            if (keyCode == this.$mdConstant.KEY_CODE.LEFT_ARROW || keyCode == this.$mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                keyCode == this.$mdConstant.KEY_CODE.UP_ARROW || keyCode == this.$mdConstant.KEY_CODE.DOWN_ARROW\r\n            ) {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n\r\n                // Get next selectable control index\r\n                const items = this.$element.find(this.className + this.modifier),\r\n                    inc = (keyCode == this.$mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == this.$mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                    newSelectedIndex = this.selectedIndex + inc;\r\n\r\n                // Set next control as selected\r\n                this.selectItem({\r\n                    itemIndex: newSelectedIndex,\r\n                    items: items,\r\n                    raiseEvent: true\r\n                });\r\n            }\r\n        }\r\n\r\n        private onFocusIn(event) {\r\n            // Choose selected element\r\n            let items,\r\n                selectedItem = this.$element.find(this.className + '.selected');\r\n\r\n            selectedItem.addClass('md-focused');\r\n\r\n            // If there are not selected elements then pick the first one\r\n            if (selectedItem.length === 0) {\r\n                this.selectedIndex = this.indexGetter(this.$scope);\r\n                items = this.$element.find(this.className + this.modifier);\r\n                this.selectItem({\r\n                    itemIndex: this.selectedIndex || 0,\r\n                    items: items,\r\n                    raiseEvent: true\r\n                });\r\n            }\r\n        }\r\n\r\n        private onFocusOut(event) {\r\n            this.$element.find(this.className + '.md-focused' + this.modifier).removeClass('md-focused');\r\n        }\r\n    }\r\n\r\n    const Selected = function (\r\n        $parse: ng.IParseService,\r\n        $mdConstant: any,\r\n        $timeout: ng.ITimeoutService\r\n    ): ng.IDirective {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            link: function (\r\n                $scope: ng.IScope,\r\n                $element: JQuery,\r\n                $attrs: SelectedAttributes\r\n            ) {\r\n                new SelectedLink($parse, $mdConstant, $timeout, $scope, $element, $attrs);\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module(\"pipSelected\", [])\r\n        .directive('pipSelected', Selected);\r\n}","import { ShortcutOptions } from \"./Shortcut\";\r\n\r\nexport class ShortcutItem {\r\n    // Shortcut combination\r\n    public shortcut: string;\r\n    // Target object \r\n    public target?: any;\r\n    // Target element by Id\r\n    public targetId?: string;\r\n    // Target element by class (firstelement??)\r\n    // Public targetClass?: string;\r\n    // Access function\r\n    public access?: (event: JQueryEventObject) => boolean;\r\n    // Window.location.href\r\n    public href?: string;\r\n    // $location.url\r\n    public url?: string;\r\n    // $state.go(state, stateParams)\r\n    public state?: string;\r\n    // Parameters for $state.go(state, stateParams)\r\n    public stateParams?: any;\r\n    // $rootScope.broadcast(event)\r\n    public event?: string;\r\n    // Click callback\r\n    public keypress?: (event: JQueryEventObject) => void;\r\n    // Default options\r\n    public options?: ShortcutOptions;    \r\n}\r\n\r\n// export class ShortcutItem extends SimpleShortcutItem {\r\n//     public shortcuts: SimpleShortcutItem[];\r\n// }\r\n\r\nexport class ShortcutsConfig {\r\n    // Global shortcut \r\n    public globalShortcuts: ShortcutItem[] = [];\r\n    // Local shortcut \r\n    public localShortcuts: ShortcutItem[] = [];\r\n    // Default options\r\n    public defaultOptions: ShortcutOptions = null;\r\n}\r\n\r\nexport interface IShortcutsService {\r\n    readonly config: ShortcutsConfig;\r\n\r\n    globalShortcuts: ShortcutItem[];\r\n    localShortcuts: ShortcutItem[];\r\n}\r\n\r\nexport interface IShortcutsProvider extends ng.IServiceProvider {\r\n    config: ShortcutsConfig;\r\n    \r\n    globalShortcuts: ShortcutItem[];\r\n    defaultOptions: ShortcutOptions;\r\n}\r\n","export class KeyboardEvent {\r\n    static Keydown: string = 'keydown';\r\n    static Keyup: string = 'keyup';\r\n    static Keypress: string = 'keypress';\r\n}\r\n\r\nexport class ShortcutOptions {\r\n    Type: KeyboardEvent;\r\n    Propagate: boolean;\r\n    DisableInInput: boolean;\r\n    Target: any; // Event target object\r\n    Keycode: number;\r\n}\r\n\r\nexport class Shortcut {\r\n    private shift_nums = {\r\n        \"`\": \"~\",\r\n        \"1\": \"!\",\r\n        \"2\": \"@\",\r\n        \"3\": \"#\",\r\n        \"4\": \"$\",\r\n        \"5\": \"%\",\r\n        \"6\": \"^\",\r\n        \"7\": \"&\",\r\n        \"8\": \"*\",\r\n        \"9\": \"(\",\r\n        \"0\": \")\",\r\n        \"-\": \"_\",\r\n        \"=\": \"+\",\r\n        \";\": \":\",\r\n        \"'\": \"\\\"\",\r\n        \",\": \"<\",\r\n        \".\": \">\",\r\n        \"/\": \"?\",\r\n        \"\\\\\": \"|\"\r\n    };\r\n\r\n    private special_keys = {\r\n        'esc': 27,\r\n        'escape': 27,\r\n        'tab': 9,\r\n        'space': 32,\r\n        'return': 13,\r\n        'enter': 13,\r\n        'backspace': 8,\r\n\r\n        'scrolllock': 145,\r\n        'scroll_lock': 145,\r\n        'scroll': 145,\r\n        'capslock': 20,\r\n        'caps_lock': 20,\r\n        'caps': 20,\r\n        'numlock': 144,\r\n        'num_lock': 144,\r\n        'num': 144,\r\n\r\n        'pause': 19,\r\n        'break': 19,\r\n\r\n        'insert': 45,\r\n        'home': 36,\r\n        'delete': 46,\r\n        'end': 35,\r\n\r\n        'pageup': 33,\r\n        'page_up': 33,\r\n        'pu': 33,\r\n\r\n        'pagedown': 34,\r\n        'page_down': 34,\r\n        'pd': 34,\r\n\r\n        'left': 37,\r\n        'up': 38,\r\n        'right': 39,\r\n        'down': 40,\r\n\r\n        'f1': 112,\r\n        'f2': 113,\r\n        'f3': 114,\r\n        'f4': 115,\r\n        'f5': 116,\r\n        'f6': 117,\r\n        'f7': 118,\r\n        'f8': 119,\r\n        'f9': 120,\r\n        'f10': 121,\r\n        'f11': 122,\r\n        'f12': 123\r\n    };\r\n\r\n    private modifiers = {\r\n        shift: { wanted: false, pressed: false },\r\n        ctrl: { wanted: false, pressed: false },\r\n        alt: { wanted: false, pressed: false },\r\n        meta: { wanted: false, pressed: false }\t// Meta is Mac specific\r\n    };\r\n\r\n    public eventCallback: Function;\r\n    public target: any;\r\n    public event: KeyboardEvent;\r\n    public option: ShortcutOptions;\r\n    public shorcut: string;\r\n    public callback: Function;\r\n\r\n    public constructor(\r\n        element: any,\r\n        shorcutCombination: string,\r\n        option: ShortcutOptions,\r\n        callback: (e?: JQueryEventObject) => void\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this.target = element;\r\n        this.shorcut = shorcutCombination;\r\n        this.event = option.Type;\r\n        this.option = option;\r\n        this.callback = callback;\r\n\r\n        this.eventCallback = (event: JQueryEventObject) => {\r\n            let e: JQueryEventObject = event || <JQueryEventObject>window.event;\r\n            let code: number;\r\n\r\n            if (this.option.DisableInInput) { // Disable shortcut keys in Input, Textarea fields\r\n                let element;\r\n                if (e.target) {\r\n                    element = e.target;\r\n                } else if (e.srcElement) {\r\n                    element = e.srcElement;\r\n                }\r\n\r\n                if (element.nodeType == 3) {\r\n                    element = element.parentNode;\r\n                }\r\n                if (element.tagName == 'INPUT' || element.tagName == 'TEXTAREA') return;\r\n            }\r\n            // Find Which key is pressed\r\n            if (e.keyCode) {\r\n                code = e.keyCode;\r\n            } else if (e.which) {\r\n                code = e.which;\r\n            }\r\n\r\n            let character = String.fromCharCode(code).toLowerCase();\r\n\r\n            if (code == 188) character = \",\"; // If the user presses, when the type is onkeydown\r\n            if (code == 190) character = \".\"; // If the user presses, when the type is onkeydown\r\n\r\n            let keys: string[] = this.shorcut.split(\"+\");\r\n            // Key Pressed - counts the number of valid keypresses - if it is same as the number of keys, the shortcut function is invoked\r\n            let kp: number = 0;\r\n\r\n            if (e.ctrlKey) this.modifiers.ctrl.pressed = e.ctrlKey;\r\n            if (e.shiftKey) this.modifiers.shift.pressed = e.shiftKey;\r\n            if (e.altKey) this.modifiers.alt.pressed = e.altKey;\r\n            if (e.metaKey) this.modifiers.meta.pressed = e.metaKey;\r\n\r\n            let i: number = 0;\r\n            for (i = 0; i < keys.length; i++) {\r\n                let k: string = keys[i];\r\n                // Modifiers\r\n                if (k == 'ctrl' || k == 'control') {\r\n                    kp++;\r\n                    this.modifiers.ctrl.wanted = true;\r\n                } else if (k == 'shift') {\r\n                    kp++;\r\n                    this.modifiers.shift.wanted = true;\r\n                } else if (k == 'alt') {\r\n                    kp++;\r\n                    this.modifiers.alt.wanted = true;\r\n                } else if (k == 'meta') {\r\n                    kp++;\r\n                    this.modifiers.meta.wanted = true;\r\n                } else if (k.length > 1) { // If it is a special key\r\n                    if (this.special_keys[k] == code) {\r\n                        kp++;\r\n                    }\r\n                } else if (this.option.Keycode) {\r\n                    if (this.option.Keycode == code) kp++;\r\n                } else { // The special keys did not match\r\n                    if (character == k) kp++;\r\n                    else {\r\n                        if (this.shift_nums[character] && e.shiftKey) { // Stupid Shift key bug created by using lowercase\r\n                            character = this.shift_nums[character];\r\n                            if (character == k) {\r\n                                kp++;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            if (kp == keys.length &&\r\n                this.modifiers.ctrl.pressed == this.modifiers.ctrl.wanted &&\r\n                this.modifiers.shift.pressed == this.modifiers.shift.wanted &&\r\n                this.modifiers.alt.pressed == this.modifiers.alt.wanted &&\r\n                this.modifiers.meta.pressed == this.modifiers.meta.wanted) {\r\n\r\n                this.callback(e);\r\n\r\n                if (!this.option.Propagate) { // Stop the event\r\n                    // e.cancelBubble is supported by IE - this will kill the bubbling process.\r\n                    e.cancelBubble = true;\r\n                    e.returnValue = false;\r\n\r\n                    // e.stopPropagation works in Firefox.\r\n                    if (e.stopPropagation) {\r\n                        e.stopPropagation();\r\n                        e.preventDefault();\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n            }\r\n            this.modifiers.ctrl.pressed = false;\r\n            this.modifiers.shift.pressed = false;\r\n            this.modifiers.alt.pressed = false;\r\n            this.modifiers.meta.pressed = false;\r\n        };\r\n    }\r\n}\r\n","import { Shortcut, ShortcutOptions, KeyboardEvent } from \"./Shortcut\";\r\nimport { IKeyboardShortcuts, IShortcutBindingService, IShortcutBindingProvider } from './IShortcutBindingService';\r\n\r\n{\r\n    class ShortcutBindingService implements IShortcutBindingService {\r\n        private _log: ng.ILogService;\r\n        private _defaultOption: ShortcutOptions;\r\n        private _shortcuts: IKeyboardShortcuts = {};\r\n\r\n        public constructor(\r\n            $log: ng.ILogService,\r\n            option: ShortcutOptions\r\n        ) {\r\n            \"ngInject\";\r\n            this._log = $log;\r\n            this._defaultOption = option ? _.defaults(option, this.getDefaultOption()) : this.getDefaultOption();\r\n        }\r\n\r\n        private getDefaultOption(): ShortcutOptions {\r\n            let defaultOption: ShortcutOptions = {\r\n                Type: KeyboardEvent.Keydown,\r\n                Propagate: false,\r\n                DisableInInput: false,\r\n                Target: document,\r\n                Keycode: null\r\n            };\r\n\r\n            return defaultOption;\r\n        }\r\n\r\n        public get shortcuts(): IKeyboardShortcuts {\r\n            return this._shortcuts;\r\n        }\r\n\r\n        public add(shortcut: string, callback: (e: JQueryEventObject) => void, option: ShortcutOptions): void {\r\n            this.remove(shortcut);\r\n            let shortcutOption: ShortcutOptions = option ? _.defaults(option, this._defaultOption) : this._defaultOption;\r\n            let shortcutCombination: string = shortcut.toLowerCase();\r\n            let element = shortcutOption.Target;\r\n\r\n            if (typeof shortcutOption.Target == 'string') {\r\n                element = document.getElementById(shortcutOption.Target);\r\n            } else {\r\n                element = shortcutOption.Target;\r\n            }\r\n\r\n            if (!element) {\r\n                this._log.error('Register shortcut: element undentified!');\r\n                return;\r\n            }\r\n\r\n            if (!shortcutCombination) {\r\n                this._log.error('Register shortcut: shortcut combination undentified!');\r\n                return;\r\n            }\r\n\r\n            if (!callback) {\r\n                this._log.error('Register shortcut: shorcut callback undentified!');\r\n                return;\r\n            }\r\n\r\n            let newKeyboardShortcut = new Shortcut(element, shortcutCombination, shortcutOption, callback);\r\n\r\n            this._shortcuts[shortcutCombination] = newKeyboardShortcut;\r\n\r\n            //Attach the function with the event\r\n            if (element.addEventListener) {\r\n                element.addEventListener(shortcutOption.Type, newKeyboardShortcut.eventCallback, false);\r\n            } else if (element.attachEvent) {\r\n                element.attachEvent('on' + shortcutOption.Type, newKeyboardShortcut.eventCallback);\r\n            } else {\r\n                element.on(shortcutOption.Type, newKeyboardShortcut.eventCallback);\r\n            }\r\n        }\r\n\r\n        public remove(shorcut: string): void {\r\n            let shortcutCombination = shorcut.toLowerCase();\r\n            let binding: Shortcut = this._shortcuts[shortcutCombination];\r\n\r\n            delete(this._shortcuts[shortcutCombination])\r\n            if (!binding) return;\r\n\r\n            let type = binding.event;\r\n            let element = binding.target;\r\n            let callback = binding.eventCallback;\r\n\r\n            if (element.detachEvent) {\r\n                element.detachEvent('on' + type, callback);\r\n            } else if (element.removeEventListener) {\r\n                element.removeEventListener(type, callback, false);\r\n            } else {\r\n                // element['on' + type] = false;\r\n                element.off(type, callback);\r\n            }\r\n        }\r\n    }\r\n\r\n    class ShortcutBindingProvider implements IShortcutBindingProvider {\r\n        private _service: ShortcutBindingService;\r\n        private _option: ShortcutOptions;\r\n\r\n        public get option(): ShortcutOptions {\r\n            return this._option;\r\n        }\r\n\r\n        public set option(value: ShortcutOptions) {\r\n            this._option = value || new ShortcutOptions();\r\n        }\r\n\r\n        public $get(\r\n            $log: ng.ILogService\r\n        ) {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null)\r\n                this._service = new ShortcutBindingService($log, this._option);\r\n\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipShortcuts')\r\n        .provider('pipShortcutBinding', ShortcutBindingProvider);\r\n}","import { ShortcutOptions } from \"./Shortcut\";\r\nimport { IShortcutBindingService } from \"./IShortcutBindingService\";\r\n\r\ninterface ShortcutAttributes extends ng.IAttributes {\r\n    pipShortcutAction: any;\r\n    pipShortcutName: any;\r\n    pipShorcutOptions: ShortcutOptions;\r\n}\r\n\r\nclass ShortcutController implements ng.IController  {\r\n    private actionShortcuts: Function;\r\n    private nameShortcuts: string;\r\n    private options: ShortcutOptions;\r\n\r\n    constructor(\r\n        $element: JQuery,\r\n        $attrs: ShortcutAttributes,\r\n        $scope: ng.IScope,\r\n        $log: ng.ILogService,\r\n        $parse: ng.IParseService,\r\n        pipShortcutBinding: IShortcutBindingService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        if ($attrs.pipShortcutAction) {\r\n            this.actionShortcuts = $parse($attrs.pipShortcutAction);\r\n            this.actionShortcuts($scope, {$event: {}});\r\n        } else {\r\n            $log.error('Shortcut action does not set.');\r\n\r\n            return\r\n        }\r\n\r\n        if ($attrs.pipShortcutName && _.isString($attrs.pipShortcutName)) {\r\n            this.nameShortcuts = $attrs.pipShortcutName;\r\n        } else {\r\n            $log.error('Shortcut name does not set.');\r\n\r\n            return\r\n        }\r\n\r\n        this.options = $attrs.pipShorcutOptions ? <ShortcutOptions>$attrs.pipShorcutOptions : <ShortcutOptions>{};\r\n        this.options.Target = $element;\r\n        \r\n        // Registration of keybord shortcuts\r\n        pipShortcutBinding.add(this.nameShortcuts, (e?: any) => {\r\n            this.actionShortcuts($scope, {$event: {'e': e}});          \r\n        }, this.options);\r\n    }\r\n\r\n    private keypressShortcut(action) {\r\n        this.actionShortcuts();\r\n    }\r\n}\r\n\r\n// Prevent junk from going into typescript definitions\r\n{\r\n    const shortcutsDirective = function(): ng.IDirective {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,            \r\n            controller: ShortcutController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipShortcuts')\r\n        .directive('pipShortcut', shortcutsDirective);\r\n}","import { IShortcutBindingService } from \"./IShortcutBindingService\"\r\nimport { Shortcut, ShortcutOptions, KeyboardEvent } from \"./Shortcut\";\r\nimport { ShortcutsConfig, ShortcutItem, IShortcutsService, IShortcutsProvider } from './IShortcutsService';\r\n\r\nexport let ShortcutsChangedEvent = 'pipShortcutsChanged';\r\n\r\nclass ShortcutsService implements IShortcutsService {\r\n    private _oldConfig: ShortcutsConfig;\r\n    private _config: ShortcutsConfig;\r\n\r\n    public constructor(\r\n        config: ShortcutsConfig,\r\n        private $rootScope: ng.IRootScopeService,\r\n        private $window: ng.IWindowService, \r\n        private $location: ng.ILocationService, \r\n        private $injector: ng.auto.IInjectorService,\r\n        private pipShortcutBinding: IShortcutBindingService\r\n    ) {\r\n        this._config = config;\r\n        this._oldConfig = _.cloneDeep(this._config);\r\n\r\n        // Add shortcuts\r\n        this.addShortcuts(this._config.globalShortcuts);\r\n        this.addShortcuts(this._config.localShortcuts);        \r\n    }\r\n\r\n    // Describe private functions\r\n    private sendChangeEvent() {\r\n        // Remove shortcuts\r\n        this.removeShortcuts(this._oldConfig.globalShortcuts);\r\n        this.removeShortcuts(this._oldConfig.localShortcuts);\r\n\r\n        // Add shortcuts\r\n        this.addShortcuts(this.config.globalShortcuts);\r\n        this.addShortcuts(this.config.localShortcuts);\r\n\r\n        this.$rootScope.$emit(ShortcutsChangedEvent, this.config);\r\n\r\n        // Save current config to oldConfig\r\n        this._oldConfig = _.cloneDeep(this.config);\r\n    }\r\n\r\n    private removeShortcuts(collection: ShortcutItem[]): void {\r\n        _.each(collection, (k) => {\r\n            this.pipShortcutBinding.remove(k.shortcut);\r\n        });\r\n    }\r\n\r\n    private keypressShortcut(item: ShortcutItem, event: JQueryEventObject) {\r\n        if (item.access && _.isFunction(item.access)) {\r\n            if (!item.access(event)) {\r\n                return;\r\n            }\r\n        } \r\n\r\n        if (item.keypress) {\r\n            item.keypress(event);\r\n            return;\r\n        }\r\n\r\n        if (item.href) {\r\n            this.$window.location.href = item.href;\r\n            return;\r\n        }\r\n\r\n        if (item.url) {\r\n            this.$location.url(item.url);\r\n            return;\r\n        }\r\n\r\n        if (item.state) {\r\n            if (this.$injector.has('$state')) {\r\n                var $state = this.$injector.get('$state');\r\n                $state['go'](item.state, item.stateParams);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (item.event) {\r\n            this.$rootScope.$broadcast(item.event);\r\n        } else {\r\n            // Otherwise raise notification\r\n            this.$rootScope.$broadcast('pipShortcutKeypress', item.shortcut);\r\n        }\r\n    }\r\n\r\n    private addShortcuts(collection: ShortcutItem[]): void {\r\n        let generalOptions: ShortcutOptions = this.config.defaultOptions ? this.config.defaultOptions : <ShortcutOptions>{};\r\n        \r\n        _.each(collection, (k) => {\r\n            let option: ShortcutOptions = k.options ? k.options : generalOptions;\r\n            let target: any;\r\n\r\n            target = k.target ? k.target : k.targetId;\r\n            option.Target = target;\r\n            // Registration of keyboard shortcut\r\n            this.pipShortcutBinding.add(k.shortcut, (e?: any) => {\r\n                this.keypressShortcut(k, e);        \r\n            }, option);              \r\n        });\r\n    }\r\n\r\n    // Describe public functions \r\n    public get config(): ShortcutsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get defaultOptions(): ShortcutOptions {\r\n        return this._config.defaultOptions;\r\n    }\r\n\r\n    public set defaultOptions(value: ShortcutOptions) {\r\n        this._config.defaultOptions = value || null;\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get globalShortcuts(): ShortcutItem[] {\r\n        return this._config.globalShortcuts;\r\n    }\r\n\r\n    public set globalShortcuts(value: ShortcutItem[]) {\r\n        this._config.globalShortcuts = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get localShortcuts(): ShortcutItem[] {\r\n        return this._config.localShortcuts;\r\n    }\r\n\r\n    public set localShortcuts(value: ShortcutItem[]) {\r\n        this._config.localShortcuts = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n}\r\n\r\nclass ShortcutsProvider implements IShortcutsProvider {\r\n    private _config: ShortcutsConfig = new ShortcutsConfig();\r\n    private _service: ShortcutsService;\r\n\r\n    public get config(): ShortcutsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: ShortcutsConfig) {\r\n        this._config = value || new ShortcutsConfig();\r\n    }\r\n\r\n    public get defaultOptions(): ShortcutOptions {\r\n        return this._config.defaultOptions;\r\n    }\r\n\r\n    public set defaultOptions(value: ShortcutOptions) {\r\n        this._config.defaultOptions = value || null;\r\n    }\r\n\r\n    public get globalShortcuts(): ShortcutItem[] {\r\n        return this._config.globalShortcuts;\r\n    }\r\n\r\n    public set globalShortcuts(value: ShortcutItem[]) {\r\n        this._config.globalShortcuts = value || [];\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService, \r\n        $window: ng.IWindowService, \r\n        $location: ng.ILocationService, \r\n        $injector: ng.auto.IInjectorService,\r\n        pipShortcutBinding: IShortcutBindingService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new ShortcutsService(this._config, $rootScope, $window, $location, $injector, pipShortcutBinding);\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipShortcuts')\r\n    .provider('pipShortcuts', ShortcutsProvider);\r\n\r\n","angular.module('pipShortcuts', ['ngMaterial', 'ui.router']);\r\n\r\nimport './ShortcutBindingService';\r\nimport './ShortcutsService';\r\nimport './ShortcutDirective';\r\n\r\nexport * from './IShortcutsService';\r\nexport * from './IShortcutBindingService';\r\nexport * from './ShortcutsService';\r\nexport * from './ShortcutBindingService';","{\r\n    interface UnsavedChangesScope extends ng.IScope {\r\n        unsavedChangesAvailable: Function;\r\n        unsavedChangesMessage: string;\r\n        cancelLeave: Function;\r\n        afterLeave: Function;\r\n    }\r\n\r\n    class UnsavedChangesLink {\r\n        constructor(\r\n            $scope: UnsavedChangesScope,\r\n            $window: ng.IWindowService\r\n        ) {\r\n            $window.onbeforeunload = () => {\r\n                if ($scope.unsavedChangesAvailable()) {\r\n                    return $scope.unsavedChangesMessage;\r\n                }\r\n            };\r\n\r\n            const unbindFunc = $scope.$on('$stateChangeStart', (event) => {\r\n                if ($scope.unsavedChangesAvailable() && !$window.confirm($scope.unsavedChangesMessage)) {\r\n                    _.isFunction($scope.cancelLeave) && $scope.cancelLeave();\r\n                    event.preventDefault();\r\n                } else {\r\n                    _.isFunction($scope.afterLeave) && $scope.afterLeave();\r\n                }\r\n            });\r\n\r\n            $scope.$on('$destroy', () => {\r\n                $window.onbeforeunload = null;\r\n                unbindFunc();\r\n            });\r\n        }\r\n    }\r\n\r\n    const UnsavedChanges = function ($window: ng.IWindowService) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                unsavedChangesAvailable: '&pipUnsavedChangesAvailable',\r\n                unsavedChangesMessage: '@pipUnsavedChangesMessage',\r\n                afterLeave: '&pipUnsavedChangesAfterLeave',\r\n                cancelLeave: '&pipUnsavedChangesCancelLeave'\r\n            },\r\n            link: function ($scope: UnsavedChangesScope) {\r\n                new UnsavedChangesLink($scope, $window);\r\n            }\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module(\"pipUnsavedChanges\", [])\r\n        .directive(\"pipUnsavedChanges\", UnsavedChanges);\r\n}","{\r\n    interface IColorPickerBindings {\r\n        [key: string]: any;\r\n\r\n        ngDisabled: any;\r\n        colors: any;\r\n        currentColor: any;\r\n        colorChange: any;\r\n    }\r\n\r\n    interface IColorPickerAttributes extends ng.IAttributes {\r\n        class: string;\r\n    }\r\n\r\n    const ColorPickerBindings: IColorPickerBindings = {\r\n        ngDisabled: '<?ngDisabled',\r\n        colors: '<pipColors',\r\n        currentColor: '=ngModel',\r\n        colorChange: '&?ngChange'\r\n    }\r\n\r\n    class ColorPickerChanges implements ng.IOnChangesObject, IColorPickerBindings {\r\n        [key: string]: ng.IChangesObject < any > ;\r\n\r\n        colorChange: ng.IChangesObject < () => ng.IPromise < any >> ;\r\n        currentColor: any;\r\n\r\n        ngDisabled: ng.IChangesObject < boolean > ;\r\n        colors: ng.IChangesObject < string[] > ;\r\n    }\r\n\r\n    const DEFAULT_COLORS = ['purple', 'lightgreen', 'green', 'darkred', 'pink', 'yellow', 'cyan'];\r\n\r\n    class ColorPickerController implements IColorPickerBindings {\r\n        public class: string;\r\n        public colors: string[];\r\n        public currentColor: string;\r\n        public currentColorIndex: number;\r\n        public ngDisabled: boolean;\r\n        public colorChange: Function;\r\n\r\n        constructor(\r\n            private $scope: ng.IScope,\r\n            private $element: JQuery,\r\n            $attrs: IColorPickerAttributes,\r\n            private $timeout: ng.ITimeoutService\r\n        ) { \r\n            this.class = $attrs.class || ''; \r\n        }\r\n\r\n        public $onChanges(changes: ColorPickerChanges) {\r\n            this.colors = changes.colors && _.isArray(changes.colors.currentValue) && changes.colors.currentValue.length !== 0 ?\r\n                changes.colors.currentValue : DEFAULT_COLORS;\r\n            this.currentColor = this.currentColor || this.colors[0];\r\n            this.currentColorIndex = this.colors.indexOf(this.currentColor);\r\n\r\n            this.ngDisabled = changes.ngDisabled.currentValue;\r\n        }\r\n\r\n        public selectColor(index: number) {\r\n            if (this.ngDisabled) {\r\n                return;\r\n            }\r\n            this.currentColorIndex = index;\r\n            this.currentColor = this.colors[this.currentColorIndex];\r\n            this.$timeout(() => {\r\n                this.$scope.$apply();\r\n            });\r\n\r\n            if (this.colorChange) {\r\n                this.colorChange();\r\n            }\r\n        };\r\n\r\n        public enterSpacePress(event): void {\r\n            this.selectColor(event.index);\r\n        };\r\n\r\n    }\r\n\r\n    const pipColorPicker: ng.IComponentOptions = {\r\n        bindings: ColorPickerBindings,\r\n        templateUrl: 'color_picker/ColorPicker.html',\r\n        controller: ColorPickerController\r\n    }\r\n\r\n    angular\r\n        .module('pipColorPicker', ['pipControls.Templates'])\r\n        .component('pipColorPicker', pipColorPicker);\r\n\r\n}","import { IImageSliderService } from './IImageSliderService';\r\n\r\n{\r\n    class pipImageSliderController implements ng.IController {\r\n        private _blocks: any[];\r\n        private _index: number = 0;\r\n        private _newIndex: number;\r\n        private _direction: string;\r\n        private _type: string;\r\n        private DEFAULT_INTERVAL:number = 4500;\r\n        private _interval: number | string;\r\n        private _timePromises;\r\n        private _throttled: Function;\r\n\r\n        public swipeStart: number = 0;\r\n        public sliderIndex: number;\r\n        public slideTo: Function;\r\n        public type: Function;\r\n        public interval: Function;\r\n\r\n        constructor(\r\n            private $scope: ng.IScope,\r\n            private $element: JQuery,\r\n            private $attrs,\r\n            private $parse: ng.IParseService,\r\n            private $timeout: angular.ITimeoutService,\r\n            private $interval: angular.IIntervalService,\r\n            private pipImageSlider: IImageSliderService\r\n        ) {\r\n\r\n            //this.sliderIndex = $scope['vm']['sliderIndex'];\r\n            this._type = this.type();\r\n            this._interval = this.interval();\r\n            this.slideTo = this.slideToPrivate;\r\n\r\n            $element.addClass('pip-image-slider');\r\n            $element.addClass('pip-animation-' + this._type);\r\n\r\n            this.setIndex();\r\n\r\n            $timeout(() => {\r\n                this._blocks = <any>$element.find('.pip-animation-block');\r\n                if (this._blocks.length > 0) {\r\n                    $(this._blocks[0]).addClass('pip-show');\r\n                }\r\n            });\r\n\r\n            this.startInterval();\r\n\r\n            this._throttled = _.throttle(() => {\r\n                pipImageSlider.toBlock(this._type, this._blocks, this._index, this._newIndex, this._direction);\r\n                this._index = this._newIndex;\r\n                this.setIndex();\r\n            }, 700);\r\n\r\n            if ($attrs.id) {\r\n                pipImageSlider.registerSlider($attrs.id, $scope)\r\n            }\r\n\r\n            $scope.$on('$destroy', () => {\r\n                this.stopInterval();\r\n                pipImageSlider.removeSlider($attrs.id);\r\n            });\r\n\r\n        }\r\n\r\n        public nextBlock() {\r\n            this.restartInterval();\r\n            this._newIndex = this._index + 1 === this._blocks.length ? 0 : this._index + 1;\r\n            this._direction = 'next';\r\n            this._throttled();\r\n        }\r\n\r\n        public prevBlock() {\r\n            this.restartInterval();\r\n            this._newIndex = this._index - 1 < 0 ? this._blocks.length - 1 : this._index - 1;\r\n            this._direction = 'prev';\r\n            this._throttled();\r\n        }\r\n\r\n        private slideToPrivate(nextIndex: number) {\r\n            if (nextIndex === this._index || nextIndex > this._blocks.length - 1) {\r\n                return;\r\n            }\r\n\r\n            this.restartInterval();\r\n            this._newIndex = nextIndex;\r\n            this._direction = nextIndex > this._index ? 'next' : 'prev';\r\n            this._throttled();\r\n        }\r\n\r\n        private setIndex() {\r\n            if (this.$attrs.pipImageIndex) this.sliderIndex = this._index;\r\n        }\r\n\r\n        private startInterval() {\r\n            this._timePromises = this.$interval(() => {\r\n                this._newIndex = this._index + 1 === this._blocks.length ? 0 : this._index + 1;\r\n                this._direction = 'next';\r\n                this._throttled();\r\n            }, Number(this._interval || this.DEFAULT_INTERVAL));\r\n        }\r\n\r\n        private stopInterval() {\r\n            this.$interval.cancel(this._timePromises);\r\n        }\r\n\r\n        private restartInterval() {\r\n            this.stopInterval();\r\n            this.startInterval();\r\n        }\r\n    }\r\n\r\n    const ImageSlider = function(): ng.IDirective {\r\n        return {\r\n            scope: {\r\n                sliderIndex: '=pipImageIndex',\r\n                type: '&pipAnimationType',\r\n                interval: '&pipAnimationInterval'\r\n            },\r\n            bindToController: true,\r\n            controller: pipImageSliderController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n    angular.module('pipImageSlider')\r\n        .directive('pipImageSlider', ImageSlider);\r\n}","import { IImageSliderService } from './IImageSliderService';\r\n\r\n{\r\n    class ImageSliderService implements IImageSliderService {\r\n        private ANIMATION_DURATION: number = 550;\r\n        private _sliders: Object = {};\r\n\r\n        constructor(\r\n            private $timeout: angular.ITimeoutService\r\n        ) {}\r\n\r\n        public registerSlider(sliderId: string, sliderScope: ng.IScope): void {\r\n            this._sliders[sliderId] = sliderScope;\r\n        }\r\n\r\n        public removeSlider(sliderId: string): void {\r\n            delete this._sliders[sliderId];\r\n        }\r\n\r\n        public getSliderScope(sliderId: string) {\r\n            return this._sliders[sliderId];\r\n        }\r\n\r\n        public nextCarousel(nextBlock: JQuery, prevBlock: JQuery): void {\r\n            nextBlock.addClass('pip-next');\r\n\r\n            this.$timeout(() => {\r\n                nextBlock.addClass('animated').addClass('pip-show').removeClass('pip-next');\r\n                prevBlock.addClass('animated').removeClass('pip-show');\r\n            }, 100);\r\n        }\r\n\r\n        public prevCarousel(nextBlock: JQuery, prevBlock: JQuery): void {\r\n            this.$timeout(() => {\r\n                nextBlock.addClass('animated').addClass('pip-show');\r\n                prevBlock.addClass('animated').addClass('pip-next').removeClass('pip-show');\r\n            }, 100);\r\n        }\r\n\r\n        public toBlock(type: string, blocks: any[], oldIndex: number, nextIndex: number, direction: string): void {\r\n            const prevBlock = $(blocks[oldIndex]),\r\n                blockIndex = nextIndex,\r\n                nextBlock = $(blocks[blockIndex]);\r\n\r\n            if (type === 'carousel') {\r\n                $(blocks).removeClass('pip-next').removeClass('pip-prev').removeClass('animated');\r\n\r\n                if (direction && (direction === 'prev' || direction === 'next')) {\r\n                    if (direction === 'prev') {\r\n                        this.prevCarousel(nextBlock, prevBlock);\r\n                    } else {\r\n                        this.nextCarousel(nextBlock, prevBlock);\r\n                    }\r\n                } else {\r\n                    if (nextIndex && nextIndex < oldIndex) {\r\n                        this.prevCarousel(nextBlock, prevBlock);\r\n                    } else {\r\n                        this.nextCarousel(nextBlock, prevBlock);\r\n                    }\r\n                }\r\n            } else {\r\n                prevBlock.addClass('animated').removeClass('pip-show');\r\n                nextBlock.addClass('animated').addClass('pip-show');\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipImageSlider.Service', [])\r\n        .service('pipImageSlider', ImageSliderService);\r\n}","import { IImageSliderService } from './IImageSliderService';\r\n\r\n{\r\n    class SliderButtonController implements ng.IController {\r\n        public direction: Function;\r\n        public sliderId: Function;\r\n\r\n        constructor(\r\n            $element: JQuery,\r\n            pipImageSlider: IImageSliderService\r\n        ) {\r\n            $element.on('click', () => {\r\n                if (!this.sliderId() || !this.direction()) {\r\n                    return;\r\n                }\r\n\r\n                pipImageSlider.getSliderScope(this.sliderId()).vm[this.direction() + 'Block']();\r\n            });\r\n        }\r\n    }\r\n\r\n    const SliderButton = function (): ng.IDirective {\r\n        return {\r\n            scope: {\r\n                direction: '&pipButtonType',\r\n                sliderId: '&pipSliderId'\r\n            },\r\n            controllerAs: '$ctlr',\r\n            bindToController: true,\r\n            controller: SliderButtonController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipSliderButton', [])\r\n        .directive('pipSliderButton', SliderButton);\r\n\r\n}","import { IImageSliderService } from './IImageSliderService';\r\n\r\n{\r\n    class SliderIndicatorController implements ng.IController {\r\n        public slideTo: Function;\r\n        public sliderId: Function;\r\n\r\n        constructor(\r\n            $element: JQuery,\r\n            pipImageSlider: IImageSliderService\r\n        ) {\r\n            $element.css('cursor', 'pointer');\r\n            $element.on('click', () => {\r\n                if (!this.sliderId() || this.slideTo() === undefined) {\r\n                    return;\r\n                }\r\n\r\n                pipImageSlider.getSliderScope(this.sliderId()).vm.slideTo(this.slideTo());\r\n            });\r\n        }\r\n    }\r\n\r\n    const SliderIndicator = function (): ng.IDirective {\r\n        return {\r\n            scope: {\r\n                slideTo: '&pipSlideTo',\r\n                sliderId: '&pipSliderId'\r\n            },\r\n            controllerAs: '$ctlr',\r\n            bindToController: true,\r\n            controller: SliderIndicatorController\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipSliderIndicator', [])\r\n        .directive('pipSliderIndicator', SliderIndicator);\r\n}","angular\r\n    .module('pipImageSlider', ['pipSliderButton', 'pipSliderIndicator', 'pipImageSlider.Service']);\r\n\r\nimport './ImageSlider';\r\nimport './ImageSliderService';\r\nimport './SliderButton';\r\nimport './SliderIndicator';\r\n\r\nexport * from './IImageSliderService';","declare var marked: any;\r\n\r\n{\r\n  const ConfigTranslations = ($injector: ng.auto.IInjectorService) => {\r\n        const pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            (<any>pipTranslate).setTranslations('en', {\r\n                'MARKDOWN_ATTACHMENTS': 'Attachments:',\r\n                'checklist': 'Checklist',\r\n                'documents': 'Documents',\r\n                'pictures': 'Pictures',\r\n                'location': 'Location',\r\n                'time': 'Time'\r\n            });\r\n            (<any>pipTranslate).setTranslations('ru', {\r\n                'MARKDOWN_ATTACHMENTS': 'Вложения:',\r\n                'checklist': 'Список',\r\n                'documents': 'Документы',\r\n                'pictures': 'Изображения',\r\n                'location': 'Местонахождение',\r\n                'time': 'Время'\r\n            });\r\n        }\r\n    }\r\n\r\n    interface IMarkdownBindings {\r\n        [key: string]: any;\r\n\r\n        text: any;\r\n        isList: any;\r\n        clamp: any;\r\n        rebind: any;\r\n    }\r\n\r\n    const MarkdownBindings: IMarkdownBindings = {\r\n        text: '<pipText',\r\n        isList: '<?pipList',\r\n        clamp: '<?pipLineCount',\r\n        rebind: '<?pipRebind'\r\n    }\r\n\r\n    class MarkdownChanges implements ng.IOnChangesObject, IMarkdownBindings {\r\n        [key: string]: ng.IChangesObject < any > ;\r\n\r\n        text: ng.IChangesObject < string > ;\r\n        isList: ng.IChangesObject < boolean > ;\r\n        clamp: ng.IChangesObject < number | string > ;\r\n        rebind: ng.IChangesObject < boolean > ;\r\n    }\r\n\r\n    class MarkdownController implements IMarkdownBindings, ng.IController {\r\n        private _pipTranslate;\r\n\r\n        public text: string;\r\n        public isList: boolean;\r\n        public clamp: string | number;\r\n        public rebind: boolean;\r\n\r\n        constructor(\r\n            private $scope: angular.IScope,\r\n            private $element: JQuery,\r\n            $injector: ng.auto.IInjectorService\r\n        ) {\r\n            this._pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        }\r\n\r\n        public $postLink() {\r\n            // Fill the text\r\n            this.bindText(this.text);\r\n\r\n            this.$scope.$on('pipWindowResized', function () {\r\n                if (this.bindText) this.bindText(this._text(this._$scope));\r\n            });\r\n\r\n            // Add class\r\n            this.$element.addClass('pip-markdown');\r\n\r\n        }\r\n\r\n        public $onChanges(changes: MarkdownChanges) {\r\n            const newText = changes.text.currentValue;\r\n\r\n            if (this.rebind) {\r\n                this.text = newText;\r\n                this.bindText(this.text);\r\n            }\r\n        }\r\n\r\n        private describeAttachments(array) {\r\n            var attachString = '',\r\n                attachTypes = [];\r\n\r\n            _.each(array, function (attach) {\r\n                if (attach.type && attach.type !== 'text') {\r\n                    if (attachString.length === 0 && this._pipTranslate) {\r\n                        attachString = this._pipTranslate.translate('MARKDOWN_ATTACHMENTS');\r\n                    }\r\n\r\n                    if (attachTypes.indexOf(attach.type) < 0) {\r\n                        attachTypes.push(attach.type);\r\n                        attachString += attachTypes.length > 1 ? ', ' : ' ';\r\n                        if (this._pipTranslate)\r\n                            attachString += this._pipTranslate.translate(attach.type);\r\n                    }\r\n                }\r\n            });\r\n\r\n            return attachString;\r\n        }\r\n\r\n        private bindText(value) {\r\n            let textString, isClamped, height, options, obj;\r\n\r\n            if (_.isArray(value)) {\r\n                obj = _.find(value, function (item: any) {\r\n                    return item.type === 'text' && item.text;\r\n                });\r\n\r\n                textString = obj ? obj.text : this.describeAttachments(value);\r\n            } else {\r\n                textString = value;\r\n            }\r\n\r\n            isClamped = this.clamp && _.isNumber(this.clamp);\r\n            isClamped = isClamped && textString && textString.length > 0;\r\n            options = {\r\n                gfm: true,\r\n                tables: true,\r\n                breaks: true,\r\n                sanitize: true,\r\n                pedantic: true,\r\n                smartLists: true,\r\n                smartypents: false\r\n            };\r\n            textString = marked(textString || '', options);\r\n            if (isClamped) {\r\n                height = 1.5 * Number(this.clamp);\r\n            }\r\n            // Assign value as HTML\r\n            this.$element.html('<div' + (isClamped ? this.isList ? 'class=\"pip-markdown-content ' +\r\n                'pip-markdown-list\" style=\"max-height: ' + height + 'em\">' :\r\n                ' class=\"pip-markdown-content\" style=\"max-height: ' + height + 'em\">' : this.isList ?\r\n                ' class=\"pip-markdown-list\">' : '>') + textString + '</div>');\r\n            this.$element.find('a').attr('target', 'blank');\r\n            if (!this.isList && isClamped) {\r\n                this.$element.append('<div class=\"pip-gradient-block\"></div>');\r\n            }\r\n        }\r\n    }\r\n    const MarkdownComponent = {\r\n        controller: MarkdownController,\r\n        bindings: MarkdownBindings\r\n    }\r\n\r\n    angular\r\n        .module('pipMarkdown', ['ngSanitize'])\r\n        .run(ConfigTranslations)\r\n        .component('pipMarkdown', MarkdownComponent);\r\n}","{\r\n    interface IPopoverBindings {\r\n        [key: string]: any;\r\n\r\n        params: any;\r\n    }\r\n\r\n    const PopoverBindings: IPopoverBindings = {\r\n        params: '<pipParams'\r\n    }\r\n\r\n    class PopoverController implements IPopoverBindings, ng.IController {\r\n        private backdropElement;\r\n        private content;\r\n        public params: any;\r\n\r\n        constructor(\r\n            private $scope: ng.IScope,\r\n            $rootScope: ng.IRootScopeService,\r\n            $element: JQuery,\r\n            private $timeout: ng.ITimeoutService,\r\n            private $compile: ng.ICompileService,\r\n            private $templateRequest: ng.ITemplateRequestService\r\n        ) {\r\n            this.backdropElement = $('.pip-popover-backdrop');\r\n            this.backdropElement.on('click keydown scroll', () => {\r\n                this.backdropClick();\r\n            });\r\n            this.backdropElement.addClass(this.params.responsive !== false ? 'pip-responsive' : '');\r\n\r\n            $timeout(() => {\r\n                this.position();\r\n                angular.extend($scope, this.params.locals);\r\n\r\n                if (this.params.template) {\r\n                    this.content = $compile(this.params.template)($scope);\r\n                    $element.find('.pip-popover').append(this.content);\r\n\r\n                    this.init();\r\n                } else {\r\n                    this.$templateRequest(this.params.templateUrl, false).then((html) => {\r\n                        this.content = $compile(html)($scope);\r\n                        $element.find('.pip-popover').append(this.content);\r\n\r\n                        this.init();\r\n                    });\r\n                }\r\n            });\r\n\r\n            $timeout(() => {\r\n                this.calcHeight();\r\n            }, 200);\r\n            $rootScope.$on('pipPopoverResize', () => {\r\n                this.onResize()\r\n            });\r\n            $(window).resize(() => {\r\n                this.onResize()\r\n            });\r\n        }\r\n\r\n        public backdropClick() {\r\n            if (this.params.cancelCallback) {\r\n                this.params.cancelCallback();\r\n            }\r\n            this.closePopover();\r\n        }\r\n\r\n        public closePopover() {\r\n            this.backdropElement.removeClass('opened');\r\n            this.$timeout(() => {\r\n                this.backdropElement.remove();\r\n            }, 100);\r\n        }\r\n\r\n        public onPopoverClick(event) {\r\n            event.stopPropagation();\r\n        }\r\n\r\n        private init() {\r\n            this.backdropElement.addClass('opened');\r\n            $('.pip-popover-backdrop').focus();\r\n            if (this.params.timeout) {\r\n                this.$timeout(function () {\r\n                    this.closePopover();\r\n                }, this.params.timeout);\r\n            }\r\n        }\r\n\r\n        private position() {\r\n            if (this.params.element) {\r\n                let element = $(this.params.element),\r\n                    pos = element.offset(),\r\n                    width = element.width(),\r\n                    height = element.height(),\r\n                    docWidth = $(document).width(),\r\n                    docHeight = $(document).height(),\r\n                    popover = this.backdropElement.find('.pip-popover');\r\n\r\n                if (pos) {\r\n                    popover\r\n                        .css('max-width', docWidth - (docWidth - pos.left))\r\n                        .css('max-height', docHeight - (pos.top + height) - 32, 0)\r\n                        .css('left', pos.left - popover.width() + width / 2)\r\n                        .css('top', pos.top + height + 16);\r\n                }\r\n            }\r\n        }\r\n\r\n        private onResize() {\r\n            this.backdropElement.find('.pip-popover').find('.pip-content').css('max-height', '100%');\r\n            this.position();\r\n            this.calcHeight();\r\n        }\r\n\r\n        private calcHeight() {\r\n            if (this.params.calcHeight === false) {\r\n                return;\r\n            }\r\n            const popover = this.backdropElement.find('.pip-popover'),\r\n                title = popover.find('.pip-title'),\r\n                footer = popover.find('.pip-footer'),\r\n                content = popover.find('.pip-content'),\r\n                contentHeight = popover.height() - title.outerHeight(true) - footer.outerHeight(true);\r\n            content.css('max-height', Math.max(contentHeight, 0) + 'px').css('box-sizing', 'border-box');\r\n        }\r\n    }\r\n\r\n    const Popover: ng.IComponentOptions = {\r\n        bindings: PopoverBindings,\r\n        templateUrl: 'popover/Popover.html',\r\n        controller: PopoverController\r\n    }\r\n\r\n    angular\r\n        .module('pipPopover')\r\n        .component('pipPopover', Popover);\r\n}","import { IPopoverService } from './IPopoverService';\r\n\r\n{\r\n    interface PopoverTemplateScope extends ng.IScope {\r\n        params ? : any;\r\n        locals ? : any;\r\n    }\r\n\r\n    class PopoverService implements IPopoverService {\r\n        private popoverTemplate: string;\r\n\r\n        constructor(\r\n            private $compile: ng.ICompileService,\r\n            private $rootScope: ng.IRootScopeService,\r\n            private $timeout: ng.ITimeoutService\r\n        ) {\r\n            this.popoverTemplate = \"<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller'\" +\r\n                \" tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>\";\r\n        }\r\n\r\n        public show(p: Object) {\r\n            let element: JQuery, scope: PopoverTemplateScope, params: any, content: ng.IRootElementService;\r\n\r\n            element = $('body');\r\n            if (element.find('md-backdrop').length > 0) {\r\n                return;\r\n            }\r\n            this.hide();\r\n            scope = this.$rootScope.$new();\r\n            params = p && _.isObject(p) ? p : {};\r\n            scope.params = params;\r\n            scope.locals = params.locals;\r\n            content = this.$compile(this.popoverTemplate)(scope);\r\n            element.append(content);\r\n        }\r\n\r\n        public hide() {\r\n            const backdropElement = $('.pip-popover-backdrop');\r\n            backdropElement.removeClass('opened');\r\n            this.$timeout(() => {\r\n                backdropElement.remove();\r\n            }, 100);\r\n        }\r\n\r\n        public resize() {\r\n            this.$rootScope.$broadcast('pipPopoverResize');\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipPopover.Service', [])\r\n        .service('pipPopoverService', PopoverService);\r\n}","angular.module('pipPopover', ['pipPopover.Service']);\r\n\r\nimport './Popover';\r\nimport './PopoverService';\r\n\r\nexport * from './IPopoverService';","{\r\n    interface IRoutingBindings {\r\n        [key: string]: any;\r\n\r\n        logoUrl: any;\r\n        showProgress: any;\r\n    }\r\n\r\n    const RoutingBindings: IRoutingBindings = {\r\n        showProgress: '&',\r\n        logoUrl: '@'\r\n    }\r\n\r\n    class RoutingController implements ng.IController, IRoutingBindings {\r\n        private _image: any;\r\n\r\n        public logoUrl: string;\r\n        public showProgress: Function;\r\n\r\n        constructor(\r\n            $scope: ng.IScope,\r\n            private $element: JQuery\r\n        ) { }\r\n\r\n        public $postLink() {\r\n            this._image = this.$element.find('img');\r\n            this.loadProgressImage();\r\n        }\r\n\r\n        public loadProgressImage() {\r\n            if (this.logoUrl) {\r\n                this._image.attr('src', this.logoUrl);\r\n            }\r\n        }\r\n    }\r\n\r\n    const RoutingProgress: ng.IComponentOptions = {\r\n        bindings: RoutingBindings,\r\n        templateUrl: 'progress/RoutingProgress.html',\r\n        controller: RoutingController\r\n    }\r\n\r\n    angular\r\n        .module('pipRoutingProgress', ['ngMaterial'])\r\n        .component('pipRoutingProgress', RoutingProgress);\r\n}","export class Toast {\r\n    type: string;\r\n    id: string;\r\n    error: any;\r\n    message: string;\r\n    actions: string[];\r\n    duration: number;\r\n    successCallback: Function;\r\n    cancelCallback: Function\r\n}\r\n","import { Toast } from './Toast';\r\nimport { IToastService } from './IToastService';\r\n\r\n{\r\n    class ToastController {\r\n        private _pipErrorDetailsDialog;\r\n\r\n        public message: string;\r\n        public actions: string[];\r\n        public actionLenght: number;\r\n        public showDetails: boolean;\r\n\r\n        constructor(\r\n            private $mdToast: angular.material.IToastService,\r\n            public toast: Toast,\r\n            $injector: ng.auto.IInjectorService\r\n        ) {\r\n            this._pipErrorDetailsDialog = $injector.has('pipErrorDetailsDialog') ?\r\n                $injector.get('pipErrorDetailsDialog') : null;\r\n            this.message = toast.message;\r\n            this.actions = toast.actions;\r\n\r\n            if (toast.actions.length === 0) {\r\n                this.actionLenght = 0;\r\n            } else {\r\n                this.actionLenght = toast.actions.length === 1 ? toast.actions[0].toString().length : null;\r\n            }\r\n\r\n            this.showDetails = this._pipErrorDetailsDialog != null;\r\n        }\r\n\r\n        public onDetails(): void {\r\n            this.$mdToast.hide();\r\n            if (this._pipErrorDetailsDialog) {\r\n                this._pipErrorDetailsDialog.show({\r\n                        error: this.toast.error,\r\n                        ok: 'Ok'\r\n                    },\r\n                    angular.noop,\r\n                    angular.noop\r\n                );\r\n            }\r\n        }\r\n\r\n        public onAction(action): void {\r\n            this.$mdToast.hide({\r\n                action: action,\r\n                id: this.toast.id,\r\n                message: this.message\r\n            });\r\n        }\r\n    }\r\n\r\n    class ToastService implements IToastService {\r\n        private SHOW_TIMEOUT: number = 20000;\r\n        private SHOW_TIMEOUT_NOTIFICATIONS: number = 20000;\r\n        private toasts: Toast[] = [];\r\n        private currentToast: any;\r\n        private sounds: any = {};\r\n\r\n        constructor(\r\n            $rootScope: ng.IRootScopeService,\r\n            private $mdToast: angular.material.IToastService\r\n        ) {\r\n            $rootScope.$on('$stateChangeSuccess', () => { this.onStateChangeSuccess() });\r\n            $rootScope.$on('pipSessionClosed', () => { this.onClearToasts() });\r\n            $rootScope.$on('pipIdentityChanged', () => { this.onClearToasts() });\r\n        }\r\n\r\n        public showNextToast(): void {\r\n            let toast: Toast;\r\n\r\n            if (this.toasts.length > 0) {\r\n                toast = this.toasts[0];\r\n                this.toasts.splice(0, 1);\r\n                this.showToast(toast);\r\n            }\r\n        }\r\n\r\n        // Show toast\r\n        public showToast(toast: Toast): void {\r\n            this.currentToast = toast;\r\n\r\n            this.$mdToast.show({\r\n                    templateUrl: 'toast/Toast.html',\r\n                    hideDelay: toast.duration || this.SHOW_TIMEOUT,\r\n                    position: 'bottom left',\r\n                    controller: ToastController,\r\n                    controllerAs: 'vm',\r\n                    locals: {\r\n                        toast: this.currentToast,\r\n                        sounds: this.sounds\r\n                    }\r\n                })\r\n                .then(\r\n                    (action: string) => {\r\n                        this.showToastOkResult(action);\r\n                    },\r\n                    (action: string) => {\r\n                        this.showToastCancelResult(action);\r\n                    }\r\n                );\r\n        }\r\n\r\n        private showToastCancelResult(action: string): void {\r\n            if (this.currentToast.cancelCallback) {\r\n                this.currentToast.cancelCallback(action);\r\n            }\r\n            this.currentToast = null;\r\n            this.showNextToast();\r\n        }\r\n\r\n        private showToastOkResult(action: string): void {\r\n            if (this.currentToast.successCallback) {\r\n                this.currentToast.successCallback(action);\r\n            }\r\n            this.currentToast = null;\r\n            this.showNextToast();\r\n        }\r\n\r\n        public addToast(toast): void {\r\n            if (this.currentToast && toast.type !== 'error') {\r\n                this.toasts.push(toast);\r\n            } else {\r\n                this.showToast(toast);\r\n            }\r\n        }\r\n\r\n        public removeToasts(type: string): void {\r\n            const result: any[] = [];\r\n            _.each(this.toasts, (toast) => {\r\n                if (!toast.type || toast.type !== type) {\r\n                    result.push(toast);\r\n                }\r\n            });\r\n            this.toasts = _.cloneDeep(result);\r\n        }\r\n\r\n        public removeToastsById(id: string): void {\r\n            _.remove(this.toasts, {\r\n                id: id\r\n            });\r\n        }\r\n\r\n        public getToastById(id: string): Toast {\r\n            return _.find(this.toasts, {\r\n                id: id\r\n            });\r\n        }\r\n\r\n        public onStateChangeSuccess() {}\r\n\r\n        public onClearToasts(): void {\r\n            this.clearToasts(null);\r\n        }\r\n\r\n        public showNotification(message: string, actions: string[], successCallback, cancelCallback, id: string) {\r\n            this.addToast({\r\n                id: id || null,\r\n                type: 'notification',\r\n                message: message,\r\n                actions: actions || ['ok'],\r\n                successCallback: successCallback,\r\n                cancelCallback: cancelCallback,\r\n                duration: this.SHOW_TIMEOUT_NOTIFICATIONS\r\n            });\r\n        }\r\n\r\n        public showMessage(message: string, successCallback, cancelCallback, id ? : string) {\r\n            this.addToast({\r\n                id: id || null,\r\n                type: 'message',\r\n                message: message,\r\n                actions: ['ok'],\r\n                successCallback: successCallback,\r\n                cancelCallback: cancelCallback\r\n            });\r\n        }\r\n\r\n        public showError(message: string, successCallback, cancelCallback, id: string, error: any) {\r\n            this.addToast({\r\n                id: id || null,\r\n                error: error,\r\n                type: 'error',\r\n                message: message || 'Unknown error.',\r\n                actions: ['ok'],\r\n                successCallback: successCallback,\r\n                cancelCallback: cancelCallback\r\n            });\r\n        }\r\n\r\n        public hideAllToasts(): void {\r\n            this.$mdToast.cancel();\r\n            this.toasts = [];\r\n        }\r\n\r\n        public clearToasts(type ? : string) {\r\n            if (type) {\r\n                // pipAssert.isString(type, 'pipToasts.clearToasts: type should be a string');\r\n                this.removeToasts(type);\r\n            } else {\r\n                this.$mdToast.cancel();\r\n                this.toasts = [];\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    angular\r\n        .module('pipToasts')\r\n        .service('pipToasts', ToastService);\r\n}","angular.module('pipToasts', ['ngMaterial', 'pipControls.Translate'])\r\n\r\nimport './ToastService';\r\nimport './Toast';\r\n\r\nexport * from './IToastService';","(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('color_picker/colorPicker.html',\n    '<ul class=\"pip-color-picker {{$ctrl.class}}\" pip-selected=\"$ctrl.currentColorIndex\" pip-enter-space-press=\"$ctrl.enterSpacePress($event)\"><li tabindex=\"-1\" ng-repeat=\"color in $ctrl.colors track by color\"><md-button tabindex=\"-1\" class=\"md-icon-button pip-selectable\" ng-click=\"$ctrl.selectColor($index)\" aria-label=\"color\" ng-disabled=\"$ctrl.ngDisabled\"><md-icon ng-style=\"{\\'color\\': color}\" md-svg-icon=\"icons:{{ color == $ctrl.currentColor ? \\'circle\\' : \\'radio-off\\' }}\"></md-icon></md-button></li></ul>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('progress/routingProgress.html',\n    '<div class=\"layout-column layout-align-center-center\" ng-show=\"$ctrl.showProgress()\"><div class=\"loader\"><svg class=\"circular\" viewbox=\"25 25 50 50\"><circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"></circle></svg></div><img src=\"\" height=\"40\" width=\"40\" class=\"pip-img\"><md-progress-circular md-diameter=\"96\" class=\"fix-ie\"></md-progress-circular></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('popover/popover.html',\n    '<div class=\"pip-popover\" ng-click=\"$ctrl.params.onPopoverClick($event)\"></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toast/toast.html',\n    '<md-toast class=\"md-action pip-toast\" ng-class=\"{\\'pip-error\\': vm.toast.type==\\'error\\', \\'pip-column-toast\\': vm.toast.actions.length > 1 || vm.actionLenght > 4, \\'pip-no-action-toast\\': vm.actionLenght == 0}\" style=\"height:initial; max-height: initial;\"><span class=\"flex-var pip-text\" ng-bind-html=\"vm.message\"></span><div class=\"layout-row layout-align-end-start pip-actions\" ng-if=\"vm.actions.length > 0 || (vm.toast.type==\\'error\\' && vm.toast.error)\"><div class=\"flex\" ng-if=\"vm.toast.actions.length > 1\"></div><md-button class=\"flex-fixed pip-toast-button\" ng-if=\"vm.toast.type==\\'error\\' && vm.toast.error && vm.showDetails\" ng-click=\"vm.onDetails()\">Details</md-button><md-button class=\"flex-fixed pip-toast-button\" ng-click=\"vm.onAction(action)\" ng-repeat=\"action in vm.actions\" aria-label=\"{{::action| translate}}\">{{::action| translate}}</md-button></div></md-toast>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-controls-html.min.js.map\n","\r\n(() => {\r\n    interface IDateBindings {\r\n        [key: string]: any;\r\n\r\n        timeMode: any,\r\n        disabled: any,\r\n        model: any,\r\n        ngChange: any\r\n    }\r\n\r\n    const DateBindings: IDateBindings = {\r\n        timeMode: '@pipTimeMode',\r\n        disabled: '&ngDisabled',\r\n        model: '<ngModel',\r\n        ngChange: '<'\r\n    }\r\n\r\n    class DateChanges implements ng.IOnChangesObject, IDateBindings {\r\n        [key: string]: ng.IChangesObject<any>;\r\n\r\n        timeMode: ng.IChangesObject<string>;\r\n        disabled: ng.IChangesObject<() => boolean>;\r\n        model: ng.IChangesObject<Date>;\r\n        ngChange: ng.IChangesObject<(date: Date) => void>;\r\n    }\r\n\r\n\r\n    class DateController {\r\n        private value: any;\r\n        private localeDate: moment.MomentLanguageData = moment.localeData();\r\n        private momentMonths: any[];\r\n        private momentDays: any[];\r\n        private momentShortDays: any;\r\n        private momentFirstDayOfWeek: any;\r\n\r\n        public timeMode: string;\r\n        public day: number;\r\n        public month: number;\r\n        public year: number;\r\n\r\n        public model: Date;\r\n        public ngChange: (date: Date) => void;\r\n\r\n        public days: number[];\r\n        public months: any[];\r\n        public years: number[];\r\n        public disabled: () => boolean;\r\n        public disableControls: boolean;\r\n\r\n        constructor(\r\n            $injector: angular.auto.IInjectorService,\r\n            $scope: ng.IScope) {\r\n            this.momentMonths = angular.isArray(this.localeDate['_months']) ? this.localeDate['_months'] : this.localeDate['_months'].format;\r\n            this.momentDays = angular.isArray(this.localeDate['_weekdays']) ? this.localeDate['_weekdays'] : this.localeDate['_weekdays'].format;\r\n            this.momentShortDays = this.localeDate['_weekdaysMin'];\r\n            this.momentFirstDayOfWeek = this.localeDate['_week'].dow;\r\n\r\n            let value = this.model ? _.isDate(this.model) ? this.model : new Date(this.model) : null;\r\n            this.day = value ? value.getDate() : null;\r\n            this.month = value ? value.getMonth() + 1 : null;\r\n            this.year = value ? value.getFullYear() : null;\r\n\r\n            this.days = this.dayList(this.month, this.year);\r\n            this.months = this.monthList();\r\n            this.years = this.yearList();\r\n\r\n            this.disableControls = this.disabled ? this.disabled() : false;\r\n\r\n        }\r\n\r\n        public $onChanges(changes: DateChanges) {\r\n            if (changes.model && changes.model.currentValue) {\r\n                this.model = changes.model.currentValue;\r\n                this.getValue(this.model);\r\n            }\r\n        }\r\n\r\n        private dayList(month: number, year: number): number[] {\r\n            let count: number = 31, days: number[] = [];\r\n\r\n            if (month === 4 || month === 6 || month === 9 || month === 11) {\r\n                count = 30;\r\n            } else {\r\n                if (month === 2) {\r\n                    if (year) {\r\n                        // Calculate leap year (primitive)\r\n                        count = year % 4 === 0 ? 29 : 28;\r\n                    } else {\r\n                        count = 28;\r\n                    }\r\n                }\r\n            }\r\n            for (let i: number = 1; i <= count; i++) {\r\n                days.push(i);\r\n            }\r\n\r\n            return days;\r\n        }\r\n\r\n        private monthList() {\r\n            let months: any[] = [];\r\n\r\n            for (let i: number = 1; i <= 12; i++) {\r\n                months.push({\r\n                    id: i,\r\n                    name: this.momentMonths[i - 1]\r\n                });\r\n            }\r\n\r\n            return months;\r\n        }\r\n\r\n        private yearList(): number[] {\r\n            let currentYear: number = new Date().getFullYear(),\r\n                startYear: number = this.timeMode === 'future' ? currentYear : currentYear - 100,\r\n                endYear: number = this.timeMode === 'past' ? currentYear : currentYear + 100,\r\n                years = [];\r\n\r\n            if (this.timeMode === 'past') {\r\n                for (let i: number = endYear; i >= startYear; i--) {\r\n                    years.push(i);\r\n                }\r\n            } else {\r\n                for (let i: number = startYear; i <= endYear; i++) {\r\n                    years.push(i);\r\n                }\r\n            }\r\n\r\n            return years;\r\n        }\r\n\r\n        private adjustDay() {\r\n            let days = this.dayList(this.month, this.year);\r\n\r\n            if (this.days.length !== days.length) {\r\n                if (this.day > days.length) {\r\n                    this.day = days.length;\r\n                }\r\n\r\n                this.days = days;\r\n            }\r\n        }\r\n\r\n        private getValue(v: any) {\r\n            let value: Date = v ? _.isDate(v) ? v : new Date(v) : null,\r\n                day: number = value ? value.getDate() : null,\r\n                month: number = value ? value.getMonth() + 1 : null,\r\n                year: number = value ? value.getFullYear() : null;\r\n\r\n            // Update day list if month and year were changed\r\n            if (this.month !== month && this.year !== year) {\r\n                this.days = this.dayList(this.month, this.year);\r\n            }\r\n\r\n            // Assign values to scope\r\n            this.day = day;\r\n            this.month = month;\r\n            this.year = year;\r\n        }\r\n\r\n        public setValue() {\r\n            let value: Date;\r\n\r\n            if (this.day && this.month && this.year) {\r\n                value = new Date(this.year, this.month - 1, this.day, 0, 0, 0, 0);\r\n                this.model = value;\r\n                this.ngChange(this.model);\r\n            }\r\n        }\r\n\r\n        public onMonthChanged() {\r\n            this.adjustDay();\r\n            this.setValue();\r\n        }\r\n\r\n        public onYearChanged() {\r\n            this.adjustDay();\r\n            this.setValue();\r\n        }\r\n    }\r\n\r\n    const DateComponent: ng.IComponentOptions = {\r\n        bindings: DateBindings,\r\n        templateUrl: 'date/Date.html',\r\n        controller: DateController\r\n    }\r\n\r\n    angular\r\n        .module('pipDate', ['pipDates.Templates'])\r\n        .component('pipDate', DateComponent)\r\n})();\r\n\r\n","import { DateTimeConfig, IDateConvertService, IDateConvertProvider } from './IDateConvertService';\r\n\r\nclass MomentRange {\r\n    static Year: string = 'year';\r\n    static Month: string = 'month';\r\n    static Week: string = 'week';\r\n    static IsWeek: string = 'isoweek'; \r\n    static Day: string = 'day';\r\n    static All: string[] = ['year', 'month', 'week', 'isoweek', 'day'] \r\n}\r\n\r\n(() => {\r\n    class DateTimeConvert implements IDateConvertService {\r\n        private _config: DateTimeConfig;\r\n        protected _momentRanged: string[] = MomentRange.All;\r\n        protected _defaultFormat: string = 'LL'\r\n\r\n        private isUndefinedOrNull(date: any): boolean {\r\n            return angular.isUndefined(date) || date === null;\r\n        }\r\n\r\n        private getRange(date: string): string {\r\n            if (this.isUndefinedOrNull(date)) {\r\n                return MomentRange.Day;\r\n            }\r\n\r\n            let index = this._momentRanged.indexOf(date)\r\n\r\n            if (index < 0) {\r\n                return MomentRange.Day;\r\n            }\r\n            return this._momentRanged[index];\r\n        }\r\n\r\n        private getOperationRange(date: string): string {\r\n            if (this.isUndefinedOrNull(date)) {\r\n                return MomentRange.Day;\r\n            }\r\n\r\n            let range = date == MomentRange.IsWeek ? MomentRange.Week : date,\r\n                index = this._momentRanged.indexOf(range)\r\n\r\n            if (index < 0) {\r\n                return MomentRange.Day;\r\n            }\r\n            return this._momentRanged[index];\r\n\r\n        }\r\n  \r\n        private formatDay(date: any, basicFormat: string): string {\r\n            let localDate: moment.Moment,\r\n                format = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat),\r\n                formatMonthYearless = format.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '').replace(/M/g, '');\r\n\r\n            if (this.isUndefinedOrNull(date)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                localDate = moment(date).utcOffset(this._config.timeZone);\r\n            } else {\r\n                localDate = moment(date);\r\n            }\r\n\r\n            if (!localDate.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            return localDate.format(formatMonthYearless);\r\n        }\r\n\r\n        private formatMonthDay(date: any, basicFormat: string): string {\r\n            let localDate: moment.Moment,\r\n                format = basicFormat ? basicFormat : this._defaultFormat,\r\n                formatLL = moment.localeData().longDateFormat(format),\r\n                formatYearlessLL = formatLL.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '');\r\n\r\n            if (this.isUndefinedOrNull(date)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                localDate = moment(date).utcOffset(this._config.timeZone);\r\n            } else {\r\n                localDate = moment(date);\r\n            }\r\n\r\n            if (!localDate.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            return localDate.format(formatYearlessLL);\r\n        }\r\n\r\n        //  use timezone not testing\r\n        private formatRange(date1: any, date2: any, basicFormat: string): string {\r\n            let localDateStart: moment.Moment,\r\n                localDateEnd: moment.Moment,\r\n                format = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n            if (this.isUndefinedOrNull(date1)) {\r\n                localDateStart = null;\r\n            } else {\r\n                localDateStart = (this._config.timeZone != undefined && this._config.timeZone != null) ? moment(date1).utcOffset(this._config.timeZone) : moment(date1);\r\n            }\r\n            if (this.isUndefinedOrNull(date2)) {\r\n                localDateEnd = null;\r\n            } else {\r\n                localDateEnd = (this._config.timeZone != undefined && this._config.timeZone != null) ? moment(date2).utcOffset(this._config.timeZone) : moment(date2);\r\n            }\r\n\r\n            if (localDateStart === null && localDateEnd === null) return '';\r\n\r\n            if (localDateStart === null) {\r\n                return localDateEnd.format(basicFormat);\r\n            }\r\n            if (localDateEnd === null || localDateStart.isSame(localDateEnd)) {\r\n                return localDateStart.format(basicFormat);;\r\n            }\r\n\r\n            if (localDateStart.isAfter(localDateEnd)) {\r\n                // todo localization\r\n                throw new Error('Date range error. Start localDate is more than end localDate.');\r\n            }\r\n\r\n            if (localDateStart.year() == localDateEnd.year()) {\r\n                if (localDateStart.month() == localDateEnd.month()) {\r\n                    return this.formatDay(localDateStart, basicFormat) + '-' + localDateEnd.format(basicFormat);\r\n                }\r\n                return this.formatMonthDay(localDateStart, basicFormat) + '-' + localDateEnd.format(basicFormat);\r\n\r\n            }\r\n            return localDateStart.format(basicFormat) + '-' + localDateEnd.format(basicFormat);\r\n\r\n        }\r\n\r\n        private toStartRange(date: any, range: string): Date {\r\n            let localDate: moment.Moment;\r\n\r\n            if (this.isUndefinedOrNull(date)) {\r\n                throw new Error('toStartRange - date is undefined or null');\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                localDate = moment(date).utcOffset(this._config.timeZone);\r\n            } else {\r\n                localDate = moment(date);\r\n            }\r\n            if (!localDate.isValid()) {\r\n                throw new Error('toStartRange - localDate is invalid');\r\n            }\r\n\r\n            return localDate.startOf(range).toDate();\r\n        }\r\n\r\n        private toEndRange(date: any, range: string, offset: number): any {\r\n            let localDate: any,\r\n                result: any,\r\n                mssOffset: number;\r\n\r\n            if (this.isUndefinedOrNull(date)) {\r\n                return '';\r\n            }\r\n\r\n            if (!angular.isNumber(offset)) {\r\n                mssOffset = 0;\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                localDate = moment(date).utcOffset(this._config.timeZone);\r\n            } else {\r\n                localDate = moment(date);\r\n            }\r\n            if (!localDate.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            if (mssOffset) {\r\n                result = localDate.startOf(range).add(mssOffset, 'milliseconds');\r\n            } else {\r\n                result = localDate.startOf(range);\r\n            }\r\n\r\n            return localDate.startOf(range).toDate();\r\n        }\r\n\r\n        private toDateWithTime(date: any, formatDate: string, formatTime: string, firstTime?: boolean): any {\r\n            let localDate: moment.Moment,\r\n                result: string,\r\n                nowDate: moment.Moment;\r\n\r\n            if (this.isUndefinedOrNull(date)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                localDate = moment(date).utcOffset(this._config.timeZone);\r\n            } else {\r\n                localDate = moment(date);\r\n            }\r\n            if (!localDate.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            nowDate = moment();\r\n            if (firstTime) {\r\n                result = localDate.format(formatTime) + ' ' + localDate.format(formatDate);\r\n            } else {\r\n                result = localDate.format(formatDate) + ' ' + localDate.format(formatTime);\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        private toTodayDate(date: any, formatDate: string, formatTime: string): any {\r\n            let localDate: moment.Moment,\r\n                result: string,\r\n                nowDate: any;\r\n\r\n            if (this.isUndefinedOrNull(date)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                localDate = moment(date).utcOffset(this._config.timeZone);\r\n            } else {\r\n                localDate = moment(date);\r\n            }\r\n            if (!localDate.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            nowDate = moment();\r\n\r\n            if (nowDate.year() == localDate.year() && nowDate.month() == localDate.month() && nowDate.day() == localDate.day()) {\r\n                result = localDate.format(formatTime);\r\n            } else {\r\n                result = localDate.format(formatDate) + ' ' + localDate.format(formatTime);\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        public constructor(config: DateTimeConfig) {\r\n            this._config = config || { timeZone: null };\r\n        };\r\n\r\n        public get config(): DateTimeConfig {\r\n            return this._config;\r\n        }\r\n\r\n        public useTimeZone(offset: number) {\r\n            this._config.timeZone = offset;\r\n        }\r\n        \r\n      \r\n\r\n        public getDateJSON(localDate: any): string {\r\n            return JSON.stringify(moment(localDate));\r\n        }\r\n\r\n        // navigation functions \r\n        // ------------------\r\n\r\n        public getNextStart(date: any, offset: string): any {\r\n            let localDate: moment.Moment,\r\n                range: string,\r\n                result: any;\r\n\r\n            if (this.isUndefinedOrNull(date)) {\r\n                return '';\r\n            }\r\n\r\n            localDate = moment(date);\r\n            if (!localDate.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            range = this.getRange(offset);\r\n            result = moment(localDate).startOf(range).add(this.getOperationRange(range));\r\n\r\n            return result.toDate();\r\n        }\r\n\r\n        public getPrevStart(date: any, offset: string): Date {\r\n            let localDate: moment.Moment,\r\n                range: string,\r\n                result: moment.Moment;\r\n\r\n            if (this.isUndefinedOrNull(date)) {\r\n                throw new Error('getPrevStart - date is undefined or null');\r\n            }\r\n\r\n            localDate = moment(date);\r\n            if (!localDate.isValid()) {\r\n                throw new Error('getPrevStart - localDate is invalid');\r\n            }\r\n\r\n            range = this.getRange(offset);\r\n            result = moment(localDate).startOf(range).add(-1, this.getOperationRange(range));\r\n\r\n            return result.toDate();\r\n        }\r\n\r\n        public getNowStart(offset: string): Date {\r\n            let localDate: moment.Moment,\r\n                range: string,\r\n                result: moment.Moment;\r\n\r\n            localDate = moment();\r\n            if (!localDate.isValid()) {\r\n                throw new Error('getNowStart - localDate is invalid');\r\n            }\r\n\r\n            range = this.getRange(offset)\r\n            result = moment(localDate).startOf(range);\r\n\r\n            return result.toDate();\r\n        }\r\n\r\n        public addHours(date: any, hours: number): Date {\r\n            let localDate: moment.Moment;\r\n\r\n            if (this.isUndefinedOrNull(date) || !angular.isNumber(hours)) {\r\n                throw new Error('addHours - date is undefined or null or hours is not a number');\r\n            }\r\n\r\n            localDate = moment(date);\r\n            if (!localDate.isValid()) {\r\n                throw new Error('addHours - localDate is invalid');\r\n            }\r\n\r\n            return localDate.add(hours, 'hours').toDate();\r\n        }\r\n\r\n        public toStartDay(date: any): Date {\r\n            return this.toStartRange(date, MomentRange.Day);\r\n        }\r\n\r\n        public toEndDay(date: any, offset: number): Date {\r\n            return this.toEndRange(date, MomentRange.Day, offset);\r\n        }\r\n\r\n        public toStartWeek(date: any): Date {\r\n            return this.toStartRange(date, MomentRange.Week);\r\n        }\r\n\r\n        public toEndWeek(date: any, offset: number): Date {\r\n            return this.toEndRange(date, MomentRange.Week, offset);\r\n        }\r\n\r\n        public toStartMonth(date: any): Date {\r\n            return this.toStartRange(date, MomentRange.Month);\r\n        }\r\n\r\n        public toEndMonth(date: any, offset: number): Date {\r\n            return this.toEndRange(date, MomentRange.Month, offset);\r\n        }\r\n\r\n        public toStartYear(date: any): Date {\r\n            return this.toStartRange(date, MomentRange.Year);\r\n        }\r\n\r\n        public toEndYear(date: any, offset: number): Date {\r\n            return this.toEndRange(date, MomentRange.Year, offset);\r\n        }\r\n\r\n    }\r\n\r\n    class DateTimeConvertService {\r\n        private _localDatetime: DateTimeConvert;\r\n        private _config: DateTimeConfig;\r\n\r\n        public constructor(\r\n            localDatetime: DateTimeConvert,\r\n        ) {\r\n            this._config = { timeZone: null };\r\n            this._localDatetime = localDatetime;\r\n        }\r\n\r\n        // todo Optional\r\n        public useTimeZone(offset: number): void {\r\n            return this._localDatetime.useTimeZone(offset);\r\n        }\r\n\r\n     \r\n\r\n        public getDateJSON(localDate: any): string {\r\n            return this._localDatetime.getDateJSON(localDate);\r\n        }\r\n\r\n        // navigation functions \r\n        // ------------------\r\n\r\n        public getNextStart(date: any, offset: string): any {\r\n            return this._localDatetime.getNextStart(date, offset);\r\n        }\r\n\r\n        public getPrevStart(date: any, offset: string): any {\r\n            return this._localDatetime.getPrevStart(date, offset);\r\n        }\r\n\r\n        public getNowStart(offset: string): any {\r\n            return this._localDatetime.getNowStart(offset);\r\n        }\r\n\r\n        public addHours(date: any, hours: number): any {\r\n            return this._localDatetime.addHours(date, hours);\r\n        }\r\n\r\n        public toStartDay(date: any): any {\r\n            return this._localDatetime.toStartDay(date);\r\n        }\r\n\r\n        public toEndDay(date: any, offset: number): any {\r\n            return this._localDatetime.toEndDay(date, offset);\r\n        }\r\n\r\n        public toStartWeek(date: any): any {\r\n            return this._localDatetime.toStartWeek(date);\r\n        }\r\n\r\n        public toEndWeek(date: any, offset: number): any {\r\n            return this._localDatetime.toEndWeek(date, offset);\r\n        }\r\n\r\n        public toStartMonth(date: any): any {\r\n            return this._localDatetime.toStartMonth(date);\r\n        }\r\n\r\n        public toEndMonth(date: any, offset: number): any {\r\n            return this._localDatetime.toEndMonth(date, offset);\r\n        }\r\n\r\n        public toStartYear(date: any): any {\r\n            return this._localDatetime.toStartYear(date);\r\n        }\r\n\r\n        public toEndYear(date: any, offset: number): any {\r\n            return this._localDatetime.toEndYear(date, offset);\r\n        }\r\n\r\n    }\r\n\r\n    class DateConvertProvider extends DateTimeConvert implements IDateConvertProvider {\r\n        private _translation: DateTimeConvert;\r\n        private _service: DateTimeConvertService;\r\n\r\n        public constructor() {\r\n            super({ timeZone: null });\r\n        }\r\n\r\n        public $get(): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null)\r\n                this._service = new DateTimeConvertService(this);\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipDate.Convert', [])\r\n        .provider('pipDateConvert', DateConvertProvider);\r\n})();","import { IDateFormatService } from './IDateFormatService';\r\nimport { IDateConvertService } from './IDateConvertService';\r\n\r\nfunction formatTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any, format: string): string => {\r\n        return pipDateFormat.formatTime(value, format);\r\n    }\r\n}\r\n\r\nfunction formatDateOptionalFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any, format: string): string => {\r\n        return pipDateFormat.formatDateOptional(value, format);\r\n    }\r\n}\r\n\r\nfunction formatLongDateFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatLongDate(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatShortDate(value);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatMiddleDate(value);\r\n    }\r\n}\r\n\r\nfunction formatMonthFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any) => {\r\n        return pipDateFormat.formatMonth(value);\r\n    }\r\n}\r\n\r\nfunction formatLongMonthFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatLongMonth(value);\r\n    }\r\n}\r\n\r\nfunction formatYearFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatYear(value);\r\n    }\r\n}\r\n\r\nfunction formatWeekFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortWeekFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatShortWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatShortDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatMiddleDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDateTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatLongDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateLongTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any, firstTime: boolean): string => {\r\n        return pipDateFormat.formatShortDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateLongTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any, firstTime: boolean): string => {\r\n        return pipDateFormat.formatMiddleDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatLongDateLongTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any, firstTime: boolean): string => {\r\n        return pipDateFormat.formatLongDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction bbFormatDateLongTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any, firstTime: boolean): string => {\r\n        return pipDateFormat.bbFormatDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatFullDateTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatFullDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatShortTime(value);\r\n    }\r\n}\r\n\r\nfunction formatLongTimeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatLongTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDayOfWeekFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatShortDayOfWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDayOfWeekFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatLongDayOfWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatLongMonthDayFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatLongMonthDay(value);\r\n    }\r\n}\r\n\r\nfunction formatShortMonthDayFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatShortMonthDay(value);\r\n    }\r\n}\r\n\r\nfunction formatDateRangeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value1: any, value2: any): string => {\r\n        return pipDateFormat.formatDateRange(value1, value2);\r\n    }\r\n}\r\n\r\nfunction formatDateTimeRangeFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value1: any, value2: any): string => {\r\n        return pipDateFormat.formatDateTimeRange(value1, value2);\r\n    }\r\n}\r\n\r\nfunction formatISOWeekFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatISOWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortISOWeekFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatShortISOWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatISOWeekOrdinalFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatISOWeekOrdinal(value);\r\n    }\r\n}\r\n\r\nfunction formatDateYFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatDateY(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDateYFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatLongDateY(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateLongTimeLongFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatTodayDateLongTimeLong(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateShortTimeLongFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatTodayDateShortTimeLong(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateLongTimeShortFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatTodayDateLongTimeShort(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateShortTimeShortFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatTodayDateShortTimeShort(value);\r\n    }\r\n}\r\n\r\nfunction formatMillisecondsToSecondsFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateFormat.formatMillisecondsToSeconds(value);\r\n    }\r\n}\r\n\r\nfunction formatElapsedIntervalFilter(pipDateFormat: IDateFormatService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any, start: any): string => {\r\n        return pipDateFormat.formatElapsedInterval(value, start);\r\n    }\r\n}\r\n\r\nfunction getDateJSONFilter(pipDateConvert: IDateConvertService) {\r\n    \"ngInject\";\r\n\r\n    return (value: any): string => {\r\n        return pipDateConvert.getDateJSON(value);\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipDate.Filter', [])\r\n    .filter('formatTime', formatTimeFilter)\r\n    .filter('formatDateOptional', formatDateOptionalFilter)\r\n    .filter('bbFormatDateLongTime', bbFormatDateLongTimeFilter)\r\n    .filter('formatShortDate', formatShortDateFilter)\r\n    .filter('formatMiddleDate', formatMiddleDateFilter)\r\n    .filter('formatLongDate', formatLongDateFilter)\r\n    .filter('formatMonth', formatMonthFilter)\r\n    .filter('formatLongMonth', formatLongMonthFilter)\r\n    .filter('formatYear', formatYearFilter)\r\n    .filter('formatWeek', formatWeekFilter)\r\n    .filter('formatShortWeek', formatShortWeekFilter)\r\n    .filter('formatShortDateTime', formatShortDateTimeFilter)\r\n    .filter('formatMiddleDateTime', formatMiddleDateTimeFilter)\r\n    .filter('formatLongDateTime', formatLongDateTimeFilter)\r\n    .filter('formatShortDateLongTime', formatShortDateLongTimeFilter)\r\n    .filter('formatMiddleDateLongTime', formatMiddleDateLongTimeFilter)\r\n    .filter('formatLongDateLongTime', formatLongDateLongTimeFilter)\r\n    .filter('formatFullDateTime', formatFullDateTimeFilter)\r\n    .filter('formatShortTime', formatShortTimeFilter)\r\n    .filter('formatLongTime', formatLongTimeFilter)\r\n    .filter('formatShortDayOfWeek', formatShortDayOfWeekFilter)\r\n    .filter('formatLongDayOfWeek', formatLongDayOfWeekFilter)\r\n    .filter('formatLongMonthDay', formatLongMonthDayFilter)\r\n    .filter('formatShortMonthDay', formatShortMonthDayFilter)\r\n    .filter('formatDateRange', formatDateRangeFilter)\r\n    .filter('formatDateTimeRange', formatDateTimeRangeFilter)\r\n    .filter('formatISOWeek', formatISOWeekFilter)\r\n    .filter('formatShortISOWeek', formatShortISOWeekFilter)\r\n    .filter('formatISOWeekOrdinal', formatISOWeekOrdinalFilter)\r\n    .filter('formatDateY', formatDateYFilter)\r\n    .filter('formatLongDateY', formatLongDateYFilter)\r\n    .filter('formatTodayDateLongTimeLong', formatTodayDateLongTimeLongFilter)\r\n    .filter('formatTodayDateShortTimeLong', formatTodayDateShortTimeLongFilter)\r\n    .filter('formatTodayDateLongTimeShort', formatTodayDateLongTimeShortFilter)\r\n    .filter('formatTodayDateShortTimeShort', formatTodayDateShortTimeShortFilter)\r\n    .filter('formatMillisecondsToSeconds', formatMillisecondsToSecondsFilter)\r\n    .filter('formatElapsedInterval', formatElapsedIntervalFilter);\r\n","import { DateTimeConfig, IDateFormatService, IDateFormatProvider } from './IDateFormatService';\r\n\r\n(() => {\r\n    class DateFormatService implements IDateFormatService {\r\n        private _config: DateTimeConfig;\r\n        protected _momentRanged: string[] = new Array('year', 'month', 'week', 'isoweek', 'day');\r\n        protected _defaultFormat: string = 'LL'\r\n\r\n        private isUndefinedOrNull(value: any): boolean {\r\n            return angular.isUndefined(value) || value === null;\r\n        }\r\n\r\n     \r\n        private formatDateTime(value: any, basicFormat: string): string {\r\n            let date: moment.Moment,\r\n                formatTpl: string;\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                date = moment(value).utcOffset(this._config.timeZone);\r\n            } else {\r\n                date = moment(value);\r\n            }\r\n\r\n            if (!date.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            formatTpl = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n            return date.format(formatTpl);\r\n        }\r\n\r\n        private formatDateTimeY(value: any, basicFormat: string): string {\r\n            let date: moment.Moment,\r\n                nowDate: moment.Moment,\r\n                formatMoment: string;\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                date = moment(value).utcOffset(this._config.timeZone);\r\n            } else {\r\n                date = moment(value);\r\n            }\r\n\r\n            if (!date.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            nowDate = moment();\r\n            formatMoment = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat);\r\n\r\n            if (nowDate.year() == date.year()) {\r\n                formatMoment = formatMoment.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '');\r\n            }\r\n\r\n            return date.format(formatMoment);\r\n        }\r\n\r\n        private formatDay(value: any, basicFormat: string): string {\r\n            let date: moment.Moment,\r\n                format = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat),\r\n                formatMonthYearless = format.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '').replace(/M/g, '');\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                date = moment(value).utcOffset(this._config.timeZone);\r\n            } else {\r\n                date = moment(value);\r\n            }\r\n\r\n            if (!date.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            return date.format(formatMonthYearless);\r\n        }\r\n\r\n        private formatMonthDay(value: any, basicFormat: string): string {\r\n            let date: moment.Moment,\r\n                format = basicFormat ? basicFormat : this._defaultFormat,\r\n                formatLL = moment.localeData().longDateFormat(format),\r\n                formatYearlessLL = formatLL.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '');\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                date = moment(value).utcOffset(this._config.timeZone);\r\n            } else {\r\n                date = moment(value);\r\n            }\r\n\r\n            if (!date.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            return date.format(formatYearlessLL);\r\n        }\r\n\r\n        //  use timezone not testing\r\n        private formatRange(value1: any, value2: any, basicFormat: string): string {\r\n            let dateStart: moment.Moment,\r\n                dateEnd: moment.Moment,\r\n                format = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n            if (this.isUndefinedOrNull(value1)) {\r\n                dateStart = null;\r\n            } else {\r\n                dateStart = (this._config.timeZone != undefined && this._config.timeZone != null) ? moment(value1).utcOffset(this._config.timeZone) : moment(value1);\r\n            }\r\n            if (this.isUndefinedOrNull(value2)) {\r\n                dateEnd = null;\r\n            } else {\r\n                dateEnd = (this._config.timeZone != undefined && this._config.timeZone != null) ? moment(value2).utcOffset(this._config.timeZone) : moment(value2);\r\n            }\r\n\r\n            if (dateStart === null && dateEnd === null) return '';\r\n\r\n            if (dateStart === null) {\r\n                return dateEnd.format(basicFormat);\r\n            }\r\n            if (dateEnd === null || dateStart.isSame(dateEnd)) {\r\n                return dateStart.format(basicFormat);;\r\n            }\r\n\r\n            if (dateStart.isAfter(dateEnd)) {\r\n                // todo localization\r\n                throw new Error('Date range error. Start date is more than end date.');\r\n            }\r\n\r\n            if (dateStart.year() == dateEnd.year()) {\r\n                if (dateStart.month() == dateEnd.month()) {\r\n                    return this.formatDay(dateStart, basicFormat) + '-' + dateEnd.format(basicFormat);\r\n                }\r\n                return this.formatMonthDay(dateStart, basicFormat) + '-' + dateEnd.format(basicFormat);\r\n\r\n            }\r\n            return dateStart.format(basicFormat) + '-' + dateEnd.format(basicFormat);\r\n\r\n        }\r\n\r\n        private toDateWithTime(value: any, formatDate: string, formatTime: string, firstTime?: boolean): any {\r\n            let date: moment.Moment,\r\n                result: string,\r\n                nowDate: moment.Moment;\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                date = moment(value).utcOffset(this._config.timeZone);\r\n            } else {\r\n                date = moment(value);\r\n            }\r\n            if (!date.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            nowDate = moment();\r\n            if (firstTime) {\r\n                result = date.format(formatTime) + ' ' + date.format(formatDate);\r\n            } else {\r\n                result = date.format(formatDate) + ' ' + date.format(formatTime);\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        private toTodayDate(value: any, formatDate: string, formatTime: string): any {\r\n            let date: moment.Moment,\r\n                result: string,\r\n                nowDate: any;\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return '';\r\n            }\r\n\r\n            if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n                date = moment(value).utcOffset(this._config.timeZone);\r\n            } else {\r\n                date = moment(value);\r\n            }\r\n            if (!date.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            nowDate = moment();\r\n\r\n            if (nowDate.year() == date.year() && nowDate.month() == date.month() && nowDate.day() == date.day()) {\r\n                result = date.format(formatTime);\r\n            } else {\r\n                result = date.format(formatDate) + ' ' + date.format(formatTime);\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        public constructor(config: DateTimeConfig) {\r\n            this._config = config || { timeZone: null };\r\n        };\r\n\r\n        public get config(): DateTimeConfig {\r\n            return this._config;\r\n        }\r\n\r\n        public useTimeZone(offset: number) {\r\n            this._config.timeZone = offset;\r\n        }\r\n        \r\n        // formating functions \r\n        // -------------------\r\n\r\n        public formatTime(value: any, format: string): string {\r\n            return this.formatDateTime(value, 'LLL');\r\n        }\r\n\r\n        public formatDateOptional(value: any, format: string): string {\r\n            return this.formatDateTime(value, 'L');\r\n        }\r\n\r\n        // date formats\r\n        public formatShortDate(value: any): string {\r\n            return this.formatDateTime(value, 'L');\r\n        }\r\n\r\n        public bbFormatDateLongTime(value: any, firstTime?: boolean): string {\r\n            return this.toDateWithTime(value, 'MM/DD/YY', 'LTS', firstTime);\r\n        }\r\n\r\n        public formatMiddleDate(value: any): string {\r\n            return this.formatDateTime(value, 'll');\r\n        }\r\n\r\n        public formatLongDate(value: any): string {\r\n            return this.formatDateTime(value, 'LL');\r\n        }\r\n\r\n        public formatMonth(value: any): string {\r\n            return this.formatDateTime(value, 'MM');\r\n        }\r\n\r\n        public formatLongMonth(value: any): string {\r\n            return this.formatDateTime(value, 'MMMM');\r\n        }\r\n\r\n        public formatYear(value: any): string {\r\n            return this.formatDateTime(value, 'YYYY');\r\n        }\r\n\r\n        public formatWeek(value: any): string {\r\n            return this.formatDateTime(value, 'ww');\r\n        }\r\n\r\n        public formatShortWeek(value: any): string {\r\n            return this.formatDateTime(value, 'w');\r\n        }\r\n\r\n        public formatShortDateTime(value: any): string {\r\n            return this.toDateWithTime(value, 'L', 'LT');\r\n        }\r\n\r\n        public formatMiddleDateTime(value: any): string {\r\n            return this.formatDateTime(value, 'lll');\r\n        }\r\n\r\n        public formatLongDateTime(value: any): string {\r\n            return this.formatDateTime(value, 'LLL');\r\n        }\r\n\r\n        public formatFullDateTime(value: any): string {\r\n            return this.formatDateTime(value, 'LLLL');\r\n        }\r\n\r\n        public formatShortDateLongTime(value: any, firstTime?: boolean): string {\r\n            return this.toDateWithTime(value, 'L', 'LTS', firstTime);\r\n        }\r\n\r\n        public formatMiddleDateLongTime(value: any, firstTime?: boolean): string {\r\n            return this.toDateWithTime(value, 'll', 'LTS', firstTime);\r\n        }\r\n\r\n        public formatLongDateLongTime(value: any, firstTime?: boolean): string {\r\n            return this.toDateWithTime(value, 'LL', 'LTS', firstTime);\r\n        }\r\n\r\n        public formatShortTime(value: any): string {\r\n            return this.formatDateTime(value, 'LT');\r\n        }\r\n\r\n        public formatLongTime(value: any): string {\r\n            return this.formatDateTime(value, 'LTS');\r\n        }\r\n\r\n        public formatShortDayOfWeek(value: any): string {\r\n            return this.formatDateTime(value, 'dd');\r\n        }\r\n\r\n        public formatLongDayOfWeek(value: any): string {\r\n            return this.formatDateTime(value, 'dddd');\r\n        }\r\n\r\n        // public formatTimeNumber(value: any): string {\r\n        //     return this.formatDateTime(value, 'LLL');\r\n        // }\r\n\r\n        // public formatLongTimeNumber(value: any): string {\r\n        //     return this.formatDateTime(value, 'LLLL');\r\n        // }\r\n\r\n        ///-----------------\r\n\r\n        public formatLongMonthDay(value: any): string {\r\n            return this.formatMonthDay(value, 'LL');\r\n        }\r\n\r\n        public formatShortMonthDay(value: any): string {\r\n            return this.formatMonthDay(value, 'L');\r\n        }\r\n\r\n        public formatDateRange(value1: any, value2: any): string {\r\n            return this.formatRange(value1, value2, 'LL');\r\n        }\r\n\r\n        public formatDateTimeRange(value1: any, value2: any): string {\r\n            return this.formatRange(value1, value2, 'LLL');\r\n        }\r\n\r\n        // iso function\r\n        // --------------\r\n\r\n        public formatISOWeek(value: any): string {\r\n            return this.formatDateTime(value, 'WW');\r\n        }\r\n\r\n        public formatShortISOWeek(value: any): string {\r\n            return this.formatDateTime(value, 'W');\r\n        }\r\n\r\n        public formatISOWeekOrdinal(value: any): string {\r\n            return this.formatDateTime(value, 'Wo');\r\n        }\r\n        // special formats \r\n        // --------------\r\n\r\n        // year option displays if the current year is not equal to, the date of \r\n        public formatDateY(value: any): string {\r\n            return this.formatDateTimeY(value, 'L');\r\n        }\r\n\r\n        // year option displays if the current year is not equal to, the date of\r\n        public formatLongDateY(value: any): string {\r\n            return this.formatDateTimeY(value, 'LL');\r\n        }\r\n\r\n        // date displays if the current date  is not equal now \r\n        // September 4 1986 8:30:25 PM or 8:30:25 PM\r\n        public formatTodayDateLongTimeLong(value: any): string {\r\n            return this.toTodayDate(value, 'LL', 'LTS')\r\n        }\r\n\r\n        // date displays if the current date  is not equal now \r\n        // Sep 4 1986 8:30:25 PM or 8:30:25 PM\r\n        public formatTodayDateShortTimeLong(value: any): string {\r\n            return this.toTodayDate(value, 'LL', 'LTS')\r\n        }\r\n\r\n        // date displays if the current date  is not equal now \r\n        // September 4 1986 8:30 PM or 8:30 PM\r\n        public formatTodayDateLongTimeShort(value: any): string {\r\n            return this.toTodayDate(value, 'LL', 'LT')\r\n        }\r\n\r\n        // date displays if the current date  is not equal now \r\n        // Sep 4 1986 8:30 PM or 8:30 PM\r\n        public formatTodayDateShortTimeShort(value: any): string {\r\n            return this.toTodayDate(value, 'll', 'LT')\r\n        }\r\n\r\n        // todo\r\n        public formatMillisecondsToSeconds(value: any): string {\r\n            return '';\r\n        }\r\n\r\n        public formatElapsedInterval(value: any, start: any): string {\r\n            let date: moment.Moment,\r\n                nowDate: any;\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return '';\r\n            }\r\n            if (this.isUndefinedOrNull(start)) {\r\n                nowDate = moment();\r\n            } else {\r\n                nowDate = moment(start);\r\n            }\r\n\r\n            date = moment(value);\r\n            if (!date.isValid() || !nowDate.isValid()) {\r\n                return '';\r\n            }\r\n\r\n            return moment(date).fromNow(nowDate);\r\n        }\r\n\r\n        public getDateJSON(date: any): string {\r\n            return JSON.stringify(moment(date));\r\n        }\r\n\r\n        \r\n    }\r\n\r\n    class DateTimeFormatService {\r\n        private _datetime: DateFormatService;\r\n        private _config: DateTimeConfig;\r\n\r\n        public constructor(\r\n            datetime: DateFormatService,\r\n        ) {\r\n            this._config = { timeZone: null };\r\n            this._datetime = datetime;\r\n        }\r\n\r\n        // todo Optional\r\n        public useTimeZone(offset: number): void {\r\n            return this._datetime.useTimeZone(offset);\r\n        }\r\n\r\n        // todo Optional\r\n        public formatTime(value: any, format: string): string {\r\n            return this._datetime.formatTime(value, format);\r\n        }\r\n\r\n        // todo Optional\r\n        public formatDateOptional(value: any, format: string): string {\r\n            return this._datetime.formatDateOptional(value, format);\r\n        }\r\n\r\n        public formatShortDate(value: any): string {\r\n            return this._datetime.formatShortDate(value);\r\n        }\r\n\r\n        public formatMiddleDate(value: any): string {\r\n            return this._datetime.formatMiddleDate(value);\r\n        }\r\n\r\n        public formatLongDate(value: any): string {\r\n            return this._datetime.formatLongDate(value);\r\n        }\r\n\r\n        public formatMonth(value: any): string {\r\n            return this._datetime.formatMonth(value);\r\n        }\r\n\r\n        public formatLongMonth(value: any): string {\r\n            return this._datetime.formatLongMonth(value);\r\n        }\r\n\r\n        public formatYear(value: any): string {\r\n            return this._datetime.formatYear(value);\r\n        }\r\n\r\n        public formatWeek(value: any): string {\r\n            return this._datetime.formatWeek(value);\r\n        }\r\n\r\n        public formatShortWeek(value: any): string {\r\n            return this._datetime.formatShortWeek(value);\r\n        }\r\n\r\n        public formatShortDateTime(value: any): string {\r\n            return this._datetime.formatShortDateTime(value);\r\n        }\r\n\r\n        public formatMiddleDateTime(value: any): string {\r\n            return this._datetime.formatMiddleDateTime(value);\r\n        }\r\n\r\n        public formatLongDateTime(value: any): string {\r\n            return this._datetime.formatLongDateTime(value);\r\n        }\r\n\r\n        public formatFullDateTime(value: any): string {\r\n            return this._datetime.formatFullDateTime(value);\r\n        }\r\n\r\n        public formatShortDateLongTime(value: any, firstTime?: boolean): string {\r\n            return this._datetime.formatShortDateLongTime(value, firstTime);\r\n        }\r\n\r\n        public formatMiddleDateLongTime(value: any, firstTime?: boolean): string {\r\n            return this._datetime.formatMiddleDateLongTime(value, firstTime);\r\n        }\r\n\r\n        public formatLongDateLongTime(value: any, firstTime?: boolean): string {\r\n            return this._datetime.formatLongDateLongTime(value, firstTime);\r\n        }\r\n\r\n        public bbFormatDateLongTime(value: any, firstTime?: boolean): string {\r\n            return this._datetime.bbFormatDateLongTime(value, firstTime);\r\n        }\r\n\r\n        public formatShortTime(value: any): string {\r\n            return this._datetime.formatShortTime(value);\r\n        }\r\n\r\n        public formatLongTime(value: any): string {\r\n            return this._datetime.formatLongTime(value);\r\n        }\r\n\r\n        public formatShortDayOfWeek(value: any): string {\r\n            return this._datetime.formatShortDayOfWeek(value);\r\n        }\r\n\r\n        public formatLongDayOfWeek(value: any): string {\r\n            return this._datetime.formatLongDayOfWeek(value);\r\n        }\r\n\r\n        public formatLongMonthDay(value: any): string {\r\n            return this._datetime.formatLongMonthDay(value);\r\n        }\r\n\r\n        public formatShortMonthDay(value: any): string {\r\n            return this._datetime.formatShortMonthDay(value);\r\n        }\r\n\r\n        public formatDateRange(value1: any, value2: any): string {\r\n            return this._datetime.formatDateRange(value1, value2);\r\n        }\r\n\r\n        public formatDateTimeRange(value1: any, value2: any): string {\r\n            return this._datetime.formatDateTimeRange(value1, value2);\r\n        }\r\n\r\n        // iso function\r\n        // --------------\r\n\r\n        public formatISOWeek(value: any): string {\r\n            return this._datetime.formatISOWeek(value);\r\n        }\r\n\r\n        public formatShortISOWeek(value: any): string {\r\n            return this._datetime.formatShortISOWeek(value);\r\n        }\r\n\r\n        public formatISOWeekOrdinal(value: any): string {\r\n            return this._datetime.formatISOWeekOrdinal(value);\r\n        }\r\n        // special formats \r\n        // --------------\r\n\r\n        // year option displays if the current year is not equal to, the date of \r\n        public formatDateY(value: any): string {\r\n            return this._datetime.formatDateY(value);\r\n        }\r\n\r\n        // year option displays if the current year is not equal to, the date of\r\n        public formatLongDateY(value: any): string {\r\n            return this._datetime.formatLongDateY(value);\r\n        }\r\n\r\n        // date displays if the current date  is not equal now \r\n        // September 4 1986 8:30:25 PM or 8:30:25 PM\r\n        public formatTodayDateLongTimeLong(value: any): string {\r\n            return this._datetime.formatTodayDateLongTimeLong(value);\r\n        }\r\n\r\n        // date displays if the current date  is not equal now \r\n        // Sep 4 1986 8:30:25 PM or 8:30:25 PM\r\n        public formatTodayDateShortTimeLong(value: any): string {\r\n            return this._datetime.formatTodayDateShortTimeLong(value);\r\n        }\r\n\r\n        // date displays if the current date  is not equal now \r\n        // September 4 1986 8:30 PM or 8:30 PM\r\n        public formatTodayDateLongTimeShort(value: any): string {\r\n            return this._datetime.formatTodayDateLongTimeShort(value);\r\n        }\r\n\r\n        // date displays if the current date  is not equal now \r\n        // Sep 4 1986 8:30 PM or 8:30 PM\r\n        public formatTodayDateShortTimeShort(value: any): string {\r\n            return this._datetime.formatTodayDateShortTimeShort(value);\r\n        }\r\n\r\n        public formatMillisecondsToSeconds(value: any) {\r\n            return this._datetime.formatMillisecondsToSeconds(value);\r\n        }\r\n\r\n        public formatElapsedInterval(value: any, start: any): string {\r\n            return this._datetime.formatElapsedInterval(value, start);\r\n        }\r\n\r\n        public getDateJSON(date: any): string {\r\n            return this._datetime.getDateJSON(date);\r\n        }\r\n\r\n    }\r\n\r\n    class DateFormatProvider extends DateFormatService implements IDateFormatProvider {\r\n        private _translation: DateFormatService;\r\n        private _service: DateTimeFormatService;\r\n\r\n        public constructor() {\r\n            super({ timeZone: null });\r\n        }\r\n\r\n        public $get(): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null)\r\n                this._service = new DateTimeFormatService(this);\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipDate.Format', [])\r\n        .provider('pipDateFormat', DateFormatProvider);\r\n})();","\r\nangular.module('pipDate.Common', [\r\n    'pipDate.Convert',\r\n    'pipDate.Format',\r\n    'pipDate.Filter'\r\n]);\r\n","export class DateTimeConfig {\r\n    timeZone: number;\r\n}\r\n\r\nexport interface IDateConvertService {\r\n    readonly config: DateTimeConfig;\r\n    useTimeZone(offset: number);\r\n   \r\n    getDateJSON(date: any): string;\r\n    getNextStart(date: any, category: string): Date;\r\n    getPrevStart(date: any, category: string): Date;\r\n    getNowStart(category: string): Date;\r\n\r\n    addHours(date: any, hours: number): Date;\r\n    toStartDay(date: any): Date;\r\n    toEndDay(date: any, offset: number): Date;\r\n    toStartWeek(date: any): Date;\r\n    toEndWeek(date: any, offset: number): Date;\r\n    toStartMonth(date: any): Date;\r\n    toEndMonth(date: any, offset: number): Date;\r\n    toStartYear(date: any): Date;\r\n    toEndYear(date: any, offset: number): Date;\r\n \r\n}\r\n\r\nexport interface IDateConvertProvider extends IDateConvertService, ng.IServiceProvider {}","export class DateTimeConfig {\r\n    timeZone: number;\r\n}\r\n\r\nexport interface IDateFormatService {\r\n    readonly config: DateTimeConfig;\r\n    useTimeZone(offset: number);\r\n\r\n    bbFormatDateLongTime(value: any, firstTime?: boolean): string; \r\n    \r\n    formatTime(value: any, format: string): string;\r\n    formatDateOptional(value: any, format: string): string;\r\n    formatShortDate(value: any): string;\r\n    formatMiddleDate(value: any): string;\r\n    formatLongDate(value: any): string;\r\n    formatMonth(value: any): string;\r\n    formatLongMonth(value: any): string;\r\n    formatYear(value: any): string;\r\n    formatWeek(value: any): string;\r\n    formatShortWeek(value: any): string;\r\n    formatShortDateTime(value: any): string;\r\n    formatMiddleDateTime(value: any): string;    \r\n    formatLongDateTime(value: any): string;\r\n    formatFullDateTime(value: any): string;\r\n    formatShortDateLongTime(value: any, firstTime?: boolean): string;\r\n    formatMiddleDateLongTime(value: any, firstTime?: boolean): string;    \r\n    formatLongDateLongTime(value: any, firstTime?: boolean): string;    \r\n    formatShortTime(value: any): string;\r\n    formatLongTime(value: any): string;\r\n    formatShortDayOfWeek(value: any): string;\r\n    formatLongDayOfWeek(value: any): string;\r\n    formatLongMonthDay(value: any): string;\r\n    formatShortMonthDay(value: any): string;\r\n    formatDateRange(value1: any, value2: any): string;\r\n    formatDateTimeRange(value1: any, value2: any): string;\r\n    formatISOWeek(value: any): string;\r\n    formatShortISOWeek(value: any): string;\r\n    formatISOWeekOrdinal(value: any): string;\r\n    formatDateY(value: any): string;\r\n    formatLongDateY(value: any): string;\r\n    formatTodayDateLongTimeLong(value: any): string;\r\n    formatTodayDateShortTimeLong(value: any): string;\r\n    formatTodayDateLongTimeShort(value: any): string;\r\n    formatTodayDateShortTimeShort(value: any): string;\r\n    formatMillisecondsToSeconds(value: any): string;\r\n    formatElapsedInterval(value: any, start: any): string;\r\n\r\n}\r\n\r\nexport interface IDateFormatProvider extends IDateFormatService, ng.IServiceProvider {}","\r\n(() => {\r\n    interface IDateRangeBindings {\r\n        [key: string]: any;\r\n\r\n        timeMode: any;\r\n        disabled: any;\r\n        model: any;\r\n        pipChanged: any;\r\n        type: any;\r\n        pipDateFormat: any;\r\n        pipNoLine: any;\r\n    }\r\n\r\n    const DateRangeBindings: IDateRangeBindings = {\r\n        timeMode: '@pipTimeMode',\r\n        disabled: '&ngDisabled',\r\n        model: '=ngModel',\r\n        pipChanged: '&',\r\n        type: '@pipDateRangeType',\r\n        pipDateFormat: '@',\r\n        pipNoLine: '@'\r\n    }\r\n\r\n\r\n    class DateRangeChanges implements ng.IOnChangesObject, IDateRangeBindings {\r\n        [key: string]: ng.IChangesObject<any>;\r\n\r\n        timeMode: ng.IChangesObject<string>;\r\n        disabled: ng.IChangesObject<() => void>;\r\n        model: ng.IChangesObject<any>;\r\n        pipChanged: ng.IChangesObject<() => void>;\r\n        type: ng.IChangesObject<string>;\r\n        pipDateFormat: ng.IChangesObject<any>;\r\n        pipNoLine: ng.IChangesObject<any>;\r\n    }\r\n\r\n    class DateRangeController {\r\n        private currentDate: Date;\r\n        private currentYear: number;\r\n        private currentMonth: number;\r\n        private currentDay: number;\r\n        private prevState: any = {};\r\n        private currentState: any = {};\r\n        private localeDate: any;\r\n        private momentMonths: any;\r\n        private momentDays: any;\r\n        private momentShortDays: any;\r\n        private momentFirstDayOfWeek: any;\r\n\r\n        public type: string;\r\n        public pipChanged: Function;\r\n        public year: number;\r\n        public month: number;\r\n        public week: any;\r\n        public day: number;\r\n        public shortMonths: string[];\r\n        public days: number[];\r\n        public weeks: any[];\r\n        public months: number[];\r\n        public years: number[];\r\n        public nameDays: string[];\r\n        public model: any;\r\n        public disabled: Function;\r\n        public disableControls: boolean;\r\n        public timeMode: string;\r\n\r\n        constructor(\r\n            public $mdMedia: angular.material.IMedia,\r\n            private $timeout: ng.ITimeoutService,\r\n            $scope: ng.IScope,\r\n            $element,\r\n            $rootScope: ng.IRootScopeService,\r\n            $injector: angular.auto.IInjectorService) {\r\n\r\n            this.localeDate = moment.localeData();\r\n            this.momentMonths = angular.isArray(this.localeDate._months) ? this.localeDate._months : this.localeDate._months.standalone;\r\n            this.momentDays = angular.isArray(this.localeDate._weekdays) ? this.localeDate._weekdays : this.localeDate._weekdays.format;\r\n            this.momentShortDays = this.localeDate._weekdaysMin;\r\n            this.momentFirstDayOfWeek = this.localeDate._week.dow;\r\n\r\n            this.currentDate = new Date();\r\n            this.currentYear = this.currentDate.getUTCFullYear();\r\n            this.currentMonth = this.currentDate.getUTCMonth() + 1;\r\n            this.currentDay = this.currentDate.getUTCDate();\r\n\r\n            this.init();\r\n\r\n            this.disableControls = this.disabled ? this.disabled() : false;\r\n\r\n\r\n            $scope.$watch('$ctrl.type', (newValue, oldValue) => {\r\n                if (newValue !== oldValue && oldValue) {\r\n                    this.init();\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        public $onChanges(changes: DateRangeChanges) {\r\n            if (changes.type && changes.type.currentValue) {\r\n                this.type = changes.type.currentValue;\r\n                this.init();\r\n            }\r\n\r\n            /*if (changes.type && changes.type.currentValue && changes.type.currentValue != changes.type.previousValue) {\r\n               this.type = changes.type.currentValue; \r\n               this.init();\r\n           }\r\n   \r\n           if (changes.disabled && changes.disabled.currentValue) {\r\n                this.disableControls = changes.disabled.currentValue();\r\n           }\r\n   \r\n           if (changes.model && changes.model.currentValue) {\r\n                 this.getValue(changes.model.currentValue);\r\n           }*/\r\n\r\n        }\r\n\r\n        public onMonthChanged(): void {\r\n            if (this.type === 'weekly') {\r\n                let date: Date, dayOfWeek: number;\r\n                date = new Date(Date.UTC(this.year, this.month - 1, 1));\r\n                dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n                this.week = this.getWeekByDate(dayOfWeek, this.month - 1, this.year);\r\n                this.correctWeek();\r\n                this.adjustWeek();\r\n            } else {\r\n                this.adjustDay();\r\n            }\r\n            this.setValue();\r\n        }\r\n\r\n        public onYearChanged(): void {\r\n            let date: Date, dayOfWeek: number;\r\n            date = new Date(Date.UTC(this.year, this.month - 1, 1));\r\n            dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n            if (this.type === 'weekly') {\r\n                this.week = this.getWeekByDate(dayOfWeek, this.month - 1, this.year);\r\n                this.adjustWeek();\r\n                this.correctWeek();\r\n            } else {\r\n                this.adjustDay();\r\n            }\r\n            this.setValue();\r\n        };\r\n\r\n        public onWeekChange() {\r\n            if (this.type === 'weekly') {\r\n                this.adjustWeek();\r\n                this.correctWeek();\r\n            } else {\r\n                this.adjustDay();\r\n            }\r\n            this.setValue();\r\n        };\r\n\r\n        public isDay(): boolean {\r\n            return this.type === 'daily';\r\n        };\r\n\r\n        public isWeek(): boolean {\r\n            return this.type === 'weekly';\r\n        };\r\n\r\n        public isMonth(): boolean {\r\n            return this.type === 'daily' ||\r\n                this.type === 'weekly' ||\r\n                this.type === 'monthly';\r\n        };\r\n\r\n        public onChange() {\r\n            if (this.pipChanged) {\r\n                this.$timeout(() => {\r\n                    this.pipChanged();\r\n                }, 0);\r\n            }\r\n        };\r\n\r\n        private setCurrent() {\r\n            this.currentState.day = this.day;\r\n            this.currentState.month = this.month;\r\n            this.currentState.year = this.year;\r\n            this.currentState.week = this.week;\r\n            this.currentState.dateRangeType = this.type;\r\n            this.currentState.model = this.model;\r\n        }\r\n\r\n        private fillLists() {\r\n            this.days = this.dayList(this.month, this.year);\r\n            this.weeks = this.weekList(this.month, this.year);\r\n            this.months = this.monthList();\r\n            this.shortMonths = this.monthList();\r\n            this.years = this.yearList();\r\n        }\r\n\r\n        private correctWeek() {\r\n            if (!this.prevState.model || this.prevState.model && this.prevState.model.getTime() >= this.model.getTime()) {\r\n                // if shift week -> increase month\r\n                if (this.weeks && this.weeks[this.week] && this.weeks[this.week].id <= 0) {\r\n                    if (this.month < 12) {\r\n                        this.month += 1;\r\n                    } else {\r\n                        this.month = 1;\r\n                        this.year += 1;\r\n                    }\r\n                    this.fillLists();\r\n                }\r\n            }\r\n        }\r\n\r\n        private init() {\r\n            let value: Date;\r\n\r\n            value = this.model ? new Date(this.model) : null;\r\n            this.day = value ? value.getUTCDate() : null;\r\n            this.month = value ? value.getUTCMonth() + 1 : null;\r\n            this.year = value ? value.getUTCFullYear() : null;\r\n            this.week = value ? this.getWeekByDate(this.day, this.month - 1, this.year) : null;\r\n\r\n            this.fillLists();\r\n\r\n            if (this.type === 'weekly') {\r\n                this.correctWeek();\r\n            }\r\n            this.adjustWeek();\r\n            this.setValue();\r\n        }\r\n\r\n        public onYearClick() {\r\n            if (!this.year) {\r\n                this.year = this.currentYear;\r\n            }\r\n        };\r\n\r\n        public onMonthClick() {\r\n            if (!this.month) {\r\n                this.month = this.currentMonth;\r\n            }\r\n        };\r\n\r\n        public onDayClick() {\r\n            if (!this.year) {\r\n                this.day = this.currentDay;\r\n            }\r\n        };\r\n        // ---------------------------------------------------------------------------------------\r\n\r\n        public getCountDay(month: number, year: number): number {\r\n            let count = 31;\r\n\r\n            if (month === 4 || month === 6 || month === 9 || month === 11) {\r\n                count = 30;\r\n                return count;\r\n            }\r\n\r\n            if (month === 2) {\r\n                if (year) {\r\n                    count = year % 4 === 0 ? 29 : 28;\r\n                    return count;\r\n                }\r\n                count = 28;\r\n            }\r\n\r\n            return count;\r\n\r\n        }\r\n\r\n        private dayList(month: number, year: number): number[] {\r\n            let count: number, days: number[];\r\n\r\n            count = this.getCountDay(month, year);\r\n            this.nameDays = [];\r\n            days = [];\r\n            for (let i: number = 1; i <= count; i++) {\r\n                days.push(i);\r\n                this.nameDays.push(this.momentShortDays[moment([year, month - 1, i]).weekday()]);\r\n            }\r\n\r\n            return days;\r\n        }\r\n\r\n        public getWeekByDate(day, month, year) {\r\n            let date: Date, dayOfWeek: number, startWeek;\r\n\r\n            date = new Date(Date.UTC(year, month, day));\r\n            dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n\r\n            if (dayOfWeek === 1) {\r\n                startWeek = day;\r\n            } else {\r\n                startWeek = day + 1 - dayOfWeek;\r\n            }\r\n\r\n            return startWeek;\r\n        }\r\n\r\n        public getWeek(day: number, countDay: number, countPrevMonthDay) {\r\n            let endDay: number, startDay: number;\r\n\r\n            endDay = day + 6 > countDay ? countDay - day - 6 : day + 6;\r\n            startDay = day > 0 ? day : countPrevMonthDay + day;\r\n\r\n            return startDay.toString() + ' - ' + (Math.abs(endDay)).toString();\r\n        }\r\n\r\n        public weekList(month: number, year: number) { // возвращает список начала надели\r\n            let weeks: any[], countDay: number, countPrevMonthDay: number, startWeek: number;\r\n\r\n            weeks = [];  // в массиве первые дни недели в текущем месяце\r\n            countDay = this.getCountDay(month, year);\r\n            startWeek = this.getWeekByDate(1, month - 1, year);\r\n\r\n            countPrevMonthDay = month - 1 ? this.getCountDay(month - 1, year) : this.getCountDay(12, year - 1);\r\n            while (startWeek < countDay + 1) {\r\n                weeks.push({\r\n                    id: startWeek,\r\n                    name: this.getWeek(startWeek, countDay, countPrevMonthDay)\r\n                });\r\n                startWeek = startWeek + 7;\r\n            }\r\n\r\n            return weeks;\r\n        }\r\n\r\n        private monthList() {\r\n            let months: any[] = [];\r\n\r\n            for (let i: number = 1; i <= 12; i++) {\r\n                months.push({\r\n                    id: i,\r\n                    name: this.momentMonths[i - 1]\r\n                });\r\n            }\r\n\r\n            return months;\r\n        }\r\n\r\n        private yearList() {\r\n            let startYear: number, endYear: number, years: any[] = [];\r\n\r\n            switch (this.timeMode) {\r\n                case 'future':\r\n                    startYear = this.currentYear;\r\n                    endYear = this.currentYear + 100;\r\n                    break;\r\n                case 'past':\r\n                    startYear = this.currentYear - 100;\r\n                    endYear = this.currentYear;\r\n                    break;\r\n                case 'now':\r\n                    startYear = this.currentYear - 50;\r\n                    endYear = this.currentYear + 100;\r\n                    break;\r\n                default:\r\n                    startYear = this.currentYear - 50;\r\n                    endYear = this.currentYear + 50;\r\n                    break;\r\n            }\r\n            if (this.timeMode === 'future') {\r\n                for (let i: number = startYear; i <= endYear; i++) {\r\n                    years.push(i);\r\n                }\r\n            } else {\r\n                for (let i: number = endYear; i >= startYear; i--) {\r\n                    years.push(i);\r\n                }\r\n            }\r\n\r\n            return years;\r\n        }\r\n\r\n        private adjustDay() {\r\n            let days = this.dayList(this.month, this.year);\r\n\r\n            switch (this.type) {\r\n                case 'monthly':\r\n                    this.day = 1;\r\n                    break;\r\n                case 'yearly':\r\n                    this.month = 1;\r\n                    this.day = 1;\r\n                    break;\r\n                default:\r\n                    if (this.days.length !== days.length) {\r\n                        if (this.day > days.length) {\r\n                            this.day = days.length;\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n            this.days = days;\r\n        }\r\n\r\n        private adjustWeek() {\r\n            let weeks = this.weekList(this.month, this.year);\r\n            this.week = this.getWeekByDate(this.week, this.month - 1, this.year);\r\n            this.weeks = weeks;\r\n        }\r\n\r\n        private getValue(v) {\r\n            let value: Date, day: number, month: number, year: number, week: string;\r\n\r\n            value = v ? new Date(v) : null;\r\n            // Define values\r\n            day = value ? value.getUTCDate() : null;\r\n            month = value ? value.getUTCMonth() + 1 : null;\r\n            year = value ? value.getUTCFullYear() : null;\r\n            week = value ? this.getWeekByDate(day, month - 1, year) : null;\r\n            // Exit if nothing to update\r\n            if (this.day === day && this.month === month && this.year === year && this.week === week) {\r\n                return;\r\n            }\r\n            // Assign values to scope\r\n            this.day = day;\r\n            this.month = month;\r\n            this.year = year;\r\n            this.week = week;\r\n\r\n            // Define data sources\r\n            this.days = this.dayList(this.month, this.year);\r\n            this.weeks = this.weekList(this.month, this.year);\r\n        }\r\n\r\n        public setValue() {\r\n            let value;\r\n\r\n            if (this.type === 'weekly') {\r\n                value = new Date(this.year, this.month - 1, this.week, 0, 0, 0, 0);\r\n                value = new Date(value.getTime() - value.getTimezoneOffset() * 60000);\r\n                this.model = value;\r\n            } else {\r\n                value = new Date(this.year, this.month - 1, this.day, 0, 0, 0, 0);\r\n                value = new Date(value.getTime() - value.getTimezoneOffset() * 60000);\r\n                this.model = value;\r\n            }\r\n\r\n            this.prevState = _.cloneDeep(this.currentState);\r\n            this.setCurrent();\r\n            this.onChange();\r\n        }\r\n\r\n    }\r\n\r\n    const daterange: ng.IComponentOptions = {\r\n        bindings: DateRangeBindings,\r\n        templateUrl: 'date_range/DateRange.html',\r\n        controller: DateRangeController \r\n\r\n    };\r\n    angular\r\n        .module('pipDateRange', ['pipDates.Templates'])\r\n        .component('pipDateRange', daterange)\r\n})();\r\n","\r\n(() => {\r\n    class TimeRangeData {\r\n        start: Date;\r\n        end: Date;\r\n    }\r\n\r\n    interface ITimeRangeBindings {\r\n        [key: string]: any;\r\n\r\n        start: any;\r\n        end: any;\r\n    }\r\n\r\n    const TimeRangeBindings: ITimeRangeBindings = {\r\n        start: '<pipStartDate',\r\n        end: '<pipEndDate'\r\n    }\r\n\r\n    class TimeRangeChanges implements ng.IOnChangesObject, ITimeRangeBindings {\r\n        [key: string]: ng.IChangesObject<any>;\r\n\r\n        start: ng.IChangesObject<Date>;\r\n        end: ng.IChangesObject<Date>;\r\n    }\r\n\r\n    class TimeRangeController {\r\n        public data: TimeRangeData;\r\n        public start: Date;\r\n        public end: Date;\r\n\r\n        constructor($scope: ng.IScope, $attrs: ng.IAttributes, $element: JQuery) {\r\n            this.data = new TimeRangeData();\r\n            this.defineStartDate();\r\n            this.defineEndDate();\r\n\r\n            $element.addClass('pip-time-range');\r\n        }\r\n\r\n        public $onChanges(changes: TimeRangeChanges) {\r\n            if (changes.start && changes.start.currentValue) {\r\n                this.data.start = null;\r\n                this.defineStartDate();\r\n            }\r\n            if (changes.end && changes.end.currentValue) {\r\n                this.data.end = null;\r\n                this.defineEndDate();\r\n            }\r\n        }\r\n\r\n        private getDateJSON(value: any): Date {\r\n            return value ? new Date(value) : null;\r\n        }\r\n\r\n        private defineStartDate() {\r\n            if (this.start !== null && this.start !== undefined) {\r\n                this.data.start = _.isDate(this.start) ? this.start\r\n                    : this.getDateJSON(this.start);\r\n            }\r\n        }\r\n\r\n        private defineEndDate() {\r\n            if (this.end !== null && this.end !== undefined) {\r\n                this.data.end = _.isDate(this.end) ? this.end\r\n                    : this.getDateJSON(this.end);\r\n            }\r\n        }\r\n\r\n        private toBoolean(value): boolean {\r\n            if (value == null) return false;\r\n            if (!value) return false;\r\n            value = value.toString().toLowerCase();\r\n            return value == '1' || value == 'true';\r\n        }\r\n    }\r\n\r\n    const TimeRangeComponent: ng.IComponentOptions = {\r\n        bindings: TimeRangeBindings,\r\n        templateUrl: 'time_range/TimeRange.html',\r\n        controller: TimeRangeController\r\n    }\r\n\r\n    angular.module('pipTimeRange', [])\r\n        .component('pipTimeRange', TimeRangeComponent);\r\n\r\n})();\r\n","export const IntervalTimeRange = 30;\r\nexport const MinutesInHour = 60;\r\nexport const HoursInDay = 24;\r\nexport const MillisecondsInSecond = 1000;\r\n\r\n{\r\n    class TimeRangeEditData {\r\n        endTime: number;\r\n        startTime: number;\r\n        startDate: Date;\r\n        endDate: Date;\r\n        duration: number;\r\n        bind: boolean = false;\r\n    }\r\n\r\n\r\n    interface ITimeRangeEditBindings {\r\n        [key: string]: any;\r\n\r\n        pipStartDate: any,\r\n        pipChanged: any,\r\n        pipEndDate: any,\r\n        pipStartLabel: any,\r\n        pipEndLabel: any,\r\n        disabled: any,\r\n        pipHideTime: any,\r\n        pipSize: any\r\n    }\r\n\r\n    const TimeRangeEditBindings: ITimeRangeEditBindings = {\r\n        pipStartDate: '<',\r\n        pipChanged: '=',\r\n        pipEndDate: '<',\r\n        pipStartLabel: '@',\r\n        pipEndLabel: '@',\r\n        disabled: '&ngDisabled',\r\n        pipHideTime: '=',\r\n        pipSize: '='\r\n    }\r\n\r\n    class TimeRangeEditChanges implements ng.IOnChangesObject, ITimeRangeEditBindings {\r\n        [key: string]: ng.IChangesObject<any>;\r\n\r\n        pipStartDate: ng.IChangesObject<Date>;\r\n        pipChanged: ng.IChangesObject<(start: Date, end: Date) => void>\r\n        pipEndDate: ng.IChangesObject<Date>;\r\n        pipStartLabel: ng.IChangesObject<string>;\r\n        pipEndLabel: ng.IChangesObject<string>;\r\n        disabled: ng.IChangesObject<() => void>;\r\n        pipHideTime: ng.IChangesObject<boolean>;\r\n        pipSize: ng.IChangesObject<any>;\r\n    }\r\n\r\n\r\n    class TimeRangeEditController {\r\n        public startLabel: string = 'Start time';\r\n        public endLabel: string = 'End time';\r\n        public pipStartLabel: string;\r\n        public pipEndLabel: string;\r\n\r\n        public pipEndDate: Date;\r\n        public pipStartDate: Date;\r\n        public pipHideTime: boolean;\r\n        public pipSize;\r\n        public showTime: boolean;\r\n        public data: TimeRangeEditData;\r\n        public intervalTimeCollection: any;\r\n        public disabled: () => boolean;\r\n\r\n        public pipChanged: (start: Date, end: Date) => void;\r\n\r\n        constructor(\r\n            private $injector: angular.auto.IInjectorService,\r\n            private pipDateConvert,\r\n            private $scope: ng.IScope,\r\n            $element: JQuery) {\r\n\r\n            this.translate();\r\n            this.intervalTimeCollection = this.getTimeInterval();\r\n            this.data = new TimeRangeEditData();\r\n            this.initDate();\r\n            this.defineDate();\r\n\r\n            // Add class\r\n            $element.addClass('pip-time-range-edit');\r\n        }\r\n\r\n        public $onChanges(changes: TimeRangeEditChanges) {\r\n            if (changes.pipStartDate && changes.pipStartDate.currentValue) {\r\n                this.pipStartDate = changes.pipStartDate.currentValue;\r\n                this.initDate();\r\n                this.defineDate();\r\n            }\r\n            if (changes.pipEndDate && changes.pipEndDate.currentValue) {\r\n                this.pipEndDate = changes.pipEndDate.currentValue;\r\n                this.initDate();\r\n                this.defineDate();\r\n            }\r\n\r\n        }\r\n\r\n        private translate() {\r\n            let pipTranslate: any = this.$injector.has('pipTranslate') ? this.$injector.get('pipTranslate') : null;\r\n\r\n            if (pipTranslate) {\r\n                pipTranslate.setTranslations('en', {\r\n                    EVENT_NEW_START_TIME: 'Start time',\r\n                    EVENT_NEW_END_TIME: 'End time'\r\n                });\r\n                pipTranslate.setTranslations('ru', {\r\n                    EVENT_NEW_START_TIME: 'Начало',\r\n                    EVENT_NEW_END_TIME: 'Конец'\r\n                });\r\n                this.startLabel = this.pipStartLabel ? pipTranslate.translate(this.pipStartLabel)\r\n                    : pipTranslate.translate('EVENT_NEW_START_TIME');\r\n                this.endLabel = this.pipEndLabel ? pipTranslate.translate(this.pipEndLabel)\r\n                    : pipTranslate.translate('EVENT_NEW_END_TIME');\r\n            }\r\n        }\r\n\r\n        private getDateJSON(value: any): Date {\r\n            return value ? new Date(value) : null;\r\n        }\r\n\r\n        private setDuration() {\r\n            let start, end;\r\n\r\n            if (!this.data.startDate || !this.data.endDate) {\r\n                return null;\r\n            }\r\n\r\n            start = new Date(this.data.startDate.getTime() + this.data.startTime * MinutesInHour * MillisecondsInSecond);\r\n            end = new Date(this.data.endDate.getTime() + this.data.endTime * MinutesInHour * MillisecondsInSecond);\r\n\r\n            return end - start;\r\n        }\r\n\r\n        private validateStartDate() {\r\n            let date: Date, start: Date, end: Date, endTime: number, startTime: number;\r\n            // если начальная дата не задана, обнуляем и выходим\r\n            if (!this.data.startDate) {\r\n                this.data.startTime = null;\r\n\r\n                return;\r\n            }\r\n\r\n            // еcли не задано начальное время - задаем его\r\n            if (_.isUndefined(this.data.startTime) || _.isNull(this.data.startTime)) {\r\n                if (!this.data.endTime) {\r\n                    start = new Date();\r\n                    startTime = date.getTime() - this.pipDateConvert.toStartDay(date);\r\n                    this.data.startTime = Math.floor(startTime / (IntervalTimeRange * MinutesInHour * MillisecondsInSecond)) * IntervalTimeRange;\r\n                } else {\r\n                    this.data.startTime = this.data.endTime === 0 ? 0 : this.data.endTime - IntervalTimeRange;\r\n                }\r\n            }\r\n\r\n            start = new Date(this.data.startDate.getTime() + this.data.startTime * MinutesInHour * MillisecondsInSecond);\r\n\r\n            // Если есть длительность, то сохраняем ее. Длительность можно изменить только изменяя конечную дату\r\n            if (this.data.duration) {\r\n                end = new Date(start.getTime() + this.data.duration);\r\n                this.data.endDate = this.pipDateConvert.toStartDay(end);\r\n                endTime = end.getTime() - this.data.endDate.getTime();\r\n                this.data.endTime = Math.floor(endTime / (IntervalTimeRange * MinutesInHour * MillisecondsInSecond)) * IntervalTimeRange;\r\n            } else {\r\n                // Если нет длительности сравниваем даты\r\n                end = new Date(this.data.endDate.getTime() + this.data.endTime * MinutesInHour * MillisecondsInSecond);\r\n                if (start >= end) {\r\n                    // Если начальная дата больше, то двигаем конечную дату\r\n                    this.data.endDate = this.pipDateConvert.toStartDay(new Date(start.getTime() + (IntervalTimeRange * MinutesInHour * MillisecondsInSecond)));\r\n                    this.data.endTime = (this.data.startTime + IntervalTimeRange) % (HoursInDay * MinutesInHour); // минут в сутках\r\n                }\r\n            }\r\n\r\n            this.data.startTime = Math.round(this.data.startTime / IntervalTimeRange) * IntervalTimeRange;\r\n        }\r\n\r\n\r\n        private validateEndDate() {\r\n            let date: any, start: Date, end: Date;\r\n\r\n            if (!this.data.endDate) {\r\n                this.data.endTime = null;\r\n\r\n                return;\r\n            }\r\n\r\n            // еcли не задано конечное время - задаем его\r\n            if (_.isUndefined(this.data.endTime) || _.isNull(this.data.endTime)) {\r\n                if (!this.data.startTime) {\r\n                    date = new Date();\r\n                    date = date.getTime() - this.pipDateConvert.toStartDay(date);\r\n                    this.data.endTime = Math.floor(date / (IntervalTimeRange * MinutesInHour * MillisecondsInSecond)) * IntervalTimeRange;\r\n                } else {\r\n                    this.data.endTime = this.data.startTime === (HoursInDay * MinutesInHour - IntervalTimeRange) ? (HoursInDay * MinutesInHour - IntervalTimeRange) : this.data.startTime + IntervalTimeRange;\r\n                }\r\n            }\r\n\r\n            start = new Date(this.data.startDate.getTime() + this.data.startTime * MinutesInHour * MillisecondsInSecond);\r\n            end = new Date(this.data.endDate.getTime() + this.data.endTime * MinutesInHour * MillisecondsInSecond);\r\n\r\n            if (start >= end) {\r\n                // Если начальная дата больше, то двигаем начальную дату\r\n                this.data.startDate = this.pipDateConvert.toStartDay(new Date(end.getTime() - IntervalTimeRange * MinutesInHour * MillisecondsInSecond));\r\n                this.data.startTime = this.data.endTime % (HoursInDay * MinutesInHour) === 0 ? (HoursInDay * MinutesInHour - IntervalTimeRange) : this.data.endTime - IntervalTimeRange;\r\n            }\r\n\r\n            this.data.endTime = Math.round(this.data.endTime / IntervalTimeRange) * IntervalTimeRange;\r\n            this.data.duration = this.setDuration();\r\n        }\r\n\r\n        private setDate() {\r\n            let time: number;\r\n\r\n            if (!this.data) this.data = new TimeRangeEditData();\r\n            this.data.bind = false;\r\n\r\n            if (this.data.startDate) {\r\n                time = this.data.startTime ? this.data.startTime * MinutesInHour * MillisecondsInSecond : 0;\r\n                this.pipStartDate = new Date(this.data.startDate.getTime() + time);\r\n            }\r\n\r\n            if (this.data.endDate) {\r\n                time = this.data.endTime ? this.data.endTime * MinutesInHour * MillisecondsInSecond : 0;\r\n                this.pipEndDate = new Date(this.data.endDate.getTime() + time);\r\n            }\r\n\r\n            this.data.bind = true;\r\n        }\r\n\r\n        private defineDate() {\r\n            let start: Date, end: Date;\r\n\r\n            if (this.pipStartDate !== null && this.pipStartDate !== undefined) {\r\n                start = _.isDate(this.pipStartDate) ? this.pipStartDate : null;\r\n\r\n                if (!start) {\r\n                    start = this.getDateJSON(this.pipStartDate);\r\n                }\r\n\r\n                this.data.startDate = this.pipDateConvert.toStartDay(start);\r\n                this.data.startTime = (<any>new Date(start) - <any>this.data.startDate) / (MinutesInHour * MillisecondsInSecond);\r\n            }\r\n\r\n            if (this.pipEndDate !== null && this.pipEndDate !== undefined) {\r\n                end = _.isDate(this.pipEndDate) ? this.pipEndDate : null;\r\n\r\n                if (!start) {\r\n                    end = this.getDateJSON(this.pipEndDate);\r\n                }\r\n\r\n                this.data.endDate = this.pipDateConvert.toStartDay(end);\r\n                this.data.endTime = (<any>new Date(end) - <any>this.data.endDate) / (MinutesInHour * MillisecondsInSecond);\r\n            }\r\n\r\n            this.validateStartDate();\r\n            this.validateEndDate();\r\n            this.data.duration = this.setDuration();\r\n            this.setDate();\r\n        }\r\n\r\n        private getTimeInterval() {\r\n            let result, minutes: number;\r\n\r\n            result = [];\r\n            for (let i: number = 0; i < 24; i++) {\r\n                for (let j: number = 0; j < 2; j++) {\r\n                    minutes = j * IntervalTimeRange;\r\n                    result.push({\r\n                        id: i * MinutesInHour + minutes,\r\n                        time: _.pad(i.toString(), 3, '0').substr(0, 2) + ':' + _.pad(minutes.toString(), 2, '0')\r\n                    });\r\n                }\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        private toBoolean(value: any): boolean {\r\n            if (value == null) return false;\r\n            if (!value) return false;\r\n            value = value.toString().toLowerCase();\r\n            return value == '1' || value == 'true';\r\n        }\r\n\r\n        private initDate() {\r\n            this.data.startDate = null;\r\n            this.data.startTime = null;\r\n            this.data.endDate = null;\r\n            this.data.endTime = null;\r\n            this.data.duration = null;\r\n            this.showTime = !this.toBoolean(this.pipHideTime);\r\n        }\r\n\r\n        public onChangeStartDate(newV) {\r\n            this.validateStartDate();\r\n            this.data.duration = this.setDuration();\r\n            this.setDate();\r\n            this.pipChanged(this.pipStartDate, this.pipEndDate);\r\n        };\r\n\r\n        public onChangeEndDate() {\r\n            this.validateEndDate();\r\n            this.data.duration = this.setDuration();\r\n            this.setDate();\r\n            this.pipChanged(this.pipStartDate, this.pipEndDate);\r\n        };\r\n\r\n        public onChangeStartTime() {\r\n            if (!this.data.startDate) {\r\n                this.data.startDate = this.pipDateConvert.toStartDay(new Date());\r\n            }\r\n            this.validateStartDate();\r\n            this.data.duration = this.setDuration();\r\n            this.setDate();\r\n            this.pipChanged(this.pipStartDate, this.pipEndDate);\r\n        };\r\n\r\n        public onChangeEndTime() {\r\n            if (!this.data.endDate) {\r\n                this.data.endDate = this.pipDateConvert.toStartDay(new Date());\r\n            }\r\n\r\n            this.validateEndDate();\r\n            this.data.duration = this.setDuration();\r\n            this.setDate();\r\n            this.pipChanged(this.pipStartDate, this.pipEndDate);\r\n        };\r\n\r\n        public isDisabled() {\r\n            if (this.disabled) {\r\n                return this.disabled();\r\n            }\r\n\r\n            return false;\r\n        };\r\n\r\n    }\r\n\r\n    const TimeRangeEditComponent: ng.IComponentOptions = {\r\n        bindings: TimeRangeEditBindings,\r\n        templateUrl: 'time_range_edit/TimeRangeEdit.html',\r\n        controller: TimeRangeEditController\r\n    };\r\n    angular.module('pipTimeRangeEdit', [])\r\n        .component('pipTimeRangeEdit', TimeRangeEditComponent)\r\n\r\n}\r\n","(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('date/Date.html',\n    '<div class=\"pip-date layout-row flex\" tabindex=\"-1\"><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-day flex\" ng-disabled=\"$ctrl.disableControls\" ng-model=\"$ctrl.day\" placeholder=\"{{$ctrl.dayLabel}}\" ng-change=\"$ctrl.setValue()\"><md-option ng-value=\"opt\" ng-repeat=\"opt in $ctrl.days track by opt\">{{:: opt }}</md-option></md-select></md-input-container><div class=\"input-container-separator flex-fixed\"></div><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-monthflex\" ng-disabled=\"$ctrl.disableControls\" ng-model=\"$ctrl.month\" placeholder=\"{{$ctrl.monthLabel}}\" ng-change=\"$ctrl.onMonthChanged()\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in $ctrl.months track by opt.id\">{{:: opt.name }}</md-option></md-select></md-input-container><div class=\"input-container-separator flex-fixed\"></div><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-year flex\" ng-disabled=\"$ctrl.disableControls\" ng-model=\"$ctrl.year\" placeholder=\"{{$ctrl.yearLabel}}\" ng-change=\"$ctrl.onYearChanged()\"><md-option ng-value=\"opt\" ng-repeat=\"opt in $ctrl.years track by opt\">{{:: opt }}</md-option></md-select></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('date_range/DateRange.html',\n    '<div class=\"pip-date-range layout-row flex\" tabindex=\"-1\"><md-input-container ng-show=\"$ctrl.isDay()\" class=\"input-container pip-day flex\" ng-class=\"{\\'flex-fixed\\' : $ctrl.$mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-day\" ng-class=\"{\\'pip-no-line\\' : $ctrl.pipNoLine}\" ng-disable=\"{{$ctrl.disableControls}}\" md-on-open=\"$ctrl.onDayClick()\" ng-model=\"$ctrl.day\" ng-change=\"$ctrl.setValue()\" placeholder=\"{{$ctrl.dayLabel}}\" aria-label=\"DAY\"><md-option ng-value=\"opt\" ng-repeat=\"opt in $ctrl.days track by opt\">{{$ctrl.nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container ng-show=\"$ctrl.isWeek()\" class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $ctrl.$mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-week\" ng-class=\"{\\'pip-no-line\\' : $ctrl.pipNoLine}\" ng-disable=\"{{$ctrl.disableControls}}\" ng-model=\"$ctrl.week\" ng-change=\"$ctrl.onWeekChange()\" placeholder=\"{{$ctrl.weekLabel}}\" aria-label=\"WEEK\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in $ctrl.weeks track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><div class=\"flex-fixed\" ng-class=\"{\\'space16\\': $ctrl.$mdMedia(\\'gt-xs\\'), \\'space8\\': $ctrl.$mdMedia(\\'xs\\')}\" ng-show=\"$ctrl.isDay() || $ctrl.isWeek()\"></div><md-input-container ng-show=\"$ctrl.isMonth() && !$ctrl.monthFormatShort\" class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $ctrl.$mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-month\" ng-class=\"{\\'pip-no-line\\' : $ctrl.pipNoLine}\" ng-disable=\"{{$ctrl.disableControls}}\" md-on-open=\"$ctrl.onMonthClick()\" ng-model=\"$ctrl.month\" ng-change=\"$ctrl.onMonthChanged()\" placeholder=\"{{$ctrl.monthLabel}}\" aria-label=\"MONTH\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in $ctrl.months track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container ng-show=\"$ctrl.isMonth() && $ctrl.monthFormatShort\" class=\"flex input-container\" ng-class=\"{\\'flex-fixed\\' : $ctrl.$mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-month\" ng-class=\"{\\'pip-no-line\\' : $ctrl.pipNoLine}\" ng-disable=\"{{$ctrl.disableControls}}\" md-on-open=\"$ctrl.onMonthClick()\" ng-model=\"$ctrl.month\" ng-change=\"$ctrl.onMonthChanged()\" placeholder=\"{{$ctrl.monthLabel}}\" aria-label=\"MONTH\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in $ctrl.shortMonths track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><div class=\"flex-fixed\" ng-class=\"{\\'space16\\': $ctrl.$mdMedia(\\'gt-xs\\'), \\'space8\\': $ctrl.$mdMedia(\\'xs\\')}\" ng-show=\"$ctrl.isMonth()\"></div><md-input-container class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $ctrl.$mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-year\" ng-class=\"{\\'pip-no-line\\' : $ctrl.pipNoLine}\" ng-disable=\"{{$ctrl.disableControls}}\" md-on-open=\"$ctrl.onYearClick()\" ng-model=\"$ctrl.year\" ng-change=\"$ctrl.onYearChanged()\" placeholder=\"{{$ctrl.yearLabel}}\" aria-label=\"YEAR\"><md-option ng-value=\"opt\" ng-repeat=\"opt in $ctrl.years track by opt\">{{ opt }}</md-option></md-select></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('time_range/TimeRange.html',\n    '<p><span ng-if=\"$ctrl.data.start != null\">{{$ctrl.data.start | formatLongDateTime}}</span> <span class=\"separator\" ng-if=\"$ctrl.data.start && $ctrl.data.end\">-</span> <span ng-if=\"$ctrl.data.end != null\">{{$ctrl.data.end | formatLongDateTime}}</span></p>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('time_range_edit/TimeRangeEdit.html',\n    '<div class=\"event-edit layout-row layout-xs-column flex layout-align-start-start\"><div flex=\"47\" class=\"start-time-container\"><p class=\"text-caption text-grey\">{{$ctrl.startLabel}}</p><div class=\"layout-row layout-align-space-between-center\"><div class=\"pip-datepicker-container\" flex=\"49\"><md-datepicker ng-model=\"$ctrl.data.startDate\" xmd-placeholder=\"{{$ctrl.startLabel}}\" ng-change=\"$ctrl.onChangeStartDate()\" ng-disabled=\"$ctrl.isDisabled()\" aria-label=\"START-DATE\"></md-datepicker></div><div flex=\"\" ng-if=\"$ctrl.showTime\"><md-input-container class=\"input-container\"><md-select aria-label=\"START-TIME\" ng-model=\"$ctrl.data.startTime\" ng-disabled=\"$ctrl.isDisabled()\" ng-change=\"$ctrl.onChangeStartTime($ctrl.data.startTime)\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in $ctrl.intervalTimeCollection track by opt.id\">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex=\"47\" class=\"end-time-container\"><p class=\"text-caption text-grey\">{{$ctrl.endLabel}}</p><div class=\"layout-row layout-align-space-between-center\"><div class=\"pip-datepicker-container flex-49\"><md-datepicker ng-model=\"$ctrl.data.endDate\" xmd-placeholder=\"{{$ctrl.endLabel}}\" ng-disabled=\"$ctrl.isDisabled()\" ng-change=\"$ctrl.onChangeEndDate()\" aria-label=\"END-DATE\"></md-datepicker></div><div flex=\"\" ng-if=\"$ctrl.showTime\"><md-input-container class=\"input-container\"><md-select aria-label=\"END-TIME\" ng-model=\"$ctrl.data.endTime\" ng-change=\"$ctrl.onChangeEndTime()\" ng-disabled=\"$ctrl.isDisabled()\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in $ctrl.intervalTimeCollection track by opt.id\">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-dates-html.min.js.map\n","import { IChartColorsService } from '../chart_colors/IChartColorsService';\r\n\r\n{\r\n    interface IBarChartBindings {\r\n        [key: string]: any;\r\n\r\n        series: any;\r\n        xTickFormat: any;\r\n        yTickFormat: any;\r\n        interactiveLegend: any;\r\n    }\r\n\r\n    const BarChartBindings: IBarChartBindings = {\r\n        series: '<pipSeries',\r\n        xTickFormat: '<?pipXTickFormat',\r\n        yTickFormat: '<?pipYTickFormat',\r\n        interactiveLegend: '<?pipInterLegend'\r\n    }\r\n\r\n    class BarChartBindingsChanges implements IBarChartBindings, ng.IOnChangesObject {\r\n        [key: string]: any;\r\n\r\n        series: ng.IChangesObject < any > ;\r\n        xTickFormat: ng.IChangesObject < any > ;\r\n        yTickFormat: ng.IChangesObject < any > ;\r\n        interactiveLegend: ng.IChangesObject < boolean > ;\r\n    }\r\n\r\n    class BarChartController implements ng.IController, IBarChartBindings {\r\n        public series: any;\r\n        public xTickFormat: any;\r\n        public yTickFormat: any;\r\n        public interactiveLegend: boolean;\r\n        public legend: any;\r\n\r\n        private data: any;\r\n        private chart: nv.DiscreteBarChart = null;\r\n        private chartElem: any;\r\n        private colors: string[];\r\n        private height: number = 270;\r\n\r\n        constructor(\r\n            private $element: JQuery,\r\n            private $scope: ng.IScope,\r\n            private $timeout: ng.ITimeoutService,\r\n            private pipChartColors: IChartColorsService\r\n        ) {\r\n            \"ngInject\";\r\n\r\n            this.colors = this.pipChartColors.generateMaterialColors();\r\n            $scope.$watch('$ctrl.legend', (updatedLegend) => {\r\n                if (!updatedLegend) return;\r\n\r\n                this.data = this.prepareData(updatedLegend);\r\n                this.legend = updatedLegend;\r\n\r\n                this.updateChart();\r\n            }, true);\r\n        }\r\n\r\n        public $onInit() {\r\n            this.data = this.prepareData(this.series);\r\n            this.legend = _.clone(this.series);\r\n            this.generateParameterColor();\r\n            ( < any > d3.scale).paletteColors = () => {\r\n                return d3.scale.ordinal().range(this.colors.map((color) => {\r\n                    return this.pipChartColors.materialColorToRgba(color);\r\n                }));\r\n            };\r\n\r\n            this.instantiateChart();\r\n        }\r\n\r\n        public $onChanges(changes: BarChartBindingsChanges) {\r\n            this.xTickFormat = changes.xTickFormat ? changes.xTickFormat.currentValue : null;\r\n            this.yTickFormat = changes.yTickFormat ? changes.yTickFormat.currentValue : null;\r\n            this.interactiveLegend = changes.interactiveLegend ? changes.interactiveLegend.currentValue : null;\r\n\r\n            if (changes.series && changes.series.currentValue !== changes.series.previousValue) {\r\n                this.series = changes.series.currentValue;\r\n                this.data = this.prepareData(this.series);\r\n                this.legend = _.clone(this.series);\r\n                this.generateParameterColor();\r\n                this.updateChart();\r\n            }\r\n        }\r\n\r\n        private updateChart() {\r\n            if (this.chart) {\r\n                this.chartElem.datum(this.data).call(this.chart);\r\n                this.configBarWidthAndLabel();\r\n                this.drawEmptyState();\r\n            }\r\n        }\r\n\r\n        private instantiateChart() {\r\n            nv.addGraph(() => {\r\n                this.chart = nv.models.discreteBarChart()\r\n                    .margin({\r\n                        top: 10,\r\n                        right: 0,\r\n                        bottom: 10,\r\n                        left: 50\r\n                    })\r\n                    .x((d) => {\r\n                        return d.label || d.key || d.x;\r\n                    })\r\n                    .y((d) => {\r\n                        return d.value;\r\n                    })\r\n                    .showValues(true)\r\n                    .staggerLabels(true)\r\n                    .showXAxis(true)\r\n                    .showYAxis(true)\r\n                    .valueFormat( < any > d3.format('d'))\r\n                    .duration(0)\r\n                    .height(this.height)\r\n                    .color((d) => {\r\n                        return this.data[d.series].color || this.pipChartColors.materialColorToRgba(this.colors[d.series]);\r\n                    });\r\n\r\n                this.chart.tooltip.enabled(false);\r\n                this.chart.noData('There is no data right now...');\r\n\r\n                this.chart.yAxis\r\n                    .tickFormat((d) => {\r\n                        return this.yTickFormat ? this.yTickFormat(d) : d;\r\n                    });\r\n\r\n                this.chart.xAxis\r\n                    .tickFormat((d) => {\r\n                        return this.xTickFormat ? this.xTickFormat(d) : d;\r\n                    });\r\n\r\n                this.chartElem = < any > d3.select(this.$element.get(0))\r\n                    .select('.bar-chart svg')\r\n                    .datum(this.data)\r\n                    .style('height', '285px')\r\n                    .call(this.chart);\r\n\r\n                nv.utils.windowResize(() => {\r\n                    this.chart.update();\r\n                    this.configBarWidthAndLabel(0);\r\n                    this.drawEmptyState();\r\n                });\r\n\r\n                return this.chart;\r\n            }, () => {\r\n                this.$timeout(() => {\r\n                    this.configBarWidthAndLabel();\r\n                }, 0);\r\n                this.drawEmptyState();\r\n            });\r\n        }\r\n\r\n        private prepareData(data): any {\r\n            const result = [];\r\n            _.each(data, (seria) => {\r\n                if (!seria.disabled && seria.values) result.push(seria);\r\n            });\r\n            return _.cloneDeep(result);\r\n        }\r\n\r\n        private drawEmptyState() {\r\n            if (this.$element.find('.nv-noData').length === 0) {\r\n                d3.select(this.$element.find('.empty-state')[0]).remove();\r\n            } else {\r\n                const g = this.chartElem.append('g').classed('empty-state', true),\r\n                    width = this.$element.find('.nvd3-svg').innerWidth(),\r\n                    margin = width * 0.1;\r\n\r\n                g.append('g')\r\n                    .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                    .append('rect')\r\n                    .attr('height', this.height - 10)\r\n                    .attr('width', 38);\r\n\r\n                g.append('g')\r\n                    .attr('transform', 'translate(42, 60)')\r\n                    .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                    .append('rect')\r\n                    .attr('height', 200)\r\n                    .attr('width', 38);\r\n\r\n                g.append('g')\r\n                    .attr('transform', 'translate(84, 160)')\r\n                    .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                    .append('rect')\r\n                    .attr('height', 100)\r\n                    .attr('width', 38);\r\n\r\n                g.attr('transform', 'translate(' + (50 + margin) + ', 0), ' + 'scale(' + ((width - 2 * margin) / 126) + ', 1)');\r\n            }\r\n        }\r\n\r\n        private configBarWidthAndLabel(timeout: number = 1000) {\r\n            const labels = this.$element.find('.nv-bar text'),\r\n                chartBars = this.$element.find('.nv-bar'),\r\n                parentHeight = ( < any > this.$element.find('.nvd3-svg')[0]).getBBox().height;\r\n\r\n            d3.select(this.$element.find('.bar-chart')[0]).classed('visible', true);\r\n\r\n            _.each(chartBars, (item: EventTarget, index: number) => {\r\n                const barHeight = Number(d3.select(item).select('rect').attr('height')),\r\n                    barWidth = Number(d3.select(item).select('rect').attr('width')),\r\n                    element = d3.select(item),\r\n                    x = d3.transform(element.attr('transform')).translate[0],\r\n                    y = d3.transform(element.attr('transform')).translate[1];\r\n\r\n                element\r\n                    .attr('transform', 'translate(' + Number(x + index * (barWidth + 15)) + ', ' + (this.height - 20) + ')')\r\n                    .select('rect').attr('height', 0);\r\n\r\n                element\r\n                    .transition()\r\n                    .duration(timeout)\r\n                    .attr('transform', 'translate(' + Number(x + index * (barWidth + 15)) + ', ' + y + ')')\r\n                    .select('rect').attr('height', barHeight);\r\n\r\n                d3.select(labels[index])\r\n                    .attr('dy', barHeight / 2 + 10)\r\n                    .attr('x', barWidth / 2);\r\n            });\r\n        }\r\n\r\n        private generateParameterColor() {\r\n            if (!this.data) return;\r\n\r\n            _.each(this.data, (item: any, index: number) => {\r\n                if (item.values[0]) {\r\n                    item.values[0].color = item.values[0].color || this.pipChartColors.getMaterialColor(index, this.colors);\r\n                    item.color = item.values[0].color;\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    const BarChart: ng.IComponentOptions = {\r\n        bindings: BarChartBindings,\r\n        templateUrl: 'bar_chart/BarChart.html',\r\n        controller: BarChartController\r\n    }\r\n\r\n    angular\r\n        .module('pipBarCharts', [])\r\n        .component('pipBarChart', BarChart);\r\n}","import { IChartColorsService } from './IChartColorsService';\r\n\r\n{\r\n    class ChartColorsService implements IChartColorsService {\r\n        constructor(\r\n            private $mdColorPalette: angular.material.IColorPalette\r\n        ) { \r\n            \"ngInject\";\r\n        }\r\n\r\n        public getMaterialColor(index: number, colors: string[]): string {\r\n            if (!colors || colors.length < 1) return null;\r\n\r\n            if (index >= colors.length) {\r\n                index = 0;\r\n            }\r\n\r\n            return this.materialColorToRgba(colors[index]);\r\n        }\r\n\r\n        public materialColorToRgba(color: string): string {\r\n            return 'rgba(' + this.$mdColorPalette[color][500].value[0] + ',' +\r\n                this.$mdColorPalette[color][500].value[1] + ',' +\r\n                this.$mdColorPalette[color][500].value[2] + ',' +\r\n                (this.$mdColorPalette[color][500].value[3] || 1) + ')';\r\n        }\r\n\r\n        public generateMaterialColors(): string[] {\r\n            let colors = _.map((<any>this.$mdColorPalette), (palette, color: string) => {\r\n                return color;\r\n            });\r\n            colors = _.filter(colors, (color: string) => {\r\n                return _.isObject(this.$mdColorPalette[color]) && _.isObject(this.$mdColorPalette[color][500]) && _.isArray(this.$mdColorPalette[color][500].value);\r\n            });\r\n\r\n            return colors;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipChartColors', [])\r\n        .service('pipChartColors', ChartColorsService);\r\n}","import { IChartColorsService } from '../chart_colors/IChartColorsService';\r\n\r\n{\r\n    interface IChartLegendBindings {\r\n        [key: string]: any;\r\n\r\n        series: any;\r\n        interactive: any;\r\n    }\r\n\r\n    const ChartLegendBindings: IChartLegendBindings = {\r\n        series: '<pipSeries',\r\n        interactive: '<pipInteractive'\r\n    }\r\n\r\n    class ChartLegendBindingsChanges implements ng.IOnChangesObject, IChartLegendBindings {\r\n        [key: string]: any;\r\n\r\n        series: ng.IChangesObject < any > ;\r\n        interactive: ng.IChangesObject < boolean > ;\r\n    }\r\n\r\n    class ChartLegendController implements ng.IController, IChartLegendBindings {\r\n        public series: any;\r\n        public interactive: boolean;\r\n\r\n        private colors: string[];\r\n\r\n        constructor(\r\n            private $element: JQuery,\r\n            private $scope: ng.IScope,\r\n            private $timeout: ng.ITimeoutService,\r\n            private pipChartColors: IChartColorsService\r\n        ) {\r\n            \"ngInject\";\r\n            this.colors = this.pipChartColors.generateMaterialColors();\r\n        }\r\n\r\n        public $onInit() {\r\n            this.updateLegends();\r\n        }\r\n\r\n        public $onChanges(changes: ChartLegendBindingsChanges) {\r\n            if (changes.series && changes.series.currentValue !== changes.series.previousValue) {\r\n                this.series = changes.series.currentValue;\r\n                this.updateLegends();\r\n            }\r\n\r\n            if (changes.interactive && changes.interactive.currentValue !== changes.interactive.previousValue) {\r\n                this.interactive = changes.interactive.currentValue;\r\n                if (this.interactive === true) {\r\n                    this.$timeout(() => {\r\n                        this.colorCheckboxes();\r\n                    }, 0);\r\n                }\r\n            }\r\n        }\r\n\r\n        private updateLegends() {\r\n            this.$timeout(() => {\r\n                this.animate();\r\n                this.colorCheckboxes();\r\n            }, 0);\r\n            this.prepareSeries();\r\n        }\r\n\r\n        private colorCheckboxes() {\r\n            const checkboxContainers = this.$element.find('md-checkbox .md-container');\r\n\r\n            _.each(checkboxContainers, (item: EventTarget, index: number) => {\r\n                if (index >= this.series.length) {\r\n                    return\r\n                }\r\n                $(item)\r\n                    .css('color', this.series[index].color || this.colors[index])\r\n                    .find('.md-icon')\r\n                    .css('background-color', this.series[index].color || this.colors[index]);\r\n            });\r\n        }\r\n\r\n        private animate() {\r\n            const legendTitles = this.$element.find('.chart-legend-item');\r\n\r\n            _.each(legendTitles, (item: EventTarget, index: number) => {\r\n                this.$timeout(() => {\r\n                    $(item).addClass('visible');\r\n                }, 200 * index);\r\n            });\r\n        }\r\n\r\n        private prepareSeries() {\r\n            if (!this.series) return;\r\n\r\n            _.each(this.series, (item: any, index: number) => {\r\n                const materialColor = this.pipChartColors.getMaterialColor(index, this.colors);\r\n                item.color = item.color || (item.values && item.values[0] && item.values[0].color ? item.values[0].color : materialColor);\r\n                item.disabled = item.disabled || false;\r\n            });\r\n        }\r\n    }\r\n\r\n    const ChartLegend: ng.IComponentOptions = {\r\n        bindings: ChartLegendBindings,\r\n        templateUrl: 'chart_legend/ChartInteractiveLegend.html',\r\n        controller: ChartLegendController\r\n    }\r\n\r\n    angular\r\n        .module('pipChartLegends', [])\r\n        .component('pipChartLegend', ChartLegend);\r\n}","import { IChartColorsService } from '../chart_colors/IChartColorsService';\r\n\r\n{\r\n    interface ILineChartBindings {\r\n        [key: string]: any;\r\n\r\n        series: any;\r\n        showYAxis: any;\r\n        showXAxis: any;\r\n        xFormat: any;\r\n        xTickFormat: any;\r\n        yTickFormat: any;\r\n        xTickValues: any;\r\n        dynamic: any;\r\n        fixedHeight: any;\r\n        dynamicHeight: any;\r\n        minHeight: any;\r\n        maxHeight: any;\r\n        interactiveLegend: any;\r\n    }\r\n\r\n    const LineChartBindings: ILineChartBindings = {\r\n        series: '<pipSeries',\r\n        showYAxis: '<?pipYAxis',\r\n        showXAxis: '<?pipXAxis',\r\n        xFormat: '<?pipXFormat',\r\n        xTickFormat: '<?pipXTickFormat',\r\n        yTickFormat: '<?pipYTickFormat',\r\n        xTickValues: '<?pipXTickValues',\r\n        dynamic: '<?pipDynamic',\r\n        fixedHeight: '<?pipDiagramHeight',\r\n        dynamicHeight: '<?pipDynamicHeight',\r\n        minHeight: '<?pipMinHeight',\r\n        maxHeight: '<?pipMaxHeight',\r\n        interactiveLegend: '<?pipInterLegend'\r\n    }\r\n\r\n    class LineChartBindingsChanges implements ng.IOnChangesObject, ILineChartBindings {\r\n        [key: string]: any;\r\n\r\n        fixedHeight: ng.IChangesObject < number > ;\r\n        dynamicHeight: ng.IChangesObject < boolean > ;\r\n        minHeight: ng.IChangesObject < number > ;\r\n        maxHeight: ng.IChangesObject < number > ;\r\n\r\n        series: ng.IChangesObject < any > ;\r\n        showYAxis: ng.IChangesObject < boolean > ;\r\n        showXAxis: ng.IChangesObject < boolean > ;\r\n        xFormat: ng.IChangesObject < any > ;\r\n        xTickFormat: ng.IChangesObject < any > ;\r\n        yTickFormat: ng.IChangesObject < any > ;\r\n        xTickValues: ng.IChangesObject < any > ;\r\n        dynamic: ng.IChangesObject < boolean > ;\r\n        interactiveLegend: ng.IChangesObject < boolean > ;\r\n    }\r\n\r\n    class LineChartController implements ng.IController, ILineChartBindings {\r\n        private HEIGHT = 270;\r\n        private chart: nv.LineChart = null;\r\n        private chartElem: any = null;\r\n        private setZoom: Function = null;\r\n        private updateZoomOptions: Function = null;\r\n        private colors: string[];\r\n        \r\n        public fixedHeight: number = this.HEIGHT;\r\n        public dynamicHeight: boolean = false;\r\n        public minHeight: number = this.HEIGHT;\r\n        public maxHeight: number = this.HEIGHT;\r\n        public series: any;\r\n        public showYAxis: boolean = true;\r\n        public showXAxis: boolean = true;\r\n        public xFormat: Function;\r\n        public xTickFormat: Function;\r\n        public yTickFormat: Function;\r\n        public xTickValues: number[];\r\n        public dynamic: boolean = false;\r\n        public interactiveLegend: boolean = false;\r\n        public data: any;\r\n        public legend: any;\r\n        public sourceEvents: any;\r\n\r\n        constructor(\r\n            private $element: JQuery,\r\n            private $scope: ng.IScope,\r\n            private $timeout: ng.ITimeoutService,\r\n            private pipChartColors: IChartColorsService\r\n        ) {\r\n            \"ngInject\";\r\n\r\n            this.colors = this.pipChartColors.generateMaterialColors();\r\n\r\n            $scope.$watch('$ctrl.legend', (updatedLegend) => {\r\n                this.data = this.prepareData(updatedLegend);\r\n                this.legend = updatedLegend;\r\n\r\n                this.updateChart();\r\n            }, true);\r\n\r\n            $scope.$on('$destroy', () => {\r\n                $timeout(() => {\r\n                    d3.selectAll('.nvtooltip').style('opacity', 0);\r\n                }, 800)\r\n            });\r\n        }\r\n\r\n        public $onInit() {\r\n            this.data = this.prepareData(this.series) || [];\r\n            this.legend = _.clone(this.series);\r\n            this.sourceEvents = [];\r\n\r\n            this.generateParameterColor();\r\n\r\n            ( < any > d3.scale).paletteColors = () => {\r\n                return d3.scale.ordinal().range(this.colors.map((color) => {\r\n                    return this.pipChartColors.materialColorToRgba(color);\r\n                }));\r\n            };\r\n\r\n            this.instantiateChart();\r\n        }\r\n\r\n        public $onChanges(changes: LineChartBindingsChanges) {\r\n            this.fixedHeight = changes.fixedHeight ? changes.fixedHeight.currentValue : this.HEIGHT;\r\n            this.minHeight = changes.minHeight ? changes.minHeight.currentValue : this.HEIGHT;\r\n            this.maxHeight = changes.maxHeight ? changes.maxHeight.currentValue : this.HEIGHT;\r\n            this.dynamicHeight = changes.dynamicHeight ? changes.dynamicHeight.currentValue : this.dynamicHeight;\r\n\r\n            this.showXAxis = changes.showXAxis ? changes.showXAxis.currentValue : this.showXAxis;\r\n            this.showYAxis = changes.showYAxis ? changes.showYAxis.currentValue : this.showYAxis;\r\n            this.dynamic = changes.dynamic ? changes.dynamic.currentValue : this.dynamic;\r\n            this.interactiveLegend = changes.interactiveLegend ? changes.interactiveLegend.currentValue : this.interactiveLegend;\r\n\r\n            this.xFormat = changes.xFormat ? changes.xFormat.currentValue : this.xFormat;\r\n            this.xTickFormat = changes.xTickFormat ? changes.xTickFormat.currentValue : this.xTickFormat;\r\n            this.yTickFormat = changes.yTickFormat ? changes.yTickFormat.currentValue : this.yTickFormat;\r\n\r\n            if (changes.xTickValues && changes.xTickValues.currentValue !== changes.xTickValues.previousValue) {\r\n                this.xTickValues = changes.xTickValues.currentValue;\r\n                this.updateXTickValues();\r\n                if (this.chartElem && this.chart) this.chartElem.datum(this.data || []).call(this.chart);\r\n            }\r\n\r\n            if (changes.series && changes.series.currentValue !== changes.series.previousValue) {\r\n                this.updateSeries();\r\n            }\r\n        }\r\n\r\n        private prepareData(data) {\r\n            const result = [];\r\n            _.each(data, (seria) => {\r\n                if (!seria.disabled && seria.values) result.push(seria);\r\n            });\r\n\r\n            return _.cloneDeep(result);\r\n        }\r\n\r\n        private getHeight() {\r\n            /*if (this.dynamicHeight) {\r\n                const heigth = Math.min(Math.max(this.minHeight, this.$element.parent().innerHeight()), this.maxHeight);\r\n                return heigth;\r\n            } else {\r\n                return this.fixedHeight;\r\n            }*/\r\n            return this.dynamicHeight ? Math.min(Math.max(this.minHeight, this.$element.parent().innerHeight()), this.maxHeight) : this.fixedHeight;\r\n        };\r\n\r\n        public zoomIn() {\r\n            if (this.setZoom) {\r\n                this.setZoom('in');\r\n            }\r\n        };\r\n\r\n        public zoomOut() {\r\n            if (this.setZoom) {\r\n                this.setZoom('out');\r\n            }\r\n        };\r\n\r\n        private instantiateChart() {\r\n            nv.addGraph(() => {\r\n                this.chart = nv.models.lineChart()\r\n                    .margin({\r\n                        top: 20,\r\n                        right: 20,\r\n                        bottom: 30,\r\n                        left: 30\r\n                    })\r\n                    .x((d) => {\r\n                        return (d !== undefined && d.x !== undefined) ? (this.xFormat ? this.xFormat(d.x) : d.x) : d;\r\n                    })\r\n                    .y((d) => {\r\n                        return (d !== undefined && d.value !== undefined) ? d.value : d;\r\n                    })\r\n                    .height(this.getHeight() - 50)\r\n                    .useInteractiveGuideline(true)\r\n                    .showXAxis(true)\r\n                    .showYAxis(true)\r\n                    .showLegend(false)\r\n                    .color((d) => {\r\n                        return d.color || ( < any > d3.scale).paletteColors().range();\r\n                    });\r\n\r\n                this.chart.tooltip.enabled(false);\r\n                this.chart.noData('There is no data right now...');\r\n\r\n                this.chart.yAxis\r\n                    .tickFormat((d) => {\r\n                        return this.yTickFormat ? this.yTickFormat(d) : d;\r\n                    });\r\n\r\n                this.chart.xAxis\r\n                    .tickFormat((d) => {\r\n                        return this.xTickFormat ? this.xTickFormat(d) : d;\r\n                    })\r\n                    .tickValues(this.xTickValues && _.isArray(this.xTickValues) && this.xTickValues.length > 2 ?\r\n                        d3.range(this.xTickValues[0], this.xTickValues[1], this.xTickValues[2]) : null);\r\n\r\n                this.chartElem = d3.select(this.$element.get(0)).select('.line-chart svg');\r\n                this.chartElem.datum(this.data || []).style('height', (this.getHeight() - 50) + 'px').call(this.chart);\r\n                // Handle touches for correcting tooltip position\r\n                $('.line-chart svg').on('touchstart touchmove', (e) => {\r\n                    this.$timeout(() => {\r\n                        const tooltip = $('.nvtooltip'),\r\n                            tooltipW = tooltip.innerWidth(),\r\n                            bodyWidth = $('body').innerWidth(),\r\n                            x = e.originalEvent['touches'][0]['pageX'],\r\n                            y = e.originalEvent['touches'][0]['pageY'];\r\n\r\n                        tooltip.css('transform', 'translate(' +\r\n                            (x + tooltipW >= bodyWidth ? (x - tooltipW) : x) + ',' +\r\n                            y + ')');\r\n                        tooltip.css('left', 0);\r\n                        tooltip.css('top', 0);\r\n                    });\r\n                });\r\n\r\n                $('.line-chart svg').on('touchstart touchend', (e) => {\r\n                    const removeTooltip = () => {\r\n                        $('.nvtooltip').css('opacity', 0);\r\n                    };\r\n\r\n                    removeTooltip();\r\n\r\n                    this.$timeout(() => {\r\n                        removeTooltip();\r\n                    }, 500);\r\n                });\r\n\r\n                if (this.dynamic) {\r\n                    this.addZoom(this.chart, this.chartElem);\r\n                }\r\n\r\n                nv.utils.windowResize(() => {\r\n                    this.onResize();\r\n                });\r\n\r\n                this.$scope.$on('pipMainResized', () => {\r\n                    this.onResize();\r\n                });\r\n\r\n                return this.chart;\r\n            }, () => {\r\n                this.drawEmptyState();\r\n            });\r\n        }\r\n\r\n        private updateXTickValues() {\r\n            if (!this.chart) return;\r\n\r\n            this.chart.xAxis\r\n                .tickValues(this.xTickValues && _.isArray(this.xTickValues) && this.xTickValues.length > 2 ?\r\n                    d3.range(this.xTickValues[0], this.xTickValues[1], this.xTickValues[2]) : null);\r\n        }\r\n\r\n        private updateChart() {\r\n            if (this.chart) {\r\n                this.updateXTickValues();\r\n\r\n                this.chartElem.datum(this.data || []).call(this.chart);\r\n                this.drawEmptyState();\r\n\r\n                if (this.updateZoomOptions) this.updateZoomOptions(this.data);\r\n            }\r\n        }\r\n\r\n        private updateSeries() {\r\n            this.data = this.prepareData(this.series);\r\n            this.legend = _.clone(this.series);\r\n\r\n            this.generateParameterColor();\r\n            this.updateChart();\r\n        }\r\n\r\n        private onResize() {\r\n            this.chart.height(this.getHeight() - 50);\r\n            this.chartElem.style('height', (this.getHeight() - 50) + 'px');\r\n            this.chart.update();\r\n            this.drawEmptyState();\r\n        }\r\n\r\n        private drawEmptyState() {\r\n            if (!this.$element.find('text.nv-noData').get(0)) {\r\n                d3.select(this.$element.find('.empty-state')[0]).remove();\r\n            } else {\r\n                const containerWidth = this.$element.find('.line-chart').innerWidth(),\r\n                    containerHeight = this.$element.find('.line-chart').innerHeight();\r\n\r\n                if (this.$element.find('.empty-state').get(0)) {\r\n                    this.chartElem\r\n                        .select('image')\r\n                        .attr('transform', 'scale(' + (containerWidth / 1151) + ',' + (containerHeight / 216) + ')');\r\n                } else {\r\n                    this.chartElem\r\n                        .append(\"defs\")\r\n                        .append(\"pattern\")\r\n                        .attr(\"height\", 1)\r\n                        .attr(\"width\", 1)\r\n                        .attr(\"x\", \"0\")\r\n                        .attr(\"y\", \"0\")\r\n                        .attr(\"id\", \"bg\")\r\n                        .append(\"image\")\r\n                        .attr('x', 17)\r\n                        .attr('y', 0)\r\n                        .attr('height', \"216px\")\r\n                        .attr('width', \"1151px\")\r\n                        .attr('transform', 'scale(' + (containerWidth / 1151) + ',' + (containerHeight / 216) + ')')\r\n                        .attr(\"xlink:href\", \"images/line_chart_empty_state.svg\");\r\n\r\n                    this.chartElem\r\n                        .append('rect')\r\n                        .classed('empty-state', true)\r\n                        .attr('height', \"100%\")\r\n                        .attr('width', \"100%\")\r\n                        .attr('fill', 'url(#bg)');\r\n                }\r\n            }\r\n        }\r\n\r\n        private updateScroll(domains, boundary) {\r\n            const bDiff = boundary[1] - boundary[0],\r\n                domDiff = domains[1] - domains[0],\r\n                isEqual = domDiff / bDiff === 1;\r\n\r\n            $(this.$element[0]).find('.visual-scroll')\r\n                .css('opacity', function () {\r\n                    return isEqual ? 0 : 1;\r\n                });\r\n\r\n            if (isEqual) return;\r\n\r\n            $(this.$element[0]).find('.scrolled-block')\r\n                .css('left', () => {\r\n                    return (domains[0] - boundary[0]) / bDiff * 100 + '%';\r\n                })\r\n                .css('width', () => {\r\n                    return domDiff / bDiff * 100 + '%';\r\n                });\r\n        }\r\n\r\n        private generateParameterColor() {\r\n            if (!this.data) return;\r\n\r\n            _.each(this.data, (item, index: number) => {\r\n                item.color = item.color || this.pipChartColors.getMaterialColor(index, this.colors);\r\n            });\r\n        }\r\n\r\n        private addZoom(chart, svg) {\r\n            // Scale Extent\r\n            const scaleExtent = 4;\r\n\r\n            // Parameters\r\n            let yAxis = null;\r\n            let xAxis = null;\r\n            let xDomain = null;\r\n            let yDomain = null;\r\n            let redraw = null;\r\n\r\n            // Scales\r\n            let xScale = null;\r\n            let yScale = null;\r\n\r\n            // Min/max boundaries\r\n            let x_boundary = null;\r\n            let y_boundary = null;\r\n\r\n            // Create d3 zoom handler\r\n            let d3zoom = d3.behavior.zoom();\r\n            let prevXDomain = null;\r\n            let prevScale = null;\r\n            let prevTranslate = null;\r\n\r\n            const setData = (newChart) => {\r\n                // Parameters\r\n                yAxis = newChart.yAxis;\r\n                xAxis = newChart.xAxis;\r\n                xDomain = newChart.xDomain || xAxis.scale().domain;\r\n                yDomain = newChart.yDomain || yAxis.scale().domain;\r\n                redraw = newChart.update;\r\n\r\n                // Scales\r\n                xScale = xAxis.scale();\r\n                yScale = yAxis.scale();\r\n\r\n                // Min/max boundaries\r\n                x_boundary = xAxis.scale().domain().slice();\r\n                y_boundary = yAxis.scale().domain().slice();\r\n\r\n                // Create d3 zoom handler\r\n                prevXDomain = x_boundary;\r\n                prevScale = d3zoom.scale();\r\n                prevTranslate = d3zoom.translate();\r\n\r\n                // Ensure nice axis\r\n                xScale.nice();\r\n                yScale.nice();\r\n            }\r\n\r\n            setData(chart);\r\n\r\n            // Fix domain\r\n            const fixDomain = (domain, boundary, scale, translate) => {\r\n                if (domain[0] < boundary[0]) {\r\n                    domain[0] = boundary[0];\r\n                    if (prevXDomain[0] !== boundary[0] || scale !== prevScale) {\r\n                        domain[1] += (boundary[0] - domain[0]);\r\n                    } else {\r\n                        domain[1] = prevXDomain[1];\r\n                        translate = _.clone(prevTranslate);\r\n                    }\r\n\r\n                }\r\n                if (domain[1] > boundary[1]) {\r\n                    domain[1] = boundary[1];\r\n                    if (prevXDomain[1] !== boundary[1] || scale !== prevScale) {\r\n                        domain[0] -= (domain[1] - boundary[1]);\r\n                    } else {\r\n                        domain[0] = prevXDomain[0];\r\n                        translate = _.clone(prevTranslate);\r\n                    }\r\n                }\r\n\r\n                d3zoom.translate(translate);\r\n                prevXDomain = _.clone(domain);\r\n                prevScale = _.clone(scale);\r\n                prevTranslate = _.clone(translate);\r\n\r\n                return domain;\r\n            }\r\n\r\n            const updateChart = () => {\r\n                d3zoom.scale(1);\r\n                d3zoom.translate([0, 0]);\r\n                xScale.domain(x_boundary);\r\n                d3zoom.x(xScale).y(yScale);\r\n                svg.call(d3zoom);\r\n            }\r\n\r\n            // Zoom event handler\r\n            const zoomed = () => {\r\n                if (( < any > d3.event).scale === 1) {\r\n                    unzoomed();\r\n                    updateChart();\r\n                } else {\r\n                    xDomain(fixDomain(xScale.domain(), x_boundary, ( < any > d3.event).scale, ( < any > d3.event).translate));\r\n                    redraw();\r\n                }\r\n\r\n                this.updateScroll(xScale.domain(), x_boundary);\r\n            }\r\n\r\n            // Describe set zoom function\r\n            this.setZoom = (which) => {\r\n                const center0 = [svg[0][0].getBBox().width / 2, svg[0][0].getBBox().height / 2];\r\n                const translate0 = d3zoom.translate(),\r\n                    coordinates0 = coordinates(center0);\r\n\r\n                if (which === 'in') {\r\n                    if (prevScale < scaleExtent) d3zoom.scale(prevScale + 0.2);\r\n                } else {\r\n                    if (prevScale > 1) d3zoom.scale(prevScale - 0.2);\r\n                }\r\n\r\n                const center1 = point(coordinates0);\r\n                d3zoom.translate([translate0[0] + center0[0] - center1[0], translate0[1] + center0[1] - center1[1]]);\r\n\r\n                d3zoom.event(svg);\r\n            };\r\n\r\n            const step = (which) => {\r\n                const translate = d3zoom.translate();\r\n\r\n                if (which === 'right') {\r\n                    translate[0] -= 20;\r\n                } else {\r\n                    translate[0] += 20;\r\n                }\r\n\r\n                d3zoom.translate(translate);\r\n                d3zoom.event(svg);\r\n            }\r\n\r\n            const coordinates = (point) => {\r\n                const scale = d3zoom.scale(),\r\n                    translate = d3zoom.translate();\r\n                return [(point[0] - translate[0]) / scale, (point[1] - translate[1]) / scale];\r\n            }\r\n\r\n            const point = (coordinates) => {\r\n                const scale = d3zoom.scale(),\r\n                    translate = d3zoom.translate();\r\n                return [coordinates[0] * scale + translate[0], coordinates[1] * scale + translate[1]];\r\n            }\r\n\r\n            const keypress = () => {\r\n                switch (( < any > d3.event).keyCode) {\r\n                    case 39:\r\n                        step('right');\r\n                        break;\r\n                    case 37:\r\n                        step('left');\r\n                        break;\r\n                    case 107:\r\n                        this.setZoom('in');\r\n                        break;\r\n                    case 109:\r\n                        this.setZoom('out');\r\n                }\r\n            }\r\n\r\n            // Zoom event handler\r\n            const unzoomed = () => {\r\n                xDomain(x_boundary);\r\n                redraw();\r\n                d3zoom.scale(1);\r\n                d3zoom.translate([0, 0]);\r\n                prevScale = 1;\r\n                prevTranslate = [0, 0];\r\n            }\r\n\r\n            // Initialize wrapper\r\n            d3zoom.x(xScale)\r\n                .y(yScale)\r\n                .scaleExtent([1, scaleExtent])\r\n                .on('zoom', zoomed);\r\n\r\n            // Add handler\r\n            svg.call(d3zoom).on('dblclick.zoom', unzoomed);\r\n            $(this.$element.get(0)).addClass('dynamic');\r\n\r\n            // Add keyboard handlers\r\n            svg\r\n                .attr('focusable', false)\r\n                .style('outline', 'none')\r\n                .on('keydown', keypress)\r\n                .on('focus', () => {});\r\n\r\n            const getXMinMax = (data) => {\r\n                let maxVal, minVal = null;\r\n\r\n                for (let i = 0; i < data.length; i++) {\r\n                    if (!data[i].disabled) {\r\n                        const tempMinVal = d3.max(data[i].values, (d: any) => {\r\n                            return this.xFormat ? this.xFormat(d.x) : d.x;\r\n                        });\r\n                        const tempMaxVal = d3.min(data[i].values, (d: any) => {\r\n                            return this.xFormat ? this.xFormat(d.x) : d.x;\r\n                        });\r\n                        minVal = (!minVal || tempMinVal < minVal) ? tempMinVal : minVal;\r\n                        maxVal = (!maxVal || tempMaxVal > maxVal) ? tempMaxVal : maxVal;\r\n                    }\r\n                }\r\n                return [maxVal, minVal];\r\n            };\r\n\r\n            const updateZoomOptions = (data) => {\r\n                yAxis = chart.yAxis;\r\n                xAxis = chart.xAxis;\r\n\r\n                xScale = xAxis.scale();\r\n                yScale = yAxis.scale();\r\n\r\n                x_boundary = getXMinMax(data);\r\n\r\n                if (d3zoom.scale() === 1) {\r\n                    d3zoom.x(xScale).y(yScale);\r\n                    svg.call(d3zoom);\r\n                    d3zoom.event(svg);\r\n                }\r\n\r\n                this.updateScroll(xScale.domain(), x_boundary);\r\n            }\r\n        }\r\n    }\r\n\r\n    const LineChart: ng.IComponentOptions = {\r\n        bindings: LineChartBindings,\r\n        templateUrl: 'line_chart/LineChart.html',\r\n        controller: LineChartController\r\n    }\r\n\r\n    angular\r\n        .module('pipLineCharts', [])\r\n        .component('pipLineChart', LineChart);\r\n}","import { IChartColorsService } from '../chart_colors/IChartColorsService';\r\n\r\n{\r\n    interface IPieChartBindings {\r\n        [key: string]: any;\r\n\r\n        series: any;\r\n        donut: any;\r\n        legend: any;\r\n        total: any;\r\n        size: any;\r\n        centered: any;\r\n    }\r\n\r\n    const PieChartBindings: IPieChartBindings = {\r\n        series: '<pipSeries',\r\n        donut: '<?pipDonut',\r\n        legend: '<?pipShowLegend',\r\n        total: '<?pipShowTotal',\r\n        size: '<?pipPieSize',\r\n        centered: '<?pipCentered'\r\n    }\r\n\r\n    class PieChartBindingsChanges implements ng.IOnChangesObject, IPieChartBindings {\r\n        [key: string]: any;\r\n\r\n        series: ng.IChangesObject < any > ;\r\n        donut: ng.IChangesObject < boolean > ;\r\n        legend: ng.IChangesObject < boolean > ;\r\n        total: ng.IChangesObject < boolean > ;\r\n        size: ng.IChangesObject < number | string > ;\r\n        centered: ng.IChangesObject < boolean > ;\r\n    }\r\n\r\n    class PieChartController implements ng.IController, IPieChartBindings {\r\n        public series: any;\r\n        public donut: boolean = false;\r\n        public legend: boolean = true;\r\n        public total: boolean = true;\r\n        public size: number | string = 250;\r\n        public centered: boolean = false;\r\n\r\n        private data: any;\r\n        private chart: nv.PieChart = null;\r\n        private chartElem: any;\r\n        private titleElem: any;\r\n        private colors: string[];\r\n\r\n        constructor(\r\n            private $element: JQuery,\r\n            private $scope: ng.IScope,\r\n            private $timeout: ng.ITimeoutService,\r\n            private pipChartColors: IChartColorsService\r\n        ) {\r\n            \"ngInject\";\r\n\r\n            this.colors = this.pipChartColors.generateMaterialColors();\r\n        }\r\n\r\n        public $onInit() {\r\n            this.data = this.series;\r\n            this.generateParameterColor();\r\n            ( < any > d3.scale).paletteColors = () => {\r\n                return d3.scale.ordinal().range(this.colors.map((color) => {\r\n                    return this.pipChartColors.materialColorToRgba(color);\r\n                }));\r\n            };\r\n\r\n            this.instantiateChart();\r\n        }\r\n\r\n        public $onChanges(changes: PieChartBindingsChanges) {\r\n            this.legend = changes.legend ? changes.legend.currentValue : this.legend;\r\n            this.centered = changes.centered ? changes.centered.currentValue : this.centered;\r\n            this.donut = changes.donut ? changes.donut.currentValue : this.donut;\r\n            this.size = changes.size ? changes.size.currentValue : this.size;\r\n            this.total = changes.total ? changes.total.currentValue : this.total;\r\n\r\n            if (changes.series && changes.series.currentValue !== changes.series.previousValue) {\r\n                this.data = changes.series.currentValue;\r\n                this.generateParameterColor();\r\n\r\n                if (this.chart) {\r\n                    this.chartElem.datum(this.data).call(this.chart);\r\n                    this.$timeout(() => {\r\n                        this.resizeTitleLabelUnwrap();\r\n                    });\r\n                    this.drawEmptyState(d3.select(this.$element.get(0)).select('.pie-chart svg')[0][0]);\r\n                }\r\n            }\r\n        }\r\n\r\n        private instantiateChart() {\r\n            nv.addGraph(() => {\r\n                this.chart = nv.models.pieChart()\r\n                    .margin({\r\n                        top: 0,\r\n                        right: 0,\r\n                        bottom: 0,\r\n                        left: 0\r\n                    })\r\n                    .x((d) => {\r\n                        return this.donut ? d.value : null;\r\n                    })\r\n                    .y((d) => {\r\n                        return d.value;\r\n                    })\r\n                    .height(Number(this.size))\r\n                    .width(Number(this.size))\r\n                    .showLabels(true)\r\n                    .labelThreshold(.001)\r\n                    .growOnHover(false)\r\n                    .donut(this.donut)\r\n                    .donutRatio(0.5)\r\n                    .color((d) => {\r\n                        return d.color || ( < any > d3.scale).paletteColors().range();\r\n                    });\r\n\r\n                this.chart.tooltip.enabled(false);\r\n                this.chart.noData('There is no data right now...');\r\n                this.chart.showLegend(false);\r\n\r\n                this.chartElem = d3.select(this.$element.get(0))\r\n                    .select('.pie-chart')\r\n                    .style('height', (this.size) + 'px')\r\n                    .style('width', this.centered ? '100%' : (this.size) + 'px')\r\n                    .select('svg')\r\n                    .style('opacity', 0)\r\n                    .datum(this.data || [])\r\n                    .call(this.chart);\r\n\r\n                nv.utils.windowResize(() => {\r\n                    this.chart.update();\r\n                    this.$timeout(() => {\r\n                        this.resizeTitleLabelUnwrap();\r\n                    });\r\n                    this.centerChart();\r\n                    this.drawEmptyState(d3.select(this.$element.get(0)).select('.pie-chart svg')[0][0]);\r\n                });\r\n\r\n                return this.chart;\r\n            }, () => {\r\n                this.$timeout(() => {\r\n                    const svgElem = d3.select(this.$element.get(0)).select('.pie-chart svg')[0][0];\r\n                    this.renderTotalLabel(svgElem);\r\n                    d3.select(svgElem)\r\n                        .transition()\r\n                        .duration(1000)\r\n                        .style('opacity', 1);\r\n\r\n                    this.$timeout(() => {\r\n                        this.resizeTitleLabelUnwrap();\r\n                    }, 800);\r\n                    this.centerChart();\r\n                    this.drawEmptyState(svgElem);\r\n                });\r\n            });\r\n        }\r\n\r\n        private drawEmptyState(svg) {\r\n            if (!this.$element.find('text.nv-noData').get(0)) {\r\n                d3.select(this.$element.find('.empty-state')[0]).remove();\r\n                this.$element.find('.pip-empty-pie-text').remove();\r\n            } else {\r\n                if (this.$element.find('.pip-empty-pie-text').length === 0) {\r\n                    this.$element.find('.pie-chart')\r\n                        .append(\"<div class='pip-empty-pie-text'>There is no data right now...</div>\");\r\n                }\r\n\r\n                const pie = d3.layout.pie().sort(null),\r\n                    size = Number(this.size);\r\n\r\n                const arc = d3.svg.arc()\r\n                    .innerRadius(size / 2 - 20)\r\n                    .outerRadius(size / 2 - 57);\r\n\r\n                svg = d3.select(svg)\r\n                    .append(\"g\")\r\n                    .classed('empty-state', true)\r\n                    .attr('transform', \"translate(\" + size / 2 + \",\" + size / 2 + \")\");\r\n\r\n                const path = svg.selectAll(\"path\")\r\n                    .data(pie([1]))\r\n                    .enter().append(\"path\")\r\n                    .attr(\"fill\", \"rgba(0, 0, 0, 0.08)\")\r\n                    .attr(\"d\", < any > arc);\r\n            }\r\n        }\r\n\r\n        private centerChart() {\r\n            if (this.centered) {\r\n                const svgElem = d3.select(this.$element.get(0)).select('.pie-chart svg')[0][0],\r\n                    leftMargin = $(svgElem).innerWidth() / 2 - (Number(this.size) || 250) / 2;\r\n                d3.select(this.$element.find('.nv-pieChart')[0]).attr('transform', 'translate(' + leftMargin + ', 0)');\r\n            }\r\n        }\r\n\r\n        private renderTotalLabel(svgElem) {\r\n            if ((!this.total && !this.donut) || !this.data) return;\r\n\r\n            let totalVal = this.data.reduce(function (sum, curr) {\r\n                return sum + curr.value;\r\n            }, 0);\r\n\r\n            if (totalVal >= 10000) totalVal = (totalVal / 1000).toFixed(1) + 'k';\r\n\r\n            d3.select(svgElem)\r\n                .select('.nv-pie:not(.nvd3)')\r\n                .append('text')\r\n                .classed('label-total', true)\r\n                .attr('text-anchor', 'middle')\r\n                .style('dominant-baseline', 'central')\r\n                .text(totalVal);\r\n\r\n            this.titleElem = d3.select(this.$element.find('text.label-total').get(0)).style('opacity', 0);\r\n        }\r\n\r\n        private resizeTitleLabelUnwrap() {\r\n            if ((!this.total && !this.donut) || !this.data) return;\r\n\r\n            const boxSize = ( < any > this.$element.find('.nvd3.nv-pieChart').get(0)).getBBox();\r\n\r\n            if (!boxSize.width || !boxSize.height) {\r\n                return;\r\n            }\r\n\r\n            this.titleElem.style('font-size', ~~boxSize.width / 4.5).style('opacity', 1);\r\n        }\r\n\r\n        private generateParameterColor() {\r\n            if (!this.data) return;\r\n\r\n            _.each(this.data, (item: any, index: number) => {\r\n                item.color = item.color || this.pipChartColors.getMaterialColor(index, this.colors);\r\n            });\r\n        }\r\n\r\n    }\r\n\r\n    const PieChart: ng.IComponentOptions = {\r\n        bindings: PieChartBindings,\r\n        templateUrl: 'pie_chart/PieChart.html',\r\n        controller: PieChartController\r\n    }\r\n\r\n    angular\r\n        .module('pipPieCharts', [])\r\n        .component('pipPieChart', PieChart);\r\n}","(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('bar_chart/BarChart.html',\n    '<div class=\"bar-chart\"><svg></svg></div><pip-chart-legend ng-show=\"$ctrl.legend\" pip-series=\"$ctrl.legend\" pip-interactive=\"$ctrl.interactiveLegend\"></pip-chart-legend>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('chart_legend/ChartInteractiveLegend.html',\n    '<div><div class=\"chart-legend-item\" ng-repeat=\"item in $ctrl.series\" ng-show=\"item.values || item.value\"><md-checkbox ng-model=\"item.disabled\" ng-true-value=\"false\" ng-false-value=\"true\" ng-if=\"$ctrl.interactive\" aria-label=\"{{ item.label }}\"><p class=\"legend-item-value\" ng-if=\"item.value\" ng-style=\"{\\'background-color\\': item.color}\">{{ item.value }}</p><p class=\"legend-item-label\">{{:: item.label || item.key }}</p></md-checkbox><div ng-if=\"!$ctrl.interactive\"><span class=\"bullet\" ng-style=\"{\\'background-color\\': item.color}\"></span> <span>{{:: item.label || item.key}}</span></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('line_chart/LineChart.html',\n    '<div class=\"line-chart\" flex=\"auto\" layout=\"column\"><svg class=\"flex-auto\" ng-class=\"{\\'visible-x-axis\\': $ctrl.showXAxis, \\'visible-y-axis\\': $ctrl.showYAxis}\"></svg><div class=\"scroll-container\"><div class=\"visual-scroll\"><div class=\"scrolled-block\"></div></div></div><md-button class=\"md-fab md-mini minus-button\" ng-click=\"$ctrl.zoomOut()\"><md-icon md-svg-icon=\"icons:minus-circle\"></md-icon></md-button><md-button class=\"md-fab md-mini plus-button\" ng-click=\"$ctrl.zoomIn()\"><md-icon md-svg-icon=\"icons:plus-circle\"></md-icon></md-button></div><pip-chart-legend pip-series=\"$ctrl.legend\" pip-interactive=\"$ctrl.interactiveLegend\"></pip-chart-legend>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('pie_chart/PieChart.html',\n    '<div class=\"pie-chart\" ng-class=\"{\\'circle\\': !$ctrl.donut}\"><svg class=\"flex-auto\"></svg></div><pip-chart-legend pip-series=\"$ctrl.data\" pip-interactive=\"false\" ng-if=\"$ctrl.legend\"></pip-chart-legend>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-charts-html.min.js.map\n"]}