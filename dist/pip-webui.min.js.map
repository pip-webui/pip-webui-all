{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/index.ts","src/routing/BackDecorator.ts","src/routing/RedirectDecorator.ts","src/routing/RoutingEvents.ts","src/routing/index.ts","src/session/IdentityService.ts","src/session/SessionService.ts","src/session/index.ts","src/transactions/Transaction.ts","src/transactions/TransactionError.ts","src/transactions/TransactionService.ts","src/transactions/TransactionStrings.ts","src/transactions/index.ts","src/translate/TranslateDirective.ts","src/translate/TranslateFilter.ts","src/translate/TranslateService.ts","src/translate/Translation.ts","src/translate/index.ts","src/utilities/Codes.ts","src/utilities/Format.ts","src/utilities/PageResetService.ts","src/utilities/ScrollService.ts","src/utilities/SystemInfo.ts","src/utilities/Tags.ts","src/utilities/TimerService.ts","src/utilities/index.ts","src/buttons.ts","src/dependencies/translate.ts","src/fabs/fab_tooltip_visibility.ts","src/refresh_button/refresh_button.ts","src/toggle_buttons/toggle_buttons.ts","temp/pip-webui-buttons-html.min.js","src/auxpanel/AuxPanelDirective.ts","src/auxpanel/AuxPanelPartDirective.ts","src/auxpanel/AuxPanelService.ts","src/auxpanel/index.ts","src/layouts/CardDirective.ts","src/layouts/DialogDirective.ts","src/layouts/DocumentDirective.ts","src/layouts/MainDirective.ts","src/layouts/SimpleDirective.ts","src/layouts/TilesDirective.ts","src/media/MediaService.ts","src/media/ResizeFunctions.ts","src/media/index.ts","src/split.ts","src/behaviors.ts","src/draggable/draggable.ts","src/focused/focused.ts","src/infinite_scroll/infinite_scroll.ts","src/keyboard_shortcuts/KeyboardShortcut.ts","src/keyboard_shortcuts/ShorcutsRegisterService.ts","src/keyboard_shortcuts/ShortcutDirective.ts","src/keyboard_shortcuts/ShortcutsService.ts","src/keyboard_shortcuts/index.ts","src/selected/selected.ts","src/unsaved_changes/unsaved_changes.ts","src/color_picker/color_picker.ts","src/controls.ts","src/image_slider/image_slider.ts","src/image_slider/image_slider_service.ts","src/image_slider/slider_button.ts","src/image_slider/slider_indicator.ts","src/markdown/markdown.ts","src/popover/popover.ts","src/popover/popover_service.ts","src/progress/routing_progress.ts","src/toast/toasts.ts","temp/pip-webui-controls-html.min.js","src/lists.ts","src/tag_list/tag_list.ts","temp/pip-webui-lists-html.min.js","src/date/date.ts","src/date/date_filter.ts","src/date/date_service.ts","src/date_directive/date.ts","src/date_range_directive/date_range.ts","src/dates.ts","src/dependencies/translate.js","src/time_range_directive/time_range.ts","src/time_range_edit_directive/time_range_edit.ts","temp/pip-webui-dates-html.min.js","src/confirmation/ConfirmationController.ts","src/confirmation/ConfirmationService.ts","src/confirmation/index.ts","src/dialogs.ts","src/error_details/ErrorDetailsController.ts","src/error_details/ErrorDetailsService.ts","src/error_details/index.ts","src/information/InformationController.ts","src/information/InformationService.ts","src/information/index.ts","src/options/OptionsBigController.ts","src/options/OptionsBigService.ts","src/options/OptionsController.ts","src/options/OptionsService.ts","src/options/index.ts","temp/pip-webui-dialogs-html.min.js","src/actions/ActionsService.ts","src/actions/PrimaryActionsDirective.ts","src/actions/SecondaryActionsDirective.ts","src/actions/index.ts","src/appbar/AppBarDirective.ts","src/appbar/AppBarPartDirective.ts","src/appbar/AppBarService.ts","src/appbar/index.ts","src/breadcrumb/BreadcrumbDirective.ts","src/breadcrumb/BreadcrumbService.ts","src/breadcrumb/index.ts","src/common/NavService.ts","src/dependencies/TranslateFilter.ts","src/dropdown/DropdownDirective.ts","src/header/NavHeaderDirective.ts","src/header/NavHeaderService.ts","src/header/index.ts","src/icon/NavIconDirective.ts","src/icon/NavIconService.ts","src/icon/index.ts","src/language/LanguagePickerDirective.ts","src/menu/NavMenuDirective.ts","src/menu/NavMenuService.ts","src/menu/index.ts","src/search/SearchBarDirective.ts","src/search/SearchService.ts","src/search/index.ts","src/sidenav/SideNavDirective.ts","src/sidenav/SideNavPartDirective.ts","src/sidenav/SideNavService.ts","src/sidenav/index.ts","src/tabs/TabsDirective.ts","temp/pip-webui-nav-html.min.js","src/bootbarn/BootBarnCoolTheme.ts","src/bootbarn/BootBarnMonochromeTheme.ts","src/bootbarn/BootBarnWarmTheme.ts","src/bootbarn/index.ts","src/common/ThemeService.ts","src/common/index.ts","src/default/DefaultAmberTheme.ts","src/default/DefaultBlueTheme.ts","src/default/DefaultGreenTheme.ts","src/default/DefaultGreyTheme.ts","src/default/DefaultNavyTheme.ts","src/default/DefaultOrangeTheme.ts","src/default/DefaultPinkTheme.ts","src/default/index.ts","src/common/errors_strings.ts","src/errors.ts","src/errors_pages/errors_module.ts","src/errors_pages/errors_pages.ts","src/errors_pages/errors_service.ts","src/forms/clear_errors.ts","src/forms/form_errors.ts","src/maintenance/maintenance.ts","src/missing_route/missing_route.ts","src/no_connection/no_connection.ts","src/no_connection_panel/no_connection_panel.ts","src/unknown/unknown.ts","src/unsupported/unsupported.ts","temp/pip-webui-errors-html.min.js","src/bar/bar_chart.ts","src/charts.ts","src/legend/interactive_legend.ts","src/line/line_chart.ts","src/pie/pie_chart.ts","temp/pip-webui-charts-html.min.js","src/location/location.ts","src/location_dialog/location_dialog.ts","src/location_edit/location_edit.ts","src/location_ip/location_ip.ts","src/location_map/location_map.ts","src/locations.ts","temp/pip-webui-locations-html.min.js","src/common/ButtonsUpload.ts","src/fail/FileFailController.ts","src/files.ts","src/select/FileSelectController.ts","src/service/FileUploadService.ts","src/start/FileStartController.ts","src/success/FileSuccessController.ts","src/upload/FileUploadController.ts","temp/pip-webui-files-html.min.js","src/Dashboard.ts","src/DashboardComponent.ts","src/DashboardController.ts","src/dialogs/add_component/AddComponentDialogController.ts","src/dialogs/add_component/AddComponentProvider.ts","src/dialogs/widget_config/ConfigDialogController.ts","src/dialogs/widget_config/ConfigDialogExtendComponent.ts","src/dialogs/widget_config/ConfigDialogService.ts","src/draggable/Draggable.ts","src/draggable/DraggableController.ts","src/draggable/DraggableDirective.ts","src/draggable/DraggableTileService.ts","src/draggable/draggable_group/DraggableTilesGroupDirective.ts","src/draggable/draggable_group/DraggableTilesGroupService.ts","src/utility/WidgetTemplateUtility.ts","src/widgets/Widgets.ts","src/widgets/calendar/WidgetCalendar.ts","src/widgets/event/WidgetEvent.ts","src/widgets/menu/WidgetMenuDirective.ts","src/widgets/menu/WidgetMenuService.ts","src/widgets/notes/WidgetNotes.ts","src/widgets/picture_slider/WidgetPictureSlider.ts","src/widgets/position/WidgetPosition.ts","src/widgets/statistics/WidgetStatistics.ts","temp/pip-webui-dashboard-html.min.js","src/SettingsModule.ts","src/settings.ts","src/settings_page/SettingsPageController.ts","src/settings_page/SettingsPageRoutes.ts","src/settings_page/index.ts","src/settings_service/SettingsService.ts","src/settings_service/index.ts","src/user_settings/user_settings.ts","src/user_settings/user_settings_basic_info.ts","src/user_settings/user_settings_change_password.ts","src/user_settings/user_settings_sessions.ts","src/user_settings/user_settings_strings.ts","src/user_settings/user_settings_verify_email.ts","temp/pip-webui-settings-html.min.js","src/help_page/HelpPageController.ts","src/help_page/HelpPageRoutes.ts","src/help_service/HelpService.ts","src/pipHelp.ts","temp/pip-webui-help-html.min.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","pip","services","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","angular","__export","captureStateTranslations","$rootScope","$on","event","toState","toParams","fromState","fromParams","CurrentState","name","url","params","PreviousState","decorateBackStateService","$delegate","$window","goBack","history","back","goBackAndSelect","state","_","cloneDeep","extend","go","addBackStateDecorator","$provide","decorator","$inject","config","run","3","decorateRedirectStateProvider","redirect","RedirectedStates","addRedirectStateProviderDecorator","$timeout","isNull","preventDefault","transitionTo","location","addRedirectStateDecorator","decorateRedirectStateService","4","hookRoutingEvents","$log","$state","RoutingVar","error","unfoundState","to","5","m","./RedirectDecorator","./RoutingEvents","6","IdentityRootVar","IdentityChangedEvent","IdentityService","setRootVar","identity","_setRootVar","_identity","_rootScope","_log","prototype","value","$emit","debug","JSON","stringify","enumerable","configurable","IdentityProvider","_service","get","set","$get","SessionRootVar","SessionOpenedEvent","SessionClosedEvent","SessionService","session","_session","defineProperty","isOpened","open","fullReset","partialReset","close","oldSession","SessionProvider","provider","8","p","hasOwnProperty","./SessionService","9","Transaction","scope","_scope","_id","_operation","_progress","_error","message","reset","busy","failed","empty","aborted","id","begin","operation","Date","getTime","toString","update","progress","Math","max","abort","end","decode","10","TransactionError","details","cause","stack_trace","data","statusText","status","TransactionService","_transactions","create","transaction","Transaction_1","12","configureTransactionStrings","$injector","has","setTranslations","ENTERING","PROCESSING","LOADING","SAVING","pipTranslate","13","./TransactionError","./TransactionService","./TransactionStrings","14","restrict","key1","key2","link","element","attrs","key","translate","text","html","directive","translateDirective","translateHtmlDirective","translateFilter","filter","language","__extends","d","b","__","constructor","Object","LanguageRootVar","LanguageChangedEvent","TranslateService","translation","persist","$mdDateLocale","_persist","_translation","_window","_mdDateLocale","localStorage","getItem","save","changeLocale","locale","localeDate","moment","localeData","months","isArray","_months","format","shortMonths","_monthsShort","days","_weekdays","shortDays","_weekdaysMin","firstDayOfWeek","_week","dow","setItem","PageResetService_1","ResetPageEvent","use","translations","translateArray","keys","translateSet","keyProp","valueProp","translateObjects","items","translateWithPrefix","prefix","translateSetWithPrefix","translateSetWithPrefix2","_super","_this","TranslateProvider","Translation","./Translation","17","en","ru","es","pt","de","fr","_language","map","_translations","isUndefined","values","k","push","each","item","replace","toUpperCase","18","./TranslateFilter","./TranslateService","19","Codes","hash","result","charCodeAt","verification","random","substr","service","20","Format","cache","sample","maxLength","indexOf","substring","strRepeat","str","qty","getType","variable","slice","toLowerCase","fmt","match","parse_tree","arg_names","exec","_fmt","field_list","replacement_field","field_match","argv","tree_length","node_type","output","arg","cursor","sprintf","test","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","abs","pad_character","charAt","pad_length","pad","join","args","_i","arguments","parseFormat","21","pipPageReset","ResetAreaEvent","area","resetArea","ResetRootVar","ResetAreaRootVar","PageResetService","_timeout","performReset","scrollTo","parentElement","childElement","animationDuration","undefined","setTimeout","$","position","modDiff","scrollTop","top","animate","ScrollService","SystemInfo","ua","navigator","userAgent","search","version","browserName","browser","split","osAll","osAndroid","err","isDesktop","platform","isMobile","isCordova","isSupported","supported","edge","firefox","opera","chrome","browserVersion","Tags","normalizeOne","tag","trim","compressOne","equal","tag1","tag2","normalizeAll","tags","isString","compressAll","entity","searchFields","field","hashTags","concat","uniq","TimerEvent","timeout","DefaultEvents","TimerService","$interval","_started","_events","_interval","isStarted","addEvent","existingEvent","find","newEvent","startEvent","removeEvent","stopEvent","splice","clearEvents","stop","interval","cancel","ex","start","buttons","thisModule","FabTooltipVisibilityController","$mdMedia","$element","$attrs","$scope","$parse","trigGetter","showGetter","showSetter","assign","$watch","isOpen","pipFabTooltipVisibility","controller","hide","$button","width","show","textGetter","pipText","visibleGetter","pipVisible","refreshGetter","pipRefresh","children","$text","css","onClick","newValue","ngDisabled","currentButtonValue","currentButton","multiselect","change","onlyToggle","index","class","currentButtonIndex","disabled","diselectable","level","curLevel_1","tmp","findIndex","enterSpacePress","buttonSelected","elem","on","addClass","removeClass","$templateCache","put","layouts","MediaService_1","AuxPanelDirective","AuxPanelDirectiveController","transclude","controllerAs","pipAuxPanel","normalSize","largeSize","_pipAuxPanel","isGtxs","Number","MainBreakpoints","xs","isGtlg","lg","../media/MediaService","2","AuxPanelPartDirectiveController","onAuxPanelChanged","currentPartValue","parts","partName","visible","partValue","pipAuxPanelPart","pos","AuxPanelPartDirective","ngIfDirective","ngIf","priority","terminal","apply","hookAuxPanelEvents","OpenAuxPanelEvent","CloseAuxPanelEvent","AuxPanelChangedEvent","AuxPanelStateChangedEvent","AuxPanelConfig","AuxPanelService","$mdSidenav","_config","_sidenav","classes","sendConfigEvent","_state","$broadcast","toggle","c","reject","cc","part","AuxPanelProvider","type","./auxpanel/index","./layouts/CardDirective","./layouts/DialogDirective","./layouts/DocumentDirective","./layouts/MainDirective","./layouts/SimpleDirective","./layouts/TilesDirective","./media/index","CardDirectiveLink","_element","_attrs","listener","resize","MainResizedEvent","left","$mainBody","cardContainer","maxWidth","maxHeight","height","minWidth","floor","minHeight","MainBreakpointStatuses","space","min","hasClass","$header","$footer","$body","maxBodyHeight","outerHeight","cardDirective","7","dialogDirective","documentDirective","mainDirective","MainDirectiveController","mainBodyDirective","MainBodyDirectiveLink","_container","pipContainer","ResizeFunctions_1","addResizeListener","removeResizeListener","updateBreakpointStatuses","innerWidth","body","breakpoint","isBoolean","$apply","../media/ResizeFunctions","simpleDirective","11","tilesDirective","convertToBoolean","pipInfinite","tilesOptions","gutter","isFitWidth","isResizeBound","transitionDuration","TilesDirectiveLink","_columnWidth","columnWidth","_prevContainerWidth","_masonry","Masonry","_sizer","appendTo","force","parent","log","columns","containerWidth","layout","LayoutResizedEvent","MediaBreakpoints","sm","md","MediaBreakpointStatuses","breakpoints","MediaProvider","size","requestFrame","callback","frame","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","win","target","srcElement","__resizeRAF__","trigger","__resizeTrigger__","__resizeListeners__","forEach","fn","loadListener","defaultView","__resizeElement__","addEventListener","resizeListener","attachEvent","getComputedStyle","style","obj","document","createElement","setAttribute","onload","isIE","appendChild","detachEvent","contentDocument","removeEventListener","pipSplit","splitElements","forwardTransition","addTransitionSequence","sequence","transitionSequences","toIndex","fromIndex","behaviors","inputEvent","isDefined","touches","originalEvent","$document","pipDraggable","initialize","attr","dragHandles","querySelectorAll","_dragHandle","toggleListeners","scrollContainer","scrollParent","pipScrollContainer","scrollContainerGetter","toBoolean","enable","onDestroy","pipDrag","onEnableChange","pipCenterAnchor","onCenterAnchor","_pressEvents","onpress","_hasTouch","nodeName","newVal","oldVal","_dragEnabled","_centerAnchor","isClickableElement","evt","button","saveElementStyles","cancelPress","_pressTimer","onlongpress","LONG_PRESS","_moveEvents","_releaseEvents","_elementStyle","off","offset","getBoundingClientRect","_dragOffset","allowTransform","scrollLeft","centerX","offsetWidth","centerY","offsetHeight","_mx","pageX","_my","pageY","_mrx","_mry","_tx","pageXOffset","_ty","pageYOffset","onmove","onrelease","_deregisterRootMoveListener","origEvent","_data","getDragData","x","y","tx","ty","onDragStartCallback","$data","$event","horizontalScroll","verticalScroll","dragToScroll","moveElement","uid","_myid","dragOffset","onDragComplete","onDragStopCallback","onDragSuccessCallback","transform","z-index","-webkit-transform","-ms-transform","eWidth","scrollX","scrollY","containerLeft","containerRight","activationDistance","scrollDistance","containerTop","containerHeight","innerHeight","containerBottom","containerScrollLeft","containerScrollTop","ngDrag","DocumentTouch","$id","pipDragStart","pipDragStop","pipDragSuccess","$eval","pipDragData","pipVerticalScroll","pipHorizontalScroll","pipActivationDistance","pipScrollDistance","noop","pipDrop","onDragStart","onDragMove","onDragEnd","_dropEnabled","isTouching","pipDragMove","onDragMoveCallback","pipDropSuccess","onDropCallback","$target","updateDragStyles","mouseX","mouseY","dragElement","touching","hitTest","_lastDropTouch","bounds","documentElement","right","bottom","absorbEvent_","stopPropagation","cancelBubble","returnValue","$mdConstant","rgba","color","focusedColor","arr","red","blue","green","opacity","opacityLimit","opacityDelta","setTabindex","checkTabindex","controls","focusedTabindex","init","selector","withHidden","controlsLength","reInit","isOpacity","_color","keydownListener","keyCode","which","KEY_CODE","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","increment","moveToControl","focus","pipWithHidden","pipFocusedColor","pipFocusedRebind","pipFocusedTabindex","pipFocusedOpacity","ngModel","pipFocusedData","$observe","THROTTLE_MILLISECONDS","pipInfiniteScroll","pipScrollDisabled","pipScrollUseDocumentBottom","pipScrollListenForEvent","isNaN","clientHeight","offsetTop","ownerDocument","handleScrollDistance","v","handleScrollDisabled","scrollEnabled","checkWhenEnabled","onContainerScroll","handleScrollUseDocumentBottom","useDocumentBottom","changeContainer","newContainer","unbind","bind","handleScrollContainer","HTMLElement","append","parents","Array","immediateCheck","unregisterEventListener","windowElement","containerTopOffset","elementBottom","remaining","shouldScroll","$$phase","throttle","pipScrollParent","pipScrolImmediateCheck","ShortcutOption","KeyboardEvent","Keydown","Keyup","Keypress","KeyboardShortcut","shorcutCombination","option","shift_nums","`","0","-","=",";","'",",",".","/","\\","special_keys","esc","escape","tab","return","enter","backspace","scrolllock","scroll_lock","scroll","capslock","caps_lock","caps","numlock","num_lock","num","pause","break","insert","home","delete","pageup","page_up","pu","pagedown","page_down","pd","up","down","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifiers","shift","wanted","pressed","ctrl","alt","meta","shorcut","Type","eventCallback","DisableInInput","element_1","nodeType","parentNode","tagName","character","kp","ctrlKey","shiftKey","altKey","metaKey","Keycode","Propagate","KeyboardShortcut_1","ShortcutsRegister","_defaultOption","defaults","getDefaultOption","_shortcuts","defaultOption","Target","checkAddShortcut","add","shorcutName","remove","shorcutOption","getElementById","newKeyboardShortcut","shortcutCombination","binding","ShortcutsRegisterProvider","_option","ShortcutController","pipShortcutsRegister","pipShortcutAction","actionShortcuts","pipShortcutName","nameShortcuts","options","pipShorcutOptions","keypressShortcut","action","shortcutsDirective","ShortcutsChangedEvent","ShortcutItem","ShortcutsConfig","globalShortcuts","localShortcuts","defaultOptions","ShortcutsService","$location","_oldConfig","_location","_injector","_pipShortcutsRegister","addShortcuts","sendChangeEvent","removeShortcuts","collection","shortcut","access","isFunction","keypress","href","stateParams","generalOptions","targetId","onLocal","ShortcutsProvider","./ShortcutDirective","./ShortcutsService","selectItem","itemParams","itemIndex","itemId","className","modifier","itemsLength","raiseEvent","noScroll","scrollToItem","defineSelectedIndex","updateIndex","selectedItem","selectedIndex","selectedId","indexSetter","idSetter","onSelect","newIndex","oldIndex","oldSelectedIndex","$item","itemTop","itemHeight","itemBottom","isScrolled","getTargetElementFromEventTarget","eventTarget","Node","TEXT_NODE","touchHasMoved","touch","changedTouches","boundary","touchBoundary","touchStartX","touchStartY","onClickEvent","currentTarget","onTouchStart","ev","targetElement","trackingClick","trackingClickStart","timeStamp","lastClickTime","tapdelay","onTouchMove","onTouchEnd","newTrackingClickStart","cancelNextClick","tapTimeout","onTouchCancel","onKeyDown","ENTER","SPACE","inc","newSelectedIndex","onFocusIn","indexGetter","onFocusOut","pipSelected","idGetter","pipSelectedId","changeGetter","pipSelect","enterSpaceGetter","pipEnterSpacePress","pipNoScroll","pipSkipHidden","pipTreeList","currentElementTabinex","pipSelectedWatch","newSelectedId","unsavedChangesAvailable","unsavedChangesMessage","afterLeave","onbeforeunload","$routing","confirm","cancelLeave","unbindFunc","ColorPickerController","DEFAULT_COLORS","_$timeout","_$scope","colors","colorChange","currentColor","currentColorIndex","selectColor","pipColorPicker","templateUrl","pipImageSliderController","$pipImageSlider","_index","DEFAULT_INTERVAL","swipeStart","sliderIndex","_type","_$attrs","_$interval","slideToPrivate","setIndex","_blocks","startInterval","_throttled","toBlock","_newIndex","_direction","registerSlider","stopInterval","removeSlider","nextBlock","restartInterval","prevBlock","nextIndex","console","pipImageIndex","_timePromises","pipImageSlider","ImageSliderService","ANIMATION_DURATION","_sliders","sliderId","sliderScope","getSliderScope","nextCarousel","prevCarousel","blocks","direction","blockIndex","pipButtonType","pipSliderId","vm","slideTo","pipSlideTo","MARKDOWN_ATTACHMENTS","checklist","documents","pictures","time","array","attachTypes","attach","attachString","textString","isClamped","describeAttachments","pipLineCount","isNumber","clampGetter","gfm","tables","breaks","sanitize","pedantic","smartLists","smartypents","marked","listGetter","pipList","pipRebind","bindText","PopoverController","$compile","template","calcH","calcHeight","cancelCallback","backdropElement","backdropClick","responsive","content","onResize","closePopover","onPopoverClick","$e","docWidth","docHeight","popover","title","footer","contentHeight","pipPopover","PopoverService","_$compile","_$rootScope","popoverTemplate","$new","isObject","locals","RoutingController","_image","showProgress","logoUrl","loadProgressImage","RoutingProgress","ToastController","$mdToast","toast","_pipErrorDetailsDialog","_$mdToast","actions","actionLenght","showDetails","onDetails","ok","onAction","ToastService","SHOW_TIMEOUT","SHOW_TIMEOUT_NOTIFICATIONS","toasts","sounds","onStateChangeSuccess","onClearToasts","showNextToast","showToast","duration","currentToast","then","showToastOkResult","showToastCancelResult","successCallback","addToast","removeToasts","removeToastsById","getToastById","clearToasts","showNotification","showMessage","showError","hideAllToasts","lists","pipTags","pipType","pipTypeLocal","tagsGetter","dates","formatTimeFilter","pipDateTime","formatTime","formatDateOptionalFilter","formatDateOptional","formatLongDateFilter","formatLongDate","formatShortDateFilter","formatShortDate","formatMiddleDateFilter","formatMiddleDate","formatMonthFilter","formatMonth","formatLongMonthFilter","formatLongMonth","formatYearFilter","formatYear","formatWeekFilter","formatWeek","formatShortWeekFilter","formatShortWeek","formatShortDateTimeFilter","formatShortDateTime","formatMiddleDateTimeFilter","formatMiddleDateTime","formatLongDateTimeFilter","formatLongDateTime","formatShortDateLongTimeFilter","firstTime","formatShortDateLongTime","formatMiddleDateLongTimeFilter","formatMiddleDateLongTime","formatLongDateLongTimeFilter","formatLongDateLongTime","bbFormatDateLongTimeFilter","bbFormatDateLongTime","formatFullDateTimeFilter","formatFullDateTime","formatShortTimeFilter","formatShortTime","formatLongTimeFilter","formatLongTime","formatShortDayOfWeekFilter","formatShortDayOfWeek","formatLongDayOfWeekFilter","formatLongDayOfWeek","formatLongMonthDayFilter","formatLongMonthDay","formatShortMonthDayFilter","formatShortMonthDay","formatDateRangeFilter","value1","value2","formatDateRange","formatDateTimeRangeFilter","formatDateTimeRange","formatISOWeekFilter","formatISOWeek","formatShortISOWeekFilter","formatShortISOWeek","formatISOWeekOrdinalFilter","formatISOWeekOrdinal","formatDateYFilter","formatDateY","formatLongDateYFilter","formatLongDateY","formatTodayDateLongTimeLongFilter","formatTodayDateLongTimeLong","formatTodayDateShortTimeLongFilter","formatTodayDateShortTimeLong","formatTodayDateLongTimeShortFilter","formatTodayDateLongTimeShort","formatTodayDateShortTimeShortFilter","formatTodayDateShortTimeShort","formatMillisecondsToSecondsFilter","formatMillisecondsToSeconds","formatElapsedIntervalFilter","formatElapsedInterval","getDateJSONFilter","getDateJSON","extendStatics","setPrototypeOf","__proto__","DateTimeConfig","DateTime","_momentRanged","_defaultFormat","timeZone","isUndefinedOrNull","getRange","getOperationRange","range","formatDateTime","basicFormat","date","formatTpl","utcOffset","isValid","formatDateTimeY","nowDate","formatMoment","longDateFormat","year","formatDay","formatMonthYearless","formatMonthDay","formatLL","formatYearlessLL","formatRange","dateStart","dateEnd","isSame","isAfter","month","toStartRange","startOf","toDate","toEndRange","mssOffset","toDateWithTime","formatDate","toTodayDate","day","useTimeZone","fromNow","getNextStart","category","getPrevStart","getNowStart","addHours","hours","toStartDay","toEndDay","toStartWeek","toEndWeek","toStartMonth","toEndMonth","toStartYear","toEndYear","DateTimeService","datetime","_datetime","DateTimeProvider","timeMode","model","ngChange","dayList","count","monthList","momentMonths","yearList","currentYear","getFullYear","startYear","endYear","years","adjustDay","getValue","isDate","getDate","getMonth","setValue","DAY","MONTH","YEAR","dayLabel","monthLabel","yearLabel","onYearChanged","disableControls","pipChanged","pipDateRangeType","pipDateFormat","pipNoLine","setCurrent","currentState","week","dateRangeType","fillLists","weeks","weekList","correctWeek","prevState","getUTCDate","getUTCMonth","getUTCFullYear","getWeekByDate","adjustWeek","getCountDay","nameDays","momentShortDays","weekday","dayOfWeek","startWeek","UTC","getUTCDay","getWeek","countDay","countPrevMonthDay","startDay","endDay","getTimezoneOffset","currentMonth","currentDay","currentDate","onDayChanged","onMonthChanged","onWeekChange","onChange","oldValue","onYearClick","onMonthClick","onDayClick","defineStartDate","pipStartDate","defineEndDate","pipEndDate","pipStartLabel","pipEndLabel","pipHideTime","pipSize","setDuration","startDate","endDate","startTime","endTime","validateStartDate","round","validateEndDate","setDate","defineDate","getTimeInterval","j","minutes","initDate","showTime","EVENT_NEW_END_TIME","EVENT_NEW_START_TIME","startLabel","endLabel","intervalTimeCollection","newV","onChangeEndDate","onChangeStartTime","onChangeEndTime","isDisabled","$watchGroup","dialogs","ConfirmationParams","ConfirmationDialogController","$mdDialog","CONFIRM_TITLE","theme","onOk","onCancel","ConfirmationService","_mdDialog","targetEvent","./ConfirmationService","ErrorStrings","errorDetails","dismissButton","errorMessage","errorCode","errorMethod","errorPath","errorText","ErrorParams","ErrorDetailsDialogController","ERROR_DETAILS","CODE","PATH","ERROR","METHOD","MESSAGE","DISMISS","$theme","ErrorDetailsService","./ErrorDetailsService","InformationStrings","InformationParams","InformationDialogController","INFORMATION_TITLE","pipFormat","truncate","InformationService","clickOutsideToClose","./InformationService","OptionsBigData","OptionsBigParams","noTitle","noActions","optionIndex","OptionsBigDialogController","selectedOptionName","deleted","OPTIONS_TITLE","applyButtonTitle","selectedOption","active","deletedTitle","hint","focusInput","onOptionSelect","onSelected","onKeyUp","list","OptionsBigService","OptionsData","icon","OptionsParams","OptionsDialogController","onKeyPress","OptionsService","16","./OptionsBigController","./OptionsBigService","./OptionsController","./OptionsService","nav","ActionsChangedEvent","SecondaryActionsOpenEvent","SimpleActionItem","ActionItem","ActionsConfig","primaryGlobalActions","primaryLocalActions","secondaryGlobalActions","secondaryLocalActions","ActionsService","primaryActions","secondaryActions","updateCount","clearCounts","openMenuEvent","ActionsProvider","PrimaryActionsController","pipActions","onActionsChanged","isHidden","actionCount","clickAction","$mdOpenMenu","divider","originatorEv","menu","click","localActions","globalActions","primaryActionsDirective","SecondaryActionsController","onActionsMenuOpen","menuFn","openMenu","calcActions","secondaryActionsVisible","secondaryDividerVisible","getMenu","secondaryActionsDirective","./ActionsService","./PrimaryActionsDirective","./SecondaryActionsDirective","AppBarDirectiveController","pipAppBar","onAppBarChanged","appbarDirective","AppBarPartDirectiveController","pipAppbarPart","appbarPartDirective","AppBarChangedEvent","AppBarConfig","AppBarService","shadowBreakpoints","setShadow","hideShadow","startsWith","bp","addShadow","removeShadow","AppBarProvider","./AppBarDirective","./AppBarPartDirective","./AppBarService","breadcrumbDirective","BreadcrumbController","pipBreadcrumb","BreadcrumbService_1","BreadcrumbChangedEvent","onBreadcrumbChanged","BreadcrumbService_2","BreadcrumbBackEvent","onBreadcrumbBack","pipMedia","_media","backCallback","openSearch","SearchService_1","OpenSearchEvent","actionsVisible","subActions","onOpenMenu","onSubActionClick","./BreadcrumbService","BreadcrumbItem","BreadcrumbConfig","BreadcrumbService","criteria","showText","showItems","BreadcrumbProvider","NavService","appbar","breadcrumb","sidenav","header","showMenu","DropdownDirectiveController","pipTheme","currentTheme","media","activeIndex","select","pipChange","showDropdown","dropdownDirective","pipNavHeader","onImageLoad","image","setImageMarginCSS","imageBlock","onImageError","loadedDefaultImage","onStateChanged","showHeader","container","cssParams","clientWidth","imageWidth","naturalWidth","imageHeight","naturalHeight","margin","setImage","loadError","imageUrl","defaultImageUrl","$image","onNavHeaderChanged","subtitle","imageCss","onUserClick","onerror","navHeaderDirective","NavHeaderDirectiveController","NavHeaderChangedEvent","NavHeaderConfig","NavHeaderService","callbackOrEvent","NavHeaderProvider","clear","./NavHeaderService","NavIconDirectiveController","pipNavIcon","onNavIconChanged","onNavIconClick","navIconDirective","NavIconChangedEvent","NavIconConfig","NavIconService","setCallbackOrEvent","showIcon","showBack","showImage","NavIconProvider","setMenu","setIcon","setBack","./NavIconDirective","./NavIconService","./appbar","./breadcrumb","./common/NavService","./dependencies/TranslateFilter","./dropdown/DropdownDirective","./header","./icon","./language/LanguagePickerDirective","./menu","./search","./sidenav","./tabs/TabsDirective","22","languagePickerDirective","languages","LanguagePickerDirectiveController","_translate","setLanguages","lang","onLanguageClick","NavMenuDirectiveController","pipSideNav","pipNavMenu","setCollapsible","collapsed","isCollapsed","onExpand","expanded","pipSideNavElement","isSectionEmpty","linkCollection","onConfigChanged","sections","expand","isExpanded","expandedButton","sideNavState","isActive","parentState","includes","current","defaultIcon","itemVisible","clickLink","navMenuDirective","24","NavMenuChangedEvent","NavMenuLink","NavMenuSection","NavMenuConfig","NavMenuService","updateBadgeStyle","links","badgeStyle","NavMenuProvider","25","./NavMenuService","26","searchBarDirective","SearchBarController","pipSearch","enabled","stateChange","SearchChangedEvent","onSearchChanged","focusText","SearchService_2","SearchActivatedEvent","27","CloseSearchEvent","SearchConfig","SearchService","SearchProvider","./SearchService","29","SideNavDirectiveController","checkSafari","pipSystemInfo","setBreakpoints","onSideNavChanged","onSideNavState","navState","setState","setSideNaveState","isResizing","mainWidth","mainContainer","sideNavWidth","currentWidth","mediaBreakpoints","sidenavState","isLockedOpen","showIconTooltype","xlarge","windowResize","debounce","sideNavDirective","SideNavPartDirectiveController","pipSidenavPart","sidenavPartDirective","hookSideNavEvents","CloseSideNavEvent","SideNavStateChangedEvent","SideNavConfig","SideNavService","SideNavChangedEvent","SideNavProvider","./SideNavPartDirective","./SideNavService","33","tabDisabled","selected","activeTab","tabs","showShadow","showTabsShadow","showTabs","pipTabIndex","TabsDirectiveController","tabsDirective","34","themes","configureBootBarnCoolTheme","$mdThemingProvider","coolBackgroundPalette","extendPalette","A100","A200","definePalette","coolPrimaryPalette","300","500","contrastLightColors","coolAccentPalette","A700","primaryPalette","default","hue-1","backgroundPalette","hue-2","warnPalette","accentPalette","alwaysWatchTheme","configureBootBarnMonochromeTheme","monochromeBackgroundPalette","monochromePrimaryPalette","monochromeAccentPalette","configureBootBarnWarmTheme","warmBackgroundPalette","warmPrimaryPalette","warmAccentPalette","warmErrorPalette","./BootBarnCoolTheme","./BootBarnMonochromeTheme","./BootBarnWarmTheme","initTheme","ThemeRootVar","ThemeChangedEvent","ThemeResetPage","ThemeConfig","ThemeService","$mdTheming","_currentTheme","_theming","newTheme","THEMES","ThemeProvider","configureDefaultAmberTheme","orangeBackgroundPalette","orangePrimaryPalette","900","configureDefaultBlueTheme","registerBlueTheme","themeName","bluePrimaryPalette","contrastDefaultColor","contrastDarkColors","blueBackgroundPalette","blueAccentPalette","600","setDefaultTheme","configureDefaultGreenTheme","greenBackgroundPalette","greenPrimaryPalette","greenAccentPalette","configureDefaultGreyTheme","thirdPartyPalette","configureDefaultNavyTheme","greyPalette","700","tealPalette","configureDefaultOrangeTheme","RedBackgroundPalette","RedPrimaryPalette","800","configureDefaultPinkTheme","PinkBackgroundPalette","PinkPrimaryPalette","configureDefaultTheme","errors","ERROR_ROUTE_TITLE","ERROR_ROUTE_SUBTITLE","ERROR_ROUTE_CONTINUE","ERROR_ROUTE_TRY_AGAIN","ERROR_ROUTE_GO_BACK","ERROR_ROUTE_PAGE_TITLE","ERROR_UNKNOWN_TITLE","ERROR_UNKNOWN_SUBTITLE","ERROR_UNKNOWN_CLOSE","ERROR_UNKNOWN_DETAILS","ERROR_AVAILABLE_TITLE","ERROR_AVAILABLE_SUBTITLE","ERROR_AVAILABLE_CLOSE","ERROR_AVAILABLE_TRY_AGAIN","ERROR_RESPONDING_TITLE","ERROR_RESPONDING_SUBTITLE","ERROR_RESPONDING_RETRY","ERROR_UNSUPPORTED_TITLE","ERROR_UNSUPPORTED_SUBTITLE","ERROR_UNSUPPORTED_O","ERROR_UNSUPPORTED_O_VER","ERROR_UNSUPPORTED_IE","ERROR_UNSUPPORTED_IE_VER","ERROR_UNSUPPORTED_GC","ERROR_UNSUPPORTED_GC_VER","ERROR_UNSUPPORTED_FM","ERROR_UNSUPPORTED_FM_VER","$stateProvider","$httpProvider","interceptors","pipErrorsService","goToErrors","maintenanceError","noConnectionError","unknownError","checkSupported","ie","errorConfig","Unsupported","Active","MissingRoute","NoConnection","Unknown","Maintenance","factory","$q","responseError","rejection","ErrorStateItem","pipErrorsConfig","Name","Event","Title","SubTitle","Breadcrumb","Image","Params","getErrorItemByKey","errorName","pipErrorsProvider","configureErrorByKey","errorParams","defaultsDeep","configureErrors","$ctrls","clearFieldErrors","fieldController","$error","prop","$setValidity","clearFormErrors","formController","$serverError","errorsWithHint","isEmpty","touchedErrorsWithHint","form","$submitted","$touched","$dirty","resetFormErrors","$setPristine","$setUntouched","$setDirty","$setSubmitted","resetFieldsErrors","setFormError","errorFieldMap","goToUnhandledErrorPage","appHeader","pipNavService","onClose","errorKey","timeoutInterval","onContinue","absolute","urlBack","onRetry","retry","parseError","error_details","server_stacktrace","client_stacktrace","15","charts","pipBarChart","series","xTickFormat","yTickFormat","interactiveLegend","bindToController","$mdColorPalette","prepareData","seria","drawEmptyState","d3","chartElem","classed","configBarWidthAndLabel","labels","chartBars","getBBox","barHeight","barWidth","transition","materialColorToRgba","getMaterialColor","generateParameterColor","chart","palette","legend","clone","scale","paletteColors","ordinal","updatedSeries","datum","updatedLegend","nv","addGraph","models","discreteBarChart","label","showValues","staggerLabels","showXAxis","showYAxis","valueFormat","tooltip","noData","yAxis","tickFormat","xAxis","utils","pipChartLegend","interactive","colorCheckboxes","checkboxContainers","legendTitles","prepareSeries","hex","pipLineChart","xFormat","xTickValues","dynamic","fixedHeight","dynamicHeight","getHeight","updateScroll","domains","bDiff","domDiff","isEqual","addZoom","svg","setData","newChart","xDomain","domain","yDomain","redraw","xScale","yScale","x_boundary","y_boundary","prevXDomain","prevScale","d3zoom","prevTranslate","nice","fixDomain","updateChart","zoomed","unzoomed","step","coordinates","point","setZoom","scaleExtent","behavior","zoom","center0","translate0","coordinates0","center1","getXMinMax","maxVal","minVal","tempMinVal","tempMaxVal","updateZoomOptions","filteredColor","sourceEvents","isVisibleX","isVisibleY","zoomIn","zoomOut","tickValues","selectAll","heigth","lineChart","useInteractiveGuideline","showLegend","tooltipW","bodyWidth","removeTooltip","pipPieChart","donut","total","centered","pie","sort","arc","innerRadius","outerRadius","centerChart","svgElem","leftMargin","renderTotalLabel","totalVal","reduce","sum","curr","titleElem","resizeTitleLabelUnwrap","boxSize","resizeTitleLabel","pieChart","showLabels","labelThreshold","growOnHover","donutRatio","locations","pipLocationName","pipLocationPos","pipLocationResize","pipShowLocationIcon","pipCollapse","clearMap","$mapControl","$mapContainer","generateMap","showMap","google","maps","LatLng","mapOptions","center","mapTypeId","MapTypeId","ROADMAP","disableDefaultUI","disableDoubleClickZoom","scrollwheel","draggable","Map","Marker","$name","$up","$down","collapsable","LocationDialogService","_$mdDialog","locationName","locationPos","LocationEditDialogController","_map","_marker","onSetLocation","geolocation","getCurrentPosition","coords","latitude","longitude","createMarker","setCenter","changeLocation","maximumAge","enableHighAccuracy","supportSet","mapContainer","setMap","animation","Animation","DROP","thisMarker_1","addListener","getPosition","tid","lat","lng","geocoder","Geocoder","geocode","results","GeocoderStatus","OK","formatted_address","onAddPin","getCenter","onRemovePin","onZoomIn","getZoom","onZoomOut","onApply","LocationDialogRun","LOCATION_ADD_LOCATION","LOCATION_SET_LOCATION","LOCATION_ADD_PIN","LOCATION_REMOVE_PIN","$http","pipLocationEditDialog","pipLocationHolder","$empty","defineCoordinates","address","geometry","onMapClick","onMapKeyPress","defineCoordinatesDebounced","pipIpaddress","pipExtraInfo","ipAddress","response","geoplugin_latitude","geoplugin_longitude","extraInfo","city","geoplugin_city","regionCode","geoplugin_regionCode","region","geoplugin_regionName","areaCode","geoplugin_areaCode","countryCode","geoplugin_countryCode","country","geoplugin_countryName","continentCode","geoplugin_continentCode","pipLocationPositions","pipIconPath","pipStretch","loc","determineCoordinates","fill","stroke","points","checkLocation","LatLngBounds","path","iconPath","fillColor","fillOpacity","strokeColor","strokeWeight","fitBounds","stretchMap","files","ButtonsUpload","FileFailController","FileSelectController_1","FileUploadController_1","FileSuccessController_1","FileFailController_1","FileUploadService_1","FileStartController_1","fileModelDirective","fileModel","modelSetter","fileSelectDirective","localFile","FileSelectController","fileUploadDirective","FileUploadController","buttonFunction","fileSuccessDirective","FileSuccessController","fileFailDirective","fileStartDirective","FileStartController","onUploadButtonClick","onDeleteButtonClick","forml","FileUploadState","All","Start","Upload","Fail","FileUploadService","_http","upload","file","fd","FormData","lengthComputable","loaded","headers","Content-Type","success","FileUploadButtons","_functions","uploadButtons","failButtons","startButtons","onAbort","dashboard","pipDashboard","bindings","gridOptions","groupAdditionalActions","groupedWidgets","component","DROP_TO_CREATE_NEW_GROUP","configureAvailableWidgets","pipAddComponentDialogProvider","configWidgetList","amount","DEFAULT_GRID_OPTIONS","draggableOptions","tileWidth","tileHeight","inline","$interpolate","pipAddComponentDialog","pipWidgetTemplate","groupIndex","addComponent","removeGroup","_includeTpl","groupMenuActions","defaultGroupMenuActions","_$element","_$interpolate","_pipAddComponentDialog","_pipWidgetTemplate","draggableGridOptions","widgetsContext","compileWidgets","group","removedWidgets","source","widget","colSpan","rowSpan","object","removeWidget","opts","getTemplate","activeGroup","addWidgets","widgets","widgetGroup","DashboardController","AddComponentDialogController","groups","activeGroupIndex","widgetList","defaultWidgets","encrease","widgetIndex","decrease","AddComponentDialogService","_widgetList","AddComponentDialogProvider","TileColors","all","TileSizes","WidgetConfigDialogController","dialogTitle","sizes","sizeId","sizeX","sizeY","./ConfigDialogService","$templateRequest","pipExtensionUrl","replaceWith","pipWidgetConfigComponent","WidgetConfigDialogService","./DraggableController","./DraggableDirective","./DraggableTileService","./draggable_group/DraggableTilesGroupDirective","./draggable_group/DraggableTilesGroupService","DraggableTileService_1","DraggableTilesGroupService_1","SIMPLE_LAYOUT_COLUMNS_COUNT","DEFAULT_TILE_WIDTH","DEFAULT_TILE_HEIGHT","UPDATE_GROUPS_EVENT","DEFAULT_OPTIONS","DraggableController","pipDragTile","pipTilesGrid","sourceDropZoneElem","isSameDropzone","tileGroups","merge","mobileBreakpoint","tilesTemplates","tile","tileScope","tilesContext","IDragTileConstructor","DragTileService","tpl","availableWidth","getContainerWidth","availableColumns","getAvailableColumns","setAvailableColumns","generateGrid","getSingleTileWidthForMobile","setTilesDimensions","calcContainerHeight","watch","prevVal","changedGroupIndex","addGroup","groupWidgetDiff","newTiles","addTilesIntoGroup","groupsContainers","updateTilesGroups","removeTiles","updateTilesOptions","onTitleClick","editingName","oldTitle","cancelEditing","onBlurTitleInput","onKyepressTitleInput","updateTilesTemplates","updateType","_a","from","attributes","tileOptions","fromTileIndex","reIndexTiles","indexes","tiles","gIndex","child","removeGroups","newGroups","removeIndexes","remain","containers","reverse","sourceGroup","groupContaninerSelector","ITilesGridConstructor","TilesGridService","groupContainer","addTile","newTile","getCompiledTemplate","optionsGroup","optionGroup","updateTileOptions","initTilesGroups","onlyPosition","draggedTile","getActiveGroupAndTile","foundTile","getTileByNode","onDragStartListener","activeEntities","activeDraggedGroup","startDrag","onDragMoveListener","dx","dy","containerOffset","getContainerOffset","getTileByCoordinates","draggedTileIndex","getTileIndex","belowElemIndex","belowElement","swapTiles","setGroupContainersHeight","onDragEndListener","stopDrag","containerRect","tileGroup","moveTile","movedTile","removeTile","getElem","onDropListener","droppedGroupIndex","droppedGroup","onDropToFictGroupListener","onDropEnterListener","dragEvent","dragEnter","classList","onDropDeactivateListener","activeDropzoneClass","onDropLeaveListener","autoScroll","onstart","onend","dropzone","ondrop","ondragenter","ondropdeactivate","ondragleave","interact","DragDirective","$elem","$container","DEFAULT_TILE_SIZE","getSize","setSize","setPosition","updateElem","preview","zIndex","isAnimate","onTransitionEnd","setPreviewPosition","getOptions","setOptions","$attr","wrapComponent","docFrag","createDocumentFragment","pipDraggableTiles","DraggableTile","gridCells","isMobileLayout","MOBILE_LAYOUT_COLUMNS","getCellByPosition","row","col","getCells","prevCell","getAvailableCellsMobile","getAvailableCellsDesktop","leftCornerCell","rightCornerCell","getBasicRow","getCell","gridCopy","basicRow","basicCol","rowShift","prevTileSize","isCellFree","src","cell","getCellIndex","srcCell","rowIndex","reserveCells","clearElements","singleTileWidth","generateCells","newCellCount","colsInRow","rows","gridInRow","querySelector","srcTiles","tileSize","currIndex","startCell","cells","maxHeightSize","maxWidthSize","maxBy","node","beforeTile","movedTileIndex","beforeTileIndex","droppedTile","newGrid","ImageLoad","pipImageLoad","widgetTemplateService","strictCompile","interpolated","_$templateRequest","CalendarWidgetController","pipWidgetMenu","pipWidgetConfigDialogService","_configDialog","union","onConfigClick","dialogClass","extensionUrl","changeSize","MenuWidgetService","is","drawImage","EventWidgetController","onOpacitytest","_oldOpacity","pipEventWidget","pipMenuWidget","callAction","actionName","MenuWidgetProvider","NotesWidgetController","PictureSliderController","animationType","_widgetUtility","animationInterval","WidgetMenuService_1","pipPictureSliderWidget","PositionWidgetController","showPosition","_locationDialog","openLocationEditDialog","reDrawPosition","hideColors","newPosition","locatioName","pipPositionWidget","chartSize","SMALL_CHART","setChartSize","StatisticsWidgetController","BIG_CHART","pipStatisticsWidget","../menu/WidgetMenuService","settings","SettingsPageController","pipSettings","_q","getTabs","$user","sortBy","initSelect","getDefaultTab","onDropdownSelect","onNavigationSelect","tabIndex","tabId","configureSettingsPageRoutes","auth","SettingsTab","SettingsConfig","titleText","titleLogo","isNavIcon","SettingsService","getFullStateName","setDefaultTab","defaultTab","showTitleText","newTitleText","showTitleLogo","newTitleLogo","showNavIcon","SettingsProvider","_stateProvider","addTab","tabObj","existingTab","validateTab","stateConfig","pipSettingsProvider","pipTransaction","pipToasts","pipDataUser","pipDataParty","pipFormErrors","onPictureChanged","picture","onPictureCreated","sender","saveChanges","$party","$invalid","loc_pos","party","toJson","originalParty","updateParty","nameCopy","status_code","fromJson","updateUser","setCurrentTheme","onChangePassword","email","answer","onVerifyEmail","user","email_ver","genders","omit","onExit","onChangeBasicInfo","repeat","changePasData","new_password","showRepeatHint","onCheckRepeatPassword","changePassword","1107","1105","errorsRepeatWithHint","formPart","pipDataSessionProvider","resolve","sessions","readSessionsResolver","sessionId","readSessionIdResolver","pipDataSession","eachSeries","removeSession","without","onRemove","onRemoveAll","pipTranslateProvider","SETTINGS_TITLE","SETTINGS_BASIC_INFO_TITLE","SETTINGS_ACTIVE_SESSIONS_TITLE","SETTINGS_BASIC_INFO_FULL_NAME","SETTINGS_BASIC_INFO_VERIFY_HINT","SETTINGS_BASIC_INFO_VERIFY_CODE","SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD","SETTINGS_BASIC_INFO_CHANGE_PASSWORD","SETTINGS_BASIC_INFO_NAME_HINT","SETTINGS_BASIC_INFO_WORDS_ABOUT_ME","SETTINGS_BASIC_INFO_GENDER","SETTINGS_BASIC_INFO_BIRTHDAY","SETTINGS_BASIC_INFO_LOCATION","SETTINGS_BASIC_INFO_PRIMARY_EMAIL","SETTINGS_BASIC_INFO_FROM","SETTINGS_BASIC_INFO_USER_ID","SETTINGS_CHANGE_PASSWORD_TITLE","SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD","SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD","SETTINGS_ACTIVE_SESSIONS_SUBTITLE","SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION","SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS","SETTINGS_ACTIVE_SESSION_OS","SETTINGS_ACTIVE_SESSION_ACTIVE","SETTINGS_BLACKLIST_TITLE","SETTINGS_BLACKLIST_SUBTITLE","SETTINGS_BLACKLIST_UNBLOCK","SETTINGS_BLACKLIST_EMPTY","SETTINGS_CONTACT_INFO_TITLE","SETTINGS_CONTACT_INFO_EMAIL","SETTINGS_CONTACT_INFO_ADD_EMAIL","SETTINGS_CONTACT_INFO_ADD_PHONE","SETTINGS_CONTACT_INFO_ADD_ADDRESS","SETTINGS_CONTACT_INFO_ADD_ACCOUNT","SETTINGS_CONTACT_INFO_ADD_URL","SETTINGS_CONTACT_INFO_ADDRESS","SETTINGS_CONTACT_INFO_PHONE","SETTINGS_CONTACT_INFO_ACCOUNT_NAME","SETTINGS_CONTACT_INFO_URL","THEME","HINT_PASSWORD","HINT_REPEAT_PASSWORD","ERROR_WRONG_PASSWORD","ERROR_IDENTICAL_PASSWORDS","REPEAT_PASSWORD_INVALID","ERROR_EMAIL_INVALID","requestEmailVerification","onVerify","verifyEmail","verifyData","1106","1103","emailVerified","onRequestVerificationClick","help","HelpPageController","pipHelp","./HelpPageRoutes","configureHelpPageRoutes","HelpTab","HelpConfig","HelpService","HelpProvider","./help_page/HelpPageController","./help_service/HelpService"],"mappings":"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","file":"pip-webui.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\r\n\r\nimport './common';\r\nimport './default';\r\nimport './bootbarn';\r\n\r\nexport * from './common';","'use strict';\r\n\r\nexport let CurrentState: any;\r\nexport let PreviousState: any;\r\n\r\nfunction captureStateTranslations($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    $rootScope.$on('$stateChangeSuccess',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            CurrentState = {\r\n                name: toState.name, \r\n                url: toState.url, \r\n                params: toParams\r\n            };\r\n\r\n            PreviousState = {\r\n                name: fromState.name, \r\n                url: fromState.url, \r\n                params: fromParams\r\n            };\r\n        }\r\n    );\r\n\r\n}\r\n\r\nfunction decorateBackStateService($delegate, $window: ng.IWindowService) {\r\n    \"ngInject\";\r\n\r\n    $delegate.goBack = goBack;\r\n    $delegate.goBackAndSelect = goBackAndSelect;\r\n\r\n    return $delegate;\r\n    //////////////////////////////////////////////////\r\n\r\n    function goBack(): void {\r\n        $window.history.back()\r\n    }\r\n\r\n    function goBackAndSelect(params: any): void {\r\n        if (PreviousState != null \r\n            && PreviousState.name != null) {\r\n\r\n            let state = _.cloneDeep(PreviousState);\r\n\r\n            // Override selected parameters\r\n            state.params = _.extend(state.params, params);\r\n\r\n            $delegate.go(state.name, state.params);\r\n        } else {\r\n            $window.history.back();\r\n        }\r\n    }\r\n}\r\n\r\nfunction addBackStateDecorator($provide) {\r\n    $provide.decorator('$state', decorateBackStateService);\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .config(addBackStateDecorator)\r\n    .run(captureStateTranslations);\r\n    ","'use strict';\r\n\r\nlet RedirectedStates: any = {};\r\n\r\nfunction decorateRedirectStateProvider($delegate) {\r\n    \"ngInject\";\r\n\r\n    $delegate.redirect = redirect;\r\n\r\n    return $delegate;\r\n    /////////////////////////////////////////////\r\n\r\n    // Specify automatic redirect from one state to another\r\n    function redirect(fromState, toState) {\r\n        RedirectedStates[fromState] = toState;  \r\n        return this;\r\n    }\r\n}\r\n\r\nfunction addRedirectStateProviderDecorator($provide) {\r\n    \"ngInject\";\r\n\r\n    $provide.decorator('$state', decorateRedirectStateProvider);\r\n}\r\n\r\nfunction decorateRedirectStateService($delegate, $timeout) {\r\n    \"ngInject\";\r\n\r\n    $delegate.redirect = redirect;\r\n    \r\n    return $delegate;\r\n    ////////////////////////////////\r\n    \r\n    // Todo: Move this code directly to event handler?\r\n    // Todo: Nothing calls this code!!\r\n    function redirect(event, state, params) {\r\n        let toState = RedirectedStates[state.name];\r\n        if (_.isFunction(toState)) {\r\n            toState = toState(state.name, params);\r\n\r\n            if (_.isNull(toState))\r\n                throw new Error('Redirected toState cannot be null');\r\n        }\r\n\r\n        if (!!toState) {\r\n            $timeout(() => {\r\n                event.preventDefault();\r\n                $delegate.transitionTo(toState, params, {location: 'replace'});\r\n            });\r\n\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    }\r\n}\r\n\r\nfunction addRedirectStateDecorator($provide) {\r\n    \"ngInject\";\r\n\r\n    $provide.decorator('$state', decorateRedirectStateService);\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .config(addRedirectStateProviderDecorator)\r\n    .config(addRedirectStateDecorator);\r\n    ","'use strict';\r\n\r\nexport let RoutingVar: string = \"$routing\";\r\n\r\nfunction hookRoutingEvents(\r\n    $rootScope: ng.IRootScopeService,\r\n    $log: ng.ILogService,\r\n    $state: ng.ui.IStateService\r\n) {\r\n    \"ngInject\";\r\n\r\n    $rootScope.$on('$stateChangeStart',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            $rootScope[RoutingVar] = true;\r\n        }\r\n    );\r\n\r\n    $rootScope.$on('$stateChangeSuccess',\r\n        (event, toState, toParams, fromState, fromParams) => {\r\n            // Unset routing variable to disable page transition\r\n            $rootScope[RoutingVar] = false;                \r\n        }\r\n    );\r\n\r\n    // Intercept route error\r\n    $rootScope.$on('$stateChangeError',\r\n        (event, toState, toParams, fromState, fromParams, error) => {\r\n            // Unset routing variable to disable page transition\r\n            $rootScope[RoutingVar] = false;\r\n\r\n            $log.error('Error while switching route to ' + toState.name);\r\n            $log.error(error);\r\n        }\r\n    );\r\n\r\n    // Intercept route error\r\n    $rootScope.$on('$stateNotFound',\r\n        function(event, unfoundState, fromState, fromParams) {\r\n            event.preventDefault();\r\n\r\n            $rootScope[RoutingVar] = false;\r\n\r\n            // Todo: Move to errors\r\n            $state.go('errors_missing_route',  {\r\n                    unfoundState: unfoundState,\r\n                    fromState : {\r\n                        to: fromState ? fromState.name : '',\r\n                        fromParams: fromParams\r\n                    }\r\n                }\r\n            );\r\n        }\r\n    );\r\n\r\n}\r\n\r\nangular\r\n    .module('pipRouting')\r\n    .run(hookRoutingEvents);\r\n    ","'use strict';\r\n\r\nangular.module('pipRouting', ['ui.router']);\r\n\r\nimport './BackDecorator';\r\nimport './RedirectDecorator';\r\nimport './RoutingEvents';\r\n\r\nexport * from './BackDecorator';\r\nexport * from './RoutingEvents';\r\n","'use strict';\r\n\r\nexport let IdentityRootVar = \"$identity\";\r\nexport let IdentityChangedEvent = \"pipIdentityChanged\";\r\n\r\nexport interface IIdentity {\r\n    id: string;\r\n    full_name: string;\r\n    details: string;\r\n    email: string;\r\n    photo_url: string;\r\n    groups: string[];\r\n}\r\n\r\nexport interface IIdentityService {\r\n    identity: any;\r\n}\r\n\r\nexport interface IIdentityProvider extends ng.IServiceProvider {\r\n    setRootVar: boolean;\r\n    identity: any;\r\n}\r\n\r\n\r\nclass IdentityService implements IIdentityService {\r\n    private _identity: any;\r\n    private _setRootVar: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n\r\n    public constructor(\r\n        setRootVar: boolean,\r\n        identity: any,\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._identity = identity;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n\r\n        this.setRootVar();\r\n    }\r\n\r\n    private setRootVar(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[IdentityRootVar] = this._identity;\r\n    }\r\n\r\n    public get identity(): any {\r\n        return this._identity;\r\n    }\r\n\r\n    public set identity(value: any) {\r\n        this._identity = value;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(IdentityChangedEvent, this._identity);\r\n\r\n        let identity: any = value || {};\r\n        this._log.debug(\"Changed identity to \" + JSON.stringify(identity));\r\n    }\r\n}\r\n\r\nclass IdentityProvider implements IdentityProvider {\r\n    private _setRootVar = true;\r\n    private _identity: any = null;\r\n    private _service: IdentityService = null;\r\n\r\n    public constructor() { }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get identity(): any {\r\n        return this._identity;  \r\n    }\r\n\r\n    public set identity(value: any) {\r\n        this._identity = value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new IdentityService(this._setRootVar, this._identity, $rootScope, $log);\r\n\r\n        return this._service;\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipSession')\r\n    .provider('pipIdentity', IdentityProvider);\r\n","'use strict';\r\n\r\nexport const SessionRootVar = \"$session\";\r\nexport const SessionOpenedEvent = \"pipSessionOpened\";\r\nexport const SessionClosedEvent = \"pipSessionClosed\";\r\n\r\nexport interface ISessionService {\r\n    session: any;\r\n    isOpened(): boolean;\r\n\r\n    open(session: any): void;\r\n    close(): void;\r\n}\r\n\r\nexport interface ISessionProvider extends ng.IServiceProvider {\r\n    setRootVar: boolean;\r\n    session: any;\r\n}\r\n\r\nclass SessionService implements ISessionService {\r\n    private _setRootVar: boolean;\r\n    private _session: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n\r\n    public constructor(\r\n        setRootVar: boolean, \r\n        session: any, \r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._session = session;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n\r\n        this.setRootVar();\r\n    }\r\n    \r\n    private setRootVar(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[SessionRootVar] = this._session;\r\n    }\r\n\r\n    public get session(): any {\r\n        return this._session;\r\n    }\r\n\r\n    public isOpened(): boolean {\r\n        return this._session != null;\r\n    }\r\n\r\n    public open(session: any, fullReset: boolean = false, partialReset: boolean = false) {\r\n        if (session == null)\r\n            throw new Error(\"Session cannot be null\");\r\n\r\n        this._session = session;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(SessionOpenedEvent, session);\r\n\r\n        this._log.debug(\"Opened session \" + session);\r\n    }\r\n\r\n    public close(fullReset: boolean = false, partialReset: boolean = false) {\r\n        let oldSession = this._session;\r\n\r\n        this._session = null;\r\n        this.setRootVar();\r\n        this._rootScope.$emit(SessionClosedEvent, oldSession);\r\n\r\n        this._log.debug(\"Closed session \" + oldSession);\r\n    }\r\n}\r\n\r\nclass SessionProvider implements ISessionProvider {\r\n    private _setRootVar = true;\r\n    private _session: any = null;\r\n    private _service: SessionService = null;\r\n\r\n    public constructor() { }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get session(): any {\r\n        return this._session;  \r\n    }\r\n\r\n    public set session(value: any) {\r\n        this._session = value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SessionService(this._setRootVar, this._session, $rootScope, $log);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipSession')\r\n    .provider('pipSession', SessionProvider); \r\n","'use strict';\r\n\r\nangular.module('pipSession', []);\r\n\r\nimport './IdentityService';\r\nimport './SessionService';\r\n\r\nexport * from './IdentityService';\r\nexport * from './SessionService';\r\n","'use strict';\r\n\r\nimport { TransactionError } from './TransactionError'\r\n\r\nexport class Transaction {\r\n    private _scope: string = null;\r\n    private _id: string = null;\r\n    private _operation: string = null;\r\n    private _error: TransactionError = new TransactionError();\r\n    private _progress: number = 0;\r\n\r\n    public constructor(scope: string) {\r\n        this._scope = scope;\r\n    }\r\n\r\n    public get scope(): string {\r\n        return this._scope;\r\n    }\r\n\r\n    public get id(): string {\r\n        return this._id;\r\n    }\r\n\r\n    public get operation(): string {\r\n        return this._operation;\r\n    }\r\n\r\n    public get progress(): number {\r\n        return this._progress;\r\n    }\r\n\r\n    public get error(): TransactionError {\r\n        return this._error;\r\n    }\r\n\r\n    public get errorMessage(): string {\r\n        return this._error.message;\r\n    }\r\n\r\n    public reset(): void {\r\n        this._id = null;\r\n        this._operation = null;\r\n        this._progress = 0;\r\n        this._error.reset();\r\n    }\r\n\r\n    public busy(): boolean {\r\n        return this._id != null;\r\n    }\r\n\r\n    public failed(): boolean {\r\n        return !this._error.empty();\r\n    }\r\n\r\n    public aborted(id: string): boolean {\r\n        return this._id != id;\r\n    }\r\n\r\n    public begin(operation: string): string {\r\n        // Transaction is already running\r\n        if (this._id != null) return null;\r\n\r\n        this._id = new Date().getTime().toString();\r\n        this._operation = operation || 'PROCESSING'\r\n        this._error.reset();\r\n\r\n        return this._id;\r\n    }\r\n\r\n    public update(progress: number): void {\r\n        this._progress = Math.max(progress, 100);\r\n    }\r\n\r\n    public abort(): void {\r\n        this._id = null;\r\n        this._error.reset();\r\n    }\r\n\r\n    public end(error?: any): void {\r\n        this._error.decode(error);\r\n        this._id = null;\r\n    }\r\n}\r\n","'use strict';\r\n\r\nexport class TransactionError {\r\n    public code: string;\r\n    public message: string;\r\n    public details: any;\r\n    public cause: string;\r\n    public stack_trace: string;\r\n\r\n    public constructor(error?: any) {\r\n        if (error != null)\r\n            this.decode(error);\r\n    }\r\n\r\n    public reset(): void {\r\n        this.code = null;\r\n        this.message = null;\r\n        this.details = null;\r\n        this.cause = null;\r\n        this.stack_trace = null;\r\n    }\r\n\r\n    public empty(): boolean {\r\n        return this.message = null && this.code == null;\r\n    }\r\n\r\n    public decode(error: any): void {\r\n        this.reset();\r\n\r\n        if (error == null) return;\r\n\r\n        // Process regular messages\r\n        if (error.message) \r\n            this.message = error.message;\r\n\r\n        // Process server application errors\r\n        if (error.data) {\r\n            if (error.data.code) { \r\n                // process server error codes here\r\n                this.message = this.message || 'ERROR_' + error.data.code;\r\n                this.code = this.code || error.data.code;\r\n            }\r\n\r\n            if (error.data.message)\r\n                this.message = this.message || error.data.message;\r\n\r\n            this.message = this.message || error.data;\r\n            this.details = this.details || error.data;\r\n\r\n            this.cause = error.data.cause;\r\n            this.stack_trace = error.data.stack_trace;\r\n            this.details = error.data.details;            \r\n        }\r\n\r\n        // Process standard HTTP errors\r\n        if (error.statusText)\r\n            this.message = this.message || error.statusText;\r\n\r\n        if (error.status) {\r\n            this.message = this.message || 'ERROR_' + error.status;\r\n            this.code = this.code || error.status;\r\n        }\r\n        \r\n        this.message = this.message || error;\r\n        this.details = this.details || error;\r\n    }\r\n}\r\n","'use strict';\r\n\r\nimport { Transaction } from './Transaction';\r\n\r\nexport interface ITransactionService {\r\n    create(scope?: string): Transaction;\r\n    get(scope?: string): Transaction;\r\n}\r\n\r\nclass TransactionService implements ITransactionService {\r\n    private _transactions: any = {};\r\n\r\n    public constructor() {}\r\n\r\n    public create(scope?: string): Transaction {\r\n        let transaction = new Transaction(scope);\r\n        \r\n        if (scope != null)\r\n            this._transactions[scope] = transaction;\r\n\r\n        return transaction;\r\n    }\r\n\r\n    public get(scope?: string): Transaction {\r\n        let transaction: Transaction = scope != null ? <Transaction>this._transactions[scope] : null;\r\n\r\n        if (transaction == null) {\r\n            transaction = new Transaction(scope);\r\n            if (scope != null)\r\n                this._transactions[scope] = transaction;\r\n        }\r\n\r\n        return transaction;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTransaction')\r\n    .service('pipTransaction', TransactionService);\r\n","'use strict';\r\n\r\nfunction configureTransactionStrings($injector) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate = $injector.has('pipTranslateProvider') ? $injector.get('pipTranslateProvider') : null;\r\n\r\n    if (pipTranslate) {\r\n        pipTranslate.setTranslations('en', {\r\n            'ENTERING': 'Entering...',\r\n            'PROCESSING': 'Processing...',\r\n            'LOADING': 'Loading...',\r\n            'SAVING': 'Saving...'\r\n        });\r\n\r\n        pipTranslate.setTranslations('ru', {\r\n            'ENTERING': '  ...',\r\n            'PROCESSING': '...',\r\n            'LOADING': '...',\r\n            'SAVING': '...'\r\n        });   \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipTransaction')\r\n    .config(configureTransactionStrings);\r\n","'use strict';\r\n\r\nangular.module('pipTransaction', []);\r\n\r\nimport './TransactionStrings';\r\nimport './TransactionError';\r\nimport './Transaction';\r\nimport './TransactionService';\r\n\r\nexport * from './TransactionError';\r\nexport * from './Transaction';\r\nexport * from './TransactionService';\r\n","'use strict';\r\n\r\nfunction translateDirective(pipTranslate): ng.IDirective {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {\r\n            key1: '@pipTranslate',\r\n            key2: '@key'\r\n        },\r\n        link: (scope: any, element: any, attrs: any) => {\r\n            let key = scope.key1 || scope.key2;\r\n            let value = pipTranslate.translate(key);\r\n            element.text(value);\r\n        }\r\n    };\r\n}\r\n\r\nfunction translateHtmlDirective(pipTranslate): ng.IDirective {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: {\r\n            key1: '@pipTranslateHtml',\r\n            key2: '@key'\r\n        },\r\n        link: (scope: any, element: any, attrs: any) => {\r\n            let key = scope.key1 || scope.key2;\r\n            let value = pipTranslate.translate(key);\r\n            element.html(value);\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .directive('pipTranslate', translateDirective)\r\n    .directive('pipTranslateHtml', translateHtmlDirective);\r\n","'use strict';\r\n\r\nfunction translateFilter(pipTranslate) {\r\n    \"ngInject\";\r\n\r\n    return function (key) {\r\n        return pipTranslate.translate(key) || key;\r\n    }\r\n}\r\n\r\nfunction optionalTranslateFilter($injector) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate = $injector.has('pipTranslate') \r\n        ? $injector.get('pipTranslate') : null;\r\n\r\n    return function (key) {\r\n        return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .filter('translate', translateFilter);\r\n","'use strict';\r\n\r\nimport { Translation } from './Translation';\r\nimport { ResetPageEvent } from '../utilities/PageResetService';\r\n\r\nexport let LanguageRootVar = \"$language\";\r\nexport let LanguageChangedEvent = \"pipLanguageChanged\";    \r\n\r\nexport interface ITranslateService {\r\n    language: string;\r\n\r\n    use(language: string): string;\r\n    setTranslations(language: string, translations: any): void;\r\n    translations(language: string, translations: any): void;\r\n\r\n    translate(key: string): string;\r\n    translateArray(keys: string[]): string[];\r\n    translateSet(keys: string[], keyProp: string, valueProp: string): any[];\r\n    translateObjects(items: any[], keyProp: string, valueProp: string): any[];\r\n    translateWithPrefix(prefix: string, key: string);\r\n    translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n    translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n}\r\n\r\nexport interface ITranslateProvider extends ITranslateService, ng.IServiceProvider {\r\n}\r\n\r\nclass TranslateService implements ITranslateService {\r\n    private _translation: Translation;\r\n    private _setRootVar: boolean;\r\n    private _persist: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _window: ng.IWindowService;\r\n    private _mdDateLocale;\r\n\r\n    public constructor(\r\n        translation: Translation,\r\n        setRootVar: boolean,\r\n        persist: boolean,\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService,\r\n        $window: ng.IWindowService,\r\n        $mdDateLocale: angular.material.IDateLocaleProvider,\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._persist = persist;\r\n        this._translation = translation;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._window = $window;\r\n        this._mdDateLocale = $mdDateLocale;\r\n\r\n        if (this._persist && this._window.localStorage)\r\n            this._translation.language = this._window.localStorage.getItem('language') || this._translation.language;\r\n\r\n        this._log.debug(\"Set language to \" + this._translation.language);\r\n\r\n        this.save();\r\n    }\r\n\r\n    private changeLocale(locale: string) {\r\n        if (!locale) return;\r\n\r\n        // var localeDate: moment.MomentLanguageData;\r\n        var localeDate: any;\r\n\r\n        moment.locale(locale);\r\n        localeDate = moment.localeData();\r\n\r\n        this._mdDateLocale.months = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format;\r\n        this._mdDateLocale.shortMonths = angular.isArray(localeDate._monthsShort) ? localeDate._monthsShort : localeDate._monthsShort.format;\r\n        this._mdDateLocale.days = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format;\r\n        this._mdDateLocale.shortDays = localeDate._weekdaysMin;\r\n        this._mdDateLocale.firstDayOfWeek = localeDate._week.dow;\r\n    }\r\n\r\n    private save(): void {\r\n        if (this._setRootVar)\r\n            this._rootScope[LanguageRootVar] = this._translation.language;\r\n\r\n        if (this._persist && this._window.localStorage != null)\r\n            this._window.localStorage.setItem('language', this._translation.language);\r\n    }\r\n\r\n    public get language(): string {\r\n        return this._translation.language;\r\n    }\r\n\r\n    public set language(value: string) {\r\n        if (value != this._translation.language) {\r\n            this._translation.language = value;\r\n            \r\n            this._log.debug(\"Changing language to \" + value);\r\n\r\n            this.changeLocale(this._translation.language);\r\n            this.save();   \r\n\r\n            this._rootScope.$emit(LanguageChangedEvent, value);\r\n            this._rootScope.$emit(ResetPageEvent);\r\n        }\r\n    }\r\n\r\n    public use(language: string): string {\r\n        if (language != null)\r\n            this.language = language;\r\n        return this.language;\r\n    }\r\n\r\n    public setTranslations(language: string, translations: any): void {\r\n        return this._translation.setTranslations(language, translations);\r\n    }\r\n\r\n    public translations(language: string, translations: any): void {\r\n        return this._translation.setTranslations(language, translations);\r\n    }\r\n\r\n    public translate(key: string): string {\r\n        return this._translation.translate(key);\r\n    }\r\n\r\n    public translateArray(keys: string[]): string[] {\r\n        return this._translation.translateArray(keys);\r\n    }\r\n    \r\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n        return this._translation.translateSet(keys, keyProp, valueProp);\r\n    }\r\n\r\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n        return this._translation.translateObjects(items, keyProp, valueProp);\r\n    }\r\n\r\n    public translateWithPrefix(prefix: string, key: string) {\r\n        return this._translation.translateWithPrefix(prefix, key);\r\n    }\r\n\r\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        return this._translation.translateSetWithPrefix(prefix, keys, keyProp, valueProp);\r\n    }\r\n\r\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        return this._translation.translateSetWithPrefix2(prefix, keys, keyProp, valueProp);\r\n    }\r\n}\r\n\r\nclass TranslateProvider extends Translation implements ITranslateProvider {\r\n    private _translation: Translation;\r\n    private _setRootVar: boolean = true;\r\n    private _persist: boolean = true;\r\n    private _service: TranslateService;\r\n    \r\n    public constructor() {\r\n        super();\r\n    }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get persist(): boolean {\r\n        return this._persist;  \r\n    }\r\n\r\n    public set persist(value: boolean) {\r\n        this._persist = !!value;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $window: ng.IWindowService,\r\n        $mdDateLocale: angular.material.IDateLocaleProvider\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null) \r\n            this._service = new TranslateService(this, this._setRootVar, this._persist, $rootScope, $log, $window, $mdDateLocale);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nfunction initTranslate(pipTranslate: ITranslateService) {\r\n    pipTranslate.language;\r\n}\r\n\r\nangular\r\n    .module('pipTranslate')\r\n    .provider('pipTranslate', TranslateProvider)\r\n    .run(initTranslate);\r\n","'use strict';\r\n\r\nexport class Translation {\r\n    protected _language = 'en';\r\n    protected _translations = {\r\n        en: {\r\n            'en': 'English',\r\n            'ru': 'Russian',\r\n            'es': 'Spanish',\r\n            'pt': 'Portuguese',\r\n            'de': 'German',\r\n            'fr': 'French'\r\n        },\r\n        ru: {\r\n            'en': '',\r\n            'ru': '',\r\n            'es': '',\r\n            'pt': '',\r\n            'de': '',\r\n            'fr': ''\r\n        }\r\n    };\r\n\r\n    public constructor() {}\r\n\r\n    public get language(): string { return this._language; }\r\n    public set language(value: string) { this._language = value; }\r\n\r\n    public use(language: string): string {\r\n        if (language != null)\r\n            this._language = language;\r\n        return this._language;\r\n    }\r\n\r\n    // Set translation strings for specific language\r\n    public setTranslations(language: string, translations: any): void {\r\n        let map = this._translations[language] || {};\r\n        this._translations[language] = _.extend(map, translations);\r\n    }\r\n\r\n    // Yet another method to set translation strings for specific language\r\n    public translations(language: string, translations: any): void {\r\n        this.setTranslations(language, translations);\r\n    }\r\n\r\n    // Translate a string by key using set language\r\n    public translate(key: string): string {\r\n        if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n        let translations = this._translations[this._language] || {};\r\n        return translations[key] || key;\r\n    }\r\n\r\n    // Translate an array of strings\r\n    public translateArray(keys: string[]): string[] {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (k) {\r\n            let key = k || '';\r\n            values.push(translations[key] || key);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate an array of strings into array of objects (set)\r\n    public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n\r\n        let values: any[] = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key) {\r\n            let value: any = {};\r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[key] || key;\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate a collection of objects\r\n    public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n        if (_.isNull(items) || items.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'name';\r\n        valueProp = valueProp || 'nameLocal';\r\n\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(items, function (item) {\r\n            let key = item[keyProp] || '';\r\n\r\n            item[valueProp] = translations[key] || key;\r\n        });\r\n\r\n        return items;\r\n    }\r\n\r\n    // Translate a string by key  with prefix using set language todo\r\n    public translateWithPrefix(prefix: string, key: string) {\r\n        prefix = prefix ? prefix + '_' : '';\r\n        key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n        if (key == null) return '';\r\n        let translations = this._translations[this._language] || {};\r\n        return translations[key] || key;\r\n    };\r\n\r\n    public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key) {\r\n            let value: any = {}; \r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[prefix + '_' + key] || key;\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n\r\n    // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n    public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n        if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n        keyProp = keyProp || 'id';\r\n        valueProp = valueProp || 'name';\r\n        prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n        let values = [];\r\n        let translations = this._translations[this._language] || {};\r\n\r\n        _.each(keys, function (key) {\r\n            let value: any = {};\r\n            key = key || '';\r\n\r\n            value[keyProp] = key;\r\n            value[valueProp] = translations[prefix + key.replace(/ /g, '_').toUpperCase()]\r\n                || (prefix + key.replace(/ /g, '_').toUpperCase());\r\n\r\n            values.push(value);\r\n        });\r\n\r\n        return values;\r\n    }\r\n}\r\n","'use strict';\r\n\r\nangular.module('pipTranslate', []);\r\n\r\nimport './Translation';\r\nimport './TranslateService';\r\nimport './TranslateFilter';\r\nimport './TranslateDirective';\r\n\r\nexport * from './Translation';\r\nexport * from './TranslateService';\r\n","'use strict';\r\n\r\nexport interface ICodes {\r\n    // Simple version of string hashcode\r\n    hash(value: string): number;\r\n    // Generates random big number for verification codes\r\n    verification(): string;\r\n}\r\n\r\n\r\nclass Codes implements ICodes {\r\n    // Simple version of string hashcode\r\n    public hash(value: string): number {\r\n        if (value == null) return 0;\r\n        \r\n        let result = 0;\r\n        for (let i = 0; i < value.length; i++)\r\n            result += value.charCodeAt(i);\r\n\r\n        return result;\r\n    }\r\n\r\n    // Generates random big number for verification codes\r\n    public verification(): string {\r\n        return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipCodes', [])\r\n    .service('pipCodes', Codes);\r\n","'use strict';\r\n\r\nexport interface IFormat {\r\n    // Creates a sample line from a text\r\n    sample(value: string, maxLength: number): string;\r\n\r\n    sprintf(message: string, ...args: any[]): string;\r\n}\r\n\r\n\r\nclass Format implements IFormat {\r\n    // Cached for parsed formats\r\n    private cache = {};\r\n\r\n    // Creates a sample line from a text\r\n    public sample(value: string, maxLength: number): string {\r\n        if (!value || value == '') return '';\r\n\r\n        var length = value.indexOf('\\n');\r\n        length = length >= 0 ? length : value.length;\r\n        length = length < maxLength ? value.length : maxLength;\r\n\r\n        return value.substring(0, length);\r\n    }\r\n\r\n    private strRepeat(str: string, qty: number): string {\r\n        if (qty < 1) return '';\r\n        var result = '';\r\n        while (qty > 0) {\r\n            if (qty & 1) result += str;\r\n            qty >>= 1, str += str;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    private getType(variable) {\r\n        return toString.call(variable).slice(8, -1).toLowerCase();\r\n    }\r\n\r\n    private parseFormat(fmt: string) {\r\n        let _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\r\n        while (_fmt) {\r\n            if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                parse_tree.push(match[0]);\r\n            }\r\n            else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                parse_tree.push('%');\r\n            }\r\n            else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                if (match[2]) {\r\n                    arg_names |= 1;\r\n                    var field_list = [], replacement_field = match[2], field_match = [];\r\n                    if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                        field_list.push(field_match[1]);\r\n                        while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                            if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                            }\r\n                            else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                            }\r\n                            else {\r\n                                throw new Error('Unknown error');\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        throw new Error('Unknown error');\r\n                    }\r\n                    match[2] = field_list;\r\n                }\r\n                else {\r\n                    arg_names |= 2;\r\n                }\r\n                if (arg_names === 3) {\r\n                    throw new Error('Mixing positional and named placeholders is not (yet) supported');\r\n                }\r\n                parse_tree.push(match);\r\n            }\r\n            else {\r\n                throw new Error('Unknown error');\r\n            }\r\n            _fmt = _fmt.substring(match[0].length);\r\n        }\r\n        return parse_tree;\r\n    }\r\n\r\n    private format(parse_tree, argv) {\r\n        let cursor = 0; \r\n        let tree_length = parse_tree.length; \r\n        let output = [];\r\n\r\n        for (let i = 0; i < tree_length; i++) {\r\n            let node_type = this.getType(parse_tree[i]);\r\n            if (node_type === 'string') {\r\n                output.push(parse_tree[i]);\r\n            }\r\n            else if (node_type === 'array') {\r\n                let match = parse_tree[i]; // convenience purposes only\r\n                let arg: any;\r\n                if (match[2]) { // keyword argument\r\n                    arg = argv[cursor];\r\n                    for (let k = 0; k < match[2].length; k++) {\r\n                        if (!arg.hasOwnProperty(match[2][k])) {\r\n                            throw new Error(this.sprintf('Property \"%s\" does not exist', match[2][k]));\r\n                        }\r\n                        arg = arg[match[2][k]];\r\n                    }\r\n                } else if (match[1]) { // positional argument (explicit)\r\n                    arg = argv[match[1]];\r\n                }\r\n                else { // positional argument (implicit)\r\n                    arg = argv[cursor++];\r\n                }\r\n\r\n                if (/[^s]/.test(match[8]) && (this.getType(arg) != 'number')) {\r\n                    throw new Error(this.sprintf('Expecting number but found %s', this.getType(arg)));\r\n                }\r\n                switch (match[8]) {\r\n                    case 'b': arg = arg.toString(2); break;\r\n                    case 'c': arg = String.fromCharCode(arg); break;\r\n                    case 'd': arg = parseInt(arg, 10); break;\r\n                    case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                    case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                    case 'o': arg = arg.toString(8); break;\r\n                    case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                    case 'u': arg = Math.abs(arg); break;\r\n                    case 'x': arg = arg.toString(16); break;\r\n                    case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                }\r\n                arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);                \r\n                let pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                let pad_length = match[6] - String(arg).length;\r\n                let pad = match[6] ? this.strRepeat(pad_character, pad_length) : '';\r\n                output.push(match[5] ? arg + pad : pad + arg);\r\n            }\r\n        }\r\n        return output.join('');\r\n    }\r\n    \r\n    public sprintf(message: string, ...args: any[]): string {\r\n        if (!this.cache.hasOwnProperty(message))\r\n            this.cache[message] = this.parseFormat(message);\r\n\r\n        return this.format(this.cache[message], args);\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipFormat', [])\r\n    .service('pipFormat', Format);\r\n","'use strict';\r\n\r\nexport let ResetPageEvent: string = \"pipResetPage\";\r\nexport let ResetAreaEvent: string = \"pipResetArea\";\r\n\r\nexport let ResetRootVar: string = \"$reset\";\r\nexport let ResetAreaRootVar: string = \"$resetArea\";\r\n\r\nexport interface IPageResetService {\r\n    reset(): void;\r\n    resetArea(area: string): void;\r\n}\r\n\r\n\r\nclass PageResetService implements IPageResetService {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public constructor(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $timeout: ng.ITimeoutService\r\n    ) {\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._timeout = $timeout;\r\n\r\n        $rootScope[ResetRootVar] = false;\r\n        $rootScope[ResetAreaRootVar] = null;\r\n    }\r\n\r\n    public reset(): void {\r\n        this._log.debug(\"Resetting the entire page\");\r\n        this.performReset(null);\r\n    }\r\n\r\n    public resetArea(area: string): void {\r\n        this._log.debug(\"Resetting the area \" + area);\r\n        this.performReset(area);\r\n    }\r\n\r\n    private performReset(area?: string): void {\r\n        this._rootScope[ResetRootVar] = area == null;\r\n        this._rootScope[ResetAreaRootVar] = area;\r\n\r\n        this._timeout(() => {\r\n            this._rootScope[ResetRootVar] = false;\r\n            this._rootScope[ResetAreaRootVar] = null;\r\n        }, 0);\r\n    }\r\n}\r\n\r\n\r\nfunction hookResetEvents(\r\n    $rootScope: ng.IRootScopeService, \r\n    pipPageReset: IPageResetService\r\n) {\r\n    $rootScope.$on(ResetPageEvent, () => { pipPageReset.reset(); });\r\n    $rootScope.$on(ResetAreaEvent, (event, area) => { pipPageReset.resetArea(area); });\r\n}\r\n\r\n\r\nangular.module('pipPageReset', [])\r\n    .service('pipPageReset', PageResetService)\r\n    .run(hookResetEvents);\r\n","'use strict';\r\n\r\nexport interface IScrollService {\r\n    scrollTo(parentElement, childElement, animationDuration): void;\r\n}\r\n\r\nclass ScrollService implements IScrollService {\r\n\r\n    public scrollTo(parentElement, childElement, animationDuration): void {\r\n        if (!parentElement || !childElement) return;\r\n        if (animationDuration == undefined) animationDuration = 300;\r\n\r\n        setTimeout(function () {\r\n            if (!$(childElement).position()) return;\r\n            var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n            if (modDiff < 20) return;\r\n            var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n            if (animationDuration > 0)\r\n                $(parentElement).animate({\r\n                    scrollTop: scrollTo + 'px'\r\n                }, animationDuration);\r\n        }, 100);\r\n    }\r\n\r\n}\r\n\r\n\r\nangular\r\n    .module('pipScroll', [])\r\n    .service('pipScroll', ScrollService);\r\n","'use strict';\r\n\r\nexport interface ISystemInfo {\r\n    browserName: string;\r\n    browserVersion: string;\r\n    platform: string;\r\n    os: string;\r\n\r\n    isDesktop(): boolean;\r\n    isMobile(): boolean;\r\n    isCordova(): boolean;\r\n    isSupported(supported?: any): boolean;\r\n}\r\n\r\n\r\nclass SystemInfo implements ISystemInfo {\r\n    private _window: ng.IWindowService;\r\n\r\n    public constructor($window: ng.IWindowService) {\r\n        \"ngInject\";\r\n\r\n        this._window = $window;\r\n    }\r\n\r\n    // todo add support for iPhone\r\n    public get browserName(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        if (ua.search(/Edge/) > -1) return \"edge\";\r\n        if (ua.search(/MSIE/) > -1) return \"ie\";\r\n        if (ua.search(/Trident/) > -1) return \"ie\";\r\n        if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n        if (ua.search(/Opera/) > -1) return \"opera\";\r\n        if (ua.search(/OPR/) > -1) return \"opera\";\r\n        if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n        if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n        if (ua.search(/Safari/) > -1) return \"safari\";\r\n        if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n        \r\n        return \"unknown\";\r\n    }\r\n\r\n    public get browserVersion(): string {\r\n        let version;\r\n        let ua = this._window.navigator.userAgent;\r\n        let browser = this.browserName;\r\n\r\n        switch (browser) {\r\n            case \"edge\":\r\n                version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                break;\r\n            case \"ie\":\r\n                version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                break;\r\n            case \"ie11\":\r\n                browser = \"ie\";\r\n                version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                break;\r\n            case \"firefox\":\r\n                version = ua.split(\"Firefox/\")[1];\r\n                break;\r\n            case \"opera\":\r\n                version = ua.split(\"Version/\")[1];\r\n                break;\r\n            case \"operaWebkit\":\r\n                version = ua.split(\"OPR/\")[1];\r\n                break;\r\n            case \"yabrowser\":\r\n                version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"chrome\":\r\n                version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"safari\":\r\n                version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                break;\r\n            case \"maxthon\":\r\n                version = ua.split(\"Maxthon/\")[1];\r\n                break;\r\n        }\r\n\r\n        return version;\r\n    }\r\n    \r\n    public get platform(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) \r\n            return 'mobile';\r\n\r\n        return 'desktop';\r\n    }\r\n\r\n    public get os(): string {\r\n        let ua = this._window.navigator.userAgent;\r\n\r\n        try {\r\n            let osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [ua])[0].replace('sunos', 'solaris');\r\n            let osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n            return osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n        } catch (err) {\r\n            return 'unknown'\r\n        }\r\n    }\r\n\r\n    public isDesktop(): boolean {\r\n        return this.platform == 'desktop';\r\n    }\r\n\r\n    public isMobile(): boolean {\r\n        return this.platform == 'mobile';\r\n    }\r\n\r\n    // Todo: complete implementation\r\n    public isCordova(): boolean {\r\n        return false;\r\n    }\r\n\r\n    // Todo: Move to errors\r\n    public isSupported(supported?: any): boolean {\r\n        if (!supported) \r\n            supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n\r\n        let browser = this.browserName;\r\n        let version = this.browserVersion;\r\n        version = version.split(\".\")[0]\r\n\r\n        if (browser && supported[browser] && version >= supported[browser]) \r\n            return true;\r\n\r\n        return true;\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipSystemInfo', [])\r\n    .service('pipSystemInfo', SystemInfo);\r\n","'use strict';\r\n\r\nexport interface ITags {\r\n    normalizeOne(tag: string): string;\r\n    compressOne(tag: string): string;\r\n    equal(tag1: string, tag2: string): boolean;\r\n    normalizeAll(tags: any): string[];\r\n    compressAll(tags: any): string[];\r\n    extract(entity: any, searchFields?: string[]): string[];\r\n}\r\n\r\n\r\nclass Tags implements ITags {\r\n\r\n    public normalizeOne(tag: string): string {\r\n        return tag \r\n            ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n            : null;\r\n    }\r\n\r\n    public compressOne(tag: string): string {\r\n        return tag\r\n            ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n            : null;\r\n    }\r\n\r\n    public equal(tag1: string, tag2: string): boolean {\r\n        if (tag1 == null && tag2 == null)\r\n            return true;\r\n        if (tag1 == null || tag2 == null)\r\n            return false;\r\n        return this.compressOne(tag1) == this.compressOne(tag2);\r\n    }\r\n\r\n    public normalizeAll(tags: any): string[] {\r\n        if (_.isString(tags))\r\n            tags = tags.split(/( |,|;)+/);\r\n\r\n        tags = _.map(tags, (tag: string) => this.normalizeOne(tag));\r\n\r\n        return tags;\r\n    }\r\n\r\n    public compressAll(tags: any): string[] {\r\n        if (_.isString(tags))\r\n            tags = tags.split(/( |,|;)+/);\r\n\r\n        tags = _.map(tags, (tag: string) => this.compressOne(tag));\r\n\r\n        return tags;\r\n    }\r\n\r\n    public extract(entity: any, searchFields?: string[]): string[] {\r\n        let tags = this.normalizeAll(entity.tags);\r\n\r\n        _.each(searchFields, (field) => {\r\n            let text = entity[field] || '';\r\n\r\n            if (text != '') {\r\n                let hashTags = text.match(/#\\w+/g);\r\n                tags = tags.concat(this.normalizeAll(hashTags));\r\n            }\r\n        });\r\n\r\n        return _.uniq(tags);\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipTags', [])\r\n    .service('pipTags', Tags);\r\n","'use strict';\r\n\r\nexport interface ITimerService {\r\n    isStarted(): boolean;\r\n\r\n    addEvent(event: string, timeout: number): void;\r\n    removeEvent(event: string): void;\r\n    clearEvents(): void;\r\n\r\n    start(): void;\r\n    stop(): void;\r\n}\r\n\r\n\r\nclass TimerEvent {\r\n    public event: string;\r\n    public timeout: number;\r\n    public interval: any;\r\n\r\n    public constructor(event: string, timeout: number) {\r\n        this.event = event;\r\n        this.timeout = timeout;\r\n    }\r\n}\r\n\r\n\r\nlet DefaultEvents: TimerEvent[] = [\r\n    new TimerEvent('pipAutoPullChanges', 60000), // 1 min\r\n    new TimerEvent('pipAutoUpdatePage', 15000), // 15 sec\r\n    new TimerEvent('pipAutoUpdateCollection', 300000) // 5 min\r\n];\r\n\r\n\r\nclass TimerService implements ITimerService {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _interval: ng.IIntervalService;        \r\n    private _started = false;\r\n    private _events: TimerEvent[] = _.cloneDeep(DefaultEvents);\r\n\r\n    public constructor(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $interval: ng.IIntervalService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._interval = $interval;\r\n    }\r\n\r\n    public isStarted(): boolean {\r\n        return this._started;\r\n    }\r\n\r\n    public addEvent(event: string, timeout: number): void {\r\n        var existingEvent = _.find(this._events, (e) => e.event == event);\r\n        if (existingEvent != null) return;\r\n\r\n        let newEvent = <TimerEvent> {\r\n            event: event,\r\n            timeout: timeout\r\n        };\r\n        this._events.push(newEvent);\r\n\r\n        if (this._started)\r\n            this.startEvent(newEvent);\r\n    }\r\n\r\n    public removeEvent(event: string): void {\r\n        for (let i = this._events.length - 1; i >= 0; i--) {\r\n            let existingEvent = this._events[i];\r\n            if (existingEvent.event == event) {\r\n                this.stopEvent(existingEvent);\r\n                this._events.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n\r\n    public clearEvents(): void {\r\n        this.stop();\r\n        this._events = [];\r\n    }\r\n\r\n    private startEvent(event: TimerEvent): void {\r\n        event.interval = this._interval(\r\n            () => { \r\n                this._log.debug('Generated timer event ' + event.event); \r\n                this._rootScope.$emit(event.event)\r\n            },\r\n            event.timeout\r\n        )\r\n    }\r\n\r\n    private stopEvent(event: TimerEvent): void {\r\n        if (event.interval != null) {\r\n            try {\r\n                this._interval.cancel(event.interval);\r\n            } catch (ex) {\r\n                // Do nothing\r\n            }\r\n            event.interval = null;\r\n        }\r\n    }\r\n\r\n    public start(): void {\r\n        if (this._started) return;\r\n\r\n        _.each(this._events, (event) => {\r\n            this.startEvent(event);\r\n        });\r\n\r\n        this._started = true;\r\n    }\r\n\r\n    public stop(): void {\r\n        _.each(this._events, (event) => {\r\n            this.stopEvent(event);\r\n        });\r\n\r\n        this._started = false;\r\n    }\r\n}\r\n\r\n\r\nangular.module('pipTimer', [])\r\n    .service('pipTimer', TimerService);\r\n","'use strict';\r\n\r\nimport './Format';\r\nimport './TimerService';\r\nimport './ScrollService';\r\nimport './Tags';\r\nimport './Codes';\r\nimport './SystemInfo';\r\nimport './PageResetService';\r\n\r\nexport * from './Format';\r\nexport * from './TimerService';\r\nexport * from './ScrollService';\r\nexport * from './Tags';\r\nexport * from './Codes';\r\nexport * from './SystemInfo';\r\nexport * from './PageResetService';","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipButtons', [\r\n        'pipToggleButtons',\r\n        'pipRefreshButton',\r\n        'pipFabTooltipVisibility'\r\n    ]);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Optional filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipHelp.Translate', []);\r\n\r\n    thisModule.filter('translate', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n/*\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFabTooltipVisibility\", []);\r\n\r\n    thisModule.directive(\"pipFabTooltipVisibility\", function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: function($scope, $attrs) {\r\n               \r\n            }\r\n        };\r\n    });\r\n\r\n})();*/\r\n\r\n\r\nclass FabTooltipVisibilityController {\r\n    private _element;\r\n    private _scope: angular.IScope;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    constructor(\r\n        $mdMedia: angular.material.IMedia,\r\n        $element: any,\r\n        $attrs: angular.IAttributes,\r\n        $scope: angular.IScope,\r\n        $timeout: ng.ITimeoutService,\r\n        $parse\r\n    ) {\r\n        \"ngInject\";\r\n          let trigGetter = $parse($attrs['pipFabTooltipVisibility']),\r\n              showGetter = $parse($attrs['pipFabShowTooltip']),\r\n              showSetter = showGetter.assign;\r\n\r\n                $scope.$watch(trigGetter, (isOpen) => {\r\n                    if (isOpen) {\r\n                        $timeout(() => {\r\n                            showSetter($scope, isOpen);\r\n                        }, 600);\r\n                    } else {\r\n                        showSetter($scope, isOpen);\r\n                    }\r\n                });\r\n    }\r\n}\r\n\r\n(() => {\r\n    function pipFabTooltipVisibility($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: FabTooltipVisibilityController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipFabTooltipVisibility', [])\r\n        .directive('pipFabTooltipVisibility', pipFabTooltipVisibility);\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipRefreshButton', ['ngMaterial']);\r\n\r\n    thisModule.directive('pipRefreshButton',\r\n        function ($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                template: String() +\r\n                '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"onClick($event)\" aria-label=\"REFRESH\">' +\r\n                '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\r\n                '<span class=\"pip-refresh-text\"></span>' +\r\n                '</md-button>',\r\n                replace: false,\r\n                link: function ($scope, $element, $attrs: any) {\r\n                    var width, text, show,\r\n                        textGetter = $parse($attrs.pipText),\r\n                        visibleGetter = $parse($attrs.pipVisible),\r\n                        refreshGetter = $parse($attrs.pipRefresh),\r\n                        $button = $element.children('.md-button'),\r\n                        $text = $button.children('.pip-refresh-text');\r\n\r\n                    show = function () {\r\n                        // Set a new text\r\n                        text = textGetter($scope);\r\n                        $text.text(text);\r\n\r\n                        // Show button\r\n                        $button.show();\r\n\r\n                        // Adjust position\r\n                        width = $button.width();\r\n                        $button.css('margin-left', '-' + width / 2 + 'px');\r\n                    };\r\n\r\n                    function hide() {\r\n                        $button.hide();\r\n                    }\r\n\r\n                    (<any>$scope).onClick = function () {\r\n                        refreshGetter($scope);\r\n                    };\r\n\r\n                    $scope.$watch(visibleGetter, function (newValue) {\r\n                        if (newValue) {\r\n                            show();\r\n                        } else {\r\n                            hide();\r\n                        }\r\n                    });\r\n\r\n                    $scope.$watch(textGetter, function (newValue: string) {\r\n                        $text.text(newValue);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();","// /// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n// class ToggleButtonsController {\r\n//     private _element;\r\n//     private _scope: angular.IScope;\r\n//     private _timeout: ng.ITimeoutService;\r\n\r\n//     public $mdMedia: angular.material.IMedia;\r\n//     public class: string;\r\n//     public multiselect: boolean;\r\n//     public buttons;\r\n//     public currentButtonValue;\r\n//     public currentButtonIndex: number;\r\n//     public currentButton;\r\n//     public buttonSelected;\r\n//     public disabled;\r\n//     public enterSpacePress: Function;\r\n//     public ngDisabled: Function;\r\n//     public highlightButton;\r\n//     public change: Function;\r\n//     public onlyToggle: boolean;\r\n    \r\n//     constructor(\r\n//         $mdMedia: angular.material.IMedia,\r\n//         $element: any,\r\n//         $attrs: angular.IAttributes,\r\n//         $scope: angular.IScope,\r\n//         $timeout: ng.ITimeoutService\r\n//     ) {\r\n//         \"ngInject\";\r\n//          this.$mdMedia = $mdMedia;\r\n//          this.class = $attrs['class'] || '';\r\n//          this.multiselect = $scope['multiselect'] || false;\r\n//          this.ngDisabled = $scope['ngDisabled'];\r\n//          this.currentButtonValue = $scope['currentButtonValue'];\r\n//          this.currentButton = $scope['currentButton'];\r\n//          this.change = $scope['change'];\r\n//          this.onlyToggle = $scope['onlyToggle'];\r\n\r\n//          this.buttons = !$scope['buttons'] || _.isArray($scope['buttons']) && $scope['buttons'].length === 0 ? \r\n//                         [] : $scope['buttons'];\r\n         \r\n//         let index = _.indexOf(this.buttons, _.find(this.buttons, {id: this.currentButtonValue}));\r\n//         this.currentButtonIndex = index < 0 ? 0 : index;\r\n//         this.currentButton = this.buttons.length > 0 ? this.buttons[this.currentButtonIndex] : this.currentButton;\r\n       \r\n//         this.buttonSelected = (index) => {\r\n//             if (this.disabled()) { return; }\r\n//             this.currentButtonIndex = index;\r\n//             this.currentButton = this.buttons[this.currentButtonIndex];\r\n//             this.currentButtonValue = this.currentButton.id || index;\r\n\r\n//             $timeout( () => {\r\n//                 if (this.change) {\r\n//                     this.change();\r\n//                 } });\r\n//         };\r\n\r\n//         this.enterSpacePress = (event) => {\r\n//              this.buttonSelected(event.index);\r\n//         };\r\n\r\n//         this.disabled = () => {\r\n//             if (this.ngDisabled) { \r\n//                 return this.ngDisabled(); \r\n//             }\r\n//         };\r\n\r\n//         this.highlightButton = (index) => {\r\n//             if (this.multiselect && \r\n//                 !_.isUndefined(this.currentButton.level) && \r\n//                 !_.isUndefined(this.buttons[index].level)) {\r\n\r\n//                 return this.currentButton.level >= this.buttons[index].level;\r\n//             } \r\n\r\n//             return this.currentButtonIndex == index;\r\n//         }\r\n//     }\r\n\r\n\r\n// }\r\n\r\n// (() => {\r\n//     function ToggleButtonsDirective() {\r\n//         return {\r\n//             restrict: 'EA',\r\n//             controller: ToggleButtonsController,\r\n//             controllerAs: 'toggle',\r\n//             scope: {\r\n//                 ngDisabled: '&',\r\n//                 buttons: '=pipButtons',\r\n//                 currentButtonValue: '=ngModel',\r\n//                 currentButton: '=?pipButtonObject',\r\n//                 multiselect: '=?pipMultiselect',\r\n//                 change: '&ngChange',\r\n//                 onlyToggle: '=?pipOnlyToggle'\r\n//             },\r\n//             link: function (scope, elem) {\r\n//                 elem\r\n//                     .on('focusin', function () {\r\n//                         elem.addClass('focused-container');\r\n//                     })\r\n//                     .on('focusout', function () {\r\n//                         elem.removeClass('focused-container');\r\n//                     });\r\n//             },\r\n//             templateUrl: 'toggle_buttons/toggle_buttons.html'\r\n//         };\r\n//     }\r\n\r\n//     angular\r\n//         .module('pipToggleButtons', ['pipButtons.Templates'])\r\n//         .directive('pipToggleButtons', ToggleButtonsDirective);\r\n\r\n// })();\r\n\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipToggleButtons', ['pipButtons.Templates']);\r\n\r\n    thisModule.directive('pipToggleButtons',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    buttons: '=pipButtons',\r\n                    currentButtonValue: '=ngModel',\r\n                    currentButton: '=?pipButtonObject',\r\n                    multiselect: '=?pipMultiselect',\r\n                    change: '&ngChange',\r\n                    onlyToggle: '=?pipOnlyToggle'\r\n                },\r\n                templateUrl: 'toggle_buttons/toggle_buttons.html',\r\n                controller: \r\n                function ($scope, $element, $attrs, $mdMedia, $timeout) {\r\n                    var index;\r\n\r\n                    $scope.$mdMedia = $mdMedia;\r\n                    $scope.class = $attrs.class || '';\r\n                    $scope.multiselect = $scope.multiselect || false;\r\n\r\n                    if (!$scope.buttons || _.isArray($scope.buttons) && $scope.buttons.length === 0) {\r\n                        $scope.buttons = [];\r\n                    }\r\n\r\n                    index = _.indexOf($scope.buttons, _.find($scope.buttons, {id: $scope.currentButtonValue}));\r\n                    $scope.currentButtonIndex = index < 0 ? 0 : index;\r\n                    $scope.currentButton = $scope.buttons.length > 0 ? $scope.buttons[$scope.currentButtonIndex]\r\n                        : $scope.currentButton;\r\n\r\n                    $scope.buttonSelected = function (index) {\r\n                        if ($scope.disabled()) {\r\n                            return;\r\n                        }\r\n                        \r\n                        if ($scope.buttons[index].diselectable === true && index === $scope.currentButtonIndex \r\n                                && $scope.buttons[index].level !== undefined) \r\n                        {\r\n                            let curLevel = $scope.buttons[index].level, tmp;\r\n                            curLevel--;\r\n\r\n                            tmp = _.findIndex($scope.buttons, (b) => { return b['level'] === curLevel; });\r\n                            index = tmp > -1 ? tmp: index;\r\n                        }\r\n\r\n                        $scope.currentButtonIndex = index;\r\n                        $scope.currentButton = $scope.buttons[$scope.currentButtonIndex];\r\n                        $scope.currentButtonValue = $scope.currentButton.id === undefined ? index: $scope.currentButton.id;\r\n\r\n                        $timeout(function () {\r\n                            if ($scope.change) {\r\n                                $scope.change();\r\n                            }\r\n                        });\r\n                    };\r\n\r\n                    $scope.enterSpacePress = function (event) {\r\n                        $scope.buttonSelected(event.index);\r\n                    };\r\n\r\n                    $scope.disabled = function () {\r\n                        if ($scope.ngDisabled) {\r\n                            return $scope.ngDisabled();\r\n                        }\r\n                    };\r\n\r\n                    $scope.highlightButton = function (index) {\r\n                        if ($scope.multiselect && $scope.currentButton.level !== undefined && $scope.buttons[index].level !== undefined) {\r\n                           return $scope.currentButton.level >= $scope.buttons[index].level;\r\n                        } else {\r\n                            return $scope.currentButtonIndex == index;\r\n                        }\r\n                    }\r\n                },\r\n                link: function (scope, elem) {\r\n                    elem\r\n                        .on('focusin', function () {\r\n                            elem.addClass('focused-container');\r\n                        })\r\n                        .on('focusout', function () {\r\n                            elem.removeClass('focused-container');\r\n                        });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})(); \r\n\r\n","(function(module) {\ntry {\n  module = angular.module('pipButtons.Templates');\n} catch (e) {\n  module = angular.module('pipButtons.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toggle_buttons/toggle_buttons.html',\n    '<div class=\"pip-toggle-buttons layout-row {{class}}\" pip-selected=\"bufButtonIndex\" pip-enter-space-press=\"enterSpacePress($event)\" ng-if=\"$mdMedia(\\'gt-xs\\') || onlyToggle\"><md-button tabindex=\"-1\" ng-repeat=\"button in buttons\" ng-class=\"{\\'md-accent md-raised selected color-accent-bg\\' : highlightButton($index)}\" ng-attr-style=\"{{ \\'background-color:\\' + (highlightButton($index) ? button.backgroundColor : \\'\\') + \\'!important\\' }}\" class=\"pip-selectable pip-chip-button flex\" ng-click=\"buttonSelected($index, $event)\" ng-disabled=\"button.disabled || disabled()\">{{button.name || button.title | translate}} <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span></md-button></div><md-input-container class=\"md-block\" ng-if=\"$mdMedia(\\'xs\\') && !onlyToggle\"><md-select ng-model=\"currentButtonIndex\" ng-disabled=\"disabled()\" aria-label=\"DROPDOWN\" md-on-close=\"buttonSelected(currentButtonIndex)\"><md-option ng-repeat=\"action in buttons\" value=\"{{ ::$index }}\">{{ (action.title || action.name) | translate }} <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span></md-option></md-select></md-input-container>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-buttons-html.min.js.map\n","'use strict';\r\n\r\nimport { MainBreakpoints } from '../media/MediaService';\r\nimport { IAuxPanelService } from './AuxPanelService';\r\n\r\n(() => {\r\n\r\nclass AuxPanelDirectiveController {\r\n    private _pipAuxPanel: IAuxPanelService;\r\n    private normalSize: number = 320;\r\n    private largeSize: number = 480;\r\n\r\n    public constructor(pipAuxPanel: IAuxPanelService) {\r\n        this._pipAuxPanel = pipAuxPanel;\r\n    }\r\n\r\n    public isGtxs():boolean {\r\n        return Number($('body').width()) > MainBreakpoints.xs && this._pipAuxPanel.isOpen();\r\n    }\r\n\r\n    public isGtlg():boolean {\r\n        return Number($('body').width()) > (MainBreakpoints.lg + this.largeSize);\r\n    }\r\n}\r\n\r\nfunction AuxPanelDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        replace: true,\r\n        controller: AuxPanelDirectiveController,\r\n        transclude: true,\r\n        controllerAs: 'vm',\r\n        template: '<md-sidenav class=\"md-sidenav-right md-whiteframe-z2 pip-auxpanel color-content-bg\" ng-class=\"{\\'pip-large\\': vm.isGtlg()}\"' + \r\n                    'md-component-id=\"pip-auxpanel\" md-is-locked-open=\"vm.isGtxs()\" pip-focused ng-transclude>' + \r\n                    '</md-sidenav>'\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipAuxPanel')\r\n    .directive('pipAuxPanel', AuxPanelDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction AuxPanelPartDirectiveController($scope, $element, $attrs, $rootScope, pipAuxPanel) {\r\n    \"ngInject\";\r\n\r\n    var partName = '' + $attrs.pipAuxPanelPart;\r\n    var partValue = null;\r\n\r\n    // Break part apart\r\n    var pos = partName.indexOf(':');\r\n    if (pos > 0) {\r\n        partValue = partName.substr(pos + 1);\r\n        partName = partName.substr(0, pos);\r\n    }\r\n\r\n    onAuxPanelChanged(null, pipAuxPanel.config)\r\n    $rootScope.$on('pipAuxPanelChanged', onAuxPanelChanged);\r\n\r\n    function onAuxPanelChanged(event, config) {\r\n        var parts = config.parts || {};\r\n        var currentPartValue = config[partName];\r\n        // Set visible variable to switch ngIf\r\n\r\n        $scope.visible = partValue ? currentPartValue == partValue : currentPartValue;\r\n    }\r\n\r\n}\r\n\r\nfunction AuxPanelPartDirective(ngIfDirective) {\r\n    \"ngInject\";\r\n\r\n    var ngIf = ngIfDirective[0];\r\n\r\n    return {\r\n        transclude: ngIf.transclude,\r\n        priority: ngIf.priority,\r\n        terminal: ngIf.terminal,\r\n        restrict: ngIf.restrict,\r\n        scope: true,\r\n        link: function($scope: any, $element, $attrs) {\r\n            // Visualize based on visible variable in scope\r\n            $attrs.ngIf = function() { return $scope.visible };\r\n            ngIf.link.apply(ngIf);\r\n        },\r\n        controller: AuxPanelPartDirectiveController\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipAuxPanel')\r\n    .directive('pipAuxPanelPart', AuxPanelPartDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let AuxPanelChangedEvent = 'pipAuxPanelChanged';\r\nexport let AuxPanelStateChangedEvent = 'pipAuxPanelStateChanged';\r\nexport let OpenAuxPanelEvent = 'pipOpenAuxPanel';\r\nexport let CloseAuxPanelEvent = 'pipCloseAuxPanel';\r\n\r\nexport class AuxPanelConfig {\r\n    parts: any;\r\n    classes: string[];\r\n    state: any;\r\n    type: string;\r\n} \r\n\r\nexport interface IAuxPanelService {\r\n    readonly config: AuxPanelConfig;\r\n    readonly classes: string[];\r\n    parts: any;\r\n    state: any;    \r\n\r\n    isOpen(): boolean;\r\n    open(): void;\r\n    close(): void;\r\n    toggle(): void;\r\n  \r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n \r\n    part(part: string, value: any): void;\r\n}\r\n\r\nexport interface IAuxPanelProvider extends ng.IServiceProvider {\r\n    config: AuxPanelConfig;\r\n    parts: any;\r\n    type: string;\r\n    classes: string[];\r\n\r\n    open(): void;\r\n    close(): void;\r\n    toggle(): void;\r\n\r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n\r\n    part(part: string, value: any): void;\r\n}\r\n\r\nclass AuxPanelService implements IAuxPanelService {\r\n    private _config: AuxPanelConfig;\r\n    private _state: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _sidenav: ng.material.ISidenavService;\r\n    private id = 'pip-auxpanel';\r\n\r\n    public constructor(config: AuxPanelConfig, $rootScope: ng.IRootScopeService, $mdSidenav: ng.material.ISidenavService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n        this._sidenav = $mdSidenav;\r\n    }\r\n\r\n    public get config(): AuxPanelConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get state(): any {\r\n        return this._state;\r\n    }\r\n\r\n    public set state(value: any) {\r\n        this._state = value || {};\r\n        this._rootScope.$broadcast(AuxPanelStateChangedEvent, value);\r\n    }\r\n\r\n    public isOpen(): boolean {\r\n        return this._sidenav(this.id).isOpen();\r\n    }\r\n\r\n    public open() {\r\n        this._sidenav(this.id).open();\r\n    }\r\n            \r\n    public close() {\r\n        this._sidenav(this.id).close();\r\n    }\r\n\r\n    public toggle() {\r\n        this._sidenav(this.id).toggle();\r\n    }\r\n  \r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n \r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n        this._rootScope.$emit(AuxPanelChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass AuxPanelProvider implements IAuxPanelProvider {\r\n    private _config: AuxPanelConfig = {\r\n        parts: {},\r\n        classes: [],\r\n        type: 'sticky',\r\n        state: null\r\n    };\r\n\r\n    private _service: AuxPanelService;\r\n\r\n    public get config(): AuxPanelConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: AuxPanelConfig) {\r\n        this._config = value || new AuxPanelConfig();\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n    }\r\n\r\n    public get type(): string {\r\n        return this._config.type;\r\n    }\r\n\r\n    public set type(value: string) {\r\n        this._config.type = value;\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public set classes(value: string[]) {\r\n        this._config.classes = value || [];\r\n    }\r\n\r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n    }\r\n \r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n    }\r\n\r\n    public open(): void {\r\n        this._service.open();\r\n    }\r\n\r\n    public close(): void {\r\n        this._service.close();\r\n    }\r\n\r\n    public toggle(): void {\r\n        this._service.toggle();\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService, $mdSidenav: ng.material.ISidenavService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new AuxPanelService(this._config, $rootScope, $mdSidenav);\r\n\r\n        return this._service;\r\n    }     \r\n}\r\n\r\nfunction hookAuxPanelEvents($rootScope: ng.IRootScopeService, pipAuxPanel: IAuxPanelService) {\r\n    $rootScope.$on(OpenAuxPanelEvent, () => { pipAuxPanel.open(); });\r\n    $rootScope.$on(CloseAuxPanelEvent, () => { pipAuxPanel.close(); });\r\n}\r\n\r\nangular\r\n    .module('pipAuxPanel')\r\n    .provider('pipAuxPanel', AuxPanelProvider)\r\n    .run(hookAuxPanelEvents);\r\n","'use strict';\r\n\r\nangular.module('pipAuxPanel', ['ngMaterial']);\r\n\r\nimport './AuxPanelService';\r\nimport './AuxPanelPartDirective';\r\nimport './AuxPanelDirective';\r\n\r\nexport * from './AuxPanelService';","'use strict';\r\n\r\nimport { MainResizedEvent, LayoutResizedEvent, MainBreakpointStatuses } from '../media/MediaService';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nclass CardDirectiveLink {\r\n    private _element: any;\r\n    private _attrs: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor($rootScope: ng.IRootScopeService, $element: any, $attrs: any) {\r\n        this._element = $element;\r\n        this._rootScope = $rootScope;\r\n        this._attrs = $attrs;\r\n\r\n        // Add class to the element\r\n        $element.addClass('pip-card');\r\n\r\n        let listener = () => { this.resize(); }\r\n\r\n        // Resize every time window is resized\r\n        $rootScope.$on(MainResizedEvent, listener);\r\n\r\n        // Resize right away to avoid flicking\r\n        this.resize();\r\n\r\n        // Resize the element right away\r\n        setTimeout(listener, 100);\r\n    }\r\n\r\n    private resize() {\r\n        var\r\n            $mainBody = $('.pip-main-body'),\r\n            cardContainer = $('.pip-card-container'),\r\n            windowWidth = $('pip-main').width(),\r\n            maxWidth = $mainBody.width(),\r\n            maxHeight = $mainBody.height(),\r\n            minWidth = this._attrs.minWidth ? Math.floor(this._attrs.minWidth) : null,\r\n            minHeight = this._attrs.minHeight ? Math.floor(this._attrs.minHeight) : null,\r\n            width = this._attrs.width ? Math.floor(this._attrs.width) : null,\r\n            height = this._attrs.height ? Math.floor(this._attrs.height) : null,\r\n            left, top;\r\n\r\n        // Full-screen on phone\r\n        if (MainBreakpointStatuses.xs) {\r\n            minWidth = null;\r\n            minHeight = null;\r\n            width = null;\r\n            height = null;\r\n            maxWidth = null;\r\n            maxHeight = null;\r\n        }\r\n        // Card view with adjustable margins on tablet and desktop\r\n        else {\r\n            // Set margin and maximum dimensions\r\n            var space = MainBreakpointStatuses['gt-md'] ? 24 : 16;\r\n            maxWidth -= space * 2;\r\n            maxHeight -= space * 2;\r\n\r\n            // Set minimum dimensions\r\n            minWidth = minWidth ? Math.min(minWidth, maxWidth) : null;\r\n            minHeight = minHeight ? Math.min(minHeight, maxHeight) : null;\r\n\r\n            // Set regular dimensions\r\n            width = width ? Math.min(width, maxWidth) : null;\r\n            height = height ? Math.min(height, maxHeight) : null;\r\n        }\r\n\r\n        // Set dimensions\r\n        this._element.css('max-width', maxWidth ? maxWidth + 'px' : '');\r\n        this._element.css('min-width', minWidth ? minWidth + 'px' : '');\r\n        this._element.css('width', width ? width + 'px' : '');\r\n        this._element.css('height', height ? height + 'px' : '');\r\n\r\n        if (!cardContainer.hasClass('pip-outer-scroll')) {\r\n            this._element.css('max-height', maxHeight ? maxHeight + 'px' : '');\r\n            this._element.css('min-height', minHeight ? minHeight + 'px' : '');\r\n            var\r\n                $header = this._element.find('.pip-header:visible'),\r\n                $footer = this._element.find('.pip-footer:visible'),\r\n                $body = this._element.find('.pip-body'),\r\n                maxBodyHeight = maxHeight || $mainBody.height();\r\n\r\n            if ($header.length > 0)\r\n                maxBodyHeight -= $header.outerHeight(true);\r\n            if ($footer.length > 0)\r\n                maxBodyHeight -= $footer.outerHeight(true);\r\n\r\n            $body.css('max-height', maxBodyHeight + 'px');\r\n        } else {\r\n            cardContainer.addClass('pip-scroll');\r\n            if (MainBreakpointStatuses.xs) {\r\n                left = 0;\r\n                top = 0;\r\n            } else {\r\n                left = cardContainer.width() / 2 - this._element.width() / 2 - 16;\r\n                top = Math.max(cardContainer.height() / 2 - this._element.height() / 2 - 16, 0);\r\n            }\r\n\r\n            this._element.css('left', left);\r\n            this._element.css('top', top);\r\n\r\n            setTimeout(() => { this._element.css('display', 'flex'); }, 100);\r\n        }\r\n\r\n        // Notify child controls that layout was resized\r\n        this._rootScope.$emit('pipLayoutResized');\r\n    }\r\n}\r\n\r\nfunction cardDirective($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            new CardDirectiveLink($rootScope, $element, $attrs);\r\n        }\r\n    }\r\n}\r\n\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipCard', cardDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction dialogDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-dialog');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipDialog', dialogDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction documentDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-document');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipDocument', documentDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { addResizeListener, removeResizeListener } from '../media/ResizeFunctions';\r\nimport { MainBreakpoints, MainBreakpointStatuses, MainResizedEvent } from '../media/MediaService'; \r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nclass MainDirectiveController {\r\n    private _element: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _timeout: ng.ITimeoutService;\r\n    private _container: any;\r\n\r\n    public constructor(\r\n        $scope: ng.IScope, \r\n        $element: any, \r\n        $rootScope: ng.IRootScopeService,\r\n        $timeout: ng.ITimeoutService,\r\n        $attrs: any\r\n    ) {\r\n        this._element = $element;        \r\n        this._rootScope = $rootScope;\r\n        this._timeout = $timeout;\r\n        this._container = $attrs.pipContainer ? $($attrs.pipContainer) : $element;\r\n\r\n        // Add CSS class\r\n        $element.addClass('pip-main');\r\n\r\n        // Add resize listener\r\n        let listener = () => { this.resize(); };\r\n        addResizeListener(this._container[0], listener);\r\n\r\n        // Unbind when scope is removed\r\n        $scope.$on('$destroy', () => {\r\n            removeResizeListener(this._container[0], listener);\r\n        });\r\n\r\n        // Perform initial calculations\r\n        this.updateBreakpointStatuses();\r\n    }\r\n\r\n    private updateBreakpointStatuses() {\r\n        let width = this._container.innerWidth();\r\n        let body = $('body');\r\n\r\n        MainBreakpointStatuses.update(MainBreakpoints, width);\r\n\r\n        $.each(MainBreakpointStatuses, (breakpoint, status) => {\r\n            if (_.isBoolean(status))\r\n                body[status ? 'addClass': 'removeClass']('pip-' + breakpoint);\r\n        });\r\n\r\n        this._timeout(() => {\r\n            this._rootScope.$apply();\r\n        });\r\n    }\r\n    \r\n    private resize() {\r\n        this.updateBreakpointStatuses();\r\n        this._rootScope.$emit(MainResizedEvent, MainBreakpointStatuses);\r\n    }\r\n}\r\n\r\nclass MainBodyDirectiveLink {\r\n    public constructor(\r\n        $scope: ng.IScope, \r\n        $element: any\r\n    ) {\r\n        // Add CSS class\r\n        $element.addClass('pip-main-body');\r\n    }\r\n}\r\n\r\nfunction mainDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        controller: MainDirectiveController,\r\n        controllerAs: 'vm' \r\n    }\r\n}\r\n\r\nfunction mainBodyDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: MainBodyDirectiveLink\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipMain', mainDirective)\r\n    .directive('pipMainBody', mainBodyDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Avoid default export\r\n(() => {\r\n\r\nfunction simpleDirective() {\r\n    return {\r\n        restrict: 'EA',\r\n        link: ($scope, $element, $attrs) => {\r\n            $element.addClass('pip-simple');\r\n        }\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipSimple', simpleDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { addResizeListener, removeResizeListener } from '../media/ResizeFunctions';\r\nimport { MainResizedEvent, LayoutResizedEvent, MainBreakpoints, MainBreakpointStatuses } from '../media/MediaService';\r\n\r\ndeclare var Masonry: any;\r\n\r\nclass TilesDirectiveLink {\r\n    private _element: any;\r\n    private _attrs: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _columnWidth: number;\r\n    private _container: any;\r\n    private _prevContainerWidth: number;\r\n    private _masonry: any;\r\n    private _sizer: any;\r\n\r\n    public constructor($scope: ng.IScope, $element: any, $rootScope: ng.IRootScopeService, $attrs: any) {\r\n        this._element = $element;\r\n        this._rootScope = $rootScope;\r\n        this._attrs = $attrs;\r\n\r\n        this._columnWidth = $attrs.columnWidth ? Math.floor($attrs.columnWidth) : 440,\r\n        this._container = $element.children('.pip-tiles-container'),\r\n        this._prevContainerWidth = null,\r\n        this._masonry = Masonry.data(this._container[0]);\r\n        \r\n        // Add class to the element\r\n        $element.addClass('pip-tiles');\r\n\r\n        // Add resize listener\r\n        let listener = () => { this.resize(false); };\r\n        addResizeListener($element[0], listener);\r\n\r\n        // Unbind when scope is removed\r\n        $scope.$on('$destroy', () => {\r\n            removeResizeListener($element[0], listener);\r\n        });\r\n\r\n        // Insert sizer\r\n        this._sizer = $('<div class=\"pip-tile-sizer\"></div>');\r\n        this._sizer.appendTo(this._container);\r\n\r\n        // Resize every time window is resized\r\n        $rootScope.$on(MainResizedEvent, () => { this.resize(false); });\r\n\r\n        // Resize the element right away\r\n        this.resize(true);\r\n    }\r\n\r\n    private resize(force: boolean) {\r\n        let width = this._element.parent().width();\r\n        let containerWidth;\r\n        \r\n        console.log();\r\n\r\n        if (MainBreakpointStatuses['gt-xs'] && (width - 36) > this._columnWidth) {\r\n            width = width - 24 * 2;\r\n\r\n            let columns = Math.floor(width / this._columnWidth);\r\n            containerWidth = (this._columnWidth + 16) * columns - 16;\r\n\r\n            if (containerWidth > width) {\r\n                columns--;\r\n                containerWidth = (this._columnWidth + 16) * columns - 16;\r\n            }\r\n\r\n            if (columns < 1) {\r\n                containerWidth = width;\r\n                this._sizer.css('width', containerWidth + 'px');\r\n            } else {\r\n                this._sizer.css('width', this._columnWidth + 'px');\r\n            }\r\n\r\n            // +10 to avoid precision related error\r\n            this._container.css('width', (containerWidth + 10) + 'px');\r\n            this._container.removeClass('pip-mobile');\r\n        } else {\r\n            width = width - 16 * 2;\r\n            containerWidth = width;\r\n\r\n            this._sizer.css('width', containerWidth + 'px');\r\n            // +10 to avoid precision related error\r\n            this._container.css('width', (containerWidth + 10) + 'px');\r\n            this._container.addClass('pip-mobile');\r\n        }\r\n\r\n        // Manually call layout on tile container\r\n        if (this._prevContainerWidth != containerWidth || force) {\r\n            this._prevContainerWidth = containerWidth;\r\n            this._masonry.layout();\r\n\r\n            // Notify child controls that layout was resized\r\n            this._rootScope.$emit(LayoutResizedEvent);\r\n        }\r\n    }\r\n}\r\n\r\nfunction tilesDirective($rootScope: ng.IRootScopeService) {\r\n    \"ngInject\";\r\n\r\n    // Converts value into boolean\r\n    function convertToBoolean(value) {\r\n        if (value == null) return false;\r\n        if (!value) return false;\r\n        value = value.toString().toLowerCase();\r\n        return value == '1' || value == 'true';\r\n    }\r\n\r\n    return {\r\n        restrict: 'EA',\r\n        scope: false,\r\n        transclude: true,\r\n        template:\r\n            ($element: any, $attrs: any) => {\r\n                if (convertToBoolean($attrs.pipInfinite)) {\r\n                    return String()\r\n                    + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                    + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                    + ' masonry-options=\"tilesOptions\"  pip-scroll-container=\"\\'.pip-tiles\\'\"'\r\n                    + ' pip-infinite-scroll=\"readScroll()\" >'\r\n                    + '</div>';\r\n                } else {\r\n                    return String()\r\n                        + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                        + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                        + ' masonry-options=\"tilesOptions\">'\r\n                        + '</div>';\r\n                }\r\n            },\r\n        controller: ($scope: any) => {\r\n            $scope.tilesOptions = {\r\n                gutter: 8,//16\r\n                isFitWidth: false,\r\n                isResizeBound: false,\r\n                transitionDuration: 0 // '0.2s'\r\n            };\r\n        },\r\n        link: ($scope, $element, $attrs) => {\r\n            new TilesDirectiveLink($scope, $element, $rootScope, $attrs);\r\n        } \r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLayout')\r\n    .directive('pipTiles', tilesDirective);\r\n","'use strict';\r\n\r\nexport class MediaBreakpoints {\r\n    public constructor(\r\n        xs: number, sm: number, md: number, lg: number\r\n    ) {\r\n        this.xs = xs;\r\n        this.sm = sm;\r\n        this.md = md;\r\n        this.lg = lg;\r\n    }\r\n\r\n    public xs: number;\r\n    public sm: number;\r\n    public md: number;\r\n    public lg: number;\r\n}\r\n\r\nexport class MediaBreakpointStatuses {\r\n    public width: number;\r\n    public 'xs': boolean;\r\n    public 'gt-xs': boolean;\r\n    public 'sm': boolean;\r\n    public 'gt-sm': boolean;\r\n    public 'md': boolean;\r\n    public 'gt-md': boolean;\r\n    public 'lg': boolean;\r\n    public 'gt-lg': boolean;\r\n    public 'xl': boolean;\r\n\r\n    public update(breakpoints: MediaBreakpoints, width: number) {\r\n        if (breakpoints == null) return;\r\n\r\n        this.width = width;\r\n        this['xs'] = width <= breakpoints.xs;\r\n        this['gt-xs'] = width > breakpoints.xs;\r\n        this['sm'] = width > breakpoints.xs && width <= breakpoints.sm;\r\n        this['gt-sm'] = width > breakpoints.sm;\r\n        this['md'] = width > breakpoints.sm && width <= breakpoints.md;\r\n        this['gt-md'] = width > breakpoints.md;\r\n        this['lg'] = width > breakpoints.md && width <= breakpoints.lg;\r\n        this['gt-lg'] = width > breakpoints.lg;\r\n        this['xl'] = this['gt-lg'];\r\n    }\r\n}\r\n\r\nexport let MainResizedEvent: string = 'pipMainResized';\r\nexport let LayoutResizedEvent: string = 'pipLayoutResized';\r\n\r\nexport let MainBreakpoints: MediaBreakpoints = new MediaBreakpoints(639, 716, 1024, 1439);\r\nexport let MainBreakpointStatuses: MediaBreakpointStatuses = new MediaBreakpointStatuses();\r\n\r\nexport interface IMediaService {\r\n    (breakpoint: string): boolean;\r\n    breakpoints: MediaBreakpoints;\r\n    width: number;\r\n} \r\n\r\nexport interface IMediaProvider extends ng.IServiceProvider {\r\n    breakpoints: MediaBreakpoints;\r\n}\r\n\r\nclass MediaProvider {\r\n    public get breakpoints(): MediaBreakpoints {\r\n        return MainBreakpoints;\r\n    }\r\n\r\n    public set breakpoints(value: MediaBreakpoints) {\r\n        MainBreakpoints = value;\r\n    }\r\n\r\n    public $get() {\r\n        let service = function(size) {\r\n            return MainBreakpointStatuses[size];\r\n        }\r\n\r\n        Object.defineProperty(service, 'breakpoints', {\r\n            get: () => { return MainBreakpoints; },\r\n            set: (value) => { \r\n                MainBreakpoints = value || new MediaBreakpoints(639, 716, 1024, 1439);\r\n                \r\n                MainBreakpointStatuses.update(\r\n                    MainBreakpoints, \r\n                    MainBreakpointStatuses.width\r\n                );\r\n            }\r\n        });\r\n\r\n        Object.defineProperty(service, 'width', {\r\n            get: () => { \r\n                return MainBreakpointStatuses.width; \r\n            }\r\n        });\r\n\r\n        return service; \r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipMedia')\r\n    .provider('pipMedia', MediaProvider);\r\n","'use strict';\r\n\r\nlet attachEvent = (<any>document).attachEvent;\r\nlet isIE = navigator.userAgent.match(/Trident/);\r\n\r\nfunction requestFrame(callback): any {\r\n    let frame = window.requestAnimationFrame \r\n        || (<any>window).mozRequestAnimationFrame \r\n        || (<any>window).webkitRequestAnimationFrame \r\n        || function(callback) { \r\n            return window.setTimeout(callback, 20);     \r\n        };\r\n\r\n    return frame(callback);\r\n}\r\n\r\nfunction cancelFrame(): any {\r\n    let cancel = window.cancelAnimationFrame \r\n        || (<any>window).mozCancelAnimationFrame \r\n        || (<any>window).webkitCancelAnimationFrame \r\n        || window.clearTimeout;\r\n\r\n    return function(id) { \r\n        return cancel(id); \r\n    };\r\n}\r\n\r\nfunction resizeListener(event: any): void {\r\n    var win = event.target || event.srcElement;\r\n    if (win.__resizeRAF__) cancelFrame(/*win.__resizeRAF__*/);\r\n    win.__resizeRAF__ = requestFrame(function() {\r\n        var trigger = win.__resizeTrigger__;\r\n        trigger.__resizeListeners__.forEach(function(fn){\r\n            fn.call(trigger, event);\r\n        });\r\n    });\r\n}\r\n\r\nfunction loadListener(event: any): void {\r\n    this.contentDocument.defaultView.__resizeTrigger__ = this.__resizeElement__;\r\n    this.contentDocument.defaultView.addEventListener('resize', resizeListener);\r\n}\r\n\r\nexport function addResizeListener(element, listener): void {\r\n    if (!element.__resizeListeners__) {\r\n        element.__resizeListeners__ = [];\r\n        if (attachEvent) {\r\n            element.__resizeTrigger__ = element;\r\n            element.attachEvent('onresize', resizeListener);\r\n        }\r\n        else {\r\n            if (getComputedStyle(element).position == 'static') element.style.position = 'relative';\r\n            var obj: any = element.__resizeTrigger__ = document.createElement('object');\r\n            obj.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\r\n            obj.__resizeElement__ = element;\r\n            obj.onload = loadListener;\r\n            obj.type = 'text/html';\r\n            if (isIE) element.appendChild(obj);\r\n            obj.data = 'about:blank';\r\n            if (!isIE) element.appendChild(obj);\r\n        }\r\n    }\r\n\r\n    element.__resizeListeners__.push(listener);\r\n}\r\n\r\nexport function removeResizeListener(element, listener): void {\r\n    if (listener) element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(listener), 1);\r\n    if (!element.__resizeListeners__.length) {\r\n        if (attachEvent) element.detachEvent('onresize', resizeListener);\r\n        else {\r\n            element.__resizeTrigger__.contentDocument.defaultView.removeEventListener('resize', resizeListener);\r\n            element.__resizeTrigger__ = !element.removeChild(element.__resizeTrigger__);\r\n        }\r\n    }\r\n}\r\n","'use strict';\r\n\r\nangular.module('pipMedia', []);\r\n\r\nimport './MediaService';\r\nimport './ResizeFunctions';\r\n\r\nexport * from './MediaService';\r\nexport * from './ResizeFunctions';","/**\r\n * @file Split layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global $, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSplit', []);\r\n\r\n    thisModule.run( function($rootScope, pipSplit) {\r\n        // Intercept routes\r\n        $rootScope.$on('$stateChangeStart',\r\n            function(event, toState, toParams, fromState, fromParams) {\r\n                // Split animation\r\n                var splitElements = $('.pip-split');\r\n                \r\n                if (splitElements.length > 0) {\r\n                    splitElements.removeClass('pip-transition-forward');\r\n                    splitElements.removeClass('pip-transition-back');\r\n                    if (toState.name != fromState.name) {\r\n                        if (pipSplit.forwardTransition(toState, fromState)) {\r\n                            splitElements.addClass('pip-transition-forward');\r\n                        } else {\r\n                            splitElements.addClass('pip-transition-back');\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        );\r\n\r\n    });\r\n\r\n    thisModule.provider('pipSplit', function(): any {\r\n        var transitionSequences = [];\r\n\r\n        this.addTransitionSequence = addTransitionSequence;\r\n\r\n        this.$get = function () {\r\n            return {\r\n                forwardTransition: forwardTransition\r\n            };\r\n        };\r\n\r\n        return;\r\n\r\n        //----------------------------\r\n\r\n        function addTransitionSequence(sequence) {\r\n            if (!_.isArray(sequence) || sequence.length == 0) {\r\n                throw new Error('Transition sequence must be an array of state names');\r\n            }\r\n\r\n            transitionSequences.push(sequence);\r\n        }\r\n\r\n        function forwardTransition(toState, fromState) {\r\n            var i, toIndex, fromIndex;\r\n\r\n            for (i = 0; i < transitionSequences.length; i++) {\r\n                toIndex = transitionSequences[i].indexOf(toState.name),\r\n                fromIndex = transitionSequences[i].indexOf(fromState.name);\r\n\r\n                if (toIndex > -1) {\r\n                    return toIndex > fromIndex;\r\n                }\r\n            }\r\n\r\n            return false\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Registration of all WebUI list controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipBehaviors', [\r\n        'pipFocused',\r\n        'pipSelected',\r\n        'pipInfiniteScroll',\r\n        'pipUnsavedChanges',\r\n        'pipDraggable',\r\n        'pipShortcuts'\r\n    ]);\r\n    \r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipDraggable\", []);\r\n\r\n    thisModule.service('pipDraggable', function () {\r\n\r\n        var scope = this;\r\n        scope.inputEvent = function (event) {\r\n            if (angular.isDefined(event.touches)) {\r\n                return event.touches[0];\r\n            }\r\n            //Checking both is not redundent. If only check if touches isDefined, angularjs isDefnied will return error and stop the remaining scripty if event.originalEvent is not defined.\r\n            else if (angular.isDefined(event.originalEvent) && angular.isDefined(event.originalEvent.touches)) {\r\n                return event.originalEvent.touches[0];\r\n            }\r\n            return event;\r\n        };\r\n\r\n    });\r\n\r\n    thisModule.directive('pipDrag',\r\n        function ($rootScope, $parse, $document, $window, pipDraggable) {\r\n            return {\r\n\r\n                restrict: 'A',\r\n                link: function (scope: any, element, attrs: any) {\r\n                    scope.value = attrs.ngDrag;\r\n                    var LONG_PRESS = 50; // 50ms for longpress\r\n                    var offset, _centerAnchor = false, _mx, _my, _tx, _ty, _mrx, _mry;\r\n                    var _hasTouch = ('ontouchstart' in window) || (<any>window).DocumentTouch; // && document instanceof DocumentTouch; // DocumentTouch is not defined!\r\n                    var _pressEvents = 'touchstart mousedown';\r\n                    var _moveEvents = 'touchmove mousemove';\r\n                    var _releaseEvents = 'touchend mouseup';\r\n                    var _dragHandle;\r\n\r\n                    // to identify the element in order to prevent getting superflous events when a single element has both drag and drop directives on it.\r\n                    var _myid = scope.$id;\r\n                    var _data = null;\r\n\r\n                    var _dragOffset = null;\r\n\r\n                    var _dragEnabled = false;\r\n\r\n                    var _pressTimer = null;\r\n\r\n                    var _elementStyle: any = {};\r\n\r\n                    var onDragStartCallback = $parse(attrs.pipDragStart) || null;\r\n                    var onDragStopCallback = $parse(attrs.pipDragStop) || null;\r\n                    var onDragSuccessCallback = $parse(attrs.pipDragSuccess) || null;\r\n                    var allowTransform = angular.isDefined(attrs.allowTransform) ? scope.$eval(attrs.allowTransform) : false;\r\n\r\n                    var getDragData = $parse(attrs.pipDragData);\r\n                    var\r\n                        verticalScroll = toBoolean(attrs.pipVerticalScroll) || true,\r\n                        horizontalScroll = toBoolean(attrs.pipHorizontalScroll) || true,\r\n                        activationDistance = parseFloat(attrs.pipActivationDistance) || 75,\r\n                        scrollDistance = parseFloat(attrs.pipScrollDistance) || 50,\r\n                        scrollParent = false,\r\n\r\n                        scrollContainer = angular.element(window),\r\n                        scrollContainerGetter = $parse(attrs.pipScrollContainer);\r\n\r\n                    // deregistration function for mouse move events in $rootScope triggered by jqLite trigger handler\r\n                    var _deregisterRootMoveListener = angular.noop;\r\n\r\n                    initialize();\r\n\r\n                    return;\r\n\r\n                    //-----------------------------------\r\n\r\n                    function initialize() {\r\n                        element.attr('pip-draggable', 'false'); // prevent native drag\r\n                        // check to see if drag handle(s) was specified\r\n                        // if querySelectorAll is available, we use this instead of find\r\n                        // as JQLite find is limited to tagnames\r\n                        let dragHandles: any;\r\n                        if (element[0].querySelectorAll) {\r\n                            dragHandles = angular.element(element[0].querySelectorAll('[pip-drag-handle]'));\r\n                        } else {\r\n                            dragHandles = element.find('[pip-drag-handle]');\r\n                        }\r\n                        if (dragHandles.length) {\r\n                            _dragHandle = dragHandles;\r\n                        }\r\n                        toggleListeners(true);\r\n\r\n                        // Initialize scroll container\r\n                        if (scrollParent) {\r\n                            scrollContainer = angular.element(element.parent());\r\n                        } else if (attrs.pipScrollContainer) {\r\n                            scrollContainer = angular.element(scrollContainerGetter(scope));\r\n                        } else {\r\n                            scrollContainer = angular.element(window);\r\n                        }\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    function toggleListeners(enable) {\r\n                        if (!enable)return;\r\n                        // add listeners.\r\n\r\n                        scope.$on('$destroy', onDestroy);\r\n                        scope.$watch(attrs.pipDrag, onEnableChange);\r\n                        scope.$watch(attrs.pipCenterAnchor, onCenterAnchor);\r\n                        // wire up touch events\r\n                        if (_dragHandle) {\r\n                            // handle(s) specified, use those to initiate drag\r\n                            _dragHandle.on(_pressEvents, onpress);\r\n                        } else {\r\n                            // no handle(s) specified, use the element as the handle\r\n                            element.on(_pressEvents, onpress);\r\n                        }\r\n                        if (!_hasTouch && element[0].nodeName.toLowerCase() == \"img\") {\r\n                            element.on('mousedown', function () {\r\n                                return false;\r\n                            }); // prevent native drag for images\r\n                        }\r\n                    }\r\n                    \r\n                    function onDestroy(enable) {\r\n                        toggleListeners(false);\r\n                    }\r\n\r\n                    function onEnableChange(newVal, oldVal) {\r\n                        _dragEnabled = (newVal);\r\n                    }\r\n\r\n                    function onCenterAnchor(newVal, oldVal) {\r\n                        if (angular.isDefined(newVal))\r\n                            _centerAnchor = (newVal || 'true');\r\n                    }\r\n\r\n                    function isClickableElement(evt) {\r\n                        return (\r\n                            angular.isDefined(angular.element(evt.target).attr(\"pip-cancel-drag\"))\r\n                        );\r\n                    }\r\n\r\n                    /*\r\n                     * When the element is clicked start the drag behaviour\r\n                     * On touch devices as a small delay so as not to prevent native window scrolling\r\n                     */\r\n                    function onpress(evt) {\r\n                        if (!_dragEnabled)return;\r\n\r\n                        if (isClickableElement(evt)) {\r\n                            return;\r\n                        }\r\n\r\n                        if (evt.type == \"mousedown\" && evt.button != 0) {\r\n                            // Do not start dragging on right-click\r\n                            return;\r\n                        }\r\n\r\n                        saveElementStyles();\r\n\r\n                        if (_hasTouch) {\r\n                            cancelPress();\r\n                            _pressTimer = setTimeout(function () {\r\n                                cancelPress();\r\n                                onlongpress(evt);\r\n                            }, LONG_PRESS);\r\n                            $document.on(_moveEvents, cancelPress);\r\n                            $document.on(_releaseEvents, cancelPress);\r\n                        } else {\r\n                            onlongpress(evt);\r\n                        }\r\n\r\n                    }\r\n\r\n                    function saveElementStyles() {\r\n                        _elementStyle.left = element.css('css') || 0;\r\n                        _elementStyle.top = element.css('top') || 0;\r\n                        _elementStyle.position = element.css('position');\r\n                        _elementStyle.width = element.css('width');    \r\n                    }\r\n\r\n                    function cancelPress() {\r\n                        clearTimeout(_pressTimer);\r\n                        $document.off(_moveEvents, cancelPress);\r\n                        $document.off(_releaseEvents, cancelPress);\r\n                    }\r\n\r\n                    function onlongpress(evt) {\r\n                        if (!_dragEnabled)return;\r\n                        evt.preventDefault();\r\n\r\n                        offset = element[0].getBoundingClientRect();\r\n                        if (allowTransform)\r\n                            _dragOffset = offset;\r\n                        else {\r\n                            _dragOffset = {left: document.body.scrollLeft, top: document.body.scrollTop};\r\n                        }\r\n\r\n\r\n                        (<any>element).centerX = element[0].offsetWidth / 2;\r\n                        (<any>element).centerY = element[0].offsetHeight / 2;\r\n\r\n                        _mx = pipDraggable.inputEvent(evt).pageX;\r\n                        _my = pipDraggable.inputEvent(evt).pageY;\r\n                        _mrx = _mx - offset.left;\r\n                        _mry = _my - offset.top;\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - (<any>element).centerX - $window.pageXOffset;\r\n                            _ty = _my - (<any>element).centerY - $window.pageYOffset;\r\n                        } else {\r\n                            _tx = _mx - _mrx - $window.pageXOffset;\r\n                            _ty = _my - _mry - $window.pageYOffset;\r\n                        }\r\n\r\n                        $document.on(_moveEvents, onmove);\r\n                        $document.on(_releaseEvents, onrelease);\r\n                        // This event is used to receive manually triggered mouse move events\r\n                        // jqLite unfortunately only supports triggerHandler(...)\r\n                        // See http://api.jquery.com/triggerHandler/\r\n                        // _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', onmove);\r\n                        _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', function (event, origEvent) {\r\n                            onmove(origEvent);\r\n                        });\r\n                    }\r\n\r\n                    function onmove(evt) {\r\n                        if (!_dragEnabled)return;\r\n                        evt.preventDefault();\r\n\r\n                        if (!element.hasClass('pip-dragging')) {\r\n                            _data = getDragData(scope);\r\n                            element.addClass('pip-dragging');\r\n                            $rootScope.$broadcast('draggable:start', {\r\n                                x: _mx,\r\n                                y: _my,\r\n                                tx: _tx,\r\n                                ty: _ty,\r\n                                event: evt,\r\n                                element: element,\r\n                                data: _data\r\n                            });\r\n\r\n                            if (onDragStartCallback) {\r\n                                scope.$apply(function () {\r\n                                    onDragStartCallback(scope, {$data: _data, $event: evt});\r\n                                });\r\n                            }\r\n                        }\r\n\r\n                        _mx = pipDraggable.inputEvent(evt).pageX;\r\n                        _my = pipDraggable.inputEvent(evt).pageY;\r\n\r\n                        if (horizontalScroll || verticalScroll) {\r\n                            dragToScroll();\r\n                        }\r\n\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - (<any>element).centerX - _dragOffset.left;\r\n                            _ty = _my - (<any>element).centerY - _dragOffset.top;\r\n                        } else {\r\n                            _tx = _mx - _mrx - _dragOffset.left;\r\n                            _ty = _my - _mry - _dragOffset.top;\r\n                        }\r\n\r\n                        moveElement(_tx, _ty);\r\n\r\n                        $rootScope.$broadcast('draggable:move', {\r\n                            x: _mx,\r\n                            y: _my,\r\n                            tx: _tx,\r\n                            ty: _ty,\r\n                            event: evt,\r\n                            element: element,\r\n                            data: _data,\r\n                            uid: _myid,\r\n                            dragOffset: _dragOffset\r\n                        });\r\n                    }\r\n\r\n                    function onrelease(evt) {\r\n                        if (!_dragEnabled)\r\n                            return;\r\n                        evt.preventDefault();\r\n                        $rootScope.$broadcast('draggable:end', {\r\n                            x: _mx,\r\n                            y: _my,\r\n                            tx: _tx,\r\n                            ty: _ty,\r\n                            event: evt,\r\n                            element: element,\r\n                            data: _data,\r\n                            callback: onDragComplete,\r\n                            uid: _myid\r\n                        });\r\n                        element.removeClass('pip-dragging');\r\n                        element.parent().find('.pip-drag-enter').removeClass('pip-drag-enter');\r\n                        reset();\r\n                        $document.off(_moveEvents, onmove);\r\n                        $document.off(_releaseEvents, onrelease);\r\n\r\n                        if (onDragStopCallback) {\r\n                            scope.$apply(function () {\r\n                                onDragStopCallback(scope, {$data: _data, $event: evt});\r\n                            });\r\n                        }\r\n\r\n                        _deregisterRootMoveListener();\r\n                    }\r\n\r\n                    function onDragComplete(evt) {\r\n                        if (!onDragSuccessCallback)return;\r\n\r\n                        scope.$apply(function () {\r\n                            onDragSuccessCallback(scope, {$data: _data, $event: evt});\r\n                        });\r\n                    }\r\n\r\n                    function reset() {\r\n                        if (allowTransform)\r\n                            element.css({transform: '', 'z-index': '', '-webkit-transform': '', '-ms-transform': ''});\r\n                        else {\r\n                            element.css({'position': _elementStyle.position, top: _elementStyle.top, left: _elementStyle.left, 'z-index': '', width: _elementStyle.width});\r\n                        }\r\n                    }\r\n\r\n                    function moveElement(x, y) {\r\n                        var eWidth = element.css('width');\r\n                        if (allowTransform) {\r\n                            element.css({\r\n                                transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                                'z-index': 99999,\r\n                                '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                                '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n                            });\r\n                        } else {\r\n                            element.css({\r\n                                'left': x + 'px',\r\n                                'top': y + 'px',\r\n                                'position': 'fixed',\r\n                                'z-index': 100,\r\n                                width: eWidth\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    function dragToScroll() {\r\n                        var scrollX = 0, scrollY = 0,\r\n                            offset = function (element) {\r\n                                return element.offset() || {left: 0, top: 0};\r\n                            };\r\n\r\n                        if (horizontalScroll) {\r\n                            var\r\n                                containerLeft = offset(scrollContainer).left,\r\n                                containerWidth = scrollContainer.innerWidth(),\r\n                                containerRight = containerLeft + containerWidth;\r\n\r\n                            if ((_mx - containerLeft) < activationDistance) {\r\n                                scrollX = -scrollDistance;\r\n                            }\r\n                            else if ((containerRight - _mx) < activationDistance) {\r\n                                scrollX = scrollDistance;\r\n                            }\r\n                        }\r\n\r\n                        if (verticalScroll) {\r\n                            var\r\n                                containerTop = offset(scrollContainer).top,\r\n                                containerHeight = scrollContainer.innerHeight(),\r\n                                containerBottom = containerTop + containerHeight;\r\n\r\n                            if ((_my - containerTop) < activationDistance) {\r\n                                scrollY = -scrollDistance + 30;\r\n                            }\r\n                            else if ((containerBottom - _my) < activationDistance) {\r\n                                scrollY = scrollDistance - 30;\r\n                            }\r\n                        }\r\n                        if (scrollX !== 0 || scrollY !== 0) {\r\n                            var\r\n                                containerScrollLeft = scrollContainer.scrollLeft(),\r\n                                containerScrollTop = scrollContainer.scrollTop();\r\n\r\n                            scrollContainer.scrollLeft(containerScrollLeft + scrollX);\r\n                            scrollContainer.scrollTop(containerScrollTop + scrollY);\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n    thisModule.directive('pipDrop', \r\n        function ($parse, $timeout, $window, $document, pipDraggable) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope: any, element, attrs: any) {\r\n                scope.value = attrs.pipDrop;\r\n                scope.isTouching = false;\r\n\r\n                var _lastDropTouch = null;\r\n                var _myid = scope.$id;\r\n                var _dropEnabled = false;\r\n\r\n                var onDropCallback = $parse(attrs.pipDropSuccess);// || function(){};\r\n                var onDragStartCallback = $parse(attrs.pipDragStart);\r\n                var onDragStopCallback = $parse(attrs.pipDragStop);\r\n                var onDragMoveCallback = $parse(attrs.pipDragMove);\r\n\r\n                initialize();\r\n\r\n                return;\r\n\r\n                //----------------------\r\n\r\n                function initialize() {\r\n                    toggleListeners(true);\r\n                }\r\n\r\n                function toggleListeners(enable) {\r\n                    // remove listeners\r\n                    if (!enable)return;\r\n                    // add listeners.\r\n                    scope.$watch(attrs.pipDrop, onEnableChange);\r\n                    scope.$on('$destroy', onDestroy);\r\n                    scope.$on('draggable:start', onDragStart);\r\n                    scope.$on('draggable:move', onDragMove);\r\n                    scope.$on('draggable:end', onDragEnd);\r\n                }\r\n\r\n                function onDestroy(enable) {\r\n                    toggleListeners(false);\r\n                }\r\n\r\n                function onEnableChange(newVal, oldVal) {\r\n                    _dropEnabled = newVal;\r\n                }\r\n\r\n                function onDragStart(evt, obj) {\r\n                    if (!_dropEnabled)return;\r\n                    isTouching(obj.x, obj.y, obj.element);\r\n\r\n                    if (attrs.pipDragStart) {\r\n                        $timeout(function () {\r\n                            onDragStartCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function onDragMove(evt, obj) {\r\n                    if (!_dropEnabled)return;\r\n                    isTouching(obj.x, obj.y, obj.element);\r\n\r\n                    if (attrs.pipDragMove) {\r\n                        $timeout(function () {\r\n                            onDragMoveCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function onDragEnd(evt, obj) {\r\n                    // don't listen to drop events if this is the element being dragged\r\n                    // only update the styles and return\r\n                    if (!_dropEnabled || _myid === obj.uid) {\r\n                        updateDragStyles(false, obj.element);\r\n                        return;\r\n                    }\r\n\r\n                    if (isTouching(obj.x, obj.y, obj.element)) {\r\n                        // call the pipDraggable pipDragSuccess element callback\r\n                        if (obj.callback) {\r\n                            obj.callback(obj);\r\n                        }\r\n\r\n                        if (attrs.pipDropSuccess) {\r\n                            $timeout(function () {\r\n                                onDropCallback(scope, {\r\n                                    $data: obj.data,\r\n                                    $event: obj,\r\n                                    $target: scope.$eval(scope.value)\r\n                                });\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    if (attrs.pipDragStop) {\r\n                        $timeout(function () {\r\n                            onDragStopCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n\r\n                    updateDragStyles(false, obj.element);\r\n                }\r\n\r\n                function isTouching(mouseX, mouseY, dragElement) {\r\n                    var touching = hitTest(mouseX, mouseY);\r\n                    scope.isTouching = touching;\r\n                    if (touching) {\r\n                        _lastDropTouch = element;\r\n                    }\r\n                    updateDragStyles(touching, dragElement);\r\n                    return touching;\r\n                }\r\n\r\n                function updateDragStyles(touching, dragElement) {\r\n                    if (touching) {\r\n                        element.addClass('pip-drag-enter');\r\n                        dragElement.addClass('pip-drag-over');\r\n                    } else if (_lastDropTouch == element) {\r\n                        _lastDropTouch = null;\r\n                        element.removeClass('pip-drag-enter');\r\n                        dragElement.removeClass('pip-drag-over');\r\n                    }\r\n                };\r\n\r\n                function hitTest(x, y) {\r\n                    var bounds = element[0].getBoundingClientRect();\r\n                    x -= $document[0].body.scrollLeft + $document[0].documentElement.scrollLeft;\r\n                    y -= $document[0].body.scrollTop + $document[0].documentElement.scrollTop;\r\n                    return x >= bounds.left\r\n                        && x <= bounds.right\r\n                        && y <= bounds.bottom\r\n                        && y >= bounds.top;\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n    //thisModule.directive('pipDragClone', function ($parse, $timeout, pipDraggable) {\r\n    //    return {\r\n    //        restrict: 'A',\r\n    //        link: function (scope, element, attrs) {\r\n    //            var img, _allowClone = true;\r\n    //            var _dragOffset = null;\r\n    //            scope.clonedData = {};\r\n    //            initialize();\r\n    //            return;\r\n\r\n    //            function initialize() {\r\n//\r\n    //                img = element.find('img');\r\n    //                element.attr('pip-draggable', 'false');\r\n    //                img.attr('draggable', 'false');\r\n    //                reset();\r\n    //                toggleListeners(true);\r\n    //            }\r\n//\r\n//\r\n    //            function toggleListeners(enable) {\r\n    //                // remove listeners\r\n//\r\n    //                if (!enable)return;\r\n    //                // add listeners.\r\n    //                scope.$on('draggable:start', onDragStart);\r\n    //                scope.$on('draggable:move', onDragMove);\r\n    //                scope.$on('draggable:end', onDragEnd);\r\n    //                preventContextMenu();\r\n//\r\n    //            }\r\n\r\n    //            function preventContextMenu() {\r\n    //                //  element.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                img.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                //  element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                img.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //            }\r\n\r\n    //            function onDragStart(evt, obj, elm) {\r\n    //                _allowClone = true;\r\n    //                if (angular.isDefined(obj.data.allowClone)) {\r\n    //                    _allowClone = obj.data.allowClone;\r\n    //                }\r\n    //                if (_allowClone) {\r\n    //                    scope.$apply(function () {\r\n    //                        scope.clonedData = obj.data;\r\n    //                    });\r\n    //                    element.css('width', obj.element[0].offsetWidth);\r\n    //                    element.css('height', obj.element[0].offsetHeight);\r\n//\r\n    //                    moveElement(obj.tx, obj.ty);\r\n    //                }\r\n//\r\n    //            }\r\n\r\n    //            function onDragMove(evt, obj) {\r\n    //                if (_allowClone) {\r\n//\r\n    //                    _tx = obj.tx + obj.dragOffset.left;\r\n    //                    _ty = obj.ty + obj.dragOffset.top;\r\n//\r\n    //                    moveElement(_tx, _ty);\r\n    //                }\r\n    //            }\r\n\r\n    //            function onDragEnd(evt, obj) {\r\n    //                //moveElement(obj.tx,obj.ty);\r\n    //                if (_allowClone) {\r\n    //                    reset();\r\n    //                }\r\n    //            }\r\n//\r\n    //            function reset() {\r\n    //                element.css({left: 0, top: 0, position: 'fixed', 'z-index': -1, visibility: 'hidden'});\r\n    //            }\r\n\r\n    //            function moveElement(x, y) {\r\n    //                element.css({\r\n    //                    transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n    //                    'z-index': 99999,\r\n    //                    'visibility': 'visible',\r\n    //                    '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n    //                    '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n    //                    //,margin: '0'  don't monkey with the margin,\r\n    //                });\r\n    //            }\r\n//\r\n    //            function absorbEvent_(event) {\r\n    //                var e = event;//.originalEvent;\r\n    //                e.preventDefault && e.preventDefault();\r\n    //                e.stopPropagation && e.stopPropagation();\r\n    //                e.cancelBubble = true;\r\n    //                e.returnValue = false;\r\n    //                return false;\r\n    //            }\r\n//\r\n    //        }\r\n    //    };\r\n    //});\r\n\r\n    thisModule.directive('pipPreventDrag', function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope: any, element, attrs: any) {\r\n                initialize();\r\n\r\n                return;\r\n                //---------------------\r\n\r\n                function initialize() {\r\n                    element.attr('pip-draggable', 'false');\r\n                    toggleListeners(true);\r\n                }\r\n\r\n                function toggleListeners(enable) {\r\n                    // remove listeners\r\n                    if (!enable)return;\r\n                    // add listeners.\r\n                    element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                }\r\n\r\n                function absorbEvent_(event) {\r\n                    var e = event.originalEvent;\r\n                    e.preventDefault && e.preventDefault();\r\n                    e.stopPropagation && e.stopPropagation();\r\n                    e.cancelBubble = true;\r\n                    e.returnValue = false;\r\n                    return false;\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n    thisModule.directive('pipCancelDrag', function () {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                element.find('*').attr('pip-cancel-drag', 'pip-cancel-drag');\r\n            }\r\n        };\r\n    });\r\n})();\r\n\r\n","/**\r\n * @file Keyboard navigation over few focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFocused\", []);\r\n\r\n    thisModule.directive('pipFocused', function ($timeout, $mdConstant, $window) {\r\n        return {\r\n            // restrict: 'EA',\r\n            require: \"?ngModel\",\r\n            link: function ($scope: any, $element, $attrs: any) {\r\n                var controls, controlsLength,\r\n                    withHidden = $attrs.pipWithHidden,\r\n                    opacityDelta = 0.4,\r\n                    opacityLimit = 0.5,\r\n                    _color,\r\n                    focusedColor = $attrs.pipFocusedColor ? $attrs.pipFocusedColor : null,\r\n                    reInit = $attrs.pipFocusedRebind ? $attrs.pipFocusedRebind : null,\r\n                    focusedTabindex = $attrs.pipFocusedTabindex ? parseInt($attrs.pipFocusedTabindex) || 0 : 0,\r\n                    isOpacity = $attrs.pipFocusedOpacity ? toBoolean($attrs.pipFocusedOpacity) : false;\r\n\r\n                $timeout(init);\r\n                $element.on('keydown', keydownListener);\r\n\r\n                if ($attrs.ngModel) {\r\n                    $scope.$watch($attrs.ngModel, function () {\r\n                        $timeout(init);\r\n                    }, true);\r\n                }\r\n\r\n                if ($attrs.pipFocusedData) {\r\n                    $attrs.$observe('pipFocusedData', function () {\r\n                        $timeout(init);\r\n                    }, true);\r\n                }      \r\n                          \r\n                // Converts value into boolean\r\n                function toBoolean(value) {\r\n                    if (value == null) return false;\r\n                    if (!value) return false;\r\n                    value = value.toString().toLowerCase();\r\n                    return value == '1' || value == 'true';\r\n                };\r\n\r\n                function rgba(color) {\r\n                    if (focusedColor) {\r\n                        return focusedColor;\r\n                    }\r\n\r\n                    var arr = color.split(\"(\")[1].split(\")\")[0].split(\",\");\r\n\r\n                    if (!arr || arr.length < 3) {\r\n                        return ''\r\n                    }\r\n\r\n                    let red, blue, green, opacity;\r\n\r\n                    opacity = arr.length == 3 ? 1 : parseFloat(arr[3]);\r\n                    red = arr[0];\r\n                    blue = arr[1];\r\n                    green = arr[2];\r\n\r\n                    if (opacity < opacityLimit) {\r\n                        opacity += opacityDelta;\r\n                    } else {\r\n                        opacity -= opacityDelta;\r\n                    }\r\n\r\n                    return 'rgba(' + red + ', ' + blue + ', ' + green + ', ' + opacity + ')';\r\n                }\r\n\r\n                function setTabindex(element, value) {\r\n                    element.attr('tabindex', value);\r\n                }\r\n\r\n                function checkTabindex(controls) {\r\n                    let index = _.findIndex(controls, (c) => {\r\n                        return c['tabindex'] > -1;\r\n                    });\r\n\r\n                    if (index == -1 && controls.length > 0) {\r\n                        // let el = controls[0];\r\n                        setTabindex(angular.element(controls[0]), focusedTabindex);\r\n                    }\r\n                }\r\n\r\n                function init() {\r\n                    var selector = withHidden ? '.pip-focusable' : '.pip-focusable:visible';\r\n                    controls = $element.find(selector);\r\n                    controlsLength = controls.length;\r\n                    checkTabindex(controls);\r\n                    // add needed event listeners\r\n                    controls.on('focus', function () {\r\n                        if ($(this).hasClass('md-focused')) {\r\n                            return;\r\n                        }\r\n                        if (reInit) {\r\n                            init();\r\n                        }\r\n                        $element.addClass('pip-focused-container');\r\n                        if (isOpacity) {\r\n                            let ell = angular.element($(this)[0]);\r\n\r\n                            _color = $(this).css('backgroundColor');\r\n                            // _color = $window.getComputedStyle($(this)[0], null).backgroundColor;\r\n                            $(this).css('backgroundColor', rgba(_color));\r\n                            $(this).addClass('md-focused');\r\n                        } else {\r\n                            $(this).addClass('md-focused md-focused-opacity');\r\n                        }\r\n                        \r\n                        // setTabindex(angular.element($(this)[0]), 0);\r\n                    }).on('focusout', function () {\r\n                        if (!$(this).hasClass('md-focused')) {\r\n                            return;\r\n                        }                        \r\n                        $element.removeClass('pip-focused-container');\r\n\r\n                        if (isOpacity) {\r\n                            // $(this).css('backgroundColor', _color);\r\n                            $(this).css('backgroundColor', \"\");\r\n                            $(this).removeClass('md-focused md-focused-opacity');\r\n                        } else {\r\n                            $(this).removeClass('md-focused');\r\n                        }\r\n                        // if I go from block all element have tabindex = -1\r\n                        // setTabindex(angular.element($(this)[0]), -1);\r\n                    });\r\n                }\r\n\r\n                function keydownListener(e) {\r\n                    var keyCode = e.which || e.keyCode;\r\n                    // Check control keyCode\r\n                    if (keyCode == $mdConstant.KEY_CODE.LEFT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.UP_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) {\r\n\r\n                        e.preventDefault();\r\n\r\n                        var\r\n                            increment = (keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                            moveToControl = controls.index(controls.filter(\".md-focused\")) + increment;\r\n                        // Move focus to next control\r\n                        if (moveToControl >= 0 && moveToControl < controlsLength) {\r\n                            controls[moveToControl].focus();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n\r\n","/**\r\n * @file Infinite scrolling behavior\r\n * @description\r\n * Modified from https://github.com/sroze/ngInfiniteScroll\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipInfiniteScroll\", []);\r\n\r\n    thisModule.directive('pipInfiniteScroll', \r\n        function($rootScope, $window, $interval, $parse) {\r\n            var THROTTLE_MILLISECONDS = 500;\r\n\r\n            return {\r\n                scope: {\r\n                    pipInfiniteScroll: '&',\r\n                    pipScrollContainer: '=',\r\n                    pipScrollDistance: '=',\r\n                    pipScrollDisabled: '=',\r\n                    pipScrollUseDocumentBottom: '=',\r\n                    pipScrollListenForEvent: '@'\r\n                },\r\n                link: function($scope: any, $element, $attrs: any) {\r\n                    var \r\n                        checkWhenEnabled = null,\r\n                        scrollContainer,\r\n                        immediateCheck = true,\r\n                        scrollDistance = null,\r\n                        scrollEnabled = null, \r\n                        unregisterEventListener = null,\r\n                        useDocumentBottom = false, \r\n                        windowElement = angular.element($window);\r\n                    \r\n                    function height(element) {\r\n                        element = element[0] || element;\r\n                        if (isNaN(element.offsetHeight)) {\r\n                            return element.document.documentElement.clientHeight;\r\n                        } else {\r\n                            return element.offsetHeight;\r\n                        }\r\n                    };\r\n\r\n                    function offsetTop(element) {\r\n                        if (!element[0].getBoundingClientRect || element.css('none')) {\r\n                            return;\r\n                        }\r\n                        return element[0].getBoundingClientRect().top + pageYOffset(element);\r\n                    };\r\n\r\n                    function pageYOffset(element) {\r\n                        element = element[0] || element;\r\n                        if (isNaN(window.pageYOffset)) {\r\n                            return element.document.documentElement.scrollTop;\r\n                        } else {\r\n                            return element.ownerDocument.defaultView.pageYOffset;\r\n                        }\r\n                    };\r\n\r\n                    var onContainerScroll = function() {\r\n                        var \r\n                            containerBottom, \r\n                            containerTopOffset, \r\n                            elementBottom, \r\n                            remaining, \r\n                            shouldScroll;\r\n                                                \r\n                        if (scrollContainer === windowElement) {\r\n                            containerBottom = height(scrollContainer) + pageYOffset(scrollContainer[0].document.documentElement);\r\n                            elementBottom = offsetTop($element) + height($element);\r\n                        } else {\r\n                            containerBottom = height(scrollContainer);\r\n                            containerTopOffset = 0;\r\n                            if (offsetTop(scrollContainer) !== void 0) {\r\n                                containerTopOffset = offsetTop(scrollContainer);\r\n                            }\r\n                            elementBottom = offsetTop($element) - containerTopOffset + height($element);\r\n                        }\r\n\r\n                        if (useDocumentBottom) {\r\n                            elementBottom = height(($element[0].ownerDocument || (<any>$element[0]).document).documentElement);\r\n                        }\r\n\r\n                        remaining = elementBottom - containerBottom;\r\n                        shouldScroll = remaining <= height(scrollContainer) * scrollDistance + 1;\r\n                        \r\n                        if (shouldScroll) {\r\n                            checkWhenEnabled = true;\r\n                            if (scrollEnabled) {\r\n                                if ($scope.$$phase || $rootScope.$$phase) {\r\n                                    return $scope.pipInfiniteScroll();\r\n                                } else {\r\n                                    return $scope.$apply($scope.pipInfiniteScroll);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            return checkWhenEnabled = false;\r\n                        }\r\n                    };\r\n\r\n                    if (THROTTLE_MILLISECONDS != null) {\r\n                        onContainerScroll = _.throttle(onContainerScroll, THROTTLE_MILLISECONDS);                    \r\n                    }\r\n\r\n                    $scope.$on('$destroy', function() {\r\n                        scrollContainer.unbind('scroll', onContainerScroll);\r\n                        if (unregisterEventListener != null) {\r\n                            unregisterEventListener();\r\n                            return unregisterEventListener = null;\r\n                        }\r\n                    });\r\n\r\n                    function handleScrollDistance(v) {\r\n                        return scrollDistance = parseFloat(v) || 0;\r\n                    };\r\n                    $scope.$watch('pipScrollDistance', handleScrollDistance);\r\n                    handleScrollDistance($scope.pipScrollDistance);\r\n                    \r\n                    function handleScrollDisabled(v) {\r\n                        scrollEnabled = !v;\r\n                        if (scrollEnabled && checkWhenEnabled) {\r\n                            checkWhenEnabled = false;\r\n                            return onContainerScroll();\r\n                        }\r\n                    };\r\n                    $scope.$watch('pipScrollDisabled', handleScrollDisabled);\r\n                    handleScrollDisabled($scope.pipScrollDisabled);\r\n\r\n                    function handleScrollUseDocumentBottom(v) {\r\n                        return useDocumentBottom = v;\r\n                    };\r\n                    $scope.$watch('pipScrollUseDocumentBottom', handleScrollUseDocumentBottom);\r\n                    handleScrollUseDocumentBottom($scope.pipScrollUseDocumentBottom);\r\n\r\n                    function changeContainer(newContainer) {\r\n                        if (scrollContainer != null) {\r\n                            scrollContainer.unbind('scroll', onContainerScroll);\r\n                        }\r\n\r\n                        scrollContainer = newContainer;\r\n                        if (newContainer != null) {\r\n                            return scrollContainer.bind('scroll', onContainerScroll);\r\n                        }\r\n                    };\r\n\r\n                    changeContainer(windowElement);\r\n                    if ($scope.pipScrollListenForEvent) {\r\n                        unregisterEventListener = $rootScope.$on($scope.pipScrollListenForEvent, onContainerScroll);\r\n                    }\r\n\r\n                    function handleScrollContainer(newContainer) {\r\n                        if ((newContainer == null) || newContainer.length === 0) {\r\n                            return;\r\n                        }\r\n                        if (newContainer instanceof HTMLElement) {\r\n                            newContainer = angular.element(newContainer);\r\n                        } else if (typeof newContainer.append === 'function') {\r\n                            newContainer = angular.element(newContainer[newContainer.length - 1]);\r\n                        } else if (typeof newContainer === 'string') {\r\n                            newContainer = $element.parents().find(newContainer);\r\n                        }\r\n\r\n                        if (newContainer != null && (!Array.isArray(newContainer) ||\r\n                            (Array.isArray(newContainer) && newContainer.length > 0))) {\r\n                            return changeContainer(newContainer);\r\n                        } else {\r\n                            throw new Error(\"Invalid pip-scroll-container attribute.\");\r\n                        }\r\n                    };\r\n                    $scope.$watch('pipScrollContainer', function (newContainer) {\r\n                        if (newContainer !== scrollContainer)\r\n                            handleScrollContainer(newContainer);\r\n                    });\r\n                    handleScrollContainer($scope.pipScrollContainer || []);\r\n                    \r\n                    if ($attrs.pipScrollParent != null) {\r\n                        changeContainer(angular.element($element.parent()));\r\n                    }\r\n                    if ($attrs.pipScrolImmediateCheck != null) {\r\n                        immediateCheck = $scope.$eval($attrs.pipScrolImmediateCheck);\r\n                    }\r\n                    \r\n                    return $interval((function() {\r\n                        if (immediateCheck) {\r\n                            return onContainerScroll();\r\n                        }\r\n                    }), 0, 1);\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","'use strict';\r\n\r\nexport class ShortcutOption {\r\n    Type: KeyboardEvent;\r\n    Propagate: boolean;\r\n    DisableInInput: boolean;\r\n    Target: any; // event target object\r\n    Keycode: number;\r\n}\r\n\r\nexport class KeyboardEvent {\r\n    static Keydown: string = 'keydown';\r\n    static Keyup: string = 'keyup';\r\n    static Keypress: string = 'keypress';\r\n}\r\n\r\nexport class KeyboardShortcut {\r\n    private shift_nums = {\r\n        \"`\": \"~\",\r\n        \"1\": \"!\",\r\n        \"2\": \"@\",\r\n        \"3\": \"#\",\r\n        \"4\": \"$\",\r\n        \"5\": \"%\",\r\n        \"6\": \"^\",\r\n        \"7\": \"&\",\r\n        \"8\": \"*\",\r\n        \"9\": \"(\",\r\n        \"0\": \")\",\r\n        \"-\": \"_\",\r\n        \"=\": \"+\",\r\n        \";\": \":\",\r\n        \"'\": \"\\\"\",\r\n        \",\": \"<\",\r\n        \".\": \">\",\r\n        \"/\": \"?\",\r\n        \"\\\\\": \"|\"\r\n    };\r\n\r\n    private special_keys = {\r\n        'esc': 27,\r\n        'escape': 27,\r\n        'tab': 9,\r\n        'space': 32,\r\n        'return': 13,\r\n        'enter': 13,\r\n        'backspace': 8,\r\n\r\n        'scrolllock': 145,\r\n        'scroll_lock': 145,\r\n        'scroll': 145,\r\n        'capslock': 20,\r\n        'caps_lock': 20,\r\n        'caps': 20,\r\n        'numlock': 144,\r\n        'num_lock': 144,\r\n        'num': 144,\r\n\r\n        'pause': 19,\r\n        'break': 19,\r\n\r\n        'insert': 45,\r\n        'home': 36,\r\n        'delete': 46,\r\n        'end': 35,\r\n\r\n        'pageup': 33,\r\n        'page_up': 33,\r\n        'pu': 33,\r\n\r\n        'pagedown': 34,\r\n        'page_down': 34,\r\n        'pd': 34,\r\n\r\n        'left': 37,\r\n        'up': 38,\r\n        'right': 39,\r\n        'down': 40,\r\n\r\n        'f1': 112,\r\n        'f2': 113,\r\n        'f3': 114,\r\n        'f4': 115,\r\n        'f5': 116,\r\n        'f6': 117,\r\n        'f7': 118,\r\n        'f8': 119,\r\n        'f9': 120,\r\n        'f10': 121,\r\n        'f11': 122,\r\n        'f12': 123\r\n    };\r\n\r\n    private modifiers = {\r\n        shift: { wanted: false, pressed: false },\r\n        ctrl: { wanted: false, pressed: false },\r\n        alt: { wanted: false, pressed: false },\r\n        meta: { wanted: false, pressed: false }\t//Meta is Mac specific\r\n    };\r\n\r\n    public eventCallback: Function;\r\n    public target: any;\r\n    public event: KeyboardEvent;\r\n    public option: ShortcutOption;\r\n    public shorcut: string;\r\n    public callback: Function;\r\n\r\n    public constructor(\r\n        element: any,\r\n        shorcutCombination: string,\r\n        option: ShortcutOption,\r\n        callback: (e?: JQueryEventObject) => void\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this.target = element;\r\n        this.shorcut = shorcutCombination;\r\n        this.event = option.Type;\r\n        this.option = option;\r\n        this.callback = callback;\r\n\r\n        this.eventCallback = (event: JQueryEventObject) => {\r\n            let e: JQueryEventObject = event || <JQueryEventObject>window.event;\r\n            let code: number;\r\n\r\n            if (this.option.DisableInInput) { //Don't enable shortcut keys in Input, Textarea fields\r\n                let element;\r\n                if (e.target) {\r\n                    element = e.target;\r\n                } else if (e.srcElement) {\r\n                    element = e.srcElement;\r\n                }\r\n\r\n                if (element.nodeType == 3) {\r\n                    element = element.parentNode;\r\n                }\r\n                if (element.tagName == 'INPUT' || element.tagName == 'TEXTAREA') return;\r\n            }\r\n            //Find Which key is pressed\r\n            if (e.keyCode) {\r\n                code = e.keyCode;\r\n            } else if (e.which) {\r\n                code = e.which;\r\n            }\r\n\r\n            let character = String.fromCharCode(code).toLowerCase();\r\n\r\n            if (code == 188) character = \",\"; //If the user presses , when the type is onkeydown\r\n            if (code == 190) character = \".\"; //If the user presses , when the type is onkeydown\r\n\r\n            let keys: string[] = this.shorcut.split(\"+\");\r\n            //Key Pressed - counts the number of valid keypresses - if it is same as the number of keys, the shortcut function is invoked\r\n            let kp: number = 0;\r\n\r\n            if (e.ctrlKey) this.modifiers.ctrl.pressed = e.ctrlKey;\r\n            if (e.shiftKey) this.modifiers.shift.pressed = e.shiftKey;\r\n            if (e.altKey) this.modifiers.alt.pressed = e.altKey;\r\n            if (e.metaKey) this.modifiers.meta.pressed = e.metaKey;\r\n\r\n            let i: number = 0;\r\n            for (i = 0; i < keys.length; i++) {\r\n                let k: string = keys[i];\r\n                //Modifiers\r\n                if (k == 'ctrl' || k == 'control') {\r\n                    kp++;\r\n                    this.modifiers.ctrl.wanted = true;\r\n                } else if (k == 'shift') {\r\n                    kp++;\r\n                    this.modifiers.shift.wanted = true;\r\n                } else if (k == 'alt') {\r\n                    kp++;\r\n                    this.modifiers.alt.wanted = true;\r\n                } else if (k == 'meta') {\r\n                    kp++;\r\n                    this.modifiers.meta.wanted = true;\r\n                } else if (k.length > 1) { //If it is a special key\r\n                    if (this.special_keys[k] == code) {\r\n                        kp++;\r\n                    }\r\n                } else if (this.option.Keycode) {\r\n                    if (this.option.Keycode == code) kp++;\r\n                } else { //The special keys did not match\r\n                    if (character == k) kp++;\r\n                    else {\r\n                        if (this.shift_nums[character] && e.shiftKey) { //Stupid Shift key bug created by using lowercase\r\n                            character = this.shift_nums[character];\r\n                            if (character == k) {\r\n                                kp++;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            \r\n            if (kp == keys.length &&\r\n                this.modifiers.ctrl.pressed == this.modifiers.ctrl.wanted &&\r\n                this.modifiers.shift.pressed == this.modifiers.shift.wanted &&\r\n                this.modifiers.alt.pressed == this.modifiers.alt.wanted &&\r\n                this.modifiers.meta.pressed == this.modifiers.meta.wanted) {\r\n\r\n                this.callback(e);\r\n\r\n                if (!this.option.Propagate) { //Stop the event\r\n                    //e.cancelBubble is supported by IE - this will kill the bubbling process.\r\n                    e.cancelBubble = true;\r\n                    e.returnValue = false;\r\n\r\n                    //e.stopPropagation works in Firefox.\r\n                    if (e.stopPropagation) {\r\n                        e.stopPropagation();\r\n                        e.preventDefault();\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n            }\r\n            this.modifiers.ctrl.pressed = false;\r\n            this.modifiers.shift.pressed = false;\r\n            this.modifiers.alt.pressed = false;\r\n            this.modifiers.meta.pressed = false;\r\n        };\r\n    }\r\n}\r\n","'use strict';\r\n\r\nimport  {\r\n    KeyboardShortcut,\r\n    ShortcutOption,\r\n    KeyboardEvent\r\n} from \"./KeyboardShortcut\";\r\n\r\nexport interface IKeyboardShortcuts {\r\n    [key: string]: KeyboardShortcut\r\n}\r\n\r\nexport interface IShortcutsRegisterService {\r\n    add(shorcutName: string, callback: () => void, options: ShortcutOption): void;\r\n    remove(shorcutName: string): void;\r\n\r\n    shorcuts: IKeyboardShortcuts\r\n}\r\n\r\nexport interface IShortcutsRegisterProvider extends ng.IServiceProvider {\r\n    option: ShortcutOption;\r\n}\r\n\r\nexport class ShortcutsRegister implements IShortcutsRegisterService {\r\n    private _log: ng.ILogService;\r\n    private _defaultOption: ShortcutOption;\r\n    private _shortcuts: IKeyboardShortcuts;\r\n\r\n    public constructor(\r\n        $log: ng.ILogService,\r\n        option: ShortcutOption\r\n    ) {\r\n        \"ngInject\";\r\n        this._log = $log;\r\n        this._defaultOption = option ? _.defaults(option, this.getDefaultOption()) : this.getDefaultOption();\r\n\r\n        this._shortcuts = {};\r\n    }\r\n\r\n    private getDefaultOption(): ShortcutOption {\r\n        let defaultOption: ShortcutOption = {\r\n            Type: KeyboardEvent.Keydown,\r\n            Propagate: false,\r\n            DisableInInput: false,\r\n            Target: document,\r\n            Keycode: null\r\n        };\r\n\r\n        return defaultOption;\r\n    }\r\n\r\n    private checkAddShortcut(element: any, shorcutCombination: string, callback: (e: JQueryEventObject) => void): boolean {\r\n        if (!element) {\r\n            this._log.error('Register shortcut: element undentified!');\r\n\r\n            return false;\r\n        }\r\n\r\n        if (!shorcutCombination) {\r\n            this._log.error('Register shortcut: shorcut combination undentified!');\r\n\r\n            return false;\r\n        }\r\n\r\n        if (!callback) {\r\n            this._log.error('Register shortcut: shorcut callback undentified!');\r\n\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    public get shorcuts(): IKeyboardShortcuts {\r\n        return this._shortcuts;\r\n    }\r\n\r\n    public add(shorcutName: string, callback: (e: JQueryEventObject) => void, option: ShortcutOption): void {\r\n        this.remove(shorcutName);\r\n        let shorcutOption: ShortcutOption = option ? _.defaults(option, this._defaultOption) : this._defaultOption;\r\n        let shorcutCombination: string = shorcutName.toLowerCase();\r\n        let element = shorcutOption.Target;\r\n\r\n\r\n        if (typeof shorcutOption.Target == 'string') {\r\n            element = document.getElementById(shorcutOption.Target);\r\n        } else {\r\n            element = shorcutOption.Target;\r\n        }\r\n\r\n        if (!this.checkAddShortcut(element, shorcutCombination, callback)) {\r\n            \r\n            return\r\n        }\r\n\r\n        let newKeyboardShortcut = new KeyboardShortcut(element, shorcutCombination, shorcutOption, callback);\r\n\r\n\t\tthis._shortcuts[shorcutCombination] = newKeyboardShortcut;\r\n\r\n\t\t//Attach the function with the event\r\n\t\tif (element.addEventListener) { \r\n            element.addEventListener(shorcutOption.Type, newKeyboardShortcut.eventCallback, false);\r\n        } else if (element.attachEvent) { \r\n            element.attachEvent('on' + shorcutOption.Type, newKeyboardShortcut.eventCallback);\r\n        } else { \r\n            element.on(shorcutOption.Type, newKeyboardShortcut.eventCallback); \r\n        }\r\n    }\r\n\r\n    public remove(shorcutName: string): void {\r\n\t\tlet shortcutCombination = shorcutName.toLowerCase();\r\n\t\tlet binding: KeyboardShortcut = this._shortcuts[shortcutCombination];\r\n\r\n\t\tdelete(this._shortcuts[shortcutCombination])\r\n\t\tif (!binding) return;\r\n\r\n\t\tlet type = binding.event;\r\n\t\tlet element = binding.target;\r\n\t\tlet callback = binding.eventCallback;\r\n\r\n\t\tif (element.detachEvent) {\r\n            element.detachEvent('on' + type, callback);\r\n        } else if (element.removeEventListener) { \r\n            element.removeEventListener(type, callback, false);\r\n        } else { \r\n            // element['on' + type] = false;\r\n            element.off(type, callback);\r\n        }\r\n    }\r\n}\r\n\r\n\r\n\r\nclass ShortcutsRegisterProvider implements IShortcutsRegisterProvider {\r\n    private _service: ShortcutsRegister;\r\n    private _option: ShortcutOption;\r\n\r\n    public get option(): ShortcutOption {\r\n        return this._option;\r\n    }\r\n\r\n    public set option(value: ShortcutOption) {\r\n        this._option = value || new ShortcutOption();\r\n    }\r\n\r\n    public $get(\r\n        $log: ng.ILogService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new ShortcutsRegister($log, this._option);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipShortcuts')\r\n    .provider('pipShortcutsRegister', ShortcutsRegisterProvider);\r\n","'use strict';\r\n\r\nimport  {\r\n    ShortcutOption,\r\n} from \"./KeyboardShortcut\";\r\n\r\nimport  {\r\n    IShortcutsRegisterService,\r\n} from \"./ShorcutsRegisterService\";\r\n\r\n\r\n    // thisModule.directive('pipSelected', function ($parse, $mdConstant, $timeout) {\r\n    //     return {\r\n    //         restrict: 'A',\r\n    //         scope: false,\r\n\r\nclass ShortcutController {\r\n    private _log: ng.ILogService;\r\n\r\n    private actionShortcuts: Function;\r\n    private nameShortcuts: string;\r\n    private options: ShortcutOption;\r\n\r\n    constructor(\r\n        $element: any,\r\n        $attrs: any,\r\n        $scope: ng.IScope,\r\n        $log: ng.ILogService,\r\n        $parse: any,\r\n        pipShortcutsRegister: IShortcutsRegisterService\r\n    ) {\r\n        \"ngInject\";\r\n        this._log = $log;\r\n\r\n        if ($attrs.pipShortcutAction) {\r\n            this.actionShortcuts = $parse($attrs.pipShortcutAction);\r\n            let a1 = $attrs.pipShortcutAction;\r\n            this.actionShortcuts($scope, {$event: {}});\r\n        } else {\r\n            this._log.error('Shorcunt action does not set.');\r\n\r\n            return\r\n        }\r\n\r\n        if ($attrs.pipShortcutName && _.isString($attrs.pipShortcutName)) {\r\n            this.nameShortcuts = $attrs.pipShortcutName;\r\n        } else {\r\n            this._log.error('Shorcunt name does not set.');\r\n\r\n            return\r\n        }\r\n\r\n        this.options = $attrs.pipShorcutOptions ? <ShortcutOption>$attrs.pipShorcutOptions : <ShortcutOption>{};\r\n        this.options.Target = $element;\r\n        // regester keyboard shortcut\r\n        pipShortcutsRegister.add(this.nameShortcuts, (e?: any) => {\r\n            this.actionShortcuts($scope, {$event: {'e': e}});          \r\n        }, this.options);\r\n    }\r\n\r\n    private keypressShortcut(action) {\r\n        this.actionShortcuts();\r\n    }\r\n}\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function shortcutsDirective($parse) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,            \r\n            controller: ShortcutController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipShortcuts')\r\n        .directive('pipShortcut', shortcutsDirective);\r\n})();","'use strict';\r\n\r\n\r\nimport {\r\n    ShortcutsRegister\r\n} from \"./ShorcutsRegisterService\"\r\nimport  {\r\n    KeyboardShortcut,\r\n    ShortcutOption,\r\n    KeyboardEvent\r\n} from \"./KeyboardShortcut\";\r\n\r\nexport let ShortcutsChangedEvent = 'pipShortcutsChanged';\r\n\r\nexport class ShortcutItem {\r\n    // Shortcut combination\r\n    public shortcut: string;\r\n    // target object \r\n    public target?: any;\r\n    // target element by Id\r\n    public targetId?: string;\r\n    // // target element by class (firstelement??)\r\n    // public targetClass?: string;\r\n    // Access function\r\n    public access?: (event: JQueryEventObject) => boolean;\r\n    // window.location.href\r\n    public href?: string;\r\n    // $location.url\r\n    public url?: string;\r\n    // $state.go(state, stateParams)\r\n    public state?: string;\r\n    // Parameters for $state.go(state, stateParams)\r\n    public stateParams?: any;\r\n    // $rootScope.broadcast(event)\r\n    public event?: string;\r\n    // Click callback\r\n    public keypress?: (event: JQueryEventObject) => void;\r\n    // default options\r\n    public options?: ShortcutOption;    \r\n}\r\n\r\n// export class ShortcutItem extends SimpleShortcutItem {\r\n//     public shortcuts: SimpleShortcutItem[];\r\n// }\r\n\r\nexport class ShortcutsConfig {\r\n    // Global shortcut \r\n    public globalShortcuts: ShortcutItem[] = [];\r\n    // Local shortcut \r\n    public localShortcuts: ShortcutItem[] = [];\r\n    // default options\r\n    public defaultOptions: ShortcutOption = null;\r\n}\r\n\r\nexport interface IShortcutsService {\r\n    readonly config: ShortcutsConfig;\r\n\r\n    globalShortcuts: ShortcutItem[];\r\n    localShortcuts: ShortcutItem[];\r\n\r\n    on(globalShortcuts?: ShortcutItem[], localShortcuts?: ShortcutItem[]): void;\r\n    onLocal(localShortcuts?: ShortcutItem[]): void;\r\n    off(): void;\r\n}\r\n\r\nexport interface IShortcutsProvider extends ng.IServiceProvider {\r\n    config: ShortcutsConfig;\r\n    \r\n    globalShortcuts: ShortcutItem[];\r\n    localShortcuts: ShortcutItem[];\r\n    defaultOptions: ShortcutOption;\r\n}\r\n\r\nclass ShortcutsService implements IShortcutsService {\r\n    private _config: ShortcutsConfig;\r\n    private _oldConfig: ShortcutsConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _window: ng.IWindowService;\r\n    private _location: ng.ILocationService;\r\n    private _injector: ng.auto.IInjectorService;    \r\n    private _pipShortcutsRegister: ShortcutsRegister;\r\n\r\n    public constructor(\r\n        config: ShortcutsConfig,\r\n        $rootScope: ng.IRootScopeService,\r\n        $window: ng.IWindowService, \r\n        $location: ng.ILocationService, \r\n        $injector: ng.auto.IInjectorService,\r\n        pipShortcutsRegister: ShortcutsRegister\r\n    ) {\r\n        this._config = config;\r\n        this._oldConfig = _.cloneDeep(this._config);\r\n        this._rootScope = $rootScope;\r\n        this._window = $window;\r\n        this._location = $location;\r\n        this._injector = $injector;    \r\n        this._pipShortcutsRegister = pipShortcutsRegister;\r\n\r\n        // add shortcuts\r\n        this.addShortcuts(this._config.globalShortcuts);\r\n        this.addShortcuts(this._config.localShortcuts);        \r\n    }\r\n\r\n    // private declaration \r\n    private sendChangeEvent() {\r\n        // remove shortcuts\r\n        this.removeShortcuts(this._oldConfig.globalShortcuts);\r\n        this.removeShortcuts(this._oldConfig.localShortcuts);\r\n        // add shortcuts\r\n        this.addShortcuts(this._config.globalShortcuts);\r\n        this.addShortcuts(this._config.localShortcuts);\r\n\r\n        this._rootScope.$emit(ShortcutsChangedEvent, this._config);\r\n        // save current config to oldConfig\r\n        this._oldConfig = _.cloneDeep(this._config);\r\n    }\r\n\r\n    private removeShortcuts(collection: ShortcutItem[]): void {\r\n        _.each(collection, (k) => {\r\n            this._pipShortcutsRegister.remove(k.shortcut);\r\n        });\r\n    }\r\n\r\n    private keypressShortcut(shorcut: ShortcutItem, event: JQueryEventObject) {\r\n        if (shorcut.access && _.isFunction(shorcut.access)) {\r\n            if (!shorcut.access(event)) {\r\n                return;\r\n            }\r\n        } \r\n\r\n        if (shorcut.keypress) {\r\n            shorcut.keypress(event);\r\n            return;\r\n        }\r\n\r\n        if (shorcut.href) {\r\n            this._window.location.href = shorcut.href;\r\n            return;\r\n        }\r\n\r\n        if (shorcut.url) {\r\n            this._location.url(shorcut.url);\r\n            return;\r\n        }\r\n\r\n        if (shorcut.state) {\r\n            if (this._injector.has('$state')) {\r\n                var $state = this._injector.get('$state');\r\n                $state['go'](shorcut.state, shorcut.stateParams);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (shorcut.event) {\r\n            this._rootScope.$broadcast(shorcut.event);\r\n        } else {\r\n            // Otherwise raise notification\r\n            this._rootScope.$broadcast('pipShortcutKeypress', shorcut.shortcut);\r\n        }\r\n    }\r\n\r\n    private addShortcuts(collection: ShortcutItem[]): void {\r\n        let generalOptions: ShortcutOption = this._config.defaultOptions ? this._config.defaultOptions : <ShortcutOption>{};\r\n        \r\n        _.each(collection, (k) => {\r\n            let option: ShortcutOption = k.options ? k.options : generalOptions;\r\n            let target: any;\r\n\r\n            target = k.target ? k.target : k.targetId;\r\n            option.Target = target;\r\n            // regester keyboard shortcut\r\n            this._pipShortcutsRegister.add(k.shortcut, (e?: any) => {\r\n                this.keypressShortcut(k, e);        \r\n            }, option);              \r\n        });\r\n    }\r\n\r\n    // public declaration \r\n\r\n    public get config(): ShortcutsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get defaultOptions(): ShortcutOption {\r\n        return this._config.defaultOptions;\r\n    }\r\n\r\n    public set defaultOptions(value: ShortcutOption) {\r\n        this._config.defaultOptions = value || null;\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get globalShortcuts(): ShortcutItem[] {\r\n        return this._config.globalShortcuts;\r\n    }\r\n\r\n    public set globalShortcuts(value: ShortcutItem[]) {\r\n        this._config.globalShortcuts = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get localShortcuts(): ShortcutItem[] {\r\n        return this._config.localShortcuts;\r\n    }\r\n\r\n    public set localShortcuts(value: ShortcutItem[]) {\r\n        this._config.localShortcuts = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public on(globalShortcuts?: ShortcutItem[], localShortcuts?: ShortcutItem[]): void {\r\n        if (globalShortcuts && _.isArray(globalShortcuts)) {\r\n            this._config.globalShortcuts = globalShortcuts;    \r\n        }\r\n        if (localShortcuts && _.isArray(localShortcuts)) {\r\n            this._config.localShortcuts = localShortcuts;    \r\n        }        \r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public onLocal(localShortcuts?: ShortcutItem[]): void {\r\n        if (localShortcuts && _.isArray(localShortcuts)) {\r\n            this._config.localShortcuts = localShortcuts;    \r\n        }        \r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public off(): void {\r\n        this._config.globalShortcuts = [];\r\n        this._config.localShortcuts = [];\r\n        this.sendChangeEvent();\r\n    }\r\n}\r\n\r\nclass ShortcutsProvider implements IShortcutsProvider {\r\n    private _config: ShortcutsConfig = new ShortcutsConfig();\r\n    private _service: ShortcutsService;\r\n\r\n    public get config(): ShortcutsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: ShortcutsConfig) {\r\n        this._config = value || new ShortcutsConfig();\r\n    }\r\n\r\n    public get defaultOptions(): ShortcutOption {\r\n        return this._config.defaultOptions;\r\n    }\r\n\r\n    public set defaultOptions(value: ShortcutOption) {\r\n        this._config.defaultOptions = value || null;\r\n    }\r\n\r\n    public get globalShortcuts(): ShortcutItem[] {\r\n        return this._config.globalShortcuts;\r\n    }\r\n\r\n    public set globalShortcuts(value: ShortcutItem[]) {\r\n        this._config.globalShortcuts = value || [];\r\n    }\r\n\r\n    public get localShortcuts(): ShortcutItem[] {\r\n        return this._config.localShortcuts;\r\n    }\r\n\r\n    public set localShortcuts(value: ShortcutItem[]) {\r\n        this._config.localShortcuts = value || [];\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService, \r\n        $window: ng.IWindowService, \r\n        $location: ng.ILocationService, \r\n        $injector: ng.auto.IInjectorService,\r\n        pipShortcutsRegister: ShortcutsRegister\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new ShortcutsService(this._config, $rootScope, $window, $location, $injector, pipShortcutsRegister);\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipShortcuts')\r\n    .provider('pipShortcuts', ShortcutsProvider);\r\n\r\n","'use strict';\r\n\r\nangular.module('pipShortcuts', ['ngMaterial', 'ui.router']);\r\n\r\nimport './ShorcutsRegisterService';\r\nimport './ShortcutsService';\r\nimport './ShortcutDirective';\r\n\r\nexport * from './ShortcutsService';\r\nexport * from './ShorcutsRegisterService';","/**\r\n * @file Keyboard navigation with scrolling over non-focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipSelected\", []);\r\n\r\n    thisModule.directive('pipSelected', function ($parse, $mdConstant, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            link: function ($scope: any, $element, $attrs: any) {\r\n                var\r\n                    indexGetter = $attrs.pipSelected ? $parse($attrs.pipSelected) : null,\r\n                    indexSetter = indexGetter ? indexGetter.assign : null,\r\n                    idGetter = $attrs.pipSelectedId ? $parse($attrs.pipSelectedId) : null,\r\n                    idSetter = idGetter ? idGetter.assign : null,\r\n                    changeGetter = $attrs.pipSelect ? $parse($attrs.pipSelect) : null,\r\n                    enterSpaceGetter = $attrs.pipEnterSpacePress ? $parse($attrs.pipEnterSpacePress) : null,\r\n                    noScroll = toBoolean($attrs.pipNoScroll),\r\n                    modifier = toBoolean($attrs.pipSkipHidden) ? ':visible' : '',\r\n                    className = toBoolean($attrs.pipTreeList) ? '.pip-selectable-tree' : '.pip-selectable',\r\n                    selectedIndex = indexGetter($scope),\r\n                    currentElementTabinex = $element.attr('tabindex'),\r\n                    pipSelectedWatch = $attrs.pipSelectedWatch,\r\n                    isScrolled = false;\r\n\r\n                // variables for touch    \r\n                var touchStartX, touchStartY, trackingClick, trackingClickStart, targetElement, lastClickTime, cancelNextClick;\r\n                // constant for touch\r\n                var touchBoundary = 10,\r\n                    tapdelay = 200,\r\n                    tapTimeout = 700;\r\n\r\n                // Set tabindex if it's not set yet\r\n                $element.attr('tabindex', currentElementTabinex || 0);\r\n                \r\n                $element.on('click', className, onClickEvent);\r\n                $element.on('touchstart', className, onTouchStart);\r\n                $element.on('touchmove', className, onTouchMove);\r\n                $element.on('touchend', className, onTouchEnd);\r\n                $element.on('touchcancel', className, onTouchCancel);\r\n                $element.on('keydown', onKeyDown);\r\n                $element.on('focusin', onFocusIn);\r\n                $element.on('focusout', onFocusOut);\r\n\r\n                // Watch selected item index\r\n                if (!toBoolean($attrs.pipTreeList)) {\r\n                    $scope.$watch(indexGetter, function (newSelectedIndex) {\r\n                        selectItem({ itemIndex: newSelectedIndex });\r\n                    });\r\n                } else {\r\n                    $scope.$watch(idGetter, function (newSelectedId) {\r\n                        setTimeout(function () {\r\n                            selectItem({ itemId: newSelectedId, raiseEvent: true });\r\n                        }, 0);\r\n                    });\r\n                }\r\n\r\n                // Watch resync selection\r\n                if (pipSelectedWatch) {\r\n                    $scope.$watch(pipSelectedWatch, function () {\r\n                        // Delay update to allow ng-repeat to update DOM\r\n                        setTimeout(function () {\r\n                            selectedIndex = indexGetter($scope);\r\n                            selectItem({ itemIndex: selectedIndex });\r\n                        }, 100);\r\n                    });\r\n                }\r\n\r\n                // Select item defined by index\r\n                selectItem({ itemIndex: selectedIndex, items: $element.find(className) });\r\n\r\n                // Converts value into boolean\r\n                function toBoolean(value) {\r\n                    if (value == null) return false;\r\n                    if (!value) return false;\r\n                    value = value.toString().toLowerCase();\r\n                    return value == '1' || value == 'true';\r\n                };\r\n\r\n                // Functions and listeners\r\n                function selectItem(itemParams) {\r\n                    if (isScrolled) return;\r\n                    var itemIndex = itemParams.itemIndex,\r\n                        itemId = itemParams.itemId,\r\n                        items = itemParams.items || $element.find(className + modifier),\r\n                        itemsLength = items.length,\r\n                        item = (function () {\r\n                            if (itemParams.item) return itemParams.item;\r\n                            if (itemIndex === undefined && itemIndex === -1) {\r\n                                itemIndex = items.index(items.filter('[pip-id=' + itemId + ']'));\r\n                            }\r\n                            if (itemIndex >= 0 && itemIndex < itemsLength) {\r\n                                return items[itemIndex]\r\n                            }\r\n                        } ()),\r\n                        raiseEvent = itemParams.raiseEvent;\r\n\r\n                    if (item) {\r\n                        $element.find(className).removeClass('selected md-focused');\r\n                        item = angular.element(item)\r\n                            .addClass('selected md-focused')\r\n                            .focus(); // todo   ,   \r\n                        if (!noScroll) scrollToItem(item);\r\n                        if (raiseEvent) defineSelectedIndex(items);\r\n                    }\r\n                };\r\n\r\n                function defineSelectedIndex(items) {\r\n                    var oldSelectedIndex = selectedIndex;\r\n                    selectedIndex = -1;\r\n                    for (var index = 0; index < items.length; index++) {\r\n                        if ($(items[index]).hasClass('selected')) {\r\n                            selectedIndex = index;\r\n\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    // Execute callback to notify about item select\r\n                    if (oldSelectedIndex != selectedIndex && selectedIndex !== -1) {\r\n                        $scope.$apply(updateIndex);\r\n                    } else {\r\n                        $scope.$apply(onSelect);\r\n                    }\r\n\r\n                    function updateIndex() {\r\n                        var selectedItem = angular.element(items[selectedIndex]),\r\n                            selectedId = selectedItem.attr('pip-id');\r\n\r\n                        if (indexSetter) indexSetter($scope, selectedIndex);\r\n                        if (idSetter) idSetter($scope, selectedId);\r\n                        onSelect();\r\n                    };\r\n\r\n                    function onSelect() {\r\n                        var selectedItem = angular.element(items[selectedIndex]),\r\n                            selectedId = selectedItem.attr('pip-id');\r\n\r\n                        if (changeGetter) {\r\n                            changeGetter($scope, {\r\n                                $event: {\r\n                                    target: $element,\r\n                                    item: selectedItem,\r\n                                    index: selectedIndex,\r\n                                    id: selectedId,\r\n                                    newIndex: selectedIndex,\r\n                                    oldIndex: oldSelectedIndex\r\n                                }\r\n                            });\r\n                        }\r\n                    }\r\n                };\r\n\r\n                function scrollToItem($item) {\r\n                    if (noScroll) return;\r\n\r\n                    var\r\n                        containerTop = $element.offset().top,\r\n                        containerHeight = $element.height(),\r\n                        containerBottom = containerTop + containerHeight,\r\n                        itemTop = $item.offset().top,\r\n                        itemHeight = $item.outerHeight(true),\r\n                        itemBottom = itemTop + itemHeight,\r\n                        containerScrollTop = $element.scrollTop();\r\n\r\n                    isScrolled = true;\r\n                    setTimeout(function () {\r\n                        isScrolled = false;\r\n                    }, 100);\r\n\r\n                    if (containerTop > itemTop) {\r\n                        $element.scrollTop(containerScrollTop + itemTop - containerTop);\r\n                    }\r\n                    else if (containerBottom < itemBottom) {\r\n                        $element.scrollTop(containerScrollTop + itemBottom - containerBottom);\r\n                    }\r\n\r\n                };\r\n\r\n                function getTargetElementFromEventTarget(eventTarget) {\r\n                    // On some older browsers the event target may be a text node.\r\n                    if (eventTarget.nodeType === Node.TEXT_NODE) {\r\n                        return eventTarget.parentNode;\r\n                    }\r\n\r\n                    return eventTarget;\r\n                };\r\n\r\n                function touchHasMoved(event) {\r\n                    var touch = event.changedTouches[0], boundary = touchBoundary; //Touchmove boundary, beyond which a click will be cancelled.\r\n\r\n                    if (Math.abs(touch.pageX - touchStartX) > boundary || Math.abs(touch.pageY - touchStartY) > boundary) {\r\n                        return true;\r\n                    }\r\n\r\n                    return false;\r\n                };\r\n\r\n                function onClickEvent(event) {\r\n                    selectItem({ item: event.currentTarget, raiseEvent: true });\r\n                }\r\n\r\n                function onTouchStart(ev) {\r\n                    //ev.preventDefault();\r\n\r\n                    let event = ev.originalEvent;\r\n                    if (event['targetTouches'].length > 1) {\r\n                        return true;\r\n                    }\r\n                    let targetElement = getTargetElementFromEventTarget(event.target);\r\n                    let touch = event['targetTouches'][0];\r\n\r\n                    trackingClick = true;\r\n                    trackingClickStart = event.timeStamp;\r\n                    targetElement = targetElement;\r\n\r\n                    touchStartX = touch.pageX;\r\n                    touchStartY = touch.pageY;\r\n\r\n                    if ((event.timeStamp - lastClickTime) < tapdelay) {\r\n                      //  event.preventDefault();\r\n                    }\r\n\r\n                    return true;\r\n                }\r\n\r\n                function onTouchMove(ev) {\r\n                    if (!trackingClick) {\r\n                        return true;\r\n                    }\r\n                    let event = ev.originalEvent;\r\n                    // If the touch has moved, cancel the click tracking\r\n                    if (targetElement !== getTargetElementFromEventTarget(event.target) || touchHasMoved(event)) {\r\n                        trackingClick = false;\r\n                        targetElement = null;\r\n                    }\r\n\r\n                    return true;\r\n                }\r\n\r\n                function onTouchEnd(ev) {\r\n                    var forElement, newTrackingClickStart, targetTagName, scrollParent, touch, newtargetElement = targetElement;\r\n\r\n                    if (!trackingClick) {\r\n                        return true;\r\n                    }\r\n                    event = ev.originalEvent;\r\n                    // Prevent phantom clicks on fast double-tap \r\n                    if ((event.timeStamp - lastClickTime) < tapdelay) {\r\n                        cancelNextClick = true;\r\n                        return true;\r\n                    }\r\n\r\n                    if ((event.timeStamp - trackingClickStart) > tapTimeout) {\r\n                        return true;\r\n                    }\r\n\r\n                    // Reset to prevent wrong click cancel on input \r\n                    cancelNextClick = false;\r\n\r\n                    lastClickTime = event.timeStamp;\r\n\r\n                    newTrackingClickStart = trackingClickStart;\r\n                    trackingClick = false;\r\n                    trackingClickStart = 0;\r\n\r\n                    selectItem({ item: ev.currentTarget, raiseEvent: true });\r\n\r\n                    return false;\r\n                }\r\n\r\n                function onTouchCancel(ev) {\r\n                    trackingClick = false;\r\n                    targetElement = null;\r\n                }\r\n\r\n                function onKeyDown(e) {\r\n                    var keyCode = e.which || e.keyCode;\r\n\r\n                    // Check control keyCode\r\n                    if (keyCode == $mdConstant.KEY_CODE.ENTER || keyCode == $mdConstant.KEY_CODE.SPACE) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        if (enterSpaceGetter) {\r\n                            enterSpaceGetter($scope, {\r\n                                $event: {\r\n                                    target: $element,\r\n                                    index: selectedIndex,\r\n                                    item: $element.find('.selected')\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                    } else\r\n                        if (keyCode == $mdConstant.KEY_CODE.LEFT_ARROW || keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                            keyCode == $mdConstant.KEY_CODE.UP_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) {\r\n\r\n                            e.preventDefault();\r\n                            e.stopPropagation();\r\n\r\n                            // Get next selectable control index\r\n                            var items = $element.find(className + modifier),\r\n                                inc = (keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                                newSelectedIndex = selectedIndex + inc;\r\n\r\n                            // Set next control as selected\r\n                            selectItem({ itemIndex: newSelectedIndex, items: items, raiseEvent: true });\r\n                        }\r\n                }\r\n\r\n                function onFocusIn(event) {\r\n                    // Choose selected element\r\n                    var items,\r\n                        selectedItem = $element.find(className + '.selected');\r\n\r\n                    selectedItem.addClass('md-focused');\r\n\r\n                    // If there are not selected elements then pick the first one\r\n                    if (selectedItem.length === 0) {\r\n                        selectedIndex = indexGetter($scope);\r\n                        items = $element.find(className + modifier);\r\n                        selectItem({ itemIndex: selectedIndex || 0, items: items, raiseEvent: true });\r\n                    }\r\n                }\r\n\r\n                function onFocusOut(event) {\r\n                    $element.find(className + '.md-focused' + modifier).removeClass('md-focused');\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipUnsavedChanges\", []);\r\n\r\n    thisModule.directive(\"pipUnsavedChanges\", function ($window, $rootScope) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                unsavedChangesAvailable: '&pipUnsavedChangesAvailable',\r\n                unsavedChangesMessage: '@pipUnsavedChangesMessage',\r\n                afterLeave: '&pipUnsavedChangesAfterLeave',\r\n                cancelLeave: '&pipUnsavedChangesCancelLeave'\r\n            },\r\n            link: function($scope: any) {\r\n\r\n                $window.onbeforeunload = function() {\r\n                    if ($scope.unsavedChangesAvailable()) {\r\n                        $rootScope.$routing = false;\r\n                        return $scope.unsavedChangesMessage;\r\n                    }\r\n                };\r\n\r\n                var unbindFunc = $scope.$on('$stateChangeStart', function(event) {\r\n                    if ($scope.unsavedChangesAvailable() && !$window.confirm($scope.unsavedChangesMessage)) {\r\n                        $rootScope.$routing = false;\r\n                         _.isFunction($scope.cancelLeave) && $scope.cancelLeave();\r\n                        event.preventDefault();\r\n                    } else {\r\n                        _.isFunction($scope.afterLeave) && $scope.afterLeave();\r\n                    }\r\n                });\r\n\r\n                $scope.$on('$destroy', function() {\r\n                    $window.onbeforeunload = null;\r\n                    unbindFunc();\r\n                });\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n\r\n","export interface IColorPicker {\r\n    class: string;\r\n    colors: string[];\r\n    currentColor: string;\r\n    currentColorIndex: number;\r\n    ngDisabled: Function;\r\n    colorChange: Function;\r\n\r\n    enterSpacePress(event): void;\r\n    disabled(): boolean;\r\n    selectColor(index: number);\r\n}\r\n\r\nexport class ColorPickerController implements IColorPicker {\r\n  \r\n    private _$timeout;\r\n    private _$scope: ng.IScope;\r\n\r\n    public class: string;\r\n    public colors: string[];\r\n    public currentColor: string;\r\n    public currentColorIndex: number;\r\n    public ngDisabled: Function;\r\n    public colorChange: Function;\r\n\r\n    constructor( \r\n        $scope: ng.IScope, \r\n        $element,\r\n        $attrs, \r\n        $timeout ) {\r\n            let DEFAULT_COLORS = ['purple', 'lightgreen', 'green', 'darkred', 'pink', 'yellow', 'cyan'];\r\n            this._$timeout = $timeout;\r\n            this._$scope = $scope;\r\n\r\n            this.class = $attrs.class || '';\r\n            this.colors = !$scope['colors'] || _.isArray($scope['colors']) && $scope['colors'].length === 0 ? DEFAULT_COLORS : $scope['colors'];\r\n            this.colorChange = $scope['colorChange'] || null;\r\n            this.currentColor = $scope['currentColor'] || this.colors[0];\r\n            this.currentColorIndex = this.colors.indexOf(this.currentColor);\r\n            this.ngDisabled = $scope['ngDisabled'];\r\n\r\n    }\r\n\r\n    public disabled(): boolean {\r\n        if (this.ngDisabled) {\r\n            return this.ngDisabled();\r\n        }\r\n\r\n        return true;\r\n    };\r\n\r\n     public selectColor(index: number) {\r\n        if (this.disabled()) { return; }\r\n        this.currentColorIndex = index;\r\n        this.currentColor = this.colors[this.currentColorIndex];\r\n        this._$timeout(() => {\r\n            this._$scope.$apply();\r\n        });\r\n\r\n        if (this.colorChange) {\r\n            this.colorChange();\r\n        }\r\n    };\r\n\r\n    public enterSpacePress(event): void {\r\n        this.selectColor(event.index);\r\n    };\r\n\r\n}\r\n\r\n(() => {\r\n    function pipColorPicker($parse: any) {\r\n        \"ngInject\";\r\n\r\n          return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    colors: '=pipColors',\r\n                    currentColor: '=ngModel',\r\n                    colorChange: '&ngChange'\r\n                },\r\n                templateUrl: 'color_picker/color_picker.html',\r\n                controller: ColorPickerController,\r\n                controllerAs: 'vm'\r\n            };\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipColorPicker', ['pipControls.Templates'])\r\n        .directive('pipColorPicker', pipColorPicker);\r\n\r\n\r\n})();\r\n\r\n\r\n/// <reference path=\"../../typings/tsd.d.ts\" />\r\n/*\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipColorPicker', [ 'pipControls.Templates']); // 'pipFocused',\r\n\r\n    thisModule.directive('pipColorPicker',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    colors: '=pipColors',\r\n                    currentColor: '=ngModel',\r\n                    colorChange: '&ngChange'\r\n                },\r\n                templateUrl: 'color_picker/color_picker.html',\r\n                controller: 'pipColorPickerController'\r\n            };\r\n        }\r\n    );\r\n    thisModule.controller('pipColorPickerController',\r\n        function ($scope, $element, $attrs, $timeout) {\r\n            var\r\n                DEFAULT_COLORS = ['purple', 'lightgreen', 'green', 'darkred', 'pink', 'yellow', 'cyan'];\r\n\r\n            $scope.class = $attrs.class || '';\r\n\r\n            if (!$scope.colors || _.isArray($scope.colors) && $scope.colors.length === 0) {\r\n                $scope.colors = DEFAULT_COLORS;\r\n            }\r\n\r\n            $scope.currentColor = $scope.currentColor || $scope.colors[0];\r\n            $scope.currentColorIndex = $scope.colors.indexOf($scope.currentColor);\r\n\r\n            $scope.disabled = function () {\r\n                if ($scope.ngDisabled) {\r\n                    return $scope.ngDisabled();\r\n                }\r\n\r\n                return true;\r\n            };\r\n\r\n            $scope.selectColor = function (index) {\r\n                if ($scope.disabled()) {\r\n                    return;\r\n                }\r\n                $scope.currentColorIndex = index;\r\n\r\n                $scope.currentColor = $scope.colors[$scope.currentColorIndex];\r\n\r\n                $timeout(function () {\r\n                    $scope.$apply();\r\n                });\r\n\r\n                if ($scope.colorChange) {\r\n                    $scope.colorChange();\r\n                }\r\n            };\r\n\r\n            $scope.enterSpacePress = function (event) {\r\n                $scope.selectColor(event.index);\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n*/\r\n\r\n\r\n//import {FileUploadController} from './upload/FileUploadController';\r\n//import {FileProgressController} from './progress/FileProgressController';\r\n//import {FileUploadService} from './service/FileUploadService';","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    angular.module('pipControls', [\r\n        'pipMarkdown',\r\n        'pipColorPicker',\r\n        'pipRoutingProgress',\r\n        'pipPopover',\r\n        'pipImageSlider',\r\n        'pipToasts',\r\n        'pipControls.Translate'\r\n    ]);\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n/*\r\n(() => {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipImageSlider', ['pipSliderButton', 'pipSliderIndicator', 'pipImageSlider.Service']);\r\n\r\n    thisModule.directive('pipImageSlider',\r\n        function () {\r\n            return {\r\n                scope: {\r\n                    sliderIndex: '=pipImageIndex'\r\n                },\r\n                controller: function ($scope, $element, $attrs, $parse, $timeout, $interval, $pipImageSlider) {\r\n                    var blocks,\r\n                        index = 0, newIndex,\r\n                        direction,\r\n                        type = $parse($attrs.pipAnimationType)($scope),\r\n                        DEFAULT_INTERVAL = 4500,\r\n                        interval = $parse($attrs.pipAnimationInterval)($scope),\r\n                        timePromises,\r\n                        throttled;\r\n\r\n                    $element.addClass('pip-image-slider');\r\n                    $element.addClass('pip-animation-' + type);\r\n\r\n                    $scope.swipeStart = 0;\r\n                    \r\n                     //if ($swipe)\r\n                     //$swipe.bind($element, {\r\n                     //'start': function(coords) {\r\n                     //if (coords) $scope.swipeStart = coords.x;\r\n                     //else $scope.swipeStart = 0;\r\n                     //},\r\n                     //'end': function(coords) {\r\n                     //var delta;\r\n                     //if (coords) {\r\n                     //delta = $scope.swipeStart - coords.x;\r\n                     //if (delta > 150)  $scope.nextBlock();\r\n                     //if (delta < -150)  $scope.prevBlock();\r\n                     //$scope.swipeStart = 0;\r\n                     //} else $scope.swipeStart = 0;\r\n                     //}\r\n                     //});\r\n                     \r\n                    setIndex();\r\n\r\n                    $timeout(function () {\r\n                        blocks = $element.find('.pip-animation-block');\r\n                        if (blocks.length > 0) {\r\n                            $(blocks[0]).addClass('pip-show');\r\n                        }\r\n                    });\r\n\r\n                    startInterval();\r\n                    throttled = _.throttle(function () {\r\n                        $pipImageSlider.toBlock(type, blocks, index, newIndex, direction);\r\n                        index = newIndex;\r\n                        setIndex();\r\n                    }, 700);\r\n\r\n                    $scope.nextBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                        direction = 'next';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.prevBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index - 1 < 0 ? blocks.length - 1 : index - 1;\r\n                        direction = 'prev';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.slideTo = function (nextIndex) {\r\n                        if (nextIndex === index || nextIndex > blocks.length - 1) {\r\n                            return;\r\n                        }\r\n\r\n                        restartInterval();\r\n                        newIndex = nextIndex;\r\n                        direction = nextIndex > index ? 'next' : 'prev';\r\n                        throttled();\r\n                    };\r\n                    \r\n                    if ($attrs.id) $pipImageSlider.registerSlider($attrs.id, $scope);\r\n\r\n                    function setIndex() {\r\n                        if ($attrs.pipImageIndex) $scope.sliderIndex = index;\r\n                    }\r\n\r\n                    function startInterval() {\r\n                        timePromises = $interval(function () {\r\n                            newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                            direction = 'next';\r\n                            throttled();\r\n                        }, interval || DEFAULT_INTERVAL);\r\n                    }\r\n\r\n                    function stopInterval() {\r\n                        $interval.cancel(timePromises);\r\n                    }\r\n\r\n                    $element.on('$destroy', function () {\r\n                        stopInterval();\r\n                        $pipImageSlider.removeSlider($attrs.id);\r\n                    });\r\n\r\n                    function restartInterval() {\r\n                        stopInterval();\r\n                        startInterval();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n*/\r\n\r\nclass pipImageSliderController{\r\n\r\n    private _$attrs;\r\n    private _$interval: angular.IIntervalService;\r\n\r\n    private _blocks: any[];\r\n    private _index: number = 0;\r\n    private _newIndex: number;\r\n    private _direction: string;\r\n    private _type: any;\r\n    private DEFAULT_INTERVAL = 4500;\r\n    private _interval;\r\n    private _timePromises;\r\n    private _throttled: Function;\r\n\r\n    public swipeStart: number = 0;\r\n    public sliderIndex: number;\r\n    public slideTo: Function;\r\n\r\n    constructor(\r\n        $scope: ng.IScope, \r\n        $element, \r\n        $attrs, \r\n        $parse: ng.IParseService, \r\n        $timeout: angular.ITimeoutService,\r\n        $interval: angular.IIntervalService, \r\n        $pipImageSlider) {\r\n\r\n        this.sliderIndex = $scope['sliderIndex'];\r\n        this._type = $scope['type']();\r\n        this._interval = $scope['interval']();\r\n        this._$attrs = $attrs;\r\n        this._$interval = $interval;\r\n        $scope['slideTo'] = this.slideToPrivate;\r\n\r\n        $element.addClass('pip-image-slider');\r\n        $element.addClass('pip-animation-' + this._type);\r\n        \r\n        this.setIndex();\r\n\r\n        $timeout(() => {\r\n            this._blocks = $element.find('.pip-animation-block');\r\n            if (this._blocks.length > 0) {\r\n                $(this._blocks[0]).addClass('pip-show');\r\n            }\r\n        });\r\n\r\n        this.startInterval();\r\n        this._throttled = _.throttle(() => {\r\n            $pipImageSlider.toBlock(this._type, this._blocks, this._index, this._newIndex, this._direction);\r\n            this._index = this._newIndex;;\r\n            $scope['selectIndex'] = this._index;\r\n            this.setIndex();\r\n        }, 700);\r\n        \r\n        if ($attrs.id) { $pipImageSlider.registerSlider($attrs.id, $scope) }\r\n\r\n        $element.on('$destroy', () => {\r\n            this.stopInterval();\r\n            $pipImageSlider.removeSlider($attrs.id);\r\n        });\r\n\r\n    }\r\n\r\n    public nextBlock() {\r\n        this.restartInterval();\r\n        this._newIndex = this._index + 1 === this._blocks.length ? 0 : this._index + 1;\r\n        this._direction = 'next';\r\n        this._throttled();\r\n    }\r\n\r\n    public prevBlock() {\r\n        this.restartInterval();\r\n        this._newIndex = this._index - 1 < 0 ? this._blocks.length - 1 : this._index - 1;\r\n        this._direction = 'prev';\r\n        this._throttled();\r\n    }\r\n\r\n    public slideToPrivate(nextIndex: number) {\r\n        console.log(this);\r\n        if (nextIndex === this._index || nextIndex > this._blocks.length - 1) {\r\n            return;\r\n        }\r\n\r\n        this.restartInterval();\r\n        this._newIndex = nextIndex;\r\n        this._direction = nextIndex > this._index ? 'next' : 'prev';\r\n        this._throttled();\r\n    }\r\n\r\n    private setIndex() {\r\n        if (this._$attrs.pipImageIndex) this.sliderIndex = this._index;\r\n    }\r\n\r\n    private startInterval() {\r\n        this._timePromises = this._$interval(() => {\r\n            this._newIndex = this._index + 1 === this._blocks.length ? 0 : this._index + 1;\r\n            this._direction = 'next';\r\n            this._throttled();\r\n        }, this._interval || this.DEFAULT_INTERVAL);\r\n    }\r\n\r\n    private stopInterval() {\r\n        this._$interval.cancel(this._timePromises);\r\n    }\r\n\r\n    private restartInterval() {\r\n        this.stopInterval();\r\n        this.startInterval();\r\n    }\r\n}\r\n\r\n(() => {\r\n\r\n    function pipImageSlider() {\r\n        return {\r\n            scope: {\r\n                sliderIndex: '=pipImageIndex',\r\n                type: '&pipAnimationType',\r\n                interval: '&pipAnimationInterval'\r\n            },\r\n            controller: pipImageSliderController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipImageSlider', ['pipSliderButton', 'pipSliderIndicator', 'pipImageSlider.Service'])\r\n        .directive('pipImageSlider', pipImageSlider);\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ninterface IImageSliderService {\r\n    registerSlider(sliderId: string, sliderScope): void;\r\n    removeSlider(sliderId: string): void;\r\n    getSliderScope(sliderId: string);\r\n    nextCarousel(nextBlock, prevBlock): void;\r\n    prevCarousel(nextBlock, prevBlock): void;\r\n    toBlock(type: string, blocks: any[], oldIndex: number, nextIndex: number, direction: string): void;\r\n}\r\n\r\nclass ImageSliderService {\r\n    private _$timeout: angular.ITimeoutService;\r\n    private ANIMATION_DURATION: number = 550;\r\n    private _sliders = {};\r\n\r\n    constructor($timeout: angular.ITimeoutService) {\r\n        this._$timeout = $timeout;\r\n    }\r\n\r\n    public registerSlider(sliderId: string, sliderScope): void {\r\n        console.log('reg', sliderScope);\r\n        this._sliders[sliderId] = sliderScope;\r\n    }\r\n            \r\n    public removeSlider(sliderId: string): void {\r\n        delete this._sliders[sliderId];\r\n    }\r\n\r\n    public getSliderScope(sliderId: string) {\r\n        console.log('ggg', this._sliders, 'jjj');\r\n        return this._sliders[sliderId];\r\n    }\r\n\r\n    public nextCarousel(nextBlock, prevBlock): void {\r\n        nextBlock.addClass('pip-next');\r\n                \r\n        this._$timeout(() => {\r\n            nextBlock.addClass('animated').addClass('pip-show').removeClass('pip-next');\r\n            prevBlock.addClass('animated').removeClass('pip-show');\r\n        }, 100);\r\n    }\r\n\r\n    public prevCarousel(nextBlock, prevBlock): void {\r\n        this._$timeout(() => {\r\n            nextBlock.addClass('animated').addClass('pip-show');\r\n            prevBlock.addClass('animated').addClass('pip-next').removeClass('pip-show');\r\n        }, 100);\r\n    }\r\n\r\n    public toBlock(type: string, blocks: any[], oldIndex: number, nextIndex: number, direction: string): void {\r\n        let prevBlock = $(blocks[oldIndex]),\r\n            blockIndex: number = nextIndex,\r\n            nextBlock = $(blocks[blockIndex]);\r\n\r\n        if (type === 'carousel') {\r\n            $(blocks).removeClass('pip-next').removeClass('pip-prev').removeClass('animated');\r\n\r\n            if (direction && (direction === 'prev' || direction === 'next')) {\r\n                if (direction === 'prev') {\r\n                    this.prevCarousel(nextBlock, prevBlock);\r\n                } else {\r\n                    this.nextCarousel(nextBlock, prevBlock);\r\n                }\r\n            } else {\r\n                if (nextIndex && nextIndex < oldIndex) {\r\n                    this.prevCarousel(nextBlock, prevBlock);\r\n                } else {\r\n                    this.nextCarousel(nextBlock, prevBlock);\r\n                }\r\n            }\r\n        } else {\r\n            prevBlock.addClass('animated').removeClass('pip-show');\r\n            nextBlock.addClass('animated').addClass('pip-show');\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n(() => {\r\n    'use strict';\r\n    angular\r\n        .module('pipImageSlider.Service', [])\r\n        .service('$pipImageSlider', ImageSliderService);\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(() => {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderButton', []);\r\n\r\n    thisModule.directive('pipSliderButton',\r\n        function () {\r\n            return {\r\n                scope: {},\r\n                controller: function ($scope, $element, $parse, $attrs, $pipImageSlider) {\r\n                    var type = $parse($attrs.pipButtonType)($scope),\r\n                        sliderId = $parse($attrs.pipSliderId)($scope);\r\n\r\n                    $element.on('click', () => {\r\n                        if (!sliderId || !type) {\r\n                            return;\r\n                        }\r\n\r\n                        $pipImageSlider.getSliderScope(sliderId).vm[type + 'Block']();\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderIndicator', []);\r\n\r\n    thisModule.directive('pipSliderIndicator',\r\n        function () {\r\n            return {\r\n                scope: false,\r\n                controller: ($scope, $element, $parse, $attrs, $pipImageSlider) => {\r\n                    var sliderId = $parse($attrs.pipSliderId)($scope),\r\n                        slideTo = $parse($attrs.pipSlideTo)($scope);\r\n\r\n                    $element.css('cursor', 'pointer');\r\n                    $element.on('click',  () => {\r\n                        if (!sliderId || slideTo && slideTo < 0) {\r\n                            return;\r\n                        }\r\n                        $pipImageSlider.getSliderScope(sliderId).vm.slideToPrivate(slideTo);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ndeclare var marked: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipMarkdown', ['ngSanitize']);\r\n\r\n    thisModule.run(function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'MARKDOWN_ATTACHMENTS': 'Attachments:',\r\n                'checklist': 'Checklist',\r\n                'documents': 'Documents',\r\n                'pictures': 'Pictures',\r\n                'location': 'Location',\r\n                'time': 'Time'\r\n            });\r\n            pipTranslate.setTranslations('ru', {\r\n                'MARKDOWN_ATTACHMENTS': ':',\r\n                'checklist': '',\r\n                'documents': '',\r\n                'pictures': '',\r\n                'location': '',\r\n                'time': ''\r\n            });\r\n        }\r\n    });\r\n\r\n    thisModule.directive('pipMarkdown',\r\n        function ($parse, $injector) {\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                link: function ($scope: any, $element, $attrs: any) {\r\n                    var\r\n                        textGetter = $parse($attrs.pipText),\r\n                        listGetter = $parse($attrs.pipList),\r\n                        clampGetter = $parse($attrs.pipLineCount);\r\n\r\n                    function describeAttachments(array) {\r\n                        var attachString = '',\r\n                            attachTypes = [];\r\n\r\n                        _.each(array, function (attach) {\r\n                            if (attach.type && attach.type !== 'text') {\r\n                                if (attachString.length === 0 && pipTranslate) {\r\n                                    attachString = pipTranslate.translate('MARKDOWN_ATTACHMENTS');\r\n                                }\r\n\r\n                                if (attachTypes.indexOf(attach.type) < 0) {\r\n                                    attachTypes.push(attach.type);\r\n                                    attachString += attachTypes.length > 1 ? ', ' : ' ';\r\n                                    if (pipTranslate)\r\n                                        attachString += pipTranslate.translate(attach.type);\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        return attachString;\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    function bindText(value) {\r\n                        var textString, isClamped, height, options, obj;\r\n\r\n                        if (_.isArray(value)) {\r\n                            obj = _.find(value, function (item: any) {\r\n                                return item.type === 'text' && item.text;\r\n                            });\r\n\r\n                            textString = obj ? obj.text : describeAttachments(value);\r\n                        } else {\r\n                            textString = value;\r\n                        }\r\n\r\n                        isClamped = $attrs.pipLineCount && _.isNumber(clampGetter());\r\n                        isClamped = isClamped && textString && textString.length > 0;\r\n                        options = {\r\n                            gfm: true,\r\n                            tables: true,\r\n                            breaks: true,\r\n                            sanitize: true,\r\n                            pedantic: true,\r\n                            smartLists: true,\r\n                            smartypents: false\r\n                        };\r\n                        textString = marked(textString || '', options);\r\n                        if (isClamped) {\r\n                            height = 1.5 * clampGetter();\r\n                        }\r\n                        // Assign value as HTML\r\n                        $element.html('<div' + (isClamped ? listGetter() ? 'class=\"pip-markdown-content ' +\r\n                            'pip-markdown-list\" style=\"max-height: ' + height + 'em\">'\r\n                                : ' class=\"pip-markdown-content\" style=\"max-height: ' + height + 'em\">' : listGetter()\r\n                                ? ' class=\"pip-markdown-list\">' : '>') + textString + '</div>');\r\n                        $element.find('a').attr('target', 'blank');\r\n                        if (!listGetter() && isClamped) {\r\n                            $element.append('<div class=\"pip-gradient-block\"></div>');\r\n                        }\r\n                    }\r\n\r\n                    // Fill the text\r\n                    bindText(textGetter($scope));\r\n\r\n                    // Also optimization to avoid watch if it is unnecessary\r\n                    if (toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch(textGetter, function (newValue) {\r\n                            bindText(newValue);\r\n                        });\r\n                    }\r\n\r\n                    $scope.$on('pipWindowResized', function () {\r\n                        bindText(textGetter($scope));\r\n                    });\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-markdown');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n\r\nexport class PopoverController {\r\n  \r\n    private _$timeout;\r\n    private _$scope: ng.IScope;\r\n\r\n    public timeout;\r\n    public backdropElement;\r\n    public content;\r\n    public element;\r\n    public calcH: boolean;\r\n\r\n    public templateUrl;\r\n    public template\r\n\r\n    public cancelCallback: Function;\r\n\r\n    constructor( \r\n        $scope: ng.IScope,\r\n        $rootScope,\r\n        $element,\r\n        $timeout, \r\n        $compile\r\n       ) {\r\n           //$scope = _.defaults($scope, $scope.$parent);    // eslint-disable-line \r\n           this._$timeout = $timeout;\r\n           this.templateUrl = $scope['params'].templateUrl;\r\n           this.template = $scope['params'].template;\r\n           this.timeout = $scope['params'].timeout;\r\n           this.element = $scope['params'].element;\r\n           this.calcH = $scope['params'].calcHeight;\r\n           this.cancelCallback = $scope['params'].cancelCallback;\r\n           this.backdropElement = $('.pip-popover-backdrop');\r\n           this.backdropElement.on('click keydown scroll',() =>{ this.backdropClick()});\r\n           this.backdropElement.addClass($scope['params'].responsive !== false ? 'pip-responsive' : '');\r\n\r\n           $timeout(() => {\r\n                this.position();\r\n                if ($scope['params'].template) {\r\n                    this.content = $compile($scope['params'].template)($scope);\r\n                    $element.find('.pip-popover').append(this.content);\r\n                }\r\n\r\n                this.init();\r\n           });\r\n\r\n           $timeout(() => { this.calcHeight(); }, 200);\r\n           $rootScope.$on('pipPopoverResize', () => { this.onResize()});\r\n           $(window).resize(() => { this.onResize() });\r\n\r\n    }\r\n\r\n    public backdropClick() {\r\n        if (this.cancelCallback) {\r\n            this.cancelCallback();\r\n        }\r\n        this.closePopover();\r\n    }\r\n\r\n    public closePopover() {\r\n        this.backdropElement.removeClass('opened');\r\n        this._$timeout(() => {\r\n            this.backdropElement.remove();\r\n        }, 100);\r\n    }\r\n\r\n    public onPopoverClick($e) {\r\n        $e.stopPropagation();\r\n    }\r\n\r\n\r\n    private init() {\r\n        this.backdropElement.addClass('opened');\r\n        $('.pip-popover-backdrop').focus();\r\n        if (this.timeout) {\r\n            this._$timeout(function () {\r\n                this.closePopover();\r\n            }, this.timeout);\r\n        }\r\n    }\r\n\r\n    private position() {\r\n        if (this.element) {\r\n            let element = $(this.element),\r\n                pos = element.offset(),\r\n                width = element.width(),\r\n                height = element.height(),\r\n                docWidth = $(document).width(),\r\n                docHeight = $(document).height(),\r\n                popover = this.backdropElement.find('.pip-popover');\r\n\r\n            if (pos) {\r\n                popover\r\n                    .css('max-width', docWidth - (docWidth - pos.left))\r\n                    .css('max-height', docHeight - (pos.top + height) - 32, 0)\r\n                    .css('left', pos.left - popover.width() + width / 2)\r\n                    .css('top', pos.top + height + 16);\r\n            }\r\n        }\r\n    }\r\n\r\n    private onResize() {\r\n        this.backdropElement.find('.pip-popover').find('.pip-content').css('max-height', '100%');\r\n        this.position();\r\n        this.calcHeight();\r\n    }\r\n\r\n    private calcHeight() {\r\n        if (this.calcH === false) { return; }\r\n        let popover = this.backdropElement.find('.pip-popover'),\r\n        title = popover.find('.pip-title'),\r\n        footer = popover.find('.pip-footer'),\r\n        content = popover.find('.pip-content'),\r\n        contentHeight = popover.height() - title.outerHeight(true) - footer.outerHeight(true);\r\n        content.css('max-height', Math.max(contentHeight, 0) + 'px').css('box-sizing', 'border-box');\r\n    }\r\n}\r\n\r\n(() => {\r\n    function pipPopover($parse: any) {\r\n        \"ngInject\";\r\n\r\n          return {\r\n                restrict: 'EA',\r\n                scope: true,\r\n                templateUrl: 'popover/popover.html',\r\n                controller: PopoverController,\r\n                controllerAs: 'vm'\r\n            };\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipPopover', ['pipPopover.Service'])\r\n        .directive('pipPopover', pipPopover);\r\n\r\n\r\n})();\r\n\r\n\r\n\r\n/*\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPopover', ['pipPopover.Service']);\r\n\r\n    thisModule.directive('pipPopover', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: true,\r\n            templateUrl: 'popover/popover.html',\r\n            controller: function ($scope, $rootScope, $element, $timeout, $compile) {\r\n                var backdropElement, content;\r\n\r\n                backdropElement = $('.pip-popover-backdrop');\r\n                backdropElement.on('click keydown scroll', backdropClick);\r\n                backdropElement.addClass($scope.params.responsive !== false ? 'pip-responsive' : '');\r\n\r\n                $timeout(function () {\r\n                    position();\r\n                    if ($scope.params.template) {\r\n                        content = $compile($scope.params.template)($scope);\r\n                        $element.find('.pip-popover').append(content);\r\n                    }\r\n\r\n                    init();\r\n                });\r\n\r\n                $timeout(function () {\r\n                    calcHeight();\r\n                }, 200);\r\n\r\n                $scope.onPopoverClick = onPopoverClick;\r\n                $scope = _.defaults($scope, $scope.$parent);    // eslint-disable-line \r\n\r\n                $rootScope.$on('pipPopoverResize', onResize);\r\n                $(window).resize(onResize);\r\n\r\n                function init() {\r\n                    backdropElement.addClass('opened');\r\n                    $('.pip-popover-backdrop').focus();\r\n                    if ($scope.params.timeout) {\r\n                        $timeout(function () {\r\n                            closePopover();\r\n                        }, $scope.params.timeout);\r\n                    }\r\n                }\r\n\r\n                function backdropClick() {\r\n                    if ($scope.params.cancelCallback) {\r\n                        $scope.params.cancelCallback();\r\n                    }\r\n\r\n                    closePopover();\r\n                }\r\n\r\n                function closePopover() {\r\n                    backdropElement.removeClass('opened');\r\n                    $timeout(function () {\r\n                        backdropElement.remove();\r\n                    }, 100);\r\n                }\r\n\r\n                function onPopoverClick($e) {\r\n                    $e.stopPropagation();\r\n                }\r\n\r\n                function position() {\r\n                    if ($scope.params.element) {\r\n                        var element = $($scope.params.element),\r\n                            pos = element.offset(),\r\n                            width = element.width(),\r\n                            height = element.height(),\r\n                            docWidth = $(document).width(),\r\n                            docHeight = $(document).height(),\r\n                            popover = backdropElement.find('.pip-popover');\r\n\r\n                        if (pos) {\r\n                            popover\r\n                                .css('max-width', docWidth - (docWidth - pos.left))\r\n                                .css('max-height', docHeight - (pos.top + height) - 32, 0)\r\n                                .css('left', pos.left - popover.width() + width / 2)\r\n                                .css('top', pos.top + height + 16);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function calcHeight() {\r\n                    if ($scope.params.calcHeight === false) { return; }\r\n\r\n                    var popover = backdropElement.find('.pip-popover'),\r\n                        title = popover.find('.pip-title'),\r\n                        footer = popover.find('.pip-footer'),\r\n                        content = popover.find('.pip-content'),\r\n                        contentHeight = popover.height() - title.outerHeight(true) - footer.outerHeight(true);\r\n\r\n                    content.css('max-height', Math.max(contentHeight, 0) + 'px').css('box-sizing', 'border-box');\r\n                }\r\n\r\n                function onResize() {\r\n                    backdropElement.find('.pip-popover').find('.pip-content').css('max-height', '100%');\r\n                    position();\r\n                    calcHeight();\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n})();*/\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nexport class PopoverService {\r\n  \r\n    private _$timeout;\r\n    private _$scope: ng.IScope;\r\n    private _$compile;\r\n    private _$rootScope: ng.IRootScopeService;\r\n\r\n    public popoverTemplate: string;\r\n\r\n    constructor( \r\n        $compile,\r\n        $rootScope, \r\n        $timeout\r\n       ) {\r\n           this._$compile = $compile;\r\n           this._$rootScope = $rootScope;\r\n           this._$timeout = $timeout;\r\n           this.popoverTemplate = \"<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller'\" +\r\n                \" tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>\";\r\n    }\r\n\r\n    public show(p) {\r\n        let element, scope: ng.IScope, params, content;\r\n            \r\n        element = $('body');\r\n        if (element.find('md-backdrop').length > 0) { return; }\r\n        this.hide();\r\n        scope = this._$rootScope.$new();\r\n        params = p && _.isObject(p) ? p : {};\r\n        scope['params'] = params;\r\n        scope['locals'] = params.locals;\r\n        content = this._$compile(this.popoverTemplate)(scope);\r\n        element.append(content);\r\n    }\r\n\r\n    public hide() {\r\n        let backdropElement = $('.pip-popover-backdrop');\r\n        backdropElement.removeClass('opened');\r\n        this._$timeout(() => {\r\n            backdropElement.remove();\r\n        }, 100);\r\n    }\r\n\r\n    public resize() {\r\n        this._$rootScope.$broadcast('pipPopoverResize');\r\n    }\r\n}\r\n\r\n\r\n(() => {\r\n    angular\r\n        .module('pipPopover.Service', [])\r\n        .service('pipPopoverService', PopoverService);\r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nclass RoutingController {\r\n    private _image: any;\r\n\r\n    public logoUrl: string;\r\n    public showProgress: Function;\r\n\r\n    constructor( \r\n        $scope: ng.IScope,\r\n        $element)\r\n    {\r\n\r\n        this._image = $element.children('img'); \r\n        this.showProgress = $scope['showProgress']\r\n        this.logoUrl = $scope['logoUrl'];        \r\n        this.loadProgressImage();\r\n\r\n    }\r\n\r\n    public loadProgressImage() {\r\n        if (this.logoUrl) {\r\n            this._image.attr('src', this.logoUrl);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n(() => {\r\n\r\n    function RoutingProgress() {\r\n        return {\r\n            restrict: 'EA',\r\n            replace: true,\r\n            scope: {\r\n                    showProgress: '&',\r\n                    logoUrl: '@'\r\n                },\r\n            templateUrl: 'progress/routing_progress.html',\r\n            controller: RoutingController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n\r\n    angular\r\n        .module('pipRoutingProgress', ['ngMaterial'])\r\n        .directive('pipRoutingProgress', RoutingProgress);\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ninterface IPipToast {\r\n    type: string;\r\n    id: string;\r\n    error: any;\r\n    message: string;\r\n    actions: string[];\r\n    duration: number;\r\n    successCallback: Function;\r\n    cancelCallback: Function\r\n}\r\n\r\nclass ToastController {\r\n    private _$mdToast: angular.material.IToastService;\r\n    private _pipErrorDetailsDialog;\r\n\r\n    public message: string;\r\n    public actions: string[];\r\n    public toast: IPipToast;\r\n    public actionLenght: number;\r\n    public showDetails: boolean;\r\n\r\n    constructor( \r\n        $mdToast: angular.material.IToastService, \r\n        toast: IPipToast, \r\n        $injector\r\n       ) {\r\n            this._pipErrorDetailsDialog = $injector.has('pipErrorDetailsDialog') \r\n                ? $injector.get('pipErrorDetailsDialog') : null;\r\n            this._$mdToast = $mdToast;\r\n            this.message = toast.message;\r\n            this.actions = toast.actions;\r\n            this.toast = toast;\r\n            \r\n            if (toast.actions.length === 0) {\r\n                this.actionLenght = 0;\r\n            } else {\r\n                this.actionLenght = toast.actions.length === 1 ? toast.actions[0].toString().length : null;\r\n            }\r\n\r\n            this.showDetails = this._pipErrorDetailsDialog != null;\r\n\r\n    }\r\n\r\n     public onDetails(): void {\r\n        this._$mdToast.hide();\r\n        if (this._pipErrorDetailsDialog) {\r\n            this._pipErrorDetailsDialog.show(\r\n            {\r\n                error: this.toast.error,\r\n                ok: 'Ok'\r\n            },\r\n            angular.noop,\r\n            angular.noop\r\n            );\r\n        }\r\n    }\r\n\r\n    public onAction(action): void {\r\n        this._$mdToast.hide(\r\n        {\r\n            action: action,\r\n            id: this.toast.id,\r\n            message: this.message\r\n        });\r\n\r\n    }\r\n}\r\n\r\ninterface IToastService {\r\n    showNextToast(): void;\r\n    showToast(toast: IPipToast): void;\r\n    addToast(toast): void;\r\n    removeToasts(type: string): void;\r\n    getToastById(id: string): IPipToast;\r\n    removeToastsById(id: string): void;\r\n    onClearToasts(): void;\r\n    showNotification(message: string, actions: string[], successCallback, cancelCallback, id: string);\r\n    showMessage(message: string, successCallback, cancelCallback, id?: string);\r\n    showError(message: string, successCallback, cancelCallback, id: string, error: any);\r\n    hideAllToasts(): void;\r\n    clearToasts(type?: string);\r\n}\r\n\r\nclass ToastService implements IToastService {\r\n    private SHOW_TIMEOUT: number = 20000;\r\n    private SHOW_TIMEOUT_NOTIFICATIONS: number = 20000;\r\n    private toasts: IPipToast[] = [];\r\n    private currentToast: any;\r\n    private sounds: any = {};\r\n\r\n    private _$mdToast: angular.material.IToastService;\r\n\r\n    constructor(\r\n        $rootScope: ng.IRootScopeService, \r\n        $mdToast: angular.material.IToastService) {\r\n\r\n        this._$mdToast = $mdToast;\r\n\r\n        $rootScope.$on('$stateChangeSuccess', () => {this.onStateChangeSuccess()});\r\n        $rootScope.$on('pipSessionClosed', () => {this.onClearToasts()});\r\n        $rootScope.$on('pipIdentityChanged', () => {this.onClearToasts()});\r\n    }\r\n\r\n    public showNextToast(): void {\r\n        let toast: IPipToast;\r\n\r\n        if (this.toasts.length > 0) {\r\n            toast = this.toasts[0];\r\n            this.toasts.splice(0, 1);\r\n            this.showToast(toast);\r\n        }\r\n    }\r\n\r\n     // Show toast\r\n     public showToast(toast: IPipToast): void {\r\n        this.currentToast = toast;\r\n\r\n        this._$mdToast.show({\r\n            templateUrl: 'toast/toast.html',\r\n            hideDelay: toast.duration || this.SHOW_TIMEOUT,\r\n            position: 'bottom left',\r\n            controller: ToastController,\r\n            controllerAs: 'vm',\r\n            locals: {\r\n                toast: this.currentToast,\r\n                sounds: this.sounds\r\n            }\r\n        })\r\n        .then( \r\n            (action: string) => {\r\n                this.showToastOkResult(action);\r\n            },\r\n            (action: string) => {\r\n                this.showToastCancelResult(action);\r\n            }\r\n        );\r\n    }\r\n\r\n    private showToastCancelResult(action: string):void {\r\n        if (this.currentToast.cancelCallback) {\r\n            this.currentToast.cancelCallback(action);\r\n        }\r\n        this.currentToast = null;\r\n        this.showNextToast();\r\n    }\r\n\r\n    private showToastOkResult(action: string): void {\r\n        if (this.currentToast.successCallback) {\r\n            this.currentToast.successCallback(action);\r\n        }\r\n        this.currentToast = null;\r\n        this.showNextToast();\r\n    }\r\n\r\n    public addToast(toast): void {\r\n        if (this.currentToast && toast.type !== 'error') {\r\n            this.toasts.push(toast);\r\n        } else {\r\n            this.showToast(toast);\r\n        }\r\n    }\r\n\r\n    public removeToasts(type: string): void {\r\n        let result: any[] = [];\r\n        _.each(this.toasts, (toast) => {\r\n            if (!toast.type || toast.type !== type) {\r\n                result.push(toast);\r\n            }\r\n        });\r\n        this.toasts = _.cloneDeep(result);\r\n    }\r\n\r\n    public removeToastsById(id: string): void {\r\n        _.remove(this.toasts, {id: id});\r\n    }\r\n\r\n    public getToastById(id: string): IPipToast {\r\n        return _.find(this.toasts, {id: id});\r\n    }\r\n\r\n    public onStateChangeSuccess() {}\r\n\r\n    public onClearToasts(): void {\r\n        this.clearToasts(null);\r\n    }\r\n\r\n    public showNotification(message: string, actions: string[], successCallback, cancelCallback, id: string) {\r\n        this.addToast({\r\n            id: id || null,\r\n            type: 'notification',\r\n            message: message,\r\n            actions: actions || ['ok'],\r\n            successCallback: successCallback,\r\n            cancelCallback: cancelCallback,\r\n            duration: this.SHOW_TIMEOUT_NOTIFICATIONS\r\n        });\r\n    }\r\n\r\n    public showMessage(message: string, successCallback, cancelCallback, id?: string) {\r\n        this.addToast({\r\n            id: id || null,\r\n            type: 'message',\r\n            message: message,\r\n            actions: ['ok'],\r\n            successCallback: successCallback,\r\n            cancelCallback: cancelCallback\r\n        });\r\n    }\r\n\r\n     public showError(message: string, successCallback, cancelCallback, id: string, error: any) {\r\n        this.addToast({\r\n            id: id || null,\r\n            error: error,\r\n            type: 'error',\r\n            message: message || 'Unknown error.',\r\n            actions: ['ok'],\r\n            successCallback: successCallback,\r\n            cancelCallback: cancelCallback\r\n        });\r\n    }\r\n\r\n    public hideAllToasts(): void {\r\n        this._$mdToast.cancel();\r\n        this.toasts = [];\r\n    }\r\n\r\n    public clearToasts(type?: string) {\r\n        if (type) {\r\n            // pipAssert.isString(type, 'pipToasts.clearToasts: type should be a string');\r\n            this.removeToasts(type);\r\n        } else {\r\n            this._$mdToast.cancel();\r\n            this.toasts = [];\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n(() => {\r\n    angular\r\n        .module('pipToasts', ['ngMaterial', 'pipControls.Translate'])\r\n        .service('pipToasts', ToastService);\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('color_picker/color_picker.html',\n    '<ul class=\"pip-color-picker {{vm.class}}\" pip-selected=\"vm.currentColorIndex\" pip-enter-space-press=\"vm.enterSpacePress($event)\"><li tabindex=\"-1\" ng-repeat=\"color in vm.colors track by color\"><md-button tabindex=\"-1\" class=\"md-icon-button pip-selectable\" ng-click=\"vm.selectColor($index)\" aria-label=\"color\" ng-disabled=\"vm.disabled()\"><md-icon ng-style=\"{\\'color\\': color}\" md-svg-icon=\"icons:{{ color == vm.currentColor ? \\'circle\\' : \\'radio-off\\' }}\"></md-icon></md-button></li></ul>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('popover/popover.html',\n    '<div ng-if=\"vm.templateUrl\" class=\"pip-popover flex layout-column\" ng-click=\"vm.onPopoverClick($event)\" ng-include=\"vm.templateUrl\"></div><div ng-if=\"vm.template\" class=\"pip-popover\" ng-click=\"vm.onPopoverClick($event)\"></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('progress/routing_progress.html',\n    '<div class=\"pip-routing-progress layout-column layout-align-center-center\" ng-show=\"vm.showProgress()\"><div class=\"loader\"><svg class=\"circular\" viewbox=\"25 25 50 50\"><circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"></circle></svg></div><img src=\"\" height=\"40\" width=\"40\" class=\"pip-img\"><md-progress-circular md-diameter=\"96\" class=\"fix-ie\"></md-progress-circular></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipControls.Templates');\n} catch (e) {\n  module = angular.module('pipControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toast/toast.html',\n    '<md-toast class=\"md-action pip-toast\" ng-class=\"{\\'pip-error\\': vm.toast.type==\\'error\\', \\'pip-column-toast\\': vm.toast.actions.length > 1 || vm.actionLenght > 4, \\'pip-no-action-toast\\': vm.actionLenght == 0}\" style=\"height:initial; max-height: initial;\"><span class=\"flex-var pip-text\" ng-bind-html=\"vm.message\"></span><div class=\"layout-row layout-align-end-start pip-actions\" ng-if=\"vm.actions.length > 0 || (vm.toast.type==\\'error\\' && vm.toast.error)\"><div class=\"flex\" ng-if=\"vm.toast.actions.length > 1\"></div><md-button class=\"flex-fixed pip-toast-button\" ng-if=\"vm.toast.type==\\'error\\' && vm.toast.error && vm.showDetails\" ng-click=\"vm.onDetails()\">Details</md-button><md-button class=\"flex-fixed pip-toast-button\" ng-click=\"vm.onAction(action)\" ng-repeat=\"action in vm.actions\" aria-label=\"{{::action| translate}}\">{{::action| translate}}</md-button></div></md-toast>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-controls-html.min.js.map\n","/**\r\n * @file Registration of all WebUI list controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipLists', [\r\n\t    'pipTagList'\r\n    ]);\r\n    \r\n})();","/**\r\n * @file Tag list control\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n * @todo\r\n * - Improve samples in sampler app\r\n * - What's pipType and pipTypeLocal? Give better name\r\n * - Do not use ng-if, instead generate template statically\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTagList', ['pipList.Translate']);\r\n\r\n    /**\r\n     * pipTags - set of tags\r\n     * pipType - additional type tag\r\n     * pipTypeLocal - additional translated type tag\r\n     */\r\n    thisModule.directive('pipTagList',\r\n        function ($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipTags: '=',\r\n                    pipType: '=',\r\n                    pipTypeLocal: '='\r\n                },\r\n                templateUrl: 'tag_list/tag_list.html',\r\n                controller: function ($scope, $element, $attrs) {\r\n                    var tagsGetter;\r\n\r\n                    tagsGetter = $parse($attrs.pipTags);\r\n                    $element.css('display', 'block');\r\n                    // Set tags\r\n                    $scope.tags = tagsGetter($scope);\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    // Also optimization to avoid watch if it is unnecessary\r\n                    if (toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch(tagsGetter, function () {\r\n                            $scope.tags = tagsGetter($scope);\r\n                        });\r\n                    }\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-tag-list');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipLists.Templates');\n} catch (e) {\n  module = angular.module('pipLists.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('tag_list/tag_list.html',\n    '<div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{\\'bg-\\' + pipType + \\'-chips\\'}}\" ng-if=\"pipType && !pipTypeLocal\"><span>{{pipType.toUpperCase() | translate | uppercase}}</span></div><div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{\\'bg-\\' + pipType + \\'-chips\\'}}\" ng-if=\"pipType && pipTypeLocal\"><span>{{pipTypeLocal.toUpperCase() | translate | uppercase}}</span></div><div class=\"pip-chip rm4\" ng-repeat=\"tag in pipTags\"><span>{{::tag}}</span></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-lists-html.min.js.map\n","'use strict';\r\n\r\nangular.module('pipDateTime', [\r\n    'pipDateTime.Service', 'pipDateTime.Filter'\r\n]);\r\n","'use strict';\r\n\r\nfunction formatTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";\r\n\r\n    return function (value: any, format: string): string {\r\n        return pipDateTime.formatTime(value, format);\r\n    }\r\n}\r\n\r\nfunction formatDateOptionalFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, format: string): string {\r\n        return pipDateTime.formatDateOptional(value, format);\r\n    }\r\n}\r\n\r\nfunction formatLongDateFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongDate(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortDate(value);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatMiddleDate(value);\r\n    }\r\n}\r\n\r\nfunction formatMonthFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any) {\r\n        return pipDateTime.formatMonth(value);\r\n    }\r\n}\r\n\r\nfunction formatLongMonthFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongMonth(value);\r\n    }\r\n}\r\n\r\nfunction formatYearFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatYear(value);\r\n    }\r\n}\r\n\r\nfunction formatWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatMiddleDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDateTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDateLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, firstTime: boolean): string {\r\n        return pipDateTime.formatShortDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatMiddleDateLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, firstTime: boolean): string {\r\n        return pipDateTime.formatMiddleDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatLongDateLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, firstTime: boolean): string {\r\n        return pipDateTime.formatLongDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction bbFormatDateLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, firstTime: boolean): string {\r\n        return pipDateTime.bbFormatDateLongTime(value, firstTime);\r\n    }\r\n}\r\n\r\nfunction formatFullDateTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatFullDateTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortTime(value);\r\n    }\r\n}\r\n\r\nfunction formatLongTimeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongTime(value);\r\n    }\r\n}\r\n\r\nfunction formatShortDayOfWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortDayOfWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDayOfWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongDayOfWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatLongMonthDayFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongMonthDay(value);\r\n    }\r\n}\r\n\r\nfunction formatShortMonthDayFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortMonthDay(value);\r\n    }\r\n}\r\n\r\nfunction formatDateRangeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value1: any, value2: any): string {\r\n        return pipDateTime.formatDateRange(value1, value2);\r\n    }\r\n}\r\n\r\nfunction formatDateTimeRangeFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value1: any, value2: any): string {\r\n        return pipDateTime.formatDateTimeRange(value1, value2);\r\n    }\r\n}\r\n\r\nfunction formatISOWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatISOWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatShortISOWeekFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatShortISOWeek(value);\r\n    }\r\n}\r\n\r\nfunction formatISOWeekOrdinalFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatISOWeekOrdinal(value);\r\n    }\r\n}\r\n\r\nfunction formatDateYFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatDateY(value);\r\n    }\r\n}\r\n\r\nfunction formatLongDateYFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatLongDateY(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateLongTimeLongFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatTodayDateLongTimeLong(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateShortTimeLongFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatTodayDateShortTimeLong(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateLongTimeShortFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatTodayDateLongTimeShort(value);\r\n    }\r\n}\r\n\r\nfunction formatTodayDateShortTimeShortFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatTodayDateShortTimeShort(value);\r\n    }\r\n}\r\n\r\nfunction formatMillisecondsToSecondsFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.formatMillisecondsToSeconds(value);\r\n    }\r\n}\r\n\r\nfunction formatElapsedIntervalFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any, start: any): string {\r\n        return pipDateTime.formatElapsedInterval(value, start);\r\n    }\r\n}\r\n\r\nfunction getDateJSONFilter(pipDateTime: any) {\r\n    \"ngInject\";  \r\n\r\n    return function (value: any): string {\r\n        return pipDateTime.getDateJSON(value);\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipDateTime.Filter', [])\r\n    .filter('formatTime', formatTimeFilter)\r\n    .filter('formatDateOptional', formatDateOptionalFilter)\r\n    .filter('bbFormatDateLongTime', bbFormatDateLongTimeFilter)\r\n    .filter('formatShortDate', formatShortDateFilter)\r\n    .filter('formatMiddleDate', formatMiddleDateFilter)\r\n    .filter('formatLongDate', formatLongDateFilter)\r\n    .filter('formatMonth', formatMonthFilter)\r\n    .filter('formatLongMonth', formatLongMonthFilter)\r\n    .filter('formatYear', formatYearFilter)\r\n    .filter('formatWeek', formatWeekFilter)\r\n    .filter('formatShortWeek', formatShortWeekFilter)\r\n    .filter('formatShortDateTime', formatShortDateTimeFilter)\r\n    .filter('formatMiddleDateTime', formatMiddleDateTimeFilter)    \r\n    .filter('formatLongDateTime', formatLongDateTimeFilter)\r\n    .filter('formatShortDateLongTime', formatShortDateLongTimeFilter)\r\n    .filter('formatMiddleDateLongTime', formatMiddleDateLongTimeFilter)    \r\n    .filter('formatLongDateLongTime', formatLongDateLongTimeFilter)    \r\n    .filter('formatFullDateTime', formatFullDateTimeFilter)\r\n    .filter('formatShortTime', formatShortTimeFilter)\r\n    .filter('formatLongTime', formatLongTimeFilter)\r\n    .filter('formatShortDayOfWeek', formatShortDayOfWeekFilter)\r\n    .filter('formatLongDayOfWeek', formatLongDayOfWeekFilter)\r\n    .filter('formatLongMonthDay', formatLongMonthDayFilter)\r\n    .filter('formatShortMonthDay', formatShortMonthDayFilter)\r\n    .filter('formatDateRange', formatDateRangeFilter)\r\n    .filter('formatDateTimeRange', formatDateTimeRangeFilter)\r\n    .filter('formatISOWeek', formatISOWeekFilter)\r\n    .filter('formatShortISOWeek', formatShortISOWeekFilter)\r\n    .filter('formatISOWeekOrdinal', formatISOWeekOrdinalFilter)\r\n    .filter('formatDateY', formatDateYFilter)\r\n    .filter('formatLongDateY', formatLongDateYFilter)\r\n    .filter('formatTodayDateLongTimeLong', formatTodayDateLongTimeLongFilter)\r\n    .filter('formatTodayDateShortTimeLong', formatTodayDateShortTimeLongFilter)\r\n    .filter('formatTodayDateLongTimeShort', formatTodayDateLongTimeShortFilter)\r\n    .filter('formatTodayDateShortTimeShort', formatTodayDateShortTimeShortFilter)\r\n    .filter('formatMillisecondsToSeconds', formatMillisecondsToSecondsFilter)\r\n    .filter('formatElapsedInterval', formatElapsedIntervalFilter);\r\n","'use strict';\r\n\r\nexport class DateTimeConfig {\r\n    timeZone: number;\r\n}\r\n\r\nexport interface IDateTimeService {\r\n    readonly config: DateTimeConfig;\r\n    useTimeZone(offset: number);\r\n\r\n    bbFormatDateLongTime(value: any, firstTime?: boolean): string; \r\n    \r\n    formatTime(value: any, format: string): string;\r\n    formatDateOptional(value: any, format: string): string;\r\n    formatShortDate(value: any): string;\r\n    formatMiddleDate(value: any): string;\r\n    formatLongDate(value: any): string;\r\n    formatMonth(value: any): string;\r\n    formatLongMonth(value: any): string;\r\n    formatYear(value: any): string;\r\n    formatWeek(value: any): string;\r\n    formatShortWeek(value: any): string;\r\n    formatShortDateTime(value: any): string;\r\n    formatMiddleDateTime(value: any): string;    \r\n    formatLongDateTime(value: any): string;\r\n    formatFullDateTime(value: any): string;\r\n    formatShortDateLongTime(value: any, firstTime?: boolean): string;\r\n    formatMiddleDateLongTime(value: any, firstTime?: boolean): string;    \r\n    formatLongDateLongTime(value: any, firstTime?: boolean): string;    \r\n    formatShortTime(value: any): string;\r\n    formatLongTime(value: any): string;\r\n    formatShortDayOfWeek(value: any): string;\r\n    formatLongDayOfWeek(value: any): string;\r\n    formatLongMonthDay(value: any): string;\r\n    formatShortMonthDay(value: any): string;\r\n    formatDateRange(value1: any, value2: any): string;\r\n    formatDateTimeRange(value1: any, value2: any): string;\r\n    formatISOWeek(value: any): string;\r\n    formatShortISOWeek(value: any): string;\r\n    formatISOWeekOrdinal(value: any): string;\r\n    formatDateY(value: any): string;\r\n    formatLongDateY(value: any): string;\r\n    formatTodayDateLongTimeLong(value: any): string;\r\n    formatTodayDateShortTimeLong(value: any): string;\r\n    formatTodayDateLongTimeShort(value: any): string;\r\n    formatTodayDateShortTimeShort(value: any): string;\r\n    formatMillisecondsToSeconds(value: any): string;\r\n    formatElapsedInterval(value: any, start: any): string;\r\n\r\n    getDateJSON(date: any): string;\r\n    getNextStart(value: any, category: string): any;\r\n    getPrevStart(value: any, category: string): any;\r\n    getNowStart(category: string): any;\r\n\r\n    addHours(value: any, hours: number): any;\r\n    toStartDay(value: any): any;\r\n    toEndDay(value: any, offset: number): any;\r\n    toStartWeek(value: any): any;\r\n    toEndWeek(value: any, offset: number): any;\r\n    toStartMonth(value: any): any;\r\n    toEndMonth(value: any, offset: number): any;\r\n    toStartYear(value: any): any;\r\n    toEndYear(value: any, offset: number): any;\r\n \r\n}\r\n\r\nexport interface IDateTimeProvider extends IDateTimeService, ng.IServiceProvider {\r\n\r\n}\r\n\r\nclass DateTime implements IDateTimeService {\r\n    private _config: DateTimeConfig;\r\n    protected _momentRanged = new Array('year', 'month', 'week', 'isoweek', 'day');\r\n    protected _defaultFormat = 'LL'\r\n\r\n    private isUndefinedOrNull(value: any): boolean {\r\n        return angular.isUndefined(value) || value === null;\r\n    }\r\n\r\n    private getRange(value: string): string {\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return 'day';\r\n        }\r\n\r\n        let index = this._momentRanged.indexOf(value)\r\n\r\n        if (index < 0) {\r\n            return 'day'\r\n        } else {\r\n            return this._momentRanged[index];\r\n        }\r\n    }\r\n\r\n    private getOperationRange(value: string): string {\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return 'day';\r\n        }\r\n\r\n        let range = value == 'isoweek' ? 'week' : value,\r\n            index = this._momentRanged.indexOf(range)\r\n\r\n        if (index < 0) {\r\n            return 'day'\r\n        } else {\r\n            return this._momentRanged[index];\r\n        }\r\n    }\r\n\r\n    private formatDateTime(value: any, basicFormat: string): string {\r\n        var date: any,\r\n            formatTpl: string;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        \r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        formatTpl = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n        return date.format(formatTpl);\r\n    }\r\n\r\n    private formatDateTimeY(value: any, basicFormat: string): string {\r\n        var date: any,\r\n            nowDate: any,\r\n            formatMoment: string;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        \r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        nowDate = moment();\r\n        formatMoment = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat);\r\n\r\n        if (nowDate.year() == date.year()) {\r\n            formatMoment = formatMoment.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '');\r\n        }\r\n\r\n        return date.format(formatMoment);\r\n    }\r\n\r\n    private formatDay(value: any, basicFormat: string): string {\r\n        var date: any,\r\n            format = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat),\r\n            formatMonthYearless = format.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '').replace(/M/g, '');\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        \r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return date.format(formatMonthYearless);\r\n    }\r\n\r\n    private formatMonthDay(value: any, basicFormat: string): string {\r\n        var date: any,\r\n            format = basicFormat ? basicFormat : this._defaultFormat,\r\n            formatLL = moment.localeData().longDateFormat(format),\r\n            formatYearlessLL = formatLL.replace(/Y/g, '').replace(/^\\W|\\W$|\\W\\W/, '');\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        \r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return date.format(formatYearlessLL);\r\n    }\r\n\r\n//  use timezone not testing\r\n    private formatRange(value1: any, value2: any, basicFormat: string): string {\r\n        var dateStart: any,\r\n            dateEnd: any,\r\n            format = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n        if (this.isUndefinedOrNull(value1)) {\r\n            dateStart = null;\r\n        } else {\r\n            dateStart = (this._config.timeZone != undefined && this._config.timeZone != null) ?  moment(value1).utcOffset(this._config.timeZone) : moment(value1);\r\n        }\r\n        if (this.isUndefinedOrNull(value2)) {\r\n            dateEnd = null;\r\n        } else {\r\n            dateEnd = (this._config.timeZone != undefined && this._config.timeZone != null) ?  moment(value2).utcOffset(this._config.timeZone) : moment(value2);\r\n        }\r\n\r\n        if (dateStart === null && dateEnd === null) return '';\r\n\r\n        if (dateStart === null) {\r\n            return dateEnd.format(basicFormat);\r\n        } else if (dateEnd === null || dateStart.isSame(dateEnd)) {\r\n            return dateStart.format(basicFormat);;\r\n        }\r\n\r\n        if (dateStart.isAfter(dateEnd)) {\r\n            // todo localization\r\n            throw new Error('Date range error. Start date is more than end date.');\r\n        }\r\n\r\n        if (dateStart.year() == dateEnd.year()) {\r\n            if (dateStart.month() == dateEnd.month()) {\r\n                return this.formatDay(dateStart, basicFormat) + '-' + dateEnd.format(basicFormat);\r\n            } else {\r\n                return this.formatMonthDay(dateStart, basicFormat) + '-' + dateEnd.format(basicFormat);\r\n            }\r\n        } else {\r\n            return dateStart.format(basicFormat) + '-' + dateEnd.format(basicFormat);\r\n        }\r\n    }\r\n\r\n    private toStartRange(value: any, range: string): any {\r\n        var date: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return date.startOf(range).toDate();\r\n    }\r\n\r\n    private toEndRange(value: any, range: string, offset: number): any {\r\n        var date: any,\r\n            result: any,\r\n            mssOffset: number;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (!angular.isNumber(offset)) {\r\n            mssOffset = 0;\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        if (mssOffset) {\r\n            result = date.startOf(range).add(mssOffset, 'milliseconds');\r\n        } else {\r\n            result = date.startOf(range);\r\n        }\r\n\r\n        return date.startOf(range).toDate();\r\n    }\r\n\r\n    private toDateWithTime(value: any, formatDate: string, formatTime: string, firstTime?: boolean): any {\r\n        var date: any,\r\n            result: string,\r\n            nowDate: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        nowDate = moment();\r\n        if (firstTime) {\r\n            result = date.format(formatTime) + ' ' + date.format(formatDate);\r\n        } else {\r\n            result = date.format(formatDate) + ' ' + date.format(formatTime);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    private toTodayDate(value: any, formatDate: string, formatTime: string): any {\r\n        var date: any,\r\n            result: string,\r\n            nowDate: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        if (this._config.timeZone != undefined && this._config.timeZone != null) {\r\n            date = moment(value).utcOffset(this._config.timeZone);\r\n        } else {\r\n            date = moment(value);\r\n        }\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        nowDate = moment();\r\n\r\n        if (nowDate.year() == date.year() && nowDate.month() == date.month() && nowDate.day() == date.day()) {\r\n            result = date.format(formatTime);\r\n        } else {\r\n            result = date.format(formatDate) + ' ' + date.format(formatTime);\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public constructor(config: DateTimeConfig) { \r\n        this._config = config || { timeZone: null };\r\n    };\r\n\r\n    public get config(): DateTimeConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public useTimeZone(offset: number) {\r\n        this._config.timeZone = offset;\r\n    }\r\n    // formating functions \r\n    // -------------------\r\n\r\n    // todo Optional\r\n    public formatTime(value: any, format: string): string {\r\n        return this.formatDateTime(value, 'LLL');\r\n    }\r\n    // todo Optional\r\n    public formatDateOptional(value: any, format: string): string {\r\n        return this.formatDateTime(value, 'L');\r\n    }\r\n\r\n    // date formats\r\n    public formatShortDate(value: any): string {\r\n        return this.formatDateTime(value, 'L');\r\n    }\r\n\r\n    public bbFormatDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this.toDateWithTime(value, 'MM/DD/YY', 'LTS', firstTime); \r\n    }\r\n\r\n    public formatMiddleDate(value: any): string {\r\n        return this.formatDateTime(value, 'll');\r\n    }\r\n\r\n    public formatLongDate(value: any): string {\r\n        return this.formatDateTime(value, 'LL');\r\n    }\r\n\r\n    public formatMonth(value: any): string {\r\n        return this.formatDateTime(value, 'MM');\r\n    }\r\n\r\n    public formatLongMonth(value: any): string {\r\n        return this.formatDateTime(value, 'MMMM');\r\n    }\r\n\r\n    public formatYear(value: any): string {\r\n        return this.formatDateTime(value, 'YYYY');\r\n    }\r\n\r\n    public formatWeek(value: any): string {\r\n        return this.formatDateTime(value, 'ww');\r\n    }\r\n\r\n    public formatShortWeek(value: any): string {\r\n        return this.formatDateTime(value, 'w');\r\n    }\r\n\r\n    public formatShortDateTime(value: any): string {\r\n        return this.toDateWithTime(value, 'L', 'LT'); \r\n    }\r\n\r\n    public formatMiddleDateTime(value: any): string {\r\n        return this.formatDateTime(value, 'lll');\r\n    }\r\n\r\n    public formatLongDateTime(value: any): string {\r\n        return this.formatDateTime(value, 'LLL');\r\n    }\r\n\r\n    public formatFullDateTime(value: any): string {\r\n        return this.formatDateTime(value, 'LLLL');\r\n    }\r\n\r\n    public formatShortDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this.toDateWithTime(value, 'L', 'LTS', firstTime); \r\n    }\r\n\r\n    public formatMiddleDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this.toDateWithTime(value, 'll', 'LTS', firstTime);\r\n    }\r\n\r\n    public formatLongDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this.toDateWithTime(value, 'LL', 'LTS', firstTime);\r\n    }\r\n\r\n    public formatShortTime(value: any): string {\r\n        return this.formatDateTime(value, 'LT');\r\n    }\r\n\r\n    public formatLongTime(value: any): string {\r\n        return this.formatDateTime(value, 'LTS');\r\n    }\r\n\r\n    public formatShortDayOfWeek(value: any): string {\r\n        return this.formatDateTime(value, 'dd');\r\n    }\r\n\r\n    public formatLongDayOfWeek(value: any): string {\r\n        return this.formatDateTime(value, 'dddd');\r\n    }\r\n\r\n    // public formatTimeNumber(value: any): string {\r\n    //     return this.formatDateTime(value, 'LLL');\r\n    // }\r\n\r\n    // public formatLongTimeNumber(value: any): string {\r\n    //     return this.formatDateTime(value, 'LLLL');\r\n    // }\r\n\r\n    ///-----------------\r\n\r\n    public formatLongMonthDay(value: any): string {\r\n        return this.formatMonthDay(value, 'LL');\r\n    }\r\n\r\n    public formatShortMonthDay(value: any): string {\r\n        return this.formatMonthDay(value, 'L');\r\n    }\r\n\r\n    public formatDateRange(value1: any, value2: any): string {\r\n        return this.formatRange(value1, value2, 'LL');\r\n    }\r\n\r\n    public formatDateTimeRange(value1: any, value2: any): string {\r\n        return this.formatRange(value1, value2, 'LLL');\r\n    }\r\n\r\n    // iso function\r\n    // --------------\r\n\r\n    public formatISOWeek(value: any): string {\r\n        return this.formatDateTime(value, 'WW');\r\n    }\r\n\r\n    public formatShortISOWeek(value: any): string {\r\n        return this.formatDateTime(value, 'W');\r\n    }\r\n\r\n    public formatISOWeekOrdinal(value: any): string {\r\n        return this.formatDateTime(value, 'Wo');\r\n    }\r\n    // special formats \r\n    // --------------\r\n\r\n    // year option displays if the current year is not equal to, the date of \r\n    public formatDateY(value: any): string {\r\n        return this.formatDateTimeY(value, 'L');\r\n    }\r\n\r\n    // year option displays if the current year is not equal to, the date of\r\n    public formatLongDateY(value: any): string {\r\n        return this.formatDateTimeY(value, 'LL');\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // September 4 1986 8:30:25 PM or 8:30:25 PM\r\n    public formatTodayDateLongTimeLong(value: any): string {\r\n        return this.toTodayDate(value, 'LL', 'LTS')\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // Sep 4 1986 8:30:25 PM or 8:30:25 PM\r\n    public formatTodayDateShortTimeLong(value: any): string {\r\n        return this.toTodayDate(value, 'LL', 'LTS')\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // September 4 1986 8:30 PM or 8:30 PM\r\n    public formatTodayDateLongTimeShort(value: any): string {\r\n        return this.toTodayDate(value, 'LL', 'LT')\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // Sep 4 1986 8:30 PM or 8:30 PM\r\n    public formatTodayDateShortTimeShort(value: any): string {\r\n        return this.toTodayDate(value, 'll', 'LT')\r\n    }\r\n\r\n    // todo\r\n    public formatMillisecondsToSeconds(value: any): string {\r\n        return '';\r\n    }\r\n\r\n    // todo\r\n    public formatElapsedInterval(value: any, start: any): string {\r\n        var date: any,\r\n            nowDate: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n        if (this.isUndefinedOrNull(start)) {\r\n            nowDate = moment();\r\n        } else {\r\n            nowDate = moment(start);\r\n        }\r\n\r\n        date = moment(value);\r\n        if (!date.isValid() || !nowDate.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return moment(date).fromNow(nowDate);\r\n    }\r\n\r\n    public getDateJSON(date: any): string {\r\n        return JSON.stringify(moment(date));\r\n    }\r\n\r\n    // navigation functions \r\n    // ------------------\r\n\r\n    public getNextStart(value: any, category: string): any {\r\n        var date: any,\r\n            range: string,\r\n            result: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        date = moment(value);\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        range = this.getRange(category);\r\n        result = moment(date).startOf(range).add(this.getOperationRange(range));\r\n\r\n        return result.toDate();\r\n    }\r\n\r\n    public getPrevStart(value: any, category: string): any {\r\n        var date: any,\r\n            range: string,\r\n            result: any;\r\n\r\n        if (this.isUndefinedOrNull(value)) {\r\n            return '';\r\n        }\r\n\r\n        date = moment(value);\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        range = this.getRange(category);\r\n        result = moment(date).startOf(range).add(-1, this.getOperationRange(range));\r\n\r\n        return result.toDate();\r\n    }\r\n\r\n    public getNowStart(category: string): any {\r\n        var date: any,\r\n            range: string,\r\n            result: any;\r\n\r\n        date = moment();\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        range = this.getRange(category)\r\n        result = moment(date).startOf(range);\r\n\r\n        return result.toDate();\r\n    }\r\n\r\n    public addHours(value: any, hours: number): any {\r\n        var date: any;\r\n\r\n        if (this.isUndefinedOrNull(value) || !angular.isNumber(hours)) {\r\n            return '';\r\n        }\r\n\r\n        date = moment(value);\r\n        if (!date.isValid()) {\r\n            return '';\r\n        }\r\n\r\n        return date.add(hours, 'hours').toDate();\r\n    }\r\n\r\n    public toStartDay(value: any): any {\r\n        return this.toStartRange(value, 'day');\r\n    }\r\n\r\n    public toEndDay(value: any, offset: number): any {\r\n        return this.toEndRange(value, 'day', offset);\r\n    }\r\n\r\n    public toStartWeek(value: any): any {\r\n        return this.toStartRange(value, 'week');\r\n    }\r\n\r\n    public toEndWeek(value: any, offset: number): any {\r\n        return this.toEndRange(value, 'week', offset);\r\n    }\r\n\r\n    public toStartMonth(value: any): any {\r\n        return this.toStartRange(value, 'month');\r\n    }\r\n\r\n    public toEndMonth(value: any, offset: number): any {\r\n        return this.toEndRange(value, 'month', offset);\r\n    }\r\n\r\n    public toStartYear(value: any): any {\r\n        return this.toStartRange(value, 'year');\r\n    }\r\n\r\n    public toEndYear(value: any, offset: number): any {\r\n        return this.toEndRange(value, 'year', offset);\r\n    }\r\n\r\n}\r\n\r\nclass DateTimeService {\r\n    private _datetime: DateTime;\r\n    private _config: DateTimeConfig;\r\n\r\n    public constructor(\r\n        datetime: DateTime,\r\n    ) {\r\n        this._config = { timeZone: null};\r\n        this._datetime = datetime;\r\n    }\r\n\r\n    // todo Optional\r\n    public useTimeZone(offset: number): void {\r\n        return this._datetime.useTimeZone(offset);\r\n    }\r\n\r\n    // todo Optional\r\n    public formatTime(value: any, format: string): string {\r\n        return this._datetime.formatTime(value, format);\r\n    }\r\n\r\n    // todo Optional\r\n    public formatDateOptional(value: any, format: string): string {\r\n        return this._datetime.formatDateOptional(value, format);\r\n    }\r\n\r\n    public formatShortDate(value: any): string {\r\n        return this._datetime.formatShortDate(value);\r\n    }\r\n\r\n    public formatMiddleDate(value: any): string {\r\n        return this._datetime.formatMiddleDate(value);\r\n    }\r\n\r\n    public formatLongDate(value: any): string {\r\n        return this._datetime.formatLongDate(value);\r\n    }\r\n\r\n    public formatMonth(value: any): string {\r\n        return this._datetime.formatMonth(value);\r\n    }\r\n\r\n    public formatLongMonth(value: any): string {\r\n        return this._datetime.formatLongMonth(value);\r\n    }\r\n\r\n    public formatYear(value: any): string {\r\n        return this._datetime.formatYear(value);\r\n    }\r\n\r\n    public formatWeek(value: any): string {\r\n        return this._datetime.formatWeek(value);\r\n    }\r\n\r\n    public formatShortWeek(value: any): string {\r\n        return this._datetime.formatShortWeek(value);\r\n    }\r\n\r\n    public formatShortDateTime(value: any): string {\r\n        return this._datetime.formatShortDateTime(value);\r\n    }\r\n\r\n    public formatMiddleDateTime(value: any): string {\r\n        return this._datetime.formatMiddleDateTime(value);\r\n    }\r\n\r\n    public formatLongDateTime(value: any): string {\r\n        return this._datetime.formatLongDateTime(value);\r\n    }\r\n\r\n    public formatFullDateTime(value: any): string {\r\n        return this._datetime.formatFullDateTime(value);\r\n    }\r\n\r\n    public formatShortDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this._datetime.formatShortDateLongTime(value, firstTime);\r\n    }\r\n\r\n    public formatMiddleDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this._datetime.formatMiddleDateLongTime(value, firstTime);\r\n    }\r\n\r\n    public formatLongDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this._datetime.formatLongDateLongTime(value, firstTime);\r\n    }\r\n\r\n    public bbFormatDateLongTime(value: any, firstTime?: boolean): string {\r\n        return this._datetime.bbFormatDateLongTime(value, firstTime);\r\n    }\r\n\r\n    public formatShortTime(value: any): string {\r\n        return this._datetime.formatShortTime(value);\r\n    }\r\n\r\n    public formatLongTime(value: any): string {\r\n        return this._datetime.formatLongTime(value);\r\n    }\r\n\r\n    public formatShortDayOfWeek(value: any): string {\r\n        return this._datetime.formatShortDayOfWeek(value);\r\n    }\r\n\r\n    public formatLongDayOfWeek(value: any): string {\r\n        return this._datetime.formatLongDayOfWeek(value);\r\n    }\r\n\r\n    public formatLongMonthDay(value: any): string {\r\n        return this._datetime.formatLongMonthDay(value);\r\n    }\r\n\r\n    public formatShortMonthDay(value: any): string {\r\n        return this._datetime.formatShortMonthDay(value);\r\n    }\r\n\r\n    public formatDateRange(value1: any, value2: any): string {\r\n        return this._datetime.formatDateRange(value1, value2);\r\n    }\r\n\r\n    public formatDateTimeRange(value1: any, value2: any): string {\r\n        return this._datetime.formatDateTimeRange(value1, value2);\r\n    }\r\n\r\n    // iso function\r\n    // --------------\r\n\r\n    public formatISOWeek(value: any): string {\r\n        return this._datetime.formatISOWeek(value);\r\n    }\r\n\r\n    public formatShortISOWeek(value: any): string {\r\n        return this._datetime.formatShortISOWeek(value);\r\n    }\r\n\r\n    public formatISOWeekOrdinal(value: any): string {\r\n        return this._datetime.formatISOWeekOrdinal(value);\r\n    }\r\n    // special formats \r\n    // --------------\r\n\r\n    // year option displays if the current year is not equal to, the date of \r\n    public formatDateY(value: any): string {\r\n        return this._datetime.formatDateY(value);\r\n    }\r\n\r\n    // year option displays if the current year is not equal to, the date of\r\n    public formatLongDateY(value: any): string {\r\n        return this._datetime.formatLongDateY(value);\r\n    }\r\n\r\n    // date displays if the current date  is not equal now \r\n    // September 4 1986 8:30:25 PM or 8:30:25 PM\r\n    public formatTodayDateLongTimeLong(value: any): string {\r\n        return this._datetime.formatTodayDateLongTimeLong(value);\r\n    }    \r\n\r\n    // date displays if the current date  is not equal now \r\n    // Sep 4 1986 8:30:25 PM or 8:30:25 PM\r\n    public formatTodayDateShortTimeLong(value: any): string {\r\n        return this._datetime.formatTodayDateShortTimeLong(value);\r\n    }     \r\n\r\n    // date displays if the current date  is not equal now \r\n    // September 4 1986 8:30 PM or 8:30 PM\r\n    public formatTodayDateLongTimeShort(value: any): string {\r\n        return this._datetime.formatTodayDateLongTimeShort(value);\r\n    }     \r\n\r\n    // date displays if the current date  is not equal now \r\n    // Sep 4 1986 8:30 PM or 8:30 PM\r\n    public formatTodayDateShortTimeShort(value: any): string {\r\n        return this._datetime.formatTodayDateShortTimeShort(value);\r\n    }     \r\n\r\n    // todo\r\n    public formatMillisecondsToSeconds(value: any) {\r\n        return this._datetime.formatMillisecondsToSeconds(value);\r\n    }\r\n\r\n    // todo\r\n    public formatElapsedInterval(value: any, start: any): string {\r\n        return this._datetime.formatElapsedInterval(value, start);\r\n    }\r\n\r\n    public getDateJSON(date: any): string {\r\n        return this._datetime.getDateJSON(date);\r\n    }\r\n\r\n    // navigation functions \r\n    // ------------------\r\n\r\n    public getNextStart(value: any, category: string): any {\r\n        return this._datetime.getNextStart(value, category);\r\n    }\r\n\r\n    public getPrevStart(value: any, category: string): any {\r\n        return this._datetime.getPrevStart(value, category);\r\n    }\r\n\r\n    public getNowStart(category: string): any {\r\n        return this._datetime.getNowStart(category);\r\n    }\r\n\r\n    public addHours(value: any, hours: number): any {\r\n        return this._datetime.addHours(value, hours);\r\n    }\r\n\r\n    public toStartDay(value: any): any {\r\n        return this._datetime.toStartDay(value);\r\n    }\r\n\r\n    public toEndDay(value: any, offset: number): any {\r\n        return this._datetime.toEndDay(value, offset);\r\n    }\r\n\r\n    public toStartWeek(value: any): any {\r\n        return this._datetime.toStartWeek(value);\r\n    }\r\n\r\n    public toEndWeek(value: any, offset: number): any {\r\n        return this._datetime.toEndWeek(value, offset);\r\n    }\r\n\r\n    public toStartMonth(value: any): any {\r\n        return this._datetime.toStartMonth(value);\r\n    }\r\n\r\n    public toEndMonth(value: any, offset: number): any {\r\n        return this._datetime.toEndMonth(value, offset);\r\n    }\r\n\r\n    public toStartYear(value: any): any {\r\n        return this._datetime.toStartYear(value);\r\n    }\r\n\r\n    public toEndYear(value: any, offset: number): any {\r\n        return this._datetime.toEndYear(value, offset);\r\n    }\r\n\r\n}\r\n\r\nclass DateTimeProvider extends DateTime implements IDateTimeProvider {\r\n    private _translation: DateTime;\r\n    private _service: DateTimeService;\r\n\r\n    public constructor() {\r\n        super({ timeZone: null });\r\n    }\r\n\r\n    public $get(): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new DateTimeService(this);\r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipDateTime.Service', [])\r\n    .provider('pipDateTime', DateTimeProvider);\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDate', ['pipDates.Templates']);\r\n\r\n    thisModule.directive('pipDate',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                require: 'ngModel',\r\n                scope: {\r\n                    timeMode: '@pipTimeMode',\r\n                    disabled: '&ngDisabled',\r\n                    model: '=ngModel',\r\n                    ngChange: '&'\r\n                },\r\n                templateUrl: 'date_directive/date.html',\r\n                controller: 'pipDateController'\r\n            };\r\n        }\r\n    );\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipDateController',\r\n        function ($scope, $element, $injector) { //pipTranslate\r\n            var value,\r\n                localeDate: any = moment.localeData(),\r\n                momentMonths = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format,\r\n                momentDays = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format,\r\n                momentShortDays = localeDate._weekdaysMin,\r\n                momentFirstDayOfWeek = localeDate._week.dow;\r\n\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            if (pipTranslate) {\r\n                pipTranslate.setTranslations('en', {\r\n                    DAY: 'Day',\r\n                    MONTH: 'Month',\r\n                    YEAR: 'Year'\r\n                });\r\n                pipTranslate.setTranslations('ru', {\r\n                    DAY: '',\r\n                    MONTH: '',\r\n                    YEAR: ''                    \r\n                });\r\n                $scope.dayLabel = pipTranslate.translate('DAY');\r\n                $scope.monthLabel = pipTranslate.translate('MONTH');\r\n                $scope.yearLabel = pipTranslate.translate('YEAR');\r\n            } else {\r\n                $scope.dayLabel = 'Day';\r\n                $scope.monthLabel = 'Month';                \r\n                $scope.yearLabel = 'Year';\r\n\r\n            }\r\n\r\n            function dayList(month, year) {\r\n                var count = 31, days = [], i;\r\n\r\n                if (month === 4 || month === 6 || month === 9 || month === 11) {\r\n                    count = 30;\r\n                } else if (month === 2) {\r\n                    if (year) {\r\n                        // Calculate leap year (primitive)\r\n                        count = year % 4 === 0 ? 29 : 28;\r\n                    } else {\r\n                        count = 28;\r\n                    }\r\n                }\r\n\r\n                for (i = 1; i <= count; i++) {\r\n                    days.push(i);\r\n                }\r\n\r\n                return days;\r\n            }\r\n\r\n            function monthList() {\r\n                var months = [], i;\r\n\r\n                for (i = 1; i <= 12; i++) {\r\n                    months.push({\r\n                        id: i,\r\n                        name: momentMonths[i-1]\r\n                    });\r\n                }\r\n\r\n                return months;\r\n            }\r\n\r\n            function yearList() {\r\n                var i,\r\n                    currentYear = new Date().getFullYear(),\r\n                    startYear = $scope.timeMode === 'future' ? currentYear : currentYear - 100,\r\n                    endYear = $scope.timeMode === 'past' ? currentYear : currentYear + 100,\r\n                    years = [];\r\n\r\n                if ($scope.timeMode === 'past') {\r\n                    for (i = endYear; i >= startYear; i--) {\r\n                        years.push(i);\r\n                    }\r\n                } else {\r\n                    for (i = startYear; i <= endYear; i++) {\r\n                        years.push(i);\r\n                    }\r\n                }\r\n\r\n                return years;\r\n            }\r\n\r\n            function adjustDay() {\r\n                var days = dayList($scope.month, $scope.year);\r\n\r\n                if ($scope.days.length !== days.length) {\r\n                    if ($scope.day > days.length) {\r\n                        $scope.day = days.length;\r\n                    }\r\n\r\n                    $scope.days = days;\r\n                }\r\n            }\r\n\r\n            function getValue(v) {\r\n                var value = v ? _.isDate(v) ? v : new Date(v) : null,\r\n                    day = value ? value.getDate() : null,\r\n                    month = value ? value.getMonth() + 1 : null,\r\n                    year = value ? value.getFullYear() : null;\r\n\r\n                // Update day list if month and year were changed\r\n                if ($scope.month !== month && $scope.year !== year) {\r\n                    $scope.days = dayList($scope.month, $scope.year);\r\n                }\r\n\r\n                // Assign values to scope\r\n                $scope.day = day;\r\n                $scope.month = month;\r\n                $scope.year = year;\r\n            }\r\n\r\n            function setValue() {\r\n                var value;\r\n\r\n                if ($scope.day && $scope.month && $scope.year) {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.day, 0, 0, 0, 0);\r\n                    $scope.model = value;\r\n                    $scope.ngChange();\r\n                }\r\n            }\r\n\r\n            $scope.onDayChanged = function () {\r\n                setValue();\r\n            };\r\n\r\n            $scope.onMonthChanged = function () {\r\n                adjustDay();\r\n                setValue();\r\n            };\r\n\r\n            $scope.onYearChanged = function () {\r\n                adjustDay();\r\n                setValue();\r\n            };\r\n\r\n            // Set initial values\r\n            value = $scope.model ? _.isDate($scope.model) ? $scope.model : new Date($scope.model) : null;\r\n            $scope.day = value ? value.getDate() : null;\r\n            $scope.month = value ? value.getMonth() + 1 : null;\r\n            $scope.year = value ? value.getFullYear() : null;\r\n\r\n\r\n\r\n            $scope.days = dayList($scope.month, $scope.year);\r\n            $scope.months = monthList();\r\n            $scope.years = yearList();\r\n\r\n            $scope.disableControls = $scope.disabled ? $scope.disabled() : false;\r\n\r\n            // React on changes\r\n            $scope.$watch('model', function (newValue) {\r\n                getValue(newValue);\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipDateRange', ['pipDates.Templates']);\r\n\r\n    thisModule.directive('pipDateRange',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                require: 'ngModel',\r\n                scope: {\r\n                    timeMode: '@pipTimeMode',\r\n                    disabled: '&ngDisabled',\r\n                    model: '=ngModel',\r\n                    pipChanged: '&',\r\n                    pipDateRangeType: '@',\r\n                    pipDateFormat: '@',\r\n                    pipNoLine: '@'\r\n                },\r\n                templateUrl: 'date_range_directive/date_range.html',\r\n                controller: 'pipDateRangeController'\r\n            };\r\n        });\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipDateRangeController',\r\n        function ($scope, $element, $mdMedia, $rootScope, $injector, $timeout) { //pipTranslate, \r\n            var currentDate,\r\n                currentYear,\r\n                currentMonth,\r\n                currentDay,\r\n                prevState: any = {}, \r\n                currentState: any = {},\r\n                localeDate: any = moment.localeData(),\r\n                momentMonths = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format,\r\n                momentDays = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format,\r\n                momentShortDays = localeDate._weekdaysMin,\r\n                momentFirstDayOfWeek = localeDate._week.dow;\r\n\r\n            // var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            // if (pipTranslate) {\r\n            //     pipTranslate.setTranslations('en', {\r\n            //         EVENT_NEW_START_TIME: 'Start time',\r\n            //         EVENT_NEW_END_TIME: 'End time'\r\n            //     });\r\n            //     pipTranslate.setTranslations('ru', {\r\n            //         EVENT_NEW_START_TIME: '',\r\n            //         EVENT_NEW_END_TIME: ''                \r\n            //     });\r\n            //     $scope.startLabel = $scope.pipStartLabel ? pipTranslate.translate($scope.pipStartLabel)\r\n            //             : pipTranslate.translate('EVENT_NEW_START_TIME');\r\n            //     $scope.endLabel = $scope.pipEndLabel ? pipTranslate.translate($scope.pipEndLabel)\r\n            //             : pipTranslate.translate('EVENT_NEW_END_TIME');\r\n            // } else {\r\n            //     $scope.startLabel = $scope.pipStartLabel ? $scope.pipStartLabel : 'Start time';\r\n            //     $scope.endLabel = $scope.pipEndLabel ? $scope.pipEndLabel : 'End time';              \r\n            // }\r\n\r\n            currentDate = new Date();\r\n            currentYear = currentDate.getUTCFullYear();\r\n            currentMonth = currentDate.getUTCMonth() + 1;\r\n            currentDay = currentDate.getUTCDate();\r\n\r\n            $scope.onDayChanged = function () {\r\n                setValue();\r\n            };\r\n\r\n            $scope.onMonthChanged = function () {\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    var date, dayOfWeek;\r\n\r\n                    date = new Date(Date.UTC($scope.year, $scope.month - 1, 1));\r\n                    dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n                    $scope.week = getWeekByDate(dayOfWeek, $scope.month - 1, $scope.year);\r\n                    correctWeek();\r\n                    adjustWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            $scope.onYearChanged = function () {\r\n                var date, dayOfWeek;\r\n\r\n                date = new Date(Date.UTC($scope.year, $scope.month - 1, 1));\r\n                dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    $scope.week = getWeekByDate(dayOfWeek, $scope.month - 1, $scope.year);\r\n                    adjustWeek();\r\n                    correctWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            $scope.onWeekChange = function () {\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    adjustWeek();\r\n                    correctWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            // visibility\r\n            $scope.isDay = function () {\r\n                return $scope.pipDateRangeType === 'daily';\r\n            };\r\n\r\n            $scope.isWeek = function () {\r\n                return $scope.pipDateRangeType === 'weekly';\r\n            };\r\n\r\n            $scope.isMonth = function () {\r\n                return $scope.pipDateRangeType === 'daily' ||\r\n                    $scope.pipDateRangeType === 'weekly' ||\r\n                    $scope.pipDateRangeType === 'monthly';\r\n            };\r\n\r\n            $scope.onChange = function () {\r\n                if ($scope.pipChanged) {\r\n                    $timeout(function() {\r\n                        $scope.pipChanged();\r\n                    }, 0);\r\n                }\r\n            };\r\n\r\n            function setCurrent() {\r\n                currentState.day = $scope.day;\r\n                currentState.month = $scope.month;\r\n                currentState.year = $scope.year;\r\n                currentState.week = $scope.week;\r\n                currentState.dateRangeType = $scope.pipDateRangeType;\r\n                currentState.model = $scope.model;\r\n            }\r\n\r\n            function fillLists() {\r\n                $scope.days = dayList($scope.month, $scope.year);\r\n                $scope.weeks = weekList($scope.month, $scope.year);\r\n                $scope.months = monthList();\r\n                $scope.shortMonths = monthList();\r\n                $scope.years = yearList();\r\n\r\n            }\r\n\r\n            function correctWeek() {\r\n                if (!prevState.model || prevState.model && prevState.model.getTime() >= $scope.model.getTime()) {\r\n                    // if shift week -> increase month\r\n                    if ($scope.weeks && $scope.weeks[$scope.week] && $scope.weeks[$scope.week].id <= 0) {\r\n                        if ($scope.month < 12) {\r\n                            $scope.month += 1;\r\n                        } else {\r\n                            $scope.month = 1;\r\n                            $scope.year += 1;\r\n                        }\r\n                        fillLists();\r\n                    }\r\n                }\r\n            }\r\n\r\n            function init() {\r\n                var value;\r\n\r\n                value = $scope.model ? new Date($scope.model) : null;\r\n                $scope.day = value ? value.getUTCDate() : null;\r\n                $scope.month = value ? value.getUTCMonth() + 1 : null;\r\n                $scope.year = value ? value.getUTCFullYear() : null;\r\n                $scope.week = value ? getWeekByDate($scope.day, $scope.month - 1, $scope.year) : null;\r\n\r\n                fillLists();\r\n\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    correctWeek();\r\n                    adjustWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            }\r\n\r\n            // Set initial values\r\n            $scope.$mdMedia = $mdMedia;\r\n\r\n            init();\r\n\r\n            $scope.disableControls = $scope.disabled ? $scope.disabled() : false;\r\n\r\n            // React on changes\r\n            $scope.$watch('model', function (newValue, oldValue) {\r\n                if (newValue !== oldValue) {\r\n                    getValue(newValue);\r\n                }\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n\r\n            $scope.$watch('pipDateRangeType', function (newValue, oldValue) {\r\n                if (newValue !== oldValue && oldValue) {\r\n                    init();\r\n                }\r\n            });\r\n\r\n            $scope.onYearClick = function () {\r\n                if (!$scope.year) {\r\n                    $scope.year = currentYear;\r\n                }\r\n            };\r\n\r\n            $scope.onMonthClick = function () {\r\n                if (!$scope.month) {\r\n                    $scope.month = currentMonth;\r\n                }\r\n            };\r\n\r\n            $scope.onDayClick = function () {\r\n                if (!$scope.year) {\r\n                    $scope.day = currentDay;\r\n                }\r\n            };\r\n            // ---------------------------------------------------------------------------------------\r\n\r\n            function getCountDay(month, year) {\r\n                var count = 31;\r\n\r\n                if (month === 4 || month === 6 || month === 9 || month === 11) {\r\n                    count = 30;\r\n                } else if (month === 2) {\r\n                    if (year) {\r\n                        // Calculate leap year (primitive)\r\n                        count = year % 4 === 0 ? 29 : 28;\r\n                    } else {\r\n                        count = 28;\r\n                    }\r\n                }\r\n\r\n                return count;\r\n            }\r\n\r\n            function dayList(month, year) {\r\n                var count, days, i, ln;\r\n\r\n              //  ln = $rootScope.$language || 'en';\r\n                count = getCountDay(month, year);\r\n                $scope.nameDays = [];\r\n                days = [];\r\n                for (i = 1; i <= count; i++) {\r\n                    days.push(i);\r\n                    $scope.nameDays.push(momentShortDays[moment([year, month - 1, i]).weekday()]);\r\n                }\r\n\r\n                return days;\r\n            }\r\n\r\n            function getWeekByDate(day, month, year) {\r\n                var date, dayOfWeek, startWeek;\r\n\r\n                date = new Date(Date.UTC(year, month, day));\r\n                dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n\r\n                if (dayOfWeek === 1) {\r\n                    startWeek = day;\r\n                } else {\r\n                    startWeek = day + 1 - dayOfWeek;\r\n                }\r\n\r\n                return startWeek;\r\n            }\r\n\r\n            function getWeek(day, countDay, countPrevMonthDay) {\r\n                var endDay, startDay;\r\n\r\n                endDay = day + 6 > countDay ? countDay - day - 6 : day + 6;\r\n                startDay = day > 0 ? day : countPrevMonthDay + day;\r\n\r\n                return startDay.toString() + ' - ' + (Math.abs(endDay)).toString();\r\n            }\r\n\r\n            function weekList(month, year) { //    \r\n                var weeks, countDay, countPrevMonthDay, startWeek;\r\n\r\n                weeks = [];  //        \r\n                countDay = getCountDay(month, year);\r\n                startWeek = getWeekByDate(1, month - 1, year);\r\n\r\n                countPrevMonthDay = month - 1 ? getCountDay(month - 1, year) : getCountDay(12, year - 1);\r\n                while (startWeek < countDay + 1) {\r\n                    weeks.push({\r\n                        id: startWeek,\r\n                        name: getWeek(startWeek, countDay, countPrevMonthDay)\r\n                    });\r\n                    startWeek = startWeek + 7;\r\n                }\r\n\r\n                return weeks;\r\n            }\r\n\r\n            function monthList() {\r\n                var months = [], i;\r\n\r\n                for (i = 1; i <= 12; i++) {\r\n                    months.push({\r\n                        id: i,\r\n                        name: momentMonths[i-1]\r\n                    });\r\n                }\r\n\r\n                return months;\r\n            }\r\n\r\n            function yearList() {\r\n                var startYear, i,\r\n                    endYear,\r\n                    years = [];\r\n\r\n                switch ($scope.timeMode) {\r\n                    case 'future':\r\n                        startYear = currentYear;\r\n                        endYear = currentYear + 100;\r\n                        break;\r\n                    case 'past':\r\n                        startYear = currentYear - 100;\r\n                        endYear = currentYear;\r\n                        break;\r\n                    case 'now':\r\n                        startYear = currentYear - 50;\r\n                        endYear = currentYear + 100;\r\n                        break;\r\n                    default:\r\n                        startYear = currentYear - 50;\r\n                        endYear = currentYear + 50;\r\n                        break;\r\n                }\r\n                if ($scope.timeMode === 'future') {\r\n                    for (i = startYear; i <= endYear; i++) {\r\n                        years.push(i);\r\n                    }\r\n                } else {\r\n                    for (i = endYear; i >= startYear; i--) {\r\n                        years.push(i);\r\n                    }\r\n                }\r\n\r\n                return years;\r\n            }\r\n\r\n            function adjustDay() {\r\n                var days = dayList($scope.month, $scope.year);\r\n\r\n                switch ($scope.pipDateRangeType) {\r\n                    case 'monthly':\r\n                        $scope.day = 1;\r\n                        break;\r\n                    case 'yearly':\r\n                        $scope.month = 1;\r\n                        $scope.day = 1;\r\n                        break;\r\n                    default:\r\n                        if ($scope.days.length !== days.length) {\r\n                            if ($scope.day > days.length) {\r\n                                $scope.day = days.length;\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n                $scope.days = days;\r\n            }\r\n\r\n            function adjustWeek() {\r\n                var weeks;\r\n\r\n                weeks = weekList($scope.month, $scope.year);\r\n                $scope.week = getWeekByDate($scope.week, $scope.month - 1, $scope.year);\r\n                $scope.weeks = weeks;\r\n            }\r\n\r\n            function getValue(v) {\r\n                var value, day, month, year, week;\r\n\r\n                value = v ? new Date(v) : null;\r\n                // Define values\r\n                day = value ? value.getUTCDate() : null;\r\n                month = value ? value.getUTCMonth() + 1 : null;\r\n                year = value ? value.getUTCFullYear() : null;\r\n                week = value ? getWeekByDate(day, month - 1, year) : null;\r\n                // Exit if nothing to update\r\n                if ($scope.day === day && $scope.month === month && $scope.year === year && $scope.week === week) {\r\n                    return;\r\n                }\r\n                // Assign values to scope\r\n                $scope.day = day;\r\n                $scope.month = month;\r\n                $scope.year = year;\r\n                $scope.week = week;\r\n\r\n                // Define data sources\r\n                $scope.days = dayList($scope.month, $scope.year);\r\n                $scope.weeks = weekList($scope.month, $scope.year);\r\n            }\r\n\r\n            function setValue() {\r\n                var value;\r\n\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.week, 0, 0, 0, 0);\r\n                    value = new Date(value.getTime() - value.getTimezoneOffset() * 60000);\r\n                    $scope.model = value;\r\n                } else {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.day, 0, 0, 0, 0);\r\n                    value = new Date(value.getTime() - value.getTimezoneOffset() * 60000);\r\n                    $scope.model = value;\r\n                }\r\n\r\n                prevState = _.cloneDeep(currentState);\r\n                setCurrent();\r\n                $scope.onChange();\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","'use strict';\r\n\r\nangular.module('pipDates', [\r\n    'pipDate',\r\n    'pipTimeRange',\r\n    'pipDateTime',\r\n    'pipTimeRangeEdit',\r\n    'pipDateRange',\r\n    'pipDates.Translate'\r\n]);\r\n","/**\r\n * @file Optional filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDates.Translate', []);\r\n\r\n    thisModule.filter('translate', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimeRange', []);\r\n\r\n    thisModule.directive('pipTimeRange',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipStartDate: '=',\r\n                    pipEndDate: '='\r\n                },\r\n                templateUrl: 'time_range_directive/time_range.html',\r\n                link: function ($scope: any, $element, $attrs) {\r\n\r\n                    function getDateJSON(value) {\r\n                        return value ? new Date(value) : null;\r\n                    }\r\n\r\n                    function defineStartDate() {\r\n                        if ($scope.pipStartDate !== null && $scope.pipStartDate !== undefined) {\r\n                            $scope.data.start = _.isDate($scope.pipStartDate) ? $scope.pipStartDate\r\n                                : getDateJSON($scope.pipStartDate);\r\n                        }\r\n                    }\r\n\r\n                    function defineEndDate() {\r\n                        if ($scope.pipEndDate !== null && $scope.pipEndDate !== undefined) {\r\n                            $scope.data.end = _.isDate($scope.pipEndDate) ? $scope.pipEndDate\r\n                                : getDateJSON($scope.pipEndDate);\r\n                        }\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    $scope.data = {};\r\n                    $scope.data.start = null;\r\n                    $scope.data.end = null;\r\n                    defineStartDate();\r\n                    defineEndDate();\r\n\r\n                    if (toBoolean((<any>$attrs).pipRebind)) {\r\n                        $scope.$watch('pipStartDate',\r\n                            function () {\r\n                                $scope.data.start = null;\r\n                                defineStartDate();\r\n                            }\r\n                        );\r\n                        $scope.$watch('pipEndDate',\r\n                            function () {\r\n                                $scope.data.end = null;\r\n                                defineEndDate();\r\n                            }\r\n                        );\r\n                    }\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-time-range');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimeRangeEdit', []);\r\n\r\n    thisModule.directive('pipTimeRangeEdit',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipStartDate: '=',\r\n                    pipChanged: '&',\r\n                    pipEndDate: '=',\r\n                    pipStartLabel: '@',\r\n                    pipEndLabel: '@',\r\n                    disabled: '&ngDisabled',\r\n                    pipHideTime: '=',\r\n                    pipSize: '='\r\n                },\r\n                templateUrl: 'time_range_edit_directive/time_range_edit.html',\r\n                controller: 'pipTimeRangeEditController'\r\n            };\r\n        }\r\n    );\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipTimeRangeEditController',\r\n        function ($scope, $element, $attrs, $injector, pipDateTime) { //pipTranslate\r\n\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            if (pipTranslate) {\r\n                pipTranslate.setTranslations('en', {\r\n                    EVENT_NEW_START_TIME: 'Start time',\r\n                    EVENT_NEW_END_TIME: 'End time'\r\n                });\r\n                pipTranslate.setTranslations('ru', {\r\n                    EVENT_NEW_START_TIME: '',\r\n                    EVENT_NEW_END_TIME: ''                \r\n                });\r\n                $scope.startLabel = $scope.pipStartLabel ? pipTranslate.translate($scope.pipStartLabel)\r\n                        : pipTranslate.translate('EVENT_NEW_START_TIME');\r\n                $scope.endLabel = $scope.pipEndLabel ? pipTranslate.translate($scope.pipEndLabel)\r\n                        : pipTranslate.translate('EVENT_NEW_END_TIME');\r\n            } else {\r\n                $scope.startLabel = $scope.pipStartLabel ? $scope.pipStartLabel : 'Start time';\r\n                $scope.endLabel = $scope.pipEndLabel ? $scope.pipEndLabel : 'End time';              \r\n            }\r\n\r\n            function getDateJSON(value) {\r\n                return value ? new Date(value) : null;\r\n            }\r\n\r\n            function setDuration() {\r\n                var start, end;\r\n\r\n                if (!$scope.data.startDate || !$scope.data.endDate) {\r\n                    return null;\r\n                }\r\n                \r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n                end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n\r\n                return end - start;\r\n            }\r\n\r\n            function validateStartDate() {\r\n                var date, start, end;\r\n                //     ,   \r\n                if (!$scope.data.startDate) {\r\n                    $scope.data.startTime = null;\r\n\r\n                    return;\r\n                }\r\n\r\n                // c     -  \r\n                if ($scope.data.startTime === undefined || $scope.data.startTime === null) {\r\n                    if (!$scope.data.endTime) {\r\n                        date = new Date();\r\n                        date = date.getTime() - pipDateTime.toStartDay(date);\r\n                        $scope.data.startTime = Math.floor(date / (30 * 60 * 1000)) * 30;\r\n                    } else {\r\n                        $scope.data.startTime = $scope.data.endTime === 0 ? 0 : $scope.data.endTime - 30;\r\n                    }\r\n                }\r\n\r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n\r\n                //   ,   .       \r\n                if ($scope.data.duration) {\r\n                    end = new Date(start.getTime() + $scope.data.duration);\r\n                    $scope.data.endDate = pipDateTime.toStartDay(end);\r\n                    end = end.getTime() - $scope.data.endDate.getTime();\r\n                    $scope.data.endTime = Math.floor(end / (30 * 60 * 1000)) * 30;\r\n                } else {\r\n                    //     \r\n                    end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n                    if (start >= end) {\r\n                        //    ,    \r\n                        $scope.data.endDate = pipDateTime.toStartDay(new Date(start.getTime() + 30 * 60000));\r\n                        $scope.data.endTime = ($scope.data.startTime + 30) % 1440;\r\n                    }\r\n                }\r\n\r\n                $scope.data.startTime = Math.round($scope.data.startTime / 30) * 30;\r\n            }\r\n\r\n            function validateEndDate() {\r\n                var date, start, end;\r\n\r\n                //     ,   \r\n                if (!$scope.data.endDate) {\r\n                    $scope.data.endTime = null;\r\n\r\n                    return;\r\n                }\r\n\r\n                // c     -  \r\n                if ($scope.data.endTime === undefined || $scope.data.endTime === null) {\r\n                    if (!$scope.data.startTime) {\r\n                        date = new Date();\r\n                        date = date.getTime() - pipDateTime.toStartDay(date);\r\n                        $scope.data.endTime = Math.floor(date / (30 * 60 * 1000)) * 30;\r\n                    } else {\r\n                        $scope.data.endTime = $scope.data.startTime === 1410 ? 1410 : $scope.data.startTime + 30;\r\n                    }\r\n                }\r\n\r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n                end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n\r\n                if (start >= end) {\r\n                    //    ,    \r\n                    $scope.data.startDate = pipDateTime.toStartDay(new Date(end.getTime() - 30 * 60000));\r\n                    $scope.data.startTime = $scope.data.endTime % 1440 === 0 ? 1410 : $scope.data.endTime - 30;\r\n                }\r\n\r\n                $scope.data.endTime = Math.round($scope.data.endTime / 30) * 30;\r\n                $scope.data.duration = setDuration();\r\n            }\r\n\r\n            function setDate() {\r\n                var time;\r\n\r\n                $scope.data.bind = false;\r\n\r\n                if ($scope.data.startDate) {\r\n                    time = $scope.data.startTime ? $scope.data.startTime * 60 * 1000 : 0;\r\n                    $scope.pipStartDate = new Date($scope.data.startDate.getTime() + time);\r\n                }\r\n\r\n                if ($scope.data.endDate) {\r\n                    time = $scope.data.endTime ? $scope.data.endTime * 60 * 1000 : 0;\r\n                    $scope.pipEndDate = new Date($scope.data.endDate.getTime() + time);\r\n                }\r\n\r\n                $scope.data.bind = true;\r\n            }\r\n\r\n            function defineDate() {\r\n                var start, end;\r\n\r\n                if ($scope.pipStartDate !== null && $scope.pipStartDate !== undefined) {\r\n                    start = _.isDate($scope.pipStartDate) ? $scope.pipStartDate : null;\r\n\r\n                    if (!start) {\r\n                        start = getDateJSON($scope.pipStartDate);\r\n                    }\r\n\r\n                    $scope.data.startDate = pipDateTime.toStartDay(start);\r\n                    $scope.data.startTime = (<any>new Date(start) - $scope.data.startDate) / (60 * 1000);\r\n                }\r\n\r\n                if ($scope.pipEndDate !== null && $scope.pipEndDate !== undefined) {\r\n                    end = _.isDate($scope.pipEndDate) ? $scope.pipEndDate : null;\r\n\r\n                    if (!start) {\r\n                        end = getDateJSON($scope.pipEndDate);\r\n                    }\r\n\r\n                    $scope.data.endDate = pipDateTime.toStartDay(end);\r\n                    $scope.data.endTime = (<any>new Date(end) - $scope.data.endDate) / (60 * 1000);\r\n                }\r\n\r\n                validateStartDate();\r\n                validateEndDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n            }\r\n\r\n            function getTimeInterval() {\r\n                var result, i, j, minutes;\r\n\r\n                result = [];\r\n                for (i = 0; i < 24; i++) {\r\n                    for (j = 0; j < 2; j++) {\r\n                        minutes = j * 30;\r\n                        result.push({\r\n                            id: i * 60 + minutes,\r\n                            time: _.pad(i.toString(), 3, '0').substr(0, 2) + ':' + _.pad(minutes.toString(), 2, '0')\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            }\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            function initDate() {\r\n                $scope.data.startDate = null;\r\n                $scope.data.startTime = null;\r\n                $scope.data.endDate = null;\r\n                $scope.data.endTime = null;\r\n                $scope.data.duration = null;\r\n                $scope.showTime = !toBoolean($scope.pipHideTime);\r\n            }\r\n\r\n            // initialize data\r\n            $scope.intervalTimeCollection = getTimeInterval();\r\n            $scope.data = {};\r\n            initDate();\r\n            defineDate();\r\n\r\n            // process function\r\n            $scope.onChangeStartDate = function (newV) {\r\n                validateStartDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeEndDate = function () {\r\n                validateEndDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeStartTime = function () {\r\n                if (!$scope.data.startDate) {\r\n                    $scope.data.startDate = pipDateTime.toStartDay(new Date());\r\n                }\r\n                validateStartDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeEndTime = function () {\r\n                if (!$scope.data.endDate) {\r\n                    $scope.data.endDate = pipDateTime.toStartDay(new Date());\r\n                }\r\n\r\n                validateEndDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.isDisabled = function () {\r\n                if ($scope.disabled) {\r\n                    return $scope.disabled();\r\n                }\r\n\r\n                return false;\r\n            };\r\n\r\n            $scope.$watchGroup([$scope.pipStartDate, $scope.pipEndDate], function () {\r\n                if ($scope.data.bind) {\r\n                    initDate();\r\n                    defineDate();\r\n                }\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n\r\n            // Add class\r\n            $element.addClass('pip-time-range-edit');\r\n        }\r\n    );\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('date_directive/date.html',\n    '<div class=\"pip-date layout-row flex\" tabindex=\"-1\"><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-day flex\" ng-disabled=\"disableControls\" ng-model=\"day\" placeholder=\"{{dayLabel}}\" ng-change=\"onDayChanged()\"><md-option ng-value=\"opt\" ng-repeat=\"opt in days track by opt\">{{:: opt }}</md-option></md-select></md-input-container><div class=\"input-container-separator flex-fixed\"></div><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-monthflex\" ng-disabled=\"disableControls\" ng-model=\"month\" placeholder=\"{{monthLabel}}\" ng-change=\"onMonthChanged()\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in months track by opt.id\">{{:: opt.name }}</md-option></md-select></md-input-container><div class=\"input-container-separator flex-fixed\"></div><md-input-container class=\"input-container flex\"><md-select class=\"pip-date-year flex\" ng-disabled=\"disableControls\" ng-model=\"year\" placeholder=\"{{yearLabel}}\" ng-change=\"onYearChanged()\"><md-option ng-value=\"opt\" ng-repeat=\"opt in years track by opt\">{{:: opt }}</md-option></md-select></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('date_range_directive/date_range.html',\n    '<div class=\"pip-date-range layout-row flex\" tabindex=\"-1\"><md-input-container ng-show=\"isDay()\" class=\"input-container pip-day flex\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-day\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" md-on-open=\"onDayClick()\" ng-model=\"day\" ng-change=\"onDayChanged()\" placeholder=\"{{dayLabel}}\" aria-label=\"DAY\"><md-option ng-value=\"opt\" ng-repeat=\"opt in days track by opt\">{{nameDays[$index]}} {{ opt }}</md-option></md-select></md-input-container><md-input-container ng-show=\"isWeek()\" class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-week\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" ng-model=\"week\" ng-change=\"onWeekChange()\" placeholder=\"{{weekLabel}}\" aria-label=\"WEEK\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in weeks track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><div class=\"flex-fixed\" ng-class=\"{\\'space16\\': $mdMedia(\\'gt-xs\\'), \\'space8\\': $mdMedia(\\'xs\\')}\" ng-show=\"isDay() || isWeek()\"></div><md-input-container ng-show=\"isMonth() && !monthFormatShort\" class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-month\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" md-on-open=\"onMonthClick()\" ng-model=\"month\" ng-change=\"onMonthChanged()\" placeholder=\"{{monthLabel}}\" aria-label=\"MONTH\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in months track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><md-input-container ng-show=\"isMonth() && monthFormatShort\" class=\"flex input-container\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-month\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" md-on-open=\"onMonthClick()\" ng-model=\"month\" ng-change=\"onMonthChanged()\" placeholder=\"{{monthLabel}}\" aria-label=\"MONTH\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in shortMonths track by opt.id\">{{ opt.name }}</md-option></md-select></md-input-container><div class=\"flex-fixed\" ng-class=\"{\\'space16\\': $mdMedia(\\'gt-xs\\'), \\'space8\\': $mdMedia(\\'xs\\')}\" ng-show=\"isMonth()\"></div><md-input-container class=\"input-container flex\" ng-class=\"{\\'flex-fixed\\' : $mdMedia(\\'gt-xs\\')}\"><md-select class=\"select-year\" ng-class=\"{\\'pip-no-line\\' : pipNoLine}\" ng-disable=\"{{disableControls}}\" md-on-open=\"onYearClick()\" ng-model=\"year\" ng-change=\"onYearChanged()\" placeholder=\"{{yearLabel}}\" aria-label=\"YEAR\"><md-option ng-value=\"opt\" ng-repeat=\"opt in years track by opt\">{{ opt }}</md-option></md-select></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('time_range_directive/time_range.html',\n    '<p><span ng-if=\"data.start != null\">{{data.start | formatLongDateTime}}</span> <span class=\"separator\" ng-if=\"data.start && data.end\">-</span> <span ng-if=\"data.end != null\">{{data.end | formatLongDateTime}}</span></p>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDates.Templates');\n} catch (e) {\n  module = angular.module('pipDates.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('time_range_edit_directive/time_range_edit.html',\n    '<div class=\"event-edit layout-row layout-xs-column flex layout-align-start-start\"><div flex=\"47\" class=\"start-time-container\"><p class=\"text-caption text-grey\">{{startLabel}}</p><div class=\"layout-row layout-align-space-between-center\"><div class=\"pip-datepicker-container\" flex=\"49\"><md-datepicker ng-model=\"data.startDate\" xmd-placeholder=\"{{startLabel}}\" ng-change=\"onChangeStartDate()\" ng-disabled=\"isDisabled()\" aria-label=\"START-DATE\"></md-datepicker></div><div flex=\"\" ng-if=\"showTime\"><md-input-container class=\"input-container\"><md-select aria-label=\"START-TIME\" ng-model=\"data.startTime\" ng-disabled=\"isDisabled()\" ng-change=\"onChangeStartTime(data.startTime)\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in intervalTimeCollection track by opt.id\">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div><div flex=\"47\" class=\"end-time-container\"><p class=\"text-caption text-grey\">{{endLabel}}</p><div class=\"layout-row layout-align-space-between-center\"><div class=\"pip-datepicker-container flex-49\"><md-datepicker ng-model=\"data.endDate\" xmd-placeholder=\"{{endLabel}}\" ng-disabled=\"isDisabled()\" ng-change=\"onChangeEndDate()\" aria-label=\"END-DATE\"></md-datepicker></div><div flex=\"\" ng-if=\"showTime\"><md-input-container class=\"input-container\"><md-select aria-label=\"END-TIME\" ng-model=\"data.endTime\" ng-change=\"onChangeEndTime()\" ng-disabled=\"isDisabled()\"><md-option ng-value=\"opt.id\" ng-repeat=\"opt in intervalTimeCollection track by opt.id\">{{ opt.time }}</md-option></md-select></md-input-container></div></div></div></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-dates-html.min.js.map\n","'use strict';\r\n\r\nexport class ConfirmationParams {\r\n    public ok: string = 'OK';\r\n    public title: string; \r\n    public cancel: string = 'Cancel';\r\n    public event: any;\r\n}\r\n\r\nexport class ConfirmationDialogController {\r\n\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public theme: string;\r\n    public config: ConfirmationParams;\r\n\r\n    constructor(\r\n        $mdDialog: angular.material.IDialogService,\r\n        $injector,\r\n        $rootScope: ng.IRootScopeService,\r\n        params: ConfirmationParams) {\r\n        \"ngInject\";\r\n        this.config = new ConfirmationParams();\r\n\r\n        let pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', { 'CONFIRM_TITLE': 'Confirm' });\r\n            pipTranslate.translations('ru', { 'CONFIRM_TITLE': ''});\r\n\r\n            this.config.title = params.title || 'CONFIRM_TITLE';\r\n            this.config.ok = params.ok || 'OK';\r\n            this.config.cancel = params.cancel || 'CANCEL';\r\n        } else {\r\n            this.config.title = params.title || 'Confirm';\r\n            this.config.ok = params.ok || 'OK';\r\n            this.config.cancel = params.cancel || 'Cancel';\r\n        }\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this.theme = $rootScope['$theme'];\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipConfirmationDialog', [\r\n        'ngMaterial', \r\n        'pipDialogs.Translate',\r\n        'pipDialogs.Templates'])\r\n    .controller('pipConfirmationDialogController', ConfirmationDialogController);","import { ConfirmationParams } from './ConfirmationController';\r\n\r\nexport interface IConfirmationService {\r\n    show(params: ConfirmationParams, successCallback?: () => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass ConfirmationService implements IConfirmationService {\r\n    private _mdDialog: angular.material.IDialogService;\r\n    \r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public show(params: ConfirmationParams, successCallback?: () => void, cancelCallback?: () => void) {\r\n        this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'confirmation/ConfirmationDialog.html',\r\n            controller: 'pipConfirmationDialogController',\r\n            controllerAs: 'vm',\r\n            locals: { params: params },\r\n            clickOutsideToClose: true\r\n        })\r\n        .then(() => {\r\n            if (successCallback) {\r\n                successCallback();\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipConfirmationDialog')\r\n    .service('pipConfirmationDialog', ConfirmationService);","'use strict';\r\n\r\nimport './ConfirmationController';\r\nimport './ConfirmationService';\r\n","/**\r\n * @file Registration of dialogs\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n'use strict';\r\n\r\nimport './error_details';\r\nimport './information';\r\nimport './options';\r\nimport './confirmation';\r\n\r\nangular\r\n    .module('pipDialogs', [\r\n        'pipInformationDialog',\r\n        'pipConfirmationDialog',\r\n        'pipOptionsDialog',\r\n        'pipOptionsBigDialog',\r\n        'pipErrorDetailsDialog',\r\n        //'pipErrorDetails2Dialog'\r\n    ]);\r\n\r\nexport * from './error_details';\r\n//export * from './error_details2';\r\nexport * from './information';\r\nexport * from './options';\r\nexport * from './confirmation';\r\n","'use strict';\r\n\r\nimport IWindowService = angular.IWindowService;\r\n\r\nexport class ErrorStrings {\r\n    public ok: string = 'OK';\r\n    public cancel: string = 'Cancel';\r\n    public errorDetails: string = 'Error details';\r\n    public dismissButton: string = 'Dismiss';\r\n    public errorMessage: string = 'Message';\r\n    public errorCode: string = 'Code';\r\n    public errorMethod: string = 'Method';\r\n    public errorPath: string = 'Path';\r\n    public error: string = 'Error';\r\n    public errorText: string = 'Error';   \r\n}\r\n\r\nexport class ErrorParams {\r\n    public ok: string = 'OK';\r\n    public cancel: string = 'CANCEL';\r\n    public error: string = 'ERROR';\r\n}\r\n\r\nexport class ErrorDetailsDialogController {\r\n\r\n    public $mdDialog;\r\n    public theme;\r\n    public config: ErrorStrings;\r\n\r\n    constructor(\r\n        $mdDialog,\r\n        $injector,\r\n        $rootScope, \r\n        params: ErrorParams) {\r\n        \"ngInject\";\r\n        this.config = new ErrorStrings();\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n            if (pipTranslate) {\r\n                pipTranslate.translations('en', {\r\n                    'ERROR_DETAILS': 'Error details',\r\n                    'CODE': 'Error code',\r\n                    'PATH': 'Path',\r\n                    'ERROR': 'Error',\r\n                    'METHOD': 'Method',\r\n                    'MESSAGE': 'Message',\r\n                    'DISMISS': 'Dismiss'\r\n                });\r\n                pipTranslate.translations('ru', {\r\n                    'ERROR_DETAILS': ' ',\r\n                    'CODE': ' ',\r\n                    'PATH': '',\r\n                    'ERROR': '',\r\n                    'METHOD': '',\r\n                    'MESSAGE': ''\r\n                });\r\n                this.config.ok = params.ok;\r\n                this.config.cancel = params.cancel;\r\n                this.config.errorDetails = 'ERROR_DETAILS';\r\n                this.config.dismissButton = 'DISMISS';\r\n                this.config.errorMessage = 'MESSAGE';\r\n                this.config.errorCode = 'CODE';\r\n                this.config.errorMethod = 'METHOD';\r\n                this.config.errorPath = 'PATH';\r\n                this.config.errorText = 'ERROR';                \r\n            } else {\r\n                this.config.ok = params.ok;\r\n                this.config.cancel = params.cancel;\r\n            }\r\n            this.$mdDialog = $mdDialog;\r\n            this.theme = $rootScope.$theme;\r\n            this.config.error = params.error;\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipErrorDetailsDialog')\r\n    .controller('pipErrorDetailsDialogController', ErrorDetailsDialogController);","\r\nclass ErrorDetailsService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    public constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public show(params, successCallback, cancelCallback) {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'error_details/ErrorDetails.html',\r\n            controller: 'pipErrorDetailsDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then(() => {\r\n            if (successCallback) {\r\n                successCallback();\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n                \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipErrorDetailsDialog')\r\n    .service('pipErrorDetailsDialog', ErrorDetailsService);","'use strict';\r\n\r\nangular\r\n    .module('pipErrorDetailsDialog', [\r\n        'ngMaterial', \r\n        'pipDialogs.Translate',\r\n        'pipDialogs.Templates']);\r\n\r\nimport './ErrorDetailsService';\r\nimport './ErrorDetailsController';\r\n","'use strict';\r\n\r\nimport IWindowService = angular.IWindowService;\r\n\r\nexport class InformationStrings {\r\n    public ok: string = 'OK';\r\n    public title: string; \r\n    public message: string;\r\n    public error: string;\r\n    public content;\r\n}\r\n\r\nexport class InformationParams {\r\n    public ok: string = 'OK';\r\n    public title: string; \r\n    public message: string;\r\n    public error: string;\r\n    public item;\r\n}\r\n\r\nexport class InformationDialogController {\r\n\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public theme: string;\r\n    public config: InformationStrings;\r\n\r\n    constructor(\r\n        $mdDialog: angular.material.IDialogService,\r\n        $injector,\r\n        $rootScope: ng.IRootScopeService, \r\n        params: InformationParams) {\r\n        \"ngInject\";\r\n        this.config = new InformationStrings();\r\n\r\n        let content = params.message, item;\r\n\r\n        let pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', { 'INFORMATION_TITLE': 'Information'});\r\n            pipTranslate.translations('ru', { 'INFORMATION_TITLE': '' });\r\n\r\n            this.config.title = params.title || 'INFORMATION_TITLE';\r\n            this.config.ok = params.ok || 'OK';\r\n            content = pipTranslate.translate(content);\r\n        } else {\r\n            this.config.title = params.title || 'Information';\r\n            this.config.ok = params.ok || 'OK';\r\n        }\r\n\r\n        let pipFormat = $injector.has('pipFormat') ? $injector.get('pipFormat') : null;\r\n\r\n        if (params.item && pipFormat) {\r\n            item = _.truncate(params.item, 25);\r\n            content = pipFormat.sprintf(content, item);\r\n            console.log('content2', content);\r\n        }\r\n        this.config.content = content;\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this.theme = $rootScope['$theme'];\r\n        this.config.error = params.error;\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipInformationDialog')\r\n    .controller('pipInformationDialogController', InformationDialogController);","export interface IInformationService {\r\n    show(params, successCallback?: () => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass InformationService implements IInformationService {\r\n    private _mdDialog: angular.material.IDialogService;\r\n    \r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n\r\n    public show(params, successCallback?: () => void, cancelCallback?: () => void) {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'information/InformationDialog.html',\r\n            controller: 'pipInformationDialogController',\r\n            controllerAs: 'vm',\r\n            locals: { params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then(function () {\r\n            if (successCallback) {\r\n                successCallback();\r\n            }\r\n        });\r\n                \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipInformationDialog')\r\n    .service('pipInformationDialog', InformationService);","'use strict';\r\n\r\nangular\r\n    .module('pipInformationDialog', [\r\n        'ngMaterial',\r\n        'pipDialogs.Translate', \r\n        'pipDialogs.Templates']);\r\n\r\nimport './InformationService';\r\nimport './InformationController';\r\n","'use strict';\r\n\r\nimport IWindowService = angular.IWindowService;\r\n\r\nexport class OptionsBigData {\r\n    public name: string;\r\n    public title: string;\r\n    public subtitle: string;\r\n}\r\n\r\nexport class OptionsBigParams {\r\n    public title: string;  \r\n    public applyButtonTitle: string;\r\n    public options: OptionsBigData[];\r\n    public selectedOption: OptionsBigData;\r\n    public deleted;\r\n    public selectedOptionName: string;\r\n    public deletedTitle: string;\r\n    public hint: string;\r\n    public noTitle: boolean = false;\r\n    public noActions: boolean = false;\r\n    public optionIndex: number = 0;\r\n}\r\n\r\nexport interface IOptionsBigDialogController {\r\n    onOk(): void;\r\n    onCancel(): void;\r\n    onKeyUp(event, index): void;\r\n    onOptionSelect(event, option);\r\n    onSelected(): void;\r\n    onSelect: Function;\r\n    config: OptionsBigParams;\r\n    theme: string;\r\n}\r\n\r\nexport class OptionsBigDialogController implements IOptionsBigDialogController {\r\n\r\n    private $mdDialog: angular.material.IDialogService;\r\n    public theme: string;\r\n    public config: OptionsBigParams;\r\n\r\n    constructor(\r\n        $mdDialog: angular.material.IDialogService,\r\n        $injector, \r\n        $rootScope: ng.IRootScopeService, \r\n        params: OptionsBigParams) {\r\n        \"ngInject\";\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this.config = new OptionsBigParams();\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', { 'OPTIONS_TITLE': 'Choose Option'});\r\n            pipTranslate.translations('ru', { 'OPTIONS_TITLE': ' '});\r\n\r\n            this.config.title = params.title || 'OPTIONS_TITLE';\r\n            this.config.applyButtonTitle = params.applyButtonTitle || 'SELECT';\r\n        } else {\r\n            this.config.title = params.title || 'Choose Option';\r\n            this.config.applyButtonTitle = params.applyButtonTitle || 'Select';\r\n        }\r\n\r\n        this.theme = $rootScope['$theme'];\r\n        this.config.options = params.options;\r\n        this.config.selectedOption = _.find(params.options, {active: true}) || new OptionsBigData();\r\n        this.config.selectedOptionName = this.config.selectedOption.name;\r\n        this.config.deleted = params.deleted;\r\n        this.config.deletedTitle = params.deletedTitle;\r\n        this.config.noActions = params.noActions || false;\r\n        this.config.noTitle = params.noTitle || false;\r\n        this.config.hint = params.hint || '';\r\n\r\n        setTimeout(this.focusInput, 500);\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    public onOptionSelect(event, option) {\r\n        event.stopPropagation();\r\n        this.config.selectedOptionName = option.name;\r\n\r\n        if (this.config.noActions) {\r\n            this.onSelect();\r\n        }\r\n    }\r\n\r\n    public onSelected() {\r\n        this.config.selectedOptionName = this.config.options[this.config.optionIndex].name;\r\n\r\n        if (this.config.noActions) {\r\n               this.onSelect();\r\n        }\r\n    }\r\n\r\n    public onKeyUp(event, index) {\r\n        if (event.keyCode === 32 || event.keyCode === 13) {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            if (index !== undefined && index > -1 && index < this.config.options.length) {\r\n                this.config.selectedOptionName = this.config.options[index].name;\r\n                this.onSelect();\r\n            }\r\n        }\r\n    }\r\n    \r\n    public onSelect = function () {\r\n        let option;\r\n        option = _.find(this.config.options, {name: this.config.selectedOptionName}) || new OptionsBigData();\r\n        this.$mdDialog.hide({option: option, deleted: this.config.deleted});\r\n    };\r\n\r\n\r\n    private focusInput() {\r\n        let list;\r\n        list = $('.pip-options-dialog .pip-list');\r\n        list.focus();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipOptionsBigDialog')\r\n    .controller('pipOptionsBigDialogController', OptionsBigDialogController);","export interface IOptionsBigService {\r\n    show(params, successCallback?: (option) => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass OptionsBigService implements IOptionsBigService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public show(params, successCallback?: (option) => void, cancelCallback?: () => void): any {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'options/OptionsBigDialog.html',\r\n            controller: 'pipOptionsBigDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then((option) => {\r\n            if (successCallback) {\r\n                successCallback(option);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipOptionsBigDialog')\r\n    .service('pipOptionsBigDialog', OptionsBigService);","'use strict';\r\n\r\nimport IWindowService = angular.IWindowService;\r\n\r\nexport class OptionsData {\r\n    public icon: string = 'star';\r\n    public name: string;\r\n    public title: string;\r\n    public active: boolean = true; \r\n}\r\n\r\nexport class OptionsParams {\r\n    public title: string;  \r\n    public applyButtonTitle: string;\r\n    public options: OptionsData[];\r\n    public selectedOption: OptionsData;\r\n    public deleted;\r\n    public selectedOptionName: string;\r\n    public deletedTitle: string;\r\n}\r\n\r\nexport class OptionsDialogController {\r\n\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public theme: string;\r\n    public config: OptionsParams;\r\n\r\n    constructor(\r\n        $mdDialog: angular.material.IDialogService,\r\n        $injector, \r\n        $rootScope: ng.IRootScopeService, \r\n        params: OptionsParams) {\r\n        \"ngInject\";\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this.config = new OptionsParams();\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            pipTranslate.translations('en', { 'OPTIONS_TITLE': 'Choose Option'});\r\n            pipTranslate.translations('ru', { 'OPTIONS_TITLE': ' '});\r\n\r\n            this.config.title = params.title || 'OPTIONS_TITLE';\r\n            this.config.applyButtonTitle = params.applyButtonTitle || 'SELECT';\r\n        } else {\r\n            this.config.title = params.title || 'Choose Option';\r\n            this.config.applyButtonTitle = params.applyButtonTitle || 'Select';\r\n        }\r\n\r\n        this.theme = $rootScope['$theme'];\r\n        this.config.options = params.options;\r\n        this.config.selectedOption = _.find(params.options, {active: true}) || new OptionsData();\r\n        this.config.selectedOptionName = this.config.selectedOption.name;\r\n        this.config.deleted = params.deleted;\r\n        this.config.deletedTitle = params.deletedTitle;\r\n\r\n        setTimeout(this.focusInput, 500);\r\n    }\r\n\r\n    public onOk(): void {\r\n        this.$mdDialog.hide();\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n\r\n    public onOptionSelect(event, option: OptionsData) {\r\n        event.stopPropagation();\r\n        this.config.selectedOptionName = option.name;\r\n\r\n    }\r\n            \r\n    public onKeyPress (event) {\r\n        if (event.keyCode === 32 || event.keyCode === 13) {\r\n            event.stopPropagation();\r\n            event.preventDefault();\r\n            this.onSelect();\r\n        }\r\n    }\r\n\r\n    public onSelect() {\r\n        let option: OptionsData;\r\n        option = _.find(this.config.options, {name: this.config.selectedOptionName});\r\n        console.log(option);\r\n        this.$mdDialog.hide({option: option, deleted: this.config.deleted});\r\n    }\r\n\r\n    private focusInput() {\r\n        let list;\r\n        list = $('.pip-options-dialog .pip-list');\r\n        list.focus();\r\n    }\r\n\r\n}\r\n\r\nangular\r\n    .module('pipOptionsDialog')\r\n    .controller('pipOptionsDialogController', OptionsDialogController);","\r\nexport interface IOptionsService {\r\n    show(params, successCallback?: (option) => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass OptionsService implements IOptionsService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    public constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public  show(params, successCallback?: (option) => void, cancelCallback?: () => void): any {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: 'options/OptionsDialog.html',\r\n            controller: 'pipOptionsDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then((option) => {\r\n            if (successCallback) {\r\n                successCallback(option.option);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n                \r\n    }\r\n    \r\n}\r\n\r\nangular\r\n    .module('pipOptionsDialog')\r\n    .service('pipOptionsDialog', OptionsService);","'use strict';\r\n\r\nangular\r\n    .module('pipOptionsDialog', [\r\n        'ngMaterial', \r\n        'pipDialogs.Translate',\r\n        'pipDialogs.Templates']);\r\n\r\nimport './OptionsService';\r\nimport './OptionsController';\r\n\r\n\r\nangular\r\n    .module('pipOptionsBigDialog', [\r\n        'ngMaterial', \r\n        'pipDialogs.Translate',\r\n        'pipDialogs.Templates']);\r\n        \r\nimport './OptionsBigService';\r\nimport './OptionsBigController';","(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('confirmation/ConfirmationDialog.html',\n    '<md-dialog class=\"pip-dialog pip-confirmation-dialog layout-column\" width=\"400\" md-theme=\"{{::vm.theme}}\"><div class=\"pip-header\"><h3>{{:: vm.config.title}}</h3></div><div class=\"pip-footer\"><div><md-button ng-click=\"vm.onCancel()\">{{:: vm.config.cancel}}</md-button><md-button class=\"md-accent\" ng-click=\"vm.onOk()\">{{:: vm.config.ok}}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('error_details/ErrorDetails.html',\n    '<md-dialog class=\"pip-dialog pip-error-details-dialog layout-column\" width=\"400\" md-theme=\"{{vm.theme}}\"><div class=\"pip-body\"><div class=\"pip-header\"><h3>{{::vm.config.errorDetails | translate}}</h3></div><div class=\"layout-row layout-align-start-center error-section text-body2 color-secondary-text\" ng-if=\"vm.config.error.code || (vm.config.error.data && error.data.code)\">{{::vm.config.errorCode | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.code || (vm.config.error.data && vm.config.error.data.code)\">{{vm.config.error.code || vm.config.error.data.code}}</div><div class=\"layout-row layout-align-start-center error-section text-body2 color-secondary-text\" ng-if=\"vm.config.error.path || (vm.config.error.data && vm.config.error.data.path)\">{{::vm.config.errorPath | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.path || (vm.config.error.data && vm.config.error.data.path)\">{{vm.config.error.path || vm.config.error.data.path}}</div><div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\" ng-if=\"vm.config.error.error || (vm.config.error.data && vm.config.error.data.error)\">{{::vm.config.errorText | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.error || (vm.config.error.data && vm.config.error.data.error)\">{{vm.config.error.error || vm.config.error.data.error}}</div><div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\" ng-if=\"vm.config.error.method || (vm.config.error.data && vm.config.error.data.method)\">{{::vm.config.errorMethod | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.method || (vm.config.error.data && vm.config.error.data.method)\">{{vm.config.error.method || vm.config.error.data.method}}</div><div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\" ng-if=\"vm.config.error.message || (vm.config.error.data && vm.config.error.data.message)\">{{::vm.config.errorMessage | translate}}</div><div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"vm.config.error.message || (vm.config.error.data && vm.config.error.data.message)\">{{vm.config.error.message || vm.config.error.data.message}}</div></div><div class=\"pip-footer\"><div><md-button class=\"md-accent m0\" ng-click=\"vm.onOk()\">{{::vm.config.dismissButton | translate}}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('information/InformationDialog.html',\n    '<md-dialog class=\"pip-dialog pip-information-dialog layout-column\" width=\"400\" md-theme=\"{{vm.theme}}\"><div class=\"pip-header\"><h3>{{:: vm.config.title | translate }}</h3></div><div class=\"pip-body\"><div class=\"pip-content\">{{ vm.config.content }}</div></div><div class=\"pip-footer\"><div><md-button class=\"md-accent\" ng-click=\"vm.onOk()\">{{ vm.config.ok | translate }}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('options/OptionsBigDialog.html',\n    '<md-dialog class=\"pip-dialog pip-options-dialog-big layout-column\" min-width=\"400\" md-theme=\"{{vm.theme}}\"><md-dialog-content class=\"pip-body pip-scroll\" ng-class=\"{\\'bp24\\': !vm.config.noActions}\"><div class=\"pip-header\" ng-class=\"{\\'header-hint\\': vm.config.noTitle && vm.config.hint}\"><h3 class=\"m0\" ng-if=\"!vm.config.noTitle\">{{::vm.config.title | translate}}</h3><div ng-show=\"vm.config.noTitle && vm.config.hint\" class=\"dialog-hint layout-row layout-align-start-center\"><div class=\"hint-icon-container flex-fixed\"><md-icon md-svg-icon=\"icons:info-circle-outline\"></md-icon></div><div>{{::vm.config.hint | translate}}</div></div></div><div class=\"content-divider\" ng-if=\"!noTitle\"></div><div class=\"pip-content\"><div class=\"spacer8\" ng-if=\"noTitle && hint\"></div><md-list class=\"pip-menu pip-ref-list\" pip-selected=\"vm.config.optionIndex\" index=\"{{vm.config.optionIndex }}\" pip-select=\"vm.onSelected($event)\"><md-list-item class=\"pip-ref-list-item pip-selectable layout-row layout-align-start-center\" ng-class=\"{\\'selected md-focused\\' : option.name == selectedOptionName, \\'divider-bottom\\': $index != options.length - 1}\" md-ink-ripple=\"\" ng-keyup=\"vm.onKeyUp($event, $index)\" ng-repeat=\"option in vm.config.options\"><div class=\"pip-content content-stretch\" ng-click=\"vm.onOptionSelect($event, option)\"><p class=\"pip-title spacer-right\" ng-if=\"option.title\" style=\"margin-bottom: 4px !important;\">{{::option.title | translate}}</p><div class=\"pip-subtitle spacer-right\" style=\"height: inherit\" ng-if=\"option.subtitle\">{{::option.subtitle | translate}}</div><div class=\"pip-subtitle spacer-right\" style=\"height: inherit\" ng-if=\"option.text\" ng-bind-html=\"option.text | translate\"></div></div></md-list-item></md-list></div><div class=\"spacer8\" ng-if=\"vm.config.noActions\"></div></md-dialog-content><div class=\"pip-footer\" ng-if=\"!vm.config.noActions\"><div><md-button class=\"pip-cancel\" ng-click=\"vm.onCancel()\">{{::\\'CANCEL\\' | translate}}</md-button><md-button class=\"pip-submit md-accent\" ng-click=\"vm.onSelect()\" style=\"margin-right: -6px\">{{::vm.config.applyButtonTitle | translate}}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDialogs.Templates');\n} catch (e) {\n  module = angular.module('pipDialogs.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('options/OptionsDialog.html',\n    '<md-dialog class=\"pip-dialog pip-options-dialog layout-column\" min-width=\"400\" md-theme=\"{{vm.theme}}\"><md-dialog-content class=\"pip-body lp0 tp0 rp0 bp24 pip-scroll\"><div class=\"pip-header\"><h3>{{::vm.config.title | translate}}</h3><div ng-show=\"vm.config.deletedTitle\" class=\"header-option text-subhead1 divider-bottom\"><md-checkbox ng-model=\"deleted\" aria-label=\"CHECKBOX\">{{::vm.config.deletedTitle | translate}}</md-checkbox></div></div><div class=\"pip-content\"><md-radio-group ng-model=\"vm.selectedOptionName\" class=\"pip-list md-primary\" md-no-ink=\"true\" ng-keypress=\"vm.onKeyPress($event)\" tabindex=\"0\"><div ng-repeat=\"option in vm.config.options\" class=\"pip-list-item\" md-ink-ripple=\"\" ui-event=\"{ click: \\'vm.onOptionSelect($event, option)\\' }\" ng-class=\"{ selected: option.name == vm.config.selectedOptionName }\"><div class=\"pip-list-item item-padding\"><md-icon class=\"pip-option-icon\" md-svg-icon=\"icons:{{option.icon}}\" ng-if=\"option.icon\"></md-icon><div class=\"pip-option-title\">{{::option.title | translate}}</div><md-radio-button ng-value=\"option.name\" tabindex=\"-1\" aria-label=\"{{::option.title | translate}}\"></md-radio-button></div></div></md-radio-group></div></md-dialog-content><div class=\"pip-footer\"><div><md-button class=\"pip-cancel\" ng-click=\"vm.onCancel()\">{{::\\'CANCEL\\' | translate}}</md-button><md-button class=\"pip-submit md-accent\" ng-click=\"vm.onSelect()\">{{::vm.config.applyButtonTitle | translate}}</md-button></div></div></md-dialog>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-dialogs-html.min.js.map\n","'use strict';\r\n\r\nexport let ActionsChangedEvent = 'pipActionsChanged';\r\nexport let SecondaryActionsOpenEvent = 'pipSecondaryActionsOpen';\r\n\r\nexport class SimpleActionItem {\r\n    // Name to refer to the item\r\n    public name: string;\r\n    // Link visible title\r\n    public title?: string;\r\n    // Show divider instead of title\r\n    public divider?: boolean;\r\n    // Icon name from $iconProvider\r\n    public icon?: string;\r\n    // Counter badge\r\n    public count?: number;\r\n    // Access function\r\n    public access?: (action: SimpleActionItem) => boolean;\r\n    // Show on specified breakpoints\r\n    public breakpoints?: string[];\r\n    // window.location.href\r\n    public href?: string;\r\n    // $location.url\r\n    public url?: string;\r\n    // $state.go(state, stateParams)\r\n    public state?: string;\r\n    // Parameters for $state.go(state, stateParams)\r\n    public stateParams?: any;\r\n    // $rootScope.broadcast(event)\r\n    public event?: string;\r\n    // Click callback\r\n    public click?: (action: SimpleActionItem) => void;\r\n}\r\n\r\nexport class ActionItem extends SimpleActionItem {\r\n    public subActions: SimpleActionItem[];\r\n}\r\n\r\nexport class ActionsConfig {\r\n    // Primary global actions visible on the screen\r\n    public primaryGlobalActions: ActionItem[] = [];\r\n    // Primary local actions visible on the screen\r\n    public primaryLocalActions: ActionItem[] = [];\r\n\r\n    // Secondary global actions available in popup\r\n    public secondaryGlobalActions: ActionItem[] = [];\r\n    // Secondary local actions available in popup\r\n    public secondaryLocalActions: ActionItem[]= [];\r\n}\r\n\r\nexport interface IActionsService {\r\n    readonly config: ActionsConfig;\r\n\r\n    primaryGlobalActions: ActionItem[];\r\n    primaryLocalActions: ActionItem[];\r\n    secondaryGlobalActions: ActionItem[];\r\n    secondaryLocalActions: ActionItem[];    \r\n\r\n    show(primaryActions?: ActionItem[], secondaryActions?: ActionItem[]): void;\r\n    hide(): void;\r\n    updateCount(link: string, count: number): void; \r\n    clearCounts(): void;\r\n    openMenuEvent(): void;\r\n}\r\n\r\nexport interface IActionsProvider extends ng.IServiceProvider {\r\n    config: ActionsConfig;\r\n    \r\n    primaryGlobalActions: ActionItem[];\r\n    primaryLocalActions: ActionItem[];\r\n    secondaryGlobalActions: ActionItem[];\r\n    secondaryLocalActions: ActionItem[];    \r\n}\r\n\r\nclass ActionsService implements IActionsService {\r\n    private _config: ActionsConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        config: ActionsConfig,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config(): ActionsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get primaryGlobalActions(): ActionItem[] {\r\n        return this._config.primaryGlobalActions;\r\n    }\r\n\r\n    public set primaryGlobalActions(value: ActionItem[]) {\r\n        this._config.primaryGlobalActions = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get secondaryGlobalActions(): ActionItem[] {\r\n        return this._config.secondaryGlobalActions;\r\n    }\r\n\r\n    public set secondaryGlobalActions(value: ActionItem[]) {\r\n        this._config.secondaryGlobalActions = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get primaryLocalActions(): ActionItem[] {\r\n        return this._config.primaryLocalActions;\r\n    }\r\n\r\n    public set primaryLocalActions(value: ActionItem[]) {\r\n        this._config.primaryLocalActions = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get secondaryLocalActions(): ActionItem[] {\r\n        return this._config.secondaryLocalActions;\r\n    }\r\n\r\n    public set secondaryLocalActions(value: ActionItem[]) {\r\n        this._config.secondaryLocalActions = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public show(primaryActions?: ActionItem[], secondaryActions?: ActionItem[]): void {\r\n        this._config.primaryLocalActions = primaryActions || [];\r\n        this._config.secondaryLocalActions = secondaryActions || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public hide(): void {\r\n        this._config.primaryLocalActions = [];\r\n        this._config.secondaryLocalActions = [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public updateCount(action: string, count: number) {\r\n        if (action == null || !_.isNumber(count)) return;\r\n\r\n        _.each(this._config.primaryGlobalActions, (a) => {\r\n            if (a.name == action)\r\n                a.count = count;\r\n        });\r\n        _.each(this._config.primaryLocalActions, (a) => {\r\n            if (a.name == action)\r\n                a.count = count;\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public clearCounts(): void {\r\n        _.each(this._config.primaryGlobalActions, (a) => {\r\n            a.count = null;\r\n        });\r\n        _.each(this._config.primaryLocalActions, (a) => {\r\n            a.count = null;\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    private sendChangeEvent() {\r\n        this._rootScope.$emit(ActionsChangedEvent, this._config);\r\n    }\r\n\r\n    public openMenuEvent(): void {\r\n        this._rootScope.$emit(SecondaryActionsOpenEvent);\r\n    }\r\n}\r\n\r\nclass ActionsProvider implements IActionsProvider {\r\n    private _config: ActionsConfig = new ActionsConfig();\r\n    private _service: ActionsService;\r\n\r\n    public get config(): ActionsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: ActionsConfig) {\r\n        this._config = value || new ActionsConfig();\r\n    }\r\n\r\n    public get primaryGlobalActions(): ActionItem[] {\r\n        return this._config.primaryGlobalActions;\r\n    }\r\n\r\n    public set primaryGlobalActions(value: ActionItem[]) {\r\n        this._config.primaryGlobalActions = value || [];\r\n    }\r\n\r\n    public get secondaryGlobalActions(): ActionItem[] {\r\n        return this._config.secondaryGlobalActions;\r\n    }\r\n\r\n    public set secondaryGlobalActions(value: ActionItem[]) {\r\n        this._config.secondaryGlobalActions = value || [];\r\n    }\r\n\r\n    public get primaryLocalActions(): ActionItem[] {\r\n        return this._config.primaryLocalActions;\r\n    }\r\n\r\n    public set primaryLocalActions(value: ActionItem[]) {\r\n        this._config.primaryLocalActions = value || [];\r\n    }\r\n\r\n    public get secondaryLocalActions(): ActionItem[] {\r\n        return this._config.secondaryLocalActions;\r\n    }\r\n\r\n    public set secondaryLocalActions(value: ActionItem[]) {\r\n        this._config.secondaryLocalActions = value || [];\r\n    }\r\n\r\n    public $get($rootScope) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new ActionsService(this._config, $rootScope);\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipActions')\r\n    .provider('pipActions', ActionsProvider);\r\n\r\n","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction PrimaryActionsController(\r\n    $scope, $element, $attrs, $rootScope, $window, $location, $injector, pipActions) {\r\n\r\n    // Apply class and call resize\r\n    $element.addClass('pip-primary-actions');\r\n\r\n    if ($scope.localActions) \r\n        pipActions.primaryLocalActions = $scope.localActions;\r\n\r\n    if ($scope.globalActions)\r\n        pipActions.primaryGlobalActions = $scope.globalActions;\r\n\r\n    $scope.config = pipActions.config;\r\n\r\n    $rootScope.$on('pipActionsChanged', onActionsChanged);\r\n\r\n    $scope.isHidden = isHidden;\r\n    $scope.actionCount = actionCount;\r\n    $scope.clickAction = clickAction;\r\n\r\n    return;\r\n    ///////////////////////\r\n\r\n    function onActionsChanged(event, config) {\r\n        $scope.config = config;\r\n    }\r\n\r\n    function isHidden(action) {\r\n        // Todo: Check breakpoints here\r\n        return action.access && !action.access(action);\r\n    }\r\n\r\n    function actionCount(action) {\r\n        if (action.count === null || action.count <= 0) {\r\n            return '';\r\n        }\r\n        if (action.count > 99) {\r\n            return '!';\r\n        }\r\n\r\n        return action.count;\r\n    }\r\n\r\n    function calcActions(actions) {\r\n        var count = 0;\r\n\r\n        _.each(actions, function (action) {\r\n            if (!isHidden(action)) {\r\n                count++;\r\n            }\r\n        });\r\n\r\n        return count;\r\n    }\r\n\r\n    function secondaryActionsVisible() {\r\n        return calcActions($scope.config.secondaryGlobalActions) > 0 ||\r\n            calcActions($scope.config.secondaryLocalActions) > 0;\r\n    }\r\n\r\n    function secondaryDividerVisible() {\r\n        return calcActions($scope.config.secondaryGlobalActions) > 0 &&\r\n            calcActions($scope.config.secondaryLocalActions) > 0;\r\n    }\r\n\r\n    function clickAction(action, $mdOpenMenu) {\r\n        if (!action || action.divider) {\r\n            return;\r\n        }\r\n\r\n        if (action.close) {\r\n            $scope.originatorEv = null;\r\n        }\r\n\r\n        if (action.menu) {\r\n            $mdOpenMenu($scope.originatorEv);\r\n            return;\r\n        }\r\n\r\n        if (action.click) {\r\n            action.click();\r\n            return;\r\n        }\r\n\r\n        if (action.href) {\r\n            $window.location.href = action.href;\r\n            return;\r\n        }\r\n\r\n        if (action.url) {\r\n            $location.url(action.url);\r\n            return;\r\n        }\r\n\r\n        if (action.state) {\r\n            if ($injector.has('$state')) {\r\n                var $state = $injector.get('$state');\r\n                $state.go(action.state, action.stateParams);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (action.event) {\r\n            $rootScope.$broadcast(action.event);\r\n        } else {\r\n            // Otherwise raise notification\r\n            $rootScope.$broadcast('pipActionClicked', action.name);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\nfunction primaryActionsDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {\r\n            localActions: '=pipLocalActions',\r\n            globalActions: '=pipGlobalActions'\r\n        },\r\n        replace: false,\r\n        templateUrl: 'actions/PrimaryActions.html',\r\n        controller: PrimaryActionsController\r\n    };\r\n}\r\n\r\n\r\nangular\r\n    .module('pipActions')\r\n    .directive('pipPrimaryActions', primaryActionsDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction SecondaryActionsController(\r\n    $scope, $element, $attrs, $rootScope, $window, $location, $injector, pipActions, $timeout) {\r\n\r\n    // Apply class and call resize\r\n    $element.addClass('pip-secondary-actions');\r\n\r\n    if ($scope.localActions) \r\n        pipActions.secondaryLocalActions = $scope.localActions;\r\n\r\n    if ($scope.globalActions) \r\n        pipActions.secondaryGlobalActions = $scope.globalActions;\r\n\r\n    $scope.config = pipActions.config;\r\n\r\n    $rootScope.$on('pipActionsChanged', onActionsChanged);\r\n    $rootScope.$on('pipSecondaryActionsOpen', onActionsMenuOpen);\r\n\r\n    $scope.isHidden = isHidden;\r\n    $scope.actionCount = actionCount;\r\n    $scope.secondaryActionsVisible = secondaryActionsVisible;\r\n    $scope.secondaryDividerVisible = secondaryDividerVisible;\r\n\r\n    $scope.clickAction = clickAction;\r\n    $scope.getMenu = function(menuFn) {\r\n        $scope.menuFn = menuFn;\r\n    }\r\n\r\n    $scope.openMenu = openMenu;\r\n\r\n    return;\r\n    /////////////////////\r\n\r\n    function onActionsMenuOpen() {\r\n        $scope.menuFn();\r\n    }\r\n\r\n    function openMenu($mdOpenMenu, ev) {\r\n        $scope.originatorEv = ev;\r\n        $mdOpenMenu(ev);\r\n    }\r\n\r\n    function onActionsChanged(event, config) {\r\n        $scope.config = config;\r\n\r\n    }\r\n\r\n    function isHidden(action) {\r\n        return action.access && !action.access(action);\r\n    }\r\n\r\n    function actionCount(action) {\r\n        if (action.count === null || action.count <= 0) {\r\n            return '';\r\n        }\r\n        if (action.count > 99) {\r\n            return '!';\r\n        }\r\n\r\n        return action.count;\r\n    }\r\n\r\n    function calcActions(actions) {\r\n        var count = 0;\r\n\r\n        _.each(actions, function (action) {\r\n            if (!isHidden(action)) {\r\n                count++;\r\n            }\r\n        });\r\n\r\n        return count;\r\n    }\r\n\r\n    function secondaryActionsVisible() {\r\n        return calcActions($scope.config.secondaryGlobalActions) > 0 ||\r\n            calcActions($scope.config.secondaryLocalActions) > 0;\r\n    }\r\n\r\n    function secondaryDividerVisible() {\r\n        return calcActions($scope.config.secondaryGlobalActions) > 0 &&\r\n            calcActions($scope.config.secondaryLocalActions) > 0;\r\n    }\r\n\r\n    function clickAction(action, $mdOpenMenu) {\r\n        if (!action || action.divider) {\r\n            return;\r\n        }\r\n\r\n        if (action.close) {\r\n            $scope.originatorEv = null;\r\n        }\r\n\r\n        if (action.menu) {\r\n            $mdOpenMenu($scope.originatorEv);\r\n            return;\r\n        }\r\n\r\n        if (action.click) {\r\n            action.click();\r\n            return;\r\n        }\r\n\r\n        if (action.href) {\r\n            $window.location.href = action.href;\r\n            return;\r\n        }\r\n\r\n        if (action.url) {\r\n            $location.url(action.url);\r\n            return;\r\n        }\r\n\r\n        if (action.state) {\r\n            if ($injector.has('$state')) {\r\n                var $state = $injector.get('$state');\r\n                $state.go(action.state, action.stateParams);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (action.event) {\r\n            $rootScope.$broadcast(action.event);\r\n        } else {\r\n            // Otherwise raise notification\r\n            $rootScope.$broadcast('pipActionClicked', action.name);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction secondaryActionsDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {\r\n            localActions: '=pipLocalActions',\r\n            globalActions: '=pipGlobalActions'\r\n        },\r\n        replace: false,\r\n        templateUrl: 'actions/SecondaryActions.html',\r\n        controller: SecondaryActionsController\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipActions')\r\n    .directive('pipSecondaryActions', secondaryActionsDirective);\r\n\r\n})();","'use strict';\r\n\r\nangular.module('pipActions', ['ngMaterial', 'pipNav.Templates', 'ui.router']);\r\n\r\nimport './ActionsService';\r\nimport './PrimaryActionsDirective';\r\nimport './SecondaryActionsDirective';\r\n\r\nexport * from './ActionsService';","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction AppBarDirectiveController($scope, $element, $rootScope, pipAppBar) {\r\n    \"ngInject\";\r\n\r\n    // Apply class and call resize\r\n    $element.addClass('pip-appbar');\r\n    $element.addClass('color-primary-bg');\r\n    \r\n    //$scope.$emit('pipResizeWindow');\r\n\r\n    $scope.config = pipAppBar.config;\r\n\r\n    $rootScope.$on('pipAppBarChanged', onAppBarChanged);\r\n\r\n    function onAppBarChanged(event, config) {\r\n        $scope.config = config;\r\n    }\r\n}\r\n\r\nfunction appbarDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        transclude: true,\r\n        scope: true,\r\n        templateUrl: 'appbar/AppBar.html',\r\n        controller: AppBarDirectiveController\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipAppBar')\r\n    .directive('pipAppbar', appbarDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction AppBarPartDirectiveController($scope, $element, $attrs, $rootScope, pipAppBar) {\r\n    \"ngInject\";\r\n\r\n    var partName = '' + $attrs.pipAppbarPart;\r\n    var partValue = null;\r\n\r\n    // Break part apart\r\n    var pos = partName.indexOf(':');\r\n    if (pos > 0) {\r\n        partValue = partName.substr(pos + 1);\r\n        partName = partName.substr(0, pos);\r\n    }\r\n\r\n    onAppBarChanged(null, pipAppBar.config);\r\n\r\n    $rootScope.$on('pipAppBarChanged', onAppBarChanged);\r\n\r\n    function onAppBarChanged(event, config) {\r\n        var parts = config.parts || {};\r\n        var currentPartValue = parts[partName];\r\n\r\n        // Set visible variable to switch ngIf\r\n        var visible = !!(partValue ? currentPartValue == partValue : currentPartValue);\r\n\r\n        if (visible != $scope.visible)\r\n            $scope.visible = visible;\r\n    }\r\n\r\n}\r\n\r\n// Example is taken from here: http://stackoverflow.com/questions/20325480/angularjs-whats-the-best-practice-to-add-ngif-to-a-directive-programmatically\r\nfunction appbarPartDirective(ngIfDirective) {\r\n    \"ngInject\";\r\n\r\n    var ngIf = ngIfDirective[0];\r\n\r\n    return {\r\n        transclude: ngIf.transclude,\r\n        priority: ngIf.priority,\r\n        terminal: ngIf.terminal,\r\n        restrict: ngIf.restrict,\r\n        scope: true,\r\n        link: function linkFunction($scope: any, $element, $attrs: any) {\r\n            // Visualize based on visible variable in scope\r\n            $attrs.ngIf = function () {\r\n                return $scope.visible;\r\n            };\r\n            ngIf.link.apply(ngIf, arguments);\r\n        },\r\n        controller: AppBarPartDirectiveController\r\n    };\r\n}\r\n\r\nangular.module('pipAppBar')\r\n    .directive('pipAppbarPart', appbarPartDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let AppBarChangedEvent = 'pipAppBarChanged';\r\n\r\nexport class AppBarConfig {\r\n    visible: boolean;\r\n    parts: any;\r\n    classes: string[];\r\n} \r\n\r\nexport interface IAppBarService {\r\n    readonly config: AppBarConfig;\r\n    readonly classes: string[];\r\n    parts: any;\r\n\r\n    show(parts?: any, classes?: string[], shadowBreakpoints?: string[]): void;\r\n    hide(): void;\r\n \r\n    addShadow(...breakpoints: string[]): void;\r\n    removeShadow(): void;\r\n \r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n \r\n    part(part: string, value: any): void;\r\n}\r\n\r\nexport interface IAppBarProvider extends ng.IServiceProvider {\r\n    config: AppBarConfig;\r\n    parts: any;\r\n    classes: string[];\r\n\r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n\r\n    part(part: string, value: any): void;\r\n}\r\n\r\nclass AppBarService implements IAppBarService {\r\n    private _config: AppBarConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(config: AppBarConfig, $rootScope: ng.IRootScopeService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config(): AppBarConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public show(parts?: any, classes?: string[], shadowBreakpoints?: string[]): void {\r\n        this._config.visible = true;\r\n        this._config.parts = parts || this._config.parts || {};\r\n        this._config.classes = classes || this._config.classes || [];\r\n        if (shadowBreakpoints) this.setShadow(shadowBreakpoints);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public hide(): void {\r\n        this._config.visible = false;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private hideShadow(): void {\r\n        this._config.classes = _.reject(this._config.classes, (c) => c.startsWith('pip-shadow'));\r\n    }\r\n\r\n    private setShadow(breakpoints: string[]): void {\r\n        this.hideShadow();\r\n\r\n        if (breakpoints != null && breakpoints.length > 0) {\r\n            _.each(breakpoints, (bp) => {\r\n                this._config.classes.push('pip-shadow-' + bp);\r\n            });\r\n        } else {\r\n            this._config.classes.push('pip-shadow');\r\n        }\r\n    }\r\n\r\n    public addShadow(...breakpoints: string[]): void {\r\n        this.setShadow(breakpoints);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public removeShadow(): void {\r\n        this.hideShadow();\r\n        this.sendConfigEvent();\r\n    }\r\n \r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n \r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n        this._rootScope.$broadcast(AppBarChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass AppBarProvider implements IAppBarProvider {\r\n    private _config: AppBarConfig = {\r\n        visible: true,\r\n        parts: {},\r\n        classes: []\r\n    };\r\n    private _service: AppBarService;\r\n\r\n    public get config(): AppBarConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: AppBarConfig) {\r\n        this._config = value || new AppBarConfig();\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public set classes(value: string[]) {\r\n        this._config.classes = value || [];\r\n    }\r\n\r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n    }\r\n \r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new AppBarService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    }     \r\n}\r\n\r\nangular\r\n    .module('pipAppBar')\r\n    .provider('pipAppBar', AppBarProvider);\r\n","'use strict';\r\n\r\nangular\r\n    .module('pipAppBar', ['ngMaterial', 'pipNav.Templates']);\r\n\r\nimport './AppBarService';\r\nimport './AppBarDirective';\r\nimport './AppBarPartDirective';\r\n\r\nexport * from './AppBarService';\r\n","'use strict';\r\n\r\nimport { SimpleActionItem } from '../actions/ActionsService';\r\nimport { BreadcrumbItem } from './BreadcrumbService';\r\nimport { BreadcrumbConfig } from './BreadcrumbService';\r\nimport { IBreadcrumbService } from './BreadcrumbService';\r\nimport { BreadcrumbChangedEvent } from './BreadcrumbService';\r\nimport { BreadcrumbBackEvent } from './BreadcrumbService';\r\nimport { OpenSearchEvent } from '../search/SearchService'\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nclass BreadcrumbController {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _window: ng.IWindowService;\r\n    private _location: ng.ILocationService;\r\n    private _injector: ng.auto.IInjectorService;\r\n    private originatorEv: Event;\r\n    private _media: any;\r\n    \r\n    public config: BreadcrumbConfig;\r\n\r\n    public constructor(\r\n        $element: any, \r\n        $rootScope: ng.IRootScopeService,\r\n        $window: ng.IWindowService,\r\n        $state: ng.ui.IStateService,\r\n        $location: ng.ILocationService,\r\n        $injector: ng.auto.IInjectorService,\r\n        pipBreadcrumb: IBreadcrumbService,\r\n        $mdMedia: any\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._rootScope = $rootScope;\r\n        this._window = $window;\r\n        this._location = $location;\r\n        this._injector = $injector;\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-breadcrumb');\r\n\r\n        this.config = pipBreadcrumb.config;\r\n\r\n        $rootScope.$on(BreadcrumbChangedEvent, (event, config) => { this.onBreadcrumbChanged(event, config); });\r\n        $rootScope.$on(BreadcrumbBackEvent, () => { this.onBreadcrumbBack(); });\r\n\r\n        let pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n        this._media = pipMedia !== undefined ? pipMedia : $mdMedia;\r\n    }\r\n\r\n    private onBreadcrumbChanged(event, config) {\r\n        this.config = config;\r\n    }\r\n\r\n    private onBreadcrumbBack() {\r\n        let items = this.config.items;\r\n        // Go to the last breadcrumb item\r\n        if (_.isArray(items) && items.length > 0) {\r\n            let item = items[items.length - 1];\r\n            let backCallback = item.click;\r\n            if (_.isFunction(backCallback)) \r\n                backCallback(item);\r\n            else\r\n                this._window.history.back();\r\n        } else\r\n            this._window.history.back();\r\n    }\r\n\r\n    public onClick(item: BreadcrumbItem) {\r\n        if (_.isFunction(item.click))\r\n            item.click(item);\r\n    }\r\n\r\n    public openSearch() {\r\n        this._rootScope.$broadcast(OpenSearchEvent);\r\n    }\r\n    \r\n    public actionsVisible(item: BreadcrumbItem): boolean {\r\n\r\n        return angular.isArray(item.subActions) && item.subActions.length > 1;\r\n    }\r\n\r\n    public onOpenMenu($mdOpenMenu, event: Event) {\r\n        this.originatorEv = event;\r\n        $mdOpenMenu(this.originatorEv);\r\n    }\r\n\r\n    public onSubActionClick(action: SimpleActionItem): void { \r\n        if (!action || action.divider) {\r\n            return;\r\n        }\r\n\r\n        if (action.click) {\r\n            action.click(action);\r\n            return;\r\n        }\r\n\r\n        if (action.href) {\r\n            this._window.location.href = action.href;\r\n            return;\r\n        }\r\n\r\n        if (action.url) {\r\n            this._location.url(action.url);\r\n            return;\r\n        }\r\n\r\n        if (action.state) {\r\n            if (this._injector.has('$state')) {\r\n                let $state = this._injector.get('$state') as ng.ui.IStateService\r\n                $state.go(action.state, action.stateParams);\r\n            }\r\n            return;\r\n        }\r\n\r\n        if (action.event) {\r\n            this._rootScope.$broadcast(action.event);\r\n            this.originatorEv = null;\r\n        } else {\r\n            // Otherwise raise notification\r\n            this._rootScope.$broadcast('pipActionClicked', action.name);\r\n            this.originatorEv = null;\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction breadcrumbDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {},\r\n        replace: false,\r\n        templateUrl: 'breadcrumb/Breadcrumb.html',\r\n        controller: BreadcrumbController,\r\n        controllerAs: 'vm'\r\n    };\r\n}\r\n\r\n\r\nangular.module('pipBreadcrumb')\r\n    .directive('pipBreadcrumb', breadcrumbDirective);\r\n\r\n})();","'use strict';\r\n\r\nimport { SimpleActionItem } from '../actions/ActionsService';\r\nexport let BreadcrumbChangedEvent = \"pipBreadcrumbChanged\";\r\nexport let BreadcrumbBackEvent = \"pipBreadcrumbBack\";\r\n\r\nexport class BreadcrumbItem {\r\n    title: string;\r\n    click?: (item: BreadcrumbItem) => void;   \r\n    subActions?: SimpleActionItem[]; \r\n}\r\n\r\nexport class BreadcrumbConfig {\r\n    text: string;\r\n    items: BreadcrumbItem[];\r\n    criteria: string;\r\n}\r\n\r\nexport interface IBreadcrumbService {\r\n    config: BreadcrumbConfig;\r\n    text: string;\r\n    items: BreadcrumbItem[];\r\n    criteria: string;\r\n\r\n    showText(text: string, criteria?: string);\r\n    showItems(items: BreadcrumbItem[], criteria?: string);\r\n}\r\n\r\nexport interface IBreadcrumbProvider extends ng.IServiceProvider {\r\n    text: string;\r\n}\r\n\r\n\r\nclass BreadcrumbService implements IBreadcrumbService {\r\n    private _config: BreadcrumbConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        config: BreadcrumbConfig,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config() {\r\n        return this._config;\r\n    }\r\n\r\n    public get text(): string {\r\n        return this._config.text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        this._config.text = value;\r\n        this._config.items = null;\r\n\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get items(): BreadcrumbItem[] {\r\n        return this._config.items;\r\n    }\r\n\r\n    public set items(value: BreadcrumbItem[]) {\r\n        this._config.text = null;\r\n        this._config.items = value;\r\n\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get criteria(): string {\r\n        return this._config.criteria;\r\n    }\r\n\r\n    public set criteria(value: string) {\r\n        this._config.criteria = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showText(text: string, criteria?: string) {\r\n        this._config.text = text;\r\n        this._config.items = null;\r\n        this._config.criteria = criteria;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showItems(items: BreadcrumbItem[], criteria?: string) {\r\n        this._config.items = items || [];\r\n        this._config.text = null;\r\n        this._config.criteria = criteria;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public sendConfigEvent() {\r\n        this._rootScope.$broadcast(BreadcrumbChangedEvent, this._config);\r\n    }\r\n}\r\n\r\n\r\nclass BreadcrumbProvider implements IBreadcrumbProvider {\r\n    private _config: BreadcrumbConfig = { \r\n        text: null,\r\n        items: null,\r\n        criteria: null\r\n    };\r\n    private _service: BreadcrumbService;\r\n\r\n    public get text(): string {\r\n        return this._config.text;\r\n    }\r\n\r\n    public set text(value: string) {\r\n        this._config.text = value;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new BreadcrumbService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\n\r\nangular.module('pipBreadcrumb')\r\n    .provider('pipBreadcrumb', BreadcrumbProvider);\r\n","'use strict';\r\n\r\nangular.module('pipBreadcrumb', ['ngMaterial', 'pipNav.Templates', 'pipNav.Translate']);\r\n\r\nimport './BreadcrumbDirective';\r\nimport './BreadcrumbService';\r\n\r\nexport * from './BreadcrumbService';\r\n\r\n\r\n","'use strict';\r\n\r\nimport { INavIconService } from '../icon/NavIconService';\r\nimport { INavMenuService } from '../menu/NavMenuService';\r\nimport { INavHeaderService } from '../header/NavHeaderService';\r\nimport { IBreadcrumbService } from '../breadcrumb/BreadcrumbService';\r\nimport { ISearchService } from '../search/SearchService';\r\nimport { IActionsService } from '../actions/ActionsService';\r\nimport { IAppBarService } from '../appbar/AppBarService';\r\nimport { ISideNavService } from '../sidenav/SideNavService';\r\n\r\nexport interface INavService {\r\n    appbar: IAppBarService;\r\n    icon: INavIconService; \r\n    breadcrumb: IBreadcrumbService;\r\n    actions: IActionsService;\r\n    search: ISearchService;\r\n    sidenav: ISideNavService;\r\n    header: INavHeaderService;\r\n    menu: INavMenuService;   \r\n\r\n    reset(): void;\r\n}\r\n\r\nclass NavService implements INavService {\r\n\r\n    public constructor($injector) {\r\n        \"ngInject\";\r\n\r\n        this.appbar = $injector.has('pipAppBar') ? $injector.get('pipAppBar') : null;\r\n        this.icon = $injector.has('pipNavIcon') ? $injector.get('pipNavIcon') : null;\r\n        this.breadcrumb = $injector.has('pipBreadcrumb') ? $injector.get('pipBreadcrumb') : null;\r\n        this.actions = $injector.has('pipActions') ? $injector.get('pipActions') : null;\r\n        this.search = $injector.has('pipSearch') ? $injector.get('pipSearch') : null;\r\n        this.sidenav = $injector.has('pipSideNav') ? $injector.get('pipSideNav') : null;\r\n        this.header = $injector.has('pipNavHeader') ? $injector.get('pipNavHeader') : null;\r\n        this.menu = $injector.has('pipNavMenu') ? $injector.get('pipNavMenu') : null;    \r\n    }\r\n\r\n    public appbar: IAppBarService;\r\n    public icon: INavIconService;\r\n    public breadcrumb: IBreadcrumbService;\r\n    public actions: IActionsService;\r\n    public search: ISearchService;\r\n    public sidenav: ISideNavService;        \r\n    public header: INavHeaderService;\r\n    public menu: INavMenuService;    \r\n\r\n    public reset() {\r\n        // Reset appbar\r\n        if (this.appbar) \r\n            this.appbar.show();\r\n\r\n        // Reset icon\r\n        if (this.icon)\r\n            this.icon.showMenu();\r\n\r\n        // Reset breadcrumb\r\n        if (this.breadcrumb)\r\n            this.breadcrumb.showText(null);\r\n\r\n        // Reset actions\r\n        if (this.actions)\r\n            this.actions.show();\r\n\r\n        // Reset search\r\n        if (this.search)\r\n            this.search.set(null);\r\n\r\n        if (this.sidenav)\r\n            this.sidenav.show();\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipNavService', [])\r\n    .service('pipNavService', NavService);","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction translateFilter($injector) {\r\n    \"ngInject\";\r\n\r\n    let pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n    return function (key) {\r\n        return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipNav.Translate', [])\r\n    .filter('translate', translateFilter);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction DropdownDirectiveController($scope, $element, $attrs, $injector, $rootScope, $mdMedia, $timeout) {\r\n    \"ngInject\";\r\n\r\n    let pipTheme = $injector.has('pipTheme') ? $injector.get('pipTheme') : null; \r\n    let pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n    let currentTheme = 'default';\r\n\r\n    if (pipTheme)\r\n        currentTheme = pipTheme.use();\r\n    else if ($rootScope.$theme)\r\n        currentTheme = $rootScope.$theme;\r\n\r\n    $scope.class = ($attrs.class || '') + ' md-' + currentTheme + '-theme';\r\n\r\n    //pipAssert.isArray($scope.actions, 'pipDropdown: pip-actions attribute should take an array, but take ' + typeof $scope.actions);\r\n    $scope.media = pipMedia !== undefined ? pipMedia : $mdMedia;\r\n    $scope.actions = ($scope.actions && _.isArray($scope.actions)) ? $scope.actions : [];\r\n    $scope.activeIndex = $scope.activeIndex || 0;\r\n\r\n    $scope.disabled = function () {\r\n        if ($scope.ngDisabled()) {\r\n            return $scope.ngDisabled();\r\n        } else {\r\n            return false;\r\n        }\r\n    };\r\n\r\n    $scope.onSelect = function (index) {\r\n        $scope.activeIndex = index;\r\n        if ($scope.select) {\r\n            $scope.select($scope.actions[index], $scope.activeIndex);\r\n        }\r\n\r\n        if ($scope.pipChange) {\r\n            $timeout(function() {\r\n                $scope.pipChange();\r\n            });\r\n        }\r\n    };\r\n\r\n    $scope.show = function () {\r\n        if ($scope.showDropdown()) {\r\n            return $scope.showDropdown();\r\n        } else {\r\n            return true;\r\n        }\r\n    };\r\n\r\n}\r\n\r\nfunction dropdownDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {\r\n            ngDisabled: '&',\r\n            actions: '=pipActions',\r\n            showDropdown: '&pipShow',\r\n            activeIndex: '=pipActiveIndex',\r\n            select: '=pipDropdownSelect',\r\n            pipChange: '&'\r\n        },\r\n        templateUrl: 'dropdown/Dropdown.html',\r\n        controller: DropdownDirectiveController\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipDropdown', ['pipNav.Templates'])\r\n    .directive('pipDropdown', dropdownDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function NavHeaderDirectiveController($scope, $element, $rootScope, $timeout, pipNavHeader) {\r\n        \"ngInject\";\r\n\r\n        var\r\n            image = null,\r\n            imageBlock = $element.find('.pip-sticky-nav-header-user'),\r\n            $image,\r\n            currentState,\r\n            loadedDefaultImage = false;\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-sticky-nav-header');\r\n\r\n        $scope.onUserClick = onUserClick;\r\n        $scope.onImageError = onImageError;\r\n        $scope.onImageLoad = onImageLoad;\r\n\r\n        $timeout(function () {\r\n            $image = $element.find('.pip-sticky-nav-header-user-image');\r\n\r\n            if ($image[0]) {\r\n                $image[0].onload = onImageLoad;\r\n                $image[0].onerror = onImageError;\r\n            } else {\r\n                $image.onload = onImageLoad;\r\n                $image.onerror = onImageError;\r\n            }\r\n\r\n            onNavHeaderChanged(null, pipNavHeader.config);\r\n        }, 20);\r\n\r\n        $rootScope.$on('pipNavHeaderChanged', onNavHeaderChanged);\r\n        $rootScope.$on('pipSideNavStateChanged', onStateChanged);\r\n\r\n        return;\r\n\r\n        function initHeader() {\r\n            if (!pipNavHeader.config) return;\r\n\r\n            $scope.title = pipNavHeader.config.title;\r\n            $scope.subtitle = pipNavHeader.config.subtitle;\r\n            $scope.imageUrl = pipNavHeader.config.imageUrl;\r\n            $scope.imageCss = pipNavHeader.config.imageCss;\r\n        }\r\n\r\n        // When image is loaded resize/reposition it\r\n        function onImageLoad($event) {\r\n            var image = $($event.target);\r\n            setImageMarginCSS(imageBlock, image);\r\n        };\r\n\r\n        function onImageError($event) {\r\n            if (loadedDefaultImage) return;\r\n            $scope.$apply(function () {\r\n                setImage(pipNavHeader.config, true);\r\n            });\r\n        };\r\n\r\n        function onStateChanged(event, state) {\r\n            if (state === undefined) return;\r\n            currentState = state;\r\n\r\n            if (state.id == 'toggle') {\r\n                $timeout(function () {\r\n                    $scope.showHeader = currentState && currentState.id == 'toggle';\r\n                }, 400);\r\n            } else {\r\n                $scope.showHeader = false;\r\n            }\r\n        }\r\n\r\n        function setImageMarginCSS(container, image) {\r\n            var cssParams = {},\r\n                containerWidth = container.width ? container.width() : container.clientWidth,\r\n                containerHeight = container.height ? container.height() : container.clientHeight,\r\n                imageWidth = image[0].naturalWidth || image.width,\r\n                imageHeight = image[0].naturalHeight || image.height,\r\n                margin = 0;\r\n\r\n            if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n                margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n                cssParams['margin-left'] = '' + margin + 'px';\r\n                cssParams['height'] = '' + containerHeight + 'px';\r\n                cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px';\r\n                cssParams['margin-top'] = '';\r\n            } else {\r\n                margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n                cssParams['margin-top'] = '' + margin + 'px';\r\n                cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px';\r\n                cssParams['width'] = '' + containerWidth + 'px';\r\n                cssParams['margin-left'] = '';\r\n            }\r\n\r\n            image.css(cssParams);\r\n        };\r\n\r\n        function setImage(config, loadError: boolean) {\r\n            if (!config) return;\r\n\r\n            var url: string;\r\n\r\n            if (!loadError && !!config.imageUrl && !loadedDefaultImage) {\r\n                url = config.imageUrl;\r\n            } else {\r\n                loadedDefaultImage = true;\r\n                url = config.defaultImageUrl;\r\n            }\r\n\r\n            if (url && $image) {\r\n                $image.attr('src', url);\r\n            } else {\r\n                imageBlock.css('display', 'none');\r\n            }\r\n        }\r\n\r\n        function onNavHeaderChanged($event, config) {\r\n            if (!config) return;\r\n            setImage(config, false)\r\n\r\n            $scope.title = config.title;\r\n            $scope.subtitle = config.subtitle;\r\n            $scope.imageUrl = config.imageUrl;\r\n            $scope.imageCss = config.imageCss;\r\n        }\r\n\r\n        function onUserClick() {\r\n            $rootScope.$broadcast('pipNavUserClicked');\r\n        }\r\n\r\n    }\r\n\r\n    function navHeaderDirective() {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n\r\n            },\r\n            replace: false,\r\n            templateUrl: 'header/NavHeader.html',\r\n            controller: NavHeaderDirectiveController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipNavHeader')\r\n        .directive('pipNavHeader', navHeaderDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let NavHeaderChangedEvent = 'pipNavHeaderChanged';\r\n\r\nexport class NavHeaderConfig {\r\n    // Image url\r\n    public imageUrl: string;\r\n    // Image url\r\n    public defaultImageUrl: string;\r\n    // Title\r\n    public title: string;\r\n    // Subtitle\r\n    public subtitle: string;\r\n    // Handle header click event\r\n    click: () => void;\r\n    // Event name\r\n    event: string\r\n};\r\n\r\nexport interface INavHeaderService {\r\n    readonly config: NavHeaderConfig;\r\n    imageUrl: string;\r\n    title: string;\r\n    subtitle: string;\r\n    click: () => void;\r\n    event: string;\r\n\r\n    show(title: string, subtitle: string, imageUrl: string, callbackOrEvent?: any): void;\r\n    hide(): void;\r\n}\r\n\r\nexport interface INavHeaderProvider extends ng.IServiceProvider {\r\n    config: NavHeaderConfig;\r\n    defaultImageUrl: string;\r\n    imageUrl: string;\r\n    title: string;\r\n    subtitle: string;\r\n    click: () => void;\r\n    event: string;\r\n\r\n    set(title: string, subtitle: string, imageUrl: string, callbackOrEvent?: any): void;\r\n    clear(): void;\r\n}\r\n\r\nclass NavHeaderService {\r\n    private _config: NavHeaderConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(config: NavHeaderConfig, $rootScope: ng.IRootScopeService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config(): NavHeaderConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get title(): string {\r\n        return this._config.title;\r\n    }\r\n\r\n    public set title(value: string) {\r\n        this._config.title = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get subtitle(): string {\r\n        return this._config.subtitle;\r\n    }\r\n\r\n    public set subtitle(value: string) {\r\n        this._config.subtitle = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get imageUrl(): string {\r\n        return this._config.imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        this._config.imageUrl = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get click(): () => void {\r\n        return this._config.click;\r\n    }\r\n\r\n    public set click(value: () => void) {\r\n        this._config.click = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get event(): string {\r\n        return this._config.event;\r\n    }\r\n\r\n    public set event(value: string) {\r\n        this._config.event = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public show(title: string, subtitle: string, imageUrl: string, callbackOrEvent?: any): void {\r\n        this._config.title = title;\r\n        this._config.subtitle = subtitle;\r\n        this._config.imageUrl = imageUrl;\r\n\r\n        if (_.isFunction(callbackOrEvent))\r\n            this._config.click = callbackOrEvent;\r\n        else this._config.click = null;\r\n\r\n        if (_.isString(callbackOrEvent))\r\n            this._config.event = callbackOrEvent;\r\n        else this._config.event = null;\r\n\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public hide(): void {\r\n        this._config.title = null;\r\n        this._config.subtitle = null;\r\n        this._config.imageUrl = null;\r\n        this._config.click = null;\r\n        this._config.event = null;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n       this._rootScope.$emit(NavHeaderChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass NavHeaderProvider implements INavHeaderProvider {\r\n    private _config: NavHeaderConfig = new NavHeaderConfig();\r\n    private _service: NavHeaderService;\r\n\r\n    public get config(): NavHeaderConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: NavHeaderConfig) {\r\n        this._config = value || new NavHeaderConfig();\r\n    }\r\n\r\n    public get defaultImageUrl(): string {\r\n        return this._config.defaultImageUrl;\r\n    }\r\n\r\n    public set defaultImageUrl(value: string) {\r\n        this._config.defaultImageUrl = value;\r\n    }\r\n\r\n    public get title(): string {\r\n        return this._config.title;\r\n    }\r\n\r\n    public set title(value: string) {\r\n        this._config.title = value;\r\n    }\r\n\r\n    public get subtitle(): string {\r\n        return this._config.subtitle;\r\n    }\r\n\r\n    public set subtitle(value: string) {\r\n        this._config.subtitle = value;\r\n    }\r\n\r\n    public get imageUrl(): string {\r\n        return this._config.imageUrl;\r\n    }\r\n\r\n    public set imageUrl(value: string) {\r\n        this._config.imageUrl = value;\r\n    }\r\n\r\n    public get click(): () => void {\r\n        return this._config.click;\r\n    }\r\n\r\n    public set click(value: () => void) {\r\n        this._config.click = value;\r\n    }\r\n\r\n    public get event(): string {\r\n        return this._config.event;\r\n    }\r\n\r\n    public set event(value: string) {\r\n        this._config.event = value;\r\n    }\r\n\r\n    public set(title: string, subtitle: string, imageUrl: string, callbackOrEvent?: any): void {\r\n        this._config.title = title;\r\n        this._config.subtitle = subtitle;\r\n        this._config.imageUrl = imageUrl;\r\n\r\n        if (_.isFunction(callbackOrEvent))\r\n            this._config.click = callbackOrEvent;\r\n        else this._config.click = null;\r\n\r\n        if (_.isString(callbackOrEvent))\r\n            this._config.event = callbackOrEvent;\r\n        else this._config.event = null;\r\n    }\r\n\r\n    public clear(): void {\r\n        this._config.title = null;\r\n        this._config.subtitle = null;\r\n        this._config.imageUrl = null;\r\n        this._config.click = null;\r\n        this._config.event = null;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new NavHeaderService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    }\r\n     \r\n}\r\n\r\n\r\nangular\r\n    .module('pipNavHeader')\r\n    .provider('pipNavHeader', NavHeaderProvider);\r\n","'use strict';\r\n\r\nangular.module('pipNavHeader', ['ngMaterial', 'pipNav.Templates']);\r\n\r\nimport './NavHeaderService';\r\nimport './NavHeaderDirective';\r\n\r\nexport * from './NavHeaderService';","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nfunction NavIconDirectiveController($scope, $element, $attrs, $rootScope, $window, pipNavIcon) {\r\n    \"ngInject\";\r\n\r\n    // Apply class and call resize\r\n    $element.addClass('pip-nav-icon');\r\n\r\n    $scope.config = pipNavIcon.config;\r\n\r\n    $rootScope.$on('pipNavIconChanged', onNavIconChanged);\r\n\r\n    $scope.onNavIconClick = onNavIconClick;\r\n\r\n    function onNavIconChanged(event, config) {\r\n        $scope.config = config;\r\n    }\r\n\r\n    function onNavIconClick() {\r\n        var breadcrumb, backCallback;\r\n\r\n        if (_.isFunction($scope.config.click)) {\r\n            // Execute nav icon callback\r\n            $scope.config.click();\r\n        } else if ($scope.config.event) {\r\n            $rootScope.$broadcast($scope.config.event);\r\n        } else if ($scope.config.type == 'menu') {\r\n            $rootScope.$broadcast('pipOpenSideNav');\r\n        } else if ($scope.config.type == 'back') {\r\n            $window.history.back();\r\n        } else {\r\n            $rootScope.$broadcast('pipNavIconClicked');\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction navIconDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {\r\n            type: '=pipType',\r\n            imageUrl: '=pipImageUrl',\r\n            icon: '=pipIcon'\r\n        },\r\n        replace: false,\r\n        templateUrl: 'icon/NavIcon.html',\r\n        controller: NavIconDirectiveController\r\n    };\r\n}\r\n\r\n\r\nangular\r\n    .module('pipNavIcon')\r\n    .directive('pipNavIcon', navIconDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let NavIconChangedEvent = 'pipNavIconChanged';\r\n\r\nexport class NavIconConfig {\r\n    // Type of nav icon: 'back', 'menu', 'image' or 'none'\r\n    public type: string;\r\n    // Image url\r\n    public imageUrl: string;\r\n    // Icon name\r\n    public icon: string;\r\n    // Handle nav icon click event\r\n    click: () => void;\r\n    // Event name\r\n    event: string\r\n};\r\n\r\nexport interface INavIconService {\r\n    readonly config: NavIconConfig;\r\n\r\n    showMenu(callbackOrEvent?: any): void;\r\n    showIcon(icon: string, callbackOrEvent?: any): void;\r\n    showBack(callbackOrEvent?: any): void;\r\n    showImage(imageUrl: string, callbackOrEvent?: any): void;\r\n    hide(): void;\r\n}\r\n\r\nexport interface INavIconProvider extends ng.IServiceProvider {\r\n    config: NavIconConfig;\r\n\r\n    setMenu(callbackOrEvent?: any): void;\r\n    setIcon(icon: string, callbackOrEvent?: any): void;\r\n    setBack(callbackOrEvent?: any): void;\r\n    setImage(imageUrl: string, callbackOrEvent?: any): void;\r\n    clear(): void;\r\n}\r\n\r\nclass NavIconService implements INavIconService {\r\n    private _config: NavIconConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(config: NavIconConfig, $rootScope: ng.IRootScopeService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get config(): NavIconConfig {\r\n        return this._config;\r\n    }\r\n\r\n    private setCallbackOrEvent(callbackOrEvent?: any): void {\r\n        if (_.isFunction(callbackOrEvent)) {\r\n            this._config.click = callbackOrEvent;\r\n            this._config.event = null;\r\n        } else if (_.isString(callbackOrEvent)) {\r\n            this._config.click = null;\r\n            this._config.event = callbackOrEvent;\r\n        } else {\r\n            this._config.click = null;\r\n            this._config.event = null;\r\n        }\r\n    }\r\n\r\n    public showMenu(callbackOrEvent?: any): void {\r\n        this._config.type = 'menu';\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showIcon(icon: string, callbackOrEvent?: any): void {\r\n        this._config.type = 'icon';\r\n        this._config.icon = icon;\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showBack(callbackOrEvent?: any): void {\r\n        this._config.type = 'back';\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public showImage(imageUrl: string, callbackOrEvent?: any): void {\r\n        this._config.type = 'image';\r\n        this._config.imageUrl = imageUrl;\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public hide(): void {\r\n        this._config.type = 'none';\r\n        this.setCallbackOrEvent(null);\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n        this._rootScope.$broadcast(NavIconChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass NavIconProvider implements INavIconProvider {\r\n    private _config: NavIconConfig = new NavIconConfig();\r\n    private _service: NavIconService;\r\n\r\n    public get config(): NavIconConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: NavIconConfig) {\r\n        this._config = value || new NavIconConfig();\r\n    }\r\n\r\n    private setCallbackOrEvent(callbackOrEvent?: any): void {\r\n        if (_.isFunction(callbackOrEvent))\r\n            this._config.click = callbackOrEvent;\r\n        else this._config.click = null;\r\n\r\n        if (_.isString(callbackOrEvent))\r\n            this._config.event = callbackOrEvent;\r\n        else this._config.event = null;\r\n    }\r\n\r\n    public setMenu(callbackOrEvent?: any): void {\r\n        this._config.type = 'menu';\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n    }\r\n\r\n    public setIcon(icon: string, callbackOrEvent?: any): void {\r\n        this._config.type = 'icon';\r\n        this._config.icon = icon;\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n    }\r\n\r\n    public setBack(callbackOrEvent?: any): void {\r\n        this._config.type = 'back';\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n    }\r\n\r\n    public setImage(imageUrl: string, callbackOrEvent?: any): void {\r\n        this._config.type = 'image';\r\n        this._config.imageUrl = imageUrl;\r\n        this.setCallbackOrEvent(callbackOrEvent);\r\n    }\r\n\r\n    public clear(): void {\r\n        this._config.type = 'none';\r\n        this.setCallbackOrEvent(null);\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new NavIconService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    }\r\n     \r\n}\r\n\r\n\r\nangular\r\n    .module('pipNavIcon')\r\n    .provider('pipNavIcon', NavIconProvider);\r\n","'use strict';\r\n\r\nangular.module('pipNavIcon', ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates']);\r\n\r\nimport './NavIconService';\r\nimport './NavIconDirective';\r\n\r\nexport * from './NavIconService';\r\n","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nclass LanguagePickerDirectiveController {\r\n    private _translate: any;\r\n    private _timeout: ng.ITimeoutService;\r\n\r\n    public constructor(\r\n        $scope: any, \r\n        $element: any, \r\n        $attrs: any, \r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: ng.ITimeoutService,\r\n        $injector: any\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._timeout = $timeout;\r\n        this._translate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-language-picker');\r\n\r\n        this.languages = $scope.languages;\r\n\r\n        // Todo: Where is this event coming from? Why not through service or attribute?\r\n        $rootScope.$on('pipSetLanguages', this.setLanguages);\r\n    }\r\n\r\n    public languages: string[] = ['en', 'ru'];\r\n\r\n    public get language() {\r\n        return this._translate ? this._translate.language : null;\r\n    }\r\n\r\n    public setLanguages(lang) {\r\n        this.languages = lang.length > 0 ? lang : ['en', 'ru'];\r\n    }\r\n\r\n    public onLanguageClick(language) {\r\n        if (this._translate != null) {\r\n            this._timeout(() => {\r\n                this._translate.language = this.language;\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction languagePickerDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {\r\n            languages: '=languages',\r\n        },\r\n        replace: false,\r\n        templateUrl: function (element, attr) {\r\n            return 'language/LanguagePicker.html';\r\n        },\r\n        controller: LanguagePickerDirectiveController,\r\n        controllerAs: 'vm'\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipLanguagePicker', [\r\n        'ngMaterial', 'pipNav.Translate', 'pipNav.Templates'\r\n    ])\r\n    .directive('pipLanguagePicker', languagePickerDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function NavMenuDirectiveController($scope, $element, $rootScope, $window, $location, $timeout, $injector, pipSideNav, pipNavMenu) {\r\n        \"ngInject\";\r\n\r\n        var animationDuration = 450,\r\n            pipSideNavElement = $element.parent().parent();\r\n        // Apply class and call resize\r\n        $element.addClass('pip-sticky-nav-menu');\r\n\r\n        $scope.sections = $scope.sections || pipNavMenu.sections;\r\n        // $scope.showTooltip = true;\r\n        // pipNavMenu.sections = $scope.sections;\r\n        setCollapsible();\r\n        // todo set from services\r\n        $scope.defaultIcon = pipNavMenu.defaultIcon;\r\n\r\n        onStateChanged(null, pipSideNav.state);\r\n\r\n        $rootScope.$on('pipNavMenuChanged', onConfigChanged);\r\n        $rootScope.$on('pipSideNavStateChanged', onStateChanged);\r\n\r\n        $scope.itemVisible = isHidden;\r\n        $scope.clickLink = clickLink;\r\n        $scope.isSectionEmpty = isSectionEmpty;\r\n        $scope.onExpand = onExpand;\r\n        $scope.isActive = isActive;\r\n\r\n        return;\r\n\r\n        function setCollapsible() {\r\n            var collapsed;\r\n            if (angular.isFunction($scope.collapsed)) {\r\n                collapsed = $scope.collapsed();\r\n            } else {\r\n                collapsed = $scope.collapsed !== false && $scope.collapsed !== 'false';\r\n            }\r\n\r\n            $scope.isCollapsed = collapsed;\r\n        }\r\n\r\n        function onExpand() {\r\n            if (!$scope.isCollapsed) { return }\r\n\r\n            $scope.expanded = !$scope.expanded;\r\n\r\n            if ($scope.expanded) {\r\n                pipSideNavElement.removeClass('pip-sticky-nav-small');\r\n            } else {\r\n                pipSideNavElement.addClass('pip-sticky-nav-small');\r\n            }\r\n            $rootScope.$emit('pipNavExpanded', $scope.expanded);\r\n        }\r\n\r\n        function isHidden(item) {\r\n            return item && item.access && !item.access(item);\r\n        }\r\n\r\n        function isSectionEmpty(linkCollection) {\r\n            var result = true;\r\n            _.each(linkCollection, function (link) {\r\n                if (!isHidden(link))\r\n                    result = false;\r\n            });\r\n            return result;\r\n        }\r\n\r\n        function onConfigChanged(event, config) {\r\n            if (!config) return;\r\n\r\n            $scope.sections = config.sections;\r\n        }\r\n\r\n        function onStateChanged(event, state) {\r\n            // SS> You shall not set it into the menu state. Instead it shall be controlled by the state of Sidenav\r\n            //pipNavMenu.collapsed(state.expand);\r\n            if (!state) return;\r\n\r\n            $scope.isCollapsed = state.expand;\r\n            $scope.expanded = state.isExpanded;\r\n            $scope.expandedButton = state.expandedButton;\r\n\r\n            $scope.sideNavState = state;\r\n        }\r\n\r\n        function isActive(link) {\r\n            if (link.parentState) {\r\n                var $state = $injector.has('$state') ? $injector.get('$state') : null;\r\n                if ($state != null && $state.includes(link.parentState)) {\r\n                    return true;\r\n                }\r\n            } else if (link.state) {\r\n                var $state = $injector.has('$state') ? $injector.get('$state') : null;\r\n                if ($state != null && $state.includes(link.state)) {\r\n                    return true;\r\n                }\r\n            } else if (link.href) {\r\n                if (link.href.split('?')[0] === $window.location.href.split('?')[0]) {\r\n                    return true;\r\n                }\r\n            } else if (link.url) {\r\n                if (link.url.split(/[\\s/?]+/)[1] === $location.url().split(/[\\s/?]+/)[1]) {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n\r\n            return false;\r\n        }\r\n\r\n        function clickLink(event, link) {\r\n            event.stopPropagation();\r\n\r\n            if (!link) {\r\n                pipSideNav.close();\r\n                return;\r\n            }\r\n\r\n            if (link.href) {\r\n                if (link.href.split('?')[0] === $window.location.href.split('?')[0]) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                pipSideNav.close();\r\n                $timeout(function () {\r\n                    $window.location.href = link.href;\r\n                }, animationDuration);\r\n\r\n                return;\r\n            }\r\n            else if (link.url) {\r\n                if (link.url.split(/[\\s/?]+/)[1] === $location.url().split(/[\\s/?]+/)[1]) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                pipSideNav.close();\r\n                $timeout(function () {\r\n                    $location.url(link.url);\r\n                }, animationDuration);\r\n\r\n                return;\r\n            }\r\n            else if (link.state) {\r\n                var $state = $injector.has('$state') ? $injector.get('$state') : null;\r\n\r\n                if ($state != null && $state.current.name === link.state) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                pipSideNav.close();\r\n                $timeout(function () {\r\n                    if ($injector.has('$state')) {\r\n                        var $state = $injector.get('$state');\r\n                        $state.go(link.state, link.stateParams);\r\n                    }\r\n                }, animationDuration);\r\n\r\n                return;\r\n            }\r\n            else if (link.event)\r\n                $rootScope.$broadcast(link.event, link);\r\n\r\n            pipSideNav.close();\r\n        }\r\n    }\r\n\r\n    function navMenuDirective() {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                // sections: '?=pipSections',\r\n                // collapsed: '=pipCollapsed'\r\n            },\r\n            replace: false,\r\n            templateUrl: 'menu/NavMenu.html',\r\n            controller: NavMenuDirectiveController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipNavMenu')\r\n        .directive('pipNavMenu', navMenuDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let NavMenuChangedEvent = 'pipNavMenuChanged';\r\n\r\nexport class NavMenuLink {\r\n    // Name to refer to the item\r\n    public name: string;\r\n    // Link visible title\r\n    public title: string;\r\n    // Tooltip text\r\n    public tooltipText?: string;    \r\n    // Icon name from $iconProvider\r\n    public icon?: string;\r\n    // Counter badge\r\n    public count?: number;\r\n    // class for badge style\r\n    public badgeStyle?: string;\r\n    // Access function\r\n    public access?: (link: NavMenuLink) => boolean;\r\n    // window.location.href\r\n    public href?: string;\r\n    // $location.url\r\n    public url?: string;\r\n    // $state.go(state, stateParams)\r\n    public state?: string;\r\n    // Parameters for $state.go(state, stateParams)\r\n    public stateParams?: any;\r\n    // parent state or parent state for selection item \r\n    public parentState?: string;\r\n    // $rootScope.broadcast(event)\r\n    public event?: string;\r\n    // Click callback\r\n    public click?: (link: NavMenuLink) => void;\r\n}\r\n\r\nexport class NavMenuSection {\r\n    // Name to refer to the section\r\n    public name: string;\r\n    // Section visible title\r\n    public title?: string;\r\n    // Tooltip text\r\n    public tooltipText?: string;      \r\n    // Icon name from $iconProvider\r\n    public icon?: string;\r\n    // Links shown in the section\r\n    public links: NavMenuLink[];\r\n    // Access function\r\n    public access?: (section: NavMenuSection) => boolean;\r\n}\r\n\r\nexport class NavMenuConfig {\r\n    sections: NavMenuSection[];\r\n    defaultIcon: string;\r\n}\r\n\r\nexport interface INavMenuService {\r\n    sections: NavMenuSection[];\r\n    defaultIcon: string;\r\n    updateCount(link: string, count: number): void; \r\n    updateBadgeStyle(link: string, style: string): void;\r\n    clearCounts(): void;\r\n}\r\n\r\nexport interface INavMenuProvider extends ng.IServiceProvider {\r\n    sections: NavMenuSection[];\r\n    defaultIcon: string;\r\n}\r\n\r\nclass NavMenuService implements INavMenuService {\r\n    private _config: NavMenuConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        config: NavMenuConfig,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n    }\r\n\r\n    public get sections(): NavMenuSection[] {\r\n        return this._config.sections;\r\n    }\r\n\r\n    public set sections(value: NavMenuSection[]) {\r\n        this._config.sections = value || [];\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public get defaultIcon(): string {\r\n        return this._config.defaultIcon;\r\n    }\r\n\r\n    public updateBadgeStyle(link: string, style: string): void {\r\n        if (link == null || !_.isString(style)) return;\r\n\r\n        _.each(this._config.sections, (s) => {\r\n            _.each(s.links, (l) => {\r\n                if (l.name == link)\r\n                    l.badgeStyle = style;\r\n            });\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public set defaultIcon(value: string) {\r\n        this._config.defaultIcon = value;\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public updateCount(link: string, count: number): void {\r\n        if (link == null || !_.isNumber(count)) return;\r\n\r\n        _.each(this._config.sections, (s) => {\r\n            _.each(s.links, (l) => {\r\n                if (l.name == link)\r\n                    l.count = count;\r\n            });\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    public clearCounts(): void {\r\n        _.each(this._config.sections, (s) => {\r\n            _.each(s.links, (l) => {\r\n                l.count = null;\r\n            });\r\n        });\r\n\r\n        this.sendChangeEvent();\r\n    }\r\n\r\n    private sendChangeEvent() {\r\n        this._rootScope.$emit(NavMenuChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass NavMenuProvider implements INavMenuProvider {\r\n    private _config: NavMenuConfig = {\r\n        sections: [],\r\n        defaultIcon: 'icons:folder'\r\n    };\r\n    private _service: NavMenuService;\r\n\r\n    public get sections(): NavMenuSection[] {\r\n        return this._config.sections;\r\n    }\r\n\r\n    public set sections(value: NavMenuSection[]) {\r\n        this._config.sections = value || [];\r\n    }\r\n\r\n    public get defaultIcon(): string {\r\n        return this._config.defaultIcon;\r\n    }\r\n\r\n    public set defaultIcon(value: string) {\r\n        this._config.defaultIcon = value;\r\n    }\r\n\r\n    public $get($rootScope) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new NavMenuService(this._config, $rootScope);\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipNavMenu')\r\n    .provider('pipNavMenu', NavMenuProvider);\r\n","'use strict';\r\n\r\nangular.module('pipNavMenu', ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates']);\r\n\r\nimport './NavMenuService';\r\nimport './NavMenuDirective';\r\n\r\nexport * from './NavMenuService';","'use strict';\r\n\r\nimport { SearchConfig } from './SearchService';\r\nimport { ISearchService } from './SearchService';\r\nimport { SearchChangedEvent } from './SearchService';\r\nimport { SearchActivatedEvent } from './SearchService';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nclass SearchBarController {\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _element: any;\r\n\r\n    public config: SearchConfig;\r\n    public enabled: boolean = false;\r\n    public search: any = { text: '' };\r\n\r\n    public constructor (\r\n        $element, \r\n        $rootScope: ng.IRootScopeService, \r\n        pipSearch: ISearchService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._rootScope = $rootScope;\r\n        this._element = $element;\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-search-bar');\r\n\r\n        this.config = pipSearch.config;\r\n        this.stateChange();\r\n        $rootScope.$on(SearchChangedEvent, (event, config) => { \r\n            this.onSearchChanged(event, config); \r\n        });\r\n    }\r\n\r\n    private stateChange() {\r\n        if (this.enabled) {\r\n            // this._element.addClass('w-stretch');\r\n            this._element.addClass('w-stretch');\r\n            this._element.parent().addClass('pip-search-active');\r\n\r\n        } else {\r\n            // this._element.removeClass('w-stretch');\r\n            this._element.removeClass('w-stretch');\r\n            this._element.parent().removeClass('pip-search-active');\r\n        }\r\n    }\r\n\r\n    private onSearchChanged(event, config) {\r\n        this.config = config;\r\n        this.enabled = false;\r\n        this.search.text = '';\r\n        this.stateChange();\r\n    }\r\n\r\n    private focusText() {\r\n        setTimeout(() => {\r\n            let element = $('.pip-search-text');\r\n            if (element.length > 0)\r\n                element.focus();\r\n        }, 0);\r\n    }\r\n\r\n    public enable() {\r\n        this.search.text = this.config.criteria;\r\n        this.enabled = true;\r\n        this.focusText();\r\n        this.stateChange();\r\n    }\r\n\r\n    public onClick() {\r\n        let search = this.search.text;\r\n\r\n        this.search.text = '';\r\n        this.enabled = false;\r\n        this.stateChange();\r\n\r\n        if (this.config.callback)\r\n            this.config.callback(search);\r\n        else\r\n            this._rootScope.$broadcast(SearchActivatedEvent, search);\r\n    }\r\n\r\n    public clear() {\r\n        if (this.search.text) {\r\n            this.search.text = '';\r\n            this.focusText();\r\n        } else {\r\n            this.enabled = false;\r\n            this.stateChange();\r\n            this.onClick();\r\n        }\r\n    }\r\n\r\n    public onKeyDown(event: any) {\r\n        // Enter pressed\r\n        if (event.keyCode === 13)\r\n            this.onClick();\r\n        // ESC pressed\r\n        else if (event.keyCode === 27) {\r\n            this.enabled = false;\r\n            this.stateChange();\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction searchBarDirective() {\r\n    return {\r\n        restrict: 'E',\r\n        scope: {},\r\n        replace: false,\r\n        templateUrl: 'search/SearchBar.html',\r\n        controller: SearchBarController,\r\n        controllerAs: 'vm'\r\n    };\r\n}\r\n\r\nangular.module('pipSearchBar')\r\n    .directive('pipSearchBar', searchBarDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let OpenSearchEvent = 'pipOpenSearch';\r\nexport let CloseSearchEvent = 'pipCloseSearch';\r\nexport let SearchChangedEvent = 'pipSearchChanged';\r\nexport let SearchActivatedEvent = 'pipSearchActivated';\r\n\r\nexport class SearchConfig {\r\n    // Search visible\r\n    public visible: boolean;\r\n    // Search criteria\r\n    public criteria: string;\r\n    // Custom search parameters\r\n    public params: any;\r\n    // History for search autocomplete\r\n    public history: string[];\r\n    // Callback for search\r\n    callback: (criteria: string) => void;\r\n}\r\n\r\nexport interface ISearchService {\r\n    config: SearchConfig;\r\n    criteria: string;\r\n    params: any;\r\n    history: string[];\r\n    callback: (criteria: string) => void;\r\n\r\n    set(callback: (criteria: string) => void, criteria?: string, params?: any, history?: string[]): void;\r\n    clear(): void;\r\n    open(): void;\r\n    close(): void;\r\n    toggle(): void;\r\n}\r\n\r\nexport interface ISearchProvider extends ng.IServiceProvider {    \r\n}\r\n\r\n\r\nclass SearchService implements ISearchService {\r\n    private _config: SearchConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor(\r\n        config: SearchConfig,\r\n        $rootScope: ng.IRootScopeService\r\n    ) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n\r\n        $rootScope.$on(OpenSearchEvent, () => { this.open });\r\n        $rootScope.$on(CloseSearchEvent, () => { this.close });\r\n    }\r\n\r\n    public get config(): SearchConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get criteria(): string {\r\n        return this._config.criteria;\r\n    }\r\n\r\n    public set criteria(value: string) {\r\n        this._config.criteria = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get params(): any {\r\n        return this._config.params;\r\n    }\r\n\r\n    public set params(value: any) {\r\n        this._config.params = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get history(): string[] {\r\n        return this._config.history;\r\n    }\r\n\r\n    public set history(value: string[]) {\r\n        this._config.history = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get callback(): (criteria: string) => void {\r\n        return this._config.callback;\r\n    }\r\n\r\n    public set callback(value: (criteria: string) => void) {\r\n        this._config.callback = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public set(callback: (criteria: string) => void, criteria?: string, params?: any, history?: string[]): void {\r\n        this._config.callback = callback;\r\n        this._config.criteria = criteria;\r\n        this._config.params = params;\r\n        this._config.history = history;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public clear(): void {\r\n        this._config.callback = null;\r\n        this._config.criteria = null;\r\n        this._config.params = null;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public open(): void {\r\n        this._config.visible = true;\r\n        this.sendConfigEvent();                \r\n    }\r\n            \r\n    public close(): void {\r\n        this._config.visible = false;        \r\n        this.sendConfigEvent();                \r\n    }                \r\n\r\n    public toggle(): void {\r\n        this._config.visible = !this._config.visible;\r\n        this.sendConfigEvent();                \r\n    }                   \r\n\r\n    private sendConfigEvent(): void {\r\n        this._rootScope.$broadcast(SearchChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass SearchProvider implements ISearchProvider {\r\n    private _config: SearchConfig = new SearchConfig();\r\n    private _service: SearchService = null;\r\n\r\n    public $get($rootScope: ng.IRootScopeService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SearchService(this._config, $rootScope);\r\n\r\n        return this._service;\r\n    } \r\n}\r\n\r\n\r\nangular.module('pipSearchBar')\r\n    .provider('pipSearch', SearchProvider);\r\n","'use strict';\r\n\r\nangular.module('pipSearchBar', ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates']);\r\n\r\nimport './SearchService';\r\nimport './SearchBarDirective';\r\n\r\nexport * from './SearchService';","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function SideNavDirectiveController($scope, $element, $rootScope, $injector, $mdMedia, $timeout, pipSideNav) {\r\n        \"ngInject\";\r\n\r\n        // var pipMedia = $mdMedia, \r\n        var pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null,\r\n            pipSystemInfo = $injector.has('pipSystemInfo') ? $injector.get('pipSystemInfo') : null,\r\n            mainContainer = '.pip-main',\r\n            bigWidth = 320, // expanded sidenav width\r\n            middleWidth = 240,\r\n            smallWidth = 72, // shrink sidenav width\r\n            isResizing = false,\r\n            animationDuration = 600,\r\n            mediaBreakpoints;\r\n\r\n        pipMedia = pipMedia !== undefined ? pipMedia : $mdMedia;\r\n\r\n        $scope.navState = {\r\n            toggle: { // media(sm, xs)\r\n                id: 'toggle',\r\n                addClass: 'sidenav-mobile', // change size, color, selected?\r\n                showHeader: true,\r\n                isLockedOpen: false,\r\n                expandedButton: false,\r\n                isExpanded: true,\r\n                expand: true,\r\n                showIconTooltype: false\r\n            },\r\n            small: { // media(md)\r\n                id: 'small',\r\n                addClass: 'pip-sticky-nav-small sidenav-smalldesktop', // change size, color, selected?\r\n                showHeader: false,\r\n                isLockedOpen: true,\r\n                expandedButton: false,\r\n                isExpanded: false,\r\n                expand: false,\r\n                showIconTooltype: true\r\n            },\r\n            large: { // media(lg)\r\n                id: 'large',\r\n                addClass: 'sidenav-smalldesktop', // change size, color, selected?\r\n                showHeader: false,\r\n                isLockedOpen: true,\r\n                expandedButton: true,\r\n                isExpanded: true,\r\n                expand: true,\r\n                showIconTooltype: true\r\n            },\r\n            xlarge: { // media(xl)\r\n                id: 'xlarge',\r\n                addClass: 'sidenav-desktop', // change size, color, selected?\r\n                showHeader: false,\r\n                isLockedOpen: true,\r\n                expandedButton: false,\r\n                isExpanded: true,\r\n                expand: true,\r\n                showIconTooltype: false\r\n            }\r\n        };\r\n\r\n        mediaBreakpoints = setBreakpoints();\r\n\r\n        // Apply class and call resize\r\n        $element.addClass('pip-sticky-sidenav');\r\n\r\n        // check Safari\r\n        checkSafari();\r\n\r\n        if (pipSideNav.config && pipSideNav.config.type != 'popup') {\r\n            $timeout(function () {\r\n                setSideNaveState()\r\n            }, 100);\r\n\r\n            var windowResize = _.debounce(setSideNaveState, 10);\r\n            $rootScope.$on('pipMainResized', windowResize);\r\n            $rootScope.$on('pipSideNavState', onSideNavState);\r\n        } else {\r\n            isResizing = false;\r\n            $scope.sidenavState = null;\r\n            $timeout(function () {\r\n                setState('toggle');\r\n            }, 100);\r\n\r\n        }\r\n\r\n        $rootScope.$on('pipNavIconClicked', onNavIconClick);\r\n        $rootScope.$on('pipSideNavChanged', onSideNavChanged);\r\n\r\n        return;\r\n\r\n        function checkSafari() {\r\n            if (!pipSystemInfo || pipSystemInfo.browserName != 'safari') {\r\n                // $element.addClass('sidenav-animate');\r\n            }\r\n        }\r\n\r\n        //------------------------\r\n        function setBreakpoints() {\r\n            if (!pipMedia || !angular.isObject(pipMedia.breakpoints)) {\r\n                return { xs: 639, sm: 959, md: 1024, lg: 1919 };\r\n            } else {\r\n                return pipMedia.breakpoints;\r\n            }\r\n        }\r\n\r\n        function onSideNavChanged(event, config) {\r\n            var config = config || {};\r\n\r\n            if (config.visible) {\r\n                $element.css('display', 'block');\r\n            } else {\r\n                $element.css('display', 'none');\r\n            }\r\n        }\r\n\r\n        function onNavIconClick(event) {\r\n            pipSideNav.open();\r\n        }\r\n\r\n        function onSideNavState(event, state) {\r\n            if (angular.isString(state) && $scope.navState[state] !== undefined) {\r\n                setState(state);\r\n            }\r\n        }\r\n\r\n        function setSideNaveState() {\r\n            if (pipSideNav.config && pipSideNav.config.type == 'popup') { return }\r\n\r\n            if (isResizing) {\r\n                $timeout(setSideNaveState, animationDuration); // for \r\n\r\n                return;\r\n            }\r\n\r\n            let mainWidth = $(mainContainer).innerWidth();\r\n            let sideNavWidth = $('.pip-sticky-sidenav').innerWidth();\r\n            let currentWidth = sideNavWidth ? sideNavWidth + 2 : 0; // add border width\r\n\r\n            if (mainWidth + currentWidth < mediaBreakpoints.sm ) {\r\n                setState('toggle', );\r\n                return;\r\n            }            \r\n            if (mainWidth + currentWidth < mediaBreakpoints.md ) {\r\n                setState('small');\r\n                return;\r\n            }   \r\n            if (mainWidth + currentWidth < mediaBreakpoints.lg ) {\r\n                setState('large');\r\n                return;\r\n            }        \r\n            setState('xlarge');     \r\n        }\r\n\r\n        function setState(state: string) {\r\n            if (isResizing) return;\r\n            if ($scope.sidenavState && $scope.sidenavState.id == state) return;\r\n\r\n            if (state != 'toggle') {\r\n                $element.removeClass('sidenav-mobile');\r\n            }\r\n\r\n            if (state != 'small') {\r\n                $element.removeClass('pip-sticky-nav-small');\r\n            }\r\n\r\n            if (state != 'xlarge') {\r\n                $element.removeClass('sidenav-desktop');\r\n            }\r\n\r\n            if (state != 'large') {\r\n                $element.removeClass('sidenav-smalldesktop');\r\n            }\r\n\r\n            isResizing = true;\r\n            if (state == 'toggle') {\r\n                pipSideNav.close();\r\n            }\r\n            $scope.sidenavState = $scope.navState[state];\r\n            $element.addClass($scope.sidenavState.addClass);\r\n\r\n            pipSideNav.state = $scope.sidenavState;\r\n            // check sideNav State\r\n            $timeout(function () {\r\n                setSideNaveState()\r\n            }, 15);\r\n\r\n            // complete animation\r\n            $timeout(function () {\r\n                isResizing = false;\r\n            }, animationDuration); //animationDuration\r\n\r\n        }\r\n    }\r\n\r\n    function sideNavDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            transclude: true,\r\n            scope: true,\r\n            templateUrl: 'sidenav/SideNav.html',\r\n            controller: SideNavDirectiveController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipSideNav')\r\n        .directive('pipSidenav', sideNavDirective);\r\n\r\n})();","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function SideNavPartDirectiveController($scope, $element, $attrs, $rootScope, pipSideNav) {\r\n        \"ngInject\";\r\n\r\n        var partName = '' + $attrs.pipSidenavPart;\r\n        var partValue = null;\r\n\r\n        // Break part apart\r\n        var pos = partName.indexOf(':');\r\n        if (pos > 0) {\r\n            partValue = partName.substr(pos + 1);\r\n            partName = partName.substr(0, pos);\r\n        }\r\n\r\n        onSideNavChanged(null, pipSideNav.config)\r\n        $rootScope.$on('pipSideNavChanged', onSideNavChanged);\r\n\r\n        function onSideNavChanged(event, config) {\r\n            var parts = config.parts || {};\r\n            var currentPartValue = parts[partName];\r\n            var visible = !!(partValue ? currentPartValue == partValue : currentPartValue);\r\n\r\n            if (visible != $scope.visible)\r\n                $scope.visible = visible;\r\n        }\r\n\r\n    }\r\n\r\n    function sidenavPartDirective(ngIfDirective) {\r\n        \"ngInject\";\r\n\r\n        var ngIf = ngIfDirective[0];\r\n\r\n        return {\r\n            transclude: ngIf.transclude,\r\n            priority: ngIf.priority,\r\n            terminal: ngIf.terminal,\r\n            restrict: ngIf.restrict,\r\n            scope: true,\r\n            link: function linkFunction($scope: any, $element, $attrs) {\r\n                $attrs.ngIf = function () { return $scope.visible };\r\n                ngIf.link.apply(ngIf, arguments);\r\n            },\r\n            controller: SideNavPartDirectiveController\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipSideNav')\r\n        .directive('pipSidenavPart', sidenavPartDirective);\r\n\r\n})();","'use strict';\r\n\r\nexport let SideNavChangedEvent = 'pipSideNavChanged';\r\nexport let SideNavStateChangedEvent = 'pipSideNavStateChanged';\r\nexport let OpenSideNavEvent = 'pipOpenSideNav';\r\nexport let CloseSideNavEvent = 'pipCloseSideNav';\r\n\r\nexport class SideNavConfig {\r\n    parts: any;\r\n    classes: string[];\r\n    state: any;\r\n    type: string;\r\n    visible: boolean;\r\n}\r\n\r\nexport interface ISideNavService {\r\n    readonly config: SideNavConfig;\r\n    readonly classes: string[];\r\n    parts: any;\r\n    state: any;\r\n\r\n    open(): void;\r\n    close(): void;\r\n    toggle(): void;\r\n    show(): void;\r\n    hide(): void;\r\n\r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n\r\n    part(part: string, value: any): void;\r\n}\r\n\r\nexport interface ISideNavProvider extends ng.IServiceProvider {\r\n    config: SideNavConfig;\r\n    parts: any;\r\n    type: string;\r\n    visible: boolean;\r\n    classes: string[];\r\n\r\n    addClass(...classes: string[]): void;\r\n    removeClass(...classes: string[]): void;\r\n\r\n    part(part: string, value: any): void;\r\n}\r\n\r\nclass SideNavService implements ISideNavService {\r\n    private _config: SideNavConfig;\r\n    private _state: any;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _sidenav: ng.material.ISidenavService;\r\n\r\n\r\n    public constructor(config: SideNavConfig, $rootScope: ng.IRootScopeService, $mdSidenav: ng.material.ISidenavService) {\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n        this._sidenav = $mdSidenav;\r\n    }\r\n\r\n    public get config(): SideNavConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public get state(): any {\r\n        return this._state;\r\n    }\r\n\r\n    public set state(value: any) {\r\n        this._state = value || {};\r\n        this._rootScope.$broadcast(SideNavStateChangedEvent, value);\r\n    }\r\n\r\n    public open() {\r\n        this._sidenav('pip-sticky-sidenav').open();\r\n    }\r\n\r\n    public close() {\r\n        this._sidenav('pip-sticky-sidenav').close();\r\n    }\r\n\r\n    public toggle() {\r\n        this._sidenav('pip-sticky-sidenav').toggle();\r\n    }\r\n\r\n    public show() {\r\n        if (!this._config.visible) {\r\n            this._config.visible = true;\r\n            this.sendConfigEvent();\r\n        }\r\n    }\r\n\r\n    public hide() {\r\n        if (this._config.visible) {\r\n            this._config.visible = false;\r\n            this.sendConfigEvent();\r\n        }\r\n    }\r\n\r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n        this.sendConfigEvent();\r\n    }\r\n\r\n    private sendConfigEvent() {\r\n        this._rootScope.$emit(SideNavChangedEvent, this._config);\r\n    }\r\n}\r\n\r\nclass SideNavProvider implements ISideNavProvider {\r\n    private _config: SideNavConfig = {\r\n        parts: {},\r\n        classes: [],\r\n        type: 'popup',\r\n        state: null,\r\n        visible: true\r\n    };\r\n\r\n    private _service: SideNavService;\r\n\r\n    public get config(): SideNavConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public set config(value: SideNavConfig) {\r\n        this._config = value || new SideNavConfig();\r\n    }\r\n\r\n    public get parts(): any {\r\n        return this._config.parts;\r\n    }\r\n\r\n    public set parts(value: any) {\r\n        this._config.parts = value || {};\r\n    }\r\n\r\n    public get type(): string {\r\n        return this._config.type;\r\n    }\r\n\r\n    public set type(value: string) {\r\n        this._config.type = value;\r\n    }\r\n\r\n    public get visible(): boolean {\r\n        return this._config.visible;\r\n    }\r\n\r\n    public set visible(value: boolean) {\r\n        this._config.visible = value;\r\n    }\r\n\r\n    public get classes(): string[] {\r\n        return this._config.classes;\r\n    }\r\n\r\n    public set classes(value: string[]) {\r\n        this._config.classes = value || [];\r\n    }\r\n\r\n    public addClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes.push(c);\r\n        });\r\n    }\r\n\r\n    public removeClass(...classes: string[]): void {\r\n        _.each(classes, (c) => {\r\n            this._config.classes = _.reject(this._config.classes, (cc) => cc == c);\r\n        });\r\n    }\r\n\r\n    public part(part: string, value: any): void {\r\n        this._config.parts[part] = value;\r\n    }\r\n\r\n    public $get($rootScope: ng.IRootScopeService, $mdSidenav: ng.material.ISidenavService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SideNavService(this._config, $rootScope, $mdSidenav);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nfunction hookSideNavEvents($rootScope: ng.IRootScopeService, pipSideNav: ISideNavService) {\r\n    $rootScope.$on(OpenSideNavEvent, () => { pipSideNav.open(); });\r\n    $rootScope.$on(CloseSideNavEvent, () => { pipSideNav.close(); });\r\n}\r\n\r\nangular\r\n    .module('pipSideNav')\r\n    .provider('pipSideNav', SideNavProvider)\r\n    .run(hookSideNavEvents);\r\n","'use strict';\r\n\r\nangular.module('pipSideNav', ['ngMaterial', 'pipNav.Templates']);\r\n\r\nimport './SideNavService';\r\nimport './SideNavPartDirective';\r\nimport './SideNavDirective';\r\n\r\nexport * from './SideNavService';","'use strict';\r\n\r\n// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\n    function TabsDirectiveController($scope, $element, $attrs, $mdMedia, $injector, $rootScope, $parse, $timeout) {\r\n        \"ngInject\";\r\n\r\n        var pipTheme = $injector.has('pipTheme') ? $injector.get('pipTheme') : null,\r\n            pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null,\r\n            pipTabIndex = $attrs.pipTabIndex ? parseInt($attrs.pipTabIndex) : 0,\r\n            currentTheme = 'default';\r\n\r\n        $scope.selected = {};\r\n\r\n        if (pipTheme)\r\n            currentTheme = pipTheme.use();\r\n        else if ($rootScope.$theme)\r\n            currentTheme = $rootScope.$theme;\r\n\r\n        $scope.class = ($attrs.class || '') + ' md-' + currentTheme + '-theme';\r\n\r\n        if (pipTranslate) {\r\n            if ($scope.tabs.length > 0 && $scope.tabs[0].title) {\r\n                pipTranslate.translateObjects($scope.tabs, 'title', 'nameLocal');\r\n            } else {\r\n                pipTranslate.translateObjects($scope.tabs, 'name', 'nameLocal');\r\n            }\r\n        }\r\n\r\n        if (pipTabIndex) {\r\n            $timeout(function () {\r\n                let a = $element.find('md-tabs-canvas');\r\n                if (a && a[0]) {\r\n                    angular.element(a[0]).attr('tabindex', pipTabIndex);\r\n                }\r\n                a.on('focusout', function () {\r\n                    angular.element(a[0]).attr('tabindex', pipTabIndex);\r\n                    $timeout(function () {\r\n                        angular.element(a[0]).attr('tabindex', pipTabIndex);\r\n                    }, 50);\r\n                });\r\n            }, 1000);\r\n        }\r\n        \r\n        $scope.media = pipMedia !== undefined ? pipMedia : $mdMedia;\r\n        $scope.tabs = ($scope.tabs && _.isArray($scope.tabs)) ? $scope.tabs : [];\r\n\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            if ($scope.tabs.length > 0 && $scope.tabs[0].title) {\r\n                pipTranslate.translateObjects($scope.tabs, 'title', 'nameLocal');\r\n            } else {\r\n                pipTranslate.translateObjects($scope.tabs, 'name', 'nameLocal');\r\n            }\r\n        }\r\n\r\n        $scope.selected.activeIndex = $scope.activeIndex || 0;\r\n        $scope.selected.activeTab = $scope.selected.activeIndex;\r\n\r\n        $scope.disabled = disabled;\r\n        $scope.tabDisabled = tabDisabled;\r\n        $scope.onSelect = onSelect;\r\n        $scope.showShadow = showShadow;\r\n        $scope.show = show;\r\n\r\n        if (toBoolean($attrs.pipRebind)) {\r\n            $scope.$watch('activeIndex', function (newValue) {\r\n                $scope.selected.activeIndex = newValue || 0;\r\n                $scope.selected.activeTab = $scope.selected.activeIndex;\r\n            });\r\n        }\r\n\r\n        return;\r\n\r\n        function disabled() {\r\n            if ($scope.ngDisabled) {\r\n                return $scope.ngDisabled();\r\n            }\r\n        };\r\n\r\n        function tabDisabled(index) {\r\n            return ($scope.disabled() && $scope.selected.activeIndex != index);\r\n        };\r\n\r\n        function onSelect(index) {\r\n            if ($scope.disabled()) return;\r\n            $scope.activeIndex = index;\r\n            $scope.selected.activeIndex = index;\r\n            $scope.selected.activeTab = $scope.selected.activeIndex;\r\n            if ($scope.select) {\r\n                $scope.select($scope.tabs[$scope.selected.activeIndex], $scope.selected.activeIndex);\r\n            }\r\n        };\r\n\r\n        function showShadow() {\r\n            if ($scope.showTabsShadow) {\r\n                return $scope.showTabsShadow();\r\n            } else {\r\n                return false;\r\n            }\r\n        };\r\n\r\n        function show() {\r\n            if ($scope.showTabs) {\r\n                return $scope.showTabs();\r\n            } else {\r\n                return true;\r\n            }\r\n        };\r\n\r\n        function toBoolean(value) {\r\n            if (value == null) return false;\r\n            if (!value) return false;\r\n            value = value.toString().toLowerCase();\r\n            return value == '1' || value == 'true';\r\n        }\r\n\r\n    }\r\n\r\n\r\n    function tabsDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                ngDisabled: '&',\r\n                tabs: '=pipTabs',\r\n                showTabs: '&pipShowTabs',\r\n                showTabsShadow: '&pipTabsShadow',\r\n                activeIndex: '=pipActiveIndex',\r\n                select: '=pipTabsSelect'\r\n            },\r\n            templateUrl: 'tabs/Tabs.html',\r\n            controller: TabsDirectiveController\r\n        };\r\n    }\r\n\r\n\r\n    angular\r\n        .module(\"pipTabs\", ['pipNav.Templates'])\r\n        .directive('pipTabs', tabsDirective);\r\n\r\n})();","(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('actions/PrimaryActions.html',\n    '<div pip-focused=\"\" pip-focused-tabindex=\"2\"><md-menu md-position-mode=\"target-right target\" class=\"pip-primary-actions\" ng-repeat=\"action in config.primaryLocalActions\"><md-button class=\"pip-primary-actions-action md-icon-button pip-focusable\" ng-click=\"clickAction(action, $mdOpenMenu);\" tabindex=\"-1\" ng-hide=\"isHidden(action)\" aria-label=\"{{action.title | translate}}\"><div class=\"pip-primary-actions-badge\" ng-show=\"action.count > 0\">{{actionCount(action)}}</div><md-icon md-svg-icon=\"{{action.icon}}\"></md-icon></md-button><md-menu-content width=\"3\"><md-menu-item ng-repeat-start=\"subAction in action.subActions\" ng-if=\"!subAction.divider\" ng-hide=\"isHidden(subAction)\"><md-button class=\"pip-focusable\" ng-hide=\"subAction.divider\" tabindex=\"-1\" ng-click=\"clickAction(subAction)\">{{::subAction.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if=\"subAction.divider\" ng-repeat-end=\"\"></md-menu-divider></md-menu-content></md-menu><md-menu md-position-mode=\"target-right target\" class=\"pip-primary-actions\" ng-repeat=\"action in config.primaryGlobalActions\"><md-button class=\"pip-primary-actions-action md-icon-button pip-focusable\" ng-click=\"clickAction(action, $mdOpenMenu);\" ng-hide=\"isHidden(action)\" tabindex=\"-1\" aria-label=\"{{action.title | translate}}\"><div class=\"pip-primary-actions-badge color-badge-bg\" ng-show=\"action.count > 0\">{{actionCount(action)}}</div><md-icon md-svg-icon=\"{{action.icon}}\"></md-icon></md-button><md-menu-content width=\"3\"><md-menu-item ng-repeat-start=\"subAction in action.subActions\" ng-if=\"!subAction.divider\" ng-hide=\"isHidden(subAction)\"><md-button class=\"pip-focusable\" ng-hide=\"subAction.divider\" tabindex=\"-1\" ng-click=\"clickAction(subAction)\">{{subAction.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if=\"subAction.divider\" ng-repeat-end=\"\"></md-menu-divider></md-menu-content></md-menu></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('actions/SecondaryActions.html',\n    '<md-menu ng-if=\"secondaryActionsVisible()\" md-position-mode=\"target-right target\"><md-button class=\"md-icon-button\" tabindex=\"3\" ng-init=\"getMenu($mdOpenMenu)\" ng-click=\"onSecondaryActionClick(); openMenu($mdOpenMenu, $event);\" aria-label=\"open actions\"><md-icon md-svg-icon=\"icons:vdots\"></md-icon></md-button><md-menu-content width=\"3\"><md-menu-item ng-repeat-start=\"action in config.secondaryLocalActions\" ng-if=\"!action.divider\" ng-hide=\"isHidden(action)\"><md-button ng-hide=\"action.divider\" ng-click=\"clickAction(action)\">{{::action.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if=\"action.divider\" ng-repeat-end=\"\"></md-menu-divider><md-menu-divider ng-if=\"secondaryDividerVisible()\"></md-menu-divider><md-menu-item ng-repeat-start=\"action in config.secondaryGlobalActions\" ng-if=\"!action.divider\" ng-hide=\"isHidden(action)\"><md-button ng-hide=\"action.divider\" ng-click=\"clickAction(action)\">{{::action.title | translate}}</md-button></md-menu-item><md-menu-divider ng-if=\"action.divider\" ng-repeat-end=\"\"></md-menu-divider></md-menu-content></md-menu>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('appbar/AppBar.html',\n    '<md-toolbar class=\"{{ config.classes.join(\\' \\') }}\" ng-if=\"config.visible\" ng-transclude=\"\"></md-toolbar>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('breadcrumb/Breadcrumb.html',\n    '<div class=\"pip-breadcrumb-block\"><div class=\"text-overflow\" ng-if=\"!vm._media(\\'xs\\')\"><span ng-if=\"vm.config.criteria\" ng-click=\"vm.openSearch()\">{{vm.config.criteria}} -</span><span class=\"pip-breadcrumb-item {{$last ? \\'breadcrumb-accent\\' : \\'\\'}}\" ng-if=\"vm.config.items && vm.config.items.length > 0\" ng-repeat-start=\"item in vm.config.items\" ng-click=\"vm.onClick(item)\" ng-init=\"stepWidth = 100/(vm.config.items.length + 1)\" ng-class=\"{\\'cursor-pointer\\': !$last}\" ng-style=\"{\\'max-width\\': stepWidth + \\'%\\'}\"><span ng-if=\"!$last || !vm.actionsVisible(item)\">{{item.title | translate}}</span><div ng-if=\"$last && vm.actionsVisible(item)\" style=\"display: inline-block; position: relative;\"><md-menu md-offset=\"0 44\"><span class=\"layout-row pip-breadcrumb-item-menu cursor-pointer {{$last ? \\'breadcrumb-accent\\' : \\'\\'}}\" ng-click=\"vm.onOpenMenu($mdOpenMenu, $event)\" md-ink-ripple=\"\" aria-label=\"open breadcrumb actions\">{{item.title | translate}}<md-icon class=\"pip-triangle-down\" md-svg-icon=\"icons:triangle-down\"></md-icon></span><md-menu-content width=\"4\"><md-menu-item ng-if=\"!subItem.divider\" ng-repeat-start=\"subItem in item.subActions\"><md-button ng-click=\"vm.onSubActionClick(subItem)\" ng-if=\"!action.divider\" tabindex=\"4\"><md-icon md-menu-align-target=\"\" ng-if=\"subItem.icon\" md-svg-icon=\"{{subItem.icon}}\"></md-icon><span>{{subItem.title | translate}}</span></md-button></md-menu-item><md-menu-divider ng-if=\"subItem.divider\" ng-repeat-end=\"\"></md-menu-divider></md-menu-content></md-menu></div></span><md-icon ng-repeat-end=\"\" md-svg-icon=\"icons:chevron-right\" ng-hide=\"$last\"></md-icon><span class=\"pip-title breadcrumb-accent\" ng-if=\"vm.config.text\">{{vm.config.text | translate}}</span></div><div style=\"position: relative;\" ng-if=\"vm._media(\\'xs\\')\"><md-menu md-offset=\"0 44\"><span class=\"pip-mobile-breadcrumb layout-row\" ng-click=\"vm.config.items && vm.config.items.length > 1 ? $mdOpenMenu() : return\"><span class=\"text-overflow\"><span ng-if=\"vm.config.criteria\" ng-click=\"vm.openSearch()\">{{vm.config.criteria}} -</span> <span class=\"breadcrumb-accent\" ng-if=\"vm.config.text\">{{vm.config.text | translate}}</span> <span ng-if=\"vm.config.items && vm.config.items.length > 0\" class=\"breadcrumb-accent {{(vm.config.items && vm.config.items.length > 1) ? \\'cursor-pointer\\' : \\'\\' }}\">{{vm.config.items[vm.config.items.length - 1].title | translate}}</span></span><md-icon class=\"pip-triangle-down cursor-pointer breadcrumb-accent\" md-svg-icon=\"icons:triangle-down\" ng-if=\"vm.config.items && vm.config.items.length > 1\"></md-icon></span><md-menu-content width=\"4\"><md-menu-item ng-repeat=\"item in vm.config.items\" ng-if=\"vm.config.items && vm.config.items.length > 0\"><md-button ng-click=\"vm.onClick(item)\" tabindex=\"5\"><md-icon md-menu-align-target=\"\" ng-if=\"item.icon\" md-svg-icon=\"{{item.icon}}\"></md-icon><span>{{item.title | translate}}</span></md-button></md-menu-item><md-menu-item ng-if=\"vm.config.text\"><md-button tabindex=\"5\"><span class=\"text-grey\">{{vm.config.text | translate}}</span></md-button></md-menu-item></md-menu-content></md-menu></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dropdown/Dropdown.html',\n    '<md-toolbar class=\"md-subhead color-primary-bg {{class}}\" ng-if=\"show()\" ng-class=\"{\\'md-whiteframe-3dp\\': media(\\'xs\\')}\"><div class=\"pip-divider\"></div><md-select ng-model=\"selectedIndex\" tabindex=\"15\" ng-disabled=\"disabled()\" md-container-class=\"pip-full-width-dropdown\" aria-label=\"DROPDOWN\" md-ink-ripple=\"\" md-on-close=\"onSelect(selectedIndex)\"><md-option ng-repeat=\"action in actions\" value=\"{{ ::$index }}\" ng-selected=\"activeIndex == $index ? true : false\">{{ (action.title || action.name || action) | translate }}</md-option></md-select></md-toolbar>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('header/NavHeader.html',\n    '<md-toolbar ng-show=\"showHeader\" class=\"layout-row layout-align-start-center\"><div class=\"flex-fixed pip-sticky-nav-header-user\"><md-button class=\"md-icon-button\" ng-click=\"onUserClick()\" aria-label=\"current user\" tabindex=\"-1\"><img src=\"\" class=\"pip-sticky-nav-header-user-image\" ng-class=\"imageCss\"></md-button></div><div class=\"pip-sticky-nav-header-user-text\"><div class=\"pip-sticky-nav-header-user-pri\" ng-click=\"onUserClick()\" tabindex=\"-1\">{{ title | translate }}</div><div class=\"pip-sticky-nav-header-user-sec\">{{ subtitle | translate }}</div></div></md-toolbar>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('icon/NavIcon.html',\n    '<md-button class=\"md-icon-button pip-nav-icon\" ng-if=\"config.type != \\'none\\'\" ng-class=\"config.class\" ng-click=\"onNavIconClick()\" tabindex=\"{{config.type==\\'menu\\' || config.type==\\'back\\' ? 4 : -1 }}\" aria-label=\"menu\"><md-icon ng-if=\"config.type==\\'menu\\'\" md-svg-icon=\"icons:menu\"></md-icon><img ng-src=\"{{config.imageUrl}}\" ng-if=\"config.type==\\'image\\'\" height=\"24\" width=\"24\"><md-icon ng-if=\"config.type==\\'back\\'\" md-svg-icon=\"icons:arrow-left\"></md-icon><md-icon ng-if=\"config.type==\\'icon\\'\" md-svg-icon=\"{{config.icon}}\"></md-icon></md-button>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('language/LanguagePicker.html',\n    '<md-menu md-position-mode=\"target-right target\"><span class=\"pip-language\" ng-click=\"$mdOpenMenu()\" aria-label=\"language selection\">{{vm.language | translate}}<md-icon md-svg-icon=\"icons:triangle-down\"></md-icon></span><md-menu-content width=\"3\"><md-menu-item ng-repeat=\"language in vm.languages\"><md-button ng-click=\"vm.onLanguageClick(lang)\" tabindex=\"7\">{{language | translate}}</md-button></md-menu-item></md-menu-content></md-menu>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('menu/NavMenu.html',\n    '<div ng-if=\"sections && sections.length\"><md-list class=\"sidenav-list\" pip-focused=\"\" pip-focused-tabindex=\"10\" pip-with-hidden=\"true\"><md-list-item class=\"no-border pip-sticky-nav-menu-item pip-sticky-nav-expanded-button\" ng-click=\"onExpand()\" ng-disabled=\"!isCollapsed\" tabindex=\"-1\" ng-if=\"expandedButton\"><md-icon md-svg-icon=\"icons:chevron-left\" ng-if=\"expanded\" class=\"pip-sticky-nav-menu-icon\"></md-icon><md-icon md-svg-icon=\"icons:chevron-right\" ng-if=\"!expanded\" class=\"pip-sticky-nav-menu-icon\"></md-icon></md-list-item><md-divider ng-show=\"expandedButton\"></md-divider><div class=\"pip-section\" ng-repeat=\"section in sections\" ng-hide=\"section.access && !section.access(section)\"><md-divider ng-show=\"$index > 0 && !isSectionEmpty(section.links)\"></md-divider><md-subheader ng-show=\"section.title\" style=\"height: 48px;\"><span ng-if=\"expanded\" class=\"pip-sticky-nav-menu-title section-title\">{{::section.title | translate}}</span><md-icon md-svg-icon=\"{{section.icon}}\" ng-if=\"!sideNavState.showIconTooltype && !expanded && section.icon\" class=\"pip-sticky-nav-menu-icon section-icon\"></md-icon><md-icon md-svg-icon=\"{{section.icon}}\" ng-if=\"sideNavState.showIconTooltype && !expanded && section.icon\" class=\"pip-sticky-nav-menu-icon section-icon\"><md-tooltip md-visible=\"showTooltip\" md-direction=\"right\" class=\"sidenav-icon-tooltip\">{{::section.tooltipText || section.title | translate}}</md-tooltip></md-icon><md-icon md-svg-icon=\"{{defaultIcon}}\" ng-if=\"!sideNavState.showIconTooltype && !expanded && !section.icon\" class=\"pip-sticky-nav-menu-icon section-icon\"></md-icon><md-icon md-svg-icon=\"{{defaultIcon}}\" ng-if=\"sideNavState.showIconTooltype && !expanded && !section.icon\" class=\"pip-sticky-nav-menu-icon section-icon\"><md-tooltip md-visible=\"showTooltip\" class=\"md-secondary\">{{::section.tooltipText || section.title | translate}}</md-tooltip></md-icon></md-subheader><md-list-item class=\"no-border pip-sticky-nav-menu-item pip-focusable\" ng-repeat=\"link in section.links\" tabindex=\"-1\" ng-class=\"{\\'active\\': isActive(link)}\" ng-hide=\"link.access && !link.access(link)\"><md-button class=\"layout-row layout-align-start-center pip-button-block\" tabindex=\"-1\" ng-click=\"clickLink($event, link)\"><md-tooltip md-visible=\"showTooltip\" md-direction=\"right\">{{::link.tooltipText | translate}}</md-tooltip><div class=\"pip-sticky-nav-menu-icon-block\"><md-icon md-svg-icon=\"{{link.icon}}\" ng-if=\"!(sideNavState.showIconTooltype && !link.tooltipText && !expanded)\" ng-hide=\"!link.icon\" class=\"pip-sticky-nav-menu-icon flex-fixed\"></md-icon><md-icon md-svg-icon=\"{{link.icon}}\" ng-hide=\"!link.icon\" ng-if=\"sideNavState.showIconTooltype && !link.tooltipText && !expanded\" class=\"pip-sticky-nav-menu-icon flex-fixed\"><md-tooltip md-visible=\"showTooltip\" md-direction=\"right\" class=\"sidenav-icon-tooltip\">{{::link.tooltipText || link.title | translate}}</md-tooltip></md-icon></div><div class=\"pip-sticky-nav-menu-title\">{{::link.title | translate}}</div><div class=\"pip-sticky-nav-menu-badge {{ link.badgeStyle ? link.badgeStyle : \\'color-badge-bg\\' }} flex-fixed\" ng-if=\"link.count && link.count < 100\">{{link.count}}</div><div class=\"pip-sticky-nav-menu-badge {{ link.badgeStyle ? link.badgeStyle : \\'color-badge-bg\\' }} flex-fixed\" ng-if=\"link.count && link.count > 99\">!</div></md-button></md-list-item></div></md-list></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('search/SearchBar.html',\n    '<div class=\"md-toolbar-tools pip-search-container\" ng-if=\"vm.enabled\"><div class=\"layout-row pip-search-selected\"><md-button class=\"md-icon-button\" tabindex=\"6\" aria-label=\"start search\" ng-click=\"vm.onClick()\"><md-icon md-svg-icon=\"icons:search\"></md-icon></md-button><input class=\"pip-search-text flex\" type=\"search\" tabindex=\"6\" ng-model=\"vm.search.text\" ng-keydown=\"vm.onKeyDown($event)\"><md-button class=\"md-icon-button\" tabindex=\"6\" aria-label=\"clear search\" ng-click=\"vm.clear()\"><md-icon md-svg-icon=\"icons:cross-circle\"></md-icon></md-button></div></div><div class=\"md-toolbar-tools layout-row layout-align-end-center flex-fixed lp0 rp0\" ng-if=\"!vm.enabled\"><md-button class=\"md-icon-button\" tabindex=\"5\" aria-label=\"start search\" ng-click=\"vm.enable()\"><md-icon md-svg-icon=\"icons:search\"></md-icon></md-button></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('sidenav/SideNav.html',\n    '<md-sidenav class=\"md-sidenav-left\" md-is-locked-open=\"sidenavState.isLockedOpen\" md-component-id=\"pip-sticky-sidenav\" ng-transclude=\"\"></md-sidenav>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('tabs/Tabs.html',\n    '<md-toolbar class=\"pip-nav {{ class }}\" ng-class=\"{\\'pip-visible\\': show(), \\'pip-shadow\\': showShadow()}\"><md-tabs ng-if=\"media(\\'gt-sm\\')\" md-selected=\"selected.activeTab\" ng-class=\"{\\'disabled\\': disabled()}\" md-stretch-tabs=\"true\" md-dynamic-height=\"true\"><md-tab ng-repeat=\"tab in tabs track by $index\" ng-disabled=\"tabDisabled($index)\" md-on-select=\"onSelect($index)\"><md-tab-label>{{::tab.nameLocal }}<div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 0 && tab.newCounts <= 99\">{{ tab.newCounts }}</div><div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 99\">!</div></md-tab-label></md-tab></md-tabs><div class=\"md-subhead pip-tabs-content color-primary-bg\" ng-if=\"!media(\\'gt-sm\\')\"><div class=\"pip-divider position-top m0\"></div><md-select ng-model=\"selected.activeIndex\" ng-disabled=\"disabled()\" md-container-class=\"pip-full-width-dropdown\" aria-label=\"SELECT\" md-ink-ripple=\"\" md-on-close=\"onSelect(selected.activeIndex)\"><md-option ng-repeat=\"tab in tabs track by $index\" class=\"pip-tab-option\" value=\"{{ ::$index }}\">{{ ::tab.nameLocal }}<div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 0 && tab.newCounts <= 99\">{{ tab.newCounts }}</div><div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 99\">!</div></md-option></md-select></div></md-toolbar>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-nav-html.min.js.map\n","'use strict';\r\n\r\nfunction configureBootBarnCoolTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     'bootbarn-cool': 'Cool'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     'bootbarn-cool': ''\r\n    // });\r\n    \r\n    let coolBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(69, 90, 100, 1)'\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-cool-background', coolBackgroundPalette);\r\n\r\n    let coolPrimaryPalette = $mdThemingProvider.extendPalette('grey', {\r\n        '300': 'rgba(69, 90, 100, .54)',\r\n        '500': 'rgba(69, 90, 100, 1)',\r\n        'contrastLightColors': ['500', '300']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-cool-primary', coolPrimaryPalette);\r\n\r\n\r\n    let coolAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n        'A700': 'rgba(76, 175, 80, 1)',\r\n        'contrastLightColors': ['A700']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-cool-accent', coolAccentPalette);\r\n\r\n    $mdThemingProvider.theme('bootbarn-cool')\r\n        .primaryPalette('bootbarn-cool-primary', {\r\n            'default': '500',\r\n            'hue-1': '300'\r\n        })\r\n        .backgroundPalette('bootbarn-cool-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('bootbarn-cool-accent', {\r\n            'default': 'A700'\r\n        });\r\n\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.BootBarn.Cool', [ 'ngMaterial' ])\r\n    .config(configureBootBarnCoolTheme);\r\n","'use strict';\r\n\r\nfunction configureBootBarnMonochromeTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     'bootbarn-monochrome': 'Monochrome'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     'bootbarn-monochrome': ''\r\n    // });\r\n    \r\n    let monochromeBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(38, 50, 56, 1)'\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-monochrome-background', monochromeBackgroundPalette);\r\n\r\n    let monochromePrimaryPalette = $mdThemingProvider.extendPalette('grey', {\r\n        '300': 'rgba(38, 50, 56, .54)',\r\n        '500': 'rgba(38, 50, 56, 1)',\r\n        'contrastLightColors': ['500', '300']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-monochrome-primary', monochromePrimaryPalette);\r\n\r\n    let monochromeAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n        'A700': 'rgba(76, 175, 80, 1)',\r\n        'contrastLightColors': ['A700']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-monochrome-accent', monochromeAccentPalette);\r\n\r\n    $mdThemingProvider.theme('bootbarn-monochrome')\r\n        .primaryPalette('bootbarn-monochrome-primary', {\r\n            'default': '500',\r\n            'hue-1': '300'\r\n        })\r\n        .backgroundPalette('bootbarn-monochrome-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('bootbarn-monochrome-accent', {\r\n            'default': 'A700'\r\n        });\r\n\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.BootBarn.Monochrome', [ 'ngMaterial' ])\r\n    .config(configureBootBarnMonochromeTheme);\r\n","'use strict';\r\n\r\nfunction configureBootBarnWarmTheme($mdThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     'bootbarn-warm': 'Warm'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     'bootbarn-warm': ''\r\n    // });\r\n\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    let warmBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(177, 55, 34, 1)'\r\n        })\r\n        ;\r\n    $mdThemingProvider.definePalette('bootbarn-warm-background', warmBackgroundPalette);\r\n\r\n    let warmPrimaryPalette = $mdThemingProvider.extendPalette('brown', {\r\n        '300': 'rgba(177, 55, 34, .54)',\r\n        '500': 'rgba(177, 55, 34, 1)',\r\n        'contrastLightColors': ['500', '300']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-warm-primary', warmPrimaryPalette);\r\n\r\n\r\n    let warmAccentPalette = $mdThemingProvider.extendPalette('amber', {\r\n        'A700': 'rgba(127, 148, 92, 1)',\r\n        'contrastLightColors': ['A700']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-warm-accent', warmAccentPalette);\r\n\r\n    let warmErrorPalette = $mdThemingProvider.extendPalette('red', {\r\n        'A200': 'rgba(255, 82, 82, 1)',\r\n        'contrastLightColors': ['A200']\r\n    });\r\n    $mdThemingProvider.definePalette('bootbarn-warm-error', warmErrorPalette);\r\n\r\n    $mdThemingProvider.theme('bootbarn-warm')\r\n    .primaryPalette('bootbarn-warm-primary', {\r\n        'default': '500',\r\n        'hue-1': '300'\r\n    })\r\n    .backgroundPalette('bootbarn-warm-background', {\r\n        'default': '50',  // background\r\n        'hue-1': 'A200',  // tiles dialog\r\n        'hue-2': 'A700'   // app bar\r\n    })\r\n    .warnPalette('bootbarn-warm-error', {\r\n        'default': 'A200'\r\n    })\r\n    .accentPalette('bootbarn-warm-accent', {\r\n        'default': 'A700'\r\n    });\r\n}\r\n\r\nangular.module('pipTheme.BootBarn.Warm', [ 'ngMaterial' ])\r\n    .config(configureBootBarnWarmTheme);\r\n","'use strict';\r\n\r\nimport './BootBarnCoolTheme';\r\nimport './BootBarnWarmTheme';\r\nimport './BootBarnMonochromeTheme';\r\n\r\nangular.module('pipTheme.BootBarn', [\r\n    'ngMaterial',\r\n    'pipTheme.BootBarn.Warm',\r\n    'pipTheme.BootBarn.Cool',\r\n    'pipTheme.BootBarn.Monochrome',\r\n]);\r\n","'use strict';\r\n\r\nexport let ThemeRootVar = \"$theme\";\r\nexport let ThemeChangedEvent = \"pipThemeChanged\";    \r\nexport let ThemeResetPage = \"pipResetPage\";    \r\n\r\nexport interface IThemeService {\r\n    theme: string;\r\n    use(language: string): string;\r\n}\r\n\r\nexport interface IThemeProvider extends IThemeService, ng.IServiceProvider {\r\n    setRootVar: boolean;\r\n    persist: boolean;\r\n}\r\n\r\nclass ThemeConfig {\r\n    public theme: string;\r\n}\r\n\r\nclass ThemeService implements IThemeService {\r\n    private _config: ThemeConfig;\r\n    private _setRootVar: boolean;\r\n    private _persist: boolean;\r\n    private _rootScope: ng.IRootScopeService;\r\n    private _log: ng.ILogService;\r\n    private _window: ng.IWindowService;\r\n    private _theming: any;\r\n    private _currentTheme: string = null;\r\n\r\n    public constructor(\r\n        config: ThemeConfig,\r\n        setRootVar: boolean,\r\n        persist: boolean,\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService,\r\n        $window: ng.IWindowService,\r\n        $mdTheming: any\r\n    ) {\r\n        this._setRootVar = setRootVar;\r\n        this._persist = persist;\r\n        this._config = config;\r\n        this._rootScope = $rootScope;\r\n        this._log = $log;\r\n        this._window = $window;\r\n        this._theming = $mdTheming;\r\n\r\n        if (this._persist && this._window.localStorage && this._config.theme == \"default\")\r\n            this._config.theme = this._window.localStorage.getItem('theme') || this._config.theme;\r\n\r\n        this._log.debug(\"Set theme to \" + this._config.theme);\r\n\r\n        // Define theme for angular material \r\n        $('body').attr('md-theme', '{{' + ThemeRootVar + '}}');\r\n        this.save();\r\n    }\r\n\r\n    private save(): void {\r\n        let body = $('body');\r\n        let newTheme = this._config.theme;\r\n\r\n        // Switch material theme\r\n        // body.attr('md-theme', newTheme);\r\n\r\n        // Change custom theme\r\n        body.addClass(newTheme);\r\n        if (this._currentTheme != null && this._currentTheme != newTheme)\r\n            body.removeClass(this._currentTheme);            \r\n\r\n        this._currentTheme = newTheme;\r\n\r\n        // Set root scope variable\r\n        if (this._setRootVar)\r\n            this._rootScope[ThemeRootVar] = this._config.theme;\r\n\r\n        // Save in local storage\r\n        if (this._persist && this._window.localStorage != null)\r\n            this._window.localStorage.setItem('theme', this._config.theme);\r\n    }\r\n\r\n    public get theme(): string {\r\n        return this._config.theme;\r\n    }\r\n\r\n    public set theme(value: string) {\r\n        if (value != this._config.theme) {\r\n            if (!(value in this._theming.THEMES))\r\n                throw new Error('Theme ' + value + ' is not defined. Please, register it first with $mdThemingProvider');\r\n\r\n            this._config.theme = value;\r\n            \r\n            this._log.debug(\"Changing theme to \" + value);\r\n\r\n            this.save();                \r\n\r\n            this._rootScope.$emit(ThemeChangedEvent, value);\r\n            this._rootScope.$emit(ThemeResetPage);\r\n        }\r\n    }\r\n\r\n    public use(theme: string): string {\r\n        if (theme != null)\r\n            this.theme = theme;\r\n        return this.theme;\r\n    }\r\n\r\n}\r\n\r\nclass ThemeProvider implements IThemeProvider {\r\n    private _config: ThemeConfig = new ThemeConfig();\r\n    private _setRootVar: boolean = true;\r\n    private _persist: boolean = true;\r\n    private _service: ThemeService;\r\n    \r\n    public constructor() {\r\n        this._config.theme = \"default\";\r\n    }\r\n\r\n    public get setRootVar(): boolean {\r\n        return this._setRootVar;  \r\n    }\r\n\r\n    public set setRootVar(value: boolean) {\r\n        this._setRootVar = !!value;\r\n    }\r\n\r\n    public get persist(): boolean {\r\n        return this._persist;  \r\n    }\r\n\r\n    public set persist(value: boolean) {\r\n        this._persist = !!value;\r\n    }\r\n\r\n    public get theme(): string {\r\n        return this._config.theme;\r\n    }\r\n\r\n    public set theme(value: string) {\r\n        this._config.theme = value;\r\n    }\r\n\r\n    public use(theme: string): string {\r\n        if (theme != null)\r\n            this.theme = theme;\r\n        return this.theme;\r\n    }\r\n\r\n    public $get(\r\n        $rootScope: ng.IRootScopeService,\r\n        $log: ng.ILogService, \r\n        $window: ng.IWindowService,\r\n        $mdTheming: any\r\n    ): any {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null) \r\n            this._service = new ThemeService(this._config, this._setRootVar, this._persist, $rootScope, $log, $window, $mdTheming);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nfunction initTheme(pipTheme: IThemeService) {\r\n    pipTheme.theme;\r\n}\r\n\r\nangular\r\n    .module('pipTheme')\r\n    .provider('pipTheme', ThemeProvider)\r\n    .run(initTheme);\r\n","'use strict';\r\n\r\nangular.module('pipTheme', ['ngMaterial']);\r\n\r\nimport './ThemeService';\r\n\r\nexport * from './ThemeService';\r\n","'use strict';\r\n\r\nfunction configureDefaultAmberTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     amber: 'Amber'\r\n    // });\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     amber: ''\r\n    // });\r\n\r\n    let orangeBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(255, 152, 0, 1)'\r\n    });\r\n    $mdThemingProvider.definePalette('orange-background', orangeBackgroundPalette);\r\n\r\n    let orangePrimaryPalette = $mdThemingProvider.extendPalette('orange', {\r\n        '800': 'rgba(255, 152, 0, 1)',\r\n        '900': 'rgba(255, 152, 0, .54);'\r\n    });\r\n    $mdThemingProvider.definePalette('orange-primary', orangePrimaryPalette);\r\n\r\n    $mdThemingProvider.theme('amber')\r\n        .primaryPalette('orange-primary', {\r\n            'default': '800',\r\n            'hue-1': '900'\r\n        })\r\n        .backgroundPalette('orange-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('orange', {\r\n            'default': '900'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Amber', [ 'ngMaterial' ])\r\n    .config(configureDefaultAmberTheme);\r\n","'use strict';\r\n\r\nfunction configureDefaultBlueTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     blue: 'Blue',\r\n    // });\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     blue: ''\r\n    // });\r\n\r\n    registerBlueTheme('default');\r\n    registerBlueTheme('blue');\r\n\r\n    $mdThemingProvider.setDefaultTheme('default');\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    function registerBlueTheme(themeName) {\r\n        let bluePrimaryPalette = $mdThemingProvider.extendPalette('blue', {\r\n            'contrastDefaultColor': 'light',\r\n            'contrastDarkColors': undefined\r\n        });\r\n        $mdThemingProvider.definePalette('blue-primary', bluePrimaryPalette);\r\n\r\n        let blueBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(33, 150, 243, 1)'\r\n        });\r\n        $mdThemingProvider.definePalette('blue-background', blueBackgroundPalette);\r\n\r\n        let blueAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n            '600': 'rgba(0, 200, 83, 1)'\r\n        });\r\n        $mdThemingProvider.definePalette('blue-accent', blueAccentPalette);\r\n\r\n        $mdThemingProvider.theme(themeName)\r\n            .primaryPalette('blue-primary', {\r\n                'default': '500',\r\n                'hue-1': '300'\r\n            })\r\n            .backgroundPalette('blue-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('blue-accent', {\r\n                'default': '600'\r\n            });\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Blue', [ 'ngMaterial' ])\r\n    .config(configureDefaultBlueTheme);\r\n","'use strict';\r\n\r\nfunction configureDefaultGreenTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     green: 'Green'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     green: ''\r\n    // });\r\n\r\n    let greenBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(76, 175, 80, 1)'\r\n    });\r\n    $mdThemingProvider.definePalette('green-background', greenBackgroundPalette);\r\n\r\n    let greenPrimaryPalette = $mdThemingProvider.extendPalette('green', {\r\n        '300': '#9ed4a1',\r\n        'contrastLightColors': ['500', '300']\r\n    });\r\n    $mdThemingProvider.definePalette('green-primary', greenPrimaryPalette);\r\n\r\n\r\n    let greenAccentPalette = $mdThemingProvider.extendPalette('amber', {\r\n        'contrastLightColors': ['A700']\r\n    });\r\n    $mdThemingProvider.definePalette('green-accent', greenAccentPalette);\r\n\r\n    $mdThemingProvider.theme('green')\r\n        .primaryPalette('green-primary', {\r\n            'default': '500',\r\n            'hue-1': '300'\r\n        })\r\n        .backgroundPalette('green-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('green-accent', {\r\n            'default': 'A700'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Green', [ 'ngMaterial' ])\r\n    .config(configureDefaultGreenTheme);\r\n","'use strict';\r\n\r\nfunction configureDefaultGreyTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     grey: 'Grey'\r\n    // });\r\n    \r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     grey: ''\r\n    // });\r\n\r\n    let thirdPartyPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(255, 152, 0, 1)',\r\n        'A400': '#a9b9c0',\r\n        '500': '#607D8B',\r\n        'A700': '#90A4AE',\r\n        //'800': '',\r\n        'contrastDefaultColor': 'dark',\r\n        'contrastLightColors': ['300', '400', '500', '600', '700', '800', '900', 'A700']\r\n    });\r\n    $mdThemingProvider.definePalette('third-party', thirdPartyPalette);\r\n\r\n\r\n    $mdThemingProvider.theme('grey')\r\n        .primaryPalette('third-party', {\r\n            'default': '500',\r\n            'hue-1': 'A400'\r\n        })\r\n        .backgroundPalette('third-party', {\r\n            'default': '50',  // background\r\n            'hue-1': '500',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('third-party', {\r\n            'default': 'A700'\r\n        });\r\n    \r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Grey', [ 'ngMaterial' ])\r\n    .config(configureDefaultGreyTheme);\r\n","'use strict';\r\n\r\nfunction configureDefaultNavyTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     navy: 'Navy'\r\n    // });\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     navy: '-'\r\n    // });\r\n\r\n    let greyPalette = $mdThemingProvider.extendPalette('grey', {\r\n        '700': 'rgba(86, 97, 125, 1)',\r\n        '800': 'rgba(86, 97, 125, .54)',\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n    });\r\n    $mdThemingProvider.definePalette('grey', greyPalette);\r\n\r\n    let tealPalette = $mdThemingProvider.extendPalette('teal', {\r\n        'contrastLightColors': ['500', '600', '700', '800', '900', 'A700']\r\n    });\r\n    $mdThemingProvider.definePalette('teal', tealPalette);\r\n\r\n    $mdThemingProvider.theme('navy')\r\n        .primaryPalette('grey', {\r\n            'default': '700',\r\n            'hue-1': '800'\r\n        })\r\n        .backgroundPalette('grey', {\r\n            'default': '50',  // background\r\n            'hue-1': '700',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('teal', {\r\n            'default': 'A700'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Navy', [ 'ngMaterial' ])\r\n    .config(configureDefaultNavyTheme);\r\n","'use strict';\r\n\r\nfunction configureDefaultOrangeTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     orange: 'Orange'\r\n    // });\r\n\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     orange: ''\r\n    // });\r\n\r\n    let RedBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(255, 112, 67, 1)',\r\n        'contrastLightColors': ['600', '700', '800', '900', 'A200']\r\n    });\r\n    $mdThemingProvider.definePalette('red-background', RedBackgroundPalette);\r\n\r\n    let RedPrimaryPalette = $mdThemingProvider.extendPalette('orange', {\r\n        '800': 'rgba(255, 112, 67, 1)',\r\n        '900': 'rgba(255, 152, 67, .54)',\r\n        'A100': 'rgba(255, 171, 64, 1)',\r\n        'contrastLightColors': ['800', '900', 'A100']\r\n    });\r\n    $mdThemingProvider.definePalette('red-primary', RedPrimaryPalette);\r\n\r\n    $mdThemingProvider.theme('orange')\r\n        .primaryPalette('red-primary', {\r\n            'default': '800',\r\n            'hue-1': '900'\r\n        })\r\n        .backgroundPalette('red-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('red-primary', {\r\n            'default': 'A100'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Orange', [ 'ngMaterial' ])\r\n    .config(configureDefaultOrangeTheme);\r\n","'use strict';\r\n\r\nfunction configureDefaultPinkTheme($mdThemingProvider: ng.material.IThemingProvider) {\r\n    // pipTranslateProvider.translations('en', {\r\n    //     THEME: 'Theme',\r\n    //     pink: 'Pink'\r\n    // });\r\n    // pipTranslateProvider.translations('ru', {\r\n    //     THEME: '',\r\n    //     pink: '',\r\n\r\n    // });\r\n\r\n    let PinkBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n        'A100': 'rgba(250, 250, 250, 1)',\r\n        'A200': 'rgba(188, 86, 121, 1)',\r\n        'contrastDefaultColor': 'dark',\r\n        'contrastLightColors': ['A200', 'A700']\r\n    });\r\n    $mdThemingProvider.definePalette('pink-background', PinkBackgroundPalette);\r\n\r\n    let PinkPrimaryPalette = $mdThemingProvider.extendPalette('pink', {\r\n        '600': 'rgba(255, 128, 171, 1)',\r\n        '700': 'rgba(188, 86, 121, .54)',\r\n        '900': 'rgba(188, 86, 121, 1)',\r\n        'contrastDefaultColor': 'light'\r\n    });\r\n    $mdThemingProvider.definePalette('pink-primary', PinkPrimaryPalette);\r\n\r\n    $mdThemingProvider.theme('pink')\r\n        .primaryPalette('pink-primary', {\r\n            'default': '900',\r\n            'hue-1': '700'\r\n        })\r\n        .backgroundPalette('pink-background', {\r\n            'default': '50',  // background\r\n            'hue-1': 'A200',  // tiles dialog\r\n            'hue-2': 'A700'   // app bar\r\n        })\r\n        .warnPalette('red', {\r\n            'default': 'A200'\r\n        })\r\n        .accentPalette('pink-primary', {\r\n            'default': '600'\r\n        });\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n\r\nangular\r\n    .module('pipTheme.Pink', [ 'ngMaterial' ])\r\n    .config(configureDefaultPinkTheme);\r\n","'use strict';\r\n\r\nimport './DefaultBlueTheme';\r\nimport './DefaultPinkTheme';\r\nimport './DefaultAmberTheme';\r\nimport './DefaultOrangeTheme';\r\nimport './DefaultGreenTheme';\r\nimport './DefaultNavyTheme';\r\nimport './DefaultGreyTheme';\r\n\r\n\r\nangular\r\n    .module('pipTheme.Default', [\r\n        'ngMaterial',\r\n        'pipTheme.Blue', \r\n        'pipTheme.Pink',\r\n        'pipTheme.Amber', \r\n        'pipTheme.Orange', \r\n        'pipTheme.Green', \r\n        'pipTheme.Navy', \r\n        'pipTheme.Grey'\r\n    ])\r\n    .config(configureDefaultTheme);\r\n\r\nfunction configureDefaultTheme($mdThemingProvider) {\r\n    $mdThemingProvider.setDefaultTheme('default');\r\n    $mdThemingProvider.alwaysWatchTheme(true);\r\n}\r\n","/**\r\n * @file Errors string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Strings', ['pipTranslate']);\r\n\r\n    thisModule.run(function($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate == null) return;\r\n\r\n        // Set translation strings for the module\r\n        pipTranslate.translations('en', {\r\n            'ERROR_ROUTE_TITLE': 'Sorry, the page isn\\'t available',\r\n            'ERROR_ROUTE_SUBTITLE': 'The link you followed may be broken, or the page may have been removed.',\r\n            'ERROR_ROUTE_CONTINUE': 'Continue',\r\n            'ERROR_ROUTE_TRY_AGAIN': 'Try again',\r\n            'ERROR_ROUTE_GO_BACK': 'Go Back',\r\n            'ERROR_ROUTE_PAGE_TITLE': 'Wrong page',\r\n\r\n            'ERROR_UNKNOWN_TITLE': 'Oops. Something went wrong',\r\n            'ERROR_UNKNOWN_SUBTITLE': 'Unknown error occurred, but don\\'t worry we already have been notified.',\r\n            'ERROR_UNKNOWN_CLOSE': 'Close',\r\n            'ERROR_UNKNOWN_DETAILS': 'Details',\r\n\r\n            'ERROR_AVAILABLE_TITLE': 'The server is on maintenance',\r\n            'ERROR_AVAILABLE_SUBTITLE': 'Sorry for the inconvenience. This application is undergoing maintenance for ' +\r\n                                            'a short period. We\\'ll be back soon. Thank for your patience.',\r\n            'ERROR_AVAILABLE_CLOSE': 'Close',\r\n            'ERROR_AVAILABLE_TRY_AGAIN': 'Try after',\r\n\r\n            'ERROR_RESPONDING_TITLE': 'No connection to the server',\r\n            'ERROR_RESPONDING_SUBTITLE': 'Unable to connect to the server. Check your Internet connection and try again.',\r\n            'ERROR_RESPONDING_RETRY': 'Retry',\r\n\r\n            'ERROR_UNSUPPORTED_TITLE': 'This browser is not supported',\r\n            'ERROR_UNSUPPORTED_SUBTITLE': 'Our application using the latest technology. This makes the application faster ' +\r\n                                          'and easier to use. Unfortunately, your browser doesn\\'t support those ' +\r\n                                          'technologies. Download one of these great browsers and you\\'ll be on your way:',\r\n            'ERROR_UNSUPPORTED_O': 'Opera',\r\n            'ERROR_UNSUPPORTED_O_VER': 'Version 36+',\r\n            'ERROR_UNSUPPORTED_IE': 'Internet Explorer',\r\n            'ERROR_UNSUPPORTED_IE_VER': 'Version 11+',\r\n            'ERROR_UNSUPPORTED_GC': 'Google Chrome',\r\n            'ERROR_UNSUPPORTED_GC_VER': 'Version 48+',\r\n            'ERROR_UNSUPPORTED_FM': 'Mozilla Firefox',\r\n            'ERROR_UNSUPPORTED_FM_VER': 'Version 45+'\r\n\r\n        });\r\n\r\n        pipTranslate.translations('ru', {\r\n            'ERROR_ROUTE_TITLE': 'Sorry, the page isn\\'t available',\r\n            'ERROR_ROUTE_SUBTITLE': 'The link you followed may be broken, or the page may have been removed.',\r\n            'ERROR_ROUTE_CONTINUE': 'Continue',\r\n            'ERROR_ROUTE_TRY_AGAIN': 'Try again',\r\n            'ERROR_ROUTE_GO_BACK': 'Go Back',\r\n            'ERROR_ROUTE_PAGE_TITLE': 'Wrong page',\r\n\r\n            'ERROR_UNKNOWN_TITLE': 'Oops. Something went wrong',\r\n            'ERROR_UNKNOWN_SUBTITLE': 'Unknown error occurred, but don\\'t worry we already have been notified.',\r\n            'ERROR_UNKNOWN_CLOSE': 'Close',\r\n            'ERROR_UNKNOWN_DETAILS': 'Details',\r\n\r\n            'ERROR_AVAILABLE_TITLE': 'The server is on maintenance',\r\n            'ERROR_AVAILABLE_SUBTITLE': 'Sorry for the inconvenience. This application is undergoing maintenance for ' +\r\n            'a short period. We\\'ll be back soon. Thank for your patience.',\r\n            'ERROR_AVAILABLE_CLOSE': 'Close',\r\n            'ERROR_AVAILABLE_TRY_AGAIN': 'Try after',\r\n\r\n            'ERROR_RESPONDING_TITLE': 'No connection to the server',\r\n            'ERROR_RESPONDING_SUBTITLE': 'Unable to connect to server. Check your Internet connection and try again.',\r\n            'ERROR_RESPONDING_RETRY': 'Retry',\r\n\r\n            'ERROR_UNSUPPORTED_TITLE': 'This browser is not supported',\r\n            'ERROR_UNSUPPORTED_SUBTITLE': 'Our application using the latest technology. This makes the application faster ' +\r\n            'and easier to use. Unfortunately, your browser doesn\\'t support those ' +\r\n            'technologies. Download one of these great browsers and you\\'ll be on your way:',            \r\n            'ERROR_UNSUPPORTED_O': 'Opera',\r\n            'ERROR_UNSUPPORTED_O_VER': 'Version 35+',\r\n            'ERROR_UNSUPPORTED_IE': 'Internet Explorer',\r\n            'ERROR_UNSUPPORTED_IE_VER': 'Version 11+',\r\n            'ERROR_UNSUPPORTED_GC': 'Google Chrome',\r\n            'ERROR_UNSUPPORTED_GC_VER': 'Version 47+',\r\n            'ERROR_UNSUPPORTED_FM': 'Mozilla Firefox',\r\n            'ERROR_UNSUPPORTED_FM_VER': 'Version 43+'\r\n\r\n        });\r\n    });\r\n\r\n})();","/**\r\n * @file Registration of all error handling components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipErrors', [\r\n        'pipErrors.Pages',\r\n        'pipErrorsService',\r\n        'pipNoConnectionPanel',\r\n        'pipClearErrors',\r\n\t    'pipFormErrors'\r\n\r\n    ]);\r\n    \r\n})();","'use strict';\r\n\r\nangular.module('pipErrorsService', []);\r\n\r\nimport './errors_service';","/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Pages', [\r\n        'ngMaterial',\r\n        'pipErrors.Strings', 'pipErrors.NoConnection', 'pipErrors.MissingRoute', 'pipErrors.Unsupported',\r\n        'pipErrors.Unknown', 'pipErrors.Maintenance', 'pipErrors.Translate', 'pipErrors.Templates'\r\n    ]);\r\n\r\n    thisModule.config(\r\n        function ($stateProvider, $httpProvider) {\r\n            // Attach interceptor to react on unauthorized errors\r\n            $httpProvider.interceptors.push('pipAuthHttpResponseInterceptor');\r\n\r\n            // Configure module routes\r\n            $stateProvider\r\n                .state('errors_no_connection', {\r\n                    url: '/errors/no_connection',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorNoConnectionController',\r\n                    templateUrl: 'no_connection/no_connection.html'\r\n                })\r\n                .state('errors_maintenance', {\r\n                    url: '/errors/maintenance',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorMaintenanceController',\r\n                    templateUrl: 'maintenance/maintenance.html'\r\n                })\r\n                .state('errors_missing_route', {\r\n                    url: '/errors/missing_route',\r\n                    params: {\r\n                        unfoundState: null,\r\n                        fromState: null\r\n                    },\r\n                    controller: 'pipErrorMissingRouteController',\r\n                    templateUrl: 'missing_route/missing_route.html'\r\n                })\r\n                .state('errors_unsupported', {\r\n                    url: '/errors/unsupported',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorUnsupportedController',\r\n                    templateUrl: 'unsupported/unsupported.html'\r\n                })\r\n                .state('errors_unknown', {\r\n                    url: '/errors/unknown',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorUnknownController',\r\n                    templateUrl: 'unknown/unknown.html'\r\n                });\r\n        });\r\n\r\n\r\n    thisModule.run(\r\n        function ($rootScope, $state, $injector, pipErrorsService) {\r\n\r\n            var errorConfig = pipErrorsService.config;\r\n\r\n            if (errorConfig.Unsupported.Active) {\r\n                checkSupported();\r\n            }\r\n\r\n            if (errorConfig.MissingRoute.Active) {\r\n                $rootScope.$on('$stateNotFound',\r\n                    function (event, unfoundState, fromState, fromParams) {\r\n                        event.preventDefault();\r\n\r\n                        $state.go('errors_missing_route', {\r\n                            unfoundState: unfoundState,\r\n                            fromState: {\r\n                                to: fromState ? fromState.name : '',\r\n                                fromParams: fromParams\r\n                            }\r\n                        }\r\n                        );\r\n                        $rootScope.$routing = false;\r\n                    }\r\n                );\r\n            }\r\n\r\n            if (errorConfig.NoConnection.Active) {\r\n                $rootScope.$on('pipNoConnectionError', noConnectionError);\r\n            }\r\n\r\n            if (errorConfig.Unknown.Active) {\r\n                $rootScope.$on('pipUnknownError', unknownError);\r\n            }\r\n\r\n            if (errorConfig.Maintenance.Active) {\r\n                $rootScope.$on('pipMaintenanceError', maintenanceError);\r\n            }\r\n\r\n            function goToErrors(toState, params) {\r\n                if (toState == null)\r\n                    throw new Error('Error state was not defined');\r\n\r\n                $state.go(toState, params);\r\n            };\r\n\r\n            function maintenanceError(event, params) {\r\n                goToErrors('errors_maintenance', params);\r\n            }\r\n\r\n            function noConnectionError(event, params) {\r\n                goToErrors('errors_no_connection', params);\r\n            }\r\n\r\n            function unknownError(event, params) {\r\n                goToErrors('errors_unknown', params);\r\n            }\r\n\r\n            function checkSupported(supported?: any) {\r\n                let pipSystemInfo = $injector.has('pipSystemInfo') ? $injector.get('pipSystemInfo') : null;\r\n                if (!pipSystemInfo) { return; }\r\n\r\n                // todo make configured\r\n                if (!supported) {\r\n                    supported = {\r\n                        edge: 11,\r\n                        ie: 11,\r\n                        firefox: 43, //4, for testing\r\n                        opera: 35,\r\n                        chrome: 47\r\n                    };\r\n                }\r\n\r\n                let browser = pipSystemInfo.browserName;\r\n                let version = pipSystemInfo.browserVersion;\r\n                version = version.split(\".\")[0]\r\n\r\n                if (browser && supported[browser] && version >= supported[browser]) {\r\n\r\n                    return;\r\n                }\r\n                // if not supported\r\n                $state.go('errors_unsupported');\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n    thisModule.factory('pipAuthHttpResponseInterceptor',\r\n        function ($q, $location, $rootScope) {\r\n            return {\r\n                responseError: function (rejection) {\r\n                    var toState = $rootScope.$state && $rootScope.$state.name ? $rootScope.$state.name : null,\r\n                        toParams = $rootScope.$state && $rootScope.$state.params ? $rootScope.$state.params : null;\r\n\r\n                    switch (rejection.status) {\r\n                        case 503:\r\n                            //available (maintenance)\r\n                            $rootScope.$emit('pipMaintenanceError', {\r\n                                error: rejection\r\n                            });\r\n                            break;\r\n                        case -1:\r\n                            $rootScope.$emit('pipNoConnectionError', {\r\n                                error: rejection\r\n                            });\r\n                            break;\r\n                        default:\r\n                            console.error(\"errors_unknown\", rejection);\r\n                            break;\r\n                    }\r\n\r\n                    return $q.reject(rejection);\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","'use strict';\r\n\r\n\r\n\r\nexport class ErrorStateItem {\r\n    Active: boolean;\r\n    Name: string;\r\n    Event: string;\r\n    Title: string;\r\n    SubTitle: String;\r\n    Breadcrumb: string;\r\n    Image: string;\r\n    Params?: any;\r\n}\r\n\r\nexport class pipErrorsConfig {\r\n    Maintenance: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_maintenance',\r\n        Event: 'pipMaintenanceError',\r\n        Title: 'ERROR_AVAILABLE_TITLE',\r\n        SubTitle: 'ERROR_AVAILABLE_SUBTITLE',\r\n        Breadcrumb: 'ERROR_AVAILABLE_TITLE',\r\n        Image: 'images/maintenance.svg'\r\n        \r\n    };\r\n    MissingRoute: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_missing_route',\r\n        Event: '$stateNotFound',\r\n        Title: 'ERROR_ROUTE_TITLE',\r\n        SubTitle: 'ERROR_ROUTE_SUBTITLE',\r\n        Breadcrumb: 'ERROR_ROUTE_PAGE_TITLE',\r\n        Image: 'images/invalid_route.svg'\r\n    };\r\n    NoConnection: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_no_connection',\r\n        Event: 'pipNoConnectionError',\r\n        Title: 'ERROR_RESPONDING_TITLE',\r\n        SubTitle: 'ERROR_RESPONDING_SUBTITLE',\r\n        Breadcrumb: 'ERROR_RESPONDING_TITLE',\r\n        Image: 'images/no_response.svg'\r\n    };\r\n    Unknown: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_unknown',\r\n        Event: 'pipUnknownError',\r\n        Title: 'ERROR_UNKNOWN_TITLE',\r\n        SubTitle: 'ERROR_UNKNOWN_SUBTITLE',\r\n        Breadcrumb: 'ERROR_UNKNOWN_TITLE',\r\n        Image: 'images/unknown_error.svg'\r\n    };\r\n    Unsupported: ErrorStateItem = {\r\n        Active: true,\r\n        Name: 'errors_unsupported',\r\n        Event: '',\r\n        Title: 'ERROR_UNSUPPORTED_TITLE',\r\n        SubTitle: 'ERROR_UNSUPPORTED_SUBTITLE',\r\n        Breadcrumb: 'ERROR_UNSUPPORTED_TITLE',\r\n        Image: '',\r\n        Params: {\r\n            supported: {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, \r\n                opera: 35,\r\n                chrome: 47\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport interface IpipErrorsService {\r\n    getErrorItemByKey(errorName: string): ErrorStateItem;\r\n\r\n    config: pipErrorsConfig;\r\n}\r\n\r\nexport interface IpipErrorsProvider extends ng.IServiceProvider {\r\n    configureErrorByKey(errorName: string, errorParams: ErrorStateItem): void;\r\n    configureErrors(value: pipErrorsConfig): void;\r\n}\r\n\r\nclass pipErrorsService implements IpipErrorsService {\r\n    private _config: pipErrorsConfig;\r\n\r\n    public constructor(\r\n        config: pipErrorsConfig\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._config = config || new pipErrorsConfig();\r\n    }\r\n\r\n    public get config(): pipErrorsConfig {\r\n        return this._config;\r\n    }\r\n\r\n    public getErrorItemByKey(errorName: string): ErrorStateItem {\r\n        if (!errorName || !this._config[errorName]) {\r\n            return null;\r\n        }\r\n\r\n        return this._config[errorName];\r\n    }\r\n\r\n}\r\n\r\nclass pipErrorsProvider implements IpipErrorsProvider {\r\n    private _service: pipErrorsService;\r\n    private _config: pipErrorsConfig;\r\n\r\n    constructor() {\r\n        this._config = new pipErrorsConfig();\r\n    }\r\n\r\n    public configureErrorByKey(errorName: string, errorParams: ErrorStateItem): void {\r\n        if (!errorName || !errorParams) return;\r\n        if (!this._config[errorName]) return;\r\n\r\n        this._config[errorName] = <ErrorStateItem>_.defaultsDeep(errorParams, this._config[errorName]);\r\n    }\r\n\r\n    public configureErrors(value: pipErrorsConfig): void {\r\n        if (!value) return;\r\n\r\n        this._config = <pipErrorsConfig>_.defaultsDeep(value, this._config);\r\n    }\r\n\r\n    public $get(\r\n\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new pipErrorsService(this._config);\r\n\r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipErrorsService')\r\n    .provider('pipErrorsService', pipErrorsProvider);\r\n","/**\r\n * @file Special error handling for forms\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipClearErrors', []);\r\n\r\n    thisModule.directive('pipClearErrors', function () {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['ngModel', '^?form'],\r\n            link: function ($scope, $element, $attrs: any, $ctrls) {\r\n                var \r\n                    fieldController = $ctrls[0],\r\n                    formController = $ctrls[1];\r\n\r\n                $scope.$watch($attrs.ngModel, function (newValue) {\r\n                    clearFieldErrors();\r\n                    clearFormErrors();\r\n                });\r\n\r\n                //-------------------\r\n\r\n                function clearFieldErrors() {\r\n                    var errors = fieldController.$error;\r\n\r\n                    for (var prop in errors) {\r\n                        if (errors.hasOwnProperty(prop) && prop.substring(0, 6) == 'ERROR_') {\r\n                            fieldController.$setValidity(prop, true);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                function clearFormErrors() {\r\n                    formController.$serverError = {};\r\n                };\r\n            }\r\n        };\r\n    });\r\n\r\n})();","/**\r\n * @file Form error utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n *\r\n */\r\n \r\n /* global _, angular */\r\n \r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipFormErrors', []);\r\n\r\n    thisModule.factory('pipFormErrors', function ($rootScope) {\r\n\t\treturn {\r\n\t\t\terrorsWithHint: errorsWithHint,\r\n            //submittedErrors: submittedErrors,\r\n            //submittedErrorsWithHint: submittedErrorsWithHint,\r\n            //dirtyErrors: dirtyErrors,\r\n            //dirtyErrorsWithHint: dirtyErrorsWithHint,\r\n            //touchedErrors: touchedErrors,            \r\n            touchedErrorsWithHint: touchedErrorsWithHint,\r\n            resetFormErrors: resetFormErrors,\r\n            setFormError: setFormError,\r\n            resetFieldsErrors: resetFieldsErrors\r\n\t\t};\r\n\t\t//-------------------\r\n\r\n        function errorsWithHint(field) {\r\n            if (field == null) return;\r\n\t\t\t\r\n            return _.isEmpty(field.$error) ? { hint: true } : field.$error;\r\n        };\r\n\t\t\r\n//         function submittedErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (form.$submitted)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n// \r\n//         function submittedErrorsWithHint(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (form.$submitted) {\r\n//                 return _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n//             }\r\n//             return { hint: true };\r\n//         };\r\n// \r\n//         function dirtyErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (field.$dirty || form.$dirty)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n// \r\n//         function dirtyErrorsWithHint(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (field.$dirty || form.$dirty) {\r\n//                 return _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n//             }\r\n//             return { hint: true };\r\n//         };\r\n// \r\n//         function touchedErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n//             \r\n//             if (field.$touched || form.$dirty)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n\r\n        function touchedErrorsWithHint(form, field) {\r\n            if (form == null) return;\r\n            if (field == null) return;\r\n\r\n            if (form.$submitted && (field.$touched || form.$dirty) || !form.$submitted && (field.$touched || field.$dirty)) {\r\n                var result = _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n                return result;\r\n            }\r\n            return { hint: true };\r\n        };\r\n\r\n        function resetFormErrors(form, errors) {\r\n            form.$setPristine();\r\n            form.$setUntouched();\r\n\r\n            if (errors) {\r\n                form.$setDirty();\r\n                form.$setSubmitted();\r\n            }\r\n\r\n            form.$serverError = {};\r\n        };\r\n        \r\n        function resetFieldsErrors(form, field) {\r\n            if (!form) return;\r\n            if (field && form[field] && form[field].$error) {\r\n                 form[field].$error = {};\r\n            } else {\r\n                for (var prop in form) {\r\n                    if (form[prop] && form[prop].$error) {\r\n                        form[prop].$error = {};\r\n                    };\r\n                }\r\n                if (form && form.$error) form.$error = {};\r\n            }\r\n        };\r\n        \r\n        function setFormError(form, error, errorFieldMap) {\r\n            if (error == null) return;\r\n            // Prepare form server errors\r\n            form.$serverError = form.$serverError || {};\r\n            // Prepare error code\r\n            var code = error.code || (error.data || {}).code || null;\r\n            if (!code && error.status) code = error.status;\r\n\r\n            if (code) {\r\n                var \r\n                    errorName = 'ERROR_' + code,\r\n                    field = errorFieldMap ? errorFieldMap[code] : null;\r\n                // Set server error to fields\r\n                if (field && form[field] && form[field].$setValidity) {\r\n                    form[field].$setValidity(errorName, false);\r\n                    return;\r\n                }\r\n\r\n                // Set server error to form\r\n                if (field == 'form') {\r\n                    form.$serverError[errorName] = true;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // if undefined error for this form or code === undefined/null, go to unhandled error page\r\n            if (error.data && error.data.message) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.data.message;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            // Set as undefined error\r\n            if (error.message) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.message;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            if (error.name) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.name;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            form.$serverError['ERROR_UNKNOWN'] = error;\r\n            goToUnhandledErrorPage(error);\r\n        };\r\n\r\n        function goToUnhandledErrorPage(error) {\r\n            $rootScope.$emit('pipUnhandledInternalError', {\r\n                error: error\r\n            });\r\n        };\r\n        \r\n\t});\r\n\r\n})();","/**\r\n * @file Maintenance error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Maintenance', []);\r\n\r\n    thisModule.controller('pipErrorMaintenanceController', function ($scope, $state, $rootScope, $mdMedia, $injector, pipErrorsService) {\r\n\r\n        var errorKey = 'Maintenance';\r\n        $scope.errorConfig = pipErrorsService.getErrorItemByKey(errorKey);\r\n\r\n        var pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n        var pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n\r\n        $scope.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        $rootScope.$routing = false;\r\n        $scope.isCordova = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n        $scope.timeoutInterval = $scope.error && $scope.error.config &&\r\n                        $scope.error.config.params && $scope.error.config.params.interval ? $scope.error.config.params.interval : 0;\r\n\r\n        $scope.onClose = onClose;\r\n\r\n        return;\r\n\r\n        function appHeader() {\r\n            if (!pipNavService) return;\r\n\r\n            pipNavService.appbar.addShadow();\r\n            pipNavService.icon.showMenu();\r\n            pipNavService.breadcrumb.text = $scope.errorConfig.Breadcrumb;\r\n            pipNavService.actions.hide();\r\n        };\r\n\r\n        function onClose() {\r\n\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Missing route error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.MissingRoute', []);\r\n\r\n    thisModule.controller('pipErrorMissingRouteController', function ($scope, $state, $rootScope, $mdMedia, $injector, pipErrorsService) {\r\n\r\n        var errorKey = 'MissingRoute';\r\n        $scope.errorConfig = pipErrorsService.getErrorItemByKey(errorKey);\r\n\r\n        var pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n        var pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n\r\n        $scope.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        appHeader();\r\n        $rootScope.$routing = false;\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.fromState : {};\r\n        $scope.unfoundState = $state && $state.params ?  $state.params.unfoundState : {};\r\n        $scope.url = $scope.unfoundState && $scope.unfoundState.to ? $state.href($scope.unfoundState.to, $scope.unfoundState.toParams, {absolute: true}) : '';\r\n        $scope.urlBack = $scope.fromState && $scope.fromState.to ? $state.href($scope.fromState.to, $scope.fromState.fromParams, {absolute: true}) : '';\r\n\r\n        $scope.onContinue = onContinue;\r\n\r\n        return;\r\n\r\n        function appHeader() {\r\n            if (!pipNavService) return;\r\n\r\n            pipNavService.appbar.addShadow();\r\n            pipNavService.icon.showMenu();\r\n            pipNavService.breadcrumb.text = $scope.errorConfig.Breadcrumb;\r\n            pipNavService.actions.hide();\r\n        };\r\n\r\n        function onContinue() {\r\n            // Todo: Go to default state '/'\r\n            //pipAuthState.goToAuthorized();\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file No connection error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.NoConnection', []);\r\n\r\n    thisModule.controller('pipErrorNoConnectionController', function ($scope, $state, $rootScope, $window, $mdMedia, $injector, pipErrorsService) {\r\n\r\n        var errorKey = 'NoConnection';\r\n        $scope.errorConfig = pipErrorsService.getErrorItemByKey(errorKey);\r\n\r\n        var pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n        var pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n\r\n        $scope.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        $rootScope.$routing = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n\r\n        $scope.onRetry = onRetry;\r\n\r\n        return;\r\n\r\n        function onRetry() {\r\n            $window.history.back();\r\n        };\r\n\r\n        function appHeader() {\r\n            if (!pipNavService) return;\r\n\r\n            pipNavService.appbar.addShadow();\r\n            pipNavService.icon.showMenu();\r\n            pipNavService.breadcrumb.text = $scope.errorConfig.Breadcrumb;\r\n            pipNavService.actions.hide();\r\n        };\r\n\r\n    });\r\n\r\n\r\n})();\r\n","/**\r\n * @file No Connection Error panel\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipNoConnectionPanel\", ['pipErrors.Translate']);\r\n\r\n    thisModule.directive('pipNoConnectionPanel',\r\n        function () {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    error: '=pipError',\r\n                    retry: '=pipRetry'\r\n                },\r\n                templateUrl: 'no_connection_panel/no_connection_panel.html',\r\n                controller: 'pipNoConnectionPanelController'\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipNoConnectionPanelController',\r\n        function ($scope, $element, $attrs, pipTranslate) {\r\n\r\n            $scope.onRetry = onRetry;\r\n\r\n            return;\r\n\r\n            function onRetry() {\r\n                if ($scope.retry && angular.isFunction($scope.retry)) $scope.retry();\r\n            };\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Unknown error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Unknown', []);\r\n\r\n    thisModule.controller('pipErrorUnknownController', function ($scope, $state, $rootScope, $injector, $mdMedia, pipErrorsService) {\r\n\r\n        var errorKey = 'Unknown';\r\n        $scope.errorConfig = pipErrorsService.getErrorItemByKey(errorKey);\r\n\r\n        var pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n        var pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n\r\n        $scope.media = pipMedia ? pipMedia : $mdMedia;\r\n\r\n        $rootScope.$routing = false;\r\n        $scope.isCordova = false;\r\n\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n        $scope.error_details = null;\r\n\r\n        $scope.onDetails = onDetails;\r\n        $scope.onClose = onClose;\r\n\r\n        parseError();\r\n\r\n        return;\r\n\r\n        function appHeader() {\r\n            if (!pipNavService) return;\r\n\r\n            pipNavService.appbar.addShadow();\r\n            pipNavService.icon.showMenu();\r\n            pipNavService.breadcrumb.text = $scope.errorConfig.Breadcrumb;\r\n            pipNavService.actions.hide();\r\n        };\r\n\r\n        function parseError() {\r\n            $scope.error_details = {};\r\n            $scope.error_details.code = $scope.error.code;\r\n            $scope.error_details.message = $scope.error.message;\r\n            $scope.error_details.status = $scope.error.status;\r\n\r\n            $scope.error_details.server_stacktrace = function () {\r\n\r\n            };\r\n\r\n            $scope.error_details.client_stacktrace = function () {\r\n\r\n            };\r\n        };\r\n\r\n        function onDetails() {\r\n            $scope.showError = true;\r\n        };\r\n\r\n        function onClose() {\r\n\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Unsupported error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Unsupported', []);\r\n\r\n    thisModule.controller('pipErrorUnsupportedController', function ($scope, $state, $rootScope, $mdMedia, $injector, pipErrorsService) {\r\n\r\n        var errorKey = 'Unsupported';\r\n        $scope.errorConfig = pipErrorsService.getErrorItemByKey(errorKey);\r\n\r\n        var pipNavService = $injector.has('pipNavService') ? $injector.get('pipNavService') : null;\r\n        var pipMedia = $injector.has('pipMedia') ? $injector.get('pipMedia') : null;\r\n\r\n        $scope.media = pipMedia ? pipMedia : $mdMedia;\r\n        $rootScope.$routing = false;\r\n        \r\n        if (pipNavService) {\r\n            appHeader();\r\n        }\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n\r\n        return;\r\n\r\n        // Todo: Made dependencies optional\r\n        function appHeader() {\r\n            pipNavService.appbar.addShadow();\r\n            pipNavService.icon.showMenu();\r\n            pipNavService.breadcrumb.text = $scope.errorConfig.Breadcrumb;\r\n            pipNavService.actions.hide();\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('maintenance/maintenance.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><img src=\"{{errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::\\'ERROR_AVAILABLE_TITLE\\' | translate}}</div><div class=\"pip-error-subtext\">{{::\\'ERROR_AVAILABLE_SUBTITLE\\' | translate}}</div><div class=\"pip-error-subtext\" ng-if=\"timeoutInterval\">{{::\\'ERROR_AVAILABLE_TRY_AGAIN\\' | translate}} {{timeoutInterval}} sec.</div><div class=\"pip-error-actions h48 layout-column layout-align-center-center\" ng-if=\"isCordova\"><md-button class=\"md-accent\" ng-click=\"onClose($event)\" aria-label=\"CLOSE\">{{::\\'ERROR_AVAILABLE_CLOSE\\' | translate}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('missing_route/missing_route.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><img src=\"{{errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::errorConfig.SubTitle | translate}}</div><div class=\"pip-error-actions h48 layout-column layout-align-center-center\"><md-button aria-label=\"CONTINUE\" class=\"md-accent\" ng-click=\"onContinue($event)\">{{::\\'ERROR_ROUTE_CONTINUE\\' | translate}}</md-button></div><div class=\"h48\" ng-if=\"url\"><a ng-href=\"{{url}}\">{{::\\'ERROR_ROUTE_TRY_AGAIN\\' | translate }}: {{url}}</a></div><div class=\"h48\" ng-if=\"urlBack\"><a ng-href=\"{{urlBack}}\">{{::\\'ERROR_ROUTE_GO_BACK\\' | translate }}: {{urlBack}}</a></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('no_connection/no_connection.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><img src=\"{{errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::errorConfig.SubTitle | translate}}</div><div class=\"pip-error-actions h48 layout-column layout-align-center-center\"><md-button aria-label=\"RETRY\" class=\"md-accent\" ng-click=\"onRetry($event)\">{{::\\'ERROR_RESPONDING_RETRY\\' | translate}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('no_connection_panel/no_connection_panel.html',\n    '<div class=\"pip-error-page pip-error layout-column layout-align-center-center flex\"><img src=\"{{errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::errorConfig.SubTitle | translate}}</div><div class=\"pip-error-actions h48 layout-column layout-align-center-center\"><md-button aria-label=\"RETRY\" class=\"md-accent\" ng-click=\"onRetry($event)\">{{::\\'ERROR_RESPONDING_RETRY\\' | translate}}</md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('unknown/unknown.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><img src=\"{{errorConfig.Image}}\" class=\"pip-pic block\"><div class=\"pip-error-text\">{{::errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::errorConfig.SubTitle | translate}}</div><div class=\"pip-error-subtext\" ng-if=\"showError && error_details && error_details.message\"><div ng-if=\"error_details.code\">Code: {{error_details.code}}</div><div ng-if=\"error_details.message\">Description: {{error_details.message}}</div><div ng-if=\"error_details.status\">HTTP status: {{error_details.status}}</div><div ng-if=\"error_details.server_stacktrace\">Server stacktrace: {{error_details.server_stacktrace}}</div><div ng-if=\"error_details.client_stacktrace\">Client stacktrace stacktrace: {{error_details.client_stacktrace}}</div></div><div class=\"pip-error-actions layout-column layout-align-center-center\"><div class=\"h48\" ng-if=\"isCordova\"><md-button aria-label=\"CLOSE\" class=\"md-accent\" ng-click=\"onClose($event)\">{{::\\'ERROR_UNKNOWN_CLOSE\\' | translate}}</md-button></div><div class=\"h48\" ng-if=\"error_details && error_details.status\"><md-button aria-label=\"DETAILS\" class=\"md-accent\" ng-click=\"onDetails($event)\">{{::\\'ERROR_UNKNOWN_DETAILS\\' | translate}}</md-button></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('unsupported/unsupported.html',\n    '<div class=\"pip-error-scroll-body pip-scroll\"><div class=\"pip-error pip-error-page layout-column flex layout-align-center-center\"><div class=\"pip-error-text\">{{::errorConfig.Title | translate}}</div><div class=\"pip-error-subtext\">{{::errorConfig.SubTitle | translate}}</div><div class=\"pip-error-details layout-row layout-align-center-center\" ng-if=\"media(\\'gt-xs\\')\"><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/ie.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx\">{{::\\'ERROR_UNSUPPORTED_IE\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_IE_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/fm.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.mozilla.org/ru/firefox/new/\">{{::\\'ERROR_UNSUPPORTED_FM\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_FM_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/gc.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.google.com/chrome/browser/desktop/index.html?platform=win64#\">{{::\\'ERROR_UNSUPPORTED_GC\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_GC_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/o.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"http://www.opera.com/ru/download\">{{::\\'ERROR_UNSUPPORTED_O\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_O_VER\\' | translate}}</p></div></div></div><div class=\"pip-error-details\" ng-if=\"media(\\'xs\\')\"><div class=\"layout-row layout-align-center-center\"><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/ie.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx\">{{::\\'ERROR_UNSUPPORTED_IE\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_IE_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/fm.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.mozilla.org/ru/firefox/new/\">{{::\\'ERROR_UNSUPPORTED_FM\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_FM_VER\\' | translate}}</p></div></div></div><div class=\"tm16 layout-row layout-align-center-center\"><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/gc.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"https://www.google.com/chrome/browser/desktop/index.html?platform=win64#\">{{::\\'ERROR_UNSUPPORTED_GC\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_GC_VER\\' | translate}}</p></div></div><div class=\"pip-error-details-item layout-column layout-align-center-center\"><div style=\"background-image: url(\\'images/o.svg\\');\" class=\"pip-pic\"></div><div class=\"h64 tp16 bp16\"><a class=\"text-body2 m0\" target=\"_blank\" href=\"http://www.opera.com/ru/download\">{{::\\'ERROR_UNSUPPORTED_O\\' | translate}}</a><p class=\"text-body1 m0\">{{::\\'ERROR_UNSUPPORTED_O_VER\\' | translate}}</p></div></div></div></div></div></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-errors-html.min.js.map\n","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipBarCharts\r\n     *\r\n     * @description\r\n     * Bar chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipBarCharts', [])\r\n        .directive('pipBarChart', pipBarChart);\r\n\r\n    function pipBarChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                xTickFormat: '=pipXTickFormat',\r\n                yTickFormat: '=pipYTickFormat',\r\n                interactiveLegend: '=pipInterLegend'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'barChart',\r\n            templateUrl: 'bar/bar_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                let vm = this;\r\n                let chart = null;\r\n                let chartElem = null;\r\n                let colors = _.map($mdColorPalette, function (palette, color) {\r\n                    return color;\r\n                });\r\n                colors = _.filter(colors, function(color){\r\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\r\n                });                \r\n                let height = 270;\r\n\r\n                vm.data = prepareData(vm.series) || [];\r\n                vm.legend = _.clone(vm.series);\r\n                \r\n                if ((vm.series || []).length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                $scope.$watch('barChart.series', function (updatedSeries) {\r\n                    vm.data = prepareData(updatedSeries);\r\n                    vm.legend = _.clone(vm.series);\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                        configBarWidthAndLabel();\r\n                        drawEmptyState();\r\n                    }\r\n                });\r\n\r\n                $scope.$watch('barChart.legend', function(updatedLegend) {\r\n                    vm.data = prepareData(updatedLegend);\r\n                    vm.legend = updatedLegend;\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                        configBarWidthAndLabel();\r\n                        drawEmptyState();\r\n                    }\r\n                }, true);\r\n\r\n                function prepareData(data) {\r\n                    let result = [];\r\n                    _.each(data, (seria) => {\r\n                        if (!seria.disabled && seria.values) result.push(seria);\r\n                    });\r\n\r\n                    return _.cloneDeep(result);\r\n                }\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(function () {\r\n                    chart = nv.models.discreteBarChart()\r\n                        .margin({top: 10, right: 0, bottom: 10, left: 50})\r\n                        .x(function (d) { return d.label || d.key || d.x; })\r\n                        .y(function (d) { return d.value; })\r\n                        .showValues(true)\r\n                        .staggerLabels(true) \r\n                        .showXAxis(true)\r\n                        .showYAxis(true)\r\n                        .valueFormat(<any>d3.format('d'))\r\n                        .duration(0)\r\n                        .height(height)\r\n                        .color(function(d) {\r\n                            return vm.data[d.series].color || materialColorToRgba(colors[d.series]);\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('There is no data right now...');\r\n\r\n                    chart.yAxis\r\n                        .tickFormat(function (d) {\r\n                            return vm.yTickFormat ? vm.yTickFormat(d) : d;\r\n                        });\r\n\r\n                    chart.xAxis\r\n                        .tickFormat(function (d) {\r\n                            return vm.xTickFormat ? vm.xTickFormat(d) : d;\r\n                        });\r\n\r\n                    chartElem = d3.select($element.get(0))\r\n                        .select('.bar-chart svg')\r\n                        .datum(vm.data)\r\n                        .style('height', '285px')\r\n                        .call(chart);\r\n\r\n                    nv.utils.windowResize(() => {\r\n                        chart.update();\r\n                         configBarWidthAndLabel(0);\r\n                         drawEmptyState();\r\n                    });\r\n\r\n                    return chart;\r\n                }, function () {\r\n\r\n                    $timeout(configBarWidthAndLabel, 0);\r\n                    drawEmptyState();\r\n                });\r\n\r\n                function drawEmptyState() {\r\n                    if ($element.find('.nv-noData').length === 0) {\r\n                        d3.select($element.find('.empty-state')[0]).remove();\r\n                    } else {\r\n                        let g = chartElem.append('g').classed('empty-state', true),\r\n                            width = $element.find('.nvd3-svg').innerWidth(),\r\n                            margin = width * 0.1;\r\n\r\n                        g.append('g')\r\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                            .append('rect')\r\n                            .attr('height', height - 10)\r\n                            .attr('width', 38);\r\n\r\n                        g.append('g')\r\n                            .attr('transform', 'translate(42, 60)')\r\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                            .append('rect')\r\n                            .attr('height', 200)\r\n                            .attr('width', 38);\r\n\r\n                        g.append('g')\r\n                            .attr('transform', 'translate(84, 160)')\r\n                            .style('fill', 'rgba(0, 0, 0, 0.08)')\r\n                            .append('rect')\r\n                            .attr('height', 100)\r\n                            .attr('width', 38);\r\n\r\n                        g.attr('transform', 'translate(' + (50 + margin) + ', 0), ' + 'scale(' + ((width - 2*margin) / 126) + ', 1)' );\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Aligns value label according to parent container size.\r\n                 * @return {void}\r\n                 */\r\n                function configBarWidthAndLabel(timeout: number = 1000) {\r\n                    var labels = $element.find('.nv-bar text'),\r\n                        chartBars = $element.find('.nv-bar'),\r\n                        parentHeight = (<any>$element.find('.nvd3-svg')[0]).getBBox().height;\r\n\r\n                    d3.select($element.find('.bar-chart')[0]).classed('visible', true);\r\n\r\n                    chartBars.each(function (index, item) {\r\n                        var barHeight = Number(d3.select(<any>item).select('rect').attr('height')),\r\n                            barWidth = Number(d3.select(<any>item).select('rect').attr('width')),\r\n                            element = d3.select(<any>item),\r\n                            x = d3.transform(element.attr('transform')).translate[0],\r\n                            y = d3.transform(element.attr('transform')).translate[1];\r\n\r\n                        element\r\n                            .attr('transform', 'translate(' + Number(x + index * (barWidth + 15)) + ', ' + (height - 20) + ')')\r\n                            .select('rect').attr('height', 0);\r\n\r\n                        element\r\n                            .transition()\r\n                            .duration(timeout)\r\n                            .attr('transform', 'translate(' + Number(x + index * (barWidth + 15)) + ', ' + y + ')')\r\n                            .select('rect').attr('height', barHeight);\r\n\r\n                        d3.select(labels[index])\r\n                            .attr('dy', barHeight / 2 + 10)\r\n                            .attr('x', barWidth / 2);\r\n                    });\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function getMaterialColor(index) {\r\n                    if (!colors || colors.length < 1) return null;\r\n\r\n                    if (index >= colors.length) {\r\n                        index = 0;\r\n                    }\r\n\r\n                    return materialColorToRgba(colors[index]);\r\n                } \r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    if (!vm.data) return;\r\n\r\n                    vm.data.forEach(function (item, index) {\r\n                        if (item.values[0]) {\r\n                            item.values[0].color = item.values[0].color || getMaterialColor(index);\r\n                            item.color = item.values[0].color;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","/**\r\n * @file Registration of chart WebUI controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipCharts', [\r\n        'pipBarCharts',\r\n        'pipLineCharts',\r\n        'pipPieCharts',\r\n        'pipChartLegends',\r\n        'pipCharts.Templates'\r\n    ]);\r\n\r\n})();\r\n\r\n","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipLegends\r\n     *\r\n     * @description\r\n     * Legend of charts\r\n     */\r\n    angular.module('pipChartLegends', [])\r\n        .directive('pipChartLegend', pipChartLegend);\r\n\r\n    function pipChartLegend() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                interactive: '=pipInteractive'\r\n            },\r\n            templateUrl: 'legend/interactive_legend.html',\r\n            controller: function ($element, $scope, $timeout, $mdColorPalette) {\r\n                var colors = _.map($mdColorPalette, function (palette) {\r\n                    return palette[500].hex;\r\n                });\r\n                colors = _.filter(colors, function(color){\r\n                    return color !== undefined && color !== null;\r\n                });  \r\n                function colorCheckboxes() {\r\n                    var checkboxContainers = $($element).find('md-checkbox .md-container');\r\n\r\n                    checkboxContainers.each(function (index, item) {\r\n                        if (index >= $scope.series.length) {\r\n                            return \r\n                        }\r\n                        $(item)\r\n                            .css('color', $scope.series[index].color || colors[index])\r\n                            .find('.md-icon')\r\n                            .css('background-color', $scope.series[index].color || colors[index]);\r\n                    });\r\n                }\r\n\r\n                function animate() {\r\n                    var legendTitles = $($element).find('.chart-legend-item');\r\n\r\n                    legendTitles.each(function (index, item) {\r\n                        $timeout(function () {\r\n                            $(item).addClass('visible');\r\n                        }, 200 * index);\r\n                    });\r\n                }\r\n                \r\n                function prepareSeries() {\r\n                    if (!$scope.series) return;\r\n\r\n                    $scope.series.forEach(function (item, index) {\r\n                        item.color = item.color || (item.values && item.values[0] && item.values[0].color ? item.values[0].color : colors[index]);\r\n                        item.disabled = item.disabled || false;\r\n                    });   \r\n                }\r\n\r\n                $scope.$watch('series', function () {\r\n                    $timeout(function () {\r\n                        animate();\r\n                        colorCheckboxes();\r\n                    }, 0);\r\n                    prepareSeries();\r\n                }, true);\r\n\r\n                $scope.$watch('interactive', function (newValue, oldValue) {\r\n                    if (newValue == true && newValue != oldValue) {\r\n                        $timeout(colorCheckboxes, 0);\r\n                    }\r\n                });\r\n\r\n                $timeout(function () {\r\n                    animate();\r\n                    colorCheckboxes();\r\n                }, 0);\r\n                prepareSeries();\r\n            }\r\n        };\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipLineCharts\r\n     *\r\n     * @description\r\n     * Line chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipLineCharts', [])\r\n        .directive('pipLineChart', pipLineChart);\r\n\r\n    function pipLineChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                showYAxis: '=pipYAxis',\r\n                showXAxis: '=pipXAxis',\r\n                xFormat: '=pipXFormat',\r\n                xTickFormat: '=pipXTickFormat',\r\n                yTickFormat: '=pipYTickFormat',\r\n                xTickValues: '=pipXTickValues',\r\n                dynamic: '=pipDynamic',\r\n                fixedHeight: '@pipDiagramHeight',\r\n                dynamicHeight: '@pipDynamicHeight',\r\n                minHeight: '@pipMinHeight',\r\n                maxHeight: '@pipMaxHeight',\r\n                interactiveLegend: '=pipInterLegend'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'lineChart',\r\n            templateUrl: 'line/line_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                var vm        = this;\r\n                var chart     = null;\r\n                var chartElem = null;\r\n                var setZoom = null;\r\n                var updateZoomOptions = null;\r\n                var fixedHeight = vm.fixedHeight || 270;\r\n                var dynamicHeight = vm.dynamicHeight || false;\r\n                var minHeight = vm.minHeight || fixedHeight;\r\n                var maxHeight = vm.maxHeight || fixedHeight;\r\n\r\n                var filteredColor = _.filter($mdColorPalette, function(palette, color){\r\n                    return _.isObject(color) && _.isObject(color[500] && _.isArray(color[500].value));\r\n                });\r\n                var colors = _.map(filteredColor, function (palette, color) {\r\n                    return color;\r\n                });\r\n                colors = _.filter(colors, function(color){\r\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\r\n                });\r\n                vm.data = prepareData(vm.series) || [];\r\n                vm.legend = _.clone(vm.series);\r\n                vm.sourceEvents = [];\r\n                \r\n                vm.isVisibleX = function () {\r\n                    return vm.showXAxis == undefined ? true : vm.showXAxis; \r\n                };\r\n\r\n                vm.isVisibleY = function () {\r\n                    return vm.showYAxis == undefined ? true : vm.showYAxis;\r\n                };\r\n\r\n                vm.zoomIn = function () {\r\n                    if (setZoom) {\r\n                        setZoom('in');\r\n                    }\r\n                };\r\n\r\n                vm.zoomOut = function () {\r\n                    if (setZoom) {\r\n                        setZoom('out');\r\n                    }\r\n                };\r\n                \r\n                if (vm.series && vm.series.length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                // Sets colors of items\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                $scope.$watch('lineChart.series', function (updatedSeries) {\r\n                    vm.data = prepareData(updatedSeries);\r\n                    vm.legend = _.clone(vm.series);\r\n\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                         chart.xAxis\r\n                            .tickValues(vm.xTickValues && _.isArray(vm.xTickValues) && vm.xTickValues.length > 2 ? \r\n                                d3.range(vm.xTickValues[0], vm.xTickValues[1], vm.xTickValues[2]) : null);\r\n\r\n                        chartElem.datum(vm.data || []).call(chart);\r\n                        drawEmptyState();\r\n                        \r\n                        if (updateZoomOptions) updateZoomOptions(vm.data);\r\n                    }\r\n                }, true);\r\n\r\n                $scope.$watch('lineChart.legend', function(updatedLegend) {\r\n                    vm.data = prepareData(updatedLegend);\r\n                    vm.legend = updatedLegend;\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data || []).call(chart);\r\n                        drawEmptyState();\r\n\r\n                        if (updateZoomOptions) updateZoomOptions(vm.data);\r\n                    }\r\n                }, true);\r\n\r\n                $scope.$on('$destroy', () => {\r\n                   setTimeout(()=> {d3.selectAll('.nvtooltip').style('opacity', 0); }, 800)\r\n                });\r\n\r\n                function prepareData(data) {\r\n                    let result = [];\r\n                    _.each(data, (seria) => {\r\n                        if (!seria.disabled && seria.values) result.push(seria);\r\n                    });\r\n\r\n                    return _.cloneDeep(result);\r\n                }\r\n\r\n                var getHeight = () => {\r\n                    if (dynamicHeight) {\r\n                        const heigth = Math.min(Math.max(minHeight, $element.parent().innerHeight()), maxHeight);\r\n                        return heigth;\r\n                    } else {\r\n                        return fixedHeight;\r\n                    }\r\n                };\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(() => {\r\n                    chart = nv.models.lineChart()\r\n                        .margin({ top: 20, right: 20, bottom: 30, left: 30 })\r\n                        .x(function (d) {\r\n                            return (d !== undefined && d.x !== undefined) ? (vm.xFormat ? vm.xFormat(d.x) : d.x) : d;\r\n                        })\r\n                        .y(function (d) {\r\n                            return (d !== undefined && d.value !== undefined) ? d.value : d;\r\n                        })\r\n                        .height(getHeight() - 50)\r\n                        .useInteractiveGuideline(true)\r\n                        .showXAxis(true)\r\n                        .showYAxis(true)\r\n                        .showLegend(false)\r\n                        .color(function(d) {\r\n                            return d.color || (<any>d3.scale).paletteColors().range();\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('There is no data right now...');\r\n\r\n                    chart.yAxis\r\n                        .tickFormat(function (d) {\r\n                            return vm.yTickFormat ? vm.yTickFormat(d) : d;\r\n                        });\r\n\r\n                    chart.xAxis\r\n                        .tickFormat(function (d) {\r\n                            return vm.xTickFormat ? vm.xTickFormat(d) : d;\r\n                        })\r\n                        .tickValues(vm.xTickValues && _.isArray(vm.xTickValues) && vm.xTickValues.length > 2 ? \r\n                                d3.range(vm.xTickValues[0], vm.xTickValues[1], vm.xTickValues[2]) : null);\r\n\r\n                    chartElem = d3.select($element.get(0)).select('.line-chart svg');\r\n                    chartElem.datum(vm.data || []).style('height', (getHeight() - 50) + 'px').call(chart);\r\n                    // Handle touches for correcting tooltip position\r\n                    $('.line-chart svg').on('touchstart touchmove', (e) => { \r\n                        setTimeout(() => {\r\n                            let tooltip = $('.nvtooltip'),\r\n                                tooltipW = tooltip.innerWidth(),\r\n                                bodyWidth = $('body').innerWidth(),\r\n                                x = e.originalEvent['touches'][0]['pageX'],\r\n                                y = e.originalEvent['touches'][0]['pageY'];\r\n\r\n                            tooltip.css('transform', 'translate(' \r\n                                + (x + tooltipW >= bodyWidth ? (x - tooltipW) : x) + ',' \r\n                                + y + ')');\r\n                            tooltip.css('left', 0); \r\n                            tooltip.css('top', 0);\r\n                        }); \r\n                    });\r\n\r\n                    $('.line-chart svg').on('touchstart touchend', (e) => { \r\n                        let removeTooltip = () => {\r\n                            let tooltip = $('.nvtooltip');\r\n                            tooltip.css('opacity', 0);\r\n                        };\r\n\r\n                        removeTooltip();\r\n\r\n                        setTimeout(() => {\r\n                            removeTooltip();\r\n                        }, 500); \r\n                    });\r\n\r\n                    if (vm.dynamic) {\r\n                        addZoom(chart, chartElem);\r\n                    }\r\n\r\n                    nv.utils.windowResize(() => { onResize(); });\r\n\r\n                    $scope.$on('pipMainResized', () => { onResize(); });\r\n\r\n                    return chart;\r\n                }, () => {\r\n                    drawEmptyState();\r\n                });\r\n\r\n                function onResize() {\r\n                    chart.height(getHeight() - 50);\r\n                    chartElem.style('height', (getHeight() - 50) + 'px');\r\n                    chart.update();\r\n                    drawEmptyState();\r\n                }\r\n\r\n                function drawEmptyState() {\r\n                    if (!$element.find('text.nv-noData').get(0)) {\r\n                        d3.select($element.find('.empty-state')[0]).remove();\r\n                    } else {\r\n                        let containerWidth = $element.find('.line-chart').innerWidth(),\r\n                            containerHeight = $element.find('.line-chart').innerHeight();\r\n                        \r\n                        if ($element.find('.empty-state').get(0)) {\r\n                            chartElem\r\n                                .select('image')\r\n                                .attr('transform', 'scale(' + (containerWidth / 1151) + ',' + (containerHeight / 216) + ')');\r\n                        } else {\r\n                            chartElem\r\n                                .append(\"defs\")\r\n                                .append(\"pattern\")\r\n                                .attr(\"height\", 1)\r\n                                .attr(\"width\", 1)\r\n                                .attr(\"x\", \"0\")\r\n                                .attr(\"y\", \"0\")\r\n                                .attr(\"id\", \"bg\")\r\n                                .append(\"image\")\r\n                                .attr('x', 17)\r\n                                .attr('y', 0)\r\n                                .attr('height', \"216px\")\r\n                                .attr('width', \"1151px\")\r\n                                .attr('transform', 'scale(' + (containerWidth / 1151) + ',' + (containerHeight / 216) + ')')\r\n                                .attr(\"xlink:href\", \"images/line_chart_empty_state.svg\");\r\n\r\n                            chartElem\r\n                                .append('rect')\r\n                                .classed('empty-state', true)\r\n                                .attr('height', \"100%\")\r\n                                .attr('width', \"100%\")\r\n                                .attr('fill', 'url(#bg)');\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function updateScroll(domains, boundary) {\r\n                    var bDiff = boundary[1] - boundary[0],\r\n                        domDiff = domains[1] - domains[0],\r\n                        isEqual = (domains[1] - domains[0])/bDiff === 1;\r\n\r\n                    $($element[0]).find('.visual-scroll')\r\n                        .css('opacity', function () {\r\n                            return isEqual ? 0 : 1;\r\n                        });\r\n\r\n                    if (isEqual) return;\r\n                    \r\n                    $($element[0]).find('.scrolled-block')\r\n                        .css('left', function () {\r\n                            return domains[0]/bDiff * 100 + '%';\r\n                        })\r\n                        .css('width', function () {\r\n                            return domDiff/bDiff * 100 + '%';\r\n                        });\r\n                }\r\n\r\n                function addZoom(chart, svg) {\r\n                    // scaleExtent\r\n                    var scaleExtent = 4;\r\n\r\n                    // parameters\r\n                    var yAxis       = null;\r\n                    var xAxis       = null;\r\n                    var xDomain     = null;\r\n                    var yDomain     = null;\r\n                    var redraw      = null;\r\n                    var svg         = svg;\r\n\r\n                    // scales\r\n                    var xScale = null;\r\n                    var yScale = null;\r\n\r\n                    // min/max boundaries\r\n                    var x_boundary = null;\r\n                    var y_boundary = null;\r\n\r\n                    // create d3 zoom handler\r\n                    var d3zoom = d3.behavior.zoom();\r\n                    var prevXDomain = null;\r\n                    var prevScale = null;\r\n                    var prevTranslate = null;\r\n\r\n                    setData(chart);\r\n\r\n                    function setData(newChart) {\r\n                        // parameters\r\n                        yAxis       = newChart.yAxis;\r\n                        xAxis       = newChart.xAxis;\r\n                        xDomain     = newChart.xDomain || xAxis.scale().domain;\r\n                        yDomain     = newChart.yDomain || yAxis.scale().domain;\r\n                        redraw      = newChart.update;\r\n\r\n                        // scales\r\n                        xScale = xAxis.scale();\r\n                        yScale = yAxis.scale();\r\n\r\n                        // min/max boundaries\r\n                        x_boundary = xAxis.scale().domain().slice();\r\n                        y_boundary = yAxis.scale().domain().slice();\r\n\r\n                        // create d3 zoom handler\r\n                        prevXDomain = x_boundary;\r\n                        prevScale = d3zoom.scale();\r\n                        prevTranslate = d3zoom.translate();\r\n\r\n                        // ensure nice axis\r\n                        xScale.nice();\r\n                        yScale.nice();\r\n                    }\r\n\r\n                    // fix domain\r\n                    function fixDomain(domain, boundary, scale, translate) {\r\n                        if (domain[0] < boundary[0]) {\r\n                            domain[0] = boundary[0];\r\n                            if (prevXDomain[0] !== boundary[0] || scale !== prevScale) {\r\n                                domain[1] += (boundary[0] - domain[0]);\r\n                            } else {\r\n                                domain[1] = prevXDomain[1];\r\n                                translate = _.clone(prevTranslate);\r\n                            }\r\n\r\n                        }\r\n                        if (domain[1] > boundary[1]) {\r\n                            domain[1] = boundary[1];\r\n                            if (prevXDomain[1] !== boundary[1] || scale !== prevScale) {\r\n                                domain[0] -= (domain[1] - boundary[1]);\r\n                            } else {\r\n                                domain[0] = prevXDomain[0];\r\n                                translate = _.clone(prevTranslate);\r\n                            }\r\n                        }\r\n\r\n                        d3zoom.translate(translate);\r\n                        prevXDomain = _.clone(domain);\r\n                        prevScale = _.clone(scale);\r\n                        prevTranslate = _.clone(translate);\r\n                        return domain;\r\n                    }\r\n\r\n                    function updateChart() {\r\n                        d3zoom.scale(1);\r\n                        d3zoom.translate([0,0]);\r\n                        xScale.domain(x_boundary);\r\n                        d3zoom.x(xScale).y(yScale);\r\n                        svg.call(d3zoom);\r\n                    }\r\n\r\n                    // zoom event handler\r\n                    function zoomed() {\r\n                        // Switch off vertical zooming temporary\r\n                        // yDomain(yScale.domain());\r\n\r\n                        if ((<any>d3.event).scale === 1) {\r\n                            unzoomed();\r\n                            updateChart();\r\n                        } else {\r\n                            xDomain(fixDomain(xScale.domain(), x_boundary, (<any>d3.event).scale, (<any>d3.event).translate));\r\n                            redraw();\r\n                        }\r\n\r\n                        updateScroll(xScale.domain(), x_boundary);\r\n                    }\r\n\r\n                    //\r\n                    setZoom = function(which) {\r\n                        var center0 = [svg[0][0].getBBox().width / 2, svg[0][0].getBBox().height / 2];\r\n                        var translate0 = d3zoom.translate(), coordinates0 = coordinates(center0);\r\n\r\n                        if (which === 'in') {\r\n                            if (prevScale < scaleExtent) d3zoom.scale(prevScale + 0.2);\r\n                        } else {\r\n                            if (prevScale > 1) d3zoom.scale(prevScale - 0.2);\r\n                        }\r\n\r\n                        var center1 = point(coordinates0);\r\n                        d3zoom.translate([translate0[0] + center0[0] - center1[0], translate0[1] + center0[1] - center1[1]]);\r\n\r\n                        d3zoom.event(svg);\r\n                    };\r\n\r\n                    function step(which) {\r\n                        var translate = d3zoom.translate();\r\n\r\n                        if (which === 'right') {\r\n                            translate[0] -= 20;\r\n                        } else {\r\n                            translate[0] += 20;\r\n                        }\r\n\r\n                        d3zoom.translate(translate);\r\n                        d3zoom.event(svg);\r\n                    }\r\n\r\n                    function coordinates(point) {\r\n                        var scale = d3zoom.scale(), translate = d3zoom.translate();\r\n                        return [(point[0] - translate[0]) / scale, (point[1] - translate[1]) / scale];\r\n                    }\r\n\r\n                    function point(coordinates) {\r\n                        var scale = d3zoom.scale(), translate = d3zoom.translate();\r\n                        return [coordinates[0] * scale + translate[0], coordinates[1] * scale + translate[1]];\r\n                    }\r\n\r\n                    function keypress() {\r\n                        switch((<any>d3.event).keyCode) {\r\n                            case 39: step('right'); break;\r\n                            case 37: step('left'); break;\r\n                            case 107: setZoom('in'); break;\r\n                            case 109: setZoom('out');\r\n                        }\r\n                    }\r\n\r\n                    // zoom event handler\r\n                    function unzoomed() {\r\n                        xDomain(x_boundary);\r\n                        redraw();\r\n                        d3zoom.scale(1);\r\n                        d3zoom.translate([0,0]);\r\n                        prevScale = 1;\r\n                        prevTranslate = [0,0];\r\n                    }\r\n\r\n                    // initialize wrapper\r\n                    d3zoom.x(xScale)\r\n                        .y(yScale)\r\n                        .scaleExtent([1, scaleExtent])\r\n                        .on('zoom', zoomed);\r\n\r\n                    // add handler\r\n                    svg.call(d3zoom).on('dblclick.zoom', unzoomed);\r\n                    $($element.get(0)).addClass('dynamic');\r\n\r\n                    // add keyboard handlers\r\n                    svg\r\n                        .attr('focusable', false)\r\n                        .style('outline', 'none')\r\n                        .on('keydown', keypress)\r\n                        .on('focus', function () {});\r\n\r\n                    var getXMinMax = function(data) {\r\n                        var maxVal, minVal = null;\r\n\r\n                        for(var i=0;i<data.length;i++) {\r\n                            if (!data[i].disabled) {\r\n                                var tempMinVal = d3.max(data[i].values, function(d: any) { return vm.xFormat ? vm.xFormat(d.x) : d.x;} );\r\n                                var tempMaxVal = d3.min(data[i].values, function(d: any) { return vm.xFormat ? vm.xFormat(d.x) : d.x;} );\r\n                                minVal = (!minVal || tempMinVal < minVal) ? tempMinVal : minVal;\r\n                                maxVal = (!maxVal || tempMaxVal > maxVal) ? tempMaxVal : maxVal;\r\n                            }\r\n                        }\r\n                        return [maxVal, minVal];\r\n                    };\r\n\r\n                    updateZoomOptions = function(data) {\r\n                        yAxis = chart.yAxis;\r\n                        xAxis = chart.xAxis;\r\n\r\n                        xScale = xAxis.scale();\r\n                        yScale = yAxis.scale();\r\n\r\n                        x_boundary = getXMinMax(data);\r\n\r\n                        if (d3zoom.scale() === 1) {\r\n                            d3zoom.x(xScale).y(yScale);\r\n                            svg.call(d3zoom);\r\n                            d3zoom.event(svg);\r\n                        }\r\n\r\n                        updateScroll(xScale.domain(), x_boundary);\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function getMaterialColor(index) {\r\n                    if (!colors || colors.length < 1) return null;\r\n\r\n                    if (index >= colors.length) {\r\n                        index = 0;\r\n                    }\r\n\r\n                    return materialColorToRgba(colors[index]);\r\n                }                \r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    if (!vm.data) return;\r\n\r\n                    vm.data.forEach(function (item, index) {\r\n                        item.color = item.color || getMaterialColor(index);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipPieCharts\r\n     *\r\n     * @description\r\n     * Line chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipPieCharts', [])\r\n        .directive('pipPieChart', pipPieChart);\r\n\r\n    function pipPieChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                donut: '=pipDonut',\r\n                legend: '=pipShowLegend',\r\n                total: '=pipShowTotal',\r\n                size: '=pipPieSize',\r\n                centered: '=pipCentered'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'pieChart',\r\n            templateUrl: 'pie/pie_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                var vm               = this;\r\n                var chart            = null;\r\n                var titleElem        = null;\r\n                var chartElem        = null;\r\n                var colors           = _.map($mdColorPalette, function (palette, color) {\r\n                    return color;\r\n                });\r\n                colors = _.filter(colors, function(color){\r\n                    return _.isObject($mdColorPalette[color]) && _.isObject($mdColorPalette[color][500] && _.isArray($mdColorPalette[color][500].value));\r\n                });                \r\n                var resizeTitleLabel = resizeTitleLabelUnwrap;\r\n\r\n                vm.data = vm.data || [];\r\n\r\n                vm.showLegend = function () {\r\n                    return vm.legend !== undefined ? vm.legend: true;\r\n                };\r\n\r\n                if (vm.series && vm.series.length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                $scope.$watch('pieChart.series', function (newVal) {\r\n                    vm.data = newVal;\r\n\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                        $timeout(resizeTitleLabel);\r\n                        drawEmptyState(d3.select($element.get(0)).select('.pie-chart svg')[0][0]);\r\n                    }\r\n                }, true);\r\n\r\n                // Sets colors of items\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(() => {\r\n                    chart = nv.models.pieChart()\r\n                        .margin({ top: 0, right: 0, bottom: 0, left: 0 })\r\n                        .x(function (d) {\r\n                            return vm.donut ? d.value : null;\r\n                        })\r\n                        .y(function (d) {\r\n                            return d.value;\r\n                        })\r\n                        .height(vm.size || 250)\r\n                        .width(vm.size || 250)\r\n                        .showLabels(true)\r\n                        .labelThreshold(.001)\r\n                        .growOnHover(false)\r\n                        .donut(vm.donut)\r\n                        .donutRatio(0.5)\r\n                        .color(function(d) {\r\n                            return d.color || (<any>d3.scale).paletteColors().range();\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('There is no data right now...');\r\n                    chart.showLegend(false);\r\n\r\n                    chartElem = d3.select($element.get(0))\r\n                        .select('.pie-chart')\r\n                        .style('height', (vm.size || 250) + 'px')\r\n                        .style('width', vm.centered ? '100%' : (vm.size || 250) + 'px')\r\n                        .select('svg')\r\n                        .style('opacity', 0)\r\n                        .datum(vm.data || [])\r\n                        .call(chart);\r\n\r\n                    nv.utils.windowResize(function () {\r\n                        chart.update();\r\n                        $timeout(resizeTitleLabel);\r\n                        centerChart();\r\n                        drawEmptyState(d3.select($element.get(0)).select('.pie-chart svg')[0][0]);\r\n                    });\r\n\r\n                    return chart;\r\n                }, () => {\r\n                    $timeout(function () {\r\n                        var svgElem  = d3.select($element.get(0)).select('.pie-chart svg')[0][0];\r\n                        renderTotalLabel(svgElem);\r\n                        d3.select(svgElem)\r\n                            .transition()\r\n                            .duration(1000)\r\n                            .style('opacity', 1);\r\n                        \r\n                        $timeout(resizeTitleLabelUnwrap, 800);\r\n                        centerChart();\r\n                        drawEmptyState(svgElem);\r\n                    });\r\n                });\r\n\r\n                function drawEmptyState(svg) {\r\n                    if (!$element.find('text.nv-noData').get(0)) {\r\n                        d3.select($element.find('.empty-state')[0]).remove();\r\n                        $element.find('.pip-empty-pie-text').remove();\r\n                    } else {\r\n                    \r\n                        if ($element.find('.pip-empty-pie-text').length === 0) { \r\n                            $element.find('.pie-chart')\r\n                                .append(\"<div class='pip-empty-pie-text'>There is no data right now...</div>\");\r\n                        }\r\n\r\n                        var pie = d3.layout.pie().sort(null),\r\n                            size = Number(vm.size || 250);\r\n\r\n                        var arc = d3.svg.arc()\r\n                            .innerRadius(size / 2 - 20)\r\n                            .outerRadius(size / 2 - 57);\r\n                    \r\n                        svg = d3.select(svg)\r\n                            .append(\"g\")\r\n                            .classed('empty-state', true)\r\n                            .attr('transform', \"translate(\" + size / 2 + \",\" + size / 2 + \")\");\r\n                    \r\n                        var path = svg.selectAll(\"path\")\r\n                            .data(pie([1]))\r\n                            .enter().append(\"path\")\r\n                            .attr(\"fill\", \"rgba(0, 0, 0, 0.08)\")\r\n                            .attr(\"d\", <any>arc);\r\n                    }\r\n                }\r\n\r\n                function centerChart() {\r\n                    if (vm.centered) {\r\n                        let svgElem  = d3.select($element.get(0)).select('.pie-chart svg')[0][0],\r\n                        leftMargin = $(svgElem).innerWidth() / 2 - (vm.size || 250) / 2;\r\n                        d3.select($element.find('.nv-pieChart')[0]).attr('transform', 'translate(' + leftMargin + ', 0)');\r\n                    }\r\n                }\r\n\r\n                function renderTotalLabel(svgElem) {\r\n                    if ((!vm.total && !vm.donut) || !vm.data) return;\r\n\r\n                    let totalVal = vm.data.reduce(function (sum, curr) {\r\n                        return sum + curr.value;\r\n                    }, 0);\r\n\r\n                    if (totalVal >= 10000) totalVal = (totalVal / 1000).toFixed(1) + 'k';\r\n                    \r\n                    d3.select(svgElem)\r\n                        .select('.nv-pie:not(.nvd3)')\r\n                        .append('text')\r\n                        .classed('label-total', true)\r\n                        .attr('text-anchor', 'middle')\r\n                        .style('dominant-baseline', 'central')\r\n                        .text(totalVal);\r\n\r\n                    titleElem = d3.select($element.find('text.label-total').get(0)).style('opacity', 0);\r\n                }\r\n\r\n                function resizeTitleLabelUnwrap() {\r\n                    if ((!vm.total && !vm.donut) || !vm.data) return;\r\n\r\n                    var boxSize =  $element.find('.nvd3.nv-pieChart').get(0).getBBox();\r\n\r\n                    if (!boxSize.width || !boxSize.height) {\r\n                        return;\r\n                    }\r\n\r\n                    titleElem.style('font-size', ~~boxSize.width / 4.5).style('opacity', 1);\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function getMaterialColor(index) {\r\n                    if (!colors || colors.length < 1) return null;\r\n\r\n                    if (index >= colors.length) {\r\n                        index = 0;\r\n                    }\r\n\r\n                    return materialColorToRgba(colors[index]);\r\n                } \r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    if (!vm.data) return;\r\n\r\n                    vm.data.forEach(function (item, index) {\r\n                        item.color = item.color || getMaterialColor(index);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('bar/bar_chart.html',\n    '<div class=\"bar-chart\"><svg></svg></div><pip-chart-legend pip-series=\"barChart.legend\" pip-interactive=\"barChart.interactiveLegend\"></pip-chart-legend>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('legend/interactive_legend.html',\n    '<div><div class=\"chart-legend-item\" ng-repeat=\"item in series\" ng-show=\"item.values || item.value\"><md-checkbox ng-model=\"item.disabled\" ng-true-value=\"false\" ng-false-value=\"true\" ng-if=\"interactive\" aria-label=\"{{ item.label }}\"><p class=\"legend-item-value\" ng-if=\"item.value\" ng-style=\"{\\'background-color\\': item.color}\">{{ item.value }}</p><p class=\"legend-item-label\">{{:: item.label || item.key }}</p></md-checkbox><div ng-if=\"!interactive\"><span class=\"bullet\" ng-style=\"{\\'background-color\\': item.color}\"></span> <span>{{:: item.label || item.key}}</span></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('line/line_chart.html',\n    '<div class=\"line-chart\" flex=\"auto\" layout=\"column\"><svg class=\"flex-auto\" ng-class=\"{\\'visible-x-axis\\': lineChart.isVisibleX(), \\'visible-y-axis\\': lineChart.isVisibleY()}\"></svg><div class=\"scroll-container\"><div class=\"visual-scroll\"><div class=\"scrolled-block\"></div></div></div><md-button class=\"md-fab md-mini minus-button\" ng-click=\"lineChart.zoomOut()\"><md-icon md-svg-icon=\"icons:minus-circle\"></md-icon></md-button><md-button class=\"md-fab md-mini plus-button\" ng-click=\"lineChart.zoomIn()\"><md-icon md-svg-icon=\"icons:plus-circle\"></md-icon></md-button></div><pip-chart-legend pip-series=\"lineChart.legend\" pip-interactive=\"lineChart.interactiveLegend\"></pip-chart-legend>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipCharts.Templates');\n} catch (e) {\n  module = angular.module('pipCharts.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('pie/pie_chart.html',\n    '<div class=\"pie-chart\" ng-class=\"{\\'circle\\': !pieChart.donut}\"><svg class=\"flex-auto\"></svg></div><pip-chart-legend pip-series=\"pieChart.data\" pip-interactive=\"false\" ng-if=\"pieChart.showLegend()\"></pip-chart-legend>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-charts-html.min.js.map\n","/**\r\n * @file Location control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n\r\n/* global angular, google */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocation\", []);\r\n\r\n    thisModule.directive('pipLocation', \r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipLocationName: '&',\r\n                    pipLocationPos: '&',\r\n                    pipLocationResize: '&',\r\n                    pipShowLocationIcon: '='\r\n                },\r\n                template: \r\n                    function($element, $attrs: any) {\r\n                        function toBoolean(value) {\r\n                            if (value == null) return false;\r\n                            if (!value) return false;\r\n                            value = value.toString().toLowerCase();\r\n                            return value == '1' || value == 'true';\r\n                        }\r\n\r\n                        if (toBoolean($attrs.pipCollapse)) {\r\n                            return String()\r\n                                + '<div class=\"pip-location-name location-collapse\" ng-click=\"pipLocationResize()\" ng-hide=\"!pipLocationName()\"'\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\">'\r\n                                + '<md-icon md-svg-icon=\"icons:location\" class=\"flex-fixed pip-icon\" ng-if=\"pipShowLocationIcon\"></md-icon>'\r\n                                + '<span class=\"pip-location-text\">{{pipLocationName()}}</span> '\r\n                                + '</div>'\r\n                                + '<div class=\"pip-location-container\" ng-hide=\"!pipLocationPos()\"></div>';\r\n                        } else {\r\n                            return String()\r\n                                + '<md-button class=\"pip-location-name\" ng-click=\"pipLocationResize()\" '\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\">'\r\n                                + '<div class=\"layout-align-start-center layout-row w-stretch\">'\r\n                                + '<md-icon md-svg-icon=\"icons:location\" class=\"flex-fixed pip-icon\" ng-if=\"pipShowLocationIcon\"></md-icon>'\r\n                                + '<span class=\"pip-location-text flex\">{{pipLocationName()}}</span>'\r\n                                + '<md-icon md-svg-icon=\"icons:triangle-down\" class=\"flex-fixed\" ng-if=\"!showMap\"></md-icon>'\r\n                                + '<md-icon md-svg-icon=\"icons:triangle-up\" class=\"flex-fixed\" ng-if=\"showMap\"></md-icon>'\r\n                                + '</div></md-button>'\r\n                                + '<div class=\"pip-location-container\"'\r\n                                + 'ng-class=\"pipShowLocationIcon ? \\'pip-location-icon-space\\' : \\'\\'\"></div>';\r\n                        }\r\n                    },\r\n                controller: 'pipLocationController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationController',\r\n        function ($scope, $element, $attrs) {\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            var \r\n                $name = $element.children('.pip-location-name'),\r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null,\r\n                $up = $element.find('.icon-up'),\r\n                $down = $element.find('.icon-down'),\r\n                collapsable = toBoolean($attrs.pipCollapse);\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n                $mapContainer.hide();\r\n            };\r\n\r\n            function generateMap() {\r\n                var location = $scope.pipLocationPos();\r\n                \r\n                // Safeguard for bad coordinates\r\n                if ($scope.showMap == false || location == null\r\n                    || location.coordinates == null\r\n                    || location.coordinates.length < 0) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Determine map coordinates\r\n                var coordinates = new google.maps.LatLng(\r\n                    location.coordinates[0],\r\n                    location.coordinates[1]\r\n                );\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapContainer.show();\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map with point marker\r\n                var \r\n                    mapOptions = {\r\n                        center: coordinates,\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: false,\r\n                        draggable: false\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions);\r\n                    \r\n                new google.maps.Marker({\r\n                    position: coordinates,\r\n                    map: map\r\n                });\r\n            };\r\n\r\n            // Process user actions\r\n            if (!collapsable) {\r\n                $scope.showMap = false;\r\n                $up.hide();\r\n                $mapContainer.hide();\r\n\r\n                $name.click(function (event) {\r\n                    event.stopPropagation();\r\n                    if ($attrs.disabled) return;\r\n                    $scope.showMap = !$scope.showMap;\r\n                    $up[$scope.showMap ? 'show' : 'hide']();\r\n                    $down[!$scope.showMap ? 'show' : 'hide']();\r\n                    generateMap();\r\n                });\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch($scope.pipLocationPos,\r\n                    function (newValue) {\r\n                        generateMap();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location');\r\n\r\n            // Visualize map\r\n            if ($scope.pipLocationPos()) generateMap();\r\n            else clearMap();\r\n        }    \r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Location edit dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n */\r\n \r\n/* global angular, google */\r\n\r\nclass LocationDialogService {\r\n    private _$mdDialog: angular.material.IDialogService;\r\n\r\n    constructor($mdDialog: angular.material.IDialogService) {\r\n        this._$mdDialog = $mdDialog;\r\n    }\r\n\r\n    public show (params, successCallback, cancelCallback) {\r\n        this._$mdDialog.show({\r\n            controller: 'pipLocationEditDialogController',\r\n            controllerAs: '$ctrl',\r\n            templateUrl: 'location_dialog/location_dialog.html',\r\n            locals: {\r\n                locationName: params.locationName,\r\n                locationPos: params.locationPos\r\n            },\r\n            clickOutsideToClose: true\r\n        })\r\n        .then((result) => {\r\n            if (successCallback) {\r\n                successCallback(result);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nclass LocationEditDialogController {\r\n    private _map = null;\r\n    private _marker = null;\r\n    private _$scope: ng.IScope;\r\n    private _$mdDialog: angular.material.IDialogService;\r\n\r\n    public theme: string;\r\n    public locationPos;\r\n    public locationName;\r\n    public supportSet: boolean;\r\n\r\n    constructor(\r\n        $scope: ng.IScope, \r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: angular.ITimeoutService, \r\n        $mdDialog: angular.material.IDialogService,\r\n        locationPos, \r\n        locationName) {\r\n\r\n        this._$mdDialog = $mdDialog;\r\n        this._$scope = $scope;\r\n        this.theme = $rootScope['$theme'];\r\n        this.locationPos = locationPos && locationPos.type == 'Point'\r\n                && locationPos.coordinates && locationPos.coordinates.length == 2\r\n                ? locationPos : null;\r\n        this.locationName = locationName;\r\n        this.supportSet = navigator.geolocation != null;\r\n\r\n         // Wait until dialog is initialized\r\n        $timeout(() => {\r\n            let mapContainer = $('.pip-location-edit-dialog .pip-location-container');\r\n            // Calculate coordinate of the center\r\n            let coordinates = this.locationPos ?\r\n                new google.maps.LatLng(\r\n                    this.locationPos.coordinates[0],\r\n                    this.locationPos.coordinates[1]\r\n                ) : null;\r\n\r\n                // Create the map with point marker\r\n            let mapOptions = {\r\n                center: new google.maps.LatLng(0, 0),\r\n                zoom: 1,\r\n                mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                disableDefaultUI: true\r\n            }\r\n            if (coordinates != null) {\r\n                mapOptions.center = coordinates;\r\n                mapOptions.zoom = 12;\r\n            }\r\n\r\n            this._map = new google.maps.Map(mapContainer[0], mapOptions);\r\n            this._marker = this.createMarker(coordinates);\r\n\r\n                // Fix resizing issue\r\n            setTimeout(() => {\r\n                google.maps.event.trigger(this._map, 'resize');\r\n            }, 1000);\r\n        }, 0);\r\n\r\n        $scope.$on('pipLayoutResized', () => {\r\n            if (this._map == null) return;\r\n            google.maps.event.trigger(this._map, 'resize');\r\n        });\r\n\r\n    }\r\n\r\n    public createMarker (coordinates) {\r\n        if (this._marker) this._marker.setMap(null);\r\n        if (coordinates) {\r\n            this._marker = new google.maps.Marker({ \r\n                position: coordinates, \r\n                map: this._map,\r\n                draggable: true,\r\n                animation: google.maps.Animation.DROP\r\n            });\r\n\r\n            let thisMarker = this._marker;\r\n            google.maps.event.addListener(thisMarker, 'dragend', () => {\r\n                let coordinates = thisMarker.getPosition(); \r\n                    this.changeLocation(coordinates, null);\r\n            });\r\n        } else {\r\n            this._marker = null;\r\n        }\r\n\r\n        return this._marker;\r\n    }\r\n\r\n    public changeLocation(coordinates, tid) {\r\n        this.locationPos = {\r\n            type: 'Point',\r\n            coordinates: [coordinates.lat(), coordinates.lng()]\r\n        };\r\n        this.locationName = null;\r\n\r\n        if (tid == null) {\r\n            // tid = $scope.transaction.begin();\r\n            if (tid == null) return;\r\n        }\r\n\r\n        // Read address\r\n        let geocoder = new google.maps.Geocoder();\r\n        geocoder.geocode({ location: coordinates }, (results, status) => {\r\n            // if ($scope.transaction.aborted(tid)) return;\r\n\r\n            // Process positive response\r\n            if (status == google.maps.GeocoderStatus.OK && results && results.length > 0) {\r\n                this.locationName = results[0].formatted_address;\r\n            }\r\n\r\n                    // $scope.transaction.end();\r\n            this._$scope.$apply();\r\n        })\r\n    }\r\n    public onAddPin() {\r\n        if (this._map == null) return;\r\n\r\n        let coordinates = this._map.getCenter();\r\n            this._marker = this.createMarker(coordinates);\r\n            this.changeLocation(coordinates, null);\r\n    }\r\n\r\n    public onRemovePin() {\r\n        if (this._map == null) return;\r\n        this._marker = this.createMarker(null);\r\n        this.locationPos = null;\r\n        this.locationName = null;\r\n    }\r\n\r\n    public onZoomIn() {\r\n        if (this._map == null) return;\r\n        let zoom = this._map.getZoom();\r\n        this._map.setZoom(zoom + 1);\r\n    }\r\n\r\n    public onZoomOut() {\r\n        if (this._map == null) return;\r\n        let zoom = this._map.getZoom();\r\n        this._map.setZoom(zoom > 1 ? zoom - 1 : zoom);\r\n    }\r\n\r\n    public onSetLocation = function () {\r\n        if (this._map == null) return;\r\n\r\n                // var tid = $scope.transaction.begin();\r\n                // if (tid == null) return;\r\n\r\n        navigator.geolocation.getCurrentPosition(\r\n            (position) => {\r\n                        // if ($scope.transaction.aborted(tid)) return;\r\n\r\n                let coordinates = new google.maps.LatLng(\r\n                    position.coords.latitude, position.coords.longitude);\r\n                this._marker = this.createMarker(coordinates);\r\n                this._map.setCenter(coordinates);\r\n                this._map.setZoom(12);\r\n                this.changeLocation(coordinates, null);\r\n            },\r\n            () => {\r\n                        // $scope.transaction.end();\r\n                this.$scope.$apply();\r\n            },\r\n        {\r\n            maximumAge: 0,\r\n            enableHighAccuracy: true,\r\n            timeout: 5000\r\n        });\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this._$mdDialog.cancel();\r\n    }\r\n\r\n    public onApply(): void {\r\n        this._$mdDialog.hide({\r\n            location: this.locationPos,\r\n            locationPos: this.locationPos,\r\n            locationName: this.locationName   \r\n        })\r\n    }\r\n\r\n    \r\n\r\n}\r\n\r\n(() => {\r\n    'use strict';\r\n    function LocationDialogRun ($injector) {\r\n        let pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'LOCATION_ADD_LOCATION': 'Add location',\r\n                'LOCATION_SET_LOCATION': 'Set location',\r\n                'LOCATION_ADD_PIN': 'Add pin',\r\n                'LOCATION_REMOVE_PIN': 'Remove pin'\r\n            });\r\n            pipTranslate.setTranslations('ru', {\r\n                'LOCATION_ADD_LOCATION': ' ',\r\n                'LOCATION_SET_LOCATION': ' ',\r\n                'LOCATION_ADD_PIN': ' ',\r\n                'LOCATION_REMOVE_PIN': ' '\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    angular.module('pipLocationEditDialog', ['ngMaterial',  'pipLocations.Templates'])\r\n           .run(LocationDialogRun)\r\n           .service('pipLocationEditDialog', LocationDialogService)\r\n           .controller('pipLocationEditDialogController', LocationEditDialogController \r\n        /*function ($scope, $rootScope, $timeout, $mdDialog,  locationPos, locationName) {\r\n\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.locationPos = locationPos && locationPos.type == 'Point'\r\n                && locationPos.coordinates && locationPos.coordinates.length == 2\r\n                ? locationPos : null;\r\n            $scope.locationName = locationName;\r\n            $scope.supportSet = navigator.geolocation != null;\r\n\r\n            // $scope.transaction = pipTransaction('location_edit_dialog', $scope);\r\n\r\n            var map = null, marker = null;\r\n\r\n            function createMarker (coordinates) {\r\n                if (marker) marker.setMap(null);\r\n                \r\n                if (coordinates) {\r\n                    marker = new google.maps.Marker({ \r\n                        position: coordinates, \r\n                        map: map,\r\n                        draggable: true,\r\n                        animation: google.maps.Animation.DROP\r\n                    });\r\n\r\n                    var thisMarker = marker;\r\n                    google.maps.event.addListener(thisMarker, 'dragend', function() {\r\n                       var coordinates = thisMarker.getPosition(); \r\n                       changeLocation(coordinates, null);\r\n                    });\r\n                } else {\r\n                    marker = null;\r\n                }\r\n\r\n                return marker;\r\n            };\r\n\r\n            function changeLocation(coordinates, tid) {\r\n                $scope.locationPos = {\r\n                    type: 'Point',\r\n                    coordinates: [coordinates.lat(), coordinates.lng()]\r\n                };\r\n                $scope.locationName = null;\r\n\r\n                if (tid == null) {\r\n                    // tid = $scope.transaction.begin();\r\n                    if (tid == null) return;\r\n                }\r\n\r\n                // Read address\r\n                var geocoder = new google.maps.Geocoder();\r\n                geocoder.geocode({ location: coordinates }, function(results, status) {\r\n                    // if ($scope.transaction.aborted(tid)) return;\r\n\r\n                    // Process positive response\r\n                    if (status == google.maps.GeocoderStatus.OK\r\n                        && results && results.length > 0) {\r\n                        $scope.locationName = results[0].formatted_address;\r\n                    }\r\n\r\n                    // $scope.transaction.end();\r\n                    $scope.$apply();\r\n                });\r\n            };\r\n\r\n            // Wait until dialog is initialized\r\n            $timeout(function () {\r\n                var mapContainer = $('.pip-location-edit-dialog .pip-location-container');\r\n\r\n                // Calculate coordinate of the center\r\n                var coordinates = $scope.locationPos ?\r\n                    new google.maps.LatLng(\r\n                        $scope.locationPos.coordinates[0],\r\n                        $scope.locationPos.coordinates[1]\r\n                    ) : null;\r\n\r\n                // Create the map with point marker\r\n                var mapOptions = {\r\n                    center: new google.maps.LatLng(0, 0),\r\n                    zoom: 1,\r\n                    mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                    disableDefaultUI: true\r\n                };\r\n                if (coordinates != null) {\r\n                    mapOptions.center = coordinates;\r\n                    mapOptions.zoom = 12;\r\n                }\r\n\r\n                map = new google.maps.Map(mapContainer[0], mapOptions);\r\n                marker = createMarker(coordinates);\r\n\r\n                // Fix resizing issue\r\n                setTimeout(function () {\r\n                    google.maps.event.trigger(map, 'resize');\r\n                }, 1000);\r\n            }, 0);\r\n\r\n            $scope.$on('pipLayoutResized', function (event) {\r\n                if (map == null) return;\r\n                google.maps.event.trigger(map, 'resize');\r\n            });\r\n\r\n            $scope.onAddPin = function () {\r\n                if (map == null) return;\r\n\r\n                var coordinates = map.getCenter();\r\n                marker = createMarker(coordinates);\r\n                changeLocation(coordinates, null);\r\n            };\r\n\r\n            $scope.onRemovePin = function () {\r\n                if (map == null) return;\r\n                marker = createMarker(null);\r\n                $scope.locationPos = null;\r\n                $scope.locationName = null;\r\n            };\r\n\r\n            $scope.onZoomIn = function () {\r\n                if (map == null) return;\r\n                var zoom = map.getZoom();\r\n                map.setZoom(zoom + 1);\r\n            };\r\n\r\n            $scope.onZoomOut = function () {\r\n                if (map == null) return;\r\n                var zoom = map.getZoom();\r\n                map.setZoom(zoom > 1 ? zoom - 1 : zoom);\r\n            };\r\n\r\n            $scope.onSetLocation = function () {\r\n                if (map == null) return;\r\n\r\n                // var tid = $scope.transaction.begin();\r\n                // if (tid == null) return;\r\n\r\n                navigator.geolocation.getCurrentPosition(\r\n                    function (position) {\r\n                        // if ($scope.transaction.aborted(tid)) return;\r\n\r\n                        var coordinates = new google.maps.LatLng(\r\n                            position.coords.latitude, position.coords.longitude);\r\n\r\n                        marker = createMarker(coordinates);\r\n                        map.setCenter(coordinates);\r\n                        map.setZoom(12);\r\n\r\n                        changeLocation(coordinates, null);\r\n                    },\r\n                    function () {\r\n                        // $scope.transaction.end();\r\n                        $scope.$apply();\r\n                    },\r\n                    {\r\n                        maximumAge: 0,\r\n                        enableHighAccuracy: true,\r\n                        timeout: 5000\r\n                    }\r\n                );\r\n            };\r\n\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n\r\n            $scope.onApply = function () {\r\n                $mdDialog.hide({\r\n                    location: $scope.locationPos,\r\n                    locationPos: $scope.locationPos,\r\n                    locationName: $scope.locationName   \r\n                });\r\n            };\r\n        }*/\r\n    );\r\n})();\r\n","/**\r\n * @file Location edit control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationEdit\", ['pipLocationEditDialog']);\r\n\r\n    thisModule.directive('pipLocationEdit',\r\n        function ($parse, $http, pipLocationEditDialog) {\r\n            return {\r\n                restrict: 'EAC',\r\n                scope: {\r\n                    pipLocationName: '=',\r\n                    pipLocationPos: '=',\r\n                    pipLocationHolder: '=',\r\n                    ngDisabled: '&',\r\n                    pipChanged: '&'\r\n                },\r\n                template: String()\r\n                    + '<md-input-container class=\"md-block\">'\r\n                    + '<label>{{ \\'LOCATION\\' | translate }}</label>'\r\n                    + '<input ng-model=\"pipLocationName\"'\r\n                    + 'ng-disabled=\"ngDisabled()\"/></md-input-container>'\r\n                    + '<div class=\"pip-location-empty\" layout=\"column\" layout-align=\"center center\">'\r\n                    + '<md-button class=\"md-raised\" ng-disabled=\"ngDisabled()\" ng-click=\"onSetLocation()\"'\r\n                    + 'aria-label=\"LOCATION_ADD_LOCATION\">'\r\n                    + '<span class=\"icon-location\"></span> {{::\\'LOCATION_ADD_LOCATION\\' | translate }}'\r\n                    + '</md-button></div>'\r\n                    + '<div class=\"pip-location-container\" tabindex=\"{{ ngDisabled() ? -1 : 0 }}\"'\r\n                    + ' ng-click=\"onMapClick($event)\" ng-keypress=\"\"onMapKeyPress($event)\"></div>',\r\n                controller: function ($scope, $element) {\r\n                    $element.find('md-input-container').attr('md-no-float', !!$scope.pipLocationHolder);\r\n                },\r\n                link: function ($scope: any, $element) {\r\n\r\n                    var \r\n                        $empty = $element.children('.pip-location-empty'),\r\n                        $mapContainer = $element.children('.pip-location-container'),\r\n                        $mapControl = null;\r\n\r\n                    function clearMap() {\r\n                        // Remove map control\r\n                        if ($mapControl) $mapControl.remove();\r\n                        $mapControl = null;\r\n\r\n                        // Toggle control visibility\r\n                        $mapContainer.hide();\r\n                        $empty.show();\r\n                    };\r\n\r\n                    function generateMap() {\r\n                        // Safeguard for bad coordinates\r\n                        var location = $scope.pipLocationPos;\r\n                        if (location == null || location.coordinates == null || location.coordinates.length < 0) {\r\n                            clearMap();\r\n                            return;\r\n                        }\r\n\r\n                        // Determine map coordinates\r\n                        var coordinates = new google.maps.LatLng(\r\n                            location.coordinates[0],\r\n                            location.coordinates[1]\r\n                        );\r\n\r\n                        // Clean up the control\r\n                        if ($mapControl) $mapControl.remove();\r\n\r\n                        // Toggle control visibility\r\n                        $mapContainer.show();\r\n                        $empty.hide();\r\n\r\n                        // Add a new map\r\n                        $mapControl = $('<div></div>');\r\n                        $mapControl.appendTo($mapContainer);\r\n\r\n                        // Create the map with point marker\r\n                        var mapOptions = {\r\n                            center: coordinates,\r\n                            zoom: 12,\r\n                            mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                            disableDefaultUI: true,\r\n                            disableDoubleClickZoom: true,\r\n                            scrollwheel: false,\r\n                            draggable: false\r\n                        };\r\n                        var map = new google.maps.Map($mapControl[0], mapOptions);\r\n                        var marker = new google.maps.Marker({\r\n                            position: coordinates,\r\n                            map: map\r\n                        });\r\n                    };\r\n\r\n                    function defineCoordinates() {\r\n                        var locationName = $scope.pipLocationName;\r\n\r\n                        if (locationName == '') {\r\n                            $scope.pipLocationPos = null;\r\n                            clearMap();\r\n                            $scope.$apply();\r\n                            return;\r\n                        }\r\n\r\n                    //    $http.get('http://maps.googleapis.com/maps/api/geocode/json?address=' + locationName)\r\n                    //    .success(function (response) { ... })\r\n                    //    .error(function (response) {... });\r\n\r\n                        var geocoder = new google.maps.Geocoder();\r\n                        geocoder.geocode({ address: locationName }, function(results, status) {\r\n                            $scope.$apply(function() {\r\n                                // Process response\r\n                                if (status == google.maps.GeocoderStatus.OK) {\r\n                                    // Check for empty results\r\n                                    if (results == null || results.length == 0) {\r\n                                        $scope.pipLocationPos = null;\r\n                                        clearMap();\r\n                                        return;\r\n                                    }\r\n\r\n                                    var \r\n                                        geometry = results[0].geometry || {},\r\n                                        location = geometry.location || {};\r\n\r\n                                    // Check for empty results again\r\n                                    if (location.lat == null || location.lng == null) {\r\n                                        $scope.pipLocationPos = null;\r\n                                        clearMap();\r\n                                        return;\r\n                                    }\r\n\r\n                                    $scope.pipLocationPos = {\r\n                                        type: 'Point',\r\n                                        coordinates: [\r\n                                            location.lat(),\r\n                                            location.lng()\r\n                                        ]\r\n                                    };\r\n\r\n                                    //generateMap();                                \r\n                                } \r\n                                // Process error...\r\n                                else {\r\n                                    $scope.pipLocationPos = null;\r\n                                    //clearMap();                                \r\n                                }\r\n                            });\r\n                        });\r\n\r\n                    };\r\n                    var defineCoordinatesDebounced = _.debounce(defineCoordinates, 2000);\r\n\r\n                    // Process user actions\r\n                    \r\n                    $scope.onSetLocation = function() {\r\n                        if ($scope.ngDisabled()) return;\r\n                          \r\n                        pipLocationEditDialog.show(\r\n                            {\r\n                                locationName: $scope.pipLocationName,\r\n                                locationPos: $scope.pipLocationPos\r\n                            },\r\n                            function (result) {\r\n                                var \r\n                                    location = result.location,\r\n                                    locationName = result.locationName;\r\n\r\n                                // Do not change anything if location is about the same\r\n                                if ($scope.pipLocationPos && $scope.pipLocationPos.type == 'Point'\r\n                                    && $scope.pipLocationPos.coordinates.length == 2\r\n                                    && location && location.coordinates.length == 2\r\n                                    && ($scope.pipLocationPos.coordinates[0] - location.coordinates[0]) < 0.0001\r\n                                    && ($scope.pipLocationPos.coordinates[1] - location.coordinates[1]) < 0.0001\r\n                                    && (locationName == $scope.pipLocationName)) {\r\n                                    return;        \r\n                                }\r\n\r\n                                $scope.pipLocationPos = location;\r\n                                $scope.pipLocationName = locationName;\r\n\r\n                                if (locationName == null && location != null) {\r\n                                    $scope.pipLocationName = \r\n                                        '(' + result.location.coordinates[0]\r\n                                        + ',' + result.location.coordinates[1] + ')';\r\n                                }\r\n                                $scope.pipChanged();\r\n                                $mapContainer[0].focus();\r\n                            }\r\n                        );\r\n                    };\r\n\r\n                    $scope.onMapClick = function ($event) {\r\n                        if ($scope.ngDisabled()) return;\r\n\r\n                        $mapContainer[0].focus();\r\n                        $scope.onSetLocation();\r\n                        //$event.stopPropagation();\r\n                    };\r\n\r\n                    $scope.onMapKeyPress = function($event) {\r\n                        if ($scope.ngDisabled()) return;\r\n\r\n                        if ($event.keyCode == 13 || $event.keyCode == 32) {\r\n                            $scope.onSetLocation();\r\n                            //$event.stopPropagation();\r\n                        }  \r\n                    };\r\n\r\n                    // Watch for location name changes\r\n                    $scope.$watch(\r\n                        function () {\r\n                            return $scope.pipLocationName\r\n                        },\r\n                        function (newValue, oldValue) {\r\n                            if (newValue != oldValue)\r\n                                defineCoordinatesDebounced();\r\n                        }\r\n                    );\r\n\r\n                    $scope.$watch(\r\n                        function () {\r\n                            return $scope.pipLocationPos\r\n                        },\r\n                        function () {\r\n                            generateMap();\r\n                        }\r\n                    );\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-location-edit');\r\n\r\n                    // Visualize map\r\n                    if ($scope.pipLocationPos) generateMap();\r\n                    else clearMap();\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Location IP control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve samples in sampler app\r\n */\r\n \r\n/* global angular, google */\r\n\r\ndeclare let google: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationIp\", []);\r\n\r\n    thisModule.directive('pipLocationIp',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipIpaddress: '&',\r\n                    pipExtraInfo: '&'\r\n                },\r\n                template: '<div class=\"pip-location-container\"></div>',\r\n                controller: 'pipLocationIpController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationIpController',\r\n        function ($scope, $element, $attrs, $http) {\r\n\r\n            var \r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null;\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n            }\r\n\r\n            function generateMap(latitude, longitude) {\r\n                // Safeguard for bad coordinates\r\n                if (latitude == null || longitude == null) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Determine map coordinates\r\n                var coordinates = new google.maps.LatLng(\r\n                    latitude,\r\n                    longitude\r\n                );\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map with point marker\r\n                var \r\n                    mapOptions = {\r\n                        center: coordinates,\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: false,\r\n                        draggable: false\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions);\r\n                    \r\n                new google.maps.Marker({\r\n                    position: coordinates,\r\n                    map: map\r\n                });\r\n            }\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            function defineCoordinates() {\r\n                var ipAddress = $scope.pipIpaddress();\r\n\r\n                if (ipAddress == '') {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Todo: Find more reliable geocoding service to locate ip addresses\r\n                $http.jsonp('https://www.geoplugin.net/json.gp?ip=' + ipAddress + '&jsoncallback=JSON_CALLBACK')\r\n                .success(function (response) {\r\n                    if (response != null \r\n                        && response.geoplugin_latitude != null\r\n                        && response.geoplugin_longitude != null) {\r\n                        \r\n                        generateMap(response.geoplugin_latitude, response.geoplugin_longitude);\r\n\r\n                        if ($scope.pipExtraInfo) {\r\n                            var extraInfo = {\r\n                                city: response.geoplugin_city,  \r\n                                regionCode: response.geoplugin_regionCode,  \r\n                                region: response.geoplugin_regionName,  \r\n                                areaCode: response.geoplugin_areaCode,  \r\n                                countryCode: response.geoplugin_countryCode,  \r\n                                country: response.geoplugin_countryName,  \r\n                                continentCode: response.geoplugin_continentCode\r\n                            };\r\n                            $scope.pipExtraInfo({ extraInfo: extraInfo });\r\n                        }\r\n                    } else {\r\n                        clearMap();\r\n                    }\r\n                })\r\n                .error(function (response) {\r\n                    console.error(response);\r\n                    clearMap();\r\n                });\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch(\r\n                    function () {\r\n                        return $scope.pipIpaddress()\r\n                    },\r\n                    function (newValue) {\r\n                        defineCoordinates();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location-ip');\r\n\r\n            // Visualize map\r\n            defineCoordinates();\r\n        }        \r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Location map control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular, google */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipLocationMap\", []);\r\n\r\n    thisModule.directive('pipLocationMap',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipLocationPos: '&',\r\n                    pipLocationPositions: '&',\r\n                    pipIconPath: '&',\r\n                    pipDraggable: '&',\r\n                    pipStretch: '&'\r\n                },\r\n                template: '<div class=\"pip-location-container\"></div>',\r\n                controller: 'pipLocationMapController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipLocationMapController',\r\n        ['$scope', '$element', '$attrs', '$parse', '$timeout', function ($scope, $element, $attrs, $parse, $timeout) {\r\n            var\r\n                $mapContainer = $element.children('.pip-location-container'),\r\n                $mapControl = null,\r\n                stretchMap = $scope.pipStretch() || false,\r\n                iconPath = $scope.pipIconPath();\r\n\r\n            function clearMap() {\r\n                // Remove map control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = null;\r\n            }\r\n\r\n            function checkLocation (loc) {\r\n                return !(loc == null\r\n                || loc.coordinates == null\r\n                || loc.coordinates.length < 0);\r\n            }\r\n\r\n            function determineCoordinates(loc) {\r\n                var point = new google.maps.LatLng(\r\n                    loc.coordinates[0],\r\n                    loc.coordinates[1]\r\n                );\r\n\r\n                point.fill = loc.fill;\r\n                point.stroke = loc.stroke;\r\n\r\n                return point;\r\n            }\r\n\r\n            function toBoolean(value) {\r\n                if (value == null) return false;\r\n                if (!value) return false;\r\n                value = value.toString().toLowerCase();\r\n                return value == '1' || value == 'true';\r\n            }\r\n\r\n            function generateMap() {\r\n                var location = $scope.pipLocationPos(),\r\n                    locations = $scope.pipLocationPositions(),\r\n                    points = [],\r\n                    draggable = $scope.pipDraggable() || false;\r\n\r\n                // Safeguard for bad coordinates\r\n                if (checkLocation(location)) {\r\n                    points.push(determineCoordinates(location));\r\n                } else {\r\n                    if (locations && locations.length && locations.length > 0) {\r\n                        locations.forEach(function (loc) {\r\n                            if (checkLocation(loc)) {\r\n                                points.push(determineCoordinates(loc));\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                if (points.length === 0) {\r\n                    clearMap();\r\n                    return;\r\n                }\r\n\r\n                // Clean up the control\r\n                if ($mapControl) $mapControl.remove();\r\n                $mapControl = $('<div></div>');\r\n                $mapControl.appendTo($mapContainer);\r\n\r\n                // Create the map\r\n                var\r\n                    mapOptions = {\r\n                        center: points[0],\r\n                        zoom: 12,\r\n                        mapTypeId: google.maps.MapTypeId.ROADMAP,\r\n                        disableDefaultUI: true,\r\n                        disableDoubleClickZoom: true,\r\n                        scrollwheel: draggable,\r\n                        draggable: draggable\r\n                    },\r\n                    map = new google.maps.Map($mapControl[0], mapOptions),\r\n                    bounds = new google.maps.LatLngBounds();\r\n\r\n                // Create markers\r\n                points.forEach(function(point) {\r\n                    var icon = {\r\n                        path: iconPath,\r\n                        fillColor: point.fill || '#EF5350',\r\n                        fillOpacity: 1,\r\n                        scale: 1,\r\n                        strokeColor: point.stroke || 'white',\r\n                        strokeWeight: 5\r\n                    };\r\n\r\n                    new google.maps.Marker({\r\n                        position: point,\r\n                        map: map,\r\n                        icon: iconPath ? icon : null\r\n                    });\r\n                    bounds.extend(point);\r\n                });\r\n\r\n                // Auto-config of zoom and center\r\n                if (points.length > 1) map.fitBounds(bounds);\r\n            }\r\n\r\n            // Watch for location changes\r\n            if (toBoolean($attrs.pipRebind)) {\r\n                $scope.$watch(\r\n                    function () {\r\n                        return $scope.pipLocationPos()\r\n                    },\r\n                    function () {\r\n                        generateMap();\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-location-map');\r\n            if (stretchMap) $mapContainer.addClass('stretch');\r\n\r\n            // Visualize map\r\n            if ($scope.pipLocationPos() || $scope.pipLocationPositions()) $timeout(generateMap, 200);\r\n            else clearMap();\r\n        }]\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipLocations', [        \r\n        'pipLocation',\r\n        'pipLocationMap',\r\n        'pipLocationIp',\r\n        'pipLocationEditDialog',\r\n        'pipLocationEdit',\r\n        'pipLocations.Translate'\r\n    ]);\r\n    \r\n})();\r\n\r\n\r\n","(function(module) {\ntry {\n  module = angular.module('pipLocations.Templates');\n} catch (e) {\n  module = angular.module('pipLocations.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('location_dialog/location_dialog.html',\n    '<md-dialog class=\"pip-dialog pip-location-edit-dialog layout-column\" md-theme=\"{{$ctrl.theme}}\"><div class=\"pip-header layout-column layout-align-start-start\"><md-progress-linear ng-show=\"$ctrl.transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\"></md-progress-linear><h3 class=\"flex\">{{ \\'LOCATION_SET_LOCATION\\' | translate }}</h3></div><div class=\"pip-footer\"><div class=\"layout-row layout-align-start-center\"><md-button class=\"md-accent\" ng-click=\"$ctrl.onAddPin()\" ng-show=\"$ctrl.locationPos == null\" ng-disabled=\"$ctrl.transaction.busy()\" aria-label=\"{{ ::\\'LOCATION_ADD_PIN\\' }}\">{{ ::\\'LOCATION_ADD_PIN\\' | translate }}</md-button><md-button class=\"md-accent\" ng-click=\"$ctrl.onRemovePin()\" ng-show=\"$ctrl.locationPos != null\" ng-disabled=\"$ctrl.transaction.busy()\" aria-label=\"{{ ::\\'LOCATION_REMOVE_PIN\\' }}\">{{ ::\\'LOCATION_REMOVE_PIN\\' | translate }}</md-button></div><div class=\"flex\"></div><div class=\"layout-row layout-align-end-center\"><md-button ng-click=\"$ctrl.onCancel()\" aria-label=\"{{ ::\\'CANCEL\\' }}\">{{ ::\\'CANCEL\\' | translate }}</md-button><md-button class=\"md-accent\" ng-click=\"$ctrl.onApply()\" ng-disabled=\"$ctrl.transaction.busy()\" aria-label=\"{{ ::\\'APPLY\\' }}\">{{ ::\\'APPLY\\' | translate }}</md-button></div></div><div class=\"pip-body\"><div class=\"pip-location-container\"></div><md-button class=\"md-icon-button md-fab pip-zoom-in\" ng-click=\"$ctrl.onZoomIn()\" aria-label=\"{{ ::\\'LOCATION_ZOOM_IN\\' }}\"><md-icon md-svg-icon=\"icons:plus\"></md-icon></md-button><md-button class=\"md-icon-button md-fab pip-zoom-out\" ng-click=\"$ctrl.onZoomOut()\" aria-label=\"{{ ::\\'LOCATION_ZOOM_OUT\\' }}\"><md-icon md-svg-icon=\"icons:minus\"></md-icon></md-button><md-button class=\"md-icon-button md-fab pip-set-location\" ng-click=\"$ctrl.onSetLocation()\" aria-label=\"{{ ::\\'LOCATION_SET_LOCATION\\' }}\" ng-show=\"supportSet\" ng-disabled=\"transaction.busy()\"><md-icon md-svg-icon=\"icons:target\"></md-icon></md-button></div></md-dialog>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-locations-html.min.js.map\n","export class ButtonsUpload {\r\n    public title: string;\r\n    public click: Function;\r\n}","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileFailController {\r\n    name: string;\r\n    type: string;\r\n    error: string;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileFailController implements IFileFailController {\r\n    public name: string;\r\n    public type: string;\r\n    public error: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n        this.type = $scope['type'] || 'file';\r\n        this.name = $scope['name'];\r\n        this.buttons = $scope['buttons'] || null;\r\n        this.error = $scope['error'] || null;\r\n        \r\n        $scope.$watch('error', (error: string) => {\r\n            this.error = error;\r\n        })\r\n      \r\n    }\r\n}","\r\nimport {FileSelectController} from './select/FileSelectController';\r\nimport {FileUploadController} from './upload/FileUploadController';\r\nimport {FileSuccessController} from './success/FileSuccessController';\r\nimport {FileFailController} from './fail/FileFailController';\r\nimport {FileUploadService} from './service/FileUploadService';\r\nimport {FileStartController} from './start/FileStartController';\r\n\r\n(() => {\r\n    function fileModelDirective($parse: any) {\r\n        \"ngInject\";\r\n\r\n        return {\r\n            restrict: 'A',\r\n            link: (scope, element, attrs) => {\r\n                let model = $parse(attrs.fileModel);\r\n                let modelSetter = model.assign;\r\n                \r\n                element.bind('change', () => {\r\n                    scope.$apply(() => {\r\n                        modelSetter(scope, element[0].files[0]);\r\n                    });\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n    function fileSelectDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            scope: {\r\n                localFile: '='\r\n            },\r\n            controller: FileSelectController,\r\n            controllerAs: 'vm',\r\n            templateUrl: 'select/FileSelect.html'\r\n        };\r\n    }\r\n\r\n     function fileUploadDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileUploadController,\r\n            controllerAs: 'vm',\r\n            scope: {\r\n                buttonFunction: '=?pipButtonFunctions',\r\n                buttons: '=?pipButtons',\r\n                error: '=?pipError',\r\n                name: '=pipName',\r\n                state: '=pipState',\r\n                type: '=?pipType',\r\n                progress: '=pipProgress'\r\n            },\r\n            templateUrl: 'upload/FileUpload.html'\r\n        };\r\n    }\r\n\r\n     function fileSuccessDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileSuccessController,\r\n            controllerAs: 'vm',\r\n            scope: {\r\n                buttons: '=?pipButtons',\r\n                name: '=pipName',\r\n                type: '=?pipType',\r\n            },\r\n            templateUrl: 'success/FileSuccess.html'\r\n        };\r\n    }\r\n\r\n     function fileFailDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileFailController,\r\n            controllerAs: 'vm',\r\n            scope: {\r\n                buttons: '=?pipButtons',\r\n                name: '=pipName',\r\n                type: '=?pipType',\r\n                error: '=pipError'\r\n            },\r\n            templateUrl: 'fail/FileFail.html'\r\n        };\r\n    }\r\n\r\n    function fileStartDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            replace: true,\r\n            controller: FileStartController,\r\n            controllerAs: 'vm',\r\n            scope: {\r\n                buttons: '=?pipButtons',\r\n                name: '=pipName',\r\n                type: '=?pipType',\r\n                progress: '=pipProgress'\r\n            },\r\n            templateUrl: 'start/FileStart.html'\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipFiles', [])\r\n        .directive('fileModel', fileModelDirective)\r\n        .directive('pipFileSelect', fileSelectDirective)\r\n        .directive('pipFileUpload', fileUploadDirective)\r\n        .directive('pipSuccesUpload', fileSuccessDirective)\r\n        .directive('pipFailUpload', fileFailDirective)\r\n        .directive('pipStartUpload', fileStartDirective)\r\n        .service('pipFileUpload', FileUploadService);\r\n\r\n\r\n})();\r\n","export interface IFileSelectController {\r\n    localFile: any;\r\n    onUploadButtonClick(): void ;\r\n    onDeleteButtonClick(): void;\r\n}\r\n\r\nexport class FileSelectController implements IFileSelectController {\r\n    public localFile: any;\r\n    \r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        this.localFile = $scope['localFile'];\r\n        $scope.$watch('vm.localFile', (item) => {\r\n            $scope['localFile'] = item;\r\n        }) \r\n    }\r\n\r\n    public onUploadButtonClick(): void {\r\n        $('#inp_file').click();\r\n    }\r\n\r\n    public onDeleteButtonClick(): void {\r\n        this.localFile = null;\r\n        let forml = document.getElementById('inp_form');\r\n        (<any>forml).reset();\r\n\r\n    }\r\n}","export class FileUploadState {\r\n    public static All: string[] = ['start', 'upload', 'fail'];\r\n    public static Start: string = 'start';\r\n    public static Upload: string = 'upload';\r\n    public static Fail: string = 'fail';\r\n}\r\n\r\nexport interface IFileUploadService {\r\n    progress: number;\r\n    state: string;\r\n    error: string;\r\n    upload(url: string, file: any, transaction: any, callback?: (data: any, err: any) => void): void;\r\n}\r\n\r\nexport class FileUploadService implements IFileUploadService {\r\n    private _http: ng.IHttpService;\r\n\r\n    public progress: number;\r\n    public state: string;\r\n    public error: string = null;\r\n\r\n    public constructor(\r\n        $http: ng.IHttpService\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._http = $http;\r\n    }\r\n\r\n    public upload(url: string, file: any, callback?: (data: any, err: any) => void): void {\r\n        //console.log(file); \r\n\r\n        let fd = new FormData();\r\n        fd.append('file', file);\r\n        \r\n        this.progress = 0;\r\n        this.state = FileUploadState.Start;\r\n        this._http.post(url, fd, <any>{\r\n            uploadEventHandlers: {\r\n                progress: (e: any) => {\r\n                    if (e.lengthComputable) {\r\n                        this.progress = (e.loaded / e.total) * 100;\r\n                    }\r\n                }\r\n            },\r\n            headers: { 'Content-Type': undefined }\r\n        })    \r\n        .success((response: any) => {\r\n            this.state = FileUploadState.Upload;\r\n\r\n            if (callback) callback(response, null);\r\n        })    \r\n        .error((response: any) => {\r\n            this.state = FileUploadState.Fail;\r\n            this.error = response.Error || response;\r\n\r\n            if (callback) callback(null, response);\r\n        });\r\n    }\r\n}","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileStartController {\r\n    name: string;\r\n    type: string;\r\n    progress: number;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileStartController implements IFileStartController {\r\n    public name: string;\r\n    public progress: number;\r\n    public type: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n        this.type = $scope['type'] || 'file';\r\n        this.name = $scope['name'];\r\n        this.buttons = $scope['buttons'] || null;\r\n        this.progress = $scope['progress'] || null;\r\n      \r\n        $scope.$watch('progress', (progress: number) => {\r\n            this.progress = progress;\r\n        })\r\n    }\r\n}","\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileSuccessController {\r\n    name: string;\r\n    type: string;\r\n    buttons: ButtonsUpload[];\r\n}\r\n\r\nexport class FileSuccessController implements IFileSuccessController {\r\n    public name: string;\r\n    public type: string;\r\n    public buttons: ButtonsUpload[];\r\n\r\n    constructor($scope: ng.IScope) {\r\n        \"ngInject\";\r\n        \r\n        // Init parameters\r\n        this.type = $scope['type'] || 'file';\r\n        this.name = $scope['name'];\r\n        this.buttons = $scope['buttons'] || null;\r\n      \r\n    }\r\n}","\r\nimport {\r\n    IFileUploadService\r\n} from \"../service/FileUploadService\";\r\n\r\nimport {\r\n    ButtonsUpload\r\n} from \"../common/ButtonsUpload\";\r\n\r\nexport interface IFileUploadController {\r\n    name: string;\r\n    type: string;\r\n    state: string;\r\n    progress: number;\r\n    onCancel(): void;\r\n    onRetry(): void;\r\n    onAbort(): void;\r\n}\r\n\r\nexport class FileUploadButtons {\r\n    retry: Function;\r\n    cancel: Function;\r\n    abort: Function;\r\n}\r\n\r\nexport class FileUploadController implements IFileUploadController {\r\n    //private _buttonFunction: FileUploadButtons;\r\n    private _functions: FileUploadButtons;\r\n    public uploadButtons: ButtonsUpload[];\r\n    public failButtons: ButtonsUpload[];\r\n    public startButtons: ButtonsUpload[];\r\n\r\n    public name: string;\r\n    public type: string;\r\n    public state: string;\r\n    public progress: number;\r\n    public buttons: boolean;\r\n    public error: string = null;\r\n\r\n    constructor(\r\n        $scope: ng.IScope\r\n    ) {\r\n        \"ngInject\";\r\n\r\n        this._functions = $scope['buttonFunction'];\r\n        \r\n        // Init parameters\r\n        if (this._functions) {\r\n            this.uploadButtons = [];\r\n            this.failButtons = [\r\n                {title: 'Cancel', click: () => { this.onCancel()}},\r\n                {title: 'Retry', click: () => { this.onRetry()}}\r\n            ];\r\n            this.startButtons = [\r\n                {title: 'Abort', click: () => { this.onAbort() }}\r\n            ];\r\n        }\r\n        this.buttons = $scope['buttons'] || false;\r\n        this.type = $scope['type'] || 'file';\r\n        this.name = $scope['name'];\r\n        this.state = $scope['state'];\r\n        this.error = $scope['error'];\r\n        this.progress = $scope['progress'];\r\n\r\n        $scope.$watch('state', (state: string) => {\r\n            this.state = state;\r\n        })\r\n\r\n        $scope.$watch('error', (error: string) => {\r\n            this.error = error;\r\n        })\r\n\r\n        $scope.$watch('progress', (progress: number) => {\r\n            this.progress = progress;\r\n        })\r\n    }\r\n\r\n    public onCancel(): void {\r\n        if (this._functions.cancel) this._functions.cancel();\r\n    }\r\n\r\n    public onRetry(): void {\r\n        if (this._functions.retry) this._functions.retry();\r\n    }\r\n\r\n    public onAbort() {\r\n        if (this._functions.abort) this._functions.abort();\r\n    }\r\n\r\n}","(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('fail/FileFail.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon color-badge-bg\"><md-icon md-svg-icon=\"icons:cross\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploading {{vm.type}} failed with errors!</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div><div class=\"color-error pip-error\">{{vm.error}}</div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons && vm.buttons.length > 0\"><div><md-button class=\"md-accent\" ng-repeat=\"fail in vm.buttons\" ng-click=\"fail.click()\">{{::fail.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('select/FileSelect.html',\n    '<div class=\"pip-file-select\"><form id=\"inp_form\" class=\"pip-hidden-form\"><input type=\"file\" file-model=\"vm.localFile\" id=\"inp_file\" ng-model=\"vm.localFile\"></form><md-button class=\"md-raised md-accent pip-button\" ng-click=\"vm.onUploadButtonClick()\" ng-if=\"!vm.localFile\">Choose File</md-button><div ng-if=\"vm.localFile.name\" class=\"pip-file layout-row layout-align-start-center\"><md-icon md-svg-icon=\"icons:document\" class=\"pip-icon\"></md-icon><div class=\"flex\"><div class=\"text-body2 text-overflow\">{{vm.localFile.name}}</div><div ng-if=\"vm.localFile.size\" class=\"color-secondary-text\">{{vm.localFile.size}}</div></div><md-button ng-click=\"vm.onDeleteButtonClick()\" class=\"md-icon-button\"><md-icon md-svg-icon=\"icons:cross-circle\"></md-icon></md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('start/FileStart.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon bb-orange\"><md-icon md-svg-icon=\"icons:play\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploading {{::vm.type}}</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div><div><md-progress-linear md-mode=\"determinate\" class=\"md-accent\" value=\"{{vm.progress}}\" ng-if=\"vm.progress < 100\"></md-progress-linear><md-progress-linear md-mode=\"indeterminate\" class=\"md-accent\" ng-if=\"vm.progress == 100\"></md-progress-linear></div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons\"><div><md-button class=\"md-accent\" ng-repeat=\"start in vm.buttons\" ng-click=\"start.click()\">{{start.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('success/FileSuccess.html',\n    '<div class=\"pip-files pip-progress-files\"><div class=\"pip-body pip-scroll pip-progress-body\"><div class=\"layout-row\"><div class=\"pip-progress-icon bb-green\"><md-icon md-svg-icon=\"icons:check\"></md-icon></div><div class=\"pip-progress-content\"><h3 class=\"pip-title\">Uploaded {{::vm.type}} successfully!</h3><div class=\"color-secondary-text pip-subtitle\">{{vm.name}}</div></div></div></div><div class=\"pip-footer layout-row layout-align-end-center\" ng-if=\"vm.buttons && vm.buttons.length > 0\"><div><md-button class=\"md-accent\" ng-repeat=\"start in vm.buttons\" ng-click=\"start.click()\">{{start.title}}</md-button></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipFiles.Templates');\n} catch (e) {\n  module = angular.module('pipFiles.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('upload/FileUpload.html',\n    '<div><pip-succes-upload ng-if=\"vm.state == \\'upload\\'\" pip-name=\"vm.name\" pip-type=\"vm.type\" pip-buttons=\"vm.buttons\"></pip-succes-upload><pip-fail-upload ng-if=\"vm.state == \\'fail\\'\" pip-name=\"vm.name\" pip-type=\"vm.type\" pip-error=\"vm.error\" pip-buttons=\"vm.failButtons\"></pip-fail-upload><pip-start-upload ng-if=\"vm.state == \\'start\\'\" pip-name=\"vm.name\" pip-type=\"vm.type\" pip-progress=\"vm.progress\" pip-buttons=\"vm.startButtons\"></pip-start-upload></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-files-html.min.js.map\n","import './widgets/Widgets';\r\nimport './draggable/Draggable';\r\n\r\n(function () {\r\n  'use strict';\r\n\r\n  angular.module('pipDashboard', [\r\n    'pipWidget', \r\n    'pipDragged', \r\n    'pipWidgetConfigDialog', \r\n    'pipAddDashboardComponentDialog',\r\n    'pipDashboard.Templates',\r\n\r\n    // External pip modules\r\n    'pipLayout',\r\n    'pipLocations',\r\n    'pipDateTime',\r\n    'pipCharts',\r\n    'pipTranslate',\r\n    'pipControls'\r\n  ]);\r\n  \r\n})();\r\n\r\nimport './utility/WidgetTemplateUtility';\r\nimport './dialogs/widget_config/ConfigDialogController';\r\nimport './dialogs/add_component/AddComponentDialogController';\r\nimport './DashboardController';\r\nimport './DashboardComponent';\r\n","(function () {\r\n  'use strict';\r\n\r\n  const pipDashboard = {\r\n    bindings: {\r\n      gridOptions: '=pipGridOptions',\r\n      groupAdditionalActions: '=pipGroupActions',\r\n      groupedWidgets: '=pipGroups'\r\n    },\r\n    controller: 'pipDashboardCtrl',\r\n    controllerAs: 'dashboardCtrl',\r\n    templateUrl: 'Dashboard.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipDashboard')\r\n    .component('pipDashboard', pipDashboard);\r\n})();","'use strict';\r\n\r\nimport { IWidgetTemplateService } from './utility/WidgetTemplateUtility';\r\n\r\nfunction setTranslations($injector) {\r\n  var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n  if (pipTranslate) {\r\n    pipTranslate.setTranslations('en', {\r\n      DROP_TO_CREATE_NEW_GROUP: 'Drop here to create new group',\r\n    });\r\n    pipTranslate.setTranslations('ru', {\r\n      DROP_TO_CREATE_NEW_GROUP: '     '\r\n    });\r\n  }\r\n}\r\n\r\nfunction configureAvailableWidgets(pipAddComponentDialogProvider) {\r\n  pipAddComponentDialogProvider.configWidgetList([\r\n    [{\r\n        title: 'Event',\r\n        icon: 'document',\r\n        name: 'event',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Position',\r\n        icon: 'location',\r\n        name: 'position',\r\n        amount: 0\r\n      }\r\n    ],\r\n    [{\r\n        title: 'Calendar',\r\n        icon: 'date',\r\n        name: 'calendar',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Sticky Notes',\r\n        icon: 'note-take',\r\n        name: 'notes',\r\n        amount: 0\r\n      },\r\n      {\r\n        title: 'Statistics',\r\n        icon: 'tr-statistics',\r\n        name: 'statistics',\r\n        amount: 0\r\n      }\r\n    ]\r\n  ]);\r\n}\r\n\r\nimport { IAddComponentDialogService } from './dialogs/add_component/AddComponentProvider'\r\n\r\nclass draggableOptions {\r\n  tileWidth: number;\r\n  tileHeight: number;\r\n  gutter: number;\r\n  inline: boolean;\r\n}\r\n\r\nlet DEFAULT_GRID_OPTIONS: draggableOptions = {\r\n  tileWidth: 150, // 'px'\r\n  tileHeight: 150, // 'px'\r\n  gutter: 10, // 'px'\r\n  inline: false\r\n};\r\n\r\nclass DashboardController {\r\n  private defaultGroupMenuActions: any = [{\r\n      title: 'Add Component',\r\n      callback: (groupIndex) => {\r\n        this.addComponent(groupIndex);\r\n      }\r\n    },\r\n    {\r\n      title: 'Remove',\r\n      callback: (groupIndex) => {\r\n        this.removeGroup(groupIndex);\r\n      }\r\n    },\r\n    {\r\n      title: 'Configurate',\r\n      callback: (groupIndex) => {\r\n        console.log('configurate group with index:', groupIndex);\r\n      }\r\n    }\r\n  ];\r\n  private _$scope: angular.IScope;\r\n  private _$rootScope: angular.IRootScopeService;\r\n  private _$attrs: any;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _$interpolate: angular.IInterpolateService;\r\n  private _pipAddComponentDialog: IAddComponentDialogService;\r\n  private _pipWidgetTemplate: IWidgetTemplateService;\r\n  private _includeTpl: string = '<pip-{{ type }}-widget group=\"groupIndex\" index=\"index\"' +\r\n    'pip-options=\"$parent.dashboardCtrl.groupedWidgets[groupIndex][\\'source\\'][index].opts\">' +\r\n    '</pip-{{ type }}-widget>';\r\n\r\n  public groupedWidgets: any;\r\n  public draggableGridOptions: draggableOptions;\r\n  public widgetsTemplates: any;\r\n  public groupMenuActions: any = this.defaultGroupMenuActions;\r\n  public widgetsContext: any;\r\n\r\n  constructor(\r\n    $scope: angular.IScope,\r\n    $rootScope: angular.IRootScopeService,\r\n    $attrs: any,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    $interpolate: angular.IInterpolateService,\r\n    pipAddComponentDialog: IAddComponentDialogService,\r\n    pipWidgetTemplate: IWidgetTemplateService\r\n  ) {\r\n    this._$scope = $scope;\r\n    this._$rootScope = $rootScope;\r\n    this._$attrs = $attrs;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    this._$interpolate = $interpolate;\r\n    this._pipAddComponentDialog = pipAddComponentDialog;\r\n    this._pipWidgetTemplate = pipWidgetTemplate;\r\n\r\n    // Add class to style scroll bar\r\n    $element.addClass('pip-scroll');\r\n\r\n    // Set tiles grid options\r\n    this.draggableGridOptions = $scope['gridOptions'] || DEFAULT_GRID_OPTIONS;\r\n\r\n    // Switch inline displaying\r\n    if (this.draggableGridOptions.inline === true) {\r\n      $element.addClass('inline-grid');\r\n    }\r\n    // Extend group's menu actions\r\n    if ($scope['groupAdditionalActions']) angular.extend(this.groupMenuActions, $scope['groupAdditionalActions']);\r\n\r\n    // Compile widgets\r\n    this.widgetsContext = $scope;\r\n    this.compileWidgets();\r\n\r\n    this._$timeout(() => {\r\n      this._$element.addClass('visible');\r\n    }, 700);\r\n  }\r\n\r\n  private compileWidgets() {\r\n    _.each(this.groupedWidgets, (group, groupIndex) => {\r\n        group.removedWidgets = group.removedWidgets || [],\r\n        group.source = group.source.map((widget, index) => {\r\n          // Establish default props\r\n          widget.size = widget.size || {\r\n            colSpan: 1,\r\n            rowSpan: 1\r\n          };\r\n          widget.index = index;\r\n          widget.groupIndex = groupIndex;\r\n          widget.menu = widget.menu || {};\r\n          angular.extend(widget.menu, [{\r\n            title: 'Remove',\r\n            click: (item, params, object) => {\r\n              this.removeWidget(item, params, object);\r\n            }\r\n          }]);\r\n\r\n          return {\r\n            opts: widget,\r\n            template: this._pipWidgetTemplate.getTemplate(widget, this._includeTpl)\r\n          };\r\n        })\r\n    });\r\n  }\r\n\r\n  public addComponent(groupIndex) {\r\n    this._pipAddComponentDialog\r\n      .show(this.groupedWidgets, groupIndex)\r\n      .then((data) => {\r\n        var activeGroup;\r\n\r\n        if (!data) {\r\n          return;\r\n        }\r\n\r\n        if (data.groupIndex !== -1) {\r\n          activeGroup = this.groupedWidgets[data.groupIndex];\r\n        } else {\r\n          activeGroup = {\r\n            title: 'New group',\r\n            source: []\r\n          };\r\n        }\r\n\r\n        this.addWidgets(activeGroup.source, data.widgets);\r\n\r\n        if (data.groupIndex === -1) {\r\n          this.groupedWidgets.push(activeGroup);\r\n        }\r\n\r\n        this.compileWidgets();\r\n      });\r\n  };\r\n\r\n  public removeGroup = (groupIndex) => {\r\n    console.log('removeGroup', groupIndex);\r\n    this.groupedWidgets.splice(groupIndex, 1);\r\n  }\r\n\r\n  private addWidgets(group, widgets) {\r\n    widgets.forEach((widgetGroup) => {\r\n      widgetGroup.forEach((widget) => {\r\n        if (widget.amount) {\r\n          Array.apply(null, Array(widget.amount)).forEach(() => {\r\n            group.push({\r\n              type: widget.name\r\n            });\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private removeWidget(item, params, object) {\r\n    this.groupedWidgets[params.options.groupIndex].removedWidgets = [];\r\n    this.groupedWidgets[params.options.groupIndex].removedWidgets.push(params.options.index);\r\n    this.groupedWidgets[params.options.groupIndex].source.splice(params.options.index, 1);\r\n    this._$timeout(() => {\r\n      this.groupedWidgets[params.options.groupIndex].removedWidgets = [];\r\n    });\r\n  }\r\n\r\n}\r\n\r\nangular\r\n  .module('pipDashboard')\r\n  .config(configureAvailableWidgets)\r\n  .run(setTranslations)\r\n  .controller('pipDashboardCtrl', DashboardController);","'use strict';\r\n\r\nexport class AddComponentDialogController {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    public activeGroupIndex: number;\r\n    public defaultWidgets: any;\r\n    public groups: any;\r\n\r\n    constructor(\r\n        groups, \r\n        activeGroupIndex, \r\n        widgetList,\r\n        $mdDialog: angular.material.IDialogService\r\n    ) {\r\n        this.activeGroupIndex = _.isNumber(activeGroupIndex) ? activeGroupIndex : -1;\r\n        this.defaultWidgets   = _.cloneDeep(widgetList);\r\n        this.groups = _.map(groups, function (group) {\r\n          return group['title'];\r\n        });\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n\r\n    public add () {\r\n          this._mdDialog.hide({\r\n            groupIndex: this.activeGroupIndex,\r\n            widgets   : this.defaultWidgets\r\n          });\r\n        };\r\n\r\n    public cancel () {\r\n          this._mdDialog.cancel();\r\n        };\r\n\r\n    public encrease (groupIndex, widgetIndex) {\r\n          var widget = this.defaultWidgets[groupIndex][widgetIndex];\r\n          widget.amount++;\r\n    };\r\n\r\n    public decrease (groupIndex, widgetIndex) {\r\n          var widget    = this.defaultWidgets[groupIndex][widgetIndex];\r\n          widget.amount = widget.amount ? widget.amount - 1 : 0;\r\n    };\r\n}\r\n\r\nangular\r\n    .module('pipAddDashboardComponentDialog', ['ngMaterial'])\r\n    .controller('pipAddDashboardComponentDialogController', AddComponentDialogController);\r\n\r\nimport './AddComponentProvider';","'use strict';\r\n\r\nexport interface IAddComponentDialogService {\r\n  show(groups, activeGroupIndex): any;\r\n}\r\n\r\nclass AddComponentDialogService implements IAddComponentDialogService {\r\n    public _mdDialog: angular.material.IDialogService;\r\n    private _widgetList: any;\r\n\r\n    public constructor(widgetList: any, $mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n        this._widgetList = widgetList;\r\n    }\r\n\r\n    public show(groups, activeGroupIndex) {\r\n        return this._mdDialog\r\n          .show({\r\n            templateUrl     : 'dialogs/add_component/AddComponent.html',\r\n            bindToController: true,\r\n            controller      : 'pipAddDashboardComponentDialogController',\r\n            controllerAs    : 'dialogCtrl',\r\n            resolve: {\r\n              groups: () => {\r\n                return groups;\r\n              },\r\n              activeGroupIndex: () => {\r\n                return activeGroupIndex;\r\n              },\r\n              widgetList: () => {\r\n                return this._widgetList;\r\n              }\r\n           }\r\n          });\r\n      };\r\n}\r\n\r\nclass AddComponentDialogProvider {\r\n  private _service: AddComponentDialogService;\r\n  private _widgetList: any = null;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  public configWidgetList = function (list) {\r\n      this._widgetList = list;\r\n  };\r\n\r\n  public $get($mdDialog: angular.material.IDialogService) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new AddComponentDialogService(this._widgetList, $mdDialog);\r\n        \r\n        return this._service;\r\n  }\r\n}\r\n\r\nangular\r\n    .module('pipDashboard')\r\n    .provider('pipAddComponentDialog', AddComponentDialogProvider);\r\n","'use strict';\r\n\r\nclass TileColors {\r\n    static all: string[] = ['purple', 'green', 'gray', 'orange', 'blue'];\r\n}\r\n\r\nclass TileSizes {\r\n    static all: any = [\r\n        {name: 'SMALL', id: '11'},\r\n        {name: 'WIDE', id: '21'},\r\n        {name: 'LARGE', id: '22'}\r\n    ];\r\n}\r\n\r\nexport class WidgetConfigDialogController {\r\n    public dialogTitle: string = \"Edit tile\";\r\n    public $mdDialog: angular.material.IDialogService;\r\n    public transclude: any;\r\n    public params: any;\r\n    public colors: string[] = TileColors.all;\r\n    public sizes: any = TileSizes.all;\r\n    public sizeId: string = TileSizes.all[0].id;\r\n\r\n    private _$element: any;\r\n    private _$timeout: angular.ITimeoutService;\r\n\r\n    constructor(\r\n        params,\r\n        $mdDialog: angular.material.IDialogService,\r\n        $compile: angular.ICompileService,\r\n        $timeout: angular.ITimeoutService,\r\n        $injector,\r\n        $scope: angular.IScope,\r\n        $rootScope) {\r\n        \"ngInject\";\r\n\r\n        this.$mdDialog = $mdDialog;\r\n        this._$timeout = $timeout;\r\n\r\n        this.params = params;\r\n        angular.extend(this, this.params);\r\n        this.sizeId = '' + this.params.size.colSpan + this.params.size.rowSpan;\r\n    }\r\n\r\n    public onApply(): void {\r\n        this['size'].sizeX = Number(this.sizeId.substr(0, 1));\r\n        this['size'].sizeY = Number(this.sizeId.substr(1, 1));\r\n        this.$mdDialog.hide(this);\r\n    }\r\n\r\n    public onCancel(): void {\r\n        this.$mdDialog.cancel();\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipWidgetConfigDialog', ['ngMaterial'])\r\n    .controller('pipWidgetConfigDialogController', WidgetConfigDialogController);\r\n\r\nimport './ConfigDialogService';\r\nimport './ConfigDialogExtendComponent';","\r\n(() => {\r\n    'use strict';\r\n    \r\n    function pipWidgetConfigComponent(\r\n        $templateRequest: angular.ITemplateRequestService,\r\n        $compile: angular.ICompileService\r\n    ) {\r\n        return {\r\n            restrict: 'E',\r\n            templateUrl: 'dialogs/widget_config/ConfigDialogExtendComponent.html',\r\n            scope: false,\r\n            link: ($scope: angular.IScope, $element: any, $attrs: any) => {\r\n                $templateRequest($attrs.pipExtensionUrl, false).then((html) => {\r\n                    $element.find('pip-extension-point').replaceWith($compile(html)($scope));\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipWidgetConfigDialog')\r\n        .directive('pipWidgetConfigExtendComponent', pipWidgetConfigComponent);\r\n\r\n})();","export interface IWidgetConfigService {\r\n    show(params: any, successCallback?: (key) => void, cancelCallback?: () => void): any;\r\n}\r\n\r\nclass WidgetConfigDialogService {\r\n  public _mdDialog: angular.material.IDialogService;\r\n    public constructor($mdDialog: angular.material.IDialogService) {\r\n        this._mdDialog = $mdDialog;\r\n    }\r\n    public show(params, successCallback?: (key) => void, cancelCallback?: () => void) {\r\n         this._mdDialog.show({\r\n            targetEvent: params.event,\r\n            templateUrl: params.templateUrl || 'dialogs/widget_config/ConfigDialog.html',\r\n            controller: 'pipWidgetConfigDialogController',\r\n            controllerAs: 'vm',\r\n            locals: {params: params},\r\n            clickOutsideToClose: true\r\n         })\r\n        .then((key) => {\r\n            if (successCallback) {\r\n                successCallback(key);\r\n            }\r\n        }, () => {\r\n            if (cancelCallback) {\r\n                cancelCallback();\r\n            }\r\n        });         \r\n    }\r\n}\r\n\r\n\r\n(() => {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidgetConfigDialog')\r\n    .service('pipWidgetConfigDialogService', WidgetConfigDialogService);\r\n  \r\n})();\r\n","(function () {\r\n  'use strict';\r\n\r\n  angular.module('pipDragged', []);\r\n})();\r\n\r\nimport './DraggableTileService';\r\nimport './DraggableController';\r\nimport './DraggableDirective';\r\nimport './draggable_group/DraggableTilesGroupService'\r\nimport './draggable_group/DraggableTilesGroupDirective'","'use strict';\r\n\r\ndeclare var interact;\r\n\r\nimport { DragTileService, IDragTileService, IDragTileConstructor } from './DraggableTileService';\r\nimport { TilesGridService, ITilesGridService, ITilesGridConstructor } from './draggable_group/DraggableTilesGroupService';\r\n\r\nlet SIMPLE_LAYOUT_COLUMNS_COUNT: number = 2;\r\nexport let DEFAULT_TILE_WIDTH: number = 150;\r\nexport let DEFAULT_TILE_HEIGHT: number = 150;\r\nexport let UPDATE_GROUPS_EVENT = \"pipUpdateDashboardGroupsConfig\";\r\n\r\nlet DEFAULT_OPTIONS = {\r\n    tileWidth              : DEFAULT_TILE_WIDTH,   // 'px'\r\n    tileHeight             : DEFAULT_TILE_HEIGHT,   // 'px'\r\n    gutter                 : 20,    // 'px'\r\n    container              : 'pip-draggable-grid:first-of-type',\r\n    //mobileBreakpoint       : XXX,   // Get from pipMedia Service in the constructor\r\n    activeDropzoneClass    : 'dropzone-active',\r\n    groupContaninerSelector: '.pip-draggable-group:not(.fict-group)',\r\n};\r\n\r\nclass DraggableController {\r\n  public opts: any;\r\n  public groups: any;\r\n  public sourceDropZoneElem: any = null;\r\n  public isSameDropzone: boolean = true;\r\n  public tileGroups: any = null;\r\n  public availableWidth: any;\r\n  public availableColumns: any;\r\n  public groupsContainers: any;\r\n  public container: any;\r\n  public activeDraggedGroup: any;\r\n  public draggedTile: any;\r\n  public containerOffset: any;\r\n\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _$rootScope: angular.IRootScopeService;\r\n  private _$scope: angular.IScope;\r\n  private _$compile: angular.ICompileService;\r\n  private _$element: any;\r\n\r\n  constructor(\r\n    $scope: angular.IScope, \r\n    $rootScope: angular.IRootScopeService, \r\n    $compile: angular.ICompileService, \r\n    $timeout: angular.ITimeoutService,\r\n    $element: any, \r\n    pipDragTile: IDragTileService, \r\n    pipTilesGrid: ITilesGridService,\r\n    pipMedia: pip.layouts.IMediaService\r\n  ) {\r\n    this._$timeout = $timeout;\r\n    this._$rootScope = $rootScope;\r\n    this._$scope = $scope;\r\n    this._$compile = $compile;\r\n    this._$element = $element;\r\n\r\n    this.opts = _.merge({ mobileBreakpoint: pipMedia.breakpoints.xs }, DEFAULT_OPTIONS, $scope['draggableCtrl'].options);\r\n\r\n    this.groups = $scope['draggableCtrl'].tilesTemplates.map((group, groupIndex) => {\r\n      return {\r\n        title : group.title,\r\n        editingName : false,\r\n        index: groupIndex,\r\n        source: group.source.map((tile) => {\r\n          let tileScope = $rootScope.$new(false, $scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex;\r\n\r\n          return IDragTileConstructor(DragTileService, {\r\n            tpl    : $compile(tile.template)(tileScope),\r\n            options: tile.opts,\r\n            size   : tile.opts.size\r\n          });\r\n        })\r\n      };\r\n    });\r\n\r\n    // Add templates watcher\r\n    $scope.$watch('draggableCtrl.tilesTemplates', (newVal) => {\r\n      this.watch(newVal);\r\n    }, true);\r\n\r\n    // Initialize data\r\n    this.initialize();\r\n\r\n    // Resize handler TODO: replace by pip resize watchers\r\n    $(window).on('resize', _.debounce(() => {\r\n      this.availableWidth   = this.getContainerWidth();\r\n      this.availableColumns = this.getAvailableColumns(this.availableWidth);\r\n\r\n      this.tileGroups.forEach((group) => {\r\n        group\r\n          .setAvailableColumns(this.availableColumns)\r\n          .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n          .setTilesDimensions()\r\n          .calcContainerHeight();\r\n      });\r\n    }, 50));\r\n  }\r\n\r\n  // Watch handler\r\n  private watch(newVal) {\r\n      const prevVal = this.groups;\r\n      let changedGroupIndex = null;\r\n\r\n      if (newVal.length > prevVal.length) {\r\n        this.addGroup(newVal[newVal.length - 1]);\r\n\r\n        return;\r\n      }\r\n\r\n      if (newVal.length < prevVal.length) {\r\n        this.removeGroups(newVal);\r\n\r\n        return;\r\n      }\r\n\r\n      for (let i = 0; i < newVal.length; i++) {\r\n        const groupWidgetDiff = prevVal[i].source.length - newVal[i].source.length;\r\n        if (groupWidgetDiff || (newVal[i].removedWidgets && newVal[i].removedWidgets.length > 0)) {\r\n          changedGroupIndex = i;\r\n\r\n          if (groupWidgetDiff < 0) {\r\n            const newTiles = newVal[changedGroupIndex].source.slice(groupWidgetDiff);\r\n            \r\n            _.each(newTiles, (tile) => {\r\n              console.log('tile', tile);\r\n            });\r\n\r\n            this.addTilesIntoGroup(newTiles, this.tileGroups[changedGroupIndex], this.groupsContainers[changedGroupIndex]);\r\n\r\n            this._$timeout(() => { this.updateTilesGroups(); });\r\n          } else {\r\n            this.removeTiles(this.tileGroups[changedGroupIndex], newVal[changedGroupIndex].removedWidgets, this.groupsContainers[changedGroupIndex]);\r\n            this.updateTilesOptions(newVal);\r\n            this._$timeout(() => { this.updateTilesGroups(); });\r\n          }\r\n\r\n          return;\r\n        }\r\n      }\r\n\r\n      if (newVal && this.tileGroups) {\r\n        this.updateTilesOptions(newVal);\r\n        this._$timeout(() => { this.updateTilesGroups(); });\r\n      }\r\n  }\r\n\r\n  // Inline edit group handlers\r\n  public onTitleClick(group, event) {\r\n      if (!group.editingName) {\r\n        group.oldTitle = _.clone(group.title);\r\n        group.editingName = true;\r\n        this._$timeout(() => {\r\n          $(event.currentTarget.children[0]).focus();\r\n        });\r\n      }\r\n  }\r\n\r\n  public cancelEditing (group) {\r\n      group.title = group.oldTitle;\r\n    }\r\n\r\n    public onBlurTitleInput (group) {\r\n      this._$timeout(() => {\r\n        group.editingName = false;\r\n        this._$rootScope.$broadcast(UPDATE_GROUPS_EVENT, this.groups);\r\n        // Update title in outer scope\r\n        this._$scope['draggableCtrl'].tilesTemplates[group.index].title = group.title;\r\n      }, 100);\r\n    }\r\n\r\n    public onKyepressTitleInput (group, event) {\r\n      if (event.keyCode === 13) {\r\n        this.onBlurTitleInput(group);\r\n      }\r\n    }\r\n\r\n    // Update outer scope functions\r\n    private updateTilesTemplates(updateType: string, source?: any) {\r\n      switch(updateType) {\r\n        case 'addGroup': \r\n          if (this.groups.length !== this._$scope['draggableCtrl'].tilesTemplates.length) {\r\n              this._$scope['draggableCtrl'].tilesTemplates.push(source);\r\n          }          \r\n          break;\r\n        case 'moveTile': \r\n          const {fromIndex, toIndex, tileOptions, fromTileIndex} = {\r\n            fromIndex: source.from.elem.attributes['data-group-id'].value,\r\n            toIndex: source.to.elem.attributes['data-group-id'].value,\r\n            tileOptions: source.tile.opts.options,\r\n            fromTileIndex: source.tile.opts.options.index\r\n          }\r\n          this._$scope['draggableCtrl'].tilesTemplates[fromIndex].source.splice(fromTileIndex, 1);\r\n          this._$scope['draggableCtrl'].tilesTemplates[toIndex].source.push({opts: tileOptions});\r\n\r\n          this.reIndexTiles(source.from.elem);\r\n          this.reIndexTiles(source.to.elem);\r\n          break;\r\n      }\r\n    }\r\n\r\n    // Manage tiles functions\r\n    private removeTiles(group, indexes, container) {\r\n      const tiles = $(container).find('.pip-draggable-tile');\r\n\r\n      _.each(indexes, (index) => {\r\n        group.tiles.splice(index, 1);\r\n        tiles[index].remove();\r\n      });\r\n\r\n      this.reIndexTiles(container);\r\n    }\r\n\r\n    private reIndexTiles(container, gIndex?) {\r\n      const tiles = $(container).find('.pip-draggable-tile'),\r\n            groupIndex = gIndex === undefined ? container.attributes['data-group-id'].value : gIndex;\r\n\r\n      _.each(tiles, (tile, index) => {\r\n        let child = $(tile).children()[0];\r\n        angular.element(child).scope()['index'] = index;\r\n        angular.element(child).scope()['groupIndex'] = groupIndex;\r\n      });\r\n    }\r\n\r\n    private removeGroups(newGroups) {\r\n      const removeIndexes = [],\r\n            remain = [],\r\n            containers = [];\r\n\r\n\r\n      _.each(this.groups, (group, index) => {\r\n          if (_.findIndex(newGroups, (g) => { return g['title'] === group.title}) < 0) {\r\n            removeIndexes.push(index);\r\n          } else {\r\n            remain.push(index);\r\n          }\r\n      });\r\n\r\n      _.each(removeIndexes.reverse(), (index) => {\r\n          this.groups.splice(index, 1);\r\n          this.tileGroups.splice(index, 1);\r\n      });\r\n\r\n      _.each(remain, (index) => {\r\n          containers.push(this.groupsContainers[index]);\r\n      });\r\n      \r\n       this.groupsContainers = containers;\r\n\r\n      _.each(this.groupsContainers, (container, index) => {\r\n          this.reIndexTiles(container, index);\r\n      });\r\n    }\r\n\r\n    private addGroup(sourceGroup) {\r\n      let group = {\r\n        title : sourceGroup.title,\r\n        source: sourceGroup.source.map((tile) => {\r\n          let tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n          return IDragTileConstructor(DragTileService, {\r\n            tpl    : this._$compile(tile.template)(tileScope),\r\n            options: tile.opts,\r\n            size   : tile.opts.size\r\n          });\r\n        })\r\n      };\r\n\r\n      this.groups.push(group);\r\n      if (!this._$scope.$$phase) this._$scope.$apply();\r\n\r\n      this._$timeout(() => {\r\n        this.groupsContainers = document.querySelectorAll(this.opts.groupContaninerSelector);\r\n        this.tileGroups.push(\r\n          ITilesGridConstructor(TilesGridService, group.source, this.opts, this.availableColumns, this.groupsContainers[this.groupsContainers.length - 1])\r\n            .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n            .setTilesDimensions()\r\n            .calcContainerHeight()\r\n        );\r\n      });\r\n\r\n      this.updateTilesTemplates('addGroup', sourceGroup);\r\n    }\r\n\r\n    private addTilesIntoGroup(newTiles, group, groupContainer) {\r\n      newTiles.forEach((tile) => {\r\n        const tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n        tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n        tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n\r\n        const newTile = IDragTileConstructor(DragTileService,{\r\n          tpl    : this._$compile(tile.template)(tileScope),\r\n          options: tile.opts,\r\n          size   : tile.opts.size\r\n        });\r\n\r\n        group.addTile(newTile);\r\n\r\n        $('<div>')\r\n          .addClass('pip-draggable-tile')\r\n          .append(newTile.getCompiledTemplate())\r\n          .appendTo(groupContainer);\r\n      });\r\n    }\r\n\r\n    private updateTilesOptions(optionsGroup) {\r\n      optionsGroup.forEach((optionGroup) => {\r\n        optionGroup.source.forEach((tileOptions) => {\r\n          this.tileGroups.forEach((group) => {\r\n            group.updateTileOptions(tileOptions.opts);\r\n          });\r\n        });\r\n      });\r\n    }\r\n\r\n    private initTilesGroups(tileGroups, opts, groupsContainers) {\r\n      return tileGroups.map((group, index) => {\r\n        return ITilesGridConstructor(TilesGridService, group.source, opts, this.availableColumns, groupsContainers[index])\r\n          .generateGrid(this.getSingleTileWidthForMobile(this.availableWidth))\r\n          .setTilesDimensions()\r\n          .calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private updateTilesGroups(onlyPosition?, draggedTile?) {\r\n      this.tileGroups.forEach((group) => {\r\n        if (!onlyPosition) {\r\n          group.generateGrid(this.getSingleTileWidthForMobile(this.availableWidth));\r\n        }\r\n\r\n        group\r\n          .setTilesDimensions(onlyPosition, draggedTile)\r\n          .calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private getContainerWidth(): any {\r\n      const container = this._$scope['$container'] || $('body');\r\n      return container.width();\r\n    }\r\n\r\n    private getAvailableColumns(availableWidth): any {\r\n      return this.opts.mobileBreakpoint > availableWidth ? SIMPLE_LAYOUT_COLUMNS_COUNT\r\n        : Math.floor(availableWidth / (this.opts.tileWidth + this.opts.gutter));\r\n    }\r\n\r\n    private getActiveGroupAndTile(elem): any {\r\n      const active = {};\r\n\r\n      this.tileGroups.forEach((group) => {\r\n        const foundTile = group.getTileByNode(elem);\r\n\r\n        if (foundTile) {\r\n          active['group'] = group;\r\n          active['tile']  = foundTile;\r\n          return;\r\n        }\r\n      });\r\n\r\n      return active;\r\n    }\r\n\r\n    private getSingleTileWidthForMobile(availableWidth): any {\r\n      return this.opts.mobileBreakpoint > availableWidth ? availableWidth / 2 - this.opts.gutter : null;\r\n    }\r\n\r\n    private onDragStartListener(event) {\r\n      const activeEntities = this.getActiveGroupAndTile(event.target);\r\n\r\n      this.container          = $(event.target).parent('.pip-draggable-group').get(0);\r\n      this.draggedTile        = activeEntities['tile'];\r\n      this.activeDraggedGroup = activeEntities['group'];\r\n      \r\n      this._$element.addClass('drag-transfer');\r\n\r\n      this.draggedTile.startDrag();\r\n    }\r\n\r\n    private onDragMoveListener(event) {\r\n      const target = event.target;\r\n      const x      = (parseFloat(target.style.left) || 0) + event.dx;\r\n      const y      = (parseFloat(target.style.top) || 0) + event.dy;\r\n\r\n      this.containerOffset = this.getContainerOffset();\r\n\r\n      target.style.left = x + 'px'; // TODO [apidhirnyi] Extract units into options section\r\n      target.style.top  = y + 'px';\r\n\r\n      const belowElement = this.activeDraggedGroup.getTileByCoordinates({\r\n        left: event.pageX - this.containerOffset.left,\r\n        top : event.pageY - this.containerOffset.top\r\n      }, this.draggedTile);\r\n\r\n      if (belowElement) {\r\n        const draggedTileIndex = this.activeDraggedGroup.getTileIndex(this.draggedTile);\r\n        const belowElemIndex   = this.activeDraggedGroup.getTileIndex(belowElement);\r\n\r\n        if ((draggedTileIndex + 1) === belowElemIndex) {\r\n          return;\r\n        }\r\n\r\n        this.activeDraggedGroup\r\n          .swapTiles(this.draggedTile, belowElement)\r\n          .setTilesDimensions(true, this.draggedTile);\r\n\r\n        this._$timeout(() => { this.setGroupContainersHeight(); }, 0);\r\n      }\r\n    }\r\n\r\n    private onDragEndListener() {\r\n      this.draggedTile.stopDrag(this.isSameDropzone);\r\n\r\n      this._$element.removeClass('drag-transfer');\r\n      this.activeDraggedGroup = null;\r\n      this.draggedTile        = null;\r\n    }\r\n\r\n    private getContainerOffset() {\r\n      const containerRect = this.container.getBoundingClientRect();\r\n\r\n      return {\r\n        left: containerRect.left,\r\n        top : containerRect.top\r\n      };\r\n    }\r\n\r\n    private setGroupContainersHeight() {\r\n      this.tileGroups.forEach((tileGroup) => {\r\n        tileGroup.calcContainerHeight();\r\n      });\r\n    }\r\n\r\n    private moveTile(from, to, tile) {\r\n      let elem;\r\n      const movedTile = from.removeTile(tile);\r\n      const tileScope = this._$rootScope.$new(false, this._$scope['draggableCtrl'].tilesContext);\r\n          tileScope['index'] = tile.opts.index == undefined ? tile.opts.options.index : tile.opts.index ;\r\n          tileScope['groupIndex'] = tile.opts.groupIndex == undefined ? tile.opts.options.groupIndex : tile.opts.groupIndex;\r\n\r\n      $(this.groupsContainers[_.findIndex(this.tileGroups, from)])\r\n        .find(movedTile.getElem())\r\n        .remove();\r\n\r\n      if (to !== null) {\r\n        to.addTile(movedTile);\r\n\r\n        elem = this._$compile(movedTile.getElem())(tileScope);\r\n\r\n        $(this.groupsContainers[_.findIndex(this.tileGroups, to)])\r\n          .append(elem);\r\n\r\n        this._$timeout(to.setTilesDimensions.bind(to, true));\r\n      }\r\n\r\n      this.updateTilesTemplates('moveTile', {from: from, to: to, tile: movedTile});\r\n    }\r\n\r\n    private onDropListener(event) {\r\n      const droppedGroupIndex = event.target.attributes['data-group-id'].value;\r\n      const droppedGroup      = this.tileGroups[droppedGroupIndex];\r\n\r\n      if (this.activeDraggedGroup !== droppedGroup) {\r\n        this.moveTile(this.activeDraggedGroup, droppedGroup, this.draggedTile);\r\n      }\r\n\r\n      this.updateTilesGroups(true);\r\n      this.sourceDropZoneElem = null;\r\n    }\r\n\r\n    private onDropToFictGroupListener(event) {\r\n      const from = this.activeDraggedGroup;\r\n      const tile = this.draggedTile;\r\n\r\n      this.addGroup({title: 'New group', source: []});\r\n      this._$timeout(() => {\r\n        this.moveTile(from, this.tileGroups[this.tileGroups.length - 1], tile);\r\n        this.updateTilesGroups(true);\r\n      });\r\n\r\n      this.sourceDropZoneElem = null;\r\n    }\r\n\r\n    private onDropEnterListener(event) {\r\n      if (!this.sourceDropZoneElem) {\r\n        this.sourceDropZoneElem = event.dragEvent.dragEnter;\r\n      }\r\n\r\n      if (this.sourceDropZoneElem !== event.dragEvent.dragEnter) {\r\n        event.dragEvent.dragEnter.classList.add('dropzone-active');\r\n        $('body').css('cursor', 'copy');\r\n        this.isSameDropzone = false;\r\n      } else {\r\n        $('body').css('cursor', '');\r\n        this.isSameDropzone = true;\r\n      }\r\n    }\r\n\r\n    private onDropDeactivateListener(event) {\r\n      if (this.sourceDropZoneElem !== event.target) {\r\n        event.target.classList.remove(this.opts.activeDropzoneClass);\r\n        $('body').css('cursor', '');\r\n      }\r\n    }\r\n\r\n    private onDropLeaveListener(event) {\r\n      event.target.classList.remove(this.opts.activeDropzoneClass);\r\n    }\r\n\r\n    private initialize() {\r\n      this._$timeout(() => {\r\n        this.availableWidth   = this.getContainerWidth();\r\n        this.availableColumns = this.getAvailableColumns(this.availableWidth);\r\n        this.groupsContainers = document.querySelectorAll(this.opts.groupContaninerSelector);\r\n        this.tileGroups       = this.initTilesGroups(this.groups, this.opts, this.groupsContainers);\r\n\r\n        interact('.pip-draggable-tile')\r\n          .draggable({\r\n            // enable autoScroll\r\n            autoScroll: true,\r\n            onstart: (event) => { this.onDragStartListener(event) },\r\n            onmove : (event) => { this.onDragMoveListener(event) },\r\n            onend  : (event) => { this.onDragEndListener() }\r\n          });\r\n        \r\n        interact('.pip-draggable-group.fict-group')\r\n          .dropzone({\r\n            ondrop: (event) => { console.log('here');  this.onDropToFictGroupListener(event) },\r\n            ondragenter     : (event) => { this.onDropEnterListener(event) },\r\n            ondropdeactivate: (event) => { this.onDropDeactivateListener(event) },\r\n            ondragleave     : (event) => { this.onDropLeaveListener(event) }\r\n          })\r\n        \r\n        interact('.pip-draggable-group')\r\n          .dropzone({\r\n            ondrop          : (event) => { this.onDropListener(event) },\r\n            ondragenter     : (event) => { this.onDropEnterListener(event) },\r\n            ondropdeactivate: (event) => { this.onDropDeactivateListener(event) },\r\n            ondragleave     : (event) => { this.onDropLeaveListener(event) }\r\n          });\r\n\r\n        this._$scope['$container']\r\n          .on('mousedown touchstart', 'md-menu .md-icon-button', () => {\r\n            interact('.pip-draggable-tile').draggable(false);\r\n            $(this).trigger('click');\r\n          })\r\n          .on('mouseup touchend', () => {\r\n            interact('.pip-draggable-tile').draggable(true);\r\n          });\r\n      }, 0);\r\n    }\r\n\r\n}\r\n\r\n\r\nangular\r\n    .module('pipDragged')\r\n    .controller('pipDraggableCtrl', DraggableController);\r\n","'use strict';\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .directive('pipDraggableGrid', DragDirective);\r\n\r\nfunction DragDirective() {\r\n  return {\r\n    restrict: 'E',\r\n    scope: {\r\n      tilesTemplates: '=pipTilesTemplates',\r\n      tilesContext: '=pipTilesContext',\r\n      options: '=pipDraggableGrid',\r\n      groupMenuActions: '=pipGroupMenuActions'\r\n    },\r\n    templateUrl: 'draggable/Draggable.html',\r\n    bindToController: true,\r\n    controllerAs: 'draggableCtrl',\r\n    controller: 'pipDraggableCtrl',\r\n    link: function ($scope, $elem) {\r\n      $scope.$container = $elem;\r\n    }\r\n  };\r\n}","'use strict';\r\n\r\nexport interface DragTileConstructor {\r\n  new (options: any);\r\n}\r\n\r\nexport function IDragTileConstructor(constructor: DragTileConstructor, options: any): IDragTileService {\r\n  return new constructor(options);\r\n}\r\n\r\nexport interface IDragTileService {\r\n  tpl: any;\r\n  opts: any;\r\n  size: any;\r\n  elem: any;\r\n  preview: any;\r\n  getSize(): any;\r\n  setSize(width, height): any;\r\n  setPosition(left, top): any;\r\n  getCompiledTemplate(): any;\r\n  updateElem(parent): any;\r\n  getElem(): any;\r\n  startDrag(): any;\r\n  stopDrag(isAnimate): any;\r\n  setPreviewPosition(coords): void;\r\n  getOptions(): any;\r\n  setOptions(options): any;\r\n}\r\n\r\nlet DEFAULT_TILE_SIZE = {\r\n  colSpan: 1,\r\n  rowSpan: 1\r\n};\r\n\r\nexport class DragTileService implements IDragTileService {\r\n  public tpl: any;\r\n  public opts: any;\r\n  public size: any;\r\n  public elem: any;\r\n  public preview: any;\r\n\r\n  constructor (options: any) {\r\n    this.tpl = options.tpl.get(0);\r\n    this.opts = options;\r\n    this.size = _.merge({}, DEFAULT_TILE_SIZE, options.size);\r\n    this.elem = null;\r\n  }\r\n\r\n  public getSize(): any {\r\n    return this.size;\r\n  }\r\n\r\n  public setSize(width, height): any {\r\n    this.size.width = width;\r\n    this.size.height = height;\r\n\r\n    if (this.elem) {\r\n      this.elem.css({\r\n        width: width,\r\n        height: height\r\n      });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  public setPosition(left, top): any {\r\n    this.size.left = left;\r\n    this.size.top = top;\r\n\r\n    if (this.elem) {\r\n      this.elem.css({\r\n        left: left,\r\n        top: top\r\n      });\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  public getCompiledTemplate(): any {\r\n    return this.tpl;\r\n  };\r\n\r\n  public updateElem(parent): any {\r\n    this.elem = $(this.tpl).parent(parent);\r\n\r\n    return this;\r\n  };\r\n\r\n  public getElem(): any {\r\n    return this.elem.get(0);\r\n  };\r\n\r\n  public startDrag(): any {\r\n    this.preview = $('<div>')\r\n      .addClass('pip-dragged-preview')\r\n      .css({\r\n        position: 'absolute',\r\n        left: this.elem.css('left'),\r\n        top: this.elem.css('top'),\r\n        width: this.elem.css('width'),\r\n        height: this.elem.css('height')\r\n      });\r\n\r\n    this.elem\r\n      .addClass('no-animation')\r\n      .css({\r\n        zIndex: '9999'\r\n      })\r\n      .after(this.preview);\r\n\r\n    return this;\r\n  };\r\n\r\n  public stopDrag(isAnimate): any {\r\n    let self = this;\r\n\r\n    if (isAnimate) {\r\n      this.elem\r\n        .removeClass('no-animation')\r\n        .css({\r\n          left: this.preview.css('left'),\r\n          top: this.preview.css('top')\r\n        })\r\n        .on('transitionend', onTransitionEnd);\r\n    } else {\r\n      self.elem\r\n        .css({\r\n          left: self.preview.css('left'),\r\n          top: self.preview.css('top'),\r\n          zIndex: ''\r\n        })\r\n        .removeClass('no-animation');\r\n\r\n      self.preview.remove();\r\n      self.preview = null;\r\n    }\r\n\r\n    return this;\r\n\r\n    function onTransitionEnd() {\r\n      if (self.preview) {\r\n        self.preview.remove();\r\n        self.preview = null;\r\n      }\r\n\r\n      self.elem\r\n        .css('zIndex', '')\r\n        .off('transitionend', onTransitionEnd);\r\n    }\r\n  };\r\n\r\n  public setPreviewPosition(coords) {\r\n    this.preview.css(coords);\r\n  };\r\n\r\n  public getOptions(): any {\r\n    return this.opts.options;\r\n  };\r\n\r\n  public setOptions(options): any {\r\n    _.merge(this.opts.options, options);\r\n    _.merge(this.size, options.size);\r\n\r\n    return this;\r\n  };\r\n}\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .service('pipDragTile', function () {\r\n    return function (options) {\r\n      let newTile = new DragTileService(options);\r\n\r\n      return newTile;\r\n    }\r\n  });","'use strict';\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .directive('pipDraggableTiles', DraggableTile);\r\n\r\nfunction DraggableTile() {\r\n  return {\r\n    restrict: 'A',\r\n    link: function ($scope, $elem, $attr) {\r\n      var docFrag = document.createDocumentFragment();\r\n      var group = $scope.$eval($attr.pipDraggableTiles);\r\n\r\n      group.forEach(function (tile) {\r\n        var tpl = wrapComponent(tile.getCompiledTemplate());\r\n        docFrag.appendChild(tpl);\r\n      });\r\n\r\n      $elem.append(docFrag);\r\n\r\n      function wrapComponent(elem) {\r\n        return $('<div>')\r\n          .addClass('pip-draggable-tile')\r\n          .append(elem)\r\n          .get(0);\r\n      }\r\n    }\r\n  };\r\n}","'use strict';\r\n\r\nexport interface TilesGridConstructor {\r\n  new (tiles, options, columns, elem);\r\n}\r\n\r\nexport function ITilesGridConstructor(constructor: TilesGridConstructor, tiles, options, columns, elem):ITilesGridService {\r\n  return new constructor(tiles, options, columns, elem);\r\n}\r\n\r\nexport interface ITilesGridService {\r\n  tiles: any;\r\n  opts: any;\r\n  columns: any;\r\n  elem: any;\r\n  gridCells: any;\r\n  inline: boolean;\r\n  isMobileLayout: boolean;\r\n\r\n  addTile(tile): any;\r\n  getCellByPosition(row, col): any;\r\n  getCells(prevCell, rowSpan, colSpan): any;\r\n  getAvailableCellsDesktop(prevCell, rowSpan, colSpan): any;\r\n  getCell(src, basicRow, basicCol, columns): any;\r\n  getAvailableCellsMobile(prevCell, rowSpan, colSpan): any;\r\n  getBasicRow(prevCell): any;\r\n  isCellFree(row, col): any;\r\n  getCellIndex(srcCell): any;\r\n  reserveCells(start, end, elem): void;\r\n  clearElements(): void;\r\n  setAvailableColumns(columns): any;\r\n  generateGrid(singleTileWidth?): any;\r\n  setTilesDimensions(onlyPosition, draggedTile): any;\r\n  calcContainerHeight(): any;\r\n  getTileByNode(node): any;\r\n  getTileByCoordinates(coords, draggedTile): any;\r\n  getTileIndex(tile): any;\r\n  swapTiles(movedTile, beforeTile): any;\r\n  removeTile(removeTile): any;\r\n  updateTileOptions(opts): any;\r\n}\r\n\r\nlet MOBILE_LAYOUT_COLUMNS = 2;\r\n\r\nexport class TilesGridService implements ITilesGridService {\r\n  public tiles: any;\r\n  public opts: any;\r\n  public columns: any;\r\n  public elem: any;\r\n  public gridCells: any = [];\r\n  public inline: boolean = false;\r\n  public isMobileLayout: boolean;\r\n\r\n  constructor(tiles, options, columns, elem) {\r\n    this.tiles = tiles;\r\n    this.opts = options;\r\n    this.columns = columns || 0; // available columns in a row\r\n    this.elem = elem;\r\n    this.gridCells = [];\r\n    this.inline = options.inline || false;\r\n    this.isMobileLayout = columns === MOBILE_LAYOUT_COLUMNS;\r\n  }\r\n\r\n  public addTile(tile): any {\r\n    this.tiles.push(tile);\r\n    if (this.tiles.length === 1) {\r\n      this.generateGrid();\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  public getCellByPosition(row, col): any {\r\n    return this.gridCells[row][col];\r\n  };\r\n\r\n  public getCells(prevCell, rowSpan, colSpan): any {\r\n    if (this.isMobileLayout) {\r\n      return this.getAvailableCellsMobile(prevCell, rowSpan, colSpan);\r\n    } else {\r\n      return this.getAvailableCellsDesktop(prevCell, rowSpan, colSpan);\r\n    }\r\n  };\r\n\r\n  public getAvailableCellsDesktop(prevCell, rowSpan, colSpan): any {\r\n    let leftCornerCell;\r\n    let rightCornerCell;\r\n    let basicCol = prevCell && prevCell.col || 0;\r\n    let basicRow = this.getBasicRow(prevCell);\r\n\r\n    // Small tile\r\n    if (colSpan === 1 && rowSpan === 1) {\r\n      let gridCopy = this.gridCells.slice();\r\n\r\n      if (!prevCell) {\r\n        leftCornerCell = gridCopy[0][0];\r\n      } else {\r\n        leftCornerCell = this.getCell(gridCopy, basicRow, basicCol, this.columns);\r\n\r\n        if (!leftCornerCell) {\r\n          let rowShift = this.isMobileLayout ? 1 : 2;\r\n          leftCornerCell = this.getCell(gridCopy, basicRow + rowShift, 0, this.columns);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Medium tile\r\n    if (colSpan === 2 && rowSpan === 1) {\r\n      let prevTileSize = prevCell && prevCell.elem.size || null;\r\n\r\n      if (!prevTileSize) {\r\n        leftCornerCell = this.getCellByPosition(basicRow, basicCol);\r\n        rightCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n      } else if (prevTileSize.colSpan === 2 && prevTileSize.rowSpan === 2) {\r\n        if (this.columns - basicCol - 2 > 0) {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n        }\r\n      } else if (prevTileSize.colSpan === 2 && prevTileSize.rowSpan === 1) {\r\n        if (prevCell.row % 2 === 0) {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 1, basicCol - 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol);\r\n        } else {\r\n          if (this.columns - basicCol - 3 >= 0) {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          } else {\r\n            leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n            rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n          }\r\n        }\r\n      } else if (prevTileSize.colSpan === 1 && prevTileSize.rowSpan === 1) {\r\n        if (this.columns - basicCol - 3 >= 0) {\r\n          if (this.isCellFree(basicRow, basicCol + 1)) {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          } else {\r\n            leftCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n            rightCornerCell = this.getCellByPosition(basicRow, basicCol + 3);\r\n          }\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 2, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Big tile\r\n    if (!prevCell && rowSpan === 2 && colSpan === 2) {\r\n      leftCornerCell = this.getCellByPosition(basicRow, basicCol);\r\n      rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 1);\r\n    } else if (rowSpan === 2 && colSpan === 2) {\r\n      if (this.columns - basicCol - 2 > 0) {\r\n        if (this.isCellFree(basicRow, basicCol + 1)) {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 1);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 2);\r\n        } else {\r\n          leftCornerCell = this.getCellByPosition(basicRow, basicCol + 2);\r\n          rightCornerCell = this.getCellByPosition(basicRow + 1, basicCol + 3);\r\n        }\r\n      } else {\r\n        leftCornerCell = this.getCellByPosition(basicRow + 2, 0);\r\n        rightCornerCell = this.getCellByPosition(basicRow + 3, 1);\r\n      }\r\n    }\r\n\r\n    return {\r\n      start: leftCornerCell,\r\n      end: rightCornerCell\r\n    };\r\n  };\r\n\r\n  public getCell(src, basicRow, basicCol, columns): any {\r\n    let cell;\r\n    let col;\r\n    let row;\r\n\r\n    if (this.isMobileLayout) {\r\n      // mobile layout\r\n      for (col = basicCol; col < columns; col++) {\r\n        if (!src[basicRow][col].elem) {\r\n          cell = src[basicRow][col];\r\n          break;\r\n        }\r\n      }\r\n\r\n      return cell;\r\n    }\r\n\r\n    // desktop\r\n    for (col = basicCol; col < columns; col++) {\r\n      for (row = 0; row < 2; row++) {\r\n        if (!src[row + basicRow][col].elem) {\r\n          cell = src[row + basicRow][col];\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (cell) {\r\n        return cell;\r\n      }\r\n    }\r\n  };\r\n\r\n  public getAvailableCellsMobile(prevCell, rowSpan, colSpan): any {\r\n    let leftCornerCell;\r\n    let rightCornerCell;\r\n    let basicRow = this.getBasicRow(prevCell);\r\n    let basicCol = prevCell && prevCell.col || 0;\r\n\r\n\r\n    if (colSpan === 1 && rowSpan === 1) {\r\n      let gridCopy = this.gridCells.slice();\r\n\r\n      if (!prevCell) {\r\n        leftCornerCell = gridCopy[0][0];\r\n      } else {\r\n        leftCornerCell = this.getCell(gridCopy, basicRow, basicCol, this.columns);\r\n\r\n        if (!leftCornerCell) {\r\n          let rowShift = this.isMobileLayout ? 1 : 2;\r\n          leftCornerCell = this.getCell(gridCopy, basicRow + rowShift, 0, this.columns);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (!prevCell) {\r\n      leftCornerCell = this.getCellByPosition(basicRow, 0);\r\n      rightCornerCell = this.getCellByPosition(basicRow + rowSpan - 1, 1);\r\n    } else if (colSpan === 2) {\r\n      leftCornerCell = this.getCellByPosition(basicRow + 1, 0);\r\n      rightCornerCell = this.getCellByPosition(basicRow + rowSpan, 1);\r\n    }\r\n\r\n    return {\r\n      start: leftCornerCell,\r\n      end: rightCornerCell\r\n    };\r\n  };\r\n\r\n  public getBasicRow(prevCell): any {\r\n    let basicRow;\r\n\r\n    if (this.isMobileLayout) {\r\n      if (prevCell) {\r\n        basicRow = prevCell && prevCell.row || 0;\r\n      } else {\r\n        basicRow = 0;\r\n      }\r\n    } else {\r\n      if (prevCell) {\r\n        basicRow = prevCell.row % 2 === 0 ? prevCell.row : prevCell.row - 1;\r\n      } else {\r\n        basicRow = 0;\r\n      }\r\n    }\r\n\r\n    return basicRow;\r\n  };\r\n\r\n  public isCellFree(row, col): any {\r\n    return !this.gridCells[row][col].elem;\r\n  };\r\n\r\n  public getCellIndex(srcCell): any {\r\n    let self = this;\r\n    let index;\r\n\r\n    this.gridCells.forEach((row, rowIndex) => {\r\n      index = _.findIndex(self.gridCells[rowIndex], (cell) => {\r\n        return cell === srcCell;\r\n      });\r\n\r\n      if (index !== -1) {\r\n        return;\r\n      }\r\n    });\r\n\r\n    return index !== -1 ? index : 0;\r\n  };\r\n\r\n  public reserveCells(start, end, elem) {\r\n    this.gridCells.forEach((row) => {\r\n      row.forEach((cell) => {\r\n        if (cell.row >= start.row && cell.row <= end.row &&\r\n          cell.col >= start.col && cell.col <= end.col) {\r\n          cell.elem = elem;\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n  public clearElements() {\r\n    this.gridCells.forEach((row) => {\r\n      row.forEach((tile) => {\r\n        tile.elem = null;\r\n      });\r\n    });\r\n  };\r\n\r\n  public setAvailableColumns(columns): any {\r\n    this.isMobileLayout = columns === MOBILE_LAYOUT_COLUMNS;\r\n    this.columns = columns;\r\n\r\n    return this;\r\n  };\r\n\r\n  public generateGrid(singleTileWidth?): any {\r\n    let self = this;\r\n    let colsInRow = 0;\r\n    let rows = 0;\r\n    let tileWidth = singleTileWidth || this.opts.tileWidth;\r\n    let offset = document.querySelector('.pip-draggable-group-title').getBoundingClientRect();\r\n    let gridInRow = [];\r\n\r\n    this.gridCells = [];\r\n\r\n    this.tiles.forEach((tile, index, srcTiles) => {\r\n      let tileSize = tile.getSize();\r\n\r\n      generateCells(tileSize.colSpan);\r\n\r\n      if (srcTiles.length === index + 1) {\r\n        if (colsInRow < self.columns) {\r\n          generateCells(self.columns - colsInRow);\r\n        }\r\n\r\n        // Generate more cells for extends tile size to big\r\n        if (self.tiles.length * 2 > self.gridCells.length) {\r\n          Array.apply(null, Array(self.tiles.length * 2 - self.gridCells.length)).forEach(() => {\r\n            generateCells(self.columns);\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    function generateCells(newCellCount) {\r\n        Array.apply(null, Array(newCellCount)).forEach(() => {\r\n          if (self.columns < colsInRow + 1) {\r\n            rows++;\r\n            colsInRow = 0;\r\n\r\n            self.gridCells.push(gridInRow);\r\n            gridInRow = [];\r\n          }\r\n\r\n          let top = rows * self.opts.tileHeight + (rows ? rows * self.opts.gutter : 0) + offset.height;\r\n          let left = colsInRow * tileWidth + (colsInRow ? colsInRow * self.opts.gutter : 0);\r\n\r\n          // Describe grid cell size through block corners coordinates\r\n          gridInRow.push({\r\n            top: top,\r\n            left: left,\r\n            bottom: top + self.opts.tileHeight,\r\n            right: left + tileWidth,\r\n            row: rows,\r\n            col: colsInRow\r\n          });\r\n\r\n          colsInRow++;\r\n        });\r\n      }\r\n\r\n    return this;\r\n  };\r\n\r\n  public setTilesDimensions(onlyPosition, draggedTile): any {\r\n    let self = this;\r\n    let currIndex = 0;\r\n    let prevCell;\r\n\r\n    if (onlyPosition) {\r\n      self.clearElements();\r\n    }\r\n\r\n    this.tiles.forEach((tile) => {\r\n      let tileSize = tile.getSize();\r\n      let startCell;\r\n      let width;\r\n      let height;\r\n      let cells;\r\n\r\n      tile.updateElem('.pip-draggable-tile');\r\n      if (tileSize.colSpan === 1) {\r\n        if (prevCell && prevCell.elem.size.colSpan === 2 && prevCell.elem.size.rowSpan === 1) {\r\n          startCell = self.getCells(self.getCellByPosition(prevCell.row, prevCell.col - 1), 1, 1).start;\r\n        } else {\r\n          startCell = self.getCells(prevCell, 1, 1).start;\r\n        }\r\n\r\n\r\n        if (!onlyPosition) {\r\n          width = startCell.right - startCell.left;\r\n          height = startCell.bottom - startCell.top;\r\n        }\r\n\r\n        prevCell = startCell;\r\n\r\n        self.reserveCells(startCell, startCell, tile);\r\n\r\n        currIndex++;\r\n      } else if (tileSize.colSpan === 2) {\r\n        cells = self.getCells(prevCell, tileSize.rowSpan, tileSize.colSpan);\r\n        startCell = cells.start;\r\n\r\n        if (!onlyPosition) {\r\n          width = cells.end.right - cells.start.left;\r\n          height = cells.end.bottom - cells.start.top;\r\n        }\r\n\r\n        prevCell = cells.end;\r\n\r\n        self.reserveCells(cells.start, cells.end, tile);\r\n\r\n        currIndex += 2;\r\n      }\r\n\r\n      // Render preview\r\n      // while tiles from group is dragged\r\n      if (draggedTile === tile) {\r\n        tile.setPreviewPosition({\r\n          left: startCell.left,\r\n          top: startCell.top\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      if (!onlyPosition) {\r\n        tile.setSize(width, height);\r\n      }\r\n\r\n      tile.setPosition(startCell.left, startCell.top);\r\n    });\r\n\r\n    return this;\r\n  };\r\n\r\n  public calcContainerHeight(): any {\r\n    let maxHeightSize, maxWidthSize;\r\n\r\n    if (!this.tiles.length) {\r\n      return this;\r\n    }\r\n\r\n    maxHeightSize = _.maxBy(this.tiles, (tile) => {\r\n      let tileSize = tile['getSize']();\r\n      return tileSize.top + tileSize.height;\r\n    })['getSize']();\r\n\r\n    this.elem.style.height = maxHeightSize.top + maxHeightSize.height + 'px';\r\n\r\n    if (this.inline) {\r\n      maxWidthSize = _.maxBy(this.tiles, (tile) => {\r\n        let tileSize = tile['getSize']();\r\n        return tileSize.left + tileSize.width;\r\n      })['getSize']();\r\n\r\n      this.elem.style.width = maxWidthSize.left + maxWidthSize.width + 'px';\r\n    }\r\n\r\n    return this;\r\n  };\r\n\r\n  public getTileByNode(node): any {\r\n    let foundTile = this.tiles.filter((tile) => {\r\n      return node === tile.getElem();\r\n    });\r\n\r\n    return foundTile.length ? foundTile[0] : null;\r\n  };\r\n\r\n  public getTileByCoordinates(coords, draggedTile): any {\r\n    return this.tiles\r\n      .filter((tile) => {\r\n        let tileSize = tile.getSize();\r\n\r\n        return tile !== draggedTile &&\r\n          tileSize.left <= coords.left && coords.left <= (tileSize.left + tileSize.width) &&\r\n          tileSize.top <= coords.top && coords.top <= (tileSize.top + tileSize.height);\r\n      })[0] || null;\r\n  };\r\n\r\n  public getTileIndex(tile): any {\r\n    return _.findIndex(this.tiles, tile);\r\n  };\r\n\r\n  public swapTiles(movedTile, beforeTile): any {\r\n    let movedTileIndex = _.findIndex(this.tiles, movedTile);\r\n    let beforeTileIndex = _.findIndex(this.tiles, beforeTile);\r\n\r\n    this.tiles.splice(movedTileIndex, 1);\r\n    this.tiles.splice(beforeTileIndex, 0, movedTile);\r\n\r\n    return this;\r\n  };\r\n\r\n  public removeTile(removeTile): any {\r\n    let droppedTile;\r\n\r\n    this.tiles.forEach((tile, index, tiles) => {\r\n      if (tile === removeTile) {\r\n        droppedTile = tiles.splice(index, 1)[0];\r\n        return false;\r\n      }\r\n    });\r\n\r\n    return droppedTile;\r\n  };\r\n\r\n  public updateTileOptions(opts): any {\r\n    let index = _.findIndex(this.tiles, (tile) => {\r\n      return tile['getOptions']() === opts;\r\n    });\r\n\r\n    if (index !== -1) {\r\n      this.tiles[index].setOptions(opts);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  };\r\n}\r\n\r\nangular\r\n  .module('pipDragged')\r\n  .service('pipTilesGrid', function () {\r\n    return function (tiles, options, columns, elem) {\r\n      let newGrid = new TilesGridService(tiles, options, columns, elem);\r\n\r\n      return newGrid;\r\n    }\r\n  });","export interface IWidgetTemplateService {\r\n    getTemplate(source, tpl ? , tileScope ? , strictCompile ? ): any;\r\n    setImageMarginCSS($element, image): void;\r\n}\r\n\r\nclass widgetTemplateService implements IWidgetTemplateService {\r\n    private _$interpolate: angular.IInterpolateService;\r\n    private _$compile: angular.ICompileService;\r\n    private _$templateRequest: angular.ITemplateRequestService;\r\n\r\n    constructor(\r\n        $interpolate: angular.IInterpolateService,\r\n        $compile: angular.ICompileService,\r\n        $templateRequest: angular.ITemplateRequestService\r\n    ) {\r\n        this._$interpolate = $interpolate;\r\n        this._$compile = $compile;\r\n        this._$templateRequest = $templateRequest;\r\n    }\r\n\r\n    public getTemplate(source, tpl ? , tileScope ? , strictCompile ? ): any {\r\n        const {\r\n            template,\r\n            templateUrl,\r\n            type\r\n        } = source;\r\n        let result;\r\n\r\n        if (type) {\r\n            const interpolated = tpl ? this._$interpolate(tpl)(source) : this._$interpolate(template)(source);\r\n            return strictCompile == true ?\r\n                (tileScope ? this._$compile(interpolated)(tileScope) : this._$compile(interpolated)) :\r\n                interpolated;\r\n        }\r\n\r\n        if (template) {\r\n            return tileScope ? this._$compile(template)(tileScope) : this._$compile(template);\r\n        }\r\n\r\n        if (templateUrl) {\r\n            this._$templateRequest(templateUrl, false).then((html) => {\r\n                result = tileScope ? this._$compile(html)(tileScope) : this._$compile(html);\r\n            });\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    public setImageMarginCSS($element, image) {\r\n        let\r\n            containerWidth = $element.width ? $element.width() : $element.clientWidth, \r\n            containerHeight = $element.height ? $element.height() : $element.clientHeight,\r\n            imageWidth = (image[0] ? image[0].naturalWidth : image.naturalWidth) || image.width,\r\n            imageHeight = (image[0] ? image[0].naturalHeight : image.naturalWidth) || image.height,\r\n            margin = 0,\r\n            cssParams = {};\r\n\r\n        if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n            margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n            cssParams['margin-left'] = '' + margin + 'px';\r\n            cssParams['height'] = '' + containerHeight + 'px'; //'100%';\r\n            cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px'; //'100%';\r\n            cssParams['margin-top'] = '';\r\n        } else {\r\n            margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n            cssParams['margin-top'] = '' + margin + 'px';\r\n            cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px'; //'100%';\r\n            cssParams['width'] = '' + containerWidth + 'px'; //'100%';\r\n            cssParams['margin-left'] = '';\r\n        }\r\n\r\n        $(image).css(cssParams);\r\n    }\r\n}\r\n\r\n// image load directive TODO: remove to pipImageUtils\r\nfunction ImageLoad($parse) {\r\n    return {\r\n        restrict: 'A',\r\n        link: function(scope, element, attrs) {\r\n            var callback = $parse(attrs.pipImageLoad);\r\n            element.bind('load', (event) => {\r\n                callback(scope, {$event: event});\r\n            });\r\n        } \r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipDashboard')\r\n    .service('pipWidgetTemplate', widgetTemplateService)\r\n    .directive('pipImageLoad', ImageLoad);","(() => {\r\n  'use strict';\r\n\r\n  angular.module('pipWidget', []);\r\n})();\r\n\r\nimport './calendar/WidgetCalendar';\r\nimport './event/WidgetEvent';\r\nimport './menu/WidgetMenuService';\r\nimport './menu/WidgetMenuDirective';\r\nimport './notes/WidgetNotes';\r\nimport './position/WidgetPosition';\r\nimport './statistics/WidgetStatistics';\r\nimport './picture_slider/WidgetPictureSlider';\r\n","import { MenuWidgetService } from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass CalendarWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n\r\n  public color: string = 'blue';\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._configDialog = pipWidgetConfigDialogService;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n        this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n        }});\r\n        this['options'].date = this['options'].date || new Date();\r\n        this.color = this['options'].color || this.color;\r\n      }\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size,\r\n      date: this['options'].date,\r\n      extensionUrl: 'widgets/calendar/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].date = result.date;\r\n    });\r\n  }\r\n\r\n}\r\n\r\n(() => {\r\n\r\n  let pipCalendarWidget = {\r\n      bindings        : {\r\n        options: '=pipOptions',\r\n      },\r\n      controller      : CalendarWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/calendar/WidgetCalendar.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipCalendarWidget', pipCalendarWidget);\r\n\r\n})();\r\n","import { MenuWidgetService} from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass EventWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _oldOpacity: number;\r\n\r\n  public color: string = 'gray';\r\n  public opacity: number = 0.57;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n\r\n    if (this['options']) {\r\n      if (this['options']['menu']) this.menu = _.union(this.menu, this['options']['menu']);\r\n    }\r\n\r\n    this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n    }});\r\n    this.color = this['options'].color || this.color;\r\n    this.opacity = this['options'].opacity || this.opacity;\r\n\r\n    this.drawImage();\r\n\r\n    // TODO it doesn't work\r\n    $scope.$watch(() => { return $element.is(':visible'); }, (newVal) => {\r\n      this.drawImage();\r\n    });\r\n  }\r\n\r\n  private drawImage() {\r\n    if (this['options'].image) {\r\n      this._$timeout(() => {\r\n        this.onImageLoad(this._$element.find('img'));\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._oldOpacity = _.clone(this.opacity);\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size || {colSpan: 1, rowSpan: 1},\r\n      date: this['options'].date,\r\n      title: this['options'].title,\r\n      text: this['options'].text,\r\n      opacity: this.opacity,\r\n      onOpacitytest: (opacity) => {\r\n        this.opacity = opacity;\r\n      },\r\n      extensionUrl: 'widgets/event/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].date = result.date;\r\n      this['options'].title = result.title;\r\n      this['options'].text = result.text;\r\n      this['options'].opacity = result.opacity;\r\n    }, () => {\r\n      this.opacity = this._oldOpacity;\r\n    });\r\n  }\r\n\r\n  private onImageLoad(image) {\r\n    this.setImageMarginCSS(this._$element.parent(), image);\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    if (this['options'].image) {\r\n      this._$timeout(() => {\r\n        this.setImageMarginCSS(this._$element.parent(), this._$element.find('img'));\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  // Later replace by pipImageUtils sevice's function\r\n  private setImageMarginCSS($element, image) {\r\n    let\r\n      containerWidth = $element.width ? $element.width() : $element.clientWidth, // || 80,\r\n      containerHeight = $element.height ? $element.height() : $element.clientHeight, // || 80,\r\n      imageWidth = image[0].naturalWidth || image.width,\r\n      imageHeight = image[0].naturalHeight || image.height,\r\n      margin = 0,\r\n      cssParams = {};\r\n\r\n    if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n      margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n      cssParams['margin-left'] = '' + margin + 'px';\r\n      cssParams['height'] = '' + containerHeight + 'px'; //'100%';\r\n      cssParams['width'] = '' + imageWidth * containerHeight / imageHeight + 'px'; //'100%';\r\n      cssParams['margin-top'] = '';\r\n    } else {\r\n      margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n      cssParams['margin-top'] = '' + margin + 'px';\r\n      cssParams['height'] = '' + imageHeight * containerWidth / imageWidth + 'px'; //'100%';\r\n      cssParams['width'] = '' + containerWidth + 'px'; //'100%';\r\n      cssParams['margin-left'] = '';\r\n    }\r\n\r\n    image.css(cssParams);\r\n  }\r\n}\r\n\r\n\r\n(() => {\r\n  let pipEventWidget =  {\r\n      bindings: {\r\n        options: '=pipOptions'\r\n      },\r\n      controller: EventWidgetController,\r\n      controllerAs: 'widgetCtrl',\r\n      templateUrl: 'widgets/event/WidgetEvent.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipEventWidget', pipEventWidget);\r\n})();","(() => {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .directive('pipMenuWidget', pipMenuWidget);\r\n\r\n  function pipMenuWidget() {\r\n    return {\r\n      restrict        : 'EA',\r\n      templateUrl     : 'widgets/menu/WidgetMenu.html'\r\n    };\r\n  }\r\n})();\r\n","\r\nexport class MenuWidgetService {\r\n  public menu: any = [\r\n    {\r\n      title: 'Change Size',\r\n      action: angular.noop,\r\n      submenu: [{\r\n          title: '1 x 1',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 1,\r\n            sizeY: 1\r\n          }\r\n        },\r\n        {\r\n          title: '2 x 1',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 2,\r\n            sizeY: 1\r\n          }\r\n        },\r\n        {\r\n          title: '2 x 2',\r\n          action: 'changeSize',\r\n          params: {\r\n            sizeX: 2,\r\n            sizeY: 2\r\n          }\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  constructor() {\r\n    \"ngInject\";\r\n  }\r\n\r\n  public callAction(actionName, params, item) {\r\n    if (this[actionName]) {\r\n      this[actionName].call(this, params);\r\n    }\r\n\r\n    if (item['click']) {\r\n      item['click'].call(item, params, this);\r\n    }\r\n  };\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n  };\r\n}\r\n\r\nclass MenuWidgetProvider {\r\n    private _service: MenuWidgetService;\r\n\r\n    constructor() {\r\n    }\r\n\r\n   public $get() {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new MenuWidgetService();\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .provider('pipWidgetMenu', MenuWidgetProvider);\r\n})();","'use strict';\r\n\r\nimport { MenuWidgetService } from '../menu/WidgetMenuService';\r\nimport { IWidgetConfigService } from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass NotesWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n\r\n  public color: string = 'orange';\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    pipWidgetConfigDialogService: IWidgetConfigService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._configDialog = pipWidgetConfigDialogService;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n      }\r\n\r\n      this.menu.push({ title: 'Configurate', click: () => {\r\n          this.onConfigClick();\r\n      }});\r\n      this.color = this['options'].color || this.color;\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-calendar-config',\r\n      color: this.color,\r\n      size: this['options'].size,\r\n      title: this['options'].title,\r\n      text: this['options'].text,\r\n      extensionUrl: 'widgets/notes/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.color = result.color;\r\n      this['options'].color = result.color;\r\n      this.changeSize(result.size);\r\n      this['options'].text = result.text;\r\n      this['options'].title = result.title;\r\n    });\r\n  }\r\n}\r\n\r\n  let pipNotesWidget = {\r\n      bindings           : {\r\n        options: '=pipOptions'\r\n      },\r\n      controller      : NotesWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/notes/WidgetNotes.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipNotesWidget', pipNotesWidget);\r\n\r\n","'use strict';\r\n\r\nimport {\r\n  MenuWidgetService\r\n} from '../menu/WidgetMenuService';\r\nimport {\r\n  IWidgetConfigService\r\n} from '../../dialogs/widget_config/ConfigDialogService';\r\nimport {\r\n  IWidgetTemplateService\r\n} from '../../utility/WidgetTemplateUtility';\r\n\r\nclass PictureSliderController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _widgetUtility: IWidgetTemplateService;\r\n  private _$element: any;\r\n  private _$timeout: angular.ITimeoutService;\r\n\r\n  public animationType: string = 'fading';\r\n  public animationInterval: number = 5000;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $element: any,\r\n    $timeout: angular.ITimeoutService,\r\n    pipWidgetConfigDialogService: IWidgetConfigService,\r\n    pipWidgetTemplate: IWidgetTemplateService\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n    this._widgetUtility = pipWidgetTemplate;\r\n    this._$element = $element;\r\n    this._$timeout = $timeout;\r\n    if (this['options']) {\r\n      this.animationType = this['options'].animationType || this.animationType;\r\n      this.animationInterval = this['options'].animationInterval || this.animationInterval;\r\n    }\r\n  }\r\n\r\n  public onImageLoad($event) {\r\n    this._$timeout(() => {\r\n      this._widgetUtility.setImageMarginCSS(this._$element.parent(), $event.target);\r\n    });\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this._$timeout(() => {\r\n      _.each(this._$element.find('img'), (image) => {\r\n        this._widgetUtility.setImageMarginCSS(this._$element.parent(), image);\r\n      });\r\n    }, 500);\r\n  }\r\n}\r\n\r\nlet pipPictureSliderWidget = {\r\n  bindings: {\r\n    options: '=pipOptions',\r\n    index: '=',\r\n    group: '='\r\n  },\r\n  controller: PictureSliderController,\r\n  templateUrl: 'widgets/picture_slider/WidgetPictureSlider.html',\r\n  controllerAs: 'widgetCtrl'\r\n}\r\n\r\nangular\r\n  .module('pipWidget')\r\n  .component('pipPictureSliderWidget', pipPictureSliderWidget);","import {\r\n  MenuWidgetService\r\n} from '../menu/WidgetMenuService';\r\nimport {\r\n  IWidgetConfigService\r\n} from '../../dialogs/widget_config/ConfigDialogService';\r\n\r\nclass PositionWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$timeout: angular.ITimeoutService;\r\n  private _configDialog: IWidgetConfigService;\r\n  private _locationDialog: any;\r\n\r\n  public showPosition: boolean = true;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $timeout: angular.ITimeoutService,\r\n    $element: any,\r\n    pipWidgetConfigDialogService: IWidgetConfigService,\r\n    pipLocationEditDialog: any,\r\n  ) {\r\n    super();\r\n    this._$scope = $scope;\r\n    this._$timeout = $timeout;\r\n    this._configDialog = pipWidgetConfigDialogService;\r\n    this._locationDialog = pipLocationEditDialog;\r\n\r\n    if (this['options']) {\r\n      if (this['options']['menu']) this.menu = _.union(this.menu, this['options']['menu']);\r\n    }\r\n\r\n    this.menu.push({\r\n      title: 'Configurate',\r\n      click: () => {\r\n        this.onConfigClick();\r\n      }\r\n    });\r\n    this.menu.push({\r\n      title: 'Change location',\r\n      click: () => {\r\n        this.openLocationEditDialog();\r\n      }\r\n    });\r\n\r\n    this['options'].location = this['options'].location || this['options'].position;\r\n\r\n    $scope.$watch('widgetCtrl.options.location', () => {\r\n      this.reDrawPosition();\r\n    });\r\n\r\n    // TODO it doesn't work\r\n    $scope.$watch(() => { return $element.is(':visible'); }, (newVal) => {\r\n      if (newVal == true) this.reDrawPosition();\r\n    });\r\n  }\r\n\r\n  private onConfigClick() {\r\n    this._configDialog.show({\r\n      dialogClass: 'pip-position-config',\r\n      size: this['options'].size,\r\n      locationName: this['options'].locationName,\r\n      hideColors: true,\r\n      extensionUrl: 'widgets/position/ConfigDialogExtension.html'\r\n    }, (result: any) => {\r\n      this.changeSize(result.size);\r\n      this['options'].locationName = result.locationName;\r\n    });\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this.reDrawPosition();\r\n  }\r\n\r\n  public openLocationEditDialog() {\r\n    this._locationDialog.show({\r\n      locationName: this['options'].locationName,\r\n      locationPos: this['options'].location\r\n    }, (newPosition) => {\r\n      if (newPosition) {\r\n        this['options'].location = newPosition.location;\r\n        this['options'].locationName = newPosition.locatioName;\r\n      }\r\n    });\r\n  }\r\n\r\n  private reDrawPosition() {\r\n    this.showPosition = false;\r\n    this._$timeout(() => {\r\n      this.showPosition = true;\r\n    }, 50);\r\n  }\r\n}\r\n\r\n\r\nlet pipPositionWidget = {\r\n  bindings: {\r\n    options: '=pipOptions',\r\n    index: '=',\r\n    group: '='\r\n  },\r\n  controller: PositionWidgetController,\r\n  controllerAs: 'widgetCtrl',\r\n  templateUrl: 'widgets/position/WidgetPosition.html'\r\n}\r\n\r\nangular\r\n  .module('pipWidget')\r\n  .component('pipPositionWidget', pipPositionWidget);","import { MenuWidgetService } from '../menu/WidgetMenuService';\r\n\r\nlet SMALL_CHART: number = 70;\r\nlet BIG_CHART: number = 250;\r\n\r\nclass StatisticsWidgetController extends MenuWidgetService {\r\n  private _$scope: angular.IScope;\r\n  private _$timeout: angular.ITimeoutService;\r\n\r\n  public reset: boolean = false;\r\n  public chartSize: number = SMALL_CHART;\r\n\r\n  constructor(\r\n    pipWidgetMenu: any,\r\n    $scope: angular.IScope,\r\n    $timeout: angular.ITimeoutService\r\n  ) {\r\n      super();\r\n      this._$scope = $scope;\r\n      this._$timeout = $timeout;\r\n\r\n      if (this['options']) {\r\n        this.menu = this['options']['menu'] ? _.union(this.menu, this['options']['menu']) : this.menu;\r\n      }\r\n\r\n      this.setChartSize();\r\n  }\r\n\r\n  public changeSize(params) {\r\n    this['options'].size.colSpan = params.sizeX;\r\n    this['options'].size.rowSpan = params.sizeY;\r\n\r\n    this.reset = true;\r\n    this.setChartSize();\r\n    this._$timeout(() => {\r\n      this.reset = false;\r\n    }, 500);\r\n  }\r\n\r\n  private setChartSize() {\r\n    this.chartSize = this['options'].size.colSpan == 2 && this['options'].size.rowSpan == 2 ? BIG_CHART : SMALL_CHART;\r\n  }\r\n}\r\n\r\n(() => {\r\n  'use strict';\r\n\r\n  let pipStatisticsWidget = {\r\n      bindings           : {\r\n        options: '=pipOptions'\r\n      },\r\n      bindToController: true,\r\n      controller      : StatisticsWidgetController,\r\n      controllerAs    : 'widgetCtrl',\r\n      templateUrl     : 'widgets/statistics/WidgetStatistics.html'\r\n  }\r\n\r\n  angular\r\n    .module('pipWidget')\r\n    .component('pipStatisticsWidget', pipStatisticsWidget);\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('Dashboard.html',\n    '<md-button class=\"md-accent md-raised md-fab layout-column layout-align-center-center\" aria-label=\"Add component\" ng-click=\"dashboardCtrl.addComponent()\"><md-icon md-svg-icon=\"icons:plus\" class=\"md-headline centered-add-icon\"></md-icon></md-button><div class=\"pip-draggable-grid-holder\"><pip-draggable-grid pip-tiles-templates=\"dashboardCtrl.groupedWidgets\" pip-tiles-context=\"dashboardCtrl.widgetsContext\" pip-draggable-grid=\"dashboardCtrl.draggableGridOptions\" pip-group-menu-actions=\"dashboardCtrl.groupMenuActions\"></pip-draggable-grid><md-progress-circular md-mode=\"indeterminate\" class=\"progress-ring\"></md-progress-circular></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('draggable/Draggable.html',\n    '<div class=\"pip-draggable-holder\"><div class=\"pip-draggable-group\" ng-repeat=\"group in draggableCtrl.groups\" data-group-id=\"{{ $index }}\" pip-draggable-tiles=\"group.source\"><div class=\"pip-draggable-group-title layout-row layout-align-start-center\"><div class=\"title-input-container\" ng-click=\"draggableCtrl.onTitleClick(group, $event)\"><input ng-if=\"group.editingName\" ng-blur=\"draggableCtrl.onBlurTitleInput(group)\" ng-keypress=\"draggableCtrl.onKyepressTitleInput(group, $event)\" ng-model=\"group.title\"><div class=\"text-overflow flex-none\" ng-if=\"!group.editingName\">{{ group.title }}</div></div><md-button class=\"md-icon-button flex-none layout-align-center-center\" ng-show=\"group.editingName\" ng-click=\"draggableCtrl.cancelEditing(group)\" aria-label=\"Cancel\"><md-icon md-svg-icon=\"icons:cross\"></md-icon></md-button><md-menu class=\"flex-none layout-column\" md-position-mode=\"target-right target\" ng-show=\"!group.editingName\"><md-button class=\"md-icon-button flex-none layout-align-center-center\" ng-click=\"$mdOpenMenu(); groupId = $index\" aria-label=\"Menu\"><md-icon md-svg-icon=\"icons:dots\"></md-icon></md-button><md-menu-content width=\"4\"><md-menu-item ng-repeat=\"action in draggableCtrl.groupMenuActions\"><md-button ng-click=\"action.callback(groupId)\">{{ action.title }}</md-button></md-menu-item></md-menu-content></md-menu></div></div><div class=\"pip-draggable-group fict-group layout-align-center-center layout-column tm16\"><div class=\"fict-group-text-container\"><md-icon md-svg-icon=\"icons:plus\"></md-icon>{{ \\'DROP_TO_CREATE_NEW_GROUP\\' | translate }}</div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/add_component/AddComponent.html',\n    '<md-dialog class=\"pip-dialog pip-add-component-dialog\"><md-dialog-content class=\"layout-column\"><div class=\"theme-divider p16 flex-auto\"><h3 class=\"hide-xs m0 bm16 theme-text-primary\" hide-xs=\"\">Add component<md-input-container class=\"layout-row flex-auto m0\"><md-select class=\"flex-auto m0 theme-text-primary\" ng-model=\"dialogCtrl.activeGroupIndex\" placeholder=\"Create New Group\" aria-label=\"Group\"><md-option ng-value=\"$index\" ng-repeat=\"group in dialogCtrl.groups\">{{ group }}</md-option></md-select></md-input-container></h3></div><div class=\"pip-body pip-scroll p0 flex-auto\"><p class=\"md-body-1 theme-text-secondary m0 lp16 rp16\">Use \"Enter\" or \"+\" buttons on keyboard to encrease and \"Delete\" or \"-\" to decrease tiles amount</p><md-list ng-init=\"groupIndex = $index\" ng-repeat=\"group in dialogCtrl.defaultWidgets\"><md-list-item class=\"layout-row pip-list-item lp16 rp16\" ng-repeat=\"item in group\"><div class=\"icon-holder flex-none\"><md-icon md-svg-icon=\"icons:{{:: item.icon }}\"></md-icon><div class=\"pip-badge theme-badge md-warn\" ng-if=\"item.amount\"><span>{{ item.amount }}</span></div></div><span class=\"flex-auto lm24 theme-text-primary\">{{:: item.title }}</span><md-button class=\"md-icon-button flex-none\" ng-click=\"dialogCtrl.encrease(groupIndex, $index)\" aria-label=\"Encrease\"><md-icon md-svg-icon=\"icons:plus-circle\"></md-icon></md-button><md-button class=\"md-icon-button flex-none\" ng-click=\"dialogCtrl.decrease(groupIndex, $index)\" aria-label=\"Decrease\"><md-icon md-svg-icon=\"icons:minus-circle\"></md-icon></md-button></md-list-item><md-divider class=\"lm72 tm8 bm8\" ng-if=\"groupIndex !== (dialogCtrl.defaultWidgets.length - 1)\"></md-divider></md-list></div></md-dialog-content><md-dialog-actions class=\"flex-none layout-align-end-center theme-divider divider-top theme-text-primary\"><md-button ng-click=\"dialogCtrl.cancel()\" aria-label=\"Add\">Cancel</md-button><md-button ng-click=\"dialogCtrl.add()\" arial-label=\"Cancel\">Add</md-button></md-dialog-actions></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/widget_config/ConfigDialog.html',\n    '<md-dialog class=\"pip-dialog pip-widget-config-dialog {{ vm.params.dialogClass }}\" width=\"400\" md-theme=\"{{vm.theme}}\"><pip-widget-config-extend-component class=\"layout-column\" pip-extension-url=\"{{ vm.params.extensionUrl }}\"></pip-widget-config-extend-component></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dialogs/widget_config/ConfigDialogExtendComponent.html',\n    '<h3 class=\"tm0 flex-none\">{{vm.dialogTitle}}</h3><div class=\"pip-body pip-scroll p16 bp0 flex-auto\"><pip-extension-point></pip-extension-point><pip-toggle-buttons class=\"bm16\" ng-if=\"!vm.hideSizes\" pip-buttons=\"vm.sizes\" ng-model=\"vm.sizeId\"></pip-toggle-buttons><pip-color-picker ng-if=\"!vm.hideColors\" pip-colors=\"vm.colors\" ng-model=\"vm.color\"></pip-color-picker></div><div class=\"pip-footer flex-none\"><div><md-button class=\"md-accent\" ng-click=\"vm.onCancel()\">Cancel</md-button><md-button class=\"md-accent\" ng-click=\"vm.onApply()\">Apply</md-button></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/calendar/ConfigDialogExtension.html',\n    '<div class=\"w-stretch bm16\">Date:<md-datepicker ng-model=\"vm.date\" class=\"w-stretch\"></md-datepicker></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/calendar/WidgetCalendar.html',\n    '<div class=\"widget-box pip-calendar-widget {{ widgetCtrl.color }} layout-column layout-fill tp0\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><div class=\"widget-heading layout-row layout-align-end-center flex-none\"><pip-menu-widget></pip-menu-widget></div><div class=\"widget-content flex-auto layout-row layout-align-center-center\" ng-if=\"widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1\"><span class=\"date lm24 rm12\">{{ widgetCtrl.options.date.getDate() }}</span><div class=\"flex-auto layout-column\"><span class=\"weekday md-headline\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"month-year md-headline\">{{ widgetCtrl.options.date | formatLongMonth }} {{ widgetCtrl.options.date | formatYear }}</span></div></div><div class=\"widget-content flex-auto layout-column layout-align-space-around-center\" ng-hide=\"widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1\"><span class=\"weekday md-headline\" ng-hide=\"widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"weekday\" ng-show=\"widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1\">{{ widgetCtrl.options.date | formatLongDayOfWeek }}</span> <span class=\"date lm12 rm12\">{{ widgetCtrl.options.date.getDate() }}</span> <span class=\"month-year md-headline\">{{ widgetCtrl.options.date | formatLongMonth }} {{ widgetCtrl.options.date | formatYear }}</span></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/event/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Title:</label> <input type=\"text\" ng-model=\"vm.title\"></md-input-container>Date:<md-datepicker ng-model=\"vm.date\" class=\"w-stretch bm8\"></md-datepicker><md-input-container class=\"w-stretch\"><label>Description:</label> <textarea type=\"text\" ng-model=\"vm.text\">\\n' +\n    '    </textarea></md-input-container>Backdrop\\'s opacity:<md-slider aria-label=\"opacity\" type=\"number\" min=\"0.1\" max=\"0.9\" step=\"0.01\" ng-model=\"vm.opacity\" ng-change=\"vm.onOpacitytest(vm.opacity)\"></md-slider></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/event/WidgetEvent.html',\n    '<div class=\"widget-box pip-event-widget {{ widgetCtrl.color }} layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><img ng-if=\"widgetCtrl.options.image\" ng-src=\"{{widgetCtrl.options.image}}\" alt=\"{{widgetCtrl.options.title || widgetCtrl.options.name}}\"><div class=\"text-backdrop\" style=\"background-color: rgba(0, 0, 0, {{ widgetCtrl.opacity }})\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"text-container flex-auto pip-scroll\"><p class=\"date flex-none\" ng-if=\"widgetCtrl.options.date\">{{ widgetCtrl.options.date | formatShortDate }}</p><p class=\"text flex-auto\">{{ widgetCtrl.options.text || widgetCtrl.options.description }}</p></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/menu/WidgetMenu.html',\n    '<md-menu class=\"widget-menu\" md-position-mode=\"target-right target\"><md-button class=\"md-icon-button flex-none\" ng-click=\"$mdOpenMenu()\" aria-label=\"Menu\"><md-icon md-svg-icon=\"icons:vdots\"></md-icon></md-button><md-menu-content width=\"4\"><md-menu-item ng-repeat=\"item in widgetCtrl.menu\"><md-button ng-if=\"!item.submenu\" ng-click=\"widgetCtrl.callAction(item.action, item.params, item)\">{{:: item.title }}</md-button><md-menu ng-if=\"item.submenu\"><md-button ng-click=\"widgetCtrl.callAction(item.action)\">{{:: item.title }}</md-button><md-menu-content><md-menu-item ng-repeat=\"subitem in item.submenu\"><md-button ng-click=\"widgetCtrl.callAction(subitem.action, subitem.params, subitem)\">{{:: subitem.title }}</md-button></md-menu-item></md-menu-content></md-menu></md-menu-item></md-menu-content></md-menu>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/notes/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Title:</label> <input type=\"text\" ng-model=\"vm.title\"></md-input-container><md-input-container class=\"w-stretch tm0\"><label>Text:</label> <textarea type=\"text\" ng-model=\"vm.text\">\\n' +\n    '    </textarea></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/notes/WidgetNotes.html',\n    '<div class=\"widget-box pip-notes-widget {{ widgetCtrl.color }} layout-column\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\" ng-if=\"widgetCtrl.options.title || widgetCtrl.options.name\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span></div><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget><div class=\"text-container flex-auto pip-scroll\"><p>{{ widgetCtrl.options.text }}</p></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/picture_slider/WidgetPictureSlider.html',\n    '<div class=\"widget-box pip-picture-slider-widget {{ widgetCtrl.color }} layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\" index=\"{{ widgetCtrl.index }}\" group=\"{{ widgetCtrl.group }}\"><div class=\"widget-heading lp16 rp8 layout-row layout-align-end-center flex-none\"><span class=\"flex text-overflow\">{{ widgetCtrl.options.title }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"slider-container\"><div pip-image-slider=\"\" pip-animation-type=\"\\'fading\\'\" pip-animation-interval=\"widgetCtrl.animationInterval\" ng-if=\"widgetCtrl.animationType == \\'fading\\'\"><div class=\"pip-animation-block\" ng-repeat=\"slide in widgetCtrl.options.slides\"><img ng-src=\"{{ slide.image }}\" alt=\"{{ slide.image }}\" pip-image-load=\"widgetCtrl.onImageLoad($event)\"><p class=\"slide-text\" ng-if=\"slide.text\">{{ slide.text }}</p></div></div><div pip-image-slider=\"\" pip-animation-type=\"\\'carousel\\'\" pip-animation-interval=\"widgetCtrl.animationInterval\" ng-if=\"widgetCtrl.animationType == \\'carousel\\'\"><div class=\"pip-animation-block\" ng-repeat=\"slide in widgetCtrl.options.slides\"><img ng-src=\"{{ slide.image }}\" alt=\"{{ slide.image }}\" pip-image-load=\"widgetCtrl.onImageLoad($event)\"><p class=\"slide-text\" ng-if=\"slide.text\">{{ slide.text }}</p></div></div></div></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/position/ConfigDialogExtension.html',\n    '<div class=\"w-stretch\"><md-input-container class=\"w-stretch bm0\"><label>Location name:</label> <input type=\"text\" ng-model=\"vm.locationName\"></md-input-container></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/position/WidgetPosition.html',\n    '<div class=\"pip-position-widget widget-box p0 layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\" index=\"{{ widgetCtrl.index }}\" group=\"{{ widgetCtrl.group }}\"><div class=\"position-absolute-right-top\" ng-if=\"!widgetCtrl.options.locationName\"><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><div class=\"widget-heading lp16 rp8 layout-row layout-align-end-center flex-none\" ng-if=\"widgetCtrl.options.locationName\"><span class=\"flex text-overflow\">{{ widgetCtrl.options.locationName }}</span><pip-menu-widget ng-if=\"!widgetCtrl.options.hideMenu\"></pip-menu-widget></div><pip-location-map class=\"flex\" ng-if=\"widgetCtrl.showPosition\" pip-stretch=\"true\" pip-rebind=\"true\" pip-location-pos=\"widgetCtrl.options.location\"></pip-location-map></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipDashboard.Templates');\n} catch (e) {\n  module = angular.module('pipDashboard.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('widgets/statistics/WidgetStatistics.html',\n    '<div class=\"widget-box pip-statistics-widget layout-column layout-fill\" ng-class=\"{ small: widgetCtrl.options.size.colSpan == 1 && widgetCtrl.options.size.rowSpan == 1, medium: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 1, big: widgetCtrl.options.size.colSpan == 2 && widgetCtrl.options.size.rowSpan == 2 }\"><div class=\"widget-heading layout-row layout-align-start-center flex-none\"><span class=\"widget-title flex-auto text-overflow\">{{ widgetCtrl.options.title || widgetCtrl.options.name }}</span><pip-menu-widget></pip-menu-widget></div><div class=\"widget-content flex-auto layout-row layout-align-center-center\" ng-if=\"widgetCtrl.options.series && !widgetCtrl.reset\"><pip-pie-chart pip-series=\"widgetCtrl.options.series\" ng-if=\"!widgetCtrl.options.chartType || widgetCtrl.options.chartType == \\'pie\\'\" pip-donut=\"true\" pip-pie-size=\"widgetCtrl.chartSize\" pip-show-total=\"true\" pip-centered=\"true\"></pip-pie-chart></div></div>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-dashboard-html.min.js.map\n","'use strict';\r\n\r\nimport './settings_service/index';\r\nimport './settings_page/index';\r\n\r\nangular.module('pipSettings', [\r\n    'pipSettings.Service',\r\n    'pipSettings.Page'\r\n]);\r\n\r\nexport * from './settings_service';\r\nexport * from './settings_page';","/**\r\n * @file Registration of settings components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipSettings', [\r\n        'pipSettings.Service',\r\n        'pipSettings.Page'\r\n    ]);\r\n\r\n})();\r\n","// Prevent junk from going into typescript definitions\r\n(() => {\r\n\r\nclass SettingsPageController {\r\n    private _log: ng.ILogService;\r\n    private _q: ng.IQService;\r\n    private _state: ng.ui.IStateService;\r\n\r\n    public tabs: any;\r\n    public selected: any;\r\n    public onDropdownSelect: any;\r\n\r\n    constructor(\r\n        $log: ng.ILogService,\r\n        $q: ng.IQService,\r\n        $state: ng.ui.IStateService,\r\n        pipNavService,\r\n        pipSettings,\r\n        $rootScope, \r\n        $timeout\r\n    ) {\r\n        this._log = $log;\r\n        this._q = $q;\r\n        this._state = $state;\r\n\r\n        this.tabs = _.filter(pipSettings.getTabs(), function (tab: any) {\r\n                if (tab.visible === true && (tab.access ? tab.access($rootScope.$user, tab) : true)) {\r\n                    return tab;\r\n                }\r\n            });\r\n\r\n        this.tabs = _.sortBy(this.tabs, 'index');\r\n\r\n        this.selected = {};\r\n        if (this._state.current.name !== 'settings') {\r\n            this.initSelect(this._state.current.name);\r\n        } else if (this._state.current.name === 'settings' && pipSettings.getDefaultTab()) {\r\n            this.initSelect(pipSettings.getDefaultTab().state);\r\n        } else {\r\n            $timeout(function () {\r\n                if (pipSettings.getDefaultTab()) {\r\n                    this.initSelect(pipSettings.getDefaultTab().state);\r\n                }\r\n                if (!pipSettings.getDefaultTab() && this.tabs.length > 0) {\r\n                     this.initSelect(this.tabs[0].state);\r\n                }\r\n            });\r\n        }\r\n\r\n        pipNavService.icon.showMenu();\r\n        pipNavService.breadcrumb.text = \"Settings\";\r\n        pipNavService.actions.hide();\r\n        pipNavService.appbar.removeShadow();\r\n        \r\n        this.onDropdownSelect = (state) => {\r\n            this.onNavigationSelect(state.state);\r\n        }\r\n    }\r\n\r\n    private initSelect(state: string) {\r\n        this.selected.tab = _.find(this.tabs, function (tab: any) {\r\n                    return tab.state === state;\r\n                });\r\n        this.selected.tabIndex = _.indexOf(this.tabs, this.selected.tab);\r\n        this.selected.tabId = state;\r\n    }\r\n\r\n    public onNavigationSelect(state: string) {\r\n        this.initSelect(state);\r\n\r\n        if (this.selected.tab) {\r\n            this._state.go(state);\r\n        }\r\n    }\r\n}\r\n\r\nangular.module('pipSettings.Page')\r\n    .controller('pipSettingsPageController', SettingsPageController);\r\n})();","'use strict';\r\n\r\nfunction configureSettingsPageRoutes($stateProvider) {\r\n    $stateProvider\r\n        .state('settings', {\r\n            url: '/settings?party_id',\r\n            auth: true,\r\n            controllerAs: 'vm',\r\n            controller: 'pipSettingsPageController',\r\n            templateUrl: 'settings_page/SettingsPage.html'\r\n        });\r\n       \r\n}\r\n\r\nangular.module('pipSettings.Page')\r\n    .config(configureSettingsPageRoutes);\r\n","'use strict';\r\n\r\nangular.module('pipSettings.Page', [\r\n    'ui.router', \r\n    'pipSettings.Service',\r\n    'pipNav', \r\n    'pipSelected',\r\n    'pipTranslate',\r\n    'pipSettings.Templates'\r\n    ]);\r\n\r\n\r\nimport './SettingsPageController';\r\nimport './SettingsPageRoutes';","'use strict';\r\n\r\nexport class SettingsTab {\r\n    public state: string;\r\n    public title: string;\r\n    public index: string;\r\n    public access: boolean;\r\n    public visible: boolean;\r\n    public stateConfig: any;\r\n}\r\n\r\nexport interface ISettingsService {\r\n    getDefaultTab();\r\n    showTitleText (newTitleText);\r\n    showTitleLogo(newTitleLogo);\r\n    setDefaultTab(name: string);\r\n    showNavIcon(value);\r\n    getTabs();\r\n}\r\n\r\nexport interface ISettingsProvider extends ng.IServiceProvider {\r\n    getDefaultTab(): SettingsTab;\r\n    addTab(tabObj: any);\r\n    setDefaultTab(name: string): void;\r\n    getFullStateName(state: string): string;\r\n}\r\n\r\nexport class SettingsConfig {\r\n\r\n    public defaultTab: string;\r\n    public tabs: SettingsTab[] = [];\r\n    public titleText: string = 'SETTINGS_TITLE';\r\n    public titleLogo: boolean = null;\r\n    public isNavIcon: boolean = true;\r\n\r\n}\r\n\r\nclass SettingsService implements ISettingsService {\r\n    private _config: SettingsConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor($rootScope: ng.IRootScopeService, \r\n                       config: SettingsConfig) {\r\n        \"ngInject\";\r\n        this._rootScope = $rootScope;\r\n        this._config = config;\r\n    }\r\n\r\n    private getFullStateName(state: string): string {\r\n        return 'settings.' + state;\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        if (!_.find(this._config.tabs, function (tab) {\r\n            return tab.state === 'settings.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n    }\r\n\r\n    public getDefaultTab() {\r\n        var defaultTab;\r\n        defaultTab = _.find(this._config.tabs, function (p) {\r\n            return p.state === defaultTab;\r\n        });\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public showTitleText (newTitleText: string) {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean) {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n    public getTabs() {\r\n        return _.cloneDeep(this._config.tabs);\r\n    }\r\n\r\n}\r\n\r\nclass SettingsProvider implements ISettingsProvider {\r\n    private _service: SettingsService;\r\n    private _config: SettingsConfig = new SettingsConfig();\r\n    private _stateProvider: ng.ui.IStateProvider;\r\n\r\n    constructor($stateProvider: ng.ui.IStateProvider) {\r\n        this._stateProvider = $stateProvider;\r\n    }\r\n\r\n    public getFullStateName(state): string {\r\n        return 'settings.' + state;\r\n    }\r\n\r\n    public getDefaultTab(): SettingsTab {\r\n        var defaultTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, function (p) {\r\n            return p.state === defaultTab;\r\n        });\r\n\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public addTab(tabObj: any) {\r\n        var existingTab: SettingsTab;\r\n\r\n        this.validateTab(tabObj);\r\n        existingTab = _.find(this._config.tabs, function (p) {\r\n            return p.state === 'settings.' + tabObj.state;\r\n        });\r\n        if (existingTab) {\r\n            throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n        }\r\n\r\n        this._config.tabs.push({\r\n            state: this.getFullStateName(tabObj.state),\r\n            title: tabObj.title,\r\n            index: tabObj.index || 100000,\r\n            access: tabObj.access,\r\n            visible: tabObj.visible !== false,\r\n            stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n        });\r\n        this._stateProvider.state(this.getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n        // if we just added first state and no default state is specified\r\n        if (typeof this._config.defaultTab === 'undefined' && this._config.tabs.length === 1) {\r\n            this.setDefaultTab(tabObj.state);\r\n        }\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        // TODO [apidhirnyi] extract expression inside 'if' into variable. It isn't readable now.\r\n        if (!_.find(this._config.tabs, function (tab) {\r\n            return tab.state === 'settings.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n        //this._stateProvider.go(this._config.defaultTab);\r\n            //pipAuthStateProvider.redirect('settings', getFullStateName(name));\r\n    }\r\n\r\n    /**\r\n     * Validates passed tab config object\r\n     * If passed tab is not valid it will throw an error\r\n     */\r\n\r\n    private validateTab(tabObj: SettingsTab) {\r\n        if (!tabObj || !_.isObject(tabObj)) {\r\n            throw new Error('Invalid object');\r\n        }\r\n\r\n        if (tabObj.state === null || tabObj.state === '') {\r\n            throw new Error('Tab should have valid Angular UI router state name');\r\n        }\r\n\r\n        if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n            throw new Error('\"access\" should be a function');\r\n        }\r\n\r\n        if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n            throw new Error('Invalid state configuration object');\r\n        }\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value) {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public $get($rootScope, $state) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new SettingsService($rootScope, this._config);\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipSettings.Service')\r\n    .provider('pipSettings', SettingsProvider);\r\n\r\n","'use strict';\r\n\r\nangular.module('pipSettings.Service', []);\r\n\r\nimport './SettingsService';","/**\r\n * @file Settings tab logic\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipUserSettings', [\r\n        'ngMaterial', 'pipData',\r\n        'pipSettings.Service',\r\n        'pipSettings.Page',\r\n\r\n        'pipUserSettings.Strings',\r\n        'pipUserSettings.Sessions',\r\n        'pipUserSettings.BasicInfo',\r\n        'pipSettings.Templates'\r\n    ]);\r\n\r\n})();\r\n","/**\r\n * @file Settings basic info controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.BasicInfo',\r\n        ['pipUserSettings.ChangePassword', 'pipUserSettings.VerifyEmail', \r\n            'pipSettings.Service', 'pipSettings.Page',]);\r\n\r\n    thisModule.config(function (pipSettingsProvider) {\r\n        pipSettingsProvider.addTab({\r\n            state: 'basic_info',\r\n            index: 1,\r\n            title: 'SETTINGS_BASIC_INFO_TITLE',\r\n            stateConfig: {\r\n                url: '/basic_info',\r\n                controller: 'pipUserSettingsBasicInfoController',\r\n                templateUrl: 'user_settings/user_settings_basic_info.html',\r\n                auth: true\r\n            }\r\n        });\r\n\r\n        pipSettingsProvider.setDefaultTab('basic_info');\r\n    });\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n     *\r\n     * @description\r\n     * Controller for the predefined 'basic_info' state.\r\n     * Provides sync changes user's profile with remote profile.\r\n     * On state exit everything is saved on the server.\r\n     */\r\n    thisModule.controller('pipUserSettingsBasicInfoController',\r\n        function ($scope, $rootScope, $mdDialog, $state, $window, $timeout, $mdTheming,\r\n                  pipTranslate, pipTransaction, pipTheme,\r\n                  pipToasts, pipDataUser, pipDataParty, pipFormErrors) {\r\n\r\n            try {\r\n                $scope.originalParty = angular.toJson($rootScope.$party);\r\n            } catch (err) {\r\n                throw err;\r\n            }\r\n\r\n            $scope.nameCopy = $rootScope.$party.name;\r\n\r\n            $timeout(function () {\r\n                $scope.loc_pos = $rootScope.$party.loc_pos;\r\n            });\r\n\r\n            $scope.genders = pipTranslate.translateSet(['male', 'female', 'n/s']);\r\n            $scope.languages = pipTranslate.translateSet(['ru', 'en']);\r\n\r\n            $scope.transaction = pipTransaction('settings.basic_info', $scope);\r\n\r\n            $scope.themes = _.keys(_.omit($mdTheming.THEMES, 'default'));\r\n\r\n            $state.get('settings.basic_info').onExit = saveChanges;\r\n\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            /** @see onChangePassword */\r\n            $scope.onChangePassword = onChangePassword;\r\n            /** @see onVerifyEmail */\r\n            $scope.onVerifyEmail = onVerifyEmail;\r\n            /** @see onPictureCreated */\r\n            $scope.onPictureCreated = onPictureCreated;\r\n            /** @see onPictureChanged */\r\n            $scope.onPictureChanged = onPictureChanged;\r\n            /** @see updateUser */\r\n            $scope.onChangeUser = _.debounce(updateUser, 2000);\r\n            /** @see saveChanges */\r\n            $scope.onChangeBasicInfo = _.debounce(saveChanges, 2000);\r\n\r\n            function onPictureChanged() {\r\n                $scope.picture.save(\r\n                    function () {\r\n                        $rootScope.$broadcast('pipPartyAvatarUpdated');\r\n                    },\r\n                    function (error) {\r\n                        return new Error(error);\r\n                    }\r\n                );\r\n            }\r\n\r\n            function onPictureCreated($event) {\r\n                $scope.picture = $event.sender;\r\n                $scope.picture.save(\r\n                    function () {\r\n                        $rootScope.$broadcast('pipPartyAvatarUpdated');\r\n                    },\r\n                    function (error) {\r\n                        return new Error(error);\r\n                    }\r\n                );\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangeBasicInfo\r\n             *\r\n             * @description\r\n             * Saves changes onto server.\r\n             * This method responses on change of the input information.\r\n             * It is updated user's party profile. Also it updates user's profile in $rootScope.\r\n             */\r\n            function saveChanges() {\r\n                if ($scope.form) {\r\n                    $scope.form.$setSubmitted();\r\n                }\r\n\r\n                if ($rootScope.$party) {\r\n\r\n                    if ($rootScope.$party.type === 'person' && $scope.form.$invalid) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check to avoid unnecessary savings\r\n                    $rootScope.$party.loc_pos = $scope.loc_pos;\r\n                    try {\r\n                        var party = angular.toJson($rootScope.$party);\r\n                    } catch (err) {\r\n                        throw err;\r\n                    }\r\n\r\n                    if (party !== $scope.originalParty) {\r\n                        var tid = $scope.transaction.begin('UPDATING');\r\n\r\n                        pipDataParty.updateParty($rootScope.$party,\r\n                            function (data) {\r\n                                if ($scope.transaction.aborted(tid)) {\r\n                                    return;\r\n                                }\r\n                                $scope.transaction.end();\r\n\r\n                                $scope.originalParty = party;\r\n                                $scope.nameCopy = data.name;\r\n                            }, function (error) {\r\n                                $scope.transaction.end(error);\r\n                                $scope.message = String() + 'ERROR_' + error.status || error.data.status_code;\r\n                                $rootScope.$party = angular.fromJson($scope.originalParty);\r\n                            }\r\n                        );\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangeUser\r\n             *\r\n             * @description\r\n             * Saves changes onto server.\r\n             * This method responses on change of the user's profile information.\r\n             * Also it updates user's profile in $rootScope.\r\n             */\r\n            function updateUser() {\r\n                var tid = $scope.transaction.begin('RequestEmailVerification');\r\n\r\n                if ($rootScope.$user.id === $rootScope.$party.id) {\r\n                    pipDataUser.updateUser(\r\n                        {\r\n                            item: $rootScope.$user\r\n                        },\r\n                        function (data) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n\r\n                            pipTranslate.use(data.language);\r\n                            $rootScope.$user.language = data.language;\r\n                            $rootScope.$user.theme = data.theme;\r\n                            if ($rootScope.$user.theme) {\r\n                                pipTheme.setCurrentTheme($rootScope.$user.theme, true);\r\n                            }\r\n\r\n                        }, function (error) {\r\n                            var message;\r\n                            \r\n                            $scope.transaction.end(error);\r\n                            message = String() + 'ERROR_' + error.status || error.data.status_code;\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangePassword\r\n             *\r\n             * @description\r\n             * It opens a dialog panel to change password.\r\n             *\r\n             * @param {Object} event    Triggered event object\r\n             */\r\n            function onChangePassword(event) {\r\n                var message;\r\n\r\n                $mdDialog.show({\r\n                    templateUrl: 'user_settings/user_settings_change_password.html',\r\n                    controller: 'pipUserSettingsChangePasswordController',\r\n                    targetEvent: event,\r\n                    locals: {email: $rootScope.$party.email}\r\n                }).then(\r\n                    function (answer) {\r\n                        if (answer) {\r\n                            message = String() + 'RESET_PWD_SUCCESS_TEXT';\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    });\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onVerifyEmail\r\n             *\r\n             * @description\r\n             * It opens a dialog panel to change password.\r\n             *\r\n             * @param {Object} event    Triggered event object\r\n             */\r\n            function onVerifyEmail(event) {\r\n                var message;\r\n\r\n                $mdDialog.show({\r\n                    templateUrl: 'user_settings/user_settings_verify_email.html',\r\n                    controller: 'pipUserSettingsVerifyEmailController',\r\n                    targetEvent: event,\r\n                    locals: {email: $rootScope.$party.email}\r\n                }).then(\r\n                    function (answer) {\r\n                        $scope.user.email_ver = answer;\r\n                        if (answer) {\r\n                            message = String() + 'VERIFY_EMAIL_SUCCESS_TEXT';\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings change password controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.ChangePassword', []);\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n     *\r\n     * @description\r\n     * Controller for dialog panel of password change.\r\n     */\r\n    thisModule.controller('pipUserSettingsChangePasswordController',\r\n        function ($scope, $rootScope, $mdDialog, email, pipDataUser, pipTransaction, pipFormErrors) {\r\n\r\n            $scope.transaction = pipTransaction('settings.change_password', $scope);\r\n            $scope.errorsRepeatWithHint = function (form, formPart) {\r\n                if ($scope.showRepeatHint) {\r\n                    return pipFormErrors.errorsWithHint(form, formPart);\r\n                }\r\n\r\n                return {};\r\n            };\r\n            $scope.showRepeatHint = true;\r\n            $scope.changePasData = {};\r\n\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            $scope.onCancel = onCancel;\r\n            $scope.onCheckRepeatPassword = onCheckRepeatPassword;\r\n            $scope.onApply = onApply;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onCancel\r\n             *\r\n             * @description\r\n             * Closes opened dialog panel.\r\n             */\r\n            function onCancel() {\r\n                $mdDialog.cancel();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onCheckRepeatPassword\r\n             *\r\n             * @description\r\n             * Validates a password typed into password fields.\r\n             */\r\n            function onCheckRepeatPassword() {\r\n                if ($scope.changePasData) {\r\n                    if ($scope.repeat === $scope.changePasData.new_password || $scope.repeat === '' || !$scope.repeat) {\r\n                        $scope.form.repeat.$setValidity('repeat', true);\r\n                        if ($scope.repeat === $scope.changePasData.new_password) {\r\n                            $scope.showRepeatHint = false;\r\n                        } else {\r\n                            $scope.showRepeatHint = true;\r\n                        }\r\n                    } else {\r\n                        $scope.showRepeatHint = true;\r\n                        $scope.form.repeat.$setValidity('repeat', false);\r\n                    }\r\n                }\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onApply\r\n             *\r\n             * @description\r\n             * Approves password change and sends request to the server on password change.\r\n             */\r\n            function onApply() {\r\n                $scope.onCheckRepeatPassword();\r\n\r\n                if ($scope.form.$invalid) {\r\n                    return;\r\n                }\r\n\r\n                if (!$scope.transaction.begin('CHANGE_PASSWORD')) {\r\n                    return;\r\n                }\r\n\r\n                $scope.changePasData.email = email;\r\n\r\n                pipDataUser.changePassword(\r\n                    $scope.changePasData,\r\n                    function () {\r\n                        $scope.transaction.end();\r\n                        $mdDialog.hide(true);\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n                        pipFormErrors.setFormError(\r\n                            $scope.form, error,\r\n                            {\r\n                                1107: 'oldPassword',\r\n                                1105: 'newPassword'\r\n                            }\r\n                        );\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings sessions controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.Sessions', [\r\n        'pipSettings.Service', 'pipSettings.Page',]);\r\n\r\n    thisModule.config(function (pipSettingsProvider, pipDataSessionProvider) {\r\n        pipSettingsProvider.addTab({\r\n            state: 'sessions',\r\n            index: 3,\r\n            title: 'SETTINGS_ACTIVE_SESSIONS_TITLE',\r\n            stateConfig: {\r\n                url: '/sessions',\r\n                controller: 'pipUserSettingsSessionsController',\r\n                templateUrl: 'user_settings/user_settings_sessions.html',\r\n                auth: true,\r\n                resolve: {\r\n                    sessions: pipDataSessionProvider.readSessionsResolver,\r\n                    sessionId: pipDataSessionProvider.readSessionIdResolver\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n     *\r\n     * @description\r\n     * Controller provides an interface for managing active sessions.\r\n     */\r\n    thisModule.controller('pipUserSettingsSessionsController',\r\n        function ($scope, pipTransaction, pipDataSession, sessions, sessionId) {\r\n\r\n            $scope.sessionId = sessionId;\r\n            $scope.transaction = pipTransaction('settings.sessions', $scope);\r\n            $scope.sessions = sessions;\r\n\r\n            $scope.onRemoveAll = onRemoveAll;\r\n            $scope.onRemove = onRemove;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n             * @name pipUserSettings.Sessions.pipUserSettingsSessionsController:onRemoveAll\r\n             *\r\n             * @description\r\n             * Closes all active session.\r\n             */\r\n            function onRemoveAll() {\r\n                var tid = $scope.transaction.begin('REMOVING');\r\n\r\n                async.eachSeries(\r\n                    $scope.sessions,\r\n                    function (session: any, callback) {\r\n                        if (session.id == $scope.sessionId) {\r\n                            callback();\r\n                        } else {\r\n                            pipDataSession.removeSession(\r\n                                {\r\n                                    session: session\r\n                                },\r\n                                function () {\r\n                                    $scope.sessions = _.without($scope.sessions, session);\r\n                                    callback();\r\n                                },\r\n                                function (error) {\r\n                                    callback;\r\n                                }\r\n                            );\r\n                        }\r\n                    },\r\n                    function (err) {\r\n                        if (err) {\r\n                            $scope.transaction.end(err);\r\n                        }\r\n                        if ($scope.transaction.aborted(tid)) {\r\n                            return;\r\n                        }\r\n                        $scope.transaction.end();\r\n                    });                \r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n             * @name pipUserSettings.Sessions.pipUserSettingsSessionsController:onRemove\r\n             *\r\n             * @description\r\n             * Closes passed session.\r\n             *\r\n             * @param {Object} session  Session configuration object\r\n             */\r\n            function onRemove(session, callback) {\r\n                if (session.id === $scope.sessionId) {\r\n                    return;\r\n                }\r\n                var tid = $scope.transaction.begin('REMOVING');\r\n                pipDataSession.removeSession(\r\n                    {\r\n                        session: session\r\n                    },\r\n                    function () {\r\n                        if ($scope.transaction.aborted(tid)) {\r\n                            return;\r\n                        }\r\n                        $scope.transaction.end();\r\n\r\n                        $scope.sessions = _.without($scope.sessions, session);\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n                        $scope.message = 'ERROR_' + error.status || error.data.status_code;\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* eslint-disable quote-props */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.Strings', ['pipTranslate']);\r\n\r\n    thisModule.config(function (pipTranslateProvider) {\r\n\r\n        // Set translation strings for the module\r\n        pipTranslateProvider.translations('en', {\r\n            'SETTINGS_TITLE': 'Settings',\r\n            'SETTINGS_BASIC_INFO_TITLE': 'Basic info',\r\n            'SETTINGS_ACTIVE_SESSIONS_TITLE': 'Active sessions',\r\n\r\n            'SETTINGS_BASIC_INFO_FULL_NAME': 'Full name',\r\n            'SETTINGS_BASIC_INFO_VERIFY_HINT': 'Please, verify your email address.',\r\n            'SETTINGS_BASIC_INFO_VERIFY_CODE': 'Verify email address',\r\n            'SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD': 'Your password was changed on ',\r\n            'SETTINGS_BASIC_INFO_CHANGE_PASSWORD': 'Change your password',\r\n            'SETTINGS_BASIC_INFO_NAME_HINT': 'Please, use your real name to let other people know who you are.',\r\n            'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME': 'Few words about yourself',\r\n\r\n            'SETTINGS_BASIC_INFO_GENDER': 'Gender',\r\n            'SETTINGS_BASIC_INFO_BIRTHDAY': 'Birthday',\r\n            'SETTINGS_BASIC_INFO_LOCATION': 'Current location',\r\n            'SETTINGS_BASIC_INFO_PRIMARY_EMAIL': 'Primary email',\r\n            'SETTINGS_BASIC_INFO_FROM': 'User since ',\r\n            'SETTINGS_BASIC_INFO_USER_ID': 'User ID',\r\n\r\n            'SETTINGS_CHANGE_PASSWORD_TITLE': 'Change password',\r\n            'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD': 'New password',\r\n            'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD': 'Repeat password',\r\n            'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD': 'Current password',\r\n\r\n            'SETTINGS_ACTIVE_SESSIONS_SUBTITLE': ' If you notice any unfamiliar devices or locations, click' +\r\n            '\"Close Session\" to end the session.',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION': 'Close session',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS': 'Close active sessions',\r\n            'SETTINGS_ACTIVE_SESSION_OS': 'OS: ',\r\n            'SETTINGS_ACTIVE_SESSION_IP': 'IP: ',\r\n            'SETTINGS_ACTIVE_SESSION_ACTIVE': 'active',\r\n\r\n            'SETTINGS_BLACKLIST_TITLE': 'Blacklist',\r\n            'SETTINGS_BLACKLIST_SUBTITLE': 'Parties from blacklist will not be able to send you invitations and ' +\r\n            'private messages.',\r\n            'SETTINGS_BLACKLIST_UNBLOCK': 'Unblock',\r\n            'SETTINGS_BLACKLIST_EMPTY': 'You have no blocked parties',\r\n\r\n            'SETTINGS_CONTACT_INFO_TITLE': 'Contact info',\r\n            'SETTINGS_CONTACT_INFO_EMAIL': 'Email',\r\n            'SETTINGS_CONTACT_INFO_ADD_EMAIL': 'Add email',\r\n            'SETTINGS_CONTACT_INFO_ADD_PHONE': 'Add phone',\r\n            'SETTINGS_CONTACT_INFO_ADD_ADDRESS': 'Add address',\r\n            'SETTINGS_CONTACT_INFO_ADD_ACCOUNT': 'Add account',\r\n            'SETTINGS_CONTACT_INFO_ADD_URL': 'Add URL',\r\n            'SETTINGS_CONTACT_INFO_ADDRESS': 'Address',\r\n            'SETTINGS_CONTACT_INFO_PHONE': 'Phone',\r\n            'SETTINGS_CONTACT_INFO_ACCOUNT_NAME': 'Account name',\r\n            'SETTINGS_CONTACT_INFO_URL': 'URL',\r\n\r\n            'THEME': 'Theme',\r\n\r\n            'HINT_PASSWORD': 'Minimum 6 characters',\r\n            'HINT_REPEAT_PASSWORD': 'Repeat password',\r\n\r\n            'ERROR_WRONG_PASSWORD': 'Wrong password',\r\n            'ERROR_IDENTICAL_PASSWORDS': 'Old and new passwords are identical',\r\n            'REPEAT_PASSWORD_INVALID': 'Password does not match',\r\n            'ERROR_EMAIL_INVALID': 'Please, enter a valid email'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'SETTINGS_TITLE': '',\r\n            'SETTINGS_BASIC_INFO_TITLE': ' ',\r\n            'SETTINGS_ACTIVE_SESSIONS_TITLE': ' ',\r\n\r\n            'SETTINGS_BASIC_INFO_FULL_NAME': ' ',\r\n            'SETTINGS_BASIC_INFO_NAME_HINT': ',   ,     ',\r\n            'SETTINGS_BASIC_INFO_VERIFY_HINT': ',     ',\r\n            'SETTINGS_BASIC_INFO_VERIFY_CODE': '  .',\r\n            'SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD': '    ',\r\n            'SETTINGS_BASIC_INFO_CHANGE_PASSWORD': ' ',\r\n\r\n            'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME': '   ',\r\n            'SETTINGS_BASIC_INFO_GENDER': '',\r\n            'SETTINGS_BASIC_INFO_BIRTHDAY': ' ',\r\n            'SETTINGS_BASIC_INFO_LOCATION': ' ',\r\n            'SETTINGS_BASIC_INFO_PRIMARY_EMAIL': '  . ',\r\n            'SETTINGS_BASIC_INFO_FROM': ' ',\r\n            'SETTINGS_BASIC_INFO_USER_ID': ' ',\r\n\r\n            'SETTINGS_CHANGE_PASSWORD_TITLE': ' ',\r\n            'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD': ' ',\r\n            'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD': '',\r\n            'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD': ' ',\r\n\r\n            'SETTINGS_ACTIVE_SESSIONS_SUBTITLE': '   -    ' +\r\n            ',   \" \",   .',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION': ' ',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS': '  ',\r\n            'SETTINGS_ACTIVE_SESSION_OS': ': ',\r\n            'SETTINGS_ACTIVE_SESSION_IP': 'IP: ',\r\n            'SETTINGS_ACTIVE_SESSION_ACTIVE': '',\r\n\r\n            'SETTINGS_BLACKLIST_TITLE': '',\r\n            'SETTINGS_BLACKLIST_SUBTITLE': '     ' +\r\n            '      .',\r\n            'SETTINGS_BLACKLIST_UNBLOCK': '',\r\n            'SETTINGS_BLACKLIST_EMPTY': '    ',\r\n\r\n            'SETTINGS_CONTACT_INFO_TITLE': '',\r\n            'SETTINGS_CONTACT_INFO_EMAIL': '  ',\r\n            'SETTINGS_CONTACT_INFO_ADD_EMAIL': '  . ',\r\n            'SETTINGS_CONTACT_INFO_ADD_PHONE': ' ',\r\n            'SETTINGS_CONTACT_INFO_ADD_ADDRESS': ' ',\r\n            'SETTINGS_CONTACT_INFO_ADD_ACCOUNT': ' ',\r\n            'SETTINGS_CONTACT_INFO_ADD_URL': ' -',\r\n            'SETTINGS_CONTACT_INFO_ADDRESS': '',\r\n            'SETTINGS_CONTACT_INFO_PHONE': '',\r\n            'SETTINGS_CONTACT_INFO_ACCOUNT_NAME': '  ',\r\n            'SETTINGS_CONTACT_INFO_URL': ' ',\r\n\r\n            'THEME': '',\r\n\r\n            'HINT_PASSWORD': ' 6 ',\r\n            'HINT_REPEAT_PASSWORD': ' ',\r\n\r\n            'ERROR_WRONG_PASSWORD': ' ',\r\n            'ERROR_IDENTICAL_PASSWORDS': '    ',\r\n            'REPEAT_PASSWORD_INVALID': '  ',\r\n            'ERROR_EMAIL_INVALID': ',   .'\r\n        });\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Settings verify email controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.VerifyEmail', []);\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n     *\r\n     * @description\r\n     * Controller for verify email dialog panel.\r\n     */\r\n    thisModule.controller('pipUserSettingsVerifyEmailController',\r\n        function ($scope, $rootScope, $mdDialog, pipTransaction, pipFormErrors, pipDataUser, email) {\r\n\r\n            $scope.emailVerified = false;\r\n            $scope.data = {\r\n                email: email,\r\n                code: ''\r\n            };\r\n            $scope.transaction = pipTransaction('settings.verify_email', $scope);\r\n\r\n            /** @see onAbort */\r\n            $scope.onAbort = onAbort;\r\n            /** @see onRequestVerificationClick*/\r\n            $scope.onRequestVerificationClick = onRequestVerificationClick;\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            /** @see onVerify */\r\n            $scope.onVerify = onVerify;\r\n            /** @see onCancel */\r\n            $scope.onCancel = onCancel;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onAbort\r\n             *\r\n             * @description\r\n             * Aborts a verify request.\r\n             */\r\n            function onAbort() {\r\n                $scope.transaction.abort();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onCancel\r\n             *\r\n             * @description\r\n             * Closes opened dialog panel.\r\n             */\r\n            function onCancel() {\r\n                $mdDialog.cancel();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onRequestVerificationClick\r\n             *\r\n             * @description\r\n             * Sends request to verify entered email.\r\n             */\r\n            function onRequestVerificationClick() {\r\n                    var tid = $scope.transaction.begin('RequestEmailVerification');\r\n\r\n                pipDataUser.requestEmailVerification(\r\n                    {},                         \r\n                    function (result) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n                        }, \r\n                        function (error) {\r\n                            $scope.transaction.end(error);\r\n                        }\r\n                    );\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onVerify\r\n             *\r\n             * @description\r\n             * Initiates request on verify email on the server.\r\n             */\r\n            function onVerify() {\r\n                $scope.form.$setSubmitted();\r\n\r\n                if ($scope.form.$invalid) {\r\n                    return;\r\n                }\r\n                var tid = $scope.transaction.begin('Verifying');\r\n\r\n                pipDataUser.verifyEmail(\r\n                    {\r\n                        email: $scope.data.email,\r\n                        code: $scope.data.code\r\n                    }, \r\n                    function (verifyData) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n\r\n                        $mdDialog.hide(true);\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n\r\n                        pipFormErrors.setFormError(\r\n                            $scope.form, error,\r\n                            {\r\n                                1106: 'email',\r\n                                1103: 'code'\r\n                            }\r\n                        );\r\n\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('settings_page/SettingsPage.html',\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar><pip-document width=\"800\" min-height=\"400\" class=\"pip-settings\"><div class=\"pip-menu-container\" ng-hide=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\"><md-list class=\"pip-menu pip-simple-list\" pip-selected=\"vm.selected.tabIndex\" pip-selected-watch=\"vm.selected.navId\" pip-select=\"vm.onNavigationSelect($event.id)\"><md-list-item class=\"pip-simple-list-item pip-selectable flex\" ng-repeat=\"tab in vm.tabs track by tab.state\" ng-if=\"vm.$party.id == vm.$user.id || tab.state == \\'settings.basic_info\\'|| tab.state ==\\'settings.contact_info\\' || tab.state ==\\'settings.blacklist\\'\" md-ink-ripple=\"\" pip-id=\"{{:: tab.state }}\"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class=\"pip-content-container\"><pip-dropdown pip-actions=\"vm.tabs\" pip-dropdown-select=\"vm.onDropdownSelect\" pip-active-index=\"vm.selected.tabIndex\"></pip-dropdown><div class=\"pip-body tp24-flex layout-column\" ui-view=\"\"></div></div></div><div class=\"layout-column layout-align-center-center flex\" ng-show=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\">{{::\\'ERROR_400\\' | translate}}</div></pip-document>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('user_settings/user_settings_basic_info.html',\n    '<form name=\"form\" class=\"w-stretch\" novalidate=\"\"><md-progress-linear class=\"pip-progress-top\" ng-show=\"transaction.busy()\" md-mode=\"indeterminate\"></md-progress-linear><div class=\"layout-row bm12\"><div class=\"md-tile-left\"><pip-avatar-edit pip-party-id=\"$party.id\" pip-created=\"onPictureCreated($event)\" pip-changed=\"onPictureChanged($control, $event)\"></pip-avatar-edit></div><div class=\"md-tile-content tp0 layout-align-center\"><h3 class=\"tm16 bm8 text-one-line\">{{ nameCopy }}</h3><p class=\"text-primary text-overflow m0\">{{::\\'SETTINGS_BASIC_INFO_FROM\\' | translate}} {{$user.signup | formatLongDate }}</p></div></div><md-input-container class=\"md-block\"><label>{{::\\'SETTINGS_BASIC_INFO_FULL_NAME\\' | translate}}</label> <input name=\"fullName\" step=\"any\" type=\"text\" tabindex=\"0\" required=\"\" ng-model=\"$party.name\" ng-disabled=\"transaction.busy()\" ng-change=\"onChangeBasicInfo()\"><div class=\"hint\" ng-if=\"errorsWithHint(form, form.fullName).hint\">{{::\\'ERROR_FULLNAME_INVALID\\' | translate}}</div></md-input-container><md-input-container class=\"md-block bm0\"><label>{{::\\'SETTINGS_BASIC_INFO_PRIMARY_EMAIL\\' | translate}}</label> <input name=\"email\" type=\"email\" required=\"\" ng-model=\"$party.email\" ng-change=\"onChangeBasicInfo()\" pip-email-unique=\"{{$party.email}}\"><div class=\"hint\" ng-if=\"errorsWithHint(form, form.email).hint && !$user.email_ver\">{{::\\'SETTINGS_BASIC_INFO_VERIFY_HINT\\' | translate}}</div><div ng-messages=\"errorsWithHint(form.email)\" ng-hide=\"$party.type ==\\'team\\'\"><div ng-message=\"email\">{{::\\'ERROR_EMAIL_INVALID\\' | translate}}</div><div ng-message=\"emailUnique\">{{::\\'ERROR_EMAIL_INVALID\\' | translate}}</div></div></md-input-container><md-button class=\"md-raised bm16 tm8 rm8\" ng-click=\"onVerifyEmail($event)\" ng-hide=\"$user.email_ver || $party.type ==\\'team\\'\">{{::\\'SETTINGS_BASIC_INFO_VERIFY_CODE\\' | translate}}</md-button><md-button ng-click=\"onChangePassword($event)\" class=\"md-raised bm16 tm8\" ng-hide=\"$party.type ==\\'team\\'\">{{::\\'SETTINGS_BASIC_INFO_CHANGE_PASSWORD\\' | translate}}</md-button><md-input-container class=\"md-block flex\"><label>{{::\\'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME\\' | translate }}</label> <textarea ng-model=\"$party.about\" columns=\"1\" ng-change=\"onChangeBasicInfo()\"></textarea></md-input-container><md-input-container class=\"md-block\" ng-hide=\"$party.type ==\\'team\\'\"><label>{{::\\'GENDER\\' | translate}}</label><md-select ng-model=\"$party.gender\" ng-change=\"onChangeBasicInfo()\" placeholder=\"{{\\'GENDER\\' | translate}}\"><md-option ng-value=\"gender.id\" ng-repeat=\"gender in genders\">{{gender.name}}</md-option></md-select></md-input-container><div ng-hide=\"$party.type ==\\'team\\'\"><p class=\"text-caption text-grey tm0 bm0\">{{::\\'SETTINGS_BASIC_INFO_BIRTHDAY\\' | translate}}</p><pip-date ng-model=\"$party.birthday\" ng-change=\"onChangeBasicInfo()\" pip-time-mode=\"past time-mode=\" past\"=\"\"></pip-date></div><md-input-container class=\"md-block\" ng-hide=\"$party.type ==\\'team\\'\"><label>{{::\\'LANGUAGE\\' | translate}}</label><md-select placeholder=\"{{\\'LANGUAGE\\' | translate}}\" ng-model=\"$user.language\" ng-change=\"onChangeUser()\"><md-option ng-value=\"language.id\" ng-repeat=\"language in languages\">{{language.name}}</md-option></md-select></md-input-container><md-input-container class=\"md-block\" ng-if=\"$party.type !=\\'team\\'\"><label>{{::\\'THEME\\' | translate}}</label><md-select class=\"w-stretch theme-text-primary\" ng-model=\"$user.theme\" ng-change=\"onChangeUser()\" ng-disabled=\"transaction.busy()\"><md-option ng-value=\"theme\" ng-repeat=\"theme in themes\" ng-selected=\"$theme == theme ? true : false\">{{ theme | translate }}</md-option></md-select></md-input-container><pip-location-edit class=\"map-edit bm24-flex\" ng-hide=\"$party.type ==\\'team\\'\" pip-changed=\"onChangeBasicInfo()\" pip-location-name=\"$party.loc_name\" pip-location-pos=\"loc_pos\"></pip-location-edit></form>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('user_settings/user_settings_change_password.html',\n    '<md-dialog class=\"pip-dialog layout-column\" width=\"440\"><form name=\"form\" ng-submit=\"onApply()\"><div class=\"pip-header\"><h3 class=\"m0\">{{::\\'SETTINGS_CHANGE_PASSWORD_TITLE\\' | translate : module}}</h3></div><div class=\"pip-body\"><div class=\"pip-content\"><div class=\"text-error bm8\" ng-messages=\"form.$serverError\"><div ng-message=\"ERROR_UNKNOWN\">{{ form.$serverError.ERROR_UNKNOWN | translate }}</div></div><md-input-container class=\"md-block\"><label>{{::\\'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD\\' | translate }}</label> <input name=\"oldPassword\" type=\"password\" ng-model=\"changePasData.old_password\" ng-required=\"change_password.$submitted\" pip-clear-errors=\"\"><div ng-messages=\"errorsWithHint(form, form.oldPassword)\"><div ng-message=\"required\">{{::\\'ERROR_REQUIRED\\' | translate }}</div><div ng-message=\"ERROR_1107\">{{::\\'ERROR_WRONG_PASSWORD\\' | translate }}</div></div></md-input-container><md-input-container class=\"md-block\"><label>{{\\'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD\\' | translate }}</label> <input name=\"newPassword\" type=\"password\" ng-model=\"changePasData.new_password\" ng-change=\"onCheckRepeatPassword()\" ng-required=\"change_password.$submitted\" ng-minlength=\"6\" pip-clear-errors=\"\"><div class=\"hint\" ng-if=\"errorsWithHint(form, form.newPassword).hint\">{{ \\'HINT_PASSWORD\\' | translate }}</div><div ng-messages=\"errorsWithHint(form, form.newPassword)\"><div ng-message=\"required\">{{::\\'ERROR_REQUIRED\\' | translate}}</div><div ng-message=\"minlength\">{{::\\'HINT_PASSWORD\\' | translate }}</div><div ng-message=\"ERROR_1105\">{{::\\'ERROR_IDENTICAL_PASSWORDS\\' | translate }}</div></div></md-input-container><md-input-container class=\"md-block\"><label>{{ \\'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD\\' | translate }}</label> <input name=\"repeat\" type=\"password\" ng-model=\"repeat\" ng-change=\"onCheckRepeatPassword()\" ng-required=\"change_password.$submitted\" ng-minlength=\"6\"><div class=\"hint\" ng-if=\"errorsRepeatWithHint(form.repeat).hint\">{{::\\'HINT_REPEAT_PASSWORD\\' | translate }}</div><div ng-messages=\"errorsRepeatWithHint(form.repeat)\"><div ng-message=\"required\">{{::\\'ERROR_REQUIRED\\' | translate }}</div><div ng-message=\"minlength\">{{::\\'HINT_PASSWORD\\' | translate }}</div><div ng-message=\"repeat\">{{::\\'REPEAT_PASSWORD_INVALID\\' | translate }}</div></div></md-input-container></div></div><div class=\"pip-footer\"><div><md-button aria-label=\"xxx\" ng-click=\"onCancel()\">{{::\\'CANCEL\\' | translate }}</md-button><md-button type=\"submit\" class=\"md-accent\" aria-label=\"xxx\">{{::\\'APPLY\\' | translate : module}}</md-button></div></div></form></md-dialog>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('user_settings/user_settings_sessions.html',\n    '<md-progress-linear ng-show=\"transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\"></md-progress-linear><div class=\"pip-details-title pip-sessions\"><p class=\"pip-title bm16\">{{::\\'SETTINGS_ACTIVE_SESSIONS_TITLE\\' | translate}}</p><p class=\"pip-subtitle\">{{::\\'SETTINGS_ACTIVE_SESSIONS_SUBTITLE\\' | translate}}</p></div><md-list class=\"w-stretch\"><div ng-repeat=\"session in sessions\"><div class=\"layout-row\" ng-init=\"showBlock = session.id != sessionId\" ng-click=\"showBlock = !showBlock\"><p class=\"m0 text-subhead2 text-overflow max-w50-stretch\">{{::session.client}}</p><p class=\"m0 lp4 text-body1 color-secondary-text flex\">{{::\\'SETTINGS_ACTIVE_SESSION_ACTIVE\\' | translate}}</p><p class=\"m0 text-body1 color-secondary-text\">{{::country}}<md-icon ng-if=\"showBlock\" md-svg-icon=\"icons:triangle-up\"></md-icon><md-icon ng-if=\"!showBlock\" md-svg-icon=\"icons:triangle-down\"></md-icon></p></div><div class=\"layout-row bm8 bp8\" ng-class=\"{\\'divider-bottom\\':!$last}\"><div class=\"flex-50\"><p class=\"m0 bm4 text-body1 text-overflow color-secondary-text\">{{session.last_req | date : \\'medium\\'}}</p><p class=\"m0 bm4 text-body1 text-overflow color-secondary-text\" ng-show=\"showBlock\">{{::\\'SETTINGS_ACTIVE_SESSION_OS\\' | translate}}{{::session.platform}}</p><p class=\"m0 bm4 text-body1 text-overflow color-secondary-text\" ng-show=\"showBlock\">{{::\\'SETTINGS_ACTIVE_SESSION_IP\\' | translate}}{{::session.address}}</p><md-button class=\"md-raised\" ng-show=\"showBlock && session.id != sessionId\" ng-click=\"onRemove(session)\">{{::\\'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION\\' | translate}}</md-button></div><pip-location-ip class=\"map-edit flex-50\" ng-if=\"showBlock\" pip-ipaddress=\"session.address\" pip-extra-info=\"country = extraInfo.country\"></pip-location-ip></div></div></md-list><div class=\"layout-row layout-align-end-center\"><md-button class=\"md-raised\" ng-show=\"sessions.length > 1\" ng-click=\"onRemoveAll()\">{{::\\'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS\\' | translate}}</md-button></div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipSettings.Templates');\n} catch (e) {\n  module = angular.module('pipSettings.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('user_settings/user_settings_verify_email.html',\n    '<md-dialog class=\"pip-dialog layout-column\" width=\"440\"><div class=\"pip-body\"><div class=\"pip-content\"><md-progress-linear ng-show=\"transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\"></md-progress-linear><h2>{{::\\'VERIFY_EMAIL_TITLE\\' | translate}}</h2><p class=\"title-padding\">{{::\\'VERIFY_EMAIL_TEXT_1\\' | translate}}</p><form name=\"form\" novalidate=\"\"><div ng-messages=\"form.$serverError\" class=\"text-error bm8\"><div ng-message=\"ERROR_UNKNOWN\">{{ form.$serverError.ERROR_UNKNOWN | translate }}</div></div><md-input-container class=\"display bp4 md-block\"><label>{{::\\'EMAIL\\' | translate}}</label> <input name=\"email\" type=\"email\" ng-model=\"data.email\" required=\"\" step=\"any\" pip-clear-errors=\"\" tabindex=\"1\" ng-disabled=\"transaction.busy()\" pip-test=\"input-email\"><div class=\"hint\" ng-if=\"errorsWithHint(form, form.email).hint\">{{::\\'HINT_EMAIL\\' | translate}}</div><div ng-messages=\"errorsWithHint(form, form.email)\" xng-if=\"!form.email.$pristine\"><div ng-message=\"required\">{{::\\'ERROR_EMAIL_INVALID\\' | translate }}</div><div ng-message=\"ERROR_1106\">{{::\\'ERROR_USER_NOT_FOUND\\' | translate}}</div></div></md-input-container><md-input-container class=\"md-block\"><label>{{::\\'ENTRY_VERIFICATION_CODE\\' | translate}}</label> <input name=\"code\" ng-disabled=\"transaction.busy()\" tabindex=\"0\" ng-model=\"data.code\" required=\"\" pip-clear-errors=\"\"><div ng-messages=\"errorsWithHint(form, form.code)\"><div ng-message=\"required\">{{::\\'ERROR_CODE_INVALID\\' | translate }}</div><div ng-message=\"ERROR_1103\">{{::\\'ERROR_CODE_WRONG\\' | translate }}</div></div></md-input-container><p>{{::\\'VERIFY_EMAIL_TEXT_21\\' | translate}} <a ng-click=\"onRequestVerificationClick()\" class=\"pointer\" tabindex=\"0\">{{::\\'VERIFY_EMAIL_RESEND\\' | translate}}</a> {{::\\'VERIFY_EMAIL_TEXT_22\\' | translate}}</p></form></div></div><div class=\"pip-footer\"><md-button ng-click=\"onCancel()\" ng-hide=\"transaction.busy()\" aria-label=\"xxx\">{{::\\'CANCEL\\' | translate}}</md-button><md-button class=\"md-accent\" ng-click=\"onVerify()\" ng-hide=\"transaction.busy()\" tabindex=\"0\" aria-label=\"xxx\" ng-disabled=\"data.code.length == 0 || data.email.length == 0 || (!data.email && form.$pristine) || (!data.code)\">{{::\\'VERIFY\\' | translate}}</md-button><md-button class=\"md-warn\" ng-show=\"transaction.busy()\" ng-click=\"transaction.abort()\" tabindex=\"0\" aria-label=\"xxx\">{{::\\'CANCEL\\' | translate}}</md-button></div></md-dialog>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-settings-html.min.js.map\n","// Prevent junk from going into typescript definitions\r\nimport {IHelpService} from '../help_service/HelpService';\r\n\r\nclass HelpPageController {\r\n    private _log: ng.ILogService;\r\n    private _q: ng.IQService;\r\n    private _state: ng.ui.IStateService;\r\n\r\n    public tabs: any;\r\n    public selected: any;\r\n    public onDropdownSelect: any;\r\n\r\n    constructor(\r\n        $log: ng.ILogService,\r\n        $q: ng.IQService,\r\n        $state: ng.ui.IStateService,\r\n        pipNavService,//: pip.nav.INavService,\r\n        pipHelp: IHelpService,\r\n        $rootScope: ng.IRootScopeService, \r\n        $timeout: angular.ITimeoutService\r\n    ) {\r\n        this._log = $log;\r\n        this._q = $q;\r\n        this._state = $state;\r\n\r\n        this.tabs = _.filter(pipHelp.getTabs(), function (tab: any) {\r\n              return tab;\r\n                /*if (tab.visible === true && (tab.access ? tab.access($rootScope.$user, tab) : true)) {\r\n                    return tab;\r\n                }*/\r\n            });\r\n\r\n        this.tabs = _.sortBy(this.tabs, 'index');\r\n\r\n        this.selected = {};\r\n        if (this._state.current.name !== 'help') {\r\n            this.initSelect(this._state.current.name);\r\n        } else if (this._state.current.name === 'help' && pipHelp.getDefaultTab()) {\r\n            this.initSelect(pipHelp.getDefaultTab().state);\r\n        } else {\r\n            $timeout(function () {\r\n                if (pipHelp.getDefaultTab()) {\r\n                    this.initSelect(pipHelp.getDefaultTab().state);\r\n                }\r\n                if (!pipHelp.getDefaultTab() && this.tabs && this.tabs.length > 0) {\r\n                    this.initSelect(this.tabs[0].state);\r\n                }\r\n            });\r\n        }\r\n\r\n        pipNavService.icon.showMenu();\r\n        pipNavService.breadcrumb.text = \"Help\";\r\n        pipNavService.actions.hide();\r\n        pipNavService.appbar.removeShadow();\r\n        \r\n        this.onDropdownSelect = (state) => {\r\n            this.onNavigationSelect(state.state);\r\n        }\r\n    }\r\n\r\n    private initSelect(state: string) {\r\n        this.selected.tab = _.find(this.tabs, function (tab: any) {\r\n                    return tab.state === state;\r\n                });\r\n        this.selected.tabIndex = _.indexOf(this.tabs, this.selected.tab);\r\n        this.selected.tabId = state;\r\n    }\r\n\r\n    public onNavigationSelect(state: string) {\r\n        this.initSelect(state);\r\n\r\n        if (this.selected.tab) {\r\n            this._state.go(state);\r\n        }\r\n    }\r\n}\r\n\r\n(() => {\r\n\r\nangular.module('pipHelp.Page', [\r\n    'ui.router', \r\n    'pipHelp.Service',\r\n    'pipNav', \r\n    'pipSelected',\r\n    'pipTranslate',\r\n    'pipHelp.Templates'\r\n    ])\r\n    .controller('pipHelpPageController', HelpPageController);\r\n})();\r\n\r\nimport './HelpPageRoutes';","'use strict';\r\n\r\nfunction configureHelpPageRoutes($stateProvider) {\r\n    $stateProvider\r\n        .state('help', {\r\n            url: '/help?party_id',\r\n            auth: true,\r\n            controllerAs: 'vm',\r\n            controller: 'pipHelpPageController',\r\n            templateUrl: 'help_page/HelpPage.html'\r\n        });\r\n       \r\n}\r\n\r\nangular.module('pipHelp.Page')\r\n    .config(configureHelpPageRoutes);\r\n","'use strict';\r\n\r\nexport class HelpTab {\r\n    public state: string;\r\n    public title: string;\r\n    public index: string;\r\n    public access: boolean;\r\n    public visible: boolean;\r\n    public stateConfig: any;\r\n}\r\n\r\nexport interface IHelpService {\r\n    getDefaultTab();\r\n    showTitleText (newTitleText);\r\n    showTitleLogo(newTitleLogo);\r\n    setDefaultTab(name: string);\r\n    showNavIcon(value);\r\n    getTabs();\r\n}\r\n\r\nexport interface IHelpProvider extends ng.IServiceProvider {\r\n    getDefaultTab(): HelpTab;\r\n    addTab(tabObj: any);\r\n    setDefaultTab(name: string): void;\r\n    getFullStateName(state: string): string;\r\n}\r\n\r\nexport class HelpConfig {\r\n\r\n    public defaultTab: string;\r\n    public tabs: HelpTab[] = [];\r\n    public titleText: string = 'SETTINGS_TITLE';\r\n    public titleLogo: boolean = null;\r\n    public isNavIcon: boolean = true;\r\n\r\n}\r\n\r\nclass HelpService implements IHelpService {\r\n    private _config: HelpConfig;\r\n    private _rootScope: ng.IRootScopeService;\r\n\r\n    public constructor($rootScope: ng.IRootScopeService, \r\n                       config: HelpConfig) {\r\n        \"ngInject\";\r\n        this._rootScope = $rootScope;\r\n        this._config = config;\r\n    }\r\n\r\n    private getFullStateName(state: string): string {\r\n        return 'help.' + state;\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        if (!_.find(this._config.tabs, function (tab) {\r\n            return tab.state === 'help.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n    }\r\n\r\n    public getDefaultTab() {\r\n        var defaultTab;\r\n        defaultTab = _.find(this._config.tabs, function (p) {\r\n            return p.state === defaultTab;\r\n        });\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public showTitleText (newTitleText: string) {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value: boolean) {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n    public getTabs() {\r\n        return _.cloneDeep(this._config.tabs);\r\n    }\r\n\r\n}\r\n\r\nclass HelpProvider implements IHelpProvider {\r\n    private _service: HelpService;\r\n    private _config: HelpConfig = new HelpConfig();\r\n    private _stateProvider: ng.ui.IStateProvider;\r\n\r\n    constructor($stateProvider: ng.ui.IStateProvider) {\r\n        this._stateProvider = $stateProvider;\r\n    }\r\n\r\n    public getFullStateName(state): string {\r\n        return 'help.' + state;\r\n    }\r\n\r\n    public getDefaultTab(): HelpTab {\r\n        var defaultTab;\r\n\r\n        defaultTab = _.find(this._config.tabs, function (p) {\r\n            return p.state === defaultTab;\r\n        });\r\n\r\n        return _.cloneDeep(defaultTab);\r\n    }\r\n\r\n    public addTab(tabObj: any) {\r\n        var existingTab: HelpTab;\r\n\r\n        this.validateTab(tabObj);\r\n        existingTab = _.find(this._config.tabs, function (p) {\r\n            return p.state === 'help.' + tabObj.state;\r\n        });\r\n        if (existingTab) {\r\n            throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n        }\r\n\r\n        this._config.tabs.push({\r\n            state: this.getFullStateName(tabObj.state),\r\n            title: tabObj.title,\r\n            index: tabObj.index || 100000,\r\n            access: tabObj.access,\r\n            visible: tabObj.visible !== false,\r\n            stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n        });\r\n        this._stateProvider.state(this.getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n        // if we just added first state and no default state is specified\r\n        if (typeof this._config.defaultTab === 'undefined' && this._config.tabs.length === 1) {\r\n            this.setDefaultTab(tabObj.state);\r\n        }\r\n    }\r\n\r\n    public setDefaultTab(name: string): void {\r\n        // TODO [apidhirnyi] extract expression inside 'if' into variable. It isn't readable now.\r\n        if (!_.find(this._config.tabs, function (tab) {\r\n            return tab.state === 'help.' + name;\r\n        })) {\r\n            throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n        }\r\n\r\n        this._config.defaultTab = this.getFullStateName(name);\r\n        //this._stateProvider.go(this._config.defaultTab);\r\n            //pipAuthStateProvider.redirect('help', getFullStateName(name));\r\n    }\r\n\r\n    /**\r\n     * Validates passed tab config object\r\n     * If passed tab is not valid it will throw an error\r\n     */\r\n\r\n    private validateTab(tabObj: HelpTab) {\r\n        if (!tabObj || !_.isObject(tabObj)) {\r\n            throw new Error('Invalid object');\r\n        }\r\n\r\n        if (tabObj.state === null || tabObj.state === '') {\r\n            throw new Error('Tab should have valid Angular UI router state name');\r\n        }\r\n\r\n        if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n            throw new Error('\"access\" should be a function');\r\n        }\r\n\r\n        if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n            throw new Error('Invalid state configuration object');\r\n        }\r\n    }\r\n\r\n    public showTitleText (newTitleText: string): string {\r\n        if (newTitleText) {\r\n            this._config.titleText = newTitleText;\r\n            this._config.titleLogo = null;\r\n        }\r\n\r\n        return this._config.titleText;\r\n    }\r\n\r\n    public showTitleLogo(newTitleLogo) {\r\n        if (newTitleLogo) {\r\n            this._config.titleLogo = newTitleLogo;\r\n            this._config.titleText = null;\r\n        }\r\n\r\n        return this._config.titleLogo;\r\n    }\r\n\r\n    public showNavIcon(value) {\r\n        if (value !== null && value !== undefined) {\r\n            this._config.isNavIcon = !!value;\r\n        }\r\n\r\n        return this._config.isNavIcon;\r\n    }\r\n\r\n    public $get($rootScope, $state) {\r\n        \"ngInject\";\r\n\r\n        if (this._service == null)\r\n            this._service = new HelpService($rootScope, this._config);\r\n        \r\n        return this._service;\r\n    }\r\n}\r\n\r\nangular\r\n    .module('pipHelp.Service', [])\r\n    .provider('pipHelp', HelpProvider);\r\n\r\n","/**\r\n * @file Registration of all help components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\nimport './help_service/HelpService';\r\nimport './help_page/HelpPageController';\r\n\r\nangular.module('pipHelp', [\r\n    'pipHelp.Service',\r\n    'pipHelp.Page'\r\n]);\r\n\r\nexport * from './help_service/HelpService';\r\nexport * from './help_page/HelpPageController';","(function(module) {\ntry {\n  module = angular.module('pipHelp.Templates');\n} catch (e) {\n  module = angular.module('pipHelp.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('help_page/HelpPage.html',\n    '<md-toolbar class=\"pip-appbar-ext\"></md-toolbar><pip-document width=\"800\" min-height=\"400\" class=\"pip-help\"><div class=\"pip-menu-container\" ng-hide=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\"><md-list class=\"pip-menu pip-simple-list\" pip-selected=\"vm.selected.tabIndex\" pip-selected-watch=\"vm.selected.navId\" pip-select=\"vm.onNavigationSelect($event.id)\"><md-list-item class=\"pip-simple-list-item pip-selectable flex\" ng-repeat=\"tab in vm.tabs track by tab.state\" md-ink-ripple=\"\" pip-id=\"{{:: tab.state }}\"><p>{{::tab.title | translate}}</p></md-list-item></md-list><div class=\"pip-content-container\"><pip-dropdown pip-actions=\"vm.tabs\" pip-dropdown-select=\"vm.onDropdownSelect\" pip-active-index=\"vm.selected.tabIndex\"></pip-dropdown><div class=\"pip-body p0 layout-column\" ui-view=\"\"></div></div></div><div class=\"layout-column layout-align-center-center flex\" ng-show=\"vm.manager === false || !vm.tabs || vm.tabs.length < 1\">{{::\\'ERROR_400\\' | translate}}</div></pip-document>');\n}]);\n})();\n\n//# sourceMappingURL=pip-webui-help-html.min.js.map\n"]}