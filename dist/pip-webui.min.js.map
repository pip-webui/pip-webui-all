{"version":3,"sources":["services.ts","scope/scope.ts","scope/scope_error.ts","scope/scope_transaction.ts","routing/back_decorator.ts","routing/redirect_decorator.ts","routing/routing.ts","routing/routing_events.ts","session/identity.ts","session/session.ts","translate/translate.ts","translate/translate_directive.ts","translate/translate_filter.ts","translate/translate_service.ts","utilities/codes.ts","utilities/collections.js","utilities/format.ts","utilities/reset.ts","utilities/general.js","utilities/scroll.ts","utilities/system_info.ts","utilities/tags.ts","utilities/timer.ts","utilities/utilities.js","toggle_buttons/toggle_buttons.html","buttons.ts","dependencies/translate.ts","fabs/fab_tooltip_visibility.ts","refresh_button/refresh_button.ts","toggle_buttons/toggle_buttons.ts","landing.ts","layouts.ts","card/card.ts","dialog/dialog.ts","document/document.ts","main/main.ts","media/media.ts","simple/simple.ts","tiles/tiles.ts","split.ts","behaviors.ts","draggable/draggable.ts","focused/focused.ts","infinite_scroll/infinite_scroll.ts","selected/selected.ts","unsaved_changes/unsaved_changes.ts","color_picker/color_picker.html","popover/popover.html","progress/routing_progress.html","toast/toast.html","controls.ts","color_picker/color_picker.ts","image_slider/image_slider.ts","image_slider/image_slider_service.ts","image_slider/slider_button.ts","image_slider/slider_indicator.ts","markdown/markdown.ts","popover/popover.ts","popover/popover_service.ts","progress/routing_progress.ts","toast/toasts.ts","tag_list/tag_list.html","lists.ts","tag_list/tag_list.ts","date_directive/date.html","date_range_directive/date_range.html","time_range_directive/time_range.html","time_range_edit_directive/time_range_edit.html","dependencies/translate.js","dates.ts","date/date.ts","date/date_filter.ts","date/date_service.ts","date_directive/date.ts","date_range_directive/date_range.ts","time_range_directive/time_range.ts","time_range_edit_directive/time_range_edit.ts","confirmation/confirmation.html","error_details/error_details.html","information/information.html","options/options.html","options/options_big.html","dialogs.ts","confirmation/confirmation.ts","error_details/error_details.ts","information/information.ts","options/options.ts","options/options_big.ts","actions/primary_actions.html","actions/secondary_actions.html","appbar/appbar.html","breadcrumb/breadcrumb.html","dropdown/dropdown.html","language_picker/language_picker.html","nav_header/nav_header.html","nav_icon/nav_icon.html","nav_menu/nav_menu.html","search_bar/search_bar.html","sidenav/sidenav.html","sticky_nav_header/sticky_nav_header.html","sticky_nav_menu/sticky_nav_menu.html","sticky_sidenav/sticky_sidenav.html","tabs/tabs.html","nav.ts","nav_service.ts","actions/actions_service.ts","actions/primary_actions.ts","actions/secondary_actions.ts","appbar/appbar.ts","appbar/appbar_part.ts","appbar/appbar_service.ts","breadcrumb/breadcrumb.ts","breadcrumb/breadcrumb_service.ts","dropdown/dropdown.ts","language_picker/language_picker.ts","nav_header/nav_header.ts","nav_icon/nav_icon.ts","nav_icon/nav_icon_service.ts","nav_menu/nav_menu.ts","nav_services/nav_header_service.ts","nav_services/nav_menu_service.ts","nav_services/sidenav_part.ts","nav_services/sidenav_service.ts","search_bar/search_bar.ts","search_bar/search_service.ts","sidenav/sidenav.ts","sticky_nav_header/sticky_nav_header.ts","sticky_nav_menu/sticky_nav_menu.ts","sticky_sidenav/sticky_sidenav.ts","tabs/tabs.ts","theme.ts","bootbarn/bootbarn.ts","bootbarn/bootbarn_cool.ts","bootbarn/bootbarn_monochrome.ts","bootbarn/bootbarn_warm.ts","default/default.ts","default/default_amber.ts","default/default_black.ts","default/default_blue.ts","default/default_green.ts","default/default_grey.ts","default/default_navy.ts","default/default_orange.ts","default/default_pink.ts","maintenance/maintenance.html","missing_route/missing_route.html","no_connection/no_connection.html","no_connection_panel/no_connection_panel.html","unknown/unknown.html","unsupported/unsupported.html","errors.ts","common/errors_strings.ts","errors_pages/errors_pages.ts","forms/clear_errors.ts","forms/form_errors.ts","maintenance/maintenance.ts","missing_route/missing_route.ts","no_connection/no_connection.ts","no_connection_panel/no_connection_panel.ts","unknown/unknown.ts","unsupported/unsupported.ts","bar/bar_chart.html","legend/interactive_legend.html","line/line_chart.html","pie/pie_chart.html","charts.ts","bar/bar_chart.ts","legend/interactive_legend.ts","line/line_chart.ts","pie/pie_chart.ts","settings_page/settings_page.html","user_settings/user_settings_basic_info.html","user_settings/user_settings_change_password.html","user_settings/user_settings_sessions.html","user_settings/user_settings_verify_email.html","settings.ts","settings_service/settings_service.ts","settings_page/settings_page.ts","user_settings/user_settings.ts","user_settings/user_settings_basic_info.ts","user_settings/user_settings_change_password.ts","user_settings/user_settings_sessions.ts","user_settings/user_settings_strings.ts","user_settings/user_settings_verify_email.ts","help_page/help_page.html","help.ts","help_page/help_page.ts","help_service/help_service.ts"],"names":["angular","module","pip","scope","scope_1","thisModule","factory","$rootScope","initError","errors","message","undefined","code","details","errorMessage","error","_","isNull","data","statusText","status","errorCode","errorDetails","createError","scopeObject","reset","empty","get","set","console","isObject","run","$injector","pipTranslate","has","setTranslations","ENTERING","PROCESSING","LOADING","SAVING","pipError","initTransaction","transactions","id","operation","createTransaction","transaction","busy","failed","aborted","begin","Date","getTime","abort","end","err","routing","captureStateTranslations","$on","event","toState","toParams","fromState","fromParams","CurrentState","name","url","params","PreviousState","decorateBackStateService","$delegate","$window","goBack","history","back","goBackAndSelect","state","cloneDeep","extend","go","addBackStateDecorator","$provide","decorator","$inject","config","decorateRedirectStateProvider","redirect","RedirectedStates","this","addRedirectStateProviderDecorator","$timeout","Error","preventDefault","transitionTo","location","addRedirectStateDecorator","decorateRedirectStateService","hookRoutingEvents","$log","$state","RoutingVar","unfoundState","to","IdentityRootVar","IdentityChangedEvent","IdentityService","setRootVar","identity","_setRootVar","_identity","_rootScope","prototype","session","defineProperty","value","$broadcast","enumerable","configurable","IdentityProvider","_service","$get","provider","SessionRootVar","SessionOpenedEvent","SessionClosedEvent","SessionService","_session","open","fullReset","partialReset","close","oldSession","SessionProvider","translate","restrict","key1","key2","link","element","attrs","key","text","directive","pipTranslateDirective","pipTranslateHtmlDirective","translateFilter","optionalTranslateFilter","filter","__extends","d","b","constructor","p","hasOwnProperty","Object","create","__","en","ru","es","pt","de","fr","Translation","_language","use","language","translations","map","_translations","isUndefined","translateArray","keys","length","values","each","k","push","translateSet","keyProp","valueProp","translateObjects","items","item","translateWithPrefix","prefix","replace","toUpperCase","translateSetWithPrefix","translateSetWithPrefix2","TranslateService","translation","persist","localStorageService","_persist","_translation","_storage","save","LanguageRootVar","LanguageChangedEvent","TranslateProvider","_super","call","hash","result","i","charCodeAt","verification","Math","random","toString","substr","sample","maxLength","indexOf","substring","strRepeat","str","qty","sprintf","get_type","variable","slice","toLowerCase","args","_i","arguments","str_format","cache","parse","format","parse_tree","argv","arg","match","pad","pad_character","pad_length","node_type","output","tree_length","cursor","test","String","fromCharCode","parseInt","toExponential","parseFloat","toFixed","abs","charAt","str_repeat","join","fmt","arg_names","exec","_fmt","replacement_field","field_match","field_list","resetPartial","resetFull","resetAll","full","partial","$reset","$partialReset","scrollTo","parentElement","childElement","animationDuration","setTimeout","$","position","modDiff","scrollTop","top","animate","getBrowserName","ua","navigator","userAgent","search","version","split","browser","getPlatform","isDesktop","isMobile","isCordova","getOS","osAll","osAndroid","isSupported","supported","edge","ie","firefox","opera","getBrowserVersion","normalizeOne","tag","trim","compressOne","equal","tag1","tag2","normalizeAll","tags","isString","compressAll","extract","entity","searchFields","field","hashTags","concat","uniq","normalize","compress","utilities","DefaultEvents","TimerEvent","timeout","TimerService","$interval","_started","_events","_interval","addEvent","existingEvent","find","e","newEvent","startEvent","removeEvent","stopEvent","splice","clearEvents","stop","_this","interval","cancel","ex","start","$templateCache","put","$parse","controller","$scope","$attrs","trigGetter","pipFabTooltipVisibility","showGetter","pipFabShowTooltip","showSetter","assign","$watch","isOpen","template","$element","hide","$button","width","show","textGetter","pipText","visibleGetter","pipVisible","refreshGetter","pipRefresh","children","$text","css","onClick","newValue","ngDisabled","buttons","currentButtonValue","currentButton","change","templateUrl","$mdMedia","index","class","isArray","currentButtonIndex","buttonSelected","disabled","enterSpacePress","elem","on","addClass","removeClass","window","resize","left","$mainBody","cardContainer","windowWidth","maxWidth","maxHeight","height","minWidth","floor","minHeight","space","min","hasClass","max","$header","$footer","$body","maxBodyHeight","outerHeight","pipMedia","addResizeListener","removeResizeListener","service","getBoundaries","size","boundaries","requestFrame","fn","raf","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","clearTimeout","resizeListener","win","target","srcElement","__resizeRAF__","trigger","__resizeTrigger__","__resizeListeners__","forEach","objectLoad","contentDocument","defaultView","__resizeElement__","addEventListener","attachEvent","getComputedStyle","style","obj","document","createElement","setAttribute","onload","type","isIE","appendChild","setSizes","detachEvent","removeEventListener","removeChild","updateClasses","sizes","elementWidth","innerWidth","$apply","xs","gt-xs","sm","gt-sm","md","gt-md","lg","gt-lg","xl","pipTilesController","force","containerWidth","log","columns","columnWidth","sizer","container","prevContainerWidth","masonry","layout","Masonry","appendTo","convertToBoolean","transclude","pipInfinite","tilesOptions","gutter","isFitWidth","isResizeBound","transitionDuration","pipSplit","splitElements","forwardTransition","addTransitionSequence","sequence","transitionSequences","toIndex","fromIndex","inputEvent","isDefined","touches","originalEvent","$document","pipDraggable","initialize","attr","dragHandles","querySelectorAll","_dragHandle","toggleListeners","scrollContainer","scrollParent","parent","pipScrollContainer","scrollContainerGetter","toBoolean","enable","onDestroy","pipDrag","onEnableChange","pipCenterAnchor","onCenterAnchor","_pressEvents","onpress","_hasTouch","nodeName","newVal","oldVal","_dragEnabled","_centerAnchor","isClickableElement","evt","button","saveElementStyles","cancelPress","_pressTimer","onlongpress","LONG_PRESS","_moveEvents","_releaseEvents","_elementStyle","off","offset","getBoundingClientRect","_dragOffset","allowTransform","body","scrollLeft","centerX","offsetWidth","centerY","offsetHeight","_mx","pageX","_my","pageY","_mrx","_mry","_tx","pageXOffset","_ty","pageYOffset","onmove","onrelease","_deregisterRootMoveListener","origEvent","_data","getDragData","x","y","tx","ty","onDragStartCallback","$data","$event","horizontalScroll","verticalScroll","dragToScroll","moveElement","uid","_myid","dragOffset","callback","onDragComplete","onDragStopCallback","onDragSuccessCallback","transform","z-index","-webkit-transform","-ms-transform","eWidth","scrollX","scrollY","containerLeft","containerRight","activationDistance","scrollDistance","containerTop","containerHeight","innerHeight","containerBottom","containerScrollLeft","containerScrollTop","ngDrag","DocumentTouch","$id","pipDragStart","pipDragStop","pipDragSuccess","$eval","pipDragData","pipVerticalScroll","pipHorizontalScroll","pipActivationDistance","pipScrollDistance","noop","pipDrop","onDragStart","onDragMove","onDragEnd","_dropEnabled","isTouching","pipDragMove","onDragMoveCallback","pipDropSuccess","onDropCallback","$target","updateDragStyles","mouseX","mouseY","dragElement","touching","hitTest","_lastDropTouch","bounds","documentElement","right","bottom","absorbEvent_","stopPropagation","cancelBubble","returnValue","$mdConstant","require","init","selector","withHidden","controls","controlsLength","keydownListener","keyCode","which","KEY_CODE","LEFT_ARROW","UP_ARROW","RIGHT_ARROW","DOWN_ARROW","increment","moveToControl","focus","pipWithHidden","ngModel","THROTTLE_MILLISECONDS","pipInfiniteScroll","pipScrollDisabled","pipScrollUseDocumentBottom","pipScrollListenForEvent","isNaN","clientHeight","offsetTop","ownerDocument","handleScrollDistance","v","handleScrollDisabled","scrollEnabled","checkWhenEnabled","onContainerScroll","handleScrollUseDocumentBottom","useDocumentBottom","changeContainer","newContainer","unbind","bind","handleScrollContainer","HTMLElement","append","parents","Array","immediateCheck","unregisterEventListener","windowElement","containerTopOffset","elementBottom","remaining","shouldScroll","$$phase","throttle","pipScrollParent","pipScrolImmediateCheck","selectItem","itemParams","isScrolled","itemIndex","itemId","className","modifier","itemsLength","raiseEvent","noScroll","scrollToItem","defineSelectedIndex","updateIndex","selectedItem","selectedIndex","selectedId","indexSetter","idSetter","changeGetter","newIndex","oldIndex","oldSelectedIndex","$item","itemTop","itemHeight","itemBottom","indexGetter","pipSelected","idGetter","pipSelectedId","pipSelect","enterSpaceGetter","pipEnterSpacePress","pipNoScroll","pipSkipHidden","pipTreeList","currentElementTabinex","pipSelectedWatch","newSelectedId","newSelectedIndex","currentTarget","ENTER","SPACE","inc","unsavedChangesAvailable","unsavedChangesMessage","afterLeave","onbeforeunload","$routing","unbindFunc","confirm","isFunction","colors","currentColor","colorChange","DEFAULT_COLORS","currentColorIndex","selectColor","sliderIndex","$pipImageSlider","setIndex","pipImageIndex","startInterval","timePromises","blocks","direction","throttled","DEFAULT_INTERVAL","stopInterval","restartInterval","pipAnimationType","pipAnimationInterval","swipeStart","toBlock","nextBlock","prevBlock","slideTo","nextIndex","registerSlider","removeSlider","register","sliderId","sliderScope","sliders","remove","getSlider","nextCarousel","prevCarousel","blockIndex","getSliderScope","pipButtonType","pipSliderId","pipSlideTo","MARKDOWN_ATTACHMENTS","checklist","documents","pictures","time","describeAttachments","array","attachString","attachTypes","attach","bindText","textString","isClamped","options","pipLineCount","isNumber","clampGetter","gfm","tables","breaks","sanitize","pedantic","smartLists","smartypents","marked","html","listGetter","pipList","pipRebind","$compile","backdropElement","closePopover","backdropClick","cancelCallback","onPopoverClick","$e","pos","docWidth","docHeight","popover","calcHeight","title","footer","content","contentHeight","onResize","responsive","defaults","$parent","onShow","onHide","$new","locals","popoverTemplate","showProgress","logoUrl","loadProgressImage","image","$mdToast","toast","pipErrorDetailsDialog","actions","actionLenght","showDetails","onDetails","ok","onAction","action","showNextToast","toasts","showToast","currentToast","hideDelay","duration","SHOW_TIMEOUT","sounds","then","successCallback","addToast","removeToasts","removeToastsById","getToastById","onStateChangeSuccess","reject","onClearToasts","clearToasts","showNotification","SHOW_TIMEOUT_NOTIFICATIONS","showMessage","showError","hideAllToasts","pipTags","pipType","pipTypeLocal","tagsGetter","datetime","formatTimeFilter","pipDateTime","formatTime","formatDateOptionalFilter","formatDateOptional","formatLongDateFilter","formatLongDate","formatShortDateFilter","formatShortDate","formatMonthFilter","formatMonth","formatLongMonthFilter","formatLongMonth","formatYearFilter","formatYear","formatWeekFilter","formatWeek","formatShortWeekFilter","formatShortWeek","formatShortDateTimeFilter","formatShortDateTime","formatLongDateTimeFilter","formatLongDateTime","formatShortTimeFilter","formatShortTime","formatLongTimeFilter","formatLongTime","formatShortDayOfWeekFilter","formatShortDayOfWeek","formatLongDayOfWeekFilter","formatLongDayOfWeek","formatDateNumberFilter","formatDateNumber","formatLongDateNumberFilter","formatLongDateNumber","formatTimeNumberFilter","formatTimeNumber","formatLongTimeNumberFilter","formatLongTimeNumber","formatLongMonthDayFilter","formatLongMonthDay","formatShortMonthDayFilter","formatShortMonthDay","formatDateRangeFilter","value1","value2","formatDateRange","formatDateTimeRangeFilter","formatDateTimeRange","formatISOWeekFilter","formatISOWeek","formatShortISOWeekFilter","formatShortISOWeek","formatISOWeekOrdinalFilter","formatISOWeekOrdinal","formatDateYFilter","formatDateY","formatLongDateYFilter","formatLongDateY","formatMillisecondsToSecondsFilter","formatMillisecondsToSeconds","formatElapsedIntervalFilter","formatElapsedInterval","getDateJSONFilter","getDateJSON","DateTime","_momentRanged","_defaultFormat","isUndefinedOrNull","getRange","getOperationRange","range","formatDateTime","basicFormat","date","formatTpl","moment","isValid","formatDateTimeY","nowDate","formatMoment","localeData","longDateFormat","year","formatDay","formatMonthYearless","formatMonthDay","formatLL","formatYearlessLL","formatRange","dateStart","dateEnd","isSame","isAfter","month","startOf","toDate","toEndRange","mssOffset","add","fromNow","JSON","stringify","getNextStart","category","getPrevStart","getNowStart","addHours","hours","toStartDay","toStartRange","toEndDay","toStartWeek","toEndWeek","toStartMonth","toEndMonth","toStartYear","toEndYear","DateTimeService","_datetime","DateTimeProvider","timeMode","model","ngChange","dayList","days","count","monthList","months","momentMonths","yearList","currentYear","getFullYear","startYear","endYear","years","adjustDay","day","getValue","isDate","getDate","getMonth","setValue","localeDate","_months","_weekdays","_weekdaysMin","_week","dow","DAY","MONTH","YEAR","yearLabel","dayLabel","monthLabel","onDayChanged","onMonthChanged","disableControls","pipChanged","pipDateRangeType","pipDateFormat","pipNoLine","setCurrent","currentState","week","dateRangeType","fillLists","weeks","weekList","shortMonths","correctWeek","prevState","getUTCDate","getUTCMonth","getUTCFullYear","getWeekByDate","adjustWeek","getCountDay","nameDays","momentShortDays","weekday","dayOfWeek","startWeek","UTC","getUTCDay","getWeek","countDay","countPrevMonthDay","endDay","startDay","getTimezoneOffset","onChange","currentDate","currentMonth","currentDay","onYearChanged","onWeekChange","isDay","oldValue","onYearClick","onDayClick","pipStartDate","pipEndDate","defineStartDate","defineEndDate","pipStartLabel","pipEndLabel","pipSize","setDuration","startDate","endDate","startTime","endTime","validateEndDate","setDate","validateStartDate","getTimeInterval","j","minutes","initDate","EVENT_NEW_START_TIME","EVENT_NEW_END_TIME","endLabel","startLabel","intervalTimeCollection","defineDate","onChangeStartDate","onChangeEndDate","onChangeStartTime","$mdDialog","targetEvent","clickOutsideToClose","CONFIRM_TITLE","theme","$theme","onCancel","onOk","ERROR_DETAILS","CODE","PATH","ERROR","METHOD","MESSAGE","DISMISS","dismissButton","errorMethod","errorPath","errorText","INFORMATION_TITLE","pipFormat","truncate","focusToggleControl","option","focusInput","list","OPTIONS_TITLE","applyButtonTitle","appleButtonTitle","selectedOption","active","selectedOptionName","deleted","deletedTitle","onOptionSelect","onKeyPress","onSelect","noActions","noTitle","hint","optionIndex","findIndex","onSelected","onKeyUp","nav","NavService","appBar","navIcon","breadcrumb","sideNav","navHeader","navMenu","globalActions","primaryActions","secondaryActions","primaryGlobalActions","secondaryGlobalActions","globalPrimaryActions","globalSecondaryActions","primaryLocalActions","secondaryLocalActions","getConfig","hideLocalActions","sendConfigEvent","showLocalActions","updateActionCount","actionName","localActions","$location","pipActions","onActionsChanged","actionHidden","access","actionCount","onActionClick","$mdOpenMenu","divider","originatorEv","menu","href","stateParams","showMenu","partyAvatarUrl","openMenu","ev","calcActions","secondaryActionsVisible","secondaryDividerVisible","pipAppBar","onAppBarChanged","$emit","ngIfDirective","ngIf","priority","terminal","visible","apply","parts","currentPartValue","partName","partValue","pipAppbarPart","initParts","cssClass","ngClasses","showAppBar","newCssClass","hideAppBar","showShadowSm","showShadowSmXs","showShadow","hideShadow","getOrSetPart","getOrSetParts","isEqual","part","breadcrumbDirective","BreadcrumbController","controllerAs","pipBreadcrumb","_window","BreadcrumbChangedEvent","onBreadcrumbChanged","BreadcrumbBackEvent","onBreadcrumbBack","backCallback","click","onBreadcrumbClick","onSearchOpen","BreadcrumbItem","BreadcrumbConfig","BreadcrumbService","_config","criteria","sendEvent","BreadcrumbProvider","showDropdown","activeIndex","select","languagePickerDirective","languages","LanguagePickerController","_timeout","_translate","setLanguages","lang","onLanguageClick","subtitle","imageUrl","imageCss","pipNavHeader","setImageMarginCSS","cssParams","clientWidth","imageWidth","naturalWidth","imageHeight","naturalHeight","margin","onIdentityChanged","defaultImageUrl","$image","imageBlock","onUserClick","load","pipNavIcon","onNavIconChanged","onNavIconClick","clear","setMenu","callbackOrEvent","setIcon","iconName","setBack","setImage","icon","showIcon","showBack","showImage","pipSideNav","pipNavMenu","itemVisible","isSectionEmpty","linkCollection","onConfigChanged","onLinkClick","current","setOrGetIcon","sectionIcon","setOrGetCollapsed","collapsed","newConfig","sections","$mdSidenav","setConfig","setCounter","linkTitle","counter","section","menuItem","s","links","onSideNavChanged","pipSidenavPart","sideNavId","toggle","getOrSetId","APPBAR_SEARCH","pipSearch","onSearchBarChanged","searchEnabled","focusSearchText","onSearchEnable","onSearchClick","searchText","onSearchClear","onSearchKeyDown","setSearch","clearSearch","updateCriteria","updateHistory","resizeImage","setCollapsible","collapsibled","onExpand","expanded","pipSdeNavElement","isCollapsed","defaultIicon","onNavToggle","tabs","showTabs","showTabsShadow","tabDisabled","activeTab","pipTheme","initTheme","newTheme","initPersist","newPersist","initSetRoot","newSetRoot","setRoot","$mdTheming","resetContent","getOrSetTheme","THEMES","$mdThemingProvider","coolBackgroundPalette","extendPalette","A100","A200","definePalette","coolPrimaryPalette","300","500","contrastLightColors","coolAccentPalette","A700","primaryPalette","default","backgroundPalette","hue-1","warnPalette","accentPalette","alwaysWatchTheme","monochromeBackgroundPalette","monochromePrimaryPalette","monochromeAccentPalette","hue-2","warmBackgroundPalette","warmPrimaryPalette","warmAccentPalette","warmErrorPalette","setDefaultTheme","orangeBackgroundPalette","800","900","orangePrimaryPalette","registerDarkTheme","themeName","darkBackgroundPalette","600","700","darkAccentPalette","registerBlackTheme","blackBackgroundPalette","blackAccentPalette","registerBlueTheme","bluePrimaryPalette","contrastDefaultColor","contrastDarkColors","blueBackgroundPalette","blueAccentPalette","greenBackgroundPalette","greenPrimaryPalette","greenAccentPalette","thirdPartyPalette","A400","greyPalette","tealPalette","RedBackgroundPalette","RedPrimaryPalette","PinkBackgroundPalette","PinkPrimaryPalette","ERROR_ROUTE_TITLE","ERROR_ROUTE_SUBTITLE","ERROR_ROUTE_CONTINUE","ERROR_ROUTE_TRY_AGAIN","ERROR_ROUTE_GO_BACK","ERROR_ROUTE_PAGE_TITLE","ERROR_UNKNOWN_TITLE","ERROR_UNKNOWN_SUBTITLE","ERROR_UNKNOWN_CLOSE","ERROR_UNKNOWN_DETAILS","ERROR_AVAILABLE_TITLE","ERROR_AVAILABLE_SUBTITLE","ERROR_AVAILABLE_CLOSE","ERROR_AVAILABLE_TRY_AGAIN","ERROR_RESPONDING_TITLE","ERROR_RESPONDING_SUBTITLE","ERROR_RESPONDING_RETRY","ERROR_UNSUPPORTED_TITLE","ERROR_UNSUPPORTED_SUBTITLE","ERROR_UNSUPPORTED_O","ERROR_UNSUPPORTED_O_VER","ERROR_UNSUPPORTED_IE","ERROR_UNSUPPORTED_IE_VER","ERROR_UNSUPPORTED_GC","ERROR_UNSUPPORTED_GC_VER","ERROR_UNSUPPORTED_FM","ERROR_UNSUPPORTED_FM_VER","$stateProvider","$ctrls","clearFieldErrors","fieldController","$error","prop","$setValidity","clearFormErrors","formController","$serverError","errorsWithHint","isEmpty","touchedErrorsWithHint","form","$submitted","$touched","$dirty","resetFormErrors","$setPristine","$setUntouched","$setDirty","$setSubmitted","resetFieldsErrors","setFormError","errorFieldMap","errorName","goToUnhandledErrorPage","appHeader","showMenuNavIcon","showTitleBreadcrumb","onClose","timeoutInterval","onContinue","absolute","urlBack","onRetry","retry","parseError","error_details","description","server_stacktrace","client_stacktrace","pipBarChart","series","bindToController","$mdColorPalette","configBarWidthAndLabel","labels","d3","selectAll","chartBars","parentHeight","getBBox","classed","barSize","Number","transition","materialColorToRgba","color","generateParameterColor","vm","legend","chart","chartElem","palette","scale","paletteColors","ordinal","updatedSeries","datum","update","nv","addGraph","models","discreteBarChart","label","showValues","showXAxis","showYAxis","valueFormat","tooltip","enabled","noData","dispatch","pipChartLegend","interactive","colorCheckboxes","checkboxContainers","legendTitles","prepareSeries","hex","pipLineChart","dynamic","updateScroll","domains","boundary","bDiff","domDiff","addZoom","fixDomain","domain","prevXDomain","prevScale","clone","prevTranslate","d3zoom","zoomed","unzoomed","xDomain","xScale","x_boundary","redraw","step","svg","coordinates","point","keypress","setZoom","yDomain","y_boundary","scaleExtent","yAxis","xAxis","discrete","yScale","behavior","zoom","nice","center0","translate0","coordinates0","center1","sourceEvents","isVisibleX","isVisibleY","zoomIn","zoomOut","lineChart","showLegend","tickFormat","utils","windowResize","pipPieChart","renderTotalLabel","svgElem","totalVal","reduce","sum","curr","titleElem","resizeTitleLabel","resizeTitleLabelUnwrap","boxSize","pieChart","showLabels","labelThreshold","growOnHover","donut","donutRatio","getFullStateName","getTabs","getDefaultTab","defaultTab","addTab","tabObj","existingTab","validateTab","stateConfig","setDefaultTab","tab","showTitleText","newTitleText","titleText","titleLogo","showTitleLogo","newTitleLogo","showNavIcon","isNavIcon","auth","pipSettings","onDropdownSelect","onNavigationSelect","initSelect","selected","tabIndex","tabId","$user","sortBy","pipSettingsProvider","pipTransaction","pipToasts","pipDataUser","pipDataParty","pipFormErrors","onPictureChanged","picture","onPictureCreated","sender","saveChanges","$party","$invalid","loc_pos","party","toJson","originalParty","tid","updateParty","nameCopy","status_code","fromJson","updateUser","setCurrentTheme","onChangePassword","email","answer","onVerifyEmail","user","email_ver","genders","themes","omit","onExit","onChangeUser","debounce","onChangeBasicInfo","onCheckRepeatPassword","changePasData","repeat","new_password","showRepeatHint","onApply","changePassword","1107","1105","errorsRepeatWithHint","formPart","pipDataSessionProvider","resolve","sessions","readSessionsResolver","sessionId","readSessionIdResolver","pipDataSession","onRemoveAll","async","eachSeries","removeSession","without","onRemove","pipTranslateProvider","SETTINGS_TITLE","SETTINGS_BASIC_INFO_TITLE","SETTINGS_ACTIVE_SESSIONS_TITLE","SETTINGS_BASIC_INFO_FULL_NAME","SETTINGS_BASIC_INFO_VERIFY_HINT","SETTINGS_BASIC_INFO_VERIFY_CODE","SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD","SETTINGS_BASIC_INFO_CHANGE_PASSWORD","SETTINGS_BASIC_INFO_NAME_HINT","SETTINGS_BASIC_INFO_WORDS_ABOUT_ME","SETTINGS_BASIC_INFO_GENDER","SETTINGS_BASIC_INFO_BIRTHDAY","SETTINGS_BASIC_INFO_LOCATION","SETTINGS_BASIC_INFO_PRIMARY_EMAIL","SETTINGS_BASIC_INFO_FROM","SETTINGS_BASIC_INFO_USER_ID","SETTINGS_CHANGE_PASSWORD_TITLE","SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD","SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD","SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD","SETTINGS_ACTIVE_SESSIONS_SUBTITLE","SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION","SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS","SETTINGS_ACTIVE_SESSION_OS","SETTINGS_ACTIVE_SESSION_IP","SETTINGS_ACTIVE_SESSION_ACTIVE","SETTINGS_BLACKLIST_TITLE","SETTINGS_BLACKLIST_SUBTITLE","SETTINGS_BLACKLIST_UNBLOCK","SETTINGS_BLACKLIST_EMPTY","SETTINGS_CONTACT_INFO_TITLE","SETTINGS_CONTACT_INFO_EMAIL","SETTINGS_CONTACT_INFO_ADD_EMAIL","SETTINGS_CONTACT_INFO_ADD_PHONE","SETTINGS_CONTACT_INFO_ADD_ADDRESS","SETTINGS_CONTACT_INFO_ADD_ACCOUNT","SETTINGS_CONTACT_INFO_ADD_URL","SETTINGS_CONTACT_INFO_ADDRESS","SETTINGS_CONTACT_INFO_PHONE","SETTINGS_CONTACT_INFO_ACCOUNT_NAME","SETTINGS_CONTACT_INFO_URL","THEME","HINT_PASSWORD","HINT_REPEAT_PASSWORD","ERROR_WRONG_PASSWORD","ERROR_IDENTICAL_PASSWORDS","REPEAT_PASSWORD_INVALID","ERROR_EMAIL_INVALID","onAbort","onRequestVerificationClick","requestEmailVerification","onVerify","verifyEmail","verifyData","1106","1103","emailVerified","HelpPageController","pipHelp"],"mappings":"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","file":"pip-webui.min.js","sourcesContent":["/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipServices', [\r\n        'pipScope',\r\n\t    'pipTranslate',\r\n        'pipRouting',\r\n        'pipTimer',\r\n        'pipSession',\r\n        'pipIdentity',\r\n        'pipSystemInfo',\r\n        'pipFormat',\r\n        'pipScroll',\r\n        'pipPageReset',        \r\n        'pipTags'\r\n    ]);\r\n    \r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.scope {\r\n    'use strict';\r\n\r\n    angular.module('pipScope', ['pipTranslate', 'pipScope.Error', 'pipScope.Transaction']);\r\n    angular.module('pipTransactions', ['pipScope']);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.scope {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipScope.Error', []);\r\n\r\n    /*\r\n     * Error is designed to assist with error handling\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * */\r\n    thisModule.factory('pipError',\r\n        function ($rootScope) {\r\n\r\n            // Initialize error scope\r\n            $rootScope.errors = {};\r\n\r\n            return createError;\r\n\r\n            //----------------------------\r\n\r\n            function initError(scope) {\r\n                $rootScope.errors[scope] = {\r\n                    message: undefined,\r\n                    code: undefined,\r\n                    details: undefined\r\n                };\r\n            };\r\n\r\n            function errorMessage(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                // Process regular messages\r\n                if (error.message) {\r\n                    return error.message;\r\n                }\r\n\r\n                // Process server application errors\r\n                if (error.data) {\r\n                    if (error.data.code) {\r\n                        // process server error codes here\r\n                        return 'ERROR_' + error.data.code;\r\n                    }\r\n\r\n                    if (error.data.message) {\r\n                        return error.data.message;\r\n                    }\r\n                }\r\n\r\n                // Process standard HTTP errors\r\n                if (error.statusText) {\r\n                    return error.statusText;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return 'ERROR_' + error.status;\r\n                }\r\n                \r\n                return error.data ? error.data : error;\r\n            };\r\n\r\n            function errorCode(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                if (error.data && error.data.code) {\r\n                    return error.data.code;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return error.status;\r\n                }\r\n                \r\n                return null;\r\n            };\r\n\r\n            function errorDetails(error) {\r\n                return error && error.data ? error.data : error;\r\n            };\r\n\r\n            function createError(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = {\r\n                    reset: function () {\r\n                        initError(scope);\r\n                    },\r\n\r\n                    empty: function() {\r\n                        var error = $rootScope.errors[scope];\r\n                        return _.isNull(error) || (_.isNull(error.message) && _.isNull(error.code));\r\n                    },\r\n\r\n                    get: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope];\r\n                        }\r\n                        return '';\r\n                    },\r\n\r\n                    message: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].message;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    code: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].code;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    details: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].details;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    set: function (error) {\r\n                        if (error) {\r\n                            //pipAssert.isObject(error, \"Setting error: error should be an object\");\r\n\r\n                            $rootScope.errors[scope] = {\r\n                                message: errorMessage(error),\r\n                                code: errorCode(error),\r\n                                details: errorDetails(error)\r\n                            };\r\n                            console.error($rootScope.errors[scope]);\r\n                        } else {\r\n                            initError(scope);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                // Assign error into scope\r\n                if (_.isObject(scopeObject)) scopeObject.error = error;\r\n\r\n                return error;\r\n            };\r\n        }\r\n    );\r\n    \r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.scope {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipScope.Transaction', ['pipTranslate']);\r\n\r\n\tthisModule.run(function($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'ENTERING': 'Entering...',\r\n                'PROCESSING': 'Processing...',\r\n                'LOADING': 'Loading...',\r\n                'SAVING': 'Saving...'\r\n            });\r\n\r\n            pipTranslate.setTranslations('ru', {\r\n                'ENTERING': 'Вход в систему...',\r\n                'PROCESSING': 'Обрабатывается...',\r\n                'LOADING': 'Загружается...',\r\n                'SAVING': 'Сохраняется...'\r\n            });   \r\n        }\r\n\t\t\r\n\t});\r\n\r\n    /*\r\n     * Transaction is designed to assist with transaction processing\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * \r\n     * Transaction is also integrated with Error service. So you don't need to double it\r\n     * */\r\n    thisModule.factory('pipTransaction',\r\n        function ($rootScope, pipError) {\r\n\r\n            // Initialize transaction scope\r\n            $rootScope.transactions = {};\r\n\r\n            return createTransaction;\r\n\r\n            //---------------------------------\r\n\r\n            function initTransaction(scope) {\r\n                $rootScope.transactions[scope] = {\r\n                    id: undefined,\r\n                    operation: undefined\r\n                };\r\n            }\r\n            \r\n            function createTransaction(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = pipError(scope);\r\n                var transaction = {\r\n                    error: error,\r\n\r\n                    reset: function () {\r\n                        initTransaction(\"\");\r\n                        error.reset();\r\n                    },\r\n\r\n                    busy: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction != null && transaction.id;\r\n                    },\r\n\r\n                    failed: function() {\r\n                        return !error.empty();\r\n                    },\r\n\r\n                    aborted: function(id) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return _.isNull(transaction) || transaction.id != id;\r\n                    },\r\n\r\n                    get: function () {\r\n                        if (_.isNull($rootScope.transactions[scope])) {\r\n                            initTransaction(scope);\r\n                        }\r\n                        return $rootScope.transactions[scope];\r\n                    },\r\n\r\n                    id: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.id : null;\r\n                    },\r\n\r\n                    operation: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.operation : null;\r\n                    },\r\n\r\n                    errorMessage: function () {\r\n                        return error.message();\r\n                    },\r\n\r\n                    begin: function (operation) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        // Transaction already in progress\r\n                        if (transaction != null && transaction.id) {\r\n                            return null;\r\n                        }                      \r\n\r\n                        transaction = $rootScope.transactions[scope] = {\r\n                            id: new Date().getTime(),\r\n                            operation: operation || 'PROCESSING'\r\n                        };\r\n                        error.reset();\r\n\r\n                        return transaction.id;\r\n                    },\r\n\r\n                    abort: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction) {\r\n                            transaction.id = null;\r\n                        }\r\n                        error.reset();\r\n                    },\r\n\r\n                    end: function (err) {\r\n                        if (err) error.set(err);\r\n                        else error.reset();\r\n\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction != null) {\r\n                            transaction.id = null;\r\n                        }                      \r\n                    }\r\n                };\r\n\r\n                if (_.isObject(scopeObject)) {\r\n                    scopeObject.error = error;\r\n                    scopeObject.transaction = transaction;\r\n                }\r\n\r\n                return transaction;\r\n            }\r\n        }\r\n    );\r\n\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.routing {\r\n    'use strict';\r\n\r\n    export let CurrentState: any;\r\n    export let PreviousState: any;\r\n\r\n    function captureStateTranslations($rootScope) {\r\n        \"ngInject\";\r\n\r\n        $rootScope.$on('$stateChangeSuccess',\r\n            (event, toState, toParams, fromState, fromParams) => {\r\n                pip.routing.CurrentState = {\r\n                    name: toState.name, \r\n                    url: toState.url, \r\n                    params: toParams\r\n                };\r\n\r\n                pip.routing.PreviousState = {\r\n                    name: fromState.name, \r\n                    url: fromState.url, \r\n                    params: fromParams\r\n                };\r\n            }\r\n        );\r\n\r\n    }\r\n    \r\n    function decorateBackStateService($delegate, $window) {\r\n        \"ngInject\";\r\n\r\n        $delegate.goBack = goBack;\r\n        $delegate.goBackAndSelect = goBackAndSelect;\r\n\r\n        return $delegate;\r\n        //////////////////////////////////////////////////\r\n\r\n        function goBack(): void {\r\n            $window.history.back()\r\n        }\r\n\r\n        function goBackAndSelect(params: any): void {\r\n            if (pip.routing.PreviousState != null \r\n                && pip.routing.PreviousState.name != null) {\r\n\r\n                let state = _.cloneDeep(pip.routing.PreviousState);\r\n\r\n                // Override selected parameters\r\n                state.params = _.extend(state.params, params);\r\n\r\n                $delegate.go(state.name, state.params);\r\n            } else {\r\n                $window.history.back();\r\n            }\r\n        }\r\n    }\r\n\r\n    function addBackStateDecorator($provide) {\r\n        $provide.decorator('$state', decorateBackStateService);\r\n    }\r\n\r\n    angular\r\n        .module('pipRouting.Back', [])\r\n        .config(addBackStateDecorator)\r\n        .run(captureStateTranslations);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.routing {\r\n    'use strict';\r\n\r\n    export let RedirectedStates: any = {};\r\n\r\n    function decorateRedirectStateProvider($delegate) {\r\n        \"ngInject\";\r\n\r\n        $delegate.redirect = redirect;\r\n\r\n        return $delegate;\r\n        /////////////////////////////////////////////\r\n\r\n        // Specify automatic redirect from one state to another\r\n        function redirect(fromState, toState) {\r\n            pip.routing.RedirectedStates[fromState] = toState;  \r\n            return this;\r\n        }\r\n    }\r\n\r\n    function addRedirectStateProviderDecorator($provide) {\r\n        \"ngInject\";\r\n\r\n        $provide.decorator('$state', decorateRedirectStateProvider);\r\n    }\r\n\r\n    function decorateRedirectStateService($delegate, $timeout) {\r\n        \"ngInject\";\r\n\r\n        $delegate.redirect = redirect;\r\n        \r\n        return $delegate;\r\n        ////////////////////////////////\r\n        \r\n        // Todo: Move this code directly to event handler?\r\n        // Todo: Nothing calls this code!!\r\n        function redirect(event, state, params) {\r\n            let toState = pip.routing.RedirectedStates[state.name];\r\n            if (_.isFunction(toState)) {\r\n                toState = toState(state.name, params);\r\n\r\n                if (_.isNull(toState))\r\n                    throw new Error('Redirected toState cannot be null');\r\n            }\r\n\r\n            if (!!toState) {\r\n                $timeout(() => {\r\n                    event.preventDefault();\r\n                    $delegate.transitionTo(toState, params, {location: 'replace'});\r\n                });\r\n\r\n                return true;\r\n            }\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    function addRedirectStateDecorator($provide) {\r\n        \"ngInject\";\r\n\r\n        $provide.decorator('$state', decorateRedirectStateService);\r\n    }\r\n\r\n    angular\r\n        .module('pipRouting.Redirect', ['ui.router'])\r\n        .config(addRedirectStateProviderDecorator)\r\n        .config(addRedirectStateDecorator);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.routing {\r\n    'use strict';\r\n    \r\n    angular.module('pipRouting', [\r\n        'ui.router', 'pipRouting.Events', 'pipRouting.Back', 'pipRouting.Redirect'\r\n    ]);\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.routing {\r\n    'use strict';\r\n\r\n    export let RoutingVar: string = \"$routing\";\r\n\r\n    function hookRoutingEvents($log, $rootScope, $state) {\r\n        \"ngInject\";\r\n\r\n        $rootScope.$on('$stateChangeStart',\r\n            (event, toState, toParams, fromState, fromParams) => {\r\n                $rootScope[RoutingVar] = true;\r\n            }\r\n        );\r\n\r\n        $rootScope.$on('$stateChangeSuccess',\r\n            (event, toState, toParams, fromState, fromParams) => {\r\n                // Unset routing variable to disable page transition\r\n                $rootScope[RoutingVar] = false;                \r\n            }\r\n        );\r\n\r\n        // Intercept route error\r\n        $rootScope.$on('$stateChangeError',\r\n            (event, toState, toParams, fromState, fromParams, error) => {\r\n                // Unset routing variable to disable page transition\r\n                $rootScope[RoutingVar] = false;\r\n\r\n                $log.error('Error while switching route to ' + toState.name);\r\n                $log.error(error);\r\n\r\n                console.error('Error while switching route to ' + toState.name);\r\n                console.error(error);\r\n            }\r\n        );\r\n\r\n        // Intercept route error\r\n        $rootScope.$on('$stateNotFound',\r\n            function(event, unfoundState, fromState, fromParams) {\r\n                event.preventDefault();\r\n\r\n                $rootScope[RoutingVar] = false;\r\n\r\n                // Todo: Move to errors\r\n                $state.go('errors_missing_route',  {\r\n                        unfoundState: unfoundState,\r\n                        fromState : {\r\n                            to: fromState ? fromState.name : '',\r\n                            fromParams: fromParams\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        );\r\n\r\n    }\r\n    \r\n    angular\r\n        .module('pipRouting.Events', [])\r\n        .run(hookRoutingEvents);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.session {\r\n    'use strict';\r\n\r\n    export const IdentityRootVar = \"$identity\";\r\n    export const IdentityChangedEvent = \"pipIdentityChanged\";\r\n\r\n    export interface IIdentity {\r\n        id: string;\r\n        full_name: string;\r\n        details: string;\r\n        email: string;\r\n        photo_url: string;\r\n    }\r\n\r\n    export interface IIdentityService {\r\n        identity: IIdentity;\r\n    }\r\n\r\n    export interface IIdentityProvider extends ng.IServiceProvider {\r\n        setRootVar: boolean;\r\n        identity: IIdentity;\r\n    }\r\n\r\n    class IdentityService implements IIdentityService {\r\n        private _identity: IIdentity;\r\n        private _setRootVar: boolean;\r\n        private _rootScope: ng.IRootScopeService;\r\n\r\n        public constructor(\r\n            setRootVar: boolean,\r\n            identity: IIdentity,\r\n            $rootScope: ng.IRootScopeService\r\n        ) {\r\n            this._setRootVar = setRootVar;\r\n            this._identity = identity;\r\n            this._rootScope = $rootScope;\r\n\r\n            this.setRootVar();\r\n        }\r\n\r\n        private setRootVar(): void {\r\n            if (this._setRootVar)\r\n                this._rootScope[pip.session.IdentityRootVar] = this._identity;\r\n        }\r\n\r\n        public get identity(): IIdentity {\r\n            return this._identity;\r\n        }\r\n\r\n        public set identity(value: IIdentity) {\r\n            this._identity = value;\r\n            this.setRootVar();\r\n            this._rootScope.$broadcast(pip.session.IdentityChangedEvent, this._identity);\r\n        }\r\n    }\r\n\r\n    class IdentityProvider implements IdentityProvider {\r\n        private _setRootVar = true;\r\n        private _identity: IIdentity = null;\r\n        private _service: pip.session.IIdentityService = null;\r\n\r\n        public constructor() { }\r\n\r\n        public get setRootVar(): boolean {\r\n            return this._setRootVar;  \r\n        }\r\n\r\n        public set setRootVar(value: boolean) {\r\n            this._setRootVar = !!value;\r\n        }\r\n\r\n        public get identity(): any {\r\n            return this._identity;  \r\n        }\r\n\r\n        public set identity(value: any) {\r\n            this._identity = value;\r\n        }\r\n\r\n        public $get($rootScope: ng.IRootScopeService): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null)\r\n                this._service = new IdentityService(this._setRootVar, this._identity, $rootScope);\r\n\r\n            return this._service;\r\n        }\r\n\r\n    }\r\n\r\n    angular\r\n        .module('pipIdentity', [])\r\n        .provider('pipIdentity', IdentityProvider);\r\n        \r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.session {\r\n    'use strict';\r\n\r\n    export const SessionRootVar = \"$session\";\r\n    export const SessionOpenedEvent = \"pipSessionOpened\";\r\n    export const SessionClosedEvent = \"pipSessionClosed\";\r\n\r\n    export interface ISessionService {\r\n        session: any;\r\n        isOpened: boolean;\r\n\r\n        open(session: any): void;\r\n        close(): void;\r\n    }\r\n\r\n    export interface ISessionProvider extends ng.IServiceProvider {\r\n        setRootVar: boolean;\r\n        session: any;\r\n    }\r\n\r\n    class SessionService implements ISessionService {\r\n        private _setRootVar: boolean;\r\n        private _session: any;\r\n        private _rootScope: ng.IRootScopeService;\r\n\r\n        public constructor(\r\n            setRootVar: boolean, \r\n            session: any, \r\n            $rootScope: ng.IRootScopeService\r\n        ) {\r\n            this._setRootVar = setRootVar;\r\n            this._session = session;\r\n            this._rootScope = $rootScope;\r\n\r\n            this.setRootVar();\r\n        }\r\n        \r\n        private setRootVar(): void {\r\n            if (this._setRootVar)\r\n                this._rootScope[pip.session.SessionRootVar] = this._session;\r\n        }\r\n\r\n        public get session(): any {\r\n            return this._session;\r\n        }\r\n\r\n        public get isOpened(): boolean {\r\n            return this._session != null;\r\n        }\r\n\r\n        public open(session: any, fullReset: boolean = false, partialReset: boolean = false) {\r\n            if (session == null)\r\n                throw new Error(\"Session cannot be null\");\r\n\r\n            this._session = session;\r\n            this.setRootVar();\r\n            this._rootScope.$broadcast(pip.session.SessionOpenedEvent, session);\r\n        }\r\n\r\n        public close(fullReset: boolean = false, partialReset: boolean = false) {\r\n            let oldSession = this._session;\r\n\r\n            this._session = null;\r\n            this.setRootVar();\r\n            this._rootScope.$broadcast(pip.session.SessionClosedEvent, oldSession);\r\n        }\r\n    }\r\n\r\n    class SessionProvider implements ISessionProvider {\r\n        private _setRootVar = true;\r\n        private _session: any = null;\r\n        private _service: pip.session.ISessionService = null;\r\n\r\n        public constructor() { }\r\n\r\n        public get setRootVar(): boolean {\r\n            return this._setRootVar;  \r\n        }\r\n\r\n        public set setRootVar(value: boolean) {\r\n            this._setRootVar = !!value;\r\n        }\r\n\r\n        public get session(): any {\r\n            return this._session;  \r\n        }\r\n\r\n        public set session(value: any) {\r\n            this._session = value;\r\n        }\r\n\r\n        public $get($rootScope: ng.IRootScopeService): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null)\r\n                this._service = new SessionService(this._setRootVar, this._session, $rootScope);\r\n\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular.module('pipSession', ['pipPageReset'])\r\n        .provider('pipSession', SessionProvider); \r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.translate {\r\n    'use strict';\r\n\r\n    angular.module('pipTranslate', [\r\n        'LocalStorageModule', 'pipTranslate.Service', 'pipTranslate.Filter', 'pipTranslate.Directive'\r\n    ]);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.translate {\r\n    'use strict';\r\n\r\n    function pipTranslateDirective(pipTranslate): ng.IDirective {\r\n        \"ngInject\";\r\n\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslate',\r\n                key2: '@key'\r\n            },\r\n            link: (scope: any, element: any, attrs: any) => {\r\n                let key = scope.key1 || scope.key2;\r\n                let value = pipTranslate.translate(key);\r\n                element.text(value);\r\n            }\r\n        };\r\n    }\r\n\r\n    function pipTranslateHtmlDirective(pipTranslate): ng.IDirective {\r\n        \"ngInject\";\r\n\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslateHtml',\r\n                key2: '@key'\r\n            },\r\n            link: (scope: any, element: any, attrs: any) => {\r\n                let key = scope.key1 || scope.key2;\r\n                let value = pipTranslate.translate(key);\r\n                element.html(value);\r\n            }\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipTranslate.Directive', [])\r\n        .directive('pipTranslate', pipTranslateDirective)\r\n        .directive('pipTranslateHtml', pipTranslateHtmlDirective);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.translate {\r\n    'use strict';\r\n\r\n    function translateFilter(pipTranslate) {\r\n        \"ngInject\";\r\n\r\n        return function (key) {\r\n            return pipTranslate.translate(key) || key;\r\n        }\r\n    }\r\n\r\n    function optionalTranslateFilter($injector) {\r\n        \"ngInject\";\r\n\r\n        let pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipTranslate.Filter', [])\r\n        .filter('translate', translateFilter);\r\n\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.translate {\r\n    'use strict';\r\n\r\n    export const LanguageRootVar = \"$language\";\r\n    export const LanguageChangedEvent = \"pipLanguageChanged\";    \r\n\r\n    export interface ITranslateService {\r\n        language: string;\r\n\r\n        use(language: string): string;\r\n        setTranslations(language: string, translations: any): void;\r\n\r\n        translate(key: string): string;\r\n        translateArray(keys: string[]): string[];\r\n        translateSet(keys: string[], keyProp: string, valueProp: string): any[];\r\n        translateObjects(items: any[], keyProp: string, valueProp: string): any[];\r\n        translateWithPrefix(prefix: string, key: string);\r\n        translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n        translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string);\r\n    }\r\n\r\n    export interface ITranslateProvider extends ITranslateService, ng.IServiceProvider {\r\n\r\n    }\r\n\r\n    class Translation implements ITranslateService {\r\n        protected _language = 'en';\r\n        protected _translations = {\r\n            en: {\r\n                'en': 'English',\r\n                'ru': 'Russian',\r\n                'es': 'Spanish',\r\n                'pt': 'Portuguese',\r\n                'de': 'German',\r\n                'fr': 'French'\r\n            },\r\n            ru: {\r\n                'en': 'Английский',\r\n                'ru': 'Русский',\r\n                'es': 'Испанский',\r\n                'pt': 'Португальский',\r\n                'de': 'Немецкий',\r\n                'fr': 'Французский'\r\n            }\r\n        };\r\n\r\n        public constructor() {}\r\n\r\n        public get language(): string { return this._language; }\r\n        public set language(value: string) { this._language = value; }\r\n\r\n        public use(language: string): string {\r\n            if (language != null)\r\n                this._language = language;\r\n            return this._language;\r\n        }\r\n\r\n        // Set translation strings for specific language\r\n        public setTranslations(language: string, translations: any): void {\r\n            let map = this._translations[language] || {};\r\n            this._translations[language] = _.extend(map, translations);\r\n        }\r\n\r\n        // Translate a string by key using set language\r\n        public translate(key: string): string {\r\n            if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n            let translations = this._translations[this._language] || {};\r\n            return translations[key] || key;\r\n        }\r\n\r\n        // Translate an array of strings\r\n        public translateArray(keys: string[]): string[] {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            let values = [];\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                let key = k || '';\r\n                values.push(translations[key] || key);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings into array of objects (set)\r\n        public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            keyProp = keyProp || 'id';\r\n            valueProp = valueProp || 'name';\r\n\r\n            let values: any[] = [];\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(keys, function (key) {\r\n                let value: any = {};\r\n                key = key || '';\r\n\r\n                value[keyProp] = key;\r\n                value[valueProp] = translations[key] || key;\r\n\r\n                values.push(value);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate a collection of objects\r\n        public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n            if (_.isNull(items) || items.length == 0) return [];\r\n\r\n            keyProp = keyProp || 'name';\r\n            valueProp = valueProp || 'nameLocal';\r\n\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(items, function (item) {\r\n                let key = item[keyProp] || '';\r\n\r\n                item[valueProp] = translations[key] || key;\r\n            });\r\n\r\n            return items;\r\n        }\r\n\r\n        // Translate a string by key  with prefix using set language todo\r\n        public translateWithPrefix(prefix: string, key: string) {\r\n            prefix = prefix ? prefix + '_' : '';\r\n            key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n            if (key == null) return '';\r\n            let translations = this._translations[this._language] || {};\r\n            return translations[key] || key;\r\n        };\r\n\r\n        public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n            keyProp = keyProp || 'id';\r\n            valueProp = valueProp || 'name';\r\n\r\n            let values = [];\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(keys, function (key) {\r\n                let value: any = {}; \r\n                key = key || '';\r\n\r\n                value[keyProp] = key;\r\n                value[valueProp] = translations[prefix + '_' + key] || key;\r\n\r\n                values.push(value);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n        public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            keyProp = keyProp || 'id';\r\n            valueProp = valueProp || 'name';\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n            let values = [];\r\n            let translations = this._translations[this._language] || {};\r\n\r\n            _.each(keys, function (key) {\r\n                let value: any = {};\r\n                key = key || '';\r\n\r\n                value[keyProp] = key;\r\n                value[valueProp] = translations[prefix + key.replace(/ /g, '_').toUpperCase()]\r\n                    || (prefix + key.replace(/ /g, '_').toUpperCase());\r\n\r\n                values.push(value);\r\n            });\r\n\r\n            return values;\r\n        }\r\n    }\r\n\r\n    class TranslateService {\r\n        private _translation: Translation;\r\n        private _setRootVar: boolean;\r\n        private _persist: boolean;\r\n        private _rootScope: ng.IRootScopeService;\r\n        private _storage: any;\r\n\r\n        public constructor(\r\n            translation: Translation,\r\n            setRootVar: boolean,\r\n            persist: boolean,\r\n            $rootScope: ng.IRootScopeService,\r\n            localStorageService: any\r\n        ) {\r\n            this._setRootVar = setRootVar;\r\n            this._persist = persist;\r\n            this._translation = translation;\r\n            this._rootScope = $rootScope;\r\n            this._storage = localStorageService;\r\n\r\n            if (this._persist) {\r\n                this._translation.language = localStorageService.get('language') \r\n                    || this._translation.language;\r\n            }\r\n\r\n            this.save();\r\n        }\r\n\r\n        private save(): void {\r\n            if (this._setRootVar)\r\n                this._rootScope[pip.translate.LanguageRootVar] = this._translation.language;\r\n\r\n            if (this._persist)\r\n                this._storage.set('language', this._translation.language);\r\n        }\r\n\r\n        public get language(): string {\r\n            return this._translation.language;\r\n        }\r\n\r\n        public set language(value: string) {\r\n            if (value != this._translation.language) {\r\n                this._translation.language = value;\r\n                \r\n                this.save();                \r\n                this._rootScope.$broadcast(pip.translate.LanguageChangedEvent, value);\r\n            }\r\n        }\r\n\r\n        public use(language: string): string {\r\n            if (language != null)\r\n                this.language = language;\r\n            return this.language;\r\n        }\r\n\r\n        public setTranslations(language: string, translations: any): void {\r\n            return this._translation.setTranslations(language, translations);\r\n        }\r\n\r\n        public translate(key: string): string {\r\n            return this._translation.translate(key);\r\n        }\r\n\r\n        public translateArray(keys: string[]): string[] {\r\n            return this._translation.translateArray(keys);\r\n        }\r\n        \r\n        public translateSet(keys: string[], keyProp: string, valueProp: string): any[] {\r\n            return this._translation.translateSet(keys, keyProp, valueProp);\r\n        }\r\n\r\n        public translateObjects(items: any[], keyProp: string, valueProp: string): any[] {\r\n            return this._translation.translateObjects(items, keyProp, valueProp);\r\n        }\r\n\r\n        public translateWithPrefix(prefix: string, key: string) {\r\n            return this._translation.translateWithPrefix(prefix, key);\r\n        }\r\n\r\n        public translateSetWithPrefix(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n            return this._translation.translateSetWithPrefix(prefix, keys, keyProp, valueProp);\r\n        }\r\n\r\n        public translateSetWithPrefix2(prefix: string, keys: string[], keyProp: string, valueProp: string) {\r\n            return this._translation.translateSetWithPrefix2(prefix, keys, keyProp, valueProp);\r\n        }\r\n    }\r\n\r\n    class TranslateProvider extends Translation implements ITranslateProvider {\r\n        private _translation: Translation;\r\n        private _setRootVar: boolean;\r\n        private _persist: boolean;\r\n        private _service: TranslateService;\r\n        \r\n        public constructor() {\r\n            super();\r\n        }\r\n\r\n        public get setRootVar(): boolean {\r\n            return this._setRootVar;  \r\n        }\r\n\r\n        public set setRootVar(value: boolean) {\r\n            this._setRootVar = !!value;\r\n        }\r\n\r\n        public get persist(): boolean {\r\n            return this._persist;  \r\n        }\r\n\r\n        public set persist(value: boolean) {\r\n            this._persist = !!value;\r\n        }\r\n\r\n        public $get(\r\n            $rootScope: ng.IRootScopeService, \r\n            localStorageService: any\r\n        ): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null) \r\n                this._service = new TranslateService(this, this._setRootVar, this._persist, $rootScope, localStorageService);\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipTranslate.Service', [])\r\n        .provider('pipTranslate', TranslateProvider);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipCodes', []);\r\n\r\n    thisModule.factory('pipCodes', function () {\r\n        \r\n        return {\r\n            hash: hash,\r\n            verification: verification\r\n        }\r\n    \r\n        // Simple version of string hashcode\r\n        function hash(value) {\r\n            if (value == null) return 0;\r\n            var result = 0;\r\n            for (var i = 0; i < value.length; i++) {\r\n                result += value.charCodeAt(i);\r\n            }\r\n            return result;\r\n        }\r\n\r\n        // Generates random big number for verification codes\r\n        function verification() {\r\n            return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n        }\r\n\r\n    });\r\n\r\n})();",null,"/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipFormat', []);\r\n\r\n    thisModule.factory('pipFormat', function () {\r\n\r\n        // Creates a sample line from a text\r\n        function sample(value, maxLength) {\r\n            if (!value || value == '') return '';\r\n\r\n            var length = value.indexOf('\\n');\r\n            length = length >= 0 ? length : value.length;\r\n            length = length < maxLength ? value.length : maxLength;\r\n\r\n            return value.substring(0, length);\r\n        }\r\n\r\n        function strRepeat(str, qty) {\r\n            if (qty < 1) return '';\r\n            var result = '';\r\n            while (qty > 0) {\r\n                if (qty & 1) result += str;\r\n                qty >>= 1, str += str;\r\n            }\r\n            return result;\r\n        }\r\n        \r\n        var sprintf = (function sprintf(...args: any[]) {\r\n            function get_type(variable) {\r\n                return toString.call(variable).slice(8, -1).toLowerCase();\r\n            }\r\n\r\n            var str_repeat = strRepeat;\r\n\r\n            var str_format: any = function() {\r\n                if (!str_format.cache.hasOwnProperty(arguments[0])) {\r\n                    str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\r\n                }\r\n                return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\r\n            };\r\n\r\n            str_format.format = function(parse_tree, argv) {\r\n                var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\r\n                for (i = 0; i < tree_length; i++) {\r\n                    node_type = get_type(parse_tree[i]);\r\n                    if (node_type === 'string') {\r\n                        output.push(parse_tree[i]);\r\n                    }\r\n                    else if (node_type === 'array') {\r\n                        match = parse_tree[i]; // convenience purposes only\r\n                        if (match[2]) { // keyword argument\r\n                            arg = argv[cursor];\r\n                            for (k = 0; k < match[2].length; k++) {\r\n                                if (!arg.hasOwnProperty(match[2][k])) {\r\n                                    throw new Error(sprintf('[_.sprintf] property \"%s\" does not exist', match[2][k]));\r\n                                }\r\n                                arg = arg[match[2][k]];\r\n                            }\r\n                        } else if (match[1]) { // positional argument (explicit)\r\n                            arg = argv[match[1]];\r\n                        }\r\n                        else { // positional argument (implicit)\r\n                            arg = argv[cursor++];\r\n                        }\r\n\r\n                        if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\r\n                            throw new Error(sprintf('[_.sprintf] expecting number but found %s', get_type(arg)));\r\n                        }\r\n                        switch (match[8]) {\r\n                            case 'b': arg = arg.toString(2); break;\r\n                            case 'c': arg = String.fromCharCode(arg); break;\r\n                            case 'd': arg = parseInt(arg, 10); break;\r\n                            case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                            case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                            case 'o': arg = arg.toString(8); break;\r\n                            case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                            case 'u': arg = Math.abs(arg); break;\r\n                            case 'x': arg = arg.toString(16); break;\r\n                            case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                        }\r\n                        arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\r\n                        pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                        pad_length = match[6] - String(arg).length;\r\n                        pad = match[6] ? str_repeat(pad_character, pad_length) : '';\r\n                        output.push(match[5] ? arg + pad : pad + arg);\r\n                    }\r\n                }\r\n                return output.join('');\r\n            };\r\n\r\n            str_format.cache = {};\r\n\r\n            str_format.parse = function(fmt) {\r\n                var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\r\n                while (_fmt) {\r\n                    if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                        parse_tree.push(match[0]);\r\n                    }\r\n                    else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                        parse_tree.push('%');\r\n                    }\r\n                    else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                        if (match[2]) {\r\n                            arg_names |= 1;\r\n                            var field_list = [], replacement_field = match[2], field_match = [];\r\n                            if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                                while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                                    if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else {\r\n                                        throw new Error('[_.sprintf] huh?');\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                throw new Error('[_.sprintf] huh?');\r\n                            }\r\n                            match[2] = field_list;\r\n                        }\r\n                        else {\r\n                            arg_names |= 2;\r\n                        }\r\n                        if (arg_names === 3) {\r\n                            throw new Error('[_.sprintf] mixing positional and named placeholders is not (yet) supported');\r\n                        }\r\n                        parse_tree.push(match);\r\n                    }\r\n                    else {\r\n                        throw new Error('[_.sprintf] huh?');\r\n                    }\r\n                    _fmt = _fmt.substring(match[0].length);\r\n                }\r\n                return parse_tree;\r\n            };\r\n\r\n            return str_format;\r\n        })();\r\n\r\n        return {\r\n            sprintf: sprintf,\r\n            format: sprintf,\r\n            sample: sample\r\n        };\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPageReset', []);\r\n\r\n    thisModule.factory('pipPageReset', function($rootScope, $timeout) {\r\n\r\n        $rootScope.$on('pipResetPage', resetAll);\r\n\r\n        return {\r\n            resetPartial: resetPartial,\r\n            resetFull: resetFull,\r\n            resetAll: resetAll,\r\n            reset: reset\r\n        };\r\n\r\n        //------------------------------------------\r\n\r\n        function resetPartial() {\r\n            reset(false, true);\r\n        }\r\n\r\n        function resetFull() {\r\n            reset(true, false);\r\n        }\r\n\r\n        function resetAll() {\r\n            reset(true, true);\r\n        }\r\n\r\n        function reset(full, partial) {\r\n            full = full !== undefined ? !!full : true;\r\n            partial = partial !== undefined ? !!partial : true;\r\n\r\n            if (full || partial) {\r\n                $rootScope.$reset = full;\r\n                $rootScope.$partialReset = partial;\r\n                $timeout(function() {\r\n                    $rootScope.$reset = false;\r\n                    $rootScope.$partialReset = false;\r\n                }, 0);\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n})();",null,"/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipScroll', []);\r\n\r\n    thisModule.factory('pipScroll', function () {\r\n        return {\r\n            scrollTo: scrollTo\r\n        };\r\n        \r\n        //-------------------------------------\r\n\r\n        function scrollTo(parentElement, childElement, animationDuration) {\r\n            if(!parentElement || !childElement) return;\r\n            if (animationDuration == undefined) animationDuration = 300;\r\n\r\n            setTimeout(function () {\r\n                if (!$(childElement).position()) return;\r\n                var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                if (modDiff < 20) return;\r\n                var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                if (animationDuration > 0)\r\n                    $(parentElement).animate({\r\n                        scrollTop: scrollTo + 'px'\r\n                    }, animationDuration);\r\n            }, 100);\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSystemInfo', []);\r\n\r\n    thisModule.factory('pipSystemInfo', function ($rootScope, $window) {\r\n\r\n        return {\r\n            getBrowserName: getBrowserName,\r\n            getBrowserVersion: getBrowserVersion,\r\n            getPlatform: getPlatform,\r\n            isDesktop: isDesktop,\r\n            isMobile: isMobile,\r\n            isCordova: isCordova,\r\n            getOS: getOS,            \r\n            isSupported: isSupported\r\n        };\r\n\r\n        // todo add support for iPhone\r\n        function getBrowserName() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            if (ua.search(/Edge/) > -1) return \"edge\";\r\n            if (ua.search(/MSIE/) > -1) return \"ie\";\r\n            if (ua.search(/Trident/) > -1) return \"ie\";\r\n            if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n            if (ua.search(/Opera/) > -1) return \"opera\";\r\n            if (ua.search(/OPR/) > -1) return \"opera\";\r\n            if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n            if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n            if (ua.search(/Safari/) > -1) return \"safari\";\r\n            if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n            \r\n            return \"unknown\";\r\n        }\r\n\r\n        function getBrowserVersion() {\r\n            var browser, version;\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            browser = getBrowserName();\r\n\r\n            switch (browser) {\r\n                case \"edge\":\r\n                    version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                    break;\r\n                case \"ie\":\r\n                    version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                    break;\r\n                case \"ie11\":\r\n                    browser = \"ie\";\r\n                    version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                    break;\r\n                case \"firefox\":\r\n                    version = ua.split(\"Firefox/\")[1];\r\n                    break;\r\n                case \"opera\":\r\n                    version = ua.split(\"Version/\")[1];\r\n                    break;\r\n                case \"operaWebkit\":\r\n                    version = ua.split(\"OPR/\")[1];\r\n                    break;\r\n                case \"yabrowser\":\r\n                    version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"chrome\":\r\n                    version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"safari\":\r\n                    version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"maxthon\":\r\n                    version = ua.split(\"Maxthon/\")[1];\r\n                    break;\r\n            }\r\n\r\n            return version;\r\n        }\r\n        \r\n        function getPlatform() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) \r\n                return 'mobile';\r\n\r\n            return 'desktop';\r\n        }\r\n\r\n        function isDesktop() {\r\n            return getPlatform() == 'desktop';\r\n        }\r\n\r\n        function isMobile() {\r\n            return getPlatform() == 'mobile';\r\n        }\r\n\r\n        // Todo: complete implementation\r\n        function isCordova() {\r\n            return null;\r\n        }\r\n\r\n        function getOS() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            try {\r\n                var osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [ua])[0].replace('sunos', 'solaris'),\r\n                osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n                return osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n            } catch (err) {\r\n                return 'unknown'\r\n            }\r\n        }\r\n\r\n        // Todo: Move to errors\r\n        function isSupported(supported) {\r\n            if (!supported) supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n\r\n            var browser = getBrowserName();\r\n            var version = getBrowserVersion();\r\n            version = version.split(\".\")[0]\r\n\r\n            if (browser && supported[browser] && version >= supported[browser]) \r\n                return true;\r\n\r\n            return true;\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTags', []);\r\n\r\n    thisModule.factory('pipTags', function () {\r\n            \r\n        return {\r\n            equal: equal,\r\n            normalizeOne: normalizeOne,\r\n            normalizeAll: normalizeAll,\r\n            normalize: normalizeAll,\r\n            compressOne: compressOne,\r\n            compressAll: compressAll,\r\n            compress: compressAll,\r\n            extract: extract\r\n        };\r\n\r\n        //------------------------------\r\n\r\n        function normalizeOne(tag) {\r\n            return tag \r\n                ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n                : null;\r\n        }\r\n    \r\n        function compressOne(tag) {\r\n            return tag\r\n                ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n                : null;\r\n        }\r\n    \r\n        function equal(tag1, tag2) {\r\n            if (tag1 == null && tag2 == null)\r\n                return true;\r\n            if (tag1 == null || tag2 == null)\r\n                return false;\r\n            return compressOne(tag1) == compressOne(tag2);\r\n        }\r\n    \r\n        function normalizeAll(tags) {\r\n            if (_.isString(tags)) {\r\n                tags = tags.split(/( |,|;)+/);\r\n            }\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return normalizeOne(tag);\r\n            });\r\n    \r\n            return tags;\r\n        }\r\n    \r\n        function compressAll(tags) {\r\n            if (_.isString(tags))\r\n                tags = tags.split(/( |,|;)+/);\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return compressOne(tag);\r\n            });\r\n    \r\n            return tags;\r\n        };\r\n    \r\n        function extract(entity, searchFields) {\r\n            var tags = normalizeAll(entity.tags);\r\n    \r\n            _.each(searchFields, function (field) {\r\n                var text = entity[field] || '';\r\n    \r\n                if (text != '') {\r\n                    var hashTags = text.match(/#\\w+/g);\r\n                    tags = tags.concat(normalizeAll(hashTags));\r\n                }\r\n            });\r\n    \r\n            return _.uniq(tags);\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.utilities {\r\n    'use strict';\r\n\r\n    export interface ITimerService {\r\n        isStarted: boolean;\r\n\r\n        addEvent(event: string, timeout: number): void;\r\n        removeEvent(event: string): void;\r\n        clearEvents(): void;\r\n\r\n        start(): void;\r\n        stop(): void;\r\n    }\r\n\r\n    class TimerEvent {\r\n        event: string;\r\n        timeout: number;\r\n        interval: any;\r\n    }\r\n\r\n    let DefaultEvents: TimerEvent[] = [\r\n        <TimerEvent> { event: 'pipAutoPullChanges', timeout: 60000 }, // 1 min\r\n        <TimerEvent> { event: 'pipAutoUpdatePage', timeout: 15000 }, // 15 sec\r\n        <TimerEvent> { event: 'pipAutoUpdateCollection', timeout: 300000 } // 5 min\r\n    ]\r\n\r\n    class TimerService {\r\n        private _rootScope: ng.IRootScopeService;\r\n        private _interval: ng.IIntervalService;        \r\n        private _started = false;\r\n        private _events: TimerEvent[] = _.cloneDeep(DefaultEvents);\r\n\r\n        public constructor($rootScope, $interval) {\r\n            this._rootScope = $rootScope;\r\n            this._interval = $interval;\r\n        }\r\n\r\n        public get isStarted() {\r\n            return this._started;\r\n        }\r\n\r\n        public addEvent(event: string, timeout: number): void {\r\n            var existingEvent = _.find(this._events, (e) => e.event == event);\r\n            if (existingEvent != null) return;\r\n\r\n            let newEvent = <TimerEvent> {\r\n                event: event,\r\n                timeout: timeout\r\n            };\r\n            this._events.push(newEvent);\r\n\r\n            if (this._started)\r\n                this.startEvent(newEvent);\r\n        }\r\n\r\n        public removeEvent(event: string): void {\r\n            for (let i = this._events.length - 1; i >= 0; i--) {\r\n                let existingEvent = this._events[i];\r\n                if (existingEvent.event == event) {\r\n                    this.stopEvent(existingEvent);\r\n                    this._events.splice(i, 1);\r\n                }\r\n            }\r\n        }\r\n\r\n        public clearEvents(): void {\r\n            this.stop();\r\n            this._events = [];\r\n        }\r\n\r\n        private startEvent(event: TimerEvent): void {\r\n            event.interval = this._interval(\r\n                () => { this._rootScope.$broadcast(event.event) },\r\n                event.timeout\r\n            )\r\n        }\r\n\r\n        private stopEvent(event: TimerEvent): void {\r\n            if (event.interval != null) {\r\n                try {\r\n                    this._interval.cancel(event.interval);\r\n                } catch (ex) {\r\n                    // Do nothing\r\n                }\r\n                event.interval = null;\r\n            }\r\n        }\r\n\r\n        public start(): void {\r\n            if (this._started) return;\r\n\r\n            _.each(this._events, (event) => {\r\n                this.startEvent(event);\r\n            });\r\n\r\n            this._started = true;\r\n        }\r\n\r\n        public stop(): void {\r\n            _.each(this._events, (event) => {\r\n                this.stopEvent(event);\r\n            });\r\n\r\n            this._started = false;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipTimer', [])\r\n        .service('pipTimer', TimerService);\r\n\r\n}\r\n",null,"<div class=\"pip-toggle-buttons layout-row {{class}}\" pip-selected=\"bufButtonIndex\" pip-enter-space-press=\"enterSpacePress($event)\"\r\n     ng-if=\"$mdMedia('gt-xs')\">\r\n    <md-button tabindex=\"-1\" ng-repeat=\"button in buttons\"\r\n               ng-class=\"{'md-accent md-raised selected color-accent-bg' : currentButtonIndex == $index}\"\r\n               ng-attr-style=\"{{ 'background-color:' + (currentButtonIndex == $index ? button.backgroundColor : '') + '!important' }}\"\r\n               class=\"pip-selectable pip-chip-button flex\" ng-click=\"buttonSelected($index, $event)\"\r\n               ng-disabled=\"button.disabled || disabled()\">\r\n        {{button.name || button.title | translate}}\r\n        <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span>\r\n    </md-button>\r\n</div>\r\n\r\n<md-input-container class=\"md-block\" ng-if=\"$mdMedia('xs')\">\r\n    <md-select ng-model=\"currentButtonIndex\" ng-disabled=\"disabled()\" aria-label=\"DROPDOWN\" md-on-close=\"buttonSelected(currentButtonIndex)\">\r\n        <md-option ng-repeat=\"action in buttons\" value=\"{{ ::$index }}\">\r\n            {{ (action.title || action.name) | translate }}\r\n            <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span>\r\n        </md-option>\r\n    </md-select>\r\n</md-input-container>\r\n","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipButtons', [\r\n        'pipToggleButtons',\r\n        'pipRefreshButton',\r\n        'pipFabTooltipVisibility'\r\n    ]);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Optional filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Translate', []);\r\n\r\n    thisModule.filter('translate', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFabTooltipVisibility\", []);\r\n\r\n    thisModule.directive(\"pipFabTooltipVisibility\", function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: function($scope, $attrs) {\r\n                var trigGetter = $parse($attrs.pipFabTooltipVisibility),\r\n                    showGetter = $parse($attrs.pipFabShowTooltip),\r\n                    showSetter = showGetter.assign;\r\n\r\n                $scope.$watch(trigGetter, function(isOpen) {\r\n                    if (isOpen) {\r\n                        $timeout(function() {\r\n                            showSetter($scope, isOpen);\r\n                        }, 600);\r\n                    } else {\r\n                        showSetter($scope, isOpen);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipRefreshButton', ['ngMaterial']);\r\n\r\n    thisModule.directive('pipRefreshButton',\r\n        function ($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                template: String() +\r\n                '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"onClick($event)\" aria-label=\"REFRESH\">' +\r\n                '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\r\n                '<span class=\"pip-refresh-text\"></span>' +\r\n                '</md-button>',\r\n                replace: false,\r\n                link: function ($scope, $element, $attrs: any) {\r\n                    var width, text, show,\r\n                        textGetter = $parse($attrs.pipText),\r\n                        visibleGetter = $parse($attrs.pipVisible),\r\n                        refreshGetter = $parse($attrs.pipRefresh),\r\n                        $button = $element.children('.md-button'),\r\n                        $text = $button.children('.pip-refresh-text');\r\n\r\n                    show = function () {\r\n                        // Set a new text\r\n                        text = textGetter($scope);\r\n                        $text.text(text);\r\n\r\n                        // Show button\r\n                        $button.show();\r\n\r\n                        // Adjust position\r\n                        width = $button.width();\r\n                        $button.css('margin-left', '-' + width / 2 + 'px');\r\n                    };\r\n\r\n                    function hide() {\r\n                        $button.hide();\r\n                    }\r\n\r\n                    $scope.onClick = function () {\r\n                        refreshGetter($scope);\r\n                    };\r\n\r\n                    $scope.$watch(visibleGetter, function (newValue) {\r\n                        if (newValue) {\r\n                            show();\r\n                        } else {\r\n                            hide();\r\n                        }\r\n                    });\r\n\r\n                    $scope.$watch(textGetter, function (newValue) {\r\n                        $text.text(newValue);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipToggleButtons', ['pipButtons.Templates']);\r\n\r\n    thisModule.directive('pipToggleButtons',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    buttons: '=pipButtons',\r\n                    currentButtonValue: '=ngModel',\r\n                    currentButton: '=?pipButtonObject',\r\n                    change: '&ngChange'\r\n                },\r\n                templateUrl: 'toggle_buttons/toggle_buttons.html',\r\n                controller: function ($scope, $element, $attrs, $mdMedia, $timeout) {\r\n                    var index;\r\n\r\n                    $scope.$mdMedia = $mdMedia;\r\n                    $scope.class = $attrs.class || '';\r\n\r\n                    if (!$scope.buttons || _.isArray($scope.buttons) && $scope.buttons.length === 0) {\r\n                        $scope.buttons = [];\r\n                    }\r\n\r\n                    index = _.indexOf($scope.buttons, _.find($scope.buttons, {id: $scope.currentButtonValue}));\r\n                    $scope.currentButtonIndex = index < 0 ? 0 : index;\r\n                    $scope.currentButton = $scope.buttons.length > 0 ? $scope.buttons[$scope.currentButtonIndex]\r\n                        : $scope.currentButton;\r\n\r\n                    $scope.buttonSelected = function (index) {\r\n                        if ($scope.disabled()) {\r\n                            return;\r\n                        }\r\n\r\n                        $scope.currentButtonIndex = index;\r\n                        $scope.currentButton = $scope.buttons[$scope.currentButtonIndex];\r\n                        $scope.currentButtonValue = $scope.currentButton.id || index;\r\n\r\n                        $timeout(function () {\r\n                            if ($scope.change) {\r\n                                $scope.change();\r\n                            }\r\n                        });\r\n                    };\r\n\r\n                    $scope.enterSpacePress = function (event) {\r\n                        $scope.buttonSelected(event.index);\r\n                    };\r\n\r\n                    $scope.disabled = function () {\r\n                        if ($scope.ngDisabled) {\r\n                            return $scope.ngDisabled();\r\n                        }\r\n                    };\r\n                },\r\n                link: function (scope, elem) {\r\n                    elem\r\n                        .on('focusin', function () {\r\n                            elem.addClass('focused-container');\r\n                        })\r\n                        .on('focusout', function () {\r\n                            elem.removeClass('focused-container');\r\n                        });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Registration of landing WebUI controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function (angular) {\r\n    'use strict';\r\n\r\n    angular.module('pipLanding', [\r\n    ]);\r\n\r\n})(window.angular);\r\n\r\n","/**\r\n * @file Registration of all application layouts\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipLayout', [\r\n        'pipLayout.Main', 'pipLayout.Simple', 'pipLayout.Card', 'pipLayout.Document',\r\n        'pipLayout.Tiles', 'pipLayout.Dialog', 'pipLayout.Media'\r\n    ]);\r\n\r\n})();\r\n","/**\r\n * @file Card layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Card', []);\r\n\r\n    thisModule.directive('pipCard', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           //controller: 'pipCardController'\r\n            link: function($scope: any, $element, $attrs: any) {\r\n                // Add class to the element\r\n                $element.addClass('pip-card');\r\n\r\n                // Resize every time window is resized\r\n                $scope.$on('pipWindowResized', resize);\r\n\r\n                // Resize right away to avoid flicking\r\n                resize();\r\n\r\n                // Resize the element right away\r\n                setTimeout(resize, 100);\r\n\r\n                return;\r\n\r\n                //---------------\r\n\r\n                function resize() {\r\n                    var\r\n                        $mainBody = $('.pip-main-body'),\r\n                        cardContainer = $('.pip-card-container'),\r\n                        windowWidth = $('pip-main').width(),\r\n                        maxWidth = $mainBody.width(),\r\n                        maxHeight = $mainBody.height(),\r\n                        minWidth = $attrs.minWidth ? Math.floor($attrs.minWidth) : null,\r\n                        minHeight = $attrs.minHeight ? Math.floor($attrs.minHeight) : null,\r\n                        width = $attrs.width ? Math.floor($attrs.width) : null,\r\n                        height = $attrs.height ? Math.floor($attrs.height) : null,\r\n                        left, top;\r\n\r\n                    // Full-screen on phone\r\n                    if (windowWidth <= 768) {\r\n                        minWidth = null;\r\n                        minHeight = null;\r\n                        width = null;\r\n                        height = null;\r\n                        maxWidth = null;\r\n                        maxHeight = null;\r\n                    }\r\n                    // Card view with adjustable margins on tablet and desktop\r\n                    else {\r\n                        // Set margin and maximum dimensions\r\n                        var space = windowWidth > 1200 ? 24 : 16;\r\n                        maxWidth -= space * 2;\r\n                        maxHeight -= space * 2;\r\n\r\n                        // Set minimum dimensions\r\n                        minWidth = minWidth ? Math.min(minWidth, maxWidth) : null;\r\n                        minHeight = minHeight ? Math.min(minHeight, maxHeight) : null;\r\n\r\n                        // Set regular dimensions\r\n                        width = width ? Math.min(width, maxWidth) : null;\r\n                        height = height ? Math.min(height, maxHeight) : null;\r\n                    }\r\n\r\n                    // Set dimensions\r\n                    $element.css('max-width', maxWidth ? maxWidth + 'px' : '');\r\n                    $element.css('min-width', minWidth ? minWidth + 'px' : '');\r\n                    $element.css('width', width ? width + 'px' : '');\r\n                    $element.css('height', height ? height + 'px' : '');\r\n\r\n                    if (!cardContainer.hasClass('pip-outer-scroll'))\r\n                    {\r\n                        $element.css('max-height', maxHeight ? maxHeight + 'px' : '');\r\n                        $element.css('min-height', minHeight ? minHeight + 'px' : '');\r\n                        var\r\n                            $header = $element.find('.pip-header:visible'),\r\n                            $footer = $element.find('.pip-footer:visible'),\r\n                            $body = $element.find('.pip-body'),\r\n                            maxBodyHeight = maxHeight || $mainBody.height();\r\n\r\n                        if ($header.length > 0)\r\n                            maxBodyHeight -= $header.outerHeight(true);\r\n                        if ($footer.length > 0)\r\n                            maxBodyHeight -= $footer.outerHeight(true);\r\n\r\n                        $body.css('max-height', maxBodyHeight + 'px');\r\n                    } else {\r\n                        cardContainer.addClass('pip-scroll');\r\n                        if (windowWidth <= 768) {\r\n                            left = 0;\r\n                            top = 0;\r\n                        } else {\r\n                            left = cardContainer.width() / 2 - $element.width() / 2 - 16;\r\n                            top = Math.max(cardContainer.height() / 2 - $element.height() / 2 - 16, 0);\r\n                        }\r\n\r\n                        $element.css('left', left);\r\n                        $element.css('top', top);\r\n                        setTimeout(function () {\r\n                            $element.css('display', 'flex');\r\n                        }, 100);\r\n                    }\r\n\r\n                    // Notify child controls that layout was resized\r\n                    $scope.$broadcast('pipLayoutResized');\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Dialog layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Dialog', []);\r\n\r\n    thisModule.directive('pipDialog', function() {\r\n        return {\r\n           restrict: 'EAC',\r\n           controller: 'pipDialogController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipDialogController', \r\n        function($element, $attrs) {\r\n            // Add class to the element\r\n            $element.addClass('pip-dialog');\r\n            // Set width\r\n            $element.css('width', $attrs.width);\r\n\r\n            return;\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Document layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Document', []);\r\n\r\n    thisModule.directive('pipDocument', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           controller: 'pipDocumentController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipDocumentController', \r\n        function($scope, $element, $attrs) {\r\n            // Add class to the element\r\n            $element.addClass('pip-document');\r\n        }\r\n    );    \r\n\r\n})();\r\n","/**\r\n * @file Top-level application container\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Main', []);\r\n\r\n    thisModule.directive('pipMain', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           controller: 'pipMainController' \r\n        }\r\n    });\r\n\r\n    thisModule.directive('pipMainBody', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           link: function($scope, $element) {\r\n                $element.addClass('pip-main-body');\r\n           }\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipMainController',\r\n        function($scope, $element, $rootScope, pipMedia) {\r\n            var $window: any = $(window);\r\n\r\n            // Add CSS class\r\n            $element.addClass('pip-main');\r\n\r\n            pipMedia().addResizeListener($element[0], resize);\r\n\r\n            // Handle window resize events\r\n            //$window.bind('resize', resize);\r\n\r\n            // Unbind when scope is removed\r\n            $scope.$on('$destroy', function() {\r\n                pipMedia().removeResizeListener($element[0]);\r\n                //$window.unbind('resize', resize);\r\n            });\r\n\r\n            // Resize window from request\r\n            //$rootScope.$on('pipResizeWindow', function(event) {\r\n            //    // Trigger a bit latter t allow full initialization\r\n            //    // Do not remove! Otherwise, sizes in layouts calculated incorrectly\r\n            //    setTimeout(resize, 0);\r\n            //});\r\n\r\n            // Allow to finish initialization of all controllers\r\n            //setTimeout(resize, 0);\r\n\r\n            return;\r\n            \r\n            //---------------\r\n\r\n            function resize() {\r\n                $rootScope.$broadcast('pipWindowResized');\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","import size = require(\"lodash/size\");\r\n/**\r\n * @file Media service to detect the width of pip-main container\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Media', []);\r\n\r\n    thisModule.service('pipMedia',\r\n        function ($rootScope, $timeout) {\r\n\r\n            var elementWidth = null,\r\n                sizes = {\r\n                    'xs': false,\r\n                    'gt-xs': false,\r\n                    'sm': false,\r\n                    'gt-sm': false,\r\n                    'md': false,\r\n                    'gt-md': false,\r\n                    'lg': false,\r\n                    'gt-lg': false,\r\n                    'xl': false\r\n                },\r\n                boundaries = {\r\n                    'xs': [0, 768],\r\n                    'sm': [769, 1199],\r\n                    'md': [1200, 1399],\r\n                    'lg': [1400, 1919],\r\n                    'xl': [1920, '-']\r\n                },\r\n                attachEvent = (<any>document).attachEvent,\r\n                isIE = navigator.userAgent.match(/Trident/);\r\n            \r\n            return function (size) {\r\n                if (size) {\r\n                    return sizes[size];\r\n                } else {\r\n                    return {\r\n                        addResizeListener: addResizeListener,\r\n                        removeResizeListener: removeResizeListener,\r\n                        getBoundaries: getBoundaries\r\n                    };\r\n                }\r\n            };\r\n\r\n            function getBoundaries (size) {\r\n                return boundaries[size];\r\n            }\r\n\r\n            function requestFrame(fn) {\r\n                var raf = window.requestAnimationFrame || (<any>window).mozRequestAnimationFrame || (<any>window).webkitRequestAnimationFrame ||\r\n                    function(fn){ return window.setTimeout(fn, 20); };\r\n\r\n                return raf(fn);\r\n            }\r\n\r\n            function cancelFrame() {\r\n                var cancel = window.cancelAnimationFrame || (<any>window).mozCancelAnimationFrame || (<any>window).webkitCancelAnimationFrame ||\r\n                    window.clearTimeout;\r\n                return function(id){ return cancel(id); };\r\n            }\r\n\r\n            function resizeListener(e) {\r\n                var win = e.target || e.srcElement;\r\n                if (win.__resizeRAF__) cancelFrame(/*win.__resizeRAF__*/);\r\n                win.__resizeRAF__ = requestFrame(function(){\r\n                    var trigger = win.__resizeTrigger__;\r\n                    trigger.__resizeListeners__.forEach(function(fn){\r\n                        fn.call(trigger, e);\r\n                    });\r\n                });\r\n            }\r\n\r\n            function objectLoad(e) {\r\n                this.contentDocument.defaultView.__resizeTrigger__ = this.__resizeElement__;\r\n                this.contentDocument.defaultView.addEventListener('resize', resizeListener);\r\n            }\r\n\r\n            function addResizeListener(element, fn) {\r\n                if (!element.__resizeListeners__) {\r\n                    element.__resizeListeners__ = [];\r\n                    if (attachEvent) {\r\n                        element.__resizeTrigger__ = element;\r\n                        element.attachEvent('onresize', resizeListener);\r\n                    }\r\n                    else {\r\n                        if (getComputedStyle(element).position == 'static') element.style.position = 'relative';\r\n                        var obj: any = element.__resizeTrigger__ = document.createElement('object');\r\n                        obj.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;');\r\n                        obj.__resizeElement__ = element;\r\n                        obj.onload = objectLoad;\r\n                        obj.type = 'text/html';\r\n                        if (isIE) element.appendChild(obj);\r\n                        obj.data = 'about:blank';\r\n                        if (!isIE) element.appendChild(obj);\r\n                    }\r\n                }\r\n                setSizes();\r\n                if (fn) element.__resizeListeners__.push(fn);\r\n                element.__resizeListeners__.push(setSizes);\r\n            }\r\n\r\n            function removeResizeListener(element, fn) {\r\n                if (fn) element.__resizeListeners__.splice(element.__resizeListeners__.indexOf(fn), 1);\r\n                if (!element.__resizeListeners__.length) {\r\n                    if (attachEvent) element.detachEvent('onresize', resizeListener);\r\n                    else {\r\n                        element.__resizeTrigger__.contentDocument.defaultView.removeEventListener('resize', resizeListener);\r\n                        element.__resizeTrigger__ = !element.removeChild(element.__resizeTrigger__);\r\n                    }\r\n                }\r\n            }\r\n\r\n            function updateClasses() {\r\n                $.each(sizes, function (name, size) {\r\n                    $('body')[size ? 'addClass': 'removeClass']('pip-' + name);\r\n                });\r\n            }\r\n\r\n            function setSizes() {\r\n                elementWidth = $('.pip-main').innerWidth();\r\n                sizes['xs'] = elementWidth <= boundaries['xs'][1];\r\n                sizes['gt-xs'] = elementWidth >= boundaries['sm'][0];\r\n                sizes['sm'] = elementWidth >= boundaries['sm'][0] && elementWidth <= boundaries['sm'][1];\r\n                sizes['gt-sm'] = elementWidth >= boundaries['md'][0];\r\n                sizes['md'] = elementWidth >= boundaries['md'][0] && elementWidth <= boundaries['md'][1];\r\n                sizes['gt-md'] = elementWidth >= boundaries['lg'][0];\r\n                sizes['lg'] = elementWidth >= boundaries['lg'][0] && elementWidth <= boundaries['lg'][1];\r\n                sizes['gt-lg'] = elementWidth >= boundaries['xl'][0];\r\n                sizes['xl'] = sizes['gt-lg'];\r\n\r\n                updateClasses();\r\n\r\n                $timeout(function () {\r\n                    $rootScope.$apply();\r\n                });\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Simple layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Simple', []);\r\n\r\n    thisModule.directive('pipSimple', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           link: function($scope, $element, $attrs) {\r\n                $element.addClass('pip-simple');\r\n           }\r\n       };\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Tiles layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global $, angular, Masonry */\r\n\r\ndeclare var Masonry: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Tiles', ['wu.masonry']);\r\n\r\n    thisModule.directive('pipTiles', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           scope: false,\r\n           transclude: true,\r\n           template:\r\n               function($element, $attrs: any) {\r\n                   if (convertToBoolean($attrs.pipInfinite)) {\r\n                       return  String()\r\n                       + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                       + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                       + ' masonry-options=\"tilesOptions\"  pip-scroll-container=\"\\'.pip-tiles\\'\"'\r\n                       + ' pip-infinite-scroll=\"readScroll()\" >'\r\n                       + '</div>';\r\n                   } else {\r\n                       return String()\r\n                           + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                           + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                           + ' masonry-options=\"tilesOptions\">'\r\n                           + '</div>';\r\n                   }\r\n               },\r\n           controller: function($scope: any) {\r\n                $scope.tilesOptions = {\r\n                    gutter: 8,//16\r\n                    isFitWidth: false,\r\n                    isResizeBound: false,\r\n                    transitionDuration: 0 // '0.2s'\r\n                };\r\n           },\r\n           link: pipTilesController \r\n        };\r\n    });\r\n\r\n    function pipTilesController($scope: any, $element, $attrs: any) {\r\n        var\r\n            columnWidth = $attrs.columnWidth ? Math.floor($attrs.columnWidth) : 440,\r\n            container = $element.children('.pip-tiles-container'),\r\n            prevContainerWidth = null,\r\n            masonry = Masonry.data(container[0]);\r\n        \r\n        // Add class to the element\r\n        $element.addClass('pip-tiles');\r\n\r\n        // Insert sizer\r\n        var sizer = $('<div class=\"pip-tile-sizer\"></div>');\r\n        sizer.appendTo(container);\r\n\r\n        // Resize every time window is resized\r\n        $scope.$on('pipWindowResized', function () {\r\n            resize(false);\r\n        });\r\n\r\n        // Resize the element right away\r\n        resize(true);\r\n\r\n        return;\r\n\r\n        //---------------------\r\n\r\n        function resize(force) {\r\n            var\r\n                width = $('.pip-main').width(),\r\n                containerWidth;\r\n            \r\n            console.log('width', width);\r\n\r\n            if (width > 767) {\r\n                width = width - 24 * 2;\r\n\r\n                var columns = Math.floor(width / columnWidth);\r\n                containerWidth = (columnWidth + 16) * columns - 16;\r\n\r\n                if (containerWidth > width) {\r\n                    columns--;\r\n                    containerWidth = (columnWidth + 16) * columns - 16;\r\n                }\r\n\r\n                if (columns < 1) {\r\n                    containerWidth = width;\r\n                    sizer.css('width', containerWidth + 'px');\r\n                } else {\r\n                    sizer.css('width', columnWidth + 'px');\r\n                }\r\n\r\n                // +10 to avoid precision related error\r\n                container.css('width', (containerWidth + 10) + 'px');\r\n                container.removeClass('pip-mobile');\r\n            } else {\r\n                width = width - 16 * 2;\r\n                containerWidth = width;\r\n\r\n                sizer.css('width', containerWidth + 'px');\r\n                // +10 to avoid precision related error\r\n                container.css('width', (containerWidth + 10) + 'px');\r\n                container.addClass('pip-mobile');\r\n            }\r\n\r\n            // Manually call layout on tile container\r\n            if (prevContainerWidth != containerWidth || force) {\r\n                prevContainerWidth = containerWidth;\r\n                masonry.layout();\r\n\r\n                // Notify child controls that layout was resized\r\n                $scope.$broadcast('pipLayoutResized');\r\n            }\r\n        }\r\n    }\r\n\r\n    // Converts value into boolean\r\n    function convertToBoolean(value) {\r\n        if (value == null) return false;\r\n        if (!value) return false;\r\n        value = value.toString().toLowerCase();\r\n        return value == '1' || value == 'true';\r\n    };\r\n\r\n})();\r\n","/**\r\n * @file Split layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global $, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSplit', []);\r\n\r\n    thisModule.run( function($rootScope, pipSplit) {\r\n        // Intercept routes\r\n        $rootScope.$on('$stateChangeStart',\r\n            function(event, toState, toParams, fromState, fromParams) {\r\n                // Split animation\r\n                var splitElements = $('.pip-split');\r\n                \r\n                if (splitElements.length > 0) {\r\n                    splitElements.removeClass('pip-transition-forward');\r\n                    splitElements.removeClass('pip-transition-back');\r\n                    if (toState.name != fromState.name) {\r\n                        if (pipSplit.forwardTransition(toState, fromState)) {\r\n                            splitElements.addClass('pip-transition-forward');\r\n                        } else {\r\n                            splitElements.addClass('pip-transition-back');\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        );\r\n\r\n    });\r\n\r\n    thisModule.provider('pipSplit', function(): any {\r\n        var transitionSequences = [];\r\n\r\n        this.addTransitionSequence = addTransitionSequence;\r\n\r\n        this.$get = function () {\r\n            return {\r\n                forwardTransition: forwardTransition\r\n            };\r\n        };\r\n\r\n        return;\r\n\r\n        //----------------------------\r\n\r\n        function addTransitionSequence(sequence) {\r\n            if (!_.isArray(sequence) || sequence.length == 0) {\r\n                throw new Error('Transition sequence must be an array of state names');\r\n            }\r\n\r\n            transitionSequences.push(sequence);\r\n        }\r\n\r\n        function forwardTransition(toState, fromState) {\r\n            var i, toIndex, fromIndex;\r\n\r\n            for (i = 0; i < transitionSequences.length; i++) {\r\n                toIndex = transitionSequences[i].indexOf(toState.name),\r\n                fromIndex = transitionSequences[i].indexOf(fromState.name);\r\n\r\n                if (toIndex > -1) {\r\n                    return toIndex > fromIndex;\r\n                }\r\n            }\r\n\r\n            return false\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Registration of all WebUI list controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipBehaviors', [\r\n        'pipFocused',\r\n        'pipSelected',\r\n        'pipInfiniteScroll',\r\n        'pipUnsavedChanges',\r\n        'pipDraggable'\r\n    ]);\r\n    \r\n})();","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipDraggable\", []);\r\n\r\n    thisModule.service('pipDraggable', function () {\r\n\r\n        var scope = this;\r\n        scope.inputEvent = function (event) {\r\n            if (angular.isDefined(event.touches)) {\r\n                return event.touches[0];\r\n            }\r\n            //Checking both is not redundent. If only check if touches isDefined, angularjs isDefnied will return error and stop the remaining scripty if event.originalEvent is not defined.\r\n            else if (angular.isDefined(event.originalEvent) && angular.isDefined(event.originalEvent.touches)) {\r\n                return event.originalEvent.touches[0];\r\n            }\r\n            return event;\r\n        };\r\n\r\n    });\r\n\r\n    thisModule.directive('pipDrag',\r\n        function ($rootScope, $parse, $document, $window, pipDraggable) {\r\n            return {\r\n\r\n                restrict: 'A',\r\n                link: function (scope: any, element, attrs: any) {\r\n                    scope.value = attrs.ngDrag;\r\n                    var LONG_PRESS = 50; // 50ms for longpress\r\n                    var offset, _centerAnchor = false, _mx, _my, _tx, _ty, _mrx, _mry;\r\n                    var _hasTouch = ('ontouchstart' in window) || (<any>window).DocumentTouch; // && document instanceof DocumentTouch; // DocumentTouch is not defined!\r\n                    var _pressEvents = 'touchstart mousedown';\r\n                    var _moveEvents = 'touchmove mousemove';\r\n                    var _releaseEvents = 'touchend mouseup';\r\n                    var _dragHandle;\r\n\r\n                    // to identify the element in order to prevent getting superflous events when a single element has both drag and drop directives on it.\r\n                    var _myid = scope.$id;\r\n                    var _data = null;\r\n\r\n                    var _dragOffset = null;\r\n\r\n                    var _dragEnabled = false;\r\n\r\n                    var _pressTimer = null;\r\n\r\n                    var _elementStyle: any = {};\r\n\r\n                    var onDragStartCallback = $parse(attrs.pipDragStart) || null;\r\n                    var onDragStopCallback = $parse(attrs.pipDragStop) || null;\r\n                    var onDragSuccessCallback = $parse(attrs.pipDragSuccess) || null;\r\n                    var allowTransform = angular.isDefined(attrs.allowTransform) ? scope.$eval(attrs.allowTransform) : false;\r\n\r\n                    var getDragData = $parse(attrs.pipDragData);\r\n                    var\r\n                        verticalScroll = toBoolean(attrs.pipVerticalScroll) || true,\r\n                        horizontalScroll = toBoolean(attrs.pipHorizontalScroll) || true,\r\n                        activationDistance = parseFloat(attrs.pipActivationDistance) || 75,\r\n                        scrollDistance = parseFloat(attrs.pipScrollDistance) || 50,\r\n                        scrollParent = false,\r\n\r\n                        scrollContainer = angular.element(window),\r\n                        scrollContainerGetter = $parse(attrs.pipScrollContainer);\r\n\r\n                    // deregistration function for mouse move events in $rootScope triggered by jqLite trigger handler\r\n                    var _deregisterRootMoveListener = angular.noop;\r\n\r\n                    initialize();\r\n\r\n                    return;\r\n\r\n                    //-----------------------------------\r\n\r\n                    function initialize() {\r\n                        element.attr('pip-draggable', 'false'); // prevent native drag\r\n                        // check to see if drag handle(s) was specified\r\n                        // if querySelectorAll is available, we use this instead of find\r\n                        // as JQLite find is limited to tagnames\r\n                        let dragHandles: any;\r\n                        if (element[0].querySelectorAll) {\r\n                            dragHandles = angular.element(element[0].querySelectorAll('[pip-drag-handle]'));\r\n                        } else {\r\n                            dragHandles = element.find('[pip-drag-handle]');\r\n                        }\r\n                        if (dragHandles.length) {\r\n                            _dragHandle = dragHandles;\r\n                        }\r\n                        toggleListeners(true);\r\n\r\n                        // Initialize scroll container\r\n                        if (scrollParent) {\r\n                            scrollContainer = angular.element(element.parent());\r\n                        } else if (attrs.pipScrollContainer) {\r\n                            scrollContainer = angular.element(scrollContainerGetter(scope));\r\n                        } else {\r\n                            scrollContainer = angular.element(window);\r\n                        }\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    function toggleListeners(enable) {\r\n                        if (!enable)return;\r\n                        // add listeners.\r\n\r\n                        scope.$on('$destroy', onDestroy);\r\n                        scope.$watch(attrs.pipDrag, onEnableChange);\r\n                        scope.$watch(attrs.pipCenterAnchor, onCenterAnchor);\r\n                        // wire up touch events\r\n                        if (_dragHandle) {\r\n                            // handle(s) specified, use those to initiate drag\r\n                            _dragHandle.on(_pressEvents, onpress);\r\n                        } else {\r\n                            // no handle(s) specified, use the element as the handle\r\n                            element.on(_pressEvents, onpress);\r\n                        }\r\n                        if (!_hasTouch && element[0].nodeName.toLowerCase() == \"img\") {\r\n                            element.on('mousedown', function () {\r\n                                return false;\r\n                            }); // prevent native drag for images\r\n                        }\r\n                    }\r\n                    \r\n                    function onDestroy(enable) {\r\n                        toggleListeners(false);\r\n                    }\r\n\r\n                    function onEnableChange(newVal, oldVal) {\r\n                        _dragEnabled = (newVal);\r\n                    }\r\n\r\n                    function onCenterAnchor(newVal, oldVal) {\r\n                        if (angular.isDefined(newVal))\r\n                            _centerAnchor = (newVal || 'true');\r\n                    }\r\n\r\n                    function isClickableElement(evt) {\r\n                        return (\r\n                            angular.isDefined(angular.element(evt.target).attr(\"pip-cancel-drag\"))\r\n                        );\r\n                    }\r\n\r\n                    /*\r\n                     * When the element is clicked start the drag behaviour\r\n                     * On touch devices as a small delay so as not to prevent native window scrolling\r\n                     */\r\n                    function onpress(evt) {\r\n                        if (!_dragEnabled)return;\r\n\r\n                        if (isClickableElement(evt)) {\r\n                            return;\r\n                        }\r\n\r\n                        if (evt.type == \"mousedown\" && evt.button != 0) {\r\n                            // Do not start dragging on right-click\r\n                            return;\r\n                        }\r\n\r\n                        saveElementStyles();\r\n\r\n                        if (_hasTouch) {\r\n                            cancelPress();\r\n                            _pressTimer = setTimeout(function () {\r\n                                cancelPress();\r\n                                onlongpress(evt);\r\n                            }, LONG_PRESS);\r\n                            $document.on(_moveEvents, cancelPress);\r\n                            $document.on(_releaseEvents, cancelPress);\r\n                        } else {\r\n                            onlongpress(evt);\r\n                        }\r\n\r\n                    }\r\n\r\n                    function saveElementStyles() {\r\n                        _elementStyle.left = element.css('css') || 0;\r\n                        _elementStyle.top = element.css('top') || 0;\r\n                        _elementStyle.position = element.css('position');\r\n                        _elementStyle.width = element.css('width');    \r\n                    }\r\n\r\n                    function cancelPress() {\r\n                        clearTimeout(_pressTimer);\r\n                        $document.off(_moveEvents, cancelPress);\r\n                        $document.off(_releaseEvents, cancelPress);\r\n                    }\r\n\r\n                    function onlongpress(evt) {\r\n                        if (!_dragEnabled)return;\r\n                        evt.preventDefault();\r\n\r\n                        offset = element[0].getBoundingClientRect();\r\n                        if (allowTransform)\r\n                            _dragOffset = offset;\r\n                        else {\r\n                            _dragOffset = {left: document.body.scrollLeft, top: document.body.scrollTop};\r\n                        }\r\n\r\n\r\n                        element.centerX = element[0].offsetWidth / 2;\r\n                        element.centerY = element[0].offsetHeight / 2;\r\n\r\n                        _mx = pipDraggable.inputEvent(evt).pageX;\r\n                        _my = pipDraggable.inputEvent(evt).pageY;\r\n                        _mrx = _mx - offset.left;\r\n                        _mry = _my - offset.top;\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - element.centerX - $window.pageXOffset;\r\n                            _ty = _my - element.centerY - $window.pageYOffset;\r\n                        } else {\r\n                            _tx = _mx - _mrx - $window.pageXOffset;\r\n                            _ty = _my - _mry - $window.pageYOffset;\r\n                        }\r\n\r\n                        $document.on(_moveEvents, onmove);\r\n                        $document.on(_releaseEvents, onrelease);\r\n                        // This event is used to receive manually triggered mouse move events\r\n                        // jqLite unfortunately only supports triggerHandler(...)\r\n                        // See http://api.jquery.com/triggerHandler/\r\n                        // _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', onmove);\r\n                        _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', function (event, origEvent) {\r\n                            onmove(origEvent);\r\n                        });\r\n                    }\r\n\r\n                    function onmove(evt) {\r\n                        if (!_dragEnabled)return;\r\n                        evt.preventDefault();\r\n\r\n                        if (!element.hasClass('pip-dragging')) {\r\n                            _data = getDragData(scope);\r\n                            element.addClass('pip-dragging');\r\n                            $rootScope.$broadcast('draggable:start', {\r\n                                x: _mx,\r\n                                y: _my,\r\n                                tx: _tx,\r\n                                ty: _ty,\r\n                                event: evt,\r\n                                element: element,\r\n                                data: _data\r\n                            });\r\n\r\n                            if (onDragStartCallback) {\r\n                                scope.$apply(function () {\r\n                                    onDragStartCallback(scope, {$data: _data, $event: evt});\r\n                                });\r\n                            }\r\n                        }\r\n\r\n                        _mx = pipDraggable.inputEvent(evt).pageX;\r\n                        _my = pipDraggable.inputEvent(evt).pageY;\r\n\r\n                        if (horizontalScroll || verticalScroll) {\r\n                            dragToScroll();\r\n                        }\r\n\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - element.centerX - _dragOffset.left;\r\n                            _ty = _my - element.centerY - _dragOffset.top;\r\n                        } else {\r\n                            _tx = _mx - _mrx - _dragOffset.left;\r\n                            _ty = _my - _mry - _dragOffset.top;\r\n                        }\r\n\r\n                        moveElement(_tx, _ty);\r\n\r\n                        $rootScope.$broadcast('draggable:move', {\r\n                            x: _mx,\r\n                            y: _my,\r\n                            tx: _tx,\r\n                            ty: _ty,\r\n                            event: evt,\r\n                            element: element,\r\n                            data: _data,\r\n                            uid: _myid,\r\n                            dragOffset: _dragOffset\r\n                        });\r\n                    }\r\n\r\n                    function onrelease(evt) {\r\n                        if (!_dragEnabled)\r\n                            return;\r\n                        evt.preventDefault();\r\n                        $rootScope.$broadcast('draggable:end', {\r\n                            x: _mx,\r\n                            y: _my,\r\n                            tx: _tx,\r\n                            ty: _ty,\r\n                            event: evt,\r\n                            element: element,\r\n                            data: _data,\r\n                            callback: onDragComplete,\r\n                            uid: _myid\r\n                        });\r\n                        element.removeClass('pip-dragging');\r\n                        element.parent().find('.pip-drag-enter').removeClass('pip-drag-enter');\r\n                        reset();\r\n                        $document.off(_moveEvents, onmove);\r\n                        $document.off(_releaseEvents, onrelease);\r\n\r\n                        if (onDragStopCallback) {\r\n                            scope.$apply(function () {\r\n                                onDragStopCallback(scope, {$data: _data, $event: evt});\r\n                            });\r\n                        }\r\n\r\n                        _deregisterRootMoveListener();\r\n                    }\r\n\r\n                    function onDragComplete(evt) {\r\n                        if (!onDragSuccessCallback)return;\r\n\r\n                        scope.$apply(function () {\r\n                            onDragSuccessCallback(scope, {$data: _data, $event: evt});\r\n                        });\r\n                    }\r\n\r\n                    function reset() {\r\n                        if (allowTransform)\r\n                            element.css({transform: '', 'z-index': '', '-webkit-transform': '', '-ms-transform': ''});\r\n                        else {\r\n                            element.css({'position': _elementStyle.position, top: _elementStyle.top, left: _elementStyle.left, 'z-index': '', width: _elementStyle.width});\r\n                        }\r\n                    }\r\n\r\n                    function moveElement(x, y) {\r\n                        var eWidth = element.css('width');\r\n                        if (allowTransform) {\r\n                            element.css({\r\n                                transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                                'z-index': 99999,\r\n                                '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                                '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n                            });\r\n                        } else {\r\n                            element.css({\r\n                                'left': x + 'px',\r\n                                'top': y + 'px',\r\n                                'position': 'fixed',\r\n                                'z-index': 100,\r\n                                width: eWidth\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    function dragToScroll() {\r\n                        var scrollX = 0, scrollY = 0,\r\n                            offset = function (element) {\r\n                                return element.offset() || {left: 0, top: 0};\r\n                            };\r\n\r\n                        if (horizontalScroll) {\r\n                            var\r\n                                containerLeft = offset(scrollContainer).left,\r\n                                containerWidth = scrollContainer.innerWidth(),\r\n                                containerRight = containerLeft + containerWidth;\r\n\r\n                            if ((_mx - containerLeft) < activationDistance) {\r\n                                scrollX = -scrollDistance;\r\n                            }\r\n                            else if ((containerRight - _mx) < activationDistance) {\r\n                                scrollX = scrollDistance;\r\n                            }\r\n                        }\r\n\r\n                        if (verticalScroll) {\r\n                            var\r\n                                containerTop = offset(scrollContainer).top,\r\n                                containerHeight = scrollContainer.innerHeight(),\r\n                                containerBottom = containerTop + containerHeight;\r\n\r\n                            if ((_my - containerTop) < activationDistance) {\r\n                                scrollY = -scrollDistance + 30;\r\n                            }\r\n                            else if ((containerBottom - _my) < activationDistance) {\r\n                                scrollY = scrollDistance - 30;\r\n                            }\r\n                        }\r\n                        if (scrollX !== 0 || scrollY !== 0) {\r\n                            var\r\n                                containerScrollLeft = scrollContainer.scrollLeft(),\r\n                                containerScrollTop = scrollContainer.scrollTop();\r\n\r\n                            scrollContainer.scrollLeft(containerScrollLeft + scrollX);\r\n                            scrollContainer.scrollTop(containerScrollTop + scrollY);\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n    thisModule.directive('pipDrop', \r\n        function ($parse, $timeout, $window, $document, pipDraggable) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope: any, element, attrs: any) {\r\n                scope.value = attrs.pipDrop;\r\n                scope.isTouching = false;\r\n\r\n                var _lastDropTouch = null;\r\n                var _myid = scope.$id;\r\n                var _dropEnabled = false;\r\n\r\n                var onDropCallback = $parse(attrs.pipDropSuccess);// || function(){};\r\n                var onDragStartCallback = $parse(attrs.pipDragStart);\r\n                var onDragStopCallback = $parse(attrs.pipDragStop);\r\n                var onDragMoveCallback = $parse(attrs.pipDragMove);\r\n\r\n                initialize();\r\n\r\n                return;\r\n\r\n                //----------------------\r\n\r\n                function initialize() {\r\n                    toggleListeners(true);\r\n                }\r\n\r\n                function toggleListeners(enable) {\r\n                    // remove listeners\r\n                    if (!enable)return;\r\n                    // add listeners.\r\n                    scope.$watch(attrs.pipDrop, onEnableChange);\r\n                    scope.$on('$destroy', onDestroy);\r\n                    scope.$on('draggable:start', onDragStart);\r\n                    scope.$on('draggable:move', onDragMove);\r\n                    scope.$on('draggable:end', onDragEnd);\r\n                }\r\n\r\n                function onDestroy(enable) {\r\n                    toggleListeners(false);\r\n                }\r\n\r\n                function onEnableChange(newVal, oldVal) {\r\n                    _dropEnabled = newVal;\r\n                }\r\n\r\n                function onDragStart(evt, obj) {\r\n                    if (!_dropEnabled)return;\r\n                    isTouching(obj.x, obj.y, obj.element);\r\n\r\n                    if (attrs.pipDragStart) {\r\n                        $timeout(function () {\r\n                            onDragStartCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function onDragMove(evt, obj) {\r\n                    if (!_dropEnabled)return;\r\n                    isTouching(obj.x, obj.y, obj.element);\r\n\r\n                    if (attrs.pipDragMove) {\r\n                        $timeout(function () {\r\n                            onDragMoveCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n                }\r\n\r\n                function onDragEnd(evt, obj) {\r\n                    // don't listen to drop events if this is the element being dragged\r\n                    // only update the styles and return\r\n                    if (!_dropEnabled || _myid === obj.uid) {\r\n                        updateDragStyles(false, obj.element);\r\n                        return;\r\n                    }\r\n\r\n                    if (isTouching(obj.x, obj.y, obj.element)) {\r\n                        // call the pipDraggable pipDragSuccess element callback\r\n                        if (obj.callback) {\r\n                            obj.callback(obj);\r\n                        }\r\n\r\n                        if (attrs.pipDropSuccess) {\r\n                            $timeout(function () {\r\n                                onDropCallback(scope, {\r\n                                    $data: obj.data,\r\n                                    $event: obj,\r\n                                    $target: scope.$eval(scope.value)\r\n                                });\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    if (attrs.pipDragStop) {\r\n                        $timeout(function () {\r\n                            onDragStopCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n\r\n                    updateDragStyles(false, obj.element);\r\n                }\r\n\r\n                function isTouching(mouseX, mouseY, dragElement) {\r\n                    var touching = hitTest(mouseX, mouseY);\r\n                    scope.isTouching = touching;\r\n                    if (touching) {\r\n                        _lastDropTouch = element;\r\n                    }\r\n                    updateDragStyles(touching, dragElement);\r\n                    return touching;\r\n                }\r\n\r\n                function updateDragStyles(touching, dragElement) {\r\n                    if (touching) {\r\n                        element.addClass('pip-drag-enter');\r\n                        dragElement.addClass('pip-drag-over');\r\n                    } else if (_lastDropTouch == element) {\r\n                        _lastDropTouch = null;\r\n                        element.removeClass('pip-drag-enter');\r\n                        dragElement.removeClass('pip-drag-over');\r\n                    }\r\n                };\r\n\r\n                function hitTest(x, y) {\r\n                    var bounds = element[0].getBoundingClientRect();\r\n                    x -= $document[0].body.scrollLeft + $document[0].documentElement.scrollLeft;\r\n                    y -= $document[0].body.scrollTop + $document[0].documentElement.scrollTop;\r\n                    return x >= bounds.left\r\n                        && x <= bounds.right\r\n                        && y <= bounds.bottom\r\n                        && y >= bounds.top;\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n    //thisModule.directive('pipDragClone', function ($parse, $timeout, pipDraggable) {\r\n    //    return {\r\n    //        restrict: 'A',\r\n    //        link: function (scope, element, attrs) {\r\n    //            var img, _allowClone = true;\r\n    //            var _dragOffset = null;\r\n    //            scope.clonedData = {};\r\n    //            initialize();\r\n    //            return;\r\n\r\n    //            function initialize() {\r\n//\r\n    //                img = element.find('img');\r\n    //                element.attr('pip-draggable', 'false');\r\n    //                img.attr('draggable', 'false');\r\n    //                reset();\r\n    //                toggleListeners(true);\r\n    //            }\r\n//\r\n//\r\n    //            function toggleListeners(enable) {\r\n    //                // remove listeners\r\n//\r\n    //                if (!enable)return;\r\n    //                // add listeners.\r\n    //                scope.$on('draggable:start', onDragStart);\r\n    //                scope.$on('draggable:move', onDragMove);\r\n    //                scope.$on('draggable:end', onDragEnd);\r\n    //                preventContextMenu();\r\n//\r\n    //            }\r\n\r\n    //            function preventContextMenu() {\r\n    //                //  element.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                img.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                //  element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                img.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //            }\r\n\r\n    //            function onDragStart(evt, obj, elm) {\r\n    //                _allowClone = true;\r\n    //                if (angular.isDefined(obj.data.allowClone)) {\r\n    //                    _allowClone = obj.data.allowClone;\r\n    //                }\r\n    //                if (_allowClone) {\r\n    //                    scope.$apply(function () {\r\n    //                        scope.clonedData = obj.data;\r\n    //                    });\r\n    //                    element.css('width', obj.element[0].offsetWidth);\r\n    //                    element.css('height', obj.element[0].offsetHeight);\r\n//\r\n    //                    moveElement(obj.tx, obj.ty);\r\n    //                }\r\n//\r\n    //            }\r\n\r\n    //            function onDragMove(evt, obj) {\r\n    //                if (_allowClone) {\r\n//\r\n    //                    _tx = obj.tx + obj.dragOffset.left;\r\n    //                    _ty = obj.ty + obj.dragOffset.top;\r\n//\r\n    //                    moveElement(_tx, _ty);\r\n    //                }\r\n    //            }\r\n\r\n    //            function onDragEnd(evt, obj) {\r\n    //                //moveElement(obj.tx,obj.ty);\r\n    //                if (_allowClone) {\r\n    //                    reset();\r\n    //                }\r\n    //            }\r\n//\r\n    //            function reset() {\r\n    //                element.css({left: 0, top: 0, position: 'fixed', 'z-index': -1, visibility: 'hidden'});\r\n    //            }\r\n\r\n    //            function moveElement(x, y) {\r\n    //                element.css({\r\n    //                    transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n    //                    'z-index': 99999,\r\n    //                    'visibility': 'visible',\r\n    //                    '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n    //                    '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n    //                    //,margin: '0'  don't monkey with the margin,\r\n    //                });\r\n    //            }\r\n//\r\n    //            function absorbEvent_(event) {\r\n    //                var e = event;//.originalEvent;\r\n    //                e.preventDefault && e.preventDefault();\r\n    //                e.stopPropagation && e.stopPropagation();\r\n    //                e.cancelBubble = true;\r\n    //                e.returnValue = false;\r\n    //                return false;\r\n    //            }\r\n//\r\n    //        }\r\n    //    };\r\n    //});\r\n\r\n    thisModule.directive('pipPreventDrag', function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope: any, element, attrs: any) {\r\n                initialize();\r\n\r\n                return;\r\n                //---------------------\r\n\r\n                function initialize() {\r\n                    element.attr('pip-draggable', 'false');\r\n                    toggleListeners(true);\r\n                }\r\n\r\n                function toggleListeners(enable) {\r\n                    // remove listeners\r\n                    if (!enable)return;\r\n                    // add listeners.\r\n                    element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                }\r\n\r\n                function absorbEvent_(event) {\r\n                    var e = event.originalEvent;\r\n                    e.preventDefault && e.preventDefault();\r\n                    e.stopPropagation && e.stopPropagation();\r\n                    e.cancelBubble = true;\r\n                    e.returnValue = false;\r\n                    return false;\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n    thisModule.directive('pipCancelDrag', function () {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                element.find('*').attr('pip-cancel-drag', 'pip-cancel-drag');\r\n            }\r\n        };\r\n    });\r\n})();\r\n\r\n","/**\r\n * @file Keyboard navigation over few focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFocused\", []);\r\n\r\n    thisModule.directive('pipFocused', function($timeout, $mdConstant) {\r\n        return {\r\n            require: \"?ngModel\",\r\n            link: function ($scope: any, $element, $attrs: any) {\r\n                var controls, controlsLength,\r\n                    withHidden = $attrs.pipWithHidden;\r\n\r\n                $timeout(init);\r\n                $element.on('keydown', keydownListener);\r\n\r\n                $scope.$watch($attrs.ngModel, function () {\r\n                    $timeout(init);\r\n                }, true);\r\n\r\n                function init() {\r\n                    var selector = withHidden ? '.pip-focusable' : '.pip-focusable:visible';\r\n                    controls = $element.find(selector);\r\n                    controlsLength = controls.length;\r\n\r\n                    // add needed event listeners\r\n                    controls.on('focus', function () {\r\n                        $element.addClass('pip-focused-container');\r\n                        $(this).addClass('md-focused');\r\n                    }).on('focusout', function () {\r\n                        $element.removeClass('pip-focused-container');\r\n                    });\r\n                }\r\n\r\n                function keydownListener(e) {\r\n                    var keyCode = e.which || e.keyCode;\r\n\r\n                    // Check control keyCode\r\n                    if (keyCode == $mdConstant.KEY_CODE.LEFT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.UP_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) {\r\n\r\n                        e.preventDefault();\r\n\r\n                        var \r\n                            increment = (keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                            moveToControl = controls.index(controls.filter(\".md-focused\")) + increment;\r\n\r\n                        // Move focus to next control\r\n                        if (moveToControl >= 0 && moveToControl < controlsLength) {\r\n                            controls[moveToControl].focus();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n\r\n","/**\r\n * @file Infinite scrolling behavior\r\n * @description\r\n * Modified from https://github.com/sroze/ngInfiniteScroll\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipInfiniteScroll\", []);\r\n\r\n    thisModule.directive('pipInfiniteScroll', \r\n        function($rootScope, $window, $interval, $parse) {\r\n            var THROTTLE_MILLISECONDS = 500;\r\n\r\n            return {\r\n                scope: {\r\n                    pipInfiniteScroll: '&',\r\n                    pipScrollContainer: '=',\r\n                    pipScrollDistance: '=',\r\n                    pipScrollDisabled: '=',\r\n                    pipScrollUseDocumentBottom: '=',\r\n                    pipScrollListenForEvent: '@'\r\n                },\r\n                link: function($scope: any, $element, $attrs: any) {\r\n                    var \r\n                        checkWhenEnabled = null,\r\n                        scrollContainer,\r\n                        immediateCheck = true,\r\n                        scrollDistance = null,\r\n                        scrollEnabled = null, \r\n                        unregisterEventListener = null,\r\n                        useDocumentBottom = false, \r\n                        windowElement = angular.element($window);\r\n                    \r\n                    function height(element) {\r\n                        element = element[0] || element;\r\n                        if (isNaN(element.offsetHeight)) {\r\n                            return element.document.documentElement.clientHeight;\r\n                        } else {\r\n                            return element.offsetHeight;\r\n                        }\r\n                    };\r\n\r\n                    function offsetTop(element) {\r\n                        if (!element[0].getBoundingClientRect || element.css('none')) {\r\n                            return;\r\n                        }\r\n                        return element[0].getBoundingClientRect().top + pageYOffset(element);\r\n                    };\r\n\r\n                    function pageYOffset(element) {\r\n                        element = element[0] || element;\r\n                        if (isNaN(window.pageYOffset)) {\r\n                            return element.document.documentElement.scrollTop;\r\n                        } else {\r\n                            return element.ownerDocument.defaultView.pageYOffset;\r\n                        }\r\n                    };\r\n\r\n                    var onContainerScroll = function() {\r\n                        var \r\n                            containerBottom, \r\n                            containerTopOffset, \r\n                            elementBottom, \r\n                            remaining, \r\n                            shouldScroll;\r\n                                                \r\n                        if (scrollContainer === windowElement) {\r\n                            containerBottom = height(scrollContainer) + pageYOffset(scrollContainer[0].document.documentElement);\r\n                            elementBottom = offsetTop($element) + height($element);\r\n                        } else {\r\n                            containerBottom = height(scrollContainer);\r\n                            containerTopOffset = 0;\r\n                            if (offsetTop(scrollContainer) !== void 0) {\r\n                                containerTopOffset = offsetTop(scrollContainer);\r\n                            }\r\n                            elementBottom = offsetTop($element) - containerTopOffset + height($element);\r\n                        }\r\n\r\n                        if (useDocumentBottom) {\r\n                            elementBottom = height(($element[0].ownerDocument || $element[0].document).documentElement);\r\n                        }\r\n\r\n                        remaining = elementBottom - containerBottom;\r\n                        shouldScroll = remaining <= height(scrollContainer) * scrollDistance + 1;\r\n                        \r\n                        if (shouldScroll) {\r\n                            checkWhenEnabled = true;\r\n                            if (scrollEnabled) {\r\n                                if ($scope.$$phase || $rootScope.$$phase) {\r\n                                    return $scope.pipInfiniteScroll();\r\n                                } else {\r\n                                    return $scope.$apply($scope.pipInfiniteScroll);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            return checkWhenEnabled = false;\r\n                        }\r\n                    };\r\n\r\n                    if (THROTTLE_MILLISECONDS != null) {\r\n                        onContainerScroll = _.throttle(onContainerScroll, THROTTLE_MILLISECONDS);                    \r\n                    }\r\n\r\n                    $scope.$on('$destroy', function() {\r\n                        scrollContainer.unbind('scroll', onContainerScroll);\r\n                        if (unregisterEventListener != null) {\r\n                            unregisterEventListener();\r\n                            return unregisterEventListener = null;\r\n                        }\r\n                    });\r\n\r\n                    function handleScrollDistance(v) {\r\n                        return scrollDistance = parseFloat(v) || 0;\r\n                    };\r\n                    $scope.$watch('pipScrollDistance', handleScrollDistance);\r\n                    handleScrollDistance($scope.pipScrollDistance);\r\n                    \r\n                    function handleScrollDisabled(v) {\r\n                        scrollEnabled = !v;\r\n                        if (scrollEnabled && checkWhenEnabled) {\r\n                            checkWhenEnabled = false;\r\n                            return onContainerScroll();\r\n                        }\r\n                    };\r\n                    $scope.$watch('pipScrollDisabled', handleScrollDisabled);\r\n                    handleScrollDisabled($scope.pipScrollDisabled);\r\n\r\n                    function handleScrollUseDocumentBottom(v) {\r\n                        return useDocumentBottom = v;\r\n                    };\r\n                    $scope.$watch('pipScrollUseDocumentBottom', handleScrollUseDocumentBottom);\r\n                    handleScrollUseDocumentBottom($scope.pipScrollUseDocumentBottom);\r\n\r\n                    function changeContainer(newContainer) {\r\n                        if (scrollContainer != null) {\r\n                            scrollContainer.unbind('scroll', onContainerScroll);\r\n                        }\r\n\r\n                        scrollContainer = newContainer;\r\n                        if (newContainer != null) {\r\n                            return scrollContainer.bind('scroll', onContainerScroll);\r\n                        }\r\n                    };\r\n\r\n                    changeContainer(windowElement);\r\n                    if ($scope.pipScrollListenForEvent) {\r\n                        unregisterEventListener = $rootScope.$on($scope.pipScrollListenForEvent, onContainerScroll);\r\n                    }\r\n\r\n                    function handleScrollContainer(newContainer) {\r\n                        if ((newContainer == null) || newContainer.length === 0) {\r\n                            return;\r\n                        }\r\n                        if (newContainer instanceof HTMLElement) {\r\n                            newContainer = angular.element(newContainer);\r\n                        } else if (typeof newContainer.append === 'function') {\r\n                            newContainer = angular.element(newContainer[newContainer.length - 1]);\r\n                        } else if (typeof newContainer === 'string') {\r\n                            newContainer = $element.parents().find(newContainer);\r\n                        }\r\n\r\n                        if (newContainer != null && (!Array.isArray(newContainer) ||\r\n                            (Array.isArray(newContainer) && newContainer.length > 0))) {\r\n                            return changeContainer(newContainer);\r\n                        } else {\r\n                            throw new Error(\"Invalid pip-scroll-container attribute.\");\r\n                        }\r\n                    };\r\n                    $scope.$watch('pipScrollContainer', function (newContainer) {\r\n                        if (newContainer !== scrollContainer)\r\n                            handleScrollContainer(newContainer);\r\n                    });\r\n                    handleScrollContainer($scope.pipScrollContainer || []);\r\n                    \r\n                    if ($attrs.pipScrollParent != null) {\r\n                        changeContainer(angular.element($element.parent()));\r\n                    }\r\n                    if ($attrs.pipScrolImmediateCheck != null) {\r\n                        immediateCheck = $scope.$eval($attrs.pipScrolImmediateCheck);\r\n                    }\r\n                    \r\n                    return $interval((function() {\r\n                        if (immediateCheck) {\r\n                            return onContainerScroll();\r\n                        }\r\n                    }), 0, 1);\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Keyboard navigation with scrolling over non-focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipSelected\", []);\r\n\r\n    thisModule.directive('pipSelected',function ($parse, $mdConstant, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            link: function ($scope: any, $element, $attrs: any) {\r\n                var\r\n                    indexGetter = $attrs.pipSelected ? $parse($attrs.pipSelected) : null,\r\n                    indexSetter = indexGetter ? indexGetter.assign : null,\r\n                    idGetter = $attrs.pipSelectedId ? $parse($attrs.pipSelectedId) : null,\r\n                    idSetter = idGetter ? idGetter.assign : null,\r\n                    changeGetter = $attrs.pipSelect ? $parse($attrs.pipSelect) : null,\r\n                    enterSpaceGetter = $attrs.pipEnterSpacePress ? $parse($attrs.pipEnterSpacePress) : null,\r\n                    noScroll = toBoolean($attrs.pipNoScroll),\r\n                    modifier = toBoolean($attrs.pipSkipHidden) ? ':visible' : '',\r\n                    className = toBoolean($attrs.pipTreeList) ? '.pip-selectable-tree' : '.pip-selectable',\r\n                    selectedIndex = indexGetter($scope),\r\n                    currentElementTabinex = $element.attr('tabindex'),\r\n                    pipSelectedWatch = $attrs.pipSelectedWatch,\r\n                    isScrolled = false;\r\n\r\n                // Set tabindex if it's not set yet\r\n                $element.attr('tabindex', currentElementTabinex || 0);\r\n\r\n                // Watch selected item index\r\n                if (!toBoolean($attrs.pipTreeList)) {\r\n                    $scope.$watch(indexGetter, function(newSelectedIndex) {\r\n                        selectItem({itemIndex: newSelectedIndex});\r\n                    });\r\n                } else {\r\n                    $scope.$watch(idGetter, function(newSelectedId) {\r\n                        setTimeout(function () {\r\n                            selectItem({itemId: newSelectedId, raiseEvent: true});\r\n                        }, 0);\r\n                    });\r\n                }\r\n\r\n                // Watch resync selection\r\n                if (pipSelectedWatch) {\r\n                    $scope.$watch(pipSelectedWatch, function() {\r\n                        // Delay update to allow ng-repeat to update DOM\r\n                        setTimeout(function() {\r\n                            selectedIndex = indexGetter($scope);\r\n                            selectItem({itemIndex: selectedIndex});\r\n                        }, 100);\r\n                    });\r\n                }\r\n\r\n                // Select item defined by index\r\n                selectItem({itemIndex: selectedIndex, items: $element.find(className)});\r\n\r\n                // Converts value into boolean\r\n                function toBoolean(value) {\r\n                    if (value == null) return false;\r\n                    if (!value) return false;\r\n                    value = value.toString().toLowerCase();\r\n                    return value == '1' || value == 'true';\r\n                };\r\n                \r\n                // Functions and listeners\r\n\r\n                function selectItem(itemParams) {\r\n                    console.log('selectItem');\r\n                    if (isScrolled) return;\r\n                    var itemIndex = itemParams.itemIndex,\r\n                        itemId = itemParams.itemId,\r\n                        items = itemParams.items || $element.find(className + modifier),\r\n                        itemsLength = items.length,\r\n                        item = (function () {\r\n                            if (itemParams.item) return itemParams.item;\r\n                            if (itemIndex === undefined && itemIndex === -1) {\r\n                                itemIndex = items.index(items.filter('[pip-id=' + itemId + ']'));\r\n                            }\r\n                            if (itemIndex >= 0 && itemIndex < itemsLength) {\r\n                                return items[itemIndex]\r\n                            }\r\n                        }()),\r\n                        raiseEvent = itemParams.raiseEvent;\r\n\r\n                    if (item) {\r\n                        $element.find(className).removeClass('selected md-focused');\r\n                        item = angular.element(item)\r\n                            .addClass('selected md-focused')\r\n                            .focus(); // todo сдвигает список тут, на первом проходе\r\n                        if (!noScroll) scrollToItem(item);\r\n                        if (raiseEvent) defineSelectedIndex(items);\r\n                    }\r\n                };\r\n\r\n                function defineSelectedIndex(items) {\r\n                    var oldSelectedIndex = selectedIndex;\r\n                    selectedIndex = -1;\r\n                    for (var index = 0; index < items.length; index++) {\r\n                        if ($(items[index]).hasClass('selected')) {\r\n                            selectedIndex = index;\r\n\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    // Execute callback to notify about item select\r\n                    if (oldSelectedIndex != selectedIndex && selectedIndex !== -1) {\r\n                        $scope.$apply(updateIndex);\r\n                    }\r\n\r\n                    function updateIndex() {\r\n                        var selectedItem = angular.element(items[selectedIndex]),\r\n                            selectedId = selectedItem.attr('pip-id');\r\n\r\n                        if (indexSetter) indexSetter($scope, selectedIndex);\r\n                        if (idSetter) idSetter($scope, selectedId);\r\n                        if (changeGetter) {\r\n                            changeGetter($scope, {\r\n                                $event: {\r\n                                    target: $element,\r\n                                    item: selectedItem,\r\n                                    index: selectedIndex,\r\n                                    id: selectedId,\r\n                                    newIndex: selectedIndex,\r\n                                    oldIndex: oldSelectedIndex\r\n                                }\r\n                            });\r\n                        }\r\n                    };\r\n                };\r\n\r\n                function scrollToItem($item) {\r\n                    if (noScroll) return;\r\n\r\n                    var\r\n                        containerTop = $element.offset().top,\r\n                        containerHeight = $element.height(),\r\n                        containerBottom = containerTop + containerHeight,\r\n                        itemTop = $item.offset().top,\r\n                        itemHeight = $item.outerHeight(true),\r\n                        itemBottom = itemTop + itemHeight,\r\n                        containerScrollTop = $element.scrollTop();\r\n\r\n                        isScrolled = true;\r\n                        setTimeout(function () {\r\n                            isScrolled = false;\r\n                        }, 100);\r\n\r\n                    if (containerTop > itemTop) {\r\n                        $element.scrollTop(containerScrollTop + itemTop - containerTop);\r\n                    }\r\n                    else if (containerBottom < itemBottom) {\r\n                        $element.scrollTop(containerScrollTop + itemBottom - containerBottom);\r\n                    }\r\n\r\n                };\r\n\r\n                $element.on('click touchstart', className, function (event) {\r\n                    selectItem({item: event.currentTarget, raiseEvent: true});\r\n                });\r\n\r\n                $element.on('keydown', function (e) {\r\n                    var keyCode = e.which || e.keyCode;\r\n\r\n                    // Check control keyCode\r\n                    if (keyCode == $mdConstant.KEY_CODE.ENTER || keyCode == $mdConstant.KEY_CODE.SPACE) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        if (enterSpaceGetter) {\r\n                            enterSpaceGetter($scope, {\r\n                                $event: {\r\n                                    target: $element,\r\n                                    index: selectedIndex,\r\n                                    item: $element.find('.selected')\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                    } else\r\n                    if (keyCode == $mdConstant.KEY_CODE.LEFT_ARROW || keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.UP_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) {\r\n\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        // Get next selectable control index\r\n                        var items = $element.find(className + modifier),\r\n                            inc = (keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                            newSelectedIndex = selectedIndex + inc;\r\n\r\n                        // Set next control as selected\r\n                        selectItem({itemIndex: newSelectedIndex, items: items, raiseEvent: true});\r\n                    }\r\n                });\r\n\r\n                $element.on('focusin', function (event) {\r\n                    // Choose selected element\r\n                    var items,\r\n                        selectedItem = $element.find(className + '.selected');\r\n\r\n                    selectedItem.addClass('md-focused');\r\n\r\n                    // If there are not selected elements then pick the first one\r\n                    if (selectedItem.length === 0) {\r\n                        selectedIndex = indexGetter($scope);\r\n                        items = $element.find(className + modifier);\r\n                        selectItem({itemIndex: selectedIndex || 0, items: items, raiseEvent: true});\r\n                    }\r\n                });\r\n\r\n                $element.on('focusout', function (event) {\r\n                    $element.find(className + '.md-focused' + modifier).removeClass('md-focused');\r\n                });\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipUnsavedChanges\", []);\r\n\r\n    thisModule.directive(\"pipUnsavedChanges\", function ($window, $rootScope) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                unsavedChangesAvailable: '&pipUnsavedChangesAvailable',\r\n                unsavedChangesMessage: '@pipUnsavedChangesMessage',\r\n                afterLeave: '&pipUnsavedChangesAfterLeave'\r\n            },\r\n            link: function($scope: any) {\r\n\r\n                $window.onbeforeunload = function() {\r\n                    if ($scope.unsavedChangesAvailable()) {\r\n                        $rootScope.$routing = false;\r\n                        return $scope.unsavedChangesMessage;\r\n                    }\r\n                };\r\n\r\n                var unbindFunc = $scope.$on('$stateChangeStart', function(event) {\r\n                    if ($scope.unsavedChangesAvailable() && !$window.confirm($scope.unsavedChangesMessage)) {\r\n                        $rootScope.$routing = false;\r\n                        event.preventDefault();\r\n                    } else {\r\n                        _.isFunction($scope.afterLeave) && $scope.afterLeave();\r\n                    }\r\n                });\r\n\r\n                $scope.$on('$destroy', function() {\r\n                    $window.onbeforeunload = null;\r\n                    unbindFunc();\r\n                });\r\n            }\r\n        };\r\n    });\r\n\r\n})();","<ul class=\"pip-color-picker {{class}}\" pip-selected=\"currentColorIndex\" pip-enter-space-press=\"enterSpacePress($event)\">\r\n    <li tabindex=\"-1\" ng-repeat=\"color in colors track by color\">\r\n        <md-button  tabindex=\"-1\" class=\"md-icon-button pip-selectable\" ng-click=\"selectColor($index)\" aria-label=\"color\" ng-disabled=\"disabled()\">\r\n            <md-icon ng-style=\"{'color': color}\" md-svg-icon=\"icons:{{ color == currentColor ? 'circle' : 'radio-off' }}\">\r\n            </md-icon>\r\n        </md-button>\r\n    </li>\r\n</ul>\r\n","<div ng-if=\"params.templateUrl\" class='pip-popover flex layout-column'\r\n     ng-click=\"onPopoverClick($event)\" ng-include=\"params.templateUrl\">\r\n</div>\r\n\r\n<div ng-if=\"params.template\" class='pip-popover' ng-click=\"onPopoverClick($event)\">\r\n</div>\r\n","<div class=\"pip-routing-progress layout-column layout-align-center-center\"\r\n        ng-show=\"showProgress()\">\r\n     <!--ng-show=\"$routing || $reset || toolInitialized\">-->\r\n    <div class=\"loader\">\r\n        <svg class=\"circular\" viewBox=\"25 25 50 50\">\r\n            <circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"/>\r\n        </svg>\r\n    </div>\r\n\r\n    <img src=\"\"  height=\"40\" width=\"40\" class=\"pip-img\">\r\n\r\n    <md-progress-circular md-diameter=\"96\"\r\n                          class=\"fix-ie\"></md-progress-circular>\r\n\r\n</div>\r\n","<md-toast class=\"md-action pip-toast\"\r\n          ng-class=\"{'pip-error': toast.type=='error',\r\n          'pip-column-toast': toast.type == 'error' || toast.actions.length > 1 || actionLenght > 4,\r\n          'pip-no-action-toast': actionLenght == 0}\"\r\n          style=\"height:initial; max-height: initial; \">\r\n\r\n    <span class=\"flex-var pip-text\" ng-bind-html=\"message\"></span>\r\n    <div class=\"layout-row layout-align-end-start\" class=\"pip-actions\" ng-if=\"actions.length > 0 || (toast.type=='error' && toast.error)\">\r\n        <md-button class=\"flex-fixed pip-toast-button\" ng-if=\"toast.type=='error' && toast.error && showDetails\" ng-click=\"onDetails()\">Details</md-button>\r\n        <md-button class=\"flex-fixed pip-toast-button\"\r\n                   ng-click=\"onAction(action)\"\r\n                   ng-repeat=\"action in actions\"\r\n                   aria-label=\"{{::action| translate}}\">\r\n            {{::action| translate}}\r\n        </md-button>\r\n    </div>\r\n\r\n</md-toast>","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipControls', [\r\n        'pipMarkdown',\r\n        'pipColorPicker',\r\n        'pipRoutingProgress',\r\n        'pipPopover',\r\n        'pipImageSlider',\r\n        'pipToasts',\r\n        'pipControls.Translate'\r\n    ]);\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipColorPicker', [ 'pipControls.Templates']); // 'pipFocused',\r\n\r\n    thisModule.directive('pipColorPicker',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    colors: '=pipColors',\r\n                    currentColor: '=ngModel',\r\n                    colorChange: '&ngChange'\r\n                },\r\n                templateUrl: 'color_picker/color_picker.html',\r\n                controller: 'pipColorPickerController'\r\n            };\r\n        }\r\n    );\r\n    thisModule.controller('pipColorPickerController',\r\n        function ($scope, $element, $attrs, $timeout) {\r\n            var\r\n                DEFAULT_COLORS = ['purple', 'lightgreen', 'green', 'darkred', 'pink', 'yellow', 'cyan'];\r\n\r\n            $scope.class = $attrs.class || '';\r\n\r\n            if (!$scope.colors || _.isArray($scope.colors) && $scope.colors.length === 0) {\r\n                $scope.colors = DEFAULT_COLORS;\r\n            }\r\n\r\n            $scope.currentColor = $scope.currentColor || $scope.colors[0];\r\n            $scope.currentColorIndex = $scope.colors.indexOf($scope.currentColor);\r\n\r\n            $scope.disabled = function () {\r\n                if ($scope.ngDisabled) {\r\n                    return $scope.ngDisabled();\r\n                }\r\n\r\n                return true;\r\n            };\r\n\r\n            $scope.selectColor = function (index) {\r\n                if ($scope.disabled()) {\r\n                    return;\r\n                }\r\n                $scope.currentColorIndex = index;\r\n\r\n                $scope.currentColor = $scope.colors[$scope.currentColorIndex];\r\n\r\n                $timeout(function () {\r\n                    $scope.$apply();\r\n                });\r\n\r\n                if ($scope.colorChange) {\r\n                    $scope.colorChange();\r\n                }\r\n            };\r\n\r\n            $scope.enterSpacePress = function (event) {\r\n                $scope.selectColor(event.index);\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipImageSlider', ['pipSliderButton', 'pipSliderIndicator', 'pipImageSlider.Service']);\r\n\r\n    thisModule.directive('pipImageSlider',\r\n        function () {\r\n            return {\r\n                scope: {\r\n                    sliderIndex: '=pipImageIndex'\r\n                },\r\n                controller: function ($scope, $element, $attrs, $parse, $timeout, $interval, $pipImageSlider) {\r\n                    var blocks,\r\n                        index = 0, newIndex,\r\n                        direction,\r\n                        type = $parse($attrs.pipAnimationType)($scope),\r\n                        DEFAULT_INTERVAL = 4500,\r\n                        interval = $parse($attrs.pipAnimationInterval)($scope),\r\n                        timePromises,\r\n                        throttled;\r\n\r\n                    $element.addClass('pip-image-slider');\r\n                    $element.addClass('pip-animation-' + type);\r\n\r\n                    $scope.swipeStart = 0;\r\n                    /*\r\n                     if ($swipe)\r\n                     $swipe.bind($element, {\r\n                     'start': function(coords) {\r\n                     if (coords) $scope.swipeStart = coords.x;\r\n                     else $scope.swipeStart = 0;\r\n                     },\r\n                     'end': function(coords) {\r\n                     var delta;\r\n                     if (coords) {\r\n                     delta = $scope.swipeStart - coords.x;\r\n                     if (delta > 150)  $scope.nextBlock();\r\n                     if (delta < -150)  $scope.prevBlock();\r\n                     $scope.swipeStart = 0;\r\n                     } else $scope.swipeStart = 0;\r\n                     }\r\n                     });\r\n                     */\r\n                    setIndex();\r\n\r\n                    $timeout(function () {\r\n                        blocks = $element.find('.pip-animation-block');\r\n                        if (blocks.length > 0) {\r\n                            $(blocks[0]).addClass('pip-show');\r\n                        }\r\n                    });\r\n\r\n                    startInterval();\r\n                    throttled = _.throttle(function () {\r\n                        $pipImageSlider.toBlock(type, blocks, index, newIndex, direction);\r\n                        index = newIndex;\r\n                        setIndex();\r\n                    }, 700);\r\n\r\n                    $scope.nextBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                        direction = 'next';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.prevBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index - 1 < 0 ? blocks.length - 1 : index - 1;\r\n                        direction = 'prev';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.slideTo = function (nextIndex) {\r\n                        if (nextIndex === index || nextIndex > blocks.length - 1) {\r\n                            return;\r\n                        }\r\n\r\n                        restartInterval();\r\n                        newIndex = nextIndex;\r\n                        direction = nextIndex > index ? 'next' : 'prev';\r\n                        throttled();\r\n                    };\r\n                    \r\n                    if ($attrs.id) $pipImageSlider.registerSlider($attrs.id, $scope);\r\n\r\n                    function setIndex() {\r\n                        if ($attrs.pipImageIndex) $scope.sliderIndex = index;\r\n                    }\r\n\r\n                    function startInterval() {\r\n                        timePromises = $interval(function () {\r\n                            newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                            direction = 'next';\r\n                            throttled();\r\n                        }, interval || DEFAULT_INTERVAL);\r\n                    }\r\n\r\n                    function stopInterval() {\r\n                        $interval.cancel(timePromises);\r\n                    }\r\n\r\n                    $element.on('$destroy', function () {\r\n                        stopInterval();\r\n                        $pipImageSlider.removeSlider($attrs.id);\r\n                    });\r\n\r\n                    function restartInterval() {\r\n                        stopInterval();\r\n                        startInterval();\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipImageSlider.Service', []);\r\n\r\n    thisModule.service('$pipImageSlider',\r\n        function ($timeout) {\r\n\r\n            var ANIMATION_DURATION = 550,\r\n                sliders = {};\r\n\r\n            return {\r\n                nextCarousel: nextCarousel,\r\n                prevCarousel: prevCarousel,\r\n                toBlock: toBlock,\r\n                registerSlider: register,\r\n                removeSlider: remove,\r\n                getSliderScope: getSlider\r\n            };\r\n\r\n            function register(sliderId, sliderScope) {\r\n                sliders[sliderId] = sliderScope;\r\n            }\r\n            \r\n            function remove(sliderId) {\r\n                delete sliders[sliderId];\r\n            }\r\n\r\n            function getSlider(sliderId) {\r\n                return sliders[sliderId];\r\n            }\r\n\r\n            function nextCarousel(nextBlock, prevBlock) {\r\n                nextBlock.addClass('pip-next');\r\n                \r\n                $timeout(function () {\r\n                    nextBlock.addClass('animated').addClass('pip-show').removeClass('pip-next');\r\n                    prevBlock.addClass('animated').removeClass('pip-show');\r\n                }, 100);\r\n            }\r\n\r\n            function prevCarousel(nextBlock, prevBlock) {\r\n                $timeout(function () {\r\n                    nextBlock.addClass('animated').addClass('pip-show');\r\n                    prevBlock.addClass('animated').addClass('pip-next').removeClass('pip-show');\r\n                }, 100);\r\n            }\r\n\r\n            function toBlock(type, blocks, oldIndex, nextIndex, direction) {\r\n                var prevBlock = $(blocks[oldIndex]),\r\n                    blockIndex = nextIndex,\r\n                    nextBlock = $(blocks[blockIndex]);\r\n\r\n                if (type === 'carousel') {\r\n                    $(blocks).removeClass('pip-next').removeClass('pip-prev').removeClass('animated');\r\n\r\n                    if (direction && (direction === 'prev' || direction === 'next')) {\r\n                        if (direction === 'prev') {\r\n                            prevCarousel(nextBlock, prevBlock);\r\n                        } else {\r\n                            nextCarousel(nextBlock, prevBlock);\r\n                        }\r\n                    } else {\r\n                        if (nextIndex && nextIndex < oldIndex) {\r\n                            prevCarousel(nextBlock, prevBlock);\r\n                        } else {\r\n                            nextCarousel(nextBlock, prevBlock);\r\n                        }\r\n                    }\r\n                } else {\r\n                    prevBlock.addClass('animated').removeClass('pip-show');\r\n                    nextBlock.addClass('animated').addClass('pip-show');\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderButton', []);\r\n\r\n    thisModule.directive('pipSliderButton',\r\n        function () {\r\n            return {\r\n                scope: {},\r\n                controller: function ($scope, $element, $parse, $attrs, $pipImageSlider) {\r\n                    var type = $parse($attrs.pipButtonType)($scope),\r\n                        sliderId = $parse($attrs.pipSliderId)($scope);\r\n\r\n                    $element.on('click', function () {\r\n                        if (!sliderId || !type) {\r\n                            return;\r\n                        }\r\n\r\n                        $pipImageSlider.getSliderScope(sliderId)[type + 'Block']();\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSliderIndicator', []);\r\n\r\n    thisModule.directive('pipSliderIndicator',\r\n        function () {\r\n            return {\r\n                scope: false,\r\n                controller: function ($scope, $element, $parse, $attrs, $pipImageSlider) {\r\n                    var sliderId = $parse($attrs.pipSliderId)($scope),\r\n                        slideTo = $parse($attrs.pipSlideTo)($scope);\r\n\r\n                    $element.css('cursor', 'pointer');\r\n                    $element.on('click', function () {\r\n                        if (!sliderId || slideTo && slideTo < 0) {\r\n                            return;\r\n                        }\r\n\r\n                        $pipImageSlider.getSliderScope(sliderId).slideTo(slideTo);\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\ndeclare var marked: any;\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipMarkdown', ['ngSanitize']);\r\n\r\n    thisModule.run(function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n        if (pipTranslate) {\r\n            pipTranslate.setTranslations('en', {\r\n                'MARKDOWN_ATTACHMENTS': 'Attachments:',\r\n                'checklist': 'Checklist',\r\n                'documents': 'Documents',\r\n                'pictures': 'Pictures',\r\n                'location': 'Location',\r\n                'time': 'Time'\r\n            });\r\n            pipTranslate.setTranslations('ru', {\r\n                'MARKDOWN_ATTACHMENTS': 'Вложения:',\r\n                'checklist': 'Список',\r\n                'documents': 'Документы',\r\n                'pictures': 'Изображения',\r\n                'location': 'Местонахождение',\r\n                'time': 'Время'\r\n            });\r\n        }\r\n    });\r\n\r\n    thisModule.directive('pipMarkdown',\r\n        function ($parse, $injector) {\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                link: function ($scope: any, $element, $attrs: any) {\r\n                    var\r\n                        textGetter = $parse($attrs.pipText),\r\n                        listGetter = $parse($attrs.pipList),\r\n                        clampGetter = $parse($attrs.pipLineCount);\r\n\r\n                    function describeAttachments(array) {\r\n                        var attachString = '',\r\n                            attachTypes = [];\r\n\r\n                        _.each(array, function (attach) {\r\n                            if (attach.type && attach.type !== 'text') {\r\n                                if (attachString.length === 0 && pipTranslate) {\r\n                                    attachString = pipTranslate.translate('MARKDOWN_ATTACHMENTS');\r\n                                }\r\n\r\n                                if (attachTypes.indexOf(attach.type) < 0) {\r\n                                    attachTypes.push(attach.type);\r\n                                    attachString += attachTypes.length > 1 ? ', ' : ' ';\r\n                                    if (pipTranslate)\r\n                                        attachString += pipTranslate.translate(attach.type);\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        return attachString;\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    function bindText(value) {\r\n                        var textString, isClamped, height, options, obj;\r\n\r\n                        if (_.isArray(value)) {\r\n                            obj = _.find(value, function (item: any) {\r\n                                return item.type === 'text' && item.text;\r\n                            });\r\n\r\n                            textString = obj ? obj.text : describeAttachments(value);\r\n                        } else {\r\n                            textString = value;\r\n                        }\r\n\r\n                        isClamped = $attrs.pipLineCount && _.isNumber(clampGetter());\r\n                        isClamped = isClamped && textString && textString.length > 0;\r\n                        options = {\r\n                            gfm: true,\r\n                            tables: true,\r\n                            breaks: true,\r\n                            sanitize: true,\r\n                            pedantic: true,\r\n                            smartLists: true,\r\n                            smartypents: false\r\n                        };\r\n                        textString = marked(textString || '', options);\r\n                        if (isClamped) {\r\n                            height = 1.5 * clampGetter();\r\n                        }\r\n                        // Assign value as HTML\r\n                        $element.html('<div' + (isClamped ? listGetter() ? 'class=\"pip-markdown-content ' +\r\n                            'pip-markdown-list\" style=\"max-height: ' + height + 'em\">'\r\n                                : ' class=\"pip-markdown-content\" style=\"max-height: ' + height + 'em\">' : listGetter()\r\n                                ? ' class=\"pip-markdown-list\">' : '>') + textString + '</div>');\r\n                        $element.find('a').attr('target', 'blank');\r\n                        if (!listGetter() && isClamped) {\r\n                            $element.append('<div class=\"pip-gradient-block\"></div>');\r\n                        }\r\n                    }\r\n\r\n                    // Fill the text\r\n                    bindText(textGetter($scope));\r\n\r\n                    // Also optimization to avoid watch if it is unnecessary\r\n                    if (toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch(textGetter, function (newValue) {\r\n                            bindText(newValue);\r\n                        });\r\n                    }\r\n\r\n                    $scope.$on('pipWindowResized', function () {\r\n                        bindText(textGetter($scope));\r\n                    });\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-markdown');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPopover', ['pipPopover.Service']);\r\n\r\n    thisModule.directive('pipPopover', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: true,\r\n            templateUrl: 'popover/popover.html',\r\n            controller: function ($scope, $rootScope, $element, $timeout, $compile) {\r\n                var backdropElement, content;\r\n\r\n                backdropElement = $('.pip-popover-backdrop');\r\n                backdropElement.on('click keydown scroll', backdropClick);\r\n                backdropElement.addClass($scope.params.responsive !== false ? 'pip-responsive' : '');\r\n\r\n                $timeout(function () {\r\n                    position();\r\n                    if ($scope.params.template) {\r\n                        content = $compile($scope.params.template)($scope);\r\n                        $element.find('.pip-popover').append(content);\r\n                    }\r\n\r\n                    init();\r\n                });\r\n\r\n                $timeout(function () {\r\n                    calcHeight();\r\n                }, 200);\r\n\r\n                $scope.onPopoverClick = onPopoverClick;\r\n                $scope = _.defaults($scope, $scope.$parent);    // eslint-disable-line \r\n\r\n                $rootScope.$on('pipPopoverResize', onResize);\r\n                $(window).resize(onResize);\r\n\r\n                function init() {\r\n                    backdropElement.addClass('opened');\r\n                    $('.pip-popover-backdrop').focus();\r\n                    if ($scope.params.timeout) {\r\n                        $timeout(function () {\r\n                            closePopover();\r\n                        }, $scope.params.timeout);\r\n                    }\r\n                }\r\n\r\n                function backdropClick() {\r\n                    if ($scope.params.cancelCallback) {\r\n                        $scope.params.cancelCallback();\r\n                    }\r\n\r\n                    closePopover();\r\n                }\r\n\r\n                function closePopover() {\r\n                    backdropElement.removeClass('opened');\r\n                    $timeout(function () {\r\n                        backdropElement.remove();\r\n                    }, 100);\r\n                }\r\n\r\n                function onPopoverClick($e) {\r\n                    $e.stopPropagation();\r\n                }\r\n\r\n                function position() {\r\n                    if ($scope.params.element) {\r\n                        var element = $($scope.params.element),\r\n                            pos = element.offset(),\r\n                            width = element.width(),\r\n                            height = element.height(),\r\n                            docWidth = $(document).width(),\r\n                            docHeight = $(document).height(),\r\n                            popover = backdropElement.find('.pip-popover');\r\n\r\n                        if (pos) {\r\n                            popover\r\n                                .css('max-width', docWidth - (docWidth - pos.left))\r\n                                .css('max-height', docHeight - (pos.top + height) - 32, 0)\r\n                                .css('left', pos.left - popover.width() + width / 2)\r\n                                .css('top', pos.top + height + 16);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function calcHeight() {\r\n                    if ($scope.params.calcHeight === false) { return; }\r\n\r\n                    var popover = backdropElement.find('.pip-popover'),\r\n                        title = popover.find('.pip-title'),\r\n                        footer = popover.find('.pip-footer'),\r\n                        content = popover.find('.pip-content'),\r\n                        contentHeight = popover.height() - title.outerHeight(true) - footer.outerHeight(true);\r\n\r\n                    content.css('max-height', Math.max(contentHeight, 0) + 'px').css('box-sizing', 'border-box');\r\n                }\r\n\r\n                function onResize() {\r\n                    backdropElement.find('.pip-popover').find('.pip-content').css('max-height', '100%');\r\n                    position();\r\n                    calcHeight();\r\n                }\r\n            }\r\n        };\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPopover.Service', []);\r\n\r\n    thisModule.service('pipPopoverService',\r\n        function ($compile, $rootScope, $timeout) {\r\n            var popoverTemplate;\r\n\r\n            popoverTemplate = \"<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller'\" +\r\n                \" tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>\";\r\n\r\n            return {\r\n                show: onShow,\r\n                hide: onHide,\r\n                resize: onResize\r\n            };\r\n\r\n            function onShow(p) {\r\n                var element, scope, params, content;\r\n\r\n                element = $('body');\r\n                if (element.find('md-backdrop').length > 0) { return; }\r\n                onHide();\r\n                scope = $rootScope.$new();\r\n                params = p && _.isObject(p) ? p : {};\r\n                scope.params = params;\r\n                scope.locals = params.locals;\r\n                content = $compile(popoverTemplate)(scope);\r\n                element.append(content);\r\n            }\r\n\r\n            function onHide() {\r\n                var backdropElement = $('.pip-popover-backdrop');\r\n\r\n                backdropElement.removeClass('opened');\r\n                $timeout(function () {\r\n                    backdropElement.remove();\r\n                }, 100);\r\n            }\r\n\r\n            function onResize() {\r\n                $rootScope.$broadcast('pipPopoverResize');\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipRoutingProgress', ['ngMaterial']);\r\n\r\n    thisModule.directive('pipRoutingProgress', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            replace: true,\r\n            scope: {\r\n                    showProgress: '&',\r\n                    logoUrl: '@'\r\n                },\r\n            templateUrl: 'progress/routing_progress.html',\r\n            controller: 'pipRoutingProgressController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipRoutingProgressController',\r\n        function ($scope, $element, $attrs) {\r\n            var  image = $element.children('img');          \r\n\r\n            loadProgressImage();\r\n\r\n            return;\r\n\r\n            function loadProgressImage() {\r\n                if ($scope.logoUrl) {\r\n                    image.attr('src', $scope.logoUrl);\r\n                }\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipToasts', ['ngMaterial', 'pipControls.Translate']);\r\n\r\n    thisModule.controller('pipToastController',\r\n        function ($scope, $mdToast, toast, $injector) {\r\n            var pipErrorDetailsDialog = $injector.has('pipErrorDetailsDialog') \r\n                ? $injector.get('pipErrorDetailsDialog') : null;\r\n\r\n            // if (toast.type && sounds['toast_' + toast.type]) {\r\n            //     sounds['toast_' + toast.type].play();\r\n            // }\r\n\r\n            $scope.message = toast.message;\r\n            $scope.actions = toast.actions;\r\n            $scope.toast = toast;\r\n            \r\n            if (toast.actions.length === 0) {\r\n                $scope.actionLenght = 0;\r\n            } else if (toast.actions.length === 1) {\r\n                $scope.actionLenght = toast.actions[0].toString().length;\r\n            } else {\r\n                $scope.actionLenght = null;\r\n            }\r\n\r\n            $scope.showDetails = pipErrorDetailsDialog != null;\r\n            $scope.onDetails = function () {\r\n                $mdToast.hide();\r\n\r\n                if (pipErrorDetailsDialog) {\r\n                    pipErrorDetailsDialog.show(\r\n                        {\r\n                            error: $scope.toast.error,\r\n                            ok: 'Ok'\r\n                        },\r\n                        angular.noop,\r\n                        angular.noop\r\n                    );\r\n                }\r\n            };\r\n\r\n            $scope.onAction = function (action) {\r\n                $mdToast.hide(\r\n                    {\r\n                        action: action,\r\n                        id: toast.id,\r\n                        message: toast.message\r\n                    });\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.service('pipToasts',\r\n        function ($rootScope, $mdToast) {\r\n            var\r\n                SHOW_TIMEOUT = 20000,\r\n                SHOW_TIMEOUT_NOTIFICATIONS = 20000,\r\n                toasts = [],\r\n                currentToast,\r\n                sounds = {};\r\n\r\n            /** pre-load sounds for notifications */\r\n                // sounds['toast_error'] = ngAudio.load('sounds/fatal.mp3');\r\n                // sounds['toast_notification'] = ngAudio.load('sounds/error.mp3');\r\n                // sounds['toast_message'] = ngAudio.load('sounds/warning.mp3');\r\n\r\n                // Remove error toasts when page is changed\r\n            $rootScope.$on('$stateChangeSuccess', onStateChangeSuccess);\r\n            $rootScope.$on('pipSessionClosed', onClearToasts);\r\n            $rootScope.$on('pipIdentityChanged', onClearToasts);\r\n\r\n            return {\r\n                showNotification: showNotification,\r\n                showMessage: showMessage,\r\n                showError: showError,\r\n                hideAllToasts: hideAllToasts,\r\n                clearToasts: clearToasts,\r\n                removeToastsById: removeToastsById,\r\n                getToastById: getToastById\r\n            };\r\n\r\n            // Take the next from queue and show it\r\n            function showNextToast() {\r\n                var toast;\r\n\r\n                if (toasts.length > 0) {\r\n                    toast = toasts[0];\r\n                    toasts.splice(0, 1);\r\n                    showToast(toast);\r\n                }\r\n            }\r\n\r\n            // Show toast\r\n            function showToast(toast) {\r\n                currentToast = toast;\r\n\r\n                $mdToast.show({\r\n                    templateUrl: 'toast/toast.html',\r\n                    hideDelay: toast.duration || SHOW_TIMEOUT,\r\n                    position: 'bottom left',\r\n                    controller: 'pipToastController',\r\n                    locals: {\r\n                        toast: currentToast,\r\n                        sounds: sounds\r\n                    }\r\n                })\r\n                    .then(\r\n                    function showToastOkResult(action) {\r\n                        if (currentToast.successCallback) {\r\n                            currentToast.successCallback(action);\r\n                        }\r\n                        currentToast = null;\r\n                        showNextToast();\r\n                    },\r\n                    function showToastCancelResult(action) {\r\n                        if (currentToast.cancelCallback) {\r\n                            currentToast.cancelCallback(action);\r\n                        }\r\n                        currentToast = null;\r\n                        showNextToast();\r\n                    }\r\n                );\r\n            }\r\n\r\n            function addToast(toast) {\r\n                if (currentToast && toast.type !== 'error') {\r\n                    toasts.push(toast);\r\n                } else {\r\n                    showToast(toast);\r\n                }\r\n            }\r\n\r\n            function removeToasts(type) {\r\n                var result = [];\r\n\r\n                _.each(toasts, function (toast) {\r\n                    if (!toast.type || toast.type !== type) {\r\n                        result.push(toast);\r\n                    }\r\n                });\r\n                toasts = _.cloneDeep(result);\r\n            }\r\n\r\n            function removeToastsById(id) {\r\n                _.remove(toasts, {id: id});\r\n            }\r\n\r\n            function getToastById(id) {\r\n                return _.find(toasts, {id: id});\r\n            }\r\n\r\n            function onStateChangeSuccess() {\r\n                toasts = _.reject(toasts, function (toast) {\r\n                    return toast.type === 'error';\r\n                });\r\n\r\n                if (currentToast && currentToast.type === 'error') {\r\n                    $mdToast.cancel();\r\n                    showNextToast();\r\n                }\r\n            }\r\n\r\n            function onClearToasts() {\r\n                clearToasts();\r\n            }\r\n\r\n            // Show new notification toast at the top right\r\n            function showNotification(message, actions, successCallback, cancelCallback, id) {\r\n                // pipAssert.isDef(message, 'pipToasts.showNotification: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showNotification: message should be a string');\r\n                // pipAssert.isArray(actions || [], 'pipToasts.showNotification: actions should be an array');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'showNotification: successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'showNotification: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    type: 'notification',\r\n                    message: message,\r\n                    actions: actions || ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback,\r\n                    duration: SHOW_TIMEOUT_NOTIFICATIONS\r\n                });\r\n            }\r\n\r\n            // Show new message toast at the top right\r\n            function showMessage(message, successCallback, cancelCallback, id) {\r\n                // pipAssert.isDef(message, 'pipToasts.showMessage: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showMessage: message should be a string');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'pipToasts.showMessage:successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'pipToasts.showMessage: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    type: 'message',\r\n                    message: message,\r\n                    actions: ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback\r\n                });\r\n            }\r\n\r\n            // Show error toast at the bottom right after error occured\r\n            function showError(message, successCallback, cancelCallback, id, error) {\r\n                // pipAssert.isDef(message, 'pipToasts.showError: message should be defined');\r\n                // pipAssert.isString(message, 'pipToasts.showError: message should be a string');\r\n                // if (successCallback) {\r\n                //     pipAssert.isFunction(successCallback, 'pipToasts.showError: successCallback should be a function');\r\n                // }\r\n                // if (cancelCallback) {\r\n                //     pipAssert.isFunction(cancelCallback, 'pipToasts.showError: cancelCallback should be a function');\r\n                // }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    error: error,\r\n                    type: 'error',\r\n                    message: message,\r\n                    actions: ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback\r\n                });\r\n            }\r\n\r\n            // Hide and clear all toast when user signs out\r\n            function hideAllToasts() {\r\n                $mdToast.cancel();\r\n                toasts = [];\r\n            }\r\n\r\n            // Clear toasts by type\r\n            function clearToasts(type?: any) {\r\n                if (type) {\r\n                    // pipAssert.isString(type, 'pipToasts.clearToasts: type should be a string');\r\n                    removeToasts(type);\r\n                } else {\r\n                    $mdToast.cancel();\r\n                    toasts = [];\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","<div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{'bg-' + pipType + '-chips'}}\"\r\n     ng-if=\"pipType && !pipTypeLocal\">\r\n\r\n    <span>{{pipType.toUpperCase() | translate | uppercase}}</span>\r\n</div>\r\n<div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{'bg-' + pipType + '-chips'}}\"\r\n     ng-if=\"pipType && pipTypeLocal\">\r\n\r\n    <span>{{pipTypeLocal.toUpperCase() | translate | uppercase}}</span>\r\n</div>\r\n<div class=\"pip-chip rm4\" ng-repeat=\"tag in pipTags\">\r\n    <span>{{::tag}}</span>\r\n</div>","/**\r\n * @file Registration of all WebUI list controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipLists', [\r\n\t    'pipTagList'\r\n    ]);\r\n    \r\n})();","/**\r\n * @file Tag list control\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n * @todo\r\n * - Improve samples in sampler app\r\n * - What's pipType and pipTypeLocal? Give better name\r\n * - Do not use ng-if, instead generate template statically\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTagList', ['pipList.Translate']);\r\n\r\n    /**\r\n     * pipTags - set of tags\r\n     * pipType - additional type tag\r\n     * pipTypeLocal - additional translated type tag\r\n     */\r\n    thisModule.directive('pipTagList',\r\n        function ($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipTags: '=',\r\n                    pipType: '=',\r\n                    pipTypeLocal: '='\r\n                },\r\n                templateUrl: 'tag_list/tag_list.html',\r\n                controller: function ($scope, $element, $attrs) {\r\n                    var tagsGetter;\r\n\r\n                    tagsGetter = $parse($attrs.pipTags);\r\n                    $element.css('display', 'block');\r\n                    // Set tags\r\n                    $scope.tags = tagsGetter($scope);\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    // Also optimization to avoid watch if it is unnecessary\r\n                    if (toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch(tagsGetter, function () {\r\n                            $scope.tags = tagsGetter($scope);\r\n                        });\r\n                    }\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-tag-list');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","<!--\r\n@file Date control content\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<div class=\"pip-date layout-row flex\" tabindex=\"-1\">\r\n\t<md-input-container class=\"input-container flex\">\r\n\t\t<md-select class=\"pip-date-day flex\" ng-disabled=\"disableControls\"\r\n\t\t\t\t   ng-model=\"day\" placeholder=\"{{dayLabel}}\" ng-change=\"onDayChanged()\">\r\n\t\t\t<md-option ng-value=\"opt\" ng-repeat=\"opt in days track by opt\">{{:: opt }}</md-option>\r\n\t\t</md-select>\r\n\t</md-input-container>\r\n\t<div class=\"input-container-separator flex-fixed\"></div>\r\n\t<md-input-container class=\"input-container flex\">\r\n\t\t<md-select class=\"pip-date-monthflex\" ng-disabled=\"disableControls\"\r\n\t\t\t\t   ng-model=\"month\" placeholder=\"{{monthLabel}}\" ng-change=\"onMonthChanged()\">\r\n\t\t\t<md-option ng-value=\"opt.id\" ng-repeat=\"opt in months track by opt.id\">{{:: opt.name }}</md-option>\r\n\t\t</md-select>\r\n\t</md-input-container>\r\n\t<div class=\"input-container-separator flex-fixed\"></div>\r\n\t<md-input-container class=\"input-container flex\">\r\n\t\t<md-select class=\"pip-date-year flex\" ng-disabled=\"disableControls\"\r\n\t\t\t\t   ng-model=\"year\" placeholder=\"{{yearLabel}}\" ng-change=\"onYearChanged()\">\r\n\t\t\t<md-option ng-value=\"opt\" ng-repeat=\"opt in years track by opt\">{{:: opt }}</md-option>\r\n\t\t</md-select>\r\n\t</md-input-container>\r\n</div>\r\n\t\t\t\t\t","<!--\r\n@file Date range control content\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<div class=\"pip-date-range layout-row flex\" tabindex=\"-1\">\r\n    <md-input-container ng-show=\"isDay()\" class=\"input-container pip-day flex\"\r\n            ng-class=\"{'flex-fixed' : $mdMedia('gt-xs')}\">\r\n        <md-select class=\"select-day\"\r\n                   ng-class=\"{'pip-no-line' : pipNoLine}\"\r\n                   ng-disable=\"{{disableControls}}\"\r\n                   md-on-open=\"onDayClick()\"\r\n                   ng-model=\"day\"\r\n                   ng-change=\"onDayChanged()\"\r\n                   placeholder=\"{{dayLabel}}\"\r\n                   aria-label=\"DAY\">\r\n\r\n            <md-option ng-value=\"opt\" ng-repeat=\"opt in days track by opt \">\r\n               {{nameDays[$index]}} {{ opt }}\r\n            </md-option>\r\n        </md-select>\r\n    </md-input-container>\r\n    <md-input-container ng-show=\"isWeek()\" class=\"input-container flex\"\r\n                        ng-class=\"{'flex-fixed' : $mdMedia('gt-xs')}\">\r\n        <md-select class=\"select-week\"\r\n                   ng-class=\"{'pip-no-line' : pipNoLine}\"\r\n                   ng-disable=\"{{disableControls}}\"\r\n                   ng-model=\"week\"\r\n                   ng-change=\"onWeekChange()\"\r\n                   placeholder=\"{{weekLabel}}\"\r\n                   aria-label=\"WEEK\">\r\n\r\n            <md-option ng-value=\"opt.id\" ng-repeat=\"opt in weeks track by opt.id\">\r\n                {{ opt.name }}\r\n            </md-option>\r\n        </md-select>\r\n    </md-input-container >\r\n    <div class=\"flex-fixed\"\r\n         ng-class=\"{'space16': $mdMedia('gt-xs'), 'space8':  $mdMedia('xs')}\"\r\n         ng-show=\"isDay() || isWeek()\">\r\n    </div>\r\n    <md-input-container ng-show=\"isMonth() && !monthFormatShort \" class=\"input-container flex\"\r\n                        ng-class=\"{'flex-fixed' : $mdMedia('gt-xs')}\">\r\n        <md-select class=\"select-month\"\r\n                   ng-class=\"{'pip-no-line' : pipNoLine}\"\r\n                   ng-disable=\"{{disableControls}}\"\r\n                   md-on-open=\"onMonthClick()\"\r\n                   ng-model=\"month\"\r\n                   ng-change=\"onMonthChanged()\"\r\n                   placeholder=\"{{monthLabel}}\"\r\n                   aria-label=\"MONTH\">\r\n\r\n            <md-option ng-value=\"opt.id\" ng-repeat=\"opt in months track by opt.id\">\r\n                {{ opt.name }}\r\n            </md-option>\r\n        </md-select>\r\n    </md-input-container>\r\n    <md-input-container ng-show=\"isMonth() && monthFormatShort\" class=\"flex input-container\"\r\n                        ng-class=\"{'flex-fixed' : $mdMedia('gt-xs')}\">\r\n        <md-select class=\"select-month\"\r\n                   ng-class=\"{'pip-no-line' : pipNoLine}\"\r\n                   ng-disable=\"{{disableControls}}\"\r\n                   md-on-open=\"onMonthClick()\"\r\n                   ng-model=\"month\"\r\n                   ng-change=\"onMonthChanged()\"\r\n                   placeholder=\"{{monthLabel}}\"\r\n                   aria-label=\"MONTH\">\r\n\r\n            <md-option ng-value=\"opt.id\" ng-repeat=\"opt in shortMonths track by opt.id\">\r\n                {{ opt.name }}\r\n            </md-option>\r\n        </md-select>\r\n    </md-input-container>\r\n    <div class=\"flex-fixed\"\r\n         ng-class=\"{'space16': $mdMedia('gt-xs'), 'space8':  $mdMedia('xs')}\"\r\n         ng-show=\"isMonth()\">\r\n    </div>\r\n    <md-input-container class=\"input-container flex\"\r\n                        ng-class=\"{'flex-fixed' : $mdMedia('gt-xs')}\">\r\n        <md-select class=\"select-year\"\r\n                   ng-class=\"{'pip-no-line' : pipNoLine}\"\r\n                   ng-disable=\"{{disableControls}}\"\r\n                   md-on-open=\"onYearClick()\"\r\n                   ng-model=\"year\"\r\n                   ng-change=\"onYearChanged()\"\r\n                   placeholder=\"{{yearLabel}}\"\r\n                   aria-label=\"YEAR\">\r\n\r\n            <md-option ng-value=\"opt\" ng-repeat=\"opt in years track by opt\">\r\n                {{ opt }}\r\n            </md-option>\r\n        </md-select>\r\n    </md-input-container>\r\n</div>","<p>\r\n    <span ng-if=\"data.start != null\">{{data.start | formatShortDateTime}}</span>\r\n    <span  class=\"separator\" ng-if=\"data.start && data.end\"> - </span>\r\n    <span ng-if=\"data.end != null\">{{data.end | formatShortDateTime}}</span>\r\n</p>","<!--\r\n@file Time edit control content\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<div class=\"event-edit layout-row layout-xs-column flex layout-align-start-start\">\r\n    <div flex=\"47\" class=\"start-time-container \">\r\n        <p class=\"text-caption text-grey\">{{startLabel}}</p>\r\n\r\n        <div class=\"layout-row layout-align-space-between-center\">\r\n            <div class=\"pip-datepicker-container\" flex=\"49\">\r\n                <md-datepicker ng-model=\"data.startDate\"\r\n                               xmd-placeholder=\"{{startLabel}}\"\r\n                               ng-change=\"onChangeStartDate()\"\r\n                               ng-disabled=\"isDisabled()\"\r\n                               aria-label=\"START-DATE\">\r\n                </md-datepicker>\r\n            </div>\r\n            <div flex>\r\n                <md-input-container class=\"input-container\">\r\n                    <md-select aria-label=\"START-TIME\" ng-model=\"data.startTime\" ng-disabled=\"isDisabled()\"\r\n                               ng-change=\"onChangeStartTime()\">\r\n                        <md-option ng-value=\"opt.id\" ng-repeat=\"opt in intervalTimeCollection track by opt.id\">{{ opt.time }}\r\n                        </md-option>\r\n                    </md-select>\r\n                </md-input-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div flex=\"47\" class=\"end-time-container\">\r\n        <p class=\"text-caption text-grey\">{{endLabel}}</p>\r\n\r\n        <div class=\"layout-row layout-align-space-between-center\">\r\n            <div class=\"pip-datepicker-container flex-49\">\r\n                <md-datepicker ng-model=\"data.endDate\"\r\n                               xmd-placeholder=\"{{endLabel}}\"\r\n                               ng-disabled=\"isDisabled()\"\r\n                               ng-change=\"onChangeEndDate()\"\r\n                               aria-label=\"END-DATE\">\r\n                </md-datepicker>\r\n            </div>\r\n            <div flex>\r\n                <md-input-container class=\"input-container\">\r\n                    <md-select aria-label=\"END-TIME\" ng-model=\"data.endTime\" ng-change=\"onChangeEndTime()\"\r\n                               ng-disabled=\"isDisabled()\">\r\n                        <md-option ng-value=\"opt.id\" ng-repeat=\"opt in intervalTimeCollection track by opt.id\">{{\r\n                            opt.time }}\r\n                        </md-option>\r\n                    </md-select>\r\n                </md-input-container>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","/**\r\n * @file Optional filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDates.Translate', []);\r\n\r\n    thisModule.filter('translate', ['$injector', function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') \r\n            ? $injector.get('pipTranslate') : null;\r\n\r\n        return function (key) {\r\n            return pipTranslate  ? pipTranslate.translate(key) || key : key;\r\n        }\r\n    }]);\r\n\r\n})();\r\n","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipDates', [\r\n        'pipDate',\r\n        'pipTimeRange',\r\n        'pipDateTime',\r\n        'pipTimeRangeEdit',\r\n        'pipDateRange',\r\n        'pipDates.Translate'\r\n    ]);\r\n    \r\n})();\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.datetime {\r\n    'use strict';\r\n\r\n    angular.module('pipDateTime', [\r\n        'pipDateTime.Service', 'pipDateTime.Filter'\r\n    ]);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.datetime {\r\n    'use strict';\r\n\r\n    function formatTimeFilter(pipDateTime: any) {\r\n        \"ngInject\";\r\n\r\n        return function (value: any, format: string): string {\r\n            return pipDateTime.formatTime(value, format);\r\n        }\r\n    }\r\n\r\n    function formatDateOptionalFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any, format: string): string {\r\n            return pipDateTime.formatDateOptional(value, format);\r\n        }\r\n    }\r\n\r\n    function formatLongDateFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongDate(value);\r\n        }\r\n    }\r\n\r\n    function formatShortDateFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatShortDate(value);\r\n        }\r\n    }\r\n\r\n    function formatMonthFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any) {\r\n            return pipDateTime.formatMonth(value);\r\n        }\r\n    }\r\n\r\n    function formatLongMonthFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongMonth(value);\r\n        }\r\n    }\r\n\r\n    function formatYearFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatYear(value);\r\n        }\r\n    }\r\n\r\n    function formatWeekFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatWeek(value);\r\n        }\r\n    }\r\n\r\n    function formatShortWeekFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatShortWeek(value);\r\n        }\r\n    }\r\n\r\n    function formatShortDateTimeFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatShortDateTime(value);\r\n        }\r\n    }\r\n\r\n    function formatLongDateTimeFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongDateTime(value);\r\n        }\r\n    }\r\n\r\n    function formatShortTimeFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatShortTime(value);\r\n        }\r\n    }\r\n\r\n    function formatLongTimeFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongTime(value);\r\n        }\r\n    }\r\n\r\n    function formatShortDayOfWeekFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatShortDayOfWeek(value);\r\n        }\r\n    }\r\n\r\n    function formatLongDayOfWeekFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongDayOfWeek(value);\r\n        }\r\n    }\r\n\r\n    function formatDateNumberFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatDateNumber(value);\r\n        }\r\n    }\r\n\r\n    function formatLongDateNumberFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongDateNumber(value);\r\n        }\r\n    }\r\n\r\n    function formatTimeNumberFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatTimeNumber(value);\r\n        }\r\n    }\r\n\r\n    function formatLongTimeNumberFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongTimeNumber(value);\r\n        }\r\n    }\r\n\r\n    function formatLongMonthDayFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongMonthDay(value);\r\n        }\r\n    }\r\n\r\n    function formatShortMonthDayFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatShortMonthDay(value);\r\n        }\r\n    }\r\n\r\n    function formatDateRangeFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value1: any, value2: any): string {\r\n            return pipDateTime.formatDateRange(value1, value2);\r\n        }\r\n    }\r\n\r\n    function formatDateTimeRangeFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value1: any, value2: any): string {\r\n            return pipDateTime.formatDateTimeRange(value1, value2);\r\n        }\r\n    }\r\n\r\n    function formatISOWeekFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatISOWeek(value);\r\n        }\r\n    }\r\n\r\n    function formatShortISOWeekFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatShortISOWeek(value);\r\n        }\r\n    }\r\n\r\n    function formatISOWeekOrdinalFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatISOWeekOrdinal(value);\r\n        }\r\n    }\r\n\r\n    function formatDateYFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatDateY(value);\r\n        }\r\n    }\r\n\r\n    function formatLongDateYFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatLongDateY(value);\r\n        }\r\n    }\r\n\r\n    function formatMillisecondsToSecondsFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.formatMillisecondsToSeconds(value);\r\n        }\r\n    }\r\n\r\n    function formatElapsedIntervalFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any, start: any): string {\r\n            return pipDateTime.formatElapsedInterval(value, start);\r\n        }\r\n    }\r\n\r\n    function getDateJSONFilter(pipDateTime: any) {\r\n        \"ngInject\";  \r\n\r\n        return function (value: any): string {\r\n            return pipDateTime.getDateJSON(value);\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipDateTime.Filter', [])\r\n        .filter('formatTime', formatTimeFilter)\r\n        .filter('formatDateOptional', formatDateOptionalFilter)\r\n        .filter('formatShortDate', formatShortDateFilter)\r\n        .filter('formatLongDate', formatLongDateFilter)\r\n        .filter('formatMonth', formatMonthFilter)\r\n        .filter('formatLongMonth', formatLongMonthFilter)\r\n        .filter('formatYear', formatYearFilter)\r\n        .filter('formatWeek', formatWeekFilter)\r\n        .filter('formatShortWeek', formatShortWeekFilter)\r\n        .filter('formatShortDateTime', formatShortDateTimeFilter)\r\n        .filter('formatLongDateTime', formatLongDateTimeFilter)\r\n        .filter('formatShortTime', formatShortTimeFilter)\r\n        .filter('formatLongTime', formatLongTimeFilter)\r\n        .filter('formatShortDayOfWeek', formatShortDayOfWeekFilter)\r\n        .filter('formatLongDayOfWeek', formatLongDayOfWeekFilter)\r\n        .filter('formatDateNumber', formatDateNumberFilter)\r\n        .filter('formatLongDateNumber', formatLongDateNumberFilter)\r\n        .filter('formatTimeNumber', formatTimeNumberFilter)\r\n        .filter('formatLongTimeNumber', formatLongTimeNumberFilter)\r\n        .filter('formatLongMonthDay', formatLongMonthDayFilter)\r\n        .filter('formatShortMonthDay', formatShortMonthDayFilter)\r\n        .filter('formatDateRange', formatDateRangeFilter)\r\n        .filter('formatDateTimeRange', formatDateTimeRangeFilter)\r\n        .filter('formatISOWeek', formatISOWeekFilter)\r\n        .filter('formatShortISOWeek', formatShortISOWeekFilter)\r\n        .filter('formatISOWeekOrdinal', formatISOWeekOrdinalFilter)\r\n        .filter('formatDateY', formatDateYFilter)\r\n        .filter('formatLongDateY', formatLongDateYFilter)\r\n        .filter('formatMillisecondsToSeconds', formatMillisecondsToSecondsFilter)\r\n        .filter('formatElapsedInterval', formatElapsedIntervalFilter);\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.datetime {\r\n    'use strict';\r\n\r\n    export interface IDateTimeService {\r\n        formatTime(value: any, format: string): string;\r\n        formatDateOptional(value: any, format: string): string;\r\n        formatShortDate(value: any): string;\r\n        formatLongDate(value: any): string;\r\n        formatMonth(value: any): string;\r\n        formatLongMonth(value: any): string;\r\n        formatYear(value: any): string;\r\n        formatWeek(value: any): string;\r\n        formatShortWeek(value: any): string;\r\n        formatShortDateTime(value: any): string;\r\n        formatLongDateTime(value: any): string;\r\n        formatShortTime(value: any): string;\r\n        formatLongTime(value: any): string;\r\n        formatShortDayOfWeek(value: any): string;\r\n        formatLongDayOfWeek(value: any): string;\r\n        formatDateNumber(value: any): string;\r\n        formatLongDateNumber(value: any): string;\r\n        formatTimeNumber(value: any): string;\r\n        formatLongTimeNumber(value: any): string;\r\n        formatLongMonthDay(value: any): string;\r\n        formatShortMonthDay(value: any): string;\r\n        formatDateRange(value1: any, value2: any): string;\r\n        formatDateTimeRange(value1: any, value2: any): string;\r\n        formatISOWeek(value: any): string;\r\n        formatShortISOWeek(value: any): string;\r\n        formatISOWeekOrdinal(value: any): string;\r\n        formatDateY(value: any): string;\r\n        formatLongDateY(value: any): string;\r\n        formatMillisecondsToSeconds(value: any): string;\r\n        formatElapsedInterval(value: any, start: any): string;\r\n        getDateJSON(date: any): string;\r\n        getNextStart(value: any, category: string): any;\r\n        getPrevStart(value: any, category: string): any;\r\n        getNowStart(category: string): any;\r\n        addHours(value: any, hours: number): any;\r\n        toStartDay(value: any): any;\r\n        toEndDay(value: any, offset: number): any;\r\n        toStartWeek(value: any): any;\r\n        toEndWeek(value: any, offset: number): any;\r\n        toStartMonth(value: any): any;\r\n        toEndMonth(value: any, offset: number): any;\r\n        toStartYear(value: any): any;\r\n        toEndYear(value: any, offset: number): any;\r\n\r\n    }    \r\n\r\n    export interface IDateTimeProvider extends IDateTimeService, ng.IServiceProvider {\r\n\r\n    }    \r\n\r\n    class DateTime implements IDateTimeService{\r\n        protected _momentRanged = new Array('year','month','week','isoweek', 'day');\r\n        protected _defaultFormat = 'LL'\r\n\r\n        private isUndefinedOrNull(value: any): boolean {\r\n            return angular.isUndefined(value) || value === null;\r\n        }\r\n\r\n        private getRange(value: string): string {\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return 'day';\r\n            }\r\n\r\n            let index = this._momentRanged.indexOf(value)\r\n\r\n            if (index < 0) {\r\n                return 'day'\r\n            } else {\r\n                return this._momentRanged[index];\r\n            }\r\n        }\r\n\r\n        private getOperationRange(value: string): string {\r\n            if (this.isUndefinedOrNull(value)) {\r\n                return 'day';\r\n            }\r\n\r\n            let range = value == 'isoweek' ? 'week' : value,\r\n                index = this._momentRanged.indexOf(range)\r\n\r\n            if (index < 0) {\r\n                return 'day'\r\n            } else {\r\n                return this._momentRanged[index];\r\n            }\r\n        }\r\n\r\n        private formatDateTime(value: any, basicFormat: string): string {\r\n            var date: any,\r\n                formatTpl: string;\r\n            \r\n             if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\r\n\t\t\tdate = moment(value);\r\n\t\t\tif (!date.isValid()) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\r\n           formatTpl = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n            return date.format(formatTpl);\r\n        }\r\n\r\n        private formatDateTimeY(value: any, basicFormat: string): string {\r\n            var date: any,\r\n                nowDate: any,\r\n                formatMoment: string;\r\n            \r\n            if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\r\n\t\t\tdate = moment(value);\r\n\t\t\tif (!date.isValid()) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\r\n            nowDate = moment();\r\n            formatMoment = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat);\r\n\r\n            if (nowDate.year() == date.year()) {\r\n                formatMoment = formatMoment.replace(/Y/g,'').replace(/^\\W|\\W$|\\W\\W/,'');\r\n            }\r\n\r\n            return date.format(formatMoment);\r\n        }\r\n\r\n            private formatDay(value: any, basicFormat: string): string {\r\n                var date: any,\r\n                    format = moment.localeData().longDateFormat(basicFormat ? basicFormat : this._defaultFormat),\r\n                    formatMonthYearless = format.replace(/Y/g,'').replace(/^\\W|\\W$|\\W\\W/,'').replace(/M/g,'');\r\n\r\n                if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdate = moment(value);\r\n\r\n                return date.format(formatMonthYearless);\r\n            }\r\n\r\n            private formatMonthDay(value: any, basicFormat: string): string {\r\n                var date: any,\r\n                    format = basicFormat ? basicFormat : this._defaultFormat,\r\n                    formatLL = moment.localeData().longDateFormat(format),\r\n                    formatYearlessLL = formatLL.replace(/Y/g,'').replace(/^\\W|\\W$|\\W\\W/,'');\r\n\r\n                if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdate = moment(value);\r\n\r\n                return date.format(formatYearlessLL);\r\n            }\r\n\r\n            private formatRange(value1: any, value2: any, basicFormat: string): string {\r\n                var dateStart: any, \r\n                    dateEnd: any,\r\n                    format = basicFormat ? basicFormat : this._defaultFormat;\r\n\r\n                if (this.isUndefinedOrNull(value1)) { \r\n                    dateStart = null;\r\n                } else { \r\n                    dateStart = moment(value1);\r\n                }\r\n                if (this.isUndefinedOrNull(value2)) {\r\n\t\t\t\t\tdateEnd = null;\r\n\t\t\t\t} else { \r\n                    dateEnd = moment(value2);\r\n                }\r\n\r\n                if (dateStart === null && dateEnd === null) return '';\r\n\r\n                if  (dateStart === null) {\r\n                    return dateEnd.format(basicFormat);\r\n                } else if (dateEnd === null || dateStart.isSame(dateEnd)) {\r\n                    return dateStart.format(basicFormat);;\r\n                }\r\n\r\n                if (dateStart.isAfter(dateEnd)) {\r\n                    // todo localization\r\n                    throw new Error('Date range error. Start date is more than end date.');\r\n                }\r\n\r\n                if (dateStart.year() == dateEnd.year()) {\r\n                    if (dateStart.month() == dateEnd.month()) {\r\n                        return this.formatDay(dateStart, basicFormat) + '-' + dateEnd.format(basicFormat);\r\n                    } else {\r\n                        return this.formatMonthDay(dateStart, basicFormat) + '-' + dateEnd.format(basicFormat);\r\n                    }\r\n                } else {\r\n                    return dateStart.format(basicFormat) + '-' + dateEnd.format(basicFormat);\r\n                }                \r\n            }\r\n\r\n        private toStartRange(value: any, range: string): any {\r\n            var date: any;\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\r\n\t\t\tdate = moment(value);\r\n\t\t\tif (!date.isValid()) {\r\n\t\t\t\treturn '';\r\n\t\t\t}       \r\n\r\n            return date.startOf(range).toDate();    \r\n        }\r\n\r\n        private toEndRange(value: any, range: string, offset: number): any {\r\n            var date: any, \r\n                result: any,\r\n                mssOffset: number;\r\n\r\n            if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\r\n            if (!angular.isNumber(offset)) {\r\n                mssOffset = 0;\r\n            }\r\n\r\n\t\t\tdate = moment(value);\r\n\t\t\tif (!date.isValid()) {\r\n\t\t\t\treturn '';\r\n\t\t\t}       \r\n\r\n            if (mssOffset) {\r\n                result = date.startOf(range).add(mssOffset, 'milliseconds');\r\n            } else {\r\n                result = date.startOf(range);\r\n            }\r\n\r\n            return date.startOf(range).toDate();    \r\n        }\r\n\r\n        public constructor() {};        \r\n\r\n        // formating functions \r\n        // -------------------\r\n\r\n        // todo Optional\r\n        public formatTime(value: any, format: string): string {\r\n            return this.formatDateTime(value, 'LLL');\r\n        }\r\n        // todo Optional\r\n        public formatDateOptional(value: any, format: string): string {\r\n            return this.formatDateTime(value, 'L');\r\n        }\r\n        \r\n        public formatShortDate(value: any): string {\r\n            return this.formatDateTime(value, 'L');\r\n        }\r\n\r\n        public formatLongDate(value: any): string {\r\n            return this.formatDateTime(value, 'LL');\r\n        }\r\n\r\n        public formatMonth(value: any): string {\r\n            return this.formatDateTime(value, 'MM');\r\n        }\r\n\r\n        public formatLongMonth(value: any): string {\r\n            return this.formatDateTime(value, 'MMMM');\r\n        }\r\n\r\n        public formatYear(value: any): string {\r\n            return this.formatDateTime(value, 'YYYY');\r\n        }\r\n\r\n        public formatWeek(value: any): string {\r\n            return this.formatDateTime(value, 'ww');\r\n        }\r\n\r\n        public formatShortWeek(value: any): string {\r\n            return this.formatDateTime(value, 'w');\r\n        }\r\n\r\n        public formatShortDateTime(value: any): string {\r\n            return this.formatDateTime(value, 'LLL');\r\n        }\r\n\r\n        public formatLongDateTime(value: any): string {\r\n            return this.formatDateTime(value, 'LLLL');\r\n        }\r\n\r\n        public formatShortTime(value: any): string {\r\n            return this.formatDateTime(value, 'LT');\r\n        }\r\n\r\n        public formatLongTime(value: any): string {\r\n            return this.formatDateTime(value, 'LTS');\r\n        }\r\n\r\n        public formatShortDayOfWeek(value: any): string {\r\n            return this.formatDateTime(value, 'dd');\r\n        }\r\n\r\n        public formatLongDayOfWeek(value: any): string {\r\n            return this.formatDateTime(value, 'dddd');\r\n        }\r\n\r\n        // numeric month writing formats\r\n        // --------------\r\n\r\n        // numeric month writing \r\n        public formatDateNumber(value: any): string {\r\n            return this.formatDateTime(value, 'l');\r\n        }\r\n        // numeric month writing \r\n        public formatLongDateNumber(value: any): string {\r\n            return this.formatDateTime(value, 'll');\r\n        }  \r\n\r\n        public formatTimeNumber(value: any): string {\r\n            return this.formatDateTime(value, 'LLL');\r\n        }\r\n\r\n        public formatLongTimeNumber(value: any): string {\r\n            return this.formatDateTime(value, 'LLLL');\r\n        }\r\n\r\n        public formatLongMonthDay(value: any): string {\r\n            return this.formatMonthDay(value, 'LL');\r\n        }\r\n\r\n        public formatShortMonthDay(value: any): string {\r\n            return this.formatMonthDay(value, 'L');        \r\n        }  \r\n\r\n        public formatDateRange(value1: any, value2: any): string {\r\n            return this.formatRange(value1, value2, 'LL');\r\n        } \r\n\r\n        public formatDateTimeRange(value1: any, value2: any): string {\r\n            return this.formatRange(value1, value2, 'LLL');\r\n        }    \r\n\r\n        // iso function\r\n        // --------------\r\n\r\n        public formatISOWeek(value: any): string {\r\n            return this.formatDateTime(value, 'WW');\r\n        }\r\n\r\n        public formatShortISOWeek(value: any): string {\r\n            return this.formatDateTime(value, 'W');\r\n        }\r\n\r\n        public formatISOWeekOrdinal(value: any): string {\r\n            return this.formatDateTime(value, 'Wo');\r\n        }        \r\n        // special formats \r\n        // --------------\r\n\r\n        // year option displays if the current year is not equal to, the date of \r\n        public formatDateY(value: any): string {\r\n            return this.formatDateTimeY(value, 'L');\r\n        }\r\n\r\n        // year option displays if the current year is not equal to, the date of\r\n        public formatLongDateY(value: any): string {\r\n            return this.formatDateTimeY(value, 'LL');\r\n        }\r\n\r\n        // todo\r\n        public formatMillisecondsToSeconds(value: any): string {\r\n            return '';\r\n        }\r\n\r\n        // todo\r\n        public formatElapsedInterval(value: any, start: any): string {\r\n            var date: any, \r\n                nowDate: any;\r\n            \r\n            if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n            if (this.isUndefinedOrNull(start)) {\r\n\t\t\t\tnowDate = moment();\r\n\t\t\t} else {\r\n                nowDate = moment(start);\r\n            }\r\n\r\n\t\t\tdate = moment(value);\r\n\t\t\tif (!date.isValid() || !nowDate.isValid()) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\r\n             return moment(date).fromNow(nowDate);           \r\n        }\r\n\r\n        public getDateJSON(date: any): string {\r\n            return JSON.stringify(moment(date));                \r\n        }\r\n\r\n        // navigation functions \r\n        // ------------------\r\n\r\n        public getNextStart(value: any, category: string): any {\r\n                var date: any, \r\n                    range: string, \r\n                    result: any;\r\n\r\n                if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdate = moment(value);\r\n\t\t\t\tif (!date.isValid()) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n                range = this.getRange(category);\r\n                result = moment(date).startOf(range).add(this.getOperationRange(range));\r\n\r\n                return result.toDate();\r\n            }\r\n\r\n            public getPrevStart(value: any, category: string): any {\r\n                var date: any, \r\n                    range: string, \r\n                    result: any;\r\n\r\n                if (this.isUndefinedOrNull(value)) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdate = moment(value);\r\n\t\t\t\tif (!date.isValid()) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n                range = this.getRange(category);\r\n                result = moment(date).startOf(range).add(-1, this.getOperationRange(range));\r\n\r\n                return result.toDate();\r\n            }\r\n\r\n            public getNowStart(category: string): any {\r\n                var date: any, \r\n                    range: string, \r\n                    result: any;\r\n\r\n\t\t\t\tdate = moment();\r\n\t\t\t\tif (!date.isValid()) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n                range = this.getRange(category) \r\n                result = moment(date).startOf(range);\r\n\r\n                return result.toDate();\r\n            }  \r\n\r\n            public addHours(value: any, hours: number): any {\r\n                var date: any;\r\n\r\n                if (this.isUndefinedOrNull(value) || !angular.isNumber(hours)) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdate = moment(value);\r\n\t\t\t\tif (!date.isValid()) {\r\n\t\t\t\t\treturn '';\r\n\t\t\t\t}\r\n\r\n                return date.add(hours, 'hours').toDate();\r\n            }  \r\n\r\n            public toStartDay(value: any): any {\r\n                return this.toStartRange(value, 'day');\r\n            }  \r\n\r\n            public toEndDay(value: any, offset: number): any {\r\n                return this.toEndRange(value, 'day', offset);\r\n            }  \r\n  \r\n            public toStartWeek(value: any): any {\r\n                return this.toStartRange(value, 'week');\r\n            }  \r\n\r\n            public toEndWeek(value: any, offset: number): any {\r\n                return this.toEndRange(value, 'week', offset);\r\n            }  \r\n\r\n            public toStartMonth(value: any): any {\r\n                return this.toStartRange(value, 'month');\r\n            }  \r\n\r\n            public toEndMonth(value: any, offset: number): any {\r\n                return this.toEndRange(value, 'month', offset);\r\n            }  \r\n\r\n            public toStartYear(value: any): any {\r\n                return this.toStartRange(value, 'year');\r\n            }  \r\n\r\n            public toEndYear(value: any, offset: number): any {\r\n                return this.toEndRange(value, 'year', offset);\r\n            }  \r\n\r\n    }\r\n\r\n    class DateTimeService {\r\n        private _datetime: DateTime;\r\n\r\n        public constructor(\r\n            datetime: DateTime,\r\n        ) {\r\n            this._datetime = datetime;\r\n        }\r\n\r\n        // todo Optional\r\n        public formatTime(value: any, format: string): string {\r\n            return this._datetime.formatTime(value, format);\r\n        }\r\n        // todo Optional\r\n        public formatDateOptional(value: any, format: string): string {\r\n            return this._datetime.formatDateOptional(value, format);\r\n        }\r\n\r\n        public formatShortDate(value: any): string {\r\n            return this._datetime.formatShortDate(value);\r\n        }\r\n\r\n        public formatLongDate(value: any): string {\r\n            return this._datetime.formatLongDate(value);\r\n        }\r\n\r\n        public formatMonth(value: any): string {\r\n            return this._datetime.formatMonth(value);\r\n        }\r\n\r\n        public formatLongMonth(value: any): string {\r\n            return this._datetime.formatLongMonth(value);\r\n        }\r\n\r\n        public formatYear(value: any): string {\r\n            return this._datetime.formatYear(value);\r\n        }\r\n\r\n        public formatWeek(value: any): string {\r\n            return this._datetime.formatWeek(value);\r\n        }\r\n\r\n        public formatShortWeek(value: any): string {\r\n            return this._datetime.formatShortWeek(value);\r\n        }\r\n\r\n        public formatShortDateTime(value: any): string {\r\n            return this._datetime.formatShortDateTime(value);\r\n        }\r\n\r\n        public formatLongDateTime(value: any): string {\r\n            return this._datetime.formatLongDateTime(value);\r\n        }\r\n\r\n        public formatShortTime(value: any): string {\r\n            return this._datetime.formatShortTime(value);\r\n        }\r\n\r\n        public formatLongTime(value: any): string {\r\n            return this._datetime.formatLongTime(value);\r\n        }\r\n\r\n        public formatShortDayOfWeek(value: any): string {\r\n            return this._datetime.formatShortDayOfWeek(value);\r\n        }\r\n\r\n        public formatLongDayOfWeek(value: any): string {\r\n            return this._datetime.formatLongDayOfWeek(value);\r\n        }\r\n\r\n        // numeric month writing formats\r\n        // --------------\r\n\r\n        // numeric month writing \r\n        public formatDateNumber(value: any): string {\r\n            return this._datetime.formatDateNumber(value);\r\n        }\r\n        // numeric month writing \r\n        public formatLongDateNumber(value: any): string {\r\n            return this._datetime.formatLongDateNumber(value);\r\n        }  \r\n\r\n        public formatTimeNumber(value: any): string {\r\n            return this._datetime.formatTimeNumber(value);\r\n        }\r\n\r\n        public formatLongTimeNumber(value: any): string {\r\n            return this._datetime.formatLongTimeNumber(value);\r\n        }\r\n\r\n        public formatLongMonthDay(value: any): string {\r\n            return this._datetime.formatLongMonthDay(value);\r\n        }\r\n\r\n        public formatShortMonthDay(value: any): string {\r\n            return this._datetime.formatShortMonthDay(value);        \r\n        }  \r\n\r\n        public formatDateRange(value1: any, value2: any): string {\r\n            return this._datetime.formatDateRange(value1, value2);\r\n        } \r\n\r\n        public formatDateTimeRange(value1: any, value2: any): string {\r\n            return this._datetime.formatDateTimeRange(value1, value2);\r\n        }    \r\n\r\n        // iso function\r\n        // --------------\r\n\r\n        public formatISOWeek(value: any): string {\r\n            return this._datetime.formatISOWeek(value);\r\n        }\r\n\r\n        public formatShortISOWeek(value: any): string {\r\n            return this._datetime.formatShortISOWeek(value);\r\n        }\r\n\r\n        public formatISOWeekOrdinal(value: any): string {\r\n            return this._datetime.formatISOWeekOrdinal(value);\r\n        }        \r\n        // special formats \r\n        // --------------\r\n\r\n        // year option displays if the current year is not equal to, the date of \r\n        public formatDateY(value: any): string {\r\n            return this._datetime.formatDateY(value);\r\n        }\r\n\r\n        // year option displays if the current year is not equal to, the date of\r\n        public formatLongDateY(value: any): string {\r\n            return this._datetime.formatLongDateY(value);\r\n        }\r\n\r\n        // todo\r\n        public formatMillisecondsToSeconds(value: any) {\r\n            return this._datetime.formatMillisecondsToSeconds(value);\r\n        }\r\n\r\n        // todo\r\n        public formatElapsedInterval(value: any, start: any): string {\r\n            return this._datetime.formatElapsedInterval(value, start);         \r\n        }\r\n\r\n        public getDateJSON(date: any): string {\r\n            return this._datetime.getDateJSON(date);                \r\n        }\r\n\r\n        // navigation functions \r\n        // ------------------\r\n\r\n        public getNextStart(value: any, category: string): any {\r\n            return this._datetime.getNextStart(value, category);\r\n        }\r\n\r\n        public getPrevStart(value: any, category: string): any {\r\n            return this._datetime.getPrevStart(value, category);\r\n        }\r\n\r\n        public getNowStart(category: string): any {\r\n            return this._datetime.getNowStart(category);\r\n        }\r\n\r\n        public addHours(value: any, hours: number): any {\r\n            return this._datetime.addHours(value, hours);\r\n        } \r\n\r\n        public toStartDay(value: any): any {\r\n            return this._datetime.toStartDay(value);\r\n        } \r\n\r\n        public toEndDay(value: any, offset: number): any {\r\n            return this._datetime.toEndDay(value, offset);\r\n        } \r\n  \r\n        public toStartWeek(value: any): any {\r\n            return this._datetime.toStartWeek(value);\r\n        } \r\n\r\n        public toEndWeek(value: any, offset: number): any {\r\n            return this._datetime.toEndWeek(value, offset);\r\n        } \r\n\r\n        public toStartMonth(value: any): any {\r\n            return this._datetime.toStartMonth(value);\r\n        } \r\n\r\n        public toEndMonth(value: any, offset: number): any {\r\n            return this._datetime.toEndMonth(value, offset);\r\n        } \r\n\r\n        public toStartYear(value: any): any {\r\n            return this._datetime.toStartYear(value);\r\n        } \r\n\r\n        public toEndYear(value: any, offset: number): any {\r\n            return this._datetime.toEndYear(value, offset);\r\n        }  \r\n\r\n    }\r\n\r\n    class DateTimeProvider extends DateTime implements IDateTimeProvider {\r\n        private _translation: DateTime;\r\n        private _service: DateTimeService;\r\n        \r\n        public constructor() {\r\n            super();\r\n        }\r\n\r\n        public $get(): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null) \r\n                this._service = new DateTimeService(this);\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipDateTime.Service', [])\r\n        .provider('pipDateTime', DateTimeProvider);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDate', ['pipDates.Templates']);\r\n\r\n    thisModule.directive('pipDate',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                require: 'ngModel',\r\n                scope: {\r\n                    timeMode: '@pipTimeMode',\r\n                    disabled: '&ngDisabled',\r\n                    model: '=ngModel',\r\n                    ngChange: '&'\r\n                },\r\n                templateUrl: 'date_directive/date.html',\r\n                controller: 'pipDateController'\r\n            };\r\n        }\r\n    );\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipDateController',\r\n        function ($scope, $element, $injector) { //pipTranslate\r\n            var value,\r\n                localeDate = moment.localeData(),\r\n                momentMonths = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format,\r\n                momentDays = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format,\r\n                momentShortDays = localeDate._weekdaysMin,\r\n                momentFirstDayOfWeek = localeDate._week.dow;\r\n\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            if (pipTranslate) {\r\n                pipTranslate.setTranslations('en', {\r\n                    DAY: 'Day',\r\n                    MONTH: 'Month',\r\n                    YEAR: 'Year'\r\n                });\r\n                pipTranslate.setTranslations('ru', {\r\n                    DAY: 'День',\r\n                    MONTH: 'Месяц',\r\n                    YEAR: 'Год'                    \r\n                });\r\n                $scope.dayLabel = pipTranslate.translate('DAY');\r\n                $scope.monthLabel = pipTranslate.translate('MONTH');\r\n                $scope.yearLabel = pipTranslate.translate('YEAR');\r\n            } else {\r\n                $scope.dayLabel = 'Day';\r\n                $scope.monthLabel = 'Month';                \r\n                $scope.yearLabel = 'Year';\r\n\r\n            }\r\n\r\n            function dayList(month, year) {\r\n                var count = 31, days = [], i;\r\n\r\n                if (month === 4 || month === 6 || month === 9 || month === 11) {\r\n                    count = 30;\r\n                } else if (month === 2) {\r\n                    if (year) {\r\n                        // Calculate leap year (primitive)\r\n                        count = year % 4 === 0 ? 29 : 28;\r\n                    } else {\r\n                        count = 28;\r\n                    }\r\n                }\r\n\r\n                for (i = 1; i <= count; i++) {\r\n                    days.push(i);\r\n                }\r\n\r\n                return days;\r\n            }\r\n\r\n            function monthList() {\r\n                var months = [], i;\r\n\r\n                for (i = 1; i <= 12; i++) {\r\n                    months.push({\r\n                        id: i,\r\n                        name: momentMonths[i-1]\r\n                    });\r\n                }\r\n\r\n                return months;\r\n            }\r\n\r\n            function yearList() {\r\n                var i,\r\n                    currentYear = new Date().getFullYear(),\r\n                    startYear = $scope.timeMode === 'future' ? currentYear : currentYear - 100,\r\n                    endYear = $scope.timeMode === 'past' ? currentYear : currentYear + 100,\r\n                    years = [];\r\n\r\n                if ($scope.timeMode === 'past') {\r\n                    for (i = endYear; i >= startYear; i--) {\r\n                        years.push(i);\r\n                    }\r\n                } else {\r\n                    for (i = startYear; i <= endYear; i++) {\r\n                        years.push(i);\r\n                    }\r\n                }\r\n\r\n                return years;\r\n            }\r\n\r\n            function adjustDay() {\r\n                var days = dayList($scope.month, $scope.year);\r\n\r\n                if ($scope.days.length !== days.length) {\r\n                    if ($scope.day > days.length) {\r\n                        $scope.day = days.length;\r\n                    }\r\n\r\n                    $scope.days = days;\r\n                }\r\n            }\r\n\r\n            function getValue(v) {\r\n                var value = v ? _.isDate(v) ? v : new Date(v) : null,\r\n                    day = value ? value.getDate() : null,\r\n                    month = value ? value.getMonth() + 1 : null,\r\n                    year = value ? value.getFullYear() : null;\r\n\r\n                // Update day list if month and year were changed\r\n                if ($scope.month !== month && $scope.year !== year) {\r\n                    $scope.days = dayList($scope.month, $scope.year);\r\n                }\r\n\r\n                // Assign values to scope\r\n                $scope.day = day;\r\n                $scope.month = month;\r\n                $scope.year = year;\r\n            }\r\n\r\n            function setValue() {\r\n                var value;\r\n\r\n                if ($scope.day && $scope.month && $scope.year) {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.day, 0, 0, 0, 0);\r\n                    $scope.model = value;\r\n                    $scope.ngChange();\r\n                }\r\n            }\r\n\r\n            $scope.onDayChanged = function () {\r\n                setValue();\r\n            };\r\n\r\n            $scope.onMonthChanged = function () {\r\n                adjustDay();\r\n                setValue();\r\n            };\r\n\r\n            $scope.onYearChanged = function () {\r\n                adjustDay();\r\n                setValue();\r\n            };\r\n\r\n            // Set initial values\r\n            value = $scope.model ? _.isDate($scope.model) ? $scope.model : new Date($scope.model) : null;\r\n            $scope.day = value ? value.getDate() : null;\r\n            $scope.month = value ? value.getMonth() + 1 : null;\r\n            $scope.year = value ? value.getFullYear() : null;\r\n\r\n\r\n\r\n            $scope.days = dayList($scope.month, $scope.year);\r\n            $scope.months = monthList();\r\n            $scope.years = yearList();\r\n\r\n            $scope.disableControls = $scope.disabled ? $scope.disabled() : false;\r\n\r\n            // React on changes\r\n            $scope.$watch('model', function (newValue) {\r\n                getValue(newValue);\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n        }\r\n    );\r\n\r\n})(window.angular, window._);\r\n\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n    var thisModule = angular.module('pipDateRange', ['pipDates.Templates']);\r\n\r\n    thisModule.directive('pipDateRange',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                require: 'ngModel',\r\n                scope: {\r\n                    timeMode: '@pipTimeMode',\r\n                    disabled: '&ngDisabled',\r\n                    model: '=ngModel',\r\n                    pipChanged: '&',\r\n                    pipDateRangeType: '@',\r\n                    pipDateFormat: '@',\r\n                    pipNoLine: '@'\r\n                },\r\n                templateUrl: 'date_range_directive/date_range.html',\r\n                controller: 'pipDateRangeController'\r\n            };\r\n        });\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipDateRangeController',\r\n        function ($scope, $element, $mdMedia, $rootScope, $injector) { //pipTranslate, \r\n            var currentDate,\r\n                currentYear,\r\n                currentMonth,\r\n                currentDay,\r\n                prevState = {}, currentState = {},\r\n                localeDate = moment.localeData(),\r\n                momentMonths = angular.isArray(localeDate._months) ? localeDate._months : localeDate._months.format,\r\n                momentDays = angular.isArray(localeDate._weekdays) ? localeDate._weekdays : localeDate._weekdays.format,\r\n                momentShortDays = localeDate._weekdaysMin,\r\n                momentFirstDayOfWeek = localeDate._week.dow;\r\n\r\n            // var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            // if (pipTranslate) {\r\n            //     pipTranslate.setTranslations('en', {\r\n            //         EVENT_NEW_START_TIME: 'Start time',\r\n            //         EVENT_NEW_END_TIME: 'End time'\r\n            //     });\r\n            //     pipTranslate.setTranslations('ru', {\r\n            //         EVENT_NEW_START_TIME: 'Начало',\r\n            //         EVENT_NEW_END_TIME: 'Конец'                \r\n            //     });\r\n            //     $scope.startLabel = $scope.pipStartLabel ? pipTranslate.translate($scope.pipStartLabel)\r\n            //             : pipTranslate.translate('EVENT_NEW_START_TIME');\r\n            //     $scope.endLabel = $scope.pipEndLabel ? pipTranslate.translate($scope.pipEndLabel)\r\n            //             : pipTranslate.translate('EVENT_NEW_END_TIME');\r\n            // } else {\r\n            //     $scope.startLabel = $scope.pipStartLabel ? $scope.pipStartLabel : 'Start time';\r\n            //     $scope.endLabel = $scope.pipEndLabel ? $scope.pipEndLabel : 'End time';              \r\n            // }\r\n\r\n            currentDate = new Date();\r\n            currentYear = currentDate.getUTCFullYear();\r\n            currentMonth = currentDate.getUTCMonth() + 1;\r\n            currentDay = currentDate.getUTCDate();\r\n\r\n            $scope.onDayChanged = function () {\r\n                setValue();\r\n            };\r\n\r\n            $scope.onMonthChanged = function () {\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    var date, dayOfWeek;\r\n\r\n                    date = new Date(Date.UTC($scope.year, $scope.month - 1, 1));\r\n                    dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n                    $scope.week = getWeekByDate(dayOfWeek, $scope.month - 1, $scope.year);\r\n                    correctWeek();\r\n                    adjustWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            $scope.onYearChanged = function () {\r\n                var date, dayOfWeek;\r\n\r\n                date = new Date(Date.UTC($scope.year, $scope.month - 1, 1));\r\n                dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    $scope.week = getWeekByDate(dayOfWeek, $scope.month - 1, $scope.year);\r\n                    adjustWeek();\r\n                    correctWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            $scope.onWeekChange = function () {\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    adjustWeek();\r\n                    correctWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            };\r\n\r\n            // visibility\r\n            $scope.isDay = function () {\r\n                return $scope.pipDateRangeType === 'daily';\r\n            };\r\n\r\n            $scope.isWeek = function () {\r\n                return $scope.pipDateRangeType === 'weekly';\r\n            };\r\n\r\n            $scope.isMonth = function () {\r\n                return $scope.pipDateRangeType === 'daily' ||\r\n                    $scope.pipDateRangeType === 'weekly' ||\r\n                    $scope.pipDateRangeType === 'monthly';\r\n            };\r\n\r\n            $scope.onChange = function () {\r\n                if ($scope.pipChanged) {\r\n                    $scope.pipChanged();\r\n                }\r\n            };\r\n\r\n            function setCurrent() {\r\n                currentState.day = $scope.day;\r\n                currentState.month = $scope.month;\r\n                currentState.year = $scope.year;\r\n                currentState.week = $scope.week;\r\n                currentState.dateRangeType = $scope.pipDateRangeType;\r\n                currentState.model = $scope.model;\r\n            }\r\n\r\n            function fillLists() {\r\n                $scope.days = dayList($scope.month, $scope.year);\r\n                $scope.weeks = weekList($scope.month, $scope.year);\r\n                $scope.months = monthList();\r\n                $scope.shortMonths = monthList(true);\r\n                $scope.years = yearList();\r\n\r\n            }\r\n\r\n            function correctWeek() {\r\n                if (!prevState.model || prevState.model && prevState.model.getTime() >= $scope.model.getTime()) {\r\n                    // if shift week -> increase month\r\n                    if ($scope.weeks && $scope.weeks[$scope.week] && $scope.weeks[$scope.week].id <= 0) {\r\n                        if ($scope.month < 12) {\r\n                            $scope.month += 1;\r\n                        } else {\r\n                            $scope.month = 1;\r\n                            $scope.year += 1;\r\n                        }\r\n                        fillLists();\r\n                    }\r\n                }\r\n            }\r\n\r\n            function init() {\r\n                var value;\r\n\r\n                value = $scope.model ? new Date($scope.model) : null;\r\n                $scope.day = value ? value.getUTCDate() : null;\r\n                $scope.month = value ? value.getUTCMonth() + 1 : null;\r\n                $scope.year = value ? value.getUTCFullYear() : null;\r\n                $scope.week = value ? getWeekByDate($scope.day, $scope.month - 1, $scope.year) : null;\r\n\r\n                fillLists();\r\n\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    correctWeek();\r\n                    adjustWeek();\r\n                } else {\r\n                    adjustDay();\r\n                }\r\n                setValue();\r\n            }\r\n\r\n            // Set initial values\r\n            $scope.$mdMedia = $mdMedia;\r\n\r\n            init();\r\n\r\n            $scope.disableControls = $scope.disabled ? $scope.disabled() : false;\r\n\r\n            // React on changes\r\n            $scope.$watch('model', function (newValue, oldValue) {\r\n                if (newValue !== oldValue) {\r\n                    getValue(newValue);\r\n                }\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n\r\n            $scope.$watch('pipDateRangeType', function (newValue, oldValue) {\r\n                if (newValue !== oldValue && oldValue) {\r\n                    init();\r\n                }\r\n            });\r\n\r\n            $scope.onYearClick = function () {\r\n                if (!$scope.year) {\r\n                    $scope.year = currentYear;\r\n                }\r\n            };\r\n\r\n            $scope.onMonthClick = function () {\r\n                if (!$scope.month) {\r\n                    $scope.month = currentMonth;\r\n                }\r\n            };\r\n\r\n            $scope.onDayClick = function () {\r\n                if (!$scope.year) {\r\n                    $scope.day = currentDay;\r\n                }\r\n            };\r\n            // ---------------------------------------------------------------------------------------\r\n\r\n            function getCountDay(month, year) {\r\n                var count = 31;\r\n\r\n                if (month === 4 || month === 6 || month === 9 || month === 11) {\r\n                    count = 30;\r\n                } else if (month === 2) {\r\n                    if (year) {\r\n                        // Calculate leap year (primitive)\r\n                        count = year % 4 === 0 ? 29 : 28;\r\n                    } else {\r\n                        count = 28;\r\n                    }\r\n                }\r\n\r\n                return count;\r\n            }\r\n\r\n            function dayList(month, year) {\r\n                var count, days, i, ln;\r\n\r\n              //  ln = $rootScope.$language || 'en';\r\n                count = getCountDay(month, year);\r\n                $scope.nameDays = [];\r\n                days = [];\r\n                for (i = 1; i <= count; i++) {\r\n                    days.push(i);\r\n                    $scope.nameDays.push(momentShortDays[moment([year, month - 1, i]).weekday()]);\r\n                }\r\n\r\n                return days;\r\n            }\r\n\r\n            function getWeekByDate(day, month, year) {\r\n                var date, dayOfWeek, startWeek;\r\n\r\n                date = new Date(Date.UTC(year, month, day));\r\n                dayOfWeek = date.getUTCDay() ? date.getUTCDay() : 7;\r\n\r\n                if (dayOfWeek === 1) {\r\n                    startWeek = day;\r\n                } else {\r\n                    startWeek = day + 1 - dayOfWeek;\r\n                }\r\n\r\n                return startWeek;\r\n            }\r\n\r\n            function getWeek(day, countDay, countPrevMonthDay) {\r\n                var endDay, startDay;\r\n\r\n                endDay = day + 6 > countDay ? countDay - day - 6 : day + 6;\r\n                startDay = day > 0 ? day : countPrevMonthDay + day;\r\n\r\n                return startDay.toString() + ' - ' + (Math.abs(endDay)).toString();\r\n            }\r\n\r\n            function weekList(month, year) { // возвращает список начала надели\r\n                var weeks, countDay, countPrevMonthDay, startWeek;\r\n\r\n                weeks = [];  // в массиве первые дни недели в текущем месяце\r\n                countDay = getCountDay(month, year);\r\n                startWeek = getWeekByDate(1, month - 1, year);\r\n\r\n                countPrevMonthDay = month - 1 ? getCountDay(month - 1, year) : getCountDay(12, year - 1);\r\n                while (startWeek < countDay + 1) {\r\n                    weeks.push({\r\n                        id: startWeek,\r\n                        name: getWeek(startWeek, countDay, countPrevMonthDay)\r\n                    });\r\n                    startWeek = startWeek + 7;\r\n                }\r\n\r\n                return weeks;\r\n            }\r\n\r\n            function monthList() {\r\n                var months = [], i;\r\n\r\n                for (i = 1; i <= 12; i++) {\r\n                    months.push({\r\n                        id: i,\r\n                        name: momentMonths[i-1]\r\n                    });\r\n                }\r\n\r\n                return months;\r\n            }\r\n\r\n            function yearList() {\r\n                var startYear, i,\r\n                    endYear,\r\n                    years = [];\r\n\r\n                switch ($scope.timeMode) {\r\n                    case 'future':\r\n                        startYear = currentYear;\r\n                        endYear = currentYear + 100;\r\n                        break;\r\n                    case 'past':\r\n                        startYear = currentYear - 100;\r\n                        endYear = currentYear;\r\n                        break;\r\n                    case 'now':\r\n                        startYear = currentYear - 50;\r\n                        endYear = currentYear + 100;\r\n                        break;\r\n                    default:\r\n                        startYear = currentYear - 50;\r\n                        endYear = currentYear + 50;\r\n                        break;\r\n                }\r\n                if ($scope.timeMode === 'future') {\r\n                    for (i = startYear; i <= endYear; i++) {\r\n                        years.push(i);\r\n                    }\r\n                } else {\r\n                    for (i = endYear; i >= startYear; i--) {\r\n                        years.push(i);\r\n                    }\r\n                }\r\n\r\n                return years;\r\n            }\r\n\r\n            function adjustDay() {\r\n                var days = dayList($scope.month, $scope.year);\r\n\r\n                switch ($scope.pipDateRangeType) {\r\n                    case 'monthly':\r\n                        $scope.day = 1;\r\n                        break;\r\n                    case 'yearly':\r\n                        $scope.month = 1;\r\n                        $scope.day = 1;\r\n                        break;\r\n                    default:\r\n                        if ($scope.days.length !== days.length) {\r\n                            if ($scope.day > days.length) {\r\n                                $scope.day = days.length;\r\n                            }\r\n                        }\r\n                        break;\r\n                }\r\n                $scope.days = days;\r\n            }\r\n\r\n            function adjustWeek() {\r\n                var weeks;\r\n\r\n                weeks = weekList($scope.month, $scope.year);\r\n                $scope.week = getWeekByDate($scope.week, $scope.month - 1, $scope.year);\r\n                $scope.weeks = weeks;\r\n            }\r\n\r\n            function getValue(v) {\r\n                var value, day, month, year, week;\r\n\r\n                value = v ? new Date(v) : null;\r\n                // Define values\r\n                day = value ? value.getUTCDate() : null;\r\n                month = value ? value.getUTCMonth() + 1 : null;\r\n                year = value ? value.getUTCFullYear() : null;\r\n                week = value ? getWeekByDate(day, month - 1, year) : null;\r\n                // Exit if nothing to update\r\n                if ($scope.day === day && $scope.month === month && $scope.year === year && $scope.week === week) {\r\n                    return;\r\n                }\r\n                // Assign values to scope\r\n                $scope.day = day;\r\n                $scope.month = month;\r\n                $scope.year = year;\r\n                $scope.week = week;\r\n\r\n                // Define data sources\r\n                $scope.days = dayList($scope.month, $scope.year);\r\n                $scope.weeks = weekList($scope.month, $scope.year);\r\n            }\r\n\r\n            function setValue() {\r\n                var value;\r\n\r\n                if ($scope.pipDateRangeType === 'weekly') {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.week, 0, 0, 0, 0);\r\n                    value = new Date(value.getTime() - value.getTimezoneOffset() * 60000);\r\n                    $scope.model = value;\r\n                } else {\r\n                    value = new Date($scope.year, $scope.month - 1, $scope.day, 0, 0, 0, 0);\r\n                    value = new Date(value.getTime() - value.getTimezoneOffset() * 60000);\r\n                    $scope.model = value;\r\n                }\r\n\r\n                prevState = _.cloneDeep(currentState);\r\n                setCurrent();\r\n                $scope.onChange();\r\n            }\r\n        }\r\n    );\r\n\r\n})(window.angular, window._);\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimeRange', []);\r\n\r\n    thisModule.directive('pipTimeRange',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipStartDate: '=',\r\n                    pipEndDate: '='\r\n                },\r\n                templateUrl: 'time_range_directive/time_range.html',\r\n                link: function ($scope, $element, $attrs) {\r\n\r\n                    function getDateJSON(value) {\r\n                        return value ? new Date(value) : null;\r\n                    }\r\n\r\n                    function defineStartDate() {\r\n                        if ($scope.pipStartDate !== null && $scope.pipStartDate !== undefined) {\r\n                            $scope.data.start = _.isDate($scope.pipStartDate) ? $scope.pipStartDate\r\n                                : getDateJSON($scope.pipStartDate);\r\n                        }\r\n                    }\r\n\r\n                    function defineEndDate() {\r\n                        if ($scope.pipEndDate !== null && $scope.pipEndDate !== undefined) {\r\n                            $scope.data.end = _.isDate($scope.pipEndDate) ? $scope.pipEndDate\r\n                                : getDateJSON($scope.pipEndDate);\r\n                        }\r\n                    }\r\n\r\n                    function toBoolean(value) {\r\n                        if (value == null) return false;\r\n                        if (!value) return false;\r\n                        value = value.toString().toLowerCase();\r\n                        return value == '1' || value == 'true';\r\n                    }\r\n\r\n                    $scope.data = {};\r\n                    $scope.data.start = null;\r\n                    $scope.data.end = null;\r\n                    defineStartDate();\r\n                    defineEndDate();\r\n\r\n                    if (toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch('pipStartDate',\r\n                            function () {\r\n                                $scope.data.start = null;\r\n                                defineStartDate();\r\n                            }\r\n                        );\r\n                        $scope.$watch('pipEndDate',\r\n                            function () {\r\n                                $scope.data.end = null;\r\n                                defineEndDate();\r\n                            }\r\n                        );\r\n                    }\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-time-range');\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})(window.angular, window._);\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimeRangeEdit', []);\r\n\r\n    thisModule.directive('pipTimeRangeEdit',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipStartDate: '=',\r\n                    pipChanged: '&',\r\n                    pipEndDate: '=',\r\n                    pipStartLabel: '@',\r\n                    pipEndLabel: '@',\r\n                    disabled: '&ngDisabled',\r\n                    pipSize: '='\r\n                },\r\n                templateUrl: 'time_range_edit_directive/time_range_edit.html',\r\n                controller: 'pipTimeRangeEditController'\r\n            };\r\n        }\r\n    );\r\n\r\n    // Todo: Remove dependency on Translate. Use moment localization\r\n    thisModule.controller('pipTimeRangeEditController',\r\n        function ($scope, $element, $attrs, $injector, pipDateTime) { //pipTranslate\r\n\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            if (pipTranslate) {\r\n                pipTranslate.setTranslations('en', {\r\n                    EVENT_NEW_START_TIME: 'Start time',\r\n                    EVENT_NEW_END_TIME: 'End time'\r\n                });\r\n                pipTranslate.setTranslations('ru', {\r\n                    EVENT_NEW_START_TIME: 'Начало',\r\n                    EVENT_NEW_END_TIME: 'Конец'                \r\n                });\r\n                $scope.startLabel = $scope.pipStartLabel ? pipTranslate.translate($scope.pipStartLabel)\r\n                        : pipTranslate.translate('EVENT_NEW_START_TIME');\r\n                $scope.endLabel = $scope.pipEndLabel ? pipTranslate.translate($scope.pipEndLabel)\r\n                        : pipTranslate.translate('EVENT_NEW_END_TIME');\r\n            } else {\r\n                $scope.startLabel = $scope.pipStartLabel ? $scope.pipStartLabel : 'Start time';\r\n                $scope.endLabel = $scope.pipEndLabel ? $scope.pipEndLabel : 'End time';              \r\n            }\r\n\r\n            function getDateJSON(value) {\r\n                return value ? new Date(value) : null;\r\n            }\r\n\r\n            function setDuration() {\r\n                var start, end;\r\n\r\n                if (!$scope.data.startDate || !$scope.data.endDate) {\r\n                    return null;\r\n                }\r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n                end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n\r\n                return end - start;\r\n            }\r\n\r\n            function validateStartDate() {\r\n                var date, start, end;\r\n\r\n                // если начальная дата не задана, обнуляем и выходим\r\n                if (!$scope.data.startDate) {\r\n                    $scope.data.startTime = null;\r\n\r\n                    return;\r\n                }\r\n\r\n                // еcли не задано начальное время - задаем его\r\n                if (!$scope.data.startTime) {\r\n                    if (!$scope.data.endTime) {\r\n                        date = new Date();\r\n                        date = date.getTime() - pipDateTime.toStartDay(date);\r\n                        $scope.data.startTime = Math.floor(date / (30 * 60 * 1000)) * 30;\r\n                    } else {\r\n                        $scope.data.startTime = $scope.data.endTime === 0 ? 0 : $scope.data.endTime - 30;\r\n                    }\r\n                }\r\n\r\n                // если конечная дата не задана, обнуляем и выходим\r\n                if (!$scope.data.endDate) {\r\n                    $scope.data.endTime = null;\r\n\r\n                    return;\r\n                }\r\n\r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n\r\n                // Если есть длительность, то сохраняем ее. Длительность можно изменить только изменяя конечную дату\r\n                if ($scope.data.duration) {\r\n                    end = new Date(start.getTime() + $scope.data.duration);\r\n                    $scope.data.endDate = pipDateTime.toStartDay(end);\r\n                    end = end.getTime() - $scope.data.endDate.getTime();\r\n                    $scope.data.endTime = Math.floor(end / (30 * 60 * 1000)) * 30;\r\n                } else {\r\n                    // Если нет длительности сравниваем даты\r\n                    end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n                    if (start >= end) {\r\n                        // Если начальная дата больше, то двигаем конечную дату\r\n                        $scope.data.endDate = pipDateTime.toStartDay(new Date(start.getTime() + 30 * 60000));\r\n                        $scope.data.endTime = ($scope.data.startTime + 30) % 1440;\r\n                    }\r\n                }\r\n            }\r\n\r\n            function validateEndDate() {\r\n                var date, start, end;\r\n\r\n                // если начальная дата не задана, обнуляем и выходим\r\n                if (!$scope.data.endDate) {\r\n                    $scope.data.endTime = null;\r\n\r\n                    return;\r\n                }\r\n\r\n                // еcли не задано конечное время - задаем его\r\n                if (!$scope.data.endTime) {\r\n                    if (!$scope.data.startTime) {\r\n                        date = new Date();\r\n                        date = date.getTime() - pipDateTime.toStartDay(date);\r\n                        $scope.data.endTime = Math.floor(date / (30 * 60 * 1000)) * 30;\r\n                    } else {\r\n                        $scope.data.endTime = $scope.data.startTime === 1410 ? 1410 : $scope.data.startTime + 30;\r\n                    }\r\n                }\r\n\r\n                // если yачальная дата не задана, обнуляем и выходим\r\n                if (!$scope.data.startDate) {\r\n                    $scope.data.startTime = null;\r\n\r\n                    return;\r\n                }\r\n\r\n                start = new Date($scope.data.startDate.getTime() + $scope.data.startTime * 60 * 1000);\r\n                end = new Date($scope.data.endDate.getTime() + $scope.data.endTime * 60 * 1000);\r\n\r\n                if (start >= end) {\r\n                    // Если начальная дата больше, то двигаем начальную дату\r\n                    $scope.data.startDate = pipDateTime.toStartDay(new Date(end.getTime() - 30 * 60000));\r\n                    $scope.data.startTime = $scope.data.endTime % 1440 === 0 ? 1410 : $scope.data.endTime - 30;\r\n                }\r\n\r\n                $scope.data.duration = setDuration();\r\n            }\r\n\r\n            function setDate() {\r\n                var time;\r\n\r\n                $scope.data.bind = false;\r\n\r\n                if ($scope.data.startDate) {\r\n                    time = $scope.data.startTime ? $scope.data.startTime * 60 * 1000 : 0;\r\n                    $scope.pipStartDate = new Date($scope.data.startDate.getTime() + time);\r\n                }\r\n\r\n                if ($scope.data.endDate) {\r\n                    time = $scope.data.endTime ? $scope.data.endTime * 60 * 1000 : 0;\r\n                    $scope.pipEndDate = new Date($scope.data.endDate.getTime() + time);\r\n                }\r\n\r\n                $scope.data.bind = true;\r\n            }\r\n\r\n            function defineDate() {\r\n                var start, end;\r\n\r\n                if ($scope.pipStartDate !== null && $scope.pipStartDate !== undefined) {\r\n                    start = _.isDate($scope.pipStartDate) ? $scope.pipStartDate : null;\r\n\r\n                    if (!start) {\r\n                        start = getDateJSON($scope.pipStartDate);\r\n                    }\r\n\r\n                    $scope.data.startDate = pipDateTime.toStartDay(start);\r\n                    $scope.data.startTime = (new Date(start) - $scope.data.startDate) / (60 * 1000);\r\n                }\r\n\r\n                if ($scope.pipEndDate !== null && $scope.pipEndDate !== undefined) {\r\n                    end = _.isDate($scope.pipEndDate) ? $scope.pipEndDate : null;\r\n\r\n                    if (!start) {\r\n                        end = getDateJSON($scope.pipEndDate);\r\n                    }\r\n\r\n                    $scope.data.endDate = pipDateTime.toStartDay(end);\r\n                    $scope.data.endTime = (new Date(end) - $scope.data.endDate) / (60 * 1000);\r\n                }\r\n\r\n                validateStartDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n            }\r\n\r\n            function getTimeInterval() {\r\n                var result, i, j, minutes;\r\n\r\n                result = [];\r\n                for (i = 0; i < 24; i++) {\r\n                    for (j = 0; j < 2; j++) {\r\n                        minutes = j * 30;\r\n                        result.push({\r\n                            id: i * 60 + minutes,\r\n                            time: _.pad(i.toString(), 3, '0').substr(0, 2) + ':' + _.pad(minutes.toString(), 2, '0')\r\n                        });\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            }\r\n\r\n            function initDate() {\r\n                $scope.data.startDate = null;\r\n                $scope.data.startTime = null;\r\n                $scope.data.endDate = null;\r\n                $scope.data.endTime = null;\r\n                $scope.data.duration = null;\r\n            }\r\n\r\n            // initialize data\r\n            $scope.intervalTimeCollection = getTimeInterval();\r\n            $scope.data = {};\r\n            initDate();\r\n            defineDate();\r\n\r\n            // process function\r\n            $scope.onChangeStartDate = function () {\r\n                validateStartDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeEndDate = function () {\r\n                validateEndDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeStartTime = function () {\r\n                if (!$scope.data.startDate) {\r\n                    $scope.data.startDate = pipDateTime.toStartDay(new Date());\r\n                }\r\n                validateStartDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.onChangeEndTime = function () {\r\n                if (!$scope.data.endDate) {\r\n                    $scope.data.endDate = pipDateTime.toStartDay(new Date());\r\n                }\r\n\r\n                validateEndDate();\r\n                $scope.data.duration = setDuration();\r\n                setDate();\r\n                $scope.pipChanged();\r\n            };\r\n\r\n            $scope.isDisabled = function () {\r\n                if ($scope.disabled) {\r\n                    return $scope.disabled();\r\n                }\r\n\r\n                return false;\r\n            };\r\n\r\n            $scope.$watchGroup([$scope.pipStartDate, $scope.pipEndDate], function () {\r\n                if ($scope.data.bind) {\r\n                    initDate();\r\n                    defineDate();\r\n                }\r\n            });\r\n\r\n            $scope.$watch($scope.disabled, function (newValue) {\r\n                $scope.disableControls = newValue;\r\n            });\r\n\r\n            // Add class\r\n            $element.addClass('pip-time-range-edit');\r\n        }\r\n    );\r\n\r\n})(window.angular, window._);\r\n","<!--\r\n@file Confirmation dialog template\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-dialog class=\"pip-dialog pip-confirmation-dialog layout-column\" width=\"400\" md-theme=\"{{::theme}}\">\r\n    <div class=\"pip-header\">\r\n        <h3>{{:: title}}</h3>\r\n    </div>\r\n    <div class=\"pip-footer\">\r\n        <div>\r\n            <md-button ng-click=\"onCancel()\">{{:: cancel}}</md-button>\r\n            <md-button class=\"md-accent\" ng-click=\"onOk()\">{{:: ok}}</md-button>\r\n        </div>\r\n    </div>\r\n</md-dialog>\r\n","<!--\r\n@file Confirmation dialog template\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-dialog class=\"pip-dialog pip-error-details-dialog layout-column\" width=\"400\" md-theme=\"{{theme}}\">\r\n    <div class=\"pip-body\">\r\n        <div class=\"pip-header\">\r\n            <h3>{{::errorDetails | translate}}</h3>\r\n        </div>\r\n        <div class=\"layout-row layout-align-start-center error-section text-body2 color-secondary-text\"\r\n             ng-if=\"error.code || (error.data && error.data.code)\">\r\n            {{::errorCode | translate}}\r\n        </div>\r\n        <div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"error.code || (error.data && error.data.code)\">\r\n            {{error.code || error.data.code}}\r\n        </div>\r\n\r\n        <div class=\"layout-row layout-align-start-center error-section text-body2 color-secondary-text\"\r\n             ng-if=\"error.path || (error.data && error.data.path)\">\r\n            {{::errorPath | translate}}\r\n        </div>\r\n        <div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"error.path || (error.data && error.data.path)\">\r\n            {{error.path || error.data.path}}\r\n        </div>\r\n\r\n        <div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\"\r\n             ng-if=\"error.error || (error.data && error.data.error)\">\r\n            {{::errorText | translate}}\r\n        </div>\r\n        <div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"error.error || (error.data && error.data.error)\">\r\n            {{error.error || error.data.error}}\r\n        </div>\r\n\r\n        <div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\"\r\n             ng-if=\"error.method || (error.data && error.data.method)\">\r\n            {{::errorMethod | translate}}\r\n        </div>\r\n        <div class=\"layout-row layout-align-start-center text-subhead1\" ng-if=\"error.method || (error.data && error.data.method)\">\r\n            {{error.method || error.data.method}}\r\n        </div>\r\n\r\n        <div class=\"error-section text-body2 color-secondary-text layout-row layout-align-start-center\"\r\n             ng-if=\"error.message || (error.data && error.data.message)\">\r\n            {{::errorMessage | translate}}\r\n        </div>\r\n        <div class=\"layout-row layout-align-start-center text-subhead1\"\r\n             ng-if=\"error.message || (error.data && error.data.message)\">\r\n            {{error.message || error.data.message}}\r\n        </div>\r\n    </div>\r\n    <div class=\"pip-footer\">\r\n        <div>\r\n            <md-button class=\"md-accent m0\" ng-click=\"onOk()\">{{::dismissButton | translate}}</md-button>\r\n        </div>\r\n    </div>\r\n</md-dialog>\r\n","<!--\r\n@file Information dialog content\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-dialog class=\"pip-dialog pip-information-dialog layout-column\"\r\n           width=\"400\" md-theme=\"{{theme}}\">\r\n    <div class=\"pip-header\">\r\n        <h3 >{{ title | translate }}</h3>\r\n    </div>\r\n    <div class=\"pip-body\">\r\n        <div class=\"pip-content\">\r\n            {{ content }}\r\n        </div>\r\n    </div>\r\n    <div class=\"pip-footer\">\r\n        <div>\r\n            <md-button class=\"md-accent\" ng-click=\"onOk()\">{{ ok | translate }}</md-button>\r\n        </div>\r\n    </div>\r\n</md-dialog>\r\n","<!--\r\n@file Options dialog content\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-dialog class=\"pip-dialog pip-options-dialog layout-column\"\r\n           min-width=\"400\" md-theme=\"{{theme}}\">\r\n    <md-dialog-content class=\"pip-body lp0 tp0 rp0 bp24 pip-scroll\">\r\n        <div class=\"pip-header\" >\r\n            <h3>{{::title | translate}}</h3>\r\n            <div ng-show=\"deletedTitle\" class=\"header-option text-subhead1 divider-bottom\">\r\n                <md-checkbox ng-model=\"deleted\" aria-label=\"CHECKBOX\">{{::deletedTitle | translate}}</md-checkbox>\r\n            </div>\r\n        </div>\r\n        <div class=\"pip-content\">\r\n            <md-radio-group ng-model=\"selectedOptionName\" class=\"pip-list md-primary\" md-no-ink=\"true\"\r\n                            ng-keypress=\"onKeyPress($event)\" tabindex=\"0\">\r\n                <div ng-repeat=\"option in options\" class=\"pip-list-item\" md-ink-ripple\r\n                     ui-event=\"{ click: 'onOptionSelect($event, option)' }\"\r\n                     ng-class=\"{ selected: option.name == selectedOptionName }\">\r\n                    <div class=\"pip-list-item item-padding\">\r\n                        <md-icon class=\"pip-option-icon\" md-svg-icon=\"icons:{{option.icon}}\" ng-if=\"option.icon\">\r\n                        </md-icon>\r\n                        <div class=\"pip-option-title\">\r\n                            {{::option.title | translate}}\r\n                        </div>\r\n                        <md-radio-button ng-value=\"option.name\" tabindex=\"-1\"\r\n                                         aria-label=\"{{::option.title | translate}}\">\r\n                        </md-radio-button>\r\n                    </div>\r\n\r\n                </div>\r\n            </md-radio-group>\r\n        </div>\r\n    </md-dialog-content>\r\n    <div class=\"pip-footer\">\r\n        <div>\r\n            <md-button class=\"pip-cancel\" ng-click=\"onCancel()\">{{::'CANCEL' | translate}}</md-button>\r\n            <md-button class=\"pip-submit md-accent\" ng-click=\"onSelect()\">{{::applyButtonTitle | translate}}</md-button>\r\n        </div>\r\n    </div>\r\n</md-dialog>\r\n","<!--\r\n@file Options dialog content\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-dialog class=\"pip-dialog pip-options-dialog-big layout-column\"\r\n           min-width=\"400\" md-theme=\"{{theme}}\">\r\n    <md-dialog-content class=\"pip-body pip-scroll\" ng-class=\"{'bp24': !noActions}\">\r\n        <div class=\"pip-header\" ng-class=\"{'header-hint': noTitle && hint}\">\r\n            <h3 class=\"m0\" ng-if=\"!noTitle\">\r\n                {{::title | translate}}\r\n            </h3>\r\n            <div ng-show=\"noTitle && hint\" class=\"dialog-hint layout-row layout-align-start-center\">\r\n                <div class=\"hint-icon-container flex-fixed\" >\r\n                    <md-icon md-svg-icon=\"icons:info-circle-outline\"></md-icon>\r\n                </div>\r\n                <div>{{::hint | translate}}</div>\r\n            </div>\r\n        </div>\r\n        <div class=\"content-divider\" ng-if=\"!noTitle\"></div>\r\n        <div class=\"pip-content\">\r\n            <div class=\"spacer8\" ng-if=\"noTitle && hint\"></div>\r\n            <md-list class=\"pip-menu  pip-ref-list\"\r\n                     pip-selected=\"optionIndex\" index=\"{{optionIndex }}\"\r\n                     pip-select=\"onSelected($event)\">\r\n\r\n                <md-list-item class=\"pip-ref-list-item pip-selectable layout-row layout-align-start-center\"\r\n                              ng-class=\"{'selected md-focused' : option.name == selectedOptionName,\r\n                              'divider-bottom': $index != options.length - 1}\"\r\n                              md-ink-ripple\r\n                              ng-keyup=\"onKeyUp($event, $index)\"\r\n                              ng-repeat=\"option in options\" >\r\n\r\n                    <div class=\"pip-content  content-stretch\" ng-click=\"onOptionSelect($event, option)\">\r\n                        <p class=\"pip-title spacer-right\" ng-if=\"option.title\" style=\"margin-bottom: 4px !important;\">\r\n                            {{::option.title | translate}}\r\n                        </p>\r\n                        <div class=\"pip-subtitle spacer-right\"\r\n                             style=\"height: inherit\"\r\n                             ng-if=\"option.subtitle\">\r\n                            {{::option.subtitle | translate}}\r\n                        </div>\r\n                        <div class=\"pip-subtitle spacer-right\"\r\n                             style=\"height: inherit\" ng-if=\"option.text\"\r\n                             ng-bind-html=\"option.text | translate\">\r\n                        </div>\r\n                    </div>\r\n\r\n                </md-list-item>\r\n\r\n            </md-list>\r\n        </div>\r\n        <div class=\"spacer8\" ng-if=\"noActions\"></div>\r\n    </md-dialog-content>\r\n\r\n    <div class=\"pip-footer\" ng-if=\"!noActions\">\r\n        <div>\r\n            <md-button class=\"pip-cancel\" ng-click=\"onCancel()\">{{::'CANCEL' | translate}}</md-button>\r\n            <md-button class=\"pip-submit md-accent\" ng-click=\"onSelect()\" style=\"margin-right: -6px\">\r\n                {{::applyButtonTitle | translate}}\r\n            </md-button>\r\n        </div>\r\n    </div>\r\n</md-dialog>\r\n","/**\r\n * @file Registration of dialogs\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipDialogs', [\r\n        'pipInformationDialog',\r\n        'pipConfirmationDialog',\r\n        'pipOptionsDialog',\r\n        'pipOptionsBigDialog',\r\n        'pipErrorDetailsDialog'\r\n    ]);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Confirmation dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipConfirmationDialog',\r\n        ['ngMaterial', 'pipDialogs.Translate', 'pipDialogs.Templates']);\r\n\r\n    thisModule.factory('pipConfirmationDialog',\r\n        function ($mdDialog) {\r\n            return {\r\n                show: function (params, successCallback, cancelCallback) {\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'confirmation/confirmation.html',\r\n                        controller: 'pipConfirmationDialogController',\r\n                        locals: { params: params },\r\n                        clickOutsideToClose: true\r\n                    })\r\n                    .then(function () {\r\n                        if (successCallback) {\r\n                            successCallback();\r\n                        }\r\n                    }, function () {\r\n                        if (cancelCallback) {\r\n                            cancelCallback();\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipConfirmationDialogController',\r\n        function ($scope, $rootScope, $mdDialog, $injector, params) {\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            if (pipTranslate) {\r\n                pipTranslate.translations('en', {\r\n                    'CONFIRM_TITLE': 'Confirm'\r\n                });\r\n                pipTranslate.translations('ru', {\r\n                    'CONFIRM_TITLE': 'Подтвердите'\r\n                });\r\n\r\n                $scope.title = params.title || 'CONFIRM_TITLE';\r\n                $scope.ok = params.ok || 'OK';\r\n                $scope.cancel = params.cancel || 'CANCEL';\r\n            } else {\r\n                $scope.title = params.title || 'Confirm';\r\n                $scope.ok = params.ok || 'OK';\r\n                $scope.cancel = params.cancel || 'Cancel';\r\n            }\r\n\r\n            $scope.theme = $rootScope.$theme;\r\n\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n\r\n            $scope.onOk = function () {\r\n                $mdDialog.hide();\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Error details dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrorDetailsDialog',\r\n        ['ngMaterial', 'pipDialogs.Translate', 'pipDialogs.Templates']);\r\n\r\n    thisModule.factory('pipErrorDetailsDialog',\r\n        function ($mdDialog) {\r\n            return {\r\n                show: function (params, successCallback, cancelCallback) {\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'error_details/error_details.html',\r\n                        controller: 'pipErrorDetailsDialogController',\r\n                        locals: {params: params},\r\n                        clickOutsideToClose: true\r\n                    })\r\n                        .then(function () {\r\n                            if (successCallback) {\r\n                                successCallback();\r\n                            }\r\n                        }, function () {\r\n                            if (cancelCallback) {\r\n                                cancelCallback();\r\n                            }\r\n                        });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipErrorDetailsDialogController',\r\n        function ($scope, $rootScope, $mdDialog, $injector, params) {\r\n            \r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n            \r\n            if (pipTranslate) {\r\n                pipTranslate.translations('en', {\r\n                    'ERROR_DETAILS': 'Error details',\r\n                    'CODE': 'Error code',\r\n                    'PATH': 'Path',\r\n                    'ERROR': 'Error',\r\n                    'METHOD': 'Method',\r\n                    'MESSAGE': 'Message',\r\n                    'DISMISS': 'Dismiss'\r\n                });\r\n                pipTranslate.translations('ru', {\r\n                    'ERROR_DETAILS': 'Детали ошибки',\r\n                    'CODE': 'Код ошибки',\r\n                    'PATH': 'Путь',\r\n                    'ERROR': 'Ошибка',\r\n                    'METHOD': 'Метод',\r\n                    'MESSAGE': 'Сообщение'\r\n                });\r\n                $scope.ok = params.ok || 'OK';\r\n                $scope.cancel = params.cancel || 'CANCEL';\r\n                $scope.errorDetails = 'ERROR_DETAILS';\r\n                $scope.dismissButton = 'DISMISS';\r\n                $scope.errorMessage = 'MESSAGE';\r\n                $scope.errorCode = 'CODE';\r\n                $scope.errorMethod = 'METHOD';\r\n                $scope.errorPath = 'PATH';\r\n                $scope.errorText = 'ERROR';                \r\n            } else {\r\n                $scope.ok = params.ok || 'OK';\r\n                $scope.cancel = params.cancel || 'Cancel';\r\n                $scope.errorDetails = 'Error details';\r\n                $scope.dismissButton = 'Dismiss';\r\n                $scope.errorMessage = 'Message';\r\n                $scope.errorCode = 'Code';\r\n                $scope.errorMethod = 'Method';\r\n                $scope.errorPath = 'Path';\r\n                $scope.error = 'Error';\r\n            }\r\n\r\n            $scope.theme = $rootScope.$theme\r\n            $scope.error = params.error;\r\n\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n\r\n            $scope.onOk = function () {\r\n                $mdDialog.hide();\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Information dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipInformationDialog',\r\n        ['ngMaterial', 'pipDialogs.Translate', 'pipDialogs.Templates']);\r\n\r\n    thisModule.factory('pipInformationDialog',\r\n        function ($mdDialog) {\r\n            return {\r\n                show: function (params, callback) {\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'information/information.html',\r\n                        controller: 'pipInformationDialogController',\r\n                        locals: {params: params},\r\n                        clickOutsideToClose: true\r\n                    })\r\n                        .then(function () {\r\n                            if (callback) {\r\n                                callback();\r\n                            }\r\n                        });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipInformationDialogController',\r\n        function ($scope, $rootScope, $mdDialog, $injector, params) {\r\n            var content = params.message, item;\r\n\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n            if (pipTranslate) {\r\n                pipTranslate.translations('en', {\r\n                    'INFORMATION_TITLE': 'Information'\r\n                });\r\n                pipTranslate.translations('ru', {\r\n                    'INFORMATION_TITLE': 'Информация'\r\n                });\r\n\r\n                $scope.title = params.title || 'INFORMATION_TITLE';\r\n                $scope.ok = params.ok || 'OK';\r\n                content = pipTranslate.translate(content);\r\n            } else {\r\n                $scope.title = params.title || 'Information';\r\n                $scope.ok = params.ok || 'OK';\r\n            }\r\n\r\n            var pipFormat = $injector.has('pipFormat') ? $injector.get('pipFormat') : null;\r\n\r\n            $scope.theme = $rootScope.$theme;\r\n            if (params.item && pipFormat) {\r\n                item = _.truncate(params.item, 25);\r\n                content = pipFormat.sprintf(content, item);\r\n                console.log('content2', content);\r\n            }\r\n            $scope.content = content;\r\n\r\n            $scope.onOk = function () {\r\n                $mdDialog.hide();\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Options dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n * - Remove deleted hack in the controller\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipOptionsDialog',\r\n        ['ngMaterial', 'pipDialogs.Translate', 'pipDialogs.Templates']);\r\n\r\n    thisModule.factory('pipOptionsDialog',\r\n        function ($mdDialog) {\r\n            return {\r\n                show: function (params, successCallback, cancelCallback) {\r\n                    if (params.event) {\r\n                        params.event.stopPropagation();\r\n                        params.event.preventDefault();\r\n                    }\r\n\r\n                    function focusToggleControl() {\r\n                        if (params.event && params.event.currentTarget) {\r\n                            params.event.currentTarget.focus();\r\n                        }\r\n                    }\r\n\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'options/options.html',\r\n                        controller: 'pipOptionsDialogController',\r\n                        locals: {params: params},\r\n                        clickOutsideToClose: true\r\n                    })\r\n                    .then(function (option) {\r\n                        focusToggleControl();\r\n\r\n                        if (successCallback) {\r\n                            successCallback(option);\r\n                        }\r\n                    }, function () {\r\n                        focusToggleControl();\r\n                        if (cancelCallback) {\r\n                            cancelCallback();\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n    thisModule.controller('pipOptionsDialogController',\r\n        function ($scope, $rootScope, $mdDialog, $injector, params) {\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n            if (pipTranslate) {\r\n                pipTranslate.translations('en', {\r\n                    'OPTIONS_TITLE': 'Choose Option'\r\n                });\r\n                pipTranslate.translations('ru', {\r\n                    'OPTIONS_TITLE': 'Выберите опцию'\r\n                });\r\n\r\n                $scope.title = params.title || 'OPTIONS_TITLE';\r\n                $scope.applyButtonTitle = params.appleButtonTitle || 'SELECT';\r\n            } else {\r\n                $scope.title = params.title || 'Choose Option';\r\n                $scope.applyButtonTitle = params.appleButtonTitle || 'Select';\r\n            }\r\n\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.options = params.options;\r\n            $scope.selectedOption = _.find(params.options, {active: true}) || {};\r\n            $scope.selectedOptionName = $scope.selectedOption.name;\r\n            $scope.deleted = params.deleted;\r\n            $scope.deletedTitle = params.deletedTitle;\r\n            $scope.onOptionSelect = function (event, option) {\r\n                event.stopPropagation();\r\n                $scope.selectedOptionName = option.name;\r\n            };\r\n            \r\n            $scope.onKeyPress = function (event) {\r\n                if (event.keyCode === 32 || event.keyCode === 13) {\r\n                    event.stopPropagation();\r\n                    event.preventDefault();\r\n                    $scope.onSelect();\r\n                }\r\n            };\r\n\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n\r\n            $scope.onSelect = function () {\r\n                var option;\r\n\r\n                option = _.find(params.options, {name: $scope.selectedOptionName});\r\n                $mdDialog.hide({option: option, deleted: $scope.deleted});\r\n            };\r\n\r\n            // Setting focus to input control\r\n            function focusInput() {\r\n                var list;\r\n\r\n                list = $('.pip-options-dialog .pip-list');\r\n                list.focus();\r\n            }\r\n\r\n            setTimeout(focusInput, 500);\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Options dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n * - Remove deleted hack in the controller\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipOptionsBigDialog',\r\n        ['ngMaterial', 'pipDialogs.Translate', 'pipDialogs.Templates']);\r\n\r\n    thisModule.factory('pipOptionsBigDialog',\r\n        function ($mdDialog) {\r\n            return {\r\n                show: function (params, successCallback, cancelCallback) {\r\n                    if (params.event) {\r\n                        params.event.stopPropagation();\r\n                        params.event.preventDefault();\r\n                    }\r\n\r\n                    function focusToggleControl() {\r\n                        if (params.event && params.event.currentTarget) {\r\n                            params.event.currentTarget.focus();\r\n                        }\r\n                    }\r\n\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'options/options_big.html',\r\n                        controller: 'pipOptionsDialogBigController',\r\n                        locals: {params: params},\r\n                        clickOutsideToClose: true\r\n                    })\r\n                    .then(function (option) {\r\n                        focusToggleControl();\r\n\r\n                        if (successCallback) {\r\n                            successCallback(option);\r\n                        }\r\n                    }, function () {\r\n                        focusToggleControl();\r\n                        if (cancelCallback) {\r\n                            cancelCallback();\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipOptionsDialogBigController',\r\n        function ($scope, $rootScope, $mdDialog, $injector, params) {\r\n            var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n            if (pipTranslate) {\r\n                pipTranslate.translations('en', {\r\n                    'OPTIONS_TITLE': 'Choose Option'\r\n                });\r\n                pipTranslate.translations('ru', {\r\n                    'OPTIONS_TITLE': 'Выберите опцию'\r\n                });\r\n\r\n                $scope.title = params.title || 'OPTIONS_TITLE';\r\n                $scope.applyButtonTitle = params.applyButtonTitle || 'SELECT';\r\n            } else {\r\n                $scope.title = params.title || 'Choose Option';\r\n                $scope.applyButtonTitle = params.applyButtonTitle || 'Select';\r\n            }\r\n\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.options = params.options;\r\n            $scope.noActions = params.noActions || false;\r\n            $scope.noTitle = params.noTitle || false;\r\n            $scope.hint = params.hint || '';\r\n            $scope.selectedOption = _.find(params.options, {active: true}) || {};\r\n            $scope.selectedOptionName = $scope.selectedOption.name;\r\n            $scope.optionIndex = _.findIndex(params.options, $scope.selectedOption);\r\n\r\n            $scope.deleted = params.deleted;\r\n            $scope.deletedTitle = params.deletedTitle;\r\n\r\n            $scope.onOptionSelect = function (event, option) {\r\n                event.stopPropagation();\r\n                $scope.selectedOptionName = option.name;\r\n\r\n                if ($scope.noActions) {\r\n                    $scope.onSelect();\r\n                }\r\n            };\r\n\r\n            $scope.onSelected = function () {\r\n                $scope.selectedOptionName = $scope.options[$scope.optionIndex].name;\r\n\r\n                if ($scope.noActions) {\r\n                    // $scope.onSelect();\r\n                }\r\n            };\r\n\r\n            $scope.onKeyUp = function (event, index) {\r\n                if (event.keyCode === 32 || event.keyCode === 13) {\r\n                    event.stopPropagation();\r\n                    event.preventDefault();\r\n                    if (index !== undefined && index > -1 && index < $scope.options.length) {\r\n                        $scope.selectedOptionName = $scope.options[index].name;\r\n                        $scope.onSelect();\r\n                    }\r\n                }\r\n            };\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n            $scope.onSelect = function () {\r\n                var option;\r\n\r\n                option = _.find($scope.options, {name: $scope.selectedOptionName});\r\n                $mdDialog.hide({option: option, deleted: $scope.deleted});\r\n            };\r\n            // Setting focus to input control\r\n            function focusInput() {\r\n                var list;\r\n\r\n                list = $('.pip-options-dialog .pip-list');\r\n                list.focus();\r\n            }\r\n\r\n            setTimeout(focusInput, 500);\r\n        }\r\n    );\r\n\r\n})();\r\n","<md-menu md-position-mode=\"target-right target\" class=\"pip-primary-actions\" ng-repeat=\"action in config.primaryLocalActions\">\r\n    <md-button class=\"pip-primary-actions-action md-icon-button\"\r\n                ng-class=\"{ 'pip-primary-actions-hide-sm': action.hideSmall,\r\n                            'pip-primary-actions-show-sm': action.showSmall }\"\r\n                ng-click=\"onActionClick(action, $mdOpenMenu);\"\r\n                ng-hide=\"actionHidden(action)\"\r\n                aria-label=\"{{action.tooltip | translate}}\">\r\n        <!--<md-tooltip ng-if=\"action.tooltip\">{{action.tooltip | translate}}</md-tooltip>-->\r\n        <div class=\"pip-primary-actions-badge\" ng-show=\"action.count > 0\">\r\n            {{actionCount(action)}}\r\n        </div>\r\n        <md-icon md-svg-icon=\"{{action.icon}}\"></md-icon>\r\n    </md-button>\r\n    <md-menu-content width=\"3\" >\r\n        <md-menu-item ng-repeat-start=\"subAction in action.subActions\"\r\n                        ng-if=\"!subAction.divider\"\r\n                        ng-hide=\"actionHidden(subAction)\">\r\n            <md-button ng-hide=\"subAction.divider\"\r\n                        ng-click=\"onActionClick(subAction)\">\r\n                {{subAction.title | translate}}\r\n            </md-button>\r\n        </md-menu-item>\r\n        <md-menu-divider ng-if=\"subAction.divider\" ng-repeat-end></md-menu-divider>\r\n    </md-menu-content>\r\n</md-menu>\r\n\r\n<md-menu md-position-mode=\"target-right target\" class=\"pip-primary-actions\" ng-repeat=\"action in config.primaryGlobalActions\">\r\n    <md-button class=\"pip-primary-actions-action md-icon-button\"\r\n               ng-class=\"{ 'pip-primary-actions-hide-sm': action.hideSmall,\r\n                            'pip-primary-actions-show-sm': action.showSmall }\"\r\n               ng-click=\"onActionClick(action, $mdOpenMenu);\"\r\n               ng-hide=\"actionHidden(action)\"\r\n               aria-label=\"{{action.tooltip | translate}}\">\r\n        <!--<md-tooltip ng-if=\"action.tooltip\">{{action.tooltip | translate}}</md-tooltip>-->\r\n        <div class=\"pip-primary-actions-badge\" ng-show=\"action.count > 0\">\r\n            {{actionCount(action)}}\r\n        </div>\r\n        <md-icon md-svg-icon=\"{{action.icon}}\"></md-icon>\r\n    </md-button>\r\n    <md-menu-content width=\"3\" >\r\n        <md-menu-item ng-repeat-start=\"subAction in action.subActions\"\r\n                      ng-if=\"!subAction.divider\"\r\n                      ng-hide=\"actionHidden(subAction)\">\r\n            <md-button ng-hide=\"subAction.divider\"\r\n                       ng-click=\"onActionClick(subAction)\">\r\n                {{subAction.title | translate}}\r\n            </md-button>\r\n        </md-menu-item>\r\n        <md-menu-divider ng-if=\"subAction.divider\" ng-repeat-end></md-menu-divider>\r\n    </md-menu-content>\r\n</md-menu>\r\n","<md-menu ng-if=\"secondaryActionsVisible()\"\r\n    md-position-mode=\"target-right target\">\r\n    <md-button class=\"md-icon-button\"\r\n        ng-click=\"onSecondaryActionClick(); openMenu($mdOpenMenu, $event);\"\r\n        aria-label=\"open actions\">\r\n        <md-icon md-svg-icon=\"icons:vdots\"></md-icon>\r\n    </md-button>\r\n    <md-menu-content width=\"3\">\r\n        <!-- Local secondary actions -->\r\n        <md-menu-item ng-repeat-start=\"action in config.secondaryLocalActions\"\r\n            ng-if=\"!action.divider\"\r\n            ng-hide=\"actionHidden(action)\">\r\n            <md-button ng-hide=\"action.divider\"\r\n                ng-click=\"onActionClick(action)\">\r\n                {{action.title | translate}}\r\n            </md-button>\r\n        </md-menu-item>\r\n        <md-menu-divider ng-if=\"action.divider\" ng-repeat-end></md-menu-divider>\r\n\r\n        <md-menu-divider ng-if=\"secondaryDividerVisible()\" >\r\n\r\n        </md-menu-divider>\r\n        <!-- Global secondary actions -->\r\n        <md-menu-item ng-repeat-start=\"action in config.secondaryGlobalActions\"\r\n            ng-if=\"!action.divider\"\r\n            ng-hide=\"actionHidden(action)\">\r\n            <md-button ng-hide=\"action.divider\"\r\n                ng-click=\"onActionClick(action)\">\r\n                {{action.title | translate}}\r\n            </md-button>                    \r\n        </md-menu-item>\r\n        <md-menu-divider ng-if=\"action.divider\" ng-repeat-end>\r\n        </md-menu-divider>                        \r\n    </md-menu-content>\r\n</md-menu>\r\n","<!--\r\n@file App Bar component\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-toolbar md-theme-watch=\"true\" ng-if=\"!$partialReset && config.showAppBar\" ng-class=\"config.ngClasses\"\r\n            class=\"{{ config.cssClass }}\" ng-transclude>\r\n</md-toolbar>\r\n","<div>\r\n    <div class=\"hide-xs text-overflow\">\r\n        <!-- Search criteria -->\r\n        <span ng-if=\"vm.config.criteria\"\r\n            ng-click=\"vm.onSearchOpen()\">{{vm.config.criteria}} -</span>\r\n        <!-- Breadcrumb navigation -->\r\n        <span class=\"pip-breadcrumb-item\"\r\n            ng-if=\"vm.config.items && vm.config.items.length > 0\"\r\n            ng-repeat-start=\"item in vm.config.items\"\r\n            ng-click=\"vm.onBreadcrumbClick(item)\"\r\n            ng-init=\"stepWidth = 100/(vm.config.items.length + 1)\"\r\n            ng-class=\"{'cursor-pointer': !$last}\"\r\n            ng-style=\"{'max-width': stepWidth + '%'}\">\r\n            {{item.title | translate}}\r\n        </span>\r\n        <md-icon ng-repeat-end md-svg-icon=\"icons:chevron-right\" ng-hide=\"$last\"></md-icon>\r\n        <!-- Text title -->\r\n        <span class=\"pip-title\" ng-if=\"vm.config.text\">{{vm.config.text | translate}}</span>\r\n    </div>\r\n\r\n    <!-- Mobile breadcrumb dropdown -->\r\n    <md-menu xmd-offset=\"0 48\" class=\"hide-gt-xs\">\r\n        <span class=\"pip-mobile-breadcrumb layout-row\"\r\n            ng-click=\"$mdOpenMenu()\"\r\n            md-ink-ripple\r\n            aria-label=\"open breadcrumb\">\r\n            <span class=\"text-overflow\">\r\n                <!-- Search criteria -->\r\n                <span ng-if=\"vm.config.criteria\"\r\n                    ng-click=\"vm.onSearchOpen()\">{{vm.config.criteria}} -</span>\r\n                <span ng-if=\"vm.config.text\">    \r\n                    {{vm.config.text | translate}}\r\n                </span>   \r\n                <span ng-if=\"vm.config.items && vm.config.items.length > 0\">    \r\n                    {{vm.config.items[vm.config.items.length - 1].title | translate}}\r\n                </span>                   \r\n            </span>\r\n            <md-icon class=\"pip-triangle-down\" md-svg-icon=\"icons:triangle-down\"></md-icon>\r\n        </span>\r\n        <md-menu-content width=\"3\">\r\n            <md-menu-item  ng-repeat=\"item in vm.config.items\" ng-if=\"vm.config.items && vm.config.items.length > 0\">\r\n                <md-button ng-click=\"vm.onBreadcrumbClick(item)\"><span>{{item.title | translate}}</span></md-button>\r\n            </md-menu-item>\r\n            <md-menu-item  ng-if=\"vm.config.text\">\r\n                <md-button><span class=\"text-grey\">{{vm.config.text | translate}}</span></md-button>\r\n            </md-menu-item>\r\n        </md-menu-content>\r\n    </md-menu>\r\n\r\n</div>\r\n","<md-toolbar class=\"md-subhead color-primary-bg {{class}}\" ng-if=\"show()\" ng-class=\"{'md-whiteframe-3dp': $mdMedia('xs')}\">\r\n    <div class=\"pip-divider\"></div>\r\n        <md-select ng-model=\"selectedIndex\" ng-disabled=\"disabled()\" md-container-class=\"pip-full-width-dropdown\" aria-label=\"DROPDOWN\" md-ink-ripple md-on-close=\"onSelect(selectedIndex)\">\r\n            <md-option ng-repeat=\"action in actions\" value=\"{{ ::$index }}\" ng-selected=\"activeIndex == $index ? true : false\">\r\n                {{ (action.title || action.name) | translate }}\r\n            </md-option>\r\n        </md-select>\r\n</md-toolbar>","<md-menu md-position-mode=\"target-right target\">\r\n    <span class=\"pip-language\"\r\n        ng-click=\"$mdOpenMenu()\"\r\n        aria-label=\"language selection\">\r\n        {{vm.language | translate}}\r\n        <md-icon md-svg-icon=\"icons:triangle-down\"></md-icon>\r\n    </span>\r\n    <md-menu-content width=\"3\">\r\n        <md-menu-item ng-repeat=\"language in vm.languages\">\r\n            <md-button ng-click=\"vm.onLanguageClick(lang)\">{{language | translate}}</md-button>\r\n        </md-menu-item>\r\n    </md-menu-content>\r\n</md-menu>\r\n","<md-toolbar md-theme=\"{{ $theme }}\" ng-hide=\"!title\" class=\"layout-row layout-align-start-center\">\r\n\r\n    <md-button class=\"pip-nav-header-user md-icon-button\"\r\n                ng-click=\"onUserClick()\"\r\n                aria-label=\"current user\">\r\n\r\n        <img  src=\"\" class=\"pip-nav-header-user-image\" ng-class=\"imageCss\"></img>\r\n    </md-button>\r\n    \r\n    <div class=\"pip-nav-header-user-text\">\r\n        <a class=\"pip-nav-header-user-pri\"\r\n            ng-click=\"onUserClick()\">\r\n            {{ title }}\r\n        </a>\r\n        <div class=\"pip-nav-header-user-sec\">\r\n            {{ subtitle | translate }}\r\n        </div>\r\n    </div>\r\n\r\n</md-toolbar>\r\n","<md-button class=\"md-icon-button pip-nav-icon\"\r\n            ng-if=\"config.type != 'none'\"\r\n            ng-class=\"config.class\"\r\n            ng-click=\"onNavIconClick()\"\r\n            aria-label=\"menu\">\r\n    <!-- Menu icon -->\r\n    <md-icon ng-if=\"config.type=='menu'\"\r\n        md-svg-icon=\"icons:menu\"></md-icon>\r\n    <!-- Image -->\r\n    <img ng-src=\"{{config.imageUrl}}\" ng-if=\"config.type=='image'\" height=\"24\" width=\"24\">\r\n    <!--<pip-avatar ng-if=\"config.navIconType=='menu' && (getParty() && !getUser('owner'))\"\r\n                pip-rebind-avatar=\"true\"\r\n                pip-rebind=\"true\"\r\n                pip-image-url=\"partyAvatarUrl\"\r\n                pip-party-id=\"getParty('id')\" class=\"pip-face\"\r\n                pip-party-name=\"getParty('name')\">\r\n    </pip-avatar>-->\r\n    <!-- Back icon -->\r\n    <md-icon ng-if=\"config.type=='back'\"\r\n        md-svg-icon=\"icons:arrow-left\"></md-icon>\r\n    <!--Icon -->\r\n    <md-icon ng-if=\"config.type=='icon'\"\r\n             md-svg-icon=\"icons:{{config.iconName}}\"></md-icon>\r\n</md-button>\r\n","<md-list>\r\n    <div class=\"pip-section\" ng-repeat=\"section in config\"\r\n        ng-hide=\"section.access && !section.access(section)\">\r\n        \r\n        <md-divider ng-show=\"$index > 0 && !isSectionEmpty(section.links)\"></md-divider>\r\n        <md-subheader ng-show=\"section.title\">{{::section.title | translate}}</md-subheader>\r\n        \r\n        <md-list-item class=\"pip-focusable no-border\" \r\n            ng-repeat=\"link in section.links\"\r\n            ng-click=\"onLinkClick($event, link)\"\r\n            ng-hide=\"link.access && !link.access(link)\">\r\n            <md-icon md-svg-icon=\"{{link.icon}}\" \r\n                ng-hide=\"!link.icon\" \r\n                class=\"tm0 bm0\"></md-icon>\r\n            <p>{{::link.title | translate}}</p>\r\n        </md-list-item>\r\n    </div>\r\n</md-list>\r\n","<div class=\"md-toolbar-tools layout-row\" ng-if=\"searchEnabled\">\r\n    <md-button class=\"md-icon-button\" \r\n        aria-label=\"start search\" \r\n        ng-click=\"onSearchClick()\">\r\n        <md-icon md-svg-icon=\"icons:search\"></md-icon>\r\n    </md-button>\r\n    <input class=\"pip-search-text flex\"\r\n        type=\"search\"\r\n        ng-model=\"search.text\" \r\n        ng-keydown=\"onSearchKeyDown($event)\" />\r\n    <md-button class=\"md-icon-button\" \r\n        aria-label=\"clear search\" \r\n        ng-click=\"onSearchClear()\">\r\n        <md-icon md-svg-icon=\"icons:cross-circle\"></md-icon>\r\n    </md-button>\r\n</div>\r\n<div class=\"md-toolbar-tools layout-row layout-align-end-center\"  ng-if=\"!searchEnabled\">\r\n    <md-button class=\"md-icon-button\"\r\n               aria-label=\"start search\"\r\n               ng-click=\"onSearchEnable()\">\r\n        <md-icon md-svg-icon=\"icons:search\"></md-icon>\r\n    </md-button>\r\n</div>\r\n","<!--\r\n@file Side Nav component\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-sidenav class=\"md-sidenav-left md-whiteframe-z2 pip-sidenav color-content-bg\"\r\n    md-component-id=\"pip-sidenav\" ng-if=\"!$partialReset\" pip-focused ng-transclude>\r\n</md-sidenav>\r\n","<md-toolbar md-theme=\"{{ $theme }}\" ng-hide=\"!title\" class=\"layout-row layout-align-start-center\">\r\n\r\n    <md-button class=\"pip-sticky-nav-header-user md-icon-button flex-fixed\"\r\n                ng-click=\"onUserClick()\"\r\n                aria-label=\"current user\">\r\n\r\n        <img  src=\"\" class=\"pip-sticky-nav-header-user-image flex-fixed\" ng-class=\"imageCss\"></img>\r\n    </md-button>\r\n    \r\n    <div class=\"pip-sticky-nav-header-user-text\">\r\n        <a class=\"pip-sticky-nav-header-user-pri\"\r\n            ng-click=\"onUserClick()\">\r\n            {{ title }}\r\n        </a>\r\n        <div class=\"pip-sticky-nav-header-user-sec\">\r\n            {{ subtitle | translate }}\r\n        </div>\r\n    </div>\r\n\r\n</md-toolbar>\r\n","<md-list>\r\n    <md-list-item class=\"pip-focusable no-border pip-sticky-nav-menu-item pip-sticky-nav-expanded-button\" ng-click=\"onExpand()\">\r\n        <md-icon md-svg-icon=\"icons:chevron-left\" ng-if=\"expanded\" class=\"pip-sticky-nav-menu-icon\"></md-icon>\r\n        <md-icon md-svg-icon=\"icons:chevron-right\" ng-if=\"!expanded\" class=\"pip-sticky-nav-menu-icon\"></md-icon>\r\n    </md-list-item>    \r\n    <div class=\"pip-section\" ng-repeat=\"section in config\"\r\n        ng-hide=\"section.access && !section.access(section)\">\r\n\r\n        <md-divider ng-show=\"$index > 0 && !isSectionEmpty(section.links)\"></md-divider>\r\n        <md-subheader ng-show=\"section.title\" style=\"height: 48px;\">\r\n             <!--|| !expanded && section.icon-->\r\n            <span ng-if=\"expanded\">\r\n                {{::section.title | translate}}\r\n            </span>\r\n            <md-icon md-svg-icon=\"{{section.icon}}\" ng-if=\"!expanded && section.icon\" class=\"pip-sticky-nav-menu-icon\"></md-icon>\r\n            <md-icon md-svg-icon=\"{{defaultIicon}}\" ng-if=\"!expanded && !section.icon\" class=\"pip-sticky-nav-menu-icon\"></md-icon>\r\n        </md-subheader>\r\n        \r\n        <md-list-item class=\"pip-focusable no-border pip-sticky-nav-menu-item\" \r\n            ng-repeat=\"link in section.links\"\r\n            ng-click=\"onLinkClick($event, link)\"\r\n            ng-hide=\"link.access && !link.access(link)\">\r\n            <md-icon md-svg-icon=\"{{link.icon}}\" \r\n                ng-hide=\"!link.icon\" \r\n                class=\"pip-sticky-nav-menu-icon\"></md-icon>\r\n            <p class=\"pip-sticky-nav-menu-title\">{{::link.title | translate}}</p>\r\n            <div class=\"flex pip-sticky-nav-menu-expander\"></div>\r\n            <div class=\"pip-sticky-nav-menu-badge color-badge-bg flex-fixed\" ng-if=\"link.count\">\r\n                 {{link.count}} \r\n            </div>\r\n        </md-list-item>\r\n    </div>\r\n</md-list>\r\n","<!--\r\n@file Sticky Side Nav component\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-sidenav class=\"md-sidenav-left\" md-is-locked-open=\"$mdMedia('gt-xs')\" \r\n    md-component-id=\"pip-sticky-sidenav\" ng-if=\"!$partialReset\" pip-focused ng-transclude>\r\n</md-sidenav>\r\n\r\n","<md-toolbar class=\"pip-nav {{ class }}\" ng-class=\"{'pip-visible': show(), 'pip-shadow': showShadow()}\">\r\n    <md-tabs ng-if=\"$mdMedia('gt-xs')\" md-selected=\"activeTab\" ng-class=\"{'disabled': disabled()}\"\r\n             md-stretch-tabs=\"true\" md-dynamic-height=\"true\">\r\n        <md-tab ng-repeat=\"tab in tabs track by $index\" ng-disabled=\"tabDisabled($index)\"\r\n                md-on-select=\"onSelect($index)\">\r\n            <md-tab-label>\r\n                {{::tab.nameLocal }}\r\n                <div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 0 && tab.newCounts <= 99\">\r\n                    {{::tab.newCounts }}\r\n                </div>\r\n                <div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 99\">!</div>\r\n            </md-tab-label>\r\n        </md-tab>\r\n    </md-tabs>\r\n    <div class=\"md-subhead pip-tabs-content color-primary-bg  \" ng-if=\"$mdMedia('xs')\">\r\n        <div class=\"pip-divider position-top m0\"></div>\r\n        <md-select ng-model=\"activeIndex\" ng-disabled=\"disabled()\"\r\n                   md-container-class=\"pip-full-width-dropdown\" aria-label=\"SELECT\" md-ink-ripple\r\n                   md-on-close=\"onSelect(activeIndex)\">\r\n            <md-option ng-repeat=\"tab in tabs track by $index\" value=\"{{ ::$index }}\">\r\n                {{ ::tab.nameLocal }}\r\n                <div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 0 && tab.newCounts <= 99\">\r\n                    {{ ::tab.newCounts }}\r\n                </div>\r\n                <div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 99\">!</div>\r\n            </md-option>\r\n        </md-select>\r\n    </div>\r\n</md-toolbar>\r\n","/// <reference path=\"../typings/tsd.d.ts\" />\r\n\r\nmodule pip.nav {\r\n    'use strict';\r\n\r\n    angular.module('pipNav', [\r\n        'pipNav.Service',\r\n\r\n        'pipDropdown',\r\n        'pipTabs',\r\n\r\n        'pipAppBar',\r\n        'pipNavIcon',\r\n        'pipBreadcrumb',\r\n        'pipPrimaryActions', \r\n        'pipSecondaryActions',\r\n        'pipSideNav',\r\n        'pipNavMenu',\r\n        'pipNavHeader',\r\n        'pipStickySideNav',\r\n        'pipStickyNavMenu',\r\n        'pipStickyNavHeader'\r\n    ]);\r\n    \r\n}\r\n\r\n\r\n","/// <reference path=\"../typings/tsd.d.ts\" />\r\n/// <reference path=\"./breadcrumb/breadcrumb_service.ts\" />\r\n\r\nmodule pip.nav {\r\n    'use strict';\r\n\r\n    export interface INavService {\r\n        appBar: any;\r\n        navIcon: any; \r\n        breadcrumb: IBreadcrumbService;\r\n        actions: any;\r\n        search: any;\r\n        sideNav: any;\r\n        navHeader: any;\r\n        navMenu: any;   \r\n   }\r\n\r\n    class NavService implements INavService {\r\n        public constructor($injector) {\r\n            \"ngInject\";\r\n\r\n            this.appBar = $injector.has('pipAppBar') ? $injector.get('pipAppBar') : null;\r\n            this.navIcon = $injector.has('pipNavIcon') ? $injector.get('pipNavIcon') : null;\r\n            this.breadcrumb = $injector.has('pipBreadcrumb') ? $injector.get('pipBreadcrumb') : null;\r\n            this.actions = $injector.has('pipActions') ? $injector.get('pipActions') : null;\r\n            this.search = $injector.has('pipSearch') ? $injector.get('pipSearch') : null;\r\n            this.sideNav = $injector.has('pipSideNav') ? $injector.get('pipSideNav') : null;\r\n            this.navHeader = $injector.has('pipNavHeader') ? $injector.get('pipNavHeader') : null;\r\n            this.navMenu = $injector.has('pipNavMenu') ? $injector.get('pipNavMenu') : null;    \r\n        }\r\n\r\n        public appBar: any;\r\n        public navIcon: any;\r\n        public breadcrumb: IBreadcrumbService;\r\n        public actions: any;\r\n        public search: any;\r\n        public sideNav: any;        \r\n        public navHeader: any;\r\n        public navMenu: any;    \r\n    }\r\n\r\n    angular.module('pipNav.Service', [])\r\n        .service('pipNavService', NavService);\r\n\r\n}","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipActions.Service', []);\r\n\r\n    thisModule.provider('pipActions', function (): any {\r\n        var config = {\r\n            // Primary global actions visible on the screen\r\n            primaryGlobalActions: [],\r\n            // Primary local actions visible on the screen\r\n            primaryLocalActions: [],\r\n\r\n            // Secondary global actions available in popup\r\n            secondaryGlobalActions: [],\r\n            // Secondary local actions available in popup\r\n            secondaryLocalActions: []\r\n        };\r\n\r\n        // Configure global parameters\r\n        this.globalActions = globalActions;\r\n        this.globalPrimaryActions = globalPrimaryActions;\r\n        this.globalSecondaryActions = globalSecondaryActions;\r\n\r\n        // Get the service instance\r\n        this.$get = function ($rootScope) {\r\n            return {\r\n                config: getConfig,\r\n                \r\n                show: showLocalActions,\r\n                hide: hideLocalActions,\r\n                count: updateActionCount,\r\n            };\r\n\r\n            // ----------------------\r\n\r\n            function getConfig() {\r\n                return config;\r\n            }\r\n\r\n            // Show actions\r\n            function hideLocalActions() {\r\n                config.primaryLocalActions = [];\r\n                config.secondaryLocalActions = [];\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showLocalActions(primaryActions, secondaryActions) {\r\n                config.primaryLocalActions = primaryActions || [];\r\n                config.secondaryLocalActions = secondaryActions || [];\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            // Todo: Why do we need that? it's needs for count badge \r\n            function updateActionCount(actionName, count) {\r\n                // Update global actions\r\n                _.each(config.primaryGlobalActions, function (action) {\r\n                    if (action.name === actionName) {\r\n                        action.count = count;\r\n                    }\r\n                });\r\n                // Update local action\r\n                _.each(config.primaryLocalActions, function (action) {\r\n                    if (action.name === actionName) {\r\n                        action.count = count;\r\n                    }\r\n                });\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function sendConfigEvent() {\r\n                $rootScope.$broadcast('pipActionsChanged', config);\r\n            }\r\n        };\r\n\r\n        function globalActions(primaryActions, secondaryActions) {\r\n            config.primaryGlobalActions = primaryActions || [];\r\n            config.secondaryGlobalActions = secondaryActions || [];\r\n        }\r\n\r\n        function globalPrimaryActions(primaryActions) {\r\n            config.primaryGlobalActions = primaryActions || [];\r\n        }\r\n\r\n        function globalSecondaryActions(secondaryActions) {\r\n            config.secondaryGlobalActions = secondaryActions || [];\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPrimaryActions',\r\n        ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates', 'pipActions.Service']);\r\n\r\n    // Main application header directive\r\n    thisModule.directive('pipPrimaryActions', function () {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                localActions: '=pipLocalActions',\r\n                globalActions: '=pipGlobalActions'\r\n            },\r\n            replace: false,\r\n            templateUrl: function (element, attr) {\r\n                return 'actions/primary_actions.html';\r\n            },\r\n            controller: 'pipPrimaryActionsController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipPrimaryActionsController',\r\n        function ($scope, $element, $attrs, $rootScope, $window, $location, $injector, pipActions) {\r\n            // Apply class and call resize\r\n            $element.addClass('pip-primary-actions');\r\n\r\n            $scope.config = pipActions.config();\r\n\r\n            if ($scope.localActions) {\r\n                pipActions.showLocalActions();\r\n                $scope.config.primaryLocalActions = $scope.localActions[0];\r\n            }\r\n\r\n            if ($scope.globalActions) {\r\n                pipActions.showLocalActions();\r\n                $scope.config.primaryGlobalActions = $scope.globalActions[0];\r\n            }\r\n\r\n            $rootScope.$on('pipActionsChanged', onActionsChanged);\r\n\r\n            $scope.actionHidden = actionHidden;\r\n            $scope.actionCount = actionCount;\r\n\r\n            $scope.onActionClick = onActionClick;\r\n\r\n            function onActionsChanged(event, config) {\r\n                $scope.config = config;\r\n            }\r\n\r\n            function actionHidden(action) {\r\n                return action.access && !action.access(action);\r\n            }\r\n\r\n            function actionCount(action) {\r\n                if (action.count === null || action.count <= 0) {\r\n                    return '';\r\n                }\r\n                if (action.count > 99) {\r\n                    return '!';\r\n                }\r\n\r\n                return action.count;\r\n            }\r\n\r\n            function calcActions(actions) {\r\n                var count = 0;\r\n\r\n                _.each(actions, function (action) {\r\n                    if (!actionHidden(action)) {\r\n                        count++;\r\n                    }\r\n                });\r\n\r\n                return count;\r\n            }\r\n\r\n            function secondaryActionsVisible() {\r\n                return calcActions($scope.config.secondaryGlobalActions) > 0 ||\r\n                    calcActions($scope.config.secondaryLocalActions) > 0;\r\n            }\r\n\r\n            function secondaryDividerVisible() {\r\n                return calcActions($scope.config.secondaryGlobalActions) > 0 &&\r\n                    calcActions($scope.config.secondaryLocalActions) > 0;\r\n            }\r\n\r\n            function onActionClick(action, $mdOpenMenu) {\r\n                if (!action || action.divider) {\r\n                    return;\r\n                }\r\n\r\n                if (action.close) {\r\n                    $scope.originatorEv = null;\r\n                }\r\n\r\n                if (action.menu) {\r\n                    $mdOpenMenu($scope.originatorEv);\r\n                    return;\r\n                }\r\n\r\n                if (action.callback) {\r\n                    action.callback();\r\n                    return;\r\n                }\r\n\r\n                if (action.href) {\r\n                    $window.location.href = action.href;\r\n                    return;\r\n                }\r\n\r\n                if (action.url) {\r\n                    $location.url(action.url);\r\n                    return;\r\n                }\r\n\r\n                if (action.state) {\r\n                    if ($injector.has('$state')) {\r\n                        var $state = $injector.get('$state');\r\n                        $state.go(action.state, action.stateParams);\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                if (action.event) {\r\n                    $rootScope.$broadcast(action.event);\r\n                } else {\r\n                    // Otherwise raise notification\r\n                    $rootScope.$broadcast('pipActionClicked', action.name);\r\n                }\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSecondaryActions',\r\n        ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates', 'pipActions.Service']);\r\n\r\n    // Main application header directive\r\n    thisModule.directive('pipSecondaryActions', function () {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                title: '=pipTitle',\r\n                showMenu: '=pipShowMenu',\r\n                localActions: '=pipLocalActions',\r\n                globalActions: '=pipGlobalActions',\r\n                partyAvatarUrl: '=pipPartyAvatarUrl'\r\n            },\r\n            replace: false,\r\n            templateUrl: function (element, attr) {\r\n                return 'actions/secondary_actions.html';\r\n            },\r\n            controller: 'pipSecondaryActionsController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipSecondaryActionsController',\r\n        function ($scope, $element, $attrs, $rootScope, $window, $location, $injector, pipActions) {\r\n            // Apply class and call resize\r\n            $element.addClass('pip-secondary-actions');\r\n\r\n            $scope.config = pipActions.config();\r\n\r\n            if ($scope.localActions) {\r\n                pipActions.showLocalActions();\r\n                $scope.config.secondaryLocalActions = $scope.localActions[1];\r\n            }\r\n\r\n            if ($scope.globalActions) {\r\n                pipActions.showLocalActions();\r\n                $scope.config.secondaryGlobalActions = $scope.globalActions[0];\r\n            }\r\n\r\n            $rootScope.$on('pipActionsChanged', onActionsChanged);\r\n\r\n            $scope.actionHidden = actionHidden;\r\n            $scope.actionCount = actionCount;\r\n            $scope.secondaryActionsVisible = secondaryActionsVisible;\r\n            $scope.secondaryDividerVisible = secondaryDividerVisible;\r\n\r\n            $scope.onActionClick = onActionClick;\r\n\r\n            $scope.openMenu = openMenu;\r\n\r\n            function openMenu($mdOpenMenu, ev) {\r\n                $scope.originatorEv = ev;\r\n                $mdOpenMenu(ev);\r\n            }\r\n\r\n            function onActionsChanged(event, config) {\r\n                $scope.config = config;\r\n            }\r\n\r\n            function actionHidden(action) {\r\n                return action.access && !action.access(action);\r\n            }\r\n\r\n            function actionCount(action) {\r\n                if (action.count === null || action.count <= 0) {\r\n                    return '';\r\n                }\r\n                if (action.count > 99) {\r\n                    return '!';\r\n                }\r\n\r\n                return action.count;\r\n            }\r\n\r\n            function calcActions(actions) {\r\n                var count = 0;\r\n\r\n                _.each(actions, function (action) {\r\n                    if (!actionHidden(action)) {\r\n                        count++;\r\n                    }\r\n                });\r\n\r\n                return count;\r\n            }\r\n\r\n            function secondaryActionsVisible() {\r\n                return calcActions($scope.config.secondaryGlobalActions) > 0 ||\r\n                    calcActions($scope.config.secondaryLocalActions) > 0;\r\n            }\r\n\r\n            function secondaryDividerVisible() {\r\n                return calcActions($scope.config.secondaryGlobalActions) > 0 &&\r\n                    calcActions($scope.config.secondaryLocalActions) > 0;\r\n            }\r\n\r\n            function onActionClick(action, $mdOpenMenu) {\r\n                if (!action || action.divider) {\r\n                    return;\r\n                }\r\n\r\n                if (action.close) {\r\n                    $scope.originatorEv = null;\r\n                }\r\n\r\n                if (action.menu) {\r\n                    $mdOpenMenu($scope.originatorEv);\r\n                    return;\r\n                }\r\n\r\n                if (action.callback) {\r\n                    action.callback();\r\n                    return;\r\n                }\r\n\r\n                if (action.href) {\r\n                    $window.location.href = action.href;\r\n                    return;\r\n                }\r\n\r\n                if (action.url) {\r\n                    $location.url(action.url);\r\n                    return;\r\n                }\r\n\r\n                if (action.state) {\r\n                    if ($injector.has('$state')) {\r\n                        var $state = $injector.get('$state');\r\n                        $state.go(action.state, action.stateParams);\r\n                    }\r\n                    return;\r\n                }\r\n\r\n                if (action.event) {\r\n                    $rootScope.$broadcast(action.event);\r\n                } else {\r\n                    // Otherwise raise notification\r\n                    $rootScope.$broadcast('pipActionClicked', action.name);\r\n                }\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipAppBar',\r\n        ['ngMaterial', 'pipNav.Templates', 'pipAppBar.Service']);\r\n\r\n    // Main application header directive\r\n    thisModule.directive('pipAppbar', function () {\r\n        return {\r\n            restrict: 'E',\r\n            transclude: true,\r\n            scope: true,\r\n            templateUrl: 'appbar/appbar.html',\r\n            controller: 'pipAppBarController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipAppBarController',\r\n        function ($scope, $element, $rootScope, pipAppBar) {\r\n            // Apply class and call resize\r\n            $element.addClass('pip-appbar');\r\n            $element.addClass('color-primary-bg');\r\n            \r\n            $scope.$emit('pipResizeWindow');\r\n\r\n            $scope.config = pipAppBar.config();\r\n\r\n            $rootScope.$on('pipAppBarChanged', onAppBarChanged);\r\n\r\n            function onAppBarChanged(event, config) {\r\n                $scope.config = config;\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipAppBar.Part', ['pipAppBar.Service']);\r\n\r\n    // Example is taken from here: http://stackoverflow.com/questions/20325480/angularjs-whats-the-best-practice-to-add-ngif-to-a-directive-programmatically\r\n    thisModule.directive('pipAppbarPart', function (ngIfDirective) {\r\n        var ngIf = ngIfDirective[0];\r\n\r\n        return {\r\n            transclude: ngIf.transclude,\r\n            priority: ngIf.priority,\r\n            terminal: ngIf.terminal,\r\n            restrict: ngIf.restrict,\r\n            scope: true,\r\n            link: function linkFunction($scope: any, $element, $attrs: any) {\r\n                // Visualize based on visible variable in scope\r\n                $attrs.ngIf = function () {\r\n                    return $scope.visible;\r\n                };\r\n                ngIf.link.apply(ngIf, arguments);\r\n            },\r\n            controller: 'pipAppBarPartController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipAppBarPartController',\r\n        function ($scope, $element, $attrs, $rootScope, pipAppBar) {\r\n            var partName = '' + $attrs.pipAppbarPart;\r\n            var partValue = null;\r\n\r\n            // Break part apart\r\n            var pos = partName.indexOf(':');\r\n            if (pos > 0) {\r\n                partValue = partName.substr(pos + 1);\r\n                partName = partName.substr(0, pos);\r\n            }\r\n\r\n            onAppBarChanged(null, pipAppBar.config());\r\n\r\n            $rootScope.$on('pipAppBarChanged', onAppBarChanged);\r\n\r\n            function onAppBarChanged(event, config) {\r\n                var parts = config.parts || {};\r\n                var currentPartValue = parts[partName];\r\n\r\n                // Set visible variable to switch ngIf\r\n                var visible = !!(partValue ? currentPartValue == partValue : currentPartValue);\r\n\r\n                if (visible != $scope.visible)\r\n                    $scope.visible = visible;\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipAppBar.Service', []);\r\n\r\n    thisModule.provider('pipAppBar', function (): any {\r\n        var config = {\r\n            // Theme to be applied to the header\r\n            theme: 'default',\r\n            cssClass: '',\r\n            ngClasses: {},\r\n            // Parts of the appbar\r\n            parts: {},\r\n            showAppBar: true\r\n        };\r\n\r\n        // Configure global parameters\r\n        this.theme = theme;\r\n        this.parts = initParts;\r\n\r\n        // Get the service instance\r\n        this.$get = function ($rootScope) {\r\n            return {\r\n                config: getConfig,\r\n                cssClass: cssClass,\r\n\r\n                part: getOrSetPart,\r\n                parts: getOrSetParts,\r\n                \r\n                show: showAppBar,\r\n                hide: hideAppBar,\r\n                showShadow: showShadow,\r\n                showShadowSm: showShadowSm,\r\n                showShadowSmXs: showShadowSmXs,\r\n                hideShadow: hideShadow\r\n            };\r\n\r\n            // ----------------------\r\n\r\n            function getConfig() {\r\n                return config;\r\n            }\r\n\r\n            // Todo: Do we need that \"hack\"?\r\n            function cssClass(newCssClass) {\r\n                if (newCssClass != undefined) {\r\n                    config.cssClass = newCssClass;\r\n                    sendConfigEvent();\r\n                }\r\n\r\n                return config.cssClass;\r\n            }\r\n\r\n            // Show, show appbar \r\n            function showAppBar() {\r\n                config.showAppBar = true;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            // Show, hide appbar \r\n            function hideAppBar() {\r\n                config.showAppBar = false;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            // Show, hide appbar shadow\r\n            function showShadowSm() {\r\n                config.ngClasses['pip-shadow'] = false;\r\n                config.ngClasses['pip-shadow-sm'] = true;\r\n                config.ngClasses['pip-shadow-xs'] = false;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showShadowSmXs() {\r\n                config.ngClasses['pip-shadow'] = false;\r\n                config.ngClasses['pip-shadow-sm'] = true;\r\n                config.ngClasses['pip-shadow-xs'] = true;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showShadow() {\r\n                config.ngClasses['pip-shadow'] = true;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function hideShadow() {\r\n                config.ngClasses['pip-shadow'] = false;\r\n                config.ngClasses['pip-shadow-sm'] = false;\r\n                config.ngClasses['pip-shadow-xs'] = false;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function getOrSetPart(name, value) {\r\n                if (!_.isString(name))\r\n                    throw new Error(\"Part name has to be a string\");\r\n\r\n                if (value != undefined) {\r\n                    if (config.parts[name] != value) {\r\n                        config.parts[name] = value;\r\n                        sendConfigEvent();\r\n                    }\r\n                }\r\n\r\n                return config.parts[name];\r\n            }\r\n\r\n            function getOrSetParts(parts) {\r\n                if (_.isObject(parts)) {\r\n                    if (!_.isEqual(config.parts, parts)) {\r\n                        config.parts = parts;\r\n                        sendConfigEvent();\r\n                    }\r\n                }\r\n\r\n                return config.parts;\r\n            }\r\n\r\n            function sendConfigEvent() {\r\n                $rootScope.$broadcast('pipAppBarChanged', config);\r\n            }\r\n        };\r\n\r\n        function theme(theme) {\r\n            config.theme = theme || config.theme;\r\n\r\n            return config.theme;\r\n        }\r\n\r\n        function initParts(parts) {\r\n            if (_.isObject(parts)) {\r\n                config.parts = parts;\r\n            }\r\n            return config.parts;\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n/// <reference path=\"./breadcrumb_service.ts\" />\r\n\r\nmodule pip.nav {\r\n\r\n    class BreadcrumbController {\r\n        private _rootScope: ng.IRootScopeService;\r\n        private _window: ng.IWindowService;\r\n        \r\n        public config: BreadcrumbConfig;\r\n\r\n        public constructor(\r\n            $scope: ng.IScope,\r\n            $element: any, \r\n            $attrs: any, \r\n            $rootScope: ng.IRootScopeService,\r\n            $window: ng.IWindowService,\r\n            $state: ng.ui.IStateService,\r\n            pipBreadcrumb: IBreadcrumbService\r\n        ) {\r\n            \"ngInject\";\r\n\r\n            this._rootScope = $rootScope;\r\n            this._window = $window;\r\n\r\n            // Apply class and call resize\r\n            $element.addClass('pip-breadcrumb');\r\n\r\n            this.config = pipBreadcrumb.config;\r\n\r\n            $rootScope.$on(BreadcrumbChangedEvent, this.onBreadcrumbChanged);\r\n            $rootScope.$on(BreadcrumbBackEvent, this.onBreadcrumbBack);\r\n        }\r\n\r\n        private onBreadcrumbChanged(event, config) {\r\n            this.config = config;\r\n        }\r\n\r\n        private onBreadcrumbBack() {\r\n            let items = this.config.items;\r\n            // Go to the last breadcrumb item\r\n            if (_.isArray(items) && items.length > 0) {\r\n                let backCallback = (<any>items[items.length - 1]).click;\r\n                if (_.isFunction(backCallback)) \r\n                    backCallback();\r\n                else\r\n                    this._window.history.back();\r\n            } else\r\n                this._window.history.back();\r\n        }\r\n\r\n        public onBreadcrumbClick(item) {\r\n            if (_.isFunction(item.click))\r\n                item.click(item);\r\n        }\r\n\r\n        public onSearchOpen() {\r\n            this._rootScope.$broadcast('pipSearchOpen');\r\n        }\r\n    }\r\n\r\n    function breadcrumbDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {},\r\n            replace: false,\r\n            templateUrl: function (element, attr) {\r\n                return 'breadcrumb/breadcrumb.html';\r\n            },\r\n            controller: BreadcrumbController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipBreadcrumb', [\r\n            'ngMaterial',\r\n            'pipNav.Templates',\r\n            'pipNav.Translate',\r\n            'pipBreadcrumb.Service'\r\n        ])\r\n        .directive('pipBreadcrumb', breadcrumbDirective);\r\n\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.nav {\r\n\r\n    export let BreadcrumbChangedEvent = \"pipBreadcrumbChanged\";\r\n    export let BreadcrumbBackEvent = \"pipBreadcrumbBack\";\r\n\r\n    export class BreadcrumbItem {\r\n        title: string;\r\n        click: () => void;\r\n    }\r\n\r\n    export class BreadcrumbConfig {\r\n        text: string;\r\n        items: BreadcrumbItem[];\r\n        criteria: string;\r\n    }\r\n\r\n    export interface IBreadcrumbService {\r\n        config: BreadcrumbConfig;\r\n        text: string;\r\n        items: BreadcrumbItem[];\r\n        criteria: string;\r\n    }\r\n\r\n    export interface IBreadcrumbProvider extends ng.IServiceProvider {\r\n        text: string;\r\n    }\r\n\r\n    class BreadcrumbService implements IBreadcrumbService {\r\n        private _config: BreadcrumbConfig;\r\n        private _rootScope: ng.IRootScopeService;\r\n\r\n        public constructor(\r\n            config: BreadcrumbConfig,\r\n            $rootScope: ng.IRootScopeService\r\n        ) {\r\n            this._config = config;\r\n            this._rootScope = $rootScope;\r\n        }\r\n\r\n        public get config() {\r\n            return this._config;\r\n        }\r\n\r\n        public get text(): string {\r\n            return this._config.text;\r\n        }\r\n    \r\n        public set text(value: string) {\r\n            this._config.text = value;\r\n            this._config.items = null;\r\n\r\n            this.sendEvent();\r\n        }\r\n\r\n        public get items(): BreadcrumbItem[] {\r\n            return this._config.items;\r\n        }\r\n\r\n        public set items(value: BreadcrumbItem[]) {\r\n            this._config.text = null;\r\n            this._config.items = value;\r\n\r\n            this.sendEvent();\r\n        }\r\n\r\n        public get criteria(): string {\r\n            return this._config.criteria;\r\n        }\r\n\r\n        public set criteria(value: string) {\r\n            this._config.criteria = value;\r\n            this.sendEvent();\r\n        }\r\n\r\n        public sendEvent() {\r\n            this._rootScope.$broadcast(pip.nav.BreadcrumbChangedEvent, this._config);\r\n        }\r\n    }\r\n\r\n    class BreadcrumbProvider implements IBreadcrumbProvider {\r\n        private _config: BreadcrumbConfig = { \r\n            text: null,\r\n            items: null,\r\n            criteria: null\r\n        };\r\n        private _service: IBreadcrumbService;\r\n\r\n        public get text(): string {\r\n            return this._config.text;\r\n        }\r\n\r\n        public set text(value: string) {\r\n            this._config.text = value;\r\n        }\r\n\r\n        public $get($rootScope: ng.IRootScopeService): any {\r\n            \"ngInject\";\r\n\r\n            if (this._service == null)\r\n                this._service = new BreadcrumbService(this._config, $rootScope);\r\n\r\n            return this._service;\r\n        }\r\n    }\r\n\r\n    angular\r\n        .module('pipBreadcrumb.Service', [])\r\n        .provider('pipBreadcrumb', BreadcrumbProvider);\r\n\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDropdown', ['pipNav.Templates']);\r\n\r\n    thisModule.directive('pipDropdown',\r\n        function ($mdMedia) {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    actions: '=pipActions',\r\n                    showDropdown: '&pipShow',\r\n                    activeIndex: '=pipActiveIndex',\r\n                    select: '=pipDropdownSelect'\r\n                },\r\n                templateUrl: 'dropdown/dropdown.html',\r\n                controller:\r\n                    function ($scope, $element, $attrs, localStorageService) {\r\n                        // Todo: Remove dependency on local storage or make it optional\r\n                        $scope.class = ($attrs.class || '') + ' md-' + localStorageService.get('theme') + '-theme';\r\n                        //pipAssert.isArray($scope.actions, 'pipDropdown: pip-actions attribute should take an array, but take ' + typeof $scope.actions);\r\n                        $scope.$mdMedia = $mdMedia;\r\n                        $scope.actions = ($scope.actions && _.isArray($scope.actions)) ? $scope.actions : [];\r\n                        $scope.activeIndex = $scope.activeIndex || 0;\r\n\r\n                        $scope.disabled = function () {\r\n                            if ($scope.ngDisabled()) {\r\n                                return $scope.ngDisabled();\r\n                            } else {\r\n                                return false;\r\n                            }\r\n                        };\r\n\r\n                        $scope.onSelect = function (index) {\r\n                            $scope.activeIndex = index;\r\n                            if ($scope.select) {\r\n                                $scope.select($scope.actions[index], $scope.activeIndex);\r\n                            }\r\n                        };\r\n\r\n                        $scope.show = function () {\r\n                            if ($scope.showDropdown()) {\r\n                                return $scope.showDropdown();\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        };\r\n\r\n                    }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\nmodule pip.nav {\r\n    'use strict';\r\n\r\n    class LanguagePickerController {\r\n        private _translate: any;\r\n        private _timeout: ng.ITimeoutService;\r\n\r\n        public constructor(\r\n            $scope: any, \r\n            $element: any, \r\n            $attrs: any, \r\n            $rootScope: ng.IRootScopeService, \r\n            $timeout: ng.ITimeoutService,\r\n            $injector: any\r\n        ) {\r\n            \"ngInject\";\r\n\r\n            this._timeout = $timeout;\r\n            this._translate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n\r\n            // Apply class and call resize\r\n            $element.addClass('pip-language-picker');\r\n\r\n            this.languages = $scope.languages;\r\n\r\n            // Todo: Where is this event coming from? Why not through service or attribute?\r\n            $rootScope.$on('pipSetLanguages', this.setLanguages);\r\n        }\r\n\r\n        public languages: string[] = ['en', 'ru'];\r\n\r\n        public get language() {\r\n            return this._translate ? this._translate.language : null;\r\n        }\r\n\r\n        public setLanguages(lang) {\r\n            this.languages = lang.length > 0 ? lang : ['en', 'ru'];\r\n        }\r\n\r\n        public onLanguageClick(language) {\r\n            if (this._translate != null) {\r\n                this._timeout(() => {\r\n                    this._translate.language = this.language;\r\n                }, 0);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    function languagePickerDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                languages: '=languages',\r\n            },\r\n            replace: false,\r\n            templateUrl: function (element, attr) {\r\n                return 'language_picker/language_picker.html';\r\n            },\r\n            controller: LanguagePickerController,\r\n            controllerAs: 'vm'\r\n        };\r\n    }\r\n\r\n    angular\r\n        .module('pipLanguagePicker', [\r\n            'ngMaterial', 'pipNav.Translate', 'pipNav.Templates'\r\n        ])\r\n        .directive('pipLanguagePicker', languagePickerDirective);\r\n}\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipNavHeader', \r\n        ['ngMaterial', 'pipNav.Templates', 'pipNavHeader.Service']);\r\n\r\n    // Main application nav-header directive\r\n    thisModule.directive('pipNavHeader', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           scope: {\r\n               title: '=pipTitle',\r\n               subtitle: '=pipSubTitle',\r\n               imageUrl: '=pipImage',\r\n               imageCss: '=pipImageCss'\r\n           },\r\n           replace: false,\r\n           templateUrl: 'nav_header/nav_header.html',\r\n           controller: 'pipNavHeaderController'\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipNavHeaderController', \r\n        function ($scope, $element, $rootScope, $timeout, pipNavHeader) {\r\n           \r\n            var \r\n                image = null, \r\n                imageBlock = $element.find('.pip-nav-header-user'),\r\n                $image;\r\n\r\n            // Apply class and call resize\r\n            $element.addClass('pip-nav-header');\r\n\r\n            $rootScope.$on('pipIdentityChanged', onIdentityChanged);\r\n            $rootScope.$on('pipNavHeaderImageChanged', onIdentityChanged);\r\n\r\n            $scope.onUserClick = onUserClick;\r\n\r\n            $timeout(function() {\r\n                $image = $element.find('.pip-nav-header-user-image')\r\n                onIdentityChanged();\r\n                $image.load(function ($event) {\r\n                    image = $($event.target);\r\n                    setImageMarginCSS(imageBlock, image);\r\n                });                \r\n            }, 10);\r\n\r\n            return;\r\n\r\n            //------------------------\r\n            function setImageMarginCSS(container, image) {\r\n                var cssParams = {},\r\n                    containerWidth = container.width ? container.width() : container.clientWidth, \r\n                    containerHeight = container.height ? container.height() : container.clientHeight, \r\n                    imageWidth = image[0].naturalWidth || image.width,\r\n                    imageHeight = image[0].naturalHeight || image.height,\r\n                    margin = 0;\r\n\r\n                if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n                    margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n                    cssParams['margin-left'] = '' + margin + 'px';\r\n                    cssParams['height'] = '' + containerHeight + 'px';\r\n                    cssParams['width'] = '' + imageWidth * containerHeight/imageHeight + 'px';\r\n                    cssParams['margin-top'] = '';\r\n                } else {\r\n                    margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n                    cssParams['margin-top'] = '' + margin + 'px';\r\n                    cssParams['height'] = '' + imageHeight * containerWidth/imageWidth + 'px';\r\n                    cssParams['width'] = '' + containerWidth + 'px';\r\n                    cssParams['margin-left'] = '';\r\n                }\r\n\r\n                image.css(cssParams);\r\n            };\r\n                        \r\n            function onIdentityChanged() {\r\n                var url: string,\r\n                    config = pipNavHeader.config();\r\n\r\n                url = $scope.imageUrl ? $scope.imageUrl : config.defaultImageUrl;\r\n                if (url) {\r\n                    console.log('url', url);\r\n                    $image.attr('src', url);\r\n                } else {\r\n                    console.log('display none');\r\n                    imageBlock.css('display', 'none');\r\n                }\r\n                \r\n            }\r\n\r\n            function onUserClick() {\r\n                $rootScope.$broadcast('pipNavUserClicked');\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipNavIcon',\r\n        ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates', 'pipNavIcon.Service']);\r\n\r\n    thisModule.directive('pipNavIcon', function () {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                type: '=pipType',\r\n                imageUrl: '=pipImageUrl'\r\n            },\r\n            replace: false,\r\n            templateUrl: function (element, attr) {\r\n                return 'nav_icon/nav_icon.html';\r\n            },\r\n            controller: 'pipNavIconController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipNavIconController',\r\n        function ($scope, $element, $attrs, $rootScope, $window, pipNavIcon) {\r\n            // Apply class and call resize\r\n            $element.addClass('pip-nav-icon');\r\n\r\n            $scope.config = pipNavIcon.config();\r\n\r\n            $rootScope.$on('pipNavIconChanged', onNavIconChanged);\r\n\r\n            $scope.onNavIconClick = onNavIconClick;\r\n\r\n            function onNavIconChanged(event, config) {\r\n                $scope.config = config;\r\n            }\r\n\r\n            function onNavIconClick() {\r\n                var breadcrumb, backCallback;\r\n\r\n                if (_.isFunction($scope.config.callback)) {\r\n                    // Execute nav icon callback\r\n                    $scope.config.callback();\r\n                } else if ($scope.config.event) {\r\n                    $rootScope.$broadcast($scope.config.event);\r\n                } else if ($scope.config.type == 'menu') {\r\n                    $rootScope.$broadcast('pipOpenSideNav');\r\n                } else if ($scope.config.type == 'back') {\r\n                    $window.history.back();\r\n                } else {\r\n                    $rootScope.$broadcast('pipNavIconClicked');\r\n                }\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipNavIcon.Service', []);\r\n\r\n    thisModule.provider('pipNavIcon', function (): any {\r\n        var config = {\r\n            // Type of nav icon: 'back', 'menu', 'image' or 'none'\r\n            type: 'menu',\r\n            // Image url\r\n            imageUrl: null,\r\n            // Icon name\r\n            iconName: 'back',\r\n            // Handle nav icon click event\r\n            callback: null,\r\n            // Event name\r\n            event: null\r\n        };\r\n\r\n        this.config = getConfig;\r\n        this.clear = clear;\r\n        this.menu = setMenu;\r\n        this.back = setBack;\r\n        this.icon = setIcon;\r\n        this.image = setImage;\r\n\r\n        // Get the service instance\r\n        this.$get = function ($rootScope) {\r\n            return {\r\n                config: getConfig,\r\n                hide: hide,\r\n                menu: showMenu,\r\n                back: showBack,\r\n                icon: showIcon,\r\n                image: showImage\r\n            };\r\n\r\n            // ----------------------\r\n            \r\n            function hide() {\r\n                clear();\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showMenu(callbackOrEvent) {\r\n                setMenu(callbackOrEvent);\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showIcon(iconName, callbackOrEvent) {\r\n                setIcon(iconName, callbackOrEvent);\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showBack(callbackOrEvent) {\r\n                setBack(callbackOrEvent);\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showImage(imageUrl, callbackOrEvent) {\r\n                setImage(imageUrl, callbackOrEvent);\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function sendConfigEvent() {\r\n                $rootScope.$broadcast('pipNavIconChanged', config);\r\n            }\r\n\r\n        };\r\n\r\n        function getConfig() {\r\n            return config;\r\n        }\r\n\r\n        // Show navigation icon\r\n        function clear() {\r\n            config.type = 'none';\r\n            config.callback = null;\r\n            config.event = null;\r\n        }\r\n\r\n        function setMenu(callbackOrEvent) {\r\n            config.type = 'menu';\r\n            config.callback = null;\r\n            config.event = null;\r\n\r\n            if (_.isFunction(callbackOrEvent))\r\n                config.callback = callbackOrEvent;\r\n            if (_.isString(callbackOrEvent))\r\n                config.event = callbackOrEvent;\r\n        }\r\n\r\n        function setIcon(iconName, callbackOrEvent) {\r\n            config.type = 'icon';\r\n            config.iconName = iconName;\r\n            config.callback = null;\r\n            config.event = null;\r\n\r\n            if (_.isFunction(callbackOrEvent))\r\n                config.callback = callbackOrEvent;\r\n            if (_.isString(callbackOrEvent))\r\n                config.event = callbackOrEvent;\r\n        }\r\n\r\n        function setBack(callbackOrEvent) {\r\n            config.type = 'back';\r\n            config.callback = null;\r\n            config.event = null;\r\n\r\n            if (_.isFunction(callbackOrEvent))\r\n                config.callback = callbackOrEvent;\r\n            if (_.isString(callbackOrEvent))\r\n                config.event = callbackOrEvent;\r\n        }\r\n\r\n        function setImage(imageUrl, callbackOrEvent) {\r\n            config.type = 'image';\r\n            config.imageUrl = imageUrl;\r\n            config.callback = null;\r\n            config.event = null;\r\n\r\n            if (_.isFunction(callbackOrEvent))\r\n                config.callback = callbackOrEvent;\r\n            if (_.isString(callbackOrEvent))\r\n                config.event = callbackOrEvent;\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipNavMenu', \r\n        ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates', 'pipNavMenu.Service']);\r\n\r\n    // Main application navmenu directive\r\n    thisModule.directive('pipNavMenu', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           scope: {\r\n               config: '=pipLinks'\r\n           },\r\n           replace: false,\r\n           templateUrl: 'nav_menu/nav_menu.html',\r\n           controller: 'pipNavMenuController'\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipNavMenuController', \r\n        function ($scope, $element, $rootScope, $window, $location, $timeout, $injector, pipSideNav, pipNavMenu) {\r\n\r\n            // Apply class and call resize\r\n            $element.addClass('pip-nav-menu');\r\n\r\n            $scope.config = $scope.config || pipNavMenu.get();\r\n\r\n            $rootScope.$on('pipNavMenuChanged', onConfigChanged);\r\n\r\n            $scope.itemVisible = itemVisible;\r\n            $scope.onLinkClick = onLinkClick;\r\n            $scope.isSectionEmpty = isSectionEmpty;\r\n\r\n            return;\r\n            \r\n            //------------------------\r\n            \r\n            function itemVisible(item) {\r\n                return item && item.access && !item.access(item);\r\n            }\r\n\r\n            function isSectionEmpty(linkCollection) {\r\n                var result = true;\r\n                _.each(linkCollection, function(link){\r\n                    if (!itemVisible(link))\r\n                        result = false;\r\n                });\r\n                return result;\r\n            }\r\n\r\n            function onConfigChanged(event, config) {\r\n                $scope.config = config;\r\n            }\r\n\r\n            function onLinkClick(event, link) {\r\n                event.stopPropagation();\r\n\r\n                if (!link) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                if (link.href) {\r\n                    if (link.href.split('?')[0] === $window.location.href.split('?')[0]) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        $window.location.href = link.href;\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.url) {\r\n                    if (link.url.split(/[\\s/?]+/)[1] === $location.url().split(/[\\s/?]+/)[1]) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        $location.url(link.url);\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.state) {\r\n                    var $state = $injector.has('$state') ? $injector.get('$state') : null;\r\n                    \r\n                    if ($state != null && $state.current.name === link.state) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        if ($injector.has('$state')) {\r\n                            var $state = $injector.get('$state');\r\n                            $state.go(link.state, link.stateParams);\r\n                        }\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.event)\r\n                    $rootScope.$broadcast(link.event, link);\r\n\r\n                pipSideNav.close();\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipNavHeader.Service', []);\r\n\r\n    thisModule.provider('pipNavHeader', function (): any {\r\n        var config = {\r\n            // Image url\r\n            defaultImageUrl: null,\r\n        };\r\n\r\n        this.config = getConfig;\r\n        this.clear = clear;\r\n        this.image = setImage;\r\n\r\n        // Get the service instance\r\n        this.$get = function ($rootScope) {\r\n            return {\r\n                config: getConfig,\r\n                image: showImage\r\n            };\r\n\r\n            // ----------------------\r\n\r\n            function showImage(imageUrl) {\r\n                setImage(imageUrl);\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function sendConfigEvent() {\r\n                $rootScope.$broadcast('pipNavHeaderImageChanged', config);\r\n            }\r\n\r\n        };\r\n\r\n        function getConfig() {\r\n            return config;\r\n        }\r\n\r\n        // Show navigation icon\r\n        function clear() {\r\n            config.defaultImageUrl = null;\r\n        }\r\n\r\n        function setImage(imageUrl) {\r\n            config.defaultImageUrl = imageUrl;\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipNavMenu.Service', []);\r\n\r\n    thisModule.provider('pipNavMenu', function (): any {\r\n        var config = [],\r\n            collapsed = true,\r\n            sectionIcon: string;\r\n\r\n        this.sections = init;\r\n        this.sectionIcon = setOrGetIcon;\r\n        this.collapsed = setOrGetCollapsed;\r\n\r\n        this.$get = function ($rootScope, $mdSidenav) {\r\n            return {\r\n                get: getConfig,\r\n                set: setConfig,\r\n                setCounter: setCounter,\r\n                collapsed: setOrGetCollapsed,\r\n                icon: setOrGetIcon\r\n            };\r\n            \r\n            //---------------------\r\n\r\n            function getConfig() {\r\n\r\n                return config;  \r\n            }\r\n\r\n            function setConfig(newConfig) {\r\n                init(newConfig);\r\n                $rootScope.$broadcast('pipNavMenuChanged', config);\r\n\r\n                return config;  \r\n            }\r\n\r\n            function setCounter(linkTitle: string, counter: number) {\r\n                if (!linkTitle || !angular.isNumber(counter)) { return; }\r\n\r\n                let section: any, menuItem: any;\r\n\r\n                section = _.find(config, function(s) {\r\n                    let item = _.find(s.links, {title: linkTitle});\r\n                    if (item) {\r\n                        return item;\r\n                    } else { return false };\r\n                });\r\n\r\n                menuItem = _.find(section.links, {title: linkTitle});\r\n                menuItem.count = counter;\r\n                setConfig(config);\r\n            }\r\n        };\r\n\r\n        function setOrGetIcon(value: string) {\r\n            if (_.isString(value)) {\r\n                sectionIcon = value;\r\n            }\r\n\r\n            return sectionIcon;\r\n        }\r\n\r\n        function setOrGetCollapsed(value: boolean) {\r\n            if (value !== undefined) {\r\n                collapsed = value;\r\n            }\r\n\r\n            return collapsed;\r\n        }\r\n\r\n        function init(newConfig) {\r\n            if (_.isArray(newConfig)) {\r\n                config = newConfig;\r\n            }\r\n\r\n            return config;\r\n        };\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSideNav.Part', ['pipSideNav.Service']);\r\n\r\n    // Example is taken from here: http://stackoverflow.com/questions/20325480/angularjs-whats-the-best-practice-to-add-ngif-to-a-directive-programmatically\r\n    thisModule.directive('pipSidenavPart', function (ngIfDirective) {\r\n        var ngIf = ngIfDirective[0];\r\n\r\n        return {\r\n            transclude: ngIf.transclude,\r\n            priority: ngIf.priority,\r\n            terminal: ngIf.terminal,\r\n            restrict: ngIf.restrict,\r\n            scope: true,\r\n            link: function($scope: any, $element, $attrs) {\r\n                // Visualize based on visible variable in scope\r\n                $attrs.ngIf = function() { return $scope.visible };\r\n                ngIf.link.apply(ngIf);\r\n            },\r\n            controller: 'pipSideNavPartController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipSideNavPartController',\r\n        function ($scope, $element, $attrs, $rootScope, pipSideNav) {\r\n            var partName = '' + $attrs.pipSidenavPart;\r\n            var partValue = null;\r\n\r\n            // Break part apart\r\n            var pos = partName.indexOf(':');\r\n            if (pos > 0) {\r\n                partValue = partName.substr(pos + 1);\r\n                partName = partName.substr(0, pos);\r\n            }\r\n\r\n            onSideNavChanged(null, pipSideNav.config())\r\n\r\n            $rootScope.$on('pipSideNavChanged', onSideNavChanged);\r\n\r\n            function onSideNavChanged(event, config) {\r\n                var parts = config.parts || {};\r\n                var currentPartValue = config[partName];\r\n                // Set visible variable to switch ngIf\r\n                $scope.visible = partValue ? currentPartValue == partValue : currentPartValue;\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSideNav.Service', []);\r\n\r\n    thisModule.provider('pipSideNav', function (): any {\r\n        var config = {\r\n            // Theme to be applied to the header\r\n            theme: 'default',\r\n            // Parts of the sidenav\r\n            parts: []\r\n        },\r\n        sideNavId = 'pip-sidenav'; // sidenav identificatior\r\n\r\n        this.id = id; \r\n        this.theme = theme;\r\n        this.parts = initParts;\r\n\r\n        this.$get = function ($rootScope, $mdSidenav) {\r\n            $rootScope.$on('pipOpenSideNav', open);\r\n            $rootScope.$on('pipCloseSideNav', close);\r\n\r\n            return {\r\n                config: getConfig,\r\n                //theme: setTheme,\r\n                part: getOrSetPart,\r\n                parts: getOrSetParts,\r\n                id: getOrSetId,\r\n                open: open,\r\n                close: close,\r\n                toggle: toggle\r\n            };\r\n\r\n            //---------------------\r\n\r\n            function getConfig() {\r\n                return config;  \r\n            }\r\n                            \r\n            function getOrSetPart(name, value) {\r\n                if (!_.isString(name))\r\n                    throw new Error(\"Part name has to be a string\");\r\n\r\n                if (value != undefined) {\r\n                    if (config.parts[name] != value) {\r\n                        config.parts[name] = value;\r\n                        sendConfigEvent();\r\n                    }\r\n                }\r\n\r\n                return config.parts[name];\r\n            }\r\n\r\n            function getOrSetId(id) {\r\n                if (_.isString(id)) {\r\n                    if (sideNavId !== id) {\r\n                        sideNavId = id;\r\n                    }\r\n                }\r\n\r\n                return sideNavId;\r\n            }\r\n\r\n            function getOrSetParts(parts) {\r\n                if (_.isObject(parts)) {\r\n                    if (!_.isEqual(config.parts, parts)) {\r\n                        config.parts = parts;\r\n                        sendConfigEvent();\r\n                    }\r\n                }\r\n\r\n                return config.parts;\r\n            }\r\n                            \r\n            function sendConfigEvent() {\r\n                $rootScope.$broadcast('pipSideNavChanged', config);\r\n            }\r\n\r\n            function open(event) {\r\n                console.log('open pip', sideNavId);\r\n                $mdSidenav(sideNavId).open();\r\n            }\r\n                 \r\n            function close(event) {\r\n                console.log('close pip', sideNavId);\r\n                $mdSidenav(sideNavId).close();   \r\n            }                \r\n\r\n            function toggle() {\r\n                console.log('toggle pip', sideNavId);\r\n                $mdSidenav(sideNavId).toggle();   \r\n                $rootScope.$broadcast('pipSideNavToggle', config);\r\n            }\r\n        };\r\n\r\n        function id(id) {\r\n            sideNavId = id || sideNavId;\r\n\r\n            return sideNavId;\r\n        }\r\n\r\n        function theme(theme) {\r\n            config.theme = theme || config.theme;\r\n\r\n            return config.theme;\r\n        }\r\n\r\n        function initParts(parts) {\r\n            if (_.isObject(parts)) {\r\n                config.parts = parts;\r\n            }\r\n\r\n            return config.parts;\r\n        }\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSearchBar',\r\n        ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates', 'pipSearch.Service']);\r\n\r\n    thisModule.run(function ($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate && pipTranslate.setTranslations) {\r\n            pipTranslate.setTranslations('en', {\r\n                'APPBAR_SEARCH': 'Search'\r\n            });\r\n\r\n            pipTranslate.setTranslations('ru', {\r\n                'APPBAR_SEARCH': 'Поиск'\r\n            });\r\n        }\r\n    });\r\n\r\n    // Main application header directive\r\n    thisModule.directive('pipSearchBar', function () {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {},\r\n            replace: false,\r\n            templateUrl: function (element, attr) {\r\n                return 'search_bar/search_bar.html';\r\n            },\r\n            controller: 'pipSearchBarController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipSearchBarController',\r\n        function ($scope, $element, $attrs, $rootScope, pipSearch) {\r\n            // Apply class and call resize\r\n            $element.addClass('pip-search-bar');\r\n\r\n            $scope.config = pipSearch.config();\r\n\r\n            $scope.searchEnabled = false;\r\n            $scope.search = {text: ''};\r\n\r\n            $rootScope.$on('pipSearchChanged', onSearchBarChanged);\r\n\r\n            $scope.onSearchEnable = onSearchEnable;\r\n            $scope.onSearchClick = onSearchClick;\r\n            $scope.onSearchClear = onSearchClear;\r\n            $scope.onSearchKeyDown = onSearchKeyDown;\r\n\r\n            function onSearchBarChanged(event, config) {\r\n                $scope.config = config;\r\n                $scope.searchEnabled = false;\r\n                $scope.search.text = '';\r\n            }\r\n\r\n            function focusSearchText() {\r\n                var element;\r\n\r\n                setTimeout(function () {\r\n                    element = $('.pip-search-text');\r\n                    if (element.length > 0) {\r\n                        element.focus();\r\n                    }\r\n                }, 0);\r\n            }\r\n\r\n            function onSearchEnable() {\r\n                $scope.search.text = $scope.config.criteria;\r\n                $scope.searchEnabled = true;\r\n                focusSearchText();\r\n            }\r\n\r\n            function onSearchClick() {\r\n                var searchText = $scope.search.text;\r\n\r\n                $scope.search.text = '';\r\n                $scope.searchEnabled = false;\r\n\r\n                if ($scope.config.callback) {\r\n                    $scope.config.callback(searchText);\r\n                } else {\r\n                    $rootScope.$broadcast('pipSearchBarSearchClicked', searchText);\r\n                }\r\n            }\r\n\r\n            function onSearchClear() {\r\n                if ($scope.search.text) {\r\n                    $scope.search.text = '';\r\n\r\n                    focusSearchText();\r\n                } else {\r\n                    $scope.searchEnabled = false;\r\n                    onSearchClick();\r\n                }\r\n            }\r\n\r\n            function onSearchKeyDown(event) {\r\n                // Enter pressed\r\n                if (event.keyCode === 13) {\r\n                    $scope.onSearchClick();\r\n\r\n                    return;\r\n                }\r\n                // ESC pressed\r\n                if (event.keyCode === 27) {\r\n                    $scope.searchEnabled = false;\r\n                }\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSearch.Service', []);\r\n\r\n    thisModule.provider('pipSearch', function (): any {\r\n        var config = {\r\n            // Search visible\r\n            visible: false,\r\n            // Search criteria\r\n            criteria: '',\r\n            // History for search autocomplete\r\n            history: [],\r\n            // Callback for search\r\n            callback: null,\r\n        };\r\n\r\n        // Get the service instance\r\n        this.$get = function ($rootScope) {\r\n            $rootScope.$on('pipSearchOpen', open);\r\n            $rootScope.$on('pipSearchClose', close);\r\n\r\n            return {\r\n                config: getConfig,\r\n                set: setSearch,\r\n                clear: clearSearch,\r\n                criteria: updateCriteria,\r\n                history: updateHistory,\r\n            };\r\n\r\n            // ----------------------\r\n\r\n            function getConfig() {\r\n                return config;\r\n            }\r\n\r\n            function setSearch(callback, criteria, history) {\r\n                config.callback = callback;\r\n                config.criteria = criteria;\r\n                config.history = history;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function clearSearch() {\r\n                config.callback = null;\r\n                config.criteria = null;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function open(event) {\r\n                config.visible = true;\r\n                sendConfigEvent();                \r\n            }\r\n                 \r\n            function close(event) {\r\n                config.visible = false;\r\n                sendConfigEvent();                \r\n            }                \r\n\r\n            function toggle() {\r\n                config.visible = !config.visible;\r\n                sendConfigEvent();                \r\n            }                   \r\n\r\n            function updateCriteria(criteria) {\r\n                config.criteria = criteria;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function updateHistory(history) {\r\n                config.history = history;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function sendConfigEvent() {\r\n                $rootScope.$broadcast('pipSearchChanged', config);\r\n            }\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSideNav', \r\n        ['ngMaterial', 'pipNav.Templates', 'pipSideNav.Part', 'pipSideNav.Service']);\r\n\r\n    // Main application sidenav directive\r\n    thisModule.directive('pipSidenav', function() {\r\n       return {\r\n           restrict: 'E',\r\n           transclude: true,\r\n           scope: true,\r\n           templateUrl: 'sidenav/sidenav.html',\r\n           controller: 'pipSideNavController'\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipSideNavController', \r\n        function ($scope, $element, $rootScope, pipSideNav) {\r\n\r\n            // Apply class and call resize\r\n            $element.addClass('pip-sidenav');\r\n            pipSideNav.id('pip-sidenav');\r\n\r\n            $rootScope.$on('pipNavIconClicked', onNavIconClick);\r\n            //$rootScope.$on('pipSideNavChanged', onConfigChanged);\r\n\r\n            return;\r\n            \r\n            //------------------------\r\n\r\n            function onNavIconClick(event) {\r\n                pipSideNav.open();\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipStickyNavHeader', \r\n        ['ngMaterial', 'pipNav.Templates', 'pipNavHeader.Service']);\r\n\r\n    // Main application nav-header directive\r\n    thisModule.directive('pipStickyNavHeader', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           scope: {\r\n               title: '=pipTitle',\r\n               subtitle: '=pipSubTitle',\r\n               imageUrl: '=pipImage',\r\n               imageCss: '=pipImageCss'\r\n           },\r\n           replace: false,\r\n           templateUrl: 'sticky_nav_header/sticky_nav_header.html',\r\n           controller: 'pipStickyNavHeaderController'\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipStickyNavHeaderController', \r\n        function ($scope, $element, $rootScope, $timeout, pipNavHeader) {\r\n           \r\n            var \r\n                image = null, \r\n                imageBlock = $element.find('.pip-sticky-nav-header-user'),\r\n                $image;\r\n\r\n            // Apply class and call resize\r\n            $element.addClass('pip-sticky-nav-header');\r\n\r\n            $rootScope.$on('pipIdentityChanged', onIdentityChanged);\r\n            $rootScope.$on('pipNavHeaderImageChanged', onIdentityChanged);\r\n            $rootScope.$on('pipNavExpanded', resizeImage);\r\n            $scope.onUserClick = onUserClick;\r\n\r\n            $timeout(function() {\r\n                $image = $element.find('.pip-sticky-nav-header-user-image');\r\n                onIdentityChanged();\r\n                $image.load(function ($event) {\r\n                    image = $($event.target);\r\n                    setImageMarginCSS(imageBlock, image);\r\n                });                \r\n            }, 10);\r\n\r\n            return;\r\n\r\n            function resizeImage() {\r\n                if (!image) {\r\n                    image = $element.find('.pip-sticky-nav-header-user-image')\r\n                } \r\n                setImageMarginCSS(imageBlock, image);\r\n            }\r\n\r\n            //------------------------\r\n            function setImageMarginCSS(container, image) {\r\n                var cssParams = {},\r\n                    containerWidth = container.width ? container.width() : container.clientWidth, \r\n                    containerHeight = container.height ? container.height() : container.clientHeight, \r\n                    imageWidth = image[0].naturalWidth || image.width,\r\n                    imageHeight = image[0].naturalHeight || image.height,\r\n                    margin = 0;\r\n\r\n                if ((imageWidth / containerWidth) > (imageHeight / containerHeight)) {\r\n                    margin = -((imageWidth / imageHeight * containerHeight - containerWidth) / 2);\r\n                    cssParams['margin-left'] = '' + margin + 'px';\r\n                    cssParams['height'] = '' + containerHeight + 'px';\r\n                    cssParams['width'] = '' + imageWidth * containerHeight/imageHeight + 'px';\r\n                    cssParams['margin-top'] = '';\r\n                } else {\r\n                    margin = -((imageHeight / imageWidth * containerWidth - containerHeight) / 2);\r\n                    cssParams['margin-top'] = '' + margin + 'px';\r\n                    cssParams['height'] = '' + imageHeight * containerWidth/imageWidth + 'px';\r\n                    cssParams['width'] = '' + containerWidth + 'px';\r\n                    cssParams['margin-left'] = '';\r\n                }\r\n\r\n                image.css(cssParams);\r\n            };\r\n                        \r\n            function onIdentityChanged() {\r\n                var url: string,\r\n                    config = pipNavHeader.config();\r\n\r\n                url = $scope.imageUrl ? $scope.imageUrl : config.defaultImageUrl;\r\n                if (url) {\r\n                    $image.attr('src', url);\r\n                } else {\r\n                    imageBlock.css('display', 'none');\r\n                }\r\n                \r\n            }\r\n\r\n            function onUserClick() {\r\n                $rootScope.$broadcast('pipNavUserClicked');\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipStickyNavMenu', \r\n        ['ngMaterial', 'pipNav.Translate', 'pipNav.Templates', 'pipNavMenu.Service']);\r\n\r\n    // Main application navmenu directive\r\n    thisModule.directive('pipStickyNavMenu', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           scope: {\r\n               config: '=pipLinks',\r\n               collapsed: '=pipCollapsed'\r\n           },\r\n           replace: false,\r\n           templateUrl: 'sticky_nav_menu/sticky_nav_menu.html',\r\n           controller: 'pipStickyNavMenuController'\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipStickyNavMenuController', \r\n        function ($scope, $element, $rootScope, $window, $location, $timeout, $injector, pipSideNav, pipNavMenu) {\r\n\r\n            var pipSdeNavElement = $element.parent().parent();\r\n            // Apply class and call resize\r\n            $element.addClass('pip-sticky-nav-menu');\r\n            $scope.config = $scope.config || pipNavMenu.get();\r\n            setCollapsible();\r\n            $scope.expanded = true;\r\n            pipNavMenu.set($scope.config);\r\n            // todo set from services\r\n            $scope.defaultIicon = 'icons:folder';\r\n\r\n\r\n            $rootScope.$on('pipNavMenuChanged', onConfigChanged);\r\n\r\n            $scope.itemVisible = itemVisible;\r\n            $scope.onLinkClick = onLinkClick;\r\n            $scope.isSectionEmpty = isSectionEmpty;\r\n            $scope.onExpand = onExpand;\r\n\r\n            return;\r\n            \r\n            //------------------------\r\n\r\n            function setCollapsible() {\r\n                var collapsed;\r\n                if (angular.isFunction($scope.collapsed)) {\r\n                    collapsed = $scope.collapsed();\r\n                } else {\r\n                    collapsed = $scope.collapsed !== false && $scope.collapsed !== 'false';\r\n                }\r\n\r\n                $scope.collapsibled = collapsed;\r\n                pipNavMenu.collapsed(collapsed);\r\n            }\r\n\r\n            function onExpand() {\r\n                $scope.expanded = !$scope.expanded;\r\n\r\n                if ($scope.expanded) {\r\n                    pipSdeNavElement.removeClass('pip-sticky-nav-small');\r\n                } else {\r\n                    pipSdeNavElement.addClass('pip-sticky-nav-small');\r\n                }\r\n                $rootScope.$broadcast('pipNavExpanded', $scope.expanded);\r\n            }\r\n            \r\n            function itemVisible(item) {\r\n                return item && item.access && !item.access(item);\r\n            }\r\n\r\n            function isSectionEmpty(linkCollection) {\r\n                var result = true;\r\n                _.each(linkCollection, function(link){\r\n                    if (!itemVisible(link))\r\n                        result = false;\r\n                });\r\n                return result;\r\n            }\r\n\r\n            function onConfigChanged(event, config) {\r\n                $scope.isCollapsed = pipNavMenu.collapsed();\r\n                $scope.config = config;\r\n            }\r\n\r\n            function onLinkClick(event, link) {\r\n                event.stopPropagation();\r\n\r\n                if (!link) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                if (link.href) {\r\n                    if (link.href.split('?')[0] === $window.location.href.split('?')[0]) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        $window.location.href = link.href;\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.url) {\r\n                    if (link.url.split(/[\\s/?]+/)[1] === $location.url().split(/[\\s/?]+/)[1]) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        $location.url(link.url);\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.state) {\r\n                    var $state = $injector.has('$state') ? $injector.get('$state') : null;\r\n                    \r\n                    if ($state != null && $state.current.name === link.state) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        if ($injector.has('$state')) {\r\n                            var $state = $injector.get('$state');\r\n                            $state.go(link.state, link.stateParams);\r\n                        }\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.event)\r\n                    $rootScope.$broadcast(link.event, link);\r\n\r\n                pipSideNav.close();\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipStickySideNav', \r\n        ['ngMaterial', 'pipNav.Templates', 'pipSideNav.Part', 'pipSideNav.Service']);\r\n\r\n    // Main application sidenav directive\r\n    thisModule.directive('pipStickySidenav', function() {\r\n       return {\r\n           restrict: 'E',\r\n           transclude: true,\r\n           scope: true,\r\n           templateUrl: 'sticky_sidenav/sticky_sidenav.html',\r\n           controller: 'pipStickySideNavController'\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipStickySideNavController', \r\n        function ($scope, $element, $rootScope, pipSideNav, $mdMedia) {\r\n\r\n            // Apply class and call resize\r\n            $element.addClass('pip-sticky-sidenav');\r\n            $scope.$mdMedia = $mdMedia;\r\n\r\n            $rootScope.$on('pipNavIconClicked', onNavIconClick);\r\n            $rootScope.$on('pipSideNavToggle', onNavToggle);\r\n\r\n            pipSideNav.id('pip-sticky-sidenav');\r\n\r\n            return;\r\n            \r\n            //------------------------\r\n\r\n            function onNavIconClick(event) {\r\n                pipSideNav.open();\r\n            }\r\n\r\n            function onNavToggle(event) {\r\n                console.log('onNavToggle')\r\n                $element.addClass('overflow-visible');\r\n            }\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n","/// <reference path=\"../../typings/tsd.d.ts\" />\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipTabs\", ['pipNav.Templates']);\r\n\r\n    thisModule.directive('pipTabs',\r\n        function () {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    tabs: '=pipTabs',\r\n                    showTabs: '&pipShowTabs',\r\n                    showTabsShadow: '&pipTabsShadow',\r\n                    activeIndex: '=pipActiveIndex',\r\n                    select: '=pipTabsSelect'\r\n                },\r\n                templateUrl: 'tabs/tabs.html',\r\n                controller:\r\n                    function ($scope, $element, $attrs, $mdMedia, localStorageService, $injector) {\r\n                        // Todo: Remove dependency on local storage or made it optional\r\n                        $scope.class = ($attrs.class || '') + ' md-' + localStorageService.get('theme') + '-theme';\r\n                        $scope.$mdMedia = $mdMedia;\r\n                        $scope.tabs = ($scope.tabs && _.isArray($scope.tabs)) ? $scope.tabs : [];\r\n\r\n                        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n                        if (pipTranslate) {\r\n                            if ($scope.tabs.length > 0 && $scope.tabs[0].title) {\r\n                                pipTranslate.translateObjects($scope.tabs, 'title', 'nameLocal');\r\n                            } else {\r\n                                pipTranslate.translateObjects($scope.tabs, 'name', 'nameLocal');\r\n                            }\r\n                        }\r\n\r\n                        $scope.activeIndex = $scope.activeIndex || 0;\r\n                        $scope.activeTab = $scope.activeIndex;\r\n\r\n                        $scope.disabled = function () {\r\n                            if ($scope.ngDisabled) {\r\n                                return $scope.ngDisabled();\r\n                            }\r\n                        };\r\n\r\n                        $scope.tabDisabled = function (index) {\r\n                            return ($scope.disabled() && $scope.activeIndex != index);\r\n                        };\r\n\r\n                        $scope.onSelect = function (index) {\r\n                            if ($scope.disabled()) return;\r\n\r\n                            $scope.activeIndex = index;\r\n                            $scope.activeTab = $scope.activeIndex;\r\n                            if ($scope.select) {\r\n                                $scope.select($scope.tabs[$scope.activeIndex], $scope.activeIndex);\r\n                            }\r\n                        };\r\n\r\n                        $scope.showShadow = function () {\r\n                            if ($scope.showTabsShadow) {\r\n                                return $scope.showTabsShadow();\r\n                            } else {\r\n                                return false;\r\n                            }\r\n                        };\r\n\r\n                        $scope.show = function () {\r\n                            if ($scope.showTabs) {\r\n                                return $scope.showTabs();\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        };\r\n                    }\r\n            };\r\n        }\r\n    );\r\n\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme', ['LocalStorageModule', 'ngMaterial']);\r\n\r\n    thisModule.run(run);\r\n\r\n    function run (pipTheme) {\r\n        pipTheme.theme();\r\n    }\r\n    \r\n    thisModule.provider('pipTheme', function(): any {\r\n        var \r\n            theme = 'default',\r\n            persist = true,\r\n            setRoot = true;\r\n\r\n        this.use = initTheme;\r\n        this.init = initTheme;\r\n        this.persist = initPersist;\r\n        this.setRoot = initSetRoot;\r\n\r\n        this.$get = function ($rootScope, $timeout, localStorageService, $mdTheming) {\r\n            // Read theme from persistent storage\r\n            if (persist)\r\n                theme = localStorageService.get('theme') || theme;\r\n\r\n            // Set root variable\r\n            if (setRoot) \r\n                $rootScope.$theme = theme;\r\n\r\n            // Switch material theme\r\n            //$('body').attr('md-theme',  $rootScope.$theme).addClass(\"{{ $theme }}\");\r\n            \r\n            // Resetting root scope to force update language on the screen\r\n            function resetContent(fullReset, partialReset) {\r\n                fullReset = fullReset !== undefined ? !!fullReset : false;\r\n                partialReset = partialReset !== undefined ? !!partialReset : false;\r\n\r\n                $rootScope.$reset = fullReset;\r\n                $rootScope.$partialReset = partialReset;\r\n                $timeout(function() {\r\n                    $rootScope.$reset = false;\r\n                    $rootScope.$partialReset = false;\r\n                }, 0);\r\n            }\r\n\r\n            function getOrSetTheme(newTheme, fullReset, partialReset) {\r\n                if (newTheme != null && newTheme != theme) {\r\n                    if (!(theme in $mdTheming.THEMES))\r\n                        throw new Error('Theme ' + theme + ' is not registered. Please, register it first with $mdThemingProvider');\r\n\r\n                    theme = newTheme;\r\n                    \r\n                    if (persist)\r\n                        localStorageService.set('theme', theme);\r\n                    if (setRoot)\r\n                        $rootScope.$theme = theme;\r\n                    \r\n                    // Switch material theme\r\n                    //$('body').attr('md-theme', \"{{ $theme }}\").addClass(\"{{ $theme }}\");\r\n\r\n                    // Resetting content.\r\n                    resetContent(fullReset, partialReset);\r\n\r\n                    // Sending notification\r\n                    $rootScope.$broadcast('pipThemeChanged', newTheme);\r\n                }\r\n                return theme;\r\n            }\r\n\r\n            return {\r\n                use: getOrSetTheme,\r\n                theme: getOrSetTheme\r\n            }\r\n        };\r\n\r\n        // Initialize theme selection\r\n        function initTheme(newTheme) {\r\n            if (newTheme != null)\r\n                theme = newTheme;\r\n            return theme;\r\n        }\r\n\r\n        // Initialize persistence flag\r\n        function initPersist(newPersist) {\r\n            if (newPersist != null)\r\n                persist = newPersist;\r\n            return persist;\r\n        }\r\n\r\n        // Initialize set root flag\r\n        function initSetRoot(newSetRoot) {\r\n            if (newSetRoot != null)\r\n                setRoot = newSetRoot;\r\n            return setRoot;  \r\n        }\r\n\r\n    });\r\n    \r\n})();\r\n","(function () {\r\n    'use strict';\r\n    angular.module('pipTheme.Bootbarn', [\r\n        'pipTheme.Bootbarn.Warm',\r\n        'pipTheme.Bootbarn.Cool',\r\n        'pipTheme.Bootbarn.Monochrome'\r\n    ]);\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Bootbarn.Cool', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     'bootbarn-cool': 'Cool'\r\n        // });\r\n\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     'bootbarn-cool': ''\r\n        // });\r\n        \r\n        var coolBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(69, 90, 100, 1)'\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-cool-background', coolBackgroundPalette);\r\n\r\n        var coolPrimaryPalette = $mdThemingProvider.extendPalette('grey', {\r\n            '300': 'rgba(69, 90, 100, .54)',\r\n            '500': 'rgba(69, 90, 100, 1)',\r\n            'contrastLightColors': ['500', '300']\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-cool-primary', coolPrimaryPalette);\r\n\r\n\r\n        var coolAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n            'A700': 'rgba(76, 175, 80, 1)',\r\n            'contrastLightColors': ['A700']\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-cool-accent', coolAccentPalette);\r\n\r\n        $mdThemingProvider.theme('bootbarn-cool')\r\n            .primaryPalette('bootbarn-cool-primary', {\r\n                'default': '500',\r\n                'hue-1': '300'\r\n            })\r\n            .backgroundPalette('bootbarn-cool-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('bootbarn-cool-accent', {\r\n                'default': 'A700'\r\n            });\r\n\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Bootbarn.Monochrome', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     'bootbarn-monochrome': 'Monochrome'\r\n        // });\r\n\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     'bootbarn-monochrome': ''\r\n        // });\r\n        \r\n        var monochromeBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(38, 50, 56, 1)'\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-monochrome-background', monochromeBackgroundPalette);\r\n\r\n        var monochromePrimaryPalette = $mdThemingProvider.extendPalette('grey', {\r\n            '300': 'rgba(38, 50, 56, .54)',\r\n            '500': 'rgba(38, 50, 56, 1)',\r\n            'contrastLightColors': ['500', '300']\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-monochrome-primary', monochromePrimaryPalette);\r\n\r\n\r\n        var monochromeAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n            'A700': 'rgba(76, 175, 80, 1)',\r\n            'contrastLightColors': ['A700']\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-monochrome-accent', monochromeAccentPalette);\r\n\r\n        $mdThemingProvider.theme('bootbarn-monochrome')\r\n            .primaryPalette('bootbarn-monochrome-primary', {\r\n                'default': '500',\r\n                'hue-1': '300'\r\n            })\r\n            .backgroundPalette('bootbarn-monochrome-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('bootbarn-monochrome-accent', {\r\n                'default': 'A700'\r\n            });\r\n\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Bootbarn.Warm', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     'bootbarn-warm': 'Warm'\r\n        // });\r\n\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     'bootbarn-warm': 'Коричневая'\r\n        // });\r\n\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n        var warmBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'rgba(250, 250, 250, 1)',\r\n                'A200': 'rgba(177, 55, 34, 1)'\r\n            })\r\n            ;\r\n        $mdThemingProvider.definePalette('bootbarn-warm-background', warmBackgroundPalette);\r\n\r\n        var warmPrimaryPalette = $mdThemingProvider.extendPalette('brown', {\r\n            '300': 'rgba(177, 55, 34, .54)',\r\n            '500': 'rgba(177, 55, 34, 1)',\r\n            'contrastLightColors': ['500', '300']\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-warm-primary', warmPrimaryPalette);\r\n\r\n\r\n        var warmAccentPalette = $mdThemingProvider.extendPalette('amber', {\r\n            'A700': 'rgba(127, 148, 92, 1)',\r\n            'contrastLightColors': ['A700']\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-warm-accent', warmAccentPalette);\r\n\r\n        var warmErrorPalette = $mdThemingProvider.extendPalette('red', {\r\n            'A200': 'rgba(255, 87, 34, 1)',\r\n            'contrastLightColors': ['A200']\r\n        });\r\n        $mdThemingProvider.definePalette('bootbarn-warm-error', warmErrorPalette);\r\n\r\n        $mdThemingProvider.theme('bootbarn-warm')\r\n            .primaryPalette('bootbarn-warm-primary', {\r\n                'default': '500',\r\n                'hue-1': '300'\r\n            })\r\n            .backgroundPalette('bootbarn-warm-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('bootbarn-warm-error', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('bootbarn-warm-accent', {\r\n                'default': 'A700'\r\n            });\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Default', ['pipTheme.Blue', 'pipTheme.Pink',\r\n        'pipTheme.Amber', 'pipTheme.Orange', 'pipTheme.Green', 'pipTheme.Navy', 'pipTheme.Grey']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme'\r\n        // });\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема'\r\n        // });\r\n\r\n        $mdThemingProvider.setDefaultTheme('default');\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Amber', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     amber: 'Amber'\r\n        // });\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     amber: 'Янтарная'\r\n        // });\r\n\r\n        var orangeBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(255, 152, 0, 1)'\r\n        });\r\n        $mdThemingProvider.definePalette('orange-background', orangeBackgroundPalette);\r\n\r\n        var orangePrimaryPalette = $mdThemingProvider.extendPalette('orange', {\r\n            '800': 'rgba(255, 152, 0, 1)',\r\n            '900': 'rgba(255, 152, 0, .54);'\r\n        });\r\n        $mdThemingProvider.definePalette('orange-primary', orangePrimaryPalette);\r\n\r\n        $mdThemingProvider.theme('amber')\r\n            .primaryPalette('orange-primary', {\r\n                'default': '800',\r\n                'hue-1': '900'\r\n            })\r\n            .backgroundPalette('orange-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('orange', {\r\n                'default': '900'\r\n            });\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n        \r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Black', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        // });\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема'\r\n        // });\r\n        \r\n        registerDarkTheme('dark');\r\n        registerBlackTheme('black');\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n        function registerDarkTheme(themeName) {\r\n            var darkBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                '600': 'rgba(48, 48, 48, 1)',\r\n                '700': 'rgba(255, 255, 255, 0.54)',\r\n                '800': 'rgba(66, 66, 66, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('dark-background', darkBackgroundPalette);\r\n\r\n            var darkAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n                '600': 'rgba(0, 200, 83, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('dark-accent', darkAccentPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('dark-background', {\r\n                    'default': '900',\r\n                    'hue-1': '700'\r\n                })\r\n                .backgroundPalette('dark-background', {\r\n                    'default': '800',  // background\r\n                    'hue-1': '900',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('dark-accent', {\r\n                    'default': '600'\r\n                });\r\n        }\r\n\r\n        function registerBlackTheme(themeName) {\r\n            var blackBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                '600': 'rgba(48, 48, 48, 1)',\r\n                '700': 'rgba(255, 255, 255, 0.54)',\r\n                '800': 'rgba(66, 66, 66, 1)',\r\n                '500': 'rgba(38, 50, 56, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('black-background', blackBackgroundPalette);\r\n\r\n            var blackAccentPalette = $mdThemingProvider.extendPalette('blue-grey', {\r\n                '700': 'rgba(255, 255, 255, 0.54)'\r\n            });\r\n            $mdThemingProvider.definePalette('black-accent', blackAccentPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('black-accent', {\r\n                    'default': '900',\r\n                    'hue-1': '700'\r\n                })\r\n                .backgroundPalette('black-background', {\r\n                    'default': '800',  // background\r\n                    'hue-1': '500',  // tiles dialog\r\n                    'hue-2': '800'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('black-accent', {\r\n                    'default': '600'\r\n                });\r\n        }\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Blue', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     blue: 'Blue',\r\n        // });\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     blue: 'Голубая'\r\n        // });\r\n\r\n        registerBlueTheme('default');\r\n        registerBlueTheme('blue');\r\n\r\n        $mdThemingProvider.setDefaultTheme('default');\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n        function registerBlueTheme(themeName) {\r\n            var bluePrimaryPalette = $mdThemingProvider.extendPalette('blue', {\r\n                'contrastDefaultColor': 'light',\r\n                'contrastDarkColors': undefined\r\n            });\r\n            $mdThemingProvider.definePalette('blue-primary', bluePrimaryPalette);\r\n\r\n            var blueBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n                'A100': 'rgba(250, 250, 250, 1)',\r\n                'A200': 'rgba(33, 150, 243, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('blue-background', blueBackgroundPalette);\r\n\r\n            var blueAccentPalette = $mdThemingProvider.extendPalette('green', {\r\n                '600': 'rgba(0, 200, 83, 1)'\r\n            });\r\n            $mdThemingProvider.definePalette('blue-accent', blueAccentPalette);\r\n\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette('blue-primary', {\r\n                    'default': '500',\r\n                    'hue-1': '300'\r\n                })\r\n                .backgroundPalette('blue-background', {\r\n                    'default': '50',  // background\r\n                    'hue-1': 'A200',  // tiles dialog\r\n                    'hue-2': 'A700'   // app bar\r\n                })\r\n                .warnPalette('red', {\r\n                    'default': 'A200'\r\n                })\r\n                .accentPalette('blue-accent', {\r\n                    'default': '600'\r\n                });\r\n        }\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Green', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     green: 'Green'\r\n        // });\r\n\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     green: 'Зеленая'\r\n        // });\r\n\r\n        var greenBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(76, 175, 80, 1)'\r\n        });\r\n        $mdThemingProvider.definePalette('green-background', greenBackgroundPalette);\r\n\r\n        var greenPrimaryPalette = $mdThemingProvider.extendPalette('green', {\r\n            '300': '#9ed4a1',\r\n            'contrastLightColors': ['500', '300']\r\n        });\r\n        $mdThemingProvider.definePalette('green-primary', greenPrimaryPalette);\r\n\r\n\r\n        var greenAccentPalette = $mdThemingProvider.extendPalette('amber', {\r\n            'contrastLightColors': ['A700']\r\n        });\r\n        $mdThemingProvider.definePalette('green-accent', greenAccentPalette);\r\n\r\n        $mdThemingProvider.theme('green')\r\n            .primaryPalette('green-primary', {\r\n                'default': '500',\r\n                'hue-1': '300'\r\n            })\r\n            .backgroundPalette('green-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('green-accent', {\r\n                'default': 'A700'\r\n            });\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Grey', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     grey: 'Grey'\r\n        // });\r\n        \r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     grey: 'Серая'\r\n        // });\r\n\r\n        var thirdPartyPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(255, 152, 0, 1)',\r\n            'A400': '#a9b9c0',\r\n            '500': '#607D8B',\r\n            'A700': '#90A4AE',\r\n            //'800': '',\r\n            'contrastDefaultColor': 'dark',\r\n            'contrastLightColors': ['300', '400', '500', '600', '700', '800', '900', 'A700']\r\n        });\r\n        $mdThemingProvider.definePalette('third-party', thirdPartyPalette);\r\n\r\n\r\n        $mdThemingProvider.theme('grey')\r\n            .primaryPalette('third-party', {\r\n                'default': '500',\r\n                'hue-1': 'A400'\r\n            })\r\n            .backgroundPalette('third-party', {\r\n                'default': '50',  // background\r\n                'hue-1': '500',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('third-party', {\r\n                'default': 'A700'\r\n            });\r\n        \r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Navy', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     navy: 'Navy'\r\n        // });\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     navy: 'Сине-серая'\r\n        // });\r\n\r\n        var greyPalette = $mdThemingProvider.extendPalette('grey', {\r\n            '700': 'rgba(86, 97, 125, 1)',\r\n            '800': 'rgba(86, 97, 125, .54)',\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n        });\r\n        $mdThemingProvider.definePalette('grey', greyPalette);\r\n\r\n        var tealPalette = $mdThemingProvider.extendPalette('teal', {\r\n            'contrastLightColors': ['500', '600', '700', '800', '900', 'A700']\r\n        });\r\n        $mdThemingProvider.definePalette('teal', tealPalette);\r\n\r\n        $mdThemingProvider.theme('navy')\r\n            .primaryPalette('grey', {\r\n                'default': '700',\r\n                'hue-1': '800'\r\n            })\r\n            .backgroundPalette('grey', {\r\n                'default': '50',  // background\r\n                'hue-1': '700',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('teal', {\r\n                'default': 'A700'\r\n            });\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Orange', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     orange: 'Orange'\r\n        // });\r\n\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     orange: 'Оранжевая'\r\n        // });\r\n\r\n        var RedBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(255, 112, 67, 1)',\r\n            'contrastLightColors': ['600', '700', '800', '900', 'A200']\r\n        });\r\n        $mdThemingProvider.definePalette('red-background', RedBackgroundPalette);\r\n\r\n        var RedPrimaryPalette = $mdThemingProvider.extendPalette('orange', {\r\n            '800': 'rgba(255, 112, 67, 1)',\r\n            '900': 'rgba(255, 152, 67, .54)',\r\n            'A100': 'rgba(255, 171, 64, 1)',\r\n            'contrastLightColors': ['800', '900', 'A100']\r\n        });\r\n        $mdThemingProvider.definePalette('red-primary', RedPrimaryPalette);\r\n\r\n        $mdThemingProvider.theme('orange')\r\n            .primaryPalette('red-primary', {\r\n                'default': '800',\r\n                'hue-1': '900'\r\n            })\r\n            .backgroundPalette('red-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('red-primary', {\r\n                'default': 'A100'\r\n            });\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n    }\r\n})();\r\n","(function () {\r\n    'use strict';\r\n    var thisModule = angular.module('pipTheme.Pink', ['ngMaterial']);\r\n\r\n    thisModule.config(config);\r\n\r\n    function config($mdThemingProvider) {\r\n        // pipTranslateProvider.translations('en', {\r\n        //     THEME: 'Theme',\r\n        //     pink: 'Pink'\r\n        // });\r\n        // pipTranslateProvider.translations('ru', {\r\n        //     THEME: 'Тема',\r\n        //     pink: 'Розовая',\r\n\r\n        // });\r\n\r\n        var PinkBackgroundPalette = $mdThemingProvider.extendPalette('grey', {\r\n            'A100': 'rgba(250, 250, 250, 1)',\r\n            'A200': 'rgba(188, 86, 121, 1)',\r\n            'contrastDefaultColor': 'dark',\r\n            'contrastLightColors': ['A200', 'A700']\r\n        });\r\n        $mdThemingProvider.definePalette('pink-background', PinkBackgroundPalette);\r\n\r\n        var PinkPrimaryPalette = $mdThemingProvider.extendPalette('pink', {\r\n            '600': 'rgba(255, 128, 171, 1)',\r\n            '700': 'rgba(188, 86, 121, .54)',\r\n            '900': 'rgba(188, 86, 121, 1)',\r\n            'contrastDefaultColor': 'light'\r\n        });\r\n        $mdThemingProvider.definePalette('pink-primary', PinkPrimaryPalette);\r\n\r\n        $mdThemingProvider.theme('pink')\r\n            .primaryPalette('pink-primary', {\r\n                'default': '900',\r\n                'hue-1': '700'\r\n            })\r\n            .backgroundPalette('pink-background', {\r\n                'default': '50',  // background\r\n                'hue-1': 'A200',  // tiles dialog\r\n                'hue-2': 'A700'   // app bar\r\n            })\r\n            .warnPalette('red', {\r\n                'default': 'A200'\r\n            })\r\n            .accentPalette('pink-primary', {\r\n                'default': '600'\r\n            });\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n    }\r\n})();\r\n","<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\r\n    <div style=\"background-image: url('images/maintenance.svg');\" class=\"pip-pic\"></div>\r\n    <div class=\"pip-error-text\">{{::'ERROR_AVAILABLE_TITLE' | translate}}</div>\r\n    <div class=\"pip-error-subtext\">{{::'ERROR_AVAILABLE_SUBTITLE' | translate}}</div>\r\n    <div class=\"pip-error-subtext\" ng-if=\"timeoutInterval\">\r\n        {{::'ERROR_AVAILABLE_TRY_AGAIN' | translate}} {{timeoutInterval}} sec.\r\n    </div>\r\n    <div class=\"pip-error-actions h48 layout-column layout-align-center-center\"\r\n         ng-if=\"isCordova\">\r\n        <md-button class=\"md-accent\" ng-click=\"onClose($event)\" aria-label=\"CLOSE\" >\r\n            {{::'ERROR_AVAILABLE_CLOSE' | translate}}\r\n        </md-button>\r\n    </div>\r\n</div>","<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\r\n    <div style=\"background-image: url('images/invalid_route.svg');\" class=\"pip-pic\"></div>\r\n    <div class=\"pip-error-text\">{{::'ERROR_ROUTE_TITLE' | translate}}</div>\r\n    <div class=\"pip-error-subtext\">{{::'ERROR_ROUTE_SUBTITLE' | translate}}</div>\r\n\r\n    <div class=\"pip-error-actions h48 layout-column layout-align-center-center\">\r\n        <md-button aria-label=\"CONTINUE\" class=\"md-accent\" ng-click=\"onContinue($event)\">\r\n            {{::'ERROR_ROUTE_CONTINUE' | translate}}\r\n        </md-button>\r\n    </div>\r\n    <div class=\"h48\" ng-if=\"url\"><a ng-href=\"{{url}}\">\r\n        {{::'ERROR_ROUTE_TRY_AGAIN' | translate }}: {{url}}\r\n    </a></div>\r\n    <div class=\"h48\" ng-if=\"urlBack\"><a ng-href=\"{{urlBack}}\">\r\n        {{::'ERROR_ROUTE_GO_BACK' | translate }}: {{urlBack}}\r\n    </a></div>\r\n</div>","<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\r\n    <div style=\"background-image: url('images/no_response.svg');\" class=\"pip-pic\"></div>\r\n    <div class=\"pip-error-text\">{{::'ERROR_RESPONDING_TITLE' | translate}}</div>\r\n    <div class=\"pip-error-subtext\">{{::'ERROR_RESPONDING_SUBTITLE' | translate}}</div>\r\n\r\n    <div class=\"pip-error-actions h48 layout-column layout-align-center-center\">\r\n        <md-button aria-label=\"RETRY\" class=\"md-accent\" ng-click=\"onRetry($event)\">\r\n            {{::'ERROR_RESPONDING_RETRY' | translate}}\r\n        </md-button>\r\n    </div>\r\n</div>","    <div class=\"pip-empty pip-error layout-column layout-align-center-center flex\">\r\n        <img src=\"images/no_response.svg\" class=\"pip-pic block\" >\r\n        \r\n            <div class=\"pip-error-text\">{{::'ERROR_RESPONDING_TITLE' | translate}}</div>\r\n            <div class=\"pip-error-subtext\">{{::'ERROR_RESPONDING_SUBTITLE' | translate}}</div>\r\n\r\n            <div class=\"pip-error-actions h48 layout-column layout-align-center-center\">\r\n                <md-button aria-label=\"RETRY\" class=\"md-accent\" ng-click=\"onRetry($event)\">\r\n                    {{::'ERROR_RESPONDING_RETRY' | translate}}\r\n                </md-button>\r\n            </div>\r\n    </div>","<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\r\n    <div style=\"background-image: url('images/unknown_error.svg');\" class=\"pip-pic\"></div>\r\n    <div class=\"pip-error-text\">{{::'ERROR_UNKNOWN_TITLE' | translate}}</div>\r\n    <div class=\"pip-error-subtext\">{{::'ERROR_UNKNOWN_SUBTITLE' | translate}}</div>\r\n\r\n    <div class=\"pip-error-subtext\" ng-if=\"showError && error_details && error_details.status\">\r\n        <div ng-if=\"error_details.code\">Code: {{error_details.code}}</div>\r\n        <div ng-if=\"error_details.description\">Description: {{error_details.description}}</div>\r\n        <div ng-if=\"error_details.status\">HTTP status: {{error_details.status}}</div>\r\n        <div ng-if=\"error_details.server_stacktrace\">Server stacktrace: {{error_details.server_stacktrace}}</div>\r\n        <div ng-if=\"error_details.client_stacktrace\">Client stacktrace stacktrace: {{error_details.client_stacktrace}}</div>\r\n    </div>\r\n    <div class=\"pip-error-actions layout-column layout-align-center-center\">\r\n        <div class=\"h48\" ng-if=\"isCordova\">\r\n            <md-button aria-label=\"CLOSE\" class=\"md-accent\" ng-click=\"onClose($event)\">\r\n                {{::'ERROR_UNKNOWN_CLOSE' | translate}}\r\n            </md-button>\r\n        </div>\r\n        <div class=\"h48\">\r\n            <md-button aria-label=\"DETAILS\" class=\"md-accent\" ng-click=\"onDetails($event)\">\r\n                {{::'ERROR_UNKNOWN_DETAILS' | translate}}\r\n            </md-button>\r\n        </div>\r\n    </div>\r\n</div>","<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\r\n\r\n    <div class=\"pip-error-text\">{{::'ERROR_UNSUPPORTED_TITLE' | translate}}</div>\r\n    <div class=\"pip-error-subtext\">\r\n        {{::'ERROR_UNSUPPORTED_SUBTITLE' | translate}}\r\n    </div>\r\n    <div class=\"pip-error-details layout-row layout-align-center-center\" ng-if=\"$mdMedia('gt-xs')\">\r\n        <div class=\"pip-error-details-item layout-column layout-align-center-center\">\r\n            <div style=\"background-image: url('images/ie.svg');\" class=\"pip-pic\"></div>\r\n            <div class=\"h64 tp16 bp16\">\r\n                <a class=\"text-body2 m0\" target=\"_blank\"\r\n                   href=\"https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx\">\r\n                    {{::'ERROR_UNSUPPORTED_IE' | translate}}\r\n                </a>\r\n                <p class=\"text-body1 m0\"> {{::'ERROR_UNSUPPORTED_IE_VER' | translate}}</p>\r\n            </div>\r\n        </div>\r\n        <div class=\"pip-error-details-item layout-column layout-align-center-center\">\r\n            <div style=\"background-image: url('images/fm.svg');\" class=\"pip-pic\"></div>\r\n            <div class=\"h64 tp16 bp16\">\r\n                <a class=\"text-body2 m0\" target=\"_blank\"\r\n                   href=\"https://www.mozilla.org/ru/firefox/new/\">\r\n                    {{::'ERROR_UNSUPPORTED_FM' | translate}}\r\n                </a>\r\n                <p class=\"text-body1 m0\"> {{::'ERROR_UNSUPPORTED_FM_VER' | translate}}</p>\r\n            </div>\r\n        </div>\r\n        <div class=\"pip-error-details-item layout-column layout-align-center-center\">\r\n            <div style=\"background-image: url('images/gc.svg');\" class=\"pip-pic\"></div>\r\n            <div class=\"h64 tp16 bp16\">\r\n                <a class=\"text-body2 m0\" target=\"_blank\"\r\n                   href=\"https://www.google.com/chrome/browser/desktop/index.html?platform=win64#\">\r\n                    {{::'ERROR_UNSUPPORTED_GC' | translate}}\r\n                </a>\r\n                <p class=\"text-body1 m0\"> {{::'ERROR_UNSUPPORTED_GC_VER' | translate}}</p>\r\n            </div>\r\n        </div>\r\n        <div class=\"pip-error-details-item layout-column layout-align-center-center\">\r\n            <div style=\"background-image: url('images/o.svg');\" class=\"pip-pic\"></div>\r\n            <div class=\"h64 tp16 bp16\">\r\n                <a class=\"text-body2 m0\" target=\"_blank\"\r\n                   href=\"http://www.opera.com/ru/download\">\r\n                    {{::'ERROR_UNSUPPORTED_O' | translate}}\r\n                </a>\r\n                <p class=\"text-body1 m0\"> {{::'ERROR_UNSUPPORTED_O_VER' | translate}}</p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"pip-error-details\" ng-if=\"$mdMedia('xs')\">\r\n        <div class=\"layout-row layout-align-center-center\">\r\n            <div class=\"pip-error-details-item layout-column layout-align-center-center\">\r\n                <div style=\"background-image: url('images/ie.svg');\" class=\"pip-pic\"></div>\r\n                <div class=\"h64 tp16 bp16\">\r\n                    <a class=\"text-body2 m0\" target=\"_blank\"\r\n                       href=\"https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx\">\r\n                        {{::'ERROR_UNSUPPORTED_IE' | translate}}\r\n                    </a>\r\n                    <p class=\"text-body1 m0\"> {{::'ERROR_UNSUPPORTED_IE_VER' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"pip-error-details-item layout-column layout-align-center-center\">\r\n                <div style=\"background-image: url('images/fm.svg');\" class=\"pip-pic\"></div>\r\n                <div class=\"h64 tp16 bp16\">\r\n                    <a class=\"text-body2 m0\" target=\"_blank\"\r\n                       href=\"https://www.mozilla.org/ru/firefox/new/\">\r\n                        {{::'ERROR_UNSUPPORTED_FM' | translate}}\r\n                    </a>\r\n                    <p class=\"text-body1 m0\"> {{::'ERROR_UNSUPPORTED_FM_VER' | translate}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"tm16 layout-row layout-align-center-center\">\r\n            <div class=\"pip-error-details-item layout-column layout-align-center-center\">\r\n                <div style=\"background-image: url('images/gc.svg');\" class=\"pip-pic\"></div>\r\n                <div class=\"h64 tp16 bp16\">\r\n                    <a class=\"text-body2 m0\" target=\"_blank\"\r\n                       href=\"https://www.google.com/chrome/browser/desktop/index.html?platform=win64#\">\r\n                        {{::'ERROR_UNSUPPORTED_GC' | translate}}\r\n                    </a>\r\n                    <p class=\"text-body1 m0\"> {{::'ERROR_UNSUPPORTED_GC_VER' | translate}}</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"pip-error-details-item layout-column layout-align-center-center\">\r\n                <div style=\"background-image: url('images/o.svg');\" class=\"pip-pic\"></div>\r\n                <div class=\"h64 tp16 bp16\">\r\n                    <a class=\"text-body2 m0\" target=\"_blank\"\r\n                       href=\"http://www.opera.com/ru/download\">\r\n                        {{::'ERROR_UNSUPPORTED_O' | translate}}\r\n                    </a>\r\n                    <p class=\"text-body1 m0\"> {{::'ERROR_UNSUPPORTED_O_VER' | translate}}</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n","/**\r\n * @file Registration of all error handling components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipErrors', [\r\n        'pipErrors.Pages',\r\n        'pipNoConnectionPanel',\r\n        'pipClearErrors',\r\n\t    'pipFormErrors'\r\n    ]);\r\n    \r\n})();","/**\r\n * @file Errors string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Strings', ['pipTranslate']);\r\n\r\n    thisModule.run(function($injector) {\r\n        var pipTranslate = $injector.has('pipTranslate') ? $injector.get('pipTranslate') : null;\r\n        if (pipTranslate == null) return;\r\n\r\n        // Set translation strings for the module\r\n        pipTranslate.translations('en', {\r\n            'ERROR_ROUTE_TITLE': 'Sorry, the page isn\\'t available',\r\n            'ERROR_ROUTE_SUBTITLE': 'The link you followed may be broken, or the page may have been removed.',\r\n            'ERROR_ROUTE_CONTINUE': 'Continue',\r\n            'ERROR_ROUTE_TRY_AGAIN': 'Try again',\r\n            'ERROR_ROUTE_GO_BACK': 'Go Back',\r\n            'ERROR_ROUTE_PAGE_TITLE': 'Wrong page',\r\n\r\n            'ERROR_UNKNOWN_TITLE': 'Oops. Something went wrong',\r\n            'ERROR_UNKNOWN_SUBTITLE': 'Unknown error occurred, but don\\'t worry we already have been notified.',\r\n            'ERROR_UNKNOWN_CLOSE': 'Close',\r\n            'ERROR_UNKNOWN_DETAILS': 'Details',\r\n\r\n            'ERROR_AVAILABLE_TITLE': 'The server is on maintenance',\r\n            'ERROR_AVAILABLE_SUBTITLE': 'Sorry for the inconvenience. This application is undergoing maintenance for ' +\r\n                                            'a short period. We\\'ll be back soon. Thank for your patience.',\r\n            'ERROR_AVAILABLE_CLOSE': 'Close',\r\n            'ERROR_AVAILABLE_TRY_AGAIN': 'Try after',\r\n\r\n            'ERROR_RESPONDING_TITLE': 'No connection to the server',\r\n            'ERROR_RESPONDING_SUBTITLE': 'Unable to connect to the server. Check your Internet connection and try again.',\r\n            'ERROR_RESPONDING_RETRY': 'Retry',\r\n\r\n            'ERROR_UNSUPPORTED_TITLE': 'This browser is not supported',\r\n            'ERROR_UNSUPPORTED_SUBTITLE': 'Our application using the latest technology. This makes the application faster ' +\r\n                                          'and easier to use. Unfortunately, your browser doesn\\'t support those ' +\r\n                                          'technologies. Download on of these great browsers and you\\'ll be on your way:',\r\n            'ERROR_UNSUPPORTED_O': 'Opera',\r\n            'ERROR_UNSUPPORTED_O_VER': 'Version 36+',\r\n            'ERROR_UNSUPPORTED_IE': 'Internet Explorer',\r\n            'ERROR_UNSUPPORTED_IE_VER': 'Version 11+',\r\n            'ERROR_UNSUPPORTED_GC': 'Google Chrome',\r\n            'ERROR_UNSUPPORTED_GC_VER': 'Version 48+',\r\n            'ERROR_UNSUPPORTED_FM': 'Mozilla Firefox',\r\n            'ERROR_UNSUPPORTED_FM_VER': 'Version 45+'\r\n\r\n        });\r\n\r\n        pipTranslate.translations('ru', {\r\n            'ERROR_ROUTE_TITLE': 'Sorry, the page isn\\'t available',\r\n            'ERROR_ROUTE_SUBTITLE': 'The link you followed may be broken, or the page may have been removed.',\r\n            'ERROR_ROUTE_CONTINUE': 'Continue',\r\n            'ERROR_ROUTE_TRY_AGAIN': 'Try again',\r\n            'ERROR_ROUTE_GO_BACK': 'Go Back',\r\n            'ERROR_ROUTE_PAGE_TITLE': 'Wrong page',\r\n\r\n            'ERROR_UNKNOWN_TITLE': 'Oops. Something went wrong',\r\n            'ERROR_UNKNOWN_SUBTITLE': 'Unknown error occurred, but don\\'t worry we already have been notified.',\r\n            'ERROR_UNKNOWN_CLOSE': 'Close',\r\n            'ERROR_UNKNOWN_DETAILS': 'Details',\r\n\r\n            'ERROR_AVAILABLE_TITLE': 'The server is on maintenance',\r\n            'ERROR_AVAILABLE_SUBTITLE': 'Sorry for the inconvenience. This application is undergoing maintenance for ' +\r\n            'a short period. We\\'ll be back soon. Thank for your patience.',\r\n            'ERROR_AVAILABLE_CLOSE': 'Close',\r\n            'ERROR_AVAILABLE_TRY_AGAIN': 'Try after',\r\n\r\n            'ERROR_RESPONDING_TITLE': 'No connection to the server',\r\n            'ERROR_RESPONDING_SUBTITLE': 'Unable to connect to server. Check your Internet connection and try again.',\r\n            'ERROR_RESPONDING_RETRY': 'Retry',\r\n\r\n            'ERROR_UNSUPPORTED_TITLE': 'This browser is not supported',\r\n            'ERROR_UNSUPPORTED_SUBTITLE': 'Our application using the latest technology. This makes the application faster ' +\r\n            'and easier to use. Unfortunately, your browser doesn\\'t support those ' +\r\n            'technologies. Download on of these great browsers and you\\'ll be on your way:',            \r\n            'ERROR_UNSUPPORTED_O': 'Opera',\r\n            'ERROR_UNSUPPORTED_O_VER': 'Version 35+',\r\n            'ERROR_UNSUPPORTED_IE': 'Internet Explorer',\r\n            'ERROR_UNSUPPORTED_IE_VER': 'Version 11+',\r\n            'ERROR_UNSUPPORTED_GC': 'Google Chrome',\r\n            'ERROR_UNSUPPORTED_GC_VER': 'Version 47+',\r\n            'ERROR_UNSUPPORTED_FM': 'Mozilla Firefox',\r\n            'ERROR_UNSUPPORTED_FM_VER': 'Version 43+'\r\n\r\n        });\r\n    });\r\n\r\n})();","/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Pages', [\r\n        'ngMaterial', \r\n        'pipErrors.Strings', 'pipErrors.NoConnection', 'pipErrors.MissingRoute', 'pipErrors.Unsupported',\r\n        'pipErrors.Unknown', 'pipErrors.Maintenance', 'pipErrors.Translate', 'pipErrors.Templates'\r\n    ]);\r\n\r\n    thisModule.config(\r\n        function ($stateProvider) {\r\n            // Configure module routes\r\n            $stateProvider\r\n                .state('errors_no_connection', {\r\n                    url: '/errors/no_connection',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorNoConnectionController',\r\n                    templateUrl: 'no_connection/no_connection.html'\r\n                })\r\n                .state('errors_maintenance', {\r\n                    url: '/errors/maintenance',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorMaintenanceController',\r\n                    templateUrl: 'maintenance/maintenance.html'\r\n                })\r\n                .state('errors_missing_route', {\r\n                    url: '/errors/missing_route',\r\n                    params: {\r\n                        unfoundState: null,\r\n                        fromState: null\r\n                    },\r\n                    controller: 'pipErrorMissingRouteController',\r\n                    templateUrl: 'missing_route/missing_route.html'\r\n                })\r\n                .state('errors_unsupported', {\r\n                    url: '/errors/unsupported',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorUnsupportedController',\r\n                    templateUrl: 'unsupported/unsupported.html'\r\n                })\r\n                .state('errors_unknown', {\r\n                    url: '/errors/unknown',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    controller: 'pipErrorUnknownController',\r\n                    templateUrl: 'unknown/unknown.html'\r\n                });\r\n        });\r\n\r\n})();","/**\r\n * @file Special error handling for forms\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipClearErrors', []);\r\n\r\n    thisModule.directive('pipClearErrors', function () {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['ngModel', '^?form'],\r\n            link: function ($scope, $element, $attrs: any, $ctrls) {\r\n                var \r\n                    fieldController = $ctrls[0],\r\n                    formController = $ctrls[1];\r\n\r\n                $scope.$watch($attrs.ngModel, function (newValue) {\r\n                    clearFieldErrors();\r\n                    clearFormErrors();\r\n                });\r\n\r\n                //-------------------\r\n\r\n                function clearFieldErrors() {\r\n                    var errors = fieldController.$error;\r\n\r\n                    for (var prop in errors) {\r\n                        if (errors.hasOwnProperty(prop) && prop.substring(0, 6) == 'ERROR_') {\r\n                            fieldController.$setValidity(prop, true);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                function clearFormErrors() {\r\n                    formController.$serverError = {};\r\n                };\r\n            }\r\n        };\r\n    });\r\n\r\n})();","/**\r\n * @file Form error utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n *\r\n */\r\n \r\n /* global _, angular */\r\n \r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipFormErrors', []);\r\n\r\n    thisModule.factory('pipFormErrors', function ($rootScope) {\r\n\t\treturn {\r\n\t\t\terrorsWithHint: errorsWithHint,\r\n            //submittedErrors: submittedErrors,\r\n            //submittedErrorsWithHint: submittedErrorsWithHint,\r\n            //dirtyErrors: dirtyErrors,\r\n            //dirtyErrorsWithHint: dirtyErrorsWithHint,\r\n            //touchedErrors: touchedErrors,            \r\n            touchedErrorsWithHint: touchedErrorsWithHint,\r\n            resetFormErrors: resetFormErrors,\r\n            setFormError: setFormError,\r\n            resetFieldsErrors: resetFieldsErrors\r\n\t\t};\r\n\t\t//-------------------\r\n\r\n        function errorsWithHint(field) {\r\n            if (field == null) return;\r\n\t\t\t\r\n            return _.isEmpty(field.$error) ? { hint: true } : field.$error;\r\n        };\r\n\t\t\r\n//         function submittedErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (form.$submitted)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n// \r\n//         function submittedErrorsWithHint(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (form.$submitted) {\r\n//                 return _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n//             }\r\n//             return { hint: true };\r\n//         };\r\n// \r\n//         function dirtyErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (field.$dirty || form.$dirty)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n// \r\n//         function dirtyErrorsWithHint(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (field.$dirty || form.$dirty) {\r\n//                 return _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n//             }\r\n//             return { hint: true };\r\n//         };\r\n// \r\n//         function touchedErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n//             \r\n//             if (field.$touched || form.$dirty)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n\r\n        function touchedErrorsWithHint(form, field) {\r\n            if (form == null) return;\r\n            if (field == null) return;\r\n\r\n            if (form.$submitted && (field.$touched || form.$dirty) || !form.$submitted && (field.$touched || field.$dirty)) {\r\n                var result = _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n                return result;\r\n            }\r\n            return { hint: true };\r\n        };\r\n\r\n        function resetFormErrors(form, errors) {\r\n            form.$setPristine();\r\n            form.$setUntouched();\r\n\r\n            if (errors) {\r\n                form.$setDirty();\r\n                form.$setSubmitted();\r\n            }\r\n\r\n            form.$serverError = {};\r\n        };\r\n        \r\n        function resetFieldsErrors(form, field) {\r\n            if (!form) return;\r\n            if (field && form[field] && form[field].$error) {\r\n                 form[field].$error = {};\r\n            } else {\r\n                for (var prop in form) {\r\n                    if (form[prop] && form[prop].$error) {\r\n                        form[prop].$error = {};\r\n                    };\r\n                }\r\n                if (form && form.$error) form.$error = {};\r\n            }\r\n        };\r\n        \r\n        function setFormError(form, error, errorFieldMap) {\r\n            if (error == null) return;\r\n            // Prepare form server errors\r\n            form.$serverError = form.$serverError || {};\r\n            // Prepare error code\r\n            var code = error.code || (error.data || {}).code || null;\r\n            if (!code && error.status) code = error.status;\r\n\r\n            if (code) {\r\n                var \r\n                    errorName = 'ERROR_' + code,\r\n                    field = errorFieldMap ? errorFieldMap[code] : null;\r\n                // Set server error to fields\r\n                if (field && form[field] && form[field].$setValidity) {\r\n                    form[field].$setValidity(errorName, false);\r\n                    return;\r\n                }\r\n\r\n                // Set server error to form\r\n                if (field == 'form') {\r\n                    form.$serverError[errorName] = true;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // if undefined error for this form or code === undefined/null, go to unhandled error page\r\n            if (error.data && error.data.message) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.data.message;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            // Set as undefined error\r\n            if (error.message) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.message;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            if (error.name) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.name;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            form.$serverError['ERROR_UNKNOWN'] = error;\r\n            goToUnhandledErrorPage(error);\r\n        };\r\n\r\n        function goToUnhandledErrorPage(error) {\r\n            $rootScope.$emit('pipUnhandledInternalError', {\r\n                error: error\r\n            });\r\n        };\r\n        \r\n\t});\r\n\r\n})();","/**\r\n * @file Maintenance error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Maintenance', []);\r\n\r\n    thisModule.controller('pipErrorMaintenanceController', function ($scope, $state, $rootScope, pipAppBar) {\r\n\r\n        $rootScope.$routing = false;\r\n        $scope.isCordova = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n        $scope.timeoutInterval = $scope.error && $scope.error.config &&\r\n                        $scope.error.config.params && $scope.error.config.params.interval ? $scope.error.config.params.interval : 0;\r\n\r\n        $scope.onClose = onClose;\r\n\r\n        return;\r\n\r\n        // Todo: Made dependencies optional\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_AVAILABLE_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n        function onClose() {\r\n\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Missing route error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.MissingRoute', []);\r\n\r\n    thisModule.controller('pipErrorMissingRouteController', function ($scope, $state, $rootScope, pipAppBar) {\r\n\r\n        appHeader();\r\n        $rootScope.$routing = false;\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.fromState : {};\r\n        $scope.unfoundState = $state && $state.params ?  $state.params.unfoundState : {};\r\n        $scope.url = $scope.unfoundState && $scope.unfoundState.to ? $state.href($scope.unfoundState.to, $scope.unfoundState.toParams, {absolute: true}) : '';\r\n        $scope.urlBack = $scope.fromState && $scope.fromState.to ? $state.href($scope.fromState.to, $scope.fromState.fromParams, {absolute: true}) : '';\r\n\r\n        $scope.onContinue = onContinue;\r\n\r\n        return;\r\n\r\n        // Todo: Made dependencies optional\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_ROUTE_PAGE_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n        function onContinue() {\r\n            // Todo: Go to default state '/'\r\n            //pipAuthState.goToAuthorized();\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file No connection error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.NoConnection', []);\r\n\r\n    thisModule.controller('pipErrorNoConnectionController', function ($scope, $state, $rootScope, $window, pipAppBar) {\r\n\r\n        $rootScope.$routing = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n\r\n        $scope.onRetry = onRetry;\r\n\r\n        return;\r\n\r\n        function onRetry() {\r\n            $window.history.back();\r\n        };\r\n\r\n        // Todo: Made dependencies optional\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_RESPONDING_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n    });\r\n\r\n\r\n})();\r\n","/**\r\n * @file No Connection Error panel\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipNoConnectionPanel\", ['pipErrors.Translate']);\r\n\r\n    thisModule.directive('pipNoConnectionPanel',\r\n        function () {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    error: '=pipError',\r\n                    retry: '=pipRetry'\r\n                },\r\n                templateUrl: 'no_connection_panel/no_connection_panel.html',\r\n                controller: 'pipNoConnectionPanelController'\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipNoConnectionPanelController',\r\n        function ($scope, $element, $attrs, pipTranslate) {\r\n\r\n            $scope.onRetry = onRetry;\r\n\r\n            return;\r\n\r\n            function onRetry() {\r\n                if ($scope.retry && angular.isFunction($scope.retry)) $scope.retry();\r\n            };\r\n\r\n        }\r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Unknown error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Unknown', []);\r\n\r\n    thisModule.controller('pipErrorUnknownController', function ($scope, $state, $rootScope, pipAppBar) {\r\n\r\n        $rootScope.$routing = false;\r\n        $scope.isCordova = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n        $scope.error_details = null;\r\n\r\n        $scope.onDetails = onDetails;\r\n        $scope.onClose = onClose;\r\n\r\n        parseError();\r\n\r\n        return;\r\n\r\n        // Todo: Made dependencies optional\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_UNKNOWN_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n        function parseError() {\r\n            $scope.error_details = {};\r\n            $scope.error_details.code = $scope.error.code;\r\n            $scope.error_details.description = $scope.error.message;\r\n            $scope.error_details.status = $scope.error.status;\r\n\r\n            $scope.error_details.server_stacktrace = function () {\r\n\r\n            };\r\n\r\n            $scope.error_details.client_stacktrace = function () {\r\n\r\n            };\r\n        };\r\n\r\n        function onDetails() {\r\n            $scope.showError = true;\r\n        };\r\n\r\n        function onClose() {\r\n\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Unsupported error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Unsupported', []);\r\n\r\n    thisModule.controller('pipErrorUnsupportedController', function ($scope, $state, $rootScope, $mdMedia, pipAppBar) {\r\n\r\n        $scope.$mdMedia = $mdMedia;\r\n        $rootScope.$routing = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n\r\n        return;\r\n\r\n        // Todo: Made dependencies optional\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_UNSUPPORTED_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n    });\r\n\r\n})();\r\n","<div class=\"bar-chart flex-auto layout-column\">\r\n    <svg class=\"flex-auto\"></svg>\r\n</div>\r\n\r\n<pip-chart-legend pip-series=\"barChart.legend\" pip-interactive=\"false\"></pip-chart-legend>","<div >\r\n    <div class=\"chart-legend-item\" ng-repeat=\"item in series\">\r\n        <md-checkbox class=\"lp16 m8\"\r\n                     ng-model=\"item.disabled\"\r\n                     ng-true-value=\"false\"\r\n                     ng-false-value=\"true\"\r\n                     ng-if=\"interactive\"\r\n                     aria-label=\"{{ item.label }}\">\r\n            <p class=\"legend-item-value\"\r\n               ng-style=\"{'background-color': item.color}\">\r\n                {{ item.value }}\r\n            </p>\r\n            <p class=\"legend-item-label\">{{:: item.label || item.key }}</p>\r\n        </md-checkbox>\r\n\r\n        <div ng-if=\"!interactive\">\r\n            <span class=\"bullet\" ng-style=\"{'background-color': item.color}\"></span>\r\n            <span>{{:: item.label || item.key}}</span>\r\n        </div>\r\n    </div>\r\n</div>","<div class=\"line-chart\" flex=\"auto\" layout=\"column\">\r\n    <svg class=\"flex-auto\" ng-class=\"{'visible-x-axis': lineChart.isVisibleX(), 'visible-y-axis': lineChart.isVisibleY()}\">\r\n    </svg>\r\n    <div class=\"visual-scroll\">\r\n        <div class=\"scrolled-block\"></div>\r\n    </div>\r\n    <md-button class=\"md-fab md-mini minus-button\" ng-click=\"lineChart.zoomOut()\">\r\n        <md-icon md-svg-icon=\"icons:minus-circle\"></md-icon>\r\n    </md-button>\r\n    <md-button class=\"md-fab md-mini plus-button\" ng-click=\"lineChart.zoomIn()\">\r\n        <md-icon md-svg-icon=\"icons:plus-circle\"></md-icon>\r\n    </md-button>\r\n</div>\r\n\r\n<pip-chart-legend pip-series=\"lineChart.data\" pip-interactive=\"false\"></pip-chart-legend>\r\n","<div class=\"pie-chart\" flex=\"auto\" layout=\"column\">\r\n    <svg class=\"flex-auto\"></svg>\r\n</div>\r\n\r\n<pip-chart-legend pip-series=\"pieChart.data\" pip-interactive=\"false\"></pip-chart-legend>","/**\r\n * @file Registration of chart WebUI controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipCharts', [\r\n        'pipBarCharts',\r\n        'pipLineCharts',\r\n        'pipPieCharts',\r\n        'pipChartLegends'\r\n    ]);\r\n\r\n})();\r\n\r\n","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipBarCharts\r\n     *\r\n     * @description\r\n     * Bar chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipBarCharts', [])\r\n        .directive('pipBarChart', pipBarChart);\r\n\r\n    function pipBarChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'barChart',\r\n            templateUrl: 'bar/bar_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                var vm = this;\r\n                var chart = null;\r\n                var chartElem = null;\r\n                var colors = _.map($mdColorPalette, function (palette, color) {\r\n                    return color;\r\n                });\r\n\r\n                vm.data = vm.series || [];\r\n\r\n                if ((vm.series || []).length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                //colors = _.sample(colors, colors.length);\r\n\r\n                // sets legend params\r\n                vm.legend = vm.data[0].values;\r\n                \r\n                // Sets colors of items\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                $scope.$watch('barChart.series', function (updatedSeries) {\r\n                    vm.data = updatedSeries || [];\r\n\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                        chart.update();\r\n                        // Todo: the method does not exist\r\n                        //intervalUpdate(chart.update, 10);\r\n                    }\r\n                });\r\n\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(function () {\r\n                    chart = nv.models.discreteBarChart()\r\n                        .margin({top: 10, right: 0, bottom: 0, left: -50})\r\n                        .x(function (d) { return d.label; })\r\n                        .y(function (d) { return d.value; })\r\n                        .showValues(true)\r\n                        .showXAxis(false)\r\n                        .showYAxis(false)\r\n                        .valueFormat(<any>d3.format('d'))\r\n                        .duration(0)\r\n                        .height(270)\r\n                        .color(function(d) {\r\n                            return d.color || (<any>d3.scale).paletteColors().range();\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('No data for this moment...');\r\n\r\n                    chartElem = d3.select($element.get(0))\r\n                        .select('.bar-chart svg')\r\n                        .datum(vm.data)\r\n                        .style('height', 270)\r\n                        .call(chart);\r\n\r\n                    //nv.utils.windowResize(chart.update);\r\n\r\n                    return chart;\r\n                }, function () {\r\n                    chart.dispatch.on('beforeUpdate', function () {\r\n                        $timeout(configBarWidthAndLabel, 0);\r\n                    });\r\n\r\n                    $timeout(configBarWidthAndLabel, 0);\r\n                });\r\n\r\n                /**\r\n                 * Aligns value label according to parent container size.\r\n                 * @return {void}\r\n                 */\r\n                function configBarWidthAndLabel() {\r\n                    var labels = d3.selectAll('.nv-bar text')[0],\r\n                        chartBars = d3.selectAll('.nv-bar')[0],\r\n                        parentHeight = (<any>d3.select('.nvd3-svg')[0][0]).getBBox().height;\r\n\r\n                    d3.select('.bar-chart').classed('visible', true);\r\n\r\n                    chartBars.forEach(function (item, index) {\r\n                        var barSize = (<any>item).getBBox(),\r\n                            element = d3.select(item),\r\n                            y = d3.transform(element.attr('transform')).translate[1];\r\n                        \r\n                        element\r\n                            .attr('transform', 'translate(' + Number(index * (38 + 8) + 50) + ', ' + parentHeight + ')')\r\n                            .select('rect')\r\n                            .attr('width', 38);\r\n\r\n                        element\r\n                            .transition()\r\n                            .duration(1000)\r\n                            .attr('transform', 'translate(' + Number(index * (38 + 8) + 50) + ', ' + y + ')');\r\n\r\n                        d3.select(labels[index])\r\n                            .attr('dy', barSize.height / 2)\r\n                            .attr('x', 19);\r\n                    });\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    vm.legend.forEach(function (item, index) {\r\n                        item.color = item.color || materialColorToRgba(colors[index]);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipLegends\r\n     *\r\n     * @description\r\n     * Legend of charts\r\n     */\r\n    angular.module('pipChartLegends', [])\r\n        .directive('pipChartLegend', pipChartLegend);\r\n\r\n    function pipChartLegend() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                interactive: '=pipInteractive'\r\n            },\r\n            templateUrl: 'legend/interactive_legend.html',\r\n            controller: function ($element, $scope, $timeout, $mdColorPalette) {\r\n                var colors = _.map($mdColorPalette, function (palette) {\r\n                    return palette[500].hex;\r\n                });\r\n\r\n                function colorCheckboxes() {\r\n                    var checkboxContainers = $($element).find('md-checkbox .md-container');\r\n                    \r\n                    checkboxContainers.each(function (index, item) {\r\n                        $(item)\r\n                            .css('color', $scope.series[index].color || colors[index])\r\n                            .find('.md-icon')\r\n                            .css('background-color', $scope.series[index].color || colors[index]);\r\n                    });\r\n                }\r\n\r\n                function animate() {\r\n                    var legendTitles = $($element).find('.chart-legend-item');\r\n\r\n                    legendTitles.each(function (index, item) {\r\n                        $timeout(function () {\r\n                            $(item).addClass('visible');\r\n                        }, 200 * index);\r\n                    });\r\n                }\r\n                \r\n                function prepareSeries() {\r\n                    $scope.series.forEach(function (item, index) {\r\n                        item.color = item.color || colors[index];\r\n                        item.disabled = item.disabled || false;\r\n                    });   \r\n                }\r\n\r\n                $scope.$watch('series', function () {\r\n                    $timeout(function () {\r\n                        animate();\r\n                        colorCheckboxes();\r\n                    }, 0);\r\n                    prepareSeries();\r\n                }, true);\r\n\r\n                $scope.$watch('interactive', function (newValue, oldValue) {\r\n                    if (newValue == true && newValue != oldValue) {\r\n                        $timeout(colorCheckboxes, 0);\r\n                    }\r\n                });\r\n\r\n                $timeout(function () {\r\n                    animate();\r\n                    colorCheckboxes();\r\n                }, 0);\r\n                prepareSeries();\r\n            }\r\n        };\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipLineCharts\r\n     *\r\n     * @description\r\n     * Line chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipLineCharts', [])\r\n        .directive('pipLineChart', pipLineChart);\r\n\r\n    function pipLineChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries',\r\n                showYAxis: '=pipYAxis',\r\n                showXAxis: '=pipXAxis',\r\n                dynamic: '=pipDynamic'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'lineChart',\r\n            templateUrl: 'line/line_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                var vm        = this;\r\n                var chart     = null;\r\n                var chartElem = null;\r\n                var setZoom = null;\r\n                var colors    = _.map($mdColorPalette, function (palette, color) {\r\n                    return color;\r\n                });\r\n\r\n                vm.data = vm.series || [];\r\n                vm.sourceEvents = [];\r\n                \r\n                vm.isVisibleX = function () {\r\n                    return vm.showXAxis == undefined ? true : vm.showXAxis; \r\n                };\r\n\r\n                vm.isVisibleY = function () {\r\n                    return vm.showYAxis == undefined ? true : vm.showYAxis;\r\n                };\r\n\r\n                vm.zoomIn = function () {\r\n                    if (setZoom) {\r\n                        setZoom('in');\r\n                    }\r\n                };\r\n\r\n                vm.zoomOut = function () {\r\n                    if (setZoom) {\r\n                        setZoom('out');\r\n                    }\r\n                };\r\n                \r\n                if (vm.series.length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                // Sets colors of items\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                $scope.$watch('lineChart.series', function (updatedSeries) {\r\n                    vm.data = updatedSeries;\r\n\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                    }\r\n                }, true);\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(function () {\r\n                    chart = nv.models.lineChart()\r\n                        .margin({ top: 20, right: 20, bottom: 30, left: 30 })\r\n                        .x(function (d) {\r\n                            return d.x;\r\n                        })\r\n                        .y(function (d) {\r\n                            return d.value;\r\n                        })\r\n                        .height(270)\r\n                        .interactive(true)\r\n                        .showXAxis(true)\r\n                        .showYAxis(true)\r\n                        .showLegend(false)\r\n                        .color(function(d) {\r\n                            return d.color || (<any>d3.scale).paletteColors().range();\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('No data for this moment...');\r\n\r\n                    chart.yAxis\r\n                        .tickFormat(function (d) {\r\n                            return d / 1000 + 'k';\r\n                        });\r\n\r\n                    chart.xAxis\r\n                        .tickFormat(function (d) {\r\n                            return d.toFixed(2);\r\n                        });\r\n\r\n                    chartElem = d3.select($element.get(0)).select('.line-chart svg');\r\n                    chartElem.datum(vm.data).style('height', 270).call(chart);\r\n\r\n                    if (vm.dynamic) {\r\n                        addZoom({\r\n                            xAxis: chart.xAxis,\r\n                            yAxis: chart.yAxis,\r\n                            yDomain: chart.yDomain,\r\n                            xDomain: chart.xDomain,\r\n                            redraw: function () {\r\n                                chart.update();\r\n                            },\r\n                            svg: chartElem\r\n                        });\r\n                    }\r\n\r\n                    nv.utils.windowResize(chart.update);\r\n\r\n                    return chart;\r\n                });\r\n\r\n                function updateScroll(domains, boundary) {\r\n                    var bDiff = boundary[1] - boundary[0],\r\n                        domDiff = domains[1] - domains[0],\r\n                        isEqual = (domains[1] - domains[0])/bDiff === 1;\r\n\r\n                    $($element[0]).find('.visual-scroll')\r\n                        .css('opacity', function () {\r\n                            return isEqual ? 0 : 1;\r\n                        });\r\n\r\n                    if (isEqual) return;\r\n                    \r\n                    $($element[0]).find('.scrolled-block')\r\n                        .css('left', function () {\r\n                            return domains[0]/bDiff * 100 + '%';\r\n                        })\r\n                        .css('width', function () {\r\n                            return domDiff/bDiff * 100 + '%';\r\n                        });\r\n                }\r\n\r\n                function addZoom(options) {\r\n                    // scaleExtent\r\n                    var scaleExtent = 4;\r\n\r\n                    // parameters\r\n                    var yAxis       = options.yAxis;\r\n                    var xAxis       = options.xAxis;\r\n                    var xDomain     = options.xDomain || xAxis.scale().domain;\r\n                    var yDomain     = options.yDomain || yAxis.scale().domain;\r\n                    var redraw      = options.redraw;\r\n                    var svg         = options.svg;\r\n                    var discrete    = options.discrete;\r\n\r\n                    // scales\r\n                    var xScale = xAxis.scale();\r\n                    var yScale = yAxis.scale();\r\n\r\n                    // min/max boundaries\r\n                    var x_boundary = xAxis.scale().domain().slice();\r\n                    var y_boundary = yAxis.scale().domain().slice();\r\n\r\n                    // create d3 zoom handler\r\n                    var d3zoom = d3.behavior.zoom();\r\n                    var prevXDomain = x_boundary;\r\n                    var prevScale = d3zoom.scale();\r\n                    var prevTranslate = d3zoom.translate();\r\n\r\n                    // ensure nice axis\r\n                    xScale.nice();\r\n                    yScale.nice();\r\n\r\n                    // fix domain\r\n                    function fixDomain(domain, boundary, scale, translate) {\r\n                        if (domain[0] < boundary[0]) {\r\n                            domain[0] = boundary[0];\r\n                            if (prevXDomain[0] !== boundary[0] || scale !== prevScale) {\r\n                                domain[1] += (boundary[0] - domain[0]);\r\n                            } else {\r\n                                domain[1] = prevXDomain[1];\r\n                                translate = _.clone(prevTranslate);\r\n                            }\r\n\r\n                        }\r\n                        if (domain[1] > boundary[1]) {\r\n                            domain[1] = boundary[1];\r\n                            if (prevXDomain[1] !== boundary[1] || scale !== prevScale) {\r\n                                domain[0] -= (domain[1] - boundary[1]);\r\n                            } else {\r\n                                domain[0] = prevXDomain[0];\r\n                                translate = _.clone(prevTranslate);\r\n                            }\r\n                        }\r\n\r\n                        d3zoom.translate(translate);\r\n                        prevXDomain = _.clone(domain);\r\n                        prevScale = _.clone(scale);\r\n                        prevTranslate = _.clone(translate);\r\n                        return domain;\r\n                    }\r\n\r\n                    // zoom event handler\r\n                    function zoomed() {\r\n                        // Switch off vertical zooming temporary\r\n                        // yDomain(yScale.domain());\r\n                        if ((<any>d3.event).scale === 1) {\r\n                            unzoomed();\r\n                        } else {\r\n                            xDomain(fixDomain(xScale.domain(), x_boundary, (<any>d3.event).scale, (<any>d3.event).translate));\r\n                            redraw();\r\n                        }\r\n                        updateScroll(xScale.domain(), x_boundary);\r\n                    }\r\n\r\n                    //\r\n                    setZoom = function(which) {\r\n                        var center0 = [svg[0][0].getBBox().width / 2, svg[0][0].getBBox().height / 2];\r\n                        var translate0 = d3zoom.translate(), coordinates0 = coordinates(center0);\r\n\r\n                        if (which === 'in') {\r\n                            if (prevScale < scaleExtent) d3zoom.scale(prevScale + 0.2);\r\n                        } else {\r\n                            if (prevScale > 1) d3zoom.scale(prevScale - 0.2);\r\n                        }\r\n\r\n                        var center1 = point(coordinates0);\r\n                        d3zoom.translate([translate0[0] + center0[0] - center1[0], translate0[1] + center0[1] - center1[1]]);\r\n\r\n                        d3zoom.event(svg);\r\n                    };\r\n\r\n                    function step(which) {\r\n                        var translate = d3zoom.translate();\r\n\r\n                        if (which === 'right') {\r\n                            translate[0] -= 20;\r\n                        } else {\r\n                            translate[0] += 20;\r\n                        }\r\n\r\n                        d3zoom.translate(translate);\r\n                        d3zoom.event(svg);\r\n                    }\r\n\r\n                    function coordinates(point) {\r\n                        var scale = d3zoom.scale(), translate = d3zoom.translate();\r\n                        return [(point[0] - translate[0]) / scale, (point[1] - translate[1]) / scale];\r\n                    }\r\n\r\n                    function point(coordinates) {\r\n                        var scale = d3zoom.scale(), translate = d3zoom.translate();\r\n                        return [coordinates[0] * scale + translate[0], coordinates[1] * scale + translate[1]];\r\n                    }\r\n\r\n                    function keypress() {\r\n                        switch((<any>d3.event).keyCode) {\r\n                            case 39: step('right'); break;\r\n                            case 37: step('left'); break;\r\n                            case 107: setZoom('in'); break;\r\n                            case 109: setZoom('out');\r\n                        }\r\n                    }\r\n\r\n                    // zoom event handler\r\n                    function unzoomed() {\r\n                        xDomain(x_boundary);\r\n                        yDomain(y_boundary);\r\n                        redraw();\r\n                        d3zoom.scale(1);\r\n                        d3zoom.translate([0,0]);\r\n                        prevScale = 1;\r\n                        prevTranslate = [0,0];\r\n                    }\r\n\r\n                    // initialize wrapper\r\n                    d3zoom.x(xScale)\r\n                        .y(yScale)\r\n                        .scaleExtent([1, scaleExtent])\r\n                        .on('zoom', zoomed);\r\n\r\n                    // add handler\r\n                    svg.call(d3zoom).on('dblclick.zoom', unzoomed);\r\n                    $($element.get(0)).addClass('dynamic');\r\n\r\n                    // add keyboard handlers\r\n\r\n                    svg\r\n                        .attr('focusable', false)\r\n                        .style('outline', 'none')\r\n                        .on('keydown', keypress)\r\n                        .on('focus', function () {});\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    vm.data.forEach(function (item, index) {\r\n                        item.color = item.color || materialColorToRgba(colors[index]);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc module\r\n     * @name pipPieCharts\r\n     *\r\n     * @description\r\n     * Line chart on top of Rickshaw charts\r\n     */\r\n    angular.module('pipPieCharts', [])\r\n        .directive('pipPieChart', pipPieChart);\r\n\r\n    function pipPieChart() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                series: '=pipSeries'\r\n            },\r\n            bindToController: true,\r\n            controllerAs: 'pieChart',\r\n            templateUrl: 'pie/pie_chart.html',\r\n            controller: function ($element, $scope, $timeout, $interval, $mdColorPalette) {\r\n                var vm               = this;\r\n                var chart            = null;\r\n                var titleElem        = null;\r\n                var chartElem        = null;\r\n                var colors           = _.map($mdColorPalette, function (palette, color) {\r\n                    return color;\r\n                });\r\n                var resizeTitleLabel = resizeTitleLabelUnwrap;\r\n\r\n                vm.data = vm.data || [];\r\n\r\n                if (vm.series.length > colors.length) {\r\n                    vm.data = vm.series.slice(0, 9);\r\n                }\r\n\r\n                $scope.$watch('pieChart.series', function (newVal) {\r\n                    vm.data = newVal;\r\n\r\n                    generateParameterColor();\r\n\r\n                    if (chart) {\r\n                        chartElem.datum(vm.data).call(chart);\r\n                        $timeout(resizeTitleLabel);\r\n                    }\r\n                }, true);\r\n\r\n                // Sets colors of items\r\n                generateParameterColor();\r\n\r\n                (<any>d3.scale).paletteColors = function () {\r\n                    return d3.scale.ordinal().range(colors.map(materialColorToRgba));\r\n                };\r\n\r\n                /**\r\n                 * Instantiate chart\r\n                 */\r\n                nv.addGraph(function () {\r\n                    chart = nv.models.pieChart()\r\n                        .margin({ top: 0, right: 0, bottom: 0, left: 0 })\r\n                        .x(function (d) {\r\n                            return d.value;\r\n                        })\r\n                        .y(function (d) {\r\n                            return d.value;\r\n                        })\r\n                        .height(250)\r\n                        .width(250)\r\n                        .showLabels(true)\r\n                        .labelThreshold(.001)\r\n                        .growOnHover(false)\r\n                        .donut(true)\r\n                        .donutRatio(0.5)\r\n                        .color(function(d) {\r\n                            return d.color || (<any>d3.scale).paletteColors().range();\r\n                        });\r\n\r\n                    chart.tooltip.enabled(false);\r\n                    chart.noData('No data for this moment...');\r\n                    chart.showLegend(false);\r\n\r\n                    chartElem = d3.select($element.get(0))\r\n                        .select('.pie-chart svg')\r\n                        .attr('height', 250)\r\n                        .style('opacity', 0)\r\n                        .datum(vm.data)\r\n                        .call(chart);\r\n\r\n                    nv.utils.windowResize(function () {\r\n                        chart.update();\r\n                        $timeout(resizeTitleLabel);\r\n                    });\r\n\r\n                    return chart;\r\n                }, function () {\r\n                    $timeout(renderTotalLabel);\r\n                });\r\n\r\n                function renderTotalLabel() {\r\n                    var svgElem  = d3.select($element.get(0)).select('.pie-chart svg')[0][0];\r\n                    var totalVal = vm.data.reduce(function (sum, curr) {\r\n                        return sum + curr.value;\r\n                    }, 0);\r\n\r\n                    d3.select(svgElem)\r\n                        .select('.nv-pie:not(.nvd3)')\r\n                        .append('text')\r\n                        .classed('label-total', true)\r\n                        .attr('text-anchor', 'middle')\r\n                        .style('dominant-baseline', 'central')\r\n                        .text(totalVal);\r\n                    \r\n                    d3.select(svgElem)\r\n                        .transition()\r\n                        .duration(1000)\r\n                        .style('opacity', 1);\r\n\r\n                    titleElem = d3.select($element.find('text.label-total').get(0));\r\n                    resizeTitleLabel();\r\n                }\r\n\r\n                function resizeTitleLabelUnwrap() {\r\n                    var boxSize = $element.find('.nv-pieLabels').get(0).getBBox();\r\n\r\n                    if (!boxSize.width || !boxSize.height) {\r\n                        return;\r\n                    }\r\n\r\n                    titleElem.style('font-size', ~~boxSize.width / 2);\r\n                }\r\n\r\n                /**\r\n                 * Converts palette color name into RGBA color representation.\r\n                 * Should by replaced by palette for charts.\r\n                 *\r\n                 * @param {string} color    Name of color from AM palette\r\n                 * @returns {string} RGBa format\r\n                 */\r\n                function materialColorToRgba(color) {\r\n                    return 'rgba(' + $mdColorPalette[color][500].value[0] + ','\r\n                        + $mdColorPalette[color][500].value[1] + ','\r\n                        + $mdColorPalette[color][500].value[2] + ','\r\n                        + ($mdColorPalette[color][500].value[3] || 1) + ')';\r\n                }\r\n\r\n\r\n                /**\r\n                 * Helpful method\r\n                 * @private\r\n                 */\r\n                function generateParameterColor() {\r\n                    vm.data.forEach(function (item, index) {\r\n                        item.color = item.color || materialColorToRgba(colors[index]);\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n})();","<md-toolbar class=\"pip-appbar-ext\"></md-toolbar>\r\n<pip-document width=\"800\" min-height=\"400\"\r\n              class=\"pip-settings\">\r\n\r\n    <div class=\"pip-menu-container\"\r\n         ng-hide=\"manager === false || !tabs || tabs.length < 1\">\r\n        <md-list class=\"pip-menu pip-simple-list hide-xs\"\r\n                 pip-selected=\"selected.tabIndex\"\r\n                 pip-selected-watch=\"selected.navId\"\r\n                 pip-select=\"onNavigationSelect($event.id)\">\r\n            <md-list-item class=\"pip-simple-list-item pip-selectable flex\"\r\n                          ng-repeat=\"tab in tabs track by tab.state\" ng-if=\"$party.id == $user.id ||\r\n                          tab.state == 'settings.basic_info'|| tab.state =='settings.contact_info'\r\n                          || tab.state =='settings.blacklist'\"\r\n                          md-ink-ripple\r\n                          pip-id=\"{{:: tab.state }}\">\r\n                <p>{{::tab.title | translate}}</p>\r\n            </md-list-item>\r\n        </md-list>\r\n\r\n        <div class=\"pip-content-container\" ng-if=\"selected.tab\">\r\n            <pip-dropdown class=\"hide-gt-xs\"\r\n                          pip-actions=\"tabs\"\r\n                          pip-dropdown-select=\"onDropdownSelect\"\r\n                          pip-active-index=\"selected.tabIndex\"></pip-dropdown>\r\n\r\n            <div class=\"pip-body tp24-flex layout-column\" ui-view></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"layout-column layout-align-center-center flex\"\r\n         ng-show=\"manager === false || !tabs || tabs.length < 1\">\r\n        {{::'ERROR_400' | translate}}\r\n    </div>\r\n</pip-document>","<form name=\"form\" class=\"w-stretch\" novalidate>\r\n    <md-progress-linear class=\"pip-progress-top\"\r\n                        ng-show=\"transaction.busy()\"\r\n                        md-mode=\"indeterminate\"></md-progress-linear>\r\n    <div class=\"layout-row bm12\">\r\n        <div class=\"md-tile-left\">\r\n            <pip-avatar-edit pip-party-id=\"$party.id\"\r\n                             pip-created=\"onPictureCreated($event)\"\r\n                             pip-changed=\"onPictureChanged($control, $event)\">\r\n            </pip-avatar-edit>\r\n        </div>\r\n        <div class=\"md-tile-content tp0 layout-align-center\">\r\n            <h3 class=\"tm16 bm8 text-one-line\">{{ nameCopy }}</h3>\r\n\r\n            <p class=\"text-primary text-overflow m0\">\r\n                {{::'SETTINGS_BASIC_INFO_FROM' | translate}}\r\n                {{$user.signup | formatLongDate }}\r\n            </p>\r\n        </div>\r\n    </div>\r\n\r\n    <md-input-container class=\"md-block\">\r\n        <label>{{::'SETTINGS_BASIC_INFO_FULL_NAME' | translate}}</label>\r\n        <input name=\"fullName\" step=\"any\" type=\"text\" tabindex=\"0\" required\r\n               ng-model=\"$party.name\"\r\n               ng-disabled=\"transaction.busy()\"\r\n               ng-change=\"onChangeBasicInfo()\"/>\r\n\r\n        <div class=\"hint\"\r\n             ng-if=\"errorsWithHint(form, form.fullName).hint\">\r\n            {{::'ERROR_FULLNAME_INVALID' | translate}}\r\n        </div>\r\n    </md-input-container>\r\n\r\n    <md-input-container class=\"md-block bm0\">\r\n        <label>{{::'SETTINGS_BASIC_INFO_PRIMARY_EMAIL' | translate}}</label>\r\n        <input name=\"email\" type=\"email\" required\r\n               ng-model=\"$party.email\"\r\n               ng-change=\"onChangeBasicInfo()\"\r\n               pip-email-unique=\"{{$party.email}}\"/>\r\n\r\n        <div class=\"hint\"\r\n             ng-if=\"errorsWithHint(form, form.email).hint && !$user.email_ver\">\r\n            {{::'SETTINGS_BASIC_INFO_VERIFY_HINT' | translate}}\r\n        </div>\r\n        <div ng-messages=\"errorsWithHint(form.email)\" ng-hide=\" $party.type =='team'\">\r\n            <div ng-message=\"email\">{{::'ERROR_EMAIL_INVALID' | translate}}</div>\r\n            <div ng-message=\"emailUnique\">{{::'ERROR_EMAIL_INVALID' | translate}}</div>\r\n        </div>\r\n    </md-input-container>\r\n\r\n    <md-button class=\"md-raised bm16 tm8 rm8\"\r\n               ng-click=\"onVerifyEmail($event)\"\r\n               ng-hide=\"$user.email_ver || $party.type =='team'\">\r\n        {{::'SETTINGS_BASIC_INFO_VERIFY_CODE' | translate}}\r\n    </md-button>\r\n\r\n    <md-button ng-click=\"onChangePassword($event)\" class=\"md-raised bm16 tm8\" ng-hide=\"$party.type =='team'\">\r\n        {{::'SETTINGS_BASIC_INFO_CHANGE_PASSWORD' | translate}}\r\n    </md-button>\r\n\r\n    <md-input-container class=\"md-block flex\">\r\n        <label>{{::'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME' | translate }}</label>\r\n        <textarea ng-model=\"$party.about\" columns=\"1\"\r\n                  ng-change=\"onChangeBasicInfo()\"></textarea>\r\n    </md-input-container>\r\n\r\n    <md-input-container class=\"md-block\" ng-hide=\"$party.type =='team'\">\r\n        <label>{{::'GENDER' | translate}}</label>\r\n        <md-select ng-model=\"$party.gender\" ng-change=\"onChangeBasicInfo()\"\r\n                   placeholder=\"{{'GENDER' | translate}}\">\r\n            <md-option ng-value=\"gender.id\" ng-repeat=\"gender in genders\">{{gender.name}}</md-option>\r\n        </md-select>\r\n    </md-input-container>\r\n\r\n    <div ng-hide=\"$party.type =='team'\">\r\n        <p class=\"text-caption text-grey tm0 bm0\">{{::'SETTINGS_BASIC_INFO_BIRTHDAY' | translate}}</p>\r\n        <pip-date ng-model=\"$party.birthday\"\r\n                  ng-change=\"onChangeBasicInfo()\"\r\n                  pip-time-mode=\"past\r\n                  time-mode=\"past\"></pip-date>\r\n    </div>\r\n\r\n    <md-input-container class=\"md-block\"\r\n                        ng-hide=\"$party.type =='team'\">\r\n        <label>{{::'LANGUAGE' | translate}}</label>\r\n        <md-select placeholder=\"{{'LANGUAGE' | translate}}\"\r\n                   ng-model=\"$user.language\"\r\n                   ng-change=\"onChangeUser()\">\r\n            <md-option ng-value=\"language.id\"\r\n                       ng-repeat=\"language in languages\">\r\n                {{language.name}}\r\n            </md-option>\r\n        </md-select>\r\n    </md-input-container>\r\n\r\n    <md-input-container class=\"md-block\"\r\n                        ng-if=\"$party.type !='team'\">\r\n        <label>{{::'THEME' | translate}}</label>\r\n        <md-select class=\"w-stretch theme-text-primary\"\r\n                   ng-model=\"$user.theme\"\r\n                   ng-change=\"onChangeUser()\"\r\n                   ng-disabled=\"transaction.busy()\">\r\n            <md-option ng-value=\"theme\"\r\n                       ng-repeat=\"theme in themes\"\r\n                       ng-selected=\"$theme == theme ? true : false\">\r\n                {{ theme | translate }}\r\n            </md-option>\r\n        </md-select>\r\n    </md-input-container>\r\n    <pip-location-edit class=\"map-edit bm24-flex\"\r\n                       ng-hide=\"$party.type =='team'\"\r\n                       pip-changed=\"onChangeBasicInfo()\"\r\n                       pip-location-name=\"$party.loc_name\"\r\n                       pip-location-pos=\"loc_pos\">\r\n    </pip-location-edit>\r\n</form>\r\n","<md-dialog class=\"pip-dialog layout-column\"  width=\"440\">\r\n    <form name=\"form\" ng-submit=\"onApply()\" >\r\n    <div class=\"pip-header\">\r\n        <h3 class=\"m0\">\r\n            {{::'SETTINGS_CHANGE_PASSWORD_TITLE' | translate : module}}\r\n        </h3>\r\n    </div>\r\n    <div class=\"pip-body\">\r\n        <div class=\"pip-content\">\r\n            <div class=\"text-error bm8\"\r\n                 ng-messages=\"form.$serverError\">\r\n                <div ng-message=\"ERROR_UNKNOWN\">\r\n                    {{ form.$serverError.ERROR_UNKNOWN | translate }}\r\n                </div>\r\n            </div>\r\n\r\n            <md-input-container class=\"md-block\">\r\n                <label>{{::'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD' | translate }}</label>\r\n                <input name=\"oldPassword\" type=\"password\"\r\n                       ng-model=\"changePasData.old_password\"\r\n                       ng-required=\"change_password.$submitted\"\r\n                       pip-clear-errors/>\r\n\r\n                <div ng-messages=\"errorsWithHint(form, form.oldPassword)\">\r\n                    <div ng-message=\"required\">\r\n                        {{::'ERROR_REQUIRED' | translate }}\r\n                    </div>\r\n                    <div ng-message=\"ERROR_1107\">\r\n                        {{::'ERROR_WRONG_PASSWORD' | translate }}\r\n                    </div>\r\n                </div>\r\n\r\n            </md-input-container>\r\n\r\n            <md-input-container class=\"md-block\">\r\n                <label>{{'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD' | translate }}</label>\r\n                <input name=\"newPassword\" type=\"password\"\r\n                       ng-model=\"changePasData.new_password\"\r\n                       ng-change=\"onCheckRepeatPassword()\"\r\n                       ng-required=\"change_password.$submitted\"\r\n                       ng-minlength=\"6\"\r\n                       pip-clear-errors/>\r\n                <div class=\"hint\"\r\n                     ng-if=\"errorsWithHint(form, form.newPassword).hint\">\r\n                    {{ 'HINT_PASSWORD' | translate }}\r\n                </div>\r\n                <div ng-messages=\"errorsWithHint(form, form.newPassword)\">\r\n                    <div ng-message=\"required\">\r\n                        {{::'ERROR_REQUIRED' | translate}}\r\n                    </div>\r\n                    <div ng-message=\"minlength\">\r\n                        {{::'HINT_PASSWORD' | translate }}\r\n                    </div>\r\n                    <div ng-message=\"ERROR_1105\">\r\n                        {{::'ERROR_IDENTICAL_PASSWORDS' | translate }}\r\n                    </div>\r\n                </div>\r\n            </md-input-container>\r\n\r\n            <md-input-container class=\"md-block\">\r\n                <label>{{ 'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD' | translate }}</label>\r\n                <input name=\"repeat\"  type=\"password\"\r\n                       ng-model=\"repeat\"\r\n                       ng-change=\"onCheckRepeatPassword()\"\r\n                       ng-required=\"change_password.$submitted\"\r\n                       ng-minlength=\"6\" />\r\n\r\n                <div class=\"hint\"\r\n                     ng-if=\"errorsRepeatWithHint(form.repeat).hint\">\r\n                    {{::'HINT_REPEAT_PASSWORD' | translate }}\r\n                </div>\r\n\r\n                <div ng-messages=\"errorsRepeatWithHint(form.repeat)\">\r\n                    <div ng-message=\"required\">{{::'ERROR_REQUIRED' | translate }}</div>\r\n                    <div ng-message=\"minlength\">{{::'HINT_PASSWORD' | translate }}</div>\r\n                    <div ng-message=\"repeat\">{{::'REPEAT_PASSWORD_INVALID' | translate }}</div>\r\n                </div>\r\n\r\n            </md-input-container>\r\n        </div>\r\n    </div>\r\n    <div class=\"pip-footer\">\r\n        <div>\r\n            <md-button aria-label=\"xxx\"\r\n                       ng-click=\"onCancel()\">\r\n                {{::'CANCEL' | translate }}\r\n            </md-button>\r\n            <md-button type=\"submit\" class=\"md-accent\" aria-label=\"xxx\">\r\n                {{::'APPLY' | translate : module}}\r\n            </md-button>\r\n        </div>\r\n    </div>\r\n    </form>\r\n</md-dialog>\r\n\r\n\r\n\r\n\r\n","\r\n    <md-progress-linear ng-show=\"transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\">\r\n    </md-progress-linear>\r\n    <div class=\"pip-details-title pip-sessions\">\r\n        <p class=\"pip-title bm16\">\r\n            {{::'SETTINGS_ACTIVE_SESSIONS_TITLE' | translate}}\r\n        </p>\r\n\r\n        <p class=\"pip-subtitle\">\r\n            {{::'SETTINGS_ACTIVE_SESSIONS_SUBTITLE' | translate}}\r\n        </p>\r\n    </div>\r\n\r\n\r\n<md-list class=\"w-stretch\">\r\n    <div ng-repeat=\"session in sessions\" >\r\n        <div class=\"layout-row\"\r\n             ng-init=\"showBlock = session.id != sessionId\"\r\n             ng-click=\"showBlock = !showBlock\" >\r\n            <p class=\"m0 text-subhead2 text-overflow max-w50-stretch\">\r\n                {{::session.client}}\r\n            </p>\r\n            <p class=\"m0 lp4 text-body1 color-secondary-text flex\">\r\n                {{::'SETTINGS_ACTIVE_SESSION_ACTIVE' | translate}}\r\n            </p>\r\n            <p class=\"m0 text-body1 color-secondary-text\">\r\n                {{::country}}\r\n                <md-icon ng-if=\"showBlock\" md-svg-icon=\"icons:triangle-up\"></md-icon>\r\n                <md-icon ng-if=\"!showBlock\" md-svg-icon=\"icons:triangle-down\"></md-icon>\r\n            </p>\r\n        </div>\r\n        <div class=\"layout-row bm8 bp8\" ng-class=\"{'divider-bottom':!$last}\" >\r\n            <div class=\"flex-50\">\r\n                <p class=\"m0 bm4 text-body1 text-overflow color-secondary-text \">\r\n                    {{session.last_req | date : 'medium'}}\r\n                </p>\r\n                <p class=\"m0 bm4 text-body1 text-overflow color-secondary-text\"\r\n                   ng-show=\"showBlock\">\r\n                    {{::'SETTINGS_ACTIVE_SESSION_OS' | translate}}{{::session.platform}}</p>\r\n                <p class=\"m0 bm4 text-body1 text-overflow color-secondary-text\"\r\n                   ng-show=\"showBlock\">\r\n                    {{::'SETTINGS_ACTIVE_SESSION_IP' | translate}}{{::session.address}}\r\n                </p>\r\n                <md-button class=\"md-raised\"\r\n                           ng-show=\"showBlock && session.id != sessionId\"\r\n                           ng-click=\"onRemove(session)\">\r\n                    {{::'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION' | translate}}\r\n                </md-button>\r\n            </div>\r\n\r\n            <pip-location-ip class=\"map-edit flex-50\" ng-if=\"showBlock\"\r\n                             pip-ipaddress=\"session.address\"\r\n                             pip-extra-info=\"country = extraInfo.country\">\r\n            </pip-location-ip>\r\n        </div>\r\n\r\n    </div>\r\n</md-list>\r\n<div class=\"layout-row layout-align-end-center\">\r\n    <md-button class=\"md-raised\"\r\n               ng-show=\"sessions.length > 1\"\r\n               ng-click=\"onRemoveAll()\">\r\n        {{::'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS' | translate}}\r\n    </md-button>\r\n</div>\r\n","<md-dialog class=\"pip-dialog layout-column\"  width=\"440\">\r\n    <div class=\"pip-body\">\r\n        <div class=\"pip-content\">\r\n                <md-progress-linear ng-show=\"transaction.busy()\" md-mode=\"indeterminate\" class=\"pip-progress-top\" >\r\n                </md-progress-linear>\r\n\r\n                <h2>{{::'VERIFY_EMAIL_TITLE' | translate}}</h2>\r\n\r\n                <p class=\"title-padding\">{{::'VERIFY_EMAIL_TEXT_1' | translate}} </p>\r\n\r\n                <form name='form' novalidate>\r\n                    <div ng-messages=\"form.$serverError\" class=\"text-error bm8\">\r\n                        <div ng-message=\"ERROR_UNKNOWN\">{{ form.$serverError.ERROR_UNKNOWN | translate }}</div>\r\n                    </div>\r\n\r\n                    <md-input-container class=\"display  bp4 md-block\" >\r\n                        <label>{{::'EMAIL' | translate}}</label>\r\n                        <input name=\"email\" type=\"email\" ng-model=\"data.email\" required step=\"any\"\r\n                               pip-clear-errors  tabindex=\"1\"\r\n                               ng-disabled=\"transaction.busy()\"\r\n                               pip-test=\"input-email\"/>\r\n                        <div class=\"hint\" ng-if=\"errorsWithHint(form, form.email).hint\">{{::'HINT_EMAIL' | translate}}</div>\r\n                        <div ng-messages=\"errorsWithHint(form, form.email)\"\r\n                             xng-if=\"!form.email.$pristine\">\r\n                            <div ng-message=\"required\">{{::'ERROR_EMAIL_INVALID' | translate }}</div>\r\n                            <div ng-message=\"ERROR_1106\">{{::'ERROR_USER_NOT_FOUND' | translate}}</div>\r\n                        </div>\r\n                    </md-input-container>\r\n\r\n                    <md-input-container class=\"md-block\">\r\n                        <label>{{::'ENTRY_VERIFICATION_CODE' | translate}}</label>\r\n                        <input name=\"code\" ng-disabled=\"transaction.busy()\" tabindex=\"0\"\r\n                               ng-model=\"data.code\" required pip-clear-errors/>\r\n                        <div ng-messages=\"errorsWithHint(form, form.code)\">\r\n                            <div ng-message=\"required\"> {{::'ERROR_CODE_INVALID' | translate }}</div>\r\n                            <div ng-message=\"ERROR_1103\"> {{::'ERROR_CODE_WRONG' | translate }}</div>\r\n                        </div>\r\n                    </md-input-container>\r\n\r\n                    <p>\r\n                        {{::'VERIFY_EMAIL_TEXT_21' | translate}}\r\n                        <a ng-click=\"onRequestVerificationClick()\" class=\"pointer\" tabindex=\"0\">{{::'VERIFY_EMAIL_RESEND' | translate}}</a>\r\n                        {{::'VERIFY_EMAIL_TEXT_22' | translate}}\r\n                    </p>\r\n                </form>\r\n            </div>\r\n        </div>\r\n        <div class=\"pip-footer\">\r\n            <md-button ng-click=\"onCancel()\" ng-hide=\"transaction.busy()\" aria-label=\"xxx\">\r\n                {{::'CANCEL' | translate}}\r\n            </md-button>\r\n            <md-button class=\"md-accent\" ng-click=\"onVerify()\" ng-hide=\"transaction.busy()\" tabindex=\"0\" aria-label=\"xxx\"\r\n                ng-disabled=\"data.code.length == 0 || data.email.length == 0 || (!data.email && form.$pristine) || (!data.code)\">\r\n                {{::'VERIFY' | translate}}\r\n            </md-button>\r\n            <md-button class=\"md-warn\" ng-show=\"transaction.busy()\" ng-click=\"transaction.abort()\" tabindex=\"0\" aria-label=\"xxx\">\r\n                {{::'CANCEL' | translate}}\r\n            </md-button>\r\n\r\n        </div>\r\n</md-dialog>","/**\r\n * @file Registration of settings components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipSettings', [\r\n        'pipSettings.Service',\r\n        'pipSettings.Page'\r\n    ]);\r\n\r\n})();\r\n","/**\r\n * @file Service for settings component\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSettings.Service', []);\r\n\r\n    /**\r\n     * @ngdoc service\r\n     * @name pipSettings.Service:pipSettingsProvider\r\n     *\r\n     * @description\r\n     * Service provides an interface to manage 'Settings' component behaviour.\r\n     * It is available on config and run phases.\r\n     */\r\n    thisModule.provider('pipSettings', function ($stateProvider) { // pipAuthStateProvider\r\n\r\n        var defaultTab,\r\n            tabs = [],\r\n            titleText = 'SETTINGS_TITLE',\r\n            titleLogo = null,\r\n            isNavIcon = true;\r\n\r\n        // Configure global parameters\r\n        this.showTitleText = showTitleText;\r\n        this.showTitleLogo = showTitleLogo;\r\n        this.showNavIcon = showNavIcon;\r\n\r\n        return {\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipSettings.Service:pipSettingsProvider\r\n             * @name pipSettings.Service.pipSettingsProvider:addTab\r\n             *\r\n             * @description\r\n             * Register new tab in 'Settings' component. Before adding a tab this method validates passed object.\r\n             *\r\n             * @param {Object} tabObj  Configuration object for new tab.\r\n             */\r\n            addTab: addTab,\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipSettings.Service:pipSettingsProvider\r\n             * @name pipSettings.Service.pipSettingsProvider:getTabs\r\n             *\r\n             * @description\r\n             * Method returns collection of registered tabs.\r\n             *\r\n             * @returns {Array<Object>} Collection of tabs.\r\n             */\r\n            getTabs: getTabs,\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipSettings.Service:pipSettingsProvider\r\n             * @name pipSettings.Service.pipSettingsProvider:setDefaultTab\r\n             *\r\n             * @description\r\n             * Establish a tab which is available by default (after chose this component in menu).\r\n             *\r\n             * @param {string} name     Name of the default state for this component.\r\n             */\r\n            setDefaultTab: setDefaultTab,\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipSettings.Service:pipSettingsProvider\r\n             * @name pipSettings.Service.pipSettingsProvider:getDefaultTab\r\n             *\r\n             * @description\r\n             * Method returns an config object for tabs established as default (it will be opened when app transeferred to\r\n             * abstract state 'settings').\r\n             *\r\n             * @returns {Array<Object>} Collection of tabs.\r\n             */\r\n            getDefaultTab: getDefaultTab,\r\n                    \r\n            showTitleText: showTitleText,\r\n            showTitleLogo: showTitleLogo,\r\n            showNavIcon: showNavIcon,\r\n\r\n            $get: function () {\r\n                /**\r\n                 * @ngdoc service\r\n                 * @name pipSettings.Service:pipSettings\r\n                 *\r\n                 * @description\r\n                 * Service provides an interface to manage 'Settings' component behaviour.\r\n                 * It is available on config and run phases.\r\n                 */\r\n                return {\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @methodOf pipSettings.Service:pipSettings\r\n                     * @name pipSettings.Service.pipSettings:getTabs\r\n                     *\r\n                     * @description\r\n                     * Method returns collection of registered tabs.\r\n                     *\r\n                     * @returns {Array<Object>} Collection of tabs.\r\n                     */\r\n                    getTabs: getTabs,\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @methodOf pipSettings.Service:pipSettings\r\n                     * @name pipSettings.Service.pipSettings:addTab\r\n                     *\r\n                     * @description\r\n                     * Register new tab in 'Settings' component. Before adding a tab this method validates passed object.\r\n                     *\r\n                     * @param {Object} tabObj  Configuration object for new tab.\r\n                     */\r\n                    addTab: addTab,\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @methodOf pipSettings.Service:pipSettings\r\n                     * @name pipSettings.Service.pipSettings:getDefaultTab\r\n                     *\r\n                     * @description\r\n                     * Method returns an config object for tabs established as default (it will be opened when app transeferred to\r\n                     * abstract state 'settings').\r\n                     *\r\n                     * @returns {Array<Object>} Collection of tabs.\r\n                     */\r\n                    getDefaultTab: getDefaultTab,\r\n\r\n                    /**\r\n                     * @ngdoc method\r\n                     * @methodOf pipSettings.Service:pipSettings\r\n                     * @name pipSettings.Service.pipSettings:setDefaultTab\r\n                     *\r\n                     * @description\r\n                     * Establish a tab which is available by default (after chose this component in menu).\r\n                     *\r\n                     * @param {string} name     Name of the default state for this component.\r\n                     */\r\n                    setDefaultTab: setDefaultTab,\r\n\r\n                    showTitleText: showTitleText,\r\n                    showTitleLogo: showTitleLogo,\r\n                    showNavIcon: showNavIcon\r\n                };\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Appends component abstract state prefix to passed state\r\n         */\r\n        function getFullStateName(state) {\r\n            return 'settings.' + state;\r\n        }\r\n\r\n        function getTabs() {\r\n            return _.cloneDeep(tabs);\r\n        }\r\n\r\n        function getDefaultTab() {\r\n            var defaultTab;\r\n\r\n            defaultTab = _.find(tabs, function (p) {\r\n                return p.state === defaultTab;\r\n            });\r\n\r\n            return _.cloneDeep(defaultTab);\r\n        }\r\n\r\n        function addTab(tabObj) {\r\n            var existingTab;\r\n\r\n            validateTab(tabObj);\r\n            existingTab = _.find(tabs, function (p) {\r\n                return p.state === getFullStateName(tabObj.state);\r\n            });\r\n            if (existingTab) {\r\n                throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n            }\r\n\r\n            tabs.push({\r\n                state: getFullStateName(tabObj.state),\r\n                title: tabObj.title,\r\n                index: tabObj.index || 100000,\r\n                access: tabObj.access,\r\n                visible: tabObj.visible !== false,\r\n                stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n            });\r\n\r\n            $stateProvider.state(getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n            // if we just added first state and no default state is specified\r\n            if (typeof defaultTab === 'undefined' && tabs.length === 1) {\r\n                setDefaultTab(tabObj.state);\r\n            }\r\n        }\r\n\r\n        function setDefaultTab(name) {\r\n            // TODO [apidhirnyi] extract expression inside 'if' into variable. It isn't readable now.\r\n            if (!_.find(tabs, function (tab) {\r\n                return tab.state === getFullStateName(name);\r\n            })) {\r\n                throw new Error('Tab with state name \"' + name + '\" is not registered');\r\n            }\r\n\r\n            defaultTab = getFullStateName(name);\r\n            \r\n            //$stateProvider.go(defaultTab);\r\n            //pipAuthStateProvider.redirect('settings', getFullStateName(name));\r\n        }\r\n\r\n        /**\r\n         * Validates passed tab config object\r\n         * If passed tab is not valid it will throw an error\r\n         */\r\n        function validateTab(tabObj) {\r\n            if (!tabObj || !_.isObject(tabObj)) {\r\n                throw new Error('Invalid object');\r\n            }\r\n\r\n            if (tabObj.state === null || tabObj.state === '') {\r\n                throw new Error('Tab should have valid Angular UI router state name');\r\n            }\r\n\r\n            if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n                throw new Error('\"access\" should be a function');\r\n            }\r\n\r\n            if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n                throw new Error('Invalid state configuration object');\r\n            }\r\n        }\r\n\r\n        function showTitleText (newTitleText) {\r\n            if (newTitleText) {\r\n                titleText = newTitleText;\r\n                titleLogo = null;\r\n            }\r\n\r\n            return titleText;\r\n        }\r\n\r\n        function showTitleLogo(newTitleLogo) {\r\n            if (newTitleLogo) {\r\n                titleLogo = newTitleLogo;\r\n                titleText = null;\r\n            }\r\n\r\n            return titleLogo;\r\n        }\r\n\r\n        function showNavIcon(value) {\r\n            if (value !== null && value !== undefined) {\r\n                isNavIcon = !!value;\r\n            }\r\n\r\n            return isNavIcon;\r\n        }\r\n\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Define controller for a settings tab\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSettings.Page', [\r\n        'pipSettings.Service', 'pipAppBar', 'pipSelected', 'pipTranslate',\r\n        'pipSettings.Templates', 'pipNavIcon', 'pipActions.Service'\r\n    ]);\r\n\r\n    thisModule.config(function ($stateProvider) {\r\n        $stateProvider.state('settings', {\r\n            url: '/settings?party_id',\r\n            auth: true,\r\n            controller: 'pipSettingsPageController',\r\n            templateUrl: 'settings_page/settings_page.html'\r\n        });\r\n    });\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipSettings.Page:pipSettingsPageController\r\n     *\r\n     * @description\r\n     * The controller is used for the whole settings tabs and provides\r\n     * navigation menu on the left and load content into right panel.\r\n     * This component is integrated with `'pipAppBar'` component and adapt the tabs header.\r\n     * The component has predefined states `'settings.base_info'` and `'settings.active_sessions'`. Each of these states\r\n     * require user's authorization.\r\n     *\r\n     * @requires pipAppBar\r\n     */\r\n    thisModule.controller('pipSettingsPageController',\r\n        function ($scope, $state, $rootScope, $timeout, pipAppBar, pipSettings, pipActions,\r\n                  pipBreadcrumb, pipNavIcon) {\r\n\r\n            $scope.tabs = _.filter(pipSettings.getTabs(), function (tab: any) {\r\n                if (tab.visible === true && (tab.access ? tab.access($rootScope.$user, tab) : true)) {\r\n                    return tab;\r\n                }\r\n            });\r\n\r\n            $scope.tabs = _.sortBy($scope.tabs, 'index');\r\n\r\n            $scope.selected = {};\r\n            if ($state.current.name !== 'settings') {\r\n                initSelect($state.current.name);\r\n            } else if ($state.current.name === 'settings' && pipSettings.getDefaultTab()) {\r\n                initSelect(pipSettings.getDefaultTab().state);\r\n            } else {\r\n                $timeout(function () {\r\n                    if (pipSettings.getDefaultTab()) {\r\n                        initSelect(pipSettings.getDefaultTab().state);\r\n                    }\r\n                    if (!pipSettings.getDefaultTab() && $scope.tabs.length > 0) {\r\n                        initSelect($scope.tabs[0].state);\r\n                    }\r\n                });\r\n            }\r\n\r\n            appHeader();\r\n\r\n            /** @see onNavigationSelect */\r\n            $scope.onNavigationSelect = onNavigationSelect;\r\n            /** @see onDropdownSelect */\r\n            $scope.onDropdownSelect = onDropdownSelect;\r\n\r\n            /**\r\n             * Config header panel\r\n             */\r\n            function appHeader() {\r\n                pipActions.hide();\r\n                pipAppBar.part('menu', true);\r\n                pipAppBar.part('actions', 'primary');\r\n                pipAppBar.part('icon', true);\r\n                pipAppBar.part('title', 'breadcrumb');\r\n                pipAppBar.hideShadow();\r\n                pipBreadcrumb.text = 'Settings';\r\n                pipNavIcon.menu();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipSettings.Page:pipSettingsPageController\r\n             * @name pipSettings.Page:pipSettingsPageController:onDropdownSelect\r\n             *\r\n             * @description\r\n             * Method changes selected tab in the navigation menu and transfer to selected tab(state).\r\n             * It used on mobile screens.\r\n             *\r\n             * @param {Object} state    State configuration object\r\n             */\r\n            function onDropdownSelect(state) {\r\n                onNavigationSelect(state.state);\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipSettings.Page:pipSettingsPageController\r\n             * @name pipSettings.Page:pipSettingsPageController:onNavigationSelect\r\n             *\r\n             * @description\r\n             * Method changes selected tab in the navigation menu and transfer to selected tab(state).\r\n             * It uses on screens more than mobile.\r\n             *\r\n             * @param {string} state    Name of new state\r\n             */\r\n            function onNavigationSelect(state) {\r\n                initSelect(state);\r\n\r\n                if ($scope.selected.tab) {\r\n                    $state.go(state);\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Establish selected tab\r\n             */\r\n            function initSelect(state) {\r\n                $scope.selected.tab = _.find($scope.tabs, function (tab: any) {\r\n                    return tab.state === state;\r\n                });\r\n                $scope.selected.tabIndex = _.indexOf($scope.tabs, $scope.selected.tab);\r\n                $scope.selected.tabId = state;\r\n            }\r\n        });\r\n\r\n})();\r\n","/**\r\n * @file Settings tab logic\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipUserSettings', [\r\n        'ngMaterial', 'pipData',\r\n        'pipSettings.Service',\r\n        'pipSettings.Page',\r\n\r\n        'pipUserSettings.Strings',\r\n        'pipUserSettings.Sessions',\r\n        'pipUserSettings.BasicInfo',\r\n        'pipSettings.Templates'\r\n    ]);\r\n\r\n})();\r\n","/**\r\n * @file Settings basic info controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.BasicInfo',\r\n        ['pipUserSettings.ChangePassword', 'pipUserSettings.VerifyEmail', \r\n            'pipSettings.Service', 'pipSettings.Page',]);\r\n\r\n    thisModule.config(function (pipSettingsProvider) {\r\n        pipSettingsProvider.addTab({\r\n            state: 'basic_info',\r\n            index: 1,\r\n            title: 'SETTINGS_BASIC_INFO_TITLE',\r\n            stateConfig: {\r\n                url: '/basic_info',\r\n                controller: 'pipUserSettingsBasicInfoController',\r\n                templateUrl: 'user_settings/user_settings_basic_info.html',\r\n                auth: true\r\n            }\r\n        });\r\n\r\n        pipSettingsProvider.setDefaultTab('basic_info');\r\n    });\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n     *\r\n     * @description\r\n     * Controller for the predefined 'basic_info' state.\r\n     * Provides sync changes user's profile with remote profile.\r\n     * On state exit everything is saved on the server.\r\n     */\r\n    thisModule.controller('pipUserSettingsBasicInfoController',\r\n        function ($scope, $rootScope, $mdDialog, $state, $window, $timeout, $mdTheming,\r\n                  pipTranslate, pipTransaction, pipTheme,\r\n                  pipToasts, pipDataUser, pipDataParty, pipFormErrors) {\r\n\r\n            try {\r\n                $scope.originalParty = angular.toJson($rootScope.$party);\r\n            } catch (err) {\r\n                throw err;\r\n            }\r\n\r\n            $scope.nameCopy = $rootScope.$party.name;\r\n\r\n            $timeout(function () {\r\n                $scope.loc_pos = $rootScope.$party.loc_pos;\r\n            });\r\n\r\n            $scope.genders = pipTranslate.translateSet(['male', 'female', 'n/s']);\r\n            $scope.languages = pipTranslate.translateSet(['ru', 'en']);\r\n\r\n            $scope.transaction = pipTransaction('settings.basic_info', $scope);\r\n\r\n            $scope.themes = _.keys(_.omit($mdTheming.THEMES, 'default'));\r\n\r\n            $state.get('settings.basic_info').onExit = saveChanges;\r\n\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            /** @see onChangePassword */\r\n            $scope.onChangePassword = onChangePassword;\r\n            /** @see onVerifyEmail */\r\n            $scope.onVerifyEmail = onVerifyEmail;\r\n            /** @see onPictureCreated */\r\n            $scope.onPictureCreated = onPictureCreated;\r\n            /** @see onPictureChanged */\r\n            $scope.onPictureChanged = onPictureChanged;\r\n            /** @see updateUser */\r\n            $scope.onChangeUser = _.debounce(updateUser, 2000);\r\n            /** @see saveChanges */\r\n            $scope.onChangeBasicInfo = _.debounce(saveChanges, 2000);\r\n\r\n            function onPictureChanged() {\r\n                $scope.picture.save(\r\n                    function () {\r\n                        $rootScope.$broadcast('pipPartyAvatarUpdated');\r\n                    },\r\n                    function (error) {\r\n                        return new Error(error);\r\n                    }\r\n                );\r\n            }\r\n\r\n            function onPictureCreated($event) {\r\n                $scope.picture = $event.sender;\r\n                $scope.picture.save(\r\n                    function () {\r\n                        $rootScope.$broadcast('pipPartyAvatarUpdated');\r\n                    },\r\n                    function (error) {\r\n                        return new Error(error);\r\n                    }\r\n                );\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangeBasicInfo\r\n             *\r\n             * @description\r\n             * Saves changes onto server.\r\n             * This method responses on change of the input information.\r\n             * It is updated user's party profile. Also it updates user's profile in $rootScope.\r\n             */\r\n            function saveChanges() {\r\n                if ($scope.form) {\r\n                    $scope.form.$setSubmitted();\r\n                }\r\n\r\n                if ($rootScope.$party) {\r\n\r\n                    if ($rootScope.$party.type === 'person' && $scope.form.$invalid) {\r\n                        return;\r\n                    }\r\n\r\n                    // Check to avoid unnecessary savings\r\n                    $rootScope.$party.loc_pos = $scope.loc_pos;\r\n                    try {\r\n                        var party = angular.toJson($rootScope.$party);\r\n                    } catch (err) {\r\n                        throw err;\r\n                    }\r\n\r\n                    if (party !== $scope.originalParty) {\r\n                        var tid = $scope.transaction.begin('UPDATING');\r\n\r\n                        pipDataParty.updateParty($rootScope.$party,\r\n                            function (data) {\r\n                                if ($scope.transaction.aborted(tid)) {\r\n                                    return;\r\n                                }\r\n                                $scope.transaction.end();\r\n\r\n                                $scope.originalParty = party;\r\n                                $scope.nameCopy = data.name;\r\n                            }, function (error) {\r\n                                $scope.transaction.end(error);\r\n                                $scope.message = String() + 'ERROR_' + error.status || error.data.status_code;\r\n                                $rootScope.$party = angular.fromJson($scope.originalParty);\r\n                            }\r\n                        );\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangeUser\r\n             *\r\n             * @description\r\n             * Saves changes onto server.\r\n             * This method responses on change of the user's profile information.\r\n             * Also it updates user's profile in $rootScope.\r\n             */\r\n            function updateUser() {\r\n                var tid = $scope.transaction.begin('RequestEmailVerification');\r\n\r\n                if ($rootScope.$user.id === $rootScope.$party.id) {\r\n                    pipDataUser.updateUser(\r\n                        {\r\n                            item: $rootScope.$user\r\n                        },\r\n                        function (data) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n\r\n                            pipTranslate.use(data.language);\r\n                            $rootScope.$user.language = data.language;\r\n                            $rootScope.$user.theme = data.theme;\r\n                            if ($rootScope.$user.theme) {\r\n                                pipTheme.setCurrentTheme($rootScope.$user.theme, true);\r\n                            }\r\n\r\n                        }, function (error) {\r\n                            var message;\r\n                            \r\n                            $scope.transaction.end(error);\r\n                            message = String() + 'ERROR_' + error.status || error.data.status_code;\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onChangePassword\r\n             *\r\n             * @description\r\n             * It opens a dialog panel to change password.\r\n             *\r\n             * @param {Object} event    Triggered event object\r\n             */\r\n            function onChangePassword(event) {\r\n                var message;\r\n\r\n                $mdDialog.show({\r\n                    templateUrl: 'user_settings/user_settings_change_password.html',\r\n                    controller: 'pipUserSettingsChangePasswordController',\r\n                    targetEvent: event,\r\n                    locals: {email: $rootScope.$party.email}\r\n                }).then(\r\n                    function (answer) {\r\n                        if (answer) {\r\n                            message = String() + 'RESET_PWD_SUCCESS_TEXT';\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    });\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.BasicInfo:pipUserSettingsBasicInfoController\r\n             * @name pipUserSettings.BasicInfo.pipUserSettingsBasicInfoController:onVerifyEmail\r\n             *\r\n             * @description\r\n             * It opens a dialog panel to change password.\r\n             *\r\n             * @param {Object} event    Triggered event object\r\n             */\r\n            function onVerifyEmail(event) {\r\n                var message;\r\n\r\n                $mdDialog.show({\r\n                    templateUrl: 'user_settings/user_settings_verify_email.html',\r\n                    controller: 'pipUserSettingsVerifyEmailController',\r\n                    targetEvent: event,\r\n                    locals: {email: $rootScope.$party.email}\r\n                }).then(\r\n                    function (answer) {\r\n                        $scope.user.email_ver = answer;\r\n                        if (answer) {\r\n                            message = String() + 'VERIFY_EMAIL_SUCCESS_TEXT';\r\n                            pipToasts.showNotification(pipTranslate.translate(message), null, null, null);\r\n                        }\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings change password controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.ChangePassword', []);\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n     *\r\n     * @description\r\n     * Controller for dialog panel of password change.\r\n     */\r\n    thisModule.controller('pipUserSettingsChangePasswordController',\r\n        function ($scope, $rootScope, $mdDialog, email, pipDataUser, pipTransaction, pipFormErrors) {\r\n\r\n            $scope.transaction = pipTransaction('settings.change_password', $scope);\r\n            $scope.errorsRepeatWithHint = function (form, formPart) {\r\n                if ($scope.showRepeatHint) {\r\n                    return pipFormErrors.errorsWithHint(form, formPart);\r\n                }\r\n\r\n                return {};\r\n            };\r\n            $scope.showRepeatHint = true;\r\n            $scope.changePasData = {};\r\n\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            $scope.onCancel = onCancel;\r\n            $scope.onCheckRepeatPassword = onCheckRepeatPassword;\r\n            $scope.onApply = onApply;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onCancel\r\n             *\r\n             * @description\r\n             * Closes opened dialog panel.\r\n             */\r\n            function onCancel() {\r\n                $mdDialog.cancel();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onCheckRepeatPassword\r\n             *\r\n             * @description\r\n             * Validates a password typed into password fields.\r\n             */\r\n            function onCheckRepeatPassword() {\r\n                if ($scope.changePasData) {\r\n                    if ($scope.repeat === $scope.changePasData.new_password || $scope.repeat === '' || !$scope.repeat) {\r\n                        $scope.form.repeat.$setValidity('repeat', true);\r\n                        if ($scope.repeat === $scope.changePasData.new_password) {\r\n                            $scope.showRepeatHint = false;\r\n                        } else {\r\n                            $scope.showRepeatHint = true;\r\n                        }\r\n                    } else {\r\n                        $scope.showRepeatHint = true;\r\n                        $scope.form.repeat.$setValidity('repeat', false);\r\n                    }\r\n                }\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.ChangePassword:pipUserSettingsChangePasswordController\r\n             * @name pipUserSettings.ChangePassword.pipUserSettingsChangePasswordController:onApply\r\n             *\r\n             * @description\r\n             * Approves password change and sends request to the server on password change.\r\n             */\r\n            function onApply() {\r\n                $scope.onCheckRepeatPassword();\r\n\r\n                if ($scope.form.$invalid) {\r\n                    return;\r\n                }\r\n\r\n                if (!$scope.transaction.begin('CHANGE_PASSWORD')) {\r\n                    return;\r\n                }\r\n\r\n                $scope.changePasData.email = email;\r\n\r\n                pipDataUser.changePassword(\r\n                    $scope.changePasData,\r\n                    function () {\r\n                        $scope.transaction.end();\r\n                        $mdDialog.hide(true);\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n                        pipFormErrors.setFormError(\r\n                            $scope.form, error,\r\n                            {\r\n                                1107: 'oldPassword',\r\n                                1105: 'newPassword'\r\n                            }\r\n                        );\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings sessions controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.Sessions', [\r\n        'pipSettings.Service', 'pipSettings.Page',]);\r\n\r\n    thisModule.config(function (pipSettingsProvider, pipDataSessionProvider) {\r\n        pipSettingsProvider.addTab({\r\n            state: 'sessions',\r\n            index: 3,\r\n            title: 'SETTINGS_ACTIVE_SESSIONS_TITLE',\r\n            stateConfig: {\r\n                url: '/sessions',\r\n                controller: 'pipUserSettingsSessionsController',\r\n                templateUrl: 'user_settings/user_settings_sessions.html',\r\n                auth: true,\r\n                resolve: {\r\n                    sessions: pipDataSessionProvider.readSessionsResolver,\r\n                    sessionId: pipDataSessionProvider.readSessionIdResolver\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n     *\r\n     * @description\r\n     * Controller provides an interface for managing active sessions.\r\n     */\r\n    thisModule.controller('pipUserSettingsSessionsController',\r\n        function ($scope, pipTransaction, pipDataSession, sessions, sessionId) {\r\n\r\n            $scope.sessionId = sessionId;\r\n            $scope.transaction = pipTransaction('settings.sessions', $scope);\r\n            $scope.sessions = sessions;\r\n\r\n            $scope.onRemoveAll = onRemoveAll;\r\n            $scope.onRemove = onRemove;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n             * @name pipUserSettings.Sessions.pipUserSettingsSessionsController:onRemoveAll\r\n             *\r\n             * @description\r\n             * Closes all active session.\r\n             */\r\n            function onRemoveAll() {\r\n                var tid = $scope.transaction.begin('REMOVING');\r\n\r\n                async.eachSeries(\r\n                    $scope.sessions,\r\n                    function (session: any, callback) {\r\n                        if (session.id == $scope.sessionId) {\r\n                            callback();\r\n                        } else {\r\n                            pipDataSession.removeSession(\r\n                                {\r\n                                    session: session\r\n                                },\r\n                                function () {\r\n                                    $scope.sessions = _.without($scope.sessions, session);\r\n                                    callback();\r\n                                },\r\n                                function (error) {\r\n                                    callback;\r\n                                }\r\n                            );\r\n                        }\r\n                    },\r\n                    function (err) {\r\n                        if (err) {\r\n                            $scope.transaction.end(err);\r\n                        }\r\n                        if ($scope.transaction.aborted(tid)) {\r\n                            return;\r\n                        }\r\n                        $scope.transaction.end();\r\n                    });                \r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.Sessions:pipUserSettingsSessionsController\r\n             * @name pipUserSettings.Sessions.pipUserSettingsSessionsController:onRemove\r\n             *\r\n             * @description\r\n             * Closes passed session.\r\n             *\r\n             * @param {Object} session  Session configuration object\r\n             */\r\n            function onRemove(session, callback) {\r\n                if (session.id === $scope.sessionId) {\r\n                    return;\r\n                }\r\n                var tid = $scope.transaction.begin('REMOVING');\r\n                pipDataSession.removeSession(\r\n                    {\r\n                        session: session\r\n                    },\r\n                    function () {\r\n                        if ($scope.transaction.aborted(tid)) {\r\n                            return;\r\n                        }\r\n                        $scope.transaction.end();\r\n\r\n                        $scope.sessions = _.without($scope.sessions, session);\r\n                        if (callback) {\r\n                            callback();\r\n                        }\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n                        $scope.message = 'ERROR_' + error.status || error.data.status_code;\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Settings string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* eslint-disable quote-props */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.Strings', ['pipTranslate']);\r\n\r\n    thisModule.config(function (pipTranslateProvider) {\r\n\r\n        // Set translation strings for the module\r\n        pipTranslateProvider.translations('en', {\r\n            'SETTINGS_TITLE': 'Settings',\r\n            'SETTINGS_BASIC_INFO_TITLE': 'Basic info',\r\n            'SETTINGS_ACTIVE_SESSIONS_TITLE': 'Active sessions',\r\n\r\n            'SETTINGS_BASIC_INFO_FULL_NAME': 'Full name',\r\n            'SETTINGS_BASIC_INFO_VERIFY_HINT': 'Please, verify your email address.',\r\n            'SETTINGS_BASIC_INFO_VERIFY_CODE': 'Verify email address',\r\n            'SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD': 'Your password was changed on ',\r\n            'SETTINGS_BASIC_INFO_CHANGE_PASSWORD': 'Change your password',\r\n            'SETTINGS_BASIC_INFO_NAME_HINT': 'Please, use your real name to let other people know who you are.',\r\n            'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME': 'Few words about yourself',\r\n\r\n            'SETTINGS_BASIC_INFO_GENDER': 'Gender',\r\n            'SETTINGS_BASIC_INFO_BIRTHDAY': 'Birthday',\r\n            'SETTINGS_BASIC_INFO_LOCATION': 'Current location',\r\n            'SETTINGS_BASIC_INFO_PRIMARY_EMAIL': 'Primary email',\r\n            'SETTINGS_BASIC_INFO_FROM': 'User since ',\r\n            'SETTINGS_BASIC_INFO_USER_ID': 'User ID',\r\n\r\n            'SETTINGS_CHANGE_PASSWORD_TITLE': 'Change password',\r\n            'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD': 'New password',\r\n            'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD': 'Repeat password',\r\n            'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD': 'Current password',\r\n\r\n            'SETTINGS_ACTIVE_SESSIONS_SUBTITLE': ' If you notice any unfamiliar devices or locations, click' +\r\n            '\"Close Session\" to end the session.',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION': 'Close session',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS': 'Close active sessions',\r\n            'SETTINGS_ACTIVE_SESSION_OS': 'OS: ',\r\n            'SETTINGS_ACTIVE_SESSION_IP': 'IP: ',\r\n            'SETTINGS_ACTIVE_SESSION_ACTIVE': 'active',\r\n\r\n            'SETTINGS_BLACKLIST_TITLE': 'Blacklist',\r\n            'SETTINGS_BLACKLIST_SUBTITLE': 'Parties from blacklist will not be able to send you invitations and ' +\r\n            'private messages.',\r\n            'SETTINGS_BLACKLIST_UNBLOCK': 'Unblock',\r\n            'SETTINGS_BLACKLIST_EMPTY': 'You have no blocked parties',\r\n\r\n            'SETTINGS_CONTACT_INFO_TITLE': 'Contact info',\r\n            'SETTINGS_CONTACT_INFO_EMAIL': 'Email',\r\n            'SETTINGS_CONTACT_INFO_ADD_EMAIL': 'Add email',\r\n            'SETTINGS_CONTACT_INFO_ADD_PHONE': 'Add phone',\r\n            'SETTINGS_CONTACT_INFO_ADD_ADDRESS': 'Add address',\r\n            'SETTINGS_CONTACT_INFO_ADD_ACCOUNT': 'Add account',\r\n            'SETTINGS_CONTACT_INFO_ADD_URL': 'Add URL',\r\n            'SETTINGS_CONTACT_INFO_ADDRESS': 'Address',\r\n            'SETTINGS_CONTACT_INFO_PHONE': 'Phone',\r\n            'SETTINGS_CONTACT_INFO_ACCOUNT_NAME': 'Account name',\r\n            'SETTINGS_CONTACT_INFO_URL': 'URL',\r\n\r\n            'THEME': 'Theme',\r\n\r\n            'HINT_PASSWORD': 'Minimum 6 characters',\r\n            'HINT_REPEAT_PASSWORD': 'Repeat password',\r\n\r\n            'ERROR_WRONG_PASSWORD': 'Wrong password',\r\n            'ERROR_IDENTICAL_PASSWORDS': 'Old and new passwords are identical',\r\n            'REPEAT_PASSWORD_INVALID': 'Password does not match',\r\n            'ERROR_EMAIL_INVALID': 'Please, enter a valid email'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'SETTINGS_TITLE': 'Настройки',\r\n            'SETTINGS_BASIC_INFO_TITLE': 'Основные данные',\r\n            'SETTINGS_ACTIVE_SESSIONS_TITLE': 'Активные сессии',\r\n\r\n            'SETTINGS_BASIC_INFO_FULL_NAME': 'Полное имя',\r\n            'SETTINGS_BASIC_INFO_NAME_HINT': 'Пожалуйста, используйте реальное имя, чтоб люди могли вас узнать',\r\n            'SETTINGS_BASIC_INFO_VERIFY_HINT': 'Пожалуйста, подтвердите адрес своей электронной почты',\r\n            'SETTINGS_BASIC_INFO_VERIFY_CODE': 'Подтвердите адрес эл.почты',\r\n            'SETTINGS_BASIC_INFO_DATE_CHANGE_PASSWORD': 'Ваш пароль был изменен ',\r\n            'SETTINGS_BASIC_INFO_CHANGE_PASSWORD': 'Поменять пароль',\r\n\r\n            'SETTINGS_BASIC_INFO_WORDS_ABOUT_ME': 'Несколько слов о себе',\r\n            'SETTINGS_BASIC_INFO_GENDER': 'Пол',\r\n            'SETTINGS_BASIC_INFO_BIRTHDAY': 'Дата рождения',\r\n            'SETTINGS_BASIC_INFO_LOCATION': 'Текущее местонахождение',\r\n            'SETTINGS_BASIC_INFO_PRIMARY_EMAIL': 'Основной адрес эл. почты',\r\n            'SETTINGS_BASIC_INFO_FROM': 'Начиная с',\r\n            'SETTINGS_BASIC_INFO_USER_ID': 'Личный код',\r\n\r\n            'SETTINGS_CHANGE_PASSWORD_TITLE': 'Изменить пароль',\r\n            'SETTINGS_CHANGE_PASSWORD_NEW_PASSWORD': 'Новый пароль',\r\n            'SETTINGS_CHANGE_PASSWORD_REPEAT_RASSWORD': 'Повтор',\r\n            'SETTINGS_CHANGE_PASSWORD_CURRENT_PASSWORD': 'Текущий пароль',\r\n\r\n            'SETTINGS_ACTIVE_SESSIONS_SUBTITLE': 'Если вы заметили какие-либо незнакомые устройства или ' +\r\n            'месторасположение, нажмите кнопку \"Закончить сеанс\", чтобы завершить сеанс.',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_SESSION': 'Закрыть сессию',\r\n            'SETTINGS_ACTIVE_SESSIONS_CLOSE_ACTIVE_SESSIONS': 'Закрыть активные сессии',\r\n            'SETTINGS_ACTIVE_SESSION_OS': 'ОС: ',\r\n            'SETTINGS_ACTIVE_SESSION_IP': 'IP: ',\r\n            'SETTINGS_ACTIVE_SESSION_ACTIVE': 'Активно',\r\n\r\n            'SETTINGS_BLACKLIST_TITLE': 'Блокировки',\r\n            'SETTINGS_BLACKLIST_SUBTITLE': 'Участники из черного списка не смогут' +\r\n            ' посылать вам приглашения и личные сообщения.',\r\n            'SETTINGS_BLACKLIST_UNBLOCK': 'Разблокировать',\r\n            'SETTINGS_BLACKLIST_EMPTY': 'У вас нет заблокированных участников',\r\n\r\n            'SETTINGS_CONTACT_INFO_TITLE': 'Контакты',\r\n            'SETTINGS_CONTACT_INFO_EMAIL': 'Адрес электронной почты',\r\n            'SETTINGS_CONTACT_INFO_ADD_EMAIL': 'Добавить адрес эл. почты',\r\n            'SETTINGS_CONTACT_INFO_ADD_PHONE': 'Добавить телефон',\r\n            'SETTINGS_CONTACT_INFO_ADD_ADDRESS': 'Добавить адрес',\r\n            'SETTINGS_CONTACT_INFO_ADD_ACCOUNT': 'Добавить аккаунт',\r\n            'SETTINGS_CONTACT_INFO_ADD_URL': 'Добавить веб-сайт',\r\n            'SETTINGS_CONTACT_INFO_ADDRESS': 'Адрес',\r\n            'SETTINGS_CONTACT_INFO_PHONE': 'Телефон',\r\n            'SETTINGS_CONTACT_INFO_ACCOUNT_NAME': 'Учетка в мессенджере',\r\n            'SETTINGS_CONTACT_INFO_URL': 'Веб сайт',\r\n\r\n            'THEME': 'Тема',\r\n\r\n            'HINT_PASSWORD': 'Минимум 6 знаков',\r\n            'HINT_REPEAT_PASSWORD': 'Повторите пароль',\r\n\r\n            'ERROR_WRONG_PASSWORD': 'Неправильный пароль',\r\n            'ERROR_IDENTICAL_PASSWORDS': 'Старый и новый пароли идентичны',\r\n            'REPEAT_PASSWORD_INVALID': 'Пароль не совпадает',\r\n            'ERROR_EMAIL_INVALID': 'Пожалуйста, введите правильный почт.адрес'\r\n        });\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Settings verify email controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUserSettings.VerifyEmail', []);\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n     *\r\n     * @description\r\n     * Controller for verify email dialog panel.\r\n     */\r\n    thisModule.controller('pipUserSettingsVerifyEmailController',\r\n        function ($scope, $rootScope, $mdDialog, pipTransaction, pipFormErrors, pipDataUser, email) {\r\n\r\n            $scope.emailVerified = false;\r\n            $scope.data = {\r\n                email: email,\r\n                code: ''\r\n            };\r\n            $scope.transaction = pipTransaction('settings.verify_email', $scope);\r\n\r\n            /** @see onAbort */\r\n            $scope.onAbort = onAbort;\r\n            /** @see onRequestVerificationClick*/\r\n            $scope.onRequestVerificationClick = onRequestVerificationClick;\r\n            $scope.errorsWithHint = pipFormErrors.errorsWithHint;\r\n            /** @see onVerify */\r\n            $scope.onVerify = onVerify;\r\n            /** @see onCancel */\r\n            $scope.onCancel = onCancel;\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onAbort\r\n             *\r\n             * @description\r\n             * Aborts a verify request.\r\n             */\r\n            function onAbort() {\r\n                $scope.transaction.abort();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onCancel\r\n             *\r\n             * @description\r\n             * Closes opened dialog panel.\r\n             */\r\n            function onCancel() {\r\n                $mdDialog.cancel();\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onRequestVerificationClick\r\n             *\r\n             * @description\r\n             * Sends request to verify entered email.\r\n             */\r\n            function onRequestVerificationClick() {\r\n                    var tid = $scope.transaction.begin('RequestEmailVerification');\r\n\r\n                pipDataUser.requestEmailVerification(\r\n                    {},                         \r\n                    function (result) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n                        }, \r\n                        function (error) {\r\n                            $scope.transaction.end(error);\r\n                        }\r\n                    );\r\n            }\r\n\r\n            /**\r\n             * @ngdoc method\r\n             * @methodOf pipUserSettings.VerifyEmail:pipUserSettingsVerifyEmailController\r\n             * @name pipUserSettings.VerifyEmail.pipUserSettingsVerifyEmailController:onVerify\r\n             *\r\n             * @description\r\n             * Initiates request on verify email on the server.\r\n             */\r\n            function onVerify() {\r\n                $scope.form.$setSubmitted();\r\n\r\n                if ($scope.form.$invalid) {\r\n                    return;\r\n                }\r\n                var tid = $scope.transaction.begin('Verifying');\r\n\r\n                pipDataUser.verifyEmail(\r\n                    {\r\n                        email: $scope.data.email,\r\n                        code: $scope.data.code\r\n                    }, \r\n                    function (verifyData) {\r\n                            if ($scope.transaction.aborted(tid)) {\r\n                                return;\r\n                            }\r\n                            $scope.transaction.end();\r\n\r\n                        $mdDialog.hide(true);\r\n                    },\r\n                    function (error) {\r\n                        $scope.transaction.end(error);\r\n\r\n                        pipFormErrors.setFormError(\r\n                            $scope.form, error,\r\n                            {\r\n                                1106: 'email',\r\n                                1103: 'code'\r\n                            }\r\n                        );\r\n\r\n                    }\r\n                );\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","<!--\r\n@file Help page\r\n@copyright Digital Living Software Corp. 2014-2016\r\n-->\r\n\r\n<md-toolbar class=\"pip-appbar-ext\"></md-toolbar>\r\n\r\n<pip-document width=\"800\" min-height=\"400\">\r\n    <div class=\"pip-menu-container pip-help\"\r\n         ng-if=\"manager !== false\">\r\n        <md-list class=\"pip-menu pip-simple-list hide-xs\"\r\n                 pip-selected=\"selected.tabIndex\"\r\n                 pip-selected-watch=\"selected.navId\"\r\n                 pip-select=\"onNavigationSelect($event.id)\">\r\n            <md-list-item class=\"pip-simple-list-item pip-selectable\"\r\n                          ng-repeat=\"tab in tabs track by tab.state\"\r\n                          md-ink-ripple\r\n                          pip-id=\"{{::tab.state }}\">\r\n                <p> {{::tab.title | translate}} </p>\r\n            </md-list-item>\r\n        </md-list>\r\n\r\n        <div class=\"pip-content-container\">\r\n            <pip-dropdown class=\"hide-gt-xs\"\r\n                          pip-actions=\"tabs\"\r\n                          pip-dropdown-select=\"onDropdownSelect\"\r\n                          pip-active-index=\"selected.tabIndex\"></pip-dropdown>\r\n            <div class=\"pip-body layout-column flex\" ui-view></div>\r\n        </div>\r\n    </div>\r\n    <div class=\"layout-column layout-align-center-center flex\"\r\n         ng-if=\"manager === false\">\r\n        {{::'ERROR_400' | translate}}\r\n    </div>\r\n</pip-document>","/**\r\n * @file Registration of all help components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipHelp', [\r\n        'pipHelp.Service',\r\n        'pipHelp.Page'\r\n    ]);\r\n\r\n})();\r\n","/**\r\n * @file Page template for help components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipHelp.Page', ['ui.router', 'pipHelp.Service', 'pipAppBar', 'pipSelected', 'pipTranslate',\r\n        'pipHelp.Templates'])\r\n        .config(config)\r\n        .controller('pipHelpPageController', HelpPageController);\r\n\r\n    function config($stateProvider) {\r\n        $stateProvider.state('help', {\r\n            url: '/help',\r\n            auth: false,\r\n            controller: 'pipHelpPageController',\r\n            templateUrl: 'help_page/help_page.html'\r\n        });\r\n    }\r\n\r\n    /**\r\n     * @ngdoc controller\r\n     * @name pipHelp.Page.pipHelpPageController\r\n     *\r\n     * @description\r\n     * The controller is used for the root Help component.\r\n     * It manages available tabs provide navigation through those ones.\r\n     *\r\n     * {@link https://github.com/pip-webui/pip-webui-help/blob/master/src/help_page/help_page.js#L40 View source}\r\n     *\r\n     *\r\n     * @param {Object} $rootScope   Root scope object\r\n     * @param {Object} $scope       Scope for the current controller\r\n     * @param {Object} $state       UI Router service\r\n     * @param {Object} pipAppBar    Service provides an interface to manage on application bar header.\r\n     * @param {Object} pipHelp      Service to manage this component behaviour\r\n     */\r\n    function HelpPageController($rootScope, $scope, $state, pipAppBar, pipHelp) {\r\n\r\n        $scope.tabs = _.filter(pipHelp.getTabs(), function (tab: any) {\r\n            if (tab.visible && (tab.access !== angular.noop ? tab.access($rootScope.$user, tab) : true)) {\r\n                return tab;\r\n            }\r\n        });\r\n        $scope.selected = {};\r\n\r\n        if ($state.current.name !== 'help') {\r\n            initSelect($state.current.name);\r\n        } else {\r\n            initSelect(pipHelp.getDefaultTab().state);\r\n        }\r\n\r\n        appHeader();\r\n\r\n        $scope.onNavigationSelect = onNavigationSelect;\r\n        $scope.onDropdownSelect = onDropdownSelect;\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name pipHelp.Page.pipHelpPageController#onDropdownSelect\r\n         * @methodOf pipHelp.Page.pipHelpPageController\r\n         *\r\n         * @description\r\n         * It redirects to a passed state.\r\n         *\r\n         * {@link https://github.com/pip-webui/pip-webui-help/blob/master/src/help_page/help_page.js#L72 View source}\r\n         *\r\n         * @param {Object} state    State configuration object\r\n         */\r\n        function onDropdownSelect(state) {\r\n            onNavigationSelect(state.state);\r\n        }\r\n\r\n        /**\r\n         * Config appBar due to this page\r\n         */\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showTitleText('Help');\r\n            pipAppBar.showShadowSm();\r\n            pipAppBar.showLocalActions(null, []);\r\n        }\r\n\r\n        /**\r\n         * @ngdoc method\r\n         * @name pipHelp.Page.pipHelpPageController#onNavigationSelect\r\n         * @methodOf pipHelp.Page.pipHelpPageController\r\n         *\r\n         * @description\r\n         * It redirects to a passed state.\r\n         *\r\n         * {@link https://github.com/pip-webui/pip-webui-help/blob/master/src/help_page/help_page.js#L98 View source}\r\n         *\r\n         * @param {string} state    Name of the target state.\r\n         */\r\n        function onNavigationSelect(state) {\r\n            initSelect(state);\r\n\r\n            if ($scope.selected.tab) {\r\n                $state.go(state);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Set selected item for highlighting in the nav menu\r\n         */\r\n        function initSelect(state) {\r\n            $scope.selected.tab = _.find($scope.tabs, function (tab: any) {\r\n                return tab.state === state;\r\n            });\r\n\r\n            $scope.selected.tabIndex = _.indexOf($scope.tabs, $scope.selected.tab);\r\n            $scope.selected.tabId = state;\r\n        }\r\n    }\r\n})();\r\n","/**\r\n * @file Service for help components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * @ngdoc service\r\n     * @name pipHelp.Service.pipHelp\r\n     *\r\n     * @description\r\n     * This service is provided an interface to manage the Help component.\r\n     * It is available on the config and run application phases. On the both phases the interface is the same.\r\n     * This module requires the '$state' module.\r\n     */\r\n    angular.module('pipHelp.Service', ['ui.router'])\r\n        .provider('pipHelp',\r\n            function ($stateProvider): any {\r\n                var defaultTab,\r\n                    tabs = [];\r\n\r\n                /** @see addTab */\r\n                this.addTab = addTab;\r\n\r\n                /** @see setDefaultTab */\r\n                this.setDefaultTab = setDefaultTab;\r\n\r\n                /** @see getTabs */\r\n                this.getTabs = getTabs;\r\n\r\n                /** @see getDefaultTab */\r\n                this.getDefaultTab = getDefaultTab;\r\n\r\n                this.$get = function () {\r\n                    return {\r\n                        /** @see getTabs */\r\n                        getTabs: getTabs,\r\n\r\n                        /** @see getDefaultTab */\r\n                        getDefaultTab: getDefaultTab,\r\n\r\n                        /** @see addTab */\r\n                        addTab: addTab,\r\n\r\n                        /** @see setDefaultTab */\r\n                        setDefaultTab: setDefaultTab\r\n                    };\r\n                };\r\n\r\n                /**\r\n                 * This method build the full name of state within the abstract 'help' state\r\n                 */\r\n                function getFullStateName(state) {\r\n                    return 'help.' + state;\r\n                }\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name pipHelp.Service.pipHelp#getTabs\r\n                 * @methodOf pipHelp.Service.pipHelp\r\n                 *\r\n                 * @description\r\n                 * This method returns asset of all tabs registered in the Help component.\r\n                 *\r\n                 * {@link https://github.com/pip-webui/pip-webui-help/blob/master/src/help_service/help_service.js#L79 View source}\r\n                 *\r\n                 * @returns {Array<Object>} List of registered states\r\n                 *\r\n                 * @example\r\n                 * <pre>\r\n                 * // on the config phase\r\n                 * pipHelpProvider.getTabs();\r\n                 * </pre>\r\n                 */\r\n                function getTabs() {\r\n                    return _.cloneDeep(tabs);\r\n                }\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name pipHelp.Service.pipHelp#getDefaultTab\r\n                 * @methodOf pipHelp.Service.pipHelp\r\n                 *\r\n                 * @description\r\n                 * This method return name of the default state.\r\n                 *\r\n                 * {@link https://github.com/pip-webui/pip-webui-help/blob/master/src/help_service/help_service.js#L101 View source}\r\n                 *\r\n                 * @returns {string} Name of the state\r\n                 *\r\n                 * @example\r\n                 * <pre>\r\n                 * // on the config phase\r\n                 * pipHelpProvider.getDefaultTab();\r\n                 * </pre>\r\n                 */\r\n                function getDefaultTab() {\r\n                    return _.cloneDeep(_.find(tabs, function (tab) {\r\n                        return tab.state === defaultTab;\r\n                    }));\r\n                }\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name pipHelp.Service.pipHelp#addTab\r\n                 * @methodOf pipHelp.Service.pipHelp\r\n                 *\r\n                 * @description\r\n                 * This method allows add new tab into navigation menu. It accepts config object to define new state\r\n                 * with needed params.\r\n                 *\r\n                 * {@link https://github.com/pip-webui/pip-webui-help/blob/master/src/help_service/help_service.js#L139 View source}\r\n                 *\r\n                 * @param {Object} tabObj Configuration object contains settings for another tab\r\n                 * @param {Object.<string>} tabObj.state   Name of tab state which is available via UI router\r\n                 * @param {Object.<string>} tabObj.title   Tab title in the navigation menu.\r\n                 * @param {Object.<boolean>} tabObj.access If it is true it will be available only for logged in users\r\n                 * @param {Object.<boolean>} tabObj.visible If it is true the tab will be visible\r\n                 * @param {Object.<Object>} tabObj.stateConfig  Configuration object in format like UI Router state\r\n                 *\r\n                 * @example\r\n                 * <pre>\r\n                 *  // on the config phase\r\n                 *  pipHelpProvider.addTab({\r\n                 *      state: 'test',\r\n                 *      title: 'Test help tab',\r\n                 *      auth: true,\r\n                 *      stateConfig: {\r\n                 *          url: '/test',\r\n                 *          templateUrl: 'help/help_test1.html'\r\n                 *      }\r\n                 *  });\r\n                 * </pre>\r\n                 */\r\n                function addTab(tabObj) {\r\n                    var tab;\r\n\r\n                    validateTab(tabObj);\r\n\r\n                    tab = _.find(tabs, function (tab) {\r\n                        return tab.state === getFullStateName(tabObj.state);\r\n                    });\r\n                    if (tab) {\r\n                        throw new Error('Tab with state name \"' + tabObj.state + '\" is already registered');\r\n                    }\r\n\r\n                    tabs.push({\r\n                        state: getFullStateName(tabObj.state),\r\n                        title: tabObj.title,\r\n                        access: tabObj.access || angular.noop,\r\n                        visible: tabObj.visible || true,\r\n                        stateConfig: _.cloneDeep(tabObj.stateConfig)\r\n                    });\r\n\r\n                    $stateProvider.state(getFullStateName(tabObj.state), tabObj.stateConfig);\r\n\r\n                    // if we just added first state and no default state is specified\r\n                    if (_.isUndefined(defaultTab) && tabs.length === 1) {\r\n                        setDefaultTab(tabObj.state);\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * @ngdoc method\r\n                 * @name pipHelp.Service.pipHelp#setDefaultTab\r\n                 * @methodOf pipHelp.Service.pipHelp\r\n                 *\r\n                 * @description\r\n                 * This method establishes passed state as default which is redirected at after transfer on abstract\r\n                 * state\r\n                 *\r\n                 * {@link https://github.com/pip-webui/pip-webui-help/blob/master/src/help_service/help_service.js#L185 View source}\r\n                 *\r\n                 * @param {Object} name     Name of the state\r\n                 *\r\n                 * @example\r\n                 * <pre>\r\n                 * pipHelpProvider.setDefaultTab('test');\r\n                 * </pre>\r\n                 */\r\n                function setDefaultTab(name) {\r\n                    var tab, error;\r\n\r\n                    tab = _.find(tabs, function (tab) {\r\n                        return tab.state === getFullStateName(name);\r\n                    });\r\n                    if (!tab) {\r\n                        error = new Error('Tab with state name \"' + name + '\" is not registered');\r\n                        throw error;\r\n                    }\r\n\r\n                    defaultTab = getFullStateName(name);\r\n\r\n                    $stateProvider.redirect('help', getFullStateName(name));\r\n                }\r\n\r\n                /**\r\n                 * This method validates passed state.\r\n                 * If it is incorrect it will throw an error.\r\n                 */\r\n                function validateTab(tabObj) {\r\n                    if (!tabObj || !_.isObject(tabObj)) {\r\n                        throw new Error('Invalid object');\r\n                    }\r\n\r\n                    if (!tabObj.state || tabObj.state === '') {\r\n                        throw new Error('Tab should have valid Angular UI router state name');\r\n                    }\r\n\r\n                    if (tabObj.access && !_.isFunction(tabObj.access)) {\r\n                        throw new Error('\"access\" should be a function');\r\n                    }\r\n\r\n                    if (!tabObj.stateConfig || !_.isObject(tabObj.stateConfig)) {\r\n                        throw new Error('Invalid state configuration object');\r\n                    }\r\n                }\r\n            });\r\n\r\n})();\r\n"]}