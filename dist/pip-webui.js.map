{"version":3,"sources":["core.js","behaviors/clear_errors.js","behaviors/draggable.js","behaviors/fab_tooltip_visibility.js","behaviors/focused.js","behaviors/infinite_scroll.js","behaviors/selected.js","behaviors/unsaved_changes.js","filters/translate.js","services/assert.js","services/debug.js","services/errors.js","services/state.js","services/timer.js","services/transactions.js","services/translate.js","utilities/collections.js","utilities/form_errors.js","utilities/general.js","utilities/strings.js","utilities/tags.js","utilities/utilities.js","layouts.js","card/card.js","dialog/dialog.js","document/document.js","main/main.js","simple/simple.js","tiles/tiles.js","controls.js","pip-webui-controls-html.js","color_picker/color_picker.js","confirmation_dialog/confirmation_dialog.js","error_details_dialog/error_details_dialog.js","image_slider/image_slider.js","information_dialog/information_dialog.js","markdown/markdown.js","options_dialog/options_dialog.js","options_dialog/options_dialog_big.js","popover/popover.js","progress/routing_progress.js","refresh_button/refresh_button.js","tags/tag_list.js","toast/toasts.js","toggle_buttons/toggle_buttons.js","pip-webui-nav-html.js","nav.js","appbar/appbar.js","appbar/appbar_service.js","dropdown/dropdown.js","sidenav/sidenav.js","sidenav/sidenav_service.js","tabs/tabs.js","pip-webui-errors-html.js","errors.js","errors_pages/errors_pages.js","errors_pages/errors_strings.js","maintenance/maintenance.js","missing_route/missing_route.js","no_connection/no_connection.js","no_connection/pip_no_connection_panel.js","unknown/unknown.js","unsupported/unsupported.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrpBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACpIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AC7EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACjFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pip-webui.js","sourcesContent":["/**\r\n * @file Registration of all WebUI core services\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipCore', [\r\n        'pipUtils',\r\n        'pipErrors',\r\n\t    'pipTransactions',\r\n\t    'pipTranslate',\r\n        'pipState',\r\n        'pipTimer',\r\n        'pipAssert',\r\n        'pipDebug',\r\n        'pipTranslateFilters',\r\n        'pipClearErrors',\r\n\r\n        'pipFocused',\r\n        'pipSelected',\r\n        'pipInfiniteScroll',\r\n        'pipDraggable',\r\n        'pipUnsavedChanges',\r\n        'pipFabTooltipVisibility',\r\n    ]);\r\n    \r\n})();","/**\r\n * @file Special error handling for forms\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipClearErrors', []);\r\n\r\n    thisModule.directive('pipClearErrors', function () {\r\n        return {\r\n            restrict: 'A',\r\n            require: ['ngModel', '^?form'],\r\n            link: function ($scope, $element, $attrs, $ctrls) {\r\n                var \r\n                    fieldController = $ctrls[0],\r\n                    formController = $ctrls[1];\r\n\r\n                $scope.$watch($attrs.ngModel, function (newValue) {\r\n                    clearFieldErrors();\r\n                    clearFormErrors();\r\n                });\r\n\r\n                //-------------------\r\n\r\n                function clearFieldErrors() {\r\n                    var errors = fieldController.$error;\r\n\r\n                    for (var prop in errors) {\r\n                        if (errors.hasOwnProperty(prop) && prop.substring(0, 6) == 'ERROR_') {\r\n                            fieldController.$setValidity(prop, true);\r\n                        }\r\n                    };\r\n                }\r\n\r\n                function clearFormErrors() {\r\n                    formController.$serverError = {};\r\n                };\r\n            }\r\n        };\r\n    });\r\n\r\n})();","/**\r\n * @file Drag & drop attachable behavior\r\n * @description\r\n * Based on https://github.com/fatlinesofcode/pipDraggable\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipDraggable\", ['pipUtils']);\r\n\r\n    thisModule.service('pipDraggable', function () {\r\n\r\n        var scope = this;\r\n        scope.inputEvent = function (event) {\r\n            if (angular.isDefined(event.touches)) {\r\n                return event.touches[0];\r\n            }\r\n            //Checking both is not redundent. If only check if touches isDefined, angularjs isDefnied will return error and stop the remaining scripty if event.originalEvent is not defined.\r\n            else if (angular.isDefined(event.originalEvent) && angular.isDefined(event.originalEvent.touches)) {\r\n                return event.originalEvent.touches[0];\r\n            }\r\n            return event;\r\n        };\r\n\r\n    });\r\n\r\n    thisModule.directive('pipDrag', ['$rootScope', '$parse', '$document', '$window', 'pipDraggable', 'pipUtils', function ($rootScope, $parse, $document, $window, pipDraggable, pipUtils) {\r\n            return {\r\n\r\n                restrict: 'A',\r\n                link: function (scope, element, attrs) {\r\n                    scope.value = attrs.ngDrag;\r\n                    var LONG_PRESS = 50; // 50ms for longpress\r\n                    var offset, _centerAnchor = false, _mx, _my, _tx, _ty, _mrx, _mry;\r\n                    var _hasTouch = ('ontouchstart' in window) || window.DocumentTouch && document instanceof DocumentTouch;\r\n                    var _pressEvents = 'touchstart mousedown';\r\n                    var _moveEvents = 'touchmove mousemove';\r\n                    var _releaseEvents = 'touchend mouseup';\r\n                    var _dragHandle;\r\n\r\n                    // to identify the element in order to prevent getting superflous events when a single element has both drag and drop directives on it.\r\n                    var _myid = scope.$id;\r\n                    var _data = null;\r\n\r\n                    var _dragOffset = null;\r\n\r\n                    var _dragEnabled = false;\r\n\r\n                    var _pressTimer = null;\r\n\r\n                    var _elementStyle = {};\r\n\r\n                    var onDragStartCallback = $parse(attrs.pipDragStart) || null;\r\n                    var onDragStopCallback = $parse(attrs.pipDragStop) || null;\r\n                    var onDragSuccessCallback = $parse(attrs.pipDragSuccess) || null;\r\n                    var allowTransform = angular.isDefined(attrs.allowTransform) ? scope.$eval(attrs.allowTransform) : false;\r\n\r\n                    var getDragData = $parse(attrs.pipDragData);\r\n                    var\r\n                        verticalScroll = pipUtils.toBoolean(attrs.pipVerticalScroll) || true,\r\n                        horizontalScroll = pipUtils.toBoolean(attrs.pipHorizontalScroll) || true,\r\n                        activationDistance = parseFloat(attrs.pipActivationDistance) || 75,\r\n                        scrollDistance = parseFloat(attrs.pipScrollDistance) || 50,\r\n                        scrollParent = false,\r\n\r\n                        scrollContainer = angular.element(window),\r\n                        scrollContainerGetter = $parse(attrs.pipScrollContainer);\r\n\r\n                    // deregistration function for mouse move events in $rootScope triggered by jqLite trigger handler\r\n                    var _deregisterRootMoveListener = angular.noop;\r\n\r\n                    var initialize = function () {\r\n                        element.attr('pip-draggable', 'false'); // prevent native drag\r\n                        // check to see if drag handle(s) was specified\r\n                        // if querySelectorAll is available, we use this instead of find\r\n                        // as JQLite find is limited to tagnames\r\n                        if (element[0].querySelectorAll) {\r\n                            var dragHandles = angular.element(element[0].querySelectorAll('[pip-drag-handle]'));\r\n                        } else {\r\n                            var dragHandles = element.find('[pip-drag-handle]');\r\n                        }\r\n                        if (dragHandles.length) {\r\n                            _dragHandle = dragHandles;\r\n                        }\r\n                        toggleListeners(true);\r\n\r\n                        // Initialize scroll container\r\n                        if (scrollParent) {\r\n                            scrollContainer = angular.element($element.parent());\r\n                        } else if (attrs.pipScrollContainer) {\r\n                            scrollContainer = angular.element(scrollContainerGetter(scope));\r\n                        } else {\r\n                            scrollContainer = angular.element(window);\r\n                        }\r\n                    };\r\n\r\n                    var toggleListeners = function (enable) {\r\n                        if (!enable)return;\r\n                        // add listeners.\r\n\r\n                        scope.$on('$destroy', onDestroy);\r\n                        scope.$watch(attrs.pipDrag, onEnableChange);\r\n                        scope.$watch(attrs.pipCenterAnchor, onCenterAnchor);\r\n                        // wire up touch events\r\n                        if (_dragHandle) {\r\n                            // handle(s) specified, use those to initiate drag\r\n                            _dragHandle.on(_pressEvents, onpress);\r\n                        } else {\r\n                            // no handle(s) specified, use the element as the handle\r\n                            element.on(_pressEvents, onpress);\r\n                        }\r\n                        if (!_hasTouch && element[0].nodeName.toLowerCase() == \"img\") {\r\n                            element.on('mousedown', function () {\r\n                                return false;\r\n                            }); // prevent native drag for images\r\n                        }\r\n                    };\r\n                    var onDestroy = function (enable) {\r\n                        toggleListeners(false);\r\n                    };\r\n                    var onEnableChange = function (newVal, oldVal) {\r\n                        _dragEnabled = (newVal);\r\n                    };\r\n                    var onCenterAnchor = function (newVal, oldVal) {\r\n                        if (angular.isDefined(newVal))\r\n                            _centerAnchor = (newVal || 'true');\r\n                    };\r\n\r\n                    var isClickableElement = function (evt) {\r\n                        return (\r\n                            angular.isDefined(angular.element(evt.target).attr(\"pip-cancel-drag\"))\r\n                        );\r\n                    };\r\n                    /*\r\n                     * When the element is clicked start the drag behaviour\r\n                     * On touch devices as a small delay so as not to prevent native window scrolling\r\n                     */\r\n                    var onpress = function (evt) {\r\n                        if (!_dragEnabled)return;\r\n\r\n                        if (isClickableElement(evt)) {\r\n                            return;\r\n                        }\r\n\r\n                        if (evt.type == \"mousedown\" && evt.button != 0) {\r\n                            // Do not start dragging on right-click\r\n                            return;\r\n                        }\r\n\r\n                        saveElementStyles();\r\n\r\n                        if (_hasTouch) {\r\n                            cancelPress();\r\n                            _pressTimer = setTimeout(function () {\r\n                                cancelPress();\r\n                                onlongpress(evt);\r\n                            }, LONG_PRESS);\r\n                            $document.on(_moveEvents, cancelPress);\r\n                            $document.on(_releaseEvents, cancelPress);\r\n                        } else {\r\n                            onlongpress(evt);\r\n                        }\r\n\r\n                    };\r\n\r\n                    function saveElementStyles() {\r\n                        _elementStyle.left = element.css('css');\r\n                        _elementStyle.top = element.css('top');\r\n                        _elementStyle.position = element.css('position');\r\n                        _elementStyle.width = element.css('width');                        \r\n                    }\r\n\r\n                    var cancelPress = function () {\r\n                        clearTimeout(_pressTimer);\r\n                        $document.off(_moveEvents, cancelPress);\r\n                        $document.off(_releaseEvents, cancelPress);\r\n                    };\r\n\r\n                    var onlongpress = function (evt) {\r\n                        if (!_dragEnabled)return;\r\n                        evt.preventDefault();\r\n\r\n                        offset = element[0].getBoundingClientRect();\r\n                        if (allowTransform)\r\n                            _dragOffset = offset;\r\n                        else {\r\n                            _dragOffset = {left: document.body.scrollLeft, top: document.body.scrollTop};\r\n                        }\r\n\r\n\r\n                        element.centerX = element[0].offsetWidth / 2;\r\n                        element.centerY = element[0].offsetHeight / 2;\r\n\r\n                        _mx = pipDraggable.inputEvent(evt).pageX;\r\n                        _my = pipDraggable.inputEvent(evt).pageY;\r\n                        _mrx = _mx - offset.left;\r\n                        _mry = _my - offset.top;\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - element.centerX - $window.pageXOffset;\r\n                            _ty = _my - element.centerY - $window.pageYOffset;\r\n                        } else {\r\n                            _tx = _mx - _mrx - $window.pageXOffset;\r\n                            _ty = _my - _mry - $window.pageYOffset;\r\n                        }\r\n\r\n                        $document.on(_moveEvents, onmove);\r\n                        $document.on(_releaseEvents, onrelease);\r\n                        // This event is used to receive manually triggered mouse move events\r\n                        // jqLite unfortunately only supports triggerHandler(...)\r\n                        // See http://api.jquery.com/triggerHandler/\r\n                        // _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', onmove);\r\n                        _deregisterRootMoveListener = $rootScope.$on('draggable:_triggerHandlerMove', function (event, origEvent) {\r\n                            onmove(origEvent);\r\n                        });\r\n                    };\r\n\r\n                    var onmove = function (evt) {\r\n                        if (!_dragEnabled)return;\r\n                        evt.preventDefault();\r\n\r\n                        if (!element.hasClass('pip-dragging')) {\r\n                            _data = getDragData(scope);\r\n                            element.addClass('pip-dragging');\r\n                            $rootScope.$broadcast('draggable:start', {\r\n                                x: _mx,\r\n                                y: _my,\r\n                                tx: _tx,\r\n                                ty: _ty,\r\n                                event: evt,\r\n                                element: element,\r\n                                data: _data\r\n                            });\r\n\r\n                            if (onDragStartCallback) {\r\n                                scope.$apply(function () {\r\n                                    onDragStartCallback(scope, {$data: _data, $event: evt});\r\n                                });\r\n                            }\r\n                        }\r\n\r\n                        _mx = pipDraggable.inputEvent(evt).pageX;\r\n                        _my = pipDraggable.inputEvent(evt).pageY;\r\n\r\n                        if (horizontalScroll || verticalScroll) {\r\n                            dragToScroll();\r\n                        }\r\n\r\n                        if (_centerAnchor) {\r\n                            _tx = _mx - element.centerX - _dragOffset.left;\r\n                            _ty = _my - element.centerY - _dragOffset.top;\r\n                        } else {\r\n                            _tx = _mx - _mrx - _dragOffset.left;\r\n                            _ty = _my - _mry - _dragOffset.top;\r\n                        }\r\n\r\n                        moveElement(_tx, _ty);\r\n\r\n                        $rootScope.$broadcast('draggable:move', {\r\n                            x: _mx,\r\n                            y: _my,\r\n                            tx: _tx,\r\n                            ty: _ty,\r\n                            event: evt,\r\n                            element: element,\r\n                            data: _data,\r\n                            uid: _myid,\r\n                            dragOffset: _dragOffset\r\n                        });\r\n                    };\r\n\r\n                    var onrelease = function (evt) {\r\n                        if (!_dragEnabled)\r\n                            return;\r\n                        evt.preventDefault();\r\n                        $rootScope.$broadcast('draggable:end', {\r\n                            x: _mx,\r\n                            y: _my,\r\n                            tx: _tx,\r\n                            ty: _ty,\r\n                            event: evt,\r\n                            element: element,\r\n                            data: _data,\r\n                            callback: onDragComplete,\r\n                            uid: _myid\r\n                        });\r\n                        element.removeClass('pip-dragging');\r\n                        element.parent().find('.pip-drag-enter').removeClass('pip-drag-enter');\r\n                        reset();\r\n                        $document.off(_moveEvents, onmove);\r\n                        $document.off(_releaseEvents, onrelease);\r\n\r\n                        if (onDragStopCallback) {\r\n                            scope.$apply(function () {\r\n                                onDragStopCallback(scope, {$data: _data, $event: evt});\r\n                            });\r\n                        }\r\n\r\n                        _deregisterRootMoveListener();\r\n                    };\r\n\r\n                    var onDragComplete = function (evt) {\r\n\r\n\r\n                        if (!onDragSuccessCallback)return;\r\n\r\n                        scope.$apply(function () {\r\n                            onDragSuccessCallback(scope, {$data: _data, $event: evt});\r\n                        });\r\n                    };\r\n\r\n                    var reset = function () {\r\n                        if (allowTransform)\r\n                            element.css({transform: '', 'z-index': '', '-webkit-transform': '', '-ms-transform': ''});\r\n                        else {\r\n                            element.css({'position': _elementStyle.position, top: _elementStyle.top, left: _elementStyle.left, 'z-index': '', width: _elementStyle.width});\r\n                        }\r\n                    };\r\n\r\n                    var moveElement = function (x, y) {\r\n                        var eWidth = element.css('width');\r\n                        if (allowTransform) {\r\n                            element.css({\r\n                                transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                                'z-index': 99999,\r\n                                '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n                                '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n                            });\r\n                        } else {\r\n                            element.css({\r\n                                'left': x + 'px',\r\n                                'top': y + 'px',\r\n                                'position': 'fixed',\r\n                                'z-index': 100,\r\n                                width: eWidth\r\n                            });\r\n                        }\r\n                    };\r\n\r\n                    var dragToScroll = function () {\r\n                        var scrollX = 0, scrollY = 0,\r\n                            offset = function (element) {\r\n                                return element.offset() || {left: 0, top: 0};\r\n                            };\r\n\r\n                        if (horizontalScroll) {\r\n                            var\r\n                                containerLeft = offset(scrollContainer).left,\r\n                                containerWidth = scrollContainer.innerWidth(),\r\n                                containerRight = containerLeft + containerWidth;\r\n\r\n                            if ((_mx - containerLeft) < activationDistance) {\r\n                                scrollX = -scrollDistance;\r\n                            }\r\n                            else if ((containerRight - _mx) < activationDistance) {\r\n                                scrollX = scrollDistance;\r\n                            }\r\n                        }\r\n\r\n                        if (verticalScroll) {\r\n                            var\r\n                                containerTop = offset(scrollContainer).top,\r\n                                containerHeight = scrollContainer.innerHeight(),\r\n                                containerBottom = containerTop + containerHeight;\r\n\r\n                            if ((_my - containerTop) < activationDistance) {\r\n                                scrollY = -scrollDistance + 30;\r\n                            }\r\n                            else if ((containerBottom - _my) < activationDistance) {\r\n                                scrollY = scrollDistance - 30;\r\n                            }\r\n                        }\r\n                        if (scrollX !== 0 || scrollY !== 0) {\r\n                            var\r\n                                containerScrollLeft = scrollContainer.scrollLeft(),\r\n                                containerScrollTop = scrollContainer.scrollTop();\r\n\r\n                            scrollContainer.scrollLeft(containerScrollLeft + scrollX);\r\n                            scrollContainer.scrollTop(containerScrollTop + scrollY);\r\n                        }\r\n\r\n                    };\r\n\r\n                    initialize();\r\n                }\r\n            };\r\n        }]);\r\n\r\n    thisModule.directive('pipDrop', ['$parse', '$timeout', '$window', '$document', 'pipDraggable', function ($parse, $timeout, $window, $document, pipDraggable) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                scope.value = attrs.pipDrop;\r\n                scope.isTouching = false;\r\n\r\n                var _lastDropTouch = null;\r\n\r\n                var _myid = scope.$id;\r\n\r\n                var _dropEnabled = false;\r\n\r\n                var onDropCallback = $parse(attrs.pipDropSuccess);// || function(){};\r\n\r\n                var onDragStartCallback = $parse(attrs.pipDragStart);\r\n                var onDragStopCallback = $parse(attrs.pipDragStop);\r\n                var onDragMoveCallback = $parse(attrs.pipDragMove);\r\n\r\n                var initialize = function () {\r\n                    toggleListeners(true);\r\n                };\r\n\r\n                var toggleListeners = function (enable) {\r\n                    // remove listeners\r\n\r\n                    if (!enable)return;\r\n                    // add listeners.\r\n                    scope.$watch(attrs.pipDrop, onEnableChange);\r\n                    scope.$on('$destroy', onDestroy);\r\n                    scope.$on('draggable:start', onDragStart);\r\n                    scope.$on('draggable:move', onDragMove);\r\n                    scope.$on('draggable:end', onDragEnd);\r\n                };\r\n\r\n                var onDestroy = function (enable) {\r\n                    toggleListeners(false);\r\n                };\r\n                var onEnableChange = function (newVal, oldVal) {\r\n                    _dropEnabled = newVal;\r\n                };\r\n                var onDragStart = function (evt, obj) {\r\n                    if (!_dropEnabled)return;\r\n                    isTouching(obj.x, obj.y, obj.element);\r\n\r\n                    if (attrs.pipDragStart) {\r\n                        $timeout(function () {\r\n                            onDragStartCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n                };\r\n                var onDragMove = function (evt, obj) {\r\n                    if (!_dropEnabled)return;\r\n                    isTouching(obj.x, obj.y, obj.element);\r\n\r\n                    if (attrs.pipDragMove) {\r\n                        $timeout(function () {\r\n                            onDragMoveCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n                };\r\n\r\n                var onDragEnd = function (evt, obj) {\r\n\r\n                    // don't listen to drop events if this is the element being dragged\r\n                    // only update the styles and return\r\n                    if (!_dropEnabled || _myid === obj.uid) {\r\n                        updateDragStyles(false, obj.element);\r\n                        return;\r\n                    }\r\n                    if (isTouching(obj.x, obj.y, obj.element)) {\r\n                        // call the pipDraggable pipDragSuccess element callback\r\n                        if (obj.callback) {\r\n                            obj.callback(obj);\r\n                        }\r\n\r\n                        if (attrs.pipDropSuccess) {\r\n                            $timeout(function () {\r\n                                onDropCallback(scope, {\r\n                                    $data: obj.data,\r\n                                    $event: obj,\r\n                                    $target: scope.$eval(scope.value)\r\n                                });\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    if (attrs.pipDragStop) {\r\n                        $timeout(function () {\r\n                            onDragStopCallback(scope, {$data: obj.data, $event: obj});\r\n                        });\r\n                    }\r\n\r\n                    updateDragStyles(false, obj.element);\r\n                };\r\n\r\n                var isTouching = function (mouseX, mouseY, dragElement) {\r\n                    var touching = hitTest(mouseX, mouseY);\r\n                    scope.isTouching = touching;\r\n                    if (touching) {\r\n                        _lastDropTouch = element;\r\n                    }\r\n                    updateDragStyles(touching, dragElement);\r\n                    return touching;\r\n                };\r\n\r\n                var updateDragStyles = function (touching, dragElement) {\r\n                    if (touching) {\r\n                        element.addClass('pip-drag-enter');\r\n                        dragElement.addClass('pip-drag-over');\r\n                    } else if (_lastDropTouch == element) {\r\n                        _lastDropTouch = null;\r\n                        element.removeClass('pip-drag-enter');\r\n                        dragElement.removeClass('pip-drag-over');\r\n                    }\r\n                };\r\n\r\n                var hitTest = function (x, y) {\r\n                    var bounds = element[0].getBoundingClientRect();\r\n                    x -= $document[0].body.scrollLeft + $document[0].documentElement.scrollLeft;\r\n                    y -= $document[0].body.scrollTop + $document[0].documentElement.scrollTop;\r\n                    return x >= bounds.left\r\n                        && x <= bounds.right\r\n                        && y <= bounds.bottom\r\n                        && y >= bounds.top;\r\n                };\r\n\r\n                initialize();\r\n            }\r\n        };\r\n    }]);\r\n\r\n    //thisModule.directive('pipDragClone', ['$parse', '$timeout', 'pipDraggable', function ($parse, $timeout, pipDraggable) {\r\n    //    return {\r\n    //        restrict: 'A',\r\n    //        link: function (scope, element, attrs) {\r\n    //            var img, _allowClone = true;\r\n    //            var _dragOffset = null;\r\n    //            scope.clonedData = {};\r\n    //            var initialize = function () {\r\n//\r\n    //                img = element.find('img');\r\n    //                element.attr('pip-draggable', 'false');\r\n    //                img.attr('draggable', 'false');\r\n    //                reset();\r\n    //                toggleListeners(true);\r\n    //            };\r\n//\r\n//\r\n    //            var toggleListeners = function (enable) {\r\n    //                // remove listeners\r\n//\r\n    //                if (!enable)return;\r\n    //                // add listeners.\r\n    //                scope.$on('draggable:start', onDragStart);\r\n    //                scope.$on('draggable:move', onDragMove);\r\n    //                scope.$on('draggable:end', onDragEnd);\r\n    //                preventContextMenu();\r\n//\r\n    //            };\r\n    //            var preventContextMenu = function () {\r\n    //                //  element.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                img.off('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                //  element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //                img.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n    //            };\r\n    //            var onDragStart = function (evt, obj, elm) {\r\n    //                _allowClone = true;\r\n    //                if (angular.isDefined(obj.data.allowClone)) {\r\n    //                    _allowClone = obj.data.allowClone;\r\n    //                }\r\n    //                if (_allowClone) {\r\n    //                    scope.$apply(function () {\r\n    //                        scope.clonedData = obj.data;\r\n    //                    });\r\n    //                    element.css('width', obj.element[0].offsetWidth);\r\n    //                    element.css('height', obj.element[0].offsetHeight);\r\n//\r\n    //                    moveElement(obj.tx, obj.ty);\r\n    //                }\r\n//\r\n    //            };\r\n    //            var onDragMove = function (evt, obj) {\r\n    //                if (_allowClone) {\r\n//\r\n    //                    _tx = obj.tx + obj.dragOffset.left;\r\n    //                    _ty = obj.ty + obj.dragOffset.top;\r\n//\r\n    //                    moveElement(_tx, _ty);\r\n    //                }\r\n    //            };\r\n    //            var onDragEnd = function (evt, obj) {\r\n    //                //moveElement(obj.tx,obj.ty);\r\n    //                if (_allowClone) {\r\n    //                    reset();\r\n    //                }\r\n    //            };\r\n//\r\n    //            var reset = function () {\r\n    //                element.css({left: 0, top: 0, position: 'fixed', 'z-index': -1, visibility: 'hidden'});\r\n    //            };\r\n    //            var moveElement = function (x, y) {\r\n    //                element.css({\r\n    //                    transform: 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n    //                    'z-index': 99999,\r\n    //                    'visibility': 'visible',\r\n    //                    '-webkit-transform': 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + x + ', ' + y + ', 0, 1)',\r\n    //                    '-ms-transform': 'matrix(1, 0, 0, 1, ' + x + ', ' + y + ')'\r\n    //                    //,margin: '0'  don't monkey with the margin,\r\n    //                });\r\n    //            };\r\n//\r\n    //            var absorbEvent_ = function (event) {\r\n    //                var e = event;//.originalEvent;\r\n    //                e.preventDefault && e.preventDefault();\r\n    //                e.stopPropagation && e.stopPropagation();\r\n    //                e.cancelBubble = true;\r\n    //                e.returnValue = false;\r\n    //                return false;\r\n    //            };\r\n//\r\n    //            initialize();\r\n    //        }\r\n    //    };\r\n    //}]);\r\n\r\n    thisModule.directive('pipPreventDrag', ['$parse', '$timeout', function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                var initialize = function () {\r\n\r\n                    element.attr('pip-draggable', 'false');\r\n                    toggleListeners(true);\r\n                };\r\n\r\n\r\n                var toggleListeners = function (enable) {\r\n                    // remove listeners\r\n\r\n                    if (!enable)return;\r\n                    // add listeners.\r\n                    element.on('mousedown touchstart touchmove touchend touchcancel', absorbEvent_);\r\n                };\r\n\r\n\r\n                var absorbEvent_ = function (event) {\r\n                    var e = event.originalEvent;\r\n                    e.preventDefault && e.preventDefault();\r\n                    e.stopPropagation && e.stopPropagation();\r\n                    e.cancelBubble = true;\r\n                    e.returnValue = false;\r\n                    return false;\r\n                };\r\n\r\n                initialize();\r\n            }\r\n        };\r\n    }]);\r\n\r\n    thisModule.directive('pipCancelDrag', function () {\r\n        return {\r\n            restrict: 'A',\r\n            link: function (scope, element, attrs) {\r\n                element.find('*').attr('pip-cancel-drag', 'pip-cancel-drag');\r\n            }\r\n        };\r\n    });\r\n})();\r\n\r\n","/**\r\n * @file Directive to show confirmation dialog when user tries to leave page with unsaved changes.\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFabTooltipVisibility\", []);\r\n\r\n    thisModule.directive(\"pipFabTooltipVisibility\", ['$parse', '$timeout', function ($parse, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: ['$scope', '$attrs', function($scope, $attrs) {\r\n                var trigGetter = $parse($attrs.pipFabTooltipVisibility),\r\n                    showGetter = $parse($attrs.pipFabShowTooltip),\r\n                    showSetter = showGetter.assign;\r\n\r\n                $scope.$watch(trigGetter, function(isOpen) {\r\n                    if (isOpen) {\r\n                        $timeout(function() {\r\n                            showSetter($scope, isOpen);\r\n                        }, 600);\r\n                    } else {\r\n                        showSetter($scope, isOpen);\r\n                    }\r\n                });\r\n            }]\r\n        };\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Keyboard navigation over few focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipFocused\", []);\r\n\r\n    thisModule.directive('pipFocused', ['$timeout', '$mdConstant', function($timeout, $mdConstant) {\r\n        return {\r\n            require: \"?ngModel\",\r\n            link: function ($scope, $element, $attrs) {\r\n                var controls, controlsLength,\r\n                    withHidden = $attrs.pipWithHidden;\r\n\r\n                $timeout(init);\r\n                $element.on('keydown', keydownListener);\r\n\r\n                $scope.$watch($attrs.ngModel, function () {\r\n                    $timeout(init);\r\n                }, true);\r\n\r\n                function init() {\r\n                    var selector = withHidden ? '.pip-focusable' : '.pip-focusable:visible';\r\n                    controls = $element.find(selector);\r\n                    controlsLength = controls.length;\r\n\r\n                    // add needed event listeners\r\n                    controls.on('focus', function () {\r\n                        $element.addClass('pip-focused-container');\r\n                        $(this).addClass('md-focused');\r\n                    }).on('focusout', function () {\r\n                        $element.removeClass('pip-focused-container');\r\n                    });\r\n                }\r\n\r\n                function keydownListener(e) {\r\n                    var keyCode = e.which || e.keyCode;\r\n\r\n                    // Check control keyCode\r\n                    if (keyCode == $mdConstant.KEY_CODE.LEFT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.UP_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) {\r\n\r\n                        e.preventDefault();\r\n\r\n                        var \r\n                            increment = (keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                            moveToControl = controls.index(controls.filter(\".md-focused\")) + increment;\r\n\r\n                        // Move focus to next control\r\n                        if (moveToControl >= 0 && moveToControl < controlsLength) {\r\n                            controls[moveToControl].focus();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n    }]);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Infinite scrolling behavior\r\n * @description\r\n * Modified from https://github.com/sroze/ngInfiniteScroll\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipInfiniteScroll\", []);\r\n\r\n    thisModule.directive('pipInfiniteScroll', \r\n        ['$rootScope', '$window', '$interval', '$parse', function($rootScope, $window, $interval, $parse) {\r\n            var THROTTLE_MILLISECONDS = 500;\r\n\r\n            return {\r\n                scope: {\r\n                    pipInfiniteScroll: '&',\r\n                    pipScrollContainer: '=',\r\n                    pipScrollDistance: '=',\r\n                    pipScrollDisabled: '=',\r\n                    pipScrollUseDocumentBottom: '=',\r\n                    pipScrollListenForEvent: '@'\r\n                },\r\n                link: function($scope, $element, $attrs) {\r\n                    var \r\n                        checkWhenEnabled = null,\r\n                        scrollContainer,\r\n                        immediateCheck = true,\r\n                        scrollDistance = null,\r\n                        scrollEnabled = null, \r\n                        unregisterEventListener = null,\r\n                        useDocumentBottom = false, \r\n                        windowElement = angular.element($window);\r\n                    \r\n                    function height(element) {\r\n                        element = element[0] || element;\r\n                        if (isNaN(element.offsetHeight)) {\r\n                            return element.document.documentElement.clientHeight;\r\n                        } else {\r\n                            return element.offsetHeight;\r\n                        }\r\n                    };\r\n\r\n                    function offsetTop(element) {\r\n                        if (!element[0].getBoundingClientRect || element.css('none')) {\r\n                            return;\r\n                        }\r\n                        return element[0].getBoundingClientRect().top + pageYOffset(element);\r\n                    };\r\n\r\n                    function pageYOffset(element) {\r\n                        element = element[0] || element;\r\n                        if (isNaN(window.pageYOffset)) {\r\n                            return element.document.documentElement.scrollTop;\r\n                        } else {\r\n                            return element.ownerDocument.defaultView.pageYOffset;\r\n                        }\r\n                    };\r\n\r\n                    var onContainerScroll = function() {\r\n                        var \r\n                            containerBottom, \r\n                            containerTopOffset, \r\n                            elementBottom, \r\n                            remaining, \r\n                            shouldScroll;\r\n                                                \r\n                        if (scrollContainer === windowElement) {\r\n                            containerBottom = height(scrollContainer) + pageYOffset(scrollContainer[0].document.documentElement);\r\n                            elementBottom = offsetTop($element) + height($element);\r\n                        } else {\r\n                            containerBottom = height(scrollContainer);\r\n                            containerTopOffset = 0;\r\n                            if (offsetTop(scrollContainer) !== void 0) {\r\n                                containerTopOffset = offsetTop(scrollContainer);\r\n                            }\r\n                            elementBottom = offsetTop($element) - containerTopOffset + height($element);\r\n                        }\r\n\r\n                        if (useDocumentBottom) {\r\n                            elementBottom = height(($element[0].ownerDocument || $element[0].document).documentElement);\r\n                        }\r\n\r\n                        remaining = elementBottom - containerBottom;\r\n                        shouldScroll = remaining <= height(scrollContainer) * scrollDistance + 1;\r\n                        \r\n                        if (shouldScroll) {\r\n                            checkWhenEnabled = true;\r\n                            if (scrollEnabled) {\r\n                                if ($scope.$$phase || $rootScope.$$phase) {\r\n                                    return $scope.pipInfiniteScroll();\r\n                                } else {\r\n                                    return $scope.$apply($scope.pipInfiniteScroll);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            return checkWhenEnabled = false;\r\n                        }\r\n                    };\r\n\r\n                    if (THROTTLE_MILLISECONDS != null) {\r\n                        onContainerScroll = _.throttle(onContainerScroll, THROTTLE_MILLISECONDS);                    \r\n                    }\r\n\r\n                    $scope.$on('$destroy', function() {\r\n                        scrollContainer.unbind('scroll', onContainerScroll);\r\n                        if (unregisterEventListener != null) {\r\n                            unregisterEventListener();\r\n                            return unregisterEventListener = null;\r\n                        }\r\n                    });\r\n\r\n                    function handleScrollDistance(v) {\r\n                        return scrollDistance = parseFloat(v) || 0;\r\n                    };\r\n                    $scope.$watch('pipScrollDistance', handleScrollDistance);\r\n                    handleScrollDistance($scope.pipScrollDistance);\r\n                    \r\n                    function handleScrollDisabled(v) {\r\n                        scrollEnabled = !v;\r\n                        if (scrollEnabled && checkWhenEnabled) {\r\n                            checkWhenEnabled = false;\r\n                            return onContainerScroll();\r\n                        }\r\n                    };\r\n                    $scope.$watch('pipScrollDisabled', handleScrollDisabled);\r\n                    handleScrollDisabled($scope.pipScrollDisabled);\r\n\r\n                    function handleScrollUseDocumentBottom(v) {\r\n                        return useDocumentBottom = v;\r\n                    };\r\n                    $scope.$watch('pipScrollUseDocumentBottom', handleScrollUseDocumentBottom);\r\n                    handleScrollUseDocumentBottom($scope.pipScrollUseDocumentBottom);\r\n\r\n                    function changeContainer(newContainer) {\r\n                        if (scrollContainer != null) {\r\n                            scrollContainer.unbind('scroll', onContainerScroll);\r\n                        }\r\n\r\n                        scrollContainer = newContainer;\r\n                        if (newContainer != null) {\r\n                            return scrollContainer.bind('scroll', onContainerScroll);\r\n                        }\r\n                    };\r\n\r\n                    changeContainer(windowElement);\r\n                    if ($scope.pipScrollListenForEvent) {\r\n                        unregisterEventListener = $rootScope.$on($scope.pipScrollListenForEvent, onContainerScroll);\r\n                    }\r\n\r\n                    function handleScrollContainer(newContainer) {\r\n                        if ((newContainer == null) || newContainer.length === 0) {\r\n                            return;\r\n                        }\r\n                        if (newContainer instanceof HTMLElement) {\r\n                            newContainer = angular.element(newContainer);\r\n                        } else if (typeof newContainer.append === 'function') {\r\n                            newContainer = angular.element(newContainer[newContainer.length - 1]);\r\n                        } else if (typeof newContainer === 'string') {\r\n                            newContainer = $element.parents().find(newContainer);\r\n                        }\r\n\r\n                        if (newContainer != null && (!Array.isArray(newContainer) ||\r\n                            (Array.isArray(newContainer) && newContainer.length > 0))) {\r\n                            return changeContainer(newContainer);\r\n                        } else {\r\n                            throw new Error(\"Invalid pip-scroll-container attribute.\");\r\n                        }\r\n                    };\r\n                    $scope.$watch('pipScrollContainer', function (newContainer) {\r\n                        if (newContainer !== scrollContainer)\r\n                            handleScrollContainer(newContainer);\r\n                    });\r\n                    handleScrollContainer($scope.pipScrollContainer || []);\r\n                    \r\n                    if ($attrs.pipScrollParent != null) {\r\n                        changeContainer(angular.element($element.parent()));\r\n                    }\r\n                    if ($attrs.pipScrolImmediateCheck != null) {\r\n                        immediateCheck = $scope.$eval($attrs.pipScrolImmediateCheck);\r\n                    }\r\n                    \r\n                    return $interval((function() {\r\n                        if (immediateCheck) {\r\n                            return onContainerScroll();\r\n                        }\r\n                    }), 0, 1);\r\n                }\r\n            }\r\n        }]\r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Keyboard navigation with scrolling over non-focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipSelected\", ['pipUtils']);\r\n\r\n    thisModule.directive('pipSelected',['$parse', 'pipUtils', '$mdConstant', '$timeout', function ($parse, pipUtils, $mdConstant, $timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            link: function ($scope, $element, $attrs) {\r\n                var\r\n                    indexGetter = $attrs.pipSelected ? $parse($attrs.pipSelected) : null,\r\n                    indexSetter = indexGetter ? indexGetter.assign : null,\r\n                    idGetter = $attrs.pipSelectedId ? $parse($attrs.pipSelectedId) : null,\r\n                    idSetter = idGetter ? idGetter.assign : null,\r\n                    changeGetter = $attrs.pipSelect ? $parse($attrs.pipSelect) : null,\r\n                    enterSpaceGetter = $attrs.pipEnterSpacePress ? $parse($attrs.pipEnterSpacePress) : null,\r\n                    noScroll = pipUtils.toBoolean($attrs.pipNoScroll),\r\n                    modifier = pipUtils.toBoolean($attrs.pipSkipHidden) ? ':visible' : '',\r\n                    className = pipUtils.toBoolean($attrs.pipTreeList) ? '.pip-selectable-tree' : '.pip-selectable',\r\n                    selectedIndex = indexGetter($scope),\r\n                    currentElementTabinex = $element.attr('tabindex'),\r\n                    pipSelectedWatch = $attrs.pipSelectedWatch;\r\n\r\n                // Set tabindex if it's not set yet\r\n                $element.attr('tabindex', currentElementTabinex || 0);\r\n\r\n                // Watch selected item index\r\n                if (!pipUtils.toBoolean($attrs.pipTreeList)) {\r\n                    $scope.$watch(indexGetter, function(newSelectedIndex) {\r\n                        selectItem({itemIndex: newSelectedIndex});\r\n                    });\r\n                } else {\r\n                    $scope.$watch(idGetter, function(newSelectedId) {\r\n                        setTimeout(function () {\r\n                            selectItem({itemId: newSelectedId, raiseEvent: true});\r\n                        }, 0);\r\n                    });\r\n                }\r\n\r\n                // Watch resync selection\r\n                if (pipSelectedWatch) {\r\n                    $scope.$watch(pipSelectedWatch, function() {\r\n                        // Delay update to allow ng-repeat to update DOM\r\n                        setTimeout(function() {\r\n                            selectedIndex = indexGetter($scope);\r\n                            selectItem({itemIndex: selectedIndex});\r\n                        }, 100);\r\n                    });\r\n                }\r\n\r\n                // Select item defined by index\r\n                selectItem({itemIndex: selectedIndex, items: $element.find(className)});\r\n\r\n                // Functions and listeners\r\n\r\n                function selectItem(itemParams) {\r\n                    var itemIndex = itemParams.itemIndex,\r\n                        itemId = itemParams.itemId,\r\n                        items = itemParams.items || $element.find(className + modifier),\r\n                        itemsLength = items.length,\r\n                        item = (function () {\r\n                            if (itemParams.item) return itemParams.item;\r\n                            if (itemIndex === undefined && itemIndex === -1) {\r\n                                itemIndex = items.index(items.filter('[pip-id=' + itemId + ']'));\r\n                            }\r\n                            if (itemIndex >= 0 && itemIndex < itemsLength) {\r\n                                return items[itemIndex]\r\n                            }\r\n                        }()),\r\n                        raiseEvent = itemParams.raiseEvent;\r\n\r\n                    if (item) {\r\n                        $element.find(className).removeClass('selected md-focused');\r\n                        item = angular.element(item)\r\n                            .addClass('selected md-focused')\r\n                            .focus(); // todo сдвигает список тут, на первом проходе\r\n                        if (!noScroll) scrollToItem(item);\r\n                        if (raiseEvent) defineSelectedIndex(items);\r\n                    }\r\n                };\r\n\r\n                function defineSelectedIndex(items) {\r\n                    var oldSelectedIndex = selectedIndex;\r\n                    selectedIndex = -1;\r\n                    for (var index = 0; index < items.length; index++) {\r\n                        if ($(items[index]).hasClass('selected')) {\r\n                            selectedIndex = index;\r\n\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                    // Execute callback to notify about item select\r\n                    if (oldSelectedIndex != selectedIndex && selectedIndex !== -1) {\r\n                        $scope.$apply(updateIndex);\r\n                    }\r\n\r\n                    function updateIndex() {\r\n                        var selectedItem = angular.element(items[selectedIndex]),\r\n                            selectedId = selectedItem.attr('pip-id');\r\n\r\n                        if (indexSetter) indexSetter($scope, selectedIndex);\r\n                        if (idSetter) idSetter($scope, selectedId);\r\n                        if (changeGetter) {\r\n                            changeGetter($scope, {\r\n                                $event: {\r\n                                    target: $element,\r\n                                    item: selectedItem,\r\n                                    index: selectedIndex,\r\n                                    id: selectedId,\r\n                                    newIndex: selectedIndex,\r\n                                    oldIndex: oldSelectedIndex\r\n                                }\r\n                            });\r\n                        }\r\n                    };\r\n                };\r\n\r\n                function scrollToItem($item) {\r\n                    if (noScroll) return;\r\n\r\n                    var\r\n                        containerTop = $element.offset().top,\r\n                        containerHeight = $element.height(),\r\n                        containerBottom = containerTop + containerHeight,\r\n                        itemTop = $item.offset().top,\r\n                        itemHeight = $item.outerHeight(true),\r\n                        itemBottom = itemTop + itemHeight,\r\n                        containerScrollTop = $element.scrollTop();\r\n\r\n                    if (containerTop > itemTop) {\r\n                        $element.scrollTop(containerScrollTop + itemTop - containerTop);\r\n                    }\r\n                    else if (containerBottom < itemBottom) {\r\n                        $element.scrollTop(containerScrollTop + itemBottom - containerBottom);\r\n                    }\r\n\r\n                };\r\n\r\n                $element.on('click touchstart', className, function (event) {\r\n                    selectItem({item: event.currentTarget, raiseEvent: true});\r\n                });\r\n\r\n                $element.on('keydown', function (e) {\r\n                    var keyCode = e.which || e.keyCode;\r\n\r\n                    // Check control keyCode\r\n                    if (keyCode == $mdConstant.KEY_CODE.ENTER || keyCode == $mdConstant.KEY_CODE.SPACE) {\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        if (enterSpaceGetter) {\r\n                            enterSpaceGetter($scope, {\r\n                                $event: {\r\n                                    target: $element,\r\n                                    index: selectedIndex,\r\n                                    item: $element.find('.selected')\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                    } else\r\n                    if (keyCode == $mdConstant.KEY_CODE.LEFT_ARROW || keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW ||\r\n                        keyCode == $mdConstant.KEY_CODE.UP_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) {\r\n\r\n                        e.preventDefault();\r\n                        e.stopPropagation();\r\n\r\n                        // Get next selectable control index\r\n                        var items = $element.find(className + modifier),\r\n                            inc = (keyCode == $mdConstant.KEY_CODE.RIGHT_ARROW || keyCode == $mdConstant.KEY_CODE.DOWN_ARROW) ? 1 : -1,\r\n                            newSelectedIndex = selectedIndex + inc;\r\n\r\n                        // Set next control as selected\r\n                        selectItem({itemIndex: newSelectedIndex, items: items, raiseEvent: true});\r\n                    }\r\n                });\r\n\r\n                $element.on('focusin', function (event) {\r\n                    // Choose selected element\r\n                    var items,\r\n                        selectedItem = $element.find(className + '.selected');\r\n\r\n                    selectedItem.addClass('md-focused');\r\n\r\n                    // If there are not selected elements then pick the first one\r\n                    if (selectedItem.length === 0) {\r\n                        selectedIndex = indexGetter($scope);\r\n                        items = $element.find(className + modifier);\r\n                        selectItem({itemIndex: selectedIndex || 0, items: items, raiseEvent: true});\r\n                    }\r\n                });\r\n\r\n                $element.on('focusout', function (event) {\r\n                    $element.find(className + '.md-focused' + modifier).removeClass('md-focused');\r\n                });\r\n            }\r\n        };\r\n    }]);\r\n\r\n})();\r\n\r\n","/**\r\n * @file Directive to show confirmation dialog when user tries to leave page with unsaved changes.\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function(){\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipUnsavedChanges\", []);\r\n\r\n    thisModule.directive(\"pipUnsavedChanges\", ['$window', '$rootScope', function ($window, $rootScope) {\r\n        return {\r\n            restrict: 'AE',\r\n            scope: {\r\n                unsavedChangesAvailable: '&pipUnsavedChangesAvailable',\r\n                unsavedChangesMessage: '@pipUnsavedChangesMessage',\r\n                afterLeave: '&pipUnsavedChangesAfterLeave'\r\n            },\r\n            link: function($scope) {\r\n\r\n                $window.onbeforeunload = function() {\r\n                    if ($scope.unsavedChangesAvailable()) {\r\n                        $rootScope.$routing = false;\r\n                        return $scope.unsavedChangesMessage;\r\n                    }\r\n                };\r\n\r\n                var unbindFunc = $scope.$on('$stateChangeStart', function(event) {\r\n                    if ($scope.unsavedChangesAvailable() && !$window.confirm($scope.unsavedChangesMessage)) {\r\n                        $rootScope.$routing = false;\r\n                        event.preventDefault();\r\n                    } else {\r\n                        _.isFunction($scope.afterLeave) && $scope.afterLeave();\r\n                    }\r\n                });\r\n\r\n                $scope.$on('$destroy', function() {\r\n                    $window.onbeforeunload = null;\r\n                    unbindFunc();\r\n                });\r\n            }\r\n        };\r\n    }]);\r\n\r\n})();","/**\r\n * @file Filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTranslateFilters', ['pipTranslate']);\r\n\r\n    thisModule.filter('translate', ['pipTranslate', function (pipTranslate) {\r\n        return function (key) {\r\n            return pipTranslate.translate(key) || key;\r\n        }\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Assertion utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipAssert', ['pipDebug']);\r\n\r\n    thisModule.provider('pipAssert', ['pipDebugProvider', function (pipDebugProvider) {\r\n\r\n        return {\r\n            isEmpty: pipDebugProvider.enabled() ? isEmpty : noop,\r\n            isObjectId: pipDebugProvider.enabled() ? isObjectId : noop,\r\n            isDefined: pipDebugProvider.enabled() ? isDefined : noop,\r\n            isDef: pipDebugProvider.enabled() ? isDefined : noop,\r\n            contains: pipDebugProvider.enabled() ? contains : noop,\r\n            equal: pipDebugProvider.enabled() ? equal : noop,\r\n            notEqual: pipDebugProvider.enabled() ? notEqual : noop,\r\n            strictEqual: pipDebugProvider.enabled() ? strictEqual : noop,\r\n            notStrictEqual: pipDebugProvider.enabled() ? notStrictEqual : noop,\r\n            isArray: pipDebugProvider.enabled() ? isArray : noop,\r\n            isBoolean: pipDebugProvider.enabled() ? isBoolean : noop,\r\n            isNumber: pipDebugProvider.enabled() ? isNumber : noop,\r\n            isString: pipDebugProvider.enabled() ? isString : noop,\r\n            isObject: pipDebugProvider.enabled() ? isObject : noop,\r\n            isDate: pipDebugProvider.enabled() ? isDate : noop,\r\n            isError: pipDebugProvider.enabled() ? isError : noop,\r\n            isFunction: pipDebugProvider.enabled() ? isFunction : noop,\r\n            isNotNull: pipDebugProvider.enabled() ? isNotNull : noop,\r\n            \r\n            $get: ['pipDebug', function(pipDebug) {\r\n                return {\r\n                    isEmpty: pipDebug.enabled() ? isEmpty : noop,\r\n                    isObjectId: pipDebug.enabled() ? isObjectId : noop,\r\n                    isDefined: pipDebug.enabled() ? isDefined : noop,\r\n                    isDef: pipDebug.enabled() ? isDefined : noop,\r\n                    contains: pipDebug.enabled() ? contains : noop,\r\n                    equal: pipDebug.enabled() ? equal :  noop,\r\n                    notEqual: pipDebug.enabled() ? notEqual : noop,\r\n                    strictEqual: pipDebug.enabled() ? strictEqual : noop,\r\n                    notStrictEqual: pipDebug.enabled() ? notStrictEqual :  noop,\r\n                    isArray: pipDebug.enabled() ? isArray : noop,\r\n                    isBoolean: pipDebug.enabled() ? isBoolean : noop,\r\n                    isNumber: pipDebug.enabled() ? isNumber : noop,\r\n                    isString: pipDebug.enabled() ? isString : noop,\r\n                    isObject: pipDebug.enabled() ? isObject : noop,\r\n                    isDate: pipDebug.enabled() ? isDate : noop,\r\n                    isError: pipDebug.enabled() ? isError : noop,\r\n                    isFunction: pipDebug.enabled() ? isFunction : noop,\r\n                    isNotNull: pipDebug.enabled() ? isNotNull : noop\r\n                }\r\n            }]\r\n        };\r\n\r\n        function noop() {}\r\n\r\n        function objectToString(o) {\r\n            return Object.prototype.toString.call(o);\r\n        }\r\n\r\n        function isArray(arg, message) {\r\n            if (!Array.isArray(arg)) {\r\n                throw new Error(message || arg + ' should be array');\r\n            }\r\n        }\r\n\r\n        function isBoolean(arg, message) {\r\n            if (typeof arg !== 'boolean') {\r\n                throw new Error(message || arg + ' should be boolean');\r\n            }\r\n        }\r\n\r\n        function isNotNull(arg, message) {\r\n            if (arg === null) {\r\n                throw new Error(message || arg + ' should be not null');\r\n            }\r\n        }\r\n\r\n        function isNumber(arg, message) {\r\n            if (typeof arg !== 'number') {\r\n                throw new Error(message || arg + ' should be number');\r\n            }\r\n        }\r\n\r\n        function isString(arg, message) {\r\n            if (typeof arg !== 'string') {\r\n                throw new Error(message || arg + ' should be string');\r\n            }\r\n        }\r\n\r\n        function isObject(arg, message) {\r\n            if (typeof arg !== 'object') {\r\n                throw new Error(message || arg + ' should be an object');\r\n            }\r\n        }\r\n\r\n        function isDate(d, message) {\r\n            if (typeof d === 'object' && objectToString(d) !== '[object Date]') {\r\n                throw new Error(message || d + ' should be a date');\r\n            }\r\n        }\r\n\r\n        function isError(e, message) {\r\n            if (typeof e === 'object' && (objectToString(e) !== '[object Error]' || e instanceof Error)) {\r\n                throw new Error(message || e + ' should be an error');\r\n            }\r\n        }\r\n\r\n        function isFunction(arg, message) {\r\n            if (typeof arg !== 'function') {\r\n                throw new Error(message || arg + ' should be a function');\r\n            }\r\n        }\r\n\r\n        function isDefined(arg, message) {\r\n           if (typeof arg === \"undefined\") {\r\n               throw new Error(message || arg + ' should be defined');\r\n           }\r\n        }\r\n\r\n        function isEmpty(arg, message) {\r\n            if (arg === null || arg === undefined || arg === false) {\r\n                throw new Error(message || arg + ' should be not null or undefined or false');\r\n            }\r\n        }\r\n\r\n        function contains(obj, prop, message) {\r\n            if (typeof obj !== 'object') {\r\n                throw new Error(obj + ' should be an object');\r\n            }\r\n            if (obj[prop] === null || obj[prop] === undefined) {\r\n                throw new Error(message || prop + ' should be in object ' + obj);\r\n            }\r\n        }\r\n\r\n        // Compares args with ==\r\n        function equal(actual, expected, message) {\r\n            if (actual != expected) {\r\n                throw new Error(message || actual + ' should be not equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with !=\r\n        function notEqual(actual, expected, message) {\r\n            if (actual == expected) {\r\n                throw new Error(message || actual + ' should be equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with ===\r\n        function strictEqual(actual, expected, message) {\r\n            if (actual !== expected) {\r\n                throw new Error(message || actual + ' should not be strict equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with !==\r\n        function notStrictEqual(actual, expected, message) {\r\n            if (actual === expected) {\r\n                throw new Error(message || actual + ' should not strict equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Checks if value is a valid ObjectId\r\n        function isObjectId(value, message) {\r\n            var checkForHexRegExp = new RegExp(\"^[0-9a-fA-F]{24}$\");\r\n            if (!checkForHexRegExp.test(value)) {\r\n                throw new Error(message || value + ' should be an object id');\r\n            }\r\n        }\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Debugging service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDebug', []);\r\n\r\n    thisModule.provider('pipDebug', ['$logProvider', function ($logProvider) {\r\n\r\n        this.enabled = true;\r\n\r\n        return {\r\n            enable: enable,\r\n            disable: disable,\r\n            enabled: enabled,\r\n            \r\n            $get: ['$log', function($log) {\r\n                return {\r\n                    enabled: enabled,\r\n                    log: $log.log,\r\n                    info: $log.info,\r\n                    warn: $log.warn,\r\n                    error: $log.error,\r\n                    debug: $log.debug\r\n                }\r\n            }]\r\n        };\r\n\r\n        function enabled() {\r\n            return this.enabled;\r\n        }\r\n\r\n        function enable() {\r\n            this.enabled = true;\r\n            $logProvider.debugEnabled(true);\r\n        }\r\n\r\n        function disable() {\r\n            this.enabled = false;\r\n            $logProvider.debugEnabled(false);\r\n        }\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Error context\r\n * @description\r\n * Error context decouples business components that throw errors\r\n * and visualization components that show them to users\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n \r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors', ['pipUtils', 'pipAssert']);\r\n\r\n    /*\r\n     * Error is designed to assist with error handling\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * */\r\n    thisModule.factory('pipError',\r\n        ['$rootScope', 'pipAssert', function ($rootScope, pipAssert) {\r\n\r\n            // Initialize error scope\r\n            $rootScope.errors = {};\r\n\r\n            return createError;\r\n\r\n            //----------------------------\r\n\r\n            function initError(scope) {\r\n                $rootScope.errors[scope] = {\r\n                    message: undefined,\r\n                    code: undefined,\r\n                    details: undefined\r\n                };\r\n            };\r\n\r\n            function errorMessage(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                // Process regular messages\r\n                if (error.message) {\r\n                    return error.message;\r\n                }\r\n\r\n                // Process server application errors\r\n                if (error.data) {\r\n                    if (error.data.code) {\r\n                        // process server error codes here\r\n                        return 'ERROR_' + error.data.code;\r\n                    }\r\n\r\n                    if (error.data.message) {\r\n                        return error.data.message;\r\n                    }\r\n                }\r\n\r\n                // Process standard HTTP errors\r\n                if (error.statusText) {\r\n                    return error.statusText;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return 'ERROR_' + error.status;\r\n                }\r\n                \r\n                return error.data ? error.data : error;\r\n            };\r\n\r\n            function errorCode(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                if (error.data && error.data.code) {\r\n                    return error.data.code;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return error.status;\r\n                }\r\n                \r\n                return null;\r\n            };\r\n\r\n            function errorDetails(error) {\r\n                return error && error.data ? error.data : error;\r\n            };\r\n\r\n            function createError(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = {\r\n                    reset: function () {\r\n                        initError(scope);\r\n                    },\r\n\r\n                    empty: function() {\r\n                        var error = $rootScope.errors[scope];\r\n                        return _.isNull(error) || (_.isNull(error.message) && _.isNull(error.code));\r\n                    },\r\n\r\n                    get: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope];\r\n                        }\r\n                        return '';\r\n                    },\r\n\r\n                    message: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].message;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    code: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].code;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    details: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].details;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    set: function (error) {\r\n                        if (error) {\r\n                            pipAssert.isObject(error, \"Setting error: error should be an object\");\r\n\r\n                            $rootScope.errors[scope] = {\r\n                                message: errorMessage(error),\r\n                                code: errorCode(error),\r\n                                details: errorDetails(error)\r\n                            };\r\n                            console.error($rootScope.errors[scope]);\r\n                        } else {\r\n                            initError(scope);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                // Assign error into scope\r\n                if (_.isObject(scopeObject)) scopeObject.error = error;\r\n\r\n                return error;\r\n            };\r\n        }]\r\n    );\r\n    \r\n})();","/**\r\n * @file Application router extended from ui.router\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n \r\n(function () {\r\n    'use strict';\r\n    \r\n    var thisModule = angular.module('pipState', ['ui.router', 'pipTranslate', 'pipAssert']);\r\n\r\n    thisModule.config(\r\n        ['$locationProvider', '$httpProvider', 'pipTranslateProvider', function($locationProvider, $httpProvider, pipTranslateProvider) {\r\n            // Switch to HTML5 routing mode\r\n            //$locationProvider.html5Mode(true);\r\n            pipTranslateProvider.translations('en', {\r\n                'ERROR_SWITCHING': 'Error while switching route. Try again.'\r\n            });\r\n\r\n            pipTranslateProvider.translations('ru', {\r\n                'ERROR_SWITCHING': 'Ошибка при переходе. Попробуйте ещё раз.'\r\n            });\r\n        }]\r\n    );\r\n\r\n    thisModule.run(\r\n        ['$rootScope', 'pipTranslate', '$state', function($rootScope, pipTranslate, $state) {\r\n            $rootScope.$on('$stateChangeSuccess',\r\n                function(event, toState, toParams, fromState, fromParams) {\r\n                    if ($rootScope.$user && $rootScope.$user.id && toState.params && toState.params.access) {\r\n                        if (toParams && toParams.party_id) {\r\n                            var party = _.find($rootScope.$user.party_access, {party_id: toParams.party_id});\r\n                            if (party) {\r\n                                if (toState.params.access == 'manager' && !party.manager ||\r\n                                    toState.params.access == 'contributor' && !party.contributor) {\r\n                                    if (toState.params.toState) {\r\n                                        event.preventDefault();\r\n                                        $state.go(toState.params.toState, toParams);\r\n                                        return;\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                if (toParams.party_id != $rootScope.$user.id && toState.params.toState) {\r\n                                    event.preventDefault();\r\n                                    $state.go(toState.params.toState, toParams);\r\n                                    return;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    // Unset routing variable to disable page transition\r\n                    $rootScope.$routing = false;\r\n                    // Record current and previous state\r\n                    $rootScope.$state = {name: toState.name, url: toState.url, params: toParams};\r\n                    $rootScope.$prevState = {name: fromState.name, url: fromState.url, params: fromParams};\r\n                }\r\n            );\r\n\r\n            // Intercept route error\r\n            $rootScope.$on('$stateChangeError',\r\n                function(event, toState, toParams, fromState, fromParams, error) {\r\n                    // Unset routing variable to disable page transition\r\n                    $rootScope.$routing = false;\r\n\r\n                    console.error('Error while switching route to ' + toState.name);\r\n                    console.error(error);\r\n                }\r\n            );\r\n\r\n\r\n            // Intercept route error\r\n            $rootScope.$on('$stateNotFound',\r\n                function(event, unfoundState, fromState, fromParams) {\r\n                    event.preventDefault();\r\n\r\n                    // todo make configured error state name\r\n                    $state.go('errors_missing_route',  {\r\n                            unfoundState: unfoundState,\r\n                            fromState : {\r\n                                to: fromState ? fromState.name : '',\r\n                                fromParams: fromParams\r\n                            }\r\n                        }\r\n                    );\r\n                    $rootScope.$routing = false;\r\n                }\r\n            );\r\n\r\n        }]\r\n    );\r\n\r\n    thisModule.provider('pipState', ['$stateProvider', 'pipAssertProvider', function($stateProvider, pipAssertProvider) {\r\n        // Configuration of redirected states\r\n        var redirectedStates = {};\r\n\r\n        this.redirect = setRedirect;\r\n        this.state = $stateProvider.state;\r\n\r\n        this.$get = ['$state', '$timeout', 'pipAssert', function ($state, $timeout, pipAssert) {\r\n            $state.redirect = redirect;\r\n            \r\n            return $state;\r\n            \r\n\t\t\t//------------------------\r\n            function redirect(event, state, params, $rootScope) {\r\n                pipAssert.contains(state, 'name', \"$state.redirect: state should contains name prop\");\r\n                pipAssert.isObject(params, \"$state.redirect: params should be an object\");\r\n\r\n                var toState;\r\n\r\n                $rootScope.$routing = true;\r\n                toState = redirectedStates[state.name];\r\n                if (_.isFunction(toState)) {\r\n                    toState = toState(state.name, params, $rootScope);\r\n\r\n                    if (_.isNull(toState)) {\r\n                        $rootScope.$routing = false;\r\n                        throw new Error('Redirected toState cannot be null');\r\n                    }\r\n                }\r\n\r\n                if (!!toState) {\r\n                    $timeout(function() {\r\n                        event.preventDefault();\r\n                        $state.transitionTo(toState, params, {location: 'replace'});\r\n                    });\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        }];\r\n\r\n        return;        \r\n        //------------------\r\n\r\n        // Specify automatic redirect from one state to another\r\n        function setRedirect(fromState, toState) {\r\n            pipAssertProvider.isNotNull(fromState, \"pipState.redirect: fromState cannot be null\");\r\n            pipAssertProvider.isNotNull(toState, \"pipState.redirect: toState cannot be null\");\r\n            \r\n            redirectedStates[fromState] = toState;  \r\n\r\n            return this;\r\n        };\r\n\r\n    }]);\r\n\r\n})();","/**\r\n * @file Global application timer service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimer', []);\r\n\r\n    thisModule.service('pipTimer', \r\n        ['$interval', '$rootScope', function ($interval, $rootScope) {\r\n            var \r\n                AUTO_PULL_CHANGES_TIMEOUT = 60000, // 1 min\r\n                AUTO_UPDATE_PAGE_TIMEOUT = 15000,  // 15 sec\r\n                AUTO_UPDATE_COLLECTION_TIMEOUT = 300000, // 5 min\r\n                started = false, \r\n                autoPullChangesInterval, \r\n                autoUpdatePageInterval,\r\n                autoUpdateCollectionInterval;\r\n\r\n            return {\r\n                isStarted: isStarted,\r\n                start: start,\r\n                stop: stop\r\n            };\r\n\r\n            //------------------------\r\n\r\n            function isStarted() {\r\n                return started;\r\n            };\r\n\r\n            function start() {\r\n                if (started) return;\r\n\r\n                autoPullChangesInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoPullChanges');\r\n                }, AUTO_PULL_CHANGES_TIMEOUT);\r\n\r\n                autoUpdatePageInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoUpdatePage');\r\n                }, AUTO_UPDATE_PAGE_TIMEOUT);\r\n\r\n                autoUpdateCollectionInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoUpdateCollection');\r\n                }, AUTO_UPDATE_COLLECTION_TIMEOUT);\r\n\r\n                started = true;\r\n            };\r\n\r\n            function stop() {\r\n                if (autoPullChangesInterval)\r\n                    $interval.cancel(autoPullChangesInterval);\r\n\r\n                if (autoUpdatePageInterval)\r\n                    $interval.cancel(autoUpdatePageInterval);\r\n\r\n                if (autoUpdateCollectionInterval)\r\n                    $interval.cancel(autoUpdatePageInterval);\r\n\r\n                started = false;\r\n            };\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Transaction context\r\n * @description\r\n * Transaction context helps to wrap multiple server requests\r\n * into one logical transaction. It decouples transaction\r\n * management and progress visualization to the user\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTransactions', ['pipTranslate', 'pipErrors']);\r\n\r\n\tthisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n        \r\n        pipTranslateProvider.translations('en', {\r\n            'ENTERING': 'Entering...',\r\n            'PROCESSING': 'Processing...',\r\n            'LOADING': 'Loading...',\r\n            'SAVING': 'Saving...'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'ENTERING': 'Вход в систему...',\r\n            'PROCESSING': 'Обрабатывается...',\r\n            'LOADING': 'Загружается...',\r\n            'SAVING': 'Сохраняется...'\r\n        });\r\n\t\t\r\n\t}]);\r\n\r\n    /*\r\n     * Transaction is designed to assist with transaction processing\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * \r\n     * Transaction is also integrated with Error service. So you don't need to double it\r\n     * */\r\n    thisModule.factory('pipTransaction',\r\n        ['$rootScope', 'pipError', function ($rootScope, pipError) {\r\n\r\n            // Initialize transaction scope\r\n            $rootScope.transactions = {};\r\n\r\n            return createTransaction;\r\n\r\n            //---------------------------------\r\n\r\n            function initTransaction(scope) {\r\n                $rootScope.transactions[scope] = {\r\n                    id: undefined,\r\n                    operation: undefined\r\n                };\r\n            }\r\n            \r\n            function createTransaction(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = pipError(scope);\r\n                var transaction = {\r\n                    error: error,\r\n\r\n                    reset: function () {\r\n                        initTransaction();\r\n                        error.reset();\r\n                    },\r\n\r\n                    busy: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction != null && transaction.id;\r\n                    },\r\n\r\n                    failed: function() {\r\n                        return !error.empty();\r\n                    },\r\n\r\n                    aborted: function(id) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return _.isNull(transaction) || transaction.id != id;\r\n                    },\r\n\r\n                    get: function () {\r\n                        if (_.isNull($rootScope.transactions[scope])) {\r\n                            initTransaction(scope);\r\n                        }\r\n                        return $rootScope.transactions[scope];\r\n                    },\r\n\r\n                    id: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.id : null;\r\n                    },\r\n\r\n                    operation: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.operation : null;\r\n                    },\r\n\r\n                    errorMessage: function () {\r\n                        return error.message();\r\n                    },\r\n\r\n                    begin: function (operation) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        // Transaction already in progress\r\n                        if (transaction != null && transaction.id) {\r\n                            return null;\r\n                        }                      \r\n\r\n                        transaction = $rootScope.transactions[scope] = {\r\n                            id: new Date().getTime(),\r\n                            operation: operation || 'PROCESSING'\r\n                        };\r\n                        error.reset();\r\n\r\n                        return transaction.id;\r\n                    },\r\n\r\n                    abort: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction) {\r\n                            transaction.id = null;\r\n                        }\r\n                        error.reset();\r\n                    },\r\n\r\n                    end: function (err) {\r\n                        if (err) error.set(err);\r\n                        else error.reset();\r\n\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction != null) {\r\n                            transaction.id = null;\r\n                        }                      \r\n                    }\r\n                };\r\n\r\n                if (_.isObject(scopeObject)) {\r\n                    scopeObject.error = error;\r\n                    scopeObject.transaction = transaction;\r\n                }\r\n\r\n                return transaction;\r\n            }\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Translatation service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo:\r\n * - Move directives to more appropriate places\r\n */\r\n \r\n /* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTranslate', ['LocalStorageModule', 'pipAssert']);\r\n\r\n    thisModule.provider('pipTranslate', ['pipAssertProvider', function(pipAssertProvider) {\r\n        var \r\n            language = 'en',\r\n            persist = true,\r\n            setRoot = true,\r\n            translationMap = {\r\n                en: {\r\n                    'en': 'English',\r\n                    'ru': 'Russian',\r\n                    'es': 'Spanish',\r\n                    'pt': 'Portuguese',\r\n                    'de': 'German',\r\n                    'fr': 'French'\r\n                },\r\n                ru: {\r\n                    'en': 'Английский',\r\n                    'ru': 'Русский',\r\n                    'es': 'Испанский',\r\n                    'pt': 'Португальский',\r\n                    'de': 'Немецкий',\r\n                    'fr': 'Французский'\r\n                }\r\n            };\r\n\r\n        this.translations = setTranslations;\r\n        this.language = initLanguage;\r\n        this.use = initLanguage;\r\n        this.persist = initPersist;\r\n        this.setRoot = initSetRoot;\r\n\r\n        this.$get = ['$rootScope', '$timeout', 'localStorageService', 'pipAssert', function ($rootScope, $timeout, localStorageService, pipAssert) {\r\n            // Read language from persistent storage\r\n            if (persist)\r\n                language = localStorageService.get('language') || language;\r\n\r\n            // Set root variable\r\n            if (setRoot) \r\n                $rootScope.$language = language;\r\n            \r\n            // Resetting root scope to force update language on the screen\r\n            function reset(fullReset, partialReset) {\r\n                fullReset = fullReset !== undefined ? !!fullReset : true;\r\n                partialReset = partialReset !== undefined ? !!partialReset : true;\r\n\r\n                $rootScope.$reset = fullReset;\r\n                $rootScope.$partialReset = partialReset;\r\n                $timeout(function() {\r\n                    $rootScope.$reset = false;\r\n                    $rootScope.$partialReset = false;\r\n                }, 0);\r\n            }\r\n\r\n            return {\r\n                use: function (newLanguage, fullReset, partialReset) {\r\n                    pipAssert.isString(newLanguage || '', \"pipTranslate.use: argument should be a string\");\r\n                    if (newLanguage != null && newLanguage != language) {\r\n                        language = newLanguage;\r\n                        if (persist)\r\n                            localStorageService.set('language', language);\r\n                        if (setRoot)\r\n                            $rootScope.$language = language;\r\n                        reset(fullReset, partialReset);\r\n                    }\r\n                    return language;\r\n                },\r\n\r\n                translations: setTranslations,\r\n                translate: translate,\r\n                translateArray: translateArray,\r\n                translateSet: translateSet,\r\n                translateObjects: translateObjects,\r\n                translateById: translateById,\r\n                translateSetById: translateSetById,\r\n                translateStringsSet: translateStringsSet\r\n            }\r\n        }];\r\n\r\n        // Initialize language selection\r\n        function initLanguage(newLanguage) {\r\n            pipAssertProvider.isString(newLanguage || '', \"pipTranslateProvider.use or pipTranslateProvider.language: argument should be a string\");\r\n\r\n            if (newLanguage != null) {\r\n                language = newLanguage;\r\n            }\r\n            return language;\r\n        }\r\n\r\n        // Initialize persistence flag\r\n        function initPersist(newPersist) {\r\n            if (newPersist != null) {\r\n                pipAssertProvider.isBoolean(newPersist || '', \"pipTranslateProvider.persist: argument should be a boolean\");\r\n                persist = newPersist;\r\n            }\r\n            return persist;\r\n        }\r\n\r\n        // Initialize set root flag\r\n        function initSetRoot(newSetRoot) {\r\n            if (newSetRoot != null) {\r\n                pipAssertProvider.isBoolean(newSetRoot || '', \"pipTranslateProvider.setRoot: argument should be a boolean\");\r\n                setRoot = newSetRoot;\r\n            }\r\n            return setRoot;  \r\n        }\r\n\r\n        // Set translation strings for specific language\r\n        function setTranslations(language, languageMap) {\r\n            pipAssertProvider.isString(language, \"pipTranslate.setTranslations or pipTranslateProvider.translations: first argument should be a string\");\r\n            pipAssertProvider.isObject(languageMap, \"pipTranslate.setTranslations or pipTranslateProvider.translations: second argument should be an object\");\r\n\r\n            var map = translationMap[language] || {};\r\n            translationMap[language] = _.extend(map, languageMap);\r\n        }\r\n\r\n        // Translate a string by key using set language\r\n        function translate(key) {\r\n            if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n            var map = translationMap[language] || {};\r\n            return map[key] || key;\r\n        }\r\n\r\n        // Translate an array of strings\r\n        function translateArray(keys) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateArray: argument should be an array\");\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var key = k || '';\r\n                values.push(map[key] || key);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings into array of objects (set)\r\n        function translateSet(keys, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateSet: first argument should be an array\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateSet: second argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateSet: third argument should be a string\");\r\n\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n\r\n                obj[key] = mapKey;\r\n                obj[value] = map[mapKey] || mapKey;\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate a collection of objects\r\n        function translateObjects(items, key, value) {\r\n            if (_.isNull(items) || items.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(items, \"pipTranslate.translateObjects: first argument should be an array\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateObjects: second argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateObjects: third argument should be a string\");\r\n\r\n            key = key || 'name';\r\n            value = value || 'nameLocal';\r\n\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(items, function (i) {\r\n                var item = i, mapKey = item[key] || '';\r\n\r\n                item[value] = map[mapKey] || mapKey;\r\n            });\r\n\r\n            return items;\r\n        }\r\n\r\n        // Translate a string by key  with prefix using set language todo\r\n        function translateById(prefix, key) {\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateById: second argument should be a string\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateById: first argument should be a string\");\r\n\r\n            prefix = prefix ? prefix + '_' : '';\r\n            key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n            if (key == null) return '';\r\n            var map = translationMap[language] || {};\r\n            return map[key] || key;\r\n        };\r\n\r\n        function translateSetById(keys, prefix, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateSetById: first argument should be an array\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateSetById: second argument should be a string\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateSetById: third argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateSetById: forth argument should be a string\");\r\n\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n\r\n                obj[key] = mapKey;\r\n                obj[value] = map[prefix + '_' + mapKey] || mapKey;\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n        function translateStringsSet(keys, prefix, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateStringsSet: first argument should be an array\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateStringsSet: second argument should be a string\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateStringsSet: third argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateStringsSet: forth argument should be a string\");\r\n\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n                obj[key] = mapKey;\r\n                obj[value] = map[prefix + mapKey.replace(/ /g, '_').toUpperCase()]\r\n                    || (prefix + mapKey.replace(/ /g, '_').toUpperCase());\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n    }]);\r\n\r\n    thisModule.directive('pipTranslate', ['pipTranslate', function(pipTranslate) {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslate',\r\n                key2: '@key'\r\n            },\r\n            link: function (scope, element, attrs) {\r\n                var key = scope.key1 || scope.key2;\r\n                var value = pipTranslate.translate(key);\r\n                element.text(value);\r\n            }\r\n\r\n        };\r\n    }]);\r\n\r\n    thisModule.directive('pipTranslateHtml', ['pipTranslate', function(pipTranslate) {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslateHtml',\r\n                key2: '@key'\r\n            },\r\n            link: function (scope, element, attrs) {\r\n                var key = scope.key1 || scope.key2;\r\n                var value = pipTranslate.translate(key);\r\n                element.html(value);\r\n            }\r\n\r\n        };\r\n    }]);\r\n\r\n})();","/**\r\n * @file Collection utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Collections', []);\r\n\r\n    thisModule.factory('pipCollections', function () {\r\n        var collections = {};\r\n\r\n        // Index of element in array by key\r\n        collections.indexBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    return i;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n    \r\n        // Find element in array by key\r\n        collections.findBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    return items[i];\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n    \r\n        // Remove element from array by value\r\n        collections.remove = function (items, item) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i] == item) {\r\n                    items.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Removes element from array by key\r\n        collections.removeBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Replaced element by key\r\n        collections.replaceBy = function (items, key, value, data) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items[i] = data;\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Calculate difference between two collections\r\n        collections.difference = function (a1, a2, comparator) {\r\n            var result = [];\r\n    \r\n            _.each(a1, function (e1) {\r\n                var e2 = _.find(a2, function (e) {\r\n                    return comparator(e1, e);\r\n                });\r\n    \r\n                if (e2 == null) {\r\n                    result.push(e1);\r\n                }\r\n            })\r\n    \r\n            return result;\r\n        };\r\n\r\n        return collections;\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Form error utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n *\r\n */\r\n \r\n /* global _, angular */\r\n \r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.FormErrors', []);\r\n\r\n    thisModule.factory('pipFormErrors', ['$rootScope', function ($rootScope) {\r\n\t\treturn {\r\n\t\t\terrorsWithHint: errorsWithHint,\r\n            //submittedErrors: submittedErrors,\r\n            //submittedErrorsWithHint: submittedErrorsWithHint,\r\n            //dirtyErrors: dirtyErrors,\r\n            //dirtyErrorsWithHint: dirtyErrorsWithHint,\r\n            //touchedErrors: touchedErrors,            \r\n            touchedErrorsWithHint: touchedErrorsWithHint,\r\n            resetFormErrors: resetFormErrors,\r\n            setFormError: setFormError,\r\n            resetFieldsErrors: resetFieldsErrors\r\n\t\t};\r\n\t\t//-------------------\r\n\r\n        function errorsWithHint(field) {\r\n            if (field == null) return;\r\n\t\t\t\r\n            return _.isEmpty(field.$error) ? { hint: true } : field.$error;\r\n        };\r\n\t\t\r\n//         function submittedErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (form.$submitted)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n// \r\n//         function submittedErrorsWithHint(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (form.$submitted) {\r\n//                 return _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n//             }\r\n//             return { hint: true };\r\n//         };\r\n// \r\n//         function dirtyErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (field.$dirty || form.$dirty)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n// \r\n//         function dirtyErrorsWithHint(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n// \r\n//             if (field.$dirty || form.$dirty) {\r\n//                 return _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n//             }\r\n//             return { hint: true };\r\n//         };\r\n// \r\n//         function touchedErrors(form, field) {\r\n//             if (form == null) throw new Error('Form is not set');\r\n//             if (field == null) throw new Error('Field is not set');\r\n//             \r\n//             if (field.$touched || form.$dirty)\r\n//                 return field.$error;\r\n//             return {};\r\n//         };\r\n\r\n        function touchedErrorsWithHint(form, field) {\r\n            if (form == null) return;\r\n            if (field == null) return;\r\n\r\n            if (form.$submitted && (field.$touched || form.$dirty) || !form.$submitted && (field.$touched || field.$dirty)) {\r\n                var result = _.isEmpty(field.$error) ? { hint: true} : field.$error;\r\n                return result;\r\n            }\r\n            return { hint: true };\r\n        };\r\n\r\n        function resetFormErrors(form, errors) {\r\n            form.$setPristine();\r\n            form.$setUntouched();\r\n\r\n            if (errors) {\r\n                form.$setDirty();\r\n                form.$setSubmitted();\r\n            }\r\n\r\n            form.$serverError = {};\r\n        };\r\n        \r\n        function resetFieldsErrors(form, field) {\r\n            if (!form) return;\r\n            if (field && form[field] && form[field].$error) {\r\n                 form[field].$error = {};\r\n            } else {\r\n                for (var prop in form) {\r\n                    if (form[prop] && form[prop].$error) {\r\n                        form[prop].$error = {};\r\n                    };\r\n                }\r\n                if (form && form.$error) form.$error = {};\r\n            }\r\n        };\r\n        \r\n        function setFormError(form, error, errorFieldMap) {\r\n            if (error == null) return;\r\n            // Prepare form server errors\r\n            form.$serverError = form.$serverError || {};\r\n            // Prepare error code\r\n            var code = error.code || (error.data || {}).code || null;\r\n            if (!code && error.status) code = error.status;\r\n\r\n            if (code) {\r\n                var \r\n                    errorName = 'ERROR_' + code,\r\n                    field = errorFieldMap ? errorFieldMap[code] : null;\r\n                // Set server error to fields\r\n                if (field && form[field] && form[field].$setValidity) {\r\n                    form[field].$setValidity(errorName, false);\r\n                    return;\r\n                }\r\n\r\n                // Set server error to form\r\n                if (field == 'form') {\r\n                    form.$serverError[errorName] = true;\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // if undefined error for this form or code === undefined/null, go to unhandled error page\r\n            if (error.data && error.data.message) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.data.message;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            // Set as undefined error\r\n            if (error.message) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.message;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            if (error.name) {\r\n                form.$serverError['ERROR_UNKNOWN'] = error.name;\r\n                goToUnhandledErrorPage(error);\r\n                return;\r\n            }\r\n\r\n            form.$serverError['ERROR_UNKNOWN'] = error;\r\n            goToUnhandledErrorPage(error);\r\n        };\r\n\r\n        function goToUnhandledErrorPage(error) {\r\n            $rootScope.$emit('pipUnhandledInternalError', {\r\n                error: error\r\n            });\r\n        };\r\n        \r\n\t}]);\r\n\r\n})();","/**\r\n * @file General purpose utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, $, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.General', ['pipState', 'pipAssert']);\r\n\r\n    thisModule.factory('pipUtils', ['$rootScope', '$window', '$state', 'pipAssert', function ($rootScope, $window, $state, pipAssert) {\r\n\r\n        function strRepeat(str, qty) {\r\n            if (qty < 1) return '';\r\n            var result = '';\r\n            while (qty > 0) {\r\n                if (qty & 1) result += str;\r\n                qty >>= 1, str += str;\r\n            }\r\n            return result;\r\n        }\r\n\r\n        var toString = Object.prototype.toString;\r\n\r\n        var sprintf = (function sprintf() {\r\n            function get_type(variable) {\r\n                return toString.call(variable).slice(8, -1).toLowerCase();\r\n            }\r\n\r\n            var str_repeat = strRepeat;\r\n\r\n            var str_format = function() {\r\n                if (!str_format.cache.hasOwnProperty(arguments[0])) {\r\n                    str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\r\n                }\r\n                return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\r\n            };\r\n\r\n            str_format.format = function(parse_tree, argv) {\r\n                var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\r\n                for (i = 0; i < tree_length; i++) {\r\n                    node_type = get_type(parse_tree[i]);\r\n                    if (node_type === 'string') {\r\n                        output.push(parse_tree[i]);\r\n                    }\r\n                    else if (node_type === 'array') {\r\n                        match = parse_tree[i]; // convenience purposes only\r\n                        if (match[2]) { // keyword argument\r\n                            arg = argv[cursor];\r\n                            for (k = 0; k < match[2].length; k++) {\r\n                                if (!arg.hasOwnProperty(match[2][k])) {\r\n                                    throw new Error(sprintf('[_.sprintf] property \"%s\" does not exist', match[2][k]));\r\n                                }\r\n                                arg = arg[match[2][k]];\r\n                            }\r\n                        } else if (match[1]) { // positional argument (explicit)\r\n                            arg = argv[match[1]];\r\n                        }\r\n                        else { // positional argument (implicit)\r\n                            arg = argv[cursor++];\r\n                        }\r\n\r\n                        if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\r\n                            throw new Error(sprintf('[_.sprintf] expecting number but found %s', get_type(arg)));\r\n                        }\r\n                        switch (match[8]) {\r\n                            case 'b': arg = arg.toString(2); break;\r\n                            case 'c': arg = String.fromCharCode(arg); break;\r\n                            case 'd': arg = parseInt(arg, 10); break;\r\n                            case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                            case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                            case 'o': arg = arg.toString(8); break;\r\n                            case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                            case 'u': arg = Math.abs(arg); break;\r\n                            case 'x': arg = arg.toString(16); break;\r\n                            case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                        }\r\n                        arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\r\n                        pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                        pad_length = match[6] - String(arg).length;\r\n                        pad = match[6] ? str_repeat(pad_character, pad_length) : '';\r\n                        output.push(match[5] ? arg + pad : pad + arg);\r\n                    }\r\n                }\r\n                return output.join('');\r\n            };\r\n\r\n            str_format.cache = {};\r\n\r\n            str_format.parse = function(fmt) {\r\n                var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\r\n                while (_fmt) {\r\n                    if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                        parse_tree.push(match[0]);\r\n                    }\r\n                    else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                        parse_tree.push('%');\r\n                    }\r\n                    else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                        if (match[2]) {\r\n                            arg_names |= 1;\r\n                            var field_list = [], replacement_field = match[2], field_match = [];\r\n                            if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                                while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                                    if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else {\r\n                                        throw new Error('[_.sprintf] huh?');\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                throw new Error('[_.sprintf] huh?');\r\n                            }\r\n                            match[2] = field_list;\r\n                        }\r\n                        else {\r\n                            arg_names |= 2;\r\n                        }\r\n                        if (arg_names === 3) {\r\n                            throw new Error('[_.sprintf] mixing positional and named placeholders is not (yet) supported');\r\n                        }\r\n                        parse_tree.push(match);\r\n                    }\r\n                    else {\r\n                        throw new Error('[_.sprintf] huh?');\r\n                    }\r\n                    _fmt = _fmt.substring(match[0].length);\r\n                }\r\n                return parse_tree;\r\n            };\r\n\r\n            return str_format;\r\n        })();\r\n\r\n        return {\r\n            copyProperty: copyProperty,\r\n            copy: copyProperty,\r\n            swapProperties: swapProperties,\r\n            swap: swapProperties,\r\n            convertToBoolean: convertToBoolean,\r\n            toBoolean: convertToBoolean,\r\n            toBool: convertToBoolean,\r\n            convertObjectIdsToString: convertObjectIdsToString,\r\n            OidToString: convertObjectIdsToString,\r\n            generateVerificationCode: generateVerificationCode,\r\n            vercode: generateVerificationCode,\r\n            goBack: goBack,\r\n            goBackAndSelect: goBackAndSelect,\r\n            scrollTo: scrollTo,\r\n            equalObjectIds: equalObjectIds,\r\n            eqOid: equalObjectIds,\r\n            notEqualObjectIds: notEqualObjectIds,\r\n            neqOid: notEqualObjectIds,\r\n            containsObjectId: containsObjectId,\r\n            hasOid: containsObjectId,\r\n            isObjectId: isObjectId,\r\n            // Strings functions. No analogues in lodash.strings\r\n            sampleLine: sampleLine,\r\n            hashCode: hashCode,\r\n            makeString: makeString,\r\n            getBrowser: getBrowser,\r\n            checkSupported: checkSupported,\r\n            sprintf: sprintf,\r\n            // Collection function. No analogues in lodash. It may be in lodash later. Look gitHub/lodash issue #1022\r\n            replaceBy: replaceBy\r\n        };\r\n        \r\n        //--------------------\r\n        function replaceBy(items, key, value, data) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items[i] = data;\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n\r\n        // Creates a sample line from a text\r\n        function sampleLine(value, maxLength) {\r\n            if (!value || value == '') return '';\r\n\r\n            var length = value.indexOf('\\n');\r\n            length = length >= 0 ? length : value.length;\r\n            length = length < maxLength ? value.length : maxLength;\r\n\r\n            return value.substring(0, length);\r\n        };\r\n\r\n        // Simple version of string hashcode\r\n        function hashCode(value) {\r\n            if (value == null) return 0;\r\n            var result = 0;\r\n            for (var i = 0; i < value.length; i++) {\r\n                result += value.charCodeAt(i);\r\n            }\r\n            return result;\r\n        };\r\n\r\n        // Ensure some object is a coerced to a string\r\n        function makeString(object) {\r\n            if (object == null) return '';\r\n            return '' + object;\r\n        };\r\n\r\n        function isObjectId(value) {\r\n            var checkForHexRegExp = new RegExp(\"^[0-9a-fA-F]{24}$\");\r\n            return checkForHexRegExp.test(value);\r\n        }\r\n\r\n        // Compares two ObjectIds (they are not equal by '==')\r\n        function equalObjectIds(value1, value2) {\r\n            if (value1 == null && value2 == null)\r\n                return true;\r\n\r\n            if (value1 == null || value2 == null)\r\n                return false;\r\n\r\n            return value1.toString() == value2.toString();\r\n        };\r\n\r\n        // Compares two ObjectIds (they are always not equal by '!=')\r\n        function notEqualObjectIds(value1, value2) {\r\n            if (value1 == null && value2 == null)\r\n                return false;\r\n\r\n            if (value1 == null || value2 == null)\r\n                return true;\r\n\r\n            return value1.toString() != value2.toString();\r\n        };\r\n\r\n        // Checks if array contains concrete objectId\r\n        function containsObjectId(values, value) {\r\n            return _.some(values, function (value1) {\r\n                return equalObjectIds(value1, value);\r\n            });\r\n        };\r\n\r\n        // Copy property from one object to another if it exists (not null)\r\n        function copyProperty(dest, destProperty, orig, origProperty) {\r\n            // Shift if only 3 arguments set\r\n            if (_.isObject(destProperty)\r\n                && typeof (origProperty) == 'undefined') {\r\n                origProperty = orig;\r\n                orig = destProperty;\r\n                destProperty = origProperty;\r\n            }\r\n    \r\n            if (orig[origProperty] || (typeof (orig[origProperty]) === 'number' && orig[origProperty] % 1 == 0)) {\r\n                dest[destProperty] = orig[origProperty];\r\n                return true;\r\n            }\r\n    \r\n            return false;\r\n        };\r\n    \r\n        // Swaps values of two properties\r\n        function swapProperties(obj, prop1, prop2) {\r\n            var \r\n                temp1 = obj[prop1],\r\n                temp2 = obj[prop2];\r\n    \r\n            if (temp1) {\r\n                obj[prop2] = temp1;\r\n            }\r\n            else {\r\n                delete obj[prop2];\r\n            }\r\n    \r\n            if (temp2) {\r\n                obj[prop1] = temp2;\r\n            }\r\n            else {\r\n                delete obj[prop1];\r\n            }\r\n        };\r\n    \r\n        // Converts value into boolean\r\n        function convertToBoolean(value) {\r\n            if (value == null) return false;\r\n            if (!value) return false;\r\n            value = value.toString().toLowerCase();\r\n            return value == '1' || value == 'true';\r\n        };\r\n    \r\n        // Converts array of object ids to strings (for comparison)\r\n        function convertObjectIdsToString(values) {\r\n            return _.map(values, function (value) {\r\n                return value ? value.toString() : 0;\r\n            });\r\n        };\r\n\r\n        // Generates random big number for verification codes\r\n        function generateVerificationCode() {\r\n            return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n        };\r\n\r\n        // Navigation\r\n        //-------------\r\n\r\n        function goBack() {\r\n            $window.history.back()\r\n        };\r\n\r\n        function goBackAndSelect(object, idParamName, objParamName) {\r\n            pipAssert.isDef(object, 'pipUtils.goBack: first argument should be defined');\r\n            pipAssert.isDef(idParamName, 'pipUtils.goBack: second argument should be defined');\r\n            pipAssert.isDef(objParamName, 'pipUtils.goBack: third argument should be defined');\r\n            pipAssert.isObject(object, 'pipUtils.goBack: first argument should be an object');\r\n            pipAssert.isString(idParamName, 'pipUtils.goBack: second argument should a string');\r\n            pipAssert.isString(objParamName, 'pipUtils.goBack: third argument should a string');\r\n                \r\n            if ($rootScope.$prevState && $rootScope.$prevState.name) {\r\n                var state = _.cloneDeep($rootScope.$prevState);\r\n\r\n                state.params[idParamName] = object.id;\r\n                state.params[objParamName] = object;\r\n\r\n                $state.go(state.name, state.params);\r\n            } else {\r\n                $window.history.back();\r\n            }\r\n        };\r\n\r\n        // Scrolling\r\n        //--------------\r\n        \r\n        function scrollTo(parentElement, childElement, animationDuration) {\r\n            if(!parentElement || !childElement) return;\r\n            if (animationDuration == undefined) animationDuration = 300;\r\n\r\n            setTimeout(function () {\r\n                if (!$(childElement).position()) return;\r\n                var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                if (modDiff < 20) return;\r\n                var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                if (animationDuration > 0)\r\n                    $(parentElement).animate({\r\n                        scrollTop: scrollTo + 'px'\r\n                    }, animationDuration);\r\n            }, 100);\r\n        };\r\n\r\n        // todo add support for iPhone\r\n        function getBrowser() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            var bName = function () {\r\n                if (ua.search(/Edge/) > -1) return \"edge\";\r\n                if (ua.search(/MSIE/) > -1) return \"ie\";\r\n                if (ua.search(/Trident/) > -1) return \"ie11\";\r\n                if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n                if (ua.search(/Opera/) > -1) return \"opera\";\r\n                if (ua.search(/OPR/) > -1) return \"operaWebkit\";\r\n                if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n                if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n                if (ua.search(/Safari/) > -1) return \"safari\";\r\n                if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n            }();\r\n\r\n            var version;\r\n            switch (bName) {\r\n                case \"edge\":\r\n                    version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                    break;\r\n                case \"ie\":\r\n                    version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                    break;\r\n                case \"ie11\":\r\n                    bName = \"ie\";\r\n                    version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                    break;\r\n                case \"firefox\":\r\n                    version = ua.split(\"Firefox/\")[1];\r\n                    break;\r\n                case \"opera\":\r\n                    version = ua.split(\"Version/\")[1];\r\n                    break;\r\n                case \"operaWebkit\":\r\n                    bName = \"opera\";\r\n                    version = ua.split(\"OPR/\")[1];\r\n                    break;\r\n                case \"yabrowser\":\r\n                    version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"chrome\":\r\n                    version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"safari\":\r\n                    version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"maxthon\":\r\n                    version = ua.split(\"Maxthon/\")[1];\r\n                    break;\r\n            }\r\n\r\n            var platform = 'desktop';\r\n            if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) platform = 'mobile';\r\n\r\n            var os;\r\n            try {\r\n                var osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [u])[0].replace('sunos', 'solaris'),\r\n                    osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n                    os = osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n            } catch (err) {\r\n                os = 'unknown'\r\n            }\r\n\r\n            var browsrObj;\r\n\r\n            try {\r\n                browsrObj = {\r\n                    platform: platform,\r\n                    browser: bName,\r\n                    versionFull: version,\r\n                    versionShort: version.split(\".\")[0],\r\n                    os: os\r\n                };\r\n            } catch (err) {\r\n                browsrObj = {\r\n                    platform: platform,\r\n                    browser: 'unknown',\r\n                    versionFull: 'unknown',\r\n                    versionShort: 'unknown',\r\n                    os: 'unknown'\r\n                };\r\n            }\r\n\r\n            return browsrObj;\r\n        }\r\n\r\n        // todo нужны каке нибудь настройки?\r\n        function checkSupported(supported) {\r\n            if (!supported) supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n\r\n            var systemInfo = getBrowser();\r\n\r\n            if (systemInfo && systemInfo.browser && supported[systemInfo.browser]){\r\n                if (systemInfo.versionShort >= supported[systemInfo.browser]) return true;\r\n            }\r\n            return true;\r\n\r\n        };\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file String utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Move functions to general utilities\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Strings', []);\r\n\r\n    thisModule.factory('pipStrings', function () {\r\n        var strings = {};\r\n\r\n        // Creates a sample line from a text\r\n        strings.sampleLine = function (value, maxLength) {\r\n            if (!value || value == '') return '';\r\n    \r\n            var length = value.indexOf('\\n');\r\n            length = length >= 0 ? length : value.length;\r\n            length = length < maxLength ? value.length : maxLength;\r\n    \r\n            return value.substring(0, length);\r\n        };\r\n    \r\n        // Simple version of string hashcode\r\n        strings.hashCode = function (value) {\r\n            if (value == null) return 0;\r\n            var result = 0;\r\n            for (var i = 0; i < value.length; i++) {\r\n                result += value.charCodeAt(i);\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        return strings;\r\n    });\r\n\r\n})();","/**\r\n * @file Search tag utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Tags', []);\r\n\r\n    thisModule.factory('pipTags', function () {\r\n        var tags = {};\r\n        \r\n        var HASHTAG_REGEX = /#\\w+/g;\r\n    \r\n        var normalizeTag = function (tag) {\r\n            return tag \r\n                ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n                : null;\r\n        };\r\n        tags.normalizeTag = normalizeTag;\r\n    \r\n        var compressTag = function (tag) {\r\n            return tag\r\n                ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n                : null;\r\n        };\r\n        tags.compressTag = compressTag;\r\n    \r\n        var equalTags = function (tag1, tag2) {\r\n            if (tag1 == null && tag2 == null)\r\n                return true;\r\n            if (tag1 == null || tag2 == null)\r\n                return false;\r\n            return compressTag(tag1) == compressTag(tag2);\r\n        };\r\n        tags.equalTags = equalTags;\r\n    \r\n        var normalizeTags = function (tags) {\r\n            if (_.isString(tags)) {\r\n                tags = tags.split(/( |,|;)+/);\r\n            }\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return normalizeTag(tag);\r\n            });\r\n    \r\n            return tags;\r\n        };\r\n        tags.normalizeTags = normalizeTags;\r\n    \r\n        var compressTags = function (tags) {\r\n            if (_.isString(tags)) {\r\n                tags = tags.split(/( |,|;)+/);\r\n            }\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return compressTag(tag);\r\n            });\r\n    \r\n            return tags;\r\n        };\r\n        tags.compressTags = compressTags;\r\n    \r\n        var extractTags = function (entity, searchFields) {\r\n            var tags = normalizeTags(entity.tags);\r\n    \r\n            _.each(searchFields, function (field) {\r\n                var text = entity[field] || '';\r\n    \r\n                if (text != '') {\r\n                    var hashTags = text.match(HASHTAG_REGEX);\r\n                    tags = tags.concat(normalizeTags(hashTags));\r\n                }\r\n            });\r\n    \r\n            return _.uniq(tags);\r\n        };\r\n        tags.extractTags = extractTags;\r\n\r\n        return tags;\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Collection of utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipUtils', \r\n\t\t['pipUtils.General', 'pipUtils.Strings', 'pipUtils.Tags', 'pipUtils.Collections', 'pipUtils.FormErrors']);\r\n})();\r\n","/**\r\n * @file Registration of all application layouts\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipLayout', [\r\n        'pipLayout.Main', 'pipLayout.Simple', 'pipLayout.Card', 'pipLayout.Document',\r\n        'pipLayout.Tiles', 'pipLayout.Dialog'\r\n    ]);\r\n\r\n})();\r\n","/**\r\n * @file Card layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Card', []);\r\n\r\n    thisModule.directive('pipCard', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           //controller: 'pipCardController'\r\n            link: function($scope, $element, $attrs) {\r\n                var $window = $(window);\r\n\r\n                // Add class to the element\r\n                $element.addClass('pip-card');\r\n\r\n                // Resize every time window is resized\r\n                $scope.$on('pipWindowResized', resize);\r\n\r\n                // Resize right away to avoid flicking\r\n                resize();\r\n\r\n                // Resize the element right away\r\n                setTimeout(resize, 100);\r\n\r\n                return;\r\n\r\n                //---------------\r\n\r\n                function resize() {\r\n                    var\r\n                        $mainBody = $('.pip-main-body'),\r\n                        cardContainer = $('.pip-card-container'),\r\n                        windowWidth = $window.width(),\r\n                        maxWidth = $mainBody.width(),\r\n                        maxHeight = $mainBody.height(),\r\n                        minWidth = $attrs.minWidth ? Math.floor($attrs.minWidth) : null,\r\n                        minHeight = $attrs.minHeight ? Math.floor($attrs.minHeight) : null,\r\n                        width = $attrs.width ? Math.floor($attrs.width) : null,\r\n                        height = $attrs.height ? Math.floor($attrs.height) : null,\r\n                        left, top;\r\n\r\n                    // Full-screen on phone\r\n                    if (windowWidth <= 768) {\r\n                        minWidth = null;\r\n                        minHeight = null;\r\n                        width = null;\r\n                        height = null;\r\n                        maxWidth = null;\r\n                        maxHeight = null;\r\n                    }\r\n                    // Card view with adjustable margins on tablet and desktop\r\n                    else {\r\n                        // Set margin and maximum dimensions\r\n                        var space = windowWidth > 1200 ? 24 : 16;\r\n                        maxWidth -= space * 2;\r\n                        maxHeight -= space * 2;\r\n\r\n                        // Set minimum dimensions\r\n                        minWidth = minWidth ? Math.min(minWidth, maxWidth) : null;\r\n                        minHeight = minHeight ? Math.min(minHeight, maxHeight) : null;\r\n\r\n                        // Set regular dimensions\r\n                        width = width ? Math.min(width, maxWidth) : null;\r\n                        height = height ? Math.min(height, maxHeight) : null;\r\n                    }\r\n\r\n                    // Set dimensions\r\n                    $element.css('max-width', maxWidth ? maxWidth + 'px' : '');\r\n                    $element.css('min-width', minWidth ? minWidth + 'px' : '');\r\n                    $element.css('width', width ? width + 'px' : '');\r\n                    $element.css('height', height ? height + 'px' : '');\r\n\r\n                    if (!cardContainer.hasClass('pip-outer-scroll'))\r\n                    {\r\n                        $element.css('max-height', maxHeight ? maxHeight + 'px' : '');\r\n                        $element.css('min-height', minHeight ? minHeight + 'px' : '');\r\n                        var\r\n                            $header = $element.find('.pip-header:visible'),\r\n                            $footer = $element.find('.pip-footer:visible'),\r\n                            $body = $element.find('.pip-body'),\r\n                            maxBodyHeight = maxHeight || $mainBody.height();\r\n\r\n                        if ($header.length > 0)\r\n                            maxBodyHeight -= $header.outerHeight(true);\r\n                        if ($footer.length > 0)\r\n                            maxBodyHeight -= $footer.outerHeight(true);\r\n\r\n                        $body.css('max-height', maxBodyHeight + 'px');\r\n                    } else {\r\n                        cardContainer.addClass('pip-scroll');\r\n                        if (windowWidth <= 768) {\r\n                            left = 0;\r\n                            top = 0;\r\n                        } else {\r\n                            left = cardContainer.width() / 2 - $element.width() / 2 - 16;\r\n                            top = Math.max(cardContainer.height() / 2 - $element.height() / 2 - 16, 0);\r\n                        }\r\n\r\n                        $element.css('left', left);\r\n                        $element.css('top', top);\r\n                        setTimeout(function () {\r\n                            $element.css('display', 'flex');\r\n                        }, 100);\r\n                    }\r\n\r\n                    // Notify child controls that layout was resized\r\n                    $scope.$broadcast('pipLayoutResized');\r\n                };\r\n            }\r\n        }\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Dialog layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Dialog', []);\r\n\r\n    thisModule.directive('pipDialog', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           controller: 'pipDialogController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipDialogController', \r\n        ['$scope', '$element', '$attrs', function($scope, $element, $attrs) {\r\n            var $window = $(window);\r\n\r\n            // Add class to the element\r\n            $element.addClass('pip-dialog');\r\n\r\n            // Resize every time window is resized\r\n            $scope.$on('pipWindowResized', resize);\r\n\r\n            $scope.$on('pipResizeLayout', resize);\r\n\r\n\r\n            // Resize right away to avoid flicking\r\n            resize();\r\n\r\n            // Resize the element right away\r\n            //setTimeout(resize, 0);\r\n            $window.trigger('resize');\r\n\r\n            return;\r\n\r\n            //-----------------------\r\n\r\n            function resize() {\r\n                var\r\n                    maxWidth = $window.width(),\r\n                    maxHeight = $window.height(),\r\n                    minWidth = $attrs.minWidth ? Math.floor($attrs.minWidth) : null,\r\n                    minHeight = $attrs.minHeight ? Math.floor($attrs.minHeight) : null,\r\n                    width = $attrs.width ? Math.floor($attrs.width) : null,\r\n                    height = $attrs.height ? Math.floor($attrs.height) : null;\r\n\r\n                // Set margin and maximum dimensions\r\n                var space = maxWidth > 1200 ? 24 : 16;\r\n                maxWidth -= space * 2;\r\n                maxHeight -= space * 2;\r\n\r\n                // Set minimum dimensions\r\n                minWidth = minWidth && minWidth < maxWidth ? minWidth : null;\r\n                minHeight = minHeight && minHeight < maxHeight ? minHeight : null;\r\n\r\n                // Set regular dimensions\r\n                width = width ? Math.min(width, maxWidth) : null;\r\n                height = height ? Math.min(height, maxHeight) : null;\r\n\r\n                // Set dimensions\r\n                $element.css('max-width', maxWidth ? maxWidth + 'px' : '');\r\n                $element.css('max-height', maxHeight ? maxHeight + 'px' : '');\r\n                $element.css('min-width', minWidth ? minWidth + 'px' : '');\r\n                $element.css('min-height', minHeight ? minHeight + 'px' : '');\r\n                $element.css('width', width ? width + 'px' : '');\r\n                $element.css('height', height ? height + 'px' : '');\r\n\r\n                // Notify child controls that layout was resized\r\n                $scope.$broadcast('pipLayoutResized');\r\n            };\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Document layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Document', []);\r\n\r\n    thisModule.directive('pipDocument', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           controller: 'pipDocumentController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipDocumentController', \r\n        ['$scope', '$element', '$attrs', function($scope, $element, $attrs) {\r\n            // Add class to the element\r\n            $element.addClass('pip-document');\r\n        }]\r\n    );    \r\n\r\n})();\r\n","/**\r\n * @file Top-level application container\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Main', []);\r\n\r\n    thisModule.directive('pipMain', function() {\r\n        return {\r\n           restrict: 'EA',\r\n           controller: 'pipMainController' \r\n        }\r\n    });\r\n\r\n    thisModule.directive('pipMainBody', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           link: function($scope, $element) {\r\n                $element.addClass('pip-main-body');\r\n           }\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipMainController',\r\n        ['$scope', '$element', '$rootScope', function($scope, $element, $rootScope) {\r\n            var $window = $(window);\r\n\r\n            // Add CSS class\r\n            $element.addClass('pip-main');\r\n\r\n            // Handle window resize events\r\n            $window.bind('resize', resize);\r\n\r\n            // Unbind when scope is removed\r\n            $scope.$on('$destroy', function() {\r\n                $rootScope.$size = undefined;\r\n                $window.unbind('resize', resize);\r\n            });\r\n\r\n            // Resize window from request\r\n            $rootScope.$on('pipResizeWindow', function(event) {\r\n                // Trigger a bit latter t allow full initialization\r\n                // Do not remove! Otherwise, sizes in layouts calculated incorrectly\r\n                setTimeout(resize, 0);\r\n            });\r\n\r\n            // Allow to finish initialization of all controllers\r\n            setTimeout(resize, 0);\r\n\r\n            return;\r\n            \r\n            //---------------\r\n\r\n            function resize() {\r\n                $rootScope.$broadcast('pipWindowResized');\r\n            }\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Simple layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Simple', []);\r\n\r\n    thisModule.directive('pipSimple', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           link: function($scope, $element, $attrs) {\r\n                $element.addClass('pip-simple');\r\n           }\r\n       };\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Tiles layout\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n */\r\n\r\n/* global $, angular, Masonry */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipLayout.Tiles', ['wu.masonry']);\r\n\r\n    thisModule.directive('pipTiles', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           scope: false,\r\n           transclude: true,\r\n           template:\r\n               function($element, $attrs) {\r\n                   if (convertToBoolean($attrs.pipInfinite)) {\r\n                       return  String()\r\n                       + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                       + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                       + ' masonry-options=\"tilesOptions\"  pip-scroll-container=\"\\'.pip-tiles\\'\"'\r\n                       + ' pip-infinite-scroll=\"readScroll()\" >'\r\n                       + '</div>';\r\n                   } else {\r\n                       return String()\r\n                           + '<div masonry class=\"pip-tiles-container\" load-images=\"false\" preserve-order  '\r\n                           + ' ng-transclude column-width=\".pip-tile-sizer\" item-selector=\".pip-tile\"'\r\n                           + ' masonry-options=\"tilesOptions\">'\r\n                           + '</div>';\r\n                   }\r\n               },\r\n           controller: ['$scope', function($scope) {\r\n                $scope.tilesOptions = {\r\n                    gutter: 8,//16\r\n                    isFitWidth: false,\r\n                    isResizeBound: false,\r\n                    transitionDuration: 0 // '0.2s'\r\n                };\r\n           }],\r\n           link: pipTilesController \r\n        };\r\n    });\r\n\r\n    function pipTilesController($scope, $element, $attrs) {\r\n        var\r\n            $window = $(window),\r\n            columnWidth = $attrs.columnWidth ? Math.floor($attrs.columnWidth) : 440,\r\n            container = $element.children('.pip-tiles-container'),\r\n            prevContainerWidth = null,\r\n            masonry = Masonry.data(container[0]);\r\n        \r\n        // Add class to the element\r\n        $element.addClass('pip-tiles');\r\n\r\n        // Insert sizer\r\n        var sizer = $('<div class=\"pip-tile-sizer\"></div>');\r\n        sizer.appendTo(container);\r\n\r\n        // Resize every time window is resized\r\n        $scope.$on('pipWindowResized', function () {\r\n            resize(false);\r\n        });\r\n\r\n        // Force layout by request\r\n        $scope.$on('pipResizeLayout', function () {\r\n            resize(true);\r\n        });\r\n\r\n        // Resize the element right away\r\n        resize();\r\n\r\n        return;\r\n\r\n        //--------------------\r\n\r\n        function resize(force) {\r\n            var\r\n                width = $window.width(),\r\n                containerWidth;\r\n\r\n            if (width > 767) {\r\n                width = width - 24 * 2;\r\n\r\n                var columns = Math.floor(width / columnWidth);\r\n                containerWidth = (columnWidth + 16) * columns - 16;\r\n\r\n                if (containerWidth > width) {\r\n                    columns--;\r\n                    containerWidth = (columnWidth + 16) * columns - 16;\r\n                }\r\n\r\n                if (columns < 1) {\r\n                    containerWidth = width;\r\n                    sizer.css('width', containerWidth + 'px');\r\n                } else {\r\n                    sizer.css('width', columnWidth + 'px');\r\n                }\r\n\r\n                // +1 to avoid precision related error\r\n                container.css('width', (containerWidth + 1) + 'px');\r\n            } else {\r\n                width = width - 16 * 2;\r\n                containerWidth = width;\r\n\r\n                sizer.css('width', containerWidth + 'px');\r\n                // +1 to avoid precision related error\r\n                container.css('width', (containerWidth + 1) + 'px');\r\n            }\r\n\r\n            // Manually call layout on tile container\r\n            if (prevContainerWidth != containerWidth || force) {\r\n                prevContainerWidth = containerWidth;\r\n                masonry.layout();\r\n\r\n                // Notify child controls that layout was resized\r\n                $scope.$broadcast('pipLayoutResized');\r\n            }\r\n        }\r\n    }\r\n\r\n    // Converts value into boolean\r\n    function convertToBoolean(value) {\r\n        if (value == null) return false;\r\n        if (!value) return false;\r\n        value = value.toString().toLowerCase();\r\n        return value == '1' || value == 'true';\r\n    };\r\n\r\n})();\r\n","/**\r\n * @file Registration of basic WebUI controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function (angular) {\r\n    'use strict';\r\n\r\n    angular.module('pipControls', [\r\n        'pipMarkdown',\r\n        'pipToggleButtons',\r\n        'pipRefreshButton',\r\n        'pipColorPicker',\r\n        'pipRoutingProgress',\r\n        'pipPopover',\r\n        'pipImageSlider',\r\n        'pipToasts',\r\n        'pipTagList',\r\n\r\n        'pipInformationDialog',\r\n        'pipConfirmationDialog',\r\n        'pipOptionsDialog',\r\n        'pipOptionsBigDialog',\r\n        'pipErrorDetailsDialog'\r\n    ]);\r\n\r\n    angular.module('pipBasicControls', ['pipControls']);\r\n\r\n})(window.angular);\r\n\r\n","(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('color_picker/color_picker.html',\n    '<ul class=\"pip-color-picker lp0 {{class}}\" pip-selected=\"currentColorIndex\" pip-enter-space-press=\"enterSpacePress($event)\">\\n' +\n    '    <li tabindex=\"-1\" ng-repeat=\"color in colors track by color\">\\n' +\n    '        <md-button  tabindex=\"-1\" class=\"md-icon-button pip-selectable\" ng-click=\"selectColor($index)\" aria-label=\"color\" ng-disabled=\"disabled()\">\\n' +\n    '            <md-icon ng-style=\"{\\'color\\': color}\" md-svg-icon=\"icons:{{ color == currentColor ? \\'circle\\' : \\'radio-off\\' }}\">\\n' +\n    '            </md-icon>\\n' +\n    '        </md-button>\\n' +\n    '    </li>\\n' +\n    '</ul>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('confirmation_dialog/confirmation_dialog.html',\n    '<!--\\n' +\n    '@file Confirmation dialog template\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-dialog class=\"pip-dialog pip-confirmation-dialog layout-column\" width=\"400\" md-theme=\"{{::theme}}\">\\n' +\n    '    <div class=\"pip-header text-subhead1\">\\n' +\n    '        <h3 class=\"m0\">{{:: title | translate }}</h3>\\n' +\n    '    </div>\\n' +\n    '    <div class=\"pip-footer\">\\n' +\n    '        <div>\\n' +\n    '            <md-button ng-click=\"onCancel()\">{{:: cancel | translate }}</md-button>\\n' +\n    '            <md-button class=\"md-accent\" ng-click=\"onOk()\">{{:: ok | translate }}</md-button>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</md-dialog>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('error_details_dialog/error_details_dialog.html',\n    '<!--\\n' +\n    '@file Confirmation dialog template\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-dialog class=\"pip-dialog pip-details-dialog layout-column\" width=\"400\" md-theme=\"{{theme}}\">\\n' +\n    '    <div class=\"pip-body\">\\n' +\n    '\\n' +\n    '        <div class=\"pip-header p0 bp8  text-subhead1\">{{::\\'ERROR_DETAILS\\' | translate}}</div>\\n' +\n    '        <div class=\"layout-row layout-align-start-center h48 text-body2 color-secondary-text\"\\n' +\n    '             ng-if=\"error.code || (error.data && error.data.code)\">\\n' +\n    '            {{::\\'CODE\\' | translate}}\\n' +\n    '        </div>\\n' +\n    '        <div class=\"layout-row layout-align-start-center\" ng-if=\"error.code || (error.data && error.data.code)\">\\n' +\n    '            {{error.code || error.data.code}}\\n' +\n    '        </div>\\n' +\n    '\\n' +\n    '        <div class=\"layout-row layout-align-start-center h48 text-body2 color-secondary-text\"\\n' +\n    '             ng-if=\"error.path || (error.data && error.data.path)\">\\n' +\n    '            {{::\\'PATH\\' | translate}}\\n' +\n    '        </div>\\n' +\n    '        <div class=\"layout-row layout-align-start-center\" ng-if=\"error.path || (error.data && error.data.path)\">\\n' +\n    '            {{error.path || error.data.path}}\\n' +\n    '        </div>\\n' +\n    '\\n' +\n    '        <div class=\"h48 text-body2 color-secondary-text layout-row layout-align-start-center\"\\n' +\n    '             ng-if=\"error.error || (error.data && error.data.error)\">\\n' +\n    '            {{::\\'ERROR\\' | translate}}\\n' +\n    '        </div>\\n' +\n    '        <div class=\"layout-row layout-align-start-center\" ng-if=\"error.error || (error.data && error.data.error)\">\\n' +\n    '            {{error.error || error.data.error}}\\n' +\n    '        </div>\\n' +\n    '\\n' +\n    '        <div class=\"h48 text-body2 color-secondary-text layout-row layout-align-start-center\"\\n' +\n    '             ng-if=\"error.method || (error.data && error.data.method)\">\\n' +\n    '            {{::\\'METHOD\\' | translate}}\\n' +\n    '        </div>\\n' +\n    '        <div class=\"layout-row layout-align-start-center\" ng-if=\"error.method || (error.data && error.data.method)\">\\n' +\n    '            {{error.method || error.data.method}}\\n' +\n    '        </div>\\n' +\n    '\\n' +\n    '        <div class=\"h48 text-body2 color-secondary-text layout-row layout-align-start-center\"\\n' +\n    '             ng-if=\"error.message || (error.data && error.data.message)\">\\n' +\n    '            {{::\\'MESSAGE\\' | translate}}\\n' +\n    '        </div>\\n' +\n    '        <div class=\"layout-row layout-align-start-center\"\\n' +\n    '             ng-if=\"error.message || (error.data && error.data.message)\">\\n' +\n    '            {{error.message || error.data.message}}\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '    <div class=\"pip-footer rp16\">\\n' +\n    '        <div>\\n' +\n    '            <md-button class=\"md-accent m0\" ng-click=\"onOk()\">{{::\\'DISMISS\\' | translate }}</md-button>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</md-dialog>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('information_dialog/information_dialog.html',\n    '<!--\\n' +\n    '@file Information dialog content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-dialog class=\"pip-dialog pip-information-dialog layout-column\"\\n' +\n    '           width=\"400\" md-theme=\"{{theme}}\">\\n' +\n    '    <div class=\"pip-header\">\\n' +\n    '        <h3 class=\"m0\">{{ title | translate }}</h3>\\n' +\n    '    </div>\\n' +\n    '    <div class=\"pip-body\">\\n' +\n    '        <div class=\"pip-content\">\\n' +\n    '            {{ content }}\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '    <div class=\"pip-footer\">\\n' +\n    '        <div>\\n' +\n    '            <md-button class=\"md-accent\" ng-click=\"onOk()\">{{ ok | translate }}</md-button>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</md-dialog>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('options_dialog/options_dialog.html',\n    '<!--\\n' +\n    '@file Options dialog content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-dialog class=\"pip-dialog pip-options-dialog layout-column\"\\n' +\n    '           min-width=\"400\" md-theme=\"{{theme}}\">\\n' +\n    '    <md-dialog-content class=\"pip-body lp0 tp0 rp0 bp24 pip-scroll\">\\n' +\n    '        <div class=\"pip-header\" >\\n' +\n    '            <h3 class=\"m0 bm16 text-title\">{{::title | translate}}</h3>\\n' +\n    '            <div ng-show=\"deletedTitle\" class=\"bp16 tp8 text-subhead1 divider-bottom\">\\n' +\n    '                <md-checkbox ng-model=\"deleted\" aria-label=\"CHECKBOX\" class=\"m0\">{{::deletedTitle | translate}}</md-checkbox>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-content\">\\n' +\n    '            <md-radio-group ng-model=\"selectedOptionName\" class=\"pip-list md-primary\" md-no-ink=\"true\"\\n' +\n    '                            ng-keypress=\"onKeyPress($event)\" tabindex=\"0\">\\n' +\n    '                <div ng-repeat=\"option in options\" class=\"pip-list-item p0\" md-ink-ripple\\n' +\n    '                     ui-event=\"{ click: \\'onOptionSelect($event, option)\\' }\"\\n' +\n    '                     ng-class=\"{ selected: option.name == selectedOptionName }\">\\n' +\n    '                    <div class=\"pip-list-item\">\\n' +\n    '                        <md-icon class=\"pip-option-icon rm12\" md-svg-icon=\"icons:{{option.icon}}\" ng-if=\"option.icon\">\\n' +\n    '                        </md-icon>\\n' +\n    '                        <div class=\"pip-option-title\">\\n' +\n    '                            {{::option.title | translate}}\\n' +\n    '                        </div>\\n' +\n    '                        <md-radio-button ng-value=\"option.name\" tabindex=\"-1\"\\n' +\n    '                                         aria-label=\"{{::option.title | translate}}\">\\n' +\n    '                        </md-radio-button>\\n' +\n    '                    </div>\\n' +\n    '\\n' +\n    '                </div>\\n' +\n    '            </md-radio-group>\\n' +\n    '        </div>\\n' +\n    '    </md-dialog-content>\\n' +\n    '    <div class=\"pip-footer\">\\n' +\n    '        <div>\\n' +\n    '            <md-button class=\"pip-cancel\" ng-click=\"onCancel()\">{{::\\'CANCEL\\' | translate}}</md-button>\\n' +\n    '            <md-button class=\"pip-submit md-accent\" ng-click=\"onSelect()\">{{::applyButtonTitle | translate}}</md-button>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</md-dialog>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('options_dialog/options_dialog_big.html',\n    '<!--\\n' +\n    '@file Options dialog content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-dialog class=\"pip-dialog pip-options-dialog-big layout-column\"\\n' +\n    '           min-width=\"400\" md-theme=\"{{theme}}\">\\n' +\n    '    <md-dialog-content class=\"pip-body p0 pip-scroll\" ng-class=\"{\\'bp24\\': !noActions}\">\\n' +\n    '        <div class=\"pip-header\" ng-class=\"{\\'header-hint\\': noTitle && hint}\">\\n' +\n    '            <h3 class=\"m0 text-title\" ng-if=\"!noTitle\">\\n' +\n    '                {{::title | translate}}\\n' +\n    '            </h3>\\n' +\n    '            <div ng-show=\"noTitle && hint\" class=\"dialog-hint layout-row layout-align-start-center\">\\n' +\n    '                <div class=\"w40\" flex-fixed>\\n' +\n    '                    <md-icon md-svg-icon=\"icons:info-circle-outline\"></md-icon>\\n' +\n    '                </div>\\n' +\n    '                <div>{{::hint | translate}}</div>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-divider\" ng-if=\"!noTitle\"></div>\\n' +\n    '        <div class=\"pip-content\">\\n' +\n    '            <div class=\"h8\" ng-if=\"noTitle && hint\"></div>\\n' +\n    '            <md-list class=\"pip-menu  pip-ref-list w-stretch\"\\n' +\n    '                     pip-selected=\"optionIndex\" index=\"{{optionIndex }}\"\\n' +\n    '                     pip-select=\"onSelected($event)\">\\n' +\n    '\\n' +\n    '                <md-list-item class=\"pip-ref-list-item pip-selectable layout-row layout-align-start-center\"\\n' +\n    '                              ng-class=\"{\\'selected\\' : option.name == selectedOptionName,\\n' +\n    '                              \\'divider-bottom\\': $index != options.length - 1}\"\\n' +\n    '                              md-ink-ripple xxxxng-keypress=\"onKeyPress($event)\"\\n' +\n    '                              ng-keyup=\"onKeyUp($event, $index)\"\\n' +\n    '                              ng-repeat=\"option in options\" >\\n' +\n    '\\n' +\n    '                    <div class=\"pip-content  line-height-string  max-w100-stretch\" ng-click=\"onOptionSelect($event, option)\">\\n' +\n    '                        <p class=\"pip-title  rp24-flex\" ng-if=\"option.title\" style=\"margin-bottom: 4px !important;\">\\n' +\n    '                            {{::option.title | translate}}\\n' +\n    '                        </p>\\n' +\n    '                        <div class=\"pip-subtitle  rp24-flex\"\\n' +\n    '                             style=\"height: inherit\"\\n' +\n    '                             ng-if=\"option.subtitle\">\\n' +\n    '                            {{::option.subtitle | translate}}\\n' +\n    '                        </div>\\n' +\n    '                        <div class=\"pip-subtitle  rp24-flex\"\\n' +\n    '                             style=\"height: inherit\" ng-if=\"option.text\"\\n' +\n    '                             pip-translate-html=\"{{::option.text | translate}}\">\\n' +\n    '                        </div>\\n' +\n    '                    </div>\\n' +\n    '\\n' +\n    '                </md-list-item>\\n' +\n    '\\n' +\n    '            </md-list>\\n' +\n    '            <!--\\n' +\n    '            <md-radio-group ng-model=\"selectedOptionName\" class=\"pip-list md-primary\" md-no-ink=\"true\"\\n' +\n    '                            ng-keypress=\"onKeyPress($event)\" tabindex=\"0\">\\n' +\n    '                <div ng-repeat=\"option in options\" class=\"pip-list-item p0\" md-ink-ripple\\n' +\n    '                     ui-event=\"{ click: \\'onOptionSelect($event, option)\\' }\"\\n' +\n    '                     ng-class=\"{ selected: option.name == selectedOptionName }\">\\n' +\n    '                    <div class=\"pip-list-item\">\\n' +\n    '\\n' +\n    '                        <div class=\"pip-content lp24-flex rp24-flex\" flex>\\n' +\n    '                            <div class=\"pip-title\" ng-if=\"option.title\">\\n' +\n    '                                {{::option.title | translate}}\\n' +\n    '                            </div>\\n' +\n    '                            <div class=\"pip-subtitle\" ng-if=\"option.subtitle\">\\n' +\n    '                                {{::option.subtitle | translate}}\\n' +\n    '                            </div>\\n' +\n    '                            <div class=\"pip-text\" ng-if=\"option.text\">\\n' +\n    '\\n' +\n    '                                <span pip-translate-html=\"{{::option.text | translate}}\"/>\\n' +\n    '                            </div>\\n' +\n    '                        </div>\\n' +\n    '\\n' +\n    '                        <md-radio-button ng-value=\"option.name\" tabindex=\"-1\" class=\"rm24-flex\"\\n' +\n    '                                         aria-label=\"{{::option.title | translate}}\">\\n' +\n    '                        </md-radio-button>\\n' +\n    '                    </div>\\n' +\n    '\\n' +\n    '                </div>\\n' +\n    '            </md-radio-group> -->\\n' +\n    '        </div>\\n' +\n    '        <div class=\"h8\" ng-if=\"noActions\"></div>\\n' +\n    '    </md-dialog-content>\\n' +\n    '\\n' +\n    '    <div class=\"pip-footer\" ng-if=\"!noActions\">\\n' +\n    '        <div>\\n' +\n    '            <md-button class=\"pip-cancel\" ng-click=\"onCancel()\">{{::\\'CANCEL\\' | translate}}</md-button>\\n' +\n    '            <md-button class=\"pip-submit md-accent\" ng-click=\"onSelect()\" style=\"margin-right: -6px\">\\n' +\n    '                {{::applyButtonTitle | translate}}\\n' +\n    '            </md-button>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</md-dialog>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('popover/popover.template.html',\n    '<div ng-if=\"params.templateUrl\" class=\\'pip-popover flex layout-column\\'\\n' +\n    '     ng-click=\"onPopoverClick($event)\" ng-include=\"params.templateUrl\">\\n' +\n    '</div>\\n' +\n    '\\n' +\n    '<div ng-if=\"params.template\" class=\\'pip-popover\\' ng-click=\"onPopoverClick($event)\">\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('progress/routing_progress.html',\n    '<div class=\"pip-routing-progress layout-column layout-align-center-center\"\\n' +\n    '     ng-show=\"$routing || $reset || toolInitialized\">\\n' +\n    '    <div class=\"loader\">\\n' +\n    '        <svg class=\"circular\" viewBox=\"25 25 50 50\">\\n' +\n    '            <circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"2\" stroke-miterlimit=\"10\"/>\\n' +\n    '        </svg>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <img src=\"images/Logo_animation.svg\"  height=\"40\" width=\"40\" class=\"pip-img\">\\n' +\n    '\\n' +\n    '    <md-progress-circular md-diameter=\"96\"\\n' +\n    '                          class=\"fix-ie\"></md-progress-circular>\\n' +\n    '\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('tags/tag_list.html',\n    '<div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{\\'bg-\\' + pipType + \\'-chips\\'}}\"\\n' +\n    '     ng-if=\"pipType && !pipTypeLocal\">\\n' +\n    '\\n' +\n    '    <span>{{pipType.toUpperCase() | translate | uppercase}}</span>\\n' +\n    '</div>\\n' +\n    '<div class=\"pip-chip rm4 pip-type-chip pip-type-chip-left {{\\'bg-\\' + pipType + \\'-chips\\'}}\"\\n' +\n    '     ng-if=\"pipType && pipTypeLocal\">\\n' +\n    '\\n' +\n    '    <span>{{pipTypeLocal.toUpperCase() | translate | uppercase}}</span>\\n' +\n    '</div>\\n' +\n    '<div class=\"pip-chip rm4\" ng-repeat=\"tag in pipTags\">\\n' +\n    '    <span>{{::tag}}</span>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toast/toast.html',\n    '<md-toast class=\"md-action pip-toast\"\\n' +\n    '          ng-class=\"{\\'pip-error\\': toast.type==\\'error\\',\\n' +\n    '          \\'pip-column-toast\\': toast.type == \\'error\\' || toast.actions.length > 1 || actionLenght > 4,\\n' +\n    '          \\'pip-no-action-toast\\': actionLenght == 0}\"\\n' +\n    '          style=\"height:initial; max-height: initial; \">\\n' +\n    '\\n' +\n    '    <span class=\"flex-var m0 pip-text\" ng-bind-html=\"message\"></span>\\n' +\n    '    <div class=\"layout-row layout-align-end-start\" class=\"pip-actions\" ng-if=\"actions.length > 0 || (toast.type==\\'error\\' && toast.error)\">\\n' +\n    '        <md-button class=\"flex-fixed m0 lm8\" ng-if=\"toast.type==\\'error\\' && toast.error\" ng-click=\"onDetails()\">Details</md-button>\\n' +\n    '        <md-button class=\"flex-fixed m0 lm8\"\\n' +\n    '                   ng-click=\"onAction(action)\"\\n' +\n    '                   ng-repeat=\"action in actions\"\\n' +\n    '                   aria-label=\"{{::action| translate}}\">\\n' +\n    '            {{::action| translate}}\\n' +\n    '        </md-button>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '</md-toast>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipBasicControls.Templates');\n} catch (e) {\n  module = angular.module('pipBasicControls.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('toggle_buttons/toggle_buttons.html',\n    '<div class=\"pip-toggle-buttons flex layout-row {{class}}\" pip-selected=\"bufButtonIndex\" pip-enter-space-press=\"enterSpacePress($event)\"\\n' +\n    '     ng-if=\"$mdMedia(\\'gt-xs\\')\">\\n' +\n    '    <md-button tabindex=\"-1\" ng-repeat=\"button in buttons\"\\n' +\n    '               ng-class=\"{\\'md-accent md-raised selected color-accent-bg\\' : currentButtonIndex == $index}\"\\n' +\n    '               ng-attr-style=\"{{ \\'background-color:\\' + (currentButtonIndex == $index ? button.backgroundColor : \\'\\') + \\'!important\\' }}\"\\n' +\n    '               class=\"pip-selectable pip-chip-button flex\" ng-click=\"buttonSelected($index, $event)\"\\n' +\n    '               ng-disabled=\"button.disabled || disabled()\">\\n' +\n    '        {{button.name || button.title | translate}}\\n' +\n    '        <span ng-if=\"button.checked || button.complete || button.filled\" class=\"pip-tagged\">*</span>\\n' +\n    '    </md-button>\\n' +\n    '</div>\\n' +\n    '\\n' +\n    '<md-input-container class=\"md-block\" ng-if=\"$mdMedia(\\'xs\\')\">\\n' +\n    '    <md-select ng-model=\"currentButtonIndex\" ng-disabled=\"disabled()\" aria-label=\"DROPDOWN\" md-on-close=\"buttonSelected(currentButtonIndex)\">\\n' +\n    '        <md-option ng-repeat=\"action in buttons\" value=\"{{ ::$index }}\">\\n' +\n    '            {{ (action.title || action.name) | translate }}\\n' +\n    '            <span ng-if=\"action.checked || action.complete || action.filled\" class=\"pip-tagged\">*</span>\\n' +\n    '        </md-option>\\n' +\n    '    </md-select>\\n' +\n    '</md-input-container>\\n' +\n    '');\n}]);\n})();\n","/**\r\n * @file Color picker control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipColorPicker', ['pipUtils', 'pipFocused', 'pipBasicControls.Templates']);\r\n\r\n    thisModule.directive('pipColorPicker',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    colors: '=pipColors',\r\n                    currentColor: '=ngModel',\r\n                    colorChange: '&ngChange'\r\n                },\r\n                templateUrl: 'color_picker/color_picker.html',\r\n                controller: 'pipColorPickerController'\r\n            };\r\n        }\r\n    );\r\n    thisModule.controller('pipColorPickerController',\r\n        ['$scope', '$element', '$attrs', '$timeout', function ($scope, $element, $attrs, $timeout) {\r\n            var\r\n                DEFAULT_COLORS = ['purple', 'lightgreen', 'green', 'darkred', 'pink', 'yellow', 'cyan'];\r\n\r\n            $scope.class = $attrs.class || '';\r\n\r\n            if (!$scope.colors || _.isArray($scope.colors) && $scope.colors.length === 0) {\r\n                $scope.colors = DEFAULT_COLORS;\r\n            }\r\n\r\n            $scope.currentColor = $scope.currentColor || $scope.colors[0];\r\n            $scope.currentColorIndex = $scope.colors.indexOf($scope.currentColor);\r\n\r\n            $scope.disabled = function () {\r\n                if ($scope.ngDisabled) {\r\n                    return $scope.ngDisabled();\r\n                }\r\n\r\n                return true;\r\n            };\r\n\r\n            $scope.selectColor = function (index) {\r\n                if ($scope.disabled()) {\r\n                    return;\r\n                }\r\n                $scope.currentColorIndex = index;\r\n\r\n                $scope.currentColor = $scope.colors[$scope.currentColorIndex];\r\n\r\n                $timeout(function () {\r\n                    $scope.$apply();\r\n                });\r\n\r\n                if ($scope.colorChange) {\r\n                    $scope.colorChange();\r\n                }\r\n            };\r\n\r\n            $scope.enterSpacePress = function (event) {\r\n                $scope.selectColor(event.index);\r\n            };\r\n        }]\r\n    );\r\n\r\n})(window.angular, window._);\r\n","/**\r\n * @file Confirmation dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipConfirmationDialog',\r\n        ['ngMaterial', 'pipUtils', 'pipTranslate', 'pipBasicControls.Templates']);\r\n\r\n    /* eslint-disable quote-props */\r\n    thisModule.config(['pipTranslateProvider', function (pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'CONFIRM_TITLE': 'Confirm'\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            'CONFIRM_TITLE': 'Подтвердите'\r\n        });\r\n    }]);\r\n    /* eslint-enable quote-props */\r\n\r\n    thisModule.factory('pipConfirmationDialog',\r\n        ['$mdDialog', function ($mdDialog) {\r\n            return {\r\n                show: function (params, successCallback, cancelCallback) {\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'confirmation_dialog/confirmation_dialog.html',\r\n                        controller: 'pipConfirmationDialogController',\r\n                        locals: { params: params },\r\n                        clickOutsideToClose: true\r\n                    })\r\n                    .then(function () {\r\n                        if (successCallback) {\r\n                            successCallback();\r\n                        }\r\n                    }, function () {\r\n                        if (cancelCallback) {\r\n                            cancelCallback();\r\n                        }\r\n                    });\r\n                }\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.controller('pipConfirmationDialogController',\r\n        ['$scope', '$rootScope', '$mdDialog', 'pipTranslate', 'params', function ($scope, $rootScope, $mdDialog, pipTranslate, params) {\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.title = params.title || 'CONFIRM_TITLE';\r\n\r\n            $scope.ok = params.ok || 'OK';\r\n            $scope.cancel = params.cancel || 'CANCEL';\r\n\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n\r\n            $scope.onOk = function () {\r\n                $mdDialog.hide();\r\n            };\r\n        }]\r\n    );\r\n\r\n})(window.angular);\r\n","/**\r\n * @file Confirmation dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n */\r\n\r\n(function (angular) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrorDetailsDialog',\r\n        ['ngMaterial', 'pipUtils', 'pipTranslate', 'pipBasicControls.Templates']);\r\n\r\n    /* eslint-disable quote-props */\r\n    thisModule.config(['pipTranslateProvider', function (pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'ERROR_DETAILS': 'Error details',\r\n            'CODE': 'Code',\r\n            'PATH': 'Path',\r\n            'ERROR': 'Error code',\r\n            'METHOD': 'Method',\r\n            'MESSAGE': 'Message'\r\n\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            'ERROR_DETAILS': 'Детали ошибки',\r\n            'CODE': 'Код',\r\n            'PATH': 'Путь',\r\n            'ERROR': 'Код ошибки',\r\n            'METHOD': 'Метод',\r\n            'MESSAGE': 'Сообщение'\r\n        });\r\n    }]);\r\n    /* eslint-enable quote-props */\r\n\r\n    thisModule.factory('pipErrorDetailsDialog',\r\n        ['$mdDialog', function ($mdDialog) {\r\n            return {\r\n                show: function (params, successCallback, cancelCallback) {\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'error_details_dialog/error_details_dialog.html',\r\n                        controller: 'pipErrorDetailsDialogController',\r\n                        locals: {params: params},\r\n                        clickOutsideToClose: true\r\n                    })\r\n                        .then(function () {\r\n                            if (successCallback) {\r\n                                successCallback();\r\n                            }\r\n                        }, function () {\r\n                            if (cancelCallback) {\r\n                                cancelCallback();\r\n                            }\r\n                        });\r\n                }\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.controller('pipErrorDetailsDialogController',\r\n        ['$scope', '$rootScope', '$mdDialog', 'pipTranslate', 'params', function ($scope, $rootScope, $mdDialog, pipTranslate, params) {\r\n            $scope.theme = $rootScope.$theme\r\n            $scope.error = params.error;\r\n            $scope.ok = params.ok || 'OK';\r\n            $scope.cancel = params.cancel || 'CANCEL';\r\n\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n\r\n            $scope.onOk = function () {\r\n                $mdDialog.hide();\r\n            };\r\n        }]\r\n    );\r\n\r\n})(window.angular);\r\n","/**\r\n * @file Image slider control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular, _, $) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipImageSlider', []);\r\n\r\n    thisModule.directive('pipImageSlider',\r\n        function () {\r\n            return {\r\n                scope: false,\r\n                controller: ['$scope', '$element', '$attrs', '$parse', '$timeout', '$interval', '$pipImageSlider', function ($scope, $element, $attrs, $parse, $timeout, $interval, $pipImageSlider) {\r\n                    var blocks,\r\n                        indexSetter = $parse($attrs.pipImageSliderIndex).assign,\r\n                        index = 0, newIndex,\r\n                        direction,\r\n                        type = $parse($attrs.pipAnimationType)($scope),\r\n                        DEFAULT_INTERVAL = 4500,\r\n                        interval = $parse($attrs.pipAnimationInterval)($scope),\r\n                        timePromises,\r\n                        throttled;\r\n\r\n                    $element.addClass('pip-image-slider');\r\n                    $element.addClass('pip-animation-' + type);\r\n\r\n                    $scope.swipeStart = 0;\r\n                    /*\r\n                     if ($swipe)\r\n                     $swipe.bind($element, {\r\n                     'start': function(coords) {\r\n                     if (coords) $scope.swipeStart = coords.x;\r\n                     else $scope.swipeStart = 0;\r\n                     },\r\n                     'end': function(coords) {\r\n                     var delta;\r\n                     if (coords) {\r\n                     delta = $scope.swipeStart - coords.x;\r\n                     if (delta > 150)  $scope.nextBlock();\r\n                     if (delta < -150)  $scope.prevBlock();\r\n                     $scope.swipeStart = 0;\r\n                     } else $scope.swipeStart = 0;\r\n                     }\r\n                     });\r\n                     */\r\n                    setIndex();\r\n\r\n                    $timeout(function () {\r\n                        blocks = $element.find('.pip-animation-block');\r\n                        if (blocks.length > 0) {\r\n                            $(blocks[0]).addClass('pip-show');\r\n                        }\r\n                    });\r\n\r\n                    startInterval();\r\n                    throttled = _.throttle(function () {\r\n                        $pipImageSlider.toBlock(type, blocks, index, newIndex, direction);\r\n                        index = newIndex;\r\n                        setIndex();\r\n                    }, 600);\r\n\r\n                    $scope.nextBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                        direction = 'next';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.prevBlock = function () {\r\n                        restartInterval();\r\n                        newIndex = index - 1 < 0 ? blocks.length - 1 : index - 1;\r\n                        direction = 'prev';\r\n                        throttled();\r\n                    };\r\n\r\n                    $scope.slideTo = function (nextIndex) {\r\n                        if (nextIndex === index || nextIndex > blocks.length - 1) {\r\n                            return;\r\n                        }\r\n\r\n                        restartInterval();\r\n                        newIndex = nextIndex;\r\n                        direction = nextIndex > index ? 'next' : 'prev';\r\n                        throttled();\r\n                    };\r\n\r\n                    function setIndex() {\r\n                        if (indexSetter) {\r\n                            indexSetter($scope, index);\r\n                        }\r\n                    }\r\n\r\n                    function startInterval() {\r\n                        timePromises = $interval(function () {\r\n                            newIndex = index + 1 === blocks.length ? 0 : index + 1;\r\n                            direction = 'next';\r\n                            throttled();\r\n                        }, interval || DEFAULT_INTERVAL);\r\n                    }\r\n\r\n                    function stopInterval() {\r\n                        $interval.cancel(timePromises);\r\n                    }\r\n\r\n                    $element.on('$destroy', function () {\r\n                        stopInterval();\r\n                    });\r\n\r\n                    function restartInterval() {\r\n                        stopInterval();\r\n                        startInterval();\r\n                    }\r\n                }]\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.directive('pipSliderButton',\r\n        function () {\r\n            return {\r\n                scope: {},\r\n                controller: ['$scope', '$element', '$parse', '$attrs', function ($scope, $element, $parse, $attrs) {\r\n                    var type = $parse($attrs.pipButtonType)($scope),\r\n                        sliderId = $parse($attrs.pipSliderId)($scope);\r\n\r\n                    $element.on('click', function () {\r\n                        if (!sliderId || !type) {\r\n                            return;\r\n                        }\r\n\r\n                        angular.element(document.getElementById(sliderId)).scope()[type + 'Block']();\r\n                    });\r\n                }]\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.directive('pipSliderIndicator',\r\n        function () {\r\n            return {\r\n                scope: false,\r\n                controller: ['$scope', '$element', '$parse', '$attrs', function ($scope, $element, $parse, $attrs) {\r\n                    var sliderId = $parse($attrs.pipSliderId)($scope),\r\n                        slideTo = $parse($attrs.pipSlideTo)($scope);\r\n\r\n                    $element.css('cursor', 'pointer');\r\n                    $element.on('click', function () {\r\n                        if (!sliderId || slideTo && slideTo < 0) {\r\n                            return;\r\n                        }\r\n\r\n                        angular.element(document.getElementById(sliderId)).scope().slideTo(slideTo);\r\n                    });\r\n                }]\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.service('$pipImageSlider',\r\n        ['$timeout', function ($timeout) {\r\n\r\n            var ANIMATION_DURATION = 550;\r\n\r\n            return {\r\n                nextCarousel: nextCarousel,\r\n                prevCarousel: prevCarousel,\r\n                toBlock: toBlock\r\n            };\r\n\r\n            function nextCarousel(nextBlock, prevBlock) {\r\n                nextBlock.removeClass('animated').addClass('pip-next');\r\n\r\n                $timeout(function () {\r\n                    nextBlock.addClass('animated').addClass('pip-show').removeClass('pip-next');\r\n                    prevBlock.addClass('animated').removeClass('pip-show');\r\n                }, 100);\r\n            }\r\n\r\n            function prevCarousel(nextBlock, prevBlock) {\r\n                nextBlock.removeClass('animated');\r\n\r\n                $timeout(function () {\r\n                    nextBlock.addClass('animated').addClass('pip-show');\r\n                    prevBlock.addClass('animated').addClass('pip-next').removeClass('pip-show');\r\n\r\n                    $timeout(function () {\r\n                        prevBlock.removeClass('pip-next').removeClass('animated');\r\n                    }, ANIMATION_DURATION - 100);\r\n                }, 100);\r\n            }\r\n\r\n            function toBlock(type, blocks, oldIndex, nextIndex, direction) {\r\n                var prevBlock = $(blocks[oldIndex]),\r\n                    blockIndex = nextIndex,\r\n                    nextBlock = $(blocks[blockIndex]);\r\n\r\n                if (type === 'carousel') {\r\n                    $(blocks).removeClass('pip-next').removeClass('pip-prev');\r\n\r\n                    if (direction && direction === 'prev') {\r\n                        prevCarousel(nextBlock, prevBlock);\r\n                    }\r\n                    if (direction && direction === 'next') {\r\n                        nextCarousel(nextBlock, prevBlock);\r\n                    }\r\n                    if ((!direction || direction !== 'next' && direction !== 'prev') &&\r\n                        nextIndex && nextIndex < oldIndex) {\r\n                        prevCarousel(nextBlock, prevBlock);\r\n                    } else {\r\n                        nextCarousel(nextBlock, prevBlock);\r\n                    }\r\n                } else {\r\n                    prevBlock.addClass('animated').removeClass('pip-show');\r\n                    nextBlock.addClass('animated').addClass('pip-show');\r\n                }\r\n            }\r\n        }]\r\n    );\r\n\r\n})(window.angular, window._, window.jQuery);\r\n","/**\r\n * @file Information dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n */\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipInformationDialog',\r\n        ['ngMaterial', 'pipUtils', 'pipTranslate', 'pipBasicControls.Templates']);\r\n\r\n    /* eslint-disable quote-props */\r\n    thisModule.config(['pipTranslateProvider', function (pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'INFORMATION_TITLE': 'Information'\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            'INFORMATION_TITLE': 'Информация'\r\n        });\r\n    }]);\r\n    /* eslint-enable quote-props */\r\n\r\n    thisModule.factory('pipInformationDialog',\r\n        ['$mdDialog', function ($mdDialog) {\r\n            return {\r\n                show: function (params, callback) {\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'information_dialog/information_dialog.html',\r\n                        controller: 'pipInformationDialogController',\r\n                        locals: {params: params},\r\n                        clickOutsideToClose: true\r\n                    })\r\n                        .then(function () {\r\n                            if (callback) {\r\n                                callback();\r\n                            }\r\n                        });\r\n                }\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.controller('pipInformationDialogController',\r\n        ['$scope', '$rootScope', '$mdDialog', 'pipTranslate', 'params', 'pipUtils', function ($scope, $rootScope, $mdDialog, pipTranslate, params, pipUtils) {\r\n            var content, item;\r\n\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.title = params.title || 'INFORMATION_TITLE';\r\n            content = pipTranslate.translate(params.message);\r\n            if (params.item) {\r\n                item = _.truncate(params.item, 25);\r\n                content = pipUtils.sprintf(content, item);\r\n            }\r\n            $scope.content = content;\r\n            $scope.ok = params.ok || 'OK';\r\n\r\n            $scope.onOk = function () {\r\n                $mdDialog.hide();\r\n            };\r\n        }]\r\n    );\r\n\r\n})(window.angular, window._);\r\n","/**\r\n * @file Markdown control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Move css styles under control\r\n * - Improve samples in sampler app\r\n */\r\n\r\n(function (angular, marked, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipMarkdown', ['ngSanitize', 'pipUtils', 'pipTranslate']);\r\n\r\n    /* eslint-disable quote-props */\r\n    thisModule.config(['pipTranslateProvider', function (pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'MARKDOWN_ATTACHMENTS': 'Attachments:',\r\n            'checklist': 'Checklist',\r\n            'documents': 'Documents',\r\n            'pictures': 'Pictures',\r\n            'location': 'Location',\r\n            'time': 'Time'\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            'MARKDOWN_ATTACHMENTS': 'Вложения:',\r\n            'checklist': 'Список',\r\n            'documents': 'Документы',\r\n            'pictures': 'Изображения',\r\n            'location': 'Местонахождение',\r\n            'time': 'Время'\r\n        });\r\n    }]);\r\n    /* eslint-enable quote-props */\r\n\r\n    thisModule.directive('pipMarkdown',\r\n        ['$parse', 'pipUtils', 'pipTranslate', function ($parse, pipUtils, pipTranslate) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                link: function ($scope, $element, $attrs) {\r\n                    var\r\n                        textGetter = $parse($attrs.pipText),\r\n                        listGetter = $parse($attrs.pipList),\r\n                        clampGetter = $parse($attrs.pipLineCount);\r\n\r\n                    function describeAttachments(array) {\r\n                        var attachString = '',\r\n                            attachTypes = [];\r\n\r\n                        _.each(array, function (attach) {\r\n                            if (attach.type && attach.type !== 'text') {\r\n                                if (attachString.length === 0) {\r\n                                    attachString = pipTranslate.translate('MARKDOWN_ATTACHMENTS');\r\n                                }\r\n\r\n                                if (attachTypes.indexOf(attach.type) < 0) {\r\n                                    attachTypes.push(attach.type);\r\n                                    attachString += attachTypes.length > 1 ? ', ' : ' ';\r\n                                    attachString += pipTranslate.translate(attach.type);\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        return attachString;\r\n                    }\r\n\r\n                    function bindText(value) {\r\n                        var textString, isClamped, height, options, obj;\r\n\r\n                        if (_.isArray(value)) {\r\n                            obj = _.find(value, function (item) {\r\n                                return item.type === 'text' && item.text;\r\n                            });\r\n\r\n                            textString = obj ? obj.text : describeAttachments(value);\r\n                        } else {\r\n                            textString = value;\r\n                        }\r\n\r\n                        isClamped = $attrs.pipLineCount && _.isNumber(clampGetter());\r\n                        isClamped = isClamped && textString && textString.length > 0;\r\n                        options = {\r\n                            gfm: true,\r\n                            tables: true,\r\n                            breaks: true,\r\n                            sanitize: true,\r\n                            pedantic: true,\r\n                            smartLists: true,\r\n                            smartypents: false\r\n                        };\r\n                        textString = marked(textString || '', options);\r\n                        if (isClamped) {\r\n                            height = 1.5 * clampGetter();\r\n                        }\r\n                        // Assign value as HTML\r\n                        $element.html('<div' + (isClamped ? listGetter() ? 'class=\"pip-markdown-content ' +\r\n                            'pip-markdown-list\" style=\"max-height: ' + height + 'em\">'\r\n                                : ' class=\"pip-markdown-content\" style=\"max-height: ' + height + 'em\">' : listGetter()\r\n                                ? ' class=\"pip-markdown-list\">' : '>') + textString + '</div>');\r\n                        $element.find('a').attr('target', 'blank');\r\n                        if (!listGetter() && isClamped) {\r\n                            $element.append('<div class=\"pip-gradient-block\"></div>');\r\n                        }\r\n                    }\r\n\r\n                    // Fill the text\r\n                    bindText(textGetter($scope));\r\n\r\n                    // Also optimization to avoid watch if it is unnecessary\r\n                    if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch(textGetter, function (newValue) {\r\n                            bindText(newValue);\r\n                        });\r\n                    }\r\n\r\n                    $scope.$on('pipWindowResized', function () {\r\n                        bindText(textGetter($scope));\r\n                    });\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-markdown');\r\n                }\r\n            };\r\n        }]\r\n    );\r\n\r\n})(window.angular, window.marked, window._);\r\n\r\n","/**\r\n * @file Options dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n * - Remove deleted hack in the controller\r\n */\r\n\r\n(function (angular, $, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipOptionsDialog',\r\n        ['ngMaterial', 'pipUtils', 'pipTranslate', 'pipBasicControls.Templates']);\r\n\r\n    /* eslint-disable quote-props */\r\n    thisModule.config(['pipTranslateProvider', function (pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'OPTIONS_TITLE': 'Choose Option'\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            'OPTIONS_TITLE': 'Выберите опцию'\r\n        });\r\n    }]);\r\n    /* eslint-enable quote-props */\r\n\r\n    thisModule.factory('pipOptionsDialog',\r\n        ['$mdDialog', function ($mdDialog) {\r\n            return {\r\n                show: function (params, successCallback, cancelCallback) {\r\n                    if (params.event) {\r\n                        params.event.stopPropagation();\r\n                        params.event.preventDefault();\r\n                    }\r\n\r\n                    function focusToggleControl() {\r\n                        if (params.event && params.event.currentTarget) {\r\n                            params.event.currentTarget.focus();\r\n                        }\r\n                    }\r\n\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'options_dialog/options_dialog.html',\r\n                        controller: 'pipOptionsDialogController',\r\n                        locals: {params: params},\r\n                        clickOutsideToClose: true\r\n                    })\r\n                        .then(function (option) {\r\n                            focusToggleControl();\r\n\r\n                            if (successCallback) {\r\n                                successCallback(option);\r\n                            }\r\n                        }, function () {\r\n                            focusToggleControl();\r\n                            if (cancelCallback) {\r\n                                cancelCallback();\r\n                            }\r\n                        });\r\n                }\r\n            };\r\n        }]\r\n    );\r\n    thisModule.controller('pipOptionsDialogController',\r\n        ['$scope', '$rootScope', '$mdDialog', 'params', function ($scope, $rootScope, $mdDialog, params) {\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.title = params.title || 'OPTIONS_TITLE';\r\n            $scope.options = params.options;\r\n            $scope.selectedOption = _.find(params.options, {active: true}) || {};\r\n            $scope.selectedOptionName = $scope.selectedOption.name;\r\n            $scope.applyButtonTitle = params.appleButtonTitle || 'SELECT';\r\n            $scope.deleted = params.deleted;\r\n            $scope.deletedTitle = params.deletedTitle;\r\n            $scope.onOptionSelect = function (event, option) {\r\n                event.stopPropagation();\r\n                $scope.selectedOptionName = option.name;\r\n            };\r\n            $scope.onKeyPress = function (event) {\r\n                if (event.keyCode === 32 || event.keyCode === 13) {\r\n                    event.stopPropagation();\r\n                    event.preventDefault();\r\n                    $scope.onSelect();\r\n                }\r\n            };\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n            $scope.onSelect = function () {\r\n                var option;\r\n\r\n                option = _.find(params.options, {name: $scope.selectedOptionName});\r\n                $mdDialog.hide({option: option, deleted: $scope.deleted});\r\n            };\r\n            // Setting focus to input control\r\n            function focusInput() {\r\n                var list;\r\n\r\n                list = $('.pip-options-dialog .pip-list');\r\n                list.focus();\r\n            }\r\n\r\n            setTimeout(focusInput, 500);\r\n        }]\r\n    );\r\n\r\n})(window.angular, window.jQuery, window._);\r\n","/**\r\n * @file Options dialog\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Improve sample in sampler app\r\n * - Remove deleted hack in the controller\r\n */\r\n\r\n(function (angular, $, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipOptionsBigDialog',\r\n        ['ngMaterial', 'pipUtils', 'pipTranslate', 'pipBasicControls.Templates']);\r\n\r\n    /* eslint-disable quote-props */\r\n    thisModule.config(['pipTranslateProvider', function (pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'OPTIONS_TITLE': 'Choose Option'\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            'OPTIONS_TITLE': 'Выберите опцию'\r\n        });\r\n    }]);\r\n    /* eslint-enable quote-props */\r\n\r\n    thisModule.factory('pipOptionsBigDialog',\r\n        ['$mdDialog', function ($mdDialog) {\r\n            return {\r\n                show: function (params, successCallback, cancelCallback) {\r\n                    if (params.event) {\r\n                        params.event.stopPropagation();\r\n                        params.event.preventDefault();\r\n                    }\r\n\r\n                    function focusToggleControl() {\r\n                        if (params.event && params.event.currentTarget) {\r\n                            params.event.currentTarget.focus();\r\n                        }\r\n                    }\r\n\r\n                    $mdDialog.show({\r\n                        targetEvent: params.event,\r\n                        templateUrl: 'options_dialog/options_dialog_big.html',\r\n                        controller: 'pipOptionsDialogBigController',\r\n                        locals: {params: params},\r\n                        clickOutsideToClose: true\r\n                    })\r\n                        .then(function (option) {\r\n                            focusToggleControl();\r\n\r\n                            if (successCallback) {\r\n                                successCallback(option);\r\n                            }\r\n                        }, function () {\r\n                            focusToggleControl();\r\n                            if (cancelCallback) {\r\n                                cancelCallback();\r\n                            }\r\n                        });\r\n                }\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.controller('pipOptionsDialogBigController',\r\n        ['$scope', '$rootScope', '$mdDialog', 'params', function ($scope, $rootScope, $mdDialog, params) {\r\n            $scope.theme = $rootScope.$theme;\r\n            $scope.title = params.title || 'OPTIONS_TITLE';\r\n            $scope.options = params.options;\r\n            $scope.noActions = params.noActions || false;\r\n            $scope.noTitle = params.noTitle || false;\r\n            $scope.hint = params.hint || '';\r\n            $scope.selectedOption = _.find(params.options, {active: true}) || {};\r\n            $scope.selectedOptionName = $scope.selectedOption.name;\r\n            $scope.optionIndex = _.findIndex(params.options, $scope.selectedOption);\r\n            $scope.applyButtonTitle = params.applyButtonTitle || 'SELECT';\r\n\r\n            $scope.deleted = params.deleted;\r\n            $scope.deletedTitle = params.deletedTitle;\r\n\r\n            $scope.onOptionSelect = function (event, option) {\r\n                event.stopPropagation();\r\n                $scope.selectedOptionName = option.name;\r\n\r\n                if ($scope.noActions) {\r\n                    $scope.onSelect();\r\n                }\r\n            };\r\n\r\n            $scope.onSelected = function () {\r\n                $scope.selectedOptionName = $scope.options[$scope.optionIndex].name;\r\n\r\n                if ($scope.noActions) {\r\n                    // $scope.onSelect();\r\n                }\r\n            };\r\n\r\n            $scope.onKeyUp = function (event, index) {\r\n                if (event.keyCode === 32 || event.keyCode === 13) {\r\n                    event.stopPropagation();\r\n                    event.preventDefault();\r\n                    if (index !== undefined && index > -1 && index < $scope.options.length) {\r\n                        $scope.selectedOptionName = $scope.options[index].name;\r\n                        $scope.onSelect();\r\n                    }\r\n                }\r\n            };\r\n            $scope.onCancel = function () {\r\n                $mdDialog.cancel();\r\n            };\r\n            $scope.onSelect = function () {\r\n                var option;\r\n\r\n                option = _.find($scope.options, {name: $scope.selectedOptionName});\r\n                $mdDialog.hide({option: option, deleted: $scope.deleted});\r\n            };\r\n            // Setting focus to input control\r\n            function focusInput() {\r\n                var list;\r\n\r\n                list = $('.pip-options-dialog .pip-list');\r\n                list.focus();\r\n            }\r\n\r\n            setTimeout(focusInput, 500);\r\n        }]\r\n    );\r\n\r\n})(window.angular, window.jQuery, window._);\r\n","/**\r\n * @file Popover control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular, $, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipPopover', ['pipAssert']);\r\n\r\n    thisModule.directive('pipPopover', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: true,\r\n            templateUrl: 'popover/popover.template.html',\r\n            controller: ['$scope', '$rootScope', '$element', '$timeout', '$compile', function ($scope, $rootScope, $element, $timeout, $compile) {\r\n                var backdropElement, content;\r\n\r\n                backdropElement = $('.pip-popover-backdrop');\r\n                backdropElement.on('click keydown scroll', backdropClick);\r\n                backdropElement.addClass($scope.params.responsive !== false ? 'pip-responsive' : '');\r\n\r\n                $timeout(function () {\r\n                    position();\r\n                    if ($scope.params.template) {\r\n                        content = $compile($scope.params.template)($scope);\r\n                        $element.find('.pip-popover').append(content);\r\n                    }\r\n\r\n                    init();\r\n                });\r\n\r\n                $timeout(function () {\r\n                    calcHeight();\r\n                }, 200);\r\n\r\n                $scope.onPopoverClick = onPopoverClick;\r\n                $scope = _.defaults($scope, $scope.$parent);    // eslint-disable-line \r\n\r\n                $rootScope.$on('pipPopoverResize', onResize);\r\n                $(window).resize(onResize);\r\n\r\n                function init() {\r\n                    backdropElement.addClass('opened');\r\n                    $('.pip-popover-backdrop').focus();\r\n                    if ($scope.params.timeout) {\r\n                        $timeout(function () {\r\n                            closePopover();\r\n                        }, $scope.params.timeout);\r\n                    }\r\n                }\r\n\r\n                function backdropClick() {\r\n                    if ($scope.params.cancelCallback) {\r\n                        $scope.params.cancelCallback();\r\n                    }\r\n\r\n                    closePopover();\r\n                }\r\n\r\n                function closePopover() {\r\n                    backdropElement.removeClass('opened');\r\n                    $timeout(function () {\r\n                        backdropElement.remove();\r\n                    }, 100);\r\n                }\r\n\r\n                function onPopoverClick($e) {\r\n                    $e.stopPropagation();\r\n                }\r\n\r\n                function position() {\r\n                    if ($scope.params.element) {\r\n                        var element = $($scope.params.element),\r\n                            pos = element.offset(),\r\n                            width = element.width(),\r\n                            height = element.height(),\r\n                            docWidth = $(document).width(),\r\n                            docHeight = $(document).height(),\r\n                            popover = backdropElement.find('.pip-popover');\r\n\r\n                        if (pos) {\r\n                            popover\r\n                                .css('max-width', docWidth - (docWidth - pos.left))\r\n                                .css('max-height', docHeight - (pos.top + height) - 32, 0)\r\n                                .css('left', pos.left - popover.width() + width / 2)\r\n                                .css('top', pos.top + height + 16);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                function calcHeight() {\r\n                    if ($scope.params.calcHeight === false) { return; }\r\n\r\n                    var popover = backdropElement.find('.pip-popover'),\r\n                        title = popover.find('.pip-title'),\r\n                        footer = popover.find('.pip-footer'),\r\n                        content = popover.find('.pip-content'),\r\n                        contentHeight = popover.height() - title.outerHeight(true) - footer.outerHeight(true);\r\n\r\n                    content.css('max-height', Math.max(contentHeight, 0) + 'px').css('box-sizing', 'border-box');\r\n                }\r\n\r\n                function onResize() {\r\n                    backdropElement.find('.pip-popover').find('.pip-content').css('max-height', '100%');\r\n                    position();\r\n                    calcHeight();\r\n                }\r\n            }]\r\n        };\r\n    });\r\n\r\n    thisModule.service('$pipPopover',\r\n        ['$compile', '$rootScope', '$timeout', function ($compile, $rootScope, $timeout) {\r\n            var popoverTemplate;\r\n\r\n            popoverTemplate = \"<div class='pip-popover-backdrop {{ params.class }}' ng-controller='params.controller'\" +\r\n                \" tabindex='1'> <pip-popover pip-params='params'> </pip-popover> </div>\";\r\n\r\n            return {\r\n                show: onShow,\r\n                hide: onHide,\r\n                resize: onResize\r\n            };\r\n\r\n            function onShow(p) {\r\n                var element, scope, params, content;\r\n\r\n                element = $('body');\r\n                if (element.find('md-backdrop').length > 0) { return; }\r\n                onHide();\r\n                scope = $rootScope.$new();\r\n                params = p && _.isObject(p) ? p : {};\r\n                scope.params = params;\r\n                scope.locals = params.locals;\r\n                content = $compile(popoverTemplate)(scope);\r\n                element.append(content);\r\n            }\r\n\r\n            function onHide() {\r\n                var backdropElement = $('.pip-popover-backdrop');\r\n\r\n                backdropElement.removeClass('opened');\r\n                $timeout(function () {\r\n                    backdropElement.remove();\r\n                }, 100);\r\n            }\r\n\r\n            function onResize() {\r\n                $rootScope.$broadcast('pipPopoverResize');\r\n            }\r\n\r\n        }]\r\n    );\r\n\r\n})(window.angular, window.jQuery, window._);\r\n","/**\r\n * @file Routing progress control\r\n * @description\r\n * This progress control is enabled by ui router\r\n * while switching between pages\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipRoutingProgress', ['ngMaterial']);\r\n\r\n    thisModule.directive('pipRoutingProgress', function () {\r\n        return {\r\n            restrict: 'EA',\r\n            replace: true,\r\n            templateUrl: 'progress/routing_progress.html'\r\n        };\r\n    });\r\n\r\n})(window.angular);\r\n","/**\r\n * @file Refresh button control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipRefreshButton', ['ngMaterial']);\r\n\r\n    thisModule.directive('pipRefreshButton',\r\n        ['$parse', function ($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                template: String() +\r\n                '<md-button class=\"pip-refresh-button\" tabindex=\"-1\" ng-click=\"onClick($event)\" aria-label=\"REFRESH\">' +\r\n                '<md-icon md-svg-icon=\"icons:refresh\"></md-icon>' +\r\n                '<span class=\"pip-refresh-text\"></span>' +\r\n                '</md-button>',\r\n                replace: false,\r\n                link: function ($scope, $element, $attrs) {\r\n                    var width, text, show,\r\n                        textGetter = $parse($attrs.pipText),\r\n                        visibleGetter = $parse($attrs.pipVisible),\r\n                        refreshGetter = $parse($attrs.pipRefresh),\r\n                        $button = $element.children('.md-button'),\r\n                        $text = $button.children('.pip-refresh-text');\r\n\r\n                    show = function () {\r\n                        // Set a new text\r\n                        text = textGetter($scope);\r\n                        $text.text(text);\r\n\r\n                        // Show button\r\n                        $button.show();\r\n\r\n                        // Adjust position\r\n                        width = $button.width();\r\n                        $button.css('margin-left', '-' + width / 2 + 'px');\r\n                    };\r\n\r\n                    function hide() {\r\n                        $button.hide();\r\n                    }\r\n\r\n                    $scope.onClick = function () {\r\n                        refreshGetter($scope);\r\n                    };\r\n\r\n                    $scope.$watch(visibleGetter, function (newValue) {\r\n                        if (newValue) {\r\n                            show();\r\n                        } else {\r\n                            hide();\r\n                        }\r\n                    });\r\n\r\n                    $scope.$watch(textGetter, function (newValue) {\r\n                        $text.text(newValue);\r\n                    });\r\n                }\r\n            };\r\n        }]\r\n    );\r\n\r\n})(window.angular);\r\n\r\n","/**\r\n * @file Tag list control\r\n * @copyright Digital Living Software Corp. 2014-2015\r\n * @todo\r\n * - Improve samples in sampler app\r\n * - What's pipType and pipTypeLocal? Give better name\r\n * - Do not use ng-if, instead generate template statically\r\n */\r\n\r\n(function (angular) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTagList', ['pipCore']);\r\n\r\n    /**\r\n     * pipTags - set of tags\r\n     * pipType - additional type tag\r\n     * pipTypeLocal - additional translated type tag\r\n     */\r\n    thisModule.directive('pipTagList',\r\n        ['$parse', function ($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipTags: '=',\r\n                    pipType: '=',\r\n                    pipTypeLocal: '='\r\n                },\r\n                templateUrl: 'tags/tag_list.html',\r\n                controller: ['$scope', '$element', '$attrs', 'pipUtils', function ($scope, $element, $attrs, pipUtils) {\r\n                    var tagsGetter;\r\n\r\n                    tagsGetter = $parse($attrs.pipTags);\r\n                    $element.css('display', 'block');\r\n                    // Set tags\r\n                    $scope.tags = tagsGetter($scope);\r\n\r\n                    // Also optimization to avoid watch if it is unnecessary\r\n                    if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                        $scope.$watch(tagsGetter, function () {\r\n                            $scope.tags = tagsGetter($scope);\r\n                        });\r\n                    }\r\n\r\n                    // Add class\r\n                    $element.addClass('pip-tag-list');\r\n                }]\r\n            };\r\n        }]\r\n    );\r\n\r\n})(window.angular);\r\n\r\n","/**\r\n * @file Toasts management service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo Replace ngAudio with alternative service\r\n * \r\n * toast.error structure:\r\n * data: {\r\n *  code: error code,\r\n *  path: \r\n *  error: \r\n *  method:\r\n *  message: \r\n * }\r\n */\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n    var thisModule = angular.module('pipToasts', ['pipTranslate', 'ngMaterial', 'pipAssert']);\r\n\r\n    thisModule.controller('pipToastController',\r\n        ['$scope', '$mdToast', 'toast', 'pipErrorDetailsDialog', function ($scope, $mdToast, toast, pipErrorDetailsDialog) {\r\n            // if (toast.type && sounds['toast_' + toast.type]) {\r\n            //     sounds['toast_' + toast.type].play();\r\n            // }\r\n\r\n            $scope.message = toast.message;\r\n            $scope.actions = toast.actions;\r\n            $scope.toast = toast;\r\n\r\n            if (toast.actions.length === 0) {\r\n                $scope.actionLenght = 0;\r\n            } else if (toast.actions.length === 1) {\r\n                $scope.actionLenght = toast.actions[0].toString().length;\r\n            } else {\r\n                $scope.actionLenght = null;\r\n            }\r\n\r\n            $scope.onDetails = function () {\r\n                $mdToast.hide();\r\n                pipErrorDetailsDialog.show(\r\n                    {\r\n                        error: $scope.toast.error,\r\n                        ok: 'Ok'\r\n                    },\r\n                    angular.noop,\r\n                    angular.noop\r\n                );\r\n            };\r\n\r\n            $scope.onAction = function (action) {\r\n                $mdToast.hide(\r\n                    {\r\n                        action: action,\r\n                        id: toast.id,\r\n                        message: toast.message\r\n                    });\r\n            };\r\n        }]\r\n    );\r\n\r\n    thisModule.service('pipToasts',\r\n        ['$rootScope', '$mdToast', 'pipAssert', function ($rootScope, $mdToast, pipAssert) {\r\n            var\r\n                SHOW_TIMEOUT = 20000,\r\n                SHOW_TIMEOUT_NOTIFICATIONS = 20000,\r\n                toasts = [],\r\n                currentToast,\r\n                sounds = {};\r\n\r\n            /** pre-load sounds for notifications */\r\n                // sounds['toast_error'] = ngAudio.load('sounds/fatal.mp3');\r\n                // sounds['toast_notification'] = ngAudio.load('sounds/error.mp3');\r\n                // sounds['toast_message'] = ngAudio.load('sounds/warning.mp3');\r\n\r\n                // Remove error toasts when page is changed\r\n            $rootScope.$on('$stateChangeSuccess', onStateChangeSuccess);\r\n            $rootScope.$on('pipSessionClosed', onClearToasts);\r\n\r\n            return {\r\n                showNotification: showNotification,\r\n                showMessage: showMessage,\r\n                showError: showError,\r\n                hideAllToasts: hideAllToasts,\r\n                clearToasts: clearToasts,\r\n                removeToastsById: removeToastsById,\r\n                getToastById: getToastById\r\n            };\r\n\r\n            // Take the next from queue and show it\r\n            function showNextToast() {\r\n                var toast;\r\n\r\n                if (toasts.length > 0) {\r\n                    toast = toasts[0];\r\n                    toasts.splice(0, 1);\r\n                    showToast(toast);\r\n                }\r\n            }\r\n\r\n            // Show toast\r\n            function showToast(toast) {\r\n                currentToast = toast;\r\n\r\n                $mdToast.show({\r\n                    templateUrl: 'toast/toast.html',\r\n                    hideDelay: toast.duration || SHOW_TIMEOUT,\r\n                    position: 'bottom left',\r\n                    controller: 'pipToastController',\r\n                    locals: {\r\n                        toast: currentToast,\r\n                        sounds: sounds\r\n                    }\r\n                })\r\n                    .then(\r\n                    function showToastOkResult(action) {\r\n                        if (currentToast.successCallback) {\r\n                            currentToast.successCallback(action);\r\n                        }\r\n                        currentToast = null;\r\n                        showNextToast();\r\n                    },\r\n                    function showToastCancelResult(action) {\r\n                        if (currentToast.cancelCallback) {\r\n                            currentToast.cancelCallback(action);\r\n                        }\r\n                        currentToast = null;\r\n                        showNextToast();\r\n                    }\r\n                );\r\n            }\r\n\r\n            function addToast(toast) {\r\n\r\n                if (currentToast && toast.type !== 'error') {\r\n                    toasts.push(toast);\r\n                } else {\r\n                    showToast(toast);\r\n                }\r\n            }\r\n\r\n            function removeToasts(type) {\r\n                var result = [];\r\n\r\n                _.each(toasts, function (toast) {\r\n                    if (!toast.type || toast.type !== type) {\r\n                        result.push(toast);\r\n                    }\r\n                });\r\n                toasts = _.cloneDeep(result);\r\n            }\r\n\r\n            function removeToastsById(id) {\r\n                _.remove(toasts, {id: id});\r\n            }\r\n\r\n            function getToastById(id) {\r\n                return _.find(toasts, {id: id});\r\n            }\r\n\r\n            function onStateChangeSuccess() {\r\n                toasts = _.reject(toasts, function (toast) {\r\n                    return toast.type === 'error';\r\n                });\r\n\r\n                if (currentToast && currentToast.type === 'error') {\r\n                    $mdToast.cancel();\r\n                    showNextToast();\r\n                }\r\n            }\r\n\r\n            function onClearToasts() {\r\n                clearToasts();\r\n            }\r\n\r\n            // Show new notification toast at the top right\r\n            function showNotification(message, actions, successCallback, cancelCallback, id) {\r\n                pipAssert.isDef(message, 'pipToasts.showNotification: message should be defined');\r\n                pipAssert.isString(message, 'pipToasts.showNotification: message should be a string');\r\n                pipAssert.isArray(actions || [], 'pipToasts.showNotification: actions should be an array');\r\n                if (successCallback) {\r\n                    pipAssert.isFunction(successCallback, 'showNotification: successCallback should be a function');\r\n                }\r\n                if (cancelCallback) {\r\n                    pipAssert.isFunction(cancelCallback, 'showNotification: cancelCallback should be a function');\r\n                }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    type: 'notification',\r\n                    message: message,\r\n                    actions: actions || ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback,\r\n                    duration: SHOW_TIMEOUT_NOTIFICATIONS\r\n                });\r\n            }\r\n\r\n            // Show new message toast at the top right\r\n            function showMessage(message, successCallback, cancelCallback, id) {\r\n                pipAssert.isDef(message, 'pipToasts.showMessage: message should be defined');\r\n                pipAssert.isString(message, 'pipToasts.showMessage: message should be a string');\r\n                if (successCallback) {\r\n                    pipAssert.isFunction(successCallback, 'pipToasts.showMessage:successCallback should be a function');\r\n                }\r\n                if (cancelCallback) {\r\n                    pipAssert.isFunction(cancelCallback, 'pipToasts.showMessage: cancelCallback should be a function');\r\n                }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    type: 'message',\r\n                    message: message,\r\n                    actions: ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback\r\n                });\r\n            }\r\n\r\n            // Show error toast at the bottom right after error occured\r\n            function showError(message, successCallback, cancelCallback, id, error) {\r\n                pipAssert.isDef(message, 'pipToasts.showError: message should be defined');\r\n                pipAssert.isString(message, 'pipToasts.showError: message should be a string');\r\n                if (successCallback) {\r\n                    pipAssert.isFunction(successCallback, 'pipToasts.showError: successCallback should be a function');\r\n                }\r\n                if (cancelCallback) {\r\n                    pipAssert.isFunction(cancelCallback, 'pipToasts.showError: cancelCallback should be a function');\r\n                }\r\n\r\n                addToast({\r\n                    id: id || null,\r\n                    error: error,\r\n                    type: 'error',\r\n                    message: message,\r\n                    actions: ['ok'],\r\n                    successCallback: successCallback,\r\n                    cancelCallback: cancelCallback\r\n                });\r\n            }\r\n\r\n            // Hide and clear all toast when user signs out\r\n            function hideAllToasts() {\r\n                $mdToast.cancel();\r\n                toasts = [];\r\n            }\r\n\r\n            // Clear toasts by type\r\n            function clearToasts(type) {\r\n                if (type) {\r\n                    pipAssert.isString(type, 'pipToasts.clearToasts: type should be a string');\r\n\r\n                    removeToasts(type);\r\n                } else {\r\n                    $mdToast.cancel();\r\n                    toasts = [];\r\n                }\r\n            }\r\n        }]\r\n    );\r\n\r\n})(window.angular, window._);\r\n","/**\r\n * @file Toggle buttons control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipToggleButtons', ['pipBasicControls.Templates']);\r\n\r\n    thisModule.directive('pipToggleButtons',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    buttons: '=pipButtons',\r\n                    currentButtonValue: '=ngModel',\r\n                    currentButton: '=?pipButtonObject',\r\n                    change: '&ngChange'\r\n                },\r\n                templateUrl: 'toggle_buttons/toggle_buttons.html',\r\n                controller: ['$scope', '$element', '$attrs', '$mdMedia', '$timeout', function ($scope, $element, $attrs, $mdMedia, $timeout) {\r\n                    var index;\r\n\r\n                    $scope.$mdMedia = $mdMedia;\r\n                    $scope.class = $attrs.class || '';\r\n\r\n                    if (!$scope.buttons || _.isArray($scope.buttons) && $scope.buttons.length === 0) {\r\n                        $scope.buttons = [];\r\n                    }\r\n\r\n                    index = _.indexOf($scope.buttons, _.find($scope.buttons, {id: $scope.currentButtonValue}));\r\n                    $scope.currentButtonIndex = index < 0 ? 0 : index;\r\n                    $scope.currentButton = $scope.buttons.length > 0 ? $scope.buttons[$scope.currentButtonIndex]\r\n                        : $scope.currentButton;\r\n\r\n                    $scope.buttonSelected = function (index) {\r\n                        if ($scope.disabled()) {\r\n                            return;\r\n                        }\r\n\r\n                        $scope.currentButtonIndex = index;\r\n                        $scope.currentButton = $scope.buttons[$scope.currentButtonIndex];\r\n                        $scope.currentButtonValue = $scope.currentButton.id || index;\r\n\r\n                        $timeout(function () {\r\n                            if ($scope.change) {\r\n                                $scope.change();\r\n                            }\r\n                        });\r\n                    };\r\n\r\n                    $scope.enterSpacePress = function (event) {\r\n                        $scope.buttonSelected(event.index);\r\n                    };\r\n\r\n                    $scope.disabled = function () {\r\n                        if ($scope.ngDisabled) {\r\n                            return $scope.ngDisabled();\r\n                        }\r\n                    };\r\n                }],\r\n                link: function (scope, elem) {\r\n                    elem\r\n                        .on('focusin', function () {\r\n                            elem.addClass('focused-container');\r\n                        })\r\n                        .on('focusout', function () {\r\n                            elem.removeClass('focused-container');\r\n                        });\r\n                }\r\n            };\r\n        }\r\n    );\r\n\r\n})(window.angular, window._);\r\n","(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('appbar/appbar.html',\n    '<!--\\n' +\n    '@file App Bar component\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-toolbar md-theme-watch=\"true\" ng-if=\"!$partialReset\" ng-class=\"config.ngClasses\"\\n' +\n    '            class=\"{{ config.cssClass }} color-primary-bg\">\\n' +\n    '\\n' +\n    '    <div class=\"md-toolbar-tools rp24-flex lp24-flex\" ng-if=\"!searchEnabled\">\\n' +\n    '        <!-- Navigation Icon -->\\n' +\n    '        <md-button class=\"md-icon-button flex-fixed p0\"\\n' +\n    '                   ng-if=\"config.navIconType != \\'none\\'\"\\n' +\n    '                   ng-class=\"{ \\'pip-third-party\\': getParty() && !getUser(\\'owner\\') }\"\\n' +\n    '                   ng-click=\"onNavIconClick()\"\\n' +\n    '                   aria-label=\"menu\">\\n' +\n    '            <!-- Menu icon -->\\n' +\n    '            <md-icon ng-if=\"config.navIconType==\\'menu\\' && (!getParty() || getUser(\\'owner\\'))\"\\n' +\n    '                md-svg-icon=\"icons:menu\"></md-icon>\\n' +\n    '            <!-- Party avatar -->\\n' +\n    '            <pip-avatar ng-if=\"config.navIconType==\\'menu\\' && (getParty() && !getUser(\\'owner\\'))\"\\n' +\n    '                        pip-rebind-avatar=\"true\"\\n' +\n    '                        pip-rebind=\"true\"\\n' +\n    '                        pip-image-url=\"partyAvatarUrl\"\\n' +\n    '                        pip-party-id=\"getParty(\\'id\\')\" class=\"pip-face\"\\n' +\n    '                        pip-party-name=\"getParty(\\'name\\')\">\\n' +\n    '            </pip-avatar>\\n' +\n    '            <!-- Back icon -->\\n' +\n    '            <md-icon ng-if=\"config.navIconType==\\'back\\'\"\\n' +\n    '                md-svg-icon=\"icons:arrow-left\"></md-icon>\\n' +\n    '        </md-button>\\n' +\n    '        \\n' +\n    '        <!-- Title -->            \\n' +\n    '        <div class=\"flex-var text-overflow\">\\n' +\n    '            <!-- Logo -->\\n' +\n    '            <img class=\"pip-appbar-logo\"\\n' +\n    '                 ng-click=\"onLogoState(config.logoState)\"\\n' +\n    '                ng-if=\"config.titleType == \\'logo\\'\"\\n' +\n    '                ng-src=\"{{config.titleLogo}}\"/>\\n' +\n    '                \\n' +\n    '            <!-- Title --> \\n' +\n    '            <div ng-if=\"config.titleType == \\'text\\'\" class=\"text-overflow pip-appbar-text\">\\n' +\n    '                <!-- Search criteria -->\\n' +\n    '                <span ng-if=\"config.searchCriteria\"\\n' +\n    '                    ng-click=\"onSearchEnable()\">{{config.searchCriteria}} -</span>\\n' +\n    '                <!-- Text title -->\\n' +\n    '                <span class=\"text-overflow\">{{config.titleText | translate}}</span>\\n' +\n    '            </div>\\n' +\n    '\\n' +\n    '            <!-- Title with or without breadcrumb -->\\n' +\n    '            <div ng-if=\"config.titleType==\\'breadcrumb\\'\">\\n' +\n    '                <div class=\"hide-xs text-overflow\">\\n' +\n    '                    <!-- Search criteria -->\\n' +\n    '                    <span ng-if=\"config.searchCriteria\"\\n' +\n    '                      ng-click=\"onSearchEnable()\">{{config.searchCriteria}} -</span>\\n' +\n    '                    <!-- Breadcrumb navigation -->\\n' +\n    '                    <span class=\"pip-appbar-breadcrumb\"\\n' +\n    '                        ng-repeat-start=\"item in config.titleBreadcrumb\"\\n' +\n    '                        ng-click=\"onBreadcrumbClick(item)\"\\n' +\n    '                        ng-init=\"stepWidth = 100/(config.titleBreadcrumb.length + 1)\"\\n' +\n    '                        ng-style=\"{\\'max-width\\': stepWidth + \\'%\\'}\">\\n' +\n    '                        {{item.title | translate}}\\n' +\n    '                    </span>\\n' +\n    '                    <md-icon ng-repeat-end md-svg-icon=\"icons:chevron-right\"></md-icon>\\n' +\n    '                    <!-- Text title -->\\n' +\n    '                    <span class=\"pip-title\">{{config.titleText | translate}}</span>\\n' +\n    '                </div>\\n' +\n    '\\n' +\n    '                <!-- Mobile breadcrumb dropdown -->\\n' +\n    '                <md-menu xmd-offset=\"0 48\" class=\"hide-gt-xs\">\\n' +\n    '                    <span class=\"pip-appbar-mobile-breadcrumb layout-row\"\\n' +\n    '                        ng-click=\"$mdOpenMenu()\"\\n' +\n    '                        md-ink-ripple\\n' +\n    '                        aria-label=\"open breadcrumb\">\\n' +\n    '                        <span class=\"text-overflow\">\\n' +\n    '                            <!-- Search criteria -->\\n' +\n    '                            <span ng-if=\"config.searchCriteria\"\\n' +\n    '                                ng-click=\"onSearchEnable()\">{{config.searchCriteria}} -</span>\\n' +\n    '                            {{config.titleText | translate}}\\n' +\n    '                        </span>\\n' +\n    '                        <md-icon class=\"m0 flex-none\" md-svg-icon=\"icons:triangle-down\"></md-icon>\\n' +\n    '                    </span>\\n' +\n    '                    <md-menu-content width=\"3\">\\n' +\n    '                        <md-menu-item  ng-repeat=\"item in config.titleBreadcrumb\" >\\n' +\n    '                            <md-button ng-click=\"onBreadcrumbClick(item)\"><span>{{item.title | translate}}</span></md-button>\\n' +\n    '                        </md-menu-item>\\n' +\n    '                        <md-menu-item  >\\n' +\n    '                            <md-button><span class=\"text-grey\">{{config.titleText | translate}}</span></md-button>\\n' +\n    '                        </md-menu-item>\\n' +\n    '                    </md-menu-content>\\n' +\n    '                </md-menu>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '\\n' +\n    '\\n' +\n    '        <div class=\"flex-fixed pip-appbar-actions layout-row\"\\n' +\n    '             ng-class=\"{ \\'pip-language-action\\': config.actionsType==\\'language\\' }\">\\n' +\n    '            <!-- Laguage picker -->\\n' +\n    '            <md-menu ng-if=\"config.actionsType==\\'language\\'\"\\n' +\n    '                md-position-mode=\"target-right target\">\\n' +\n    '                <span class=\"pip-appbar-language\"\\n' +\n    '                    ng-click=\"$mdOpenMenu()\"\\n' +\n    '                    aria-label=\"language selection\">\\n' +\n    '                    {{language() | translate}}\\n' +\n    '                    <md-icon md-svg-icon=\"icons:triangle-down\"></md-icon>\\n' +\n    '                </span>\\n' +\n    '                <md-menu-content width=\"3\">\\n' +\n    '                    <md-menu-item ng-repeat=\"lang in config.languages\">\\n' +\n    '                        <md-button ng-click=\"onLanguageClick(lang)\">{{lang | translate}}</md-button>\\n' +\n    '                    </md-menu-item>\\n' +\n    '                </md-menu-content>\\n' +\n    '            </md-menu>\\n' +\n    '\\n' +\n    '            <!-- Search toggle -->\\n' +\n    '            <md-button class=\"md-icon-button m0\"\\n' +\n    '                       ng-if=\"config.searchVisible\"\\n' +\n    '                       ng-click=\"onSearchEnable()\"\\n' +\n    '                       aria-label=\"open search\">\\n' +\n    '                <!--<md-tooltip>{{::\\'APPBAR_SEARCH\\' | translate}}</md-tooltip>-->\\n' +\n    '                <md-icon md-svg-icon=\"icons:search\"></md-icon>\\n' +\n    '            </md-button>\\n' +\n    '\\n' +\n    '            <!-- Actions -->\\n' +\n    '            <div ng-if=\"config.actionsType==\\'list\\'\">\\n' +\n    '\\n' +\n    '                <!-- Global primary actions -->\\n' +\n    '                <md-menu md-position-mode=\"target-right target\" ng-repeat=\"action in config.primaryGlobalActions\">\\n' +\n    '                    <md-button class=\"pip-appbar-action md-icon-button m0\"\\n' +\n    '                               ng-class=\"{ \\'pip-appbar-hide-sm\\': action.hideSmall }\"\\n' +\n    '                               ng-click=\"onActionClick(action, $mdOpenMenu);\"\\n' +\n    '                               ng-hide=\"actionHidden(action)\"\\n' +\n    '                               aria-label=\"{{action.tooltip | translate}}\">\\n' +\n    '                        <!--<md-tooltip ng-if=\"action.tooltip\">{{action.tooltip | translate}}</md-tooltip>-->\\n' +\n    '                        <div class=\"pip-appbar-badge color-badge-bg\" ng-if=\"action.count > 0\">\\n' +\n    '                            {{actionCount(action)}}\\n' +\n    '                        </div>\\n' +\n    '                        <md-icon md-svg-icon=\"{{action.icon}}\"></md-icon>\\n' +\n    '                    </md-button>\\n' +\n    '                    <md-menu-content width=\"3\" ng-show=\"action.menu\">\\n' +\n    '                        <md-menu-item ng-repeat-start=\"subAction in action.subActions\"\\n' +\n    '                                      ng-if=\"!subAction.divider\"\\n' +\n    '                                      ng-hide=\"actionHidden(subAction)\">\\n' +\n    '                            <md-button ng-hide=\"subAction.divider\"\\n' +\n    '                                       ng-click=\"onActionClick(subAction)\">\\n' +\n    '                                {{subAction.title | translate}}\\n' +\n    '                            </md-button>\\n' +\n    '                        </md-menu-item>\\n' +\n    '                        <md-menu-divider ng-if=\"subAction.divider\" ng-repeat-end></md-menu-divider>\\n' +\n    '                    </md-menu-content>\\n' +\n    '                </md-menu>\\n' +\n    '\\n' +\n    '                <!-- Local primary actions -->\\n' +\n    '                <md-menu md-position-mode=\"target-right target\" ng-repeat=\"action in config.primaryLocalActions\">\\n' +\n    '                    <md-button class=\"pip-appbar-action md-icon-button m0\"\\n' +\n    '                               ng-class=\"{ \\'pip-appbar-hide-sm\\': action.hideSmall,\\n' +\n    '                                            \\'pip-appbar-show-sm\\': action.showSmall,}\"\\n' +\n    '                               ng-click=\"onActionClick(action, $mdOpenMenu);\"\\n' +\n    '                               ng-hide=\"actionHidden(action)\"\\n' +\n    '                               aria-label=\"{{action.tooltip | translate}}\">\\n' +\n    '                        <!--<md-tooltip ng-if=\"action.tooltip\">{{action.tooltip | translate}}</md-tooltip>-->\\n' +\n    '                        <div class=\"pip-appbar-badge\" ng-show=\"action.count > 0\">\\n' +\n    '                            {{actionCount(action)}}\\n' +\n    '                        </div>\\n' +\n    '                        <md-icon md-svg-icon=\"{{action.icon}}\"></md-icon>\\n' +\n    '                    </md-button>\\n' +\n    '                    <md-menu-content width=\"3\" >\\n' +\n    '                        <md-menu-item ng-repeat-start=\"subAction in action.subActions\"\\n' +\n    '                                      ng-if=\"!subAction.divider\"\\n' +\n    '                                      ng-hide=\"actionHidden(subAction)\">\\n' +\n    '                            <md-button ng-hide=\"subAction.divider\"\\n' +\n    '                                       ng-click=\"onActionClick(subAction)\">\\n' +\n    '                                {{subAction.title | translate}}\\n' +\n    '                            </md-button>\\n' +\n    '                        </md-menu-item>\\n' +\n    '                        <md-menu-divider ng-if=\"subAction.divider\" ng-repeat-end></md-menu-divider>\\n' +\n    '                    </md-menu-content>\\n' +\n    '                </md-menu>\\n' +\n    '\\n' +\n    '                <!-- Secondary actions dropdown -->\\n' +\n    '                <md-menu ng-if=\"secondaryActionsVisible()\"\\n' +\n    '                    md-position-mode=\"target-right target\">\\n' +\n    '                    <md-button class=\"md-icon-button m0\"\\n' +\n    '                        ng-click=\"onSecondaryActionClick(); openMenu($mdOpenMenu, $event);\"\\n' +\n    '                        aria-label=\"open actions\">\\n' +\n    '                        <md-icon md-svg-icon=\"icons:vdots\"></md-icon>\\n' +\n    '                    </md-button>\\n' +\n    '                    <md-menu-content width=\"3\">\\n' +\n    '                        <!-- Local secondary actions -->\\n' +\n    '                        <md-menu-item ng-repeat-start=\"action in config.secondaryLocalActions\"\\n' +\n    '                            ng-if=\"!action.divider\"\\n' +\n    '                            ng-hide=\"actionHidden(action)\">\\n' +\n    '                            <md-button ng-hide=\"action.divider\"\\n' +\n    '                                ng-click=\"onActionClick(action)\">\\n' +\n    '                                {{action.title | translate}}\\n' +\n    '                            </md-button>\\n' +\n    '                        </md-menu-item>\\n' +\n    '                        <md-menu-divider ng-if=\"action.divider\" ng-repeat-end></md-menu-divider>\\n' +\n    '\\n' +\n    '                        <md-menu-divider ng-if=\"secondaryDividerVisible()\" >\\n' +\n    '\\n' +\n    '                        </md-menu-divider>\\n' +\n    '                        <!-- Global secondary actions -->\\n' +\n    '                        <md-menu-item ng-repeat-start=\"action in config.secondaryGlobalActions\"\\n' +\n    '                            ng-if=\"!action.divider\"\\n' +\n    '                            ng-hide=\"actionHidden(action)\">\\n' +\n    '                            <md-button ng-hide=\"action.divider\"\\n' +\n    '                                ng-click=\"onActionClick(action)\">\\n' +\n    '                                {{action.title | translate}}\\n' +\n    '                            </md-button>                    \\n' +\n    '                        </md-menu-item>\\n' +\n    '                        <md-menu-divider ng-if=\"action.divider\" ng-repeat-end>\\n' +\n    '                        </md-menu-divider>                        \\n' +\n    '                    </md-menu-content>\\n' +\n    '                </md-menu>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <div class=\"md-toolbar-tools layout-row\" ng-if=\"searchEnabled\">\\n' +\n    '        <md-button class=\"md-icon-button\" \\n' +\n    '            aria-label=\"start search\" \\n' +\n    '            ng-click=\"onSearchClick()\">\\n' +\n    '            <md-icon md-svg-icon=\"icons:search\"></md-icon>\\n' +\n    '        </md-button>\\n' +\n    '        <input class=\"pip-search-text flex\"\\n' +\n    '            type=\"search\"\\n' +\n    '            ng-model=\"search.text\" \\n' +\n    '            ng-keydown=\"onSearchKeyDown($event)\" />\\n' +\n    '        <md-button class=\"md-icon-button\" \\n' +\n    '            aria-label=\"clear search\" \\n' +\n    '            ng-click=\"onSearchClear()\">\\n' +\n    '            <md-icon md-svg-icon=\"icons:cross-circle\"></md-icon>\\n' +\n    '        </md-button>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '</md-toolbar>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('dropdown/dropdown.html',\n    '<md-content class=\"md-subhead color-primary-bg {{class}}\" ng-if=\"show()\" ng-class=\"{\\'md-whiteframe-3dp\\': $mdMedia(\\'xs\\')}\">\\n' +\n    '    <div class=\"pip-divider position-top m0\"></div>\\n' +\n    '        <md-select ng-model=\"selectedIndex\" ng-disabled=\"disabled()\" md-container-class=\"pip-full-width-dropdown\" aria-label=\"DROPDOWN\" md-ink-ripple md-on-close=\"onSelect(selectedIndex)\">\\n' +\n    '            <md-option ng-repeat=\"action in actions\" value=\"{{ ::$index }}\" ng-selected=\"activeIndex == $index ? true : false\">\\n' +\n    '                {{ (action.title || action.name) | translate }}\\n' +\n    '            </md-option>\\n' +\n    '        </md-select>\\n' +\n    '</md-content>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('sidenav/sidenav.html',\n    '<!--\\n' +\n    '@file Side Nav component\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-sidenav class=\"md-sidenav-left md-whiteframe-z2 pip-sidenav color-content-bg\"\\n' +\n    '    md-component-id=\"pip-sidenav\" \\n' +\n    '    ng-if=\"!$partialReset\" \\n' +\n    '    pip-focused>\\n' +\n    '\\n' +\n    '    <md-toolbar class=\"pip-sidenav-header\"\\n' +\n    '                ng-class=\"{\\'pip-sidenav-owner\\': getUser(\\'owner\\')}\"\\n' +\n    '                md-theme=\"{{ $theme|| getUser(\\'theme\\') || config.theme }}\"\\n' +\n    '                ng-hide=\"!getParty() && !primaryPartyAvatar && !secondaryPartyAvatar\">\\n' +\n    '\\n' +\n    '            <md-button class=\"pip-sidenav-party md-icon-button\"\\n' +\n    '                       ng-click=\"onPartyClick()\"\\n' +\n    '                       aria-label=\"current party\">\\n' +\n    '                <pip-avatar ng-if=\"!$avatarReset\"\\n' +\n    '                            pip-party-id=\"getParty(\\'id\\')\"\\n' +\n    '                            pip-default-icon=\"icon-person\"\\n' +\n    '                            pip-party-name=\"getParty(\\'name\\')\"\\n' +\n    '                            pip-image-url=\"primaryPartyAvatar\"\\n' +\n    '                            pip-rebind-avatar=\"true\"\\n' +\n    '                            pip-rebind=\"true\">\\n' +\n    '                </pip-avatar>\\n' +\n    '            </md-button>\\n' +\n    '\\n' +\n    '            <md-button class=\"pip-sidenav-user md-icon-button\"\\n' +\n    '                       ng-click=\"onUserClick()\"\\n' +\n    '                       ng-hide=\"getUser(\\'owner\\')\"\\n' +\n    '                       aria-label=\"current user\">\\n' +\n    '                <pip-avatar class=\"pic-pic pip-face-ld\"\\n' +\n    '                            ng-if=\"!$avatarReset\"\\n' +\n    '                            pip-default-icon=\"icon-person\"\\n' +\n    '                            pip-rebind=\"true\"\\n' +\n    '                            pip-rebind-avatar=\"true\"\\n' +\n    '                            pip-party-id=\"getUser(\\'id\\')\"\\n' +\n    '                            pip-party-name=\"getUser(\\'name\\')\"\\n' +\n    '                            pip-image-url=\"secondaryPartyAvatar\">\\n' +\n    '                </pip-avatar>\\n' +\n    '            </md-button>\\n' +\n    '        \\n' +\n    '        <div class=\"pip-sidenav-party-text\">\\n' +\n    '            <a class=\"pip-sidenav-party-pri cursor-pointer\"\\n' +\n    '                ng-click=\"onPartyClick()\">{{ partyName || getParty(\\'name\\')}}</a>\\n' +\n    '            <div class=\"pip-sidenav-party-sec\"\\n' +\n    '                ng-show=\"getConnection() && !getUser(\\'owner\\')\">\\n' +\n    '                {{getConnection(\\'relation\\') | translate}}\\n' +\n    '                <span ng-show=\"getConnection(\\'relation_since\\')\">\\n' +\n    '                    {{::\\'SIDENAV_SINCE\\' | translate}}\\n' +\n    '                    {{getConnection(\\'relation_since\\') | formatLongDate}}\\n' +\n    '                </span>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '    </md-toolbar>\\n' +\n    '\\n' +\n    '    <md-list>\\n' +\n    '        <div class=\"pip-section\" ng-repeat=\"section in config.sections\"\\n' +\n    '            ng-hide=\"section.access && !section.access(getParty(), getUser(), section)\">\\n' +\n    '            \\n' +\n    '            <md-divider ng-show=\"$index > 0 && !isSectionEmpty(section.links)\"></md-divider>\\n' +\n    '            <md-subheader ng-show=\"section.title\">{{::section.title | translate}}</md-subheader>\\n' +\n    '            \\n' +\n    '            <md-list-item class=\"pip-focusable no-border\" \\n' +\n    '                ng-repeat=\"link in section.links\"\\n' +\n    '                ng-click=\"onLinkClick($event, link)\"\\n' +\n    '                ng-hide=\"link.access && !link.access(getParty(), getUser(), link)\">\\n' +\n    '                <md-icon md-svg-icon=\"{{link.icon}}\" \\n' +\n    '                    ng-hide=\"!link.icon\" \\n' +\n    '                    class=\"tm0 bm0\"></md-icon>\\n' +\n    '                <p>{{::link.title | translate}}</p>\\n' +\n    '            </md-list-item>\\n' +\n    '        </div>\\n' +\n    '    </md-list>\\n' +\n    '\\n' +\n    '</md-sidenav>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipNav.Templates');\n} catch (e) {\n  module = angular.module('pipNav.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('tabs/tabs.html',\n    '<md-toolbar class=\"pip-nav {{ class }}\" ng-class=\"{\\'pip-visible\\': show(), \\'pip-shadow\\': showShadow()}\">\\n' +\n    '    <md-tabs ng-if=\"$mdMedia(\\'gt-xs\\')\" md-selected=\"activeTab\" ng-class=\"{\\'disabled\\': disabled()}\" md-stretch-tabs=\"true\" md-dynamic-height=\"true\">\\n' +\n    '        <md-tab ng-repeat=\"tab in tabs track by $index\"  ng-disabled=\"tabDisabled($index)\" md-on-select=\"onSelect($index)\">\\n' +\n    '            <md-tab-label>\\n' +\n    '                {{ ::tab.nameLocal }}\\n' +\n    '                <div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 0 && tab.newCounts <= 99\">{{ ::tab.newCounts }}</div>\\n' +\n    '                <div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 99\">!</div>\\n' +\n    '            </md-tab-label>\\n' +\n    '        </md-tab>\\n' +\n    '    </md-tabs>\\n' +\n    '    <md-content class=\"md-subhead color-primary-bg md-hue-1 \" ng-if=\"$mdMedia(\\'xs\\')\">\\n' +\n    '        <div class=\"pip-divider position-top m0\"></div>\\n' +\n    '        <md-select ng-model=\"activeIndex\" ng-disabled=\"disabled()\"\\n' +\n    '                   md-container-class=\"pip-full-width-dropdown\" aria-label=\"SELECT\" md-ink-ripple md-on-close=\"onSelect(activeIndex)\">\\n' +\n    '            <md-option ng-repeat=\"tab in tabs track by $index\" value=\"{{ ::$index }}\" >\\n' +\n    '                {{ ::tab.nameLocal }}\\n' +\n    '                <div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 0 && tab.newCounts <= 99\">{{ ::tab.newCounts }}</div>\\n' +\n    '                <div class=\"pip-tabs-badge color-badge-bg\" ng-if=\"tab.newCounts > 99\">!</div>\\n' +\n    '            </md-option>\\n' +\n    '        </md-select>\\n' +\n    '    </md-content>\\n' +\n    '</md-toolbar>\\n' +\n    '');\n}]);\n})();\n","/**\r\n * @file Registration of navigation WebUI controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipNav', [        \r\n        'pipDropdown',\r\n        'pipTabs',\r\n\r\n        'pipAppBar',\r\n        'pipSideNav'\r\n    ]);\r\n    \r\n})();\r\n\r\n\r\n","/**\r\n * @file Application App Bar component\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular, _, $) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipAppBar',\r\n        ['ngMaterial', 'pipTranslate', 'pipNav.Templates', 'pipAppBar.Service']);\r\n\r\n    thisModule.config(['pipTranslateProvider', function (pipTranslateProvider) {\r\n\r\n        pipTranslateProvider.translations('en', {\r\n            'APPBAR_SEARCH': 'Search'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'APPBAR_SEARCH': 'Поиск'\r\n        });\r\n\r\n    }]);\r\n\r\n    // Main application header directive\r\n    thisModule.directive('pipAppbar', function () {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                title: '=pipTitle',\r\n                showMenu: '=pipShowMenu',\r\n                localActions: '=pipLocalActions',\r\n                globalActions: '=pipGlobalActions',\r\n                partyAvatarUrl: '=pipPartyAvatarUrl'\r\n            },\r\n            replace: false,\r\n            templateUrl: function (element, attr) {\r\n                return 'appbar/appbar.html';\r\n            },\r\n            controller: 'pipAppBarController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipAppBarController',\r\n        ['$scope', '$element', '$attrs', '$rootScope', '$window', '$state', '$location', 'pipTranslate', 'pipAppBar', function ($scope, $element, $attrs, $rootScope, $window, $state, $location, pipTranslate, pipAppBar) {\r\n            // Initialize default application title\r\n            if ($scope.title) {\r\n                pipAppBar.showTitleText($scope.title);\r\n            }\r\n            if ($scope.showMenu) {\r\n                pipAppBar.showMenuNavIcon();\r\n            }\r\n            // Apply class and call resize\r\n            $element.addClass('pip-appbar');\r\n            $scope.$emit('pipResizeWindow');\r\n\r\n            $scope.config = pipAppBar.config();\r\n\r\n            if ($scope.localActions) {\r\n                pipAppBar.showLocalActions();\r\n                $scope.config.primaryLocalActions = $scope.localActions[0];\r\n                $scope.config.secondaryLocalActions = $scope.localActions[1];\r\n            }\r\n\r\n            if ($scope.globalActions) {\r\n                pipAppBar.showLocalActions();\r\n                $scope.config.primaryGlobalActions = $scope.globalActions[0];\r\n                $scope.config.secondaryGlobalActions = $scope.globalActions[0];\r\n            }\r\n\r\n            $scope.searchEnabled = false;\r\n            $scope.search = {text: ''};\r\n\r\n            $rootScope.$on('pipAppBarChanged', onAppBarChanged);\r\n\r\n            $scope.language = getLanguage;\r\n            $scope.actionHidden = actionHidden;\r\n            $scope.actionCount = actionCount;\r\n            $scope.secondaryActionsVisible = secondaryActionsVisible;\r\n            $scope.secondaryDividerVisible = secondaryDividerVisible;\r\n\r\n            $scope.onNavIconClick = onNavIconClick;\r\n            $scope.onBreadcrumbClick = onBreadcrumbClick;\r\n            $scope.onLanguageClick = onLanguageClick;\r\n            $scope.onActionClick = onActionClick;\r\n\r\n            $scope.onSearchEnable = onSearchEnable;\r\n            $scope.onSearchClick = onSearchClick;\r\n            $scope.onSearchClear = onSearchClear;\r\n            $scope.onSearchKeyDown = onSearchKeyDown;\r\n            $scope.onLogoState = onLogoState;\r\n\r\n            $scope.getParty = getParty;\r\n            $scope.getUser = getUser;\r\n\r\n            $scope.openMenu = openMenu;\r\n\r\n            function onLogoState(state) {\r\n                if(state)\r\n                $state.go(state);\r\n            }\r\n            \r\n            function openMenu($mdOpenMenu, ev) {\r\n                $scope.originatorEv = ev;\r\n                $mdOpenMenu(ev);\r\n            }\r\n\r\n            function getParty(prop) {\r\n                if (!$rootScope.$party) {\r\n                    return;\r\n                }\r\n                if (prop) {\r\n                    return $rootScope.$party[prop];\r\n                }\r\n\r\n                return $rootScope.$party;\r\n            }\r\n\r\n            function getUser(prop) {\r\n                if (!$rootScope.$user) {\r\n                    return;\r\n                }\r\n                if (prop) {\r\n                    return $rootScope.$user[prop];\r\n                }\r\n\r\n                return $rootScope.$user;\r\n            }\r\n\r\n            function onAppBarChanged(event, config) {\r\n                $scope.config = config;\r\n                $scope.searchEnabled = false;\r\n                $scope.search.text = '';\r\n            }\r\n\r\n            function getLanguage() {\r\n                return pipTranslate.use();\r\n            }\r\n\r\n            function actionHidden(action) {\r\n                return action.access && !action.access($rootScope.$party, $rootScope.$user, action);\r\n            }\r\n\r\n            function actionCount(action) {\r\n                if (action.count === null || action.count <= 0) {\r\n                    return '';\r\n                }\r\n                if (action.count > 99) {\r\n                    return '!';\r\n                }\r\n\r\n                return action.count;\r\n            }\r\n\r\n            function calcActions(actions) {\r\n                var count = 0;\r\n\r\n                _.each(actions, function (action) {\r\n                    if (!actionHidden(action)) {\r\n                        count++;\r\n                    }\r\n                });\r\n\r\n                return count;\r\n            }\r\n\r\n            function secondaryActionsVisible() {\r\n                return calcActions($scope.config.secondaryGlobalActions) > 0 ||\r\n                    calcActions($scope.config.secondaryLocalActions) > 0;\r\n            }\r\n\r\n            function secondaryDividerVisible() {\r\n                return calcActions($scope.config.secondaryGlobalActions) > 0 &&\r\n                    calcActions($scope.config.secondaryLocalActions) > 0;\r\n            }\r\n\r\n            function onNavIconClick() {\r\n                var breadcrumb, backCallback;\r\n\r\n                if (_.isFunction($scope.config.navIconCallback)) {\r\n                    // Execute nav icon callback\r\n                    $scope.config.navIconCallback();\r\n\r\n                    return;\r\n                }\r\n                if ($scope.config.navIconType !== 'back') {\r\n                    // Raise an event\r\n                    $rootScope.$broadcast('pipAppBarNavIconClicked');\r\n\r\n                    return;\r\n                }\r\n                if ($scope.config.titleType === 'breadcrumb') {\r\n                    breadcrumb = $scope.config.titleBreadcrumb;\r\n                    // Go to the last breadcrumb item\r\n                    if (_.isArray(breadcrumb) && breadcrumb.length > 0) {\r\n                        backCallback = breadcrumb[breadcrumb.length - 1].click;\r\n                        if (_.isFunction(backCallback)) {\r\n                            backCallback();\r\n                        } else {\r\n                            $window.history.back();\r\n                        }\r\n                    } else {\r\n                        $window.history.back();\r\n                    }\r\n                } else {\r\n                    // Go back in history\r\n                    $window.history.back();\r\n                }\r\n            }\r\n\r\n            function onBreadcrumbClick(item) {\r\n                if (_.isFunction(item.click)) {\r\n                    item.click(item);\r\n                }\r\n            }\r\n\r\n            function onLanguageClick(language) {\r\n                setTimeout(function () {\r\n                    pipTranslate.use(language);\r\n                    $rootScope.$apply();\r\n                }, 0);\r\n            }\r\n\r\n            function processStateParams(params) {\r\n                var result = {}, prop;\r\n\r\n                if (params === null) {\r\n                    return null;\r\n                }\r\n                for (prop in params) {\r\n                    if (params.hasOwnProperty(prop)) {\r\n                        if (params[prop] === ':party_id') {\r\n                            result[prop] = $rootScope.$party ? $rootScope.$party.id : null;\r\n                        } else if (params[prop] === ':user_id') {\r\n                            result[prop] = $rootScope.$user ? $rootScope.$user.id : null;\r\n                        } else {\r\n                            result[prop] = params[prop];\r\n                        }\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            }\r\n\r\n            function processUrlParams(url) {\r\n                var result;\r\n\r\n                if (url === null) {\r\n                    return null;\r\n                }\r\n                result = url.replace(':party_id', $rootScope.$party ? $rootScope.$party.id : '');\r\n                result = result.replace(':user_id', $rootScope.user ? $rootScope.$user.id : '');\r\n\r\n                return result;\r\n            }\r\n\r\n            function focusSearchText() {\r\n                var element;\r\n\r\n                setTimeout(function () {\r\n                    element = $('.pip-search-text');\r\n                    if (element.length > 0) {\r\n                        element.focus();\r\n                    }\r\n                }, 0);\r\n            }\r\n\r\n            function onActionClick(action, $mdOpenMenu) {\r\n                if (!action || action.divider) {\r\n                    return;\r\n                }\r\n\r\n                if (action.close) {\r\n                    $scope.originatorEv = null;\r\n                }\r\n\r\n                if (action.menu) {\r\n                    $mdOpenMenu($scope.originatorEv);\r\n\r\n                    return;\r\n                }\r\n\r\n                if (action.callback) {\r\n                    action.callback();\r\n\r\n                    return;\r\n                }\r\n                if (action.href) {\r\n                    $window.location.href = processUrlParams(action.href);\r\n\r\n                    return;\r\n                }\r\n                if (action.url) {\r\n                    $location.url(processUrlParams(action.url));\r\n\r\n                    return;\r\n                }\r\n                if (action.state) {\r\n                    $state.go(action.state, processStateParams(action.stateParams));\r\n\r\n                    return;\r\n                }\r\n                if (action.event) {\r\n                    $rootScope.$broadcast(action.event);\r\n                } else {\r\n                    // Otherwise raise notification\r\n                    $rootScope.$broadcast('pipAppBarActionClicked', action.name);\r\n                }\r\n            }\r\n\r\n            function onSearchEnable() {\r\n                $scope.search.text = $scope.config.searchCriteria;\r\n                $scope.searchEnabled = true;\r\n                focusSearchText();\r\n            }\r\n\r\n            function onSearchClick() {\r\n                var searchText = $scope.search.text;\r\n\r\n                $scope.search.text = '';\r\n                $scope.searchEnabled = false;\r\n\r\n                if ($scope.config.searchCallback) {\r\n                    $scope.config.searchCallback(searchText);\r\n                } else {\r\n                    $rootScope.$broadcast('pipAppBarSearchClicked', searchText);\r\n                }\r\n            }\r\n\r\n            function onSearchClear() {\r\n                if ($scope.search.text) {\r\n                    $scope.search.text = '';\r\n\r\n                    focusSearchText();\r\n                } else {\r\n                    $scope.searchEnabled = false;\r\n                    onSearchClick();\r\n                }\r\n            }\r\n\r\n            function onSearchKeyDown(event) {\r\n                // Enter pressed\r\n                if (event.keyCode === 13) {\r\n                    $scope.onSearchClick();\r\n\r\n                    return;\r\n                }\r\n                // ESC pressed\r\n                if (event.keyCode === 27) {\r\n                    $scope.searchEnabled = false;\r\n                }\r\n            }\r\n        }]\r\n    );\r\n\r\n})(window.angular, window._, window.jQuery);\r\n","/**\r\n * @file Application App Bar service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n(function (angular, _) {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipAppBar.Service', []);\r\n\r\n    thisModule.provider('pipAppBar', function () {\r\n        var config = {\r\n            appTitleText: null,\r\n            appTitleLogo: 'images/piplife_logo.svg',\r\n\r\n            // Theme to be applied to the header\r\n            theme: 'blue',\r\n            cssClass: '',\r\n            ngClasses: {},\r\n            logoState: null,\r\n\r\n            // Type of nav icon: 'back', 'menu' or 'none'\r\n            navIconType: 'none',\r\n            // Handle nav icon click event\r\n            navIconCallback: false,\r\n\r\n            // Type of title: 'logo', 'text', 'breadcrumb' or 'none'\r\n            titleType: 'none',\r\n            // URL to logo\r\n            titleLogo: null,\r\n            // Title text\r\n            titleText: null,\r\n            // Navigation breadcrumb [{ title, click }],\r\n            titleBreadcrumb: null,\r\n\r\n            // Type of actions: 'language', 'list' or 'none'\r\n            actionsType: 'none',\r\n\r\n            // Language options\r\n            languages: ['en', 'ru'],\r\n\r\n            // Search visible\r\n            searchVisible: false,\r\n            // Search criteria\r\n            searchCriteria: '',\r\n            // History for search autocomplete\r\n            searchHistory: [],\r\n            // Callback for search\r\n            searchCallback: null,\r\n\r\n            // Primary global actions visible on the screen\r\n            primaryGlobalActions: [],\r\n            // Primary local actions visible on the screen\r\n            primaryLocalActions: [],\r\n\r\n            // Secondary global actions available in popup\r\n            secondaryGlobalActions: [],\r\n            // Secondary local actions available in popup\r\n            secondaryLocalActions: []\r\n        };\r\n\r\n        // Configure global parameters\r\n        this.appTitleText = appTitleText;\r\n        this.appTitleLogo = appTitleLogo;\r\n        this.theme = theme;\r\n        this.globalActions = globalActions;\r\n        this.globalPrimaryActions = globalPrimaryActions;\r\n        this.globalSecondaryActions = globalSecondaryActions;\r\n\r\n        // Get the service instance\r\n        this.$get = ['$rootScope', function ($rootScope) {\r\n            return {\r\n                config: getConfig,\r\n                cssClass: cssClass,\r\n                \r\n                logoState:logoState,\r\n                setLogoState: setLogoState,\r\n\r\n                hideNavIcon: hideNavIcon,\r\n                showMenuNavIcon: showMenuNavIcon,\r\n                showBackNavIcon: showBackNavIcon,\r\n\r\n                showAppTitleLogo: showAppTitleLogo,\r\n                showAppTitleText: showAppTitleText,\r\n                showTitleLogo: showTitleLogo,\r\n                showTitleText: showTitleText,\r\n                showTitleBreadcrumb: showTitleBreadcrumb,\r\n                hideTitle: hideTitle,\r\n\r\n                showLanguage: showLanguage,\r\n                showLocalActions: showLocalActions,\r\n                hideLocalActions: hideLocalActions,\r\n                updateActionCount: updateActionCount,\r\n\r\n                showSearch: showSearch,\r\n                hideSearch: hideSearch,\r\n                updateSearchCriteria: updateSearchCriteria,\r\n                updateSearchHistory: updateSearchHistory,\r\n\r\n                showShadow: showShadow,\r\n                showShadowSm: showShadowSm,\r\n                showShadowSmXs: showShadowSmXs,\r\n                hideShadow: hideShadow\r\n            };\r\n            // ----------------------\r\n\r\n            function setLogoState(logoState) {\r\n                config.logoState = logoState;\r\n                return config.logoState;\r\n            }\r\n            \r\n            function logoState() {\r\n                return config.logoState;\r\n            }\r\n            \r\n            function getConfig() {\r\n                return config;\r\n            }\r\n\r\n            function cssClass(newCssClass) {\r\n                if (newCssClass != undefined) {\r\n                    config.cssClass = newCssClass;\r\n                    sendConfigEvent();\r\n                }\r\n\r\n                return config.cssClass;\r\n            }\r\n\r\n            // Show, hide appbar shadow\r\n            function showShadowSm() {\r\n                config.ngClasses['pip-shadow'] = false;\r\n                config.ngClasses['pip-shadow-sm'] = true;\r\n                config.ngClasses['pip-shadow-xs'] = false;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showShadowSmXs() {\r\n                config.ngClasses['pip-shadow'] = false;\r\n                config.ngClasses['pip-shadow-sm'] = true;\r\n                config.ngClasses['pip-shadow-xs'] = true;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showShadow() {\r\n                config.ngClasses['pip-shadow'] = true;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function hideShadow() {\r\n                config.ngClasses['pip-shadow'] = false;\r\n                config.ngClasses['pip-shadow-sm'] = false;\r\n                config.ngClasses['pip-shadow-xs'] = false;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            // Show navigation icon\r\n            function hideNavIcon() {\r\n                config.navIconType = 'none';\r\n                config.navIconCallback = null;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showMenuNavIcon(click) {\r\n                config.navIconType = 'menu';\r\n                config.navIconCallback = click;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showBackNavIcon(click) {\r\n                config.navIconType = 'back';\r\n                config.navIconCallback = click;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            // Show title\r\n            function hideTitle() {\r\n                config.titleType = 'none';\r\n                config.titleLogo = null;\r\n                config.titleText = null;\r\n                config.titleBreadcrumb = null;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showTitleLogo(titleLogo) {\r\n                config.titleType = 'logo';\r\n                config.titleLogo = titleLogo;\r\n                config.titleText = null;\r\n                config.titleBreadcrumb = null;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showTitleText(titleText) {\r\n                config.titleType = 'text';\r\n                config.titleLogo = null;\r\n                config.titleText = titleText;\r\n                config.titleBreadcrumb = null;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showTitleBreadcrumb(titleText, titleBreadcrumb) {\r\n                if (_.isArray(titleText)) {\r\n                    titleBreadcrumb = titleText;\r\n                    titleText = titleBreadcrumb[titleBreadcrumb.length - 1].title;\r\n                    titleBreadcrumb.splice(titleBreadcrumb.length - 1, 1);\r\n                }\r\n                config.titleType = 'breadcrumb';\r\n                config.titleLogo = null;\r\n                config.titleText = titleText;\r\n                config.titleBreadcrumb = titleBreadcrumb;\r\n                if (titleBreadcrumb.length > 0) {\r\n                    config.navIconType = config.navIconType === 'none' ? 'none' : config.navIconType;\r\n                    config.navIconCallback = titleBreadcrumb[titleBreadcrumb.length - 1];\r\n                } else {\r\n                    config.navIconType = 'menu';\r\n                    config.navIconCallback = null;\r\n                }\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showAppTitleLogo() {\r\n                showTitleLogo(config.appTitleLogo);\r\n            }\r\n\r\n            function showAppTitleText() {\r\n                showTitleText(config.appTitleText);\r\n            }\r\n\r\n            // Show actions\r\n            function hideLocalActions() {\r\n                config.actionsType = 'none';\r\n                config.primaryLocalActions = [];\r\n                config.secondaryLocalActions = [];\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showLanguage(languages) {\r\n                config.actionsType = 'language';\r\n                config.languages = languages || config.languages;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function showLocalActions(primaryActions, secondaryActions) {\r\n                config.actionsType = 'list';\r\n                config.primaryLocalActions = primaryActions || [];\r\n                config.secondaryLocalActions = secondaryActions || [];\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function updateActionCount(actionName, count) {\r\n                // Update global actions\r\n                _.each(config.primaryGlobalActions, function (action) {\r\n                    if (action.name === actionName) {\r\n                        action.count = count;\r\n                    }\r\n                });\r\n                // Update local action\r\n                _.each(config.primaryLocalActions, function (action) {\r\n                    if (action.name === actionName) {\r\n                        action.count = count;\r\n                    }\r\n                });\r\n                sendConfigEvent();\r\n            }\r\n\r\n            // Show actions\r\n            function showSearch(callback, criteria, history) {\r\n                config.searchVisible = true;\r\n                config.searchCallback = callback;\r\n                config.searchCriteria = criteria;\r\n                config.searchHistory = history;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function hideSearch() {\r\n                config.searchVisible = false;\r\n                config.searchCallback = null;\r\n                config.searchCriteria = null;\r\n\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function updateSearchCriteria(criteria) {\r\n                config.searchCriteria = criteria;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function updateSearchHistory(history) {\r\n                config.searchHistory = history;\r\n                sendConfigEvent();\r\n            }\r\n\r\n            function sendConfigEvent() {\r\n                $rootScope.$broadcast('pipAppBarChanged', config);\r\n            }\r\n        }];\r\n        function appTitleText(newTitleText) {\r\n            if (newTitleText) {\r\n                config.appTitleText = newTitleText;\r\n            }\r\n\r\n            return config.appTitleText;\r\n        }\r\n\r\n        function appTitleLogo(newTitleLogo) {\r\n            if (newTitleLogo) {\r\n                config.appTitleLogo = newTitleLogo;\r\n            }\r\n\r\n            return config.appTitleLogo;\r\n        }\r\n\r\n        function theme(theme) {\r\n            config.theme = theme || config.theme;\r\n\r\n            return config.theme;\r\n        }\r\n\r\n        function globalActions(primaryActions, secondaryActions) {\r\n            config.primaryGlobalActions = primaryActions || [];\r\n            config.secondaryGlobalActions = secondaryActions || [];\r\n        }\r\n\r\n        function globalPrimaryActions(primaryActions) {\r\n            config.primaryGlobalActions = primaryActions || [];\r\n        }\r\n\r\n        function globalSecondaryActions(secondaryActions) {\r\n            config.secondaryGlobalActions = secondaryActions || [];\r\n        }\r\n\r\n    });\r\n\r\n})(window.angular, window._);\r\n","/**\r\n * @file Dropdown control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n *\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipDropdown\", ['pipAssert', 'pipNav.Templates']);\r\n\r\n    thisModule.directive('pipDropdown',\r\n        ['$mdMedia', 'pipAssert', function ($mdMedia, pipAssert) {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    actions: '=pipActions',\r\n                    showDropdown: '&pipShow',\r\n                    activeIndex: '=pipActiveIndex',\r\n                    select: '=pipDropdownSelect'\r\n                },\r\n                templateUrl: 'dropdown/dropdown.html',\r\n                controller:\r\n                    ['$scope', '$element', '$attrs', 'localStorageService', function ($scope, $element, $attrs, localStorageService) {\r\n                        $scope.class = ($attrs.class || '') + ' md-' + localStorageService.get('theme') + '-theme';\r\n                        pipAssert.isArray($scope.actions, 'pipDropdown: pip-actions attribute should take an array, but take ' + typeof $scope.actions);\r\n                        $scope.$mdMedia = $mdMedia;\r\n                        $scope.actions = ($scope.actions && _.isArray($scope.actions)) ? $scope.actions : [];\r\n                        $scope.activeIndex = $scope.activeIndex || 0;\r\n\r\n                        $scope.disabled = function () {\r\n                            if ($scope.ngDisabled()) {\r\n                                return $scope.ngDisabled();\r\n                            } else {\r\n                                return false;\r\n                            }\r\n                        };\r\n\r\n                        $scope.onSelect = function (index) {\r\n                            $scope.activeIndex = index;\r\n                            if ($scope.select) {\r\n                                $scope.select($scope.actions[index], $scope.activeIndex);\r\n                            }\r\n                        };\r\n\r\n                        $scope.show = function () {\r\n                            if ($scope.showDropdown()) {\r\n                                return $scope.showDropdown();\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        };\r\n\r\n                    }]\r\n            };\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Application Side Nav component\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSideNav', \r\n        ['ngMaterial', 'pipTranslate', 'pipFocused', 'pipNav.Templates', 'pipSideNav.Service']);\r\n\r\n    thisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n\r\n        pipTranslateProvider.translations('en', {\r\n            'SIDENAV_SINCE': 'since'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'SIDENAV_SINCE': 'с'\r\n        });\r\n\r\n    }]);\r\n\r\n    // Main application sidenav directive\r\n    thisModule.directive('pipSidenav', function() {\r\n       return {\r\n           restrict: 'EA',\r\n           scope: {\r\n               primaryPartyAvatar: '=pipPrimaryAvatar',\r\n               secondaryPartyAvatar: '=pipSecondaryAvatar',\r\n               partyName: '=pipName'\r\n           },\r\n           replace: false,\r\n           templateUrl: 'sidenav/sidenav.html',\r\n           controller: 'pipSideNavController'\r\n       };\r\n    });\r\n\r\n    thisModule.controller('pipSideNavController', \r\n        ['$scope', '$element', '$state', '$rootScope', '$window', '$location', '$timeout', 'pipState', 'pipTranslate', 'pipSideNav', function ($scope, $element, $state, $rootScope, $window, $location, $timeout, pipState, pipTranslate, pipSideNav) {\r\n\r\n            // Apply class and call resize\r\n            $element.addClass('pip-sidenav');\r\n\r\n            $scope.config = pipSideNav.config();\r\n            $scope.$avatarReset = false;\r\n\r\n            $rootScope.$on('pipAppBarNavIconClicked', onAppBarNavIconClick);\r\n            $rootScope.$on('pipSideNavChanged', onConfigChanged);\r\n\r\n            $scope.itemVisible = itemVisible;\r\n            $scope.onUserClick = onUserClick;\r\n            $scope.onPartyClick = onPartyClick;\r\n            $scope.onLinkClick = onLinkClick;\r\n            $scope.isSectionEmpty = isSectionEmpty;\r\n\r\n            $scope.getParty = getParty;\r\n            $scope.getUser = getUser;\r\n            $scope.getConnection = getConnection;\r\n            \r\n            return;\r\n            \r\n            //------------------------\r\n\r\n            function getParty(prop) {\r\n                if (!$rootScope.$party) {\r\n                    return;\r\n                }\r\n                if (prop) {\r\n                    return $rootScope.$party[prop];\r\n                }\r\n\r\n                return $rootScope.$party;\r\n            }\r\n\r\n            function getUser(prop) {\r\n                if (!$rootScope.$user) {\r\n                    return;\r\n                }\r\n                if (prop) {\r\n                    return $rootScope.$user[prop];\r\n                }\r\n\r\n                return $rootScope.$user;\r\n            }\r\n            \r\n            function getConnection(prop) {\r\n                if (!$rootScope.$connection) {\r\n                    return;\r\n                }\r\n                if (prop) {\r\n                    return $rootScope.$connection[prop];\r\n                }\r\n\r\n                return $rootScope.$connection;\r\n            }\r\n            \r\n            function itemVisible(item) {\r\n                return item && item.access && !item.access($rootScope.$party, $rootScope.$user, item);\r\n            }\r\n\r\n            function isSectionEmpty(linkCollection) {\r\n                var result = true;\r\n                _.each(linkCollection, function(link){\r\n                    if (!itemVisible(link))\r\n                        result = false;\r\n                });\r\n                return result;\r\n            }\r\n\r\n            function onAppBarNavIconClick(event) {\r\n                pipSideNav.open();\r\n            }\r\n\r\n            function onConfigChanged(event, config) {\r\n                $scope.config = config;\r\n            }\r\n\r\n            function onUserClick() {\r\n                $rootScope.$broadcast('pipSideNavUserClicked');\r\n                pipSideNav.close();\r\n            }\r\n\r\n            function onPartyClick() {\r\n                $rootScope.$broadcast('pipSideNavPartyClicked');\r\n                pipSideNav.close();\r\n            }\r\n\r\n            function processStateParams(params) {\r\n                if (params == null) return null;\r\n\r\n                var result = {};\r\n                for (var prop in params) {\r\n                    if (params.hasOwnProperty(prop)) {\r\n                        if (params[prop] == ':party_id') {\r\n                            result[prop] = $rootScope.$party ? $rootScope.$party.id : null;\r\n                        } else if (params[prop] == ':user_id') {\r\n                            result[prop] = $rootScope.$user ? $rootScope.$user.id : null;\r\n                        } else {\r\n                            result[prop] = params[prop];   \r\n                        }\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n\r\n            function processUrlParams(url) {\r\n                if (url == null) return null;\r\n\r\n                var result = url.replace(':party_id', $rootScope.$party ? $rootScope.$party.id : '');\r\n                result = result.replace(':user_id', $rootScope.$user ? $rootScope.$user.id : '');\r\n\r\n                return result;\r\n            }\r\n\r\n            function onLinkClick(event, link) {\r\n                event.stopPropagation();\r\n\r\n                if (!link) {\r\n                    pipSideNav.close();\r\n                    return;\r\n                }\r\n\r\n                if (link.href) {\r\n                    if (link.href.split('?')[0] === $window.location.href.split('?')[0]) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        $window.location.href = processUrlParams(link.href);\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.url) {\r\n                    if (link.url.split(/[\\s/?]+/)[1] === $location.url().split(/[\\s/?]+/)[1]) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        $location.url(processUrlParams(link.url));\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.state) {\r\n                    if ($state.current.name === link.state) {\r\n                        pipSideNav.close();\r\n                        return;\r\n                    }\r\n\r\n                    pipSideNav.close();\r\n                    $timeout(function() {\r\n                        pipState.go(link.state, processStateParams(link.stateParams));\r\n                    }, 300);\r\n\r\n                    return;\r\n                }\r\n                else if (link.event)\r\n                    $rootScope.$broadcast('pipSideNavLinkClicked', link.event);\r\n\r\n                pipSideNav.close();\r\n            }\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Application Side Nav service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipSideNav.Service', ['pipAssert', 'pipDebug']);\r\n\r\n    thisModule.provider('pipSideNav', ['pipAssertProvider', 'pipDebugProvider', function (pipAssertProvider, pipDebugProvider) {\r\n        var config = {\r\n            // Theme to be applied to the header\r\n            theme: 'blue',\r\n            // Sections with navigation links\r\n            sections: []\r\n        };\r\n\r\n        this.theme = theme;\r\n        this.sections = sections;\r\n\r\n        this.$get = ['$rootScope', '$mdSidenav', function ($rootScope, $mdSidenav) {\r\n            $rootScope.$on('pipSideNavOpen', open);\r\n            $rootScope.$on('pipSideNavClose', close);\r\n\r\n            return {\r\n                config: getConfig,\r\n                theme: setTheme,\r\n                sections: setSections,\r\n                open: open,\r\n                close: close,\r\n                toggle: toggle\r\n            };\r\n            //---------------------\r\n\r\n            function getConfig() {\r\n                return config;  \r\n            };\r\n                            \r\n            function setTheme(newTheme) {\r\n                theme(newTheme);\r\n                sendConfigEvent();  \r\n                return config.theme;\r\n            };\r\n                            \r\n            function setSections(newSections) {\r\n                sections(newSections);\r\n                sendConfigEvent();\r\n                return config.sections;  \r\n            };\r\n                            \r\n            function sendConfigEvent() {\r\n                $rootScope.$broadcast('pipSideNavChanged', config);\r\n            };\r\n\r\n            function open(event) {\r\n                $mdSidenav('pip-sidenav').open();\r\n            };\r\n                 \r\n            function close(event) {\r\n                $mdSidenav('pip-sidenav').close();   \r\n            };                \r\n\r\n            function toggle() {\r\n                $mdSidenav('pip-sidenav').toggle();   \r\n            };                   \r\n        }];\r\n\r\n        function theme(newTheme) {\r\n            config.theme = newTheme || config.theme;\r\n            return config.theme;            \r\n        };\r\n\r\n        function validateSections(sections) {\r\n            pipAssertProvider.isArray(sections, 'pipSideNavProvider.sections or pipSideNav.sections: sections should be an array');\r\n            _.each(sections, function (section, number) {\r\n                if (section.access) {\r\n                    pipAssertProvider.isFunction(section.access, 'pipSideNavProvider.sections or pipSideNav.sections: in section number '\r\n                        + number + \" with title \" + section.title + ' access should be a function');\r\n                }\r\n                if (section.links) {\r\n                    pipAssertProvider.isArray(section.links, 'pipSideNavProvider.sections or pipSideNav.sections: in section number '\r\n                        + number + \" with title \" + section.title + ' links should be an array');\r\n                    _.each(section.links, function (link) {\r\n                        if (link.access) pipAssertProvider.isFunction(link.access, 'pipSideNavProvider.sections or pipSideNav.sections: in section number '\r\n                            + number + \" with title \" + section.title + ' in link with title ' + link.title + ' access should be a function');\r\n                    });\r\n                }\r\n            });\r\n        }\r\n\r\n        function sections(newSections) {\r\n            if (pipDebugProvider.enabled()) validateSections(newSections);\r\n\r\n            if (_.isArray(newSections))\r\n                config.sections = newSections;\r\n            return config.sections;\r\n        };\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Tabs control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * \r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipTabs\", ['pipAssert', 'pipNav.Templates']);\r\n\r\n    thisModule.directive('pipTabs',\r\n        ['$mdMedia', 'pipAssert', function ($mdMedia, pipAssert) {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    tabs: '=pipTabs',\r\n                    showTabs: '&pipShowTabs',\r\n                    showTabsShadow: '&pipTabsShadow',\r\n                    activeIndex: '=pipActiveIndex',\r\n                    select: '=pipTabsSelect'\r\n                },\r\n                templateUrl: 'tabs/tabs.html',\r\n                controller:\r\n                    ['$scope', '$element', '$attrs', '$mdMedia', 'localStorageService', 'pipTranslate', function ($scope, $element, $attrs, $mdMedia, localStorageService, pipTranslate) {\r\n                        $scope.class = ($attrs.class || '') + ' md-' + localStorageService.get('theme') + '-theme';\r\n                        pipAssert.isArray($scope.tabs, 'pipTabs: pipTabs attribute should take an array');\r\n                        $scope.$mdMedia = $mdMedia;\r\n                        $scope.tabs = ($scope.tabs && _.isArray($scope.tabs)) ? $scope.tabs : [];\r\n                        if ($scope.tabs.length > 0 && $scope.tabs[0].title) {\r\n                            pipTranslate.translateObjects($scope.tabs, 'title', 'nameLocal');\r\n                        } else {\r\n                            pipTranslate.translateObjects($scope.tabs, 'name', 'nameLocal');\r\n                        }\r\n                        $scope.activeIndex = $scope.activeIndex || 0;\r\n                        $scope.activeTab = $scope.activeIndex;\r\n\r\n                        $scope.disabled = function () {\r\n                            if ($scope.ngDisabled) {\r\n                                return $scope.ngDisabled();\r\n                            }\r\n                        };\r\n\r\n                        $scope.tabDisabled = function (index) {\r\n                            return ($scope.disabled() && $scope.activeIndex != index);\r\n                        };\r\n\r\n                        $scope.onSelect = function (index) {\r\n                            if ($scope.disabled()) return;\r\n\r\n                            $scope.activeIndex = index;\r\n                            $scope.activeTab = $scope.activeIndex;\r\n                            if ($scope.select) {\r\n                                $scope.select($scope.tabs[$scope.activeIndex], $scope.activeIndex);\r\n                            }\r\n                        };\r\n\r\n                        $scope.showShadow = function () {\r\n                            if ($scope.showTabsShadow) {\r\n                                return $scope.showTabsShadow();\r\n                            } else {\r\n                                return false;\r\n                            }\r\n                        };\r\n\r\n                        $scope.show = function () {\r\n                            if ($scope.showTabs) {\r\n                                return $scope.showTabs();\r\n                            } else {\r\n                                return true;\r\n                            }\r\n                        };\r\n                    }]\r\n            };\r\n        }]\r\n    );\r\n\r\n})();\r\n","(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('maintenance/maintenance.html',\n    '<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\\n' +\n    '    <div style=\"background-image: url(\\'images/maintenance.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '    <div class=\"pip-error-text\">{{::\\'ERROR_AVAILABLE_TITLE\\' | translate}}</div>\\n' +\n    '    <div class=\"pip-error-subtext\">{{::\\'ERROR_AVAILABLE_SUBTITLE\\' | translate}}</div>\\n' +\n    '    <div class=\"pip-error-subtext\" ng-if=\"timeoutInterval\">\\n' +\n    '        {{::\\'ERROR_AVAILABLE_TRY_AGAIN\\' | translate}} {{timeoutInterval}} sec.\\n' +\n    '    </div>\\n' +\n    '    <div class=\"pip-error-actions h48 layout-column layout-align-center-center\"\\n' +\n    '         ng-if=\"isCordova\">\\n' +\n    '        <md-button class=\"md-accent\" ng-click=\"onClose($event)\" aria-label=\"CLOSE\" >\\n' +\n    '            {{::\\'ERROR_AVAILABLE_CLOSE\\' | translate}}\\n' +\n    '        </md-button>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('missing_route/missing_route.html',\n    '<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\\n' +\n    '    <div style=\"background-image: url(\\'images/invalid_route.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '    <div class=\"pip-error-text\">{{::\\'ERROR_ROUTE_TITLE\\' | translate}}</div>\\n' +\n    '    <div class=\"pip-error-subtext\">{{::\\'ERROR_ROUTE_SUBTITLE\\' | translate}}</div>\\n' +\n    '\\n' +\n    '    <div class=\"pip-error-actions h48 layout-column layout-align-center-center\">\\n' +\n    '        <md-button aria-label=\"CONTINUE\" class=\"md-accent\" ng-click=\"onContinue($event)\">\\n' +\n    '            {{::\\'ERROR_ROUTE_CONTINUE\\' | translate}}\\n' +\n    '        </md-button>\\n' +\n    '    </div>\\n' +\n    '    <div class=\"h48\" ng-if=\"url\"><a ng-href=\"{{url}}\">\\n' +\n    '        {{::\\'ERROR_ROUTE_TRY_AGAIN\\' | translate }}: {{url}}\\n' +\n    '    </a></div>\\n' +\n    '    <div class=\"h48\" ng-if=\"urlBack\"><a ng-href=\"{{urlBack}}\">\\n' +\n    '        {{::\\'ERROR_ROUTE_GO_BACK\\' | translate }}: {{urlBack}}\\n' +\n    '    </a></div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('no_connection/no_connection.html',\n    '<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\\n' +\n    '    <div style=\"background-image: url(\\'images/no_response.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '    <div class=\"pip-error-text\">{{::\\'ERROR_RESPONDING_TITLE\\' | translate}}</div>\\n' +\n    '    <div class=\"pip-error-subtext\">{{::\\'ERROR_RESPONDING_SUBTITLE\\' | translate}}</div>\\n' +\n    '\\n' +\n    '    <div class=\"pip-error-actions h48 layout-column layout-align-center-center\">\\n' +\n    '        <md-button aria-label=\"RETRY\" class=\"md-accent\" ng-click=\"onRetry($event)\">\\n' +\n    '            {{::\\'ERROR_RESPONDING_RETRY\\' | translate}}\\n' +\n    '        </md-button>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('no_connection/pip_no_connection_panel.html',\n    '    <div class=\"pip-empty pip-error layout-column layout-align-center-center flex\">\\n' +\n    '        <img src=\"images/no_response.svg\" class=\"pip-pic block\" >\\n' +\n    '        \\n' +\n    '            <div class=\"pip-error-text\">{{::\\'ERROR_RESPONDING_TITLE\\' | translate}}</div>\\n' +\n    '            <div class=\"pip-error-subtext\">{{::\\'ERROR_RESPONDING_SUBTITLE\\' | translate}}</div>\\n' +\n    '\\n' +\n    '            <div class=\"pip-error-actions h48 layout-column layout-align-center-center\">\\n' +\n    '                <md-button aria-label=\"RETRY\" class=\"md-accent\" ng-click=\"onRetry($event)\">\\n' +\n    '                    {{::\\'ERROR_RESPONDING_RETRY\\' | translate}}\\n' +\n    '                </md-button>\\n' +\n    '            </div>\\n' +\n    '    </div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('unknown/unknown.html',\n    '<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\\n' +\n    '    <div style=\"background-image: url(\\'images/unknown_error.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '    <div class=\"pip-error-text\">{{::\\'ERROR_UNKNOWN_TITLE\\' | translate}}</div>\\n' +\n    '    <div class=\"pip-error-subtext\">{{::\\'ERROR_UNKNOWN_SUBTITLE\\' | translate}}</div>\\n' +\n    '\\n' +\n    '    <div class=\"pip-error-subtext\" ng-if=\"showError && error_details && error_details.status\">\\n' +\n    '        <div ng-if=\"error_details.code\">Code: {{error_details.code}}</div>\\n' +\n    '        <div ng-if=\"error_details.description\">Description: {{error_details.description}}</div>\\n' +\n    '        <div ng-if=\"error_details.status\">HTTP status: {{error_details.status}}</div>\\n' +\n    '        <div ng-if=\"error_details.server_stacktrace\">Server stacktrace: {{error_details.server_stacktrace}}</div>\\n' +\n    '        <div ng-if=\"error_details.client_stacktrace\">Client stacktrace stacktrace: {{error_details.client_stacktrace}}</div>\\n' +\n    '    </div>\\n' +\n    '    <div class=\"pip-error-actions layout-column layout-align-center-center\">\\n' +\n    '        <div class=\"h48\" ng-if=\"isCordova\">\\n' +\n    '            <md-button aria-label=\"CLOSE\" class=\"md-accent\" ng-click=\"onClose($event)\">\\n' +\n    '                {{::\\'ERROR_UNKNOWN_CLOSE\\' | translate}}\\n' +\n    '            </md-button>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"h48\">\\n' +\n    '            <md-button aria-label=\"DETAILS\" class=\"md-accent\" ng-click=\"onDetails($event)\">\\n' +\n    '                {{::\\'ERROR_UNKNOWN_DETAILS\\' | translate}}\\n' +\n    '            </md-button>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipErrors.Templates');\n} catch (e) {\n  module = angular.module('pipErrors.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('unsupported/unsupported.html',\n    '<div class=\"pip-error pip-empty layout-column flex layout-align-center-center\">\\n' +\n    '\\n' +\n    '    <div class=\"pip-error-text\">{{::\\'ERROR_UNSUPPORTED_TITLE\\' | translate}}</div>\\n' +\n    '    <div class=\"pip-error-subtext\">\\n' +\n    '        {{::\\'ERROR_UNSUPPORTED_SUBTITLE\\' | translate}}\\n' +\n    '    </div>\\n' +\n    '    <div class=\"pip-error-details layout-row layout-align-center-center\" ng-if=\"$mdMedia(\\'gt-xs\\')\">\\n' +\n    '        <div class=\"pip-error-details-item layout-column layout-align-center-center\">\\n' +\n    '            <div style=\"background-image: url(\\'images/ie.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '            <div class=\"h64 tp16 bp16\">\\n' +\n    '                <a class=\"text-body2 m0\" target=\"_blank\"\\n' +\n    '                   href=\"https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx\">\\n' +\n    '                    {{::\\'ERROR_UNSUPPORTED_IE\\' | translate}}\\n' +\n    '                </a>\\n' +\n    '                <p class=\"text-body1 m0\"> {{::\\'ERROR_UNSUPPORTED_IE_VER\\' | translate}}</p>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-error-details-item layout-column layout-align-center-center\">\\n' +\n    '            <div style=\"background-image: url(\\'images/fm.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '            <div class=\"h64 tp16 bp16\">\\n' +\n    '                <a class=\"text-body2 m0\" target=\"_blank\"\\n' +\n    '                   href=\"https://www.mozilla.org/ru/firefox/new/\">\\n' +\n    '                    {{::\\'ERROR_UNSUPPORTED_FM\\' | translate}}\\n' +\n    '                </a>\\n' +\n    '                <p class=\"text-body1 m0\"> {{::\\'ERROR_UNSUPPORTED_FM_VER\\' | translate}}</p>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-error-details-item layout-column layout-align-center-center\">\\n' +\n    '            <div style=\"background-image: url(\\'images/gc.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '            <div class=\"h64 tp16 bp16\">\\n' +\n    '                <a class=\"text-body2 m0\" target=\"_blank\"\\n' +\n    '                   href=\"https://www.google.com/chrome/browser/desktop/index.html?platform=win64#\">\\n' +\n    '                    {{::\\'ERROR_UNSUPPORTED_GC\\' | translate}}\\n' +\n    '                </a>\\n' +\n    '                <p class=\"text-body1 m0\"> {{::\\'ERROR_UNSUPPORTED_GC_VER\\' | translate}}</p>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-error-details-item layout-column layout-align-center-center\">\\n' +\n    '            <div style=\"background-image: url(\\'images/o.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '            <div class=\"h64 tp16 bp16\">\\n' +\n    '                <a class=\"text-body2 m0\" target=\"_blank\"\\n' +\n    '                   href=\"http://www.opera.com/ru/download\">\\n' +\n    '                    {{::\\'ERROR_UNSUPPORTED_O\\' | translate}}\\n' +\n    '                </a>\\n' +\n    '                <p class=\"text-body1 m0\"> {{::\\'ERROR_UNSUPPORTED_O_VER\\' | translate}}</p>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <div class=\"pip-error-details\" ng-if=\"$mdMedia(\\'xs\\')\">\\n' +\n    '        <div class=\"layout-row layout-align-center-center\">\\n' +\n    '            <div class=\"pip-error-details-item layout-column layout-align-center-center\">\\n' +\n    '                <div style=\"background-image: url(\\'images/ie.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '                <div class=\"h64 tp16 bp16\">\\n' +\n    '                    <a class=\"text-body2 m0\" target=\"_blank\"\\n' +\n    '                       href=\"https://www.microsoft.com/en-us/download/internet-explorer-11-for-windows-7-details.aspx\">\\n' +\n    '                        {{::\\'ERROR_UNSUPPORTED_IE\\' | translate}}\\n' +\n    '                    </a>\\n' +\n    '                    <p class=\"text-body1 m0\"> {{::\\'ERROR_UNSUPPORTED_IE_VER\\' | translate}}</p>\\n' +\n    '                </div>\\n' +\n    '            </div>\\n' +\n    '            <div class=\"pip-error-details-item layout-column layout-align-center-center\">\\n' +\n    '                <div style=\"background-image: url(\\'images/fm.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '                <div class=\"h64 tp16 bp16\">\\n' +\n    '                    <a class=\"text-body2 m0\" target=\"_blank\"\\n' +\n    '                       href=\"https://www.mozilla.org/ru/firefox/new/\">\\n' +\n    '                        {{::\\'ERROR_UNSUPPORTED_FM\\' | translate}}\\n' +\n    '                    </a>\\n' +\n    '                    <p class=\"text-body1 m0\"> {{::\\'ERROR_UNSUPPORTED_FM_VER\\' | translate}}</p>\\n' +\n    '                </div>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"tm16 layout-row layout-align-center-center\">\\n' +\n    '            <div class=\"pip-error-details-item layout-column layout-align-center-center\">\\n' +\n    '                <div style=\"background-image: url(\\'images/gc.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '                <div class=\"h64 tp16 bp16\">\\n' +\n    '                    <a class=\"text-body2 m0\" target=\"_blank\"\\n' +\n    '                       href=\"https://www.google.com/chrome/browser/desktop/index.html?platform=win64#\">\\n' +\n    '                        {{::\\'ERROR_UNSUPPORTED_GC\\' | translate}}\\n' +\n    '                    </a>\\n' +\n    '                    <p class=\"text-body1 m0\"> {{::\\'ERROR_UNSUPPORTED_GC_VER\\' | translate}}</p>\\n' +\n    '                </div>\\n' +\n    '            </div>\\n' +\n    '            <div class=\"pip-error-details-item layout-column layout-align-center-center\">\\n' +\n    '                <div style=\"background-image: url(\\'images/o.svg\\');\" class=\"pip-pic\"></div>\\n' +\n    '                <div class=\"h64 tp16 bp16\">\\n' +\n    '                    <a class=\"text-body2 m0\" target=\"_blank\"\\n' +\n    '                       href=\"http://www.opera.com/ru/download\">\\n' +\n    '                        {{::\\'ERROR_UNSUPPORTED_O\\' | translate}}\\n' +\n    '                    </a>\\n' +\n    '                    <p class=\"text-body1 m0\"> {{::\\'ERROR_UNSUPPORTED_O_VER\\' | translate}}</p>\\n' +\n    '                </div>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n","/**\r\n * @file Registration of all error handling components\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipErrorHandling', [\r\n        'pipErrors.Pages',\r\n        'pipNoConnectionPanel'\r\n    ]);\r\n    \r\n})();","/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Pages', [\r\n        'pipAppBar', 'pipRest.State', 'pipTransactions', 'pipRest', 'ngMaterial', \r\n        'pipErrors.Strings', 'pipErrors.NoConnection', 'pipErrors.MissingRoute', 'pipErrors.Unsupported',\r\n        'pipErrors.Unknown', 'pipErrors.Maintenance', 'pipErrors.Templates'\r\n    ]);\r\n\r\n    thisModule.config(\r\n        ['pipAuthStateProvider', function (pipAuthStateProvider) {\r\n            // Configure module routes\r\n            pipAuthStateProvider\r\n                .state('errors_no_connection', {\r\n                    url: '/errors/no_connection',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    auth: false,\r\n                    controller: 'pipErrorNoConnectionController',\r\n                    templateUrl: 'no_connection/no_connection.html'\r\n                })\r\n                .state('errors_maintenance', {\r\n                    url: '/errors/maintenance',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    auth: false,\r\n                    controller: 'pipErrorMaintenanceController',\r\n                    templateUrl: 'maintenance/maintenance.html'\r\n                })\r\n                .state('errors_missing_route', {\r\n                    url: '/errors/missing_route',\r\n                    params: {\r\n                        unfoundState: null,\r\n                        fromState: null\r\n                    },\r\n                    auth: true,\r\n                    controller: 'pipErrorMissingRouteController',\r\n                    templateUrl: 'missing_route/missing_route.html'\r\n                })\r\n                .state('errors_unsupported', {\r\n                    url: '/errors/unsupported',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    auth: false,\r\n                    controller: 'pipErrorUnsupportedController',\r\n                    templateUrl: 'unsupported/unsupported.html'\r\n                })\r\n                .state('errors_unknown', {\r\n                    url: '/errors/unknown',\r\n                    params: {\r\n                        error: null\r\n                    },\r\n                    auth: false,\r\n                    controller: 'pipErrorUnknownController',\r\n                    templateUrl: 'unknown/unknown.html'\r\n                });\r\n        }]);\r\n\r\n})();","/**\r\n * @file Errors string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Strings', ['pipTranslate']);\r\n\r\n    thisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n\r\n        // Set translation strings for the module\r\n        pipTranslateProvider.translations('en', {\r\n            'ERROR_ROUTE_TITLE': 'Sorry, the page isn\\'t available',\r\n            'ERROR_ROUTE_SUBTITLE': 'The link you followed may be broken, or the page may have been removed.',\r\n            'ERROR_ROUTE_CONTINUE': 'Continue',\r\n            'ERROR_ROUTE_TRY_AGAIN': 'Try again',\r\n            'ERROR_ROUTE_GO_BACK': 'Go Back',\r\n            'ERROR_ROUTE_PAGE_TITLE': 'Wrong page',\r\n\r\n            'ERROR_UNKNOWN_TITLE': 'Oops. Something went wrong',\r\n            'ERROR_UNKNOWN_SUBTITLE': 'Unknown error occurred, but don\\'t worry we already have been notified.',\r\n            'ERROR_UNKNOWN_CLOSE': 'Close',\r\n            'ERROR_UNKNOWN_DETAILS': 'Details',\r\n\r\n            'ERROR_AVAILABLE_TITLE': 'The server is on maintenance',\r\n            'ERROR_AVAILABLE_SUBTITLE': 'Sorry for the inconvenience. This application is undergoing maintenance for ' +\r\n                                            'a short period. We\\'ll be back soon. Thank for your patience.',\r\n            'ERROR_AVAILABLE_CLOSE': 'Close',\r\n            'ERROR_AVAILABLE_TRY_AGAIN': 'Try after',\r\n\r\n            'ERROR_RESPONDING_TITLE': 'No connection to the server',\r\n            'ERROR_RESPONDING_SUBTITLE': 'Unable to connect to the server. Check your Internet connection and try again.',\r\n            'ERROR_RESPONDING_RETRY': 'Retry',\r\n\r\n            'ERROR_UNSUPPORTED_TITLE': 'This browser is not supported',\r\n            'ERROR_UNSUPPORTED_SUBTITLE': 'Our application using the latest technology. This makes the application faster ' +\r\n                                          'and easier to use. Unfortunately, your browser doesn\\'t support those ' +\r\n                                          'technologies. Download on of these great browsers and you\\'ll be on your way:',\r\n            'ERROR_UNSUPPORTED_O': 'Opera',\r\n            'ERROR_UNSUPPORTED_O_VER': 'Version 36+',\r\n            'ERROR_UNSUPPORTED_IE': 'Internet Explorer',\r\n            'ERROR_UNSUPPORTED_IE_VER': 'Version 11+',\r\n            'ERROR_UNSUPPORTED_GC': 'Google Chrome',\r\n            'ERROR_UNSUPPORTED_GC_VER': 'Version 48+',\r\n            'ERROR_UNSUPPORTED_FM': 'Mozilla Firefox',\r\n            'ERROR_UNSUPPORTED_FM_VER': 'Version 45+'\r\n\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'ERROR_ROUTE_TITLE': 'Sorry, the page isn\\'t available',\r\n            'ERROR_ROUTE_SUBTITLE': 'The link you followed may be broken, or the page may have been removed.',\r\n            'ERROR_ROUTE_CONTINUE': 'Continue',\r\n            'ERROR_ROUTE_TRY_AGAIN': 'Try again',\r\n            'ERROR_ROUTE_GO_BACK': 'Go Back',\r\n            'ERROR_ROUTE_PAGE_TITLE': 'Wrong page',\r\n\r\n            'ERROR_UNKNOWN_TITLE': 'Oops. Something went wrong',\r\n            'ERROR_UNKNOWN_SUBTITLE': 'Unknown error occurred, but don\\'t worry we already have been notified.',\r\n            'ERROR_UNKNOWN_CLOSE': 'Close',\r\n            'ERROR_UNKNOWN_DETAILS': 'Details',\r\n\r\n            'ERROR_AVAILABLE_TITLE': 'The server is on maintenance',\r\n            'ERROR_AVAILABLE_SUBTITLE': 'Sorry for the inconvenience. This application is undergoing maintenance for ' +\r\n            'a short period. We\\'ll be back soon. Thank for your patience.',\r\n            'ERROR_AVAILABLE_CLOSE': 'Close',\r\n            'ERROR_AVAILABLE_TRY_AGAIN': 'Try after',\r\n\r\n            'ERROR_RESPONDING_TITLE': 'No connection to the server',\r\n            'ERROR_RESPONDING_SUBTITLE': 'Unable to connect to server. Check your Internet connection and try again.',\r\n            'ERROR_RESPONDING_RETRY': 'Retry',\r\n\r\n            'ERROR_UNSUPPORTED_TITLE': 'This browser is not supported',\r\n            'ERROR_UNSUPPORTED_SUBTITLE': 'Our application using the latest technology. This makes the application faster ' +\r\n            'and easier to use. Unfortunately, your browser doesn\\'t support those ' +\r\n            'technologies. Download on of these great browsers and you\\'ll be on your way:',\r\n            'ERROR_UNSUPPORTED_O': 'Opera',\r\n            'ERROR_UNSUPPORTED_O_VER': 'Version 35+',\r\n            'ERROR_UNSUPPORTED_IE': 'Internet Explorer',\r\n            'ERROR_UNSUPPORTED_IE_VER': 'Version 11+',\r\n            'ERROR_UNSUPPORTED_GC': 'Google Chrome',\r\n            'ERROR_UNSUPPORTED_GC_VER': 'Version 47+',\r\n            'ERROR_UNSUPPORTED_FM': 'Mozilla Firefox',\r\n            'ERROR_UNSUPPORTED_FM_VER': 'Version 43+'\r\n\r\n        });\r\n    }]);\r\n\r\n})();","/**\r\n * @file Maintenance error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Maintenance', []);\r\n\r\n    thisModule.controller('pipErrorMaintenanceController', ['$scope', '$state', '$rootScope', 'pipAppBar', function ($scope, $state, $rootScope, pipAppBar) {\r\n\r\n        $rootScope.$routing = false;\r\n        $scope.isCordova = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n        $scope.timeoutInterval = $scope.error && $scope.error.config &&\r\n                        $scope.error.config.params && $scope.error.config.params.interval ? $scope.error.config.params.interval : 0;\r\n\r\n        $scope.onClose = onClose;\r\n\r\n        return;\r\n\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_AVAILABLE_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n        function onClose() {\r\n\r\n        };\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Missing route error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.MissingRoute', []);\r\n\r\n    thisModule.controller('pipErrorMissingRouteController', ['$scope', '$state', '$rootScope', 'pipAppBar', 'pipAuthState', function ($scope, $state, $rootScope, pipAppBar, pipAuthState) {\r\n\r\n        appHeader();\r\n        $rootScope.$routing = false;\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.fromState : {};\r\n        $scope.unfoundState = $state && $state.params ?  $state.params.unfoundState : {};\r\n        $scope.url = $scope.unfoundState && $scope.unfoundState.to ? $state.href($scope.unfoundState.to, $scope.unfoundState.toParams, {absolute: true}) : '';\r\n        $scope.urlBack = $scope.fromState && $scope.fromState.to ? $state.href($scope.fromState.to, $scope.fromState.fromParams, {absolute: true}) : '';\r\n\r\n        $scope.onContinue = onContinue;\r\n\r\n        return;\r\n\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_ROUTE_PAGE_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n        function onContinue() {\r\n            pipAuthState.goToAuthorized();\r\n        };\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file No connection error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.NoConnection', []);\r\n\r\n    thisModule.controller('pipErrorNoConnectionController', ['$scope', '$state', '$rootScope', '$window', 'pipAppBar', function ($scope, $state, $rootScope, $window, pipAppBar) {\r\n\r\n        $rootScope.$routing = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n\r\n        $scope.onRetry = onRetry;\r\n\r\n        return;\r\n\r\n        function onRetry() {\r\n            $window.history.back();\r\n        };\r\n\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_RESPONDING_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n    }]);\r\n\r\n\r\n})();\r\n","/**\r\n * @file No Connection Error panel\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipNoConnectionPanel\", []);\r\n\r\n    thisModule.directive('pipNoConnectionPanel',\r\n        function () {\r\n            return {\r\n                restrict: 'E',\r\n                scope: {\r\n                    error: '=pipError',\r\n                    retry: '=pipRetry'\r\n                },\r\n                templateUrl: 'no_connection/pip_no_connection_panel.html',\r\n                controller: 'pipNoConnectionPanelController'\r\n            };\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipNoConnectionPanelController',\r\n        ['$scope', '$element', '$attrs', 'pipTranslate', function ($scope, $element, $attrs, pipTranslate) {\r\n\r\n            $scope.onRetry = onRetry;\r\n\r\n            return;\r\n\r\n            function onRetry() {\r\n                if ($scope.retry && angular.isFunction($scope.retry)) $scope.retry();\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Unknown error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Unknown', []);\r\n\r\n    thisModule.controller('pipErrorUnknownController', ['$scope', '$state', '$rootScope', 'pipAppBar', function ($scope, $state, $rootScope, pipAppBar) {\r\n\r\n        $rootScope.$routing = false;\r\n        $scope.isCordova = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n        $scope.error_details = null;\r\n\r\n        $scope.onDetails = onDetails;\r\n        $scope.onClose = onClose;\r\n\r\n        parseError();\r\n\r\n        return;\r\n\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_UNKNOWN_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n        function parseError() {\r\n            $scope.error_details = {};\r\n            $scope.error_details.code = $scope.error.code;\r\n            $scope.error_details.description = $scope.error.message;\r\n            $scope.error_details.status = $scope.error.status;\r\n\r\n            $scope.error_details.server_stacktrace = function () {\r\n\r\n            };\r\n\r\n            $scope.error_details.client_stacktrace = function () {\r\n\r\n            };\r\n        };\r\n\r\n        function onDetails() {\r\n            $scope.showError = true;\r\n        };\r\n\r\n        function onClose() {\r\n\r\n        };\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Unsupported error controller\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors.Unsupported', []);\r\n\r\n    thisModule.controller('pipErrorUnsupportedController', ['$scope', '$state', '$rootScope', '$mdMedia', 'pipAppBar', function ($scope, $state, $rootScope, $mdMedia, pipAppBar) {\r\n\r\n        $scope.$mdMedia = $mdMedia;\r\n        $rootScope.$routing = false;\r\n        appHeader();\r\n\r\n        $scope.error = $state && $state.params && $state.params.error ?  $state.params.error : {};\r\n\r\n        return;\r\n\r\n        function appHeader() {\r\n            pipAppBar.showMenuNavIcon();\r\n            pipAppBar.showShadow();\r\n            pipAppBar.showTitleBreadcrumb('ERROR_UNSUPPORTED_TITLE', []);\r\n            pipAppBar.showLocalActions(null, []);\r\n        };\r\n\r\n    }]);\r\n\r\n})();\r\n"]}