/*!
 * jQuery Transit - CSS3 transitions and transformations
 * (c) 2011-2014 Rico Sta. Cruz
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */
!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,(function(t){t.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var e=document.createElement("div"),n={};function r(t){if(t in e.style)return t;for(var n=["Moz","Webkit","O","ms"],r=t.charAt(0).toUpperCase()+t.substr(1),i=0;i<n.length;++i){var o=n[i]+r;if(o in e.style)return o}}var i=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=r("transition"),n.transitionDelay=r("transitionDelay"),n.transform=r("transform"),n.transformOrigin=r("transformOrigin"),n.filter=r("Filter"),n.transform3d=(e.style[n.transform]="",e.style[n.transform]="rotateY(90deg)",""!==e.style[n.transform]);var o=n.transitionEnd={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"}[n.transition]||null;for(var a in n)n.hasOwnProperty(a)&&void 0===t.support[a]&&(t.support[a]=n[a]);function s(t){return"string"==typeof t&&this.parse(t),this}function l(t,e,n){!0===e?t.queue(n):e?t.queue(e,n):t.each((function(){n.call(this)}))}function u(e,r,i,o){var a=function(e){var r=[];return t.each(e,(function(e){e=t.camelCase(e),e=f(e=t.transit.propertyMap[e]||t.cssProps[e]||e),n[e]&&(e=f(n[e])),-1===t.inArray(e,r)&&r.push(e)})),r}(e);t.cssEase[i]&&(i=t.cssEase[i]);var s=d(r)+" "+i;parseInt(o,10)>0&&(s+=" "+d(o));var l=[];return t.each(a,(function(t,e){l.push(e+" "+s)})),l.join(", ")}function c(e,r){r||(t.cssNumber[e]=!0),t.transit.propertyMap[e]=n.transform,t.cssHooks[e]={get:function(n){return t(n).css("transit:transform").get(e)},set:function(n,r){var i=t(n).css("transit:transform");i.setFromString(e,r),t(n).css({"transit:transform":i})}}}function f(t){return t.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))}function h(t,e){return"string"!=typeof t||t.match(/^[\-0-9\.]+$/)?""+t+e:t}function d(e){var n=e;return"string"!=typeof n||n.match(/^[\-0-9\.]+/)||(n=t.fx.speeds[n]||t.fx.speeds._default),h(n,"ms")}return e=null,t.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},t.cssHooks["transit:transform"]={get:function(e){return t(e).data("transform")||new s},set:function(e,r){var o=r;o instanceof s||(o=new s(o)),"WebkitTransform"!==n.transform||i?e.style[n.transform]=o.toString():e.style[n.transform]=o.toString(!0),t(e).data("transform",o)}},t.cssHooks.transform={set:t.cssHooks["transit:transform"].set},t.cssHooks.filter={get:function(t){return t.style[n.filter]},set:function(t,e){t.style[n.filter]=e}},t.fn.jquery<"1.8"&&(t.cssHooks.transformOrigin={get:function(t){return t.style[n.transformOrigin]},set:function(t,e){t.style[n.transformOrigin]=e}},t.cssHooks.transition={get:function(t){return t.style[n.transition]},set:function(t,e){t.style[n.transition]=e}}),c("scale"),c("scaleX"),c("scaleY"),c("translate"),c("rotate"),c("rotateX"),c("rotateY"),c("rotate3d"),c("perspective"),c("skewX"),c("skewY"),c("x",!0),c("y",!0),s.prototype={setFromString:function(t,e){var n="string"==typeof e?e.split(","):e.constructor===Array?e:[e];n.unshift(t),s.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);this.setter[t]?this.setter[t].apply(this,e):this[t]=e.join(",")},get:function(t){return this.getter[t]?this.getter[t].apply(this):this[t]||0},setter:{rotate:function(t){this.rotate=h(t,"deg")},rotateX:function(t){this.rotateX=h(t,"deg")},rotateY:function(t){this.rotateY=h(t,"deg")},scale:function(t,e){void 0===e&&(e=t),this.scale=t+","+e},skewX:function(t){this.skewX=h(t,"deg")},skewY:function(t){this.skewY=h(t,"deg")},perspective:function(t){this.perspective=h(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!=t&&(this._translateX=h(t,"px")),null!=e&&(this._translateY=h(e,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");return t[0]&&(t[0]=parseFloat(t[0])),t[1]&&(t[1]=parseFloat(t[1])),t[0]===t[1]?t[0]:t},rotate3d:function(){for(var t=(this.rotate3d||"0,0,0,0deg").split(","),e=0;e<=3;++e)t[e]&&(t[e]=parseFloat(t[e]));return t[3]&&(t[3]=h(t[3],"deg")),t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,(function(t,n,r){e.setFromString(n,r)}))},toString:function(t){var e=[];for(var r in this)if(this.hasOwnProperty(r)){if(!n.transform3d&&("rotateX"===r||"rotateY"===r||"perspective"===r||"transformOrigin"===r))continue;"_"!==r[0]&&(t&&"scale"===r?e.push(r+"3d("+this[r]+",1)"):t&&"translate"===r?e.push(r+"3d("+this[r]+",0)"):e.push(r+"("+this[r]+")"))}return e.join(" ")}},t.fn.transition=t.fn.transit=function(e,r,i,a){var s=this,c=0,f=!0,h=t.extend(!0,{},e);"function"==typeof r&&(a=r,r=void 0),"object"==typeof r&&(i=r.easing,c=r.delay||0,f=void 0===r.queue||r.queue,a=r.complete,r=r.duration),"function"==typeof i&&(a=i,i=void 0),void 0!==h.easing&&(i=h.easing,delete h.easing),void 0!==h.duration&&(r=h.duration,delete h.duration),void 0!==h.complete&&(a=h.complete,delete h.complete),void 0!==h.queue&&(f=h.queue,delete h.queue),void 0!==h.delay&&(c=h.delay,delete h.delay),void 0===r&&(r=t.fx.speeds._default),void 0===i&&(i=t.cssEase._default),r=d(r);var p=u(h,r,i,c),g=t.transit.enabled&&n.transition?parseInt(r,10)+parseInt(c,10):0;if(0===g){return l(s,f,(function(t){s.css(h),a&&a.apply(s),t&&t()})),s}var v={};return l(s,f,(function(e){var r,i,l;this.offsetWidth,r=e,i=!1,l=function(){i&&s.unbind(o,l),g>0&&s.each((function(){this.style[n.transition]=v[this]||null})),"function"==typeof a&&a.apply(s),"function"==typeof r&&r()},g>0&&o&&t.transit.useTransitionEnd?(i=!0,s.bind(o,l)):window.setTimeout(l,g),s.each((function(){g>0&&(this.style[n.transition]=p),t(this).css(h)}))})),this},t.transit.getTransitionValue=u,t})),function(t){if(!t.jQuery){var e=function(t,n){return new e.fn.init(t,n)};e.isWindow=function(t){return null!=t&&t==t.window},e.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?r[o.call(t)]||"object":typeof t},e.isArray=Array.isArray||function(t){return"array"===e.type(t)},e.isPlainObject=function(t){var n;if(!t||"object"!==e.type(t)||t.nodeType||e.isWindow(t))return!1;try{if(t.constructor&&!i.call(t,"constructor")&&!i.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(n in t);return void 0===n||i.call(t,n)},e.each=function(t,e,n){var r=0,i=t.length,o=l(t);if(n){if(o)for(;r<i&&!1!==e.apply(t[r],n);r++);else for(r in t)if(!1===e.apply(t[r],n))break}else if(o)for(;r<i&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},e.data=function(t,r,i){if(void 0===i){var o=(a=t[e.expando])&&n[a];if(void 0===r)return o;if(o&&r in o)return o[r]}else if(void 0!==r){var a=t[e.expando]||(t[e.expando]=++e.uuid);return n[a]=n[a]||{},n[a][r]=i,i}},e.removeData=function(t,r){var i=t[e.expando],o=i&&n[i];o&&e.each(r,(function(t,e){delete o[e]}))},e.extend=function(){var t,n,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==e.type(s)&&(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(o=arguments[l]))for(i in o)t=s[i],s!==(r=o[i])&&(c&&r&&(e.isPlainObject(r)||(n=e.isArray(r)))?(n?(n=!1,a=t&&e.isArray(t)?t:[]):a=t&&e.isPlainObject(t)?t:{},s[i]=e.extend(c,a,r)):void 0!==r&&(s[i]=r));return s},e.queue=function(t,n,r){if(t){n=(n||"fx")+"queue";var i,o,a,s=e.data(t,n);return r?(!s||e.isArray(r)?s=e.data(t,n,(a=o||[],null!=(i=r)&&(l(Object(i))?function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;)t[i++]=e[r++];if(n!=n)for(;void 0!==e[r];)t[i++]=e[r++];t.length=i}(a,"string"==typeof i?[i]:i):[].push.call(a,i)),a)):s.push(r),s):s||[]}},e.dequeue=function(t,n){e.each(t.nodeType?[t]:t,(function(t,r){n=n||"fx";var i=e.queue(r,n),o=i.shift();"inprogress"===o&&(o=i.shift()),o&&("fx"===n&&i.unshift("inprogress"),o.call(r,(function(){e.dequeue(r,n)})))}))},e.fn=e.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function t(){for(var t=this.offsetParent||document;t&&"html"===!t.nodeType.toLowerCase&&"static"===t.style.position;)t=t.offsetParent;return t||document}var n=this[0],t=t.apply(n),r=this.offset(),i=/^(?:body|html)$/i.test(t.nodeName)?{top:0,left:0}:e(t).offset();return r.top-=parseFloat(n.style.marginTop)||0,r.left-=parseFloat(n.style.marginLeft)||0,t.style&&(i.top+=parseFloat(t.style.borderTopWidth)||0,i.left+=parseFloat(t.style.borderLeftWidth)||0),{top:r.top-i.top,left:r.left-i.left}}};var n={};e.expando="velocity"+(new Date).getTime(),e.uuid=0;for(var r={},i=r.hasOwnProperty,o=r.toString,a="Boolean Number String Function Array Date RegExp Object Error".split(" "),s=0;s<a.length;s++)r["[object "+a[s]+"]"]=a[s].toLowerCase();e.fn.init.prototype=e.fn,t.Velocity={Utilities:e}}function l(t){var n=t.length,r=e.type(t);return"function"!==r&&!e.isWindow(t)&&(!(1!==t.nodeType||!n)||("array"===r||0===n||"number"==typeof n&&n>0&&n-1 in t))}}(window),function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):t()}((function(){return function(t,e,n,r){var i,o=function(){if(n.documentMode)return n.documentMode;for(var t=7;t>4;t--){var e=n.createElement("div");if(e.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",e.getElementsByTagName("span").length)return e=null,t}}(),a=(i=0,e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){var e,n=(new Date).getTime();return e=Math.max(0,16-(n-i)),i=n+e,setTimeout((function(){t(n+e)}),e)});function s(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function l(t){return c.isWrapped(t)?t=[].slice.call(t):c.isNode(t)&&(t=[t]),t}var u,c={isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return"object"==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&void 0!==t.length&&(0===t.length||"object"==typeof t[0]&&t[0].nodeType>0)},isWrapped:function(t){return t&&(t.jquery||e.Zepto&&e.Zepto.zepto.isZ(t))},isSVG:function(t){return e.SVGElement&&t instanceof e.SVGElement},isEmptyObject:function(t){for(var e in t)return!1;return!0}},f=!1;if(t.fn&&t.fn.jquery?(u=t,f=!0):u=e.Velocity.Utilities,o<=8&&!f)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(!(o<=7)){var h={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:e.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:u,Redirects:{},Easings:{},Promise:e.Promise,defaults:{queue:"",duration:400,easing:"swing",begin:void 0,complete:void 0,progress:void 0,display:void 0,visibility:void 0,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){u.data(t,"velocity",{isSVG:c.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:1,patch:0},debug:!1};void 0!==e.pageYOffset?(h.State.scrollAnchor=e,h.State.scrollPropertyLeft="pageXOffset",h.State.scrollPropertyTop="pageYOffset"):(h.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,h.State.scrollPropertyLeft="scrollLeft",h.State.scrollPropertyTop="scrollTop");var d=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*r,n.v=n.v+u*r,n}return function t(e,r,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,l.tension=e,l.friction=r,a=(o=null!==i)?(c=t(e,r))/i*.016:.016;s=n(s||l,a),u.push(1+s.x),c+=16,Math.abs(s.x)>1e-4&&Math.abs(s.v)>1e-4;);return o?function(t){return u[t*(u.length-1)|0]}:c}}();h.Easings={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},u.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],(function(t,e){h.Easings[e[0]]=b.apply(null,e[1])}));var p=h.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t=0;t<p.Lists.colors.length;t++){var e="color"===p.Lists.colors[t]?"0 0 0 1":"255 255 255 1";p.Hooks.templates[p.Lists.colors[t]]=["Red Green Blue Alpha",e]}var n,r,i;if(o)for(n in p.Hooks.templates){i=(r=p.Hooks.templates[n])[0].split(" ");var a=r[1].match(p.RegEx.valueSplit);"Color"===i[0]&&(i.push(i.shift()),a.push(a.shift()),p.Hooks.templates[n]=[i.join(" "),a.join(" ")])}for(n in p.Hooks.templates)for(var t in i=(r=p.Hooks.templates[n])[0].split(" ")){var s=n+i[t],l=t;p.Hooks.registered[s]=[n,l]}},getRoot:function(t){var e=p.Hooks.registered[t];return e?e[0]:t},cleanRootPropertyValue:function(t,e){return p.RegEx.valueUnwrap.test(e)&&(e=e.match(p.RegEx.valueUnwrap)[1]),p.Values.isCSSNullValue(e)&&(e=p.Hooks.templates[t][1]),e},extractValue:function(t,e){var n=p.Hooks.registered[t];if(n){var r=n[0],i=n[1];return(e=p.Hooks.cleanRootPropertyValue(r,e)).toString().match(p.RegEx.valueSplit)[i]}return e},injectValue:function(t,e,n){var r=p.Hooks.registered[t];if(r){var i,o=r[0],a=r[1];return(i=(n=p.Hooks.cleanRootPropertyValue(o,n)).toString().match(p.RegEx.valueSplit))[a]=e,i.join(" ")}return n}},Normalizations:{registered:{clip:function(t,e,n){switch(t){case"name":return"clip";case"extract":var r;return r=p.RegEx.wrappedValueAlreadyExtracted.test(n)?n:(r=n.toString().match(p.RegEx.valueUnwrap))?r[1].replace(/,(\s+)?/g," "):n;case"inject":return"rect("+n+")"}},blur:function(t,e,n){switch(t){case"name":return"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var i=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=i?i[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(t,e,n){if(o<=8)switch(t){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=r?r[1]/100:1;case"inject":return e.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(t){case"name":return"opacity";case"extract":case"inject":return n}}},register:function(){o<=9||h.State.isGingerbread||(p.Lists.transformsBase=p.Lists.transformsBase.concat(p.Lists.transforms3D));for(var t=0;t<p.Lists.transformsBase.length;t++)!function(){var e=p.Lists.transformsBase[t];p.Normalizations.registered[e]=function(t,n,r){switch(t){case"name":return"transform";case"extract":return void 0===m(n)||void 0===m(n).transformCache[e]?/^scale/i.test(e)?1:0:m(n).transformCache[e].replace(/[()]/g,"");case"inject":var i=!1;switch(e.substr(0,e.length-1)){case"translate":i=!/(%|px|em|rem|vw|vh|\d)$/i.test(r);break;case"scal":case"scale":h.State.isAndroid&&void 0===m(n).transformCache[e]&&r<1&&(r=1),i=!/(\d)$/i.test(r);break;case"skew":case"rotate":i=!/(deg|\d)$/i.test(r)}return i||(m(n).transformCache[e]="("+r+")"),m(n).transformCache[e]}}}();for(t=0;t<p.Lists.colors.length;t++)!function(){var e=p.Lists.colors[t];p.Normalizations.registered[e]=function(t,n,r){switch(t){case"name":return e;case"extract":var i;if(p.RegEx.wrappedValueAlreadyExtracted.test(r))i=r;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(r)?a=void 0!==s[r]?s[r]:s.black:p.RegEx.isHex.test(r)?a="rgb("+p.Values.hexToRgb(r).join(" ")+")":/^rgba?\(/i.test(r)||(a=s.black),i=(a||r).toString().match(p.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return o<=8||3!==i.split(" ").length||(i+=" 1"),i;case"inject":return o<=8?4===r.split(" ").length&&(r=r.split(/\s+/).slice(0,3).join(" ")):3===r.split(" ").length&&(r+=" 1"),(o<=8?"rgb":"rgba")+"("+r.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()}))},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(o||h.State.isAndroid&&!h.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(h.State.prefixMatches[t])return[h.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],n=0,r=e.length;n<r;n++){var i;if(i=0===n?t:e[n]+t.replace(/^\w/,(function(t){return t.toUpperCase()})),c.isString(h.State.prefixElement.style[i]))return h.State.prefixMatches[t]=i,[i,!0]}return[t,!1]}},Values:{hexToRgb:function(t){var e;return t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r})),(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){var e=t&&t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?"inline":/^(li)$/i.test(e)?"list-item":/^(tr)$/i.test(e)?"table-row":"block"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=(t.className.length?" ":"")+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(t,n,r,i){function a(t,n){var r=0;if(o<=8)r=u.css(t,n);else{var s,l=!1;function c(){l&&p.setPropertyValue(t,"display","none")}if(/^(width|height)$/.test(n)&&0===p.getPropertyValue(t,"display")&&(l=!0,p.setPropertyValue(t,"display",p.Values.getDisplayType(t))),!i){if("height"===n&&"border-box"!==p.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var f=t.offsetHeight-(parseFloat(p.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(p.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(p.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(p.getPropertyValue(t,"paddingBottom"))||0);return c(),f}if("width"===n&&"border-box"!==p.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var d=t.offsetWidth-(parseFloat(p.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(p.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(p.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(p.getPropertyValue(t,"paddingRight"))||0);return c(),d}}s=void 0===m(t)?e.getComputedStyle(t,null):m(t).computedStyle?m(t).computedStyle:m(t).computedStyle=e.getComputedStyle(t,null),(o||h.State.isFirefox)&&"borderColor"===n&&(n="borderTopColor"),""!==(r=9===o&&"filter"===n?s.getPropertyValue(n):s[n])&&null!==r||(r=t.style[n]),c()}if("auto"===r&&/^(top|right|bottom|left)$/i.test(n)){var g=a(t,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(r=u(t).position()[n]+"px")}return r}var s;if(p.Hooks.registered[n]){var l=n,c=p.Hooks.getRoot(l);void 0===r&&(r=p.getPropertyValue(t,p.Names.prefixCheck(c)[0])),p.Normalizations.registered[c]&&(r=p.Normalizations.registered[c]("extract",t,r)),s=p.Hooks.extractValue(l,r)}else if(p.Normalizations.registered[n]){var f,d;"transform"!==(f=p.Normalizations.registered[n]("name",t))&&(d=a(t,p.Names.prefixCheck(f)[0]),p.Values.isCSSNullValue(d)&&p.Hooks.templates[n]&&(d=p.Hooks.templates[n][1])),s=p.Normalizations.registered[n]("extract",t,d)}return/^[\d-]/.test(s)||(s=m(t)&&m(t).isSVG&&p.Names.SVGAttribute(n)?/^(height|width)$/i.test(n)?t.getBBox()[n]:t.getAttribute(n):a(t,p.Names.prefixCheck(n)[0])),p.Values.isCSSNullValue(s)&&(s=0),h.debug>=2&&console.log("Get "+n+": "+s),s},setPropertyValue:function(t,n,r,i,a){var s=n;if("scroll"===n)a.container?a.container["scroll"+a.direction]=r:"Left"===a.direction?e.scrollTo(r,a.alternateValue):e.scrollTo(a.alternateValue,r);else if(p.Normalizations.registered[n]&&"transform"===p.Normalizations.registered[n]("name",t))p.Normalizations.registered[n]("inject",t,r),s="transform",r=m(t).transformCache[n];else{if(p.Hooks.registered[n]){var l=n,u=p.Hooks.getRoot(n);i=i||p.getPropertyValue(t,u),r=p.Hooks.injectValue(l,r,i),n=u}if(p.Normalizations.registered[n]&&(r=p.Normalizations.registered[n]("inject",t,r),n=p.Normalizations.registered[n]("name",t)),s=p.Names.prefixCheck(n)[0],o<=8)try{t.style[s]=r}catch(t){h.debug&&console.log("Browser does not support ["+r+"] for ["+s+"]")}else m(t)&&m(t).isSVG&&p.Names.SVGAttribute(n)?t.setAttribute(n,r):t.style[s]=r;h.debug>=2&&console.log("Set "+n+" ("+s+"): "+r)}return[s,r]},flushTransformCache:function(t){var e="";if((o||h.State.isAndroid&&!h.State.isChrome)&&m(t).isSVG){function n(e){return parseFloat(p.getPropertyValue(t,e))}var r={translate:[n("translateX"),n("translateY")],skewX:[n("skewX")],skewY:[n("skewY")],scale:1!==n("scale")?[n("scale"),n("scale")]:[n("scaleX"),n("scaleY")],rotate:[n("rotateZ"),0,0]};u.each(m(t).transformCache,(function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),r[t]&&(e+=t+"("+r[t].join(" ")+") ",delete r[t])}))}else{var i,a;u.each(m(t).transformCache,(function(n){if(i=m(t).transformCache[n],"transformPerspective"===n)return a=i,!0;9===o&&"rotateZ"===n&&(n="rotate"),e+=n+i+" "})),a&&(e="perspective"+a+" "+e)}p.setPropertyValue(t,"transform",e)}};p.Hooks.register(),p.Normalizations.register(),h.hook=function(t,e,n){var r=void 0;return t=l(t),u.each(t,(function(t,i){if(void 0===m(i)&&h.init(i),void 0===n)void 0===r&&(r=h.CSS.getPropertyValue(i,e));else{var o=h.CSS.setPropertyValue(i,e,n);"transform"===o[0]&&h.CSS.flushTransformCache(i),r=o}})),r};var g=function(){function t(){return r?S.promise||null:i}var r,i,o,a,f,d,v=arguments[0]&&(u.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||c.isString(arguments[0].properties));if(c.isWrapped(this)?(r=!1,o=0,a=this,i=this):(r=!0,o=1,a=v?arguments[0].elements:arguments[0]),a=l(a)){v?(f=arguments[0].properties,d=arguments[0].options):(f=arguments[o],d=arguments[o+1]);var y=a.length,b=0;if("stop"!==f&&!u.isPlainObject(d)){var k=o+1;d={};for(var M=k;M<arguments.length;M++)c.isArray(arguments[M])||!/^(fast|normal|slow)$/i.test(arguments[M])&&!/^\d/.test(arguments[M])?c.isString(arguments[M])||c.isArray(arguments[M])?d.easing=arguments[M]:c.isFunction(arguments[M])&&(d.complete=arguments[M]):d.duration=arguments[M]}var C,S={promise:null,resolver:null,rejecter:null};switch(r&&h.Promise&&(S.promise=new h.Promise((function(t,e){S.resolver=t,S.rejecter=e}))),f){case"scroll":C="scroll";break;case"reverse":C="reverse";break;case"stop":u.each(a,(function(t,e){m(e)&&m(e).delayTimer&&(clearTimeout(m(e).delayTimer.setTimeout),m(e).delayTimer.next&&m(e).delayTimer.next(),delete m(e).delayTimer)}));var A=[];return u.each(h.State.calls,(function(t,e){e&&u.each(e[1],(function(n,r){var i=c.isString(d)?d:"";if(void 0!==d&&e[2].queue!==i)return!0;u.each(a,(function(e,n){n===r&&(void 0!==d&&(u.each(u.queue(n,i),(function(t,e){c.isFunction(e)&&e(null,!0)})),u.queue(n,i,[])),m(n)&&""===i&&u.each(m(n).tweensContainer,(function(t,e){e.endValue=e.currentValue})),A.push(t))}))}))})),u.each(A,(function(t,e){_(e,!0)})),S.promise&&S.resolver(a),t();default:if(!u.isPlainObject(f)||c.isEmptyObject(f)){if(c.isString(f)&&h.Redirects[f]){var L=(T=u.extend({},d)).duration,E=T.delay||0;return!0===T.backwards&&(a=u.extend(!0,[],a).reverse()),u.each(a,(function(t,e){parseFloat(T.stagger)?T.delay=E+parseFloat(T.stagger)*t:c.isFunction(T.stagger)&&(T.delay=E+T.stagger.call(e,t,y)),T.drag&&(T.duration=parseFloat(L)||(/^(callout|transition)/.test(f)?1e3:400),T.duration=Math.max(T.duration*(T.backwards?1-t/y:(t+1)/y),.75*T.duration,200)),h.Redirects[f].call(e,e,T||{},t,y,a,S.promise?S:void 0)})),t()}var P="Velocity: First argument ("+f+") was not a property map, a known action, or a registered redirect. Aborting.";return S.promise?S.rejecter(new Error(P)):console.log(P),t()}C="start"}var T,O,D={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},I=[];if(u.each(a,(function(t,e){c.isNode(e)&&G.call(e)})),(T=u.extend({},h.defaults,d)).loop=parseInt(T.loop),O=2*T.loop-1,T.loop)for(var F=0;F<O;F++){var N={delay:T.delay,progress:T.progress};F===O-1&&(N.display=T.display,N.visibility=T.visibility,N.complete=T.complete),g(a,"reverse",N)}return t()}function G(){var t,r=this,i=u.extend({},h.defaults,d),o={};switch(void 0===m(r)&&h.init(r),parseFloat(i.delay)&&!1!==i.queue&&u.queue(r,i.queue,(function(t){h.velocityQueueEntryFlag=!0,m(r).delayTimer={setTimeout:setTimeout(t,parseFloat(i.delay)),next:t}})),i.duration.toString().toLowerCase()){case"fast":i.duration=200;break;case"normal":i.duration=400;break;case"slow":i.duration=600;break;default:i.duration=parseFloat(i.duration)||1}function l(l){if(i.begin&&0===b)try{i.begin.call(a,a)}catch(t){setTimeout((function(){throw t}),1)}if("scroll"===C){var g,v,_,k=/^x$/i.test(i.axis)?"Left":"Top",M=parseFloat(i.offset)||0;i.container?c.isWrapped(i.container)||c.isNode(i.container)?(i.container=i.container[0]||i.container,_=(g=i.container["scroll"+k])+u(r).position()[k.toLowerCase()]+M):i.container=null:(g=h.State.scrollAnchor[h.State["scrollProperty"+k]],v=h.State.scrollAnchor[h.State["scrollProperty"+("Left"===k?"Top":"Left")]],_=u(r).offset()[k.toLowerCase()]+M),o={scroll:{rootPropertyValue:!1,startValue:g,currentValue:g,endValue:_,unitType:"",easing:i.easing,scrollData:{container:i.container,direction:k,alternateValue:v}},element:r},h.debug&&console.log("tweensContainer (scroll): ",o.scroll,r)}else if("reverse"===C){if(!m(r).tweensContainer)return void u.dequeue(r,i.queue);"none"===m(r).opts.display&&(m(r).opts.display="auto"),"hidden"===m(r).opts.visibility&&(m(r).opts.visibility="visible"),m(r).opts.loop=!1,m(r).opts.begin=null,m(r).opts.complete=null,d.easing||delete i.easing,d.duration||delete i.duration,i=u.extend({},m(r).opts,i);var A=u.extend(!0,{},m(r).tweensContainer);for(var L in A)if("element"!==L){var E=A[L].startValue;A[L].startValue=A[L].currentValue=A[L].endValue,A[L].endValue=E,c.isEmptyObject(d)||(A[L].easing=i.easing),h.debug&&console.log("reverse tweensContainer ("+L+"): "+JSON.stringify(A[L]),r)}o=A}else if("start"===C){function P(t,e){var n=void 0,o=void 0,a=void 0;return c.isArray(t)?(n=t[0],!c.isArray(t[1])&&/^[\d-]/.test(t[1])||c.isFunction(t[1])||p.RegEx.isHex.test(t[1])?a=t[1]:(c.isString(t[1])&&!p.RegEx.isHex.test(t[1])||c.isArray(t[1]))&&(o=e?t[1]:x(t[1],i.duration),void 0!==t[2]&&(a=t[2]))):n=t,e||(o=o||i.easing),c.isFunction(n)&&(n=n.call(r,b,y)),c.isFunction(a)&&(a=a.call(r,b,y)),[n||0,o,a]}for(var T in m(r).tweensContainer&&!0===m(r).isAnimating&&(A=m(r).tweensContainer),u.each(f,(function(t,e){if(RegExp("^"+p.Lists.colors.join("$|^")+"$").test(t)){var n=P(e,!0),r=n[0],i=n[1],o=n[2];if(p.RegEx.isHex.test(r)){for(var a=["Red","Green","Blue"],s=p.Values.hexToRgb(r),l=o?p.Values.hexToRgb(o):void 0,u=0;u<a.length;u++){var c=[s[u]];i&&c.push(i),void 0!==l&&c.push(l[u]),f[t+a[u]]=c}delete f[t]}}})),f){var O=P(f[T]),F=O[0],N=O[1],G=O[2];T=p.Names.camelCase(T);var W=p.Hooks.getRoot(T),B=!1;if(m(r).isSVG||!1!==p.Names.prefixCheck(W)[1]||void 0!==p.Normalizations.registered[W]){(void 0!==i.display&&null!==i.display&&"none"!==i.display||void 0!==i.visibility&&"hidden"!==i.visibility)&&/opacity|filter/.test(T)&&!G&&0!==F&&(G=0),i._cacheValues&&A&&A[T]?(void 0===G&&(G=A[T].endValue+A[T].unitType),B=m(r).rootPropertyValueCache[W]):p.Hooks.registered[T]?void 0===G?(B=p.getPropertyValue(r,W),G=p.getPropertyValue(r,T,B)):B=p.Hooks.templates[W][1]:void 0===G&&(G=p.getPropertyValue(r,T));var j,z,R,H=!1;if(G=(j=$(T,G))[0],R=j[1],F=(j=$(T,F))[0].replace(/^([+-\/*])=/,(function(t,e){return H=e,""})),z=j[1],G=parseFloat(G)||0,F=parseFloat(F)||0,"%"===z&&(/^(fontSize|lineHeight)$/.test(T)?(F/=100,z="em"):/^scale/.test(T)?(F/=100,z=""):/(Red|Green|Blue)$/i.test(T)&&(F=F/100*255,z="")),/[\/*]/.test(H))z=R;else if(R!==z&&0!==G)if(0===F)z=R;else{t=t||U();var V=/margin|padding|left|right|width|text|word|letter/i.test(T)||/X$/.test(T)||"x"===T?"x":"y";switch(R){case"%":G*="x"===V?t.percentToPxWidth:t.percentToPxHeight;break;case"px":break;default:G*=t[R+"ToPx"]}switch(z){case"%":G*=1/("x"===V?t.percentToPxWidth:t.percentToPxHeight);break;case"px":break;default:G*=1/t[z+"ToPx"]}}switch(H){case"+":F=G+F;break;case"-":F=G-F;break;case"*":F*=G;break;case"/":F=G/F}o[T]={rootPropertyValue:B,startValue:G,currentValue:G,endValue:F,unitType:z,easing:N},h.debug&&console.log("tweensContainer ("+T+"): "+JSON.stringify(o[T]),r)}else h.debug&&console.log("Skipping ["+W+"] due to a lack of browser support.");function $(t,e){var n,r;return r=(e||"0").toString().toLowerCase().replace(/[%A-z]+$/,(function(t){return n=t,""})),n||(n=p.Values.getUnitType(t)),[r,n]}function U(){var t={myParent:r.parentNode||n.body,position:p.getPropertyValue(r,"position"),fontSize:p.getPropertyValue(r,"fontSize")},i=t.position===D.lastPosition&&t.myParent===D.lastParent,o=t.fontSize===D.lastFontSize;D.lastParent=t.myParent,D.lastPosition=t.position,D.lastFontSize=t.fontSize;var a={};if(o&&i)a.emToPx=D.lastEmToPx,a.percentToPxWidth=D.lastPercentToPxWidth,a.percentToPxHeight=D.lastPercentToPxHeight;else{var s=m(r).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");h.init(s),t.myParent.appendChild(s),u.each(["overflow","overflowX","overflowY"],(function(t,e){h.CSS.setPropertyValue(s,e,"hidden")})),h.CSS.setPropertyValue(s,"position",t.position),h.CSS.setPropertyValue(s,"fontSize",t.fontSize),h.CSS.setPropertyValue(s,"boxSizing","content-box"),u.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],(function(t,e){h.CSS.setPropertyValue(s,e,"100%")})),h.CSS.setPropertyValue(s,"paddingLeft","100em"),a.percentToPxWidth=D.lastPercentToPxWidth=(parseFloat(p.getPropertyValue(s,"width",null,!0))||1)/100,a.percentToPxHeight=D.lastPercentToPxHeight=(parseFloat(p.getPropertyValue(s,"height",null,!0))||1)/100,a.emToPx=D.lastEmToPx=(parseFloat(p.getPropertyValue(s,"paddingLeft"))||1)/100,t.myParent.removeChild(s)}return null===D.remToPx&&(D.remToPx=parseFloat(p.getPropertyValue(n.body,"fontSize"))||16),null===D.vwToPx&&(D.vwToPx=parseFloat(e.innerWidth)/100,D.vhToPx=parseFloat(e.innerHeight)/100),a.remToPx=D.remToPx,a.vwToPx=D.vwToPx,a.vhToPx=D.vhToPx,h.debug>=1&&console.log("Unit ratios: "+JSON.stringify(a),r),a}}o.element=r}o.element&&(p.Values.addClass(r,"velocity-animating"),I.push(o),""===i.queue&&(m(r).tweensContainer=o,m(r).opts=i),m(r).isAnimating=!0,b===y-1?(h.State.calls.length>1e4&&(h.State.calls=s(h.State.calls)),h.State.calls.push([I,a,i,null,S.resolver]),!1===h.State.isTicking&&(h.State.isTicking=!0,w())):b++)}!1!==h.mock&&(!0===h.mock?i.duration=i.delay=1:(i.duration*=parseFloat(h.mock)||1,i.delay*=parseFloat(h.mock)||1)),i.easing=x(i.easing,i.duration),i.begin&&!c.isFunction(i.begin)&&(i.begin=null),i.progress&&!c.isFunction(i.progress)&&(i.progress=null),i.complete&&!c.isFunction(i.complete)&&(i.complete=null),void 0!==i.display&&null!==i.display&&(i.display=i.display.toString().toLowerCase(),"auto"===i.display&&(i.display=h.CSS.Values.getDisplayType(r))),void 0!==i.visibility&&null!==i.visibility&&(i.visibility=i.visibility.toString().toLowerCase()),i.mobileHA=i.mobileHA&&h.State.isMobile&&!h.State.isGingerbread,!1===i.queue?i.delay?setTimeout(l,i.delay):l():u.queue(r,i.queue,(function(t,e){if(!0===e)return S.promise&&S.resolver(a),!0;h.velocityQueueEntryFlag=!0,l()})),""!==i.queue&&"fx"!==i.queue||"inprogress"===u.queue(r)[0]||u.dequeue(r)}};(h=u.extend(g,h)).animate=g;var v=e.requestAnimationFrame||a;return h.State.isMobile||void 0===n.hidden||n.addEventListener("visibilitychange",(function(){n.hidden?(v=function(t){return setTimeout((function(){t(!0)}),16)},w()):v=e.requestAnimationFrame||a})),t.Velocity=h,t!==e&&(t.fn.velocity=g,t.fn.velocity.defaults=h.defaults),u.each(["Down","Up"],(function(t,e){h.Redirects["slide"+e]=function(t,n,r,i,o,a){var s=u.extend({},n),l=s.begin,c=s.complete,f={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},d={};void 0===s.display&&(s.display="Down"===e?"inline"===h.CSS.Values.getDisplayType(t)?"inline-block":"block":"none"),s.begin=function(){for(var n in l&&l.call(o,o),f){d[n]=t.style[n];var r=h.CSS.getPropertyValue(t,n);f[n]="Down"===e?[r,0]:[0,r]}d.overflow=t.style.overflow,t.style.overflow="hidden"},s.complete=function(){for(var e in d)t.style[e]=d[e];c&&c.call(o,o),a&&a.resolver(o)},h(t,f,s)}})),u.each(["In","Out"],(function(t,e){h.Redirects["fade"+e]=function(t,n,r,i,o,a){var s=u.extend({},n),l={opacity:"In"===e?1:0},c=s.complete;s.complete=r!==i-1?s.begin=null:function(){c&&c.call(o,o),a&&a.resolver(o)},void 0===s.display&&(s.display="In"===e?"auto":"none"),h(this,l,s)}})),h}function m(t){var e=u.data(t,"velocity");return null===e?void 0:e}function y(t){return function(e){return Math.round(e*t)*(1/t)}}function b(t,n,r,i){var o=4,a=.001,s=1e-7,l=10,u=11,c=1/(u-1),f="Float32Array"in e;if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var d=f?new Float32Array(u):new Array(u);function p(t,e){return 1-3*e+3*t}function g(t,e){return 3*e-6*t}function v(t){return 3*t}function m(t,e,n){return((p(e,n)*t+g(e,n))*t+v(e))*t}function y(t,e,n){return 3*p(e,n)*t*t+2*g(e,n)*t+v(e)}function b(e,n){for(var i=0;i<o;++i){var a=y(n,t,r);if(0===a)return n;n-=(m(n,t,r)-e)/a}return n}function x(){for(var e=0;e<u;++e)d[e]=m(e*c,t,r)}function w(e,n,i){var o,a,u=0;do{(o=m(a=n+(i-n)/2,t,r)-e)>0?i=a:n=a}while(Math.abs(o)>s&&++u<l);return a}function _(e){for(var n=0,i=1,o=u-1;i!=o&&d[i]<=e;++i)n+=c;--i;var s=n+(e-d[i])/(d[i+1]-d[i])*c,l=y(s,t,r);return l>=a?b(e,s):0==l?s:w(e,n,n+c)}var k=!1;function M(){k=!0,t==n&&r==i||x()}var C=function(e){return k||M(),t===n&&r===i?e:0===e?0:1===e?1:m(_(e),n,i)};C.getControlPoints=function(){return[{x:t,y:n},{x:r,y:i}]};var S="generateBezier("+[t,n,r,i]+")";return C.toString=function(){return S},C}function x(t,e){var n=t;return c.isString(t)?h.Easings[t]||(n=!1):n=c.isArray(t)&&1===t.length?y.apply(null,t):c.isArray(t)&&2===t.length?d.apply(null,t.concat([e])):!(!c.isArray(t)||4!==t.length)&&b.apply(null,t),!1===n&&(n=h.Easings[h.defaults.easing]?h.defaults.easing:"swing"),n}function w(t){if(t)for(var e=(new Date).getTime(),n=0,r=h.State.calls.length;n<r;n++)if(h.State.calls[n]){var i=h.State.calls[n],o=i[0],a=i[2],s=i[3],l=!!s;s||(s=h.State.calls[n][3]=e-16);for(var f=Math.min((e-s)/a.duration,1),d=0,g=o.length;d<g;d++){var y=o[d],b=y.element;if(m(b)){var x=!1;if(void 0!==a.display&&null!==a.display&&"none"!==a.display){if("flex"===a.display){u.each(["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"],(function(t,e){p.setPropertyValue(b,"display",e)}))}p.setPropertyValue(b,"display",a.display)}for(var k in void 0!==a.visibility&&"hidden"!==a.visibility&&p.setPropertyValue(b,"visibility",a.visibility),y)if("element"!==k){var M,C=y[k],S=c.isString(C.easing)?h.Easings[C.easing]:C.easing;if(1===f)M=C.endValue;else if(M=C.startValue+(C.endValue-C.startValue)*S(f),!l&&M===C.currentValue)continue;if(C.currentValue=M,p.Hooks.registered[k]){var A=p.Hooks.getRoot(k),L=m(b).rootPropertyValueCache[A];L&&(C.rootPropertyValue=L)}var E=p.setPropertyValue(b,k,C.currentValue+(0===parseFloat(M)?"":C.unitType),C.rootPropertyValue,C.scrollData);p.Hooks.registered[k]&&(p.Normalizations.registered[A]?m(b).rootPropertyValueCache[A]=p.Normalizations.registered[A]("extract",null,E[1]):m(b).rootPropertyValueCache[A]=E[1]),"transform"===E[0]&&(x=!0)}a.mobileHA&&void 0===m(b).transformCache.translate3d&&(m(b).transformCache.translate3d="(0px, 0px, 0px)",x=!0),x&&p.flushTransformCache(b)}}void 0!==a.display&&"none"!==a.display&&(h.State.calls[n][2].display=!1),void 0!==a.visibility&&"hidden"!==a.visibility&&(h.State.calls[n][2].visibility=!1),a.progress&&a.progress.call(i[1],i[1],f,Math.max(0,s+a.duration-e),s),1===f&&_(n)}h.State.isTicking&&v(w)}function _(t,e){if(!h.State.calls[t])return!1;for(var n=h.State.calls[t][0],r=h.State.calls[t][1],i=h.State.calls[t][2],o=h.State.calls[t][4],a=!1,s=0,l=n.length;s<l;s++){var c=n[s].element;if(e||i.loop||("none"===i.display&&p.setPropertyValue(c,"display",i.display),"hidden"===i.visibility&&p.setPropertyValue(c,"visibility",i.visibility)),!0!==i.loop&&(void 0===u.queue(c)[1]||!/\.velocityQueueEntryFlag/i.test(u.queue(c)[1]))&&m(c)){m(c).isAnimating=!1,m(c).rootPropertyValueCache={};var f=!1;u.each(p.Lists.transforms3D,(function(t,e){var n=/^scale/.test(e)?1:0,r=m(c).transformCache[e];void 0!==m(c).transformCache[e]&&new RegExp("^\\("+n+"[^.]").test(r)&&(f=!0,delete m(c).transformCache[e])})),i.mobileHA&&(f=!0,delete m(c).transformCache.translate3d),f&&p.flushTransformCache(c),p.Values.removeClass(c,"velocity-animating")}if(!e&&i.complete&&!i.loop&&s===l-1)try{i.complete.call(r,r)}catch(t){setTimeout((function(){throw t}),1)}o&&!0!==i.loop&&o(r),!0!==i.loop||e||(u.each(m(c).tweensContainer,(function(t,e){/^rotate/.test(t)&&360===parseFloat(e.endValue)&&(e.endValue=0,e.startValue=360)})),h(c,"reverse",{loop:!0,delay:i.delay})),!1!==i.queue&&u.dequeue(c,i.queue)}h.State.calls[t]=!1;for(var d=0,g=h.State.calls.length;d<g;d++)if(!1!==h.State.calls[d]){a=!0;break}!1===a&&(h.State.isTicking=!1,delete h.State.calls,h.State.calls=[])}jQuery.fn.velocity=jQuery.fn.animate}(window.jQuery||window.Zepto||window,window,document)})),function(){var t={version:"3.5.17"},e=[].slice,n=function(t){return e.call(t)},r=this.document;function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(r)try{n(r.documentElement.childNodes)[0].nodeType}catch(t){n=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),r)try{r.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var a=this.Element.prototype,s=a.setAttribute,l=a.setAttributeNS,u=this.CSSStyleDeclaration.prototype,c=u.setProperty;a.setAttribute=function(t,e){s.call(this,t,e+"")},a.setAttributeNS=function(t,e,n){l.call(this,t,e,n+"")},u.setProperty=function(t,e,n){c.call(this,t,e+"",n)}}function f(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function h(t){return null===t?NaN:+t}function d(t){return!isNaN(t)}function p(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}t.ascending=f,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},t.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},t.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},t.sum=function(t,e){var n,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)d(n=+t[o])&&(r+=n);else for(;++o<i;)d(n=+e.call(t,t[o],o))&&(r+=n);return r},t.mean=function(t,e){var n,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)d(n=h(t[o]))?r+=n:--a;else for(;++o<i;)d(n=h(e.call(t,t[o],o)))?r+=n:--a;if(a)return r/a},t.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},t.median=function(e,n){var r,i=[],o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)d(r=h(e[a]))&&i.push(r);else for(;++a<o;)d(r=h(n.call(e,e[a],a)))&&i.push(r);if(i.length)return t.quantile(i.sort(f),.5)},t.variance=function(t,e){var n,r,i=t.length,o=0,a=0,s=-1,l=0;if(1===arguments.length)for(;++s<i;)d(n=h(t[s]))&&(a+=(r=n-o)*(n-(o+=r/++l)));else for(;++s<i;)d(n=h(e.call(t,t[s],s)))&&(a+=(r=n-o)*(n-(o+=r/++l)));if(l>1)return a/(l-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var g=p(f);function v(t){return t.length}t.bisectLeft=g.left,t.bisect=t.bisectRight=g.right,t.bisector=function(t){return p(1===t.length?function(e,n){return f(t(e),n)}:t)},t.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},t.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},t.pairs=function(t){for(var e=0,n=t.length-1,r=t[0],i=new Array(n<0?0:n);e<n;)i[e]=[r,r=t[++e]];return i},t.transpose=function(e){if(!(o=e.length))return[];for(var n=-1,r=t.min(e,v),i=new Array(r);++n<r;)for(var o,a=-1,s=i[n]=new Array(o);++a<o;)s[a]=e[a][n];return i},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e},t.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},t.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},t.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(e=(r=t[i]).length;--e>=0;)n[--a]=r[e];return n};var m=Math.abs;function y(t){for(var e=1;t*e%1;)e*=10;return e}function b(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function x(){this._=Object.create(null)}t.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n==1/0)throw new Error("infinite range");var r,i=[],o=y(m(n)),a=-1;if(t*=o,e*=o,(n*=o)<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},t.map=function(t,e){var n=new x;if(t instanceof x)t.forEach((function(t,e){n.set(t,e)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};function w(t){return"__proto__"==(t+="")||"\0"===t[0]?"\0"+t:t}function _(t){return"\0"===(t+="")[0]?t.slice(1):t}function k(t){return w(t)in this._}function M(t){return(t=w(t))in this._&&delete this._[t]}function C(){var t=[];for(var e in this._)t.push(_(e));return t}function S(){var t=0;for(var e in this._)++t;return t}function A(){for(var t in this._)return!1;return!0}function L(){this._=Object.create(null)}function E(t){return t}function P(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function T(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=O.length;n<r;++n){var i=O[n]+e;if(i in t)return i}}b(x,{has:k,get:function(t){return this._[w(t)]},set:function(t,e){return this._[w(t)]=e},remove:M,keys:C,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:_(e),value:this._[e]});return t},size:S,empty:A,forEach:function(t){for(var e in this._)t.call(this,_(e),this._[e])}}),t.nest=function(){var e,n,r={},i=[],o=[];function a(t,o,s){if(s>=i.length)return n?n.call(r,o):e?o.sort(e):o;for(var l,u,c,f,h=-1,d=o.length,p=i[s++],g=new x;++h<d;)(f=g.get(l=p(u=o[h])))?f.push(u):g.set(l,[u]);return t?(u=t(),c=function(e,n){u.set(e,a(t,n,s))}):(u={},c=function(e,n){u[e]=a(t,n,s)}),g.forEach(c),u}return r.map=function(t,e){return a(e,t,0)},r.entries=function(e){return function t(e,n){if(n>=i.length)return e;var r=[],a=o[n++];return e.forEach((function(e,i){r.push({key:e,values:t(i,n)})})),a?r.sort((function(t,e){return a(t.key,e.key)})):r}(a(t.map,e,0),0)},r.key=function(t){return i.push(t),r},r.sortKeys=function(t){return o[i.length-1]=t,r},r.sortValues=function(t){return e=t,r},r.rollup=function(t){return n=t,r},r},t.set=function(t){var e=new L;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},b(L,{has:k,add:function(t){return this._[w(t+="")]=!0,t},remove:M,values:C,size:S,empty:A,forEach:function(t){for(var e in this._)t.call(this,_(e))}}),t.behavior={},t.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=P(t,e,e[n]);return t};var O=["webkit","ms","moz","Moz","o","O"];function D(){}function I(){}function F(t){var e=[],n=new x;function r(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}return r.on=function(r,i){var o,a=n.get(r);return arguments.length<2?a&&a.on:(a&&(a.on=null,e=e.slice(0,o=e.indexOf(a)).concat(e.slice(o+1)),n.remove(r)),i&&e.push(n.set(r,{on:i})),t)},r}function N(){t.event.preventDefault()}function G(){for(var e,n=t.event;e=n.sourceEvent;)n=e;return n}function W(e){for(var n=new I,r=0,i=arguments.length;++r<i;)n[arguments[r]]=F(n);return n.of=function(r,i){return function(o){try{var a=o.sourceEvent=t.event;o.target=e,t.event=o,n[o.type].apply(r,i)}finally{t.event=a}}},n}t.dispatch=function(){for(var t=new I,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=F(t);return t},I.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},t.event=null,t.requote=function(t){return t.replace(B,"\\$&")};var B=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,j={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]};function z(t){return j(t,$),t}var R=function(t,e){return e.querySelector(t)},H=function(t,e){return e.querySelectorAll(t)},V=function(t,e){var n=t.matches||t[T(t,"matchesSelector")];return(V=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(R=function(t,e){return Sizzle(t,e)[0]||null},H=Sizzle,V=Sizzle.matchesSelector),t.selection=function(){return t.select(r.documentElement)};var $=t.selection.prototype=[];function U(t){return"function"==typeof t?t:function(){return R(t,this)}}function q(t){return"function"==typeof t?t:function(){return H(t,this)}}$.select=function(t){var e,n,r,i,o=[];t=U(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return z(o)},$.selectAll=function(t){var e,r,i=[];t=q(t);for(var o=-1,a=this.length;++o<a;)for(var s=this[o],l=-1,u=s.length;++l<u;)(r=s[l])&&(i.push(e=n(t.call(r,r.__data__,l,o))),e.parentNode=r);return z(i)};var K="http://www.w3.org/1999/xhtml",Y={svg:"http://www.w3.org/2000/svg",xhtml:K,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function X(e,n){return e=t.ns.qualify(e),null==n?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof n?e.local?function(){var t=n.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=n.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,n)}:function(){this.setAttribute(e,n)}}function Z(t){return t.trim().replace(/\s+/g," ")}function Q(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function J(t){return(t+"").trim().split(/^|\s+/)}function tt(t,e){var n=(t=J(t).map(et)).length;return"function"==typeof e?function(){for(var r=-1,i=e.apply(this,arguments);++r<n;)t[r](this,i)}:function(){for(var r=-1;++r<n;)t[r](this,e)}}function et(t){var e=Q(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",Z(i+" "+t))):n.setAttribute("class",Z(i.replace(e," ")))}}function nt(t,e,n){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}:function(){this.style.setProperty(t,e,n)}}function rt(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}:function(){this[t]=e}}function it(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===K&&t.documentElement.namespaceURI===K?t.createElement(e):t.createElementNS(n,e)}}function ot(){var t=this.parentNode;t&&t.removeChild(this)}function at(t){return{__data__:t}}function st(t){return function(){return V(this,t)}}function lt(t){return arguments.length||(t=f),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function ut(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,s=o.length;a<s;a++)(i=o[a])&&e(i,a,n);return t}function ct(t){return j(t,ft),t}t.ns={prefix:Y,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Y.hasOwnProperty(n)?{space:Y[n],local:t}:t}},$.attr=function(e,n){if(arguments.length<2){if("string"==typeof e){var r=this.node();return(e=t.ns.qualify(e)).local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}for(n in e)this.each(X(n,e[n]));return this}return this.each(X(e,n))},$.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=J(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!Q(t[i]).test(e))return!1;return!0}for(e in t)this.each(tt(e,t[e]));return this}return this.each(tt(t,e))},$.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.each(nt(n,t[n],e));return this}if(r<2){var i=this.node();return o(i).getComputedStyle(i,null).getPropertyValue(t)}n=""}return this.each(nt(t,e,n))},$.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},$.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},$.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},$.append=function(t){return t=it(t),this.select((function(){return this.appendChild(t.apply(this,arguments))}))},$.insert=function(t,e){return t=it(t),e=U(e),this.select((function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)}))},$.remove=function(){return this.each(ot)},$.data=function(t,e){var n,r,i=-1,o=this.length;if(!arguments.length){for(t=new Array(o=(n=this[0]).length);++i<o;)(r=n[i])&&(t[i]=r.__data__);return t}function a(t,n){var r,i,o,a=t.length,c=n.length,f=Math.min(a,c),h=new Array(c),d=new Array(c),p=new Array(a);if(e){var g,v=new x,m=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(v.has(g=e.call(i,i.__data__,r))?p[r]=i:v.set(g,i),m[r]=g);for(r=-1;++r<c;)(i=v.get(g=e.call(n,o=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=o):d[r]=at(o),v.set(g,!0);for(r=-1;++r<a;)r in m&&!0!==v.get(m[r])&&(p[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):d[r]=at(o);for(;r<c;++r)d[r]=at(n[r]);for(;r<a;++r)p[r]=t[r]}d.update=h,d.parentNode=h.parentNode=p.parentNode=t.parentNode,s.push(d),l.push(h),u.push(p)}var s=ct([]),l=z([]),u=z([]);if("function"==typeof t)for(;++i<o;)a(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<o;)a(n=this[i],t);return l.enter=function(){return s},l.exit=function(){return u},l},$.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},$.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=st(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return z(i)},$.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},$.sort=function(t){t=lt.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},$.each=function(t){return ut(this,(function(e,n,r){t.call(e,e.__data__,n,r)}))},$.call=function(t){var e=n(arguments);return t.apply(e[0]=this,e),this},$.empty=function(){return!this.node()},$.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},$.size=function(){var t=0;return ut(this,(function(){++t})),t};var ft=[];function ht(t){var e,n;return function(r,i,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<l;);return a}}function dt(e,r,i){var o="__on"+e,a=e.indexOf("."),s=gt;a>0&&(e=e.slice(0,a));var l=pt.get(e);function u(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}return l&&(e=l,s=vt),a?r?function(){var t=s(r,n(arguments));u.call(this),this.addEventListener(e,this[o]=t,t.$=i),t._=r}:u:r?D:function(){var n,r=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var i in this)if(n=i.match(r)){var o=this[i];this.removeEventListener(n[1],o,o.$),delete this[i]}}}t.selection.enter=ct,t.selection.enter.prototype=ft,ft.append=$.append,ft.empty=$.empty,ft.node=$.node,ft.call=$.call,ft.size=$.size,ft.select=function(t){for(var e,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(e.push(r[u]=n=t.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return z(a)},ft.insert=function(t,e){return arguments.length<2&&(e=ht(this)),$.insert.call(this,t,e)},t.select=function(t){var e;return"string"==typeof t?(e=[R(t,r)]).parentNode=r.documentElement:(e=[t]).parentNode=i(t),z([e])},t.selectAll=function(t){var e;return"string"==typeof t?(e=n(H(t,r))).parentNode=r.documentElement:(e=n(t)).parentNode=null,z([e])},$.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=!1),t)this.each(dt(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(dt(t,e,n))};var pt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gt(e,n){return function(r){var i=t.event;t.event=r,n[0]=this.__data__;try{e.apply(this,n)}finally{t.event=i}}}function vt(t,e){var n=gt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||n.call(this,t)}}r&&pt.forEach((function(t){"on"+t in r&&pt.remove(t)}));var mt,yt=0;function bt(e){var n=".dragsuppress-"+ ++yt,r="click"+n,a=t.select(o(e)).on("touchmove"+n,N).on("dragstart"+n,N).on("selectstart"+n,N);if(null==mt&&(mt=!("onselectstart"in e)&&T(e.style,"userSelect")),mt){var s=i(e).style,l=s[mt];s[mt]="none"}return function(t){if(a.on(n,null),mt&&(s[mt]=l),t){var e=function(){a.on(r,null)};a.on(r,(function(){N(),e()}),!0),setTimeout(e,0)}}}t.mouse=function(t){return wt(t,G())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function wt(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(xt<0){var a=o(e);if(a.scrollX||a.scrollY){var s=(r=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(s.f||s.e),r.remove()}}return xt?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),[(i=i.matrixTransform(e.getScreenCTM().inverse())).x,i.y]}var l=e.getBoundingClientRect();return[n.clientX-l.left-e.clientLeft,n.clientY-l.top-e.clientTop]}function _t(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=G().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return wt(t,r)},t.behavior.drag=function(){var e=W(a,"drag","dragstart","dragend"),n=null,r=s(D,t.mouse,o,"mousemove","mouseup"),i=s(_t,t.touch,E,"touchmove","touchend");function a(){this.on("mousedown.drag",r).on("touchstart.drag",i)}function s(r,i,o,a,s){return function(){var l,u=this,c=t.event.target.correspondingElement||t.event.target,f=u.parentNode,h=e.of(u,arguments),d=0,p=r(),g=".drag"+(null==p?"":"-"+p),v=t.select(o(c)).on(a+g,b).on(s+g,x),m=bt(c),y=i(f,p);function b(){var t,e,n=i(f,p);n&&(t=n[0]-y[0],e=n[1]-y[1],d|=t|e,y=n,h({type:"drag",x:n[0]+l[0],y:n[1]+l[1],dx:t,dy:e}))}function x(){i(f,p)&&(v.on(a+g,null).on(s+g,null),m(d),h({type:"dragend"}))}l=n?[(l=n.apply(u,arguments)).x-y[0],l.y-y[1]]:[0,0],h({type:"dragstart"})}}return a.origin=function(t){return arguments.length?(n=t,a):n},t.rebind(a,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=G().touches),e?n(e).map((function(e){var n=wt(t,e);return n.identifier=e.identifier,n})):[]};var kt=1e-6,Mt=kt*kt,Ct=Math.PI,St=2*Ct,At=St-kt,Lt=Ct/2,Et=Ct/180,Pt=180/Ct;function Tt(t){return t>0?1:t<0?-1:0}function Ot(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function Dt(t){return t>1?0:t<-1?Ct:Math.acos(t)}function It(t){return t>1?Lt:t<-1?-Lt:Math.asin(t)}function Ft(t){return((t=Math.exp(t))+1/t)/2}function Nt(t){return(t=Math.sin(t/2))*t}var Gt=Math.SQRT2;t.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-i,f=l-o,h=c*c+f*f;if(h<Mt)r=Math.log(u/a)/Gt,n=function(t){return[i+t*c,o+t*f,a*Math.exp(Gt*t*r)]};else{var d=Math.sqrt(h),p=(u*u-a*a+4*h)/(2*a*2*d),g=(u*u-a*a-4*h)/(2*u*2*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/Gt,n=function(t){var e,n=t*r,s=Ft(v),l=a/(2*d)*(s*(e=Gt*n+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[i+l*c,o+l*f,a*s/Ft(Gt*n+v)]}}return n.duration=1e3*r,n},t.behavior.zoom=function(){var e,n,i,a,s,l,u,c,f,h={x:0,y:0,k:1},d=[960,500],p=jt,g=250,v=0,m="mousedown.zoom",y="mousemove.zoom",b="mouseup.zoom",x="touchstart.zoom",w=W(_,"zoomstart","zoom","zoomend");function _(t){t.on(m,T).on(Bt+".zoom",D).on("dblclick.zoom",I).on(x,O)}function k(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function M(t){h.k=Math.max(p[0],Math.min(p[1],t))}function C(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function S(e,r,i,o){e.__chart__={x:h.x,y:h.y,k:h.k},M(Math.pow(2,o)),C(n=r,i),e=t.select(e),g>0&&(e=e.transition().duration(g)),e.call(_.event)}function A(){u&&u.domain(l.range().map((function(t){return(t-h.x)/h.k})).map(l.invert)),f&&f.domain(c.range().map((function(t){return(t-h.y)/h.k})).map(c.invert))}function L(t){v++||t({type:"zoomstart"})}function E(t){A(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function P(t){--v||(t({type:"zoomend"}),n=null)}function T(){var e=this,n=w.of(e,arguments),r=0,i=t.select(o(e)).on(y,l).on(b,u),a=k(t.mouse(e)),s=bt(e);function l(){r=1,C(t.mouse(e),a),E(n)}function u(){i.on(y,null).on(b,null),s(r),P(n)}vs.call(e),L(n)}function O(){var e,n=this,r=w.of(n,arguments),i={},o=0,a=".zoom-"+t.event.changedTouches[0].identifier,l="touchmove"+a,u="touchend"+a,c=[],f=t.select(n),d=bt(n);function p(){var r=t.touches(n);return e=h.k,r.forEach((function(t){t.identifier in i&&(i[t.identifier]=k(t))})),r}function g(){var e=t.event.target;t.select(e).on(l,v).on(u,y),c.push(e);for(var r=t.event.changedTouches,a=0,f=r.length;a<f;++a)i[r[a].identifier]=null;var d=p(),g=Date.now();if(1===d.length){if(g-s<500){var m=d[0];S(n,m,i[m.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),N()}s=g}else if(d.length>1){m=d[0];var b=d[1],x=m[0]-b[0],w=m[1]-b[1];o=x*x+w*w}}function v(){var a,l,u,c,f=t.touches(n);vs.call(n);for(var h=0,d=f.length;h<d;++h,c=null)if(u=f[h],c=i[u.identifier]){if(l)break;a=u,l=c}if(c){var p=(p=u[0]-a[0])*p+(p=u[1]-a[1])*p,g=o&&Math.sqrt(p/o);a=[(a[0]+u[0])/2,(a[1]+u[1])/2],l=[(l[0]+c[0])/2,(l[1]+c[1])/2],M(g*e)}s=null,C(a,l),E(r)}function y(){if(t.event.touches.length){for(var e=t.event.changedTouches,n=0,o=e.length;n<o;++n)delete i[e[n].identifier];for(var s in i)return void p()}t.selectAll(c).on(a,null),f.on(m,T).on(x,O),d(),P(r)}g(),L(r),f.on(m,null).on(x,g)}function D(){var r=w.of(this,arguments);a?clearTimeout(a):(vs.call(this),e=k(n=i||t.mouse(this)),L(r)),a=setTimeout((function(){a=null,P(r)}),50),N(),M(Math.pow(2,.002*Wt())*h.k),C(n,e),E(r)}function I(){var e=t.mouse(this),n=Math.log(h.k)/Math.LN2;S(this,e,k(e),t.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Bt||(Bt="onwheel"in r?(Wt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in r?(Wt=function(){return t.event.wheelDelta},"mousewheel"):(Wt=function(){return-t.event.detail},"MozMousePixelScroll")),_.event=function(e){e.each((function(){var e=w.of(this,arguments),r=h;bs?t.select(this).transition().each("start.zoom",(function(){h=this.__chart__||{x:0,y:0,k:1},L(e)})).tween("zoom:zoom",(function(){var i=d[0],o=d[1],a=n?n[0]:i/2,s=n?n[1]:o/2,l=t.interpolateZoom([(a-h.x)/h.k,(s-h.y)/h.k,i/h.k],[(a-r.x)/r.k,(s-r.y)/r.k,i/r.k]);return function(t){var n=l(t),r=i/n[2];this.__chart__=h={x:a-n[0]*r,y:s-n[1]*r,k:r},E(e)}})).each("interrupt.zoom",(function(){P(e)})).each("end.zoom",(function(){P(e)})):(this.__chart__=h,L(e),E(e),P(e))}))},_.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},A(),_):[h.x,h.y]},_.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},M(+t),A(),_):h.k},_.scaleExtent=function(t){return arguments.length?(p=null==t?jt:[+t[0],+t[1]],_):p},_.center=function(t){return arguments.length?(i=t&&[+t[0],+t[1]],_):i},_.size=function(t){return arguments.length?(d=t&&[+t[0],+t[1]],_):d},_.duration=function(t){return arguments.length?(g=+t,_):g},_.x=function(t){return arguments.length?(u=t,l=t.copy(),h={x:0,y:0,k:1},_):u},_.y=function(t){return arguments.length?(f=t,c=t.copy(),h={x:0,y:0,k:1},_):f},t.rebind(_,w,"on")};var Wt,Bt,jt=[0,1/0];function zt(){}function Rt(t,e,n){return this instanceof Rt?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof Rt?new Rt(t.h,t.s,t.l):se(""+t,le,Rt):new Rt(t,e,n)}t.color=zt,zt.prototype.toString=function(){return this.rgb()+""},t.hsl=Rt;var Ht=Rt.prototype=new zt;function Vt(t,e,n){var r,i;function o(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?r+(i-r)*t/60:t<180?i:t<240?r+(i-r)*(240-t)/60:r}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=2*(n=n<0?0:n>1?1:n)-(i=n<=.5?n*(1+e):n+e-n*e),new ne(o(t+120),o(t),o(t-120))}function $t(e,n,r){return this instanceof $t?(this.h=+e,this.c=+n,void(this.l=+r)):arguments.length<2?e instanceof $t?new $t(e.h,e.c,e.l):Qt(e instanceof Kt?e.l:(e=ue((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new $t(e,n,r)}Ht.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Rt(this.h,this.s,this.l/t)},Ht.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Rt(this.h,this.s,t*this.l)},Ht.rgb=function(){return Vt(this.h,this.s,this.l)},t.hcl=$t;var Ut=$t.prototype=new zt;function qt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Kt(n,Math.cos(t*=Et)*e,Math.sin(t)*e)}function Kt(t,e,n){return this instanceof Kt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof Kt?new Kt(t.l,t.a,t.b):t instanceof $t?qt(t.h,t.c,t.l):ue((t=ne(t)).r,t.g,t.b):new Kt(t,e,n)}Ut.brighter=function(t){return new $t(this.h,this.c,Math.min(100,this.l+Yt*(arguments.length?t:1)))},Ut.darker=function(t){return new $t(this.h,this.c,Math.max(0,this.l-Yt*(arguments.length?t:1)))},Ut.rgb=function(){return qt(this.h,this.c,this.l).rgb()},t.lab=Kt;var Yt=18,Xt=Kt.prototype=new zt;function Zt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return new ne(ee(3.2404542*(i=.95047*Jt(i))-1.5371385*(r=1*Jt(r))-.4985314*(o=1.08883*Jt(o))),ee(-.969266*i+1.8760108*r+.041556*o),ee(.0556434*i-.2040259*r+1.0572252*o))}function Qt(t,e,n){return t>0?new $t(Math.atan2(n,e)*Pt,Math.sqrt(e*e+n*n),t):new $t(NaN,NaN,t)}function Jt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function te(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ee(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ne(t,e,n){return this instanceof ne?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof ne?new ne(t.r,t.g,t.b):se(""+t,ne,Vt):new ne(t,e,n)}function re(t){return new ne(t>>16,t>>8&255,255&t)}function ie(t){return re(t)+""}Xt.brighter=function(t){return new Kt(Math.min(100,this.l+Yt*(arguments.length?t:1)),this.a,this.b)},Xt.darker=function(t){return new Kt(Math.max(0,this.l-Yt*(arguments.length?t:1)),this.a,this.b)},Xt.rgb=function(){return Zt(this.l,this.a,this.b)},t.rgb=ne;var oe=ne.prototype=new zt;function ae(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function se(t,e,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(fe(i[0]),fe(i[1]),fe(i[2]))}return(o=he.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function le(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new Rt(r,i,l)}function ue(t,e,n){var r=te((.4124564*(t=ce(t))+.3575761*(e=ce(e))+.1804375*(n=ce(n)))/.95047),i=te((.2126729*t+.7151522*e+.072175*n)/1);return Kt(116*i-16,500*(r-i),200*(i-te((.0193339*t+.119192*e+.9503041*n)/1.08883)))}function ce(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}oe.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ne(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new ne(i,i,i)},oe.darker=function(t){return new ne((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},oe.hsl=function(){return le(this.r,this.g,this.b)},oe.toString=function(){return"#"+ae(this.r)+ae(this.g)+ae(this.b)};var he=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function de(t){return"function"==typeof t?t:function(){return t}}function pe(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),ge(e,n,t,r)}}function ge(e,r,i,o){var a={},s=t.dispatch("beforesend","progress","load","error"),l={},u=new XMLHttpRequest,c=null;function f(){var t,e=u.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||e>=200&&e<300||304===e){try{t=i.call(a,u)}catch(t){return void s.error.call(a,t)}s.load.call(a,t)}else s.error.call(a,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(e)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=f:u.onreadystatechange=function(){u.readyState>3&&f()},u.onprogress=function(e){var n=t.event;t.event=e;try{s.progress.call(a,u)}finally{t.event=n}},a.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l[t]:(null==e?delete l[t]:l[t]=e+"",a)},a.mimeType=function(t){return arguments.length?(r=null==t?null:t+"",a):r},a.responseType=function(t){return arguments.length?(c=t,a):c},a.response=function(t){return i=t,a},["get","post"].forEach((function(t){a[t]=function(){return a.send.apply(a,[t].concat(n(arguments)))}})),a.send=function(t,n,i){if(2===arguments.length&&"function"==typeof n&&(i=n,n=null),u.open(t,e,!0),null==r||"accept"in l||(l.accept=r+",*/*"),u.setRequestHeader)for(var o in l)u.setRequestHeader(o,l[o]);return null!=r&&u.overrideMimeType&&u.overrideMimeType(r),null!=c&&(u.responseType=c),null!=i&&a.on("error",i).on("load",(function(t){i(null,t)})),s.beforesend.call(a,u),u.send(null==n?null:n),a},a.abort=function(){return u.abort(),a},t.rebind(a,s,"on"),null==o?a:a.get(function(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}(o))}he.forEach((function(t,e){he.set(t,re(e))})),t.functor=de,t.xhr=pe(E),t.dsv=function(t,e){var n=new RegExp('["'+t+"\n]"),r=t.charCodeAt(0);function i(t,n,r){arguments.length<3&&(r=n,n=null);var i=ge(t,e,null==n?o:a(n),r);return i.row=function(t){return arguments.length?i.response(null==(n=t)?o:a(t)):n},i}function o(t){return i.parse(t.responseText)}function a(t){return function(e){return i.parse(e.responseText,t)}}function s(e){return e.map(l).join(t)}function l(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return i.parse=function(t,e){var n;return i.parseRows(t,(function(t,r){if(n)return n(t,r-1);var i=new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+"]"})).join(",")+"}");n=e?function(t,n){return e(i(t),n)}:i}))},i.parseRows=function(t,e){var n,i,o={},a={},s=[],l=t.length,u=0,c=0;function f(){if(u>=l)return a;if(i)return i=!1,o;var e=u;if(34===t.charCodeAt(e)){for(var n=e;n++<l;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}return u=n+2,13===(s=t.charCodeAt(n+1))?(i=!0,10===t.charCodeAt(n+2)&&++u):10===s&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u<l;){var s,c=1;if(10===(s=t.charCodeAt(u++)))i=!0;else if(13===s)i=!0,10===t.charCodeAt(u)&&(++u,++c);else if(s!==r)continue;return t.slice(e,u-c)}return t.slice(e)}for(;(n=f())!==a;){for(var h=[];n!==o&&n!==a;)h.push(n),n=f();e&&null==(h=e(h,c++))||s.push(h)}return s},i.format=function(e){if(Array.isArray(e[0]))return i.formatRows(e);var n=new L,r=[];return e.forEach((function(t){for(var e in t)n.has(e)||r.push(n.add(e))})),[r.map(l).join(t)].concat(e.map((function(e){return r.map((function(t){return l(e[t])})).join(t)}))).join("\n")},i.formatRows=function(t){return t.map(s).join("\n")},i},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var ve,me,ye,be,xe=this[T(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function we(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return me?me.n=o:ve=o,me=o,ye||(be=clearTimeout(be),ye=1,xe(_e)),o}function _e(){var t=ke(),e=Me()-t;e>24?(isFinite(e)&&(clearTimeout(be),be=setTimeout(_e,e)),ye=0):(ye=1,xe(_e))}function ke(){for(var t=Date.now(),e=ve;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Me(){for(var t,e=ve,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:ve=e.n;return me=t,n}function Ce(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){we.apply(this,arguments)},t.timer.flush=function(){ke(),Me()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Se=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map((function(t,e){var n=Math.pow(10,3*m(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}));function Ae(e){var n=e.decimal,r=e.thousands,i=e.grouping,o=e.currency,a=i&&r?function(t,e){for(var n=t.length,o=[],a=0,s=i[0],l=0;n>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(n-=s,n+s)),!((l+=s+1)>e));)s=i[a=(a+1)%i.length];return o.reverse().join(r)}:E;return function(e){var r=Le.exec(e),i=r[1]||" ",s=r[2]||">",l=r[3]||"-",u=r[4]||"",c=r[5],f=+r[6],h=r[7],d=r[8],p=r[9],g=1,v="",m="",y=!1,b=!0;switch(d&&(d=+d.substring(1)),(c||"0"===i&&"="===s)&&(c=i="0",s="="),p){case"n":h=!0,p="g";break;case"%":g=100,m="%",p="f";break;case"p":g=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(v="0"+p.toLowerCase());case"c":b=!1;case"d":y=!0,d=0;break;case"s":g=-1,p="r"}"$"===u&&(v=o[0],m=o[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d)))),p=Ee.get(p)||Pe;var x=c&&h;return function(e){var r=m;if(y&&e%1)return"";var o=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===l?"":l;if(g<0){var u=t.formatPrefix(e,d);e=u.scale(e),r=u.symbol+m}else e*=g;var w,_,k=(e=p(e,d)).lastIndexOf(".");if(k<0){var M=b?e.lastIndexOf("e"):-1;M<0?(w=e,_=""):(w=e.substring(0,M),_=e.substring(M))}else w=e.substring(0,k),_=n+e.substring(k+1);!c&&h&&(w=a(w,1/0));var C=v.length+w.length+_.length+(x?0:o.length),S=C<f?new Array(C=f-C+1).join(i):"";return x&&(w=a(S+w,S.length?f-_.length:1/0)),o+=v,e=w+_,("<"===s?o+e+S:">"===s?S+o+e:"^"===s?S.substring(0,C>>=1)+o+e+S.substring(C):o+(x?e:S+e))+r}}}t.formatPrefix=function(e,n){var r=0;return(e=+e)&&(e<0&&(e*=-1),n&&(e=t.round(e,Ce(e,n))),r=1+Math.floor(1e-12+Math.log(e)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),Se[8+r/3]};var Le=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ee=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,n){return(e=t.round(e,Ce(e,n))).toFixed(Math.max(0,Math.min(20,Ce(e*(1+1e-15),n))))}});function Pe(t){return t+""}var Te=t.time={},Oe=Date;function De(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}De.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Ie.setUTCDate.apply(this._,arguments)},setDay:function(){Ie.setUTCDay.apply(this._,arguments)},setFullYear:function(){Ie.setUTCFullYear.apply(this._,arguments)},setHours:function(){Ie.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Ie.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Ie.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Ie.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Ie.setUTCSeconds.apply(this._,arguments)},setTime:function(){Ie.setTime.apply(this._,arguments)}};var Ie=Date.prototype;function Fe(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Oe(n-1)),1),n}function o(t,n){return e(t=new Oe(+t),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date(+a)),e(a,1);else for(;a<r;)s.push(new Date(+a)),e(a,1);return s}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=Ne(t);return s.floor=s,s.round=Ne(r),s.ceil=Ne(i),s.offset=Ne(o),s.range=function(t,e,n){try{Oe=De;var r=new De;return r._=t,a(r,e,n)}finally{Oe=Date}},t}function Ne(t){return function(e,n){try{Oe=De;var r=new De;return r._=e,t(r,n)._}finally{Oe=Date}}}function Ge(e){var n=e.dateTime,r=e.date,i=e.time,o=e.periods,a=e.days,s=e.shortDays,l=e.months,u=e.shortMonths;function c(t){var e=t.length;function n(n){for(var r,i,o,a=[],s=-1,l=0;++s<e;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=We[r=t.charAt(++s)])&&(r=t.charAt(++s)),(o=w[r])&&(r=o(n,null==i?"e"===r?" ":"0":i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}return n.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(n,t,e,0)!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var r=null!=n.Z&&Oe!==De,i=new(r?De:Oe);return"j"in n?i.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),i.setFullYear(n.y,0,1),i.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(i.getDay()+5)%7:n.w+7*n.U-(i.getDay()+6)%7)):i.setFullYear(n.y,n.m,n.d),i.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),r?i._:i},n.toString=function(){return t},n}function f(t,e,n,r){for(var i,o,a,s=0,l=e.length,u=n.length;s<l;){if(r>=u)return-1;if(37===(i=e.charCodeAt(s++))){if(a=e.charAt(s++),!(o=_[a in We?e.charAt(s++):a])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}c.utc=function(t){var e=c(t);function n(t){try{var n=new(Oe=De);return n._=t,e(n)}finally{Oe=Date}}return n.parse=function(t){try{Oe=De;var n=e.parse(t);return n&&n._}finally{Oe=Date}},n.toString=e.toString,n},c.multi=c.utc.multi=an;var h=t.map(),d=Re(a),p=He(a),g=Re(s),v=He(s),m=Re(l),y=He(l),b=Re(u),x=He(u);o.forEach((function(t,e){h.set(t.toLowerCase(),e)}));var w={a:function(t){return s[t.getDay()]},A:function(t){return a[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return l[t.getMonth()]},c:c(n),d:function(t,e){return ze(t.getDate(),e,2)},e:function(t,e){return ze(t.getDate(),e,2)},H:function(t,e){return ze(t.getHours(),e,2)},I:function(t,e){return ze(t.getHours()%12||12,e,2)},j:function(t,e){return ze(1+Te.dayOfYear(t),e,3)},L:function(t,e){return ze(t.getMilliseconds(),e,3)},m:function(t,e){return ze(t.getMonth()+1,e,2)},M:function(t,e){return ze(t.getMinutes(),e,2)},p:function(t){return o[+(t.getHours()>=12)]},S:function(t,e){return ze(t.getSeconds(),e,2)},U:function(t,e){return ze(Te.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return ze(Te.mondayOfYear(t),e,2)},x:c(r),X:c(i),y:function(t,e){return ze(t.getFullYear()%100,e,2)},Y:function(t,e){return ze(t.getFullYear()%1e4,e,4)},Z:rn,"%":function(){return"%"}},_={a:function(t,e,n){g.lastIndex=0;var r=g.exec(e.slice(n));return r?(t.w=v.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){d.lastIndex=0;var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.m=x.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){m.lastIndex=0;var r=m.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,e,n){return f(t,w.c.toString(),e,n)},d:Ze,e:Ze,H:Je,I:Je,j:Qe,L:nn,m:Xe,M:tn,p:function(t,e,n){var r=h.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)},S:en,U:$e,w:Ve,W:Ue,x:function(t,e,n){return f(t,w.x.toString(),e,n)},X:function(t,e,n){return f(t,w.X.toString(),e,n)},y:Ke,Y:qe,Z:Ye,"%":on};return c}Te.year=Fe((function(t){return(t=Te.day(t)).setMonth(0,1),t}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t){return t.getFullYear()})),Te.years=Te.year.range,Te.years.utc=Te.year.utc.range,Te.day=Fe((function(t){var e=new Oe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t){return t.getDate()-1})),Te.days=Te.day.range,Te.days.utc=Te.day.utc.range,Te.dayOfYear=function(t){var e=Te.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach((function(t,e){e=7-e;var n=Te[t]=Fe((function(t){return(t=Te.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t}),(function(t,e){t.setDate(t.getDate()+7*Math.floor(e))}),(function(t){var n=Te.year(t).getDay();return Math.floor((Te.dayOfYear(t)+(n+e)%7)/7)-(n!==e)}));Te[t+"s"]=n.range,Te[t+"s"].utc=n.utc.range,Te[t+"OfYear"]=function(t){var n=Te.year(t).getDay();return Math.floor((Te.dayOfYear(t)+(n+e)%7)/7)}})),Te.week=Te.sunday,Te.weeks=Te.sunday.range,Te.weeks.utc=Te.sunday.utc.range,Te.weekOfYear=Te.sundayOfYear;var We={"-":"",_:" ",0:"0"},Be=/^\s*\d+/,je=/^%/;function ze(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Re(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function He(t){for(var e=new x,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ve(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function $e(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Ue(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function qe(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ke(t,e,n){Be.lastIndex=0;var r,i=Be.exec(e.slice(n,n+2));return i?(t.y=(r=+i[0])+(r>68?1900:2e3),n+i[0].length):-1}function Ye(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Xe(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ze(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Qe(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function Je(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function tn(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function en(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function nn(t,e,n){Be.lastIndex=0;var r=Be.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function rn(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=m(e)/60|0,i=m(e)%60;return n+ze(r,"0",2)+ze(i,"0",2)}function on(t,e,n){je.lastIndex=0;var r=je.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function an(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}t.locale=function(t){return{numberFormat:Ae(t),timeFormat:Ge(t)}};var sn=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ln(){}t.format=sn.numberFormat,t.geo={},ln.prototype={s:0,t:0,add:function(t){cn(t,this.t,un),cn(un.s,this.s,this),this.s?this.t+=un.t:this.s=un.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var un=new ln;function cn(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function fn(t,e){t&&dn.hasOwnProperty(t.type)&&dn[t.type](t,e)}t.geo.stream=function(t,e){t&&hn.hasOwnProperty(t.type)?hn[t.type](t,e):fn(t,e)};var hn={Feature:function(t,e){fn(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)fn(n[r].geometry,e)}},dn={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){pn(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)pn(n[r],e,0)},Polygon:function(t,e){gn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)gn(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)fn(n[r],e)}};function pn(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function gn(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)pn(t[n],e,1);e.polygonEnd()}t.geo.area=function(e){return vn=0,t.geo.stream(e,En),vn};var vn,mn,yn,bn,xn,wn,_n,kn,Mn,Cn,Sn,An,Ln=new ln,En={sphere:function(){vn+=4*Ct},point:D,lineStart:D,lineEnd:D,polygonStart:function(){Ln.reset(),En.lineStart=Pn},polygonEnd:function(){var t=2*Ln;vn+=t<0?4*Ct+t:t,En.lineStart=En.lineEnd=En.point=D}};function Pn(){var t,e,n,r,i;function o(t,e){e=e*Et/2+Ct/4;var o=(t*=Et)-n,a=o>=0?1:-1,s=a*o,l=Math.cos(e),u=Math.sin(e),c=i*u,f=r*l+c*Math.cos(s),h=c*a*Math.sin(s);Ln.add(Math.atan2(h,f)),n=t,r=l,i=u}En.point=function(a,s){En.point=o,n=(t=a)*Et,r=Math.cos(s=(e=s)*Et/2+Ct/4),i=Math.sin(s)},En.lineEnd=function(){o(t,e)}}function Tn(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function On(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Dn(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function In(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Fn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Nn(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Gn(t){return[Math.atan2(t[1],t[0]),It(t[2])]}function Wn(t,e){return m(t[0]-e[0])<kt&&m(t[1]-e[1])<kt}t.geo.bounds=function(){var e,n,r,i,o,a,s,l,u,c,f,h={point:d,lineStart:g,lineEnd:v,polygonStart:function(){h.point=y,h.lineStart=b,h.lineEnd=x,u=0,En.polygonStart()},polygonEnd:function(){En.polygonEnd(),h.point=d,h.lineStart=g,h.lineEnd=v,Ln<0?(e=-(r=180),n=-(i=90)):u>kt?i=90:u<-kt&&(n=-90),f[0]=e,f[1]=r}};function d(t,o){c.push(f=[e=t,r=t]),o<n&&(n=o),o>i&&(i=o)}function p(t,a){var s=Tn([t*Et,a*Et]);if(l){var u=Dn(l,s),c=Dn([u[1],-u[0],0],u);Nn(c),c=Gn(c);var f=t-o,h=f>0?1:-1,p=c[0]*Pt*h,g=m(f)>180;if(g^(h*o<p&&p<h*t))(v=c[1]*Pt)>i&&(i=v);else if(g^(h*o<(p=(p+360)%360-180)&&p<h*t)){var v;(v=-c[1]*Pt)<n&&(n=v)}else a<n&&(n=a),a>i&&(i=a);g?t<o?w(e,t)>w(e,r)&&(r=t):w(t,r)>w(e,r)&&(e=t):r>=e?(t<e&&(e=t),t>r&&(r=t)):t>o?w(e,t)>w(e,r)&&(r=t):w(t,r)>w(e,r)&&(e=t)}else d(t,a);l=s,o=t}function g(){h.point=p}function v(){f[0]=e,f[1]=r,h.point=d,l=null}function y(t,e){if(l){var n=t-o;u+=m(n)>180?n+(n>0?360:-360):n}else a=t,s=e;En.point(t,e),p(t,e)}function b(){En.lineStart()}function x(){y(a,s),En.lineEnd(),m(u)>kt&&(e=-(r=180)),f[0]=e,f[1]=r,l=null}function w(t,e){return(e-=t)<0?e+360:e}function _(t,e){return t[0]-e[0]}function k(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(o){if(i=r=-(e=n=1/0),c=[],t.geo.stream(o,h),u=c.length){c.sort(_);for(var a=1,s=[g=c[0]];a<u;++a)k((d=c[a])[0],g)||k(d[1],g)?(w(g[0],d[1])>w(g[0],g[1])&&(g[1]=d[1]),w(d[0],g[1])>w(g[0],g[1])&&(g[0]=d[0])):s.push(g=d);for(var l,u,d,p=-1/0,g=(a=0,s[u=s.length-1]);a<=u;g=d,++a)d=s[a],(l=w(g[1],d[0]))>p&&(p=l,e=d[0],r=g[1])}return c=f=null,e===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,n],[r,i]]}}(),t.geo.centroid=function(e){mn=yn=bn=xn=wn=_n=kn=Mn=Cn=Sn=An=0,t.geo.stream(e,Bn);var n=Cn,r=Sn,i=An,o=n*n+r*r+i*i;return o<Mt&&(n=_n,r=kn,i=Mn,yn<kt&&(n=bn,r=xn,i=wn),(o=n*n+r*r+i*i)<Mt)?[NaN,NaN]:[Math.atan2(r,n)*Pt,It(i/Math.sqrt(o))*Pt]};var Bn={sphere:D,point:jn,lineStart:Rn,lineEnd:Hn,polygonStart:function(){Bn.lineStart=Vn},polygonEnd:function(){Bn.lineStart=Rn}};function jn(t,e){t*=Et;var n=Math.cos(e*=Et);zn(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function zn(t,e,n){++mn,bn+=(t-bn)/mn,xn+=(e-xn)/mn,wn+=(n-wn)/mn}function Rn(){var t,e,n;function r(r,i){r*=Et;var o=Math.cos(i*=Et),a=o*Math.cos(r),s=o*Math.sin(r),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=e*l-n*s)*u+(u=n*a-t*l)*u+(u=t*s-e*a)*u),t*a+e*s+n*l);yn+=u,_n+=u*(t+(t=a)),kn+=u*(e+(e=s)),Mn+=u*(n+(n=l)),zn(t,e,n)}Bn.point=function(i,o){i*=Et;var a=Math.cos(o*=Et);t=a*Math.cos(i),e=a*Math.sin(i),n=Math.sin(o),Bn.point=r,zn(t,e,n)}}function Hn(){Bn.point=jn}function Vn(){var t,e,n,r,i;function o(t,e){t*=Et;var o=Math.cos(e*=Et),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(e),u=r*l-i*s,c=i*a-n*l,f=n*s-r*a,h=Math.sqrt(u*u+c*c+f*f),d=n*a+r*s+i*l,p=h&&-Dt(d)/h,g=Math.atan2(h,d);Cn+=p*u,Sn+=p*c,An+=p*f,yn+=g,_n+=g*(n+(n=a)),kn+=g*(r+(r=s)),Mn+=g*(i+(i=l)),zn(n,r,i)}Bn.point=function(a,s){t=a,e=s,Bn.point=o,a*=Et;var l=Math.cos(s*=Et);n=l*Math.cos(a),r=l*Math.sin(a),i=Math.sin(s),zn(n,r,i)},Bn.lineEnd=function(){o(t,e),Bn.lineEnd=Hn,Bn.point=jn}}function $n(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Un(){return!0}function qn(t,e,n,r,i){var o=[],a=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(Wn(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);i.lineEnd()}else{var l=new Yn(n,t,null,!0),u=new Yn(n,null,l,!1);l.o=u,o.push(l),a.push(u),l=new Yn(r,t,null,!1),u=new Yn(r,null,l,!0),l.o=u,o.push(l),a.push(u)}}})),a.sort(e),Kn(o),Kn(a),o.length){for(var s=0,l=n,u=a.length;s<u;++s)a[s].e=l=!l;for(var c,f,h=o[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(s=0,u=c.length;s<u;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p)for(s=(c=d.p.z).length-1;s>=0;--s)i.point((f=c[s])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);i.lineEnd()}}}function Kn(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Yn(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Xn(e,n,r,i){return function(o,a){var s,l=n(a),u=o.invert(i[0],i[1]),c={point:f,lineStart:d,lineEnd:p,polygonStart:function(){c.point=x,c.lineStart=w,c.lineEnd=_,s=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=d,c.lineEnd=p,s=t.merge(s);var e=function(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Ln.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var f=u[0],h=f[0],d=f[1]/2+Ct/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===c&&(v=0);var m=(t=u[v])[0],y=t[1]/2+Ct/4,b=Math.sin(y),x=Math.cos(y),w=m-h,_=w>=0?1:-1,k=_*w,M=k>Ct,C=p*b;if(Ln.add(Math.atan2(C*_*Math.sin(k),g*x+C*Math.cos(k))),o+=M?w+_*St:w,M^h>=n^m>=n){var S=Dn(Tn(f),Tn(t));Nn(S);var A=Dn(i,S);Nn(A);var L=(M^w>=0?-1:1)*It(A[2]);(r>L||r===L&&(S[0]||S[1]))&&(a+=M^w>=0?1:-1)}if(!v++)break;h=m,p=b,g=x,f=t}}return(o<-kt||o<kt&&Ln<-kt)^1&a}(u,g);s.length?(b||(a.polygonStart(),b=!0),qn(s,Jn,e,r,a)):e&&(b||(a.polygonStart(),b=!0),a.lineStart(),r(null,null,1,a),a.lineEnd()),b&&(a.polygonEnd(),b=!1),s=g=null},sphere:function(){a.polygonStart(),a.lineStart(),r(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function f(t,n){var r=o(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function h(t,e){var n=o(t,e);l.point(n[0],n[1])}function d(){c.point=h,l.lineStart()}function p(){c.point=f,l.lineEnd()}var g,v,m=Qn(),y=n(m),b=!1;function x(t,e){v.push([t,e]);var n=o(t,e);y.point(n[0],n[1])}function w(){y.lineStart(),v=[]}function _(){x(v[0][0],v[0][1]),y.lineEnd();var t,e=y.clean(),n=m.buffer(),r=n.length;if(v.pop(),g.push(v),v=null,r)if(1&e){var i,o=-1;if((r=(t=n[0]).length-1)>0){for(b||(a.polygonStart(),b=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),s.push(n.filter(Zn))}return c}}function Zn(t){return t.length>1}function Qn(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:D,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Jn(t,e){return((t=t.x)[0]<0?t[1]-Lt-kt:Lt-t[1])-((e=e.x)[0]<0?e[1]-Lt-kt:Lt-e[1])}var tr=Xn(Un,(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Ct:-Ct,l=m(o-n);m(l-Ct)<kt?(t.point(n,r=(r+a)/2>0?Lt:-Lt),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=Ct&&(m(n-i)<kt&&(n-=i*kt),m(o-s)<kt&&(o-=s*kt),r=function(t,e,n,r){var i,o,a=Math.sin(t-n);return m(a)>kt?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*Lt,r.point(-Ct,i),r.point(0,i),r.point(Ct,i),r.point(Ct,0),r.point(Ct,-i),r.point(0,-i),r.point(-Ct,-i),r.point(-Ct,0),r.point(-Ct,i);else if(m(t[0]-e[0])>kt){var o=t[0]<e[0]?Ct:-Ct;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}),[-Ct,-Ct/2]);function er(t){var e=Math.cos(t),n=e>0,r=m(e)>kt;return Xn(i,(function(t){var e,s,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,h){var d,p=[f,h],g=i(f,h),v=n?g?0:a(f,h):g?a(f+(f<0?Ct:-Ct),h):0;if(!e&&(u=l=g)&&t.lineStart(),g!==l&&(d=o(e,p),(Wn(e,d)||Wn(p,d))&&(p[0]+=kt,p[1]+=kt,g=i(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),d=o(p,e),t.point(d[0],d[1])):(d=o(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(r&&e&&n^g){var m;v&s||!(m=o(p,e,!0))||(c=0,n?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&Wn(e,p)||t.point(p[0],p[1]),e=p,l=g,s=v},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}}),Gr(t,6*Et),n?[0,-t]:[-Ct,t-Ct]);function i(t,n){return Math.cos(t)*Math.cos(n)>e}function o(t,n,r){var i=[1,0,0],o=Dn(Tn(t),Tn(n)),a=On(o,o),s=o[0],l=a-s*s;if(!l)return!r&&t;var u=e*a/l,c=-e*s/l,f=Dn(i,o),h=Fn(i,u);In(h,Fn(o,c));var d=f,p=On(h,d),g=On(d,d),v=p*p-g*(On(h,h)-1);if(!(v<0)){var y=Math.sqrt(v),b=Fn(d,(-p-y)/g);if(In(b,h),b=Gn(b),!r)return b;var x,w=t[0],_=n[0],k=t[1],M=n[1];_<w&&(x=w,w=_,_=x);var C=_-w,S=m(C-Ct)<kt;if(!S&&M<k&&(x=k,k=M,M=x),S||C<kt?S?k+M>0^b[1]<(m(b[0]-w)<kt?k:M):k<=b[1]&&b[1]<=M:C>Ct^(w<=b[0]&&b[0]<=_)){var A=Fn(d,(-p+y)/g);return In(A,h),[b,Gn(A)]}}}function a(e,r){var i=n?t:Ct-t,o=0;return e<-i?o|=1:e>i&&(o|=2),r<-i?o|=4:r>i&&(o|=8),o}}function nr(t,e,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=0,f=1,h=s.x-l,d=s.y-u;if(o=t-l,h||!(o>0)){if(o/=h,h<0){if(o<c)return;o<f&&(f=o)}else if(h>0){if(o>f)return;o>c&&(c=o)}if(o=n-l,h||!(o<0)){if(o/=h,h<0){if(o>f)return;o>c&&(c=o)}else if(h>0){if(o<c)return;o<f&&(f=o)}if(o=e-u,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<f&&(f=o)}else if(d>0){if(o>f)return;o>c&&(c=o)}if(o=r-u,d||!(o<0)){if(o/=d,d<0){if(o>f)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<f&&(f=o)}return c>0&&(i.a={x:l+c*h,y:u+c*d}),f<1&&(i.b={x:l+f*h,y:u+f*d}),i}}}}}}function rr(e,n,r,i){return function(l){var u,c,f,h,d,p,g,v,m,y,b,x=l,w=Qn(),_=nr(e,n,r,i),k={point:S,lineStart:function(){k.point=A,c&&c.push(f=[]);y=!0,m=!1,g=v=NaN},lineEnd:function(){u&&(A(h,d),p&&m&&w.rejoin(),u.push(w.buffer()));k.point=S,m&&l.lineEnd()},polygonStart:function(){l=w,u=[],c=[],b=!0},polygonEnd:function(){l=x,u=t.merge(u);var n=function(t){for(var e=0,n=c.length,r=t[1],i=0;i<n;++i)for(var o,a=1,s=c[i],l=s.length,u=s[0];a<l;++a)o=s[a],u[1]<=r?o[1]>r&&Ot(u,o,t)>0&&++e:o[1]<=r&&Ot(u,o,t)<0&&--e,u=o;return 0!==e}([e,i]),r=b&&n,o=u.length;(r||o)&&(l.polygonStart(),r&&(l.lineStart(),M(null,null,1,l),l.lineEnd()),o&&qn(u,a,n,M,l),l.polygonEnd()),u=c=f=null}};function M(t,a,l,u){var c=0,f=0;if(null==t||(c=o(t,l))!==(f=o(a,l))||s(t,a)<0^l>0)do{u.point(0===c||3===c?e:r,c>1?i:n)}while((c=(c+l+4)%4)!==f);else u.point(a[0],a[1])}function C(t,o){return e<=t&&t<=r&&n<=o&&o<=i}function S(t,e){C(t,e)&&l.point(t,e)}function A(t,e){var n=C(t=Math.max(-1e9,Math.min(1e9,t)),e=Math.max(-1e9,Math.min(1e9,e)));if(c&&f.push([t,e]),y)h=t,d=e,p=n,y=!1,n&&(l.lineStart(),l.point(t,e));else if(n&&m)l.point(t,e);else{var r={a:{x:g,y:v},b:{x:t,y:e}};_(r)?(m||(l.lineStart(),l.point(r.a.x,r.a.y)),l.point(r.b.x,r.b.y),n||l.lineEnd(),b=!1):n&&(l.lineStart(),l.point(t,e),b=!1)}g=t,v=e,m=n}return k};function o(t,i){return m(t[0]-e)<kt?i>0?0:3:m(t[0]-r)<kt?i>0?2:1:m(t[1]-n)<kt?i>0?1:0:i>0?3:2}function a(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}}function ir(t){var e=0,n=Ct/3,r=Er(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Ct/180,n=t[1]*Ct/180):[e/Ct*180,n/Ct*180]},i}function or(t,e){var n=Math.sin(t),r=(n+Math.sin(e))/2,i=1+n*(2*r-n),o=Math.sqrt(i)/r;function a(t,e){var n=Math.sqrt(i-2*r*Math.sin(e))/r;return[n*Math.sin(t*=r),o-n*Math.cos(t)]}return a.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/r,It((i-(t*t+n*n)*r*r)/(2*r))]},a}t.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),(i=o(t)).valid=!0,i},extent:function(s){return arguments.length?(o=rr(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return ir(or)}).raw=or,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,n,r,i,o=t.geo.albers(),a=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};function u(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}return u.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(t)},u.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},u.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),u):o.precision()},u.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),u.translate(o.translate())):o.scale()},u.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),c=+t[0],f=+t[1];return n=o.translate(t).clipExtent([[c-.455*e,f-.238*e],[c+.455*e,f+.238*e]]).stream(l).point,r=a.translate([c-.307*e,f+.201*e]).clipExtent([[c-.425*e+kt,f+.12*e+kt],[c-.214*e-kt,f+.234*e-kt]]).stream(l).point,i=s.translate([c-.205*e,f+.212*e]).clipExtent([[c-.214*e+kt,f+.166*e+kt],[c-.115*e-kt,f+.234*e-kt]]).stream(l).point,u},u.scale(1070)};var ar,sr,lr,ur,cr,fr,hr={point:D,lineStart:D,lineEnd:D,polygonStart:function(){sr=0,hr.lineStart=dr},polygonEnd:function(){hr.lineStart=hr.lineEnd=hr.point=D,ar+=m(sr/2)}};function dr(){var t,e,n,r;function i(t,e){sr+=r*t-n*e,n=t,r=e}hr.point=function(o,a){hr.point=i,t=n=o,e=r=a},hr.lineEnd=function(){i(t,e)}}var pr={point:function(t,e){t<lr&&(lr=t);t>cr&&(cr=t);e<ur&&(ur=e);e>fr&&(fr=e)},lineStart:D,lineEnd:D,polygonStart:D,polygonEnd:D};function gr(){var t=vr(4.5),e=[],n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(e){return t=vr(e),n},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function r(n,r){e.push("M",n,",",r,t)}function i(t,r){e.push("M",t,",",r),n.point=o}function o(t,n){e.push("L",t,",",n)}function a(){n.point=r}function s(){e.push("Z")}return n}function vr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var mr,yr={point:br,lineStart:xr,lineEnd:wr,polygonStart:function(){yr.lineStart=_r},polygonEnd:function(){yr.point=br,yr.lineStart=xr,yr.lineEnd=wr}};function br(t,e){bn+=t,xn+=e,++wn}function xr(){var t,e;function n(n,r){var i=n-t,o=r-e,a=Math.sqrt(i*i+o*o);_n+=a*(t+n)/2,kn+=a*(e+r)/2,Mn+=a,br(t=n,e=r)}yr.point=function(r,i){yr.point=n,br(t=r,e=i)}}function wr(){yr.point=br}function _r(){var t,e,n,r;function i(t,e){var i=t-n,o=e-r,a=Math.sqrt(i*i+o*o);_n+=a*(n+t)/2,kn+=a*(r+e)/2,Mn+=a,Cn+=(a=r*t-n*e)*(n+t),Sn+=a*(r+e),An+=3*a,br(n=t,r=e)}yr.point=function(o,a){yr.point=i,br(t=n=o,e=r=a)},yr.lineEnd=function(){i(t,e)}}function kr(t){var e=4.5,n={point:r,lineStart:function(){n.point=i},lineEnd:a,polygonStart:function(){n.lineEnd=s},polygonEnd:function(){n.lineEnd=a,n.point=r},pointRadius:function(t){return e=t,n},result:D};function r(n,r){t.moveTo(n+e,r),t.arc(n,r,e,0,St)}function i(e,r){t.moveTo(e,r),n.point=o}function o(e,n){t.lineTo(e,n)}function a(){n.point=r}function s(){t.closePath()}return n}function Mr(t){var e=.5,n=Math.cos(30*Et),r=16;function i(t){return(r?a:o)(t)}function o(e){return Ar(e,(function(n,r){n=t(n,r),e.point(n[0],n[1])}))}function a(e){var n,i,o,a,l,u,c,f,h,d,p,g,v={point:m,lineStart:y,lineEnd:x,polygonStart:function(){e.polygonStart(),v.lineStart=w},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){f=NaN,v.point=b,e.lineStart()}function b(n,i){var o=Tn([n,i]),a=t(n,i);s(f,h,c,d,p,g,f=a[0],h=a[1],c=n,d=o[0],p=o[1],g=o[2],r,e),e.point(f,h)}function x(){v.point=m,e.lineEnd()}function w(){y(),v.point=_,v.lineEnd=k}function _(t,e){b(n=t,e),i=f,o=h,a=d,l=p,u=g,v.point=b}function k(){s(f,h,c,d,p,g,i,o,n,a,l,u,r,e),v.lineEnd=x,x()}return v}function s(r,i,o,a,l,u,c,f,h,d,p,g,v,y){var b=c-r,x=f-i,w=b*b+x*x;if(w>4*e&&v--){var _=a+d,k=l+p,M=u+g,C=Math.sqrt(_*_+k*k+M*M),S=Math.asin(M/=C),A=m(m(M)-1)<kt||m(o-h)<kt?(o+h)/2:Math.atan2(k,_),L=t(A,S),E=L[0],P=L[1],T=E-r,O=P-i,D=x*T-b*O;(D*D/w>e||m((b*T+x*O)/w-.5)>.3||a*d+l*p+u*g<n)&&(s(r,i,o,a,l,u,E,P,A,_/=C,k/=C,M,v,y),y.point(E,P),s(E,P,A,_,k,M,c,f,h,d,p,g,v,y))}}return i.precision=function(t){return arguments.length?(r=(e=t*t)>0&&16,i):Math.sqrt(e)},i}function Cr(t){var e=Mr((function(e,n){return t([e*Pt,n*Pt])}));return function(t){return Pr(e(t))}}function Sr(t){this.stream=t}function Ar(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Lr(t){return Er((function(){return t}))()}function Er(e){var n,r,i,o,a,s,l=Mr((function(t,e){return[(t=n(t,e))[0]*u+o,a-t[1]*u]})),u=150,c=480,f=250,h=0,d=0,p=0,g=0,v=0,m=tr,y=E,b=null,x=null;function w(t){return[(t=i(t[0]*Et,t[1]*Et))[0]*u+o,a-t[1]*u]}function _(t){return(t=i.invert((t[0]-o)/u,(a-t[1])/u))&&[t[0]*Pt,t[1]*Pt]}function k(){i=$n(r=Dr(p,g,v),n);var t=n(h,d);return o=c-t[0]*u,a=f+t[1]*u,M()}function M(){return s&&(s.valid=!1,s=null),w}return w.stream=function(t){return s&&(s.valid=!1),(s=Pr(m(r,l(y(t))))).valid=!0,s},w.clipAngle=function(t){return arguments.length?(m=null==t?(b=t,tr):er((b=+t)*Et),M()):b},w.clipExtent=function(t){return arguments.length?(x=t,y=t?rr(t[0][0],t[0][1],t[1][0],t[1][1]):E,M()):x},w.scale=function(t){return arguments.length?(u=+t,k()):u},w.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],k()):[c,f]},w.center=function(t){return arguments.length?(h=t[0]%360*Et,d=t[1]%360*Et,k()):[h*Pt,d*Pt]},w.rotate=function(t){return arguments.length?(p=t[0]%360*Et,g=t[1]%360*Et,v=t.length>2?t[2]%360*Et:0,k()):[p*Pt,g*Pt,v*Pt]},t.rebind(w,l,"precision"),function(){return n=e.apply(this,arguments),w.invert=n.invert&&_,k()}}function Pr(t){return Ar(t,(function(e,n){t.point(e*Et,n*Et)}))}function Tr(t,e){return[t,e]}function Or(t,e){return[t>Ct?t-St:t<-Ct?t+St:t,e]}function Dr(t,e,n){return t?e||n?$n(Fr(t),Nr(e,n)):Fr(t):e||n?Nr(e,n):Or}function Ir(t){return function(e,n){return[(e+=t)>Ct?e-St:e<-Ct?e+St:e,n]}}function Fr(t){var e=Ir(t);return e.invert=Ir(-t),e}function Nr(t,e){var n=Math.cos(t),r=Math.sin(t),i=Math.cos(e),o=Math.sin(e);function a(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,u=Math.sin(e),c=u*n+s*r;return[Math.atan2(l*i-c*o,s*n-u*r),It(c*i+l*o)]}return a.invert=function(t,e){var a=Math.cos(e),s=Math.cos(t)*a,l=Math.sin(t)*a,u=Math.sin(e),c=u*i-l*o;return[Math.atan2(l*i+u*o,s*n+c*r),It(c*n-s*r)]},a}function Gr(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=Wr(n,i),o=Wr(n,o),(a>0?i<o:i>o)&&(i+=a*St)):(i=t+a*St,o=t-.5*l);for(var u,c=i;a>0?c>o:c<o;c-=l)s.point((u=Gn([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function Wr(t,e){var n=Tn(e);n[0]-=t,Nn(n);var r=Dt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-kt)%(2*Math.PI)}function Br(e,n,r){var i=t.range(e,n-kt,r).concat(n);return function(t){return i.map((function(e){return[t,e]}))}}function jr(e,n,r){var i=t.range(e,n-kt,r).concat(n);return function(t){return i.map((function(e){return[e,t]}))}}function zr(t){return t.source}function Rr(t){return t.target}t.geo.path=function(){var e,n,r,i,o,a=4.5;function s(e){return e&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=r(i)),t.geo.stream(e,o)),i.result()}function l(){return o=null,s}return s.area=function(e){return ar=0,t.geo.stream(e,r(hr)),ar},s.centroid=function(e){return bn=xn=wn=_n=kn=Mn=Cn=Sn=An=0,t.geo.stream(e,r(yr)),An?[Cn/An,Sn/An]:Mn?[_n/Mn,kn/Mn]:wn?[bn/wn,xn/wn]:[NaN,NaN]},s.bounds=function(e){return cr=fr=-(lr=ur=1/0),t.geo.stream(e,r(pr)),[[lr,ur],[cr,fr]]},s.projection=function(t){return arguments.length?(r=(e=t)?t.stream||Cr(t):E,l()):e},s.context=function(t){return arguments.length?(i=null==(n=t)?new gr:new kr(t),"function"!=typeof a&&i.pointRadius(a),l()):n},s.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),s):a},s.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var n=new Sr(e);for(var r in t)n[r]=t[r];return n}}},Sr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=Lr,t.geo.projectionMutator=Er,(t.geo.equirectangular=function(){return Lr(Tr)}).raw=Tr.invert=Tr,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*Et,e[1]*Et))[0]*=Pt,e[1]*=Pt,e}return t=Dr(t[0]%360*Et,t[1]*Et,t.length>2?t[2]*Et:0),e.invert=function(e){return(e=t.invert(e[0]*Et,e[1]*Et))[0]*=Pt,e[1]*=Pt,e},e},Or.invert=Tr,t.geo.circle=function(){var t,e,n=[0,0],r=6;function i(){var t="function"==typeof n?n.apply(this,arguments):n,r=Dr(-t[0]*Et,-t[1]*Et,0).invert,i=[];return e(null,null,1,{point:function(t,e){i.push(t=r(t,e)),t[0]*=Pt,t[1]*=Pt}}),{type:"Polygon",coordinates:[i]}}return i.origin=function(t){return arguments.length?(n=t,i):n},i.angle=function(n){return arguments.length?(e=Gr((t=+n)*Et,r*Et),i):t},i.precision=function(n){return arguments.length?(e=Gr(t*Et,(r=+n)*Et),i):r},i.angle(90)},t.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Et,i=t[1]*Et,o=e[1]*Et,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},t.geo.graticule=function(){var e,n,r,i,o,a,s,l,u,c,f,h,d=10,p=d,g=90,v=360,y=2.5;function b(){return{type:"MultiLineString",coordinates:x()}}function x(){return t.range(Math.ceil(i/g)*g,r,g).map(f).concat(t.range(Math.ceil(l/v)*v,s,v).map(h)).concat(t.range(Math.ceil(n/d)*d,e,d).filter((function(t){return m(t%g)>kt})).map(u)).concat(t.range(Math.ceil(a/p)*p,o,p).filter((function(t){return m(t%v)>kt})).map(c))}return b.lines=function(){return x().map((function(t){return{type:"LineString",coordinates:t}}))},b.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(h(s).slice(1),f(r).reverse().slice(1),h(l).reverse().slice(1))]}},b.extent=function(t){return arguments.length?b.majorExtent(t).minorExtent(t):b.minorExtent()},b.majorExtent=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],l=+t[0][1],s=+t[1][1],i>r&&(t=i,i=r,r=t),l>s&&(t=l,l=s,s=t),b.precision(y)):[[i,l],[r,s]]},b.minorExtent=function(t){return arguments.length?(n=+t[0][0],e=+t[1][0],a=+t[0][1],o=+t[1][1],n>e&&(t=n,n=e,e=t),a>o&&(t=a,a=o,o=t),b.precision(y)):[[n,a],[e,o]]},b.step=function(t){return arguments.length?b.majorStep(t).minorStep(t):b.minorStep()},b.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],b):[g,v]},b.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],b):[d,p]},b.precision=function(t){return arguments.length?(y=+t,u=Br(a,o,90),c=jr(n,e,y),f=Br(l,s,90),h=jr(i,r,y),b):y},b.majorExtent([[-180,-90+kt],[180,90-kt]]).minorExtent([[-180,-80-kt],[180,80+kt]])},t.geo.greatArc=function(){var e,n,r=zr,i=Rr;function o(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}return o.distance=function(){return t.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},o.source=function(t){return arguments.length?(r=t,e="function"==typeof t?null:t,o):r},o.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},t.geo.interpolate=function(t,e){return n=t[0]*Et,r=t[1]*Et,i=e[0]*Et,o=e[1]*Et,a=Math.cos(r),s=Math.sin(r),l=Math.cos(o),u=Math.sin(o),c=a*Math.cos(n),f=a*Math.sin(n),h=l*Math.cos(i),d=l*Math.sin(i),p=2*Math.asin(Math.sqrt(Nt(o-r)+a*l*Nt(i-n))),g=1/Math.sin(p),(v=p?function(t){var e=Math.sin(t*=p)*g,n=Math.sin(p-t)*g,r=n*c+e*h,i=n*f+e*d,o=n*s+e*u;return[Math.atan2(i,r)*Pt,Math.atan2(o,Math.sqrt(r*r+i*i))*Pt]}:function(){return[n*Pt,r*Pt]}).distance=p,v;var n,r,i,o,a,s,l,u,c,f,h,d,p,g,v},t.geo.length=function(e){return mr=0,t.geo.stream(e,Hr),mr};var Hr={sphere:D,point:D,lineStart:function(){var t,e,n;function r(r,i){var o=Math.sin(i*=Et),a=Math.cos(i),s=m((r*=Et)-t),l=Math.cos(s);mr+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*o-e*a*l)*s),e*o+n*a*l),t=r,e=o,n=a}Hr.point=function(i,o){t=i*Et,e=Math.sin(o*=Et),n=Math.cos(o),Hr.point=r},Hr.lineEnd=function(){Hr.point=Hr.lineEnd=D}},lineEnd:D,polygonStart:D,polygonEnd:D};function Vr(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}var $r=Vr((function(t){return Math.sqrt(2/(1+t))}),(function(t){return 2*Math.asin(t/2)}));(t.geo.azimuthalEqualArea=function(){return Lr($r)}).raw=$r;var Ur=Vr((function(t){var e=Math.acos(t);return e&&e/Math.sin(e)}),E);function qr(t,e){var n=Math.cos(t),r=function(t){return Math.tan(Ct/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(r(e)/r(t)),o=n*Math.pow(r(t),i)/i;if(!i)return Xr;function a(t,e){o>0?e<-Lt+kt&&(e=-Lt+kt):e>Lt-kt&&(e=Lt-kt);var n=o/Math.pow(r(e),i);return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}return a.invert=function(t,e){var n=o-e,r=Tt(i)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/i,2*Math.atan(Math.pow(o/r,1/i))-Lt]},a}function Kr(t,e){var n=Math.cos(t),r=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/r+t;if(m(r)<kt)return Tr;function o(t,e){var n=i-e;return[n*Math.sin(r*t),i-n*Math.cos(r*t)]}return o.invert=function(t,e){var n=i-e;return[Math.atan2(t,n)/r,i-Tt(r)*Math.sqrt(t*t+n*n)]},o}(t.geo.azimuthalEquidistant=function(){return Lr(Ur)}).raw=Ur,(t.geo.conicConformal=function(){return ir(qr)}).raw=qr,(t.geo.conicEquidistant=function(){return ir(Kr)}).raw=Kr;var Yr=Vr((function(t){return 1/t}),Math.atan);function Xr(t,e){return[t,Math.log(Math.tan(Ct/4+e/2))]}function Zr(t){var e,n=Lr(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Ct*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}(t.geo.gnomonic=function(){return Lr(Yr)}).raw=Yr,Xr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Lt]},(t.geo.mercator=function(){return Zr(Xr)}).raw=Xr;var Qr=Vr((function(){return 1}),Math.asin);(t.geo.orthographic=function(){return Lr(Qr)}).raw=Qr;var Jr=Vr((function(t){return 1/(1+t)}),(function(t){return 2*Math.atan(t)}));function ti(t,e){return[Math.log(Math.tan(Ct/4+e/2)),-t]}function ei(t){return t[0]}function ni(t){return t[1]}function ri(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&Ot(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function ii(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return Lr(Jr)}).raw=Jr,ti.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Lt]},(t.geo.transverseMercator=function(){var t=Zr(ti),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90])}).raw=ti,t.geom={},t.geom.hull=function(t){var e=ei,n=ni;if(arguments.length)return r(t);function r(t){if(t.length<3)return[];var r,i=de(e),o=de(n),a=t.length,s=[],l=[];for(r=0;r<a;r++)s.push([+i.call(this,t[r],r),+o.call(this,t[r],r),r]);for(s.sort(ii),r=0;r<a;r++)l.push([s[r][0],-s[r][1]]);var u=ri(s),c=ri(l),f=c[0]===u[0],h=c[c.length-1]===u[u.length-1],d=[];for(r=u.length-1;r>=0;--r)d.push(t[s[u[r]][2]]);for(r=+f;r<c.length-h;++r)d.push(t[s[c[r]][2]]);return d}return r.x=function(t){return arguments.length?(e=t,r):e},r.y=function(t){return arguments.length?(n=t,r):n},r},t.geom.polygon=function(t){return j(t,oi),t};var oi=t.geom.polygon.prototype=[];function ai(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function si(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],c=e[1]-l,f=r[1]-u,h=(s*(l-u)-f*(i-o))/(f*a-s*c);return[i+h*a,l+h*c]}function li(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}oi.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},oi.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},oi.clip=function(t){for(var e,n,r,i,o,a,s=li(t),l=-1,u=this.length-li(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-s)-1],n=-1;++n<r;)ai(a=e[n],c,i)?(ai(o,c,i)||t.push(si(o,a,c,i)),t.push(a)):ai(o,c,i)&&t.push(si(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var ui,ci,fi,hi,di,pi=[],gi=[];function vi(){Fi(this),this.edge=this.site=this.circle=null}function mi(t){var e=pi.pop()||new vi;return e.site=t,e}function yi(t){Ai(t),fi.remove(t),pi.push(t),Fi(t)}function bi(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];yi(t);for(var l=o;l.circle&&m(n-l.circle.x)<kt&&m(r-l.circle.cy)<kt;)o=l.P,s.unshift(l),yi(l),l=o;s.unshift(l),Ai(l);for(var u=a;u.circle&&m(n-u.circle.x)<kt&&m(r-u.circle.cy)<kt;)a=u.N,s.push(u),yi(u),u=a;s.push(u),Ai(u);var c,f=s.length;for(c=1;c<f;++c)u=s[c],l=s[c-1],Oi(u.edge,l.site,u.site,i);l=s[0],(u=s[f-1]).edge=Pi(l.site,u.site,null,i),Si(l),Si(u)}function xi(t){for(var e,n,r,i,o=t.x,a=t.y,s=fi._;s;)if((r=wi(s,a)-o)>kt)s=s.L;else{if(!((i=o-_i(s,a))>kt)){r>-kt?(e=s.P,n=s):i>-kt?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=mi(t);if(fi.insert(e,l),e||n){if(e===n)return Ai(e),n=mi(e.site),fi.insert(l,n),l.edge=n.edge=Pi(e.site,l.site),Si(e),void Si(n);if(n){Ai(e),Ai(n);var u=e.site,c=u.x,f=u.y,h=t.x-c,d=t.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(h*v-d*g),y=h*h+d*d,b=g*g+v*v,x={x:(v*y-d*b)/m+c,y:(h*b-g*y)/m+f};Oi(n.edge,u,p,x),l.edge=Pi(u,t,null,x),n.edge=Pi(t,p,null,x),Si(e),Si(n)}else l.edge=Pi(e.site,l.site)}}function wi(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,u=l-e;if(!u)return s;var c=s-r,f=1/o-1/u,h=c/u;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*u)-l+u/2+i-o/2)))/f+r:(r+s)/2}function _i(t,e){var n=t.N;if(n)return wi(n,e);var r=t.site;return r.y===e?r.x:1/0}function ki(t){this.site=t,this.edges=[]}function Mi(t,e){return e.angle-t.angle}function Ci(){Fi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Si(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,f=2*(l*(v=o.y-s)-u*c);if(!(f>=-Mt)){var h=l*l+u*u,d=c*c+v*v,p=(v*h-u*d)/f,g=(l*d-c*h)/f,v=g+s,m=gi.pop()||new Ci;m.arc=t,m.site=i,m.x=p+a,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,b=di._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}di.insert(y,m),y||(hi=m)}}}}function Ai(t){var e=t.circle;e&&(e.P||(hi=e.N),di.remove(e),gi.push(e),Fi(e),t.circle=null)}function Li(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,f=t.r,h=c.x,d=c.y,p=f.x,g=f.y,v=(h+p)/2,m=(d+g)/2;if(g===d){if(v<a||v>=s)return;if(h>p){if(o){if(o.y>=u)return}else o={x:v,y:l};n={x:v,y:u}}else{if(o){if(o.y<l)return}else o={x:v,y:u};n={x:v,y:l}}}else if(i=m-(r=(h-p)/(g-d))*v,r<-1||r>1)if(h>p){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(d<g){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Ei(t,e){this.l=t,this.r=e,this.a=this.b=null}function Pi(t,e,n,r){var i=new Ei(t,e);return ui.push(i),n&&Oi(i,t,e,n),r&&Oi(i,e,t,r),ci[t.i].edges.push(new Di(i,t,e)),ci[e.i].edges.push(new Di(i,e,t)),i}function Ti(t,e,n){var r=new Ei(t,null);return r.a=e,r.b=n,ui.push(r),r}function Oi(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function Di(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function Ii(){this._=null}function Fi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Ni(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Gi(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function Wi(t){for(;t.L;)t=t.L;return t}function Bi(t,e){var n,r,i,o=t.sort(ji).pop();for(ui=[],ci=new Array(t.length),fi=new Ii,di=new Ii;;)if(i=hi,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(ci[o.i]=new ki(o),xi(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;bi(i.arc)}e&&(function(t){for(var e,n=ui,r=nr(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)(!Li(e=n[i],t)||!r(e)||m(e.a.x-e.b.x)<kt&&m(e.a.y-e.b.y)<kt)&&(e.a=e.b=null,n.splice(i,1))}(e),function(t){for(var e,n,r,i,o,a,s,l,u,c,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=ci,v=g.length;v--;)if((o=g[v])&&o.prepare())for(l=(s=o.edges).length,a=0;a<l;)r=(c=s[a].end()).x,i=c.y,e=(u=s[++a%l].start()).x,n=u.y,(m(r-e)>kt||m(i-n)>kt)&&(s.splice(a,0,new Di(Ti(o.site,c,m(r-f)<kt&&p-i>kt?{x:f,y:m(e-f)<kt?n:p}:m(i-p)<kt&&h-r>kt?{x:m(n-p)<kt?e:h,y:p}:m(r-h)<kt&&i-d>kt?{x:h,y:m(e-h)<kt?n:d}:m(i-d)<kt&&r-f>kt?{x:m(n-d)<kt?e:f,y:d}:null),o.site,null)),++l)}(e));var a={cells:ci,edges:ui};return fi=di=ui=ci=null,a}function ji(t,e){return e.y-t.y||e.x-t.x}ki.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)(t=e[n].edge).b&&t.a||e.splice(n,1);return e.sort(Mi),e.length},Di.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Ii.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=Wi(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(Ni(this,n),n=(t=n).U),n.C=!1,r.C=!0,Gi(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(Gi(this,n),n=(t=n).U),n.C=!1,r.C=!0,Ni(this,r)),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?Wi(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((e=i.R).C&&(e.C=!1,i.C=!0,Ni(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Gi(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,Ni(this,i),t=this._;break}}else if((e=i.L).C&&(e.C=!1,i.C=!0,Gi(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Ni(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,Gi(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=ei,n=ni,r=e,i=n,o=zi;if(t)return a(t);function a(t){var e=new Array(t.length),n=o[0][0],r=o[0][1],i=o[1][0],a=o[1][1];return Bi(s(t),o).cells.forEach((function(o,s){var l=o.edges,u=o.site;(e[s]=l.length?l.map((function(t){var e=t.start();return[e.x,e.y]})):u.x>=n&&u.x<=i&&u.y>=r&&u.y<=a?[[n,a],[i,a],[i,r],[n,r]]:[]).point=t[s]})),e}function s(t){return t.map((function(t,e){return{x:Math.round(r(t,e)/kt)*kt,y:Math.round(i(t,e)/kt)*kt,i:e}}))}return a.links=function(t){return Bi(s(t)).edges.filter((function(t){return t.l&&t.r})).map((function(e){return{source:t[e.l.i],target:t[e.r.i]}}))},a.triangles=function(t){var e=[];return Bi(s(t)).cells.forEach((function(n,r){for(var i,o,a,s,l=n.site,u=n.edges.sort(Mi),c=-1,f=u.length,h=u[f-1].edge,d=h.l===l?h.r:h.l;++c<f;)h,i=d,d=(h=u[c].edge).l===l?h.r:h.l,r<i.i&&r<d.i&&(a=i,s=d,((o=l).x-s.x)*(a.y-o.y)-(o.x-a.x)*(s.y-o.y)<0)&&e.push([t[r],t[i.i],t[d.i]])})),e},a.x=function(t){return arguments.length?(r=de(e=t),a):e},a.y=function(t){return arguments.length?(i=de(n=t),a):n},a.clipExtent=function(t){return arguments.length?(o=null==t?zi:t,a):o===zi?null:o},a.size=function(t){return arguments.length?a.clipExtent(t&&[[0,0],t]):o===zi?null:o&&o[1]},a};var zi=[[-1e6,-1e6],[1e6,1e6]];function Ri(t){return t.x}function Hi(t){return t.y}function Vi(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=e.nodes;l[0]&&Vi(t,l[0],n,r,a,s),l[1]&&Vi(t,l[1],a,r,i,s),l[2]&&Vi(t,l[2],n,s,a,o),l[3]&&Vi(t,l[3],a,s,i,o)}}function $i(t,e,n,r,i,o,a){var s,l=1/0;return function t(u,c,f,h,d){if(!(c>o||f>a||h<r||d<i)){if(p=u.point){var p,g=e-u.x,v=n-u.y,m=g*g+v*v;if(m<l){var y=Math.sqrt(l=m);r=e-y,i=n-y,o=e+y,a=n+y,s=p}}for(var b=u.nodes,x=.5*(c+h),w=.5*(f+d),_=(n>=w)<<1|e>=x,k=_+4;_<k;++_)if(u=b[3&_])switch(3&_){case 0:t(u,c,f,x,w);break;case 1:t(u,x,f,h,w);break;case 2:t(u,c,w,x,d);break;case 3:t(u,x,w,h,d)}}}(t,r,i,o,a),s}function Ui(e,n){e=t.rgb(e),n=t.rgb(n);var r=e.r,i=e.g,o=e.b,a=n.r-r,s=n.g-i,l=n.b-o;return function(t){return"#"+ae(Math.round(r+a*t))+ae(Math.round(i+s*t))+ae(Math.round(o+l*t))}}function qi(t,e){var n,r={},i={};for(n in t)n in e?r[n]=Qi(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function Ki(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Yi(t,e){var n,r,i,o=Xi.lastIndex=Zi.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=Xi.exec(t))&&(r=Zi.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:Ki(n,r)})),o=Zi.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,n,r,i){var o,a=ei,s=ni;if(o=arguments.length)return a=Ri,s=Hi,3===o&&(i=n,r=e,n=e=0),l(t);function l(t){var l,u,c,f,h,d,p,g,v,y=de(a),b=de(s);if(null!=e)d=e,p=n,g=r,v=i;else if(g=v=-(d=p=1/0),u=[],c=[],h=t.length,o)for(f=0;f<h;++f)(l=t[f]).x<d&&(d=l.x),l.y<p&&(p=l.y),l.x>g&&(g=l.x),l.y>v&&(v=l.y),u.push(l.x),c.push(l.y);else for(f=0;f<h;++f){var x=+y(l=t[f],f),w=+b(l,f);x<d&&(d=x),w<p&&(p=w),x>g&&(g=x),w>v&&(v=w),u.push(x),c.push(w)}var _=g-d,k=v-p;function M(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,u=t.y;if(null!=l)if(m(l-n)+m(u-r)<.01)C(t,e,n,r,i,o,a,s);else{var c=t.point;t.x=t.y=t.point=null,C(t,c,l,u,i,o,a,s),C(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else C(t,e,n,r,i,o,a,s)}function C(t,e,n,r,i,o,a,s){var l=.5*(i+a),u=.5*(o+s),c=n>=l,f=r>=u,h=f<<1|c;t.leaf=!1,c?i=l:a=l,f?o=u:s=u,M(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),e,n,r,i,o,a,s)}_>k?v=p+_:g=d+k;var S={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){M(S,t,+y(t,++f),+b(t,f),d,p,g,v)},visit:function(t){Vi(t,S,d,p,g,v)},find:function(t){return $i(S,t[0],t[1],d,p,g,v)}};if(f=-1,null==e){for(;++f<h;)M(S,t[f],u[f],c[f],d,p,g,v);--f}else t.forEach(S.add);return u=c=t=l=null,S}return l.x=function(t){return arguments.length?(a=t,l):a},l.y=function(t){return arguments.length?(s=t,l):s},l.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),l):null==e?null:[[e,n],[r,i]]},l.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),l):null==e?null:[r-e,i-n]},l},t.interpolateRgb=Ui,t.interpolateObject=qi,t.interpolateNumber=Ki,t.interpolateString=Yi;var Xi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zi=new RegExp(Xi.source,"g");function Qi(e,n){for(var r,i=t.interpolators.length;--i>=0&&!(r=t.interpolators[i](e,n)););return r}function Ji(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(Qi(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}t.interpolate=Qi,t.interpolators=[function(t,e){var n=typeof e;return("string"===n?he.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Ui:Yi:e instanceof zt?Ui:Array.isArray(e)?Ji:"object"===n&&isNaN(e)?qi:Ki)(t,e)}],t.interpolateArray=Ji;var to=function(){return E},eo=t.map({linear:to,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return ao},cubic:function(){return so},sin:function(){return uo},exp:function(){return co},circle:function(){return fo},elastic:function(t,e){var n;arguments.length<2&&(e=.45);arguments.length?n=e/St*Math.asin(1/t):(t=1,n=e/4);return function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*St/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ho}}),no=t.map({in:E,out:io,"in-out":oo,"out-in":function(t){return oo(io(t))}});function ro(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function io(t){return function(e){return 1-t(1-e)}}function oo(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function ao(t){return t*t}function so(t){return t*t*t}function lo(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function uo(t){return 1-Math.cos(t*Lt)}function co(t){return Math.pow(2,10*(t-1))}function fo(t){return 1-Math.sqrt(1-t*t)}function ho(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function po(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function go(t){var e,n,r,i=[t.a,t.b],o=[t.c,t.d],a=mo(i),s=vo(i,o),l=mo(((e=o)[0]+=(r=-s)*(n=i)[0],e[1]+=r*n[1],e))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,s*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Pt,this.translate=[t.e,t.f],this.scale=[a,l],this.skew=l?Math.atan2(s,l)*Pt:0}function vo(t,e){return t[0]*e[0]+t[1]*e[1]}function mo(t){var e=Math.sqrt(vo(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var n=t.indexOf("-"),r=n>=0?t.slice(0,n):t,i=n>=0?t.slice(n+1):"in";return r=eo.get(r)||to,ro((i=no.get(i)||E)(r.apply(null,e.call(arguments,1))))},t.interpolateHcl=function(e,n){e=t.hcl(e),n=t.hcl(n);var r=e.h,i=e.c,o=e.l,a=n.h-r,s=n.c-i,l=n.l-o;isNaN(s)&&(s=0,i=isNaN(i)?n.c:i);isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360);return function(t){return qt(r+a*t,i+s*t,o+l*t)+""}},t.interpolateHsl=function(e,n){e=t.hsl(e),n=t.hsl(n);var r=e.h,i=e.s,o=e.l,a=n.h-r,s=n.s-i,l=n.l-o;isNaN(s)&&(s=0,i=isNaN(i)?n.s:i);isNaN(a)?(a=0,r=isNaN(r)?n.h:r):a>180?a-=360:a<-180&&(a+=360);return function(t){return Vt(r+a*t,i+s*t,o+l*t)+""}},t.interpolateLab=function(e,n){e=t.lab(e),n=t.lab(n);var r=e.l,i=e.a,o=e.b,a=n.l-r,s=n.a-i,l=n.b-o;return function(t){return Zt(r+a*t,i+s*t,o+l*t)+""}},t.interpolateRound=po,t.transform=function(e){var n=r.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){n.setAttribute("transform",t);var e=n.transform.baseVal.consolidate()}return new go(e?e.matrix:yo)})(e)},go.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var yo={a:1,b:0,c:0,d:1,e:0,f:0};function bo(t){return t.length?t.pop()+",":""}function xo(e,n){var r=[],i=[];return e=t.transform(e),n=t.transform(n),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:Ki(t[0],e[0])},{i:i-2,x:Ki(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}(e.translate,n.translate,r,i),function(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(bo(n)+"rotate(",null,")")-2,x:Ki(t,e)})):e&&n.push(bo(n)+"rotate("+e+")")}(e.rotate,n.rotate,r,i),function(t,e,n,r){t!==e?r.push({i:n.push(bo(n)+"skewX(",null,")")-2,x:Ki(t,e)}):e&&n.push(bo(n)+"skewX("+e+")")}(e.skew,n.skew,r,i),function(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(bo(n)+"scale(",null,",",null,")");r.push({i:i-4,x:Ki(t[0],e[0])},{i:i-2,x:Ki(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(bo(n)+"scale("+e+")")}(e.scale,n.scale,r,i),e=n=null,function(t){for(var e,n=-1,o=i.length;++n<o;)r[(e=i[n]).i]=e.x(t);return r.join("")}}function wo(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function _o(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function ko(t){for(var e=t.source,n=t.target,r=function(t,e){if(t===e)return t;var n=Mo(t),r=Mo(e),i=n.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=n.pop(),o=r.pop();return a}(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Mo(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Co(t){t.fixed|=2}function So(t){t.fixed&=-7}function Ao(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Lo(t){t.fixed&=-5}t.interpolateTransform=xo,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(ko(t[n]));return e}},t.layout.chord=function(){var e,n,r,i,o,a,s,l={},u=0;function c(){var l,c,h,d,p,g={},v=[],m=t.range(i),y=[];for(e=[],n=[],l=0,d=-1;++d<i;){for(c=0,p=-1;++p<i;)c+=r[d][p];v.push(c),y.push(t.range(i)),l+=c}for(o&&m.sort((function(t,e){return o(v[t],v[e])})),a&&y.forEach((function(t,e){t.sort((function(t,n){return a(r[e][t],r[e][n])}))})),l=(St-u*i)/l,c=0,d=-1;++d<i;){for(h=c,p=-1;++p<i;){var b=m[d],x=y[b][p],w=r[b][x],_=c,k=c+=w*l;g[b+"-"+x]={index:b,subindex:x,startAngle:_,endAngle:k,value:w}}n[b]={index:b,startAngle:h,endAngle:c,value:v[b]},c+=u}for(d=-1;++d<i;)for(p=d-1;++p<i;){var M=g[d+"-"+p],C=g[p+"-"+d];(M.value||C.value)&&e.push(M.value<C.value?{source:C,target:M}:{source:M,target:C})}s&&f()}function f(){e.sort((function(t,e){return s((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)}))}return l.matrix=function(t){return arguments.length?(i=(r=t)&&r.length,e=n=null,l):r},l.padding=function(t){return arguments.length?(u=t,e=n=null,l):u},l.sortGroups=function(t){return arguments.length?(o=t,e=n=null,l):o},l.sortSubgroups=function(t){return arguments.length?(a=t,e=null,l):a},l.sortChords=function(t){return arguments.length?(s=t,e&&f(),l):s},l.chords=function(){return e||c(),e},l.groups=function(){return n||c(),n},l},t.layout.force=function(){var e,n,r,i,o,a,s={},l=t.dispatch("start","tick","end"),u=[1,1],c=.9,f=Eo,h=Po,d=-30,p=To,g=.1,v=.64,m=[],y=[];function b(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,l=o*o+a*a;if(s*s/v<l){if(l<p){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}if(e.point&&l&&l<p){u=e.pointCharge/l;t.px-=o*u,t.py-=a*u}}return!e.charge}}function x(e){e.px=t.event.x,e.py=t.event.y,s.resume()}return s.tick=function(){if((r*=.99)<.005)return e=null,l.end({type:"end",alpha:r=0}),!0;var n,s,f,h,p,v,x,w,_,k=m.length,M=y.length;for(s=0;s<M;++s)h=(f=y[s]).source,(v=(w=(p=f.target).x-h.x)*w+(_=p.y-h.y)*_)&&(w*=v=r*o[s]*((v=Math.sqrt(v))-i[s])/v,_*=v,p.x-=w*(x=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=_*x,h.x+=w*(x=1-x),h.y+=_*x);if((x=r*g)&&(w=u[0]/2,_=u[1]/2,s=-1,x))for(;++s<k;)(f=m[s]).x+=(w-f.x)*x,f.y+=(_-f.y)*x;if(d)for(!function t(e,n,r){var i=0,o=0;if(e.charge=0,!e.leaf)for(var a,s=e.nodes,l=s.length,u=-1;++u<l;)null!=(a=s[u])&&(t(a,n,r),e.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=n*r[e.point.index];e.charge+=e.pointCharge=c,i+=c*e.point.x,o+=c*e.point.y}e.cx=i/e.charge,e.cy=o/e.charge}(n=t.geom.quadtree(m),r,a),s=-1;++s<k;)(f=m[s]).fixed||n.visit(b(f));for(s=-1;++s<k;)(f=m[s]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);l.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(y=t,s):y},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(v=t*t,s):Math.sqrt(v)},s.alpha=function(t){return arguments.length?(t=+t,r?t>0?r=t:(e.c=null,e.t=NaN,e=null,l.end({type:"end",alpha:r=0})):t>0&&(l.start({type:"start",alpha:r=t}),e=we(s.tick)),s):r},s.start=function(){var t,e,n,r=m.length,l=y.length,c=u[0],p=u[1];for(t=0;t<r;++t)(n=m[t]).index=t,n.weight=0;for(t=0;t<l;++t)"number"==typeof(n=y[t]).source&&(n.source=m[n.source]),"number"==typeof n.target&&(n.target=m[n.target]),++n.source.weight,++n.target.weight;for(t=0;t<r;++t)n=m[t],isNaN(n.x)&&(n.x=g("x",c)),isNaN(n.y)&&(n.y=g("y",p)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof f)for(t=0;t<l;++t)i[t]=+f.call(this,y[t],t);else for(t=0;t<l;++t)i[t]=f;if(o=[],"function"==typeof h)for(t=0;t<l;++t)o[t]=+h.call(this,y[t],t);else for(t=0;t<l;++t)o[t]=h;if(a=[],"function"==typeof d)for(t=0;t<r;++t)a[t]=+d.call(this,m[t],t);else for(t=0;t<r;++t)a[t]=d;function g(n,i){if(!e){for(e=new Array(r),u=0;u<r;++u)e[u]=[];for(u=0;u<l;++u){var o=y[u];e[o.source.index].push(o.target),e[o.target.index].push(o.source)}}for(var a,s=e[t],u=-1,c=s.length;++u<c;)if(!isNaN(a=s[u][n]))return a;return Math.random()*i}return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){if(n||(n=t.behavior.drag().origin(E).on("dragstart.force",Co).on("drag.force",x).on("dragend.force",So)),!arguments.length)return n;this.on("mouseover.force",Ao).on("mouseout.force",Lo).call(n)},t.rebind(s,l,"on")};var Eo=20,Po=1,To=1/0;function Oo(e,n){return t.rebind(e,n,"sort","children","value"),e.nodes=e,e.links=Wo,e}function Do(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function Io(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function Fo(t){return t.children}function No(t){return t.value}function Go(t,e){return e.value-t.value}function Wo(e){return t.merge(e.map((function(t){return(t.children||[]).map((function(e){return{source:t,target:e}}))})))}t.layout.hierarchy=function(){var t=Go,e=Fo,n=No;function r(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=e.call(r,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;n&&(o.value=0),o.children=u}else n&&(o.value=+n.call(r,o,o.depth)||0),delete o.children;return Io(i,(function(e){var r,i;t&&(r=e.children)&&r.sort(t),n&&(i=e.parent)&&(i.value+=e.value)})),s}return r.sort=function(e){return arguments.length?(t=e,r):t},r.children=function(t){return arguments.length?(e=t,r):e},r.value=function(t){return arguments.length?(n=t,r):n},r.revalue=function(t){return n&&(Do(t,(function(t){t.children&&(t.value=0)})),Io(t,(function(t){var e;t.children||(t.value=+n.call(r,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)}))),t},r},t.layout.partition=function(){var e=t.layout.hierarchy(),n=[1,1];function r(t,r){var i=e.call(this,t,r);return function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=e.value?r/e.value:0;++u<a;)t(s=o[u],n,l=s.value*r,i),n+=l}}(i[0],0,n[0],n[1]/function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}(i[0])),i}return r.size=function(t){return arguments.length?(n=t,r):n},Oo(r,e)},t.layout.pie=function(){var e=Number,n=Bo,r=0,i=St,o=0;function a(s){var l,u=s.length,c=s.map((function(t,n){return+e.call(a,t,n)})),f=+("function"==typeof r?r.apply(this,arguments):r),h=("function"==typeof i?i.apply(this,arguments):i)-f,d=Math.min(Math.abs(h)/u,+("function"==typeof o?o.apply(this,arguments):o)),p=d*(h<0?-1:1),g=t.sum(c),v=g?(h-u*p)/g:0,m=t.range(u),y=[];return null!=n&&m.sort(n===Bo?function(t,e){return c[e]-c[t]}:function(t,e){return n(s[t],s[e])}),m.forEach((function(t){y[t]={data:s[t],value:l=c[t],startAngle:f,endAngle:f+=l*v+p,padAngle:d}})),y}return a.value=function(t){return arguments.length?(e=t,a):e},a.sort=function(t){return arguments.length?(n=t,a):n},a.startAngle=function(t){return arguments.length?(r=t,a):r},a.endAngle=function(t){return arguments.length?(i=t,a):i},a.padAngle=function(t){return arguments.length?(o=t,a):o},a};var Bo={};function jo(t){return t.x}function zo(t){return t.y}function Ro(t,e,n){t.y0=e,t.y=n}t.layout.stack=function(){var e=E,n=$o,r=Uo,i=Ro,o=jo,a=zo;function s(l,u){if(!(d=l.length))return l;var c=l.map((function(t,n){return e.call(s,t,n)})),f=c.map((function(t){return t.map((function(t,e){return[o.call(s,t,e),a.call(s,t,e)]}))})),h=n.call(s,f,u);c=t.permute(c,h),f=t.permute(f,h);var d,p,g,v,m=r.call(s,f,u),y=c[0].length;for(g=0;g<y;++g)for(i.call(s,c[0][g],v=m[g],f[0][g][1]),p=1;p<d;++p)i.call(s,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return l}return s.values=function(t){return arguments.length?(e=t,s):e},s.order=function(t){return arguments.length?(n="function"==typeof t?t:Ho.get(t)||$o,s):n},s.offset=function(t){return arguments.length?(r="function"==typeof t?t:Vo.get(t)||Uo,s):r},s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(a=t,s):a},s.out=function(t){return arguments.length?(i=t,s):i},s};var Ho=t.map({"inside-out":function(e){var n,r,i=e.length,o=e.map(qo),a=e.map(Ko),s=t.range(i).sort((function(t,e){return o[t]-o[e]})),l=0,u=0,c=[],f=[];for(n=0;n<i;++n)r=s[n],l<u?(l+=a[r],c.push(r)):(u+=a[r],f.push(r));return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:$o}),Vo=t.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,s,l,u,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=l=u=0,n=1;n<h;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,o=0,s=f[n][0]-f[n-1][0];e<c;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}d[n]=l-=i?o/i*s:0,l<u&&(u=l)}for(n=0;n<h;++n)d[n]-=u;return d},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:Uo});function $o(e){return t.range(e.length)}function Uo(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function qo(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function Ko(t){return t.reduce(Yo,0)}function Yo(t,e){return t+e[1]}function Xo(t,e){return Zo(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Zo(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function Qo(e){return[t.min(e),t.max(e)]}function Jo(t,e){return t.value-e.value}function ta(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function ea(t,e){t._pack_next=e,e._pack_prev=t}function na(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function ra(t){if((e=t.children)&&(l=e.length)){var e,n,r,i,o,a,s,l,u=1/0,c=-1/0,f=1/0,h=-1/0;if(e.forEach(ia),(n=e[0]).x=-n.r,n.y=0,b(n),l>1&&((r=e[1]).x=r.r,r.y=0,b(r),l>2))for(aa(n,r,i=e[2]),b(i),ta(n,i),n._pack_prev=i,ta(i,r),r=n._pack_next,o=3;o<l;o++){aa(n,r,i=e[o]);var d=0,p=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,p++)if(na(a,i)){d=1;break}if(1==d)for(s=n._pack_prev;s!==a._pack_prev&&!na(s,i);s=s._pack_prev,g++);d?(p<g||p==g&&r.r<n.r?ea(n,r=a):ea(n=s,r),o--):(ta(n,i),r=i,b(i))}var v=(u+c)/2,m=(f+h)/2,y=0;for(o=0;o<l;o++)(i=e[o]).x-=v,i.y-=m,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,e.forEach(oa)}function b(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),h=Math.max(t.y+t.r,h)}}function ia(t){t._pack_next=t._pack_prev=t}function oa(t){delete t._pack_next,delete t._pack_prev}function aa(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function sa(t,e){return t.parent==e.parent?1:2}function la(t){var e=t.children;return e.length?e[0]:t.t}function ua(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function ca(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function fa(t,e,n){return t.a.parent===e.parent?t.a:n}function ha(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function da(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function pa(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function ga(t){return t.rangeExtent?t.rangeExtent():pa(t.range())}function va(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function ma(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function ya(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:ba}t.layout.histogram=function(){var e=!0,n=Number,r=Qo,i=Xo;function o(o,a){for(var s,l,u=[],c=o.map(n,this),f=r.call(this,c,a),h=i.call(this,f,c,a),d=(a=-1,c.length),p=h.length-1,g=e?1:1/d;++a<p;)(s=u[a]=[]).dx=h[a+1]-(s.x=h[a]),s.y=0;if(p>0)for(a=-1;++a<d;)(l=c[a])>=f[0]&&l<=f[1]&&((s=u[t.bisect(h,l,1,p)-1]).y+=g,s.push(o[a]));return u}return o.value=function(t){return arguments.length?(n=t,o):n},o.range=function(t){return arguments.length?(r=de(t),o):r},o.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return Zo(e,t)}:de(t),o):i},o.frequency=function(t){return arguments.length?(e=!!t,o):e},o},t.layout.pack=function(){var e,n=t.layout.hierarchy().sort(Jo),r=0,i=[1,1];function o(t,o){var a=n.call(this,t,o),s=a[0],l=i[0],u=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,Io(s,(function(t){t.r=+c(t.value)})),Io(s,ra),r){var f=r*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;Io(s,(function(t){t.r+=f})),Io(s,ra),Io(s,(function(t){t.r-=f}))}return function t(e,n,r,i){var o=e.children;if(e.x=n+=i*e.x,e.y=r+=i*e.y,e.r*=i,o)for(var a=-1,s=o.length;++a<s;)t(o[a],n,r,i)}(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}return o.size=function(t){return arguments.length?(i=t,o):i},o.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,o):e},o.padding=function(t){return arguments.length?(r=+t,o):r},Oo(o,n)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),n=sa,r=[1,1],i=null;function o(t,o){var u=e.call(this,t,o),c=u[0],f=function(t){var e,n={A:null,children:[t]},r=[n];for(;null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}(c);if(Io(f,a),f.parent.m=-f.z,Do(f,s),i)Do(c,l);else{var h=c,d=c,p=c;Do(c,(function(t){t.x<h.x&&(h=t),t.x>d.x&&(d=t),t.depth>p.depth&&(p=t)}));var g=n(h,d)/2-h.x,v=r[0]/(d.x+n(d,h)/2+g),m=r[1]/(p.depth||1);Do(c,(function(t){t.x=(t.x+g)*v,t.y=t.depth*m}))}return u}function a(t){var e=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(e.length){!function(t){var e,n=0,r=0,i=t.children,o=i.length;for(;--o>=0;)(e=i[o]).z+=n,e.m+=n,n+=e.s+(r+=e.c)}(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+n(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+n(t._,i._));t.parent.A=function(t,e,r){if(e){for(var i,o=t,a=t,s=e,l=o.parent.children[0],u=o.m,c=a.m,f=s.m,h=l.m;s=ua(s),o=la(o),s&&o;)l=la(l),(a=ua(a)).a=t,(i=s.z+f-o.z-u+n(s._,o._))>0&&(ca(fa(s,t,r),t,i),u+=i,c+=i),f+=s.m,u+=o.m,h+=l.m,c+=a.m;s&&!ua(a)&&(a.t=s,a.m+=f-c),o&&!la(l)&&(l.t=o,l.m+=u-h,r=t)}return r}(t,i,t.parent.A||r[0])}function s(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function l(t){t.x*=r[0],t.y=t.depth*r[1]}return o.separation=function(t){return arguments.length?(n=t,o):n},o.size=function(t){return arguments.length?(i=null==(r=t)?l:null,o):i?null:r},o.nodeSize=function(t){return arguments.length?(i=null==(r=t)?null:l,o):i?r:null},Oo(o,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),n=sa,r=[1,1],i=!1;function o(o,a){var s,l=e.call(this,o,a),u=l[0],c=0;Io(u,(function(e){var r=e.children;r&&r.length?(e.x=function(t){return t.reduce((function(t,e){return t+e.x}),0)/t.length}(r),e.y=function(e){return 1+t.max(e,(function(t){return t.y}))}(r)):(e.x=s?c+=n(e,s):0,e.y=0,s=e)}));var f=function t(e){var n=e.children;return n&&n.length?t(n[0]):e}(u),h=function t(e){var n,r=e.children;return r&&(n=r.length)?t(r[n-1]):e}(u),d=f.x-n(f,h)/2,p=h.x+n(h,f)/2;return Io(u,i?function(t){t.x=(t.x-u.x)*r[0],t.y=(u.y-t.y)*r[1]}:function(t){t.x=(t.x-d)/(p-d)*r[0],t.y=(1-(u.y?t.y/u.y:1))*r[1]}),l}return o.separation=function(t){return arguments.length?(n=t,o):n},o.size=function(t){return arguments.length?(i=null==(r=t),o):i?null:r},o.nodeSize=function(t){return arguments.length?(i=null!=(r=t),o):i?r:null},Oo(o,e)},t.layout.treemap=function(){var e,n=t.layout.hierarchy(),r=Math.round,i=[1,1],o=null,a=ha,s=!1,l="squarify",u=.5*(1+Math.sqrt(5));function c(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function f(t){var e=t.children;if(e&&e.length){var n,r,i,o=a(t),s=[],u=e.slice(),h=1/0,g="slice"===l?o.dx:"dice"===l?o.dy:"slice-dice"===l?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(c(u,o.dx*o.dy/t.value),s.area=0;(i=u.length)>0;)s.push(n=u[i-1]),s.area+=n.area,"squarify"!==l||(r=d(s,g))<=h?(u.pop(),h=r):(s.area-=s.pop().area,p(s,g,o,!1),g=Math.min(o.dx,o.dy),s.length=s.area=0,h=1/0);s.length&&(p(s,g,o,!0),s.length=s.area=0),e.forEach(f)}}function h(t){var e=t.children;if(e&&e.length){var n,r=a(t),i=e.slice(),o=[];for(c(i,r.dx*r.dy/t.value),o.area=0;n=i.pop();)o.push(n),o.area+=n.area,null!=n.z&&(p(o,n.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);e.forEach(h)}}function d(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return e*=e,(r*=r)?Math.max(e*i*u/r,r/(e*o*u)):1/0}function p(t,e,n,i){var o,a=-1,s=t.length,l=n.x,u=n.y,c=e?r(t.area/e):0;if(e==n.dx){for((i||c>n.dy)&&(c=n.dy);++a<s;)(o=t[a]).x=l,o.y=u,o.dy=c,l+=o.dx=Math.min(n.x+n.dx-l,c?r(o.area/c):0);o.z=!0,o.dx+=n.x+n.dx-l,n.y+=c,n.dy-=c}else{for((i||c>n.dx)&&(c=n.dx);++a<s;)(o=t[a]).x=l,o.y=u,o.dx=c,u+=o.dy=Math.min(n.y+n.dy-u,c?r(o.area/c):0);o.z=!1,o.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function g(t){var r=e||n(t),o=r[0];return o.x=o.y=0,o.value?(o.dx=i[0],o.dy=i[1]):o.dx=o.dy=0,e&&n.revalue(o),c([o],o.dx*o.dy/o.value),(e?h:f)(o),s&&(e=r),r}return g.size=function(t){return arguments.length?(i=t,g):i},g.padding=function(t){if(!arguments.length)return o;function e(e){var n=t.call(g,e,e.depth);return null==n?ha(e):da(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return da(e,t)}var r;return a=null==(o=t)?ha:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,g},g.round=function(t){return arguments.length?(r=t?Math.round:Number,g):r!=Number},g.sticky=function(t){return arguments.length?(s=t,e=null,g):s},g.ratio=function(t){return arguments.length?(u=t,g):u},g.mode=function(t){return arguments.length?(l=t+"",g):l},Oo(g,n)},t.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var n=t.random.irwinHall(e);return function(){return n()/e}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},t.scale={};var ba={floor:E,ceil:E};function xa(e,n,r,i){var o=[],a=[],s=0,l=Math.min(e.length,n.length)-1;for(e[l]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++s<=l;)o.push(r(e[s-1],e[s])),a.push(i(n[s-1],n[s]));return function(n){var r=t.bisect(e,n,1,l)-1;return a[r](o[r](n))}}function wa(e,n){return t.rebind(e,n,"range","rangeRound","interpolate","clamp")}function _a(t,e){return ma(t,ya(ka(t,e)[2])),ma(t,ya(ka(t,e)[2])),t}function ka(t,e){null==e&&(e=10);var n=pa(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ma(e,n){return t.range.apply(t,ka(e,n))}function Ca(e,n,r){var i=ka(e,n);if(r){var o=Le.exec(r);if(o.shift(),"s"===o[8]){var a=t.formatPrefix(Math.max(m(i[0]),m(i[1])));return o[7]||(o[7]="."+Aa(a.scale(i[2]))),o[8]="f",r=t.format(o.join("")),function(t){return r(a.scale(t))+a.symbol}}o[7]||(o[7]="."+function(t,e){var n=Aa(e[2]);return t in Sa?Math.abs(n-Aa(Math.max(m(e[0]),m(e[1]))))+ +("e"!==t):n-2*("%"===t)}(o[8],i)),r=o.join("")}else r=",."+Aa(i[2])+"f";return t.format(r)}t.scale.linear=function(){return function t(e,n,r,i){var o,a;function s(){var t=Math.min(e.length,n.length)>2?xa:va,s=i?_o:wo;return o=t(e,n,s,r),a=t(n,e,s,Qi),l}function l(t){return o(t)}return l.invert=function(t){return a(t)},l.domain=function(t){return arguments.length?(e=t.map(Number),s()):e},l.range=function(t){return arguments.length?(n=t,s()):n},l.rangeRound=function(t){return l.range(t).interpolate(po)},l.clamp=function(t){return arguments.length?(i=t,s()):i},l.interpolate=function(t){return arguments.length?(r=t,s()):r},l.ticks=function(t){return Ma(e,t)},l.tickFormat=function(t,n){return Ca(e,t,n)},l.nice=function(t){return _a(e,t),s()},l.copy=function(){return t(e,n,r,i)},s()}([0,1],[0,1],Qi,!1)};var Sa={s:1,g:1,p:1,r:1,e:1};function Aa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}t.scale.log=function(){return function e(n,r,i,o){function a(t){return(i?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(r)}function s(t){return i?Math.pow(r,t):-Math.pow(r,-t)}function l(t){return n(a(t))}return l.invert=function(t){return s(n.invert(t))},l.domain=function(t){return arguments.length?(i=t[0]>=0,n.domain((o=t.map(Number)).map(a)),l):o},l.base=function(t){return arguments.length?(r=+t,n.domain(o.map(a)),l):r},l.nice=function(){var t=ma(o.map(a),i?Math:Ea);return n.domain(t),o=t.map(s),l},l.ticks=function(){var t=pa(o),e=[],n=t[0],l=t[1],u=Math.floor(a(n)),c=Math.ceil(a(l)),f=r%1?2:r;if(isFinite(c-u)){if(i){for(;u<c;u++)for(var h=1;h<f;h++)e.push(s(u)*h);e.push(s(u))}else for(e.push(s(u));u++<c;)for(h=f-1;h>0;h--)e.push(s(u)*h);for(u=0;e[u]<n;u++);for(c=e.length;e[c-1]>l;c--);e=e.slice(u,c)}return e},l.tickFormat=function(e,n){if(!arguments.length)return La;arguments.length<2?n=La:"function"!=typeof n&&(n=t.format(n));var i=Math.max(1,r*e/l.ticks().length);return function(t){var e=t/s(Math.round(a(t)));return e*r<r-.5&&(e*=r),e<=i?n(t):""}},l.copy=function(){return e(n.copy(),r,i,o)},wa(l,n)}(t.scale.linear().domain([0,1]),10,!0,[1,10])};var La=t.format(".0e"),Ea={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function Pa(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}t.scale.pow=function(){return function t(e,n,r){var i=Pa(n),o=Pa(1/n);function a(t){return e(i(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain((r=t.map(Number)).map(i)),a):r},a.ticks=function(t){return Ma(r,t)},a.tickFormat=function(t,e){return Ca(r,t,e)},a.nice=function(t){return a.domain(_a(r,t))},a.exponent=function(t){return arguments.length?(i=Pa(n=t),o=Pa(1/n),e.domain(r.map(i)),a):n},a.copy=function(){return t(e.copy(),n,r)},wa(a,e)}(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return function e(n,r){var i,o,a;function s(t){return o[((i.get(t)||("range"===r.t?i.set(t,n.push(t)):NaN))-1)%o.length]}function l(e,r){return t.range(n.length).map((function(t){return e+r*t}))}return s.domain=function(t){if(!arguments.length)return n;n=[],i=new x;for(var e,o=-1,a=t.length;++o<a;)i.has(e=t[o])||i.set(e,n.push(e));return s[r.t].apply(s,r.a)},s.range=function(t){return arguments.length?(o=t,a=0,r={t:"range",a:arguments},s):o},s.rangePoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],u=t[1],c=n.length<2?(i=(i+u)/2,0):(u-i)/(n.length-1+e);return o=l(i+c*e/2,c),a=0,r={t:"rangePoints",a:arguments},s},s.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var i=t[0],u=t[1],c=n.length<2?(i=u=Math.round((i+u)/2),0):(u-i)/(n.length-1+e)|0;return o=l(i+Math.round(c*e/2+(u-i-(n.length-1+e)*c)/2),c),a=0,r={t:"rangeRoundPoints",a:arguments},s},s.rangeBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var u=t[1]<t[0],c=t[u-0],f=t[1-u],h=(f-c)/(n.length-e+2*i);return o=l(c+h*i,h),u&&o.reverse(),a=h*(1-e),r={t:"rangeBands",a:arguments},s},s.rangeRoundBands=function(t,e,i){arguments.length<2&&(e=0),arguments.length<3&&(i=e);var u=t[1]<t[0],c=t[u-0],f=t[1-u],h=Math.floor((f-c)/(n.length-e+2*i));return o=l(c+Math.round((f-c-(n.length-e)*h)/2),h),u&&o.reverse(),a=Math.round(h*(1-e)),r={t:"rangeRoundBands",a:arguments},s},s.rangeBand=function(){return a},s.rangeExtent=function(){return pa(r.a[0])},s.copy=function(){return e(n,r)},s.domain(n)}([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Ta)},t.scale.category20=function(){return t.scale.ordinal().range(Oa)},t.scale.category20b=function(){return t.scale.ordinal().range(Da)},t.scale.category20c=function(){return t.scale.ordinal().range(Ia)};var Ta=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(ie),Oa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(ie),Da=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(ie),Ia=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(ie);function Fa(){return 0}t.scale.quantile=function(){return function e(n,r){var i;function o(){var e=0,o=r.length;for(i=[];++e<o;)i[e-1]=t.quantile(n,e/o);return a}function a(e){if(!isNaN(e=+e))return r[t.bisect(i,e)]}return a.domain=function(t){return arguments.length?(n=t.map(h).filter(d).sort(f),o()):n},a.range=function(t){return arguments.length?(r=t,o()):r},a.quantiles=function(){return i},a.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.copy=function(){return e(n,r)},o()}([],[])},t.scale.quantize=function(){return function t(e,n,r){var i,o;function a(t){return r[Math.max(0,Math.min(o,Math.floor(i*(t-e))))]}function s(){return i=r.length/(n-e),o=r.length-1,a}return a.domain=function(t){return arguments.length?(e=+t[0],n=+t[t.length-1],s()):[e,n]},a.range=function(t){return arguments.length?(r=t,s()):r},a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+e,t+1/i]},a.copy=function(){return t(e,n,r)},s()}(0,1,[0,1])},t.scale.threshold=function(){return function e(n,r){function i(e){if(e<=e)return r[t.bisect(n,e)]}return i.domain=function(t){return arguments.length?(n=t,i):n},i.range=function(t){return arguments.length?(r=t,i):r},i.invertExtent=function(t){return t=r.indexOf(t),[n[t-1],n[t]]},i.copy=function(){return e(n,r)},i}([.5],[0,1])},t.scale.identity=function(){return function t(e){function n(t){return+t}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e},n.ticks=function(t){return Ma(e,t)},n.tickFormat=function(t,n){return Ca(e,t,n)},n.copy=function(){return t(e)},n}([0,1])},t.svg={},t.svg.arc=function(){var t=Ga,e=Wa,n=Fa,r=Na,i=Ba,o=ja,a=za;function s(){var s=Math.max(0,+t.apply(this,arguments)),u=Math.max(0,+e.apply(this,arguments)),c=i.apply(this,arguments)-Lt,f=o.apply(this,arguments)-Lt,h=Math.abs(f-c),d=c>f?0:1;if(u<s&&(p=u,u=s,s=p),h>=At)return l(u,d)+(s?l(s,1-d):"")+"Z";var p,g,v,m,y,b,x,w,_,k,M,C,S=0,A=0,L=[];if((m=(+a.apply(this,arguments)||0)/2)&&(v=r===Na?Math.sqrt(s*s+u*u):+r.apply(this,arguments),d||(A*=-1),u&&(A=It(v/u*Math.sin(m))),s&&(S=It(v/s*Math.sin(m)))),u){y=u*Math.cos(c+A),b=u*Math.sin(c+A),x=u*Math.cos(f-A),w=u*Math.sin(f-A);var E=Math.abs(f-c-2*A)<=Ct?0:1;if(A&&Ra(y,b,x,w)===d^E){var P=(c+f)/2;y=u*Math.cos(P),b=u*Math.sin(P),x=w=null}}else y=b=0;if(s){_=s*Math.cos(f-S),k=s*Math.sin(f-S),M=s*Math.cos(c+S),C=s*Math.sin(c+S);var T=Math.abs(c-f+2*S)<=Ct?0:1;if(S&&Ra(_,k,M,C)===1-d^T){var O=(c+f)/2;_=s*Math.cos(O),k=s*Math.sin(O),M=C=null}}else _=k=0;if(h>kt&&(p=Math.min(Math.abs(u-s)/2,+n.apply(this,arguments)))>.001){g=s<u^d?0:1;var D=p,I=p;if(h<Ct){var F=null==M?[_,k]:null==x?[y,b]:si([y,b],[M,C],[x,w],[_,k]),N=y-F[0],G=b-F[1],W=x-F[0],B=w-F[1],j=1/Math.sin(Math.acos((N*W+G*B)/(Math.sqrt(N*N+G*G)*Math.sqrt(W*W+B*B)))/2),z=Math.sqrt(F[0]*F[0]+F[1]*F[1]);I=Math.min(p,(s-z)/(j-1)),D=Math.min(p,(u-z)/(j+1))}if(null!=x){var R=Ha(null==M?[_,k]:[M,C],[y,b],u,D,d),H=Ha([x,w],[_,k],u,D,d);p===D?L.push("M",R[0],"A",D,",",D," 0 0,",g," ",R[1],"A",u,",",u," 0 ",1-d^Ra(R[1][0],R[1][1],H[1][0],H[1][1]),",",d," ",H[1],"A",D,",",D," 0 0,",g," ",H[0]):L.push("M",R[0],"A",D,",",D," 0 1,",g," ",H[0])}else L.push("M",y,",",b);if(null!=M){var V=Ha([y,b],[M,C],s,-I,d),$=Ha([_,k],null==x?[y,b]:[x,w],s,-I,d);p===I?L.push("L",$[0],"A",I,",",I," 0 0,",g," ",$[1],"A",s,",",s," 0 ",d^Ra($[1][0],$[1][1],V[1][0],V[1][1]),",",1-d," ",V[1],"A",I,",",I," 0 0,",g," ",V[0]):L.push("L",$[0],"A",I,",",I," 0 0,",g," ",V[0])}else L.push("L",_,",",k)}else L.push("M",y,",",b),null!=x&&L.push("A",u,",",u," 0 ",E,",",d," ",x,",",w),L.push("L",_,",",k),null!=M&&L.push("A",s,",",s," 0 ",T,",",1-d," ",M,",",C);return L.push("Z"),L.join("")}function l(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return s.innerRadius=function(e){return arguments.length?(t=de(e),s):t},s.outerRadius=function(t){return arguments.length?(e=de(t),s):e},s.cornerRadius=function(t){return arguments.length?(n=de(t),s):n},s.padRadius=function(t){return arguments.length?(r=t==Na?Na:de(t),s):r},s.startAngle=function(t){return arguments.length?(i=de(t),s):i},s.endAngle=function(t){return arguments.length?(o=de(t),s):o},s.padAngle=function(t){return arguments.length?(a=de(t),s):a},s.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Lt;return[Math.cos(r)*n,Math.sin(r)*n]},s};var Na="auto";function Ga(t){return t.innerRadius}function Wa(t){return t.outerRadius}function Ba(t){return t.startAngle}function ja(t){return t.endAngle}function za(t){return t&&t.padAngle}function Ra(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function Ha(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,f=t[1]+u,h=e[0]+l,d=e[1]+u,p=(c+h)/2,g=(f+d)/2,v=h-c,m=d-f,y=v*v+m*m,b=n-r,x=c*d-h*f,w=(m<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),_=(x*m-v*w)/y,k=(-x*v-m*w)/y,M=(x*m+v*w)/y,C=(-x*v+m*w)/y,S=_-p,A=k-g,L=M-p,E=C-g;return S*S+A*A>L*L+E*E&&(_=M,k=C),[[_-l,k-u],[_*n/b,k*n/b]]}function Va(t){var e=ei,n=ni,r=Un,i=Ua,o=i.key,a=.7;function s(o){var s,l=[],u=[],c=-1,f=o.length,h=de(e),d=de(n);function p(){l.push("M",i(t(u),a))}for(;++c<f;)r.call(this,s=o[c],c)?u.push([+h.call(this,s,c),+d.call(this,s,c)]):u.length&&(p(),u=[]);return u.length&&p(),l.length?l.join(""):null}return s.x=function(t){return arguments.length?(e=t,s):e},s.y=function(t){return arguments.length?(n=t,s):n},s.defined=function(t){return arguments.length?(r=t,s):r},s.interpolate=function(t){return arguments.length?(o="function"==typeof t?i=t:(i=$a.get(t)||Ua).key,s):o},s.tension=function(t){return arguments.length?(a=t,s):a},s}t.svg.line=function(){return Va(E)};var $a=t.map({linear:Ua,"linear-closed":qa,step:function(t){var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];for(;++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);n>1&&i.push("H",r[0]);return i.join("")},"step-before":Ka,"step-after":Ya,basis:Qa,"basis-open":function(t){if(t.length<4)return Ua(t);var e,n=[],r=-1,i=t.length,o=[0],a=[0];for(;++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);n.push(Ja(ns,o)+","+Ja(ns,a)),--r;for(;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),rs(n,o,a);return n.join("")},"basis-closed":function(t){var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];for(;++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);e=[Ja(ns,a),",",Ja(ns,s)],--r;for(;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),rs(e,a,s);return e.join("")},bundle:function(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)r=t[u],i=u/n,r[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*l);return Qa(t)},cardinal:function(t,e){return t.length<3?Ua(t):t[0]+Xa(t,Za(t,e))},"cardinal-open":function(t,e){return t.length<4?Ua(t):t[1]+Xa(t.slice(1,-1),Za(t,e))},"cardinal-closed":function(t,e){return t.length<3?qa(t):t[0]+Xa((t.push(t[0]),t),Za([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?Ua(t):t[0]+Xa(t,function(t){var e,n,r,i,o=[],a=function(t){var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=is(i,o);for(;++e<n;)r[e]=(a+(a=is(i=o,o=t[e+1])))/2;return r[e]=a,r}(t),s=-1,l=t.length-1;for(;++s<l;)e=is(t[s],t[s+1]),m(e)<kt?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,(i=n*n+r*r)>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));s=-1;for(;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}(t))}});function Ua(t){return t.length>1?t.join("L"):t+"Z"}function qa(t){return t.join("L")+"Z"}function Ka(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function Ya(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Xa(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ua(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Za(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Qa(t){if(t.length<3)return Ua(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Ja(ns,a),",",Ja(ns,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),rs(l,a,s);return t.pop(),l.push("L",r),l.join("")}function Ja(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}$a.forEach((function(t,e){e.key=t,e.closed=/-closed$/.test(t)}));var ts=[0,2/3,1/3,0],es=[0,1/3,2/3,0],ns=[0,1/6,2/3,1/6];function rs(t,e,n){t.push("C",Ja(ts,e),",",Ja(ts,n),",",Ja(es,e),",",Ja(es,n),",",Ja(ns,e),",",Ja(ns,n))}function is(t,e){return(e[1]-t[1])/(e[0]-t[0])}function os(t){for(var e,n,r,i=-1,o=t.length;++i<o;)n=(e=t[i])[0],r=e[1]-Lt,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function as(t){var e=ei,n=ei,r=0,i=ni,o=Un,a=Ua,s=a.key,l=a,u="L",c=.7;function f(s){var f,h,d,p=[],g=[],v=[],m=-1,y=s.length,b=de(e),x=de(r),w=e===n?function(){return h}:de(n),_=r===i?function(){return d}:de(i);function k(){p.push("M",a(t(v),c),u,l(t(g.reverse()),c),"Z")}for(;++m<y;)o.call(this,f=s[m],m)?(g.push([h=+b.call(this,f,m),d=+x.call(this,f,m)]),v.push([+w.call(this,f,m),+_.call(this,f,m)])):g.length&&(k(),g=[],v=[]);return g.length&&k(),p.length?p.join(""):null}return f.x=function(t){return arguments.length?(e=n=t,f):n},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(n=t,f):n},f.y=function(t){return arguments.length?(r=i=t,f):i},f.y0=function(t){return arguments.length?(r=t,f):r},f.y1=function(t){return arguments.length?(i=t,f):i},f.defined=function(t){return arguments.length?(o=t,f):o},f.interpolate=function(t){return arguments.length?(s="function"==typeof t?a=t:(a=$a.get(t)||Ua).key,l=a.reverse||a,u=a.closed?"M":"L",f):s},f.tension=function(t){return arguments.length?(c=t,f):c},f}function ss(t){return t.radius}function ls(t){return[t.x,t.y]}function us(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Lt;return[n*Math.cos(r),n*Math.sin(r)]}}function cs(){return 64}function fs(){return"circle"}function hs(t){var e=Math.sqrt(t/Ct);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=Va(os);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Ka.reverse=Ya,Ya.reverse=Ka,t.svg.area=function(){return as(E)},t.svg.area.radial=function(){var t=as(os);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=zr,e=Rr,n=ss,r=Ba,i=ja;function o(n,r){var i,o,u=a(this,t,n,r),c=a(this,e,n,r);return"M"+u.p0+s(u.r,u.p1,u.a1-u.a0)+(o=c,(i=u).a0==o.a0&&i.a1==o.a1?l(u.r,u.p1,u.r,u.p0):l(u.r,u.p1,c.r,c.p0)+s(c.r,c.p1,c.a1-c.a0)+l(c.r,c.p1,u.r,u.p0))+"Z"}function a(t,e,o,a){var s=e.call(t,o,a),l=n.call(t,s,a),u=r.call(t,s,a)-Lt,c=i.call(t,s,a)-Lt;return{r:l,a0:u,a1:c,p0:[l*Math.cos(u),l*Math.sin(u)],p1:[l*Math.cos(c),l*Math.sin(c)]}}function s(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Ct)+",1 "+e}function l(t,e,n,r){return"Q 0,0 "+r}return o.radius=function(t){return arguments.length?(n=de(t),o):n},o.source=function(e){return arguments.length?(t=de(e),o):t},o.target=function(t){return arguments.length?(e=de(t),o):e},o.startAngle=function(t){return arguments.length?(r=de(t),o):r},o.endAngle=function(t){return arguments.length?(i=de(t),o):i},o},t.svg.diagonal=function(){var t=zr,e=Rr,n=ls;function r(r,i){var o=t.call(this,r,i),a=e.call(this,r,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(n))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}return r.source=function(e){return arguments.length?(t=de(e),r):t},r.target=function(t){return arguments.length?(e=de(t),r):e},r.projection=function(t){return arguments.length?(n=t,r):n},r},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),n=ls,r=e.projection;return e.projection=function(t){return arguments.length?r(us(n=t)):n},e},t.svg.symbol=function(){var t=fs,e=cs;function n(n,r){return(ds.get(t.call(this,n,r))||hs)(e.call(this,n,r))}return n.type=function(e){return arguments.length?(t=de(e),n):t},n.size=function(t){return arguments.length?(e=de(t),n):e},n};var ds=t.map({circle:hs,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*gs)),n=e*gs;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/ps),n=e*ps/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/ps),n=e*ps/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});t.svg.symbolTypes=ds.keys();var ps=Math.sqrt(3),gs=Math.tan(30*Et);$.transition=function(t){for(var e,n,r=bs||++_s,i=Cs(t),o=[],a=xs||{time:Date.now(),ease:lo,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&Ss(n,c,i,r,a),e.push(n)}return ys(o,i,r)},$.interrupt=function(t){return this.each(null==t?vs:ms(Cs(t)))};var vs=ms(Cs());function ms(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function ys(t,e,n){return j(t,ws),t.namespace=e,t.id=n,t}var bs,xs,ws=[],_s=0;function ks(t,e,n,r){var i=t.id,o=t.namespace;return ut(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Ms(t){return null==t&&(t=""),function(){this.textContent=t}}function Cs(t){return null==t?"__transition__":"__transition_"+t+"__"}function Ss(t,e,n,r,i){var o,a,s,l,u,c=t[n]||(t[n]={active:0,count:0}),f=c[r];function h(n){var i=c.active,h=c[i];for(var p in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[i],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),c)if(+p<r){var g=c[p];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[p]}a.c=d,we((function(){return a.c&&d(n||1)&&(a.c=null,a.t=NaN),1}),0,o),c.active=r,f.event&&f.event.start.call(t,t.__data__,e),u=[],f.tween.forEach((function(n,r){(r=r.call(t,t.__data__,e))&&u.push(r)})),l=f.ease,s=f.duration}function d(i){for(var o=i/s,a=l(o),h=u.length;h>0;)u[--h].call(t,a);if(o>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[r]:delete t[n],1}f||(o=i.time,a=we((function(t){var e=f.delay;if(a.t=e+o,e<=t)return h(t-e);a.c=h}),0,o),f=c[r]={tween:new x,time:o,timer:a,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++c.count)}ws.call=$.call,ws.empty=$.empty,ws.node=$.node,ws.size=$.size,t.transition=function(e,n){return e&&e.transition?bs?e.transition(n):e:t.selection().transition(e)},t.transition.prototype=ws,ws.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=U(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Ss(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return ys(a,o,i)},ws.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,l=[];t=q(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],h=-1,d=f.length;++h<d;)if(r=f[h]){o=r[s][a],n=t.call(r,r.__data__,h,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Ss(i,p,s,a,o),e.push(i)}return ys(l,s,a)},ws.filter=function(t){var e,n,r=[];"function"!=typeof t&&(t=st(t));for(var i=0,o=this.length;i<o;i++){r.push(e=[]);for(var a,s=0,l=(a=this[i]).length;s<l;s++)(n=a[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return ys(r,this.namespace,this.id)},ws.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):ut(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},ws.attr=function(e,n){if(arguments.length<2){for(n in e)this.attr(n,e[n]);return this}var r="transform"==e?xo:Qi,i=t.ns.qualify(e);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}function s(t){return null==t?o:(t+="",function(){var e,n=this.getAttribute(i);return n!==t&&(e=r(n,t),function(t){this.setAttribute(i,e(t))})})}function l(t){return null==t?a:(t+="",function(){var e,n=this.getAttributeNS(i.space,i.local);return n!==t&&(e=r(n,t),function(t){this.setAttributeNS(i.space,i.local,e(t))})})}return ks(this,"attr."+e,n,i.local?l:s)},ws.attrTween=function(e,n){var r=t.ns.qualify(e);return this.tween("attr."+e,r.local?function(t,e){var i=n.call(this,t,e,this.getAttributeNS(r.space,r.local));return i&&function(t){this.setAttributeNS(r.space,r.local,i(t))}}:function(t,e){var i=n.call(this,t,e,this.getAttribute(r));return i&&function(t){this.setAttribute(r,i(t))}})},ws.style=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){for(n in r<2&&(e=""),t)this.style(n,t[n],e);return this}n=""}function i(){this.style.removeProperty(t)}function a(e){return null==e?i:(e+="",function(){var r,i=o(this).getComputedStyle(this,null).getPropertyValue(t);return i!==e&&(r=Qi(i,e),function(e){this.style.setProperty(t,r(e),n)})})}return ks(this,"style."+t,e,a)},ws.styleTween=function(t,e,n){function r(r,i){var a=e.call(this,r,i,o(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),n)}}return arguments.length<3&&(n=""),this.tween("style."+t,r)},ws.text=function(t){return ks(this,"text",t,Ms)},ws.remove=function(){var t=this.namespace;return this.each("end.transition",(function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)}))},ws.ease=function(e){var n=this.id,r=this.namespace;return arguments.length<1?this.node()[r][n].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),ut(this,(function(t){t[r][n].ease=e})))},ws.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:ut(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},ws.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:ut(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},ws.each=function(e,n){var r=this.id,i=this.namespace;if(arguments.length<2){var o=xs,a=bs;try{bs=r,ut(this,(function(t,n,o){xs=t[i][r],e.call(t,t.__data__,n,o)}))}finally{xs=o,bs=a}}else ut(this,(function(o){var a=o[i][r];(a.event||(a.event=t.dispatch("start","end","interrupt"))).on(e,n)}));return this},ws.transition=function(){for(var t,e,n,r=this.id,i=++_s,o=this.namespace,a=[],s=0,l=this.length;s<l;s++){a.push(t=[]);for(var u,c=0,f=(u=this[s]).length;c<f;c++)(e=u[c])&&Ss(e,c,o,i,{time:(n=e[o][r]).time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration}),t.push(e)}return ys(a,o,i)},t.svg.axis=function(){var e,r=t.scale.linear(),i=As,o=6,a=6,s=3,l=[10],u=null;function c(n){n.each((function(){var n,c=t.select(this),f=this.__chart__||r,h=this.__chart__=r.copy(),d=null==u?h.ticks?h.ticks.apply(h,l):h.domain():u,p=null==e?h.tickFormat?h.tickFormat.apply(h,l):E:e,g=c.selectAll(".tick").data(d,h),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",kt),m=t.transition(g.exit()).style("opacity",kt).remove(),y=t.transition(g.order()).style("opacity",1),b=Math.max(o,0)+s,x=ga(h),w=c.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),t.transition(w));v.append("line"),v.append("text");var k,M,C,S,A=v.select("line"),L=y.select("line"),P=g.select("text").text(p),T=v.select("text"),O=y.select("text"),D="top"===i||"left"===i?-1:1;if("bottom"===i||"top"===i?(n=Es,k="x",C="y",M="x2",S="y2",P.attr("dy",D<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+D*a+"V0H"+x[1]+"V"+D*a)):(n=Ps,k="y",C="x",M="y2",S="x2",P.attr("dy",".32em").style("text-anchor",D<0?"end":"start"),_.attr("d","M"+D*a+","+x[0]+"H0V"+x[1]+"H"+D*a)),A.attr(S,D*o),T.attr(C,D*b),L.attr(M,0).attr(S,D*o),O.attr(k,0).attr(C,D*b),h.rangeBand){var I=h,F=I.rangeBand()/2;f=h=function(t){return I(t)+F}}else f.rangeBand?f=h:m.call(n,h,f);v.call(n,f,h),y.call(n,h,h)}))}return c.scale=function(t){return arguments.length?(r=t,c):r},c.orient=function(t){return arguments.length?(i=t in Ls?t+"":As,c):i},c.ticks=function(){return arguments.length?(l=n(arguments),c):l},c.tickValues=function(t){return arguments.length?(u=t,c):u},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(t){var e=arguments.length;return e?(o=+t,a=+arguments[e-1],c):o},c.innerTickSize=function(t){return arguments.length?(o=+t,c):o},c.outerTickSize=function(t){return arguments.length?(a=+t,c):a},c.tickPadding=function(t){return arguments.length?(s=+t,c):s},c.tickSubdivide=function(){return arguments.length&&c},c};var As="bottom",Ls={top:1,right:1,bottom:1,left:1};function Es(t,e,n){t.attr("transform",(function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"}))}function Ps(t,e,n){t.attr("transform",(function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"}))}t.svg.brush=function(){var e,n,r=W(h,"brushstart","brush","brushend"),i=null,a=null,s=[0,0],l=[0,0],u=!0,c=!0,f=Os[0];function h(e){e.each((function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),n=e.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var r=e.selectAll(".resize").data(f,E);r.exit().remove(),r.enter().append("g").attr("class",(function(t){return"resize "+t})).style("cursor",(function(t){return Ts[t]})).append("rect").attr("x",(function(t){return/[ew]$/.test(t)?-3:null})).attr("y",(function(t){return/^[ns]/.test(t)?-3:null})).attr("width",6).attr("height",6).style("visibility","hidden"),r.style("display",h.empty()?"none":null);var o,s=t.transition(e),l=t.transition(n);i&&(o=ga(i),l.attr("x",o[0]).attr("width",o[1]-o[0]),p(s)),a&&(o=ga(a),l.attr("y",o[0]).attr("height",o[1]-o[0]),g(s)),d(s)}))}function d(t){t.selectAll(".resize").attr("transform",(function(t){return"translate("+s[+/e$/.test(t)]+","+l[+/^s/.test(t)]+")"}))}function p(t){t.select(".extent").attr("x",s[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",s[1]-s[0])}function g(t){t.select(".extent").attr("y",l[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",l[1]-l[0])}function v(){var f,v,m=this,y=t.select(t.event.target),b=r.of(m,arguments),x=t.select(m),w=y.datum(),_=!/^(n|s)$/.test(w)&&i,k=!/^(e|w)$/.test(w)&&a,M=y.classed("extent"),C=bt(m),S=t.mouse(m),A=t.select(o(m)).on("keydown.brush",P).on("keyup.brush",T);if(t.event.changedTouches?A.on("touchmove.brush",O).on("touchend.brush",I):A.on("mousemove.brush",O).on("mouseup.brush",I),x.interrupt().selectAll("*").interrupt(),M)S[0]=s[0]-S[0],S[1]=l[0]-S[1];else if(w){var L=+/w$/.test(w),E=+/^n/.test(w);v=[s[1-L]-S[0],l[1-E]-S[1]],S[0]=s[L],S[1]=l[E]}else t.event.altKey&&(f=S.slice());function P(){32==t.event.keyCode&&(M||(f=null,S[0]-=s[1],S[1]-=l[1],M=2),N())}function T(){32==t.event.keyCode&&2==M&&(S[0]+=s[1],S[1]+=l[1],M=0,N())}function O(){var e=t.mouse(m),n=!1;v&&(e[0]+=v[0],e[1]+=v[1]),M||(t.event.altKey?(f||(f=[(s[0]+s[1])/2,(l[0]+l[1])/2]),S[0]=s[+(e[0]<f[0])],S[1]=l[+(e[1]<f[1])]):f=null),_&&D(e,i,0)&&(p(x),n=!0),k&&D(e,a,1)&&(g(x),n=!0),n&&(d(x),b({type:"brush",mode:M?"move":"resize"}))}function D(t,r,i){var o,a,h=ga(r),d=h[0],p=h[1],g=S[i],v=i?l:s,m=v[1]-v[0];if(M&&(d-=g,p-=m+g),o=(i?c:u)?Math.max(d,Math.min(p,t[i])):t[i],M?a=(o+=g)+m:(f&&(g=Math.max(d,Math.min(p,2*f[i]-o))),g<o?(a=o,o=g):a=g),v[0]!=o||v[1]!=a)return i?n=null:e=null,v[0]=o,v[1]=a,!0}function I(){O(),x.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),t.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),b({type:"brushend"})}x.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),b({type:"brushstart"}),O()}return h.event=function(i){i.each((function(){var i=r.of(this,arguments),o={x:s,y:l,i:e,j:n},a=this.__chart__||o;this.__chart__=o,bs?t.select(this).transition().each("start.brush",(function(){e=a.i,n=a.j,s=a.x,l=a.y,i({type:"brushstart"})})).tween("brush:brush",(function(){var t=Ji(s,o.x),r=Ji(l,o.y);return e=n=null,function(e){s=o.x=t(e),l=o.y=r(e),i({type:"brush",mode:"resize"})}})).each("end.brush",(function(){e=o.i,n=o.j,i({type:"brush",mode:"resize"}),i({type:"brushend"})})):(i({type:"brushstart"}),i({type:"brush",mode:"resize"}),i({type:"brushend"}))}))},h.x=function(t){return arguments.length?(f=Os[!(i=t)<<1|!a],h):i},h.y=function(t){return arguments.length?(f=Os[!i<<1|!(a=t)],h):a},h.clamp=function(t){return arguments.length?(i&&a?(u=!!t[0],c=!!t[1]):i?u=!!t:a&&(c=!!t),h):i&&a?[u,c]:i?u:a?c:null},h.extent=function(t){var r,o,u,c,f;return arguments.length?(i&&(r=t[0],o=t[1],a&&(r=r[0],o=o[0]),e=[r,o],i.invert&&(r=i(r),o=i(o)),o<r&&(f=r,r=o,o=f),r==s[0]&&o==s[1]||(s=[r,o])),a&&(u=t[0],c=t[1],i&&(u=u[1],c=c[1]),n=[u,c],a.invert&&(u=a(u),c=a(c)),c<u&&(f=u,u=c,c=f),u==l[0]&&c==l[1]||(l=[u,c])),h):(i&&(e?(r=e[0],o=e[1]):(r=s[0],o=s[1],i.invert&&(r=i.invert(r),o=i.invert(o)),o<r&&(f=r,r=o,o=f))),a&&(n?(u=n[0],c=n[1]):(u=l[0],c=l[1],a.invert&&(u=a.invert(u),c=a.invert(c)),c<u&&(f=u,u=c,c=f))),i&&a?[[r,u],[o,c]]:i?[r,o]:a&&[u,c])},h.clear=function(){return h.empty()||(s=[0,0],l=[0,0],e=n=null),h},h.empty=function(){return!!i&&s[0]==s[1]||!!a&&l[0]==l[1]},t.rebind(h,r,"on")};var Ts={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Os=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ds=Te.format=sn.timeFormat,Is=Ds.utc,Fs=Is("%Y-%m-%dT%H:%M:%S.%LZ");function Ns(t){return t.toISOString()}function Gs(e,n,r){function i(t){return e(t)}function o(e,r){var i=(e[1]-e[0])/r,o=t.bisect(Bs,i);return o==Bs.length?[n.year,ka(e.map((function(t){return t/31536e6})),r)[2]]:o?n[i/Bs[o-1]<Bs[o]/i?o-1:o]:[Rs,ka(e,r)[2]]}return i.invert=function(t){return Ws(e.invert(t))},i.domain=function(t){return arguments.length?(e.domain(t),i):e.domain().map(Ws)},i.nice=function(t,e){var n=i.domain(),r=pa(n),a=null==t?o(r,10):"number"==typeof t&&o(r,t);function s(n){return!isNaN(n)&&!t.range(n,Ws(+n+1),e).length}return a&&(t=a[0],e=a[1]),i.domain(ma(n,e>1?{floor:function(e){for(;s(e=t.floor(e));)e=Ws(e-1);return e},ceil:function(e){for(;s(e=t.ceil(e));)e=Ws(+e+1);return e}}:t))},i.ticks=function(t,e){var n=pa(i.domain()),r=null==t?o(n,10):"number"==typeof t?o(n,t):!t.range&&[{range:t},e];return r&&(t=r[0],e=r[1]),t.range(n[0],Ws(+n[1]+1),e<1?1:e)},i.tickFormat=function(){return r},i.copy=function(){return Gs(e.copy(),n,r)},wa(i,e)}function Ws(t){return new Date(t)}Ds.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ns:Fs,Ns.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Ns.toString=Fs.toString,Te.second=Fe((function(t){return new Oe(1e3*Math.floor(t/1e3))}),(function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))}),(function(t){return t.getSeconds()})),Te.seconds=Te.second.range,Te.seconds.utc=Te.second.utc.range,Te.minute=Fe((function(t){return new Oe(6e4*Math.floor(t/6e4))}),(function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))}),(function(t){return t.getMinutes()})),Te.minutes=Te.minute.range,Te.minutes.utc=Te.minute.utc.range,Te.hour=Fe((function(t){var e=t.getTimezoneOffset()/60;return new Oe(36e5*(Math.floor(t/36e5-e)+e))}),(function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))}),(function(t){return t.getHours()})),Te.hours=Te.hour.range,Te.hours.utc=Te.hour.utc.range,Te.month=Fe((function(t){return(t=Te.day(t)).setDate(1),t}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t){return t.getMonth()})),Te.months=Te.month.range,Te.months.utc=Te.month.utc.range;var Bs=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],js=[[Te.second,1],[Te.second,5],[Te.second,15],[Te.second,30],[Te.minute,1],[Te.minute,5],[Te.minute,15],[Te.minute,30],[Te.hour,1],[Te.hour,3],[Te.hour,6],[Te.hour,12],[Te.day,1],[Te.day,2],[Te.week,1],[Te.month,1],[Te.month,3],[Te.year,1]],zs=Ds.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Un]]),Rs={range:function(e,n,r){return t.range(Math.ceil(e/r)*r,+n,r).map(Ws)},floor:E,ceil:E};js.year=Te.year,Te.scale=function(){return Gs(t.scale.linear(),js,zs)};var Hs=js.map((function(t){return[t[0].utc,t[1]]})),Vs=Is.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Un]]);function $s(t){return JSON.parse(t.responseText)}function Us(t){var e=r.createRange();return e.selectNode(r.body),e.createContextualFragment(t.responseText)}Hs.year=Te.year.utc,Te.scale.utc=function(){return Gs(t.scale.linear(),Hs,Vs)},t.text=pe((function(t){return t.responseText})),t.json=function(t,e){return ge(t,"application/json",$s,e)},t.html=function(t,e){return ge(t,"text/html",Us,e)},t.xml=pe((function(t){return t.responseXML})),"function"==typeof define&&define.amd?(this.d3=t,define(t)):"object"==typeof module&&module.exports?module.exports=t:this.d3=t}(),function(){var t={dev:!1};t.tooltip=t.tooltip||{},t.utils=t.utils||{},t.models=t.models||{},t.charts={},t.logs={},t.dom={},"undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"==typeof d3&&(d3=require("d3")),t.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),t.dev&&(t.dispatch.on("render_start",(function(e){t.logs.startTime=+new Date})),t.dispatch.on("render_end",(function(e){t.logs.endTime=+new Date,t.logs.totalTime=t.logs.endTime-t.logs.startTime,t.log("total",t.logs.totalTime)}))),t.log=function(){if(t.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(t.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var e=Function.prototype.bind.call(console.log,console);e.apply(console,arguments)}return arguments[arguments.length-1]},t.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},t.render=function(e){e=e||1,t.render.active=!0,t.dispatch.render_start();var n=function(){for(var r,i,o=0;o<e&&(i=t.render.queue[o]);o++)r=i.generate(),typeof i.callback==typeof Function&&i.callback(r);t.render.queue.splice(0,o),t.render.queue.length?setTimeout(n):(t.dispatch.render_end(),t.render.active=!1)};setTimeout(n)},t.render.active=!1,t.render.queue=[],t.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),t.render.queue.push(e),t.render.active||t.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=t),"undefined"!=typeof window&&(window.nv=t),t.dom.write=function(t){return void 0!==window.fastdom?fastdom.mutate(t):t()},t.dom.read=function(t){return void 0!==window.fastdom?fastdom.measure(t):t()},t.interactiveGuideline=function(){"use strict";var e={left:0,top:0},n=null,r=null,i=d3.scale.linear(),o=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),a=!0,s=null,l=t.models.tooltip(),u=window.ActiveXObject;function c(f){f.each((function(f){var h=d3.select(this),d=n||960,p=r||400,g=h.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([f]);function v(){var t=d3.event.clientX-this.getBoundingClientRect().left,n=d3.event.clientY-this.getBoundingClientRect().top,r=!0,a=!1;if(u&&(t=d3.event.offsetX,n=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(r=!1),d3.event.target.className.baseVal.match("nv-legend")&&(a=!0)),r&&(t-=e.left,n-=e.top),"mouseout"===d3.event.type||t<0||n<0||t>d||n>p||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||a){if(u&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(l.nvPointerEventsClass)))return;return o.elementMouseout({mouseX:t,mouseY:n}),c.renderGuideLine(null),void l.hidden(!0)}l.hidden(!1);var s=void 0;if("function"==typeof i.rangeBands){var f=d3.bisect(i.range(),t)-1;if(!(i.range()[f]+i.rangeBand()>=t))return o.elementMouseout({mouseX:t,mouseY:n}),c.renderGuideLine(null),void l.hidden(!0);s=i.domain()[d3.bisect(i.range(),t)-1]}else s=i.invert(t);o.elementMousemove({mouseX:t,mouseY:n,pointXValue:s}),"dblclick"===d3.event.type&&o.elementDblclick({mouseX:t,mouseY:n,pointXValue:s}),"click"===d3.event.type&&o.elementClick({mouseX:t,mouseY:n,pointXValue:s}),"mousedown"===d3.event.type&&o.elementMouseDown({mouseX:t,mouseY:n,pointXValue:s}),"mouseup"===d3.event.type&&o.elementMouseUp({mouseX:t,mouseY:n,pointXValue:s})}g.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),s&&(s.on("touchmove",v).on("mousemove",v,!0).on("mouseout",v,!0).on("mousedown",v,!0).on("mouseup",v,!0).on("dblclick",v).on("click",v),c.guideLine=null,c.renderGuideLine=function(e){a&&(c.guideLine&&c.guideLine.attr("x1")===e||t.dom.write((function(){var n=g.select(".nv-interactiveGuideLine").selectAll("line").data(null!=e?[t.utils.NaNtoZero(e)]:[],String);n.enter().append("line").attr("class","nv-guideline").attr("x1",(function(t){return t})).attr("x2",(function(t){return t})).attr("y1",p).attr("y2",0),n.exit().remove()})))})}))}return l.duration(0).hideDelay(0).hidden(!1),c.dispatch=o,c.tooltip=l,c.margin=function(t){return arguments.length?(e.top=void 0!==t.top?t.top:e.top,e.left=void 0!==t.left?t.left:e.left,c):e},c.width=function(t){return arguments.length?(n=t,c):n},c.height=function(t){return arguments.length?(r=t,c):r},c.xScale=function(t){return arguments.length?(i=t,c):i},c.showGuideLine=function(t){return arguments.length?(a=t,c):a},c.svgContainer=function(t){return arguments.length?(s=t,c):s},c},t.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=d3.bisector((function(t,e){return r(t)-e})).left,o=d3.max([0,i(t,e)-1]),a=r(t[o]);if(void 0===a&&(a=o),a===e)return o;var s=d3.min([o+1,t.length-1]),l=r(t[s]);return void 0===l&&(l=s),Math.abs(l-e)>=Math.abs(a-e)?o:s},t.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach((function(t,o){var a=Math.abs(e-t);null!=t&&a<=r&&a<n&&(r=a,i=o)})),i},t.models.tooltip=function(){"use strict";var e="nvtooltip-"+Math.floor(1e5*Math.random()),n=null,r="w",i=25,o=0,a=null,s=!0,l=200,u=null,c={left:null,top:null},f=!0,h=100,d=!0,p=function(t,e,n){return t},g=function(t){return t},v=function(t,e){return t},m=function(t,e){if(null===t)return"";var n=d3.select(document.createElement("table"));d&&n.selectAll("thead").data([t]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(g(t.value));var r=n.selectAll("tbody").data([t]).enter().append("tbody").selectAll("tr").data((function(t){return t.series})).enter().append("tr").classed("highlight",(function(t){return t.highlight}));r.append("td").classed("legend-color-guide",!0).append("div").style("background-color",(function(t){return t.color})),r.append("td").classed("key",!0).classed("total",(function(t){return!!t.total})).html((function(t,e){return v(t.key,e)})),r.append("td").classed("value",!0).html((function(t,e){return p(t.value,e,t)})),r.filter((function(t,e){return void 0!==t.percent})).append("td").classed("percent",!0).html((function(t,e){return"("+d3.format("%")(t.percent)+")"})),r.selectAll("td").each((function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]);d3.select(this).style("border-bottom-color",e(.6)).style("border-top-color",e(.6))}}));var i=n.node().outerHTML;return void 0!==t.footer&&(i+="<div class='footer'>"+t.footer+"</div>"),i},y=function(){var t={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var e=document.body.getBoundingClientRect();t.left-=e.left,t.top-=e.top}return t},b=function(){t.dom.read((function(){var t=y(),e=function(t){var e,n,o,a=u.node().offsetHeight,s=u.node().offsetWidth,l=document.documentElement.clientWidth,c=document.documentElement.clientHeight;switch(r){case"e":e=-s-i,n=-a/2,t.left+e<0&&(e=i),(o=t.top+n)<0&&(n-=o),(o=t.top+n+a)>c&&(n-=o-c);break;case"w":e=i,n=-a/2,t.left+e+s>l&&(e=-s-i),(o=t.top+n)<0&&(n-=o),(o=t.top+n+a)>c&&(n-=o-c);break;case"n":e=-s/2-5,n=i,t.top+n+a>c&&(n=-a-i),(o=t.left+e)<0&&(e-=o),(o=t.left+e+s)>l&&(e-=o-l);break;case"s":e=-s/2,n=-a-i,t.top+n<0&&(n=i),(o=t.left+e)<0&&(e-=o),(o=t.left+e+s)>l&&(e-=o-l);break;case"center":e=-s/2,n=-a/2;break;default:e=0,n=0}return{left:e,top:n}}(t),n=t.left+e.left,o=t.top+e.top;if(s)u.interrupt().transition().delay(l).duration(0).style("opacity",0);else{var a="translate("+c.left+"px, "+c.top+"px)",f="translate("+Math.round(n)+"px, "+Math.round(o)+"px)",d=d3.interpolateString(a,f),p=u.style("opacity")<.1;u.interrupt().transition().duration(p?0:h).styleTween("transform",(function(t){return d}),"important").styleTween("-webkit-transform",(function(t){return d})).style("-ms-transform",f).style("opacity",1)}c.left=n,c.top=o}))};function x(){if(f&&function(e){if(e&&e.series){if(t.utils.isArray(e.series))return!0;if(t.utils.isObject(e.series))return e.series=[e.series],!0}return!1}(n))return t.dom.write((function(){!function(){if(!u||!u.node()){(u=d3.select(document.body).select("#"+e).data([1])).enter().append("div").attr("class","nvtooltip "+(a||"xy-tooltip")).attr("id",e).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed("nv-pointer-events-none",!0).classed("nv-pointer-events-none",!0),u.exit().remove()}}();var t=m(n,u.node());t&&(u.node().innerHTML=t),b()})),x}return x.nvPointerEventsClass="nv-pointer-events-none",x.options=t.utils.optionsFunc.bind(x),x._options=Object.create({},{duration:{get:function(){return h},set:function(t){h=t}},gravity:{get:function(){return r},set:function(t){r=t}},distance:{get:function(){return i},set:function(t){i=t}},snapDistance:{get:function(){return o},set:function(t){o=t}},classes:{get:function(){return a},set:function(t){a=t}},enabled:{get:function(){return f},set:function(t){f=t}},hideDelay:{get:function(){return l},set:function(t){l=t}},contentGenerator:{get:function(){return m},set:function(t){m=t}},valueFormatter:{get:function(){return p},set:function(t){p=t}},headerFormatter:{get:function(){return g},set:function(t){g=t}},keyFormatter:{get:function(){return v},set:function(t){v=t}},headerEnabled:{get:function(){return d},set:function(t){d=t}},position:{get:function(){return y},set:function(t){y=t}},chartContainer:{get:function(){return document.body},set:function(e){t.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(e){t.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(e){t.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return s},set:function(t){s!=t&&(s=!!t,x())}},data:{get:function(){return n},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),n=t}},node:{get:function(){return u.node()},set:function(t){}},id:{get:function(){return e},set:function(t){}}}),t.utils.initOptions(x),x},t.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},t.utils.isArray=Array.isArray,t.utils.isObject=function(t){return null!==t&&"object"==typeof t},t.utils.isFunction=function(t){return"function"==typeof t},t.utils.isDate=function(t){return"[object Date]"===toString.call(t)},t.utils.isNumber=function(t){return!isNaN(t)&&"number"==typeof t},t.utils.windowResize=function(e){return window.addEventListener?window.addEventListener("resize",e):t.log("ERROR: Failed to bind to window.resize with: ",e),{callback:e,clear:function(){window.removeEventListener("resize",e)}}},t.utils.getColor=function(e){if(void 0===e)return t.utils.defaultColor();if(t.utils.isArray(e)){var n=d3.scale.ordinal().range(e);return function(t,e){var r=void 0===e?t:e;return t.color||n(r)}}return e},t.utils.defaultColor=function(){return t.utils.getColor(d3.scale.category20().range())},t.utils.customTheme=function(e,n,r){n=n||function(t){return t.key};var i=(r=r||d3.scale.category20().range()).length;return function(o,a){var s=n(o);return t.utils.isFunction(e[s])?e[s]():void 0!==e[s]?e[s]:(i||(i=r.length),r[i-=1])}},t.utils.pjax=function(e,n){var r=function(r){d3.html(r,(function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),t.utils.pjax(e,n)}))};d3.selectAll(e).on("click",(function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()})),d3.select(window).on("popstate",(function(){d3.event.state&&r(d3.event.state)}))},t.utils.calcApproxTextWidth=function(e){if(t.utils.isFunction(e.style)&&t.utils.isFunction(e.text)){var n=parseInt(e.style("font-size").replace("px",""),10),r=e.text().length;return t.utils.NaNtoZero(r*n*.5)}return 0},t.utils.NaNtoZero=function(e){return!t.utils.isNumber(e)||isNaN(e)||null===e||e===1/0||e===-1/0?0:e},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},t.utils.renderWatch=function(e,n){if(!(this instanceof t.utils.renderWatch))return new t.utils.renderWatch(e,n);var r=void 0!==n?n:250,i=[],o=this;this.models=function(t){return(t=[].slice.call(arguments,0)).forEach((function(t){var e;t.__rendered=!1,(e=t).dispatch.on("renderEnd",(function(t){e.__rendered=!0,o.renderEnd("model")})),i.indexOf(t)<0&&i.push(t)})),this},this.reset=function(t){void 0!==t&&(r=t),i=[]},this.transition=function(t,e,n){if(n=(e=arguments.length>1?[].slice.call(arguments,1):[]).length>1?e.pop():void 0!==r?r:250,t.__rendered=!1,i.indexOf(t)<0&&i.push(t),0===n)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;0===t.length?t.__rendered=!0:t.every((function(t){return!t.length}))?t.__rendered=!0:t.__rendered=!1;var a=0;return t.transition().duration(n).each((function(){++a})).each("end",(function(n,r){0==--a&&(t.__rendered=!0,o.renderEnd.apply(this,e))}))},this.renderEnd=function(){i.every((function(t){return t.__rendered}))&&(i.forEach((function(t){t.__rendered=!1})),e.renderEnd.apply(this,arguments))}},t.utils.deepExtend=function(e){var n=arguments.length>1?[].slice.call(arguments,1):[];n.forEach((function(n){for(var r in n){var i=t.utils.isArray(e[r]),o=t.utils.isObject(e[r]),a=t.utils.isObject(n[r]);o&&!i&&a?t.utils.deepExtend(e[r],n[r]):e[r]=n[r]}}))},t.utils.state=function(){if(!(this instanceof t.utils.state))return new t.utils.state;var e={},n=function(){},r=function(){return{}},i=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",(function(t){n(t,!0)})),this.getter=function(t){return r=t,this},this.setter=function(t,e){return e||(e=function(){}),n=function(n,r){t(n),r&&e()},this},this.init=function(e){i=i||{},t.utils.deepExtend(i,e)};var o=function(){var t=r();if(JSON.stringify(t)===JSON.stringify(e))return!1;for(var n in t)void 0===e[n]&&(e[n]={}),e[n]=t[n],!0;return!0};this.update=function(){i&&(n(i,!1),i=null),o.call(this)&&this.dispatch.change(e)}},t.utils.optionsFunc=function(e){return e&&d3.map(e).forEach(function(e,n){t.utils.isFunction(this[e])&&this[e](n)}.bind(this)),this},t.utils.calcTicksX=function(e,n){for(var r=1,i=0;i<n.length;i+=1){var o=n[i]&&n[i].values?n[i].values.length:0;r=o>r?o:r}return t.log("Requested number of ticks: ",e),t.log("Calculated max values to be: ",r),e=(e=e>r?e=r-1:e)<1?1:e,e=Math.floor(e),t.log("Calculating tick count as: ",e),e},t.utils.calcTicksY=function(e,n){return t.utils.calcTicksX(e,n)},t.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},t.utils.initOptions=function(e){e._overrides=e._overrides||{};var n=Object.getOwnPropertyNames(e._options||{}),r=Object.getOwnPropertyNames(e._calls||{});for(var i in n=n.concat(r))t.utils.initOption(e,n[i])},t.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),t._d3options=(t._d3options||[]).filter((function(t,e,n){return n.indexOf(t)===e})),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},t.utils.arrayUnique=function(t){return t.sort().filter((function(e,n){return!n||e!=t[n-1]}))},t.utils.symbolMap=d3.map(),t.utils.symbol=function(){var e,n=64;function r(r,i){var o=e.call(this,r,i),a=n.call(this,r,i);return-1!==d3.svg.symbolTypes.indexOf(o)?d3.svg.symbol().type(o).size(a)():t.utils.symbolMap.get(o)(a)}return r.type=function(t){return arguments.length?(e=d3.functor(t),r):e},r.size=function(t){return arguments.length?(n=d3.functor(t),r):n},r},t.utils.inheritOptions=function(e,n){var r=Object.getOwnPropertyNames(n._options||{}),i=Object.getOwnPropertyNames(n._calls||{}),o=n._inherited||[],a=n._d3options||[],s=r.concat(i).concat(o).concat(a);s.unshift(n),s.unshift(e),d3.rebind.apply(this,s),e._inherited=t.utils.arrayUnique(r.concat(i).concat(o).concat(r).concat(e._inherited||[])),e._d3options=t.utils.arrayUnique(a.concat(e._d3options||[]))},t.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},t.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},t.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},t.utils.availableHeight=function(e,n,r){return Math.max(0,t.utils.sanitizeHeight(e,n)-r.top-r.bottom)},t.utils.availableWidth=function(e,n,r){return Math.max(0,t.utils.sanitizeWidth(e,n)-r.left-r.right)},t.utils.noData=function(e,n){var r=e.options(),i=r.margin(),o=r.noData(),a=null==o?["No Data Available."]:[o],s=t.utils.availableHeight(null,n,i),l=t.utils.availableWidth(null,n,i),u=i.left+l/2,c=i.top+s/2;n.selectAll("g").remove();var f=n.selectAll(".nv-noData").data(a);f.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),f.attr("x",u).attr("y",c).text((function(t){return t}))},t.utils.wrapTicks=function(t,e){t.each((function(){for(var t,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],o=0,a=n.attr("y"),s=parseFloat(n.attr("dy")),l=n.text(null).append("tspan").attr("x",0).attr("y",a).attr("dy",s+"em");t=r.pop();)i.push(t),l.text(i.join(" ")),l.node().getComputedTextLength()>e&&(i.pop(),l.text(i.join(" ")),i=[t],l=n.append("tspan").attr("x",0).attr("y",a).attr("dy",1.1*++o+s+"em").text(t))}))},t.utils.arrayEquals=function(e,n){if(e===n)return!0;if(!e||!n)return!1;if(e.length!=n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]instanceof Array&&n[r]instanceof Array){if(!t.arrayEquals(e[r],n[r]))return!1}else if(e[r]!=n[r])return!1;return!0},t.utils.pointIsInArc=function(t,e,n){var r=n.innerRadius()(e),i=n.outerRadius()(e),o=n.startAngle()(e),a=n.endAngle()(e),s=t.x*t.x+t.y*t.y,l=Math.atan2(t.x,-t.y);return l=l<0?l+2*Math.PI:l,r*r<=s&&s<=i*i&&o<=l&&l<=a},t.models.axis=function(){"use strict";var e,n,r=d3.svg.axis(),i=d3.scale.linear(),o={top:0,right:0,bottom:0,left:0},a=75,s=60,l=null,u=!0,c=0,f=!0,h=!1,d=!1,p=null,g=0,v=void 0,m=250,y=d3.dispatch("renderEnd");r.scale(i).orient("bottom").tickFormat((function(t){return t}));var b=t.utils.renderWatch(y,m);function x(s){return b.reset(),s.each((function(s){var m=d3.select(this);t.utils.initSVG(m);var y=m.selectAll("g.nv-wrap.nv-axis").data([s]),x=(y.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),y.select("g"));null!==p?r.ticks(p):"top"!=r.orient()&&"bottom"!=r.orient()||r.ticks(Math.abs(i.range()[1]-i.range()[0])/100),x.watchTransition(b,"axis").call(r),n=n||r.scale();var w=r.tickFormat();null==w&&(w=n.tickFormat());var _,k,M,C=x.selectAll("text.nv-axislabel").data([l||null]);switch(C.exit().remove(),void 0!==v&&x.selectAll("g").select("text").style("font-size",v),r.orient()){case"top":C.enter().append("text").attr("class","nv-axislabel"),M=0,1===i.range().length?M=d?2*i.range()[0]+i.rangeBand():0:2===i.range().length?M=d?i.range()[0]+i.range()[1]+i.rangeBand():i.range()[1]:i.range().length>2&&(M=i.range()[i.range().length-1]+(i.range()[1]-i.range()[0])),C.attr("text-anchor","middle").attr("y",0).attr("x",M/2),u&&((k=y.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")})).append("text"),k.exit().remove(),k.attr("transform",(function(e,n){return"translate("+t.utils.NaNtoZero(i(e))+",0)"})).select("text").attr("dy","-0.5em").attr("y",-r.tickPadding()).attr("text-anchor","middle").text((function(t,n){var r=(e||w)(t);return(""+r).match("NaN")?"":r})),k.watchTransition(b,"min-max top").attr("transform",(function(e,n){return"translate("+t.utils.NaNtoZero(i.range()[n])+",0)"})));break;case"bottom":_=g+36;var S=30,A=0,L=x.selectAll("g").select("text"),E="";if(c%360){L.attr("transform",""),L.each((function(t,e){var n=this.getBoundingClientRect(),r=n.width;A=n.height,r>S&&(S=r)})),E="rotate("+c+" 0,"+(A/2+r.tickPadding())+")";var P=Math.abs(Math.sin(c*Math.PI/180));_=(P?P*S:S)+30,L.attr("transform",E).style("text-anchor",c%360>0?"start":"end")}else h?L.attr("transform",(function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"})):L.attr("transform","translate(0,0)");C.enter().append("text").attr("class","nv-axislabel"),M=0,1===i.range().length?M=d?2*i.range()[0]+i.rangeBand():0:2===i.range().length?M=d?i.range()[0]+i.range()[1]+i.rangeBand():i.range()[1]:i.range().length>2&&(M=i.range()[i.range().length-1]+(i.range()[1]-i.range()[0])),C.attr("text-anchor","middle").attr("y",_).attr("x",M/2),u&&((k=y.selectAll("g.nv-axisMaxMin").data([i.domain()[0],i.domain()[i.domain().length-1]])).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")})).append("text"),k.exit().remove(),k.attr("transform",(function(e,n){return"translate("+t.utils.NaNtoZero(i(e)+(d?i.rangeBand()/2:0))+",0)"})).select("text").attr("dy",".71em").attr("y",r.tickPadding()).attr("transform",E).style("text-anchor",c?c%360>0?"start":"end":"middle").text((function(t,n){var r=(e||w)(t);return(""+r).match("NaN")?"":r})),k.watchTransition(b,"min-max bottom").attr("transform",(function(e,n){return"translate("+t.utils.NaNtoZero(i(e)+(d?i.rangeBand()/2:0))+",0)"})));break;case"right":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",f?"middle":"begin").attr("transform",f?"rotate(90)":"").attr("y",f?12-Math.max(o.right,a)-(g||0):-10).attr("x",f?d3.max(i.range())/2:r.tickPadding()),u&&((k=y.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")})).append("text").style("opacity",0),k.exit().remove(),k.attr("transform",(function(e,n){return"translate(0,"+t.utils.NaNtoZero(i(e))+")"})).select("text").attr("dy",".32em").attr("y",0).attr("x",r.tickPadding()).style("text-anchor","start").text((function(t,n){var r=(e||w)(t);return(""+r).match("NaN")?"":r})),k.watchTransition(b,"min-max right").attr("transform",(function(e,n){return"translate(0,"+t.utils.NaNtoZero(i.range()[n])+")"})).select("text").style("opacity",1));break;case"left":C.enter().append("text").attr("class","nv-axislabel"),C.style("text-anchor",f?"middle":"end").attr("transform",f?"rotate(-90)":"").attr("y",f?25-Math.max(o.left,a)-(g||0):-10).attr("x",f?-d3.max(i.range())/2:-r.tickPadding()),u&&((k=y.selectAll("g.nv-axisMaxMin").data(i.domain())).enter().append("g").attr("class",(function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")})).append("text").style("opacity",0),k.exit().remove(),k.attr("transform",(function(e,r){return"translate(0,"+t.utils.NaNtoZero(n(e))+")"})).select("text").attr("dy",".32em").attr("y",0).attr("x",-r.tickPadding()).attr("text-anchor","end").text((function(t,n){var r=(e||w)(t);return(""+r).match("NaN")?"":r})),k.watchTransition(b,"min-max right").attr("transform",(function(e,n){return"translate(0,"+t.utils.NaNtoZero(i.range()[n])+")"})).select("text").style("opacity",1))}if(C.text((function(t){return t})),!u||"left"!==r.orient()&&"right"!==r.orient()||(x.selectAll("g").each((function(t,e){d3.select(this).select("text").attr("opacity",1),(i(t)<i.range()[1]+10||i(t)>i.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))})),i.domain()[0]==i.domain()[1]&&0==i.domain()[0]&&y.selectAll("g.nv-axisMaxMin").style("opacity",(function(t,e){return e?0:1}))),u&&("top"===r.orient()||"bottom"===r.orient())){var T=[];y.selectAll("g.nv-axisMaxMin").each((function(t,e){try{e?T.push(i(t)-this.getBoundingClientRect().width-4):T.push(i(t)+this.getBoundingClientRect().width+4)}catch(n){e?T.push(i(t)-4):T.push(i(t)+4)}})),x.selectAll("g").each((function(t,e){(i(t)<T[0]||i(t)>T[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())}))}x.selectAll(".tick").filter((function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t})).classed("zero",!0),n=i.copy()})),b.renderEnd("axis immediate"),x}return x.axis=r,x.dispatch=y,x.options=t.utils.optionsFunc.bind(x),x._options=Object.create({},{axisLabelDistance:{get:function(){return g},set:function(t){g=t}},staggerLabels:{get:function(){return h},set:function(t){h=t}},rotateLabels:{get:function(){return c},set:function(t){c=t}},rotateYLabel:{get:function(){return f},set:function(t){f=t}},showMaxMin:{get:function(){return u},set:function(t){u=t}},axisLabel:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return s},set:function(t){s=t}},ticks:{get:function(){return p},set:function(t){p=t}},width:{get:function(){return a},set:function(t){a=t}},fontSize:{get:function(){return v},set:function(t){v=t}},tickFormatMaxMin:{get:function(){return e},set:function(t){e=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return m},set:function(t){m=t,b.reset(m)}},scale:{get:function(){return i},set:function(e){i=e,r.scale(i),d="function"==typeof i.rangeBands,t.utils.inheritOptionsD3(x,i,["domain","range","rangeBand","rangeBands"])}}}),t.utils.initOptions(x),t.utils.inheritOptionsD3(x,r,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),t.utils.inheritOptionsD3(x,i,["domain","range","rangeBand","rangeBands"]),x},t.models.boxPlot=function(){"use strict";var e,n,r,i,o,a,s={top:0,right:0,bottom:0,left:0},l=960,u=500,c=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),h=d3.scale.linear(),d=function(t){return t.label},p=function(t){return t.values.Q1},g=function(t){return t.values.Q2},v=function(t){return t.values.Q3},m=function(t){return t.values.whisker_low},y=function(t){return t.values.whisker_high},b=function(t){return t.color},x=function(t){return t.values.outliers},w=function(t,e,n){return t},_=function(t,e,n){return t},k=function(t,e,n){},M=t.utils.defaultColor(),C=null,S=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),A=250,L=null,E=t.utils.renderWatch(S,A);function P(c){return E.reset(),c.each((function(c){var P=l-s.left-s.right,T=u-s.top-s.bottom;C=d3.select(this),t.utils.initSVG(C),f.domain(e||c.map((function(t,e){return d(t,e)}))).rangeBands(n||[0,P],.1);var O=[];if(!r){var D=[];c.forEach((function(t,e){var n=p(t),r=v(t),i=m(t),o=y(t),a=x(t);a&&a.forEach((function(t,e){D.push(w(t,e,void 0))})),i&&D.push(i),n&&D.push(n),r&&D.push(r),o&&D.push(o)})),O=[d3.min(D),d3.max(D)]}h.domain(r||O),h.range(i||[T,0]),o=o||f,a=a||h.copy().range([h(0),h(0)]);var I=C.selectAll("g.nv-wrap").data([c]);I.enter().append("g").attr("class","nvd3 nv-wrap");I.attr("transform","translate("+s.left+","+s.top+")");var F=I.selectAll(".nv-boxplot").data((function(t){return t})),N=F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);F.attr("class","nv-boxplot").attr("transform",(function(t,e,n){return"translate("+(f(d(t,e))+.05*f.rangeBand())+", 0)"})).classed("hover",(function(t){return t.hover})),F.watchTransition(E,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay((function(t,e){return e*A/c.length})).attr("transform",(function(t,e){return"translate("+(f(d(t,e))+.05*f.rangeBand())+", 0)"})),F.exit().remove(),N.each((function(t,e){var n=d3.select(this);[m,y].forEach((function(r){if(void 0!==r(t)&&null!==r(t)){var i=r===m?"low":"high";n.append("line").style("stroke",b(t)||M(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+i),n.append("line").style("stroke",b(t)||M(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+i)}}))}));var G=function(){return null===L?.9*f.rangeBand():Math.min(75,.9*f.rangeBand())},W=function(){return.45*f.rangeBand()-G()/2},B=function(){return.45*f.rangeBand()+G()/2};[m,y].forEach((function(t){var e=t===m?"low":"high",n=t===m?p:v;F.select("line.nv-boxplot-whisker.nv-boxplot-"+e).watchTransition(E,"nv-boxplot: boxplots").attr("x1",.45*f.rangeBand()).attr("y1",(function(e,n){return h(t(e))})).attr("x2",.45*f.rangeBand()).attr("y2",(function(t,e){return h(n(t))})),F.select("line.nv-boxplot-tick.nv-boxplot-"+e).watchTransition(E,"nv-boxplot: boxplots").attr("x1",W).attr("y1",(function(e,n){return h(t(e))})).attr("x2",B).attr("y2",(function(e,n){return h(t(e))}))})),[m,y].forEach((function(t){var e=t===m?"low":"high";N.selectAll(".nv-boxplot-"+e).on("mouseover",(function(e,n,r){d3.select(this).classed("hover",!0),S.elementMouseover({series:{key:t(e),color:b(e)||M(e,r)},e:d3.event})})).on("mouseout",(function(e,n,r){d3.select(this).classed("hover",!1),S.elementMouseout({series:{key:t(e),color:b(e)||M(e,r)},e:d3.event})})).on("mousemove",(function(t,e){S.elementMousemove({e:d3.event})}))})),N.append("rect").attr("class","nv-boxplot-box").on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),S.elementMouseover({key:d(t),value:d(t),series:[{key:"Q3",value:v(t),color:b(t)||M(t,e)},{key:"Q2",value:g(t),color:b(t)||M(t,e)},{key:"Q1",value:p(t),color:b(t)||M(t,e)}],data:t,index:e,e:d3.event})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),S.elementMouseout({key:d(t),value:d(t),series:[{key:"Q3",value:v(t),color:b(t)||M(t,e)},{key:"Q2",value:g(t),color:b(t)||M(t,e)},{key:"Q1",value:p(t),color:b(t)||M(t,e)}],data:t,index:e,e:d3.event})})).on("mousemove",(function(t,e){S.elementMousemove({e:d3.event})})),F.select("rect.nv-boxplot-box").watchTransition(E,"nv-boxplot: boxes").attr("y",(function(t,e){return h(v(t))})).attr("width",G).attr("x",W).attr("height",(function(t,e){return Math.abs(h(v(t))-h(p(t)))||1})).style("fill",(function(t,e){return b(t)||M(t,e)})).style("stroke",(function(t,e){return b(t)||M(t,e)})),N.append("line").attr("class","nv-boxplot-median"),F.select("line.nv-boxplot-median").watchTransition(E,"nv-boxplot: boxplots line").attr("x1",W).attr("y1",(function(t,e){return h(g(t))})).attr("x2",B).attr("y2",(function(t,e){return h(g(t))}));var j=F.selectAll(".nv-boxplot-outlier").data((function(t){return x(t)||[]}));j.enter().append("circle").style("fill",(function(t,e,n){return k(t,e,n)||M(t,n)})).style("stroke",(function(t,e,n){return k(t,e,n)||M(t,n)})).style("z-index",9e3).on("mouseover",(function(t,e,n){d3.select(this).classed("hover",!0),S.elementMouseover({series:{key:_(t,e,n),color:k(t,e,n)||M(t,n)},e:d3.event})})).on("mouseout",(function(t,e,n){d3.select(this).classed("hover",!1),S.elementMouseout({series:{key:_(t,e,n),color:k(t,e,n)||M(t,n)},e:d3.event})})).on("mousemove",(function(t,e){S.elementMousemove({e:d3.event})})),j.attr("class","nv-boxplot-outlier"),j.watchTransition(E,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*f.rangeBand()).attr("cy",(function(t,e,n){return h(w(t,e,n))})).attr("r","3"),j.exit().remove(),o=f.copy(),a=h.copy()})),E.renderEnd("nv-boxplot immediate"),P}return P.dispatch=S,P.options=t.utils.optionsFunc.bind(P),P._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},maxBoxWidth:{get:function(){return L},set:function(t){L=t}},x:{get:function(){return d},set:function(t){d=t}},q1:{get:function(){return p},set:function(t){p=t}},q2:{get:function(){return g},set:function(t){g=t}},q3:{get:function(){return v},set:function(t){v=t}},wl:{get:function(){return m},set:function(t){m=t}},wh:{get:function(){return y},set:function(t){y=t}},itemColor:{get:function(){return b},set:function(t){b=t}},outliers:{get:function(){return x},set:function(t){x=t}},outlierValue:{get:function(){return w},set:function(t){w=t}},outlierLabel:{get:function(){return _},set:function(t){_=t}},outlierColor:{get:function(){return k},set:function(t){k=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return n},set:function(t){n=t}},yRange:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return c},set:function(t){c=t}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(t){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},color:{get:function(){return M},set:function(e){M=t.utils.getColor(e)}},duration:{get:function(){return A},set:function(t){A=t,E.reset(A)}}}),t.utils.initOptions(P),P},t.models.boxPlotChart=function(){"use strict";var e,n,r=t.models.boxPlot(),i=t.models.axis(),o=t.models.axis(),a={top:15,right:10,bottom:50,left:60},s=null,l=null,u=t.utils.getColor(),c=!0,f=!0,h=!1,d=!1,p=t.models.tooltip(),g="No Data Available.",v=d3.dispatch("beforeUpdate","renderEnd"),m=250;i.orient("bottom").showMaxMin(!1).tickFormat((function(t){return t})),o.orient(h?"right":"left").tickFormat(d3.format(",.1f")),p.duration(0);var y=t.utils.renderWatch(v,m);function b(u){return y.reset(),y.models(r),c&&y.models(i),f&&y.models(o),u.each((function(u){var p=d3.select(this);t.utils.initSVG(p);var y=(s||parseInt(p.style("width"))||960)-a.left-a.right,x=(l||parseInt(p.style("height"))||400)-a.top-a.bottom;if(b.update=function(){v.beforeUpdate(),p.transition().duration(m).call(b)},b.container=this,!u||!u.length){var w=p.selectAll(".nv-noData").data([g]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",a.left+y/2).attr("y",a.top+x/2).text((function(t){return t})),b}p.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale().clamp(!0);var _=p.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([u]),k=_.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),M=k.append("defs"),C=_.select("g");if(k.append("g").attr("class","nv-x nv-axis"),k.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),k.append("g").attr("class","nv-barsWrap"),C.attr("transform","translate("+a.left+","+a.top+")"),h&&C.select(".nv-y.nv-axis").attr("transform","translate("+y+",0)"),r.width(y).height(x),C.select(".nv-barsWrap").datum(u.filter((function(t){return!t.disabled}))).transition().call(r),M.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),C.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",e.rangeBand()*(d?2:1)).attr("height",16).attr("x",-e.rangeBand()/(d?1:2)),c){i.scale(e).ticks(t.utils.calcTicksX(y/100,u)).tickSize(-x,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),C.select(".nv-x.nv-axis").call(i);var S=C.select(".nv-x.nv-axis").selectAll("g");d&&S.selectAll("text").attr("transform",(function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}))}f&&(o.scale(n).ticks(Math.floor(x/36)).tickSize(-y,0),C.select(".nv-y.nv-axis").call(o)),C.select(".nv-zeroLine line").attr("x1",0).attr("x2",y).attr("y1",n(0)).attr("y2",n(0))})),y.renderEnd("nv-boxplot chart immediate"),b}return r.dispatch.on("elementMouseover.tooltip",(function(t){p.data(t).hidden(!1)})),r.dispatch.on("elementMouseout.tooltip",(function(t){p.data(t).hidden(!0)})),r.dispatch.on("elementMousemove.tooltip",(function(t){p()})),b.dispatch=v,b.boxplot=r,b.xAxis=i,b.yAxis=o,b.tooltip=p,b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},staggerLabels:{get:function(){return d},set:function(t){d=t}},showXAxis:{get:function(){return c},set:function(t){c=t}},showYAxis:{get:function(){return f},set:function(t){f=t}},tooltipContent:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},duration:{get:function(){return m},set:function(t){m=t,y.reset(m),r.duration(m),i.duration(m),o.duration(m)}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e),r.color(u)}},rightAlignYAxis:{get:function(){return h},set:function(t){h=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(b,r),t.utils.initOptions(b),b},t.models.bullet=function(){"use strict";var e={top:0,right:0,bottom:0,left:0},n="left",r=!1,i=function(t){return t.ranges},o=function(t){return t.markers?t.markers:[]},a=function(t){return t.markerLines?t.markerLines:[0]},s=function(t){return t.measures},l=function(t){return t.rangeLabels?t.rangeLabels:[]},u=function(t){return t.markerLabels?t.markerLabels:[]},c=function(t){return t.markerLineLabels?t.markerLineLabels:[]},f=function(t){return t.measureLabels?t.measureLabels:[]},h=[0],d=380,p=30,g=null,v=null,m=t.utils.getColor(["#1f77b4"]),y=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),b=["Maximum","Mean","Minimum"],x=["Max","Avg","Min"],w=1e3;function _(t,e){var n=t.slice();t.sort((function(t,r){var i=n.indexOf(t),o=n.indexOf(r);return d3.descending(e[i],e[o])}))}function k(n){return n.each((function(n,v){var k=d-e.left-e.right,M=p-e.top-e.bottom;g=d3.select(this),t.utils.initSVG(g);var C=i.call(this,n,v).slice(),S=o.call(this,n,v).slice(),A=a.call(this,n,v).slice(),L=s.call(this,n,v).slice(),E=l.call(this,n,v).slice(),P=u.call(this,n,v).slice(),T=c.call(this,n,v).slice(),O=f.call(this,n,v).slice();_(E,C),_(P,S),_(T,A),_(O,L),C.sort(d3.descending),S.sort(d3.descending),A.sort(d3.descending),L.sort(d3.descending);var D=d3.scale.linear().domain(d3.extent(d3.merge([h,C]))).range(r?[k,0]:[0,k]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(D.range());this.__chart__=D;d3.min(C),d3.max(C),C[1];for(var I=g.selectAll("g.nv-wrap.nv-bullet").data([n]),F=I.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),N=I.select("g"),G=(v=0,C.length);v<G;v++){var W="nv-range nv-range"+v;v<=2&&(W=W+" nv-range"+x[v]),F.append("rect").attr("class",W)}F.append("rect").attr("class","nv-measure"),I.attr("transform","translate("+e.left+","+e.top+")");var B=function(t){return Math.abs(D(t)-D(0))},j=function(t){return D(t<0?t:0)};for(v=0,G=C.length;v<G;v++){var z=C[v];N.select("rect.nv-range"+v).datum(z).attr("height",M).transition().duration(w).attr("width",B(z)).attr("x",j(z))}N.select("rect.nv-measure").style("fill",m).attr("height",M/3).attr("y",M/3).on("mouseover",(function(){y.elementMouseover({value:L[0],label:O[0]||"Current",color:d3.select(this).style("fill")})})).on("mousemove",(function(){y.elementMousemove({value:L[0],label:O[0]||"Current",color:d3.select(this).style("fill")})})).on("mouseout",(function(){y.elementMouseout({value:L[0],label:O[0]||"Current",color:d3.select(this).style("fill")})})).transition().duration(w).attr("width",L<0?D(0)-D(L[0]):D(L[0])-D(0)).attr("x",j(L));var R=M/6,H=S.map((function(t,e){return{value:t,label:P[e]}}));F.selectAll("path.nv-markerTriangle").data(H).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+R+"L"+R+","+-R+" "+-R+","+-R+"Z").on("mouseover",(function(t){y.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[D(t.value),M/2]})})).on("mousemove",(function(t){y.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){y.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})),N.selectAll("path.nv-markerTriangle").data(H).transition().duration(w).attr("transform",(function(t){return"translate("+D(t.value)+","+M/2+")"}));var V=A.map((function(t,e){return{value:t,label:T[e]}}));F.selectAll("line.nv-markerLine").data(V).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",(function(t){return D(t.value)})).attr("y1","2").attr("x2",(function(t){return D(t.value)})).attr("y2",M-2).on("mouseover",(function(t){y.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[D(t.value),M/2]})})).on("mousemove",(function(t){y.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){y.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})})),N.selectAll("line.nv-markerLine").data(V).transition().duration(w).attr("x1",(function(t){return D(t.value)})).attr("x2",(function(t){return D(t.value)})),I.selectAll(".nv-range").on("mouseover",(function(t,e){var n=E[e]||b[e];y.elementMouseover({value:t,label:n,color:d3.select(this).style("fill")})})).on("mousemove",(function(){y.elementMousemove({value:L[0],label:O[0]||"Previous",color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){var n=E[e]||b[e];y.elementMouseout({value:t,label:n,color:d3.select(this).style("fill")})}))})),k}return k.dispatch=y,k.options=t.utils.optionsFunc.bind(k),k._options=Object.create({},{ranges:{get:function(){return i},set:function(t){i=t}},markers:{get:function(){return o},set:function(t){o=t}},measures:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return h},set:function(t){h=t}},width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return p},set:function(t){p=t}},tickFormat:{get:function(){return v},set:function(t){v=t}},duration:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},orient:{get:function(){return n},set:function(t){r="right"==(n=t)||"bottom"==n}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}}}),t.utils.initOptions(k),k},t.models.bulletChart=function(){"use strict";var e=t.models.bullet(),n=t.models.tooltip(),r="left",i=!1,o={top:5,right:40,bottom:20,left:120},a=function(t){return t.ranges},s=function(t){return t.markers?t.markers:[]},l=function(t){return t.measures},u=null,c=55,f=null,h=null,d=null,p=d3.dispatch();function g(n){return n.each((function(r,d){var p=d3.select(this);t.utils.initSVG(p);var v=t.utils.availableWidth(u,p,o),m=c-o.top-o.bottom;if(g.update=function(){g(n)},g.container=this,!r||!a.call(this,r,d))return t.utils.noData(g,p),g;p.selectAll(".nv-noData").remove();var y=a.call(this,r,d).slice().sort(d3.descending),b=s.call(this,r,d).slice().sort(d3.descending),x=l.call(this,r,d).slice().sort(d3.descending),w=p.selectAll("g.nv-wrap.nv-bulletChart").data([r]),_=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),k=w.select("g");_.append("g").attr("class","nv-bulletWrap"),_.append("g").attr("class","nv-titles"),w.attr("transform","translate("+o.left+","+o.top+")");var M=d3.scale.linear().domain([0,Math.max(y[0],b[0]||0,x[0])]).range(i?[v,0]:[0,v]),C=this.__chart__||d3.scale.linear().domain([0,1/0]).range(M.range());this.__chart__=M;var S=_.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(c-o.top-o.bottom)/2+")");S.append("text").attr("class","nv-title").text((function(t){return t.title})),S.append("text").attr("class","nv-subtitle").attr("dy","1em").text((function(t){return t.subtitle})),e.width(v).height(m);var A=k.select(".nv-bulletWrap");d3.transition(A).call(e);var L=f||M.tickFormat(v/100),E=k.selectAll("g.nv-tick").data(M.ticks(h||v/50),(function(t){return this.textContent||L(t)})),P=E.enter().append("g").attr("class","nv-tick").attr("transform",(function(t){return"translate("+C(t)+",0)"})).style("opacity",1e-6);P.append("line").attr("y1",m).attr("y2",7*m/6),P.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*m/6).text(L);var T=d3.transition(E).transition().duration(e.duration()).attr("transform",(function(t){return"translate("+M(t)+",0)"})).style("opacity",1);T.select("line").attr("y1",m).attr("y2",7*m/6),T.select("text").attr("y",7*m/6),d3.transition(E.exit()).transition().duration(e.duration()).attr("transform",(function(t){return"translate("+M(t)+",0)"})).style("opacity",1e-6).remove()})),d3.timer.flush(),g}return n.duration(0).headerEnabled(!1),e.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:t.label,value:t.value,color:t.color},n.data(t).hidden(!1)})),e.dispatch.on("elementMouseout.tooltip",(function(t){n.hidden(!0)})),e.dispatch.on("elementMousemove.tooltip",(function(t){n()})),g.bullet=e,g.dispatch=p,g.tooltip=n,g.options=t.utils.optionsFunc.bind(g),g._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return s},set:function(t){s=t}},measures:{get:function(){return l},set:function(t){l=t}},width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},tickFormat:{get:function(){return f},set:function(t){f=t}},ticks:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return d},set:function(t){d=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},orient:{get:function(){return r},set:function(t){i="right"==(r=t)||"bottom"==r}}}),t.utils.inheritOptions(g,e),t.utils.initOptions(g),g},t.models.candlestickBar=function(){"use strict";var e,n,r,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=d3.scale.linear(),f=d3.scale.linear(),h=function(t){return t.x},d=function(t){return t.y},p=function(t){return t.open},g=function(t){return t.close},v=function(t){return t.high},m=function(t){return t.low},y=[],b=[],x=!1,w=!0,_=t.utils.defaultColor(),k=!1,M=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function C(_){return _.each((function(_){e=d3.select(this);var k=t.utils.availableWidth(s,e,a),C=t.utils.availableHeight(l,e,a);t.utils.initSVG(e);var S=k/_[0].values.length*.45;c.domain(n||d3.extent(_[0].values.map(h).concat(y))),x?c.range(i||[.5*k/_[0].values.length,k*(_[0].values.length-.5)/_[0].values.length]):c.range(i||[5+S/2,k-S/2-5]),f.domain(r||[d3.min(_[0].values.map(m).concat(b)),d3.max(_[0].values.map(v).concat(b))]).range(o||[C,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var A=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([_[0].values]),L=A.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),E=L.append("defs"),P=L.append("g"),T=A.select("g");P.append("g").attr("class","nv-ticks"),A.attr("transform","translate("+a.left+","+a.top+")"),e.on("click",(function(t,e){M.chartClick({data:t,index:e,pos:d3.event,id:u})})),E.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),A.select("#nv-chart-clip-path-"+u+" rect").attr("width",k).attr("height",C),T.attr("clip-path",w?"url(#nv-chart-clip-path-"+u+")":"");var O=A.select(".nv-ticks").selectAll(".nv-tick").data((function(t){return t}));O.exit().remove();var D=O.enter().append("g");O.attr("class",(function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}));D.append("line").attr("class","nv-candlestick-lines").attr("transform",(function(t,e){return"translate("+c(h(t,e))+",0)"})).attr("x1",0).attr("y1",(function(t,e){return f(v(t,e))})).attr("x2",0).attr("y2",(function(t,e){return f(m(t,e))})),D.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",(function(t,e){return"translate("+(c(h(t,e))-S/2)+","+(f(d(t,e))-(p(t,e)>g(t,e)?f(g(t,e))-f(p(t,e)):0))+")"})).attr("x",0).attr("y",0).attr("width",S).attr("height",(function(t,e){var n=p(t,e),r=g(t,e);return n>r?f(r)-f(n):f(n)-f(r)}));O.select(".nv-candlestick-lines").transition().attr("transform",(function(t,e){return"translate("+c(h(t,e))+",0)"})).attr("x1",0).attr("y1",(function(t,e){return f(v(t,e))})).attr("x2",0).attr("y2",(function(t,e){return f(m(t,e))})),O.select(".nv-candlestick-rects").transition().attr("transform",(function(t,e){return"translate("+(c(h(t,e))-S/2)+","+(f(d(t,e))-(p(t,e)>g(t,e)?f(g(t,e))-f(p(t,e)):0))+")"})).attr("x",0).attr("y",0).attr("width",S).attr("height",(function(t,e){var n=p(t,e),r=g(t,e);return n>r?f(r)-f(n):f(n)-f(r)}))})),C}return C.highlightPoint=function(t,n){C.clearHighlights(),e.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",n)},C.clearHighlights=function(){e.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},C.dispatch=M,C.options=t.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return k},set:function(t){k=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return d},set:function(t){d=t}},open:{get:function(){return p()},set:function(t){p=t}},close:{get:function(){return g()},set:function(t){g=t}},high:{get:function(){return v},set:function(t){v=t}},low:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return a},set:function(t){a.top=null!=t.top?t.top:a.top,a.right=null!=t.right?t.right:a.right,a.bottom=null!=t.bottom?t.bottom:a.bottom,a.left=null!=t.left?t.left:a.left}},color:{get:function(){return _},set:function(e){_=t.utils.getColor(e)}}}),t.utils.initOptions(C),C},t.models.cumulativeLineChart=function(){"use strict";var e,n,r=t.models.line(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),s=t.models.legend(),l=t.interactiveGuideline(),u=t.models.tooltip(),c={top:30,right:30,bottom:50,left:60},f=null,h=t.utils.defaultColor(),d=null,p=null,g=!0,v=!0,m=!0,y=!1,b=!0,x=!1,w=!0,_=r.id(),k=t.utils.state(),M=null,C=null,S=function(t){return t.average},A=d3.dispatch("stateChange","changeState","renderEnd"),L=250,E=!1;k.index=0,k.rescaleY=w,i.orient("bottom").tickPadding(7),o.orient(y?"right":"left"),u.valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),s.updateState(!1);var P,T=d3.scale.linear(),O={i:0,x:0},D=t.utils.renderWatch(A,L);function I(u){return D.reset(),D.models(r),v&&D.models(i),m&&D.models(o),u.each((function(u){var C=d3.select(this);t.utils.initSVG(C),C.classed("nv-chart-"+_,!0);var D,G=t.utils.availableWidth(d,C,c),W=t.utils.availableHeight(p,C,c);if(I.update=function(){0===L?C.call(I):C.transition().duration(L).call(I)},I.container=this,k.setter(function(t){return function(e){void 0!==e.index&&(O.i=e.index),void 0!==e.rescaleY&&(w=e.rescaleY),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(u),I.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled})),index:O.i,rescaleY:w}}}(u)).update(),k.disabled=u.map((function(t){return!!t.disabled})),!M)for(D in M={},k)k[D]instanceof Array?M[D]=k[D].slice(0):M[D]=k[D];var B=d3.behavior.drag().on("dragstart",(function(t,e){d3.select(I.container).style("cursor","ew-resize")})).on("drag",(function(t,e){O.x=d3.event.x,O.i=Math.round(T.invert(O.x)),Z()})).on("dragend",(function(t,e){d3.select(I.container).style("cursor","auto"),k.index=O.i,A.stateChange(k)}));if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return t.utils.noData(I,C),I;C.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale(),T.domain([0,u[0].values.length-1]).range([0,G]).clamp(!0);u=function(t,e){F||(F=r.y());return e.map((function(e,n){if(!e.values)return e;var r=e.values[t];if(null==r)return e;var i=F(r,t);return Math.abs(i)<1e-5&&!E?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map((function(t,e){return t.display={y:(F(t,e)-i)/i},t})),e)}))}(O.i,u);void 0===P&&(P=N(u)),w?r.yDomain(null):(r.yDomain(P),r.clipEdge(!0));var j=x?"none":"all",z=C.selectAll("g.nv-wrap.nv-cumulativeLine").data([u]),R=z.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),H=z.select("g");if(R.append("g").attr("class","nv-interactive"),R.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-background"),R.append("g").attr("class","nv-linesWrap").style("pointer-events",j),R.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap"),g?(a.width(G),H.select(".nv-legendWrap").datum(u).call(a),f||a.height()===c.top||(c.top=a.height(),W=t.utils.availableHeight(p,C,c)),H.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")):H.select(".nv-legendWrap").selectAll("*").remove(),b){var V=[{key:"Re-scale y-axis",disabled:!w}];s.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),H.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-c.top+")").call(s)}else H.select(".nv-controlsWrap").selectAll("*").remove();z.attr("transform","translate("+c.left+","+c.top+")"),y&&H.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)");var $=u.filter((function(t){return t.tempDisabled}));z.select(".tempDisabled").remove(),$.length&&z.append("text").attr("class","tempDisabled").attr("x",G/2).attr("y","-.71em").style("text-anchor","end").text($.map((function(t){return t.key})).join(", ")+" values cannot be calculated for this time period."),x&&(l.width(G).height(W).margin({left:c.left,top:c.top}).svgContainer(C).xScale(e),z.select(".nv-interactive").call(l)),R.select(".nv-background").append("rect"),H.select(".nv-background rect").attr("width",G).attr("height",W),r.y((function(t){return t.display.y})).width(G).height(W).color(u.map((function(t,e){return t.color||h(t,e)})).filter((function(t,e){return!u[e].disabled&&!u[e].tempDisabled})));var U=H.select(".nv-linesWrap").datum(u.filter((function(t){return!t.disabled&&!t.tempDisabled})));U.call(r),u.forEach((function(t,e){t.seriesIndex=e}));var q=u.filter((function(t){return!t.disabled&&!!S(t)})),K=H.select(".nv-avgLinesWrap").selectAll("line").data(q,(function(t){return t.key})),Y=function(t){var e=n(S(t));return e<0?0:e>W?W:e};K.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",(function(t,e){return r.color()(t,t.seriesIndex)})).attr("x1",0).attr("x2",G).attr("y1",Y).attr("y2",Y),K.style("stroke-opacity",(function(t){var e=n(S(t));return e<0||e>W?0:1})).attr("x1",0).attr("x2",G).attr("y1",Y).attr("y2",Y),K.exit().remove();var X=U.selectAll(".nv-indexLine").data([O]);function Z(){X.data([O]);var t=I.duration();I.duration(0),I.update(),I.duration(t)}X.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(B),X.attr("transform",(function(t){return"translate("+T(t.i)+",0)"})).attr("height",W),v&&(i.scale(e)._ticks(t.utils.calcTicksX(G/70,u)).tickSize(-W,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),H.select(".nv-x.nv-axis").call(i)),m&&(o.scale(n)._ticks(t.utils.calcTicksY(W/36,u)).tickSize(-G,0),H.select(".nv-y.nv-axis").call(o)),H.select(".nv-background rect").on("click",(function(){O.x=d3.mouse(this)[0],O.i=Math.round(T.invert(O.x)),k.index=O.i,A.stateChange(k),Z()})),r.dispatch.on("elementClick",(function(t){O.i=t.pointIndex,O.x=T(O.i),k.index=O.i,A.stateChange(k),Z()})),s.dispatch.on("legendClick",(function(t,e){t.disabled=!t.disabled,w=!t.disabled,k.rescaleY=w,w||(P=N(u)),A.stateChange(k),I.update()})),a.dispatch.on("stateChange",(function(t){for(var e in t)k[e]=t[e];A.stateChange(k),I.update()})),l.dispatch.on("elementMousemove",(function(e){r.clearHighlights();var n,a,s,c=[];if(u.filter((function(t,e){return t.seriesIndex=e,!(t.disabled||t.tempDisabled)})).forEach((function(i,o){a=t.interactiveBisect(i.values,e.pointXValue,I.x()),r.highlightPoint(o,a,!0);var l=i.values[a];void 0!==l&&(void 0===n&&(n=l),void 0===s&&(s=I.xScale()(I.x()(l,a))),c.push({key:i.key,value:I.y()(l,a),color:h(i,i.seriesIndex)}))})),c.length>2){var f=I.yScale().invert(e.mouseY),d=.03*Math.abs(I.yScale().domain()[0]-I.yScale().domain()[1]),p=t.nearestValueIndex(c.map((function(t){return t.value})),f,d);null!==p&&(c[p].highlight=!0)}var g=i.tickFormat()(I.x()(n,a),a);l.tooltip.valueFormatter((function(t,e){return o.tickFormat()(t)})).data({value:g,series:c})(),l.renderGuideLine(s)})),l.dispatch.on("elementMouseout",(function(t){r.clearHighlights()})),A.on("changeState",(function(t){void 0!==t.disabled&&(u.forEach((function(e,n){e.disabled=t.disabled[n]})),k.disabled=t.disabled),void 0!==t.index&&(O.i=t.index,O.x=T(O.i),k.index=t.index,X.data([O])),void 0!==t.rescaleY&&(w=t.rescaleY),I.update()}))})),D.renderEnd("cumulativeLineChart immediate"),I}r.dispatch.on("elementMouseover.tooltip",(function(t){var e={x:I.x()(t.point),y:I.y()(t.point),color:t.point.color};t.point=e,u.data(t).hidden(!1)})),r.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)}));var F=null;function N(t){var e=t.filter((function(t){return!(t.disabled||t.tempDisabled)})).map((function(t,e){return d3.extent(t.values,(function(t){return t.display.y}))}));return[d3.min(e,(function(t){return t[0]})),d3.max(e,(function(t){return t[1]}))]}return I.dispatch=A,I.lines=r,I.legend=a,I.controls=s,I.xAxis=i,I.yAxis=o,I.interactiveLayer=l,I.state=k,I.tooltip=u,I.options=t.utils.optionsFunc.bind(I),I._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return p},set:function(t){p=t}},showControls:{get:function(){return b},set:function(t){b=t}},showLegend:{get:function(){return g},set:function(t){g=t}},average:{get:function(){return S},set:function(t){S=t}},defaultState:{get:function(){return M},set:function(t){M=t}},noData:{get:function(){return C},set:function(t){C=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},noErrorCheck:{get:function(){return E},set:function(t){E=t}},rescaleY:{get:function(){return w},set:function(t){w=t,I.state.rescaleY=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,f=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),a.color(h)}},useInteractiveGuideline:{get:function(){return x},set:function(t){x=t,!0===t&&(I.interactive(!1),I.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,o.orient(t?"right":"left")}},duration:{get:function(){return L},set:function(t){L=t,r.duration(L),i.duration(L),o.duration(L),D.reset(L)}}}),t.utils.inheritOptions(I,r),t.utils.initOptions(I),I},t.models.discreteBar=function(){"use strict";var e,n,r,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,f=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),d=d3.scale.linear(),p=function(t){return t.x},g=function(t){return t.y},v=[0],m=t.utils.defaultColor(),y=!1,b=d3.format(",.2f"),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w="discreteBar",_=250,k=t.utils.renderWatch(x,_);function M(f){return k.reset(),f.each((function(f){var _=u-l.left-l.right,M=c-l.top-l.bottom;e=d3.select(this),t.utils.initSVG(e),f.forEach((function(t,e){t.values.forEach((function(t){t.series=e}))}));var C=n&&r?[]:f.map((function(t){return t.values.map((function(t,e){return{x:p(t,e),y:g(t,e),y0:t.y0}}))}));h.domain(n||d3.merge(C).map((function(t){return t.x}))).rangeBands(i||[0,_],.1),d.domain(r||d3.extent(d3.merge(C).map((function(t){return t.y})).concat(v))),y?d.range(o||[M-(d.domain()[0]<0?12:0),d.domain()[1]>0?12:0]):d.range(o||[M,0]),a=a||h,s=s||d.copy().range([d(0),d(0)]);var S=e.selectAll("g.nv-wrap.nv-discretebar").data([f]),A=S.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");S.select("g");A.append("g").attr("class","nv-groups"),S.attr("transform","translate("+l.left+","+l.top+")");var L=S.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),L.exit().watchTransition(k,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),L.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})),L.watchTransition(k,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var E=L.selectAll("g.nv-bar").data((function(t){return t.values}));E.exit().remove();var P=E.enter().append("g").attr("transform",(function(t,e,n){return"translate("+(h(p(t,e))+.05*h.rangeBand())+", "+d(0)+")"})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),x.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),x.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mousemove",(function(t,e){x.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){x.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,e){x.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}));P.append("rect").attr("height",0).attr("width",.9*h.rangeBand()/f.length),y?(P.append("text").attr("text-anchor","middle"),E.select("text").text((function(t,e){return b(g(t,e))})).watchTransition(k,"discreteBar: bars text").attr("x",.9*h.rangeBand()/2).attr("y",(function(t,e){return g(t,e)<0?d(g(t,e))-d(0)+12:-4}))):E.selectAll("text").remove(),E.attr("class",(function(t,e){return g(t,e)<0?"nv-bar negative":"nv-bar positive"})).style("fill",(function(t,e){return t.color||m(t,e)})).style("stroke",(function(t,e){return t.color||m(t,e)})).select("rect").attr("class",w).watchTransition(k,"discreteBar: bars rect").attr("width",.9*h.rangeBand()/f.length),E.watchTransition(k,"discreteBar: bars").attr("transform",(function(t,e){return"translate("+(h(p(t,e))+.05*h.rangeBand())+", "+(g(t,e)<0?d(0):d(0)-d(g(t,e))<1?d(0)-1:d(g(t,e)))+")"})).select("rect").attr("height",(function(t,e){return Math.max(Math.abs(d(g(t,e))-d(0)),1)})),a=h.copy(),s=d.copy()})),k.renderEnd("discreteBar immediate"),M}return M.dispatch=x,M.options=t.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},forceY:{get:function(){return v},set:function(t){v=t}},showValues:{get:function(){return y},set:function(t){y=t}},x:{get:function(){return p},set:function(t){p=t}},y:{get:function(){return g},set:function(t){g=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},valueFormat:{get:function(){return b},set:function(t){b=t}},id:{get:function(){return f},set:function(t){f=t}},rectClass:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}},duration:{get:function(){return _},set:function(t){_=t,k.reset(_)}}}),t.utils.initOptions(M),M},t.models.discreteBarChart=function(){"use strict";var e,n,r=t.models.discreteBar(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),s=t.models.tooltip(),l={top:15,right:10,bottom:50,left:60},u=null,c=null,f=null,h=t.utils.getColor(),d=!1,p=!0,g=!0,v=!1,m=!1,y=!1,b=0,x=null,w=d3.dispatch("beforeUpdate","renderEnd"),_=250;i.orient("bottom").showMaxMin(!1).tickFormat((function(t){return t})),o.orient(v?"right":"left").tickFormat(d3.format(",.1f")),s.duration(0).headerEnabled(!1).valueFormatter((function(t,e){return o.tickFormat()(t,e)})).keyFormatter((function(t,e){return i.tickFormat()(t,e)}));var k=t.utils.renderWatch(w,_);function M(s){return k.reset(),k.models(r),p&&k.models(i),g&&k.models(o),s.each((function(s){var h=d3.select(this);t.utils.initSVG(h);var x=t.utils.availableWidth(c,h,l),k=t.utils.availableHeight(f,h,l);if(M.update=function(){w.beforeUpdate(),h.transition().duration(_).call(M)},M.container=this,!(s&&s.length&&s.filter((function(t){return t.values.length})).length))return t.utils.noData(M,h),M;h.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale().clamp(!0);var C=h.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([s]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),A=S.append("defs"),L=C.select("g");if(S.append("g").attr("class","nv-x nv-axis"),S.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),S.append("g").attr("class","nv-barsWrap"),S.append("g").attr("class","nv-legendWrap"),L.attr("transform","translate("+l.left+","+l.top+")"),d?(a.width(x),L.select(".nv-legendWrap").datum(s).call(a),u||a.height()===l.top||(l.top=a.height(),k=t.utils.availableHeight(f,h,l)),C.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")):L.select(".nv-legendWrap").selectAll("*").remove(),v&&L.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)"),r.width(x).height(k),L.select(".nv-barsWrap").datum(s.filter((function(t){return!t.disabled}))).transition().call(r),A.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect"),L.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",e.rangeBand()*(m?2:1)).attr("height",16).attr("x",-e.rangeBand()/(m?1:2)),p){i.scale(e)._ticks(t.utils.calcTicksX(x/100,s)).tickSize(-k,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+(n.range()[0]+(r.showValues()&&n.domain()[0]<0?16:0))+")"),L.select(".nv-x.nv-axis").call(i);var E=L.select(".nv-x.nv-axis").selectAll("g");m&&E.selectAll("text").attr("transform",(function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"})),b&&E.selectAll(".tick text").attr("transform","rotate("+b+" 0,0)").style("text-anchor",b>0?"start":"end"),y&&L.selectAll(".tick text").call(t.utils.wrapTicks,M.xAxis.rangeBand())}g&&(o.scale(n)._ticks(t.utils.calcTicksY(k/36,s)).tickSize(-x,0),L.select(".nv-y.nv-axis").call(o)),L.select(".nv-zeroLine line").attr("x1",0).attr("x2",v?-x:x).attr("y1",n(0)).attr("y2",n(0))})),k.renderEnd("discreteBar chart immediate"),M}return r.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:M.x()(t.data),value:M.y()(t.data),color:t.color},s.data(t).hidden(!1)})),r.dispatch.on("elementMouseout.tooltip",(function(t){s.hidden(!0)})),r.dispatch.on("elementMousemove.tooltip",(function(t){s()})),M.dispatch=w,M.discretebar=r,M.legend=a,M.xAxis=i,M.yAxis=o,M.tooltip=s,M.options=t.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},showLegend:{get:function(){return d},set:function(t){d=t}},staggerLabels:{get:function(){return m},set:function(t){m=t}},rotateLabels:{get:function(){return b},set:function(t){b=t}},wrapLabels:{get:function(){return y},set:function(t){y=!!t}},showXAxis:{get:function(){return p},set:function(t){p=t}},showYAxis:{get:function(){return g},set:function(t){g=t}},noData:{get:function(){return x},set:function(t){x=t}},margin:{get:function(){return l},set:function(t){void 0!==t.top&&(l.top=t.top,u=t.top),l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return _},set:function(t){_=t,k.reset(_),r.duration(_),i.duration(_),o.duration(_)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),r.color(h),a.color(h)}},rightAlignYAxis:{get:function(){return v},set:function(t){v=t,o.orient(t?"right":"left")}}}),t.utils.inheritOptions(M,r),t.utils.initOptions(M),M},t.models.distribution=function(){"use strict";var e,n={top:0,right:0,bottom:0,left:0},r=400,i=8,o="x",a=function(t){return t[o]},s=t.utils.defaultColor(),l=d3.scale.linear(),u=250,c=d3.dispatch("renderEnd"),f=t.utils.renderWatch(c,u);function h(r){return f.reset(),r.each((function(r){"x"===o?(n.left,n.right):(n.top,n.bottom);var u="x"==o?"y":"x",c=d3.select(this);t.utils.initSVG(c),e=e||l;var h=c.selectAll("g.nv-distribution").data([r]),d=(h.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),h.select("g"));h.attr("transform","translate("+n.left+","+n.top+")");var p=d.selectAll("g.nv-dist").data((function(t){return t}),(function(t){return t.key}));p.enter().append("g"),p.attr("class",(function(t,e){return"nv-dist nv-series-"+e})).style("stroke",(function(t,e){return s(t,e)}));var g=p.selectAll("line.nv-dist"+o).data((function(t){return t.values}));g.enter().append("line").attr(o+"1",(function(t,n){return e(a(t,n))})).attr(o+"2",(function(t,n){return e(a(t,n))})),f.transition(p.exit().selectAll("line.nv-dist"+o),"dist exit").attr(o+"1",(function(t,e){return l(a(t,e))})).attr(o+"2",(function(t,e){return l(a(t,e))})).style("stroke-opacity",0).remove(),g.attr("class",(function(t,e){return"nv-dist"+o+" nv-dist"+o+"-"+e})).attr(u+"1",0).attr(u+"2",i),f.transition(g,"dist").attr(o+"1",(function(t,e){return l(a(t,e))})).attr(o+"2",(function(t,e){return l(a(t,e))})),e=l.copy()})),f.renderEnd("distribution immediate"),h}return h.options=t.utils.optionsFunc.bind(h),h.dispatch=c,h.margin=function(t){return arguments.length?(n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left,h):n},h.width=function(t){return arguments.length?(r=t,h):r},h.axis=function(t){return arguments.length?(o=t,h):o},h.size=function(t){return arguments.length?(i=t,h):i},h.getData=function(t){return arguments.length?(a=d3.functor(t),h):a},h.scale=function(t){return arguments.length?(l=t,h):l},h.color=function(e){return arguments.length?(s=t.utils.getColor(e),h):s},h.duration=function(t){return arguments.length?(u=t,f.reset(u),h):u},h},t.models.focus=function(e){"use strict";e=e||t.models.line();var n,r,i=t.models.axis(),o=t.models.axis(),a=d3.svg.brush(),s={top:10,right:0,bottom:30,left:0},l=t.utils.defaultColor(),u=null,c=70,f=!0,h=!1,d=!1,p=null,g=250,v=d3.dispatch("brush","onBrush","renderEnd"),m=!0;e.interactive(!1),e.pointActive((function(t){return!1}));var y=t.utils.renderWatch(v,g);function b(x){return y.reset(),y.models(e),f&&y.models(i),h&&y.models(o),x.each((function(y){var x=d3.select(this);t.utils.initSVG(x);var w=t.utils.availableWidth(u,x,s),_=c-s.top-s.bottom;b.update=function(){0===g?x.call(b):x.transition().duration(g).call(b)},b.container=this,n=e.xScale(),r=e.yScale();var k=x.selectAll("g.nv-focus").data([y]),M=k.enter().append("g").attr("class","nvd3 nv-focus").append("g"),C=k.select("g");k.attr("transform","translate("+s.left+","+s.top+")"),M.append("g").attr("class","nv-background").append("rect"),M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis"),M.append("g").attr("class","nv-contentWrap"),M.append("g").attr("class","nv-brushBackground"),M.append("g").attr("class","nv-x nv-brush"),d&&C.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),C.select(".nv-background rect").attr("width",w).attr("height",_),e.width(w).height(_).color(y.map((function(t,e){return t.color||l(t,e)})).filter((function(t,e){return!y[e].disabled})));var S=C.select(".nv-contentWrap").datum(y.filter((function(t){return!t.disabled})));d3.transition(S).call(e),a.x(n).on("brush",(function(){P(m)})),a.on("brushend",(function(){m||v.onBrush(a.empty()?n.domain():a.extent())})),p&&a.extent(p);var A=C.select(".nv-brushBackground").selectAll("g").data([p||a.extent()]),L=A.enter().append("g");L.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",_),L.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",_);var E=C.select(".nv-x.nv-brush").call(a);function P(t){p=a.empty()?null:a.extent();var e=a.empty()?n.domain():a.extent();v.brush({extent:e,brush:a}),a.empty()||a.extent(p),A.data([a.empty()?n.domain():p]).each((function(t,e){var r=n(t[0])-n.range()[0],i=w-n(t[1]);d3.select(this).select(".left").attr("width",r<0?0:r),d3.select(this).select(".right").attr("x",n(t[1])).attr("width",i<0?0:i)})),t&&v.onBrush(e)}E.selectAll("rect").attr("height",_),E.selectAll(".resize").append("path").attr("d",(function(t){var e=+("e"==t),n=e?1:-1,r=_/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)})),P(!0),C.select(".nv-background rect").attr("width",w).attr("height",_),f&&(i.scale(n)._ticks(t.utils.calcTicksX(w/100,y)).tickSize(-_,0),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),d3.transition(C.select(".nv-x.nv-axis")).call(i)),h&&(o.scale(r)._ticks(t.utils.calcTicksY(_/36,y)).tickSize(-w,0),d3.transition(C.select(".nv-y.nv-axis")).call(o)),C.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")")})),y.renderEnd("focus immediate"),b}return b.dispatch=v,b.content=e,b.brush=a,b.xAxis=i,b.yAxis=o,b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},showXAxis:{get:function(){return f},set:function(t){f=t}},showYAxis:{get:function(){return h},set:function(t){h=t}},brushExtent:{get:function(){return p},set:function(t){p=t}},syncBrushing:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return g},set:function(t){g=t,y.reset(g),e.duration(g),i.duration(g),o.duration(g)}},color:{get:function(){return l},set:function(n){l=t.utils.getColor(n),e.color(l)}},interpolate:{get:function(){return e.interpolate()},set:function(t){e.interpolate(t)}},xTickFormat:{get:function(){return i.tickFormat()},set:function(t){i.tickFormat(t)}},yTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t)}},x:{get:function(){return e.x()},set:function(t){e.x(t)}},y:{get:function(){return e.y()},set:function(t){e.y(t)}},rightAlignYAxis:{get:function(){return d},set:function(t){d=t,o.orient(d?"right":"left")}}}),t.utils.inheritOptions(b,e),t.utils.initOptions(b),b},t.models.forceDirectedGraph=function(){"use strict";var e={top:2,right:0,bottom:2,left:0},n=400,r=32,i=null,o=d3.dispatch("renderEnd"),a=t.utils.getColor(["#000"]),s=t.models.tooltip(),l=null,u=.1,c=.9,f=30,h=-120,d=.1,p=.8,g=.1,v=5,m=function(t){},y=function(t){},b=d3.functor(0),x=d3.functor(0),w=t.utils.renderWatch(o);function _(o){return w.reset(),o.each((function(o){i=d3.select(this),t.utils.initSVG(i);var l=t.utils.availableWidth(n,i,e),b=t.utils.availableHeight(r,i,e);if(i.attr("width",l).attr("height",b),!(o&&o.links&&o.nodes))return t.utils.noData(_,i),_;i.selectAll(".nv-noData").remove(),i.selectAll("*").remove();var x=new Set;o.nodes.forEach((function(t){Object.keys(t).forEach((function(t){x.add(t)}))}));var w=d3.layout.force().nodes(o.nodes).links(o.links).size([l,b]).linkStrength(u).friction(c).linkDistance(f).charge(h).gravity(d).theta(p).alpha(g).start(),k=i.selectAll(".link").data(o.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",(function(t){return Math.sqrt(t.value)})),M=i.selectAll(".node").data(o.nodes).enter().append("g").attr("class","nv-force-node").call(w.drag);M.append("circle").attr("r",v).style("fill",(function(t){return a(t)})).on("mouseover",(function(t){i.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.py),i.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.px);var e=a(t);t.series=[],x.forEach((function(n){t.series.push({color:e,key:n,value:t[n]})})),s.data(t).hidden(!1)})).on("mouseout",(function(t){s.hidden(!0)})),s.headerFormatter((function(t){return"Node"})),y(k),m(M),w.on("tick",(function(){k.attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})),M.attr("transform",(function(t){return"translate("+t.x+", "+t.y+")"}))}))})),_}return _.options=t.utils.optionsFunc.bind(_),_._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},linkStrength:{get:function(){return u},set:function(t){u=t}},friction:{get:function(){return c},set:function(t){c=t}},linkDist:{get:function(){return f},set:function(t){f=t}},charge:{get:function(){return h},set:function(t){h=t}},gravity:{get:function(){return d},set:function(t){d=t}},theta:{get:function(){return p},set:function(t){p=t}},alpha:{get:function(){return g},set:function(t){g=t}},radius:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return b},set:function(t){b=d3.functor(t)}},y:{get:function(){return x},set:function(t){x=d3.functor(t)}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}},noData:{get:function(){return l},set:function(t){l=t}},nodeExtras:{get:function(){return m},set:function(t){m=t}},linkExtras:{get:function(){return y},set:function(t){y=t}}}),_.dispatch=o,_.tooltip=s,t.utils.initOptions(_),_},t.models.furiousLegend=function(){"use strict";var e={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(t){return t.key},o=function(t){return t},a=t.utils.getColor(),s=20,l=!0,u=28,c=!0,f=!0,h=!1,d=!1,p=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),g="classic";function v(m){function y(t,e){return"furious"!=g?"#000":d?t.disengaged?a(t,e):"#fff":d?void 0:t.disabled?a(t,e):"#fff"}function b(t,e){return d&&"furious"==g?t.disengaged?"#fff":a(t,e):t.disabled?"#fff":a(t,e)}return m.each((function(v){var m=n-e.left-e.right,x=d3.select(this);t.utils.initSVG(x);var w=x.selectAll("g.nv-legend").data([v]),_=(w.enter().append("g").attr("class","nvd3 nv-legend").append("g"),w.select("g"));w.attr("transform","translate("+e.left+","+e.top+")");var k,M=_.selectAll(".nv-series").data((function(t){return"furious"!=g?t:t.filter((function(t){return!!d||!t.disengaged}))})),C=M.enter().append("g").attr("class","nv-series");if("classic"==g)C.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),k=M.select("circle");else if("furious"==g){C.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),k=M.select("rect"),C.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),M.select(".nv-check-box").each((function(t,e){d3.select(this).selectAll("path").attr("stroke",y(t,e))}))}C.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var S,A=M.select("text.nv-legend-text");switch(M.on("mouseover",(function(t,e){p.legendMouseover(t,e)})).on("mouseout",(function(t,e){p.legendMouseout(t,e)})).on("click",(function(t,e){p.legendClick(t,e);var n=M.data();if(f){if("classic"==g)h?(n.forEach((function(t){t.disabled=!0})),t.disabled=!1):(t.disabled=!t.disabled,n.every((function(t){return t.disabled}))&&n.forEach((function(t){t.disabled=!1})));else if("furious"==g)if(d)t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!d){t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter((function(t){return!t.disengaged})).every((function(t){return t.userDisabled}))&&n.forEach((function(t){t.disabled=t.userDisabled=!1}))}p.stateChange({disabled:n.map((function(t){return!!t.disabled})),disengaged:n.map((function(t){return!!t.disengaged}))})}})).on("dblclick",(function(t,e){if(("furious"!=g||!d)&&(p.legendDblclick(t,e),f)){var n=M.data();n.forEach((function(t){t.disabled=!0,"furious"==g&&(t.userDisabled=t.disabled)})),t.disabled=!1,"furious"==g&&(t.userDisabled=t.disabled),p.stateChange({disabled:n.map((function(t){return!!t.disabled}))})}})),M.classed("nv-disabled",(function(t){return t.userDisabled})),M.exit().remove(),A.attr("fill",y).text((function(t){return o(i(t))})),g){case"furious":S=23;break;case"classic":S=20}if(l){var L=[];M.each((function(e,n){var r,a;if(o(i(e))&&o(i(e)).length>s){var l=o(i(e)).substring(0,s);r=d3.select(this).select("text").text(l+"..."),d3.select(this).append("svg:title").text(o(i(e)))}else r=d3.select(this).select("text");try{if((a=r.node().getComputedTextLength())<=0)throw Error()}catch(e){a=t.utils.calcApproxTextWidth(r)}L.push(a+u)}));for(var E=0,P=0,T=[];P<m&&E<L.length;)T[E]=L[E],P+=L[E++];for(0===E&&(E=1);P>m&&E>1;){T=[],E--;for(var O=0;O<L.length;O++)L[O]>(T[O%E]||0)&&(T[O%E]=L[O]);P=T.reduce((function(t,e,n,r){return t+e}))}for(var D=[],I=0,F=0;I<E;I++)D[I]=F,F+=T[I];M.attr("transform",(function(t,e){return"translate("+D[e%E]+","+(5+Math.floor(e/E)*S)+")"})),c?_.attr("transform","translate("+(n-e.right-P)+","+e.top+")"):_.attr("transform","translate(0,"+e.top+")"),r=e.top+e.bottom+Math.ceil(L.length/E)*S}else{var N,G=5,W=5,B=0;M.attr("transform",(function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+u;return N=W,n<e.left+e.right+N+i&&(W=N=5,G+=S),(W+=i)>B&&(B=W),"translate("+N+","+G+")"})),_.attr("transform","translate("+(n-e.right-B)+","+e.top+")"),r=e.top+e.bottom+G+15}"furious"==g&&k.attr("width",(function(t,e){return A[0][e].getComputedTextLength()+27})).attr("height",18).attr("y",-9).attr("x",-15),k.style("fill",b).style("stroke",(function(t,e){return t.color||a(t,e)}))})),v}return v.dispatch=p,v.options=t.utils.optionsFunc.bind(v),v._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return i},set:function(t){i=t}},keyFormatter:{get:function(){return o},set:function(t){o=t}},align:{get:function(){return l},set:function(t){l=t}},rightAlign:{get:function(){return c},set:function(t){c=t}},maxKeyLength:{get:function(){return s},set:function(t){s=t}},padding:{get:function(){return u},set:function(t){u=t}},updateState:{get:function(){return f},set:function(t){f=t}},radioButtonMode:{get:function(){return h},set:function(t){h=t}},expanded:{get:function(){return d},set:function(t){d=t}},vers:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}}}),t.utils.initOptions(v),v},t.models.historicalBar=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,l=Math.floor(1e4*Math.random()),u=null,c=d3.scale.linear(),f=d3.scale.linear(),h=function(t){return t.x},d=function(t){return t.y},p=[],g=[0],v=!1,m=!0,y=t.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),x=!0,w=t.utils.renderWatch(b,0);function _(k){return k.each((function(_){w.reset(),u=d3.select(this);var k=t.utils.availableWidth(a,u,o),M=t.utils.availableHeight(s,u,o);t.utils.initSVG(u),c.domain(e||d3.extent(_[0].values.map(h).concat(p))),v?c.range(r||[.5*k/_[0].values.length,k*(_[0].values.length-.5)/_[0].values.length]):c.range(r||[0,k]),f.domain(n||d3.extent(_[0].values.map(d).concat(g))).range(i||[M,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var C=u.selectAll("g.nv-wrap.nv-historicalBar-"+l).data([_[0].values]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+l),A=S.append("defs"),L=S.append("g"),E=C.select("g");L.append("g").attr("class","nv-bars"),C.attr("transform","translate("+o.left+","+o.top+")"),u.on("click",(function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:l})})),A.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),C.select("#nv-chart-clip-path-"+l+" rect").attr("width",k).attr("height",M),E.attr("clip-path",m?"url(#nv-chart-clip-path-"+l+")":"");var P=C.select(".nv-bars").selectAll(".nv-bar").data((function(t){return t}),(function(t,e){return h(t,e)}));P.exit().remove(),P.enter().append("rect").attr("x",0).attr("y",(function(e,n){return t.utils.NaNtoZero(f(Math.max(0,d(e,n))))})).attr("height",(function(e,n){return t.utils.NaNtoZero(Math.abs(f(d(e,n))-f(0)))})).attr("transform",(function(t,e){return"translate("+(c(h(t,e))-k/_[0].values.length*.45)+",0)"})).on("mouseover",(function(t,e){x&&(d3.select(this).classed("hover",!0),b.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))})).on("mouseout",(function(t,e){x&&(d3.select(this).classed("hover",!1),b.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))})).on("mousemove",(function(t,e){x&&b.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){if(x){b.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()}})).on("dblclick",(function(t,e){x&&(b.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())})),P.attr("fill",(function(t,e){return y(t,e)})).attr("class",(function(t,e,n){return(d(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e})).watchTransition(w,"bars").attr("transform",(function(t,e){return"translate("+(c(h(t,e))-k/_[0].values.length*.45)+",0)"})).attr("width",k/_[0].values.length*.9),P.watchTransition(w,"bars").attr("y",(function(e,n){var r=d(e,n)<0?f(0):f(0)-f(d(e,n))<1?f(0)-1:f(d(e,n));return t.utils.NaNtoZero(r)})).attr("height",(function(e,n){return t.utils.NaNtoZero(Math.max(Math.abs(f(d(e,n))-f(0)),1))}))})),w.renderEnd("historicalBar immediate"),_}return _.highlightPoint=function(t,e){u.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},_.clearHighlights=function(){u.select(".nv-bars .nv-bar.hover").classed("hover",!1)},_.dispatch=b,_.options=t.utils.optionsFunc.bind(_),_._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},forceX:{get:function(){return p},set:function(t){p=t}},forceY:{get:function(){return g},set:function(t){g=t}},padData:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return d},set:function(t){d=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return x},set:function(t){x=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return y},set:function(e){y=t.utils.getColor(e)}}}),t.utils.initOptions(_),_},t.models.historicalBarChart=function(e){"use strict";var n,r,i=e||t.models.historicalBar(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend(),l=t.interactiveGuideline(),u=t.models.tooltip(),c={top:30,right:90,bottom:50,left:90},f=null,h=t.utils.defaultColor(),d=null,p=null,g=!1,v=!0,m=!0,y=!1,b=!1,x={},w=null,_=null,k=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),M=250;o.orient("bottom").tickPadding(7),a.orient(y?"right":"left"),u.duration(0).headerEnabled(!1).valueFormatter((function(t,e){return a.tickFormat()(t,e)})).headerFormatter((function(t,e){return o.tickFormat()(t,e)}));var C=t.utils.renderWatch(k,0);function S(e){return e.each((function(u){C.reset(),C.models(i),v&&C.models(o),m&&C.models(a);var _=d3.select(this);t.utils.initSVG(_);var A,L=t.utils.availableWidth(d,_,c),E=t.utils.availableHeight(p,_,c);if(S.update=function(){_.transition().duration(M).call(S)},S.container=this,x.disabled=u.map((function(t){return!!t.disabled})),!w)for(A in w={},x)x[A]instanceof Array?w[A]=x[A].slice(0):w[A]=x[A];if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return t.utils.noData(S,_),S;_.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var P=_.selectAll("g.nv-wrap.nv-historicalBarChart").data([u]),T=P.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),O=P.select("g");T.append("g").attr("class","nv-x nv-axis"),T.append("g").attr("class","nv-y nv-axis"),T.append("g").attr("class","nv-barsWrap"),T.append("g").attr("class","nv-legendWrap"),T.append("g").attr("class","nv-interactive"),g?(s.width(L),O.select(".nv-legendWrap").datum(u).call(s),f||s.height()===c.top||(c.top=s.height(),E=t.utils.availableHeight(p,_,c)),P.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")")):O.select(".nv-legendWrap").selectAll("*").remove(),P.attr("transform","translate("+c.left+","+c.top+")"),y&&O.select(".nv-y.nv-axis").attr("transform","translate("+L+",0)"),b&&(l.width(L).height(E).margin({left:c.left,top:c.top}).svgContainer(_).xScale(n),P.select(".nv-interactive").call(l)),i.width(L).height(E).color(u.map((function(t,e){return t.color||h(t,e)})).filter((function(t,e){return!u[e].disabled}))),O.select(".nv-barsWrap").datum(u.filter((function(t){return!t.disabled}))).transition().call(i),v&&(o.scale(n)._ticks(t.utils.calcTicksX(L/100,u)).tickSize(-E,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),O.select(".nv-x.nv-axis").transition().call(o)),m&&(a.scale(r)._ticks(t.utils.calcTicksY(E/36,u)).tickSize(-L,0),O.select(".nv-y.nv-axis").transition().call(a)),l.dispatch.on("elementMousemove",(function(e){i.clearHighlights();var n,r,s,c=[];u.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(o,a){r=t.interactiveBisect(o.values,e.pointXValue,S.x()),i.highlightPoint(r,!0);var l=o.values[r];void 0!==l&&(void 0===n&&(n=l),void 0===s&&(s=S.xScale()(S.x()(l,r))),c.push({key:o.key,value:S.y()(l,r),color:h(o,o.seriesIndex),data:o.values[r]}))}));var f=o.tickFormat()(S.x()(n,r));l.tooltip.valueFormatter((function(t,e){return a.tickFormat()(t)})).data({value:f,index:r,series:c})(),l.renderGuideLine(s)})),l.dispatch.on("elementMouseout",(function(t){k.tooltipHide(),i.clearHighlights()})),s.dispatch.on("legendClick",(function(t,n){t.disabled=!t.disabled,u.filter((function(t){return!t.disabled})).length||u.map((function(t){return t.disabled=!1,P.selectAll(".nv-series").classed("disabled",!1),t})),x.disabled=u.map((function(t){return!!t.disabled})),k.stateChange(x),e.transition().call(S)})),s.dispatch.on("legendDblclick",(function(t){u.forEach((function(t){t.disabled=!0})),t.disabled=!1,x.disabled=u.map((function(t){return!!t.disabled})),k.stateChange(x),S.update()})),k.on("changeState",(function(t){void 0!==t.disabled&&(u.forEach((function(e,n){e.disabled=t.disabled[n]})),x.disabled=t.disabled),S.update()}))})),C.renderEnd("historicalBarChart immediate"),S}return i.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:S.x()(t.data),value:S.y()(t.data),color:t.color},u.data(t).hidden(!1)})),i.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)})),i.dispatch.on("elementMousemove.tooltip",(function(t){u()})),S.dispatch=k,S.bars=i,S.legend=s,S.xAxis=o,S.yAxis=a,S.interactiveLayer=l,S.tooltip=u,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return g},set:function(t){g=t}},showXAxis:{get:function(){return v},set:function(t){v=t}},showYAxis:{get:function(){return m},set:function(t){m=t}},defaultState:{get:function(){return w},set:function(t){w=t}},noData:{get:function(){return _},set:function(t){_=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,f=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),s.color(h),i.color(h)}},duration:{get:function(){return M},set:function(t){M=t,C.reset(M),a.duration(M),o.duration(M)}},rightAlignYAxis:{get:function(){return y},set:function(t){y=t,a.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,!0===t&&S.interactive(!1)}}}),t.utils.inheritOptions(S,i),t.utils.initOptions(S),S},t.models.ohlcBarChart=function(){var e=t.models.historicalBarChart(t.models.ohlcBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator((function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"})),e},t.models.candlestickBarChart=function(){var e=t.models.historicalBarChart(t.models.candlestickBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator((function(t){var n=t.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"})),e},t.models.legend=function(){"use strict";var e={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(t){return t.key},o=function(t){return t},a=t.utils.getColor(),s=20,l=!0,u=32,c=!0,f=!0,h=!0,d=!1,p=!1,g=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),v="classic";function m(y){function b(t,e){return"furious"!=v?"#000":p?t.disengaged?"#000":"#fff":p?void 0:(t.color||(t.color=a(t,e)),t.disabled?t.color:"#fff")}function x(t,e){return p&&"furious"==v&&t.disengaged?"#eee":t.color||a(t,e)}function w(t,e){return p&&"furious"==v?1:t.disabled?0:1}return y.each((function(a){var m=n-e.left-e.right,y=d3.select(this);t.utils.initSVG(y);var _=y.selectAll("g.nv-legend").data([a]),k=_.enter().append("g").attr("class","nvd3 nv-legend").append("g"),M=_.select("g");c?_.attr("transform","translate("+-e.right+","+e.top+")"):_.attr("transform","translate("+e.left+","+e.top+")");var C,S,A=M.selectAll(".nv-series").data((function(t){return"furious"!=v?t:t.filter((function(t){return!!p||!t.disengaged}))})),L=A.enter().append("g").attr("class","nv-series");switch(v){case"furious":S=23;break;case"classic":S=20}if("classic"==v)L.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),C=A.select(".nv-legend-symbol");else if("furious"==v){L.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),C=A.select(".nv-legend-symbol"),L.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),A.select(".nv-check-box").each((function(t,e){d3.select(this).selectAll("path").attr("stroke",b(t,e))}))}L.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var E=A.select("text.nv-legend-text");A.on("mouseover",(function(t,e){g.legendMouseover(t,e)})).on("mouseout",(function(t,e){g.legendMouseout(t,e)})).on("click",(function(t,e){g.legendClick(t,e);var n=A.data();if(f){if("classic"==v)d?(n.forEach((function(t){t.disabled=!0})),t.disabled=!1):(t.disabled=!t.disabled,n.every((function(t){return t.disabled}))&&n.forEach((function(t){t.disabled=!1})));else if("furious"==v)if(p)t.disengaged=!t.disengaged,t.userDisabled=null==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!p){t.disabled=!t.disabled,t.userDisabled=t.disabled,n.filter((function(t){return!t.disengaged})).every((function(t){return t.userDisabled}))&&n.forEach((function(t){t.disabled=t.userDisabled=!1}))}g.stateChange({disabled:n.map((function(t){return!!t.disabled})),disengaged:n.map((function(t){return!!t.disengaged}))})}})).on("dblclick",(function(t,e){if(h){if("furious"==v&&p)return;if(g.legendDblclick(t,e),f){var n=A.data();n.forEach((function(t){t.disabled=!0,"furious"==v&&(t.userDisabled=t.disabled)})),t.disabled=!1,"furious"==v&&(t.userDisabled=t.disabled),g.stateChange({disabled:n.map((function(t){return!!t.disabled}))})}}})),A.classed("nv-disabled",(function(t){return t.userDisabled})),A.exit().remove(),E.attr("fill",b).text((function(t){return o(i(t))}));var P=0;if(l){var T=[];A.each((function(e,n){var r,a;if(o(i(e))&&o(i(e)).length>s){var l=o(i(e)).substring(0,s);r=d3.select(this).select("text").text(l+"..."),d3.select(this).append("svg:title").text(o(i(e)))}else r=d3.select(this).select("text");try{if((a=r.node().getComputedTextLength())<=0)throw Error()}catch(e){a=t.utils.calcApproxTextWidth(r)}T.push(a+u)}));var O=0,D=[];for(P=0;P<m&&O<T.length;)D[O]=T[O],P+=T[O++];for(0===O&&(O=1);P>m&&O>1;){D=[],O--;for(var I=0;I<T.length;I++)T[I]>(D[I%O]||0)&&(D[I%O]=T[I]);P=D.reduce((function(t,e,n,r){return t+e}))}for(var F=[],N=0,G=0;N<O;N++)F[N]=G,G+=D[N];A.attr("transform",(function(t,e){return"translate("+F[e%O]+","+(5+Math.floor(e/O)*S)+")"})),c?M.attr("transform","translate("+(n-e.right-P)+","+e.top+")"):M.attr("transform","translate(0,"+e.top+")"),r=e.top+e.bottom+Math.ceil(T.length/O)*S}else{var W,B=5,j=5,z=0;A.attr("transform",(function(t,r){var i=d3.select(this).select("text").node().getComputedTextLength()+u;return W=j,n<e.left+e.right+W+i&&(j=W=5,B+=S),(j+=i)>z&&(z=j),P<W+z&&(P=W+z),"translate("+W+","+B+")"})),M.attr("transform","translate("+(n-e.right-z)+","+e.top+")"),r=e.top+e.bottom+B+15}"furious"==v&&(C.attr("width",(function(t,e){return E[0][e].getComputedTextLength()+27})).attr("height",18).attr("y",-9).attr("x",-15),k.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),M.select(".nv-legend-bg").transition().duration(300).attr("x",-S).attr("width",P+S-12).attr("height",r+10).attr("y",-e.top-10).attr("opacity",p?1:0));C.style("fill",x).style("fill-opacity",w).style("stroke",x)})),m}return m.dispatch=g,m.options=t.utils.optionsFunc.bind(m),m._options=Object.create({},{width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},key:{get:function(){return i},set:function(t){i=t}},keyFormatter:{get:function(){return o},set:function(t){o=t}},align:{get:function(){return l},set:function(t){l=t}},maxKeyLength:{get:function(){return s},set:function(t){s=t}},rightAlign:{get:function(){return c},set:function(t){c=t}},padding:{get:function(){return u},set:function(t){u=t}},updateState:{get:function(){return f},set:function(t){f=t}},enableDoubleClick:{get:function(){return h},set:function(t){h=t}},radioButtonMode:{get:function(){return d},set:function(t){d=t}},expanded:{get:function(){return p},set:function(t){p=t}},vers:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}}}),t.utils.initOptions(m),m},t.models.line=function(){"use strict";var e,n,r=t.models.scatter(),i={top:0,right:0,bottom:0,left:0},o=960,a=500,s=null,l=t.utils.defaultColor(),u=function(t){return t.x},c=function(t){return t.y},f=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},h=function(t){return t.area},d=!1,p="linear",g=250,v=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");r.pointSize(16).pointDomain([16,256]);var m,y,b=t.utils.renderWatch(v,g);function x(g){return b.reset(),b.models(r),g.each((function(g){s=d3.select(this);var v=t.utils.availableWidth(o,s,i),x=t.utils.availableHeight(a,s,i);t.utils.initSVG(s),e=r.xScale(),n=r.yScale(),m=m||e,y=y||n;var w=s.selectAll("g.nv-wrap.nv-line").data([g]),_=w.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),k=_.append("defs"),M=_.append("g"),C=w.select("g");M.append("g").attr("class","nv-groups"),M.append("g").attr("class","nv-scatterWrap"),w.attr("transform","translate("+i.left+","+i.top+")"),r.width(v).height(x);var S=w.select(".nv-scatterWrap");S.call(r),k.append("clipPath").attr("id","nv-edge-clip-"+r.id()).append("rect"),w.select("#nv-edge-clip-"+r.id()+" rect").attr("width",v).attr("height",x>0?x:0),C.attr("clip-path",d?"url(#nv-edge-clip-"+r.id()+")":""),S.attr("clip-path",d?"url(#nv-edge-clip-"+r.id()+")":"");var A=w.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));A.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",(function(t){return t.strokeWidth||1.5})).style("fill-opacity",1e-6),A.exit().remove(),A.attr("class",(function(t,e){return(t.classed||"")+" nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return l(t,e)})).style("stroke",(function(t,e){return l(t,e)})),A.watchTransition(b,"line: groups").style("stroke-opacity",1).style("fill-opacity",(function(t){return t.fillOpacity||.5}));var L=A.selectAll("path.nv-area").data((function(t){return h(t)?[t]:[]}));L.enter().append("path").attr("class","nv-area").attr("d",(function(e){return d3.svg.area().interpolate(p).defined(f).x((function(e,n){return t.utils.NaNtoZero(m(u(e,n)))})).y0((function(e,n){return t.utils.NaNtoZero(y(c(e,n)))})).y1((function(t,e){return y(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])})).apply(this,[e.values])})),A.exit().selectAll("path.nv-area").remove(),L.watchTransition(b,"line: areaPaths").attr("d",(function(r){return d3.svg.area().interpolate(p).defined(f).x((function(n,r){return t.utils.NaNtoZero(e(u(n,r)))})).y0((function(e,r){return t.utils.NaNtoZero(n(c(e,r)))})).y1((function(t,e){return n(n.domain()[0]<=0?n.domain()[1]>=0?0:n.domain()[1]:n.domain()[0])})).apply(this,[r.values])}));var E=A.selectAll("path.nv-line").data((function(t){return[t.values]}));E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(f).x((function(e,n){return t.utils.NaNtoZero(m(u(e,n)))})).y((function(e,n){return t.utils.NaNtoZero(y(c(e,n)))}))),E.watchTransition(b,"line: linePaths").attr("d",d3.svg.line().interpolate(p).defined(f).x((function(n,r){return t.utils.NaNtoZero(e(u(n,r)))})).y((function(e,r){return t.utils.NaNtoZero(n(c(e,r)))}))),m=e.copy(),y=n.copy()})),b.renderEnd("line immediate"),x}return x.dispatch=v,x.scatter=r,r.dispatch.on("elementClick",(function(){v.elementClick.apply(this,arguments)})),r.dispatch.on("elementMouseover",(function(){v.elementMouseover.apply(this,arguments)})),r.dispatch.on("elementMouseout",(function(){v.elementMouseout.apply(this,arguments)})),x.options=t.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},defined:{get:function(){return f},set:function(t){f=t}},interpolate:{get:function(){return p},set:function(t){p=t}},clipEdge:{get:function(){return d},set:function(t){d=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return g},set:function(t){g=t,b.reset(g),r.duration(g)}},isArea:{get:function(){return h},set:function(t){h=d3.functor(t)}},x:{get:function(){return u},set:function(t){u=t,r.x(t)}},y:{get:function(){return c},set:function(t){c=t,r.y(t)}},color:{get:function(){return l},set:function(e){l=t.utils.getColor(e),r.color(l)}}}),t.utils.inheritOptions(x,r),t.utils.initOptions(x),x},t.models.lineChart=function(){"use strict";var e,n,r=t.models.line(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),s=t.interactiveGuideline(),l=t.models.tooltip(),u=t.models.focus(t.models.line()),c={top:30,right:20,bottom:50,left:60},f=null,h=t.utils.defaultColor(),d=null,p=null,g=!0,v="top",m=!0,y=!0,b=!1,x=!1,w=!1,_=t.utils.state(),k=null,M=null,C=d3.dispatch("stateChange","changeState","renderEnd"),S=250;i.orient("bottom").tickPadding(7),o.orient(b?"right":"left"),r.clipEdge(!0).duration(0),l.valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),s.tooltip.valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)}));var A=t.utils.renderWatch(C,S);function L(l){return A.reset(),A.models(r),m&&A.models(i),y&&A.models(o),l.each((function(l){var M=d3.select(this);t.utils.initSVG(M);var A,E=t.utils.availableWidth(d,M,c),P=t.utils.availableHeight(p,M,c)-(w?u.height():0);if(L.update=function(){0===S?M.call(L):M.transition().duration(S).call(L)},L.container=this,_.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(l),L.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(l)).update(),_.disabled=l.map((function(t){return!!t.disabled})),!k)for(A in k={},_)_[A]instanceof Array?k[A]=_[A].slice(0):k[A]=_[A];if(!(l&&l.length&&l.filter((function(t){return t.values.length})).length))return t.utils.noData(L,M),L;M.selectAll(".nv-noData").remove(),u.dispatch.on("onBrush",(function(t){B(t)})),e=r.xScale(),n=r.yScale();var T=M.selectAll("g.nv-wrap.nv-lineChart").data([l]),O=T.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),D=T.select("g");O.append("g").attr("class","nv-legendWrap");var I=O.append("g").attr("class","nv-focus");I.append("g").attr("class","nv-background").append("rect"),I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-linesWrap"),I.append("g").attr("class","nv-interactive");O.append("g").attr("class","nv-focusWrap");g?(a.width(E),D.select(".nv-legendWrap").datum(l).call(a),"bottom"===v?(c.bottom=i.height()+a.height(),P=t.utils.availableHeight(p,M,c),D.select(".nv-legendWrap").attr("transform","translate(0,"+(P+i.height())+")")):"top"===v&&(f||a.height()===c.top||(c.top=a.height(),P=t.utils.availableHeight(p,M,c)-(w?u.height():0)),T.select(".nv-legendWrap").attr("transform","translate(0,"+-c.top+")"))):D.select(".nv-legendWrap").selectAll("*").remove(),T.attr("transform","translate("+c.left+","+c.top+")"),b&&D.select(".nv-y.nv-axis").attr("transform","translate("+E+",0)"),x&&(s.width(E).height(P).margin({left:c.left,top:c.top}).svgContainer(M).xScale(e),T.select(".nv-interactive").call(s)),D.select(".nv-focus .nv-background rect").attr("width",E).attr("height",P),r.width(E).height(P).color(l.map((function(t,e){return t.color||h(t,e)})).filter((function(t,e){return!l[e].disabled})));var F=D.select(".nv-linesWrap").datum(l.filter((function(t){return!t.disabled})));function N(){m&&D.select(".nv-focus .nv-x.nv-axis").transition().duration(S).call(i)}function G(){y&&D.select(".nv-focus .nv-y.nv-axis").transition().duration(S).call(o)}if(m&&i.scale(e)._ticks(t.utils.calcTicksX(E/100,l)).tickSize(-P,0),y&&o.scale(n)._ticks(t.utils.calcTicksY(P/36,l)).tickSize(-E,0),D.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+P+")"),w||null!==u.brush.extent()){u.width(E),D.select(".nv-focusWrap").style("display",w?"initial":"none").attr("transform","translate(0,"+(P+c.bottom+u.margin().top)+")").call(u);var W=u.brush.empty()?u.xDomain():u.brush.extent();null!==W&&B(W)}else F.call(r),N(),G();function B(t){D.select(".nv-focus .nv-linesWrap").datum(l.filter((function(t){return!t.disabled})).map((function(e,n){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter((function(e,n){return r.x()(e,n)>=t[0]&&r.x()(e,n)<=t[1]})),disableTooltip:e.disableTooltip}}))).transition().duration(S).call(r),N(),G()}a.dispatch.on("stateChange",(function(t){for(var e in t)_[e]=t[e];C.stateChange(_),L.update()})),s.dispatch.on("elementMousemove",(function(n){r.clearHighlights();var i,a,c,f=[];if(l.filter((function(t,e){return t.seriesIndex=e,!t.disabled&&!t.disableTooltip})).forEach((function(o,s){var l=null!==u.brush.extent()?u.brush.empty()?u.xScale().domain():u.brush.extent():e.domain(),d=o.values.filter((function(t,e){return l[0]<=l[1]?r.x()(t,e)>=l[0]&&r.x()(t,e)<=l[1]:r.x()(t,e)>=l[1]&&r.x()(t,e)<=l[0]})),p=d[a=t.interactiveBisect(d,n.pointXValue,r.x())],g=L.y()(p,a);null!==g&&r.highlightPoint(s,a,!0),void 0!==p&&(void 0===i&&(i=p),void 0===c&&(c=L.xScale()(L.x()(p,a))),f.push({key:o.key,value:g,color:h(o,o.seriesIndex),data:p}))})),f.length>2){var d=L.yScale().invert(n.mouseY),p=.03*Math.abs(L.yScale().domain()[0]-L.yScale().domain()[1]),g=t.nearestValueIndex(f.map((function(t){return t.value})),d,p);null!==g&&(f[g].highlight=!0)}s.tooltip.valueFormatter(s.tooltip.valueFormatter()||function(t,e){return null==t?"N/A":o.tickFormat()(t)}).data({value:L.x()(i,a),index:a,series:f})(),s.renderGuideLine(c)})),s.dispatch.on("elementClick",(function(e){var n,i=[];l.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(r){var o=t.interactiveBisect(r.values,e.pointXValue,L.x()),a=r.values[o];if(void 0!==a){void 0===n&&(n=L.xScale()(L.x()(a,o)));var s=L.yScale()(L.y()(a,o));i.push({point:a,pointIndex:o,pos:[n,s],seriesIndex:r.seriesIndex,series:r})}})),r.dispatch.elementClick(i)})),s.dispatch.on("elementMouseout",(function(t){r.clearHighlights()})),C.on("changeState",(function(t){void 0!==t.disabled&&l.length===t.disabled.length&&(l.forEach((function(e,n){e.disabled=t.disabled[n]})),_.disabled=t.disabled),L.update()}))})),A.renderEnd("lineChart immediate"),L}return r.dispatch.on("elementMouseover.tooltip",(function(t){t.series.disableTooltip||l.data(t).hidden(!1)})),r.dispatch.on("elementMouseout.tooltip",(function(t){l.hidden(!0)})),L.dispatch=C,L.lines=r,L.legend=a,L.focus=u,L.xAxis=i,L.x2Axis=u.xAxis,L.yAxis=o,L.y2Axis=u.yAxis,L.interactiveLayer=s,L.tooltip=l,L.state=_,L.dispatch=C,L.options=t.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return g},set:function(t){g=t}},legendPosition:{get:function(){return v},set:function(t){v=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return M},set:function(t){M=t}},focusEnable:{get:function(){return w},set:function(t){w=t}},focusHeight:{get:function(){return u.height()},set:function(t){u.height(t)}},focusShowAxisX:{get:function(){return u.showXAxis()},set:function(t){u.showXAxis(t)}},focusShowAxisY:{get:function(){return u.showYAxis()},set:function(t){u.showYAxis(t)}},brushExtent:{get:function(){return u.brushExtent()},set:function(t){u.brushExtent(t)}},focusMargin:{get:function(){return u.margin},set:function(t){void 0!==t.top&&(c.top=t.top,f=t.top),u.margin.right=void 0!==t.right?t.right:u.margin.right,u.margin.bottom=void 0!==t.bottom?t.bottom:u.margin.bottom,u.margin.left=void 0!==t.left?t.left:u.margin.left}},margin:{get:function(){return c},set:function(t){c.top=void 0!==t.top?t.top:c.top,c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return S},set:function(t){S=t,A.reset(S),r.duration(S),u.duration(S),i.duration(S),o.duration(S)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),a.color(h),r.color(h),u.color(h)}},interpolate:{get:function(){return r.interpolate()},set:function(t){r.interpolate(t),u.interpolate(t)}},xTickFormat:{get:function(){return i.tickFormat()},set:function(t){i.tickFormat(t),u.xTickFormat(t)}},yTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t),u.yTickFormat(t)}},x:{get:function(){return r.x()},set:function(t){r.x(t),u.x(t)}},y:{get:function(){return r.y()},set:function(t){r.y(t),u.y(t)}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,o.orient(b?"right":"left")}},useInteractiveGuideline:{get:function(){return x},set:function(t){(x=t)&&(r.interactive(!1),r.useVoronoi(!1))}}}),t.utils.inheritOptions(L,r),t.utils.initOptions(L),L},t.models.lineWithFocusChart=function(){return t.models.lineChart().margin({bottom:30}).focusEnable(!0)},t.models.linePlusBarChart=function(){"use strict";var e,n,r,i,o,a,s,l=t.models.line(),u=t.models.line(),c=t.models.historicalBar(),f=t.models.historicalBar(),h=t.models.axis(),d=t.models.axis(),p=t.models.axis(),g=t.models.axis(),v=t.models.axis(),m=t.models.axis(),y=t.models.legend(),b=d3.svg.brush(),x=t.models.tooltip(),w={top:30,right:30,bottom:30,left:60},_=null,k={top:0,right:30,bottom:20,left:60},M=null,C=null,S=function(t){return t.x},A=function(t){return t.y},L=t.utils.defaultColor(),E=!0,P=!0,T=!1,O=!0,D=50,I=null,F=null,N=d3.dispatch("brush","stateChange","changeState"),G=0,W=t.utils.state(),B=null,j=" (left axis)",z=" (right axis)",R=!1;l.clipEdge(!0),u.interactive(!1),u.pointActive((function(t){return!1})),h.orient("bottom").tickPadding(5),p.orient("left"),g.orient("right"),d.orient("bottom").tickPadding(5),v.orient("left"),m.orient("right"),x.headerEnabled(!0).headerFormatter((function(t,e){return h.tickFormat()(t,e)}));var H=function(t){return t.every((function(t){return t.disabled}))};function V(x){return x.each((function(x){var F=d3.select(this);t.utils.initSVG(F);var $,U=t.utils.availableWidth(M,F,w),q=t.utils.availableHeight(C,F,w)-(P?D:0),K=D-k.top-k.bottom;if(V.update=function(){F.transition().duration(G).call(V)},V.container=this,W.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(x),V.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(x)).update(),W.disabled=x.map((function(t){return!!t.disabled})),!B)for($ in B={},W)W[$]instanceof Array?B[$]=W[$].slice(0):B[$]=W[$];if(!(x&&x.length&&x.filter((function(t){return t.values.length})).length))return t.utils.noData(V,F),V;F.selectAll(".nv-noData").remove();var Y=x.filter((function(t){return!t.disabled&&t.bar})),X=x.filter((function(t){return!t.bar}));n=Y.length&&!R?c.xScale():l.xScale(),r=d.scale(),i=R?l.yScale():c.yScale(),o=R?c.yScale():l.yScale(),a=R?u.yScale():f.yScale(),s=R?f.yScale():u.yScale();var Z=x.filter((function(t){return!t.disabled&&(R?!t.bar:t.bar)})).map((function(t){return t.values.map((function(t,e){return{x:S(t,e),y:A(t,e)}}))})),Q=x.filter((function(t){return!t.disabled&&(R?t.bar:!t.bar)})).map((function(t){return t.values.map((function(t,e){return{x:S(t,e),y:A(t,e)}}))}));n.range([0,U]),r.domain(d3.extent(d3.merge(Z.concat(Q)),(function(t){return t.x}))).range([0,U]);var J=F.selectAll("g.nv-wrap.nv-linePlusBar").data([x]),tt=J.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),et=J.select("g");tt.append("g").attr("class","nv-legendWrap");var nt=tt.append("g").attr("class","nv-focus");nt.append("g").attr("class","nv-x nv-axis"),nt.append("g").attr("class","nv-y1 nv-axis"),nt.append("g").attr("class","nv-y2 nv-axis"),nt.append("g").attr("class","nv-barsWrap"),nt.append("g").attr("class","nv-linesWrap");var rt=tt.append("g").attr("class","nv-context");if(rt.append("g").attr("class","nv-x nv-axis"),rt.append("g").attr("class","nv-y1 nv-axis"),rt.append("g").attr("class","nv-y2 nv-axis"),rt.append("g").attr("class","nv-barsWrap"),rt.append("g").attr("class","nv-linesWrap"),rt.append("g").attr("class","nv-brushBackground"),rt.append("g").attr("class","nv-x nv-brush"),E){var it=y.align()?U/2:U,ot=y.align()?it:0;y.width(it),et.select(".nv-legendWrap").datum(x.map((function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=R?t.originalKey+(t.bar?z:j):t.originalKey+(t.bar?j:z),t}))).call(y),_||y.height()===w.top||(w.top=y.height(),q=t.utils.availableHeight(C,F,w)-D),et.select(".nv-legendWrap").attr("transform","translate("+ot+","+-w.top+")")}else et.select(".nv-legendWrap").selectAll("*").remove();J.attr("transform","translate("+w.left+","+w.top+")"),et.select(".nv-context").style("display",P?"initial":"none"),f.width(U).height(K).color(x.map((function(t,e){return t.color||L(t,e)})).filter((function(t,e){return!x[e].disabled&&x[e].bar}))),u.width(U).height(K).color(x.map((function(t,e){return t.color||L(t,e)})).filter((function(t,e){return!x[e].disabled&&!x[e].bar})));var at=et.select(".nv-context .nv-barsWrap").datum(Y.length?Y:[{values:[]}]),st=et.select(".nv-context .nv-linesWrap").datum(H(X)?[{values:[]}]:X.filter((function(t){return!t.disabled})));et.select(".nv-context").attr("transform","translate(0,"+(q+w.bottom+k.top)+")"),at.transition().call(f),st.transition().call(u),O&&(d._ticks(t.utils.calcTicksX(U/100,x)).tickSize(-K,0),et.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+a.range()[0]+")"),et.select(".nv-context .nv-x.nv-axis").transition().call(d)),T&&(v.scale(a)._ticks(K/36).tickSize(-U,0),m.scale(s)._ticks(K/36).tickSize(Y.length?0:-U,0),et.select(".nv-context .nv-y3.nv-axis").style("opacity",Y.length?1:0).attr("transform","translate(0,"+r.range()[0]+")"),et.select(".nv-context .nv-y2.nv-axis").style("opacity",X.length?1:0).attr("transform","translate("+r.range()[1]+",0)"),et.select(".nv-context .nv-y1.nv-axis").transition().call(v),et.select(".nv-context .nv-y2.nv-axis").transition().call(m)),b.x(r).on("brush",ft),I&&b.extent(I);var lt=et.select(".nv-brushBackground").selectAll("g").data([I||b.extent()]),ut=lt.enter().append("g");ut.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",K),ut.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",K);var ct=et.select(".nv-x.nv-brush").call(b);function ft(){I=b.empty()?null:b.extent(),e=b.empty()?r.domain():b.extent(),N.brush({extent:e,brush:b}),b.empty()||b.extent(I),lt.data([b.empty()?r.domain():I]).each((function(t,e){var n=r(t[0])-r.range()[0],i=r.range()[1]-r(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",i<0?0:i)})),c.width(U).height(q).color(x.map((function(t,e){return t.color||L(t,e)})).filter((function(t,e){return!x[e].disabled&&x[e].bar}))),l.width(U).height(q).color(x.map((function(t,e){return t.color||L(t,e)})).filter((function(t,e){return!x[e].disabled&&!x[e].bar})));var a=et.select(".nv-focus .nv-barsWrap").datum(Y.length?Y.map((function(t,n){return{key:t.key,values:t.values.filter((function(t,n){return c.x()(t,n)>=e[0]&&c.x()(t,n)<=e[1]}))}})):[{values:[]}]),s=et.select(".nv-focus .nv-linesWrap").datum(H(X)?[{values:[]}]:X.filter((function(t){return!t.disabled})).map((function(t,n){return{area:t.area,fillOpacity:t.fillOpacity,strokeWidth:t.strokeWidth,key:t.key,values:t.values.filter((function(t,n){return l.x()(t,n)>=e[0]&&l.x()(t,n)<=e[1]}))}})));n=Y.length&&!R?c.xScale():l.xScale(),h.scale(n)._ticks(t.utils.calcTicksX(U/100,x)).tickSize(-q,0),h.domain([Math.ceil(e[0]),Math.floor(e[1])]),et.select(".nv-x.nv-axis").transition().duration(G).call(h),a.transition().duration(G).call(c),s.transition().duration(G).call(l),et.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),p.scale(i)._ticks(t.utils.calcTicksY(q/36,x)).tickSize(-U,0),g.scale(o)._ticks(t.utils.calcTicksY(q/36,x)),R?g.tickSize(X.length?0:-U,0):g.tickSize(Y.length?0:-U,0);var u=Y.length?1:0,f=X.length&&!H(X)?1:0,d=R?f:u,v=R?u:f;et.select(".nv-focus .nv-y1.nv-axis").style("opacity",d),et.select(".nv-focus .nv-y2.nv-axis").style("opacity",v).attr("transform","translate("+n.range()[1]+",0)"),et.select(".nv-focus .nv-y1.nv-axis").transition().duration(G).call(p),et.select(".nv-focus .nv-y2.nv-axis").transition().duration(G).call(g)}ct.selectAll("rect").attr("height",K),ct.selectAll(".resize").append("path").attr("d",(function(t){var e=+("e"==t),n=e?1:-1,r=K/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)})),y.dispatch.on("stateChange",(function(t){for(var e in t)W[e]=t[e];N.stateChange(W),V.update()})),N.on("changeState",(function(t){void 0!==t.disabled&&(x.forEach((function(e,n){e.disabled=t.disabled[n]})),W.disabled=t.disabled),V.update()})),ft()})),V}return l.dispatch.on("elementMouseover.tooltip",(function(t){x.duration(100).valueFormatter((function(t,e){return(R?{main:p,focus:v}:{main:g,focus:m}).main.tickFormat()(t,e)})).data(t).hidden(!1)})),l.dispatch.on("elementMouseout.tooltip",(function(t){x.hidden(!0)})),c.dispatch.on("elementMouseover.tooltip",(function(t){t.value=V.x()(t.data),t.series={value:V.y()(t.data),color:t.color},x.duration(0).valueFormatter((function(t,e){return(R?{main:g,focus:m}:{main:p,focus:v}).main.tickFormat()(t,e)})).data(t).hidden(!1)})),c.dispatch.on("elementMouseout.tooltip",(function(t){x.hidden(!0)})),c.dispatch.on("elementMousemove.tooltip",(function(t){x()})),V.dispatch=N,V.legend=y,V.lines=l,V.lines2=u,V.bars=c,V.bars2=f,V.xAxis=h,V.x2Axis=d,V.y1Axis=p,V.y2Axis=g,V.y3Axis=v,V.y4Axis=m,V.tooltip=x,V.options=t.utils.optionsFunc.bind(V),V._options=Object.create({},{width:{get:function(){return M},set:function(t){M=t}},height:{get:function(){return C},set:function(t){C=t}},showLegend:{get:function(){return E},set:function(t){E=t}},brushExtent:{get:function(){return I},set:function(t){I=t}},noData:{get:function(){return F},set:function(t){F=t}},focusEnable:{get:function(){return P},set:function(t){P=t}},focusHeight:{get:function(){return D},set:function(t){D=t}},focusShowAxisX:{get:function(){return O},set:function(t){O=t}},focusShowAxisY:{get:function(){return T},set:function(t){T=t}},legendLeftAxisHint:{get:function(){return j},set:function(t){j=t}},legendRightAxisHint:{get:function(){return z},set:function(t){z=t}},margin:{get:function(){return w},set:function(t){void 0!==t.top&&(w.top=t.top,_=t.top),w.right=void 0!==t.right?t.right:w.right,w.bottom=void 0!==t.bottom?t.bottom:w.bottom,w.left=void 0!==t.left?t.left:w.left}},focusMargin:{get:function(){return k},set:function(t){k.top=void 0!==t.top?t.top:k.top,k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},duration:{get:function(){return G},set:function(t){G=t}},color:{get:function(){return L},set:function(e){L=t.utils.getColor(e),y.color(L)}},x:{get:function(){return S},set:function(t){S=t,l.x(t),u.x(t),c.x(t),f.x(t)}},y:{get:function(){return A},set:function(t){A=t,l.y(t),u.y(t),c.y(t),f.y(t)}},switchYAxisOrder:{get:function(){return R},set:function(t){if(R!==t){var e=p;p=g,g=e;var n=v;v=m,m=n}R=t,p.orient("left"),g.orient("right"),v.orient("left"),m.orient("right")}}}),t.utils.inheritOptions(V,l),t.utils.initOptions(V),V},t.models.multiBar=function(){"use strict";var e,n,r,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,f=d3.scale.ordinal(),h=d3.scale.linear(),d=Math.floor(1e4*Math.random()),p=null,g=function(t){return t.x},v=function(t){return t.y},m=[0],y=!0,b=!1,x="zero",w=t.utils.defaultColor(),_=!1,k=null,M=500,C=.1,S=.75,A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),L=t.utils.renderWatch(A,M),E=0;function P(T){return L.reset(),T.each((function(P){var T=u-l.left-l.right,O=c-l.top-l.bottom;p=d3.select(this),t.utils.initSVG(p);var D=0;if(_&&P.length&&(_=[{values:P[0].values.map((function(t){return{x:t.x,y:0,series:t.series,size:.01}}))}]),b){var I=d3.layout.stack().offset(x).values((function(t){return t.values})).y(v)(!P.length&&_?_:P);I.forEach((function(t,e){t.nonStackable?(P[e].nonStackableSeries=D++,I[e]=P[e]):e>0&&I[e-1].nonStackable&&I[e].values.map((function(t,n){t.y0-=I[e-1].values[n].y,t.y1=t.y0+t.y}))})),P=I}P.forEach((function(t,e){t.values.forEach((function(n){n.series=e,n.key=t.key}))})),b&&P.length>0&&P[0].values.map((function(t,e){var n=0,r=0;P.map((function(t,i){if(!P[i].nonStackable){var o=t.values[e];o.size=Math.abs(o.y),o.y<0?(o.y1=r,r-=o.size):(o.y1=o.size+n,n+=o.size)}}))}));var F=n&&r?[]:P.map((function(t,e){return t.values.map((function(t,n){return{x:g(t,n),y:v(t,n),y0:t.y0,y1:t.y1,idx:e}}))}));f.domain(n||d3.merge(F).map((function(t){return t.x}))).rangeBands(i||[0,T],C),h.domain(r||d3.extent(d3.merge(F).map((function(t){var e=t.y;return b&&!P[t.idx].nonStackable&&(e=t.y>0?t.y1:t.y1+t.y),e})).concat(m))).range(o||[O,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1])),a=a||f,s=s||h;var N=p.selectAll("g.nv-wrap.nv-multibar").data([P]),G=N.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),W=G.append("defs"),B=G.append("g"),j=N.select("g");B.append("g").attr("class","nv-groups"),N.attr("transform","translate("+l.left+","+l.top+")"),W.append("clipPath").attr("id","nv-edge-clip-"+d).append("rect"),N.select("#nv-edge-clip-"+d+" rect").attr("width",T).attr("height",O),j.attr("clip-path",y?"url(#nv-edge-clip-"+d+")":"");var z=N.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t,e){return e}));z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var R=L.transition(z.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,M)).attr("y",(function(t,e,n){var r=s(0)||0;return b&&P[t.series]&&!P[t.series].nonStackable&&(r=s(t.y0)),r})).attr("height",0).remove();R.delay&&R.delay((function(t,e){return e*(M/(E+1))-e})),z.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return w(t,e)})).style("stroke",(function(t,e){return w(t,e)})),z.style("stroke-opacity",1).style("fill-opacity",S);var H=z.selectAll("rect.nv-bar").data((function(t){return _&&!P.length?_.values:t.values}));H.exit().remove();H.enter().append("rect").attr("class",(function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"})).attr("x",(function(t,e,n){return b&&!P[n].nonStackable?0:n*f.rangeBand()/P.length})).attr("y",(function(t,e,n){return s(b&&!P[n].nonStackable?t.y0:0)||0})).attr("height",0).attr("width",(function(t,e,n){return f.rangeBand()/(b&&!P[n].nonStackable?1:P.length)})).attr("transform",(function(t,e){return"translate("+f(g(t,e))+",0)"}));H.style("fill",(function(t,e,n){return w(t,n,e)})).style("stroke",(function(t,e,n){return w(t,n,e)})).on("mouseover",(function(t,e,n){d3.select(this).classed("hover",!0),A.elementMouseover({data:t,index:e,series:P[n],color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e,n){d3.select(this).classed("hover",!1),A.elementMouseout({data:t,index:e,series:P[n],color:d3.select(this).style("fill")})})).on("mousemove",(function(t,e,n){A.elementMousemove({data:t,index:e,series:P[n],color:d3.select(this).style("fill")})})).on("click",(function(t,e,n){A.elementClick({data:t,index:e,series:P[n],color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,e,n){A.elementDblClick({data:t,index:e,series:P[n],color:d3.select(this).style("fill")}),d3.event.stopPropagation()})),H.attr("class",(function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"})).attr("transform",(function(t,e){return"translate("+f(g(t,e))+",0)"})),k&&(e||(e=P.map((function(){return!0}))),H.style("fill",(function(t,n,r){return d3.rgb(k(t,n)).darker(e.map((function(t,e){return e})).filter((function(t,n){return!e[n]}))[r]).toString()})).style("stroke",(function(t,n,r){return d3.rgb(k(t,n)).darker(e.map((function(t,e){return e})).filter((function(t,n){return!e[n]}))[r]).toString()})));var V=H.watchTransition(L,"multibar",Math.min(250,M)).delay((function(t,e){return e*M/P[0].values.length}));b?V.attr("y",(function(t,e,n){return P[n].nonStackable?v(t,e)<0?h(0):h(0)-h(v(t,e))<-1?h(0)-1:h(v(t,e))||0:h(t.y1)})).attr("height",(function(t,e,n){return P[n].nonStackable?Math.max(Math.abs(h(v(t,e))-h(0)),0)||0:Math.max(Math.abs(h(t.y+t.y0)-h(t.y0)),0)})).attr("x",(function(t,e,n){var r=0;return P[n].nonStackable&&(r=t.series*f.rangeBand()/P.length,P.length!==D&&(r=P[n].nonStackableSeries*f.rangeBand()/(2*D))),r})).attr("width",(function(t,e,n){if(P[n].nonStackable){var r=f.rangeBand()/D;return P.length!==D&&(r=f.rangeBand()/(2*D)),r}return f.rangeBand()})):V.attr("x",(function(t,e){return t.series*f.rangeBand()/P.length})).attr("width",f.rangeBand()/P.length).attr("y",(function(t,e){return v(t,e)<0?h(0):h(0)-h(v(t,e))<1?h(0)-1:h(v(t,e))||0})).attr("height",(function(t,e){return Math.max(Math.abs(h(v(t,e))-h(0)),1)||0})),a=f.copy(),s=h.copy(),P[0]&&P[0].values&&(E=P[0].values.length)})),L.renderEnd("multibar immediate"),P}return P.dispatch=A,P.options=t.utils.optionsFunc.bind(P),P._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return m},set:function(t){m=t}},stacked:{get:function(){return b},set:function(t){b=t}},stackOffset:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},disabled:{get:function(){return e},set:function(t){e=t}},id:{get:function(){return d},set:function(t){d=t}},hideable:{get:function(){return _},set:function(t){_=t}},groupSpacing:{get:function(){return C},set:function(t){C=t}},fillOpacity:{get:function(){return S},set:function(t){S=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return M},set:function(t){M=t,L.reset(M)}},color:{get:function(){return w},set:function(e){w=t.utils.getColor(e)}},barColor:{get:function(){return k},set:function(e){k=e?t.utils.getColor(e):null}}}),t.utils.initOptions(P),P},t.models.multiBarChart=function(){"use strict";var e,n,r=t.models.multiBar(),i=t.models.axis(),o=t.models.axis(),a=t.interactiveGuideline(),s=t.models.legend(),l=t.models.legend(),u=t.models.tooltip(),c={top:30,right:20,bottom:50,left:60},f=null,h=null,d=null,p=t.utils.defaultColor(),g=!0,v={},m=!0,y=null,b=!0,x=!0,w=!1,_=!0,k=!1,M=!1,C=0,S=t.utils.state(),A=null,L=null,E=d3.dispatch("stateChange","changeState","renderEnd"),P=function(){return g?180:0},T=250,O=!1;S.stacked=!1,r.stacked(!1),i.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat((function(t){return t})),o.orient(w?"right":"left").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),a.tooltip.valueFormatter((function(t,e){return null==t?"N/A":o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),a.tooltip.valueFormatter((function(t,e){return null==t?"N/A":o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),a.tooltip.duration(0).valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),l.updateState(!1);var D=t.utils.renderWatch(E),I=!1;function F(L){return D.reset(),D.models(r),b&&D.models(i),x&&D.models(o),L.each((function(L){var D=d3.select(this);t.utils.initSVG(D);var N,G=t.utils.availableWidth(h,D,c),W=t.utils.availableHeight(d,D,c);if(F.update=function(){0===T?D.call(F):D.transition().duration(T).call(F)},F.container=this,S.setter(function(t){return function(e){void 0!==e.stacked&&(I=e.stacked),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(L),F.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled})),stacked:I}}}(L)).update(),S.disabled=L.map((function(t){return!!t.disabled})),!A)for(N in A={},S)S[N]instanceof Array?A[N]=S[N].slice(0):A[N]=S[N];if(!(L&&L.length&&L.filter((function(t){return t.values.length})).length))return t.utils.noData(F,D),F;D.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var B=D.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([L]),j=B.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),z=B.select("g");if(j.append("g").attr("class","nv-x nv-axis"),j.append("g").attr("class","nv-y nv-axis"),j.append("g").attr("class","nv-barsWrap"),j.append("g").attr("class","nv-legendWrap"),j.append("g").attr("class","nv-controlsWrap"),j.append("g").attr("class","nv-interactive"),m?"bottom"===y?(s.width(G-c.right),z.select(".nv-legendWrap").datum(L).call(s),c.bottom=i.height()+s.height(),W=t.utils.availableHeight(d,D,c),z.select(".nv-legendWrap").attr("transform","translate(0,"+(W+i.height())+")")):(s.width(G-P()),z.select(".nv-legendWrap").datum(L).call(s),f||s.height()===c.top||(c.top=s.height(),W=t.utils.availableHeight(d,D,c)),z.select(".nv-legendWrap").attr("transform","translate("+P()+","+-c.top+")")):z.select(".nv-legendWrap").selectAll("*").remove(),g){var R=[{key:v.grouped||"Grouped",disabled:r.stacked()},{key:v.stacked||"Stacked",disabled:!r.stacked()}];l.width(P()).color(["#444","#444","#444"]),z.select(".nv-controlsWrap").datum(R).attr("transform","translate(0,"+-c.top+")").call(l)}else z.select(".nv-controlsWrap").selectAll("*").remove();if(B.attr("transform","translate("+c.left+","+c.top+")"),w&&z.select(".nv-y.nv-axis").attr("transform","translate("+G+",0)"),r.disabled(L.map((function(t){return t.disabled}))).width(G).height(W).color(L.map((function(t,e){return t.color||p(t,e)})).filter((function(t,e){return!L[e].disabled}))),z.select(".nv-barsWrap").datum(L.filter((function(t){return!t.disabled}))).call(r),b){i.scale(e)._ticks(t.utils.calcTicksX(G/100,L)).tickSize(-W,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+n.range()[0]+")"),z.select(".nv-x.nv-axis").call(i);var H=z.select(".nv-x.nv-axis > g").selectAll("g");if(H.selectAll("line, text").style("opacity",1),k){var V=function(t,e){return"translate("+t+","+e+")"};H.selectAll("text").attr("transform",(function(t,e,n){return V(0,n%2==0?5:17)}));var $=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;z.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",(function(t,e){return V(0,0===e||$%2!=0?17:5)}))}M&&z.selectAll(".tick text").call(t.utils.wrapTicks,F.xAxis.rangeBand()),_&&H.filter((function(t,e){return e%Math.ceil(L[0].values.length/(G/100))!=0})).selectAll("text, line").style("opacity",0),C&&H.selectAll(".tick text").attr("transform","rotate("+C+" 0,0)").style("text-anchor",C>0?"start":"end"),z.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}x&&(o.scale(n)._ticks(t.utils.calcTicksY(W/36,L)).tickSize(-G,0),z.select(".nv-y.nv-axis").call(o)),O&&(a.width(G).height(W).margin({left:c.left,top:c.top}).svgContainer(D).xScale(e),B.select(".nv-interactive").call(a)),s.dispatch.on("stateChange",(function(t){for(var e in t)S[e]=t[e];E.stateChange(S),F.update()})),l.dispatch.on("legendClick",(function(t,e){if(t.disabled){switch(R=R.map((function(t){return t.disabled=!0,t})),t.disabled=!1,t.key){case"Grouped":case v.grouped:r.stacked(!1);break;case"Stacked":case v.stacked:r.stacked(!0)}S.stacked=r.stacked(),E.stateChange(S),F.update()}})),E.on("changeState",(function(t){void 0!==t.disabled&&(L.forEach((function(e,n){e.disabled=t.disabled[n]})),S.disabled=t.disabled),void 0!==t.stacked&&(r.stacked(t.stacked),S.stacked=t.stacked,I=t.stacked),F.update()})),O?(a.dispatch.on("elementMousemove",(function(t){if(null!=t.pointXValue){var n,r,i,o,s=[];L.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(a,l){r=e.domain().indexOf(t.pointXValue);var u=a.values[r];void 0!==u&&(o=u.x,void 0===n&&(n=u),void 0===i&&(i=t.mouseX),s.push({key:a.key,value:F.y()(u,r),color:p(a,a.seriesIndex),data:a.values[r]}))})),a.tooltip.data({value:o,index:r,series:s})(),a.renderGuideLine(i)}})),a.dispatch.on("elementMouseout",(function(t){a.tooltip.hidden(!0)}))):(r.dispatch.on("elementMouseover.tooltip",(function(t){t.value=F.x()(t.data),t.series={key:t.data.key,value:F.y()(t.data),color:t.color},u.data(t).hidden(!1)})),r.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)})),r.dispatch.on("elementMousemove.tooltip",(function(t){u()})))})),D.renderEnd("multibarchart immediate"),F}return F.dispatch=E,F.multibar=r,F.legend=s,F.controls=l,F.xAxis=i,F.yAxis=o,F.state=S,F.tooltip=u,F.interactiveLayer=a,F.options=t.utils.optionsFunc.bind(F),F._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return m},set:function(t){m=t}},legendPosition:{get:function(){return y},set:function(t){y=t}},showControls:{get:function(){return g},set:function(t){g=t}},controlLabels:{get:function(){return v},set:function(t){v=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return L},set:function(t){L=t}},reduceXTicks:{get:function(){return _},set:function(t){_=t}},rotateLabels:{get:function(){return C},set:function(t){C=t}},staggerLabels:{get:function(){return k},set:function(t){k=t}},wrapLabels:{get:function(){return M},set:function(t){M=!!t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,f=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return T},set:function(t){T=t,r.duration(T),i.duration(T),o.duration(T),D.reset(T)}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),s.color(p)}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,o.orient(w?"right":"left")}},useInteractiveGuideline:{get:function(){return O},set:function(t){O=t}},barColor:{get:function(){return r.barColor},set:function(t){r.barColor(t),s.color((function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()}))}}}),t.utils.inheritOptions(F,r),t.utils.initOptions(F),F},t.models.multiBarHorizontal=function(){"use strict";var e,n,r,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,f=Math.floor(1e4*Math.random()),h=null,d=d3.scale.ordinal(),p=d3.scale.linear(),g=function(t){return t.x},v=function(t){return t.y},m=function(t){return t.yErr},y=[0],b=t.utils.defaultColor(),x=null,w=!1,_=!1,k=60,M=.1,C=.75,S=d3.format(",.2f"),A=250,L=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),E=t.utils.renderWatch(L,A);function P(f){return E.reset(),f.each((function(f){var A=u-l.left-l.right,P=c-l.top-l.bottom;h=d3.select(this),t.utils.initSVG(h),w&&(f=d3.layout.stack().offset("zero").values((function(t){return t.values})).y(v)(f)),f.forEach((function(t,e){t.values.forEach((function(n){n.series=e,n.key=t.key}))})),w&&f[0].values.map((function(t,e){var n=0,r=0;f.map((function(t){var i=t.values[e];i.size=Math.abs(i.y),i.y<0?(i.y1=r-i.size,r-=i.size):(i.y1=n,n+=i.size)}))}));var T=n&&r?[]:f.map((function(t){return t.values.map((function(t,e){return{x:g(t,e),y:v(t,e),y0:t.y0,y1:t.y1}}))}));d.domain(n||d3.merge(T).map((function(t){return t.x}))).rangeBands(i||[0,P],M),p.domain(r||d3.extent(d3.merge(T).map((function(t){return w?t.y>0?t.y1+t.y:t.y1:t.y})).concat(y))),_&&!w?p.range(o||[p.domain()[0]<0?k:0,A-(p.domain()[1]>0?k:0)]):p.range(o||[0,A]),a=a||d,s=s||d3.scale.linear().domain(p.domain()).range([p(0),p(0)]);var O=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([f]),D=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),I=(D.append("defs"),D.append("g"));O.select("g");I.append("g").attr("class","nv-groups"),O.attr("transform","translate("+l.left+","+l.top+")");var F=O.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t,e){return e}));F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),F.exit().watchTransition(E,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),F.attr("class",(function(t,e){return"nv-group nv-series-"+e})).classed("hover",(function(t){return t.hover})).style("fill",(function(t,e){return b(t,e)})).style("stroke",(function(t,e){return b(t,e)})),F.watchTransition(E,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",C);var N=F.selectAll("g.nv-bar").data((function(t){return t.values}));N.exit().remove();var G=N.enter().append("g").attr("transform",(function(t,e,n){return"translate("+s(w?t.y0:0)+","+(w?0:n*d.rangeBand()/f.length+d(g(t,e)))+")"}));G.append("rect").attr("width",0).attr("height",d.rangeBand()/(w?1:f.length)),N.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),L.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),L.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mouseout",(function(t,e){L.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})})).on("mousemove",(function(t,e){L.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})})).on("click",(function(t,e){L.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this}),d3.event.stopPropagation()})).on("dblclick",(function(t,e){L.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()})),m(f[0],0)&&(G.append("polyline"),N.select("polyline").attr("fill","none").attr("points",(function(t,e){var n=m(t,e),r=.8*d.rangeBand()/(2*(w?1:f.length));return[[(n=(n=n.length?n:[-Math.abs(n),Math.abs(n)]).map((function(n){return p(n+(v(t,e)<0?0:v(t,e)))-p(0)})))[0],-r],[n[0],r],[n[0],0],[n[1],0],[n[1],-r],[n[1],r]].map((function(t){return t.join(",")})).join(" ")})).attr("transform",(function(t,e){return"translate(0, "+d.rangeBand()/(2*(w?1:f.length))+")"}))),G.append("text"),_&&!w?(N.select("text").attr("text-anchor",(function(t,e){return v(t,e)<0?"end":"start"})).attr("y",d.rangeBand()/(2*f.length)).attr("dy",".32em").text((function(t,e){var n=S(v(t,e)),r=m(t,e);return void 0===r?n:r.length?n+"+"+S(Math.abs(r[1]))+"-"+S(Math.abs(r[0])):n+"±"+S(Math.abs(r))})),N.watchTransition(E,"multibarhorizontal: bars").select("text").attr("x",(function(t,e){return v(t,e)<0?-4:p(v(t,e))-p(0)+4}))):N.selectAll("text").text(""),N.selectAll("text.nv-bar-label").text(""),N.attr("class",(function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"})),x&&(e||(e=f.map((function(){return!0}))),N.style("fill",(function(t,n,r){return d3.rgb(x(t,n)).darker(e.map((function(t,e){return e})).filter((function(t,n){return!e[n]}))[r]).toString()})).style("stroke",(function(t,n,r){return d3.rgb(x(t,n)).darker(e.map((function(t,e){return e})).filter((function(t,n){return!e[n]}))[r]).toString()}))),w?N.watchTransition(E,"multibarhorizontal: bars").attr("transform",(function(t,e){return"translate("+p(t.y1)+","+d(g(t,e))+")"})).select("rect").attr("width",(function(t,e){return Math.abs(p(v(t,e)+t.y0)-p(t.y0))||0})).attr("height",d.rangeBand()):N.watchTransition(E,"multibarhorizontal: bars").attr("transform",(function(t,e){return"translate("+(v(t,e)<0?p(v(t,e)):p(0))+","+(t.series*d.rangeBand()/f.length+d(g(t,e)))+")"})).select("rect").attr("height",d.rangeBand()/f.length).attr("width",(function(t,e){return Math.max(Math.abs(p(v(t,e))-p(0)),1)||0})),a=d.copy(),s=p.copy()})),E.renderEnd("multibarHorizontal immediate"),P}return P.dispatch=L,P.options=t.utils.optionsFunc.bind(P),P._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return v},set:function(t){v=t}},yErr:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return w},set:function(t){w=t}},showValues:{get:function(){return _},set:function(t){_=t}},disabled:{get:function(){return e},set:function(t){e=t}},id:{get:function(){return f},set:function(t){f=t}},valueFormat:{get:function(){return S},set:function(t){S=t}},valuePadding:{get:function(){return k},set:function(t){k=t}},groupSpacing:{get:function(){return M},set:function(t){M=t}},fillOpacity:{get:function(){return C},set:function(t){C=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return A},set:function(t){A=t,E.reset(A)}},color:{get:function(){return b},set:function(e){b=t.utils.getColor(e)}},barColor:{get:function(){return x},set:function(e){x=e?t.utils.getColor(e):null}}}),t.utils.initOptions(P),P},t.models.multiBarHorizontalChart=function(){"use strict";var e,n,r=t.models.multiBarHorizontal(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend().height(30),s=t.models.legend().height(30),l=t.models.tooltip(),u={top:30,right:20,bottom:50,left:60},c=null,f=null,h=null,d=t.utils.defaultColor(),p=!0,g="top",v={},m=!0,y="top",b=!0,x=!0,w=!1,_=t.utils.state(),k=null,M=null,C=d3.dispatch("stateChange","changeState","renderEnd"),S=function(){return p?180:0},A=250;_.stacked=!1,r.stacked(w),i.orient("left").tickPadding(5).showMaxMin(!1).tickFormat((function(t){return t})),o.orient("bottom").tickFormat(d3.format(",.1f")),l.duration(0).valueFormatter((function(t,e){return o.tickFormat()(t,e)})).headerFormatter((function(t,e){return i.tickFormat()(t,e)})),s.updateState(!1);var L=t.utils.renderWatch(C,A);function E(l){return L.reset(),L.models(r),b&&L.models(i),x&&L.models(o),l.each((function(l){var M=d3.select(this);t.utils.initSVG(M);var L,P=t.utils.availableWidth(f,M,u),T=t.utils.availableHeight(h,M,u);if(E.update=function(){M.transition().duration(A).call(E)},E.container=this,w=r.stacked(),_.setter(function(t){return function(e){void 0!==e.stacked&&(w=e.stacked),void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(l),E.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled})),stacked:w}}}(l)).update(),_.disabled=l.map((function(t){return!!t.disabled})),!k)for(L in k={},_)_[L]instanceof Array?k[L]=_[L].slice(0):k[L]=_[L];if(!(l&&l.length&&l.filter((function(t){return t.values.length})).length))return t.utils.noData(E,M),E;M.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale().clamp(!0);var O=M.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([l]),D=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),I=O.select("g");if(D.append("g").attr("class","nv-x nv-axis"),D.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),D.append("g").attr("class","nv-barsWrap"),D.append("g").attr("class","nv-legendWrap"),D.append("g").attr("class","nv-controlsWrap"),m?(a.width(P-S()),I.select(".nv-legendWrap").datum(l).call(a),"bottom"===y?(u.bottom=i.height()+a.height(),T=t.utils.availableHeight(h,M,u),I.select(".nv-legendWrap").attr("transform","translate("+S()+","+(T+i.height())+")")):"top"===y&&(c||a.height()===u.top||(u.top=a.height(),T=t.utils.availableHeight(h,M,u)),I.select(".nv-legendWrap").attr("transform","translate("+S()+","+-u.top+")"))):I.select(".nv-legendWrap").selectAll("*").remove(),p){var F=[{key:v.grouped||"Grouped",disabled:r.stacked()},{key:v.stacked||"Stacked",disabled:!r.stacked()}];s.width(S()).color(["#444","#444","#444"]),"bottom"===g?(u.bottom=i.height()+a.height(),T=t.utils.availableHeight(h,M,u),I.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+(T+i.height())+")").call(s)):"top"===g&&I.select(".nv-controlsWrap").datum(F).attr("transform","translate(0,"+-u.top+")").call(s)}else I.select(".nv-controlsWrap").selectAll("*").remove();(O.attr("transform","translate("+u.left+","+u.top+")"),r.disabled(l.map((function(t){return t.disabled}))).width(P).height(T).color(l.map((function(t,e){return t.color||d(t,e)})).filter((function(t,e){return!l[e].disabled}))),I.select(".nv-barsWrap").datum(l.filter((function(t){return!t.disabled}))).transition().call(r),b)&&(i.scale(e)._ticks(t.utils.calcTicksY(T/24,l)).tickSize(-P,0),I.select(".nv-x.nv-axis").call(i),I.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text"));x&&(o.scale(n)._ticks(t.utils.calcTicksX(P/100,l)).tickSize(-T,0),I.select(".nv-y.nv-axis").attr("transform","translate(0,"+T+")"),I.select(".nv-y.nv-axis").call(o)),I.select(".nv-zeroLine line").attr("x1",n(0)).attr("x2",n(0)).attr("y1",0).attr("y2",-T),a.dispatch.on("stateChange",(function(t){for(var e in t)_[e]=t[e];C.stateChange(_),E.update()})),s.dispatch.on("legendClick",(function(t,e){if(t.disabled){switch(F=F.map((function(t){return t.disabled=!0,t})),t.disabled=!1,t.key){case"Grouped":case v.grouped:r.stacked(!1);break;case"Stacked":case v.stacked:r.stacked(!0)}_.stacked=r.stacked(),C.stateChange(_),w=r.stacked(),E.update()}})),C.on("changeState",(function(t){void 0!==t.disabled&&(l.forEach((function(e,n){e.disabled=t.disabled[n]})),_.disabled=t.disabled),void 0!==t.stacked&&(r.stacked(t.stacked),_.stacked=t.stacked,w=t.stacked),E.update()}))})),L.renderEnd("multibar horizontal chart immediate"),E}return r.dispatch.on("elementMouseover.tooltip",(function(t){t.value=E.x()(t.data),t.series={key:t.data.key,value:E.y()(t.data),color:t.color},l.data(t).hidden(!1)})),r.dispatch.on("elementMouseout.tooltip",(function(t){l.hidden(!0)})),r.dispatch.on("elementMousemove.tooltip",(function(t){l()})),E.dispatch=C,E.multibar=r,E.legend=a,E.controls=s,E.xAxis=i,E.yAxis=o,E.state=_,E.tooltip=l,E.options=t.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return m},set:function(t){m=t}},legendPosition:{get:function(){return y},set:function(t){y=t}},controlsPosition:{get:function(){return g},set:function(t){g=t}},showControls:{get:function(){return p},set:function(t){p=t}},controlLabels:{get:function(){return v},set:function(t){v=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return u},set:function(t){void 0!==t.top&&(u.top=t.top,c=t.top),u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return A},set:function(t){A=t,L.reset(A),r.duration(A),i.duration(A),o.duration(A)}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),a.color(d)}},barColor:{get:function(){return r.barColor},set:function(t){r.barColor(t),a.color((function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()}))}}}),t.utils.inheritOptions(E,r),t.utils.initOptions(E),E},t.models.multiChart=function(){"use strict";var e,n,r={top:30,right:20,bottom:50,left:60},i=null,o=t.utils.defaultColor(),a=null,s=null,l=!0,u=null,c=function(t){return t.x},f=function(t){return t.y},h="linear",d=!0,p=t.interactiveGuideline(),g=!1,v=" (right axis)",m=250,y=d3.scale.linear(),b=d3.scale.linear(),x=d3.scale.linear(),w=t.models.line().yScale(b).duration(m),_=t.models.line().yScale(x).duration(m),k=t.models.scatter().yScale(b).duration(m),M=t.models.scatter().yScale(x).duration(m),C=t.models.multiBar().stacked(!1).yScale(b).duration(m),S=t.models.multiBar().stacked(!1).yScale(x).duration(m),A=t.models.stackedArea().yScale(b).duration(m),L=t.models.stackedArea().yScale(x).duration(m),E=t.models.axis().scale(y).orient("bottom").tickPadding(5).duration(m),P=t.models.axis().scale(b).orient("left").duration(m),T=t.models.axis().scale(x).orient("right").duration(m),O=t.models.legend().height(30),D=t.models.tooltip(),I=d3.dispatch(),F=[w,_,k,M,C,S,A,L];function N(u){return u.each((function(u){var d=d3.select(this);t.utils.initSVG(d),N.update=function(){d.transition().call(N)},N.container=this;var m=t.utils.availableWidth(a,d,r),I=t.utils.availableHeight(s,d,r),G=u.filter((function(t){return"line"==t.type&&1==t.yAxis})),W=u.filter((function(t){return"line"==t.type&&2==t.yAxis})),B=u.filter((function(t){return"scatter"==t.type&&1==t.yAxis})),j=u.filter((function(t){return"scatter"==t.type&&2==t.yAxis})),z=u.filter((function(t){return"bar"==t.type&&1==t.yAxis})),R=u.filter((function(t){return"bar"==t.type&&2==t.yAxis})),H=u.filter((function(t){return"area"==t.type&&1==t.yAxis})),V=u.filter((function(t){return"area"==t.type&&2==t.yAxis}));if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return t.utils.noData(N,d),N;d.selectAll(".nv-noData").remove();var $=u.filter((function(t){return!t.disabled&&1==t.yAxis})).map((function(t){return t.values.map((function(t,e){return{x:c(t),y:f(t)}}))})),U=u.filter((function(t){return!t.disabled&&2==t.yAxis})).map((function(t){return t.values.map((function(t,e){return{x:c(t),y:f(t)}}))}));y.domain(d3.extent(d3.merge($.concat(U)),(function(t){return t.x}))).range([0,m]);var q=d.selectAll("g.wrap.multiChart").data([u]),K=q.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");K.append("g").attr("class","nv-x nv-axis"),K.append("g").attr("class","nv-y1 nv-axis"),K.append("g").attr("class","nv-y2 nv-axis"),K.append("g").attr("class","stack1Wrap"),K.append("g").attr("class","stack2Wrap"),K.append("g").attr("class","bars1Wrap"),K.append("g").attr("class","bars2Wrap"),K.append("g").attr("class","scatters1Wrap"),K.append("g").attr("class","scatters2Wrap"),K.append("g").attr("class","lines1Wrap"),K.append("g").attr("class","lines2Wrap"),K.append("g").attr("class","legendWrap"),K.append("g").attr("class","nv-interactive");var Y=q.select("g"),X=u.map((function(t,e){return u[e].color||o(t,e)}));if(l){var Z=O.align()?m/2:m,Q=O.align()?Z:0;O.width(Z),O.color(X),Y.select(".legendWrap").datum(u.map((function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":v),t}))).call(O),i||O.height()===r.top||(r.top=O.height(),I=t.utils.availableHeight(s,d,r)),Y.select(".legendWrap").attr("transform","translate("+Q+","+-r.top+")")}else Y.select(".legendWrap").selectAll("*").remove();w.width(m).height(I).interpolate(h).color(X.filter((function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"line"==u[e].type}))),_.width(m).height(I).interpolate(h).color(X.filter((function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"line"==u[e].type}))),k.width(m).height(I).color(X.filter((function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"scatter"==u[e].type}))),M.width(m).height(I).color(X.filter((function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"scatter"==u[e].type}))),C.width(m).height(I).color(X.filter((function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"bar"==u[e].type}))),S.width(m).height(I).color(X.filter((function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"bar"==u[e].type}))),A.width(m).height(I).interpolate(h).color(X.filter((function(t,e){return!u[e].disabled&&1==u[e].yAxis&&"area"==u[e].type}))),L.width(m).height(I).interpolate(h).color(X.filter((function(t,e){return!u[e].disabled&&2==u[e].yAxis&&"area"==u[e].type}))),Y.attr("transform","translate("+r.left+","+r.top+")");var J=Y.select(".lines1Wrap").datum(G.filter((function(t){return!t.disabled}))),tt=Y.select(".scatters1Wrap").datum(B.filter((function(t){return!t.disabled}))),et=Y.select(".bars1Wrap").datum(z.filter((function(t){return!t.disabled}))),nt=Y.select(".stack1Wrap").datum(H.filter((function(t){return!t.disabled}))),rt=Y.select(".lines2Wrap").datum(W.filter((function(t){return!t.disabled}))),it=Y.select(".scatters2Wrap").datum(j.filter((function(t){return!t.disabled}))),ot=Y.select(".bars2Wrap").datum(R.filter((function(t){return!t.disabled}))),at=Y.select(".stack2Wrap").datum(V.filter((function(t){return!t.disabled}))),st=[];C.stacked()&&z.length&&((st=z.filter((function(t){return!t.disabled})).map((function(t){return t.values}))).length>0&&(st=st.reduce((function(t,e){return t.map((function(t,n){return{x:t.x,y:t.y+e[n].y}}))}))));z.length&&st.push({x:0,y:0});var lt=[];S.stacked()&&R.length&&((lt=R.filter((function(t){return!t.disabled})).map((function(t){return t.values}))).length>0&&(lt=lt.reduce((function(t,e){return t.map((function(t,n){return{x:t.x,y:t.y+e[n].y}}))}))));function ut(t){var e=2===t.series.yAxis?T:P;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},D.duration(0).headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function ct(t){var e=2===t.series.yAxis?T:P;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},D.duration(100).headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function ft(t){var e=2===t.series.yAxis?T:P;t.point.x=A.x()(t.point),t.point.y=A.y()(t.point),D.duration(0).headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function ht(t){var e=2===t.series.yAxis?T:P;t.value=C.x()(t.data),t.series={value:C.y()(t.data),color:t.color,key:t.data.key},D.duration(0).headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter((function(t,n){return e.tickFormat()(t,n)})).data(t).hidden(!1)}function dt(){for(var t=0,e=F.length;t<e;t++){var n=F[t];try{n.clearHighlights()}catch(t){}}}R.length&&lt.push({x:0,y:0}),b.domain(e||d3.extent(d3.merge($).concat(st),(function(t){return t.y}))).range([0,I]),x.domain(n||d3.extent(d3.merge(U).concat(lt),(function(t){return t.y}))).range([0,I]),w.yDomain(b.domain()),k.yDomain(b.domain()),C.yDomain(b.domain()),A.yDomain(b.domain()),_.yDomain(x.domain()),M.yDomain(x.domain()),S.yDomain(x.domain()),L.yDomain(x.domain()),H.length&&d3.transition(nt).call(A),V.length&&d3.transition(at).call(L),z.length&&d3.transition(et).call(C),R.length&&d3.transition(ot).call(S),G.length&&d3.transition(J).call(w),W.length&&d3.transition(rt).call(_),B.length&&d3.transition(tt).call(k),j.length&&d3.transition(it).call(M),E._ticks(t.utils.calcTicksX(m/100,u)).tickSize(-I,0),Y.select(".nv-x.nv-axis").attr("transform","translate(0,"+I+")"),d3.transition(Y.select(".nv-x.nv-axis")).call(E),P._ticks(t.utils.calcTicksY(I/36,u)).tickSize(-m,0),d3.transition(Y.select(".nv-y1.nv-axis")).call(P),T._ticks(t.utils.calcTicksY(I/36,u)).tickSize(-m,0),d3.transition(Y.select(".nv-y2.nv-axis")).call(T),Y.select(".nv-y1.nv-axis").classed("nv-disabled",!$.length).attr("transform","translate("+y.range()[0]+",0)"),Y.select(".nv-y2.nv-axis").classed("nv-disabled",!U.length).attr("transform","translate("+y.range()[1]+",0)"),O.dispatch.on("stateChange",(function(t){N.update()})),g&&(p.width(m).height(I).margin({left:r.left,top:r.top}).svgContainer(d).xScale(y),q.select(".nv-interactive").call(p)),g?(p.dispatch.on("elementMousemove",(function(e){dt();var n,r,i,a=[];u.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(s,l){var u=y.domain(),c=s.values.filter((function(t,e){return N.x()(t,e)>=u[0]&&N.x()(t,e)<=u[1]})),f=c[r=t.interactiveBisect(c,e.pointXValue,N.x())],h=N.y()(f,r);null!==h&&function(t,e,n){for(var r=0,i=F.length;r<i;r++){var o=F[r];try{o.highlightPoint(t,e,n)}catch(t){}}}(l,r,!0),void 0!==f&&(void 0===n&&(n=f),void 0===i&&(i=y(N.x()(f,r))),a.push({key:s.key,value:h,color:o(s,s.seriesIndex),data:f,yAxis:2==s.yAxis?T:P}))}));p.tooltip.headerFormatter((function(t,e){return E.tickFormat()(t,e)})).valueFormatter(p.tooltip.valueFormatter()||function(t,e){var n=a[e].yAxis;return null==t?"N/A":n.tickFormat()(t)}).data({value:N.x()(n,r),index:r,series:a})(),p.renderGuideLine(i)})),p.dispatch.on("elementMouseout",(function(t){dt()}))):(w.dispatch.on("elementMouseover.tooltip",ut),_.dispatch.on("elementMouseover.tooltip",ut),w.dispatch.on("elementMouseout.tooltip",(function(t){D.hidden(!0)})),_.dispatch.on("elementMouseout.tooltip",(function(t){D.hidden(!0)})),k.dispatch.on("elementMouseover.tooltip",ct),M.dispatch.on("elementMouseover.tooltip",ct),k.dispatch.on("elementMouseout.tooltip",(function(t){D.hidden(!0)})),M.dispatch.on("elementMouseout.tooltip",(function(t){D.hidden(!0)})),A.dispatch.on("elementMouseover.tooltip",ft),L.dispatch.on("elementMouseover.tooltip",ft),A.dispatch.on("elementMouseout.tooltip",(function(t){D.hidden(!0)})),L.dispatch.on("elementMouseout.tooltip",(function(t){D.hidden(!0)})),C.dispatch.on("elementMouseover.tooltip",ht),S.dispatch.on("elementMouseover.tooltip",ht),C.dispatch.on("elementMouseout.tooltip",(function(t){D.hidden(!0)})),S.dispatch.on("elementMouseout.tooltip",(function(t){D.hidden(!0)})),C.dispatch.on("elementMousemove.tooltip",(function(t){D()})),S.dispatch.on("elementMousemove.tooltip",(function(t){D()})))})),N}return N.dispatch=I,N.legend=O,N.lines1=w,N.lines2=_,N.scatters1=k,N.scatters2=M,N.bars1=C,N.bars2=S,N.stack1=A,N.stack2=L,N.xAxis=E,N.yAxis1=P,N.yAxis2=T,N.tooltip=D,N.interactiveLayer=p,N.options=t.utils.optionsFunc.bind(N),N._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},showLegend:{get:function(){return l},set:function(t){l=t}},yDomain1:{get:function(){return e},set:function(t){e=t}},yDomain2:{get:function(){return n},set:function(t){n=t}},noData:{get:function(){return u},set:function(t){u=t}},interpolate:{get:function(){return h},set:function(t){h=t}},legendRightAxisHint:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return r},set:function(t){void 0!==t.top&&(r.top=t.top,i=t.top),r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return o},set:function(e){o=t.utils.getColor(e)}},x:{get:function(){return c},set:function(t){c=t,w.x(t),_.x(t),k.x(t),M.x(t),C.x(t),S.x(t),A.x(t),L.x(t)}},y:{get:function(){return f},set:function(t){f=t,w.y(t),_.y(t),k.y(t),M.y(t),A.y(t),L.y(t),C.y(t),S.y(t)}},useVoronoi:{get:function(){return d},set:function(t){d=t,w.useVoronoi(t),_.useVoronoi(t),A.useVoronoi(t),L.useVoronoi(t)}},useInteractiveGuideline:{get:function(){return g},set:function(t){(g=t)&&(w.interactive(!1),w.useVoronoi(!1),_.interactive(!1),_.useVoronoi(!1),A.interactive(!1),A.useVoronoi(!1),L.interactive(!1),L.useVoronoi(!1),k.interactive(!1),M.interactive(!1))}},duration:{get:function(){return m},set:function(t){m=t,[w,_,A,L,k,M,E,P,T].forEach((function(t){t.duration(m)}))}}}),t.utils.initOptions(N),N},t.models.ohlcBar=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=null,s=null,l=Math.floor(1e4*Math.random()),u=null,c=d3.scale.linear(),f=d3.scale.linear(),h=function(t){return t.x},d=function(t){return t.y},p=function(t){return t.open},g=function(t){return t.close},v=function(t){return t.high},m=function(t){return t.low},y=[],b=[],x=!1,w=!0,_=t.utils.defaultColor(),k=!1,M=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");function C(k){return k.each((function(k){u=d3.select(this);var C=t.utils.availableWidth(a,u,o),S=t.utils.availableHeight(s,u,o);t.utils.initSVG(u);var A=C/k[0].values.length*.9;c.domain(e||d3.extent(k[0].values.map(h).concat(y))),x?c.range(r||[.5*C/k[0].values.length,C*(k[0].values.length-.5)/k[0].values.length]):c.range(r||[5+A/2,C-A/2-5]),f.domain(n||[d3.min(k[0].values.map(m).concat(b)),d3.max(k[0].values.map(v).concat(b))]).range(i||[S,0]),c.domain()[0]===c.domain()[1]&&(c.domain()[0]?c.domain([c.domain()[0]-.01*c.domain()[0],c.domain()[1]+.01*c.domain()[1]]):c.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var L=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([k[0].values]),E=L.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),P=E.append("defs"),T=E.append("g"),O=L.select("g");T.append("g").attr("class","nv-ticks"),L.attr("transform","translate("+o.left+","+o.top+")"),u.on("click",(function(t,e){M.chartClick({data:t,index:e,pos:d3.event,id:l})})),P.append("clipPath").attr("id","nv-chart-clip-path-"+l).append("rect"),L.select("#nv-chart-clip-path-"+l+" rect").attr("width",C).attr("height",S),O.attr("clip-path",w?"url(#nv-chart-clip-path-"+l+")":"");var D=L.select(".nv-ticks").selectAll(".nv-tick").data((function(t){return t}));D.exit().remove(),D.enter().append("path").attr("class",(function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e})).attr("d",(function(t,e){return"m0,0l0,"+(f(p(t,e))-f(v(t,e)))+"l"+-A/2+",0l"+A/2+",0l0,"+(f(m(t,e))-f(p(t,e)))+"l0,"+(f(g(t,e))-f(m(t,e)))+"l"+A/2+",0l"+-A/2+",0z"})).attr("transform",(function(t,e){return"translate("+c(h(t,e))+","+f(v(t,e))+")"})).attr("fill",(function(t,e){return _[0]})).attr("stroke",(function(t,e){return _[0]})).attr("x",0).attr("y",(function(t,e){return f(Math.max(0,d(t,e)))})).attr("height",(function(t,e){return Math.abs(f(d(t,e))-f(0))})),D.attr("class",(function(t,e,n){return(p(t,e)>g(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e})),d3.transition(D).attr("transform",(function(t,e){return"translate("+c(h(t,e))+","+f(v(t,e))+")"})).attr("d",(function(t,e){var n=C/k[0].values.length*.9;return"m0,0l0,"+(f(p(t,e))-f(v(t,e)))+"l"+-n/2+",0l"+n/2+",0l0,"+(f(m(t,e))-f(p(t,e)))+"l0,"+(f(g(t,e))-f(m(t,e)))+"l"+n/2+",0l"+-n/2+",0z"}))})),C}return C.highlightPoint=function(t,e){C.clearHighlights(),u.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",e)},C.clearHighlights=function(){u.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},C.dispatch=M,C.options=t.utils.optionsFunc.bind(C),C._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},forceX:{get:function(){return y},set:function(t){y=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return x},set:function(t){x=t}},clipEdge:{get:function(){return w},set:function(t){w=t}},id:{get:function(){return l},set:function(t){l=t}},interactive:{get:function(){return k},set:function(t){k=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return d},set:function(t){d=t}},open:{get:function(){return p()},set:function(t){p=t}},close:{get:function(){return g()},set:function(t){g=t}},high:{get:function(){return v},set:function(t){v=t}},low:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return o},set:function(t){o.top=null!=t.top?t.top:o.top,o.right=null!=t.right?t.right:o.right,o.bottom=null!=t.bottom?t.bottom:o.bottom,o.left=null!=t.left?t.left:o.left}},color:{get:function(){return _},set:function(e){_=t.utils.getColor(e)}}}),t.utils.initOptions(C),C},t.models.parallelCoordinates=function(){"use strict";var e,n,r,i={top:30,right:0,bottom:10,left:0},o=null,a=null,s=null,l=null,u=d3.scale.ordinal(),c={},f="undefined values",h=[],d=[],p=[],g=!0,v=t.utils.defaultColor(),m=[],y=[],b=[],x=[],w=1,_=d3.svg.line(),k=d3.svg.axis(),M=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),C=t.utils.renderWatch(M);function S(A){return C.reset(),A.each((function(C){var S=d3.select(this);if(s=t.utils.availableWidth(o,S,i),l=t.utils.availableHeight(a,S,i),t.utils.initSVG(S),void 0===C[0].values){var A=[];C.forEach((function(t){var e={};Object.keys(t).forEach((function(n){"name"!==n&&(e[n]=t[n])})),A.push({key:t.name,values:e})})),C=A}var L=C.map((function(t){return t.values}));0===y.length&&(y=C),p=h.sort((function(t,e){return t.currentPosition-e.currentPosition})).map((function(t){return t.key})),d=h.filter((function(t){return!t.disabled})),u.rangePoints([0,s],1).domain(d.map((function(t){return t.key})));var E={},P=!1,T=[];p.forEach((function(t){var e=d3.extent(L,(function(e){return+e[t]})),n=e[0],r=e[1],i=!1;(isNaN(n)||isNaN(r))&&(i=!0,n=0,r=0),n===r&&(n-=1,r+=1);var o=m.filter((function(e){return e.dimension==t}));0!==o.length&&(i?(n=c[t].domain()[0],r=c[t].domain()[1]):!o[0].hasOnlyNaN&&g?(n=n>o[0].extent[0]?o[0].extent[0]:n,r=r<o[0].extent[1]?o[0].extent[1]:r):o[0].hasNaN&&(r=r<o[0].extent[1]?o[0].extent[1]:r,E[t]=c[t].domain()[1],P=!0)),c[t]=d3.scale.linear().domain([n,r]).range([.9*(l-12),0]),x=[],c[t].brush=d3.svg.brush().y(c[t]).on("brushstart",U).on("brush",q).on("brushend",K)}));var O=S.selectAll("g.nv-wrap.nv-parallelCoordinates").data([C]),D=O.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),I=O.select("g");D.append("g").attr("class","nv-parallelCoordinates background"),D.append("g").attr("class","nv-parallelCoordinates foreground"),D.append("g").attr("class","nv-parallelCoordinates missingValuesline"),O.attr("transform","translate("+i.left+","+i.top+")"),_.interpolate("cardinal").tension(w),k.orient("left");var F,N,G=d3.behavior.drag().on("dragstart",(function(t){b[t.key]=this.parentNode.__origin__=u(t.key),n.attr("visibility","hidden")})).on("drag",(function(t){b[t.key]=Math.min(s,Math.max(0,this.parentNode.__origin__+=d3.event.x)),e.attr("d",V),d.sort((function(t,e){return X(t.key)-X(e.key)})),d.forEach((function(t,e){return t.currentPosition=e})),u.domain(d.map((function(t){return t.key}))),r.attr("transform",(function(t){return"translate("+X(t.key)+")"}))})).on("dragend",(function(t,r){delete this.parentNode.__origin__,delete b[t.key],d3.select(this.parentNode).attr("transform","translate("+u(t.key)+")"),e.attr("d",V),n.attr("d",V).attr("visibility",null),M.dimensionsOrder(d)})),W=u.range()[1]-u.range()[0];if(W=isNaN(W)?u.range()[0]:W,!isNaN(W)){var B=[0+W/2,l-12,s-W/2,l-12];(F=O.select(".missingValuesline").selectAll("line").data([B])).enter().append("line"),F.exit().remove(),F.attr("x1",(function(t){return t[0]})).attr("y1",(function(t){return t[1]})).attr("x2",(function(t){return t[2]})).attr("y2",(function(t){return t[3]})),(N=O.select(".missingValuesline").selectAll("text").data([f])).append("text").data([f]),N.enter().append("text"),N.exit().remove(),N.attr("y",l).attr("x",s-92-W/2).text((function(t){return t}))}(n=O.select(".background").selectAll("path").data(C)).enter().append("path"),n.exit().remove(),n.attr("d",V),(e=O.select(".foreground").selectAll("path").data(C)).enter().append("path"),e.exit().remove(),e.attr("d",V).style("stroke-width",(function(t,e){return isNaN(t.strokeWidth)&&(t.strokeWidth=1),t.strokeWidth})).attr("stroke",(function(t,e){return t.color||v(t,e)})),e.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0).style("stroke-width",t.strokeWidth+2+"px").style("stroke-opacity",1),M.elementMouseover({label:t.name,color:t.color||v(t,e),values:t.values,dimensions:d})})),e.on("mouseout",(function(t,e){d3.select(this).classed("hover",!1).style("stroke-width",t.strokeWidth+"px").style("stroke-opacity",.7),M.elementMouseout({label:t.name,index:e})})),e.on("mousemove",(function(t,e){M.elementMousemove()})),e.on("click",(function(t){M.elementClick({id:t.id})}));var j=(r=I.selectAll(".dimension").data(d)).enter().append("g").attr("class","nv-parallelCoordinates dimension");r.attr("transform",(function(t){return"translate("+u(t.key)+",0)"})),j.append("g").attr("class","nv-axis"),j.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",(function(t,e){M.elementMouseover({label:t.tooltip||t.key,color:t.color})})).on("mouseout",(function(t,e){M.elementMouseout({label:t.tooltip})})).on("mousemove",(function(t,e){M.elementMousemove()})).call(G),j.append("g").attr("class","nv-brushBackground"),r.exit().remove(),r.select(".nv-label").text((function(t){return t.key})),$(g);var z=p.filter((function(t){return!c[t].brush.empty()})),R=z.map((function(t){return c[t].brush.extent()})),H=y.slice(0);function V(t){return _(d.map((function(e){if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key]))||P){var n=c[e.key].domain(),r=c[e.key].range(),i=n[0]-(n[1]-n[0])/9;if(x.indexOf(e.key)<0){var o=d3.scale.linear().domain([i,n[1]]).range([l-12,r[1]]);c[e.key].brush.y(o),x.push(e.key)}if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key])))return[u(e.key),c[e.key](i)]}return void 0!==F&&(x.length>0||P?(F.style("display","inline"),N.style("display","inline")):(F.style("display","none"),N.style("display","none"))),[u(e.key),c[e.key](t.values[e.key])]})))}function $(t){m.forEach((function(e){var n=c[e.dimension].brush.y().domain();e.hasOnlyNaN&&(e.extent[1]=(c[e.dimension].domain()[1]-n[0])*(e.extent[1]-e.extent[0])/(E[e.dimension]-e.extent[0])+n[0]),e.hasNaN&&(e.extent[0]=n[0]),t&&c[e.dimension].brush.extent(e.extent)})),r.select(".nv-brushBackground").each((function(t){d3.select(this).call(c[t.key].brush)})).selectAll("rect").attr("x",-8).attr("width",16),Y()}function U(){!1===g&&(g=!0,$(!0))}function q(){z=p.filter((function(t){return!c[t].brush.empty()})),R=z.map((function(t){return c[t].brush.extent()})),m=[],z.forEach((function(t,e){m[e]={dimension:t,extent:R[e],hasNaN:!1,hasOnlyNaN:!1}})),y=[],e.style("display",(function(t){var e=z.every((function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||R[n][0]!=c[e].brush.y().domain()[0])||R[n][0]<=t.values[e]&&t.values[e]<=R[n][1]&&!isNaN(parseFloat(t.values[e]))}));return e&&y.push(t),e?null:"none"})),Y(),M.brush({filters:m,active:y})}function K(){var t=z.length>0;m.forEach((function(t){t.extent[0]===c[t.dimension].brush.y().domain()[0]&&x.indexOf(t.dimension)>=0&&(t.hasNaN=!0),t.extent[1]<c[t.dimension].domain()[0]&&(t.hasOnlyNaN=!0)})),M.brushEnd(y,t)}function Y(){r.select(".nv-axis").each((function(t,e){var n=m.filter((function(e){return e.dimension==t.key}));T[t.key]=c[t.key].domain(),0!=n.length&&g&&(T[t.key]=[],n[0].extent[1]>c[t.key].domain()[0]&&(T[t.key]=[n[0].extent[1]]),n[0].extent[0]>=c[t.key].domain()[0]&&T[t.key].push(n[0].extent[0])),d3.select(this).call(k.scale(c[t.key]).tickFormat(t.format).tickValues(T[t.key]))}))}function X(t){var e=b[t];return null==e?u(t):e}y=[],e.style("display",(function(t){var e=z.every((function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||R[n][0]!=c[e].brush.y().domain()[0])||R[n][0]<=t.values[e]&&t.values[e]<=R[n][1]&&!isNaN(parseFloat(t.values[e]))}));return e&&y.push(t),e?null:"none"})),(m.length>0||!t.utils.arrayEquals(y,H))&&M.activeChanged(y)})),S}return S.dispatch=M,S.options=t.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},dimensionData:{get:function(){return h},set:function(t){h=t}},displayBrush:{get:function(){return g},set:function(t){g=t}},filters:{get:function(){return m},set:function(t){m=t}},active:{get:function(){return y},set:function(t){y=t}},lineTension:{get:function(){return w},set:function(t){w=t}},undefinedValuesLabel:{get:function(){return f},set:function(t){f=t}},dimensions:{get:function(){return h.map((function(t){return t.key}))},set:function(e){t.deprecated("dimensions","use dimensionData instead"),0===h.length?e.forEach((function(t){h.push({key:t})})):e.forEach((function(t,e){h[e].key=t}))}},dimensionNames:{get:function(){return h.map((function(t){return t.key}))},set:function(e){t.deprecated("dimensionNames","use dimensionData instead"),p=[],0===h.length?e.forEach((function(t){h.push({key:t})})):e.forEach((function(t,e){h[e].key=t}))}},dimensionFormats:{get:function(){return h.map((function(t){return t.format}))},set:function(e){t.deprecated("dimensionFormats","use dimensionData instead"),0===h.length?e.forEach((function(t){h.push({format:t})})):e.forEach((function(t,e){h[e].format=t}))}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return v},set:function(e){v=t.utils.getColor(e)}}}),t.utils.initOptions(S),S},t.models.parallelCoordinatesChart=function(){"use strict";var e=t.models.parallelCoordinates(),n=t.models.legend(),r=t.models.tooltip(),i=(t.models.tooltip(),{top:0,right:0,bottom:0,left:0}),o=null,a=null,s=null,l=!0,u=t.utils.defaultColor(),c=t.utils.state(),f=[],h=!0,d=null,p=null,g="undefined",v=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),m=t.utils.renderWatch(v);function y(r){return m.reset(),m.models(e),r.each((function(r){var u=d3.select(this);t.utils.initSVG(u);var p,g=t.utils.availableWidth(a,u,i),m=t.utils.availableHeight(s,u,i);if(y.update=function(){u.call(y)},y.container=this,c.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(f),y.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(f)).update(),c.disabled=f.map((function(t){return!!t.disabled})),(f=f.map((function(t){return t.disabled=!!t.disabled,t}))).forEach((function(t,e){t.originalPosition=isNaN(t.originalPosition)?e:t.originalPosition,t.currentPosition=isNaN(t.currentPosition)?e:t.currentPosition})),!d)for(p in d={},c)c[p]instanceof Array?d[p]=c[p].slice(0):d[p]=c[p];if(!r||!r.length)return t.utils.noData(y,u),y;u.selectAll(".nv-noData").remove();var b=u.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([r]),x=b.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),w=b.select("g");x.append("g").attr("class","nv-parallelCoordinatesWrap"),x.append("g").attr("class","nv-legendWrap"),w.select("rect").attr("width",g).attr("height",m>0?m:0),l?(n.width(g).color((function(t){return"rgb(188,190,192)"})),w.select(".nv-legendWrap").datum(f.sort((function(t,e){return t.originalPosition-e.originalPosition}))).call(n),o||n.height()===i.top||(i.top=n.height(),m=t.utils.availableHeight(s,u,i)),b.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-i.top+")")):w.select(".nv-legendWrap").selectAll("*").remove(),b.attr("transform","translate("+i.left+","+i.top+")"),e.width(g).height(m).dimensionData(f).displayBrush(h),w.select(".nv-parallelCoordinatesWrap ").datum(r).transition().call(e),e.dispatch.on("brushEnd",(function(t,e){e?(h=!0,v.brushEnd(t)):h=!1})),n.dispatch.on("stateChange",(function(t){for(var e in t)c[e]=t[e];v.stateChange(c),y.update()})),e.dispatch.on("dimensionsOrder",(function(t){f.sort((function(t,e){return t.currentPosition-e.currentPosition}));var e=!1;f.forEach((function(t,n){t.currentPosition=n,t.currentPosition!==t.originalPosition&&(e=!0)})),v.dimensionsOrder(f,e)})),v.on("changeState",(function(t){void 0!==t.disabled&&(f.forEach((function(e,n){e.disabled=t.disabled[n]})),c.disabled=t.disabled),y.update()}))})),m.renderEnd("parraleleCoordinateChart immediate"),y}return r.contentGenerator((function(t){var e='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td><strong>'+t.key+"</strong></td></tr></thead>";return 0!==t.series.length&&(e+='<tbody><tr><td height ="10px"></td></tr>',t.series.forEach((function(t){e=e+'<tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td class="key">'+t.key+'</td><td class="value">'+t.value+"</td></tr>"})),e+="</tbody>"),e+="</table>"})),e.dispatch.on("elementMouseover.tooltip",(function(t){var e={key:t.label,color:t.color,series:[]};t.values&&(Object.keys(t.values).forEach((function(n){var r,i=t.dimensions.filter((function(t){return t.key===n}))[0];i&&(r=isNaN(t.values[n])||isNaN(parseFloat(t.values[n]))?g:i.format(t.values[n]),e.series.push({idx:i.currentPosition,key:n,value:r,color:i.color}))})),e.series.sort((function(t,e){return t.idx-e.idx}))),r.data(e).hidden(!1)})),e.dispatch.on("elementMouseout.tooltip",(function(t){r.hidden(!0)})),e.dispatch.on("elementMousemove.tooltip",(function(){r()})),y.dispatch=v,y.parallelCoordinates=e,y.legend=n,y.tooltip=r,y.options=t.utils.optionsFunc.bind(y),y._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},showLegend:{get:function(){return l},set:function(t){l=t}},defaultState:{get:function(){return d},set:function(t){d=t}},dimensionData:{get:function(){return f},set:function(t){f=t}},displayBrush:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return p},set:function(t){p=t}},nanValue:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return i},set:function(t){void 0!==t.top&&(i.top=t.top,o=t.top),i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return u},set:function(r){u=t.utils.getColor(r),n.color(u),e.color(u)}}}),t.utils.inheritOptions(y,e),t.utils.initOptions(y),y},t.models.pie=function(){"use strict";var e={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(t){return t.x},o=function(t){return t.y},a=Math.floor(1e4*Math.random()),s=null,l=t.utils.defaultColor(),u=d3.format(",.2f"),c=!0,f=!1,h="key",d=.02,p=!1,g=!1,v=!1,m=!0,y=0,b=!1,x=!1,w=!1,_=!1,k=0,M=.5,C=250,S=[],A=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),L=[],E=[],P=t.utils.renderWatch(A);function T(O){return P.reset(),O.each((function(T){var O=n-e.left-e.right,D=r-e.top-e.bottom,I=Math.min(O,D)/2,F=[],N=[];if(s=d3.select(this),0===S.length)for(var G=I-I/10,W=M*I,B=0;B<T[0].length;B++)F.push(G),N.push(W);else m?(F=S.map((function(t){return(t.outer-t.outer/10)*I})),N=S.map((function(t){return(t.inner-t.inner/10)*I})),M=d3.min(S.map((function(t){return t.inner-t.inner/10})))):(F=S.map((function(t){return t.outer*I})),N=S.map((function(t){return t.inner*I})),M=d3.min(S.map((function(t){return t.inner}))));t.utils.initSVG(s);var j=s.selectAll(".nv-wrap.nv-pie").data(T),z=j.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+a).append("g"),R=j.select("g"),H=z.append("g").attr("class","nv-pie");z.append("g").attr("class","nv-pieLabels"),j.attr("transform","translate("+e.left+","+e.top+")"),R.select(".nv-pie").attr("transform","translate("+O/2+","+D/2+")"),R.select(".nv-pieLabels").attr("transform","translate("+O/2+","+D/2+")"),s.on("click",(function(t,e){A.chartClick({data:t,index:e,pos:d3.event,id:a})})),L=[],E=[];for(B=0;B<T[0].length;B++){var V=d3.svg.arc().outerRadius(F[B]),$=d3.svg.arc().outerRadius(F[B]+5);!1!==x&&(V.startAngle(x),$.startAngle(x)),!1!==_&&(V.endAngle(_),$.endAngle(_)),g&&(V.innerRadius(N[B]),$.innerRadius(N[B])),V.cornerRadius&&k&&(V.cornerRadius(k),$.cornerRadius(k)),L.push(V),E.push($)}var U=d3.layout.pie().sort(null).value((function(t){return t.disabled?0:o(t)}));U.padAngle&&w&&U.padAngle(w),g&&v&&(H.append("text").attr("class","nv-pie-title"),j.select(".nv-pie-title").style("text-anchor","middle").text((function(t){return v})).style("font-size",Math.min(O,D)*M*2/(v.length+2)+"px").attr("dy","0.35em").attr("transform",(function(t,e){return"translate(0, "+y+")"})));var q=j.select(".nv-pie").selectAll(".nv-slice").data(U),K=j.select(".nv-pieLabels").selectAll(".nv-label").data(U);q.exit().remove(),K.exit().remove();var Y=q.enter().append("g");Y.attr("class","nv-slice"),Y.on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),m&&d3.select(this).select("path").transition().duration(70).attr("d",E[e]),A.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill"),percent:(t.endAngle-t.startAngle)/(2*Math.PI)})})),Y.on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),m&&d3.select(this).select("path").transition().duration(50).attr("d",L[e]),A.elementMouseout({data:t.data,index:e})})),Y.on("mousemove",(function(t,e){A.elementMousemove({data:t.data,index:e})})),Y.on("click",(function(t,e){A.elementClick({data:t.data,index:e,color:d3.select(this).style("fill"),event:d3.event,element:this})})),Y.on("dblclick",(function(t,e){A.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})})),q.attr("fill",(function(t,e){return l(t.data,e)})),q.attr("stroke",(function(t,e){return l(t.data,e)}));Y.append("path").each((function(t){this._current=t}));if(q.select("path").transition().duration(C).attr("d",(function(t,e){return L[e](t)})).attrTween("d",(function(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,g||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return L[e](n(t))}})),c){var X=[];for(B=0;B<T[0].length;B++)X.push(L[B]),f?g&&(X[B]=d3.svg.arc().outerRadius(L[B].outerRadius()),!1!==x&&X[B].startAngle(x),!1!==_&&X[B].endAngle(_)):g||X[B].innerRadius(0);K.enter().append("g").classed("nv-label",!0).each((function(t,e){var n=d3.select(this);n.attr("transform",(function(t,e){if(b){t.outerRadius=F[e]+10,t.innerRadius=F[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+X[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=I+10,t.innerRadius=I+15,"translate("+X[e].centroid(t)+")"})),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")}));var Z={},Q=function(t){return 140*Math.floor(t[0]/140)+","+14*Math.floor(t[1]/14)},J=function(t){return(t.endAngle-t.startAngle)/(2*Math.PI)};K.watchTransition(P,"pie labels").attr("transform",(function(t,e){if(b){t.outerRadius=F[e]+10,t.innerRadius=F[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+X[e].centroid(t)+") rotate("+n+")"}t.outerRadius=I+10,t.innerRadius=I+15;var r=X[e].centroid(t),i=J(t);if(t.value&&i>=d){var o=Q(r);Z[o]&&(r[1]-=14),Z[Q(r)]=!0}return"translate("+r+")"})),K.select(".nv-label text").style("text-anchor",(function(t,e){return b?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"})).text((function(t,e){var n=J(t),r="";if(!t.value||n<d)return"";if("function"==typeof h)r=h(t,e,{key:i(t.data),value:o(t.data),percent:u(n)});else switch(h){case"key":r=i(t.data);break;case"value":r=u(o(t.data));break;case"percent":r=d3.format("%")(n)}return r})),p&&K.each((function(e,n){if(this.getBBox){var r=this.getBBox(),i=X[n].centroid(e),o={x:i[0]+r.x,y:i[1]+r.y},a={x:o.x+r.width,y:o.y},s={x:o.x,y:o.y+r.height},l={x:o.x+r.width,y:o.y+r.height};e.visible=t.utils.pointIsInArc(o,e,V)&&t.utils.pointIsInArc(a,e,V)&&t.utils.pointIsInArc(s,e,V)&&t.utils.pointIsInArc(l,e,V)}})).style("display",(function(t){return t.visible?null:"none"}))}})),P.renderEnd("pie immediate"),T}return T.dispatch=A,T.options=t.utils.optionsFunc.bind(T),T._options=Object.create({},{arcsRadius:{get:function(){return S},set:function(t){S=t}},width:{get:function(){return n},set:function(t){n=t}},height:{get:function(){return r},set:function(t){r=t}},showLabels:{get:function(){return c},set:function(t){c=t}},title:{get:function(){return v},set:function(t){v=t}},titleOffset:{get:function(){return y},set:function(t){y=t}},labelThreshold:{get:function(){return d},set:function(t){d=t}},hideOverlapLabels:{get:function(){return p},set:function(t){p=t}},valueFormat:{get:function(){return u},set:function(t){u=t}},x:{get:function(){return i},set:function(t){i=t}},id:{get:function(){return a},set:function(t){a=t}},endAngle:{get:function(){return _},set:function(t){_=t}},startAngle:{get:function(){return x},set:function(t){x=t}},padAngle:{get:function(){return w},set:function(t){w=t}},cornerRadius:{get:function(){return k},set:function(t){k=t}},donutRatio:{get:function(){return M},set:function(t){M=t}},labelsOutside:{get:function(){return f},set:function(t){f=t}},labelSunbeamLayout:{get:function(){return b},set:function(t){b=t}},donut:{get:function(){return g},set:function(t){g=t}},growOnHover:{get:function(){return m},set:function(t){m=t}},pieLabelsOutside:{get:function(){return f},set:function(e){f=e,t.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return f},set:function(e){f=e,t.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return u},set:function(e){u=e,t.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},duration:{get:function(){return C},set:function(t){C=t,P.reset(C)}},y:{get:function(){return o},set:function(t){o=d3.functor(t)}},color:{get:function(){return l},set:function(e){l=t.utils.getColor(e)}},labelType:{get:function(){return h},set:function(t){h=t||"key"}}}),t.utils.initOptions(T),T},t.models.pieChart=function(){"use strict";var e=t.models.pie(),n=t.models.legend(),r=t.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=null,a=null,s=null,l=!1,u=!0,c="top",f=t.utils.defaultColor(),h=t.utils.state(),d=null,p=null,g=250,v=d3.dispatch("stateChange","changeState","renderEnd");r.duration(0).headerEnabled(!1).valueFormatter((function(t,n){return e.valueFormat()(t,n)}));var m=t.utils.renderWatch(v);function y(r){return m.reset(),m.models(e),r.each((function(r){var l=d3.select(this);t.utils.initSVG(l);var f,p=t.utils.availableWidth(a,l,i),g=t.utils.availableHeight(s,l,i);if(y.update=function(){l.transition().call(y)},y.container=this,h.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(r),y.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(r)).update(),h.disabled=r.map((function(t){return!!t.disabled})),!d)for(f in d={},h)h[f]instanceof Array?d[f]=h[f].slice(0):d[f]=h[f];if(!r||!r.length)return t.utils.noData(y,l),y;l.selectAll(".nv-noData").remove();var m=l.selectAll("g.nv-wrap.nv-pieChart").data([r]),b=m.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),x=m.select("g");if(b.append("g").attr("class","nv-pieWrap"),b.append("g").attr("class","nv-legendWrap"),u)if("top"===c)n.width(p).key(e.x()),m.select(".nv-legendWrap").datum(r).call(n),o||n.height()===i.top||(i.top=n.height(),g=t.utils.availableHeight(s,l,i)),m.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")");else if("right"===c){var w=t.models.legend().width();p/2<w&&(w=p/2),n.height(g).key(e.x()),n.width(w),p-=n.width(),m.select(".nv-legendWrap").datum(r).call(n).attr("transform","translate("+p+",0)")}else"bottom"===c&&(n.width(p).key(e.x()),m.select(".nv-legendWrap").datum(r).call(n),i.bottom=n.height(),g=t.utils.availableHeight(s,l,i),m.select(".nv-legendWrap").attr("transform","translate(0,"+g+")"));else x.select(".nv-legendWrap").selectAll("*").remove();m.attr("transform","translate("+i.left+","+i.top+")"),e.width(p).height(g);var _=x.select(".nv-pieWrap").datum([r]);d3.transition(_).call(e),n.dispatch.on("stateChange",(function(t){for(var e in t)h[e]=t[e];v.stateChange(h),y.update()})),v.on("changeState",(function(t){void 0!==t.disabled&&(r.forEach((function(e,n){e.disabled=t.disabled[n]})),h.disabled=t.disabled),y.update()}))})),m.renderEnd("pieChart immediate"),y}return e.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:y.x()(t.data),value:y.y()(t.data),color:t.color,percent:t.percent},l||(delete t.percent,delete t.series.percent),r.data(t).hidden(!1)})),e.dispatch.on("elementMouseout.tooltip",(function(t){r.hidden(!0)})),e.dispatch.on("elementMousemove.tooltip",(function(t){r()})),y.legend=n,y.dispatch=v,y.pie=e,y.tooltip=r,y.options=t.utils.optionsFunc.bind(y),y._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},noData:{get:function(){return p},set:function(t){p=t}},showTooltipPercent:{get:function(){return l},set:function(t){l=t}},showLegend:{get:function(){return u},set:function(t){u=t}},legendPosition:{get:function(){return c},set:function(t){c=t}},defaultState:{get:function(){return d},set:function(t){d=t}},color:{get:function(){return f},set:function(t){f=t,n.color(f),e.color(f)}},duration:{get:function(){return g},set:function(t){g=t,m.reset(g),e.duration(g)}},margin:{get:function(){return i},set:function(t){void 0!==t.top&&(i.top=t.top,o=t.top),i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),t.utils.inheritOptions(y,e),t.utils.initOptions(y),y},t.models.sankey=function(){"use strict";var e={},n=24,r=8,i=[1,1],o=[],a=[],s=!0,l=function(t){o.forEach((function(t){t.sourceLinks=[],t.targetLinks=[]})),a.forEach((function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=o[t.source]),"number"==typeof n&&(n=t.target=o[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)})),o.forEach((function(t){t.value=Math.max(d3.sum(t.sourceLinks,h),d3.sum(t.targetLinks,h))})),function(){var t,e=o,r=0;for(;e.length&&r<o.length;)t=[],e.forEach((function(e){e.x=r,e.dx=n,e.sourceLinks.forEach((function(e){t.indexOf(e.target)<0&&t.push(e.target)}))})),e=t,++r;s&&function(t){o.forEach((function(e){e.sourceLinks.length||(e.x=t-1)}))}(r);a=(i[0]-n)/(r-1),o.forEach((function(t){t.x*=a}));var a}(),function(t){var e=d3.nest().key((function(t){return t.x})).sortKeys(d3.ascending).entries(o).map((function(t){return t.values}));n=d3.min(e,(function(t){return(i[1]-(t.length-1)*r)/d3.sum(t,h)})),e.forEach((function(t){t.forEach((function(t,e){t.y=e,t.dy=t.value*n}))})),a.forEach((function(t){t.dy=t.value*n})),d(),f();var n;for(var s=1;t>0;--t)u(s*=.99),d(),f(),l(s),d(),f();function l(t){function n(t){return(t.source.y+t.sy+t.dy/2)*t.value}e.forEach((function(e,r){e.forEach((function(e){if(e.targetLinks.length){var r=d3.sum(e.targetLinks,n)/d3.sum(e.targetLinks,h);e.y+=(r-c(e))*t}}))}))}function u(t){function n(t){return(t.target.y+t.ty+t.dy/2)*t.value}e.slice().reverse().forEach((function(e){e.forEach((function(e){if(e.sourceLinks.length){var r=d3.sum(e.sourceLinks,n)/d3.sum(e.sourceLinks,h);e.y+=(r-c(e))*t}}))}))}function d(){e.forEach((function(t){var e,n,o,a=0,s=t.length;for(t.sort(p),o=0;o<s;++o)(n=a-(e=t[o]).y)>0&&(e.y+=n),a=e.y+e.dy+r;if((n=a-r-i[1])>0)for(a=e.y-=n,o=s-2;o>=0;--o)(n=(e=t[o]).y+e.dy+r-a)>0&&(e.y-=n),a=e.y}))}function p(t,e){return t.y-e.y}}(t)},u=function(){var t=.5;function e(e){var n=e.source.x+e.source.dx,r=e.target.x,i=d3.interpolateNumber(n,r),o=i(t),a=i(1-t),s=e.source.y+e.sy+e.dy/2,l=e.target.y+e.ty+e.dy/2;return"M"+n+","+s+"C"+o+","+s+" "+a+","+l+" "+r+","+l}return e.curvature=function(n){return arguments.length?(t=+n,e):t},e},c=function(t){return t.y+t.dy/2};function f(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}o.forEach((function(n){n.sourceLinks.sort(e),n.targetLinks.sort(t)})),o.forEach((function(t){var e=0,n=0;t.sourceLinks.forEach((function(t){t.sy=e,e+=t.dy})),t.targetLinks.forEach((function(t){t.ty=n,n+=t.dy}))}))}function h(t){return t.value}return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{nodeWidth:{get:function(){return n},set:function(t){n=+t}},nodePadding:{get:function(){return r},set:function(t){r=t}},nodes:{get:function(){return o},set:function(t){o=t}},links:{get:function(){return a},set:function(t){a=t}},size:{get:function(){return i},set:function(t){i=t}},sinksRight:{get:function(){return s},set:function(t){s=t}},layout:{get:function(){l(32)},set:function(t){l(t)}},relayout:{get:function(){f()},set:function(t){}},center:{get:function(){return c()},set:function(t){"function"==typeof t&&(c=t)}},link:{get:function(){return u()},set:function(t){return"function"==typeof t&&(u=t),u()}}}),t.utils.initOptions(e),e},t.models.sankeyChart=function(){"use strict";var e={top:5,right:0,bottom:5,left:0},n=t.models.sankey(),r=600,i=400,o=36,a=40,s="units",l=void 0,u=d3.format(",.0f"),c=function(t){return u(t)+" "+s},f=d3.scale.category20(),h=function(t){return t.source.name+" → "+t.target.name+"\n"+c(t.value)},d=function(t){return t.color=f(t.name.replace(/ .*/,""))},p=function(t){return d3.rgb(t.color).darker(2)},g=function(t){return t.name+"\n"+c(t.value)},v=function(t,e){t.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(e)};function m(t){return t.each((function(e){var s={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]},u=!1,c=!1;if(("object"==typeof e.nodes&&e.nodes.length)>=0&&("object"==typeof e.links&&e.links.length)>=0&&(u=!0),e.nodes&&e.nodes.length>0&&e.links&&e.links.length>0&&(c=!0),!u)return console.error("NVD3 Sankey chart error:","invalid data format for",e),console.info("Valid data format is: ",s,JSON.stringify(s)),v(t,"Error loading chart, data is invalid"),!1;if(!c)return v(t,"No data available"),!1;var f=t.append("svg").attr("width",r).attr("height",i).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");n.nodeWidth(o).nodePadding(a).size([r,i]);var m=n.link();n.nodes(e.nodes).links(e.links).layout(32).center(l);var y=f.append("g").selectAll(".link").data(e.links).enter().append("path").attr("class","link").attr("d",m).style("stroke-width",(function(t){return Math.max(1,t.dy)})).sort((function(t,e){return e.dy-t.dy}));y.append("title").text(h);var b=f.append("g").selectAll(".node").data(e.nodes).enter().append("g").attr("class","node").attr("transform",(function(t){return"translate("+t.x+","+t.y+")"})).call(d3.behavior.drag().origin((function(t){return t})).on("dragstart",(function(){this.parentNode.appendChild(this)})).on("drag",(function(t){d3.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(i-t.dy,d3.event.y)))+")"),n.relayout(),y.attr("d",m)})));b.append("rect").attr("height",(function(t){return t.dy})).attr("width",n.nodeWidth()).style("fill",d).style("stroke",p).append("title").text(g),b.append("text").attr("x",-6).attr("y",(function(t){return t.dy/2})).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text((function(t){return t.name})).filter((function(t){return t.x<r/2})).attr("x",6+n.nodeWidth()).attr("text-anchor","start")})),m}return m.options=t.utils.optionsFunc.bind(m),m._options=Object.create({},{units:{get:function(){return s},set:function(t){s=t}},width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},format:{get:function(){return c},set:function(t){c=t}},linkTitle:{get:function(){return h},set:function(t){h=t}},nodeWidth:{get:function(){return o},set:function(t){o=t}},nodePadding:{get:function(){return a},set:function(t){a=t}},center:{get:function(){return l},set:function(t){l=t}},margin:{get:function(){return e},set:function(t){e.top=void 0!==t.top?t.top:e.top,e.right=void 0!==t.right?t.right:e.right,e.bottom=void 0!==t.bottom?t.bottom:e.bottom,e.left=void 0!==t.left?t.left:e.left}},nodeStyle:{get:function(){return{}},set:function(t){d=void 0!==t.fillColor?t.fillColor:d,p=void 0!==t.strokeColor?t.strokeColor:p,g=void 0!==t.title?t.title:g}}}),t.utils.initOptions(m),m},t.models.scatter=function(){"use strict";var e,n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=null,f=null,h=t.utils.defaultColor(),d=null,p=Math.floor(1e5*Math.random()),g=null,v=d3.scale.linear(),m=d3.scale.linear(),y=d3.scale.linear(),b=function(t){return t.x},x=function(t){return t.y},w=function(t){return t.size||1},_=function(t){return t.shape||"circle"},k=[],M=[],C=[],S=!0,A=function(t){return!t.notActive},L=!1,E=.1,P=!1,T=!0,O=!1,D=function(){return 25},I=null,F=null,N=null,G=null,W=null,B=null,j=!1,z=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),R=!0,H=250,V=300,$=!1,U=!1,q=t.utils.renderWatch(z,H),K=[16,256],Y={};function X(t){var e;return e=t[0].series+":"+t[1],Y[e]=Y[e]||{}}function Z(t){var e;e=t[0].series+":"+t[1],delete Y[e]}function Q(t){var e,n,r,i=X(t),o=!1;for(e=1;e<arguments.length;e+=2)n=arguments[e],r=arguments[e+1](t[0],t[1]),i[n]===r&&i.hasOwnProperty(n)||(i[n]=r,o=!0);return o}function J(H){return q.reset(),H.each((function(H){g=d3.select(this);var Y=t.utils.availableWidth(c,g,u),X=t.utils.availableHeight(f,g,u);t.utils.initSVG(g),H.forEach((function(t,e){t.values.forEach((function(t){t.series=e}))}));var tt="function"==typeof J.yScale().base,et=I&&F&&W?[]:d3.merge(H.map((function(t){return t.values.map((function(t,e){return{x:b(t,e),y:x(t,e),size:w(t,e)}}))})));if(v.domain(I||d3.extent(et.map((function(t){return t.x})).concat(k))),L&&H[0]?v.range(N||[(Y*E+Y)/(2*H[0].values.length),Y-Y*(1+E)/(2*H[0].values.length)]):v.range(N||[0,Y]),tt){var nt=d3.min(et.map((function(t){if(0!==t.y)return t.y})));m.clamp(!0).domain(F||d3.extent(et.map((function(t){return 0!==t.y?t.y:.1*nt})).concat(M))).range(G||[X,0])}else m.domain(F||d3.extent(et.map((function(t){return t.y})).concat(M))).range(G||[X,0]);y.domain(W||d3.extent(et.map((function(t){return t.size})).concat(C))).range(B||K),j=v.domain()[0]===v.domain()[1]||m.domain()[0]===m.domain()[1],v.domain()[0]===v.domain()[1]&&(v.domain()[0]?v.domain([v.domain()[0]-.01*v.domain()[0],v.domain()[1]+.01*v.domain()[1]]):v.domain([-1,1])),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]):m.domain([-1,1])),isNaN(v.domain()[0])&&v.domain([-1,1]),isNaN(m.domain()[0])&&m.domain([-1,1]),e=e||v,n=n||m,r=r||y;var rt=v(1)!==e(1)||m(1)!==n(1)||y(1)!==r(1);s=s||f;var it=(a=a||c)!==c||s!==f,ot=(i=i||[])[0]!==v.domain()[0]||i[1]!==v.domain()[1];i=v.domain(),o=o||[],ot=ot||o[0]!==m.domain()[0]||o[1]!==m.domain()[1],o=m.domain();var at=g.selectAll("g.nv-wrap.nv-scatter").data([H]),st=at.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+p),lt=st.append("defs"),ut=st.append("g"),ct=at.select("g");function ft(){if(U=!1,!S)return!1;if(!0===R){at.select(".nv-point-paths").selectAll("path").remove();var e=d3.merge(H.map((function(e,n){return e.values.map((function(e,r){var i=b(e,r),o=x(e,r);return[t.utils.NaNtoZero(v(i))+1e-4*Math.random(),t.utils.NaNtoZero(m(o))+1e-4*Math.random(),n,r,e]})).filter((function(t,e){return A(t[4],e)}))})));if(0==e.length)return!1;e.length<3&&(e.push([v.range()[0]-20,m.range()[0]-20,null,null]),e.push([v.range()[1]+20,m.range()[1]+20,null,null]),e.push([v.range()[0]-20,m.range()[0]+20,null,null]),e.push([v.range()[1]+20,m.range()[1]-20,null,null]));var n=d3.geom.polygon([[-10,-10],[-10,f+10],[c+10,f+10],[c+10,-10]]);e=e.sort((function(t,e){return t[0]-e[0]||t[1]-e[1]}));for(var r=0;r<e.length-1;)Math.abs(e[r][0]-e[r+1][0])<1e-4&&Math.abs(e[r][1]-e[r+1][1])<1e-4?e.splice(r+1,1):r++;var i=d3.geom.voronoi(e).map((function(t,r){return{data:n.clip(t),series:e[r][2],point:e[r][3]}})),o=at.select(".nv-point-paths").selectAll("path").data(i),a=o.enter().append("svg:path").attr("d",(function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"})).attr("id",(function(t,e){return"nv-path-"+e})).attr("clip-path",(function(t,e){return"url(#nv-clip-"+p+"-"+e+")"}));if(O&&a.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),T){at.select(".nv-point-clips").selectAll("*").remove();at.select(".nv-point-clips").selectAll("clipPath").data(e).enter().append("svg:clipPath").attr("id",(function(t,e){return"nv-clip-"+p+"-"+e})).append("svg:circle").attr("cx",(function(t){return t[0]})).attr("cy",(function(t){return t[1]})).attr("r",D)}var s=function(t,e,n){if(U)return 0;var r=H[e.series];if(void 0!==r){var i=r.values[e.point];i.color=h(r,e.series),i.x=b(i),i.y=x(i);var o=g.node().getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;n({point:i,series:r,pos:{left:v(b(i,e.point))+o.left+s+u.left+10,top:m(x(i,e.point))+o.top+a+u.top+10},relativePos:[v(b(i,e.point))+u.left,m(x(i,e.point))+u.top],seriesIndex:e.series,pointIndex:e.point,event:d3.event,element:t})}};o.on("click",(function(t){s(this,t,z.elementClick)})).on("dblclick",(function(t){s(this,t,z.elementDblClick)})).on("mouseover",(function(t){s(this,t,z.elementMouseover)})).on("mouseout",(function(t,e){s(this,t,z.elementMouseout)}))}else at.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",(function(t,e){if(U||!H[t.series])return 0;var n=H[t.series],r=n.values[e];z.elementClick({point:r,series:n,pos:[v(b(r,e))+u.left,m(x(r,e))+u.top],relativePos:[v(b(r,e))+u.left,m(x(r,e))+u.top],seriesIndex:t.series,pointIndex:e,event:d3.event,element:this})})).on("dblclick",(function(t,e){if(U||!H[t.series])return 0;var n=H[t.series],r=n.values[e];z.elementDblClick({point:r,series:n,pos:[v(b(r,e))+u.left,m(x(r,e))+u.top],relativePos:[v(b(r,e))+u.left,m(x(r,e))+u.top],seriesIndex:t.series,pointIndex:e})})).on("mouseover",(function(t,e){if(U||!H[t.series])return 0;var n=H[t.series],r=n.values[e];z.elementMouseover({point:r,series:n,pos:[v(b(r,e))+u.left,m(x(r,e))+u.top],relativePos:[v(b(r,e))+u.left,m(x(r,e))+u.top],seriesIndex:t.series,pointIndex:e,color:h(t,e)})})).on("mouseout",(function(t,e){if(U||!H[t.series])return 0;var n=H[t.series],r=n.values[e];z.elementMouseout({point:r,series:n,pos:[v(b(r,e))+u.left,m(x(r,e))+u.top],relativePos:[v(b(r,e))+u.left,m(x(r,e))+u.top],seriesIndex:t.series,pointIndex:e,color:h(t,e)})}))}at.classed("nv-single-point",j),ut.append("g").attr("class","nv-groups"),ut.append("g").attr("class","nv-point-paths"),st.append("g").attr("class","nv-point-clips"),at.attr("transform","translate("+u.left+","+u.top+")"),lt.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect").attr("transform","translate( -10, -10)"),at.select("#nv-edge-clip-"+p+" rect").attr("width",Y+20).attr("height",X>0?X+20:0),ct.attr("clip-path",P?"url(#nv-edge-clip-"+p+")":""),U=!0;var ht=at.select(".nv-groups").selectAll(".nv-group").data((function(t){return t}),(function(t){return t.key}));ht.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),ht.exit().remove(),ht.attr("class",(function(t,e){return(t.classed||"")+" nv-group nv-series-"+e})).classed("nv-noninteractive",!S).classed("hover",(function(t){return t.hover})),ht.watchTransition(q,"scatter: groups").style("fill",(function(t,e){return h(t,e)})).style("stroke",(function(t,e){return t.pointBorderColor||d||h(t,e)})).style("stroke-opacity",1).style("fill-opacity",.5);var dt=ht.selectAll("path.nv-point").data((function(t){return t.values.map((function(t,e){return[t,e]})).filter((function(t,e){return A(t[0],e)}))}));if(dt.enter().append("path").attr("class",(function(t){return"nv-point nv-point-"+t[1]})).style("fill",(function(t){return t.color})).style("stroke",(function(t){return t.color})).attr("transform",(function(r){return"translate("+t.utils.NaNtoZero(e(b(r[0],r[1])))+","+t.utils.NaNtoZero(n(x(r[0],r[1])))+")"})).attr("d",t.utils.symbol().type((function(t){return _(t[0])})).size((function(t){return y(w(t[0],t[1]))}))),dt.exit().each(Z).remove(),ht.exit().selectAll("path.nv-point").watchTransition(q,"scatter exit").attr("transform",(function(e){return"translate("+t.utils.NaNtoZero(v(b(e[0],e[1])))+","+t.utils.NaNtoZero(m(x(e[0],e[1])))+")"})).remove(),dt.filter((function(t){return Q(t,"x",b,"y",x)||rt||it||ot})).watchTransition(q,"scatter points").attr("transform",(function(e){return"translate("+t.utils.NaNtoZero(v(b(e[0],e[1])))+","+t.utils.NaNtoZero(m(x(e[0],e[1])))+")"})),dt.filter((function(t){return Q(t,"shape",_,"size",w)||rt||it||ot})).watchTransition(q,"scatter points").attr("d",t.utils.symbol().type((function(t){return _(t[0])})).size((function(t){return y(w(t[0],t[1]))}))),$){var pt=ht.selectAll(".nv-label").data((function(t){return t.values.map((function(t,e){return[t,e]})).filter((function(t,e){return A(t[0],e)}))}));pt.enter().append("text").style("fill",(function(t,e){return t.color})).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",(function(r){return"translate("+(t.utils.NaNtoZero(e(b(r[0],r[1])))+Math.sqrt(y(w(r[0],r[1]))/Math.PI)+2)+","+t.utils.NaNtoZero(n(x(r[0],r[1])))+")"})).text((function(t,e){return t[0].label})),pt.exit().remove(),ht.exit().selectAll("path.nv-label").watchTransition(q,"scatter exit").attr("transform",(function(e){return"translate("+(t.utils.NaNtoZero(v(b(e[0],e[1])))+Math.sqrt(y(w(e[0],e[1]))/Math.PI)+2)+","+t.utils.NaNtoZero(m(x(e[0],e[1])))+")"})).remove(),pt.each((function(t){d3.select(this).classed("nv-label",!0).classed("nv-label-"+t[1],!1).classed("hover",!1)})),pt.watchTransition(q,"scatter labels").attr("transform",(function(e){return"translate("+(t.utils.NaNtoZero(v(b(e[0],e[1])))+Math.sqrt(y(w(e[0],e[1]))/Math.PI)+2)+","+t.utils.NaNtoZero(m(x(e[0],e[1])))+")"}))}V?(clearTimeout(l),l=setTimeout(ft,V)):ft(),e=v.copy(),n=m.copy(),r=y.copy(),a=c,s=f})),q.renderEnd("scatter immediate"),J}return J.dispatch=z,J.options=t.utils.optionsFunc.bind(J),J._calls=new function(){this.clearHighlights=function(){return t.dom.write((function(){g.selectAll(".nv-point.hover").classed("hover",!1)})),null},this.highlightPoint=function(e,n,r){t.dom.write((function(){g.select(".nv-groups").selectAll(".nv-series-"+e).selectAll(".nv-point-"+n).classed("hover",r)}))}},z.on("elementMouseover.point",(function(t){S&&J._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)})),z.on("elementMouseout.point",(function(t){S&&J._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)})),J._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},xScale:{get:function(){return v},set:function(t){v=t}},yScale:{get:function(){return m},set:function(t){m=t}},pointScale:{get:function(){return y},set:function(t){y=t}},xDomain:{get:function(){return I},set:function(t){I=t}},yDomain:{get:function(){return F},set:function(t){F=t}},pointDomain:{get:function(){return W},set:function(t){W=t}},xRange:{get:function(){return N},set:function(t){N=t}},yRange:{get:function(){return G},set:function(t){G=t}},pointRange:{get:function(){return B},set:function(t){B=t}},forceX:{get:function(){return k},set:function(t){k=t}},forceY:{get:function(){return M},set:function(t){M=t}},forcePoint:{get:function(){return C},set:function(t){C=t}},interactive:{get:function(){return S},set:function(t){S=t}},pointActive:{get:function(){return A},set:function(t){A=t}},padDataOuter:{get:function(){return E},set:function(t){E=t}},padData:{get:function(){return L},set:function(t){L=t}},clipEdge:{get:function(){return P},set:function(t){P=t}},clipVoronoi:{get:function(){return T},set:function(t){T=t}},clipRadius:{get:function(){return D},set:function(t){D=t}},showVoronoi:{get:function(){return O},set:function(t){O=t}},id:{get:function(){return p},set:function(t){p=t}},interactiveUpdateDelay:{get:function(){return V},set:function(t){V=t}},showLabels:{get:function(){return $},set:function(t){$=t}},pointBorderColor:{get:function(){return d},set:function(t){d=t}},x:{get:function(){return b},set:function(t){b=d3.functor(t)}},y:{get:function(){return x},set:function(t){x=d3.functor(t)}},pointSize:{get:function(){return w},set:function(t){w=d3.functor(t)}},pointShape:{get:function(){return _},set:function(t){_=d3.functor(t)}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return H},set:function(t){H=t,q.reset(H)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e)}},useVoronoi:{get:function(){return R},set:function(t){!1===(R=t)&&(T=!1)}}}),t.utils.initOptions(J),J},t.models.scatterChart=function(){"use strict";var e=t.models.scatter(),n=t.models.axis(),r=t.models.axis(),i=t.models.legend(),o=t.models.distribution(),a=t.models.distribution(),s=t.models.tooltip(),l={top:30,right:20,bottom:50,left:75},u=null,c=null,f=null,h=null,d=t.utils.defaultColor(),p=e.xScale(),g=e.yScale(),v=!1,m=!1,y=!0,b=!0,x=!0,w=!1,_=t.utils.state(),k=null,M=d3.dispatch("stateChange","changeState","renderEnd"),C=null,S=250,A=!1;e.xScale(p).yScale(g),n.orient("bottom").tickPadding(10),r.orient(w?"right":"left").tickPadding(10),o.axis("x"),a.axis("y"),s.headerFormatter((function(t,e){return n.tickFormat()(t,e)})).valueFormatter((function(t,e){return r.tickFormat()(t,e)}));var L=t.utils.renderWatch(M,S);function E(C){return L.reset(),L.models(e),b&&L.models(n),x&&L.models(r),v&&L.models(o),m&&L.models(a),C.each((function(C){h=d3.select(this),t.utils.initSVG(h);var P,T=t.utils.availableWidth(c,h,l),O=t.utils.availableHeight(f,h,l);if(E.update=function(){0===S?h.call(E):h.transition().duration(S).call(E)},E.container=this,_.setter(function(t){return function(e){void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(C),E.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled}))}}}(C)).update(),_.disabled=C.map((function(t){return!!t.disabled})),!k)for(P in k={},_)_[P]instanceof Array?k[P]=_[P].slice(0):k[P]=_[P];if(!(C&&C.length&&C.filter((function(t){return t.values.length})).length))return t.utils.noData(E,h),L.renderEnd("scatter immediate"),E;h.selectAll(".nv-noData").remove(),p=e.xScale(),g=e.yScale();var D=h.selectAll("g.nv-wrap.nv-scatterChart").data([C]),I=D.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+e.id()).append("g"),F=D.select("g");if(I.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-scatterWrap"),I.append("g").attr("class","nv-regressionLinesWrap"),I.append("g").attr("class","nv-distWrap"),I.append("g").attr("class","nv-legendWrap"),w&&F.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)"),y){var N=T;i.width(N),D.select(".nv-legendWrap").datum(C).call(i),u||i.height()===l.top||(l.top=i.height(),O=t.utils.availableHeight(f,h,l)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-l.top+")")}else F.select(".nv-legendWrap").selectAll("*").remove();D.attr("transform","translate("+l.left+","+l.top+")"),e.width(T).height(O).color(C.map((function(t,e){return t.color=t.color||d(t,e),t.color})).filter((function(t,e){return!C[e].disabled}))).showLabels(A),D.select(".nv-scatterWrap").datum(C.filter((function(t){return!t.disabled}))).call(e),D.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+e.id()+")");var G=D.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data((function(t){return t}));G.enter().append("g").attr("class","nv-regLines");var W=G.selectAll(".nv-regLine").data((function(t){return[t]}));W.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),W.filter((function(t){return t.intercept&&t.slope})).watchTransition(L,"scatterPlusLineChart: regline").attr("x1",p.range()[0]).attr("x2",p.range()[1]).attr("y1",(function(t,e){return g(p.domain()[0]*t.slope+t.intercept)})).attr("y2",(function(t,e){return g(p.domain()[1]*t.slope+t.intercept)})).style("stroke",(function(t,e,n){return d(t,n)})).style("stroke-opacity",(function(t,e){return t.disabled||void 0===t.slope||void 0===t.intercept?0:1})),b&&(n.scale(p)._ticks(t.utils.calcTicksX(T/100,C)).tickSize(-O,0),F.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")").call(n)),x&&(r.scale(g)._ticks(t.utils.calcTicksY(O/36,C)).tickSize(-T,0),F.select(".nv-y.nv-axis").call(r)),v&&(o.getData(e.x()).scale(p).width(T).color(C.map((function(t,e){return t.color||d(t,e)})).filter((function(t,e){return!C[e].disabled}))),I.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),F.select(".nv-distributionX").attr("transform","translate(0,"+g.range()[0]+")").datum(C.filter((function(t){return!t.disabled}))).call(o)),m&&(a.getData(e.y()).scale(g).width(O).color(C.map((function(t,e){return t.color||d(t,e)})).filter((function(t,e){return!C[e].disabled}))),I.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),F.select(".nv-distributionY").attr("transform","translate("+(w?T:-a.size())+",0)").datum(C.filter((function(t){return!t.disabled}))).call(a)),i.dispatch.on("stateChange",(function(t){for(var e in t)_[e]=t[e];M.stateChange(_),E.update()})),M.on("changeState",(function(t){void 0!==t.disabled&&(C.forEach((function(e,n){e.disabled=t.disabled[n]})),_.disabled=t.disabled),E.update()})),e.dispatch.on("elementMouseout.tooltip",(function(t){s.hidden(!0),h.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),h.select(".nv-chart-"+e.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",a.size())})),e.dispatch.on("elementMouseover.tooltip",(function(t){h.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.relativePos[1]-O),h.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.relativePos[0]+o.size()),s.data(t).hidden(!1)})),p.copy(),g.copy()})),L.renderEnd("scatter with line immediate"),E}return E.dispatch=M,E.scatter=e,E.legend=i,E.xAxis=n,E.yAxis=r,E.distX=o,E.distY=a,E.tooltip=s,E.options=t.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},container:{get:function(){return h},set:function(t){h=t}},showDistX:{get:function(){return v},set:function(t){v=t}},showDistY:{get:function(){return m},set:function(t){m=t}},showLegend:{get:function(){return y},set:function(t){y=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return C},set:function(t){C=t}},duration:{get:function(){return S},set:function(t){S=t}},showLabels:{get:function(){return A},set:function(t){A=t}},margin:{get:function(){return l},set:function(t){void 0!==t.top&&(l.top=t.top,u=t.top),l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,r.orient(t?"right":"left")}},color:{get:function(){return d},set:function(e){d=t.utils.getColor(e),i.color(d),o.color(d),a.color(d)}}}),t.utils.inheritOptions(E,e),t.utils.initOptions(E),E},t.models.sparkline=function(){"use strict";var e,n,r,i,o={top:2,right:0,bottom:2,left:0},a=400,s=32,l=null,u=!0,c=d3.scale.linear(),f=d3.scale.linear(),h=function(t){return t.x},d=function(t){return t.y},p=t.utils.getColor(["#000"]),g=!0,v=!0,m=d3.dispatch("renderEnd"),y=t.utils.renderWatch(m);function b(u){return y.reset(),u.each((function(u){var m=a-o.left-o.right,y=s-o.top-o.bottom;l=d3.select(this),t.utils.initSVG(l),c.domain(e||d3.extent(u,h)).range(r||[0,m]),f.domain(n||d3.extent(u,d)).range(i||[y,0]);var b=l.selectAll("g.nv-wrap.nv-sparkline").data([u]);b.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),b.select("g");b.attr("transform","translate("+o.left+","+o.top+")");var x=b.selectAll("path").data((function(t){return[t]}));x.enter().append("path"),x.exit().remove(),x.style("stroke",(function(t,e){return t.color||p(t,e)})).attr("d",d3.svg.line().x((function(t,e){return c(h(t,e))})).y((function(t,e){return f(d(t,e))})));var w=b.selectAll("circle.nv-point").data((function(t){var e=t.map((function(t,e){return d(t,e)}));function n(e){if(-1!=e){var n=t[e];return n.pointIndex=e,n}return null}var r=n(e.lastIndexOf(f.domain()[1])),i=n(e.indexOf(f.domain()[0])),o=n(e.length-1);return[g?i:null,g?r:null,v?o:null].filter((function(t){return null!=t}))}));w.enter().append("circle"),w.exit().remove(),w.attr("cx",(function(t,e){return c(h(t,t.pointIndex))})).attr("cy",(function(t,e){return f(d(t,t.pointIndex))})).attr("r",2).attr("class",(function(t,e){return h(t,t.pointIndex)==c.domain()[1]?"nv-point nv-currentValue":d(t,t.pointIndex)==f.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"}))})),y.renderEnd("sparkline immediate"),b}return b.options=t.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xDomain:{get:function(){return e},set:function(t){e=t}},yDomain:{get:function(){return n},set:function(t){n=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return i},set:function(t){i=t}},xScale:{get:function(){return c},set:function(t){c=t}},yScale:{get:function(){return f},set:function(t){f=t}},animate:{get:function(){return u},set:function(t){u=t}},showMinMaxPoints:{get:function(){return g},set:function(t){g=t}},showCurrentPoint:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return h},set:function(t){h=d3.functor(t)}},y:{get:function(){return d},set:function(t){d=d3.functor(t)}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e)}}}),b.dispatch=m,t.utils.initOptions(b),b},t.models.sparklinePlus=function(){"use strict";var e,n,r=t.models.sparkline(),i={top:15,right:100,bottom:10,left:50},o=null,a=null,s=[],l=!1,u=d3.format(",r"),c=d3.format(",.2f"),f=!0,h=!0,d=!1,p=null,g=d3.dispatch("renderEnd"),v=t.utils.renderWatch(g);function m(p){return v.reset(),v.models(r),p.each((function(p){var g=d3.select(this);t.utils.initSVG(g);var v=t.utils.availableWidth(o,g,i),y=t.utils.availableHeight(a,g,i);if(m.update=function(){g.call(m)},m.container=this,!p||!p.length)return t.utils.noData(m,g),m;g.selectAll(".nv-noData").remove();var b=r.y()(p[p.length-1],p.length-1);e=r.xScale(),n=r.yScale();var x=g.selectAll("g.nv-wrap.nv-sparklineplus").data([p]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),_=x.select("g");w.append("g").attr("class","nv-sparklineWrap"),w.append("g").attr("class","nv-valueWrap"),w.append("g").attr("class","nv-hoverArea"),x.attr("transform","translate("+i.left+","+i.top+")");var k=_.select(".nv-sparklineWrap");if(r.width(v).height(y),k.call(r),f){var M=_.select(".nv-valueWrap").selectAll(".nv-currentValue").data([b]);M.enter().append("text").attr("class","nv-currentValue").attr("dx",d?-8:8).attr("dy",".9em").style("text-anchor",d?"end":"start"),M.attr("x",v+(d?i.right:0)).attr("y",h?function(t){return n(t)}:0).style("fill",r.color()(p[p.length-1],p.length-1)).text(c(b))}function C(){if(!l){var t=_.selectAll(".nv-hoverValue").data(s),n=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",(function(t){return"translate("+e(r.x()(p[t],t))+",0)"})).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),s.length&&(n.append("line").attr("x1",0).attr("y1",-i.top).attr("x2",0).attr("y2",y),n.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-i.top).attr("text-anchor","end").attr("dy",".9em"),_.select(".nv-hoverValue .nv-xValue").text(u(r.x()(p[s[0]],s[0]))),n.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-i.top).attr("text-anchor","start").attr("dy",".9em"),_.select(".nv-hoverValue .nv-yValue").text(c(r.y()(p[s[0]],s[0]))))}}w.select(".nv-hoverArea").append("rect").on("mousemove",(function(){if(l)return;var t=d3.mouse(this)[0]-i.left;s=[function(t,e){for(var n=Math.abs(r.x()(t[0],0)-e),i=0,o=0;o<t.length;o++)Math.abs(r.x()(t[o],o)-e)<n&&(n=Math.abs(r.x()(t[o],o)-e),i=o);return i}(p,Math.round(e.invert(t)))],C()})).on("click",(function(){l=!l})).on("mouseout",(function(){s=[],C()})),_.select(".nv-hoverArea rect").attr("transform",(function(t){return"translate("+-i.left+","+-i.top+")"})).attr("width",v+i.left+i.right).attr("height",y+i.top)})),v.renderEnd("sparklinePlus immediate"),m}return m.dispatch=g,m.sparkline=r,m.options=t.utils.optionsFunc.bind(m),m._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},xTickFormat:{get:function(){return u},set:function(t){u=t}},yTickFormat:{get:function(){return c},set:function(t){c=t}},showLastValue:{get:function(){return f},set:function(t){f=t}},alignValue:{get:function(){return h},set:function(t){h=t}},rightAlignValue:{get:function(){return d},set:function(t){d=t}},noData:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}}}),t.utils.inheritOptions(m,r),t.utils.initOptions(m),m},t.models.stackedArea=function(){"use strict";var e,n,r={top:0,right:0,bottom:0,left:0},i=960,o=500,a=t.utils.defaultColor(),s=Math.floor(1e5*Math.random()),l=null,u=function(t){return t.x},c=function(t){return t.y},f=function(t,e){return!isNaN(c(t,e))&&null!==c(t,e)},h="stack",d="zero",p="default",g="linear",v=!1,m=t.models.scatter(),y=250,b=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");m.pointSize(2.2).pointDomain([2.2,2.2]);var x=t.utils.renderWatch(b,y);function w(h){return x.reset(),x.models(m),h.each((function(h){var y=i-r.left-r.right,_=o-r.top-r.bottom;l=d3.select(this),t.utils.initSVG(l),e=m.xScale(),n=m.yScale();var k=h;h.forEach((function(t,e){t.seriesIndex=e,t.values=t.values.map((function(t,n){return t.index=n,t.seriesIndex=e,t}))}));var M=h.filter((function(t){return!t.disabled}));h=d3.layout.stack().order(p).offset(d).values((function(t){return t.values})).x(u).y(c).out((function(t,e,n){t.display={y:n,y0:e}}))(M);var C=l.selectAll("g.nv-wrap.nv-stackedarea").data([h]),S=C.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),A=S.append("defs"),L=S.append("g"),E=C.select("g");L.append("g").attr("class","nv-areaWrap"),L.append("g").attr("class","nv-scatterWrap"),C.attr("transform","translate("+r.left+","+r.top+")"),0==m.forceY().length&&m.forceY().push(0),m.width(y).height(_).x(u).y((function(t){if(void 0!==t.display)return t.display.y+t.display.y0})).color(h.map((function(t,e){return t.color=t.color||a(t,t.seriesIndex),t.color}))),E.select(".nv-scatterWrap").datum(h).call(m),A.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),C.select("#nv-edge-clip-"+s+" rect").attr("width",y).attr("height",_),E.attr("clip-path",v?"url(#nv-edge-clip-"+s+")":"");var P=d3.svg.area().defined(f).x((function(t,n){return e(u(t,n))})).y0((function(t){return n(t.display.y0)})).y1((function(t){return n(t.display.y+t.display.y0)})).interpolate(g),T=d3.svg.area().defined(f).x((function(t,n){return e(u(t,n))})).y0((function(t){return n(t.display.y0)})).y1((function(t){return n(t.display.y0)})),O=E.select(".nv-areaWrap").selectAll("path.nv-area").data((function(t){return t}));O.enter().append("path").attr("class",(function(t,e){return"nv-area nv-area-"+e})).attr("d",(function(t,e){return T(t.values,t.seriesIndex)})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0),b.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1),b.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})).on("click",(function(t,e){d3.select(this).classed("hover",!1),b.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})})),O.exit().remove(),O.style("fill",(function(t,e){return t.color||a(t,t.seriesIndex)})).style("stroke",(function(t,e){return t.color||a(t,t.seriesIndex)})),O.watchTransition(x,"stackedArea path").attr("d",(function(t,e){return P(t.values,e)})),m.dispatch.on("elementMouseover.area",(function(t){E.select(".nv-chart-"+s+" .nv-area-"+t.seriesIndex).classed("hover",!0)})),m.dispatch.on("elementMouseout.area",(function(t){E.select(".nv-chart-"+s+" .nv-area-"+t.seriesIndex).classed("hover",!1)})),w.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,a=[];for(n=0;n<o;++n){for(e=0,r=0;e<k.length;e++)r+=c(k[e].values[n]);if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=0}for(n=0;n<o;++n)a[n]=0;return a}})),x.renderEnd("stackedArea immediate"),w}return w.dispatch=b,w.scatter=m,m.dispatch.on("elementClick",(function(){b.elementClick.apply(this,arguments)})),m.dispatch.on("elementMouseover",(function(){b.elementMouseover.apply(this,arguments)})),m.dispatch.on("elementMouseout",(function(){b.elementMouseout.apply(this,arguments)})),w.interpolate=function(t){return arguments.length?(g=t,w):g},w.duration=function(t){return arguments.length?(y=t,x.reset(y),m.duration(y),w):y},w.dispatch=b,w.scatter=m,w.options=t.utils.optionsFunc.bind(w),w._options=Object.create({},{width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return o},set:function(t){o=t}},defined:{get:function(){return f},set:function(t){f=t}},clipEdge:{get:function(){return v},set:function(t){v=t}},offset:{get:function(){return d},set:function(t){d=t}},order:{get:function(){return p},set:function(t){p=t}},interpolate:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return u},set:function(t){u=d3.functor(t)}},y:{get:function(){return c},set:function(t){c=d3.functor(t)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}},style:{get:function(){return h},set:function(t){switch(h=t){case"stack":w.offset("zero"),w.order("default");break;case"stream":w.offset("wiggle"),w.order("inside-out");break;case"stream-center":w.offset("silhouette"),w.order("inside-out");break;case"expand":w.offset("expand"),w.order("default");break;case"stack_percent":w.offset(w.d3_stackedOffset_stackPercent),w.order("default")}}},duration:{get:function(){return y},set:function(t){y=t,x.reset(y),m.duration(y)}}}),t.utils.inheritOptions(w,m),t.utils.initOptions(w),w},t.models.stackedAreaChart=function(){"use strict";var e,n,r=t.models.stackedArea(),i=t.models.axis(),o=t.models.axis(),a=t.models.legend(),s=t.models.legend(),l=t.interactiveGuideline(),u=t.models.tooltip(),c=t.models.focus(t.models.stackedArea()),f={top:10,right:25,bottom:50,left:60},h=null,d=null,p=null,g=t.utils.defaultColor(),v=!0,m=!0,y="top",b=!0,x=!0,w=!1,_=!1,k=!1,M=!0,C="TOTAL",S=t.utils.state(),A=null,L=null,E=d3.dispatch("stateChange","changeState","renderEnd"),P=250,T=["Stacked","Stream","Expanded"],O={},D=250;S.style=r.style(),i.orient("bottom").tickPadding(7),o.orient(w?"right":"left"),u.headerFormatter((function(t,e){return i.tickFormat()(t,e)})).valueFormatter((function(t,e){return o.tickFormat()(t,e)})),l.tooltip.headerFormatter((function(t,e){return i.tickFormat()(t,e)})).valueFormatter((function(t,e){return null==t?"N/A":o.tickFormat()(t,e)}));var I=null,F=null;s.updateState(!1);var N=t.utils.renderWatch(E),G=(r.style(),d3.format("%"));function W(u){return N.reset(),N.models(r),b&&N.models(i),x&&N.models(o),u.each((function(u){var L=d3.select(this);t.utils.initSVG(L);var N,B=t.utils.availableWidth(d,L,f),j=t.utils.availableHeight(p,L,f)-(_?c.height():0);if(W.update=function(){L.transition().duration(D).call(W)},W.container=this,S.setter(function(t){return function(e){void 0!==e.style&&e.style,void 0!==e.active&&t.forEach((function(t,n){t.disabled=!e.active[n]}))}}(u),W.update).getter(function(t){return function(){return{active:t.map((function(t){return!t.disabled})),style:r.style()}}}(u)).update(),S.disabled=u.map((function(t){return!!t.disabled})),!A)for(N in A={},S)S[N]instanceof Array?A[N]=S[N].slice(0):A[N]=S[N];if(!(u&&u.length&&u.filter((function(t){return t.values.length})).length))return t.utils.noData(W,L),W;L.selectAll(".nv-noData").remove(),e=r.xScale(),n=r.yScale();var z=L.selectAll("g.nv-wrap.nv-stackedAreaChart").data([u]),R=z.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),H=z.select("g");R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap");var V=R.append("g").attr("class","nv-focus");V.append("g").attr("class","nv-background").append("rect"),V.append("g").attr("class","nv-x nv-axis"),V.append("g").attr("class","nv-y nv-axis"),V.append("g").attr("class","nv-stackedWrap"),V.append("g").attr("class","nv-interactive");R.append("g").attr("class","nv-focusWrap");if(m){var $=v&&"top"===y?B-P:B;if(a.width($),H.select(".nv-legendWrap").datum(u).call(a),"bottom"===y){var U=10+(b?12:0);f.bottom=Math.max(a.height()+U,f.bottom);var q=(j=t.utils.availableHeight(p,L,f)-(_?c.height():0))+U;H.select(".nv-legendWrap").attr("transform","translate(0,"+q+")")}else"top"===y&&(h||f.top==a.height()||(f.top=a.height(),j=t.utils.availableHeight(p,L,f)-(_?c.height():0)),H.select(".nv-legendWrap").attr("transform","translate("+(B-$)+","+-f.top+")"))}else H.select(".nv-legendWrap").selectAll("*").remove();if(v){var K=[{key:O.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=r.style(),style:"stack"},{key:O.stream||"Stream",metaKey:"Stream",disabled:"stream"!=r.style(),style:"stream"},{key:O.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=r.style(),style:"expand"},{key:O.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=r.style(),style:"stack_percent"}];P=T.length/3*260,K=K.filter((function(t){return-1!==T.indexOf(t.metaKey)})),s.width(P).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(K).call(s);var Y=Math.max(s.height(),m&&"top"===y?a.height():0);f.top!=Y&&(f.top=Y,j=t.utils.availableHeight(p,L,f)-(_?c.height():0)),H.select(".nv-controlsWrap").attr("transform","translate(0,"+-f.top+")")}else H.select(".nv-controlsWrap").selectAll("*").remove();z.attr("transform","translate("+f.left+","+f.top+")"),w&&H.select(".nv-y.nv-axis").attr("transform","translate("+B+",0)"),k&&(l.width(B).height(j).margin({left:f.left,top:f.top}).svgContainer(L).xScale(e),z.select(".nv-interactive").call(l)),H.select(".nv-focus .nv-background rect").attr("width",B).attr("height",j),r.width(B).height(j).color(u.map((function(t,e){return t.color||g(t,e)})).filter((function(t,e){return!u[e].disabled})));var X,Z=H.select(".nv-focus .nv-stackedWrap").datum(u.filter((function(t){return!t.disabled})));(b&&i.scale(e)._ticks(t.utils.calcTicksX(B/100,u)).tickSize(-j,0),x)&&(X="wiggle"===r.offset()?0:t.utils.calcTicksY(j/36,u),o.scale(n)._ticks(X).tickSize(-B,0));function Q(){b&&H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+j+")").transition().duration(D).call(i)}function J(){if(x){if("expand"===r.style()||"stack_percent"===r.style()){var t=o.tickFormat();I&&t===G||(I=t),o.tickFormat(G)}else I&&(o.tickFormat(I),I=null);H.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(o)}}if(_){c.width(B),H.select(".nv-focusWrap").attr("transform","translate(0,"+(j+f.bottom+c.margin().top)+")").datum(u.filter((function(t){return!t.disabled}))).call(c);var tt=c.brush.empty()?c.xDomain():c.brush.extent();null!==tt&&et(tt)}else Z.transition().call(r),Q(),J();function et(t){H.select(".nv-focus .nv-stackedWrap").datum(u.filter((function(t){return!t.disabled})).map((function(e,n){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter((function(e,n){return r.x()(e,n)>=t[0]&&r.x()(e,n)<=t[1]})),disableTooltip:e.disableTooltip}}))).transition().duration(D).call(r),Q(),J()}r.dispatch.on("areaClick.toggle",(function(t){1===u.filter((function(t){return!t.disabled})).length?u.forEach((function(t){t.disabled=!1})):u.forEach((function(e,n){e.disabled=n!=t.seriesIndex})),S.disabled=u.map((function(t){return!!t.disabled})),E.stateChange(S),W.update()})),a.dispatch.on("stateChange",(function(t){for(var e in t)S[e]=t[e];E.stateChange(S),W.update()})),s.dispatch.on("legendClick",(function(t,e){t.disabled&&(K=K.map((function(t){return t.disabled=!0,t})),t.disabled=!1,r.style(t.style),S.style=r.style(),E.stateChange(S),W.update())})),l.dispatch.on("elementMousemove",(function(e){r.clearHighlights();var n,i,o,a=[],s=0,c=!0,f=!1;if(u.filter((function(t,e){return t.seriesIndex=e,!t.disabled})).forEach((function(l,h){i=t.interactiveBisect(l.values,e.pointXValue,W.x());var d=l.values[i],p=W.y()(d,i);if(null!=p&&p>0&&(r.highlightPoint(h,i,!0),f=!0),h!==u.length-1||f||r.highlightPoint(h,i,!0),void 0!==d){void 0===n&&(n=d),void 0===o&&(o=W.xScale()(W.x()(d,i)));var v="expand"==r.style()?d.display.y:W.y()(d,i);a.push({key:l.key,value:v,color:g(l,l.seriesIndex),point:d}),M&&"expand"!=r.style()&&null!=v&&(s+=v,c=!1)}})),a.reverse(),a.length>2){var h=W.yScale().invert(e.mouseY),d=null;a.forEach((function(t,e){h=Math.abs(h);var n=Math.abs(t.point.display.y0),r=Math.abs(t.point.display.y);h>=n&&h<=r+n&&(d=e)})),null!=d&&(a[d].highlight=!0)}M&&"expand"!=r.style()&&a.length>=2&&!c&&a.push({key:C,value:s,total:!0});var p=W.x()(n,i),v=l.tooltip.valueFormatter();"expand"===r.style()||"stack_percent"===r.style()?(F||(F=v),v=d3.format(".1%")):F&&(v=F,F=null),l.tooltip.valueFormatter(v).data({value:p,series:a})(),l.renderGuideLine(o)})),l.dispatch.on("elementMouseout",(function(t){r.clearHighlights()})),c.dispatch.on("onBrush",(function(t){et(t)})),E.on("changeState",(function(t){void 0!==t.disabled&&u.length===t.disabled.length&&(u.forEach((function(e,n){e.disabled=t.disabled[n]})),S.disabled=t.disabled),void 0!==t.style&&(r.style(t.style),t.style),W.update()}))})),N.renderEnd("stacked Area chart immediate"),W}return r.dispatch.on("elementMouseover.tooltip",(function(t){t.point.x=r.x()(t.point),t.point.y=r.y()(t.point),u.data(t).hidden(!1)})),r.dispatch.on("elementMouseout.tooltip",(function(t){u.hidden(!0)})),W.dispatch=E,W.stacked=r,W.legend=a,W.controls=s,W.xAxis=i,W.x2Axis=c.xAxis,W.yAxis=o,W.y2Axis=c.yAxis,W.interactiveLayer=l,W.tooltip=u,W.focus=c,W.dispatch=E,W.options=t.utils.optionsFunc.bind(W),W._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return m},set:function(t){m=t}},legendPosition:{get:function(){return y},set:function(t){y=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return L},set:function(t){L=t}},showControls:{get:function(){return v},set:function(t){v=t}},controlLabels:{get:function(){return O},set:function(t){O=t}},controlOptions:{get:function(){return T},set:function(t){T=t}},showTotalInTooltip:{get:function(){return M},set:function(t){M=t}},totalLabel:{get:function(){return C},set:function(t){C=t}},focusEnable:{get:function(){return _},set:function(t){_=t}},focusHeight:{get:function(){return c.height()},set:function(t){c.height(t)}},brushExtent:{get:function(){return c.brushExtent()},set:function(t){c.brushExtent(t)}},margin:{get:function(){return f},set:function(t){void 0!==t.top&&(f.top=t.top,h=t.top),f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},focusMargin:{get:function(){return c.margin},set:function(t){c.margin.top=void 0!==t.top?t.top:c.margin.top,c.margin.right=void 0!==t.right?t.right:c.margin.right,c.margin.bottom=void 0!==t.bottom?t.bottom:c.margin.bottom,c.margin.left=void 0!==t.left?t.left:c.margin.left}},duration:{get:function(){return D},set:function(t){D=t,N.reset(D),r.duration(D),i.duration(D),o.duration(D)}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e),a.color(g),r.color(g),c.color(g)}},x:{get:function(){return r.x()},set:function(t){r.x(t),c.x(t)}},y:{get:function(){return r.y()},set:function(t){r.y(t),c.y(t)}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,o.orient(w?"right":"left")}},useInteractiveGuideline:{get:function(){return k},set:function(t){k=!!t,W.interactive(!t),W.useVoronoi(!t),r.scatter.interactive(!t)}}}),t.utils.inheritOptions(W,r),t.utils.initOptions(W),W},t.models.stackedAreaWithFocusChart=function(){return t.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},t.models.sunburst=function(){"use strict";var e,n,r,i,o={top:0,right:0,bottom:0,left:0},a=600,s=600,l="count",u={count:function(t){return 1},value:function(t){return t.value||t.size},size:function(t){return t.value||t.size}},c=Math.floor(1e4*Math.random()),f=null,h=t.utils.defaultColor(),d=!1,p=function(t){return"count"===l?t.name+" #"+t.value:t.name+" "+(t.value||t.size)},g=.02,v=function(t,e){return t.name>e.name},m=function(t,e){return void 0!==t.parent?t.name+"-"+t.parent.name+"-"+e:t.name},y=!0,b=500,x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),w=d3.scale.linear().range([0,2*Math.PI]),_=d3.scale.sqrt(),k=d3.layout.partition().sort(v),M={},C=d3.svg.arc().startAngle((function(t){return Math.max(0,Math.min(2*Math.PI,w(t.x)))})).endAngle((function(t){return Math.max(0,Math.min(2*Math.PI,w(t.x+t.dx)))})).innerRadius((function(t){return Math.max(0,_(t.y))})).outerRadius((function(t){return Math.max(0,_(t.y+t.dy))}));function S(t){return A(t)>90?180:0}function A(t){return(Math.max(0,Math.min(2*Math.PI,w(t.x)))+Math.max(0,Math.min(2*Math.PI,w(t.x+t.dx))))/2*(180/Math.PI)-90}function L(t){var e=Math.max(0,Math.min(2*Math.PI,w(t.x)));return(Math.max(0,Math.min(2*Math.PI,w(t.x+t.dx)))-e)/(2*Math.PI)}function E(t){var e=Math.max(0,Math.min(2*Math.PI,w(t.x)));return Math.max(0,Math.min(2*Math.PI,w(t.x+t.dx)))-e>g}function P(t,n){var r=d3.interpolate(w.domain(),[e.x,e.x+e.dx]),o=d3.interpolate(_.domain(),[e.y,1]),a=d3.interpolate(_.range(),[e.y?20:0,i]);return 0===n?function(){return C(t)}:function(e){return w.domain(r(e)),_.domain(o(e)).range(a(e)),C(t)}}function T(t){var e=d3.interpolate({x:t.x0,dx:t.dx0,y:t.y0,dy:t.dy0},t);return function(n){var r=e(n);return t.x0=r.x,t.dx0=r.dx,t.y0=r.y,t.dy0=r.dy,C(r)}}function O(t){t.forEach((function(t){var e=m(t),n=M[e];n?(t.dx0=n.dx,t.x0=n.x,t.dy0=n.dy,t.y0=n.y):(t.dx0=t.dx,t.x0=t.x,t.dy0=t.dy,t.y0=t.y),function(t){var e=m(t);M[e]||(M[e]={});var n=M[e];n.dx=t.dx,n.x=t.x,n.dy=t.dy,n.y=t.y}(t)}))}function D(t){var n=f.selectAll("text"),r=f.selectAll("path");n.transition().attr("opacity",0),e=t,r.transition().duration(b).attrTween("d",P).each("end",(function(e){e.x>=t.x&&e.x<t.x+t.dx&&(e.depth>=t.depth&&d3.select(this.parentNode).select("text").transition().duration(b).text((function(t){return p(t)})).attr("opacity",(function(t){return E(t)?1:0})).attr("transform",(function(){var n=this.getBBox().width;if(0===e.depth)return"translate("+n/2*-1+",0)";if(e.depth===t.depth)return"translate("+(_(e.y)+5)+",0)";var r=A(e),i=S(e);return 0===i?"rotate("+r+")translate("+(_(e.y)+5)+",0)":"rotate("+r+")translate("+(_(e.y)+n+5)+",0)rotate("+i+")"})))}))}var I=t.utils.renderWatch(x);function F(e){return I.reset(),e.each((function(e){f=d3.select(this),n=t.utils.availableWidth(a,f,o),r=t.utils.availableHeight(s,f,o),i=Math.min(n,r)/2,_.range([0,i]);var g=f.select("g.nvd3.nv-wrap.nv-sunburst");g[0][0]?g.attr("transform","translate("+(n/2+o.left+o.right)+","+(r/2+o.top+o.bottom)+")"):g=f.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+c).attr("transform","translate("+(n/2+o.left+o.right)+","+(r/2+o.top+o.bottom)+")"),f.on("click",(function(t,e){x.chartClick({data:t,index:e,pos:d3.event,id:c})})),k.value(u[l]||u.count);var v=k.nodes(e[0]).reverse();O(v);var w=g.selectAll(".arc-container").data(v,m);w.enter().append("g").attr("class","arc-container").append("path").attr("d",C).style("fill",(function(t){return t.color?t.color:h(y?(t.children?t:t.parent).name:t.name)})).style("stroke","#FFF").on("click",(function(t,e){D(t),x.elementClick({data:t,index:e})})).on("mouseover",(function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),x.elementMouseover({data:t,color:d3.select(this).style("fill"),percent:L(t)})})).on("mouseout",(function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),x.elementMouseout({data:t})})).on("mousemove",(function(t,e){x.elementMousemove({data:t})})),w.each((function(t){d3.select(this).select("path").transition().duration(b).attrTween("d",T)})),d&&(w.selectAll("text").remove(),w.append("text").text((function(t){return p(t)})).transition().duration(b).attr("opacity",(function(t){return E(t)?1:0})).attr("transform",(function(t){var e=this.getBBox().width;if(0===t.depth)return"rotate(0)translate("+e/2*-1+",0)";var n=A(t),r=S(t);return 0===r?"rotate("+n+")translate("+(_(t.y)+5)+",0)":"rotate("+n+")translate("+(_(t.y)+e+5)+",0)rotate("+r+")"}))),D(v[v.length-1]),w.exit().transition().duration(b).attr("opacity",0).each("end",(function(t){var e=m(t);M[e]=void 0})).remove()})),I.renderEnd("sunburst immediate"),F}return F.dispatch=x,F.options=t.utils.optionsFunc.bind(F),F._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},mode:{get:function(){return l},set:function(t){l=t}},id:{get:function(){return c},set:function(t){c=t}},duration:{get:function(){return b},set:function(t){b=t}},groupColorByParent:{get:function(){return y},set:function(t){y=!!t}},showLabels:{get:function(){return d},set:function(t){d=!!t}},labelFormat:{get:function(){return p},set:function(t){p=t}},labelThreshold:{get:function(){return g},set:function(t){g=t}},sort:{get:function(){return v},set:function(t){v=t}},key:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return o},set:function(t){o.top=null!=t.top?t.top:o.top,o.right=null!=t.right?t.right:o.right,o.bottom=null!=t.bottom?t.bottom:o.bottom,o.left=null!=t.left?t.left:o.left}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e)}}}),t.utils.initOptions(F),F},t.models.sunburstChart=function(){"use strict";var e=t.models.sunburst(),n=t.models.tooltip(),r={top:30,right:20,bottom:20,left:20},i=t.utils.defaultColor(),o=!1,a=(Math.round(1e5*Math.random()),null),s=null,l=250,u=d3.dispatch("stateChange","changeState","renderEnd"),c=t.utils.renderWatch(u);function f(n){return c.reset(),c.models(e),n.each((function(n){var i=d3.select(this);t.utils.initSVG(i);var o=t.utils.availableWidth(null,i,r),a=t.utils.availableHeight(null,i,r);if(f.update=function(){0===l?i.call(f):i.transition().duration(l).call(f)},f.container=i,!n||!n.length)return t.utils.noData(f,i),f;i.selectAll(".nv-noData").remove(),e.width(o).height(a).margin(r),i.call(e)})),c.renderEnd("sunburstChart immediate"),f}return n.duration(0).headerEnabled(!1).valueFormatter((function(t){return t})),e.dispatch.on("elementMouseover.tooltip",(function(t){t.series={key:t.data.name,value:t.data.value||t.data.size,color:t.color,percent:t.percent},o||(delete t.percent,delete t.series.percent),n.data(t).hidden(!1)})),e.dispatch.on("elementMouseout.tooltip",(function(t){n.hidden(!0)})),e.dispatch.on("elementMousemove.tooltip",(function(t){n()})),f.dispatch=u,f.sunburst=e,f.tooltip=n,f.options=t.utils.optionsFunc.bind(f),f._options=Object.create({},{noData:{get:function(){return s},set:function(t){s=t}},defaultState:{get:function(){return a},set:function(t){a=t}},showTooltipPercent:{get:function(){return o},set:function(t){o=t}},color:{get:function(){return i},set:function(t){i=t,e.color(i)}},duration:{get:function(){return l},set:function(t){l=t,c.reset(l),e.duration(l)}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left,e.margin(r)}}}),t.utils.inheritOptions(f,e),t.utils.initOptions(f),f},t.version="1.8.6"}(),
/**!
 * AngularJS file upload/drop directive and service with progress and abort
 * @author  Danial  <danial.farid@gmail.com>
 * @version 3.0.4
 */
function(){var t,e;window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&(t="setRequestHeader",e=function(t){return function(e,n){if("__setXHR_"===e){var r=n(this);r instanceof Function&&r(this)}else t.apply(this,arguments)}},window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t]));var n=angular.module("angularFileUpload",[]);function r(){var t=document.createElement("div");return"draggable"in t&&"ondrop"in t}function i(t){if(t.length>2&&"/"===t[0]&&"/"===t[t.length-1])return t.substring(1,t.length-1);var e=t.split(","),n="";if(e.length>1)for(var r=0;r<e.length;r++)0==e[r].indexOf(".")&&(e[r]="*"+e[r]),n+="("+i(e[r])+")",r<e.length-1&&(n+="|");else n=(n="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$").replace(/\\\*/g,".*").replace(/\\\?/g,".");return n}n.version="3.0.4",n.service("$upload",["$http","$q","$timeout",function(t,e,n){function r(r){r.method=r.method||"POST",r.headers=r.headers||{},r.transformRequest=r.transformRequest||function(e,n){return window.ArrayBuffer&&e instanceof window.ArrayBuffer?e:t.defaults.transformRequest[0](e,n)};var i=e.defer(),o=i.promise;return r.headers.__setXHR_=function(){return function(t){t&&(r.__XHR=t,r.xhrFn&&r.xhrFn(t),t.upload.addEventListener("progress",(function(t){t.config=r,i.notify?i.notify(t):o.progress_fn&&n((function(){o.progress_fn(t)}))}),!1),t.upload.addEventListener("load",(function(t){t.lengthComputable&&(t.config=r,i.notify?i.notify(t):o.progress_fn&&n((function(){o.progress_fn(t)})))}),!1))}},t(r).then((function(t){i.resolve(t)}),(function(t){i.reject(t)}),(function(t){i.notify(t)})),o.success=function(t){return o.then((function(e){t(e.data,e.status,e.headers,r)})),o},o.error=function(t){return o.then(null,(function(e){t(e.data,e.status,e.headers,r)})),o},o.progress=function(t){return o.progress_fn=t,o.then(null,null,(function(e){t(e)})),o},o.abort=function(){return r.__XHR&&n((function(){r.__XHR.abort()})),o},o.xhr=function(t){var e;return r.xhrFn=(e=r.xhrFn,function(){e&&e.apply(o,arguments),t.apply(o,arguments)}),o},o}this.upload=function(t){t.headers=t.headers||{},t.headers["Content-Type"]=void 0;t.transformRequest;return t.transformRequest=t.transformRequest?"[object Array]"===Object.prototype.toString.call(t.transformRequest)?t.transformRequest:[t.transformRequest]:[],t.transformRequest.push((function(e,n){var r=new FormData,i={};for(var o in t.fields)i[o]=t.fields[o];if(e&&(i.data=e),t.formDataAppender)for(var o in i)t.formDataAppender(r,o,i[o]);else for(var o in i){var a=i[o];void 0!==a&&("[object String]"===Object.prototype.toString.call(a)?r.append(o,a):t.sendObjectsAsJsonBlob&&"object"==typeof a?r.append(o,new Blob([a],{type:"application/json"})):r.append(o,JSON.stringify(a)))}if(null!=t.file){var s=t.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(t.file))for(var l="[object String]"===Object.prototype.toString.call(s),u=0;u<t.file.length;u++)r.append(l?s:s[u],t.file[u],t.fileName&&t.fileName[u]||t.file[u].name);else r.append(s,t.file,t.fileName||t.file.name)}return r})),r(t)},this.http=function(t){return r(t)}}]),n.directive("ngFileSelect",["$parse","$timeout","$compile",function(t,e,n){return{restrict:"AEC",require:"?ngModel",link:function(r,o,a,s){!function(t,e,n,r,o,a,s){var l=[];function u(){var n=e.clone();if(e.attr("__afu_gen__")&&angular.element(document.getElementById(e.attr("id").substring(1))).remove(),e.parent().length){for(var r=0;r<l.length;r++)l[r]();e.replaceWith(n),s(n)(t)}return n}function c(r,i){if(r){c=r,a((function(){e.parent().length&&l.push(t.$watch(c,(function(t,e){t!=e&&u()})))}));var s=o(r)(t);s?(e.attr(i,s),n[i]=s):(e.attr(i,null),delete n[i])}var c}c(n.ngMultiple,"multiple"),c(n.ngAccept,"accept"),c(n.ngCapture,"capture"),""!=n.ngFileSelect&&(n.ngFileChange=n.ngFileSelect);function f(e){!function(t,e,n,r,s){for(var l=[],u=[],c=e.accept?new RegExp(i(e.accept),"gi"):null,f=0;f<t.length;f++){var h=t.item(f);!c||h.type.match(c)||null!=h.name&&h.name.match(c)?l.push(h):u.push(h)}n&&a((function(){r[e.ngModel]&&(r[e.ngModel].value=l),r[e.ngModel]=l,n&&n.$setViewValue(null!=l&&0==l.length?"":l),e.ngModelRejected&&(r[e.ngModelRejected]&&(r[e.ngModelRejected].value=u),r[e.ngModelRejected]=u)}));e.ngFileChange&&""!=e.ngFileChange&&a((function(){o(e.ngFileChange)(r,{$files:l,$rejectedFiles:u,$event:s})}))}(e.__files_||e.target&&e.target.files,n,r,t,e)}var h=e;if("input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase())e.bind("click",g);else{for(var d in h=angular.element('<input type="file">'),n.multiple&&h.attr("multiple",n.multiple),n.accept&&h.attr("accept",n.accept),n.capture&&h.attr("capture",n.capture),n)if(0==d.indexOf("inputFile")){var p=d.substring("inputFile".length);p=p[0].toLowerCase()+p.substring(1),h.attr(p,n[d])}h.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__afu_gen__",!0),e.attr("__refElem__",!0),h[0].__refElem__=e[0],e.parent()[0].insertBefore(h[0],e[0]),e.css("overflow","hidden"),e.bind("click",(function(t){g(t)||h[0].click()}))}function g(t){var n=null!=h[0].value&&""!=h[0].value;if(h[0].value=null,-1===navigator.userAgent.indexOf("Chrome"))if(e.attr("__afu_clone__"))e.attr("__afu_clone__",null);else if(n&&f({target:{files:[]}}),-1!==navigator.appVersion.indexOf("MSIE 10")){var r=u();return r.attr("__afu_clone__",!0),r[0].click(),t.preventDefault(),t.stopPropagation(),!0}}h.bind("change",f),e.on("$destroy",(function(){for(var t=0;t<l.length;t++)l[t]();e[0]!=h[0]&&h.remove()})),l.push(t.$watch(n.ngModel,(function(t,e){t==e||null!=t&&t.length||(-1!==navigator.appVersion.indexOf("MSIE 10")?u():h[0].value=null)})))}(r,o,a,s,t,e,n)}}}]),n.directive("ngFileDrop",["$parse","$timeout","$location",function(t,e,n){return{restrict:"AEC",require:"?ngModel",link:function(o,a,s,l){!function(t,e,n,o,a,s,l){var u=r();n.dropAvailable&&s((function(){t.dropAvailable?t.dropAvailable.value=u:t.dropAvailable=u}));if(!u)return void(0!=a(n.hideOnDropNotAvailable)(t)&&e.css("display","none"));var c,f=null,h=a(n.stopPropagation)(t),d=1,p=a(n.ngAccept)(t)||n.accept,g=p?new RegExp(i(p),"gi"):null;e[0].addEventListener("dragover",(function(r){r.preventDefault(),h&&r.stopPropagation();var i=r.dataTransfer.effectAllowed;r.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",s.cancel(f),t.actualDragOverClass||(c=function(t,e,n){var r=!0;if(g){var i=n.dataTransfer.items;if(null!=i)for(var o=0;o<i.length&&r;o++)r=r&&("file"==i[o].kind||""==i[o].kind)&&(null!=i[o].type.match(g)||null!=i[o].name&&null!=i[o].name.match(g))}var s=a(e.dragOverClass)(t,{$event:n});s&&(s.delay&&(d=s.delay),s.accept&&(s=r?s.accept:s.reject));return s||e.dragOverClass||"dragover"}(t,n,r)),e.addClass(c)}),!1),e[0].addEventListener("dragenter",(function(t){t.preventDefault(),h&&t.stopPropagation()}),!1),e[0].addEventListener("dragleave",(function(t){f=s((function(){e.removeClass(c),c=null}),d||1)}),!1),""!=n.ngFileDrop&&(n.ngFileChange=t.ngFileDrop);e[0].addEventListener("drop",(function(r){r.preventDefault(),h&&r.stopPropagation(),e.removeClass(c),c=null,function(t,e,n,r){var i,o=[],a=[],u=t.dataTransfer.items,c=0;function f(t){!g||t.type.match(g)||null!=t.name&&t.name.match(g)?o.push(t):a.push(t)}if(u&&u.length>0&&"file"!=l.protocol())for(var h=0;h<u.length;h++){if(u[h].webkitGetAsEntry&&u[h].webkitGetAsEntry()&&u[h].webkitGetAsEntry().isDirectory){var d=u[h].webkitGetAsEntry();if(d.isDirectory&&!n)continue;null!=d&&(i=d.name,/^[\000-\177]*$/.test(i)?y(o,d):u[h].webkitGetAsEntry().isDirectory||f(u[h].getAsFile()))}else{var p=u[h].getAsFile();null!=p&&f(p)}if(!r&&o.length>0)break}else{var v=t.dataTransfer.files;if(null!=v)for(h=0;h<v.length&&(f(v.item(h)),r||!(o.length>0));h++);}var m=0;function y(t,e,n){if(null!=e)if(e.isDirectory){var r=(n||"")+e.name;f({name:e.name,type:"directory",path:r});var i=e.createReader(),o=[];c++;var a=function(){i.readEntries((function(r){try{if(r.length)o=o.concat(Array.prototype.slice.call(r||[],0)),a();else{for(var i=0;i<o.length;i++)y(t,o[i],(n||"")+e.name+"/");c--}}catch(t){c--,console.error(t)}}),(function(){c--}))};a()}else c++,e.file((function(t){try{c--,t.path=(n||"")+t.name,f(t)}catch(t){c--,console.error(t)}}),(function(t){c--}))}!function t(n){s((function(){if(c)10*m++<2e4&&t(10);else{if(!r&&o.length>1){for(var n=0;"directory"==o[n].type;)n++;o=[o[n]]}e(o,a)}}),n||0)}()}(r,(function(e,i){s((function(){o&&(t[n.ngModel]&&(t[n.ngModel].value=e),t[n.ngModel]=e,o&&o.$setViewValue(null!=e&&0==e.length?"":e)),n.ngModelRejected&&(t[n.ngModelRejected]&&(t[n.ngModelRejected].value=i),t[n.ngModelRejected]=i)})),s((function(){a(n.ngFileChange)(t,{$files:e,$rejectedFiles:i,$event:r})}))}),0!=a(n.allowDir)(t),n.multiple||a(n.ngMultiple)(t))}),!1)}(o,a,s,l,t,e,n)}}}]),n.directive("ngNoFileDrop",(function(){return function(t,e,n){r()&&e.css("display","none")}})),n.directive("ngFileDropAvailable",["$parse","$timeout",function(t,e){return function(n,i,o){if(r()){var a=t(o.ngFileDropAvailable);e((function(){a(n)}))}}}]);var o=angular.module("ngFileUpload",[]);for(var a in n)o[a]=n[a]}(),
/**!
 * AngularJS file upload/drop directive and service with progress and abort
 * FileAPI Flash shim for old browsers not supporting FormData 
 * @author  Danial  <danial.farid@gmail.com>
 * @version 3.0.4
 */
function(){var t,e,n=function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(t){if(null!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1};function r(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}if(window.XMLHttpRequest&&!window.FormData||window.FileAPI&&FileAPI.forceLoad){var i=function(t){if(!t.__listeners){t.upload||(t.upload={}),t.__listeners=[];var e=t.upload.addEventListener;t.upload.addEventListener=function(n,r,i){t.__listeners[n]=r,e&&e.apply(this,arguments)}}};function o(t,e,n){try{Object.defineProperty(t,e,{get:n})}catch(t){}}r("open",(function(t){return function(e,n,r){i(this),this.__url=n;try{t.apply(this,[e,n,r])}catch(n){n.message.indexOf("Access is denied")>-1&&(this.__origError=n,this.__url="_fix_for_ie_crossdomain__",t.apply(this,[e,this.__url,r]))}}})),r("getResponseHeader",(function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}})),r("getAllResponseHeaders",(function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==t?null:t.apply(this)}})),r("abort",(function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==t?null:t.apply(this)}})),r("setRequestHeader",(function(t){return function(e,n){if("__setXHR_"===e){i(this);var r=n(this);r instanceof Function&&r(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=n,t.apply(this,arguments)}})),r("send",(function(t){return function(){var e=this;if(arguments[0]&&arguments[0].__isFileAPIShim){for(var r=arguments[0],i={url:e.__url,jsonp:!1,cache:!0,complete:function(t,n){e.__completed=!0,!t&&e.__listeners.load&&e.__listeners.load({type:"load",loaded:e.__loaded,total:e.__total,target:e,lengthComputable:!0}),!t&&e.__listeners.loadend&&e.__listeners.loadend({type:"loadend",loaded:e.__loaded,total:e.__total,target:e,lengthComputable:!0}),"abort"===t&&e.__listeners.abort&&e.__listeners.abort({type:"abort",loaded:e.__loaded,total:e.__total,target:e,lengthComputable:!0}),void 0!==n.status&&o(e,"status",(function(){return 0==n.status&&t&&"abort"!==t?500:n.status})),void 0!==n.statusText&&o(e,"statusText",(function(){return n.statusText})),o(e,"readyState",(function(){return 4})),void 0!==n.response&&o(e,"response",(function(){return n.response}));var r=n.responseText||(t&&0==n.status&&"abort"!==t?t:void 0);o(e,"responseText",(function(){return r})),o(e,"response",(function(){return r})),t&&o(e,"err",(function(){return t})),e.__fileApiXHR=n,e.onreadystatechange&&e.onreadystatechange(),e.onload&&e.onload()},fileprogress:function(t){if(t.target=e,e.__listeners.progress&&e.__listeners.progress(t),e.__total=t.total,e.__loaded=t.loaded,t.total===t.loaded){var n=this;setTimeout((function(){e.__completed||(e.getAllResponseHeaders=function(){},n.complete(null,{status:204,statusText:"No Content"}))}),FileAPI.noContentTimeout||1e4)}},headers:e.__requestHeaders,data:{},files:{}},a=0;a<r.data.length;a++){var s=r.data[a];null!=s.val&&null!=s.val.name&&null!=s.val.size&&null!=s.val.type?i.files[s.key]=s.val:i.data[s.key]=s.val}setTimeout((function(){if(!n())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';e.__fileApiXHR=FileAPI.upload(i)}),1)}else{if("_fix_for_ie_crossdomain__"===this.__url)throw this.__origError;t.apply(e,arguments)}}})),window.XMLHttpRequest.__isFileAPIShim=!0;var a=function(t){if(!n())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var e=angular.element(t);if(!e.attr("disabled")){for(var r=!1,i=0;i<e[0].attributes.length;i++){if(-1!==e[0].attributes[i].name.indexOf("file-select")){r=!0;break}}if(!e.hasClass("js-fileapi-wrapper")&&(r||null!=e.attr("__afu_gen__"))&&(e.addClass("js-fileapi-wrapper"),null!=e.attr("__afu_gen__"))){for(var o=e[0].__refElem__&&angular.element(e[0].__refElem__)||e;o&&!o.attr("__refElem__");)o=angular.element(o[0].nextSibling);o.bind("mouseover",(function(){""!==e.parent().css("position")&&"static"!==e.parent().css("position")||e.parent().css("position","relative"),e.css("position","absolute").css("top",o[0].offsetTop+"px").css("left",o[0].offsetLeft+"px").css("width",o[0].offsetWidth+"px").css("height",o[0].offsetHeight+"px").css("padding",o.css("padding")).css("margin",o.css("margin")).css("filter","alpha(opacity=0)"),o.attr("onclick",""),e.css("z-index","1000")}))}}},s=function(t){return function(e){for(var n=FileAPI.getFiles(e),r=0;r<n.length;r++)void 0===n[r].size&&(n[r].size=0),void 0===n[r].name&&(n[r].name="file"),void 0===n[r].type&&(n[r].type="undefined");e.target||(e.target={}),e.target.files=n,e.target.files!=n&&(e.__files_=n),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null},t&&t.apply(this,[e])}},l=function(t,e){return("change"===e.toLowerCase()||"onchange"===e.toLowerCase())&&"file"==t.getAttribute("type")};HTMLInputElement.prototype.addEventListener&&(HTMLInputElement.prototype.addEventListener=(e=HTMLInputElement.prototype.addEventListener,function(t,n,r,i){l(this,t)?(a(this),e.apply(this,[t,s(n),r,i])):e.apply(this,[t,n,r,i])})),HTMLInputElement.prototype.attachEvent&&(HTMLInputElement.prototype.attachEvent=(t=HTMLInputElement.prototype.attachEvent,function(e,n){l(this,e)?(a(this),window.jQuery?angular.element(this).bind("change",s(null)):t.apply(this,[e,s(n)])):t.apply(this,[e,n])})),window.FormData=FormData=function(){return{append:function(t,e,n){e.__isFileAPIBlobShim&&(e=e.data[0]),this.data.push({key:t,val:e,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(t){return{data:t,__isFileAPIBlobShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var t,e,r,i,o,a=document.createElement("script"),s=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)t=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)e=window.FileAPI.jsPath;else for(r=0;r<s.length;r++)if((i=(o=s[r].src).search(/\/angular\-file\-upload[\-a-zA-z0-9\.]*\.js/))>-1){e=o.substring(0,i+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=e),a.setAttribute("src",t||e+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(a),FileAPI.hasFlash=n()}}(),FileAPI.disableFileInput=function(t,e){e?t.removeClass("js-fileapi-wrapper"):t.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var t=this,e=!1;this.listeners={},this.addEventListener=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},this.removeEventListener=function(e,n){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(n),1)},this.dispatchEvent=function(e){var n=t.listeners[e.type];if(n)for(var r=0;r<n.length;r++)n[r].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(e,n){var r={type:e,target:t,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){if(e||(e=!0,t.onloadstart&&t.onloadstart(n("loadstart",r))),"load"===r.type){t.onloadend&&t.onloadend(n("loadend",r));var i=n("load",r);t.onload&&t.onload(i),t.dispatchEvent(i)}else if("progress"===r.type){i=n("progress",r);t.onprogress&&t.onprogress(i),t.dispatchEvent(i)}else{i=n("error",r);t.onerror&&t.onerror(i),t.dispatchEvent(i)}};this.readAsArrayBuffer=function(t){FileAPI.readAsBinaryString(t,r)},this.readAsBinaryString=function(t){FileAPI.readAsBinaryString(t,r)},this.readAsDataURL=function(t){FileAPI.readAsDataURL(t,r)},this.readAsText=function(t){FileAPI.readAsText(t,r)}})}(),function(t){var e;function r(){var t=Error.apply(this,arguments);t.name=this.name="FlashError",this.stack=t.stack,this.message=t.message}function i(){var t=Error.apply(this,arguments);t.name=this.name="WebcamError",this.stack=t.stack,this.message=t.message}var o=function(){};o.prototype=Error.prototype,r.prototype=new o,i.prototype=new o;var a={version:"1.0.26",protocol:location.protocol.match(/https/i)?"https":"http",loaded:!1,live:!1,userMedia:!0,iOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream,params:{width:0,height:0,dest_width:0,dest_height:0,image_format:"jpeg",jpeg_quality:90,enable_flash:!0,force_flash:!1,flip_horiz:!1,fps:30,upload_name:"webcam",constraints:null,swfURL:"",flashNotDetectedText:"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).",noInterfaceFoundText:"No supported webcam interface found.",unfreeze_snap:!0,iosPlaceholderText:"Click here to open camera.",user_callback:null,user_canvas:null},errors:{FlashError:r,WebcamError:i},hooks:{},init:function(){var e=this;this.mediaDevices=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices:navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(t){return new Promise((function(e,n){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,t,e,n)}))}}:null,t.URL=t.URL||t.webkitURL||t.mozURL||t.msURL,this.userMedia=this.userMedia&&!!this.mediaDevices&&!!t.URL,navigator.userAgent.match(/Firefox\D+(\d+)/)&&parseInt(RegExp.$1,10)<21&&(this.userMedia=null),this.userMedia&&t.addEventListener("beforeunload",(function(t){e.reset()}))},exifOrientation:function(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return console.log("Not a valid JPEG file"),0;for(var r=2;r<t.byteLength;){if(255!=e.getUint8(r))return console.log("Not a valid marker at offset "+r+", found: "+e.getUint8(r)),0;if(225==e.getUint8(r+1)){r+=4;var i="";for(n=0;n<4;n++)i+=String.fromCharCode(e.getUint8(r+n));if("Exif"!=i)return console.log("Not valid EXIF data found"),0;r+=6;var o=null;if(18761==e.getUint16(r))o=!1;else{if(19789!=e.getUint16(r))return console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),0;o=!0}if(42!=e.getUint16(r+2,!o))return console.log("Not valid TIFF data! (no 0x002A)"),0;var a=e.getUint32(r+4,!o);if(a<8)return console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(r+4,!o)),0;for(var s=r+a,l=e.getUint16(s,!o),u=0;u<l;u++){var c=s+12*u+2;if(274==e.getUint16(c,!o)){var f=e.getUint16(c+2,!o),h=e.getUint32(c+4,!o);if(3!=f&&1!=h)return console.log("Invalid EXIF orientation value type ("+f+") or count ("+h+")"),0;var d=e.getUint16(c+8,!o);return d<1||d>8?(console.log("Invalid EXIF orientation value ("+d+")"),0):d}}}else r+=2+e.getUint16(r+2)}return 0},fixOrientation:function(t,e,n){var r=new Image;r.addEventListener("load",(function(t){var i=document.createElement("canvas"),o=i.getContext("2d");switch(e<5?(i.width=r.width,i.height=r.height):(i.width=r.height,i.height=r.width),e){case 2:o.transform(-1,0,0,1,r.width,0);break;case 3:o.transform(-1,0,0,-1,r.width,r.height);break;case 4:o.transform(1,0,0,-1,0,r.height);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r.height,0);break;case 7:o.transform(0,-1,-1,0,r.height,r.width);break;case 8:o.transform(0,-1,1,0,0,r.width)}o.drawImage(r,0,0),n.src=i.toDataURL()}),!1),r.src=t},attach:function(n){if("string"==typeof n&&(n=document.getElementById(n)||document.querySelector(n)),!n)return this.dispatch("error",new i("Could not locate DOM element to attach to."));this.container=n,n.innerHTML="";var r=document.createElement("div");if(n.appendChild(r),this.peg=r,this.params.width||(this.params.width=n.offsetWidth),this.params.height||(this.params.height=n.offsetHeight),!this.params.width||!this.params.height)return this.dispatch("error",new i("No width and/or height for webcam.  Please call set() first, or attach to a visible element."));this.params.dest_width||(this.params.dest_width=this.params.width),this.params.dest_height||(this.params.dest_height=this.params.height),this.userMedia=void 0===e?this.userMedia:e,this.params.force_flash&&(e=this.userMedia,this.userMedia=null),"number"!=typeof this.params.fps&&(this.params.fps=30);var o=this.params.width/this.params.dest_width,s=this.params.height/this.params.dest_height;if(this.userMedia){var l=document.createElement("video");l.setAttribute("autoplay","autoplay"),l.setAttribute("playsinline","playsinline"),l.style.width=this.params.dest_width+"px",l.style.height=this.params.dest_height+"px",1==o&&1==s||(n.style.overflow="hidden",l.style.webkitTransformOrigin="0px 0px",l.style.mozTransformOrigin="0px 0px",l.style.msTransformOrigin="0px 0px",l.style.oTransformOrigin="0px 0px",l.style.transformOrigin="0px 0px",l.style.webkitTransform="scaleX("+o+") scaleY("+s+")",l.style.mozTransform="scaleX("+o+") scaleY("+s+")",l.style.msTransform="scaleX("+o+") scaleY("+s+")",l.style.oTransform="scaleX("+o+") scaleY("+s+")",l.style.transform="scaleX("+o+") scaleY("+s+")"),n.appendChild(l),this.video=l;var u=this;this.mediaDevices.getUserMedia({audio:!1,video:this.params.constraints||{mandatory:{minWidth:this.params.dest_width,minHeight:this.params.dest_height}}}).then((function(e){l.onloadedmetadata=function(t){u.stream=e,u.loaded=!0,u.live=!0,u.dispatch("load"),u.dispatch("live"),u.flip()},"srcObject"in l?l.srcObject=e:l.src=t.URL.createObjectURL(e)})).catch((function(t){u.params.enable_flash&&u.detectFlash()?setTimeout((function(){u.params.force_flash=1,u.attach(n)}),1):u.dispatch("error",t)}))}else if(this.iOS){(p=document.createElement("div")).id=this.container.id+"-ios_div",p.className="webcamjs-ios-placeholder",p.style.width=this.params.width+"px",p.style.height=this.params.height+"px",p.style.textAlign="center",p.style.display="table-cell",p.style.verticalAlign="middle",p.style.backgroundRepeat="no-repeat",p.style.backgroundSize="contain",p.style.backgroundPosition="center";var c=document.createElement("span");c.className="webcamjs-ios-text",c.innerHTML=this.params.iosPlaceholderText,p.appendChild(c);var f=document.createElement("img");f.id=this.container.id+"-ios_img",f.style.width=this.params.dest_width+"px",f.style.height=this.params.dest_height+"px",f.style.display="none",p.appendChild(f);var h=document.createElement("input");h.id=this.container.id+"-ios_input",h.setAttribute("type","file"),h.setAttribute("accept","image/*"),h.setAttribute("capture","camera");u=this;var d=this.params;h.addEventListener("change",(function(t){if(t.target.files.length>0&&0==t.target.files[0].type.indexOf("image/")){var e=URL.createObjectURL(t.target.files[0]),n=new Image;n.addEventListener("load",(function(t){var e=document.createElement("canvas");e.width=d.dest_width,e.height=d.dest_height;var r=e.getContext("2d");ratio=Math.min(n.width/d.dest_width,n.height/d.dest_height);var i=d.dest_width*ratio,o=d.dest_height*ratio,a=(n.width-i)/2,s=(n.height-o)/2;r.drawImage(n,a,s,i,o,0,0,d.dest_width,d.dest_height);var l=e.toDataURL();f.src=l,p.style.backgroundImage="url('"+l+"')"}),!1);var r=new FileReader;r.addEventListener("load",(function(t){var r=u.exifOrientation(t.target.result);r>1?u.fixOrientation(e,r,n):n.src=e}),!1);var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(t){200!=this.status&&0!==this.status||r.readAsArrayBuffer(this.response)},i.send()}}),!1),h.style.display="none",n.appendChild(h),p.addEventListener("click",(function(t){d.user_callback?u.snap(d.user_callback,d.user_canvas):(h.style.display="block",h.focus(),h.click(),h.style.display="none")}),!1),n.appendChild(p),this.loaded=!0,this.live=!0}else if(this.params.enable_flash&&this.detectFlash()){var p;t.Webcam=a,(p=document.createElement("div")).innerHTML=this.getSWFHTML(),n.appendChild(p)}else this.dispatch("error",new i(this.params.noInterfaceFoundText));if(this.params.crop_width&&this.params.crop_height){var g=Math.floor(this.params.crop_width*o),v=Math.floor(this.params.crop_height*s);n.style.width=g+"px",n.style.height=v+"px",n.style.overflow="hidden",n.scrollLeft=Math.floor(this.params.width/2-g/2),n.scrollTop=Math.floor(this.params.height/2-v/2)}else n.style.width=this.params.width+"px",n.style.height=this.params.height+"px"},reset:function(){if(this.preview_active&&this.unfreeze(),this.unflip(),this.userMedia){if(this.stream)if(this.stream.getVideoTracks){var t=this.stream.getVideoTracks();t&&t[0]&&t[0].stop&&t[0].stop()}else this.stream.stop&&this.stream.stop();delete this.stream,delete this.video}if(!0!==this.userMedia&&this.loaded&&!this.iOS){var e=this.getMovie();e&&e._releaseCamera&&e._releaseCamera()}this.container&&(this.container.innerHTML="",delete this.container),this.loaded=!1,this.live=!1},set:function(){if(1==arguments.length)for(var t in arguments[0])this.params[t]=arguments[0][t];else this.params[arguments[0]]=arguments[1]},on:function(t,e){t=t.replace(/^on/i,"").toLowerCase(),this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push(e)},off:function(t,e){if(t=t.replace(/^on/i,"").toLowerCase(),this.hooks[t])if(e){var n=this.hooks[t].indexOf(e);n>-1&&this.hooks[t].splice(n,1)}else this.hooks[t]=[]},dispatch:function(){var e,n=arguments[0].replace(/^on/i,"").toLowerCase(),o=Array.prototype.slice.call(arguments,1);if(this.hooks[n]&&this.hooks[n].length){for(var a=0,s=this.hooks[n].length;a<s;a++){var l=this.hooks[n][a];"function"==typeof l?l.apply(this,o):"object"==typeof l&&2==l.length?l[0][l[1]].apply(l[0],o):t[l]&&t[l].apply(t,o)}return!0}return"error"==n&&(e=o[0]instanceof r||o[0]instanceof i?o[0].message:"Could not access webcam: "+o[0].name+": "+o[0].message+" "+o[0].toString(),alert("Webcam.js Error: "+e)),!1},setSWFLocation:function(t){this.set("swfURL",t)},detectFlash:function(){var e=t,n=navigator,r=!1;if(void 0!==n.plugins&&"object"==typeof n.plugins["Shockwave Flash"])n.plugins["Shockwave Flash"].description&&void 0!==n.mimeTypes&&n.mimeTypes["application/x-shockwave-flash"]&&n.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(r=!0);else if(void 0!==e.ActiveXObject)try{var i=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(i)i.GetVariable("$version")&&(r=!0)}catch(t){}return r},getSWFHTML:function(){var e="",n=this.params.swfURL;if(location.protocol.match(/file/))return this.dispatch("error",new r("Flash does not work from local disk.  Please run from a web server.")),'<h3 style="color:red">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';if(!this.detectFlash())return this.dispatch("error",new r("Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.")),'<h3 style="color:red">'+this.params.flashNotDetectedText+"</h3>";if(!n){for(var i="",o=document.getElementsByTagName("script"),a=0,s=o.length;a<s;a++){var l=o[a].getAttribute("src");l&&l.match(/\/webcam(\.min)?\.js/)&&(i=l.replace(/\/webcam(\.min)?\.js.*$/,""),a=s)}n=i?i+"/webcam.swf":"webcam.swf"}t.localStorage&&!localStorage.getItem("visited")&&(this.params.new_user=1,localStorage.setItem("visited",1));var u="";for(var c in this.params)u&&(u+="&"),u+=c+"="+escape(this.params[c]);return e+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" codebase="'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+this.params.width+'" height="'+this.params.height+'" id="webcam_movie_obj" align="middle"><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+n+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+u+'"/><embed id="webcam_movie_embed" src="'+n+'" wmode="opaque" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+this.params.width+'" height="'+this.params.height+'" name="webcam_movie_embed" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+u+'"></embed></object>'},getMovie:function(){if(!this.loaded)return this.dispatch("error",new r("Flash Movie is not loaded yet"));var t=document.getElementById("webcam_movie_obj");return t&&t._snap||(t=document.getElementById("webcam_movie_embed")),t||this.dispatch("error",new r("Cannot locate Flash movie in DOM")),t},freeze:function(){var t=this,e=this.params;this.preview_active&&this.unfreeze();var n=this.params.width/this.params.dest_width,r=this.params.height/this.params.dest_height;this.unflip();var i=e.crop_width||e.dest_width,o=e.crop_height||e.dest_height,a=document.createElement("canvas");a.width=i,a.height=o;var s=a.getContext("2d");this.preview_canvas=a,this.preview_context=s,1==n&&1==r||(a.style.webkitTransformOrigin="0px 0px",a.style.mozTransformOrigin="0px 0px",a.style.msTransformOrigin="0px 0px",a.style.oTransformOrigin="0px 0px",a.style.transformOrigin="0px 0px",a.style.webkitTransform="scaleX("+n+") scaleY("+r+")",a.style.mozTransform="scaleX("+n+") scaleY("+r+")",a.style.msTransform="scaleX("+n+") scaleY("+r+")",a.style.oTransform="scaleX("+n+") scaleY("+r+")",a.style.transform="scaleX("+n+") scaleY("+r+")"),this.snap((function(){a.style.position="relative",a.style.left=t.container.scrollLeft+"px",a.style.top=t.container.scrollTop+"px",t.container.insertBefore(a,t.peg),t.container.style.overflow="hidden",t.preview_active=!0}),a)},unfreeze:function(){this.preview_active&&(this.container.removeChild(this.preview_canvas),delete this.preview_context,delete this.preview_canvas,this.preview_active=!1,this.flip())},flip:function(){if(this.params.flip_horiz){var t=this.container.style;t.webkitTransform="scaleX(-1)",t.mozTransform="scaleX(-1)",t.msTransform="scaleX(-1)",t.oTransform="scaleX(-1)",t.transform="scaleX(-1)",t.filter="FlipH",t.msFilter="FlipH"}},unflip:function(){if(this.params.flip_horiz){var t=this.container.style;t.webkitTransform="scaleX(1)",t.mozTransform="scaleX(1)",t.msTransform="scaleX(1)",t.oTransform="scaleX(1)",t.transform="scaleX(1)",t.filter="",t.msFilter=""}},savePreview:function(t,e){var n=this.params,r=this.preview_canvas,i=this.preview_context;e&&e.getContext("2d").drawImage(r,0,0);t(e?null:r.toDataURL("image/"+n.image_format,n.jpeg_quality/100),r,i),this.params.unfreeze_snap&&this.unfreeze()},snap:function(t,e){t||(t=this.params.user_callback),e||(e=this.params.user_canvas);var n=this.params;if(!this.loaded)return this.dispatch("error",new i("Webcam is not loaded yet"));if(!t)return this.dispatch("error",new i("Please provide a callback function or canvas to snap()"));if(this.preview_active)return this.savePreview(t,e),null;var r=document.createElement("canvas");r.width=this.params.dest_width,r.height=this.params.dest_height;var o=r.getContext("2d");this.params.flip_horiz&&(o.translate(n.dest_width,0),o.scale(-1,1));var a=function(){if(this.src&&this.width&&this.height&&o.drawImage(this,0,0,n.dest_width,n.dest_height),n.crop_width&&n.crop_height){var i=document.createElement("canvas");i.width=n.crop_width,i.height=n.crop_height;var a=i.getContext("2d");a.drawImage(r,Math.floor(n.dest_width/2-n.crop_width/2),Math.floor(n.dest_height/2-n.crop_height/2),n.crop_width,n.crop_height,0,0,n.crop_width,n.crop_height),o=a,r=i}e&&e.getContext("2d").drawImage(r,0,0);t(e?null:r.toDataURL("image/"+n.image_format,n.jpeg_quality/100),r,o)};if(this.userMedia)o.drawImage(this.video,0,0,this.params.dest_width,this.params.dest_height),a();else if(this.iOS){var s=document.getElementById(this.container.id+"-ios_div"),l=document.getElementById(this.container.id+"-ios_img"),u=document.getElementById(this.container.id+"-ios_input");iFunc=function(t){a.call(l),l.removeEventListener("load",iFunc),s.style.backgroundImage="none",l.removeAttribute("src"),u.value=null},u.value?iFunc(null):(l.addEventListener("load",iFunc),u.style.display="block",u.focus(),u.click(),u.style.display="none")}else{var c=this.getMovie()._snap();(l=new Image).onload=a,l.src="data:image/"+this.params.image_format+";base64,"+c}return null},configure:function(t){t||(t="camera"),this.getMovie()._configure(t)},flashNotify:function(t,e){switch(t){case"flashLoadComplete":this.loaded=!0,this.dispatch("load");break;case"cameraLive":this.live=!0,this.dispatch("live");break;case"error":this.dispatch("error",new r(e))}},b64ToUint6:function(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:43===t?62:47===t?63:0},base64DecToArr:function(t,e){for(var n,r,i=t.replace(/[^A-Za-z0-9\+\/]/g,""),o=i.length,a=e?Math.ceil((3*o+1>>2)/e)*e:3*o+1>>2,s=new Uint8Array(a),l=0,u=0,c=0;c<o;c++)if(r=3&c,l|=this.b64ToUint6(i.charCodeAt(c))<<18-6*r,3===r||o-c==1){for(n=0;n<3&&u<a;n++,u++)s[u]=l>>>(16>>>n&24)&255;l=0}return s},upload:function(t,e,n){var r=this.params.upload_name||"webcam",i="";if(!t.match(/^data\:image\/(\w+)/))throw"Cannot locate image format in Data URI";i=RegExp.$1;var o=t.replace(/^data\:image\/\w+\;base64\,/,""),s=new XMLHttpRequest;s.open("POST",e,!0),s.upload&&s.upload.addEventListener&&s.upload.addEventListener("progress",(function(t){if(t.lengthComputable){var e=t.loaded/t.total;a.dispatch("uploadProgress",e,t)}}),!1);var l=this;s.onload=function(){n&&n.apply(l,[s.status,s.responseText,s.statusText]),a.dispatch("uploadComplete",s.status,s.responseText,s.statusText)};var u=new Blob([this.base64DecToArr(o)],{type:"image/"+i}),c=new FormData;c.append(r,u,r+"."+i.replace(/e/,"")),s.send(c)}};a.init(),"function"==typeof define&&define.amd?define((function(){return a})):"object"==typeof module&&module.exports?module.exports=a:t.Webcam=a}(window);var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(t){var e=/\blang(?:uage)?-([\w-]+)\b/i,n=0,r={manual:t.Prism&&t.Prism.manual,disableWorkerMessageHandler:t.Prism&&t.Prism.disableWorkerMessageHandler,util:{encode:function(t){return t instanceof i?new i(t.type,r.util.encode(t.content),t.alias):Array.isArray(t)?t.map(r.util.encode):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).slice(8,-1)},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++n}),t.__id},clone:function t(e,n){var i,o,a=r.util.type(e);switch(n=n||{},a){case"Object":if(o=r.util.objId(e),n[o])return n[o];for(var s in i={},n[o]=i,e)e.hasOwnProperty(s)&&(i[s]=t(e[s],n));return i;case"Array":return o=r.util.objId(e),n[o]?n[o]:(i=[],n[o]=i,e.forEach((function(e,r){i[r]=t(e,n)})),i);default:return e}},getLanguage:function(t){for(;t&&!e.test(t.className);)t=t.parentElement;return t?(t.className.match(e)||[,"none"])[1].toLowerCase():"none"},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(r){var t=(/at [^(\r\n]*\((.*):.+:.+\)$/i.exec(r.stack)||[])[1];if(t){var e=document.getElementsByTagName("script");for(var n in e)if(e[n].src==t)return e[n]}return null}}},languages:{extend:function(t,e){var n=r.util.clone(r.languages[t]);for(var i in e)n[i]=e[i];return n},insertBefore:function(t,e,n,i){var o=(i=i||r.languages)[t],a={};for(var s in o)if(o.hasOwnProperty(s)){if(s==e)for(var l in n)n.hasOwnProperty(l)&&(a[l]=n[l]);n.hasOwnProperty(s)||(a[s]=o[s])}var u=i[t];return i[t]=a,r.languages.DFS(r.languages,(function(e,n){n===u&&e!=t&&(this[e]=a)})),a},DFS:function t(e,n,i,o){o=o||{};var a=r.util.objId;for(var s in e)if(e.hasOwnProperty(s)){n.call(e,s,e[s],i||s);var l=e[s],u=r.util.type(l);"Object"!==u||o[a(l)]?"Array"!==u||o[a(l)]||(o[a(l)]=!0,t(l,n,s,o)):(o[a(l)]=!0,t(l,n,null,o))}}},plugins:{},highlightAll:function(t,e){r.highlightAllUnder(document,t,e)},highlightAllUnder:function(t,e,n){var i={callback:n,container:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};r.hooks.run("before-highlightall",i),i.elements=Array.prototype.slice.apply(i.container.querySelectorAll(i.selector)),r.hooks.run("before-all-elements-highlight",i);for(var o,a=0;o=i.elements[a++];)r.highlightElement(o,!0===e,i.callback)},highlightElement:function(n,i,o){var a=r.util.getLanguage(n),s=r.languages[a];n.className=n.className.replace(e,"").replace(/\s+/g," ")+" language-"+a;var l=n.parentNode;l&&"pre"===l.nodeName.toLowerCase()&&(l.className=l.className.replace(e,"").replace(/\s+/g," ")+" language-"+a);var u={element:n,language:a,grammar:s,code:n.textContent};function c(t){u.highlightedCode=t,r.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,r.hooks.run("after-highlight",u),r.hooks.run("complete",u),o&&o.call(u.element)}if(r.hooks.run("before-sanity-check",u),!u.code)return r.hooks.run("complete",u),void(o&&o.call(u.element));if(r.hooks.run("before-highlight",u),u.grammar)if(i&&t.Worker){var f=new Worker(r.filename);f.onmessage=function(t){c(t.data)},f.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else c(r.highlight(u.code,u.grammar,u.language));else c(r.util.encode(u.code))},highlight:function(t,e,n){var o={code:t,grammar:e,language:n};return r.hooks.run("before-tokenize",o),o.tokens=r.tokenize(o.code,o.grammar),r.hooks.run("after-tokenize",o),i.stringify(r.util.encode(o.tokens),o.language)},matchGrammar:function(t,e,n,o,a,s,l){for(var u in n)if(n.hasOwnProperty(u)&&n[u]){var c=n[u];c=Array.isArray(c)?c:[c];for(var f=0;f<c.length;++f){if(l&&l==u+","+f)return;var h=c[f],d=h.inside,p=!!h.lookbehind,g=!!h.greedy,v=0,m=h.alias;if(g&&!h.pattern.global){var y=h.pattern.toString().match(/[imsuy]*$/)[0];h.pattern=RegExp(h.pattern.source,y+"g")}h=h.pattern||h;for(var b=o,x=a;b<e.length;x+=e[b].length,++b){var w=e[b];if(e.length>t.length)return;if(!(w instanceof i)){if(g&&b!=e.length-1){if(h.lastIndex=x,!(A=h.exec(t)))break;for(var _=A.index+(p&&A[1]?A[1].length:0),k=A.index+A[0].length,M=b,C=x,S=e.length;M<S&&(C<k||!e[M].type&&!e[M-1].greedy);++M)_>=(C+=e[M].length)&&(++b,x=C);if(e[b]instanceof i)continue;L=M-b,w=t.slice(x,C),A.index-=x}else{h.lastIndex=0;var A=h.exec(w),L=1}if(A){p&&(v=A[1]?A[1].length:0);k=(_=A.index+v)+(A=A[0].slice(v)).length;var E=w.slice(0,_),P=w.slice(k),T=[b,L];E&&(++b,x+=E.length,T.push(E));var O=new i(u,d?r.tokenize(A,d):A,m,A,g);if(T.push(O),P&&T.push(P),Array.prototype.splice.apply(e,T),1!=L&&r.matchGrammar(t,e,n,b,x,!0,u+","+f),s)break}else if(s)break}}}}},tokenize:function(t,e){var n=[t],i=e.rest;if(i){for(var o in i)e[o]=i[o];delete e.rest}return r.matchGrammar(t,n,e,0,0,!1),n},hooks:{all:{},add:function(t,e){var n=r.hooks.all;n[t]=n[t]||[],n[t].push(e)},run:function(t,e){var n=r.hooks.all[t];if(n&&n.length)for(var i,o=0;i=n[o++];)i(e)}},Token:i};function i(t,e,n,r,i){this.type=t,this.content=e,this.alias=n,this.length=0|(r||"").length,this.greedy=!!i}if(t.Prism=r,i.stringify=function(t,e){if("string"==typeof t)return t;if(Array.isArray(t))return t.map((function(t){return i.stringify(t,e)})).join("");var n={type:t.type,content:i.stringify(t.content,e),tag:"span",classes:["token",t.type],attributes:{},language:e};if(t.alias){var o=Array.isArray(t.alias)?t.alias:[t.alias];Array.prototype.push.apply(n.classes,o)}r.hooks.run("wrap",n);var a=Object.keys(n.attributes).map((function(t){return t+'="'+(n.attributes[t]||"").replace(/"/g,"&quot;")+'"'})).join(" ");return"<"+n.tag+' class="'+n.classes.join(" ")+'"'+(a?" "+a:"")+">"+n.content+"</"+n.tag+">"},!t.document)return t.addEventListener?(r.disableWorkerMessageHandler||t.addEventListener("message",(function(e){var n=JSON.parse(e.data),i=n.language,o=n.code,a=n.immediateClose;t.postMessage(r.highlight(o,r.languages[i],i)),a&&t.close()}),!1),r):r;var o=r.util.currentScript();if(o&&(r.filename=o.src,o.hasAttribute("data-manual")&&(r.manual=!0)),!r.manual){function a(){r.manual||r.highlightAll()}var s=document.readyState;"loading"===s||"interactive"===s&&o&&o.defer?document.addEventListener("DOMContentLoaded",a):window.requestAnimationFrame?window.requestAnimationFrame(a):window.setTimeout(a,16)}return r}(_self);function uiCodemirrorDirective(t,e){return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return n}};function n(n,r,i,o){var a=angular.extend({value:r.text()},e.codemirror||{},n.$eval(i.uiCodemirror),n.$eval(i.uiCodemirrorOpts)),s=function(t,e){var n;"TEXTAREA"===t[0].tagName?n=window.CodeMirror.fromTextArea(t[0],e):(t.html(""),n=new window.CodeMirror((function(e){t.append(e)}),e));return n}(r,a);!function(t,e,n){if(!e)return;var r=Object.keys(window.CodeMirror.defaults);n.$watch(e,(function(e,n){angular.isObject(e)&&r.forEach((function(r){if(e.hasOwnProperty(r)){if(n&&e[r]===n[r])return;t.setOption(r,e[r])}}))}),!0)}(s,i.uiCodemirror||i.uiCodemirrorOpts,n),function(t,e,n){if(!e)return;e.$formatters.push((function(t){if(angular.isUndefined(t)||null===t)return"";if(angular.isObject(t)||angular.isArray(t))throw new Error("ui-codemirror cannot use an object or an array as a model");return t})),e.$render=function(){var n=e.$viewValue||"";t.setValue(n)},t.on("change",(function(t){var r=t.getValue();r!==e.$viewValue&&n.$evalAsync((function(){e.$setViewValue(r)}))}))}(s,o,n),function(e,n,r){if(!n)return;r.$watch(n,(function(n,r){n!==r&&t((function(){e.refresh()}))}))}(s,i.uiRefresh,n),n.$on("CodeMirror",(function(t,e){if(!angular.isFunction(e))throw new Error("the CodeMirror event requires a callback function");e(s)})),angular.isFunction(a.onLoad)&&a.onLoad(s)}}"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:/<!--[\s\S]*?-->/,prolog:/<\?[\s\S]+?\?>/,doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:(?!<!--)[^"'\]]|"[^"]*"|'[^']*'|<!--[\s\S]*?-->)*\]\s*)?>/i,greedy:!0},cdata:/<!\[CDATA\[[\s\S]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/i,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/i,inside:{punctuation:[/^=/,{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.hooks.add("wrap",(function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))})),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,e){var n={};n["language-"+e]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[e]},n.cdata=/^<!\[CDATA\[|\]\]>$/i;var r={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:n}};r["language-"+e]={pattern:/[\s\S]+/,inside:Prism.languages[e]};var i={};i[t]={pattern:RegExp(/(<__[\s\S]*?>)(?:<!\[CDATA\[[\s\S]*?\]\]>\s*|[\s\S])*?(?=<\/__>)/.source.replace(/__/g,t),"i"),lookbehind:!0,greedy:!0,inside:r},Prism.languages.insertBefore("markup","cdata",i)}}),Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,function(t){var e=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+[\s\S]*?(?:;|(?=\s*\{))/,inside:{rule:/@[\w-]+/}},url:{pattern:RegExp("url\\((?:"+e.source+"|[^\n\r()]*)\\)","i"),inside:{function:/^url/i,punctuation:/^\(|\)$/}},selector:RegExp("[^{}\\s](?:[^{};\"']|"+e.source+")*?(?=\\s*\\{)"),string:{pattern:e,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),t.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:t.languages.css}},alias:"language-css"}},n.tag))}(Prism),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|interface|extends|implements|trait|instanceof|new)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/#?[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/--|\+\+|\*\*=?|=>|&&|\|\||[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?[.?]?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=(?:\s|\/\*[\s\S]*?\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/#?[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.js=Prism.languages.javascript,"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(t){t=t||document;var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.slice.call(t.querySelectorAll("pre[data-src]")).forEach((function(t){if(!t.hasAttribute("data-src-loaded")){for(var n,r=t.getAttribute("data-src"),i=t,o=/\blang(?:uage)?-([\w-]+)\b/i;i&&!o.test(i.className);)i=i.parentNode;if(i&&(n=(t.className.match(o)||[,""])[1]),!n){var a=(r.match(/\.(\w+)$/)||[,""])[1];n=e[a]||a}var s=document.createElement("code");s.className="language-"+n,t.textContent="",s.textContent="Loading…",t.appendChild(s);var l=new XMLHttpRequest;l.open("GET",r,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?(s.textContent=l.responseText,Prism.highlightElement(s),t.setAttribute("data-src-loaded","")):l.status>=400?s.textContent="✖ Error "+l.status+" while fetching file: "+l.statusText:s.textContent="✖ Error: File does not exist or is empty")},l.send(null)}}))},document.addEventListener("DOMContentLoaded",(function(){self.Prism.fileHighlight()}))),Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/#?[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/--|\+\+|\*\*=?|=>|&&|\|\||[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?[.?]?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(?:\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=(?:\s|\/\*[\s\S]*?\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/#?[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}|(?!\${)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})+}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\${|}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.js=Prism.languages.javascript,Prism.languages.json={property:{pattern:/"(?:\\.|[^\\"\r\n])*"(?=\s*:)/,greedy:!0},string:{pattern:/"(?:\\.|[^\\"\r\n])*"(?!\s*:)/,greedy:!0},comment:/\/\/.*|\/\*[\s\S]*?(?:\*\/|$)/,number:/-?\d+\.?\d*(?:e[+-]?\d+)?/i,punctuation:/[{}[\],]/,operator:/:/,boolean:/\b(?:true|false)\b/,null:{pattern:/\bnull\b/,alias:"keyword"}},function(t){var e=/("|')(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/;t.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-]+[\s\S]*?(?:;|(?=\s*\{))/,inside:{rule:/@[\w-]+/}},url:{pattern:RegExp("url\\((?:"+e.source+"|[^\n\r()]*)\\)","i"),inside:{function:/^url/i,punctuation:/^\(|\)$/}},selector:RegExp("[^{}\\s](?:[^{};\"']|"+e.source+")*?(?=\\s*\\{)"),string:{pattern:e,greedy:!0},property:/[-_a-z\xA0-\uFFFF][-\w\xA0-\uFFFF]*(?=\s*:)/i,important:/!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:,]/},t.languages.css.atrule.inside.rest=t.languages.css;var n=t.languages.markup;n&&(n.tag.addInlined("style","css"),t.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|')(?:\\[\s\S]|(?!\1)[^\\])*\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:n.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:t.languages.css}},alias:"language-css"}},n.tag))}(Prism),Prism.languages.yaml={scalar:{pattern:/([\-:]\s*(?:![^\s]+)?[ \t]*[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)[^\r\n]+(?:\2[^\r\n]+)*)/,lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:/(\s*(?:^|[:\-,[{\r\n?])[ \t]*(?:![^\s]+)?[ \t]*)[^\r\n{[\]},#\s]+?(?=\s*:\s)/,lookbehind:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:\d{4}-\d\d?-\d\d?(?:[tT]|[ \t]+)\d\d?:\d{2}:\d{2}(?:\.\d*)?[ \t]*(?:Z|[-+]\d\d?(?::\d{2})?)?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(?::\d{2}(?:\.\d*)?)?)(?=[ \t]*(?:$|,|]|}))/m,lookbehind:!0,alias:"number"},boolean:{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:true|false)[ \t]*(?=$|,|]|})/im,lookbehind:!0,alias:"important"},null:{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)(?:null|~)[ \t]*(?=$|,|]|})/im,lookbehind:!0,alias:"important"},string:{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)("|')(?:(?!\2)[^\\\r\n]|\\.)*\2(?=[ \t]*(?:$|,|]|}|\s*#))/m,lookbehind:!0,greedy:!0},number:{pattern:/([:\-,[{]\s*(?:![^\s]+)?[ \t]*)[+-]?(?:0x[\da-f]+|0o[0-7]+|(?:\d+\.?\d*|\.?\d+)(?:e[+-]?\d+)?|\.inf|\.nan)[ \t]*(?=$|,|]|})/im,lookbehind:!0},tag:/![^\s]+/,important:/[&*][\w]+/,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},Prism.languages.yml=Prism.languages.yaml,function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).CodeMirror=e()}(this,(function(){"use strict";var t=navigator.userAgent,e=navigator.platform,n=/gecko\/\d/i.test(t),r=/MSIE \d/.test(t),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(t),o=/Edge\/(\d+)/.exec(t),a=r||i||o,s=a&&(r?document.documentMode||6:+(o||i)[1]),l=!o&&/WebKit\//.test(t),u=l&&/Qt\/\d+\.\d+/.test(t),c=!o&&/Chrome\//.test(t),f=/Opera\//.test(t),h=/Apple Computer/.test(navigator.vendor),d=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(t),p=/PhantomJS/.test(t),g=!o&&/AppleWebKit/.test(t)&&/Mobile\/\w+/.test(t),v=/Android/.test(t),m=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(t),y=g||/Mac/.test(e),b=/\bCrOS\b/.test(t),x=/win/i.test(e),w=f&&t.match(/Version\/(\d*\.\d*)/);w&&(w=Number(w[1])),w&&w>=15&&(f=!1,l=!0);var _=y&&(u||f&&(null==w||w<12.11)),k=n||a&&s>=9;function M(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var C,S=function(t,e){var n=t.className,r=M(e).exec(n);if(r){var i=n.slice(r.index+r[0].length);t.className=n.slice(0,r.index)+(i?r[1]+i:"")}};function A(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function L(t,e){return A(t).appendChild(e)}function E(t,e,n,r){var i=document.createElement(t);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function P(t,e,n,r){var i=E(t,e,n,r);return i.setAttribute("role","presentation"),i}function T(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do{if(11==e.nodeType&&(e=e.host),e==t)return!0}while(e=e.parentNode)}function O(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function D(t,e){var n=t.className;M(e).test(n)||(t.className+=(n?" ":"")+e)}function I(t,e){for(var n=t.split(" "),r=0;r<n.length;r++)n[r]&&!M(n[r]).test(e)&&(e+=" "+n[r]);return e}C=document.createRange?function(t,e,n,r){var i=document.createRange();return i.setEnd(r||t,n),i.setStart(t,e),i}:function(t,e,n){var r=document.body.createTextRange();try{r.moveToElementText(t.parentNode)}catch(t){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r};var F=function(t){t.select()};function N(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function G(t,e,n){for(var r in e||(e={}),t)!t.hasOwnProperty(r)||!1===n&&e.hasOwnProperty(r)||(e[r]=t[r]);return e}function W(t,e,n,r,i){null==e&&-1==(e=t.search(/[^\s\u00a0]/))&&(e=t.length);for(var o=r||0,a=i||0;;){var s=t.indexOf("\t",o);if(s<0||s>=e)return a+(e-o);a+=s-o,a+=n-a%n,o=s+1}}g?F=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:a&&(F=function(t){try{t.select()}catch(t){}});var B=function(){this.id=null,this.f=null,this.time=0,this.handler=N(this.onTimeout,this)};function j(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}B.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},B.prototype.set=function(t,e){this.f=e;var n=+new Date+t;(!this.id||n<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=n)};var z={toString:function(){return"CodeMirror.Pass"}},R={scroll:!1},H={origin:"*mouse"},V={origin:"+move"};function $(t,e,n){for(var r=0,i=0;;){var o=t.indexOf("\t",r);-1==o&&(o=t.length);var a=o-r;if(o==t.length||i+a>=e)return r+Math.min(a,e-i);if(i+=o-r,r=o+1,(i+=n-i%n)>=e)return r}}var U=[""];function q(t){for(;U.length<=t;)U.push(K(U)+" ");return U[t]}function K(t){return t[t.length-1]}function Y(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r);return n}function X(){}function Z(t,e){var n;return Object.create?n=Object.create(t):(X.prototype=t,n=new X),e&&G(e,n),n}var Q=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function J(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Q.test(t))}function tt(t,e){return e?!!(e.source.indexOf("\\w")>-1&&J(t))||e.test(t):J(t)}function et(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var nt=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function rt(t){return t.charCodeAt(0)>=768&&nt.test(t)}function it(t,e,n){for(;(n<0?e>0:e<t.length)&&rt(t.charAt(e));)e+=n;return e}function ot(t,e,n){for(var r=e>n?-1:1;;){if(e==n)return e;var i=(e+n)/2,o=r<0?Math.ceil(i):Math.floor(i);if(o==e)return t(o)?e:n;t(o)?n=o:e=o+r}}var at=null;function st(t,e,n){var r;at=null;for(var i=0;i<t.length;++i){var o=t[i];if(o.from<e&&o.to>e)return i;o.to==e&&(o.from!=o.to&&"before"==n?r=i:at=i),o.from==e&&(o.from!=o.to&&"before"!=n?r=i:at=i)}return null!=r?r:at}var lt=function(){var t=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,e=/[stwN]/,n=/[LRr]/,r=/[Lb1n]/,i=/[1n]/;function o(t,e,n){this.level=t,this.from=e,this.to=n}return function(a,s){var l="ltr"==s?"L":"R";if(0==a.length||"ltr"==s&&!t.test(a))return!1;for(var u,c=a.length,f=[],h=0;h<c;++h)f.push((u=a.charCodeAt(h))<=247?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?"nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111".charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":8204==u?"b":"L");for(var d=0,p=l;d<c;++d){var g=f[d];"m"==g?f[d]=p:p=g}for(var v=0,m=l;v<c;++v){var y=f[v];"1"==y&&"r"==m?f[v]="n":n.test(y)&&(m=y,"r"==y&&(f[v]="R"))}for(var b=1,x=f[0];b<c-1;++b){var w=f[b];"+"==w&&"1"==x&&"1"==f[b+1]?f[b]="1":","!=w||x!=f[b+1]||"1"!=x&&"n"!=x||(f[b]=x),x=w}for(var _=0;_<c;++_){var k=f[_];if(","==k)f[_]="N";else if("%"==k){var M=void 0;for(M=_+1;M<c&&"%"==f[M];++M);for(var C=_&&"!"==f[_-1]||M<c&&"1"==f[M]?"1":"N",S=_;S<M;++S)f[S]=C;_=M-1}}for(var A=0,L=l;A<c;++A){var E=f[A];"L"==L&&"1"==E?f[A]="L":n.test(E)&&(L=E)}for(var P=0;P<c;++P)if(e.test(f[P])){var T=void 0;for(T=P+1;T<c&&e.test(f[T]);++T);for(var O="L"==(P?f[P-1]:l),D=O==("L"==(T<c?f[T]:l))?O?"L":"R":l,I=P;I<T;++I)f[I]=D;P=T-1}for(var F,N=[],G=0;G<c;)if(r.test(f[G])){var W=G;for(++G;G<c&&r.test(f[G]);++G);N.push(new o(0,W,G))}else{var B=G,j=N.length;for(++G;G<c&&"L"!=f[G];++G);for(var z=B;z<G;)if(i.test(f[z])){B<z&&N.splice(j,0,new o(1,B,z));var R=z;for(++z;z<G&&i.test(f[z]);++z);N.splice(j,0,new o(2,R,z)),B=z}else++z;B<G&&N.splice(j,0,new o(1,B,G))}return"ltr"==s&&(1==N[0].level&&(F=a.match(/^\s+/))&&(N[0].from=F[0].length,N.unshift(new o(0,0,F[0].length))),1==K(N).level&&(F=a.match(/\s+$/))&&(K(N).to-=F[0].length,N.push(new o(0,c-F[0].length,c)))),"rtl"==s?N.reverse():N}}();function ut(t,e){var n=t.order;return null==n&&(n=t.order=lt(t.text,e)),n}var ct=[],ft=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=t._handlers||(t._handlers={});r[e]=(r[e]||ct).concat(n)}};function ht(t,e){return t._handlers&&t._handlers[e]||ct}function dt(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var r=t._handlers,i=r&&r[e];if(i){var o=j(i,n);o>-1&&(r[e]=i.slice(0,o).concat(i.slice(o+1)))}}}function pt(t,e){var n=ht(t,e);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function gt(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),pt(t,n||e.type,t,e),wt(e)||e.codemirrorIgnore}function vt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),r=0;r<e.length;++r)-1==j(n,e[r])&&n.push(e[r])}function mt(t,e){return ht(t,e).length>0}function yt(t){t.prototype.on=function(t,e){ft(this,t,e)},t.prototype.off=function(t,e){dt(this,t,e)}}function bt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function xt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function wt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function _t(t){bt(t),xt(t)}function kt(t){return t.target||t.srcElement}function Mt(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),y&&t.ctrlKey&&1==e&&(e=3),e}var Ct,St,At=function(){if(a&&s<9)return!1;var t=E("div");return"draggable"in t||"dragDrop"in t}();function Lt(t){if(null==Ct){var e=E("span","​");L(t,E("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(Ct=e.offsetWidth<=1&&e.offsetHeight>2&&!(a&&s<8))}var n=Ct?E("span","​"):E("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Et(t){if(null!=St)return St;var e=L(t,document.createTextNode("AخA")),n=C(e,0,1).getBoundingClientRect(),r=C(e,1,2).getBoundingClientRect();return A(t),!(!n||n.left==n.right)&&(St=r.right-n.right<3)}var Pt,Tt=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],r=t.length;e<=r;){var i=t.indexOf("\n",e);-1==i&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=i+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Ot=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Dt="oncopy"in(Pt=E("div"))||(Pt.setAttribute("oncopy","return;"),"function"==typeof Pt.oncopy),It=null;var Ft={},Nt={};function Gt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Ft[t]=e}function Wt(t){if("string"==typeof t&&Nt.hasOwnProperty(t))t=Nt[t];else if(t&&"string"==typeof t.name&&Nt.hasOwnProperty(t.name)){var e=Nt[t.name];"string"==typeof e&&(e={name:e}),(t=Z(e,t)).name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Wt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Wt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Bt(t,e){e=Wt(e);var n=Ft[e.name];if(!n)return Bt(t,"text/plain");var r=n(t,e);if(jt.hasOwnProperty(e.name)){var i=jt[e.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=e.name,e.helperType&&(r.helperType=e.helperType),e.modeProps)for(var a in e.modeProps)r[a]=e.modeProps[a];return r}var jt={};function zt(t,e){G(e,jt.hasOwnProperty(t)?jt[t]:jt[t]={})}function Rt(t,e){if(!0===e)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Ht(t,e){for(var n;t.innerMode&&(n=t.innerMode(e))&&n.mode!=t;)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Vt(t,e,n){return!t.startState||t.startState(e,n)}var $t=function(t,e,n){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ut(t,e){if((e-=t.first)<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(e<o){n=i;break}e-=o}return n.lines[e]}function qt(t,e,n){var r=[],i=e.line;return t.iter(e.line,n.line+1,(function(t){var o=t.text;i==n.line&&(o=o.slice(0,n.ch)),i==e.line&&(o=o.slice(e.ch)),r.push(o),++i})),r}function Kt(t,e,n){var r=[];return t.iter(e,n,(function(t){r.push(t.text)})),r}function Yt(t,e){var n=e-t.height;if(n)for(var r=t;r;r=r.parent)r.height+=n}function Xt(t){if(null==t.parent)return null;for(var e=t.parent,n=j(e.lines,t),r=e.parent;r;e=r,r=r.parent)for(var i=0;r.children[i]!=e;++i)n+=r.children[i].chunkSize();return n+e.first}function Zt(t,e){var n=t.first;t:do{for(var r=0;r<t.children.length;++r){var i=t.children[r],o=i.height;if(e<o){t=i;continue t}e-=o,n+=i.chunkSize()}return n}while(!t.lines);for(var a=0;a<t.lines.length;++a){var s=t.lines[a].height;if(e<s)break;e-=s}return n+a}function Qt(t,e){return e>=t.first&&e<t.first+t.size}function Jt(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function te(t,e,n){if(void 0===n&&(n=null),!(this instanceof te))return new te(t,e,n);this.line=t,this.ch=e,this.sticky=n}function ee(t,e){return t.line-e.line||t.ch-e.ch}function ne(t,e){return t.sticky==e.sticky&&0==ee(t,e)}function re(t){return te(t.line,t.ch)}function ie(t,e){return ee(t,e)<0?e:t}function oe(t,e){return ee(t,e)<0?t:e}function ae(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function se(t,e){if(e.line<t.first)return te(t.first,0);var n=t.first+t.size-1;return e.line>n?te(n,Ut(t,n).text.length):function(t,e){var n=t.ch;return null==n||n>e?te(t.line,e):n<0?te(t.line,0):t}(e,Ut(t,e.line).text.length)}function le(t,e){for(var n=[],r=0;r<e.length;r++)n[r]=se(t,e[r]);return n}$t.prototype.eol=function(){return this.pos>=this.string.length},$t.prototype.sol=function(){return this.pos==this.lineStart},$t.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},$t.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},$t.prototype.eat=function(t){var e=this.string.charAt(this.pos);if("string"==typeof t?e==t:e&&(t.test?t.test(e):t(e)))return++this.pos,e},$t.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},$t.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},$t.prototype.skipToEnd=function(){this.pos=this.string.length},$t.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},$t.prototype.backUp=function(t){this.pos-=t},$t.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=W(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?W(this.string,this.lineStart,this.tabSize):0)},$t.prototype.indentation=function(){return W(this.string,null,this.tabSize)-(this.lineStart?W(this.string,this.lineStart,this.tabSize):0)},$t.prototype.match=function(t,e,n){if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&!1!==e&&(this.pos+=r[0].length),r)}var i=function(t){return n?t.toLowerCase():t};if(i(this.string.substr(this.pos,t.length))==i(t))return!1!==e&&(this.pos+=t.length),!0},$t.prototype.current=function(){return this.string.slice(this.start,this.pos)},$t.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},$t.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},$t.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};var ue=function(t,e){this.state=t,this.lookAhead=e},ce=function(t,e,n,r){this.state=e,this.doc=t,this.line=n,this.maxLookAhead=r||0,this.baseTokens=null,this.baseTokenPos=1};function fe(t,e,n,r){var i=[t.state.modeGen],o={};xe(t,e.text,t.doc.mode,n,(function(t,e){return i.push(t,e)}),o,r);for(var a=n.state,s=function(r){n.baseTokens=i;var s=t.state.overlays[r],l=1,u=0;n.state=!0,xe(t,e.text,s.mode,n,(function(t,e){for(var n=l;u<t;){var r=i[l];r>t&&i.splice(l,1,t,i[l+1],r),l+=2,u=Math.min(t,r)}if(e)if(s.opaque)i.splice(n,l-n,t,"overlay "+e),l=n+2;else for(;n<l;n+=2){var o=i[n+1];i[n+1]=(o?o+" ":"")+"overlay "+e}}),o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},l=0;l<t.state.overlays.length;++l)s(l);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function he(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var r=de(t,Xt(e)),i=e.text.length>t.options.maxHighlightLength&&Rt(t.doc.mode,r.state),o=fe(t,e,r);i&&(r.state=i),e.stateAfter=r.save(!i),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function de(t,e,n){var r=t.doc,i=t.display;if(!r.mode.startState)return new ce(r,!0,e);var o=function(t,e,n){for(var r,i,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>a;--s){if(s<=o.first)return o.first;var l=Ut(o,s-1),u=l.stateAfter;if(u&&(!n||s+(u instanceof ue?u.lookAhead:0)<=o.modeFrontier))return s;var c=W(l.text,null,t.options.tabSize);(null==i||r>c)&&(i=s-1,r=c)}return i}(t,e,n),a=o>r.first&&Ut(r,o-1).stateAfter,s=a?ce.fromSaved(r,a,o):new ce(r,Vt(r.mode),o);return r.iter(o,e,(function(n){pe(t,n.text,s);var r=s.line;n.stateAfter=r==e-1||r%5==0||r>=i.viewFrom&&r<i.viewTo?s.save():null,s.nextLine()})),n&&(r.modeFrontier=s.line),s}function pe(t,e,n,r){var i=t.doc.mode,o=new $t(e,t.options.tabSize,n);for(o.start=o.pos=r||0,""==e&&ge(i,n.state);!o.eol();)ve(i,o,n.state),o.start=o.pos}function ge(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=Ht(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function ve(t,e,n,r){for(var i=0;i<10;i++){r&&(r[0]=Ht(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}ce.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return null!=e&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},ce.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},ce.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ce.fromSaved=function(t,e,n){return e instanceof ue?new ce(t,Rt(t.mode,e.state),n,e.lookAhead):new ce(t,Rt(t.mode,e),n)},ce.prototype.save=function(t){var e=!1!==t?Rt(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new ue(e,this.maxLookAhead):e};var me=function(t,e,n){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=n};function ye(t,e,n,r){var i,o,a=t.doc,s=a.mode,l=Ut(a,(e=se(a,e)).line),u=de(t,e.line,n),c=new $t(l.text,t.options.tabSize,u);for(r&&(o=[]);(r||c.pos<e.ch)&&!c.eol();)c.start=c.pos,i=ve(s,c,u.state),r&&o.push(new me(c,i,Rt(a.mode,u.state)));return r?o:new me(c,i,u.state)}function be(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==e[r]?e[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[r])||(e[r]+=" "+n[2])}return t}function xe(t,e,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var l,u=0,c=null,f=new $t(e,t.options.tabSize,r),h=t.options.addModeClass&&[null];for(""==e&&be(ge(n,r.state),o);!f.eol();){if(f.pos>t.options.maxHighlightLength?(s=!1,a&&pe(t,e,r,f.pos),f.pos=e.length,l=null):l=be(ve(n,f,r.state,h),o),h){var d=h[0].name;d&&(l="m-"+(l?d+" "+l:d))}if(!s||c!=l){for(;u<f.start;)i(u=Math.min(f.start,u+5e3),c);c=l}f.start=f.pos}for(;u<f.pos;){var p=Math.min(f.pos,u+5e3);i(p,c),u=p}}var we=!1,_e=!1;function ke(t,e,n){this.marker=t,this.from=e,this.to=n}function Me(t,e){if(t)for(var n=0;n<t.length;++n){var r=t[n];if(r.marker==e)return r}}function Ce(t,e){for(var n,r=0;r<t.length;++r)t[r]!=e&&(n||(n=[])).push(t[r]);return n}function Se(t,e){if(e.full)return null;var n=Qt(t,e.from.line)&&Ut(t,e.from.line).markedSpans,r=Qt(t,e.to.line)&&Ut(t,e.to.line).markedSpans;if(!n&&!r)return null;var i=e.from.ch,o=e.to.ch,a=0==ee(e.from,e.to),s=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],a=o.marker;if(null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e)||o.from==e&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);(r||(r=[])).push(new ke(a,o.from,s?null:o.to))}}return r}(n,i,a),l=function(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],a=o.marker;if(null==o.to||(a.inclusiveRight?o.to>=e:o.to>e)||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);(r||(r=[])).push(new ke(a,s?null:o.from-e,null==o.to?null:o.to-e))}}return r}(r,o,a),u=1==e.text.length,c=K(e.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var h=s[f];if(null==h.to){var d=Me(l,h.marker);d?u&&(h.to=null==d.to?null:d.to+c):h.to=i}}if(l)for(var p=0;p<l.length;++p){var g=l[p];if(null!=g.to&&(g.to+=c),null==g.from)Me(s,g.marker)||(g.from=c,u&&(s||(s=[])).push(g));else g.from+=c,u&&(s||(s=[])).push(g)}s&&(s=Ae(s)),l&&l!=s&&(l=Ae(l));var v=[s];if(!u){var m,y=e.text.length-2;if(y>0&&s)for(var b=0;b<s.length;++b)null==s[b].to&&(m||(m=[])).push(new ke(s[b].marker,null,null));for(var x=0;x<y;++x)v.push(m);v.push(l)}return v}function Ae(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&t.splice(e--,1)}return t.length?t:null}function Le(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function Ee(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function Pe(t){return t.inclusiveLeft?-1:0}function Te(t){return t.inclusiveRight?1:0}function Oe(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var r=t.find(),i=e.find(),o=ee(r.from,i.from)||Pe(t)-Pe(e);if(o)return-o;var a=ee(r.to,i.to)||Te(t)-Te(e);return a||e.id-t.id}function De(t,e){var n,r=_e&&t.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)(i=r[o]).marker.collapsed&&null==(e?i.from:i.to)&&(!n||Oe(n,i.marker)<0)&&(n=i.marker);return n}function Ie(t){return De(t,!0)}function Fe(t){return De(t,!1)}function Ne(t,e){var n,r=_e&&t.markedSpans;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(null==o.from||o.from<e)&&(null==o.to||o.to>e)&&(!n||Oe(n,o.marker)<0)&&(n=o.marker)}return n}function Ge(t,e,n,r,i){var o=Ut(t,e),a=_e&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=ee(u.from,n)||Pe(l.marker)-Pe(i),f=ee(u.to,r)||Te(l.marker)-Te(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ee(u.to,n)>=0:ee(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?ee(u.from,r)<=0:ee(u.from,r)<0)))return!0}}}function We(t){for(var e;e=Ie(t);)t=e.find(-1,!0).line;return t}function Be(t,e){var n=Ut(t,e),r=We(n);return n==r?e:Xt(r)}function je(t,e){if(e>t.lastLine())return e;var n,r=Ut(t,e);if(!ze(t,r))return e;for(;n=Fe(r);)r=n.find(1,!0).line;return Xt(r)+1}function ze(t,e){var n=_e&&e.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if((r=n[i]).marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&Re(t,e,r))return!0}}function Re(t,e,n){if(null==n.to){var r=n.marker.find(1,!0);return Re(t,r.line,Me(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i=void 0,o=0;o<e.markedSpans.length;++o)if((i=e.markedSpans[o]).marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&Re(t,e,i))return!0}function He(t){for(var e=0,n=(t=We(t)).parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==t)break;e+=i.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;e+=s.height}return e}function Ve(t){if(0==t.height)return 0;for(var e,n=t.text.length,r=t;e=Ie(r);){var i=e.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=t;e=Fe(r);){var o=e.find(0,!0);n-=r.text.length-o.from.ch,n+=(r=o.to.line).text.length-o.to.ch}return n}function $e(t){var e=t.display,n=t.doc;e.maxLine=Ut(n,n.first),e.maxLineLength=Ve(e.maxLine),e.maxLineChanged=!0,n.iter((function(t){var n=Ve(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)}))}var Ue=function(t,e,n){this.text=t,Ee(this,e),this.height=n?n(this):1};function qe(t){t.parent=null,Le(t)}Ue.prototype.lineNo=function(){return Xt(this)},yt(Ue);var Ke={},Ye={};function Xe(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Ye:Ke;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function Ze(t,e){var n=P("span",null,null,l?"padding-right: .1px":null),r={pre:P("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var o=i?e.rest[i-1]:e.line,a=void 0;r.pos=0,r.addToken=Je,Et(t.display.measure)&&(a=ut(o,t.doc.direction))&&(r.addToken=tn(r.addToken,a)),r.map=[],nn(o,r,he(t,o,e!=t.display.externalMeasured&&Xt(o))),o.styleClasses&&(o.styleClasses.bgClass&&(r.bgClass=I(o.styleClasses.bgClass,r.bgClass||"")),o.styleClasses.textClass&&(r.textClass=I(o.styleClasses.textClass,r.textClass||""))),0==r.map.length&&r.map.push(0,0,r.content.appendChild(Lt(t.display.measure))),0==i?(e.measure.map=r.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(r.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(l){var s=r.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(r.content.className="cm-tab-wrap-hack")}return pt(t,"renderLine",t,e.line,r.pre),r.pre.className&&(r.textClass=I(r.pre.className,r.textClass||"")),r}function Qe(t){var e=E("span","•","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Je(t,e,n,r,i,o,l){if(e){var u,c=t.splitSpaces?function(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,r="",i=0;i<t.length;i++){var o=t.charAt(i);" "!=o||!n||i!=t.length-1&&32!=t.charCodeAt(i+1)||(o=" "),r+=o,n=" "==o}return r}(e,t.trailingSpace):e,f=t.cm.state.specialChars,h=!1;if(f.test(e)){u=document.createDocumentFragment();for(var d=0;;){f.lastIndex=d;var p=f.exec(e),g=p?p.index-d:e.length-d;if(g){var v=document.createTextNode(c.slice(d,d+g));a&&s<9?u.appendChild(E("span",[v])):u.appendChild(v),t.map.push(t.pos,t.pos+g,v),t.col+=g,t.pos+=g}if(!p)break;d+=g+1;var m=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,b=y-t.col%y;(m=u.appendChild(E("span",q(b),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=b}else"\r"==p[0]||"\n"==p[0]?((m=u.appendChild(E("span","\r"==p[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",p[0]),t.col+=1):((m=t.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),a&&s<9?u.appendChild(E("span",[m])):u.appendChild(m),t.col+=1);t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,u=document.createTextNode(c),t.map.push(t.pos,t.pos+e.length,u),a&&s<9&&(h=!0),t.pos+=e.length;if(t.trailingSpace=32==c.charCodeAt(e.length-1),n||r||i||h||o){var x=n||"";r&&(x+=r),i&&(x+=i);var w=E("span",[u],x,o);if(l)for(var _ in l)l.hasOwnProperty(_)&&"style"!=_&&"class"!=_&&w.setAttribute(_,l[_]);return t.content.appendChild(w)}t.content.appendChild(u)}}function tn(t,e){return function(n,r,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+r.length;;){for(var f=void 0,h=0;h<e.length&&!((f=e[h]).to>u&&f.from<=u);h++);if(f.to>=c)return t(n,r,i,o,a,s,l);t(n,r.slice(0,f.to-u),i,o,null,s,l),o=null,r=r.slice(f.to-u),u=f.to}}}function en(t,e,n,r){var i=!r&&n.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!r&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function nn(t,e,n){var r=t.markedSpans,i=t.text,o=0;if(r)for(var a,s,l,u,c,f,h,d=i.length,p=0,g=1,v="",m=0;;){if(m==p){l=u=c=s="",h=null,f=null,m=1/0;for(var y=[],b=void 0,x=0;x<r.length;++x){var w=r[x],_=w.marker;if("bookmark"==_.type&&w.from==p&&_.widgetNode)y.push(_);else if(w.from<=p&&(null==w.to||w.to>p||_.collapsed&&w.to==p&&w.from==p)){if(null!=w.to&&w.to!=p&&m>w.to&&(m=w.to,u=""),_.className&&(l+=" "+_.className),_.css&&(s=(s?s+";":"")+_.css),_.startStyle&&w.from==p&&(c+=" "+_.startStyle),_.endStyle&&w.to==m&&(b||(b=[])).push(_.endStyle,w.to),_.title&&((h||(h={})).title=_.title),_.attributes)for(var k in _.attributes)(h||(h={}))[k]=_.attributes[k];_.collapsed&&(!f||Oe(f.marker,_)<0)&&(f=w)}else w.from>p&&m>w.from&&(m=w.from)}if(b)for(var M=0;M<b.length;M+=2)b[M+1]==m&&(u+=" "+b[M]);if(!f||f.from==p)for(var C=0;C<y.length;++C)en(e,0,y[C]);if(f&&(f.from||0)==p){if(en(e,(null==f.to?d+1:f.to)-p,f.marker,null==f.from),null==f.to)return;f.to==p&&(f=!1)}}if(p>=d)break;for(var S=Math.min(d,m);;){if(v){var A=p+v.length;if(!f){var L=A>S?v.slice(0,S-p):v;e.addToken(e,L,a?a+l:l,c,p+L.length==m?u:"",s,h)}if(A>=S){v=v.slice(S-p),p=S;break}p=A,c=""}v=i.slice(o,o=n[g++]),a=Xe(n[g++],e.cm.options)}}else for(var E=1;E<n.length;E+=2)e.addToken(e,i.slice(o,o=n[E]),Xe(n[E+1],e.cm.options))}function rn(t,e,n){this.line=e,this.rest=function(t){for(var e,n;e=Fe(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}(e),this.size=this.rest?Xt(K(this.rest))-n+1:1,this.node=this.text=null,this.hidden=ze(t,e)}function on(t,e,n){for(var r,i=[],o=e;o<n;o=r){var a=new rn(t.doc,Ut(t.doc,o),o);r=o+a.size,i.push(a)}return i}var an=null;var sn=null;function ln(t,e){var n=ht(t,e);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);an?r=an.delayedCallbacks:sn?r=sn:(r=sn=[],setTimeout(un,0));for(var o=function(t){r.push((function(){return n[t].apply(null,i)}))},a=0;a<n.length;++a)o(a)}}function un(){var t=sn;sn=null;for(var e=0;e<t.length;++e)t[e]()}function cn(t,e,n,r){for(var i=0;i<e.changes.length;i++){var o=e.changes[i];"text"==o?dn(t,e):"gutter"==o?gn(t,e,n,r):"class"==o?pn(t,e):"widget"==o&&vn(t,e,r)}e.changes=null}function fn(t){return t.node==t.text&&(t.node=E("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),a&&s<8&&(t.node.style.zIndex=2)),t.node}function hn(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):Ze(t,e)}function dn(t,e){var n=e.text.className,r=hn(t,e);e.text==e.node&&(e.node=r.pre),e.text.parentNode.replaceChild(r.pre,e.text),e.text=r.pre,r.bgClass!=e.bgClass||r.textClass!=e.textClass?(e.bgClass=r.bgClass,e.textClass=r.textClass,pn(t,e)):n&&(e.text.className=n)}function pn(t,e){!function(t,e){var n=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),e.background)n?e.background.className=n:(e.background.parentNode.removeChild(e.background),e.background=null);else if(n){var r=fn(e);e.background=r.insertBefore(E("div",null,n),r.firstChild),t.display.input.setUneditable(e.background)}}(t,e),e.line.wrapClass?fn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var n=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=n||""}function gn(t,e,n,r){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var i=fn(e);e.gutterBackground=E("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px; width: "+r.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),i.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var a=fn(e),s=e.gutter=E("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?r.fixedPos:-r.gutterTotalWidth)+"px");if(t.display.input.setUneditable(s),a.insertBefore(s,e.text),e.line.gutterClass&&(s.className+=" "+e.line.gutterClass),!t.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(e.lineNumber=s.appendChild(E("div",Jt(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+r.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var l=0;l<t.display.gutterSpecs.length;++l){var u=t.display.gutterSpecs[l].className,c=o.hasOwnProperty(u)&&o[u];c&&s.appendChild(E("div",[c],"CodeMirror-gutter-elt","left: "+r.gutterLeft[u]+"px; width: "+r.gutterWidth[u]+"px"))}}}function vn(t,e,n){e.alignable&&(e.alignable=null);for(var r=M("CodeMirror-linewidget"),i=e.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,r.test(i.className)&&e.node.removeChild(i);yn(t,e,n)}function mn(t,e,n,r){var i=hn(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),pn(t,e),gn(t,e,n,r),yn(t,e,r),e.node}function yn(t,e,n){if(bn(t,e.line,e,n,!0),e.rest)for(var r=0;r<e.rest.length;r++)bn(t,e.rest[r],e,n,!1)}function bn(t,e,n,r,i){if(e.widgets)for(var o=fn(n),a=0,s=e.widgets;a<s.length;++a){var l=s[a],u=E("div",[l.node],"CodeMirror-linewidget"+(l.className?" "+l.className:""));l.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),xn(l,u,n,r),t.display.input.setUneditable(u),i&&l.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),ln(l,"redraw")}}function xn(t,e,n,r){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var i=r.wrapperWidth;e.style.left=r.fixedPos+"px",t.coverGutter||(i-=r.gutterTotalWidth,e.style.paddingLeft=r.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-r.gutterTotalWidth+"px"))}function wn(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!T(document.body,t.node)){var n="position: relative;";t.coverGutter&&(n+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(n+="width: "+e.display.wrapper.clientWidth+"px;"),L(e.display.measure,E("div",[t.node],null,n))}return t.height=t.node.parentNode.offsetHeight}function _n(t,e){for(var n=kt(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function kn(t){return t.lineSpace.offsetTop}function Mn(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Cn(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=L(t.measure,E("pre","x","CodeMirror-line-like")),n=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,r={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(r.left)||isNaN(r.right)||(t.cachedPaddingH=r),r}function Sn(t){return 30-t.display.nativeBarWidth}function An(t){return t.display.scroller.clientWidth-Sn(t)-t.display.barWidth}function Ln(t){return t.display.scroller.clientHeight-Sn(t)-t.display.barHeight}function En(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var r=0;r<t.rest.length;r++)if(t.rest[r]==e)return{map:t.measure.maps[r],cache:t.measure.caches[r]};for(var i=0;i<t.rest.length;i++)if(Xt(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function Pn(t,e,n,r){return Dn(t,On(t,e),n,r)}function Tn(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[cr(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function On(t,e){var n=Xt(e),r=Tn(t,n);r&&!r.text?r=null:r&&r.changes&&(cn(t,r,n,or(t)),t.curOp.forceUpdate=!0),r||(r=function(t,e){var n=Xt(e=We(e)),r=t.display.externalMeasured=new rn(t.doc,e,n);r.lineN=n;var i=r.built=Ze(t,r);return r.text=i.pre,L(t.display.lineMeasure,i.pre),r}(t,e));var i=En(r,e,n);return{line:e,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Dn(t,e,n,r,i){e.before&&(n=-1);var o,l=n+(r||"");return e.cache.hasOwnProperty(l)?o=e.cache[l]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(!function(t,e,n){var r=t.options.lineWrapping,i=r&&An(t);if(!e.measure.heights||r&&e.measure.width!=i){var o=e.measure.heights=[];if(r){e.measure.width=i;for(var a=e.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(t,e.view,e.rect),e.hasHeights=!0),(o=function(t,e,n,r){var i,o=Nn(e.map,n,r),l=o.node,u=o.start,c=o.end,f=o.collapse;if(3==l.nodeType){for(var h=0;h<4;h++){for(;u&&rt(e.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&rt(e.line.text.charAt(o.coverStart+c));)++c;if((i=a&&s<9&&0==u&&c==o.coverEnd-o.coverStart?l.parentNode.getBoundingClientRect():Gn(C(l,u,c).getClientRects(),r)).left||i.right||0==u)break;c=u,u-=1,f="right"}a&&s<11&&(i=function(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(t){if(null!=It)return It;var e=L(t,E("span","x")),n=e.getBoundingClientRect(),r=C(e,0,1).getBoundingClientRect();return It=Math.abs(n.left-r.left)>1}(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*r,bottom:e.bottom*r}}(t.display.measure,i))}else{var d;u>0&&(f=r="right"),i=t.options.lineWrapping&&(d=l.getClientRects()).length>1?d["right"==r?d.length-1:0]:l.getBoundingClientRect()}if(a&&s<9&&!u&&(!i||!i.left&&!i.right)){var p=l.parentNode.getClientRects()[0];i=p?{left:p.left,right:p.left+ir(t.display),top:p.top,bottom:p.bottom}:Fn}for(var g=i.top-e.rect.top,v=i.bottom-e.rect.top,m=(g+v)/2,y=e.view.measure.heights,b=0;b<y.length-1&&!(m<y[b]);b++);var x=b?y[b-1]:0,w=y[b],_={left:("right"==f?i.right:i.left)-e.rect.left,right:("left"==f?i.left:i.right)-e.rect.left,top:x,bottom:w};i.left||i.right||(_.bogus=!0);t.options.singleCursorHeightPerLine||(_.rtop=g,_.rbottom=v);return _}(t,e,n,r)).bogus||(e.cache[l]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}var In,Fn={left:0,right:0,top:0,bottom:0};function Nn(t,e,n){for(var r,i,o,a,s,l,u=0;u<t.length;u+=3)if(s=t[u],l=t[u+1],e<s?(i=0,o=1,a="left"):e<l?o=(i=e-s)+1:(u==t.length-3||e==l&&t[u+3]>e)&&(i=(o=l-s)-1,e>=l&&(a="right")),null!=i){if(r=t[u+2],s==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)r=t[2+(u-=3)],a="left";if("right"==n&&i==l-s)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)r=t[(u+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:l}}function Gn(t,e){var n=Fn;if("left"==e)for(var r=0;r<t.length&&(n=t[r]).left==n.right;r++);else for(var i=t.length-1;i>=0&&(n=t[i]).left==n.right;i--);return n}function Wn(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function Bn(t){t.display.externalMeasure=null,A(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Wn(t.display.view[e])}function jn(t){Bn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function zn(){return c&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function Rn(){return c&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Hn(t){var e=0;if(t.widgets)for(var n=0;n<t.widgets.length;++n)t.widgets[n].above&&(e+=wn(t.widgets[n]));return e}function Vn(t,e,n,r,i){if(!i){var o=Hn(e);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var a=He(e);if("local"==r?a+=kn(t.display):a-=t.display.viewOffset,"page"==r||"window"==r){var s=t.display.lineSpace.getBoundingClientRect();a+=s.top+("window"==r?0:Rn());var l=s.left+("window"==r?0:zn());n.left+=l,n.right+=l}return n.top+=a,n.bottom+=a,n}function $n(t,e,n){if("div"==n)return e;var r=e.left,i=e.top;if("page"==n)r-=zn(),i-=Rn();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function Un(t,e,n,r,i){return r||(r=Ut(t.doc,e.line)),Vn(t,r,Pn(t,r,e.ch,i),n)}function qn(t,e,n,r,i,o){function a(e,a){var s=Dn(t,i,e,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,Vn(t,r,s,n)}r=r||Ut(t.doc,e.line),i||(i=On(t,r));var s=ut(r,t.doc.direction),l=e.ch,u=e.sticky;if(l>=r.text.length?(l=r.text.length,u="before"):l<=0&&(l=0,u="after"),!s)return a("before"==u?l-1:l,"before"==u);function c(t,e,n){return a(n?t-1:t,1==s[e].level!=n)}var f=st(s,l,u),h=at,d=c(l,f,"before"==u);return null!=h&&(d.other=c(l,h,"before"!=u)),d}function Kn(t,e){var n=0;e=se(t.doc,e),t.options.lineWrapping||(n=ir(t.display)*e.ch);var r=Ut(t.doc,e.line),i=He(r)+kn(t.display);return{left:n,right:n,top:i,bottom:i+r.height}}function Yn(t,e,n,r,i){var o=te(t,e,n);return o.xRel=i,r&&(o.outside=r),o}function Xn(t,e,n){var r=t.doc;if((n+=t.display.viewOffset)<0)return Yn(r.first,0,null,-1,-1);var i=Zt(r,n),o=r.first+r.size-1;if(i>o)return Yn(r.first+r.size-1,Ut(r,o).text.length,null,1,1);e<0&&(e=0);for(var a=Ut(r,i);;){var s=tr(t,a,i,e,n),l=Ne(a,s.ch+(s.xRel>0||s.outside>0?1:0));if(!l)return s;var u=l.find(1);if(u.line==i)return u;a=Ut(r,i=u.line)}}function Zn(t,e,n,r){r-=Hn(e);var i=e.text.length,o=ot((function(e){return Dn(t,n,e-1).bottom<=r}),i,0);return{begin:o,end:i=ot((function(e){return Dn(t,n,e).top>r}),o,i)}}function Qn(t,e,n,r){return n||(n=On(t,e)),Zn(t,e,n,Vn(t,e,Dn(t,n,r),"line").top)}function Jn(t,e,n,r){return!(t.bottom<=n)&&(t.top>n||(r?t.left:t.right)>e)}function tr(t,e,n,r,i){i-=He(e);var o=On(t,e),a=Hn(e),s=0,l=e.text.length,u=!0,c=ut(e,t.doc.direction);if(c){var f=(t.options.lineWrapping?nr:er)(t,e,n,o,c,r,i);s=(u=1!=f.level)?f.from:f.to-1,l=u?f.to:f.from-1}var h,d,p=null,g=null,v=ot((function(e){var n=Dn(t,o,e);return n.top+=a,n.bottom+=a,!!Jn(n,r,i,!1)&&(n.top<=i&&n.left<=r&&(p=e,g=n),!0)}),s,l),m=!1;if(g){var y=r-g.left<g.right-r,b=y==u;v=p+(b?0:1),d=b?"after":"before",h=y?g.left:g.right}else{u||v!=l&&v!=s||v++,d=0==v?"after":v==e.text.length?"before":Dn(t,o,v-(u?1:0)).bottom+a<=i==u?"after":"before";var x=qn(t,te(n,v,d),"line",e,o);h=x.left,m=i<x.top?-1:i>=x.bottom?1:0}return Yn(n,v=it(e.text,v,1),d,m,r-h)}function er(t,e,n,r,i,o,a){var s=ot((function(s){var l=i[s],u=1!=l.level;return Jn(qn(t,te(n,u?l.to:l.from,u?"before":"after"),"line",e,r),o,a,!0)}),0,i.length-1),l=i[s];if(s>0){var u=1!=l.level,c=qn(t,te(n,u?l.from:l.to,u?"after":"before"),"line",e,r);Jn(c,o,a,!0)&&c.top>a&&(l=i[s-1])}return l}function nr(t,e,n,r,i,o,a){var s=Zn(t,e,r,a),l=s.begin,u=s.end;/\s/.test(e.text.charAt(u-1))&&u--;for(var c=null,f=null,h=0;h<i.length;h++){var d=i[h];if(!(d.from>=u||d.to<=l)){var p=Dn(t,r,1!=d.level?Math.min(u,d.to)-1:Math.max(l,d.from)).right,g=p<o?o-p+1e9:p-o;(!c||f>g)&&(c=d,f=g)}}return c||(c=i[i.length-1]),c.from<l&&(c={from:l,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}function rr(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==In){In=E("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)In.appendChild(document.createTextNode("x")),In.appendChild(E("br"));In.appendChild(document.createTextNode("x"))}L(t.measure,In);var n=In.offsetHeight/50;return n>3&&(t.cachedTextHeight=n),A(t.measure),n||1}function ir(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=E("span","xxxxxxxxxx"),n=E("pre",[e],"CodeMirror-line-like");L(t.measure,n);var r=e.getBoundingClientRect(),i=(r.right-r.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function or(t){for(var e=t.display,n={},r={},i=e.gutters.clientLeft,o=e.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var s=t.display.gutterSpecs[a].className;n[s]=o.offsetLeft+o.clientLeft+i,r[s]=o.clientWidth}return{fixedPos:ar(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:e.wrapper.clientWidth}}function ar(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function sr(t){var e=rr(t.display),n=t.options.lineWrapping,r=n&&Math.max(5,t.display.scroller.clientWidth/ir(t.display)-3);return function(i){if(ze(t.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*e:o+e}}function lr(t){var e=t.doc,n=sr(t);e.iter((function(t){var e=n(t);e!=t.height&&Yt(t,e)}))}function ur(t,e,n,r){var i=t.display;if(!n&&"true"==kt(e).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=e.clientX-s.left,a=e.clientY-s.top}catch(e){return null}var l,u=Xn(t,o,a);if(r&&u.xRel>0&&(l=Ut(t.doc,u.line).text).length==u.ch){var c=W(l,l.length,t.options.tabSize)-l.length;u=te(u.line,Math.max(0,Math.round((o-Cn(t.display).left)/ir(t.display))-c))}return u}function cr(t,e){if(e>=t.display.viewTo)return null;if((e-=t.display.viewFrom)<0)return null;for(var n=t.display.view,r=0;r<n.length;r++)if((e-=n[r].size)<0)return r}function fr(t,e,n,r){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),r||(r=0);var i=t.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)_e&&Be(t.doc,e)<i.viewTo&&dr(t);else if(n<=i.viewFrom)_e&&je(t.doc,n+r)>i.viewFrom?dr(t):(i.viewFrom+=r,i.viewTo+=r);else if(e<=i.viewFrom&&n>=i.viewTo)dr(t);else if(e<=i.viewFrom){var o=pr(t,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):dr(t)}else if(n>=i.viewTo){var a=pr(t,e,e,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):dr(t)}else{var s=pr(t,e,e,-1),l=pr(t,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(on(t,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):dr(t)}var u=i.externalMeasured;u&&(n<u.lineN?u.lineN+=r:e<u.lineN+u.size&&(i.externalMeasured=null))}function hr(t,e,n){t.curOp.viewChanged=!0;var r=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(r.externalMeasured=null),!(e<r.viewFrom||e>=r.viewTo)){var o=r.view[cr(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==j(a,n)&&a.push(n)}}}function dr(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function pr(t,e,n,r){var i,o=cr(t,e),a=t.display.view;if(!_e||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var s=t.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=e){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-e,o++}else i=s-e;e+=i,n+=i}for(;Be(t.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function gr(t){for(var e=t.display.view,n=0,r=0;r<e.length;r++){var i=e[r];i.hidden||i.node&&!i.changes||++n}return n}function vr(t){t.display.input.showSelection(t.display.input.prepareSelection())}function mr(t,e){void 0===e&&(e=!0);for(var n=t.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(e||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=t.display.viewTo||s.to().line<t.display.viewFrom)){var l=s.empty();(l||t.options.showCursorWhenSelecting)&&yr(t,s.head,i),l||xr(t,s,o)}}return r}function yr(t,e,n){var r=qn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),i=n.appendChild(E("div"," ","CodeMirror-cursor"));if(i.style.left=r.left+"px",i.style.top=r.top+"px",i.style.height=Math.max(0,r.bottom-r.top)*t.options.cursorHeight+"px",r.other){var o=n.appendChild(E("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=r.other.left+"px",o.style.top=r.other.top+"px",o.style.height=.85*(r.other.bottom-r.other.top)+"px"}}function br(t,e){return t.top-e.top||t.left-e.left}function xr(t,e,n){var r=t.display,i=t.doc,o=document.createDocumentFragment(),a=Cn(t.display),s=a.left,l=Math.max(r.sizerWidth,An(t)-r.sizer.offsetLeft)-a.right,u="ltr"==i.direction;function c(t,e,n,r){e<0&&(e=0),e=Math.round(e),r=Math.round(r),o.appendChild(E("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?l-t:n)+"px;\n                             height: "+(r-e)+"px"))}function f(e,n,r){var o,a,f=Ut(i,e),h=f.text.length;function d(n,r){return Un(t,te(e,n),"div",f,r)}function p(e,n,r){var i=Qn(t,f,null,e),o="ltr"==n==("after"==r)?"left":"right";return d("after"==r?i.begin:i.end-(/\s/.test(f.text.charAt(i.end-1))?2:1),o)[o]}var g=ut(f,i.direction);return function(t,e,n,r){if(!t)return r(e,n,"ltr",0);for(var i=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(r(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),i=!0)}i||r(e,n,"ltr")}(g,n||0,null==r?h:r,(function(t,e,i,f){var v="ltr"==i,m=d(t,v?"left":"right"),y=d(e-1,v?"right":"left"),b=null==n&&0==t,x=null==r&&e==h,w=0==f,_=!g||f==g.length-1;if(y.top-m.top<=3){var k=(u?x:b)&&_,M=(u?b:x)&&w?s:(v?m:y).left,C=k?l:(v?y:m).right;c(M,m.top,C-M,m.bottom)}else{var S,A,L,E;v?(S=u&&b&&w?s:m.left,A=u?l:p(t,i,"before"),L=u?s:p(e,i,"after"),E=u&&x&&_?l:y.right):(S=u?p(t,i,"before"):s,A=!u&&b&&w?l:m.right,L=!u&&x&&_?s:y.left,E=u?p(e,i,"after"):l),c(S,m.top,A-S,m.bottom),m.bottom<y.top&&c(s,m.bottom,null,y.top),c(L,y.top,E-L,y.bottom)}(!o||br(m,o)<0)&&(o=m),br(y,o)<0&&(o=y),(!a||br(m,a)<0)&&(a=m),br(y,a)<0&&(a=y)})),{start:o,end:a}}var h=e.from(),d=e.to();if(h.line==d.line)f(h.line,h.ch,d.ch);else{var p=Ut(i,h.line),g=Ut(i,d.line),v=We(p)==We(g),m=f(h.line,h.ch,v?p.text.length+1:null).end,y=f(d.line,v?0:null,d.ch).start;v&&(m.top<y.top-2?(c(m.right,m.top,null,m.bottom),c(s,y.top,y.left,y.bottom)):c(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&c(s,m.bottom,null,y.top)}n.appendChild(o)}function wr(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval((function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"}),t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function _r(t){t.state.focused||(t.display.input.focus(),Mr(t))}function kr(t){t.state.delayingBlurEvent=!0,setTimeout((function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,Cr(t))}),100)}function Mr(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(pt(t,"focus",t,e),t.state.focused=!0,D(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),l&&setTimeout((function(){return t.display.input.reset(!0)}),20)),t.display.input.receivedFocus()),wr(t))}function Cr(t,e){t.state.delayingBlurEvent||(t.state.focused&&(pt(t,"blur",t,e),t.state.focused=!1,S(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout((function(){t.state.focused||(t.display.shift=!1)}),150))}function Sr(t){for(var e=t.display,n=e.lineDiv.offsetTop,r=0;r<e.view.length;r++){var i=e.view[r],o=t.options.lineWrapping,l=void 0,u=0;if(!i.hidden){if(a&&s<8){var c=i.node.offsetTop+i.node.offsetHeight;l=c-n,n=c}else{var f=i.node.getBoundingClientRect();l=f.bottom-f.top,!o&&i.text.firstChild&&(u=i.text.firstChild.getBoundingClientRect().right-f.left-1)}var h=i.line.height-l;if((h>.005||h<-.005)&&(Yt(i.line,l),Ar(i.line),i.rest))for(var d=0;d<i.rest.length;d++)Ar(i.rest[d]);if(u>t.display.sizerWidth){var p=Math.ceil(u/ir(t.display));p>t.display.maxLineLength&&(t.display.maxLineLength=p,t.display.maxLine=i.line,t.display.maxLineChanged=!0)}}}}function Ar(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var n=t.widgets[e],r=n.node.parentNode;r&&(n.height=r.offsetHeight)}}function Lr(t,e,n){var r=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;r=Math.floor(r-kn(t));var i=n&&null!=n.bottom?n.bottom:r+t.wrapper.clientHeight,o=Zt(e,r),a=Zt(e,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=Zt(e,He(Ut(e,s))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=a&&(o=Zt(e,He(Ut(e,l))-t.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function Er(t,e){var n=t.display,r=rr(t.display);e.top<0&&(e.top=0);var i=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:n.scroller.scrollTop,o=Ln(t),a={};e.bottom-e.top>o&&(e.bottom=e.top+o);var s=t.doc.height+Mn(n),l=e.top<r,u=e.bottom>s-r;if(e.top<i)a.scrollTop=l?0:e.top;else if(e.bottom>i+o){var c=Math.min(e.top,(u?s:e.bottom)-o);c!=i&&(a.scrollTop=c)}var f=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:n.scroller.scrollLeft,h=An(t)-(t.options.fixedGutter?n.gutters.offsetWidth:0),d=e.right-e.left>h;return d&&(e.right=e.left+h),e.left<10?a.scrollLeft=0:e.left<f?a.scrollLeft=Math.max(0,e.left-(d?0:10)):e.right>h+f-3&&(a.scrollLeft=e.right+(d?0:10)-h),a}function Pr(t,e){null!=e&&(Dr(t),t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Tr(t){Dr(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function Or(t,e,n){null==e&&null==n||Dr(t),null!=e&&(t.curOp.scrollLeft=e),null!=n&&(t.curOp.scrollTop=n)}function Dr(t){var e=t.curOp.scrollToPos;e&&(t.curOp.scrollToPos=null,Ir(t,Kn(t,e.from),Kn(t,e.to),e.margin))}function Ir(t,e,n,r){var i=Er(t,{left:Math.min(e.left,n.left),top:Math.min(e.top,n.top)-r,right:Math.max(e.right,n.right),bottom:Math.max(e.bottom,n.bottom)+r});Or(t,i.scrollLeft,i.scrollTop)}function Fr(t,e){Math.abs(t.doc.scrollTop-e)<2||(n||li(t,{top:e}),Nr(t,e,!0),n&&li(t),ri(t,100))}function Nr(t,e,n){e=Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e),(t.display.scroller.scrollTop!=e||n)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function Gr(t,e,n,r){e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!r||(t.doc.scrollLeft=e,fi(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Wr(t){var e=t.display,n=e.gutters.offsetWidth,r=Math.round(t.doc.height+Mn(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Sn(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}var Br=function(t,e,n){this.cm=n;var r=this.vert=E("div",[E("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=E("div",[E("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");r.tabIndex=i.tabIndex=-1,t(r),t(i),ft(r,"scroll",(function(){r.clientHeight&&e(r.scrollTop,"vertical")})),ft(i,"scroll",(function(){i.clientWidth&&e(i.scrollLeft,"horizontal")})),this.checkedZeroWidth=!1,a&&s<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Br.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,r=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?r+"px":"0";var i=t.viewHeight-(e?r:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:e?r:0}},Br.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Br.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Br.prototype.zeroWidthHack=function(){var t=y&&!d?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new B,this.disableVert=new B},Br.prototype.enableZeroWidthBar=function(t,e,n){t.style.pointerEvents="auto",e.set(1e3,(function r(){var i=t.getBoundingClientRect();("vert"==n?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1))!=t?t.style.pointerEvents="none":e.set(1e3,r)}))},Br.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var jr=function(){};function zr(t,e){e||(e=Wr(t));var n=t.display.barWidth,r=t.display.barHeight;Rr(t,e);for(var i=0;i<4&&n!=t.display.barWidth||r!=t.display.barHeight;i++)n!=t.display.barWidth&&t.options.lineWrapping&&Sr(t),Rr(t,Wr(t)),n=t.display.barWidth,r=t.display.barHeight}function Rr(t,e){var n=t.display,r=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}jr.prototype.update=function(){return{bottom:0,right:0}},jr.prototype.setScrollLeft=function(){},jr.prototype.setScrollTop=function(){},jr.prototype.clear=function(){};var Hr={native:Br,null:jr};function Vr(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&S(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Hr[t.options.scrollbarStyle]((function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),ft(e,"mousedown",(function(){t.state.focused&&setTimeout((function(){return t.display.input.focus()}),0)})),e.setAttribute("cm-not-content","true")}),(function(e,n){"horizontal"==n?Gr(t,e):Fr(t,e)}),t),t.display.scrollbars.addClass&&D(t.display.wrapper,t.display.scrollbars.addClass)}var $r=0;function Ur(t){var e;t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++$r},e=t.curOp,an?an.ops.push(e):e.ownsGroup=an={ops:[e],delayedCallbacks:[]}}function qr(t){var e=t.curOp;e&&function(t,e){var n=t.ownsGroup;if(n)try{!function(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var r=0;r<t.ops.length;r++){var i=t.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<e.length)}(n)}finally{an=null,e(n)}}(e,(function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;!function(t){for(var e=t.ops,n=0;n<e.length;n++)Kr(e[n]);for(var r=0;r<e.length;r++)Yr(e[r]);for(var i=0;i<e.length;i++)Xr(e[i]);for(var o=0;o<e.length;o++)Zr(e[o]);for(var a=0;a<e.length;a++)Qr(e[a])}(t)}))}function Kr(t){var e=t.cm,n=e.display;!function(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Sn(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Sn(t)+"px",e.scrollbarsClipped=!0)}(e),t.updateMaxLine&&$e(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new oi(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function Yr(t){t.updatedDisplay=t.mustUpdate&&ai(t.cm,t.update)}function Xr(t){var e=t.cm,n=e.display;t.updatedDisplay&&Sr(e),t.barMeasure=Wr(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Pn(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Sn(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-An(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection())}function Zr(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Gr(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==O();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&zr(e,t.barMeasure),t.updatedDisplay&&ci(e,t.barMeasure),t.selectionChanged&&wr(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&_r(t.cm)}function Qr(t){var e=t.cm,n=e.display,r=e.doc;(t.updatedDisplay&&si(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=t.scrollTop&&Nr(e,t.scrollTop,t.forceScroll),null!=t.scrollLeft&&Gr(e,t.scrollLeft,!0,!0),t.scrollToPos)&&function(t,e){if(!gt(t,"scrollCursorIntoView")){var n=t.display,r=n.sizer.getBoundingClientRect(),i=null;if(e.top+r.top<0?i=!0:e.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),null!=i&&!p){var o=E("div","​",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-kn(t.display))+"px;\n                         height: "+(e.bottom-e.top+Sn(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(i),t.display.lineSpace.removeChild(o)}}}(e,function(t,e,n,r){var i;null==r&&(r=0),t.options.lineWrapping||e!=n||(n="before"==(e=e.ch?te(e.line,"before"==e.sticky?e.ch-1:e.ch,"after"):e).sticky?te(e.line,e.ch+1,"before"):e);for(var o=0;o<5;o++){var a=!1,s=qn(t,e),l=n&&n!=e?qn(t,n):s,u=Er(t,i={left:Math.min(s.left,l.left),top:Math.min(s.top,l.top)-r,right:Math.max(s.left,l.left),bottom:Math.max(s.bottom,l.bottom)+r}),c=t.doc.scrollTop,f=t.doc.scrollLeft;if(null!=u.scrollTop&&(Fr(t,u.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(a=!0)),null!=u.scrollLeft&&(Gr(t,u.scrollLeft),Math.abs(t.doc.scrollLeft-f)>1&&(a=!0)),!a)break}return i}(e,se(r,t.scrollToPos.from),se(r,t.scrollToPos.to),t.scrollToPos.margin));var i=t.maybeHiddenMarkers,o=t.maybeUnhiddenMarkers;if(i)for(var a=0;a<i.length;++a)i[a].lines.length||pt(i[a],"hide");if(o)for(var s=0;s<o.length;++s)o[s].lines.length&&pt(o[s],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&pt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function Jr(t,e){if(t.curOp)return e();Ur(t);try{return e()}finally{qr(t)}}function ti(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Ur(t);try{return e.apply(t,arguments)}finally{qr(t)}}}function ei(t){return function(){if(this.curOp)return t.apply(this,arguments);Ur(this);try{return t.apply(this,arguments)}finally{qr(this)}}}function ni(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Ur(e);try{return t.apply(this,arguments)}finally{qr(e)}}}function ri(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,N(ii,t))}function ii(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,r=de(t,e.highlightFrontier),i=[];e.iter(r.line,Math.min(e.first+e.size,t.display.viewTo+500),(function(o){if(r.line>=t.display.viewFrom){var a=o.styles,s=o.text.length>t.options.maxHighlightLength?Rt(e.mode,r.state):null,l=fe(t,o,r,!0);s&&(r.state=s),o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),h=0;!f&&h<a.length;++h)f=a[h]!=o.styles[h];f&&i.push(r.line),o.stateAfter=r.save(),r.nextLine()}else o.text.length<=t.options.maxHighlightLength&&pe(t,o.text,r),o.stateAfter=r.line%5==0?r.save():null,r.nextLine();if(+new Date>n)return ri(t,t.options.workDelay),!0})),e.highlightFrontier=r.line,e.modeFrontier=Math.max(e.modeFrontier,r.line),i.length&&Jr(t,(function(){for(var e=0;e<i.length;e++)hr(t,i[e],"text")}))}}var oi=function(t,e,n){var r=t.display;this.viewport=e,this.visible=Lr(r,t.doc,e),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=An(t),this.force=n,this.dims=or(t),this.events=[]};function ai(t,e){var n=t.display,r=t.doc;if(e.editorIsHidden)return dr(t),!1;if(!e.force&&e.visible.from>=n.viewFrom&&e.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==gr(t))return!1;hi(t)&&(dr(t),e.dims=or(t));var i=r.first+r.size,o=Math.max(e.visible.from-t.options.viewportMargin,r.first),a=Math.min(i,e.visible.to+t.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(r.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(i,n.viewTo)),_e&&(o=Be(t.doc,o),a=je(t.doc,a));var s=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=e.wrapperHeight||n.lastWrapWidth!=e.wrapperWidth;!function(t,e,n){var r=t.display;0==r.view.length||e>=r.viewTo||n<=r.viewFrom?(r.view=on(t,e,n),r.viewFrom=e):(r.viewFrom>e?r.view=on(t,e,r.viewFrom).concat(r.view):r.viewFrom<e&&(r.view=r.view.slice(cr(t,e))),r.viewFrom=e,r.viewTo<n?r.view=r.view.concat(on(t,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,cr(t,n)))),r.viewTo=n}(t,o,a),n.viewOffset=He(Ut(t.doc,n.viewFrom)),t.display.mover.style.top=n.viewOffset+"px";var u=gr(t);if(!s&&0==u&&!e.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(t){if(t.hasFocus())return null;var e=O();if(!e||!T(t.display.lineDiv,e))return null;var n={activeElt:e};if(window.getSelection){var r=window.getSelection();r.anchorNode&&r.extend&&T(t.display.lineDiv,r.anchorNode)&&(n.anchorNode=r.anchorNode,n.anchorOffset=r.anchorOffset,n.focusNode=r.focusNode,n.focusOffset=r.focusOffset)}return n}(t);return u>4&&(n.lineDiv.style.display="none"),function(t,e,n){var r=t.display,i=t.options.lineNumbers,o=r.lineDiv,a=o.firstChild;function s(e){var n=e.nextSibling;return l&&y&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var u=r.view,c=r.viewFrom,f=0;f<u.length;f++){var h=u[f];if(h.hidden);else if(h.node&&h.node.parentNode==o){for(;a!=h.node;)a=s(a);var d=i&&null!=e&&e<=c&&h.lineNumber;h.changes&&(j(h.changes,"gutter")>-1&&(d=!1),cn(t,h,c,n)),d&&(A(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(Jt(t.options,c)))),a=h.node.nextSibling}else{var p=mn(t,h,c,n);o.insertBefore(p,a)}c+=h.size}for(;a;)a=s(a)}(t,n.updateLineNumbers,e.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(t){if(t&&t.activeElt&&t.activeElt!=O()&&(t.activeElt.focus(),t.anchorNode&&T(document.body,t.anchorNode)&&T(document.body,t.focusNode))){var e=window.getSelection(),n=document.createRange();n.setEnd(t.anchorNode,t.anchorOffset),n.collapse(!1),e.removeAllRanges(),e.addRange(n),e.extend(t.focusNode,t.focusOffset)}}(c),A(n.cursorDiv),A(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,s&&(n.lastWrapHeight=e.wrapperHeight,n.lastWrapWidth=e.wrapperWidth,ri(t,400)),n.updateLineNumbers=null,!0}function si(t,e){for(var n=e.viewport,r=!0;(r&&t.options.lineWrapping&&e.oldDisplayWidth!=An(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Mn(t.display)-Ln(t),n.top)}),e.visible=Lr(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&ai(t,e);r=!1){Sr(t);var i=Wr(t);vr(t),zr(t,i),ci(t,i),e.force=!1}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function li(t,e){var n=new oi(t,e);if(ai(t,n)){Sr(t),si(t,n);var r=Wr(t);vr(t),zr(t,r),ci(t,r),n.finish()}}function ui(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px"}function ci(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Sn(t)+"px"}function fi(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=ar(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=r+i+"px")}}function hi(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=Jt(t.options,e.first+e.size-1),r=t.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(E("div",[E("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,a=i.offsetWidth-o;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(o,r.lineGutter.offsetWidth-a)+1,r.lineNumWidth=r.lineNumInnerWidth+a,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",ui(t.display),!0}return!1}function di(t,e){for(var n=[],r=!1,i=0;i<t.length;i++){var o=t[i],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!e)continue;r=!0}n.push({className:o,style:a})}return e&&!r&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function pi(t){var e=t.gutters,n=t.gutterSpecs;A(e),t.lineGutter=null;for(var r=0;r<n.length;++r){var i=n[r],o=i.className,a=i.style,s=e.appendChild(E("div",null,"CodeMirror-gutter "+o));a&&(s.style.cssText=a),"CodeMirror-linenumbers"==o&&(t.lineGutter=s,s.style.width=(t.lineNumWidth||1)+"px")}e.style.display=n.length?"":"none",ui(t)}function gi(t){pi(t.display),fr(t),fi(t)}function vi(t,e,r,i){var o=this;this.input=r,o.scrollbarFiller=E("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=E("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=P("div",null,"CodeMirror-code"),o.selectionDiv=E("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=E("div",null,"CodeMirror-cursors"),o.measure=E("div",null,"CodeMirror-measure"),o.lineMeasure=E("div",null,"CodeMirror-measure"),o.lineSpace=P("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=P("div",[o.lineSpace],"CodeMirror-lines");o.mover=E("div",[u],null,"position: relative"),o.sizer=E("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=E("div",null,null,"position: absolute; height: 30px; width: 1px;"),o.gutters=E("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=E("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=E("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),a&&s<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),l||n&&m||(o.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(o.wrapper):t(o.wrapper)),o.viewFrom=o.viewTo=e.first,o.reportedViewFrom=o.reportedViewTo=e.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=di(i.gutters,i.lineNumbers),pi(o),r.init(o)}oi.prototype.signal=function(t,e){mt(t,e)&&this.events.push(arguments)},oi.prototype.finish=function(){for(var t=0;t<this.events.length;t++)pt.apply(null,this.events[t])};var mi=0,yi=null;function bi(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function xi(t){var e=bi(t);return e.x*=yi,e.y*=yi,e}function wi(t,e){var r=bi(e),i=r.x,o=r.y,a=t.display,s=a.scroller,u=s.scrollWidth>s.clientWidth,c=s.scrollHeight>s.clientHeight;if(i&&u||o&&c){if(o&&y&&l)t:for(var h=e.target,d=a.view;h!=s;h=h.parentNode)for(var p=0;p<d.length;p++)if(d[p].node==h){t.display.currentWheelTarget=h;break t}if(i&&!n&&!f&&null!=yi)return o&&c&&Fr(t,Math.max(0,s.scrollTop+o*yi)),Gr(t,Math.max(0,s.scrollLeft+i*yi)),(!o||o&&c)&&bt(e),void(a.wheelStartX=null);if(o&&null!=yi){var g=o*yi,v=t.doc.scrollTop,m=v+a.wrapper.clientHeight;g<0?v=Math.max(0,v+g-50):m=Math.min(t.doc.height,m+g+50),li(t,{top:v,bottom:m})}mi<20&&(null==a.wheelStartX?(a.wheelStartX=s.scrollLeft,a.wheelStartY=s.scrollTop,a.wheelDX=i,a.wheelDY=o,setTimeout((function(){if(null!=a.wheelStartX){var t=s.scrollLeft-a.wheelStartX,e=s.scrollTop-a.wheelStartY,n=e&&a.wheelDY&&e/a.wheelDY||t&&a.wheelDX&&t/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(yi=(yi*mi+n)/(mi+1),++mi)}}),200)):(a.wheelDX+=i,a.wheelDY+=o))}}a?yi=-.53:n?yi=15:c?yi=-.7:h&&(yi=-1/3);var _i=function(t,e){this.ranges=t,this.primIndex=e};_i.prototype.primary=function(){return this.ranges[this.primIndex]},_i.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var n=this.ranges[e],r=t.ranges[e];if(!ne(n.anchor,r.anchor)||!ne(n.head,r.head))return!1}return!0},_i.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new ki(re(this.ranges[e].anchor),re(this.ranges[e].head));return new _i(t,this.primIndex)},_i.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},_i.prototype.contains=function(t,e){e||(e=t);for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n];if(ee(e,r.from())>=0&&ee(t,r.to())<=0)return n}return-1};var ki=function(t,e){this.anchor=t,this.head=e};function Mi(t,e,n){var r=t&&t.options.selectionsMayTouch,i=e[n];e.sort((function(t,e){return ee(t.from(),e.from())})),n=j(e,i);for(var o=1;o<e.length;o++){var a=e[o],s=e[o-1],l=ee(s.to(),a.from());if(r&&!a.empty()?l>0:l>=0){var u=oe(s.from(),a.from()),c=ie(s.to(),a.to()),f=s.empty()?a.from()==a.head:s.from()==s.head;o<=n&&--n,e.splice(--o,2,new ki(f?c:u,f?u:c))}}return new _i(e,n)}function Ci(t,e){return new _i([new ki(t,e||t)],0)}function Si(t){return t.text?te(t.from.line+t.text.length-1,K(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Ai(t,e){if(ee(t,e.from)<0)return t;if(ee(t,e.to)<=0)return Si(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=Si(e).ch-e.to.ch),te(n,r)}function Li(t,e){for(var n=[],r=0;r<t.sel.ranges.length;r++){var i=t.sel.ranges[r];n.push(new ki(Ai(i.anchor,e),Ai(i.head,e)))}return Mi(t.cm,n,t.sel.primIndex)}function Ei(t,e,n){return t.line==e.line?te(n.line,t.ch-e.ch+n.ch):te(n.line+(t.line-e.line),t.ch)}function Pi(t){t.doc.mode=Bt(t.options,t.doc.modeOption),Ti(t)}function Ti(t){t.doc.iter((function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)})),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,ri(t,100),t.state.modeGen++,t.curOp&&fr(t)}function Oi(t,e){return 0==e.from.ch&&0==e.to.ch&&""==K(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Di(t,e,n,r){function i(t){return n?n[t]:null}function o(t,n,i){!function(t,e,n,r){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),Le(t),Ee(t,n);var i=r?r(t):1;i!=t.height&&Yt(t,i)}(t,n,i,r),ln(t,"change",t,e)}function a(t,e){for(var n=[],o=t;o<e;++o)n.push(new Ue(u[o],i(o),r));return n}var s=e.from,l=e.to,u=e.text,c=Ut(t,s.line),f=Ut(t,l.line),h=K(u),d=i(u.length-1),p=l.line-s.line;if(e.full)t.insert(0,a(0,u.length)),t.remove(u.length,t.size-u.length);else if(Oi(t,e)){var g=a(0,u.length-1);o(f,f.text,d),p&&t.remove(s.line,p),g.length&&t.insert(s.line,g)}else if(c==f)if(1==u.length)o(c,c.text.slice(0,s.ch)+h+c.text.slice(l.ch),d);else{var v=a(1,u.length-1);v.push(new Ue(h+c.text.slice(l.ch),d,r)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),t.insert(s.line+1,v)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+f.text.slice(l.ch),i(0)),t.remove(s.line+1,p);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(f,h+f.text.slice(l.ch),d);var m=a(1,u.length-1);p>1&&t.remove(s.line+1,p-1),t.insert(s.line+1,m)}ln(t,"change",t,e)}function Ii(t,e,n){!function t(r,i,o){if(r.linked)for(var a=0;a<r.linked.length;++a){var s=r.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(e(s.doc,l),t(s.doc,r,l))}}}(t,null,!0)}function Fi(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,lr(t),Pi(t),Ni(t),t.options.lineWrapping||$e(t),t.options.mode=e.modeOption,fr(t)}function Ni(t){("rtl"==t.doc.direction?D:S)(t.display.lineDiv,"CodeMirror-rtl")}function Gi(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function Wi(t,e){var n={from:re(e.from),to:Si(e),text:qt(t,e.from,e.to)};return Hi(t,n,e.from.line,e.to.line+1),Ii(t,(function(t){return Hi(t,n,e.from.line,e.to.line+1)}),!0),n}function Bi(t){for(;t.length;){if(!K(t).ranges)break;t.pop()}}function ji(t,e,n,r){var i=t.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&i.lastModTime>s-(t.cm?t.cm.options.historyEventDelay:500)||"*"==e.origin.charAt(0)))&&(o=function(t,e){return e?(Bi(t.done),K(t.done)):t.done.length&&!K(t.done).ranges?K(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),K(t.done)):void 0}(i,i.lastOp==r)))a=K(o.changes),0==ee(e.from,e.to)&&0==ee(e.from,a.to)?a.to=Si(e):o.changes.push(Wi(t,e));else{var l=K(i.done);for(l&&l.ranges||Ri(t.sel,i.done),o={changes:[Wi(t,e)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=e.origin,a||pt(t,"historyAdded")}function zi(t,e,n,r){var i=t.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||function(t,e,n,r){var i=e.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}(t,o,K(i.done),e))?i.done[i.done.length-1]=e:Ri(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&!1!==r.clearRedo&&Bi(i.undone)}function Ri(t,e){var n=K(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Hi(t,e,n,r){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,r),(function(n){n.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=n.markedSpans),++o}))}function Vi(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function $i(t,e){var n=function(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var r=[],i=0;i<e.text.length;++i)r.push(Vi(n[i]));return r}(t,e),r=Se(t,e);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)t:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue t;o.push(l)}else a&&(n[i]=a)}return n}function Ui(t,e,n){for(var r=[],i=0;i<t.length;++i){var o=t[i];if(o.ranges)r.push(n?_i.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var u=a[l],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),e)for(var f in u)(c=f.match(/^spans_(\d+)$/))&&j(e,Number(c[1]))>-1&&(K(s)[f]=u[f],delete u[f])}}}return r}function qi(t,e,n,r){if(r){var i=t.anchor;if(n){var o=ee(e,i)<0;o!=ee(n,i)<0?(i=e,e=n):o!=ee(e,n)<0&&(e=n)}return new ki(i,e)}return new ki(n||e,e)}function Ki(t,e,n,r,i){null==i&&(i=t.cm&&(t.cm.display.shift||t.extend)),Ji(t,new _i([qi(t.sel.primary(),e,n,i)],0),r)}function Yi(t,e,n){for(var r=[],i=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)r[o]=qi(t.sel.ranges[o],e[o],null,i);Ji(t,Mi(t.cm,r,t.sel.primIndex),n)}function Xi(t,e,n,r){var i=t.sel.ranges.slice(0);i[e]=n,Ji(t,Mi(t.cm,i,t.sel.primIndex),r)}function Zi(t,e,n,r){Ji(t,Ci(e,n),r)}function Qi(t,e,n){var r=t.history.done,i=K(r);i&&i.ranges?(r[r.length-1]=e,to(t,e,n)):Ji(t,e,n)}function Ji(t,e,n){to(t,e,n),zi(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function to(t,e,n){(mt(t,"beforeSelectionChange")||t.cm&&mt(t.cm,"beforeSelectionChange"))&&(e=function(t,e,n){var r={ranges:e.ranges,update:function(e){this.ranges=[];for(var n=0;n<e.length;n++)this.ranges[n]=new ki(se(t,e[n].anchor),se(t,e[n].head))},origin:n&&n.origin};return pt(t,"beforeSelectionChange",t,r),t.cm&&pt(t.cm,"beforeSelectionChange",t.cm,r),r.ranges!=e.ranges?Mi(t.cm,r.ranges,r.ranges.length-1):e}(t,e,n));var r=n&&n.bias||(ee(e.primary().head,t.sel.primary().head)<0?-1:1);eo(t,ro(t,e,r,!0)),n&&!1===n.scroll||!t.cm||Tr(t.cm)}function eo(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,vt(t.cm)),ln(t,"cursorActivity",t))}function no(t){eo(t,ro(t,t.sel,null,!1))}function ro(t,e,n,r){for(var i,o=0;o<e.ranges.length;o++){var a=e.ranges[o],s=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],l=oo(t,a.anchor,s&&s.anchor,n,r),u=oo(t,a.head,s&&s.head,n,r);(i||l!=a.anchor||u!=a.head)&&(i||(i=e.ranges.slice(0,o)),i[o]=new ki(l,u))}return i?Mi(t.cm,i,e.primIndex):e}function io(t,e,n,r,i){var o=Ut(t,e.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker,u="selectLeft"in l?!l.selectLeft:l.inclusiveLeft,c="selectRight"in l?!l.selectRight:l.inclusiveRight;if((null==s.from||(u?s.from<=e.ch:s.from<e.ch))&&(null==s.to||(c?s.to>=e.ch:s.to>e.ch))){if(i&&(pt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var f=l.find(r<0?1:-1),h=void 0;if((r<0?c:u)&&(f=ao(t,f,-r,f&&f.line==e.line?o:null)),f&&f.line==e.line&&(h=ee(f,n))&&(r<0?h<0:h>0))return io(t,f,e,r,i)}var d=l.find(r<0?-1:1);return(r<0?u:c)&&(d=ao(t,d,r,d.line==e.line?o:null)),d?io(t,d,e,r,i):null}}return e}function oo(t,e,n,r,i){var o=r||1,a=io(t,e,n,o,i)||!i&&io(t,e,n,o,!0)||io(t,e,n,-o,i)||!i&&io(t,e,n,-o,!0);return a||(t.cantEdit=!0,te(t.first,0))}function ao(t,e,n,r){return n<0&&0==e.ch?e.line>t.first?se(t,te(e.line-1)):null:n>0&&e.ch==(r||Ut(t,e.line)).text.length?e.line<t.first+t.size-1?te(e.line+1,0):null:new te(e.line,e.ch+n)}function so(t){t.setSelection(te(t.firstLine(),0),te(t.lastLine()),R)}function lo(t,e,n){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(e,n,i,o){e&&(r.from=se(t,e)),n&&(r.to=se(t,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),pt(t,"beforeChange",t,r),t.cm&&pt(t.cm,"beforeChange",t.cm,r),r.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:r.from,to:r.to,text:r.text,origin:r.origin}}function uo(t,e,n){if(t.cm){if(!t.cm.curOp)return ti(t.cm,uo)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(mt(t,"beforeChange")||t.cm&&mt(t.cm,"beforeChange"))||(e=lo(t,e,!0))){var r=we&&!n&&function(t,e,n){var r=null;if(t.iter(e.line,n.line+1,(function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||r&&-1!=j(r,n)||(r||(r=[])).push(n)}})),!r)return null;for(var i=[{from:e,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var u=i[l];if(!(ee(u.to,s.from)<0||ee(u.from,s.to)>0)){var c=[l,1],f=ee(u.from,s.from),h=ee(u.to,s.to);(f<0||!a.inclusiveLeft&&!f)&&c.push({from:u.from,to:s.from}),(h>0||!a.inclusiveRight&&!h)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),l+=c.length-3}}return i}(t,e.from,e.to);if(r)for(var i=r.length-1;i>=0;--i)co(t,{from:r[i].from,to:r[i].to,text:i?[""]:e.text,origin:e.origin});else co(t,e)}}function co(t,e){if(1!=e.text.length||""!=e.text[0]||0!=ee(e.from,e.to)){var n=Li(t,e);ji(t,e,n,t.cm?t.cm.curOp.id:NaN),po(t,e,n,Se(t,e));var r=[];Ii(t,(function(t,n){n||-1!=j(r,t.history)||(yo(t.history,e),r.push(t.history)),po(t,e,null,Se(t,e))}))}}function fo(t,e,n){var r=t.cm&&t.cm.state.suppressEdits;if(!r||n){for(var i,o=t.history,a=t.sel,s="undo"==e?o.done:o.undone,l="undo"==e?o.undone:o.done,u=0;u<s.length&&(i=s[u],n?!i.ranges||i.equals(t.sel):i.ranges);u++);if(u!=s.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(i=s.pop()).ranges){if(r)return void s.push(i);break}if(Ri(i,l),n&&!i.equals(t.sel))return void Ji(t,i,{clearRedo:!1});a=i}var c=[];Ri(a,l),l.push({changes:c,generation:o.generation}),o.generation=i.generation||++o.maxGeneration;for(var f=mt(t,"beforeChange")||t.cm&&mt(t.cm,"beforeChange"),h=function(n){var r=i.changes[n];if(r.origin=e,f&&!lo(t,r,!1))return s.length=0,{};c.push(Wi(t,r));var o=n?Li(t,r):K(s);po(t,r,o,$i(t,r)),!n&&t.cm&&t.cm.scrollIntoView({from:r.from,to:Si(r)});var a=[];Ii(t,(function(t,e){e||-1!=j(a,t.history)||(yo(t.history,r),a.push(t.history)),po(t,r,null,$i(t,r))}))},d=i.changes.length-1;d>=0;--d){var p=h(d);if(p)return p.v}}}}function ho(t,e){if(0!=e&&(t.first+=e,t.sel=new _i(Y(t.sel.ranges,(function(t){return new ki(te(t.anchor.line+e,t.anchor.ch),te(t.head.line+e,t.head.ch))})),t.sel.primIndex),t.cm)){fr(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++)hr(t.cm,r,"gutter")}}function po(t,e,n,r){if(t.cm&&!t.cm.curOp)return ti(t.cm,po)(t,e,n,r);if(e.to.line<t.first)ho(t,e.text.length-1-(e.to.line-e.from.line));else if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);ho(t,i),e={from:te(t.first,0),to:te(e.to.line+i,e.to.ch),text:[K(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:te(o,Ut(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=qt(t,e.from,e.to),n||(n=Li(t,e)),t.cm?function(t,e,n){var r=t.doc,i=t.display,o=e.from,a=e.to,s=!1,l=o.line;t.options.lineWrapping||(l=Xt(We(Ut(r,o.line))),r.iter(l,a.line+1,(function(t){if(t==i.maxLine)return s=!0,!0})));r.sel.contains(e.from,e.to)>-1&&vt(t);Di(r,e,n,sr(t)),t.options.lineWrapping||(r.iter(l,o.line+e.text.length,(function(t){var e=Ve(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,s=!1)})),s&&(t.curOp.updateMaxLine=!0));(function(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var n=t.first,r=e-1;r>n;r--){var i=Ut(t,r).stateAfter;if(i&&(!(i instanceof ue)||r+i.lookAhead<e)){n=r+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,n)}})(r,o.line),ri(t,400);var u=e.text.length-(a.line-o.line)-1;e.full?fr(t):o.line!=a.line||1!=e.text.length||Oi(t.doc,e)?fr(t,o.line,a.line+1,u):hr(t,o.line,"text");var c=mt(t,"changes"),f=mt(t,"change");if(f||c){var h={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};f&&ln(t,"change",t,h),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(h)}t.display.selForContextMenu=null}(t.cm,e,r):Di(t,e,r),to(t,n,R),t.cantEdit&&oo(t,te(t.firstLine(),0))&&(t.cantEdit=!1)}}function go(t,e,n,r,i){var o;r||(r=n),ee(r,n)<0&&(n=(o=[r,n])[0],r=o[1]),"string"==typeof e&&(e=t.splitLines(e)),uo(t,{from:n,to:r,text:e,origin:i})}function vo(t,e,n,r){n<t.line?t.line+=r:e<t.line&&(t.line=e,t.ch=0)}function mo(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i],a=!0;if(o.ranges){o.copied||((o=t[i]=o.deepCopy()).copied=!0);for(var s=0;s<o.ranges.length;s++)vo(o.ranges[s].anchor,e,n,r),vo(o.ranges[s].head,e,n,r)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=te(u.from.line+r,u.from.ch),u.to=te(u.to.line+r,u.to.ch);else if(e<=u.to.line){a=!1;break}}a||(t.splice(0,i+1),i=0)}}}function yo(t,e){var n=e.from.line,r=e.to.line,i=e.text.length-(r-n)-1;mo(t.done,n,r,i),mo(t.undone,n,r,i)}function bo(t,e,n,r){var i=e,o=e;return"number"==typeof e?o=Ut(t,ae(t,e)):i=Xt(e),null==i?null:(r(o,i)&&t.cm&&hr(t.cm,i,n),o)}function xo(t){this.lines=t,this.parent=null;for(var e=0,n=0;n<t.length;++n)t[n].parent=this,e+=t[n].height;this.height=e}function wo(t){this.children=t;for(var e=0,n=0,r=0;r<t.length;++r){var i=t[r];e+=i.chunkSize(),n+=i.height,i.parent=this}this.size=e,this.height=n,this.parent=null}ki.prototype.from=function(){return oe(this.anchor,this.head)},ki.prototype.to=function(){return ie(this.anchor,this.head)},ki.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},xo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var n=t,r=t+e;n<r;++n){var i=this.lines[n];this.height-=i.height,qe(i),ln(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,n){this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var r=0;r<e.length;++r)e[r].parent=this},iterN:function(t,e,n){for(var r=t+e;t<r;++t)if(n(this.lines[t]))return!0}},wo.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(t<i){var o=Math.min(e,i-t),a=r.height;if(r.removeInner(t,o),this.height-=a-r.height,i==o&&(this.children.splice(n--,1),r.parent=null),0==(e-=o))break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof xo))){var s=[];this.collapse(s),this.children=[new xo(s)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,n){this.size+=e.length,this.height+=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<=o){if(i.insertInner(t,e,n),i.lines&&i.lines.length>50){for(var a=i.lines.length%25+25,s=a;s<i.lines.length;){var l=new xo(i.lines.slice(s,s+=25));i.height-=l.height,this.children.splice(++r,0,l),l.parent=this}i.lines=i.lines.slice(0,a),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=new wo(t.children.splice(t.children.length-5,5));if(t.parent){t.size-=e.size,t.height-=e.height;var n=j(t.parent.children,t);t.parent.children.splice(n+1,0,e)}else{var r=new wo(t.children);r.parent=t,t.children=[r,e],t=r}e.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,n){for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(t<o){var a=Math.min(e,o-t);if(i.iterN(t,a,n))return!0;if(0==(e-=a))break;t=0}else t-=o}}};var _o=function(t,e,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.doc=t,this.node=e};function ko(t,e,n){He(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Pr(t,n)}_o.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,n=this.line,r=Xt(n);if(null!=r&&e){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(n.widgets=null);var o=wn(this);Yt(n,Math.max(0,n.height-o)),t&&(Jr(t,(function(){ko(t,n,-o),hr(t,r,"widget")})),ln(t,"lineWidgetCleared",t,this,r))}},_o.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=wn(this)-e;i&&(ze(this.doc,r)||Yt(r,r.height+i),n&&Jr(n,(function(){n.curOp.forceUpdate=!0,ko(n,r,i),ln(n,"lineWidgetChanged",n,t,Xt(r))})))},yt(_o);var Mo=0,Co=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++Mo};function So(t,e,n,r,i){if(r&&r.shared)return function(t,e,n,r,i){(r=G(r)).shared=!1;var o=[So(t,e,n,r,i)],a=o[0],s=r.widgetNode;return Ii(t,(function(t){s&&(r.widgetNode=s.cloneNode(!0)),o.push(So(t,se(t,e),se(t,n),r,i));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;a=K(o)})),new Ao(o,a)}(t,e,n,r,i);if(t.cm&&!t.cm.curOp)return ti(t.cm,So)(t,e,n,r,i);var o=new Co(t,i),a=ee(e,n);if(r&&G(r,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=P("span",[o.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),r.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Ge(t,e.line,e,n,o)||e.line!=n.line&&Ge(t,n.line,e,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");_e=!0}o.addToHistory&&ji(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var s,l=e.line,u=t.cm;if(t.iter(l,n.line+1,(function(t){u&&o.collapsed&&!u.options.lineWrapping&&We(t)==u.display.maxLine&&(s=!0),o.collapsed&&l!=e.line&&Yt(t,0),function(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}(t,new ke(o,l==e.line?e.ch:null,l==n.line?n.ch:null)),++l})),o.collapsed&&t.iter(e.line,n.line+1,(function(e){ze(t,e)&&Yt(e,0)})),o.clearOnEnter&&ft(o,"beforeCursorEnter",(function(){return o.clear()})),o.readOnly&&(we=!0,(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++Mo,o.atomic=!0),u){if(s&&(u.curOp.updateMaxLine=!0),o.collapsed)fr(u,e.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=e.line;c<=n.line;c++)hr(u,c,"text");o.atomic&&no(u.doc),ln(u,"markerAdded",u,o)}return o}Co.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Ur(t),mt(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var r=null,i=null,o=0;o<this.lines.length;++o){var a=this.lines[o],s=Me(a.markedSpans,this);t&&!this.collapsed?hr(t,Xt(a),"text"):t&&(null!=s.to&&(i=Xt(a)),null!=s.from&&(r=Xt(a))),a.markedSpans=Ce(a.markedSpans,s),null==s.from&&this.collapsed&&!ze(this.doc,a)&&t&&Yt(a,rr(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var l=0;l<this.lines.length;++l){var u=We(this.lines[l]),c=Ve(u);c>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=r&&t&&this.collapsed&&fr(t,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&no(t.doc)),t&&ln(t,"markerCleared",t,this,r,i),e&&qr(t),this.parent&&this.parent.clear()}},Co.prototype.find=function(t,e){var n,r;null==t&&"bookmark"==this.type&&(t=1);for(var i=0;i<this.lines.length;++i){var o=this.lines[i],a=Me(o.markedSpans,this);if(null!=a.from&&(n=te(e?o:Xt(o),a.from),-1==t))return n;if(null!=a.to&&(r=te(e?o:Xt(o),a.to),1==t))return r}return n&&{from:n,to:r}},Co.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,r=this.doc.cm;e&&r&&Jr(r,(function(){var i=e.line,o=Xt(e.line),a=Tn(r,o);if(a&&(Wn(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!ze(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var l=wn(n)-s;l&&Yt(i,i.height+l)}ln(r,"markerChanged",r,t)}))},Co.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&-1!=j(e.maybeHiddenMarkers,this)||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},Co.prototype.detachLine=function(t){if(this.lines.splice(j(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},yt(Co);var Ao=function(t,e){this.markers=t,this.primary=e;for(var n=0;n<t.length;++n)t[n].parent=this};function Lo(t){return t.findMarks(te(t.first,0),t.clipPos(te(t.lastLine())),(function(t){return t.parent}))}function Eo(t){for(var e=function(e){var n=t[e],r=[n.primary.doc];Ii(n.primary.doc,(function(t){return r.push(t)}));for(var i=0;i<n.markers.length;i++){var o=n.markers[i];-1==j(r,o.doc)&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<t.length;n++)e(n)}Ao.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();ln(this,"clear")}},Ao.prototype.find=function(t,e){return this.primary.find(t,e)},yt(Ao);var Po=0,To=function(t,e,n,r,i){if(!(this instanceof To))return new To(t,e,n,r,i);null==n&&(n=0),wo.call(this,[new xo([new Ue("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=n;var o=te(n,0);this.sel=Ci(o),this.history=new Gi(null),this.id=++Po,this.modeOption=e,this.lineSep=r,this.direction="rtl"==i?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Di(this,{from:o,to:o,text:t}),Ji(this,Ci(o),R)};To.prototype=Z(wo.prototype,{constructor:To,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,r=0;r<e.length;++r)n+=e[r].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Kt(this,this.first,this.first+this.size);return!1===t?e:e.join(t||this.lineSeparator())},setValue:ni((function(t){var e=te(this.first,0),n=this.first+this.size-1;uo(this,{from:e,to:te(n,Ut(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&Or(this.cm,0,0),Ji(this,Ci(e),R)})),replaceRange:function(t,e,n,r){go(this,t,e=se(this,e),n=n?se(this,n):e,r)},getRange:function(t,e,n){var r=qt(this,se(this,t),se(this,e));return!1===n?r:r.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(Qt(this,t))return Ut(this,t)},getLineNumber:function(t){return Xt(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=Ut(this,t)),We(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return se(this,t)},getCursor:function(t){var e=this.sel.primary();return null==t||"head"==t?e.head:"anchor"==t?e.anchor:"end"==t||"to"==t||!1===t?e.to():e.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:ni((function(t,e,n){Zi(this,se(this,"number"==typeof t?te(t,e||0):t),null,n)})),setSelection:ni((function(t,e,n){Zi(this,se(this,t),se(this,e||t),n)})),extendSelection:ni((function(t,e,n){Ki(this,se(this,t),e&&se(this,e),n)})),extendSelections:ni((function(t,e){Yi(this,le(this,t),e)})),extendSelectionsBy:ni((function(t,e){Yi(this,le(this,Y(this.sel.ranges,t)),e)})),setSelections:ni((function(t,e,n){if(t.length){for(var r=[],i=0;i<t.length;i++)r[i]=new ki(se(this,t[i].anchor),se(this,t[i].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),Ji(this,Mi(this.cm,r,e),n)}})),addSelection:ni((function(t,e,n){var r=this.sel.ranges.slice(0);r.push(new ki(se(this,t),se(this,e||t))),Ji(this,Mi(this.cm,r,r.length-1),n)})),getSelection:function(t){for(var e,n=this.sel.ranges,r=0;r<n.length;r++){var i=qt(this,n[r].from(),n[r].to());e=e?e.concat(i):i}return!1===t?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],n=this.sel.ranges,r=0;r<n.length;r++){var i=qt(this,n[r].from(),n[r].to());!1!==t&&(i=i.join(t||this.lineSeparator())),e[r]=i}return e},replaceSelection:function(t,e,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=t;this.replaceSelections(r,e,n||"+input")},replaceSelections:ni((function(t,e,n){for(var r=[],i=this.sel,o=0;o<i.ranges.length;o++){var a=i.ranges[o];r[o]={from:a.from(),to:a.to(),text:this.splitLines(t[o]),origin:n}}for(var s=e&&"end"!=e&&function(t,e,n){for(var r=[],i=te(t.first,0),o=i,a=0;a<e.length;a++){var s=e[a],l=Ei(s.from,i,o),u=Ei(Si(s),i,o);if(i=s.to,o=u,"around"==n){var c=t.sel.ranges[a],f=ee(c.head,c.anchor)<0;r[a]=new ki(f?u:l,f?l:u)}else r[a]=new ki(l,l)}return new _i(r,t.sel.primIndex)}(this,r,e),l=r.length-1;l>=0;l--)uo(this,r[l]);s?Qi(this,s):this.cm&&Tr(this.cm)})),undo:ni((function(){fo(this,"undo")})),redo:ni((function(){fo(this,"redo")})),undoSelection:ni((function(){fo(this,"undo",!0)})),redoSelection:ni((function(){fo(this,"redo",!0)})),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,r=0;r<t.done.length;r++)t.done[r].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){var t=this;this.history=new Gi(this.history.maxGeneration),Ii(this,(function(e){return e.history=t.history}),!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Ui(this.history.done),undone:Ui(this.history.undone)}},setHistory:function(t){var e=this.history=new Gi(this.history.maxGeneration);e.done=Ui(t.done.slice(0),null,!0),e.undone=Ui(t.undone.slice(0),null,!0)},setGutterMarker:ni((function(t,e,n){return bo(this,t,"gutter",(function(t){var r=t.gutterMarkers||(t.gutterMarkers={});return r[e]=n,!n&&et(r)&&(t.gutterMarkers=null),!0}))})),clearGutter:ni((function(t){var e=this;this.iter((function(n){n.gutterMarkers&&n.gutterMarkers[t]&&bo(e,n,"gutter",(function(){return n.gutterMarkers[t]=null,et(n.gutterMarkers)&&(n.gutterMarkers=null),!0}))}))})),lineInfo:function(t){var e;if("number"==typeof t){if(!Qt(this,t))return null;if(e=t,!(t=Ut(this,t)))return null}else if(null==(e=Xt(t)))return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:ni((function(t,e,n){return bo(this,t,"gutter"==e?"gutter":"class",(function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass";if(t[r]){if(M(n).test(t[r]))return!1;t[r]+=" "+n}else t[r]=n;return!0}))})),removeLineClass:ni((function(t,e,n){return bo(this,t,"gutter"==e?"gutter":"class",(function(t){var r="text"==e?"textClass":"background"==e?"bgClass":"gutter"==e?"gutterClass":"wrapClass",i=t[r];if(!i)return!1;if(null==n)t[r]=null;else{var o=i.match(M(n));if(!o)return!1;var a=o.index+o[0].length;t[r]=i.slice(0,o.index)+(o.index&&a!=i.length?" ":"")+i.slice(a)||null}return!0}))})),addLineWidget:ni((function(t,e,n){return function(t,e,n,r){var i=new _o(t,n,r),o=t.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),bo(t,e,"widget",(function(e){var n=e.widgets||(e.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=e,o&&!ze(t,e)){var r=He(e)<t.scrollTop;Yt(e,e.height+wn(i)),r&&Pr(o,i.height),o.curOp.forceUpdate=!0}return!0})),o&&ln(o,"lineWidgetAdded",o,i,"number"==typeof e?e:Xt(e)),i}(this,t,e,n)})),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return So(this,se(this,t),se(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return So(this,t=se(this,t),t,n,"bookmark")},findMarksAt:function(t){var e=[],n=Ut(this,(t=se(this,t)).line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,n){t=se(this,t),e=se(this,e);var r=[],i=t.line;return this.iter(t.line,e.line+1,(function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==t.line&&t.ch>=l.to||null==l.from&&i!=t.line||null!=l.from&&i==e.line&&l.from>=e.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i})),r},getAllMarks:function(){var t=[];return this.iter((function(e){var n=e.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&t.push(n[r].marker)})),t},posFromIndex:function(t){var e,n=this.first,r=this.lineSeparator().length;return this.iter((function(i){var o=i.text.length+r;if(o>t)return e=t,!0;t-=o,++n})),se(this,te(n,e))},indexFromPos:function(t){var e=(t=se(this,t)).ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,(function(t){e+=t.text.length+n})),e},copy:function(t){var e=new To(Kt(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var r=new To(Kt(this,e,n),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.find(),o=t.clipPos(i.from),a=t.clipPos(i.to);if(ee(o,a)){var s=So(t,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}(r,Lo(this)),r},unlinkDoc:function(t){if(t instanceof Aa&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){if(this.linked[e].doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Eo(Lo(this));break}}if(t.history==this.history){var n=[t.id];Ii(t,(function(t){return n.push(t.id)}),!0),t.history=new Gi(null),t.history.done=Ui(this.history.done,n),t.history.undone=Ui(this.history.undone,n)}},iterLinkedDocs:function(t){Ii(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Tt(t)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:ni((function(t){var e;("rtl"!=t&&(t="ltr"),t!=this.direction)&&(this.direction=t,this.iter((function(t){return t.order=null})),this.cm&&Jr(e=this.cm,(function(){Ni(e),fr(e)})))}))}),To.prototype.eachLine=To.prototype.iter;var Oo=0;function Do(t){var e=this;if(Io(e),!gt(e,t)&&!_n(e.display,t)){bt(t),a&&(Oo=+new Date);var n=ur(e,t,!0),r=t.dataTransfer.files;if(n&&!e.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),s=0,l=function(){++s==i&&ti(e,(function(){var t={from:n=se(e.doc,n),to:n,text:e.doc.splitLines(o.filter((function(t){return null!=t})).join(e.doc.lineSeparator())),origin:"paste"};uo(e.doc,t),Qi(e.doc,Ci(n,Si(t)))}))()},u=function(t,n){if(e.options.allowDropFileTypes&&-1==j(e.options.allowDropFileTypes,t.type))l();else{var r=new FileReader;r.onerror=function(){return l()},r.onload=function(){var t=r.result;/[\x00-\x08\x0e-\x1f]{2}/.test(t)?l():(o[n]=t,l())},r.readAsText(t)}},c=0;c<r.length;c++)u(r[c],c);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout((function(){return e.display.input.focus()}),20);try{var f=t.dataTransfer.getData("Text");if(f){var h;if(e.state.draggingText&&!e.state.draggingText.copy&&(h=e.listSelections()),to(e.doc,Ci(n,n)),h)for(var d=0;d<h.length;++d)go(e.doc,"",h[d].anchor,h[d].head,"drag");e.replaceSelection(f,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Io(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Fo(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),n=[],r=0;r<e.length;r++){var i=e[r].CodeMirror;i&&n.push(i)}n.length&&n[0].operation((function(){for(var e=0;e<n.length;e++)t(n[e])}))}}var No=!1;function Go(){var t;No||(ft(window,"resize",(function(){null==t&&(t=setTimeout((function(){t=null,Fo(Wo)}),100))})),ft(window,"blur",(function(){return Fo(Cr)})),No=!0)}function Wo(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var Bo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},jo=0;jo<10;jo++)Bo[jo+48]=Bo[jo+96]=String(jo);for(var zo=65;zo<=90;zo++)Bo[zo]=String.fromCharCode(zo);for(var Ro=1;Ro<=12;Ro++)Bo[Ro+111]=Bo[Ro+63235]="F"+Ro;var Ho={};function Vo(t){var e,n,r,i,o=t.split(/-(?!$)/);t=o[o.length-1];for(var a=0;a<o.length-1;a++){var s=o[a];if(/^(cmd|meta|m)$/i.test(s))i=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);r=!0}}return e&&(t="Alt-"+t),n&&(t="Ctrl-"+t),i&&(t="Cmd-"+t),r&&(t="Shift-"+t),t}function $o(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete t[n];continue}for(var i=Y(n.split(" "),Vo),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var l=e[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else e[s]=a}delete t[n]}for(var u in e)t[u]=e[u];return t}function Uo(t,e,n,r){var i=(e=Xo(e)).call?e.call(t,r):e[t];if(!1===i)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Uo(t,e.fallthrough,n,r);for(var o=0;o<e.fallthrough.length;o++){var a=Uo(t,e.fallthrough[o],n,r);if(a)return a}}}function qo(t){var e="string"==typeof t?t:Bo[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function Ko(t,e,n){var r=t;return e.altKey&&"Alt"!=r&&(t="Alt-"+t),(_?e.metaKey:e.ctrlKey)&&"Ctrl"!=r&&(t="Ctrl-"+t),(_?e.ctrlKey:e.metaKey)&&"Cmd"!=r&&(t="Cmd-"+t),!n&&e.shiftKey&&"Shift"!=r&&(t="Shift-"+t),t}function Yo(t,e){if(f&&34==t.keyCode&&t.char)return!1;var n=Bo[t.keyCode];return null!=n&&!t.altGraphKey&&(3==t.keyCode&&t.code&&(n=t.code),Ko(n,t,e))}function Xo(t){return"string"==typeof t?Ho[t]:t}function Zo(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&ee(o.from,K(r).to)<=0;){var a=r.pop();if(ee(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}Jr(t,(function(){for(var e=r.length-1;e>=0;e--)go(t.doc,"",r[e].from,r[e].to,"+delete");Tr(t)}))}function Qo(t,e,n){var r=it(t.text,e+n,n);return r<0||r>t.text.length?null:r}function Jo(t,e,n){var r=Qo(t,e.ch,n);return null==r?null:new te(e.line,r,n<0?"after":"before")}function ta(t,e,n,r,i){if(t){"rtl"==e.getOption("direction")&&(i=-i);var o=ut(n,e.doc.direction);if(o){var a,s=i<0?K(o):o[0],l=i<0==(1==s.level)?"after":"before";if(s.level>0||"rtl"==e.doc.direction){var u=On(e,n);a=i<0?n.text.length-1:0;var c=Dn(e,u,a).top;a=ot((function(t){return Dn(e,u,t).top==c}),i<0==(1==s.level)?s.from:s.to-1,a),"before"==l&&(a=Qo(n,a,1))}else a=i<0?s.to:s.from;return new te(r,a,l)}}return new te(r,i<0?n.text.length:0,i<0?"before":"after")}Ho.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Ho.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Ho.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Ho.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Ho.default=y?Ho.macDefault:Ho.pcDefault;var ea={selectAll:so,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),R)},killLine:function(t){return Zo(t,(function(e){if(e.empty()){var n=Ut(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:te(e.head.line+1,0)}:{from:e.head,to:te(e.head.line,n)}}return{from:e.from(),to:e.to()}}))},deleteLine:function(t){return Zo(t,(function(e){return{from:te(e.from().line,0),to:se(t.doc,te(e.to().line+1,0))}}))},delLineLeft:function(t){return Zo(t,(function(t){return{from:te(t.from().line,0),to:t.from()}}))},delWrappedLineLeft:function(t){return Zo(t,(function(e){var n=t.charCoords(e.head,"div").top+5;return{from:t.coordsChar({left:0,top:n},"div"),to:e.from()}}))},delWrappedLineRight:function(t){return Zo(t,(function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:r}}))},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(te(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(te(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy((function(e){return na(t,e.head.line)}),{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy((function(e){return ra(t,e.head)}),{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy((function(e){return function(t,e){var n=Ut(t.doc,e),r=function(t){for(var e;e=Fe(t);)t=e.find(1,!0).line;return t}(n);r!=n&&(e=Xt(r));return ta(!0,t,n,e,-1)}(t,e.head.line)}),{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")}),V)},goLineLeft:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")}),V)},goLineLeftSmart:function(t){return t.extendSelectionsBy((function(e){var n=t.cursorCoords(e.head,"div").top+5,r=t.coordsChar({left:0,top:n},"div");return r.ch<t.getLine(r.line).search(/\S/)?ra(t,e.head):r}),V)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),r=t.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=W(t.getLine(o.line),o.ch,r);e.push(q(r-a%r))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return Jr(t,(function(){for(var e=t.listSelections(),n=[],r=0;r<e.length;r++)if(e[r].empty()){var i=e[r].head,o=Ut(t.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new te(i.line,i.ch-1)),i.ch>0)i=new te(i.line,i.ch+1),t.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),te(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var a=Ut(t.doc,i.line-1).text;a&&(i=new te(i.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+a.charAt(a.length-1),te(i.line-1,a.length-1),i,"+transpose"))}n.push(new ki(i,i))}t.setSelections(n)}))},newlineAndIndent:function(t){return Jr(t,(function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var r=0;r<e.length;r++)t.indentLine(e[r].from().line,null,!0);Tr(t)}))},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function na(t,e){var n=Ut(t.doc,e),r=We(n);return r!=n&&(e=Xt(r)),ta(!0,t,r,e,1)}function ra(t,e){var n=na(t,e.line),r=Ut(t.doc,n.line),i=ut(r,t.doc.direction);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=e.line==n.line&&e.ch<=o&&e.ch;return te(n.line,a?0:o,n.sticky)}return n}function ia(t,e,n){if("string"==typeof e&&!(e=ea[e]))return!1;t.display.input.ensurePolled();var r=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),i=e(t)!=z}finally{t.display.shift=r,t.state.suppressEdits=!1}return i}var oa=new B;function aa(t,e,n,r){var i=t.state.keySeq;if(i){if(qo(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:oa.set(50,(function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())})),sa(t,i+" "+e,n,r))return!0}return sa(t,e,n,r)}function sa(t,e,n,r){var i=function(t,e,n){for(var r=0;r<t.state.keyMaps.length;r++){var i=Uo(e,t.state.keyMaps[r],n,t);if(i)return i}return t.options.extraKeys&&Uo(e,t.options.extraKeys,n,t)||Uo(e,t.options.keyMap,n,t)}(t,e,r);return"multi"==i&&(t.state.keySeq=e),"handled"==i&&ln(t,"keyHandled",t,e,n),"handled"!=i&&"multi"!=i||(bt(n),wr(t)),!!i}function la(t,e){var n=Yo(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?aa(t,"Shift-"+n,e,(function(e){return ia(t,e,!0)}))||aa(t,n,e,(function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return ia(t,e)})):aa(t,n,e,(function(e){return ia(t,e)})))}var ua=null;function ca(t){var e=this;if(e.curOp.focus=O(),!gt(e,t)){a&&s<11&&27==t.keyCode&&(t.returnValue=!1);var r=t.keyCode;e.display.shift=16==r||t.shiftKey;var i=la(e,t);f&&(ua=i?r:null,!i&&88==r&&!Dt&&(y?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),n&&!y&&!i&&46==r&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),18!=r||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||function(t){var e=t.display.lineDiv;function n(t){18!=t.keyCode&&t.altKey||(S(e,"CodeMirror-crosshair"),dt(document,"keyup",n),dt(document,"mouseover",n))}D(e,"CodeMirror-crosshair"),ft(document,"keyup",n),ft(document,"mouseover",n)}(e)}}function fa(t){16==t.keyCode&&(this.doc.sel.shift=!1),gt(this,t)}function ha(t){var e=this;if(!(_n(e.display,t)||gt(e,t)||t.ctrlKey&&!t.altKey||y&&t.metaKey)){var n=t.keyCode,r=t.charCode;if(f&&n==ua)return ua=null,void bt(t);if(!f||t.which&&!(t.which<10)||!la(e,t)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(function(t,e,n){return aa(t,"'"+n+"'",e,(function(e){return ia(t,e,!0)}))}(e,t,i)||e.display.input.onKeyPress(t))}}}var da,pa,ga=function(t,e,n){this.time=t,this.pos=e,this.button=n};function va(t){var e=this,n=e.display;if(!(gt(e,t)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=t.shiftKey,_n(n,t))l||(n.scroller.draggable=!1,setTimeout((function(){return n.scroller.draggable=!0}),100));else if(!ba(e,t)){var r=ur(e,t),i=Mt(t),o=r?function(t,e){var n=+new Date;return pa&&pa.compare(n,t,e)?(da=pa=null,"triple"):da&&da.compare(n,t,e)?(pa=new ga(n,t,e),da=null,"double"):(da=new ga(n,t,e),pa=null,"single")}(r,i):"single";window.focus(),1==i&&e.state.selectingText&&e.state.selectingText(t),r&&function(t,e,n,r,i){var o="Click";"double"==r?o="Double"+o:"triple"==r&&(o="Triple"+o);return aa(t,Ko(o=(1==e?"Left":2==e?"Middle":"Right")+o,i),i,(function(e){if("string"==typeof e&&(e=ea[e]),!e)return!1;var r=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),r=e(t,n)!=z}finally{t.state.suppressEdits=!1}return r}))}(e,i,r,o,t)||(1==i?r?function(t,e,n,r){a?setTimeout(N(_r,t),0):t.curOp.focus=O();var i,o=function(t,e,n){var r=t.getOption("configureMouse"),i=r?r(t,e,n):{};if(null==i.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;i.unit=o?"rectangle":"single"==e?"char":"double"==e?"word":"line"}(null==i.extend||t.doc.extend)&&(i.extend=t.doc.extend||n.shiftKey);null==i.addNew&&(i.addNew=y?n.metaKey:n.ctrlKey);null==i.moveOnDrag&&(i.moveOnDrag=!(y?n.altKey:n.ctrlKey));return i}(t,n,r),u=t.doc.sel;t.options.dragDrop&&At&&!t.isReadOnly()&&"single"==n&&(i=u.contains(e))>-1&&(ee((i=u.ranges[i]).from(),e)<0||e.xRel>0)&&(ee(i.to(),e)>0||e.xRel<0)?function(t,e,n,r){var i=t.display,o=!1,u=ti(t,(function(e){l&&(i.scroller.draggable=!1),t.state.draggingText=!1,dt(i.wrapper.ownerDocument,"mouseup",u),dt(i.wrapper.ownerDocument,"mousemove",c),dt(i.scroller,"dragstart",f),dt(i.scroller,"drop",u),o||(bt(e),r.addNew||Ki(t.doc,n,null,null,r.extend),l||a&&9==s?setTimeout((function(){i.wrapper.ownerDocument.body.focus(),i.input.focus()}),20):i.input.focus())})),c=function(t){o=o||Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)>=10},f=function(){return o=!0};l&&(i.scroller.draggable=!0);t.state.draggingText=u,u.copy=!r.moveOnDrag,i.scroller.dragDrop&&i.scroller.dragDrop();ft(i.wrapper.ownerDocument,"mouseup",u),ft(i.wrapper.ownerDocument,"mousemove",c),ft(i.scroller,"dragstart",f),ft(i.scroller,"drop",u),kr(t),setTimeout((function(){return i.input.focus()}),20)}(t,r,e,o):function(t,e,n,r){var i=t.display,o=t.doc;bt(e);var a,s,l=o.sel,u=l.ranges;r.addNew&&!r.extend?(s=o.sel.contains(n),a=s>-1?u[s]:new ki(n,n)):(a=o.sel.primary(),s=o.sel.primIndex);if("rectangle"==r.unit)r.addNew||(a=new ki(n,n)),n=ur(t,e,!0,!0),s=-1;else{var c=ma(t,n,r.unit);a=r.extend?qi(a,c.anchor,c.head,r.extend):c}r.addNew?-1==s?(s=u.length,Ji(o,Mi(t,u.concat([a]),s),{scroll:!1,origin:"*mouse"})):u.length>1&&u[s].empty()&&"char"==r.unit&&!r.extend?(Ji(o,Mi(t,u.slice(0,s).concat(u.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),l=o.sel):Xi(o,s,a,H):(s=0,Ji(o,new _i([a],0),H),l=o.sel);var f=n;function h(e){if(0!=ee(f,e))if(f=e,"rectangle"==r.unit){for(var i=[],u=t.options.tabSize,c=W(Ut(o,n.line).text,n.ch,u),h=W(Ut(o,e.line).text,e.ch,u),d=Math.min(c,h),p=Math.max(c,h),g=Math.min(n.line,e.line),v=Math.min(t.lastLine(),Math.max(n.line,e.line));g<=v;g++){var m=Ut(o,g).text,y=$(m,d,u);d==p?i.push(new ki(te(g,y),te(g,y))):m.length>y&&i.push(new ki(te(g,y),te(g,$(m,p,u))))}i.length||i.push(new ki(n,n)),Ji(o,Mi(t,l.ranges.slice(0,s).concat(i),s),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var b,x=a,w=ma(t,e,r.unit),_=x.anchor;ee(w.anchor,_)>0?(b=w.head,_=oe(x.from(),w.anchor)):(b=w.anchor,_=ie(x.to(),w.head));var k=l.ranges.slice(0);k[s]=function(t,e){var n=e.anchor,r=e.head,i=Ut(t.doc,n.line);if(0==ee(n,r)&&n.sticky==r.sticky)return e;var o=ut(i);if(!o)return e;var a=st(o,n.ch,n.sticky),s=o[a];if(s.from!=n.ch&&s.to!=n.ch)return e;var l,u=a+(s.from==n.ch==(1!=s.level)?0:1);if(0==u||u==o.length)return e;if(r.line!=n.line)l=(r.line-n.line)*("ltr"==t.doc.direction?1:-1)>0;else{var c=st(o,r.ch,r.sticky),f=c-a||(r.ch-n.ch)*(1==s.level?-1:1);l=c==u-1||c==u?f<0:f>0}var h=o[u+(l?-1:0)],d=l==(1==h.level),p=d?h.from:h.to,g=d?"after":"before";return n.ch==p&&n.sticky==g?e:new ki(new te(n.line,p,g),r)}(t,new ki(se(o,_),b)),Ji(o,Mi(t,k,s),H)}}var d=i.wrapper.getBoundingClientRect(),p=0;function g(e){t.state.selectingText=!1,p=1/0,e&&(bt(e),i.input.focus()),dt(i.wrapper.ownerDocument,"mousemove",v),dt(i.wrapper.ownerDocument,"mouseup",m),o.history.lastSelOrigin=null}var v=ti(t,(function(e){0!==e.buttons&&Mt(e)?function e(n){var a=++p,s=ur(t,n,!0,"rectangle"==r.unit);if(s)if(0!=ee(s,f)){t.curOp.focus=O(),h(s);var l=Lr(i,o);(s.line>=l.to||s.line<l.from)&&setTimeout(ti(t,(function(){p==a&&e(n)})),150)}else{var u=n.clientY<d.top?-20:n.clientY>d.bottom?20:0;u&&setTimeout(ti(t,(function(){p==a&&(i.scroller.scrollTop+=u,e(n))})),50)}}(e):g(e)})),m=ti(t,g);t.state.selectingText=m,ft(i.wrapper.ownerDocument,"mousemove",v),ft(i.wrapper.ownerDocument,"mouseup",m)}(t,r,e,o)}(e,r,o,t):kt(t)==n.scroller&&bt(t):2==i?(r&&Ki(e.doc,r),setTimeout((function(){return n.input.focus()}),20)):3==i&&(k?e.display.input.onContextMenu(t):kr(e)))}}function ma(t,e,n){if("char"==n)return new ki(e,e);if("word"==n)return t.findWordAt(e);if("line"==n)return new ki(te(e.line,0),se(t.doc,te(e.line+1,0)));var r=n(t,e);return new ki(r.from,r.to)}function ya(t,e,n,r){var i,o;if(e.touches)i=e.touches[0].clientX,o=e.touches[0].clientY;else try{i=e.clientX,o=e.clientY}catch(e){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;r&&bt(e);var a=t.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!mt(t,n))return wt(e);o-=s.top-a.viewOffset;for(var l=0;l<t.display.gutterSpecs.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=i)return pt(t,n,t,Zt(t.doc,o),t.display.gutterSpecs[l].className,e),wt(e)}}function ba(t,e){return ya(t,e,"gutterClick",!0)}function xa(t,e){_n(t.display,e)||function(t,e){if(!mt(t,"gutterContextMenu"))return!1;return ya(t,e,"gutterContextMenu",!1)}(t,e)||gt(t,e,"contextmenu")||k||t.display.input.onContextMenu(e)}function wa(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),jn(t)}ga.prototype.compare=function(t,e,n){return this.time+400>t&&0==ee(e,this.pos)&&n==this.button};var _a={toString:function(){return"CodeMirror.Init"}},ka={},Ma={};function Ca(t,e,n){if(!e!=!(n&&n!=_a)){var r=t.display.dragFunctions,i=e?ft:dt;i(t.display.scroller,"dragstart",r.start),i(t.display.scroller,"dragenter",r.enter),i(t.display.scroller,"dragover",r.over),i(t.display.scroller,"dragleave",r.leave),i(t.display.scroller,"drop",r.drop)}}function Sa(t){t.options.lineWrapping?(D(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(S(t.display.wrapper,"CodeMirror-wrap"),$e(t)),lr(t),fr(t),jn(t),setTimeout((function(){return zr(t)}),100)}function Aa(t,e){var n=this;if(!(this instanceof Aa))return new Aa(t,e);this.options=e=e?G(e):{},G(ka,e,!1);var r=e.value;"string"==typeof r?r=new To(r,e.mode,null,e.lineSeparator,e.direction):e.mode&&(r.modeOption=e.mode),this.doc=r;var i=new Aa.inputStyles[e.inputStyle](this),o=this.display=new vi(t,r,i,e);for(var u in o.wrapper.CodeMirror=this,wa(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vr(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new B,keySeq:null,specialChars:null},e.autofocus&&!m&&o.input.focus(),a&&s<11&&setTimeout((function(){return n.display.input.reset(!0)}),20),function(t){var e=t.display;ft(e.scroller,"mousedown",ti(t,va)),ft(e.scroller,"dblclick",a&&s<11?ti(t,(function(e){if(!gt(t,e)){var n=ur(t,e);if(n&&!ba(t,e)&&!_n(t.display,e)){bt(e);var r=t.findWordAt(n);Ki(t.doc,r.anchor,r.head)}}})):function(e){return gt(t,e)||bt(e)});ft(e.scroller,"contextmenu",(function(e){return xa(t,e)})),ft(e.input.getField(),"contextmenu",(function(n){e.scroller.contains(n.target)||xa(t,n)}));var n,r={end:0};function i(){e.activeTouch&&(n=setTimeout((function(){return e.activeTouch=null}),1e3),(r=e.activeTouch).end=+new Date)}function o(t,e){if(null==e.left)return!0;var n=e.left-t.left,r=e.top-t.top;return n*n+r*r>400}ft(e.scroller,"touchstart",(function(i){if(!gt(t,i)&&!function(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}(i)&&!ba(t,i)){e.input.ensurePolled(),clearTimeout(n);var o=+new Date;e.activeTouch={start:o,moved:!1,prev:o-r.end<=300?r:null},1==i.touches.length&&(e.activeTouch.left=i.touches[0].pageX,e.activeTouch.top=i.touches[0].pageY)}})),ft(e.scroller,"touchmove",(function(){e.activeTouch&&(e.activeTouch.moved=!0)})),ft(e.scroller,"touchend",(function(n){var r=e.activeTouch;if(r&&!_n(e,n)&&null!=r.left&&!r.moved&&new Date-r.start<300){var a,s=t.coordsChar(e.activeTouch,"page");a=!r.prev||o(r,r.prev)?new ki(s,s):!r.prev.prev||o(r,r.prev.prev)?t.findWordAt(s):new ki(te(s.line,0),se(t.doc,te(s.line+1,0))),t.setSelection(a.anchor,a.head),t.focus(),bt(n)}i()})),ft(e.scroller,"touchcancel",i),ft(e.scroller,"scroll",(function(){e.scroller.clientHeight&&(Fr(t,e.scroller.scrollTop),Gr(t,e.scroller.scrollLeft,!0),pt(t,"scroll",t))})),ft(e.scroller,"mousewheel",(function(e){return wi(t,e)})),ft(e.scroller,"DOMMouseScroll",(function(e){return wi(t,e)})),ft(e.wrapper,"scroll",(function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0})),e.dragFunctions={enter:function(e){gt(t,e)||_t(e)},over:function(e){gt(t,e)||(!function(t,e){var n=ur(t,e);if(n){var r=document.createDocumentFragment();yr(t,n,r),t.display.dragCursor||(t.display.dragCursor=E("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),L(t.display.dragCursor,r)}}(t,e),_t(e))},start:function(e){return function(t,e){if(a&&(!t.state.draggingText||+new Date-Oo<100))_t(e);else if(!gt(t,e)&&!_n(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!h)){var n=E("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",f&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),f&&n.parentNode.removeChild(n)}}(t,e)},drop:ti(t,Do),leave:function(e){gt(t,e)||Io(t)}};var l=e.input.getField();ft(l,"keyup",(function(e){return fa.call(t,e)})),ft(l,"keydown",ti(t,ca)),ft(l,"keypress",ti(t,ha)),ft(l,"focus",(function(e){return Mr(t,e)})),ft(l,"blur",(function(e){return Cr(t,e)}))}(this),Go(),Ur(this),this.curOp.forceUpdate=!0,Fi(this,r),e.autofocus&&!m||this.hasFocus()?setTimeout(N(Mr,this),20):Cr(this),Ma)Ma.hasOwnProperty(u)&&Ma[u](this,e[u],_a);hi(this),e.finishInit&&e.finishInit(this);for(var c=0;c<La.length;++c)La[c](this);qr(this),l&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Aa.defaults=ka,Aa.optionHandlers=Ma;var La=[];function Ea(t,e,n,r){var i,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=de(t,e).state:n="prev");var a=t.options.tabSize,s=Ut(o,e),l=W(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,c=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&((u=o.mode.indent(i,s.text.slice(c.length),s.text))==z||u>150)){if(!r)return;n="prev"}}else u=0,n="not";"prev"==n?u=e>o.first?W(Ut(o,e-1).text,null,a):0:"add"==n?u=l+t.options.indentUnit:"subtract"==n?u=l-t.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var f="",h=0;if(t.options.indentWithTabs)for(var d=Math.floor(u/a);d;--d)h+=a,f+="\t";if(h<u&&(f+=q(u-h)),f!=c)return go(o,f,te(e,0),te(e,c.length),"+input"),s.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==e&&g.head.ch<c.length){var v=te(e,c.length);Xi(o,p,new ki(v,v));break}}}Aa.defineInitHook=function(t){return La.push(t)};var Pa=null;function Ta(t){Pa=t}function Oa(t,e,n,r,i){var o=t.doc;t.display.shift=!1,r||(r=o.sel);var a=+new Date-200,s="paste"==i||t.state.pasteIncoming>a,l=Tt(e),u=null;if(s&&r.ranges.length>1)if(Pa&&Pa.text.join("\n")==e){if(r.ranges.length%Pa.text.length==0){u=[];for(var c=0;c<Pa.text.length;c++)u.push(o.splitLines(Pa.text[c]))}}else l.length==r.ranges.length&&t.options.pasteLinesPerSelection&&(u=Y(l,(function(t){return[t]})));for(var f=t.curOp.updateInput,h=r.ranges.length-1;h>=0;h--){var d=r.ranges[h],p=d.from(),g=d.to();d.empty()&&(n&&n>0?p=te(p.line,p.ch-n):t.state.overwrite&&!s?g=te(g.line,Math.min(Ut(o,g.line).text.length,g.ch+K(l).length)):s&&Pa&&Pa.lineWise&&Pa.text.join("\n")==e&&(p=g=te(p.line,0)));var v={from:p,to:g,text:u?u[h%u.length]:l,origin:i||(s?"paste":t.state.cutIncoming>a?"cut":"+input")};uo(t.doc,v),ln(t,"inputRead",t,v)}e&&!s&&Ia(t,e),Tr(t),t.curOp.updateInput<2&&(t.curOp.updateInput=f),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Da(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||Jr(e,(function(){return Oa(e,n,0,null,"paste")})),!0}function Ia(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=t.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(e.indexOf(o.electricChars.charAt(s))>-1){a=Ea(t,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Ut(t.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Ea(t,i.head.line,"smart"));a&&ln(t,"electricInput",t,i.head.line)}}}function Fa(t){for(var e=[],n=[],r=0;r<t.doc.sel.ranges.length;r++){var i=t.doc.sel.ranges[r].head.line,o={anchor:te(i,0),head:te(i+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Na(t,e,n,r){t.setAttribute("autocorrect",n?"":"off"),t.setAttribute("autocapitalize",r?"":"off"),t.setAttribute("spellcheck",!!e)}function Ga(){var t=E("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=E("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return l?t.style.width="1000px":t.setAttribute("wrap","off"),g&&(t.style.border="1px solid black"),Na(t),e}function Wa(t,e,n,r,i){var o=e,a=n,s=Ut(t,e.line),l=i&&t.cm&&"rtl"==t.cm.getOption("direction")?-n:n;function u(r){var o,a;if(null==(o=i?function(t,e,n,r){var i=ut(e,t.doc.direction);if(!i)return Jo(e,n,r);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=st(i,n.ch,n.sticky),a=i[o];if("ltr"==t.doc.direction&&a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return Jo(e,n,r);var s,l=function(t,n){return Qo(e,t instanceof te?t.ch:t,n)},u=function(n){return t.options.lineWrapping?(s=s||On(t,e),Qn(t,e,s,n)):{begin:0,end:e.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if("rtl"==t.doc.direction||1==a.level){var f=1==a.level==r<0,h=l(n,f?1:-1);if(null!=h&&(f?h<=a.to&&h<=c.end:h>=a.from&&h>=c.begin)){var d=f?"before":"after";return new te(n.line,h,d)}}var p=function(t,e,r){for(var o=function(t,e){return e?new te(n.line,l(t,1),"before"):new te(n.line,t,"after")};t>=0&&t<i.length;t+=e){var a=i[t],s=e>0==(1!=a.level),u=s?r.begin:l(r.end,-1);if(a.from<=u&&u<a.to)return o(u,s);if(u=s?a.from:l(a.to,-1),r.begin<=u&&u<r.end)return o(u,s)}},g=p(o+r,r,c);if(g)return g;var v=r>0?c.end:l(c.begin,-1);return null==v||r>0&&v==e.text.length||!(g=p(r>0?0:i.length-1,r,u(v)))?null:g}(t.cm,s,e,n):Jo(s,e,n))){if(r||(a=e.line+l)<t.first||a>=t.first+t.size||(e=new te(a,e.ch,e.sticky),!(s=Ut(t,a))))return!1;e=ta(i,t.cm,s,e.line,l)}else e=o;return!0}if("char"==r)u();else if("column"==r)u(!0);else if("word"==r||"group"==r)for(var c=null,f="group"==r,h=t.cm&&t.cm.getHelper(e,"wordChars"),d=!0;!(n<0)||u(!d);d=!1){var p=s.text.charAt(e.ch)||"\n",g=tt(p,h)?"w":f&&"\n"==p?"n":!f||/\s/.test(p)?null:"p";if(!f||d||g||(g="s"),c&&c!=g){n<0&&(n=1,u(),e.sticky="after");break}if(g&&(c=g),n>0&&!u(!d))break}var v=oo(t,e,o,a,!0);return ne(o,v)&&(v.hitSide=!0),v}function Ba(t,e,n,r){var i,o,a=t.doc,s=e.left;if("page"==r){var l=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(l-.5*rr(t.display),3);i=(n>0?e.bottom:e.top)+n*u}else"line"==r&&(i=n>0?e.bottom+3:e.top-3);for(;(o=Xn(t,s,i)).outside;){if(n<0?i<=0:i>=a.height){o.hitSide=!0;break}i+=5*n}return o}var ja=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new B,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function za(t,e){var n=Tn(t,e.line);if(!n||n.hidden)return null;var r=Ut(t.doc,e.line),i=En(n,r,e.line),o=ut(r,t.doc.direction),a="left";o&&(a=st(o,e.ch)%2?"right":"left");var s=Nn(i.map,e.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function Ra(t,e){return e&&(t.bad=!0),t}function Ha(t,e,n){var r;if(e==t.display.lineDiv){if(!(r=t.display.lineDiv.childNodes[n]))return Ra(t.clipPos(te(t.display.viewTo-1)),!0);e=null,n=0}else for(r=e;;r=r.parentNode){if(!r||r==t.display.lineDiv)return null;if(r.parentNode&&r.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var o=t.display.view[i];if(o.node==r)return Va(o,e,n)}}function Va(t,e,n){var r=t.text.firstChild,i=!1;if(!e||!T(r,e))return Ra(te(Xt(t.line),0),!0);if(e==r&&(i=!0,e=r.childNodes[n],n=0,!e)){var o=t.rest?K(t.rest):t.line;return Ra(te(Xt(o),o.text.length),i)}var a=3==e.nodeType?e:null,s=e;for(a||1!=e.childNodes.length||3!=e.firstChild.nodeType||(a=e.firstChild,n&&(n=a.nodeValue.length));s.parentNode!=r;)s=s.parentNode;var l=t.measure,u=l.maps;function c(e,n,r){for(var i=-1;i<(u?u.length:0);i++)for(var o=i<0?l.map:u[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==e||s==n){var c=Xt(i<0?t.line:t.rest[i]),f=o[a]+r;return(r<0||s!=e)&&(f=o[a+(r?1:0)]),te(c,f)}}}var f=c(a,s,n);if(f)return Ra(f,i);for(var h=s.nextSibling,d=a?a.nodeValue.length-n:0;h;h=h.nextSibling){if(f=c(h,h.firstChild,0))return Ra(te(f.line,f.ch-d),i);d+=h.textContent.length}for(var p=s.previousSibling,g=n;p;p=p.previousSibling){if(f=c(p,p.firstChild,-1))return Ra(te(f.line,f.ch+g),i);g+=p.textContent.length}}ja.prototype.init=function(t){var e=this,n=this,r=n.cm,i=n.div=t.lineDiv;function o(t){if(!gt(r,t)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()}),"cut"==t.type&&r.replaceSelection("",null,"cut");else{if(!r.options.lineWiseCopyCut)return;var e=Fa(r);Ta({lineWise:!0,text:e.text}),"cut"==t.type&&r.operation((function(){r.setSelections(e.ranges,0,R),r.replaceSelection("",null,"cut")}))}if(t.clipboardData){t.clipboardData.clearData();var o=Pa.text.join("\n");if(t.clipboardData.setData("Text",o),t.clipboardData.getData("Text")==o)return void t.preventDefault()}var a=Ga(),s=a.firstChild;r.display.lineSpace.insertBefore(a,r.display.lineSpace.firstChild),s.value=Pa.text.join("\n");var l=document.activeElement;F(s),setTimeout((function(){r.display.lineSpace.removeChild(a),l.focus(),l==i&&n.showPrimarySelection()}),50)}}Na(i,r.options.spellcheck,r.options.autocorrect,r.options.autocapitalize),ft(i,"paste",(function(t){gt(r,t)||Da(t,r)||s<=11&&setTimeout(ti(r,(function(){return e.updateFromDOM()})),20)})),ft(i,"compositionstart",(function(t){e.composing={data:t.data,done:!1}})),ft(i,"compositionupdate",(function(t){e.composing||(e.composing={data:t.data,done:!1})})),ft(i,"compositionend",(function(t){e.composing&&(t.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)})),ft(i,"touchstart",(function(){return n.forceCompositionEnd()})),ft(i,"input",(function(){e.composing||e.readFromDOMSoon()})),ft(i,"copy",o),ft(i,"cut",o)},ja.prototype.prepareSelection=function(){var t=mr(this.cm,!1);return t.focus=this.cm.state.focused,t},ja.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},ja.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},ja.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,r=e.doc.sel.primary(),i=r.from(),o=r.to();if(e.display.viewTo==e.display.viewFrom||i.line>=e.display.viewTo||o.line<e.display.viewFrom)t.removeAllRanges();else{var a=Ha(e,t.anchorNode,t.anchorOffset),s=Ha(e,t.focusNode,t.focusOffset);if(!a||a.bad||!s||s.bad||0!=ee(oe(a,s),i)||0!=ee(ie(a,s),o)){var l=e.display.view,u=i.line>=e.display.viewFrom&&za(e,i)||{node:l[0].measure.map[2],offset:0},c=o.line<e.display.viewTo&&za(e,o);if(!c){var f=l[l.length-1].measure,h=f.maps?f.maps[f.maps.length-1]:f.map;c={node:h[h.length-1],offset:h[h.length-2]-h[h.length-3]}}if(u&&c){var d,p=t.rangeCount&&t.getRangeAt(0);try{d=C(u.node,u.offset,c.offset,c.node)}catch(t){}d&&(!n&&e.state.focused?(t.collapse(u.node,u.offset),d.collapsed||(t.removeAllRanges(),t.addRange(d))):(t.removeAllRanges(),t.addRange(d)),p&&null==t.anchorNode?t.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else t.removeAllRanges()}}},ja.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout((function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation((function(){return t.cm.curOp.selectionChanged=!0}))}),20)},ja.prototype.showMultipleSelections=function(t){L(this.cm.display.cursorDiv,t.cursors),L(this.cm.display.selectionDiv,t.selection)},ja.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},ja.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return T(this.div,e)},ja.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ja.prototype.blur=function(){this.div.blur()},ja.prototype.getField=function(){return this.div},ja.prototype.supportsTouch=function(){return!0},ja.prototype.receivedFocus=function(){var t=this;this.selectionInEditor()?this.pollSelection():Jr(this.cm,(function(){return t.cm.curOp.selectionChanged=!0})),this.polling.set(this.cm.options.pollInterval,(function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}))},ja.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},ja.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=this.getSelection(),e=this.cm;if(v&&c&&this.cm.display.gutterSpecs.length&&function(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}(t.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Ha(e,t.anchorNode,t.anchorOffset),r=Ha(e,t.focusNode,t.focusOffset);n&&r&&Jr(e,(function(){Ji(e.doc,Ci(n,r),R),(n.bad||r.bad)&&(e.curOp.selectionChanged=!0)}))}}},ja.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t,e,n,r=this.cm,i=r.display,o=r.doc.sel.primary(),a=o.from(),s=o.to();if(0==a.ch&&a.line>r.firstLine()&&(a=te(a.line-1,Ut(r.doc,a.line-1).length)),s.ch==Ut(r.doc,s.line).text.length&&s.line<r.lastLine()&&(s=te(s.line+1,0)),a.line<i.viewFrom||s.line>i.viewTo-1)return!1;a.line==i.viewFrom||0==(t=cr(r,a.line))?(e=Xt(i.view[0].line),n=i.view[0].node):(e=Xt(i.view[t].line),n=i.view[t-1].node.nextSibling);var l,u,c=cr(r,s.line);if(c==i.view.length-1?(l=i.viewTo-1,u=i.lineDiv.lastChild):(l=Xt(i.view[c+1].line)-1,u=i.view[c+1].node.previousSibling),!n)return!1;for(var f=r.doc.splitLines(function(t,e,n,r,i){var o="",a=!1,s=t.doc.lineSeparator(),l=!1;function u(){a&&(o+=s,l&&(o+=s),a=l=!1)}function c(t){t&&(u(),o+=t)}function f(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(n)return void c(n);var o,h=e.getAttribute("cm-marker");if(h){var d=t.findMarks(te(r,0),te(i+1,0),(v=+h,function(t){return t.id==v}));return void(d.length&&(o=d[0].find(0))&&c(qt(t.doc,o.from,o.to).join(s)))}if("false"==e.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(e.nodeName);if(!/^br$/i.test(e.nodeName)&&0==e.textContent.length)return;p&&u();for(var g=0;g<e.childNodes.length;g++)f(e.childNodes[g]);/^(pre|p)$/i.test(e.nodeName)&&(l=!0),p&&(a=!0)}else 3==e.nodeType&&c(e.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var v}for(;f(e),e!=n;)e=e.nextSibling,l=!1;return o}(r,n,u,e,l)),h=qt(r.doc,te(e,0),te(l,Ut(r.doc,l).text.length));f.length>1&&h.length>1;)if(K(f)==K(h))f.pop(),h.pop(),l--;else{if(f[0]!=h[0])break;f.shift(),h.shift(),e++}for(var d=0,p=0,g=f[0],v=h[0],m=Math.min(g.length,v.length);d<m&&g.charCodeAt(d)==v.charCodeAt(d);)++d;for(var y=K(f),b=K(h),x=Math.min(y.length-(1==f.length?d:0),b.length-(1==h.length?d:0));p<x&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==f.length&&1==h.length&&e==a.line)for(;d&&d>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)d--,p++;f[f.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(d).replace(/\u200b+$/,"");var w=te(e,d),_=te(l,h.length?K(h).length-p:0);return f.length>1||f[0]||ee(w,_)?(go(r.doc,f,w,_,"+input"),!0):void 0},ja.prototype.ensurePolled=function(){this.forceCompositionEnd()},ja.prototype.reset=function(){this.forceCompositionEnd()},ja.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ja.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout((function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}t.updateFromDOM()}),80))},ja.prototype.updateFromDOM=function(){var t=this;!this.cm.isReadOnly()&&this.pollContent()||Jr(this.cm,(function(){return fr(t.cm)}))},ja.prototype.setUneditable=function(t){t.contentEditable="false"},ja.prototype.onKeyPress=function(t){0==t.charCode||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ti(this.cm,Oa)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},ja.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},ja.prototype.onContextMenu=function(){},ja.prototype.resetPosition=function(){},ja.prototype.needsContentAttribute=!0;var $a=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new B,this.hasSelection=!1,this.composing=null};$a.prototype.init=function(t){var e=this,n=this,r=this.cm;this.createField(t);var i=this.textarea;function o(t){if(!gt(r,t)){if(r.somethingSelected())Ta({lineWise:!1,text:r.getSelections()});else{if(!r.options.lineWiseCopyCut)return;var e=Fa(r);Ta({lineWise:!0,text:e.text}),"cut"==t.type?r.setSelections(e.ranges,null,R):(n.prevInput="",i.value=e.text.join("\n"),F(i))}"cut"==t.type&&(r.state.cutIncoming=+new Date)}}t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),g&&(i.style.width="0px"),ft(i,"input",(function(){a&&s>=9&&e.hasSelection&&(e.hasSelection=null),n.poll()})),ft(i,"paste",(function(t){gt(r,t)||Da(t,r)||(r.state.pasteIncoming=+new Date,n.fastPoll())})),ft(i,"cut",o),ft(i,"copy",o),ft(t.scroller,"paste",(function(e){if(!_n(t,e)&&!gt(r,e)){if(!i.dispatchEvent)return r.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=e.clipboardData,i.dispatchEvent(o)}})),ft(t.lineSpace,"selectstart",(function(e){_n(t,e)||bt(e)})),ft(i,"compositionstart",(function(){var t=r.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:t,range:r.markText(t,r.getCursor("to"),{className:"CodeMirror-composing"})}})),ft(i,"compositionend",(function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)}))},$a.prototype.createField=function(t){this.wrapper=Ga(),this.textarea=this.wrapper.firstChild},$a.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,r=mr(t);if(t.options.moveInputWithCursor){var i=qn(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),a=e.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},$a.prototype.showSelection=function(t){var e=this.cm.display;L(e.cursorDiv,t.cursors),L(e.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},$a.prototype.reset=function(t){if(!this.contextMenuPending&&!this.composing){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var n=e.getSelection();this.textarea.value=n,e.state.focused&&F(this.textarea),a&&s>=9&&(this.hasSelection=n)}else t||(this.prevInput=this.textarea.value="",a&&s>=9&&(this.hasSelection=null))}},$a.prototype.getField=function(){return this.textarea},$a.prototype.supportsTouch=function(){return!1},$a.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||O()!=this.textarea))try{this.textarea.focus()}catch(t){}},$a.prototype.blur=function(){this.textarea.blur()},$a.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},$a.prototype.receivedFocus=function(){this.slowPoll()},$a.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,(function(){t.poll(),t.cm.state.focused&&t.slowPoll()}))},$a.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0,e.polling.set(20,(function n(){e.poll()||t?(e.pollingFast=!1,e.slowPoll()):(t=!0,e.polling.set(60,n))}))},$a.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||Ot(n)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=n.value;if(i==r&&!e.somethingSelected())return!1;if(a&&s>=9&&this.hasSelection===i||y&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r="​"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var l=0,u=Math.min(r.length,i.length);l<u&&r.charCodeAt(l)==i.charCodeAt(l);)++l;return Jr(e,(function(){Oa(e,i.slice(l),r.length-l,null,t.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))})),!0},$a.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},$a.prototype.onKeyPress=function(){a&&s>=9&&(this.hasSelection=null),this.fastPoll()},$a.prototype.onContextMenu=function(t){var e=this,n=e.cm,r=n.display,i=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=ur(n,t),u=r.scroller.scrollTop;if(o&&!f){n.options.resetSelectionOnContextMenu&&-1==n.doc.sel.contains(o)&&ti(n,Ji)(n.doc,Ci(o),R);var c,h=i.style.cssText,d=e.wrapper.style.cssText,p=e.wrapper.offsetParent.getBoundingClientRect();if(e.wrapper.style.cssText="position: static",i.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-p.top-5)+"px; left: "+(t.clientX-p.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",l&&(c=window.scrollY),r.input.focus(),l&&window.scrollTo(null,c),r.input.reset(),n.somethingSelected()||(i.value=e.prevInput=" "),e.contextMenuPending=m,r.selForContextMenu=n.doc.sel,clearTimeout(r.detectingSelectAll),a&&s>=9&&v(),k){_t(t);var g=function(){dt(window,"mouseup",g),setTimeout(m,20)};ft(window,"mouseup",g)}else setTimeout(m,50)}function v(){if(null!=i.selectionStart){var t=n.somethingSelected(),o="​"+(t?i.value:"");i.value="⇚",i.value=o,e.prevInput=t?"":"​",i.selectionStart=1,i.selectionEnd=o.length,r.selForContextMenu=n.doc.sel}}function m(){if(e.contextMenuPending==m&&(e.contextMenuPending=!1,e.wrapper.style.cssText=d,i.style.cssText=h,a&&s<9&&r.scrollbars.setScrollTop(r.scroller.scrollTop=u),null!=i.selectionStart)){(!a||a&&s<9)&&v();var t=0,o=function(){r.selForContextMenu==n.doc.sel&&0==i.selectionStart&&i.selectionEnd>0&&"​"==e.prevInput?ti(n,so)(n):t++<10?r.detectingSelectAll=setTimeout(o,500):(r.selForContextMenu=null,r.input.reset())};r.detectingSelectAll=setTimeout(o,200)}}},$a.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled="nocursor"==t},$a.prototype.setUneditable=function(){},$a.prototype.needsContentAttribute=!1,function(t){var e=t.optionHandlers;function n(n,r,i,o){t.defaults[n]=r,i&&(e[n]=o?function(t,e,n){n!=_a&&i(t,e,n)}:i)}t.defineOption=n,t.Init=_a,n("value","",(function(t,e){return t.setValue(e)}),!0),n("mode",null,(function(t,e){t.doc.modeOption=e,Pi(t)}),!0),n("indentUnit",2,Pi,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,(function(t){Ti(t),jn(t),fr(t)}),!0),n("lineSeparator",null,(function(t,e){if(t.doc.lineSep=e,e){var n=[],r=t.doc.first;t.doc.iter((function(t){for(var i=0;;){var o=t.text.indexOf(e,i);if(-1==o)break;i=o+e.length,n.push(te(r,o))}r++}));for(var i=n.length-1;i>=0;i--)go(t.doc,e,n[i],te(n[i].line,n[i].ch+e.length))}})),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,(function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=_a&&t.refresh()})),n("specialCharPlaceholder",Qe,(function(t){return t.refresh()}),!0),n("electricChars",!0),n("inputStyle",m?"contenteditable":"textarea",(function(){throw new Error("inputStyle can not (yet) be changed in a running editor")}),!0),n("spellcheck",!1,(function(t,e){return t.getInputField().spellcheck=e}),!0),n("autocorrect",!1,(function(t,e){return t.getInputField().autocorrect=e}),!0),n("autocapitalize",!1,(function(t,e){return t.getInputField().autocapitalize=e}),!0),n("rtlMoveVisually",!x),n("wholeLineUpdateBefore",!0),n("theme","default",(function(t){wa(t),gi(t)}),!0),n("keyMap","default",(function(t,e,n){var r=Xo(e),i=n!=_a&&Xo(n);i&&i.detach&&i.detach(t,r),r.attach&&r.attach(t,i||null)})),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,Sa,!0),n("gutters",[],(function(t,e){t.display.gutterSpecs=di(e,t.options.lineNumbers),gi(t)}),!0),n("fixedGutter",!0,(function(t,e){t.display.gutters.style.left=e?ar(t.display)+"px":"0",t.refresh()}),!0),n("coverGutterNextToScrollbar",!1,(function(t){return zr(t)}),!0),n("scrollbarStyle","native",(function(t){Vr(t),zr(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)}),!0),n("lineNumbers",!1,(function(t,e){t.display.gutterSpecs=di(t.options.gutters,e),gi(t)}),!0),n("firstLineNumber",1,gi,!0),n("lineNumberFormatter",(function(t){return t}),gi,!0),n("showCursorWhenSelecting",!1,vr,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,(function(t,e){"nocursor"==e&&(Cr(t),t.display.input.blur()),t.display.input.readOnlyChanged(e)})),n("disableInput",!1,(function(t,e){e||t.display.input.reset()}),!0),n("dragDrop",!0,Ca),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,vr,!0),n("singleCursorHeightPerLine",!0,vr,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,Ti,!0),n("addModeClass",!1,Ti,!0),n("pollInterval",100),n("undoDepth",200,(function(t,e){return t.doc.history.undoDepth=e})),n("historyEventDelay",1250),n("viewportMargin",10,(function(t){return t.refresh()}),!0),n("maxHighlightLength",1e4,Ti,!0),n("moveInputWithCursor",!0,(function(t,e){e||t.display.input.resetPosition()})),n("tabindex",null,(function(t,e){return t.display.input.getField().tabIndex=e||""})),n("autofocus",null),n("direction","ltr",(function(t,e){return t.doc.setDirection(e)}),!0),n("phrases",null)}(Aa),function(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var r=this.options,i=r[t];r[t]==n&&"mode"!=t||(r[t]=n,e.hasOwnProperty(t)&&ti(this,e[t])(this,n,i),pt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Xo(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:ei((function(e,n){var r=e.token?e:t.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");!function(t,e,n){for(var r=0,i=n(e);r<t.length&&n(t[r])<=i;)r++;t.splice(r,0,e)}(this.state.overlays,{mode:r,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},(function(t){return t.priority})),this.state.modeGen++,fr(this)})),removeOverlay:ei((function(t){for(var e=this.state.overlays,n=0;n<e.length;++n){var r=e[n].modeSpec;if(r==t||"string"==typeof t&&r.name==t)return e.splice(n,1),this.state.modeGen++,void fr(this)}})),indentLine:ei((function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),Qt(this.doc,t)&&Ea(this,t,e,n)})),indentSelection:ei((function(t){for(var e=this.doc.sel.ranges,n=-1,r=0;r<e.length;r++){var i=e[r];if(i.empty())i.head.line>n&&(Ea(this,i.head.line,t,!0),n=i.head.line,r==this.doc.sel.primIndex&&Tr(this));else{var o=i.from(),a=i.to(),s=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var l=s;l<n;++l)Ea(this,l,t);var u=this.doc.sel.ranges;0==o.ch&&e.length==u.length&&u[r].from().ch>0&&Xi(this.doc,r,new ki(o,u[r].to()),R)}}})),getTokenAt:function(t,e){return ye(this,t,e)},getLineTokens:function(t,e){return ye(this,te(t),e,!0)},getTokenTypeAt:function(t){t=se(this.doc,t);var e,n=he(this,Ut(this.doc,t.line)),r=0,i=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}r=a+1}}var s=e?e.indexOf("overlay "):-1;return s<0?e:0==s?null:e.slice(0,s-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var r=[];if(!n.hasOwnProperty(e))return r;var i=n[e],o=this.getModeAt(t);if("string"==typeof o[e])i[o[e]]&&r.push(i[o[e]]);else if(o[e])for(var a=0;a<o[e].length;a++){var s=i[o[e][a]];s&&r.push(s)}else o.helperType&&i[o.helperType]?r.push(i[o.helperType]):i[o.name]&&r.push(i[o.name]);for(var l=0;l<i._global.length;l++){var u=i._global[l];u.pred(o,this)&&-1==j(r,u.val)&&r.push(u.val)}return r},getStateAfter:function(t,e){var n=this.doc;return de(this,(t=ae(n,null==t?n.first+n.size-1:t))+1,e).state},cursorCoords:function(t,e){var n=this.doc.sel.primary();return qn(this,null==t?n.head:"object"==typeof t?se(this.doc,t):t?n.from():n.to(),e||"page")},charCoords:function(t,e){return Un(this,se(this.doc,t),e||"page")},coordsChar:function(t,e){return Xn(this,(t=$n(this,t,e||"page")).left,t.top)},lineAtHeight:function(t,e){return t=$n(this,{top:t,left:0},e||"page").top,Zt(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var r,i=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,i=!0),r=Ut(this.doc,t)}else r=t;return Vn(this,r,{top:0,left:0},e||"page",n||i).top+(i?this.doc.height-He(r):0)},defaultTextHeight:function(){return rr(this.display)},defaultCharWidth:function(){return ir(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,r,i){var o,a,s,l=this.display,u=(t=qn(this,se(this.doc,t))).bottom,c=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),l.sizer.appendChild(e),"over"==r)u=t.top;else if("above"==r||"near"==r){var f=Math.max(l.wrapper.clientHeight,this.doc.height),h=Math.max(l.sizer.clientWidth,l.lineSpace.clientWidth);("above"==r||t.bottom+e.offsetHeight>f)&&t.top>e.offsetHeight?u=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=f&&(u=t.bottom),c+e.offsetWidth>h&&(c=h-e.offsetWidth)}e.style.top=u+"px",e.style.left=e.style.right="","right"==i?(c=l.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?c=0:"middle"==i&&(c=(l.sizer.clientWidth-e.offsetWidth)/2),e.style.left=c+"px"),n&&(o=this,a={left:c,top:u,right:c+e.offsetWidth,bottom:u+e.offsetHeight},null!=(s=Er(o,a)).scrollTop&&Fr(o,s.scrollTop),null!=s.scrollLeft&&Gr(o,s.scrollLeft))},triggerOnKeyDown:ei(ca),triggerOnKeyPress:ei(ha),triggerOnKeyUp:fa,triggerOnMouseDown:ei(va),execCommand:function(t){if(ea.hasOwnProperty(t))return ea[t].call(null,this)},triggerElectric:ei((function(t){Ia(this,t)})),findPosH:function(t,e,n,r){var i=1;e<0&&(i=-1,e=-e);for(var o=se(this.doc,t),a=0;a<e&&!(o=Wa(this.doc,o,i,n,r)).hitSide;++a);return o},moveH:ei((function(t,e){var n=this;this.extendSelectionsBy((function(r){return n.display.shift||n.doc.extend||r.empty()?Wa(n.doc,r.head,t,e,n.options.rtlMoveVisually):t<0?r.from():r.to()}),V)})),deleteH:ei((function(t,e){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Zo(this,(function(n){var i=Wa(r,n.head,t,e,!1);return t<0?{from:i,to:n.head}:{from:n.head,to:i}}))})),findPosV:function(t,e,n,r){var i=1,o=r;e<0&&(i=-1,e=-e);for(var a=se(this.doc,t),s=0;s<e;++s){var l=qn(this,a,"div");if(null==o?o=l.left:l.left=o,(a=Ba(this,l,i,n)).hitSide)break}return a},moveV:ei((function(t,e){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy((function(a){if(o)return t<0?a.from():a.to();var s=qn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Ba(n,s,t,e);return"page"==e&&a==r.sel.primary()&&Pr(n,Un(n,l,"div").top-s.top),l}),V),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]})),findWordAt:function(t){var e=Ut(this.doc,t.line).text,n=t.ch,r=t.ch;if(e){var i=this.getHelper(t,"wordChars");"before"!=t.sticky&&r!=e.length||!n?++r:--n;for(var o=e.charAt(n),a=tt(o,i)?function(t){return tt(t,i)}:/\s/.test(o)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!tt(t)};n>0&&a(e.charAt(n-1));)--n;for(;r<e.length&&a(e.charAt(r));)++r}return new ki(te(t.line,n),te(t.line,r))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?D(this.display.cursorDiv,"CodeMirror-overwrite"):S(this.display.cursorDiv,"CodeMirror-overwrite"),pt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==O()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:ei((function(t,e){Or(this,t,e)})),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Sn(this)-this.display.barHeight,width:t.scrollWidth-Sn(this)-this.display.barWidth,clientHeight:Ln(this),clientWidth:An(this)}},scrollIntoView:ei((function(t,e){null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:te(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line?function(t,e){Dr(t),t.curOp.scrollToPos=e}(this,t):Ir(this,t.from,t.to,t.margin)})),setSize:ei((function(t,e){var n=this,r=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&Bn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,(function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){hr(n,i,"widget");break}++i})),this.curOp.forceUpdate=!0,pt(this,"refresh",this)})),operation:function(t){return Jr(this,t)},startOperation:function(){return Ur(this)},endOperation:function(){return qr(this)},refresh:ei((function(){var t=this.display.cachedTextHeight;fr(this),this.curOp.forceUpdate=!0,jn(this),Or(this,this.doc.scrollLeft,this.doc.scrollTop),ui(this.display),(null==t||Math.abs(t-rr(this.display))>.5)&&lr(this),pt(this,"refresh",this)})),swapDoc:ei((function(t){var e=this.doc;return e.cm=null,this.state.selectingText&&this.state.selectingText(),Fi(this,t),jn(this),this.display.input.reset(),Or(this,t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,e),e})),phrase:function(t){var e=this.options.phrases;return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:t},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},yt(t),t.registerHelper=function(e,r,i){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][r]=i},t.registerGlobalHelper=function(e,r,i,o){t.registerHelper(e,r,o),n[e]._global.push({pred:i,val:o})}}(Aa);var Ua="iter insert remove copy getEditor constructor".split(" ");for(var qa in To.prototype)To.prototype.hasOwnProperty(qa)&&j(Ua,qa)<0&&(Aa.prototype[qa]=function(t){return function(){return t.apply(this.doc,arguments)}}(To.prototype[qa]));return yt(To),Aa.inputStyles={textarea:$a,contenteditable:ja},Aa.defineMode=function(t){Aa.defaults.mode||"null"==t||(Aa.defaults.mode=t),Gt.apply(this,arguments)},Aa.defineMIME=function(t,e){Nt[t]=e},Aa.defineMode("null",(function(){return{token:function(t){return t.skipToEnd()}}})),Aa.defineMIME("text/plain","null"),Aa.defineExtension=function(t,e){Aa.prototype[t]=e},Aa.defineDocExtension=function(t,e){To.prototype[t]=e},Aa.fromTextArea=function(t,e){if((e=e?G(e):{}).value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var n=O();e.autofocus=n==t||null!=t.getAttribute("autofocus")&&n==document.body}function r(){t.value=s.getValue()}var i;if(t.form&&(ft(t.form,"submit",r),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var a=o.submit=function(){r(),o.submit=i,o.submit(),o.submit=a}}catch(t){}}e.finishInit=function(n){n.save=r,n.getTextArea=function(){return t},n.toTextArea=function(){n.toTextArea=isNaN,r(),t.parentNode.removeChild(n.getWrapperElement()),t.style.display="",t.form&&(dt(t.form,"submit",r),e.leaveSubmitMethodAlone||"function"!=typeof t.form.submit||(t.form.submit=i))}},t.style.display="none";var s=Aa((function(e){return t.parentNode.insertBefore(e,t.nextSibling)}),e);return s},function(t){t.off=dt,t.on=ft,t.wheelEventPixels=xi,t.Doc=To,t.splitLines=Tt,t.countColumn=W,t.findColumn=$,t.isWordChar=J,t.Pass=z,t.signal=pt,t.Line=Ue,t.changeEnd=Si,t.scrollbarModel=Hr,t.Pos=te,t.cmpPos=ee,t.modes=Ft,t.mimeModes=Nt,t.resolveMode=Wt,t.getMode=Bt,t.modeExtensions=jt,t.extendMode=zt,t.copyState=Rt,t.startState=Vt,t.innerMode=Ht,t.commands=ea,t.keyMap=Ho,t.keyName=Yo,t.isModifierKey=qo,t.lookupKey=Uo,t.normalizeKeyMap=$o,t.StringStream=$t,t.SharedTextMarker=Ao,t.TextMarker=Co,t.LineWidget=_o,t.e_preventDefault=bt,t.e_stopPropagation=xt,t.e_stop=_t,t.addClass=D,t.contains=T,t.rmClass=S,t.keyNames=Bo}(Aa),Aa.version="5.51.0",Aa})),angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective),uiCodemirrorDirective.$inject=["$timeout","uiCodemirrorConfig"],function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,(function(t){var n=e[a][1][t];return i(n||t)}),c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){angular.module("nemLogging",[]),angular.module("nemLogging").provider("nemDebug",(function(){var e;return e=t("debug"),this.$get=function(){return e},this.debug=e,this}));var r=[].slice;angular.module("nemLogging").provider("nemSimpleLogger",["nemDebugProvider",function(t){var e,n,i,o,a,s,l,u,c,f,h,d;for(h=t.debug,i={},e={},c=u=0,f=(o=["debug","info","warn","error","log"]).length;u<f;c=++u)e[d=o[c]]=c;return s=function(t,e,n){if(t>=e)return n()},a=function(t){var e,n,r;if(e=!1,!t)return e;for(n=0,r=o.length;n<r&&(e=null!=t[d=o[n]]&&"function"==typeof t[d]);n++);return e},l=function(t,e){var n,r,a,s;for(null==i[t]&&(i[t]=h(t)),n=i[t],s={},r=0,a=o.length;r<a;r++)s[d=o[r]]="debug"===d?n:e[d];return s},n=function(){function t(t){var n,i,l,u,c,f,h;if(this.$log=t,this.spawn=(c=this.spawn,f=this,function(){return c.apply(f,arguments)}),!this.$log)throw"internalLogger undefined";if(!a(this.$log))throw"@$log is invalid";for(this.doLog=!0,u={},h=this,n=function(t){return u[t]=function(){var n;if(n=1<=arguments.length?r.call(arguments,0):[],h.doLog)return s(e[t],h.currentLevel,(function(){var e;return(e=h.$log)[t].apply(e,n)}))},h[t]=u[t]},i=0,l=o.length;i<l;i++)n(o[i]);this.LEVELS=e,this.currentLevel=e.error}return t.prototype.spawn=function(e){if("string"==typeof e){if(!a(this.$log))throw"@$log is invalid";if(!h)throw"nemDebug is undefined this is probably the light version of this library sep debug logggers is not supported!";return l(e,this.$log)}return new t(e||this.$log)},t}(),this.decorator=["$log",function(t){var r;return(r=new n(t)).currentLevel=e.debug,r}],this.$get=["$log",function(t){return new n(t)}],this}])},{debug:2}],2:[function(t,e,n){function r(){var t;try{t=n.storage.debug}catch(t){}return t}(n=e.exports=t("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},n.formatArgs=function(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))})),t.splice(o,0,r),t},n.save=function(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(t){}},n.load=r,n.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31},n.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(r())},{"./debug":3}],3:[function(t,e,n){(n=e.exports=function(t){function e(){}function i(){var t=i,e=+new Date,a=e-(r||e);t.diff=a,t.prev=r,t.curr=e,r=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=o());var s=Array.prototype.slice.call(arguments);s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var l=0;s[0]=s[0].replace(/%([a-z%])/g,(function(e,r){if("%%"===e)return e;l++;var i=n.formatters[r];if("function"==typeof i){var o=s[l];e=i.call(t,o),s.splice(l,1),l--}return e})),"function"==typeof n.formatArgs&&(s=n.formatArgs.apply(t,s));var u=i.log||n.log||console.log.bind(console);u.apply(t,s)}e.enabled=!1,i.enabled=!0;var a=n.enabled(t)?i:e;return a.namespace=t,a}).coerce=function(t){return t instanceof Error?t.stack||t.message:t},n.disable=function(){n.enable("")},n.enable=function(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;i<r;i++)e[i]&&("-"===(t=e[i].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))},n.enabled=function(t){var e,r;for(e=0,r=n.skips.length;e<r;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;e<r;e++)if(n.names[e].test(t))return!0;return!1},n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var r,i=0;function o(){return n.colors[i++%n.colors.length]}},{ms:4}],4:[function(t,e,n){var r=1e3,i=6e4,o=36e5,a=24*o;function s(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}e.exports=function(t,e){return e=e||{},"string"==typeof t?function(t){if((t=""+t).length>1e4)return;var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(!e)return;var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*n;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}(t):e.long?s(n=t,a,"day")||s(n,o,"hour")||s(n,i,"minute")||s(n,r,"second")||n+" ms":function(t){return t>=a?Math.round(t/a)+"d":t>=o?Math.round(t/o)+"h":t>=i?Math.round(t/i)+"m":t>=r?Math.round(t/r)+"s":t+"ms"}(t);var n}},{}]},{},[1]),function(t,e,n){"use strict";(function(){e.module("uiGmapgoogle-maps.providers",["nemLogging"]),e.module("uiGmapgoogle-maps.wrapped",[]),e.module("uiGmapgoogle-maps.extensions",["uiGmapgoogle-maps.wrapped","uiGmapgoogle-maps.providers"]),e.module("uiGmapgoogle-maps.directives.api.utils",["uiGmapgoogle-maps.extensions"]),e.module("uiGmapgoogle-maps.directives.api.managers",[]),e.module("uiGmapgoogle-maps.directives.api.options",["uiGmapgoogle-maps.directives.api.utils"]),e.module("uiGmapgoogle-maps.directives.api.options.builders",[]),e.module("uiGmapgoogle-maps.directives.api.models.child",["uiGmapgoogle-maps.directives.api.utils","uiGmapgoogle-maps.directives.api.options","uiGmapgoogle-maps.directives.api.options.builders"]),e.module("uiGmapgoogle-maps.directives.api.models.parent",["uiGmapgoogle-maps.directives.api.managers","uiGmapgoogle-maps.directives.api.models.child","uiGmapgoogle-maps.providers"]),e.module("uiGmapgoogle-maps.directives.api",["uiGmapgoogle-maps.directives.api.models.parent"]),e.module("uiGmapgoogle-maps",["uiGmapgoogle-maps.directives.api","uiGmapgoogle-maps.providers"])}).call(this),function(){e.module("uiGmapgoogle-maps.providers").factory("uiGmapMapScriptLoader",["$q","uiGmapuuid",function(n,r){var i,o,a,s,l;return s=void 0,l=void 0,i=function(t){return t.china?"http://maps.google.cn/maps/api/js?":"auto"===t.transport?"//maps.googleapis.com/maps/api/js?":t.transport+"://maps.googleapis.com/maps/api/js?"},o=function(t){var e,n,o,a;return e=["transport","isGoogleMapsForWork","china","preventLoad"],t.isGoogleMapsForWork&&e.push("key"),n=_.map(_.omit(t,e),(function(t,e){return e+"="+t})),s&&(a=document.getElementById(s)).parentNode.removeChild(a),n=n.join("&"),(o=document.createElement("script")).id=s="ui_gmap_map_load_"+r.generate(),o.type="text/javascript",o.src=i(t)+n,document.body.appendChild(o)},a=function(){return e.isDefined(t.google)&&e.isDefined(t.google.maps)},{load:function(e){var r,i;return r=n.defer(),a()?(r.resolve(t.google.maps),r.promise):(i=e.callback="onGoogleMapsReady"+Math.round(1e3*Math.random()),t[i]=function(){t[i]=null,r.resolve(t.google.maps)},t.navigator.connection&&t.Connection&&t.navigator.connection.type===t.Connection.NONE&&!e.preventLoad?document.addEventListener("online",(function(){if(!a())return o(e)})):e.preventLoad||o(e),(l=e).randomizedFunctionName=i,r.promise)},manualLoad:function(){var e;return e=l,a()?t[e.randomizedFunctionName]?t[e.randomizedFunctionName]():void 0:o(e)}}}]).provider("uiGmapGoogleMapApi",(function(){var t;return this.options={transport:"https",isGoogleMapsForWork:!1,china:!1,v:"3",libraries:"",language:"en",preventLoad:!1},this.configure=function(t){e.extend(this.options,t)},this.$get=["uiGmapMapScriptLoader",(t=this,function(e){return e.load(t.options)})],this})).service("uiGmapGoogleMapApiManualLoader",["uiGmapMapScriptLoader",function(t){return{load:function(){t.manualLoad()}}}])}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;e.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendGWin",(function(){return{init:_.once((function(){var e;if(google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow)return google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(t,e,n){null==n&&(this._isOpen=!0,this._open(t,e,!0))},google.maps.InfoWindow.prototype.close=function(t){null==t&&(this._isOpen=!1,this._close(!0))},google.maps.InfoWindow.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},t.InfoBox&&(t.InfoBox.prototype._open=t.InfoBox.prototype.open,t.InfoBox.prototype._close=t.InfoBox.prototype.close,t.InfoBox.prototype._isOpen=!1,t.InfoBox.prototype.open=function(t,e){this._isOpen=!0,this._open(t,e)},t.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},t.InfoBox.prototype.isOpen=function(t){return null==t&&(t=void 0),null==t?this._isOpen:this._isOpen=t},e=function(e){function i(e){var r;this.getOrigCloseBoxImg_=n(this.getOrigCloseBoxImg_,this),this.getCloseBoxDiv_=n(this.getCloseBoxDiv_,this),r=new t.InfoBox(e),_.extend(this,r),null!=e.closeBoxDiv&&(this.closeBoxDiv_=e.closeBoxDiv)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(i,e),i.prototype.getCloseBoxDiv_=function(){return this.closeBoxDiv_},i.prototype.getCloseBoxImg_=function(){var t,e;return t=this.getCloseBoxDiv_(),e=this.getOrigCloseBoxImg_(),t||e},i.prototype.getOrigCloseBoxImg_=function(){var t;return t="",""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},i}(t.InfoBox),t.uiGmapInfoBox=e),t.MarkerLabel_?t.MarkerLabel_.prototype.setContent=function(){var t;(t=this.marker_.get("labelContent"))&&!_.isEqual(this.oldContent,t)&&(void 0===(null!=t?t.nodeType:void 0)?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML,this.oldContent=t):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.labelDiv_.innerHTML="",this.eventDiv_.appendChild(t),this.oldContent=t))}:void 0}))}}))}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").service("uiGmapLodash",(function(){var t,e,n,r,i,o,a,s;return o=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,i=/\\(\\)?/g,n=function(t){var e,n,r;if(n=t.missingName,r=t.swapName,e=t.isProto,null==_[n]&&(_[n]=_[r],e))return _.prototype[n]=_[r]},[{missingName:"contains",swapName:"includes",isProto:!0},{missingName:"includes",swapName:"contains",isProto:!0},{missingName:"object",swapName:"zipObject"},{missingName:"zipObject",swapName:"object"},{missingName:"all",swapName:"every"},{missingName:"every",swapName:"all"},{missingName:"any",swapName:"some"},{missingName:"some",swapName:"any"},{missingName:"first",swapName:"head"},{missingName:"head",swapName:"first"}].forEach((function(t){return n(t)})),null==_.get&&(a=function(t){return _.isObject(t)?t:Object(t)},e=function(t){return null===t?"":t+""},s=function(t){var n;return _.isArray(t)?t:(n=[],e(t).replace(o,(function(t,e,r,o){n.push(r?o.replace(i,"$1"):e||t)})),n)},t=function(t,e,n){var r,i;if(null!==t){void 0!==n&&n in a(t)&&(e=[n]),r=0,i=e.length;for(;!_.isUndefined(t)&&r<i;)t=t[e[r++]];return r&&r===i?t:void 0}},r=function(e,n,r){var i;return void 0===(i=null===e?void 0:t(e,s(n),n+""))?r:i},_.get=r),this.intersectionObjects=function(t,e,n){var r;return null==n&&(n=void 0),r=_.map(t,(function(t){return _.find(e,(function(e){return null!=n?n(t,e):_.isEqual(t,e)}))})),_.filter(r,(function(t){return null!=t}))},this.containsObject=_.includeObject=function(t,e,n){return null==n&&(n=void 0),null!==t&&_.some(t,(function(t){return null!=n?n(t,e):_.isEqual(t,e)}))},this.differenceObjects=function(t,e,n){return null==n&&(n=void 0),_.filter(t,(r=this,function(t){return!r.containsObject(e,t,n)}));var r},this.withoutObjects=this.differenceObjects,this.indexOfObject=function(t,e,n,r){var i,o;if(null==t)return-1;if(i=0,o=t.length,r){if("number"!=typeof r)return t[i=_.sortedIndex(t,e)]===e?i:-1;i=r<0?Math.max(0,o+r):r}for(;i<o;){if(null!=n){if(n(t[i],e))return i}else if(_.isEqual(t[i],e))return i;i++}return-1},this.isNullOrUndefined=function(t){return _.isNull(t||_.isUndefined(t))},this}))}.call(this),function(){e.module("uiGmapgoogle-maps.extensions").factory("uiGmapString",(function(){return function(t){return this.contains=function(e,n){return-1!==t.indexOf(e,n)},this}}))}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmap_sync",[function(){return{fakePromise:function(){var t;return t=void 0,{then:function(e){return t=e},resolve:function(){return t.apply(void 0,arguments)}}}}}]).service("uiGmap_async",["$timeout","uiGmapPromise","uiGmapLogger","$q","uiGmapDataStructures","uiGmapGmapUtil",function(t,n,r,i,o,a){var s,l,u,c,f,h,d,p,g,v,m,y,b,x,w,k,M,C,S;return C=n.promiseTypes,m=n.isInProgress,M=n.promiseStatus,s=n.ExposedPromise,u=n.SniffedPromise,y=function(t,e){var n;return(n=t.promise()).promiseType=t.promiseType,n.$$state&&r.debug("promiseType: "+n.promiseType+", state: "+M(n.$$state.status)),n.cancelCb=e,n},d=function(t,e){return t.promiseType===C.create&&e.promiseType!==C.delete&&e.promiseType!==C.init&&(r.debug("lastPromise.promiseType "+e.promiseType+", newPromiseType: "+t.promiseType+", SKIPPED MUST COME AFTER DELETE ONLY"),!0)},k=function(t,e,n){var i;if(e.promiseType===C.delete&&n.promiseType!==C.delete&&null!=n.cancelCb&&_.isFunction(n.cancelCb)&&m(n)&&(r.debug("promiseType: "+e.promiseType+", CANCELING LAST PROMISE type: "+n.promiseType),n.cancelCb("cancel safe"),null!=(i=t.peek())&&m(i)))return i.hasOwnProperty("cancelCb")&&_.isFunction(i.cancelCb)?(r.debug("promiseType: "+i.promiseType+", CANCELING FIRST PROMISE type: "+i.promiseType),i.cancelCb("cancel safe")):r.warn("first promise was not cancelable")},l=function(t,e,n){var r,i;if(t.existingPieces){if(r=_.last(t.existingPieces._content),d(e,r))return;return k(t.existingPieces,e,r),(i=s(r.finally((function(){return y(e,n)})))).cancelCb=n,i.promiseType=e.promiseType,t.existingPieces.enqueue(i),r.finally((function(){return t.existingPieces.dequeue()}))}return t.existingPieces=new o.Queue,t.existingPieces.enqueue(y(e,n))},80,g={value:null},S=function(t,e,n){var r,i;try{return t.apply(e,n)}catch(i){return r=i,g.value=r,g}},b=function(t,e,n,i){var o,a;return(a=S(t,e,i))===g&&(o="error within chunking iterator: "+g.value,r.error(o),n.reject(o)),"cancel safe"!==a},c=function(t,e,n){var r,i;return r=t===e,i=e[n],r?i:t[i]},f=["length","forEach","map"],h=function(n,r,i,o,a,s,l,u){return v(n,u,(function(u,f){var d,p,g,v;for(d=r&&r<u.length?r:u.length,p=l,g=!0;g&&d--&&p<(u?u.length:p+1);)v=c(n,u,p),g=!!e.isFunction(v)||b(o,void 0,s,[v,p]),++p;if(u){if(!(g&&p<u.length))return s.resolve();if(l=p,r)return null!=a&&_.isFunction(a)&&b(a,void 0,s,[]),t((function(){return h(n,r,i,o,a,s,l,f)}),i,!1)}}))},w=function(t,e,r,i,o,a,s){var l;return l=[],v(t,s,(function(){return n.resolve(l)}),(function(n,s){return p(t,(function(t){return l.push(e(t))}),r,i,o,a,s).then((function(){return l}))}))},{each:p=function(t,e,i,o,a,s,l){var u,c,f;return null==i&&(i=80),null==a&&(a=0),null==s&&(s=1),void 0,c=n.defer(),f=c.promise,s?v(t,l,(function(){return c.resolve(),f}),(function(n,r){return h(t,i,s,e,o,c,a,r),f})):(u="pause (delay) must be set from _async!",r.error(u),c.reject(u),f)},map:w,managePromiseQueue:x=function(t,e,n,i,o){var a;return null==n&&(n=""),a=function(t){if(r.debug(t+": "+t),null!=i&&_.isFunction(i))return i(t)},l(t,u(o,e),a)},promiseLock:x,defaultChunkSize:80,getArrayAndKeys:v=function(t,n,r,i){var o,a;if(e.isArray(t))o=t;else if(n)o=n;else for(a in o=[],t)t[a],t.hasOwnProperty(a)&&!_.includes(f,a)&&o.push(a);return null==i&&(i=r),e.isArray(o)&&!(null!=o?o.length:void 0)&&i!==r?r():i(o,n)},chunkSizeFrom:function(t,e){return null==e&&(e=void 0),_.isNumber(t)&&(e=t),(a.isFalse(t)||!1===t)&&(e=!1),e}}}])}.call(this),function(){var t=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapBaseObject",(function(){var e;return e=["extended","included"],function(){function n(){}return n.extend=function(n){var r,i,o;for(r in n)o=n[r],t.call(e,r)<0&&(this[r]=o);return null!=(i=n.extended)&&i.apply(this),this},n.include=function(n){var r,i,o;for(r in n)o=n[r],t.call(e,r)<0&&(this.prototype[r]=o);return null!=(i=n.included)&&i.apply(this),this},n}()}))}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChildEvents",(function(){return{onChildCreation:function(t){}}}))}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapCtrlHandle",["$q",function(t){var e;return e={handle:function(n,r){return n.$on("$destroy",(function(){return e.handle(n)})),n.deferred=t.defer(),{getScope:function(){return n}}},mapPromise:function(t,e){var n;return(n=e.getScope()).deferred.promise.then((function(e){return t.map=e})),n.deferred.promise}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapEventsHelper",["uiGmapLogger",function(t){var n,r;return r=function(t){return e.isDefined(t.events)&&null!=t.events&&e.isObject(t.events)},n=function(t,e){return r(t)?t:r(e)?e:void 0},{setEvents:function(t,r,i,o){var a;if(null!=(a=n(r,i)))return _.compact(_.map(a.events,(function(n,s){var l;if(o&&(l=_(o).includes(s)),a.events.hasOwnProperty(s)&&e.isFunction(a.events[s])&&!l)return google.maps.event.addListener(t,s,(function(){return r.$evalAsync||(r.$evalAsync=function(){}),r.$evalAsync(n.apply(r,[t,s,i,arguments]))}))})))},removeEvents:function(t){var e,n;if(t)for(e in t)(n=t[e])&&t.hasOwnProperty(e)&&google.maps.event.removeListener(n)}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapFitHelper",["uiGmapLogger",function(t){return{fit:function(t,e){var n,r,i,o,a;if(e&&(null!=t?t.length:void 0)){for(i in n=new google.maps.LatLngBounds,r=!1,t)(o=t[i])&&(r||(r=!0),a=_.isFunction(o.getPosition)?o.getPosition():o),n.extend(a);if(r)return e.fitBounds(n)}}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapGmapUtil",["uiGmapLogger","$compile",function(t,n){var r,i,o,a,s;return i=function(t,e,n){return t===e||-1!==n.indexOf(t)},a=function(t){return Array.isArray(t)&&2===t.length?t[1]:e.isDefined(t.type)&&"Point"===t.type?t.coordinates[1]:t.latitude},s=function(t){return Array.isArray(t)&&2===t.length?t[0]:e.isDefined(t.type)&&"Point"===t.type?t.coordinates[0]:t.longitude},{setCoordsFromEvent:function(t,n){if(t)return Array.isArray(t)&&2===t.length?(t[1]=n.lat(),t[0]=n.lng()):e.isDefined(t.type)&&"Point"===t.type?(t.coordinates[1]=n.lat(),t.coordinates[0]=n.lng()):(t.latitude=n.lat(),t.longitude=n.lng()),t},getLabelPositionPoint:function(t){var e,n;if(void 0!==t)return t=/^([-\d\.]+)\s([-\d\.]+)$/.exec(t),e=parseFloat(t[1]),n=parseFloat(t[2]),null!=e&&null!=n?new google.maps.Point(e,n):void 0},createWindowOptions:function(r,i,a,s){var l;return null!=a&&null!=s&&null!=n?(l=e.extend({},s,{content:this.buildContent(i,s,a),position:null!=s.position?s.position:e.isObject(r)?r.getPosition():o(i.coords)}),null!=r&&null==(null!=l?l.pixelOffset:void 0)&&(null==l.boxClass||(l.pixelOffset={height:0,width:-2})),l):s||(t.error("infoWindow defaults not defined"),a?void 0:t.error("infoWindow content not defined"))},buildContent:function(t,e,r){var i,o;return null!=e.content?o=e.content:null!=n?(i=""===(r=r.replace(/^\s+|\s+$/g,""))?"":n(r)(t)).length>0&&(o=i[0]):o=r,o},defaultDelay:50,isTrue:function(t){return i(t,!0,["true","TRUE",1,"y","Y","yes","YES"])},isFalse:r=function(t){return i(t,!1,["false","FALSE",0,"n","N","no","NO"])},isFalsy:function(t){return i(t,!1,[void 0,null])||r(t)},getCoords:o=function(t){if(t)return Array.isArray(t)&&2===t.length?new google.maps.LatLng(t[1],t[0]):e.isDefined(t.type)&&"Point"===t.type?new google.maps.LatLng(t.coordinates[1],t.coordinates[0]):new google.maps.LatLng(t.latitude,t.longitude)},validateCoords:function(t){if(e.isUndefined(t))return!1;if(_.isArray(t)){if(2===t.length)return!0}else if(null!=t&&(null!=t?t.type:void 0)&&"Point"===t.type&&_.isArray(t.coordinates)&&2===t.coordinates.length)return!0;return!(!t||!e.isDefined((null!=t?t.latitude:void 0)&&e.isDefined(null!=t?t.longitude:void 0)))},equalCoords:function(t,e){return a(t)===a(e)&&s(t)===s(e)},validatePath:function(t){var n,r,i;if(r=0,e.isUndefined(t.type)){if(!Array.isArray(t)||t.length<2)return!1;for(;r<t.length;){if(!(e.isDefined(t[r].latitude)&&e.isDefined(t[r].longitude)||"function"==typeof t[r].lat&&"function"==typeof t[r].lng))return!1;r++}return!0}if(e.isUndefined(t.coordinates))return!1;if("Polygon"===t.type){if(t.coordinates[0].length<4)return!1;n=t.coordinates[0]}else if("MultiPolygon"===t.type){if(i={max:0,index:0},_.forEach(t.coordinates,(function(t,e){if(t[0].length>this.max)return this.max=t[0].length,this.index=e}),i),(n=t.coordinates[i.index][0]).length<4)return!1}else{if("LineString"!==t.type)return!1;if(t.coordinates.length<2)return!1;n=t.coordinates}for(;r<n.length;){if(2!==n[r].length)return!1;r++}return!0},convertPathPoints:function(t){var n,r,i,o,a;if(r=0,o=new google.maps.MVCArray,e.isUndefined(t.type))for(;r<t.length;)e.isDefined(t[r].latitude)&&e.isDefined(t[r].longitude)?i=new google.maps.LatLng(t[r].latitude,t[r].longitude):"function"==typeof t[r].lat&&"function"==typeof t[r].lng&&(i=t[r]),o.push(i),r++;else for("Polygon"===t.type?n=t.coordinates[0]:"MultiPolygon"===t.type?(a={max:0,index:0},_.forEach(t.coordinates,(function(t,e){if(t[0].length>this.max)return this.max=t[0].length,this.index=e}),a),n=t.coordinates[a.index][0]):"LineString"===t.type&&(n=t.coordinates);r<n.length;)o.push(new google.maps.LatLng(n[r][1],n[r][0])),r++;return o},getPath:function(t,e){var n;return null!=e&&_.isString(e)?(n=t,_.each(e.split("."),(function(t){if(n)return n=n[t]})),n):e},validateBoundPoints:function(t){return!(e.isUndefined(t.sw.latitude)||e.isUndefined(t.sw.longitude)||e.isUndefined(t.ne.latitude)||e.isUndefined(t.ne.longitude))},convertBoundPoints:function(t){return new google.maps.LatLngBounds(new google.maps.LatLng(t.sw.latitude,t.sw.longitude),new google.maps.LatLng(t.ne.latitude,t.ne.longitude))},fitMapBounds:function(t,e){return t.fitBounds(e)}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapIsReady",["$q","$timeout",function(t,e){var n,r,i,o;return r=0,o=[],n=function(t,o,a){return e((function(){a<=0?t.reject("Your maps are not found we have checked the maximum amount of times. :)"):r!==o?n(t,o,a-1):t.resolve(i())}),100)},{spawn:function(){var e;return e=t.defer(),o.push(e.promise),{instance:r+=1,deferred:e}},promises:i=function(){return t.all(o)},instances:function(){return r},promise:function(e,r){var i;return null==e&&(e=1),null==r&&(r=50),i=t.defer(),n(i,e,r),i.promise},reset:function(){r=0,o.length=0},decrement:function(){r>0&&(r-=1),o.length&&(o.length-=1)}}}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapLinked",["uiGmapBaseObject",function(e){return function(e){function n(t,e,n,r){this.scope=t,this.element=e,this.attrs=n,this.ctrls=r}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(n,e),n}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapLogger",["nemSimpleLogger",function(t){return t.spawn()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelKey",["uiGmapBaseObject","uiGmapGmapUtil",function(r,i){return function(r){function o(e,n){this.scope=e,this.interface=null!=n?n:{scopeKeys:[]},this.modelsLength=t(this.modelsLength,this),this.updateChild=t(this.updateChild,this),this.destroy=t(this.destroy,this),this.setChildScope=t(this.setChildScope,this),this.getChanges=t(this.getChanges,this),this.getProp=t(this.getProp,this),this.setIdKey=t(this.setIdKey,this),this.modelKeyComparison=t(this.modelKeyComparison,this),o.__super__.constructor.call(this),this.defaultIdKey="id",this.idKey=void 0}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,r),o.prototype.evalModelHandle=function(t,e){if(null!=t&&null!=e)return"self"===e?t:(_.isFunction(e)&&(e=e()),i.getPath(t,e))},o.prototype.modelKeyComparison=function(t,e){var n,r,o,a,s,l,u;if(((o=this.interface.scopeKeys.indexOf("coords")>=0)&&null!=this.scope.coords||!o)&&(s=this.scope),null==s)throw"No scope set!";return!o||(n=this.scopeOrModelVal("coords",s,t),r=this.scopeOrModelVal("coords",s,e),a=i.equalCoords(n,r))?(l=_.without(this.interface.scopeKeys,"coords"),a=_.every(l,(u=this,function(n){return u.scopeOrModelVal(s[n],s,t)===u.scopeOrModelVal(s[n],s,e)}))):a},o.prototype.setIdKey=function(t){return this.idKey=null!=t.idKey?t.idKey:this.defaultIdKey},o.prototype.setVal=function(t,e,n){return this.modelOrKey(t,n),t},o.prototype.modelOrKey=function(t,e){if(null!=e)return"self"!==e?i.getPath(t,e):t},o.prototype.getProp=function(t,e,n){return this.scopeOrModelVal(t,e,n)},o.prototype.getChanges=function(t,e,n){var r,i,o;for(o in n&&(e=_.pick(e,n),t=_.pick(t,n)),i={},o={},r={},t)e&&e[o]===t[o]||(_.isArray(t[o])?i[o]=t[o]:_.isObject(t[o])?(r=this.getChanges(t[o],e?e[o]:null),_.isEmpty(r)||(i[o]=r)):i[o]=t[o]);return i},o.prototype.scopeOrModelVal=function(t,e,n,r){var i,o,a,s;return null==r&&(r=!1),i=function(t,e,n){return null==n&&(n=!1),n?{isScope:t,value:e}:e},s=_.get(e,t),_.isFunction(s)?i(!0,s(n),r):_.isObject(s)?i(!0,s,r):_.isString(s)?(a=(o=s)?"self"===o?n:_.get(n,o):_.get(n,t),_.isFunction(a)?i(!1,a(),r):i(!1,a,r)):i(!0,s,r)},o.prototype.setChildScope=function(t,e,n){var r,i,o,a;for(i in t)o=t[i],null!=(null!=(r=this.scopeOrModelVal(o,e,n,!0))?r.value:void 0)&&(a=r.value)!==e[o]&&(e[o]=a);return e.model=n},o.prototype.onDestroy=function(t){},o.prototype.destroy=function(t){var e;return null==t&&(t=!1),null==this.scope||(null!=(e=this.scope)?e.$$destroyed:void 0)||!this.needToManualDestroy&&!t?this.clean():this.scope.$destroy()},o.prototype.updateChild=function(t,e){if(null!=e[this.idKey])return t.updateModel(e);this.$log.error("Model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key.")},o.prototype.modelsLength=function(t){var n,r;return null==t&&(t=void 0),n=0,null==(r=t||this.scope.models)?n:n=e.isArray(r)||null!=r.length?r.length:Object.keys(r).length},o}(r)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelsWatcher",["uiGmapLogger","uiGmap_async","$q","uiGmapPromise",function(t,e,n,r){return{didQueueInitPromise:function(t,n){return 0===n.models.length&&(e.promiseLock(t,r.promiseTypes.init,null,null,(function(){return r.resolve()})),!0)},figureOutState:function(e,n,r,i,o){var a,s,l,u;return a=[],s={},l=[],u=[],n.models.forEach((function(o){var l;return null==o[e]?t.error(" id missing for model #{m.toString()},\ncan not use do comparison/insertion"):(s[o[e]]={},null==r.get(o[e])?a.push(o):(l=r.get(o[e]),i(o,l.clonedModel,n)?void 0:u.push({model:o,child:l})))})),r.values().forEach((function(n){var r;if(null!=n){if(null!=n.model)return r=n.model[e],null==s[r]?l.push(n):void 0;t.error("child.model undefined in ModelsWatcher.")}else t.error("child undefined in ModelsWatcher.")})),{adds:a,removals:l,updates:u}}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapPromise",["$q","$timeout","uiGmapLogger",function(t,e,n){var r,i,o,a,s,l,u;return s={create:"create",update:"update",delete:"delete",init:"init"},(u={})[""+(a={IN_PROGRESS:0,RESOLVED:1,REJECTED:2}).IN_PROGRESS]="in-progress",u[""+a.RESOLVED]="resolved",u[""+a.REJECTED]="rejected",l=u,i=function(t){return t.$$state?t.$$state.status===a.IN_PROGRESS:!t.hasOwnProperty("$$v")||void 0},o=function(t){return t.$$state?t.$$state.status===a.RESOLVED:!!t.hasOwnProperty("$$v")||void 0},r=function(e){var n,r,i;return n=t.defer(),r=t.all([e,n.promise]),i=t.defer(),e.then(n.resolve,(function(){}),(function(t){return n.notify(t),i.notify(t)})),r.then((function(t){return i.resolve(t[0]||t[1])}),(function(t){return i.reject(t)})),i.promise.cancel=function(t){return null==t&&(t="canceled"),n.reject(t)},i.promise.notify=function(t){if(null==t&&(t="cancel safe"),i.notify(t),e.hasOwnProperty("notify"))return e.notify(t)},null!=e.promiseType&&(i.promise.promiseType=e.promiseType),i.promise},{defer:function(){return t.defer()},promise:function(r){var i;if(_.isFunction(r))return i=t.defer(),e((function(){var t;return t=r(),i.resolve(t)})),i.promise;n.error("uiGmapPromise.promise() only accepts functions")},resolve:function(){var e;return(e=t.defer()).resolve.apply(void 0,arguments),e.promise},promiseTypes:s,isInProgress:i,isResolved:o,promiseStatus:function(t){return l[t]||"done w error"},ExposedPromise:r,SniffedPromise:function(t,e){return{promise:t,promiseType:e}}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropMap",(function(){return function(){function e(){this.removeAll=t(this.removeAll,this),this.slice=t(this.slice,this),this.push=t(this.push,this),this.keys=t(this.keys,this),this.values=t(this.values,this),this.remove=t(this.remove,this),this.put=t(this.put,this),this.stateChanged=t(this.stateChanged,this),this.get=t(this.get,this),this.length=0,this.dict={},this.didValsStateChange=!1,this.didKeysStateChange=!1,this.allVals=[],this.allKeys=[]}return e.prototype.get=function(t){return this.dict[t]},e.prototype.stateChanged=function(){return this.didValsStateChange=!0,this.didKeysStateChange=!0},e.prototype.put=function(t,e){return null==this.get(t)&&this.length++,this.stateChanged(),this.dict[t]=e},e.prototype.remove=function(t,e){var n;if(null==e&&(e=!1),!e||this.get(t))return n=this.dict[t],delete this.dict[t],this.length--,this.stateChanged(),n},e.prototype.valuesOrKeys=function(t){var e,n;return null==t&&(t="Keys"),this["did"+t+"StateChange"]?(n=[],e=[],_.each(this.dict,(function(t,r){return n.push(t),e.push(r)})),this.didKeysStateChange=!1,this.didValsStateChange=!1,this.allVals=n,this.allKeys=e,this["all"+t]):this["all"+t]},e.prototype.values=function(){return this.valuesOrKeys("Vals")},e.prototype.keys=function(){return this.valuesOrKeys()},e.prototype.push=function(t,e){return null==e&&(e="key"),this.put(t[e],t)},e.prototype.slice=function(){return this.keys().map((t=this,function(e){return t.remove(e)}));var t},e.prototype.removeAll=function(){return this.slice()},e.prototype.each=function(t){return _.each(this.dict,(function(e,n){return t(e)}))},e.prototype.map=function(t){return _.map(this.dict,(function(e,n){return t(e)}))},e}()}))}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropertyAction",["uiGmapLogger",function(t){return function(t){return this.setIfChange=function(e){return function(n,r){if(!_.isEqual(r,n))return t(e,n)}},this.sic=this.setIfChange,this}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapClustererMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap","uiGmapEventsHelper",function(n,r,i,o){return function(){function a(e,r,o,s){null==r&&(r={}),this.opt_options=null!=o?o:{},this.opt_events=s,this.checkSync=t(this.checkSync,this),this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.attachEvents=t(this.attachEvents,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=a.type,this.clusterer=new NgMapMarkerClusterer(e,r,this.opt_options),this.propMapGMarkers=new i,this.attachEvents(this.opt_events,"opt_events"),this.clusterer.setIgnoreHidden(!0),this.noDrawOnSingleAddRemoves=!0,n.info(this)}return a.type="ClustererMarkerManager",a.prototype.checkKey=function(t){if(null==t.key)return"gMarker.key undefined and it is REQUIRED!!",n.error("gMarker.key undefined and it is REQUIRED!!")},a.prototype.add=function(t){return this.checkKey(t),this.clusterer.addMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(t.key,t),this.checkSync()},a.prototype.update=function(t){return this.remove(t),this.add(t)},a.prototype.addMany=function(t){return t.forEach((e=this,function(t){return e.add(t)}));var e},a.prototype.remove=function(t){return this.checkKey(t),this.propMapGMarkers.get(t.key)&&(this.clusterer.removeMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(t.key)),this.checkSync()},a.prototype.removeMany=function(t){return t.forEach((e=this,function(t){return e.remove(t)}));var e},a.prototype.draw=function(){return this.clusterer.repaint()},a.prototype.clear=function(){return this.removeMany(this.getGMarkers()),this.clusterer.repaint()},a.prototype.attachEvents=function(t,r){var i,o;if(this.listeners=[],e.isDefined(t)&&null!=t&&e.isObject(t)){for(i in o=[],t)t[i],t.hasOwnProperty(i)&&e.isFunction(t[i])?(n.info(r+": Attaching event: "+i+" to clusterer"),o.push(this.listeners.push(google.maps.event.addListener(this.clusterer,i,t[i])))):o.push(void 0);return o}},a.prototype.clearEvents=function(){return o.removeEvents(this.listeners),this.listeners=[]},a.prototype.destroy=function(){return this.clearEvents(),this.clear()},a.prototype.fit=function(){return r.fit(this.getGMarkers(),this.clusterer.getMap())},a.prototype.getGMarkers=function(){return this.clusterer.getMarkers().values()},a.prototype.checkSync=function(){},a}()}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.managers").service("uiGmapGoogleMapObjectManager",[function(){var t,n;return t=[],n=[],{createMapInstance:function(r,i){var o;return o=null,0===t.length?(o=new google.maps.Map(r,i),n.push(o)):(o=t.pop(),e.element(r).append(o.getDiv()),o.setOptions(i),n.push(o)),o},recycleMapInstance:function(e){var r;if((r=n.indexOf(e))<0)throw new Error("Expected map instance to be a previously used instance");return n.splice(r,1),t.push(e)}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function(e,n,r){return function(){function i(n,o,a){this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.handleOptDraw=t(this.handleOptDraw,this),this.clear=t(this.clear,this),this.destroy=t(this.destroy,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=i.type,this.gMap=n,this.gMarkers=new r,this.$log=e,this.$log.info(this)}return i.type="MarkerManager",i.prototype.add=function(t,n){var r;if(null==n&&(n=!0),null==t.key)throw r="gMarker.key undefined and it is REQUIRED!!",e.error(r),r;if(!this.gMarkers.get(t.key))return this.handleOptDraw(t,n,!0),this.gMarkers.put(t.key,t)},i.prototype.update=function(t,e){return null==e&&(e=!0),this.remove(t,e),this.add(t,e)},i.prototype.addMany=function(t){return t.forEach((e=this,function(t){return e.add(t)}));var e},i.prototype.remove=function(t,e){if(null==e&&(e=!0),this.handleOptDraw(t,e,!1),this.gMarkers.get(t.key))return this.gMarkers.remove(t.key)},i.prototype.removeMany=function(t){return t.forEach((e=this,function(t){return e.remove(t)}));var e},i.prototype.draw=function(){var t,e;return t=[],this.gMarkers.each((e=this,function(n){if(!n.isDrawn)return n.doAdd?(n.setMap(e.gMap),n.isDrawn=!0):t.push(n)})),t.forEach(function(t){return function(e){return e.isDrawn=!1,t.remove(e,!0)}}(this))},i.prototype.destroy=function(){return this.clear()},i.prototype.clear=function(){return this.gMarkers.each((function(t){return t.setMap(null)})),delete this.gMarkers,this.gMarkers=new r},i.prototype.handleOptDraw=function(t,e,n){return!0===e?(n?t.setMap(this.gMap):t.setMap(null),t.isDrawn=!0):(t.isDrawn=!1,t.doAdd=n)},i.prototype.fit=function(){return n.fit(this.getGMarkers(),this.gMap)},i.prototype.getGMarkers=function(){return this.gMarkers.values()},i}()}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};e.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapSpiderfierMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap","uiGmapMarkerSpiderfier",function(n,r,i,o){return function(){function a(e,r,s,l,u){null==r&&(r={}),this.opt_options=null!=s?s:{},this.opt_events=l,this.scope=u,this.checkSync=t(this.checkSync,this),this.isSpiderfied=t(this.isSpiderfied,this),this.getGMarkers=t(this.getGMarkers,this),this.fit=t(this.fit,this),this.destroy=t(this.destroy,this),this.attachEvents=t(this.attachEvents,this),this.clear=t(this.clear,this),this.draw=t(this.draw,this),this.removeMany=t(this.removeMany,this),this.remove=t(this.remove,this),this.addMany=t(this.addMany,this),this.update=t(this.update,this),this.add=t(this.add,this),this.type=a.type,this.markerSpiderfier=new o(e,this.opt_options),this.propMapGMarkers=new i,this.attachEvents(this.opt_events,"opt_events"),this.noDrawOnSingleAddRemoves=!0,n.info(this)}return a.type="SpiderfierMarkerManager",a.prototype.checkKey=function(t){if(null==t.key)return"gMarker.key undefined and it is REQUIRED!!",n.error("gMarker.key undefined and it is REQUIRED!!")},a.prototype.add=function(t){return t.setMap(this.markerSpiderfier.map),this.checkKey(t),this.markerSpiderfier.addMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(t.key,t),this.checkSync()},a.prototype.update=function(t){return this.remove(t),this.add(t)},a.prototype.addMany=function(t){return t.forEach((e=this,function(t){return e.add(t)}));var e},a.prototype.remove=function(t){return this.checkKey(t),this.propMapGMarkers.get(t.key)&&(t.setMap(null),this.markerSpiderfier.removeMarker(t,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(t.key)),this.checkSync()},a.prototype.removeMany=function(t){return t.forEach((e=this,function(t){return e.remove(t)}));var e},a.prototype.draw=function(){},a.prototype.clear=function(){return this.removeMany(this.getGMarkers())},a.prototype.attachEvents=function(t,r){if(e.isDefined(t)&&null!=t&&e.isObject(t))return _.each(t,(i=this,function(o,a){if(t.hasOwnProperty(a)&&e.isFunction(t[a]))return n.info(r+": Attaching event: "+a+" to markerSpiderfier"),i.markerSpiderfier.addListener(a,(function(){return"spiderfy"===a||"unspiderfy"===a?i.scope.$evalAsync(t[a].apply(t,arguments)):i.scope.$evalAsync(t[a].apply(t,[arguments[0],a,arguments[0].model,arguments]))}))}));var i},a.prototype.clearEvents=function(t,r){var i;if(e.isDefined(t)&&null!=t&&e.isObject(t))for(i in t)t[i],t.hasOwnProperty(i)&&e.isFunction(t[i])&&(n.info(r+": Clearing event: "+i+" to markerSpiderfier"),this.markerSpiderfier.clearListeners(i))},a.prototype.destroy=function(){return this.clearEvents(this.opt_events,"opt_events"),this.clear()},a.prototype.fit=function(){return r.fit(this.getGMarkers(),this.markerSpiderfier.map)},a.prototype.getGMarkers=function(){return this.markerSpiderfier.getMarkers()},a.prototype.isSpiderfied=function(){return _.find(this.getGMarkers(),(function(t){return null!=(null!=t?t._omsData:void 0)}))},a.prototype.checkSync=function(){},a}()}])}.call(this),function(){e.module("uiGmapgoogle-maps").factory("uiGmapadd-events",["$timeout",function(t){var n;return n=function(e,n,r){return google.maps.event.addListener(e,n,(function(){return r.apply(this,arguments),t((function(){}),!0)}))},function(t,r,i){var o;return i?n(t,r,i):(o=[],e.forEach(r,(function(e,r){return o.push(n(t,r,e))})),function(){return e.forEach(o,(function(t){return google.maps.event.removeListener(t)})),o=null})}}])}.call(this),function(){e.module("uiGmapgoogle-maps").factory("uiGmaparray-sync",["uiGmapadd-events",function(t){return function(n,r,i,o){var a,s,l,u,c,f,h,d,p;return u=!1,d=r.$eval(i),r.static||(c={set_at:function(t){var e;if(!u&&(e=n.getAt(t)))return e.lng&&e.lat?(d[t].latitude=e.lat(),d[t].longitude=e.lng()):d[t]=e},insert_at:function(t){var e;if(!u&&(e=n.getAt(t)))return e.lng&&e.lat?d.splice(t,0,{latitude:e.lat(),longitude:e.lng()}):d.splice(t,0,e)},remove_at:function(t){if(!u)return d.splice(t,1)}},"Polygon"===d.type?a=d.coordinates[0]:"LineString"===d.type&&(a=d.coordinates),s={set_at:function(t){var e;if(!u&&(e=n.getAt(t))&&e.lng&&e.lat)return a[t][1]=e.lat(),a[t][0]=e.lng()},insert_at:function(t){var e;if(!u&&(e=n.getAt(t))&&e.lng&&e.lat)return a.splice(t,0,[e.lng(),e.lat()])},remove_at:function(t){if(!u)return a.splice(t,1)}},h=t(n,e.isUndefined(d.type)?c:s)),f=function(t){var e,r,i,a,s,l,c,f;if(u=!0,l=n,e=!1,t){for(r=0,c=l.getLength(),a=t.length,i=Math.min(c,a),s=void 0;r<i;)f=l.getAt(r),"function"==typeof(s=t[r]).equals?s.equals(f)||(l.setAt(r,s),e=!0):f.lat()===s.latitude&&f.lng()===s.longitude||(l.setAt(r,new google.maps.LatLng(s.latitude,s.longitude)),e=!0),r++;for(;r<a;)"function"==typeof(s=t[r]).lat&&"function"==typeof s.lng?l.push(s):l.push(new google.maps.LatLng(s.latitude,s.longitude)),e=!0,r++;for(;r<c;)l.pop(),e=!0,r++}if(u=!1,e)return o(l)},l=function(t){var e,r,i,a,s,l,c,f,h;if(u=!0,c=n,r=!1,t){for("Polygon"===d.type?e=t.coordinates[0]:"LineString"===d.type&&(e=t.coordinates),i=0,f=c.getLength(),s=e.length,a=Math.min(f,s),l=void 0;i<a;)h=c.getAt(i),l=e[i],h.lat()===l[1]&&h.lng()===l[0]||(c.setAt(i,new google.maps.LatLng(l[1],l[0])),r=!0),i++;for(;i<s;)l=e[i],c.push(new google.maps.LatLng(l[1],l[0])),r=!0,i++;for(;i<f;)c.pop(),r=!0,i++}if(u=!1,r)return o(c)},r.static||(p=e.isUndefined(d.type)?r.$watchCollection(i,f):r.$watch(i,l,!0)),function(){if(h&&(h(),h=null),p)return p(),p=null}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChromeFixes",["$timeout",function(t){return{maybeRepaint:function(e){if(e)return e.style.opacity=.9,t((function(){return e.style.opacity=1}))}}}])}.call(this),function(){e.module("uiGmapgoogle-maps").service("uiGmapObjectIterators",(function(){var t,e,n,r;return t=["length","forEach","map"],(e=[]).push(n=function(e){return e.forEach=function(n){return _.each(_.omit(e,t),(function(t){if(!_.isFunction(t))return n(t)}))},e}),r=function(e){return e.map=function(n){return _.map(_.omit(e,t),(function(t){if(!_.isFunction(t))return n(t)}))},e},e.push(r),{slapMap:r,slapForEach:n,slapAll:function(t){return e.forEach((function(e){return e(t)})),t}}}))}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.options.builders").service("uiGmapCommonOptionsBuilder",["uiGmapBaseObject","uiGmapLogger","uiGmapModelKey",function(r,i,o){return function(r){function o(){return this.watchProps=t(this.watchProps,this),this.buildOpts=t(this.buildOpts,this),o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,r),o.prototype.props=["clickable","draggable","editable","visible",{prop:"stroke",isColl:!0}],o.prototype.getCorrectModel=function(t){return e.isDefined(null!=t?t.model:void 0)?t.model:t},o.prototype.buildOpts=function(t,n,r){var o,a,s;if(null==t&&(t={}),null==r&&(r={}),this.scope){var l;if(this.gMap)return o=this.getCorrectModel(this.scope),s=this.scopeOrModelVal("stroke",this.scope,o),a=e.extend(t,this.DEFAULTS,{map:this.gMap,strokeColor:null!=s?s.color:void 0,strokeOpacity:null!=s?s.opacity:void 0,strokeWeight:null!=s?s.weight:void 0}),e.forEach(e.extend(r,{clickable:!0,draggable:!1,editable:!1,static:!1,fit:!1,visible:!0,zIndex:0,icons:[]}),(l=this,function(t,r){var i;return i=n?n[r]:l.scopeOrModelVal(r,l.scope,o),e.isUndefined(i)?a[r]=t:a[r]=o[r]})),a.static&&(a.editable=!1),a;i.error("this.map not defined in CommonOptionsBuilder can not buildOpts")}else i.error("this.scope not defined in CommonOptionsBuilder can not buildOpts")},o.prototype.watchProps=function(t){return null==t&&(t=this.props),t.forEach((e=this,function(t){if(null!=e.attrs[t]||null!=e.attrs[null!=t?t.prop:void 0])return(null!=t?t.isColl:void 0)?e.scope.$watchCollection(t.prop,e.setMyOptions):e.scope.$watch(t,e.setMyOptions)}));var e},o}(o)}])}.call(this),function(){var t=function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.options.builders").factory("uiGmapPolylineOptionsBuilder",["uiGmapCommonOptionsBuilder",function(e){return function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.buildOpts=function(t,e){return n.__super__.buildOpts.call(this,{path:t},e,{geodesic:!1})},n}(e)}]).factory("uiGmapShapeOptionsBuilder",["uiGmapCommonOptionsBuilder",function(n){return function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return t(r,n),r.prototype.buildOpts=function(t,n,i){var o,a;return a=this.getCorrectModel(this.scope),o=n?n.fill:this.scopeOrModelVal("fill",this.scope,a),t=e.extend(t,{fillColor:null!=o?o.color:void 0,fillOpacity:null!=o?o.opacity:void 0}),r.__super__.buildOpts.call(this,t,n,i)},r}(n)}]).factory("uiGmapPolygonOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){return function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.buildOpts=function(t,e){return n.__super__.buildOpts.call(this,{path:t},e,{geodesic:!1})},n}(e)}]).factory("uiGmapRectangleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){return function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.buildOpts=function(t,e){return n.__super__.buildOpts.call(this,{bounds:t},e)},n}(e)}]).factory("uiGmapCircleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(e){return function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return t(n,e),n.prototype.buildOpts=function(t,e,r){return n.__super__.buildOpts.call(this,{center:t,radius:e},r)},n}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.options").service("uiGmapMarkerOptions",["uiGmapLogger","uiGmapGmapUtil",function(t,n){return _.extend(n,{createOptions:function(t,r,i,o){var a;return null==i&&(i={}),a=e.extend({},i,{position:null!=i.position?i.position:n.getCoords(t),visible:null!=i.visible?i.visible:n.validateCoords(t)}),null==i.icon&&null==r||(a=e.extend(a,{icon:null!=i.icon?i.icon:r})),null!=o&&(a.map=o),a},isLabel:function(t){return null!=t&&(null!=t.labelContent||null!=t.labelAnchor||null!=t.labelClass||null!=t.labelStyle||null!=t.labelVisible)}})}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapBasePolyChildModel",["uiGmapLogger","$timeout","uiGmaparray-sync","uiGmapGmapUtil","uiGmapEventsHelper",function(n,r,i,o,a){return function(n,r){return function(n){function s(t){var n,o,s,l,u,c;this.scope=t.scope,this.attrs=t.attrs,this.gMap=t.gMap,this.defaults=t.defaults,this.model=t.model,o=t.gObjectChangeCb,this.isScopeModel=null!=(s=t.isScopeModel)&&s,this.clean=(l=this.clean,u=this,function(){return l.apply(u,arguments)}),this.isScopeModel&&(this.clonedModel=_.clone(this.model,!0)),this.isDragging=!1,this.internalEvents={dragend:(c=this,function(){return _.defer((function(){return c.isDragging=!1}))}),dragstart:function(t){return function(){return t.isDragging=!0}}(this)},(n=function(t){return function(){var n;if(!t.isDragging)return t.pathPoints=t.convertPathPoints(t.scope.path),null!=t.gObject&&t.clean(),null!=t.scope.model&&(n=t.scope),t.pathPoints.length>0&&(t.gObject=r(t.buildOpts(t.pathPoints,n))),t.gObject?(i(t.gObject.getPath(),t.scope,"path",(function(e){if(t.pathPoints=e,null!=o)return o()})),e.isDefined(t.scope.events)&&e.isObject(t.scope.events)&&(t.listeners=t.model?a.setEvents(t.gObject,t.scope,t.model):a.setEvents(t.gObject,t.scope,t.scope)),t.internalListeners=t.model?a.setEvents(t.gObject,{events:t.internalEvents},t.model):a.setEvents(t.gObject,{events:t.internalEvents},t.scope)):void 0}}(this))(),this.scope.$watch("path",function(t){return function(e,r){if(!_.isEqual(e,r)||!t.gObject)return n()}}(this),!0),!this.scope.static&&e.isDefined(this.scope.editable)&&this.scope.$watch("editable",function(t){return function(e,n){var r;if(e!==n)return e=!t.isFalse(e),null!=(r=t.gObject)?r.setEditable(e):void 0}}(this),!0),e.isDefined(this.scope.draggable)&&this.scope.$watch("draggable",function(t){return function(e,n){var r;if(e!==n)return e=!t.isFalse(e),null!=(r=t.gObject)?r.setDraggable(e):void 0}}(this),!0),e.isDefined(this.scope.visible)&&this.scope.$watch("visible",function(t){return function(e,n){var r;return e!==n&&(e=!t.isFalse(e)),null!=(r=t.gObject)?r.setVisible(e):void 0}}(this),!0),e.isDefined(this.scope.geodesic)&&this.scope.$watch("geodesic",function(t){return function(e,n){var r;if(e!==n)return e=!t.isFalse(e),null!=(r=t.gObject)?r.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.weight)&&this.scope.$watch("stroke.weight",function(t){return function(e,n){var r;if(e!==n)return null!=(r=t.gObject)?r.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.color)&&this.scope.$watch("stroke.color",function(t){return function(e,n){var r;if(e!==n)return null!=(r=t.gObject)?r.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.stroke)&&e.isDefined(this.scope.stroke.opacity)&&this.scope.$watch("stroke.opacity",function(t){return function(e,n){var r;if(e!==n)return null!=(r=t.gObject)?r.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),e.isDefined(this.scope.icons)&&this.scope.$watch("icons",function(t){return function(e,n){var r;if(e!==n)return null!=(r=t.gObject)?r.setOptions(t.buildOpts(t.gObject.getPath())):void 0}}(this),!0),this.scope.$on("$destroy",function(t){return function(){return t.clean(),t.scope=null}}(this)),e.isDefined(this.scope.fill)&&e.isDefined(this.scope.fill.color)&&this.scope.$watch("fill.color",function(t){return function(e,n){if(e!==n)return t.gObject.setOptions(t.buildOpts(t.gObject.getPath()))}}(this)),e.isDefined(this.scope.fill)&&e.isDefined(this.scope.fill.opacity)&&this.scope.$watch("fill.opacity",function(t){return function(e,n){if(e!==n)return t.gObject.setOptions(t.buildOpts(t.gObject.getPath()))}}(this)),e.isDefined(this.scope.zIndex)&&this.scope.$watch("zIndex",function(t){return function(e,n){if(e!==n)return t.gObject.setOptions(t.buildOpts(t.gObject.getPath()))}}(this))}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(s,n),s.include(o),s.prototype.clean=function(){var t;return a.removeEvents(this.listeners),a.removeEvents(this.internalListeners),null!=(t=this.gObject)&&t.setMap(null),this.gObject=null},s}(n)}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapDrawFreeHandChildModel",["uiGmapLogger","$q",function(t,e){var n;return n=function(t,e,n){var r,i;i=new google.maps.Polyline({map:t,clickable:!1}),r=google.maps.event.addListener(t,"mousemove",(function(t){return i.getPath().push(t.latLng)})),google.maps.event.addListenerOnce(t,"mouseup",(function(o){var a;return google.maps.event.removeListener(r),a=i.getPath(),i.setMap(null),e.push(new google.maps.Polygon({map:t,path:a})),i=null,google.maps.event.clearListeners(t.getDiv(),"mousedown"),n()}))},function(r,i){var o,a,s;return this.map=r,s=this,o=function(){var e;return e={draggable:!1,disableDefaultUI:!0,scrollwheel:!1,disableDoubleClickZoom:!1},t.info("disabling map move"),s.map.setOptions(e)},a=function(t){return function(){var e,n;return e={draggable:!0,disableDefaultUI:!1,scrollwheel:!0,disableDoubleClickZoom:!0},null!=(n=t.deferred)&&n.resolve(),_.defer((function(){return t.map.setOptions(_.extend(e,i.options))}))}}(this),this.engage=function(r){return function(i){return r.polys=i,r.deferred=e.defer(),o(),t.info("DrawFreeHandChildModel is engaged (drawing)."),google.maps.event.addDomListener(r.map.getDiv(),"mousedown",(function(t){return n(r.map,r.polys,a)})),r.deferred.promise}}(this),this}}])}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapMarkerChildModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger","uiGmapEventsHelper","uiGmapPropertyAction","uiGmapMarkerOptions","uiGmapIMarker","uiGmapMarkerManager","uiGmapPromise",function(i,o,a,s,l,u,c,f,h){return function(i){var d;function p(t){var e,r,i,o,s,u,c,f;this.internalEvents=n(this.internalEvents,this),this.setLabelOptions=n(this.setLabelOptions,this),this.setOptions=n(this.setOptions,this),this.setIcon=n(this.setIcon,this),this.setCoords=n(this.setCoords,this),this.isNotValid=n(this.isNotValid,this),this.maybeSetScopeValue=n(this.maybeSetScopeValue,this),this.createMarker=n(this.createMarker,this),this.setMyScope=n(this.setMyScope,this),this.updateModel=n(this.updateModel,this),this.handleModelChanges=n(this.handleModelChanges,this),this.destroy=n(this.destroy,this),c=t.scope,this.model=t.model,this.keys=t.keys,this.gMap=t.gMap,this.defaults=null!=(r=t.defaults)?r:{},this.doClick=t.doClick,this.gManager=t.gManager,this.doDrawSelf=null==(i=t.doDrawSelf)||i,this.trackModel=null==(o=t.trackModel)||o,this.needRedraw=null!=(s=t.needRedraw)&&s,this.isScopeModel=null!=(u=t.isScopeModel)&&u,this.isScopeModel&&(this.clonedModel=_.clone(this.model,!0)),this.deferred=h.defer(),_.each(this.keys,(f=this,function(t,e){var n;if(null!=(n=f.keys[e])&&!_.isFunction(n)&&_.isString(n))return f[e+"Key"]=n})),this.idKey=this.idKeyKey||"id",null!=this.model[this.idKey]&&(this.id=this.model[this.idKey]),p.__super__.constructor.call(this,c),this.scope.getGMarker=function(t){return function(){return t.gObject}}(this),this.firstTime=!0,this.trackModel?(this.scope.model=this.model,this.scope.$watch("model",function(t){return function(e,n){if(e!==n)return t.handleModelChanges(e,n)}}(this),!0)):(e=new l(function(t){return function(e){if(_.isFunction(e)&&(e="all"),!t.firstTime)return t.setMyScope(e,c)}}(this),!1),_.each(this.keys,(function(t,n){return c.$watch(n,e.sic(n),!0)}))),this.scope.$on("$destroy",function(t){return function(){return d(t)}}(this)),this.createMarker(this.model),a.info(this)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(p,i),p.include(o),p.include(s),p.include(u),d=function(t){if(null!=(null!=t?t.gObject:void 0)&&(t.removeEvents(t.externalListeners),t.removeEvents(t.internalListeners),null!=t?t.gObject:void 0))return t.removeFromManager&&t.gManager.remove(t.gObject),t.gObject.setMap(null),t.gObject=null},p.prototype.destroy=function(t){return null==t&&(t=!0),this.removeFromManager=t,this.scope.$destroy()},p.prototype.handleModelChanges=function(t,e){var n,r,i,o;if(n=this.getChanges(t,e,c.keys),!this.firstTime)return r=0,i=_.keys(n).length,_.each(n,(o=this,function(n,a){var s;return s=i===(r+=1),o.setMyScope(a,t,e,!1,!0,s),o.needRedraw=!0}))},p.prototype.updateModel=function(t){return this.isScopeModel&&(this.clonedModel=_.clone(t,!0)),this.setMyScope("all",t,this.model)},p.prototype.renderGMarker=function(e,n){var r,i,o;if(null==e&&(e=!0),r=this.getProp("coords",this.scope,this.model),null!=(null!=(o=this.gManager)?o.isSpiderfied:void 0)&&(i=this.gManager.isSpiderfied()),null!=r){if(!this.validateCoords(r))return void a.debug("MarkerChild does not have coords yet. They may be defined later.");if(null!=n&&n(),e&&this.gObject&&this.gManager.add(this.gObject),i)return this.gManager.markerSpiderfier.spiderListener(this.gObject,t.event)}else if(e&&this.gObject)return this.gManager.remove(this.gObject)},p.prototype.setMyScope=function(t,e,n,r,i){var o,a;switch(null==n&&(n=void 0),null==r&&(r=!1),null==i&&(i=!0),null==e?e=this.model:this.model=e,this.gObject||(this.setOptions(this.scope,i),o=!0),t){case"all":return _.each(this.keys,(a=this,function(t,o){return a.setMyScope(o,e,n,r,i)}));case"icon":return this.maybeSetScopeValue({gSetter:this.setIcon,doDraw:i});case"coords":return this.maybeSetScopeValue({gSetter:this.setCoords,doDraw:i});case"options":if(!o)return this.createMarker(e,n,r,i)}},p.prototype.createMarker=function(t,e,n,r){return null==e&&(e=void 0),null==n&&(n=!1),null==r&&(r=!0),this.maybeSetScopeValue({gSetter:this.setOptions,doDraw:r}),this.firstTime=!1},p.prototype.maybeSetScopeValue=function(t){var e,n,r;if(n=t.gSetter,e=null==(r=t.doDraw)||r,null!=n&&n(this.scope,e),this.doDrawSelf&&e)return this.gManager.draw()},p.prototype.isNotValid=function(t,e){var n;return null==e&&(e=!0),n=!!e&&void 0===this.gObject,!this.trackModel&&t.$id!==this.scope.$id||n},p.prototype.setCoords=function(t,e){var n;if(null==e&&(e=!0),!this.isNotValid(t)&&null!=this.gObject)return this.renderGMarker(e,(n=this,function(){var e,r,i;if(r=n.getProp("coords",t,n.model),e=n.getCoords(r),null==(i=n.gObject.getPosition())||null==e||e.lng()!==i.lng()||e.lat()!==i.lat())return n.gObject.setPosition(e),n.gObject.setVisible(n.validateCoords(r))}))},p.prototype.setIcon=function(t,e){var n;if(null==e&&(e=!0),!this.isNotValid(t)&&null!=this.gObject)return this.renderGMarker(e,(n=this,function(){var e,r;if(n.gObject.getIcon()!==(r=n.getProp("icon",t,n.model)))return n.gObject.setIcon(r),e=n.getProp("coords",t,n.model),n.gObject.setPosition(n.getCoords(e)),n.gObject.setVisible(n.validateCoords(e))}))},p.prototype.setOptions=function(t,e){var n;if(null==e&&(e=!0),!this.isNotValid(t,!1)){var r;if(this.renderGMarker(e,(r=this,function(){var e,n,i;if(n=r.getProp("coords",t,r.model),i=r.getProp("icon",t,r.model),e=r.getProp("options",t,r.model),r.opts=r.createOptions(n,i,e),r.isLabel(r.gObject)!==r.isLabel(r.opts)&&null!=r.gObject&&(r.gManager.remove(r.gObject),r.gObject=void 0),null!=r.gObject&&r.gObject.setOptions(r.setLabelOptions(r.opts)),r.gObject||(r.isLabel(r.opts)?r.gObject=new MarkerWithLabel(r.setLabelOptions(r.opts)):r.opts.content?(r.gObject=new RichMarker(r.opts),r.gObject.getIcon=r.gObject.getContent,r.gObject.setIcon=r.gObject.setContent):r.gObject=new google.maps.Marker(r.opts),_.extend(r.gObject,{model:r.model})),r.externalListeners&&r.removeEvents(r.externalListeners),r.internalListeners&&r.removeEvents(r.internalListeners),r.externalListeners=r.setEvents(r.gObject,r.scope,r.model,["dragend"]),r.internalListeners=r.setEvents(r.gObject,{events:r.internalEvents(),$evalAsync:function(){}},r.model),null!=r.id)return r.gObject.key=r.id})),this.gObject&&(this.gObject.getMap()||this.gManager.type!==f.type))this.deferred.resolve(this.gObject);else{if(!this.gObject)return this.deferred.reject("gObject is null");null!=(n=this.gObject)&&n.getMap()&&this.gManager.type===f.type||(a.debug("gObject has no map yet"),this.deferred.resolve(this.gObject))}return this.model[this.fitKey]?this.gManager.fit():void 0}},p.prototype.setLabelOptions=function(t){return t.labelAnchor&&(t.labelAnchor=this.getLabelPositionPoint(t.labelAnchor)),t},p.prototype.internalEvents=function(){return{dragend:(t=this,function(e,n,r,i){var o,a,s;return a=t.trackModel?t.scope.model:t.model,s=t.setCoordsFromEvent(t.modelOrKey(a,t.coordsKey),t.gObject.getPosition()),a=t.setVal(r,t.coordsKey,s),null!=(null!=(o=t.scope.events)?o.dragend:void 0)&&o.dragend(e,n,a,i),t.scope.$apply()}),click:function(t){return function(n,r,i,o){var a;if(a=t.getProp("click",t.scope,t.model),t.doClick&&e.isFunction(a))return t.scope.$evalAsync(a(n,r,t.model,o))}}(this)};var t},p}(i)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygonChildModel",["uiGmapBasePolyChildModel","uiGmapPolygonOptionsBuilder",function(e,n){return function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(n,e),n}(new e(n,(function(t){return new google.maps.Polygon(t)})))}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylineChildModel",["uiGmapBasePolyChildModel","uiGmapPolylineOptionsBuilder",function(e,n){return function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(n,e),n}(e(n,(function(t){return new google.maps.Polyline(t)})))}])}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapWindowChildModel",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapLogger","$compile","$http","$templateCache","uiGmapChromeFixes","uiGmapEventsHelper",function(i,o,a,s,l,u,c,f){return function(i){function h(t){var e,r,i,o,s,l;this.updateModel=n(this.updateModel,this),this.destroy=n(this.destroy,this),this.remove=n(this.remove,this),this.getLatestPosition=n(this.getLatestPosition,this),this.hideWindow=n(this.hideWindow,this),this.showWindow=n(this.showWindow,this),this.handleClick=n(this.handleClick,this),this.watchOptions=n(this.watchOptions,this),this.watchCoords=n(this.watchCoords,this),this.createGWin=n(this.createGWin,this),this.watchElement=n(this.watchElement,this),this.watchAndDoShow=n(this.watchAndDoShow,this),this.doShow=n(this.doShow,this),this.model=null!=(r=t.model)?r:{},this.scope=t.scope,this.opts=t.opts,this.isIconVisibleOnClick=t.isIconVisibleOnClick,this.gMap=t.gMap,this.markerScope=t.markerScope,this.element=t.element,this.needToManualDestroy=null!=(i=t.needToManualDestroy)&&i,this.markerIsVisibleAfterWindowClose=null==(o=t.markerIsVisibleAfterWindowClose)||o,this.isScopeModel=null!=(s=t.isScopeModel)&&s,this.isScopeModel&&(this.clonedModel=_.clone(this.model,!0)),this.getGmarker=function(){var t,e;if(null!=(null!=(t=this.markerScope)?t.getGMarker:void 0))return null!=(e=this.markerScope)?e.getGMarker():void 0},this.listeners=[],this.createGWin(),null!=(e=this.getGmarker())&&e.setClickable(!0),this.watchElement(),this.watchOptions(),this.watchCoords(),this.watchAndDoShow(),this.scope.$on("$destroy",(l=this,function(){return l.destroy()})),a.info(this)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(h,i),h.include(o),h.include(f),h.prototype.doShow=function(t){return!0===this.scope.show||t?this.showWindow():this.hideWindow()},h.prototype.watchAndDoShow=function(){return null!=this.model.show&&(this.scope.show=this.model.show),this.scope.$watch("show",this.doShow,!0),this.doShow()},h.prototype.watchElement=function(){return this.scope.$watch((t=this,function(){var e,n;if(t.element||t.html)return t.html!==t.element.html()&&t.gObject?(null!=(e=t.opts)&&(e.content=void 0),n=t.gObject.isOpen(),t.remove(),t.createGWin(n)):void 0}));var t},h.prototype.createGWin=function(e){var n,r,i,o,a,s;if(null==e&&(e=!1),i=this.getGmarker(),r={},null!=this.opts&&(this.scope.coords&&(this.opts.position=this.getCoords(this.scope.coords)),r=this.opts),this.element&&(this.html=_.isObject(this.element)?this.element.html():this.element),n=this.scope.options?this.scope.options:r,this.opts=this.createWindowOptions(i,this.markerScope||this.scope,this.html,n),null!=this.opts)return this.gObject||(this.opts.boxClass&&t.InfoBox&&"function"==typeof t.InfoBox?this.gObject=new t.InfoBox(this.opts):this.gObject=new google.maps.InfoWindow(this.opts),this.listeners.push(google.maps.event.addListener(this.gObject,"domready",(function(){return c.maybeRepaint(this.content)}))),this.listeners.push(google.maps.event.addListener(this.gObject,"closeclick",(s=this,function(){return i&&(i.setAnimation(s.oldMarkerAnimation),s.markerIsVisibleAfterWindowClose&&_.delay((function(){return i.setVisible(!1),i.setVisible(s.markerIsVisibleAfterWindowClose)}),250)),s.gObject.close(),s.model.show=!1,null!=s.scope.closeClick?s.scope.$evalAsync(s.scope.closeClick()):s.scope.$evalAsync()})))),this.gObject.setContent(this.opts.content),this.handleClick((null!=(o=this.scope)&&null!=(a=o.options)?a.forceClick:void 0)||e),this.doShow(this.gObject.isOpen())},h.prototype.watchCoords=function(){var t;return(null!=this.markerScope?this.markerScope:this.scope).$watch("coords",(t=this,function(e,n){var r;if(e!==n){if(null==e)t.hideWindow();else if(!t.validateCoords(e))return void a.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(t.model));if(r=t.getCoords(e),t.doShow(),t.gObject.setPosition(r),t.opts)return t.opts.position=r}}),!0)},h.prototype.watchOptions=function(){return this.scope.$watch("options",(t=this,function(e,n){if(e!==n&&(t.opts=e,null!=t.gObject)){if(t.gObject.setOptions(t.opts),null!=t.opts.visible&&t.opts.visible)return t.showWindow();if(null!=t.opts.visible)return t.hideWindow()}}),!0);var t},h.prototype.handleClick=function(t){var e,n,r;if(null!=this.gObject)return n=this.getGmarker(),r=this,e=function(){if(null==r.gObject&&r.createGWin(),r.showWindow(),null!=n)return r.initialMarkerVisibility=n.getVisible(),r.oldMarkerAnimation=n.getAnimation(),n.setVisible(r.isIconVisibleOnClick)},t&&e(),n?this.listeners=this.listeners.concat(this.setEvents(n,{events:{click:e}},this.model)):void 0},h.prototype.showWindow=function(){var t,n,r,i;if(null!=this.gObject)return r=null,i=this,n=function(){var t,e,n;if(!i.gObject.isOpen()){if(e=i.getGmarker(),null!=i.gObject&&null!=i.gObject.getPosition&&(n=i.gObject.getPosition()),e&&(n=e.getPosition()),!n)return;if(i.gObject.open(i.gMap,e),t=i.gObject.isOpen(),i.model.show!==t)return i.model.show=t}},this.scope.templateUrl?l.get(this.scope.templateUrl,{cache:u}).then(function(t){return function(i){var o;return r=t.scope.$new(),e.isDefined(t.scope.templateParameter)&&(r.parameter=t.scope.templateParameter),o=s(i.data)(r),t.gObject.setContent(o[0]),n()}}(this)):this.scope.template?(r=this.scope.$new(),e.isDefined(this.scope.templateParameter)&&(r.parameter=this.scope.templateParameter),t=s(this.scope.template)(r),this.gObject.setContent(t[0]),n()):n(),this.scope.$on("destroy",(function(){return r.$destroy()}))},h.prototype.hideWindow=function(){if(null!=this.gObject&&this.gObject.isOpen())return this.gObject.close()},h.prototype.getLatestPosition=function(t){var e;return e=this.getGmarker(),null==this.gObject||null==e||t?t?this.gObject.setPosition(t):void 0:this.gObject.setPosition(e.getPosition())},h.prototype.remove=function(){return this.hideWindow(),this.removeEvents(this.listeners),this.listeners.length=0,delete this.gObject,delete this.opts},h.prototype.destroy=function(t){var e;if(null==t&&(t=!1),this.remove(),null!=this.scope&&!(null!=(e=this.scope)?e.$$destroyed:void 0)&&(this.needToManualDestroy||t))return this.scope.$destroy()},h.prototype.updateModel=function(t){return this.isScopeModel&&(this.clonedModel=_.clone(t,!0)),_.extend(this.model,this.clonedModel||t)},h}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapBasePolysParentModel",["$timeout","uiGmapLogger","uiGmapModelKey","uiGmapModelsWatcher","uiGmapPropMap","uiGmap_async","uiGmapPromise","uiGmapFitHelper",function(r,i,o,a,s,l,u,c){return function(r,f,h){return function(o){function d(e,n,o,a,l){var u;this.element=n,this.attrs=o,this.gMap=a,this.defaults=l,this.maybeFit=t(this.maybeFit,this),this.createChild=t(this.createChild,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),d.__super__.constructor.call(this,e),this.interface=r,this.$log=i,this.plurals=new s,_.each(r.scopeKeys,(u=this,function(t){return u[t+"Key"]=void 0})),this.models=void 0,this.firstTime=!0,this.$log.info(this),this.createChildScopes()}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(d,o),d.include(a),d.prototype.watchModels=function(t){return t.$watch("models",(e=this,function(n,r){if(n!==r)return e.doINeedToWipe(n)||t.doRebuildAll?e.rebuildAll(t,!0,!0):e.createChildScopes(!1)}),!0);var e},d.prototype.doINeedToWipe=function(t){var e;return e=null==t||0===t.length,this.plurals.length>0&&e},d.prototype.rebuildAll=function(t,e,n){return this.onDestroy(n).then((r=this,function(){if(e)return r.createChildScopes()}));var r},d.prototype.onDestroy=function(){return d.__super__.onDestroy.call(this,this.scope),l.promiseLock(this,u.promiseTypes.delete,void 0,void 0,(t=this,function(){return l.each(t.plurals.values(),(function(t){return t.destroy(!0)}),l.chunkSizeFrom(t.scope.cleanchunk,!1)).then((function(){var e;return null!=(e=t.plurals)?e.removeAll():void 0}))}));var t},d.prototype.watchDestroy=function(t){return t.$on("$destroy",(e=this,function(){return e.rebuildAll(t,!1,!0)}));var e},d.prototype.createChildScopes=function(t){if(null==t&&(t=!0),e.isUndefined(this.scope.models))this.$log.error("No models to create "+h+"s from! I Need direct models!");else if(null!=this.gMap&&null!=this.scope.models)return this.watchIdKey(this.scope),t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)},d.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",(e=this,function(n,r){if(n!==r&&null==n)return e.idKey=n,e.rebuildAll(t,!0,!0)}));var e},d.prototype.createAllNew=function(t,e){var n,r;if(null==e&&(e=!1),this.models=t.models,this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),!this.didQueueInitPromise(this,t))return n=null,l.promiseLock(this,u.promiseTypes.create,"createAllNew",(function(t){return n=t}),(r=this,function(){return l.map(t.models,(function(t){var e;return e=r.createChild(t,r.gMap),n&&(i.debug("createNew should fall through safely"),e.isEnabled=!1),e.pathPoints.getArray()}),l.chunkSizeFrom(t.chunk)).then((function(t){return r.maybeFit(t),r.firstTime=!1}))}))},d.prototype.pieceMeal=function(t,e){var n,r,o;if(null==e&&(e=!0),!t.$$destroyed)return n=null,r=null,this.models=t.models,null!=t&&this.modelsLength()&&this.plurals.length?l.promiseLock(this,u.promiseTypes.update,"pieceMeal",(function(t){return n=t}),(o=this,function(){return u.promise((function(){return o.figureOutState(o.idKey,t,o.plurals,o.modelKeyComparison)})).then((function(e){return(r=e).updates.length&&l.each(r.updates,(function(t){return _.extend(t.child.scope,t.model),t.child.model=t.model})),l.each(r.removals,(function(t){if(null!=t)return t.destroy(),o.plurals.remove(t.model[o.idKey]),n}),l.chunkSizeFrom(t.chunk))})).then((function(){return l.each(r.adds,(function(t){return n&&i.debug("pieceMeal should fall through safely"),o.createChild(t,o.gMap),n}),l.chunkSizeFrom(t.chunk)).then((function(){return o.maybeFit()}))}))})):(this.inProgress=!1,this.rebuildAll(this.scope,!0,!0))},d.prototype.createChild=function(t,e){var n,i,o;if(i=this.scope.$new(!1),this.setChildScope(r.scopeKeys,i,t),i.$watch("model",(o=this,function(t,e){if(t!==e)return o.setChildScope(i,t)}),!0),i.static=this.scope.static,n=new f({isScopeModel:!0,scope:i,attrs:this.attrs,gMap:e,defaults:this.defaults,model:t,gObjectChangeCb:function(t){return function(){return t.maybeFit()}}(this)}),null!=t[this.idKey])return this.plurals.put(t[this.idKey],n),n;this.$log.error(h+" model has no id to assign a child to.\nThis is required for performance. Please assign id,\nor redirect id to a different key.")},d.prototype.maybeFit=function(t){if(null==t&&(t=this.plurals.map((function(t){return t.pathPoints}))),this.scope.fit)return t=_.flatten(t),c.fit(t,this.gMap)},d}(o)}}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapCircleParentModel",["uiGmapLogger","$timeout","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapCircleOptionsBuilder",function(n,r,i,o,a){var s;return s=function(t,e){return t.settingFromDirective=!0,e(),r((function(){return t.settingFromDirective=!1}))},function(r){function a(t,r,o,a,l){var u,c,f,h;this.attrs=o,this.gMap=a,this.DEFAULTS=l,this.scope=t,f=null,h=this,u=function(){if(f=null,null!=h.listeners)return h.removeEvents(h.listeners),h.listeners=void 0},c=new google.maps.Circle(this.buildOpts(i.getCoords(t.center),t.radius)),this.setMyOptions=function(e){return function(n,r){if(!t.settingFromDirective)return!_.isEqual(n,r)||n!==r||null!=n&&null!=r&&n.coordinates!==r.coordinates?c.setOptions(e.buildOpts(i.getCoords(t.center),t.radius)):void 0}}(this),this.props=this.props.concat([{prop:"center",isColl:!0},{prop:"fill",isColl:!0},"radius","zIndex"]),this.watchProps(),null!=this.scope.control&&(this.scope.control.getCircle=function(){return c}),u(),this.listeners=this.setEvents(c,t,t,["radius_changed"])||[],this.listeners.push(google.maps.event.addListener(c,"radius_changed",(function(){var n,r;if((n=c.getRadius())!==f)return f=n,r=function(){return s(t,(function(){var e,r;if(n!==t.radius&&(t.radius=n),(null!=(e=t.events)?e.radius_changed:void 0)&&_.isFunction(null!=(r=t.events)?r.radius_changed:void 0))return t.events.radius_changed(c,"radius_changed",t,arguments)}))},e.mock?r():t.$evalAsync((function(){return r()}))}))),this.listeners.push(google.maps.event.addListener(c,"center_changed",(function(){return t.$evalAsync((function(){return s(t,(function(){return e.isDefined(t.center.type)?(t.center.coordinates[1]=c.getCenter().lat(),t.center.coordinates[0]=c.getCenter().lng()):(t.center.latitude=c.getCenter().lat(),t.center.longitude=c.getCenter().lng())}))}))}))),t.$on("$destroy",(function(){return u(),c.setMap(null)})),n.info(this)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(a,r),a.include(i),a.include(o),a}(a)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapDrawingManagerParentModel",["uiGmapLogger","$timeout","uiGmapBaseObject","uiGmapEventsHelper",function(e,n,r,i){return function(e){function n(t,e,n,r){var i,o,a;this.scope=t,this.attrs=n,this.map=r,(i=new google.maps.drawing.DrawingManager(this.scope.options)).setMap(this.map),o=void 0,null!=this.scope.control&&(this.scope.control.getDrawingManager=function(){return i}),!this.scope.static&&this.scope.options&&this.scope.$watch("options",(function(t){return null!=i?i.setOptions(t):void 0}),!0),null!=this.scope.events&&(o=this.setEvents(i,this.scope,this.scope),this.scope.$watch("events",(a=this,function(t,e){if(!_.isEqual(t,e))return null!=o&&a.removeEvents(o),o=a.setEvents(i,a.scope,a.scope)}))),this.scope.$on("$destroy",function(t){return function(){return null!=o&&t.removeEvents(o),i.setMap(null),i=null}}(this))}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(n,e),n.include(i),n}(r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIMarkerParentModel",["uiGmapModelKey","uiGmapLogger",function(r,i){return function(r){function o(n,r,a,s){if(this.scope=n,this.element=r,this.attrs=a,this.map=s,this.onWatch=t(this.onWatch,this),this.watch=t(this.watch,this),this.validateScope=t(this.validateScope,this),o.__super__.constructor.call(this,this.scope),this.$log=i,!this.validateScope(this.scope))throw new String("Unable to construct IMarkerParentModel due to invalid scope");var l;this.doClick=e.isDefined(this.attrs.click),null!=this.scope.options&&(this.DEFAULTS=this.scope.options),this.watch("coords",this.scope),this.watch("icon",this.scope),this.watch("options",this.scope),this.scope.$on("$destroy",(l=this,function(){return l.onDestroy(l.scope)}))}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,r),o.prototype.DEFAULTS={},o.prototype.validateScope=function(t){return null==t?(this.$log.error(this.constructor.name+": invalid scope used"),!1):null!=t.coords||(this.$log.error(this.constructor.name+": no valid coords attribute found"),!1)},o.prototype.watch=function(t,e,n){return null==n&&(n=!0),e.$watch(t,(r=this,function(n,i){if(!_.isEqual(n,i))return r.onWatch(t,e,n,i)}),n);var r},o.prototype.onWatch=function(t,e,n,r){},o}(r)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIWindowParentModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger",function(e,n,r){return function(e){function i(t,e,n,o,a,s,l,u){i.__super__.constructor.call(this,t),this.$log=r,this.$timeout=a,this.$compile=s,this.$http=l,this.$templateCache=u,this.DEFAULTS={},null!=t.options&&(this.DEFAULTS=t.options)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(i,e),i.include(n),i.prototype.getItem=function(t,e,n){return"models"===e?t[e][n]:t[e].get(n)},i}(e)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapLayerParentModel",["uiGmapBaseObject","uiGmapLogger","$timeout",function(n,r,i){return function(n){function i(t,n,i,o,a,s){var l,u,c;(this.scope=t,this.element=n,this.attrs=i,this.gMap=o,this.onLayerCreated=null!=a?a:void 0,this.$log=null!=s?s:r,this.createGoogleLayer=(l=this.createGoogleLayer,u=this,function(){return l.apply(u,arguments)}),null!=this.attrs.type)?(this.createGoogleLayer(),this.doShow=!0,e.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.gObject.setMap(this.gMap),this.scope.$watch("show",(c=this,function(t,e){if(t!==e)return c.doShow=t,t?c.gObject.setMap(c.gMap):c.gObject.setMap(null)}),!0),this.scope.$watch("options",function(t){return function(e,n){if(e!==n&&t.doShow)return t.gObject.setOptions(e)}}(this),!0),this.scope.$on("$destroy",function(t){return function(){return t.gObject.setMap(null)}}(this))):this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!")}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(i,n),i.prototype.createGoogleLayer=function(){var t;if(null==this.attrs.options?this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),null!=this.gObject&&this.doShow&&this.gObject.setMap(this.gMap),null!=this.gObject&&null!=this.onLayerCreated)return"function"==typeof(t=this.onLayerCreated(this.scope,this.gObject))?t(this.gObject):void 0},i}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMapTypeParentModel",["uiGmapBaseObject","uiGmapLogger",function(r,i){return function(r){function o(n,r,o,a,s){var l;(this.scope=n,this.element=r,this.attrs=o,this.gMap=a,this.$log=null!=s?s:i,this.hideOverlay=t(this.hideOverlay,this),this.showOverlay=t(this.showOverlay,this),this.refreshMapType=t(this.refreshMapType,this),this.createMapType=t(this.createMapType,this),null!=this.attrs.options)?(this.id=this.gMap.overlayMapTypesCount=this.gMap.overlayMapTypesCount+1||0,this.doShow=!0,this.createMapType(),e.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.showOverlay(),this.scope.$watch("show",(l=this,function(t,e){if(t!==e)return l.doShow=t,t?l.showOverlay():l.hideOverlay()}),!0),this.scope.$watchCollection("options",function(t){return function(e,n){var r;if(!_.isEqual(e,n)&&(r=["tileSize","maxZoom","minZoom","name","alt"],_.some(r,(function(t){return!n||!e||!_.isEqual(e[t],n[t])}))))return t.refreshMapType()}}(this)),e.isDefined(this.attrs.refresh)&&this.scope.$watch("refresh",function(t){return function(e,n){if(!_.isEqual(e,n))return t.refreshMapType()}}(this),!0),this.scope.$on("$destroy",function(t){return function(){return t.hideOverlay(),t.mapType=null}}(this))):this.$log.info("options attribute for the map-type directive is mandatory. Map type creation aborted!!")}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,r),o.prototype.createMapType=function(){if(null!=this.scope.options.getTile)this.mapType=this.scope.options;else{if(null==this.scope.options.getTileUrl)return void this.$log.info("options should provide either getTile or getTileUrl methods. Map type creation aborted!!");this.mapType=new google.maps.ImageMapType(this.scope.options)}return this.attrs.id&&this.scope.id&&(this.gMap.mapTypes.set(this.scope.id,this.mapType),e.isDefined(this.attrs.show)||(this.doShow=!1)),this.mapType.layerId=this.id},o.prototype.refreshMapType=function(){if(this.hideOverlay(),this.mapType=null,this.createMapType(),this.doShow&&null!=this.gMap)return this.showOverlay()},o.prototype.showOverlay=function(){return this.gMap.overlayMapTypes.push(this.mapType)},o.prototype.hideOverlay=function(){var t,e;return t=!1,this.gMap.overlayMapTypes.forEach((e=this,function(n,r){t||n.layerId!==e.id||(t=!0,e.gMap.overlayMapTypes.removeAt(r))}))},o}(r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMarkersParentModel",["uiGmapIMarkerParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapMarkerChildModel","uiGmap_async","uiGmapClustererMarkerManager","uiGmapMarkerManager","$timeout","uiGmapIMarker","uiGmapPromise","uiGmapGmapUtil","uiGmapLogger","uiGmapSpiderfierMarkerManager",function(r,i,o,a,s,l,u,c,f,h,d,p,g){var v;return v=function(t,e){return e.plurals=new o,e.scope.plurals=e.plurals,e},function(r){function c(e,n,r,i){var a;this.maybeExecMappedEvent=t(this.maybeExecMappedEvent,this),this.onDestroy=t(this.onDestroy,this),this.newChildMarker=t(this.newChildMarker,this),this.pieceMeal=t(this.pieceMeal,this),this.rebuildAll=t(this.rebuildAll,this),this.createAllNew=t(this.createAllNew,this),this.bindToTypeEvents=t(this.bindToTypeEvents,this),this.createChildScopes=t(this.createChildScopes,this),this.validateScope=t(this.validateScope,this),this.onWatch=t(this.onWatch,this),c.__super__.constructor.call(this,e,n,r,i),this.interface=f,v(new o,this),this.scope.pluralsUpdate={updateCtr:0},this.$log.info(this),this.doRebuildAll=null!=this.scope.doRebuildAll&&this.scope.doRebuildAll,this.setIdKey(this.scope),this.scope.$watch("doRebuildAll",(a=this,function(t,e){if(t!==e)return a.doRebuildAll=t})),this.modelsLength()||(this.modelsRendered=!1),this.scope.$watch("models",function(t){return function(e,n){if(!_.isEqual(e,n)||!t.modelsRendered){if(0===e.length&&0===n.length)return;return t.modelsRendered=!0,t.onWatch("models",t.scope,e,n)}}}(this),!this.isTrue(r.modelsbyref)),this.watch("doCluster",this.scope),this.watch("type",this.scope),this.watch("clusterOptions",this.scope),this.watch("clusterEvents",this.scope),this.watch("typeOptions",this.scope),this.watch("typeEvents",this.scope),this.watch("fit",this.scope),this.watch("idKey",this.scope),this.gManager=void 0,this.createAllNew(this.scope)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(c,r),c.include(d),c.include(i),c.prototype.onWatch=function(t,e,n,r){return"idKey"===t&&n!==r&&(this.idKey=n),this.doRebuildAll||"doCluster"===t||"type"===t?this.rebuildAll(e):this.pieceMeal(e)},c.prototype.validateScope=function(t){var n;return(n=e.isUndefined(t.models)||void 0===t.models)&&this.$log.error(this.constructor.name+": no valid models attribute found"),c.__super__.validateScope.call(this,t)||n},c.prototype.createChildScopes=function(t){if(null!=this.gMap&&null!=this.scope.models)return t?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)},c.prototype.bindToTypeEvents=function(t,n){var r,i,o;return null==n&&(n=["click","mouseout","mouseover"]),i=this,this.origTypeEvents?e.extend(t,this.origTypeEvents):(this.origTypeEvents={},_.each(n,(o=this,function(e){return o.origTypeEvents[e]=null!=t?t[e]:void 0}))),r={},_.each(n,(function(t){return r[t]=function(e){return i.maybeExecMappedEvent(e,t)}})),e.extend(t,r)},c.prototype.createAllNew=function(t){var e,n,r,i,o;if(null!=this.gManager&&(this.gManager instanceof g&&(e=this.gManager.isSpiderfied()),this.gManager.clear(),delete this.gManager),r=t.typeEvents||t.clusterEvents,i=t.typeOptions||t.clusterOptions,t.doCluster||"cluster"===t.type?(null!=r&&this.bindToTypeEvents(r),this.gManager=new l(this.map,void 0,i,r)):"spider"===t.type?(null!=r&&this.bindToTypeEvents(r,["spiderfy","unspiderfy"]),this.gManager=new g(this.map,void 0,i,r,this.scope),e&&this.gManager.spiderfy()):this.gManager=new u(this.map),!this.didQueueInitPromise(this,t))return n=null,s.promiseLock(this,h.promiseTypes.create,"createAllNew",(function(t){return n=t}),(o=this,function(){return s.each(t.models,(function(e){return o.newChildMarker(e,t),n}),s.chunkSizeFrom(t.chunk)).then((function(){return o.modelsRendered=!0,t.fit&&o.gManager.fit(),o.gManager.draw(),o.scope.pluralsUpdate.updateCtr+=1}),s.chunkSizeFrom(t.chunk))}))},c.prototype.rebuildAll=function(t){var e,n;if(t.doRebuild||void 0===t.doRebuild)return(null!=(e=this.scope.plurals)?e.length:void 0)?this.onDestroy(t).then((n=this,function(){return n.createAllNew(t)})):this.createAllNew(t)},c.prototype.pieceMeal=function(t){var e,n,r;if(!t.$$destroyed)return e=null,n=null,this.modelsLength()&&this.scope.plurals.length?s.promiseLock(this,h.promiseTypes.update,"pieceMeal",(function(t){return e=t}),(r=this,function(){return h.promise((function(){return r.figureOutState(r.idKey,t,r.scope.plurals,r.modelKeyComparison)})).then((function(i){return n=i,s.each(n.removals,(function(t){if(null!=t)return null!=t.destroy&&t.destroy(),r.scope.plurals.remove(t.id),e}),s.chunkSizeFrom(t.chunk))})).then((function(){return s.each(n.adds,(function(n){return r.newChildMarker(n,t),e}),s.chunkSizeFrom(t.chunk))})).then((function(){return s.each(n.updates,(function(t){return r.updateChild(t.child,t.model),e}),s.chunkSizeFrom(t.chunk))})).then((function(){return(n.adds.length>0||n.removals.length>0||n.updates.length>0)&&(t.plurals=r.scope.plurals,t.fit&&r.gManager.fit(),r.gManager.draw()),r.scope.pluralsUpdate.updateCtr+=1}))})):(this.inProgress=!1,this.rebuildAll(t))},c.prototype.newChildMarker=function(t,e){var n,r,i;if(!t)throw"model undefined";if(null!=t[this.idKey])return this.$log.info("child",n,"markers",this.scope.markerModels),(r=e.$new(!1)).events=e.events,i={},f.scopeKeys.forEach((function(t){return i[t]=e[t]})),n=new a({scope:r,model:t,keys:i,gMap:this.map,defaults:this.DEFAULTS,doClick:this.doClick,gManager:this.gManager,doDrawSelf:!1,isScopeModel:!0}),this.scope.plurals.put(t[this.idKey],n),n;this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key.")},c.prototype.onDestroy=function(t){return c.__super__.onDestroy.call(this,t),s.promiseLock(this,h.promiseTypes.delete,void 0,void 0,(e=this,function(){return s.each(e.scope.plurals.values(),(function(t){if(null!=t)return t.destroy(!1)}),s.chunkSizeFrom(e.scope.cleanchunk,!1)).then((function(){return null!=e.gManager&&e.gManager.destroy(),e.plurals.removeAll(),e.plurals!==e.scope.plurals&&console.error("plurals out of sync for MarkersParentModel"),e.scope.pluralsUpdate.updateCtr+=1}))}));var e},c.prototype.maybeExecMappedEvent=function(t,e){var n,r;if(!this.scope.$$destroyed)return r=this.scope.typeEvents||this.scope.clusterEvents,_.isFunction(null!=r?r[e]:void 0)&&(n=this.mapTypeToPlurals(t),this.origTypeEvents[e])?this.origTypeEvents[e](n.group,n.mapped):void 0},c.prototype.mapTypeToPlurals=function(t){var e,n,r;if(_.isArray(t)?e=t:_.isFunction(t.getMarkers)&&(e=t.getMarkers()),null!=e)return{cluster:t,mapped:(null!=(n=this.scope.plurals.values())?n.length:void 0)?e.map((r=this,function(t){return r.scope.plurals.get(t.key).model})):[],group:t};p.error("Unable to map event as we cannot find the array group to map")},c.prototype.getItem=function(t,e,n){return"models"===e?t[e][n]:t[e].get(n)},c}(r)}])}.call(this),function(){["Polygon","Polyline"].forEach((function(t){return e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmap"+t+"sParentModel",["uiGmapBasePolysParentModel","uiGmap"+t+"ChildModel","uiGmapI"+t,function(e,n,r){return e(r,n,t)}])}))}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapRectangleParentModel",["uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapRectangleOptionsBuilder",function(e,n,r,i){return function(i){function o(t,n,r,i,o){var a,s,l,u,c,f,h,d,p,g,v,m;this.scope=t,this.attrs=r,this.gMap=i,this.DEFAULTS=o,a=void 0,u=!1,p=[],d=void 0,m=this,c=function(){if(m.isTrue(m.attrs.fit))return m.fitMapBounds(m.gMap,a)},(l=function(t){return function(){var n,r,i;return null!=t.scope.bounds&&null!=(null!=(n=t.scope.bounds)?n.sw:void 0)&&null!=(null!=(r=t.scope.bounds)?r.ne:void 0)&&t.validateBoundPoints(t.scope.bounds)?(a=t.convertBoundPoints(t.scope.bounds),e.info("new new bounds created: "+JSON.stringify(a))):null!=t.scope.bounds.getNorthEast&&null!=t.scope.bounds.getSouthWest?a=t.scope.bounds:null!=t.scope.bounds?e.error("Invalid bounds for newValue: "+JSON.stringify(null!=(i=t.scope)?i.bounds:void 0)):void 0}}(this))(),f=new google.maps.Rectangle(this.buildOpts(a)),e.info("gObject (rectangle) created: "+f),g=!1,v=function(t){return function(){var e,n,r;if(e=f.getBounds(),n=e.getNorthEast(),r=e.getSouthWest(),!g)return t.scope.$evalAsync((function(t){if(null!=t.bounds&&null!=t.bounds.sw&&null!=t.bounds.ne&&(t.bounds.ne={latitude:n.lat(),longitude:n.lng()},t.bounds.sw={latitude:r.lat(),longitude:r.lng()}),null!=t.bounds.getNorthEast&&null!=t.bounds.getSouthWest)return t.bounds=e}))}}(this),h=function(t){return function(){return c(),t.removeEvents(p),p.push(google.maps.event.addListener(f,"dragstart",(function(){return u=!0}))),p.push(google.maps.event.addListener(f,"dragend",(function(){return u=!1,v()}))),p.push(google.maps.event.addListener(f,"bounds_changed",(function(){if(!u)return v()})))}}(this),s=function(t){return function(){return t.removeEvents(p),null!=d&&t.removeEvents(d),f.setMap(null)}}(this),null!=a&&h(),this.scope.$watch("bounds",(function(t,e){var n;if(!(_.isEqual(t,e)&&null!=a||u)){if(g=!0,null!=t)return null==a?n=!0:c(),l(),f.setBounds(a),g=!1,n&&null!=a?h():void 0;s()}}),!0),this.setMyOptions=function(t){return function(e,n){if(!_.isEqual(e,n)&&null!=a&&null!=e)return f.setOptions(t.buildOpts(a))}}(this),this.props.push("bounds"),this.watchProps(this.props),null!=this.attrs.events&&(d=this.setEvents(f,this.scope,this.scope),this.scope.$watch("events",function(t){return function(e,n){if(!_.isEqual(e,n))return null!=d&&t.removeEvents(d),d=t.setEvents(f,t.scope,t.scope)}}(this))),this.scope.$on("$destroy",(function(){return s()})),e.info(this)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(o,i),o.include(n),o.include(r),o}(i)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapSearchBoxParentModel",["uiGmapBaseObject","uiGmapLogger","uiGmapEventsHelper",function(r,i,o){return function(r){function a(n,r,o,a,s,l,u){var c;this.scope=n,this.element=r,this.attrs=o,this.gMap=a,this.ctrlPosition=s,this.template=l,this.$log=null!=u?u:i,this.setVisibility=t(this.setVisibility,this),this.getBounds=t(this.getBounds,this),this.setBounds=t(this.setBounds,this),this.createSearchBox=t(this.createSearchBox,this),this.addToParentDiv=t(this.addToParentDiv,this),this.addAsMapControl=t(this.addAsMapControl,this),this.init=t(this.init,this),null!=this.attrs.template?(e.isUndefined(this.scope.options)&&(this.scope.options={},this.scope.options.visible=!0),e.isUndefined(this.scope.options.visible)&&(this.scope.options.visible=!0),e.isUndefined(this.scope.options.autocomplete)&&(this.scope.options.autocomplete=!1),this.visible=this.scope.options.visible,this.autocomplete=this.scope.options.autocomplete,(c=e.element("<div></div>")).append(this.template),this.input=c.find("input")[0],this.init()):this.$log.error("template attribute for the search-box directive is mandatory. Places Search Box creation aborted!!")}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,r),a.include(o),a.prototype.init=function(){var t;return this.createSearchBox(),this.scope.$watch("options",(t=this,function(n,r){if(e.isObject(n)&&(null!=n.bounds&&t.setBounds(n.bounds),null!=n.visible&&t.visible!==n.visible))return t.setVisibility(n.visible)}),!0),null!=this.attrs.parentdiv?this.addToParentDiv():this.addAsMapControl(),this.visible||this.setVisibility(this.visible),this.autocomplete?this.listener=google.maps.event.addListener(this.gObject,"place_changed",function(t){return function(){return t.places=t.gObject.getPlace()}}(this)):this.listener=google.maps.event.addListener(this.gObject,"places_changed",function(t){return function(){return t.places=t.gObject.getPlaces()}}(this)),this.listeners=this.setEvents(this.gObject,this.scope,this.scope),this.$log.info(this),this.scope.$on("$stateChangeSuccess",function(t){return function(){if(null!=t.attrs.parentdiv)return t.addToParentDiv()}}(this)),this.scope.$on("$destroy",function(t){return function(){return t.gObject=null}}(this))},a.prototype.addAsMapControl=function(){return this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input)},a.prototype.addToParentDiv=function(){var t;if(this.parentDiv=e.element(document.getElementById(this.scope.parentdiv)),null!=(t=this.parentDiv)?t.length:void 0)return this.parentDiv.append(this.input)},a.prototype.createSearchBox=function(){return this.autocomplete?this.gObject=new google.maps.places.Autocomplete(this.input,this.scope.options):this.gObject=new google.maps.places.SearchBox(this.input,this.scope.options)},a.prototype.setBounds=function(t){if(e.isUndefined(t.isEmpty))this.$log.error("Error: SearchBoxParentModel setBounds. Bounds not an instance of LatLngBounds.");else if(!1===t.isEmpty()&&null!=this.gObject)return this.gObject.setBounds(t)},a.prototype.getBounds=function(){return this.gObject.getBounds()},a.prototype.setVisibility=function(t){return null!=this.attrs.parentdiv?!1===t?this.parentDiv.addClass("ng-hide"):this.parentDiv.removeClass("ng-hide"):!1===t?this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].clear():this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input),this.visible=t},a}(r)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapWindowsParentModel",["uiGmapIWindowParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapWindowChildModel","uiGmapLinked","uiGmap_async","uiGmapLogger","$timeout","$compile","$http","$templateCache","$interpolate","uiGmapPromise","uiGmapIWindow","uiGmapGmapUtil",function(r,i,o,a,s,l,u,c,f,h,d,p,g,v,m){return function(r){function y(e,n,r,i,a,l){var u;this.gMap=a,this.markersScope=l,this.modelKeyComparison=t(this.modelKeyComparison,this),this.interpolateContent=t(this.interpolateContent,this),this.setChildScope=t(this.setChildScope,this),this.createWindow=t(this.createWindow,this),this.setContentKeys=t(this.setContentKeys,this),this.pieceMeal=t(this.pieceMeal,this),this.createAllNew=t(this.createAllNew,this),this.watchIdKey=t(this.watchIdKey,this),this.createChildScopes=t(this.createChildScopes,this),this.watchOurScope=t(this.watchOurScope,this),this.watchDestroy=t(this.watchDestroy,this),this.onDestroy=t(this.onDestroy,this),this.rebuildAll=t(this.rebuildAll,this),this.doINeedToWipe=t(this.doINeedToWipe,this),this.watchModels=t(this.watchModels,this),this.go=t(this.go,this),y.__super__.constructor.call(this,e,n,r,i,c,f,h,d),this.interface=v,this.plurals=new o,_.each(v.scopeKeys,(u=this,function(t){return u[t+"Key"]=void 0})),this.linked=new s(e,n,r,i),this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.firstWatchModels=!0,this.$log.info(self),this.parentScope=void 0,this.go(e)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(y,r),y.include(i),y.prototype.go=function(t){var e;return this.watchOurScope(t),this.doRebuildAll=null!=this.scope.doRebuildAll&&this.scope.doRebuildAll,t.$watch("doRebuildAll",(e=this,function(t,n){if(t!==n)return e.doRebuildAll=t})),this.createChildScopes()},y.prototype.watchModels=function(t){var e,n;return e=null!=this.markersScope?"pluralsUpdate":"models",t.$watch(e,(n=this,function(e,r){var i;if(!_.isEqual(e,r)||n.firstWatchModels)return n.firstWatchModels=!1,n.doRebuildAll||n.doINeedToWipe(t.models)?n.rebuildAll(t,!0,!0):(i=0===n.plurals.length,null!=n.existingPieces?_.last(n.existingPieces._content).then((function(){return n.createChildScopes(i)})):n.createChildScopes(i))}),!0)},y.prototype.doINeedToWipe=function(t){var e;return e=null==t||0===t.length,this.plurals.length>0&&e},y.prototype.rebuildAll=function(t,e,n){return this.onDestroy(n).then((r=this,function(){if(e)return r.createChildScopes()}));var r},y.prototype.onDestroy=function(t){return y.__super__.onDestroy.call(this,this.scope),l.promiseLock(this,g.promiseTypes.delete,void 0,void 0,(e=this,function(){return l.each(e.plurals.values(),(function(t){return t.destroy(!0)}),l.chunkSizeFrom(e.scope.cleanchunk,!1)).then((function(){var t;return null!=(t=e.plurals)?t.removeAll():void 0}))}));var e},y.prototype.watchDestroy=function(t){return t.$on("$destroy",(e=this,function(){return e.firstWatchModels=!0,e.firstTime=!0,e.rebuildAll(t,!1,!0)}));var e},y.prototype.watchOurScope=function(t){return _.each(v.scopeKeys,(e=this,function(n){return e[n+"Key"]="function"==typeof t[n]?t[n]():t[n]}));var e},y.prototype.createChildScopes=function(t){var n,r;if(null==t&&(t=!0),this.isIconVisibleOnClick=!0,e.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),!e.isUndefined(this.linked.scope.models)||void 0!==this.markersScope&&void 0!==(null!=(n=this.markersScope)?n.plurals:void 0)&&void 0!==(null!=(r=this.markersScope)?r.models:void 0))return null!=this.gMap?null!=this.linked.scope.models?(this.watchIdKey(this.linked.scope),t?this.createAllNew(this.linked.scope,!1):this.pieceMeal(this.linked.scope,!1)):(this.parentScope=this.markersScope,this.watchIdKey(this.parentScope),t?this.createAllNew(this.markersScope,!0,"plurals",!1):this.pieceMeal(this.markersScope,!0,"plurals",!1)):void 0;this.$log.error("No models to create windows from! Need direct models or models derived from markers!")},y.prototype.watchIdKey=function(t){return this.setIdKey(t),t.$watch("idKey",(e=this,function(n,r){if(n!==r&&null==n)return e.idKey=n,e.rebuildAll(t,!0,!0)}));var e},y.prototype.createAllNew=function(t,e,n,r){var i,o;if(null==n&&(n="models"),null==r&&(r=!1),this.firstTime&&(this.watchModels(t),this.watchDestroy(t)),this.setContentKeys(t.models),!this.didQueueInitPromise(this,t))return i=null,l.promiseLock(this,g.promiseTypes.create,"createAllNew",(function(t){return i=t}),(o=this,function(){return l.each(t.models,(function(r){var a,s;return a=e&&null!=(s=o.getItem(t,n,r[o.idKey]))?s.gObject:void 0,i||(!a&&o.markersScope&&u.error("Unable to get gMarker from markersScope!"),o.createWindow(r,a,o.gMap)),i}),l.chunkSizeFrom(t.chunk)).then((function(){return o.firstTime=!1}))}))},y.prototype.pieceMeal=function(t,e,n,r){var i,o,a;if(null==n&&(n="models"),null==r&&(r=!0),!t.$$destroyed)return i=null,o=null,null!=t&&this.modelsLength()&&this.plurals.length?l.promiseLock(this,g.promiseTypes.update,"pieceMeal",(function(t){return i=t}),(a=this,function(){return g.promise((function(){return a.figureOutState(a.idKey,t,a.plurals,a.modelKeyComparison)})).then((function(e){return o=e,l.each(o.removals,(function(t){if(null!=t)return a.plurals.remove(t.id),null!=t.destroy&&t.destroy(!0),i}),l.chunkSizeFrom(t.chunk))})).then((function(){return l.each(o.adds,(function(e){var r,o;if(!(r=null!=(o=a.getItem(t,n,e[a.idKey]))?o.gObject:void 0))throw"Gmarker undefined";return a.createWindow(e,r,a.gMap),i}))})).then((function(){return l.each(o.updates,(function(t){return a.updateChild(t.child,t.model),i}),l.chunkSizeFrom(t.chunk))}))})):(u.debug("pieceMeal: rebuildAll"),this.rebuildAll(this.scope,!0,!0))},y.prototype.setContentKeys=function(t){if(this.modelsLength(t))return this.contentKeys=Object.keys(t[0])},y.prototype.createWindow=function(t,e,n){var r,i,o,s,l,u,c;if(i=this.linked.scope.$new(!1),this.setChildScope(i,t),i.$watch("model",(c=this,function(t,e){if(t!==e)return c.setChildScope(i,t)}),!0),o={html:function(e){return function(){return e.interpolateContent(e.linked.element.html(),t)}}(this)},this.DEFAULTS=this.scopeOrModelVal(this.optionsKey,this.scope,t)||{},s=this.createWindowOptions(e,i,o.html(),this.DEFAULTS),r=new a({model:t,scope:i,opts:s,isIconVisibleOnClick:this.isIconVisibleOnClick,gMap:n,markerScope:null!=(l=this.markersScope)&&null!=(u=l.plurals.get(t[this.idKey]))?u.scope:void 0,element:o,needToManualDestroy:!1,markerIsVisibleAfterWindowClose:!0,isScopeModel:!0}),null!=t[this.idKey])return this.plurals.put(t[this.idKey],r),r;this.$log.error("Window model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key.")},y.prototype.setChildScope=function(t,e){var n;return _.each(v.scopeKeys,(n=this,function(r){var i,o;if((o="self"===n[i=r+"Key"]?e:e[n[i]])!==t[r])return t[r]=o})),t.model=e},y.prototype.interpolateContent=function(t,e){var n,r,i,o,a,s;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(n=p(t),i={},r=0,a=(s=this.contentKeys).length;r<a;r++)i[o=s[r]]=e[o];return n(i)}},y.prototype.modelKeyComparison=function(t,e){var n,r,i;if(null==(r=null!=this.scope.coords?this.scope:this.parentScope))throw"No scope or parentScope set!";return(n=m.equalCoords(this.evalModelHandle(t,r.coords),this.evalModelHandle(e,r.coords)))?n=_.every(_.without(this.interface.scopeKeys,"coords"),(i=this,function(n){return i.evalModelHandle(t,r[n])===i.evalModelHandle(e,r[n])})):n},y}(r)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapCircle",["uiGmapICircle","uiGmapCircleParentModel",function(t,e){return _.extend(t,{link:function(t,n,r,i){return i.getScope().deferred.promise.then((function(i){return new e(t,n,r,i)}))}})}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapControl",["uiGmapIControl","$http","$templateCache","$compile","$controller","uiGmapGoogleMapApi",function(n,r,i,o,a,s){return function(l){function u(){var t,e;this.link=(t=this.link,e=this,function(){return t.apply(e,arguments)}),u.__super__.constructor.call(this)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(u,l),u.prototype.link=function(t,l,u,c){return s.then((f=this,function(s){var l,u;if(e.isUndefined(t.template))f.$log.error("mapControl: could not find a valid template property");else{if(l=e.isDefined(t.index&&!isNaN(parseInt(t.index)))?parseInt(t.index):void 0,u=e.isDefined(t.position)?t.position.toUpperCase().replace(/-/g,"_"):"TOP_CENTER",s.ControlPosition[u])return n.mapPromise(t,c).then((function(n){var s,c;return s=void 0,c=e.element("<div></div>"),r.get(t.template,{cache:i}).success((function(n){var r,i;if(i=t.$new(),c.append(n),e.isDefined(t.controller)&&(r=a(t.controller,{$scope:i}),c.children().data("$ngControllerController",r)),s=o(c.children())(i),l)return s[0].index=l})).error((function(t){return f.$log.error("mapControl: template could not be found")})).then((function(){return n.controls[google.maps.ControlPosition[u]].push(s[0])}))}));f.$log.error("mapControl: invalid position property")}}));var f},u}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapDragZoom",["uiGmapCtrlHandle","uiGmapPropertyAction",function(t,e){return{restrict:"EMA",transclude:!0,template:'<div class="angular-google-map-dragzoom" ng-transclude style="display: none"></div>',require:"^uiGmapGoogleMap",scope:{keyboardkey:"=",options:"=",spec:"="},controller:["$scope","$element",function(e,n){return e.ctrlType="uiGmapDragZoom",_.extend(this,t.handle(e,n))}],link:function(n,r,i,o){return t.mapPromise(n,o).then((function(t){var r,i,o;return r=function(e){return t.enableKeyDragZoom(e)},i=new e((function(t,e){return e?r({key:e}):r()})),o=new e((function(t,e){if(e)return r(e)})),n.$watch("keyboardkey",i.sic("keyboardkey")),i.sic(n.keyboardkey),n.$watch("options",o.sic("options")),o.sic(n.options)}))}}}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapDrawingManager",["uiGmapIDrawingManager","uiGmapDrawingManagerParentModel",function(t,e){return _.extend(t,{link:function(t,n,r,i){return i.getScope().deferred.promise.then((function(i){return new e(t,n,r,i)}))}})}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapApiFreeDrawPolygons",["uiGmapLogger","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapDrawFreeHandChildModel","uiGmapLodash",function(e,r,i,o,a){return function(r){function s(){return this.link=t(this.link,this),s.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(s,r),s.include(i),s.prototype.restrict="EMA",s.prototype.replace=!0,s.prototype.require="^uiGmapGoogleMap",s.prototype.scope={polygons:"=",draw:"="},s.prototype.link=function(t,n,r,i){return this.mapPromise(t,i).then((function(n){var r,s;return t.polygons?_.isArray(t.polygons)?(r=new o(n,i.getScope()),s=void 0,t.draw=function(){return"function"==typeof s&&s(),r.engage(t.polygons).then((function(){var e;return e=!0,s=t.$watchCollection("polygons",(function(t,n){if(!e&&t!==n)return a.differenceObjects(n,t).forEach((function(t){return t.setMap(null)}));e=!1}))}))}):e.error("Free Draw Polygons must be of type Array!"):e.error("No polygons to bind to!")}))},s}(r)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapICircle",[function(){return{},{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{center:"=center",radius:"=radius",stroke:"=stroke",fill:"=fill",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"=",events:"=",control:"=",zIndex:"=zindex"}}}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIControl",["uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,n,r){return function(e){function i(){this.restrict="EA",this.replace=!0,this.require="^uiGmapGoogleMap",this.scope={template:"@template",position:"@position",controller:"@controller",index:"@index"},this.$log=n}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(i,e),i.extend(r),i.prototype.link=function(t,e,n,r){throw new Exception("Not implemented!!")},i}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapIDrawingManager",[function(){return{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{static:"@",control:"=",options:"=",events:"="}}}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIMarker",["uiGmapBaseObject","uiGmapCtrlHandle",function(e,n){return function(e){function r(){this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope=_.extend(this.scope||{},r.scope)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(r,e),r.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events",fit:"=fit",idKey:"=idkey",control:"=control"},r.scopeKeys=_.keys(r.scope),r.keys=r.scopeKeys,r.extend(n),r}(e)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolygon",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,n,r,i){return function(n){function o(){}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(o,n),o.scope={path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",fill:"=",icons:"=icons",visible:"=",static:"=",events:"=",zIndex:"=zindex",fit:"=",control:"=control"},o.scopeKeys=_.keys(o.scope),o.include(e),o.extend(i),o.prototype.restrict="EMA",o.prototype.replace=!0,o.prototype.require="^uiGmapGoogleMap",o.prototype.scope=o.scope,o.prototype.DEFAULTS={},o.prototype.$log=r,o}(n)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolyline",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(e,n,r,i){return function(n){function o(){}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(o,n),o.scope={path:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=",visible:"=",static:"=",fit:"=",events:"=",zIndex:"=zindex"},o.scopeKeys=_.keys(o.scope),o.include(e),o.extend(i),o.prototype.restrict="EMA",o.prototype.replace=!0,o.prototype.require="^uiGmapGoogleMap",o.prototype.scope=o.scope,o.prototype.DEFAULTS={},o.prototype.$log=r,o}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapIRectangle",[function(){return{},{restrict:"EMA",require:"^uiGmapGoogleMap",replace:!0,scope:{bounds:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",fill:"=",visible:"=",events:"="}}}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIWindow",["uiGmapBaseObject","uiGmapChildEvents","uiGmapCtrlHandle",function(e,n,r){return function(e){function i(){this.restrict="EMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require="^uiGmapGoogleMap",this.replace=!0,this.scope=_.extend(this.scope||{},i.scope)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(i,e),i.scope={coords:"=coords",template:"=template",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options",control:"=control",show:"=show"},i.scopeKeys=_.keys(i.scope),i.include(n),i.extend(r),i}(e)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMap",["$timeout","$q","$log","uiGmapGmapUtil","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapIsReady","uiGmapuuid","uiGmapExtendGWin","uiGmapExtendMarkerClusterer","uiGmapGoogleMapsUtilV3","uiGmapGoogleMapApi","uiGmapEventsHelper","uiGmapGoogleMapObjectManager",function(n,r,i,o,a,s,l,u,c,f,h,d,p,g){var v,m;return v=void 0,m=[h,c,f],function(r){function a(){var t,e,n;this.link=(t=this.link,e=this,function(){return t.apply(e,arguments)}),n=function(t){var e;return void 0,t.$on("$destroy",(function(){return l.decrement()})),e=s.handle(t),t.ctrlType="Map",t.deferred.promise.then((function(){return m.forEach((function(t){return t.init()}))})),e.getMap=function(){return t.map},_.extend(this,e)},this.controller=["$scope",n]}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(a,r),a.include(o),a.prototype.restrict="EMA",a.prototype.transclude=!0,a.prototype.replace=!1,a.prototype.template='<div class="angular-google-map"><div class="angular-google-map-container">\n</div><div ng-transclude style="display: none"></div></div>',a.prototype.scope={center:"=",zoom:"=",dragging:"=",control:"=",options:"=",events:"=",eventOpts:"=",styles:"=",bounds:"=",update:"="},a.prototype.link=function(t,r,o){var a,s,c;if(a=[],t.$on("$destroy",(function(){if(p.removeEvents(a),"true"===o.recycleMapInstance&&t.map)return g.recycleMapInstance(t.map),t.map=null})),t.idleAndZoomChanged=!1,null!=t.center)return d.then(function(s){return function(c){var f,h,d,m,y,b,x,w,k,M,C,S,A,L,E,P,T;if(v={mapTypeId:c.MapTypeId.ROADMAP},L=l.spawn(),S=function(){return L.deferred.resolve({instance:L.instance,map:f})},s.validateCoords(t.center)){if(e.isDefined(t.zoom)){if((y=e.element(r)).addClass("angular-google-map"),M={options:{}},o.options&&(M.options=t.options),o.styles&&(M.styles=t.styles),o.type&&(E=o.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(E)?M.mapTypeId=google.maps.MapTypeId[o.type.toUpperCase()]:i.error("angular-google-maps: invalid map type '"+o.type+"'")),w=e.extend({},v,M,{center:s.getCoords(t.center),zoom:t.zoom,bounds:t.bounds}),(f="true"===o.recycleMapInstance?g.createMapInstance(y.find("div")[1],w):new google.maps.Map(y.find("div")[1],w)).uiGmap_id=u.generate(),m=!1,a.push(google.maps.event.addListenerOnce(f,"idle",(function(){return t.deferred.resolve(f),S()}))),d=o.events&&null!=(null!=(C=t.events)?C.blacklist:void 0)?t.events.blacklist:[],_.isString(d)&&(d=[d]),k=function(e,n,r){if(!_.includes(d,e))return r&&r(),a.push(google.maps.event.addListener(f,e,(function(){var e;if(!(null!=(e=t.update)?e.lazy:void 0))return n()})))},_.includes(d,"all")||(k("dragstart",(function(){return m=!0,t.$evalAsync((function(t){if(null!=t.dragging)return t.dragging=m}))})),k("dragend",(function(){return m=!1,t.$evalAsync((function(t){if(null!=t.dragging)return t.dragging=m}))})),P=function(n,r){if(null==n&&(n=f.center),null==r&&(r=t),!_.includes(d,"center"))if(e.isDefined(r.center.type)){if(r.center.coordinates[1]!==n.lat()&&(r.center.coordinates[1]=n.lat()),r.center.coordinates[0]!==n.lng())return r.center.coordinates[0]=n.lng()}else if(r.center.latitude!==n.lat()&&(r.center.latitude=n.lat()),r.center.longitude!==n.lng())return r.center.longitude=n.lng()},A=!1,k("idle",(function(){var e,n,r;return e=f.getBounds(),n=e.getNorthEast(),r=e.getSouthWest(),A=!0,t.$evalAsync((function(e){return P(),_.isUndefined(e.bounds)||_.includes(d,"bounds")||(e.bounds.northeast={latitude:n.lat(),longitude:n.lng()},e.bounds.southwest={latitude:r.lat(),longitude:r.lng()}),_.includes(d,"zoom")||(e.zoom=f.zoom,t.idleAndZoomChanged=!t.idleAndZoomChanged),A=!1}))}))),e.isDefined(t.events)&&null!==t.events&&e.isObject(t.events)){for(b in x=function(e){return function(){return t.events[e].apply(t,[f,e,arguments])}},h=[],t.events)t.events.hasOwnProperty(b)&&e.isFunction(t.events[b])&&h.push(google.maps.event.addListener(f,b,x(b)));a.concat(h)}return f.getOptions=function(){return w},t.map=f,null!=o.control&&null!=t.control&&(t.control.refresh=function(t){var e,n,r;if(null!=f)return null!=("undefined"!=typeof google&&null!==google&&null!=(n=google.maps)&&null!=(r=n.event)?r.trigger:void 0)&&null!=f&&google.maps.event.trigger(f,"resize"),null!=(null!=t?t.latitude:void 0)&&null!=(null!=t?t.longitude:void 0)?(e=s.getCoords(t),s.isTrue(o.pan)?f.panTo(e):f.setCenter(e)):void 0},t.control.getGMap=function(){return f},t.control.getMapOptions=function(){return w},t.control.getCustomEventListeners=function(){return h},t.control.removeEvents=function(t){return p.removeEvents(t)}),t.$watch("center",(function(e,n){var r;if(e!==n&&!A&&((r=s.getCoords(t.center)).lat()!==f.center.lat()||r.lng()!==f.center.lng()))return m?void 0:(s.validateCoords(e)||i.error("Invalid center for newValue: "+JSON.stringify(e)),s.isTrue(o.pan)&&t.zoom===f.zoom?f.panTo(r):f.setCenter(r))}),!0),T=null,t.$watch("zoom",(function(e,r){var i,o;if(null!=e&&!_.isEqual(e,r)&&(null!=f?f.getZoom():void 0)!==(null!=t?t.zoom:void 0)&&!A)return null!=T&&n.cancel(T),T=n((function(){return f.setZoom(e)}),(null!=(i=t.eventOpts)&&null!=(o=i.debounce)?o.zoomMs:void 0)+20,!1)})),t.$watch("bounds",(function(t,e){var n,r,o,a,s,l,u;if(t!==e){if(null!=(null!=t&&null!=(o=t.northeast)?o.latitude:void 0)&&null!=(null!=t&&null!=(a=t.northeast)?a.longitude:void 0)&&null!=(null!=t&&null!=(s=t.southwest)?s.latitude:void 0)&&null!=(null!=t&&null!=(l=t.southwest)?l.longitude:void 0))return r=new google.maps.LatLng(t.northeast.latitude,t.northeast.longitude),u=new google.maps.LatLng(t.southwest.latitude,t.southwest.longitude),n=new google.maps.LatLngBounds(u,r),f.fitBounds(n);i.error("Invalid map bounds for new value: "+JSON.stringify(t))}})),["options","styles"].forEach((function(e){return t.$watch(e,(function(t,n){if(!_.isEqual(t,n))return"options"===e?M.options=t:M.options[e]=t,null!=f?f.setOptions(M):void 0}),!0)}))}i.error("angular-google-maps: map zoom property not set")}else i.error("angular-google-maps: could not find a valid center property")}}(this));s=t.$watch("center",(c=this,function(){if(t.center)return s(),c.link(t,r,o)}))},a}(a)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarker",["uiGmapIMarker","uiGmapMarkerChildModel","uiGmapMarkerManager","uiGmapLogger",function(e,n,r,i){return function(o){function a(){a.__super__.constructor.call(this),this.template='<span class="angular-google-map-marker" ng-transclude></span>',i.info(this)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(a,o),a.prototype.controller=["$scope","$element",function(t,n){return t.ctrlType="Marker",_.extend(this,e.handle(t,n))}],a.prototype.link=function(t,i,o,a){return e.mapPromise(t,a).then((function(i){var o,a;if(o=new r(i),a=_.object(e.keys,e.keys),new n({scope:t,model:t,keys:a,gMap:i,doClick:!0,gManager:o,doDrawSelf:!1,trackModel:!1}).deferred.promise.then((function(e){return t.deferred.resolve(e)})),null!=t.control)return t.control.getGMarkers=o.getGMarkers})),t.$on("$destroy",(function(){var t;return null!=t&&t.clear(),null}))},a}(e)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarkers",["uiGmapIMarker","uiGmapPlural","uiGmapMarkersParentModel","uiGmap_sync","uiGmapLogger",function(e,n,r,i,o){return function(i){function a(){a.__super__.constructor.call(this),this.template='<span class="angular-google-map-markers" ng-transclude></span>',n.extend(this,{doCluster:"=?docluster",clusterOptions:"=clusteroptions",clusterEvents:"=clusterevents",modelsByRef:"=modelsbyref",type:"=?type",typeOptions:"=?typeoptions",typeEvents:"=?typeevents"}),o.info(this)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(a,i),a.prototype.controller=["$scope","$element",function(t,n){return t.ctrlType="Markers",_.extend(this,e.handle(t,n))}],a.prototype.link=function(t,i,o,a){var s,l;return s=void 0,l=function(){return t.deferred.resolve()},e.mapPromise(t,a).then((function(e){return a.getScope().$watch("idleAndZoomChanged",(function(){return _.defer(s.gManager.draw)})),s=new r(t,i,o,e),n.link(t,s),null!=t.control&&(t.control.getGMarkers=function(){var t;return null!=(t=s.gManager)?t.getGMarkers():void 0},t.control.getChildMarkers=function(){return s.plurals}),_.last(s.existingPieces._content).then((function(){return l()}))}))},a}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").service("uiGmapPlural",[function(){var t;return t=function(t,e){if(null!=t.control)return t.control.updateModels=function(n){return t.models=n,e.createChildScopes(!1)},t.control.newModels=function(n){return t.models=n,e.rebuildAll(t,!0,!0)},t.control.clean=function(){return e.rebuildAll(t,!1,!0)},t.control.getPlurals=function(){return e.plurals},t.control.getManager=function(){return e.gManager},t.control.hasManager=function(){return null!=e.gManager==!0},t.control.managerDraw=function(){var e;if(t.control.hasManager())return null!=(e=t.control.getManager())?e.draw():void 0}},{extend:function(t,e){return _.extend(t.scope||{},e||{},{idKey:"=idkey",doRebuildAll:"=dorebuildall",models:"=models",chunk:"=chunk",cleanchunk:"=cleanchunk",control:"=control"})},link:function(e,n){return t(e,n)}}}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygon",["uiGmapIPolygon","$timeout","uiGmapPolygonChildModel",function(e,r,i){return function(r){function o(){return this.link=t(this.link,this),o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(o,r),o.prototype.link=function(t,n,r,o){var a,s,l;return a=[],s=e.mapPromise(t,o),null!=t.control&&(t.control.getInstance=this,t.control.polygons=a,t.control.promise=s),s.then((l=this,function(e){return a.push(new i({scope:t,attrs:r,gMap:e,defaults:l.DEFAULTS}))}))},o}(e)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygons",["uiGmapIPolygon","$timeout","uiGmapPolygonsParentModel","uiGmapPlural",function(n,r,i,o){return function(n){function r(){var t,e;this.link=(t=this.link,e=this,function(){return t.apply(e,arguments)}),r.__super__.constructor.call(this),o.extend(this),this.$log.info(this)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(r,n),r.prototype.link=function(t,n,r,a){return a.getScope().deferred.promise.then((s=this,function(a){return(e.isUndefined(t.path)||null===t.path)&&s.$log.warn("polygons: no valid path attribute found"),t.models||s.$log.warn("polygons: no models found to create from"),o.link(t,new i(t,n,r,a,s.DEFAULTS))}));var s},r}(n)}])}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolyline",["uiGmapIPolyline","$timeout","uiGmapPolylineChildModel",function(r,i,o){return function(i){function a(){return this.link=t(this.link,this),a.__super__.constructor.apply(this,arguments)}return function(t,e){for(var r in e)n.call(e,r)&&(t[r]=e[r]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,i),a.prototype.link=function(t,n,i,a){return r.mapPromise(t,a).then((s=this,function(n){return!e.isUndefined(t.path)&&null!==t.path&&s.validatePath(t.path)||s.$log.warn("polyline: no valid path attribute found"),new o({scope:t,attrs:i,gMap:n,defaults:s.DEFAULTS})}));var s},a}(r)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylines",["uiGmapIPolyline","$timeout","uiGmapPolylinesParentModel","uiGmapPlural",function(n,r,i,o){return function(n){function r(){var t,e;this.link=(t=this.link,e=this,function(){return t.apply(e,arguments)}),r.__super__.constructor.call(this),o.extend(this),this.$log.info(this)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(r,n),r.prototype.link=function(t,n,r,a){return a.getScope().deferred.promise.then((s=this,function(a){return(e.isUndefined(t.path)||null===t.path)&&s.$log.warn("polylines: no valid path attribute found"),t.models||s.$log.warn("polylines: no models found to create from"),o.link(t,new i(t,n,r,a,s.DEFAULTS))}));var s},r}(n)}])}.call(this),function(){e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapRectangle",["uiGmapLogger","uiGmapGmapUtil","uiGmapIRectangle","uiGmapRectangleParentModel",function(t,e,n,r){return _.extend(n,{link:function(t,e,n,i){return i.getScope().deferred.promise.then((function(i){return new r(t,e,n,i)}))}})}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindow",["uiGmapIWindow","uiGmapGmapUtil","uiGmapWindowChildModel","uiGmapLodash","uiGmapLogger",function(n,r,i,o,a){return function(s){function l(){var t,e;this.link=(t=this.link,e=this,function(){return t.apply(e,arguments)}),l.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',a.debug(this),this.childWindows=[]}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(l,s),l.include(r),l.prototype.link=function(t,r,i,o){var a,s,l;return a=o.length>1&&null!=o[1]?o[1]:void 0,s=null!=a?a.getScope():void 0,this.mapPromise=n.mapPromise(t,o[0]),this.mapPromise.then((l=this,function(n){var o;if(o=!0,e.isDefined(i.isiconvisibleonclick)&&(o=t.isIconVisibleOnClick),a)return s.deferred.promise.then((function(e){return l.init(t,r,o,n,s)}));l.init(t,r,o,n)}))},l.prototype.init=function(t,e,n,r,a){var s,l,u,c,f,h;if(l=null!=t.options?t.options:{},c=null!=t&&this.validateCoords(t.coords),null!=(null!=a?a.getGMarker:void 0)&&(u=a.getGMarker()),f=c?this.createWindowOptions(u,t,e.html(),l):l,null!=r&&(s=new i({scope:t,opts:f,isIconVisibleOnClick:n,gMap:r,markerScope:a,element:e}),this.childWindows.push(s),t.$on("$destroy",(h=this,function(){return h.childWindows=o.withoutObjects(h.childWindows,[s],(function(t,e){return t.scope.$id===e.scope.$id})),h.childWindows.length=0}))),null!=t.control&&(t.control.getGWindows=function(t){return function(){return t.childWindows.map((function(t){return t.gObject}))}}(this),t.control.getChildWindows=function(t){return function(){return t.childWindows}}(this),t.control.getPlurals=t.control.getChildWindows,t.control.showWindow=function(t){return function(){return t.childWindows.map((function(t){return t.showWindow()}))}}(this),t.control.hideWindow=function(t){return function(){return t.childWindows.map((function(t){return t.hideWindow()}))}}(this)),null!=this.onChildCreation&&null!=s)return this.onChildCreation(s)},l}(n)}])}.call(this),function(){var t={}.hasOwnProperty;e.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindows",["uiGmapIWindow","uiGmapPlural","uiGmapWindowsParentModel","uiGmapPromise","uiGmapLogger",function(e,n,r,i,o){return function(e){function a(){var t,e;this.link=(t=this.link,e=this,function(){return t.apply(e,arguments)}),a.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarkers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',n.extend(this),o.debug(this)}return function(e,n){for(var r in n)t.call(n,r)&&(e[r]=n[r]);function i(){this.constructor=e}i.prototype=n.prototype,e.prototype=new i,e.__super__=n.prototype}(a,e),a.prototype.link=function(t,e,n,r){var o,a,s,l;return o=r[0].getScope(),a=r.length>1&&null!=r[1]?r[1]:void 0,s=null!=a?a.getScope():void 0,o.deferred.promise.then((l=this,function(o){var a;return((null!=s&&null!=(a=s.deferred)?a.promise:void 0)||i.resolve()).then((function(){var i,a;return(i=null!=(a=l.parentModel)?a.existingPieces:void 0)?i.then((function(){return l.init(t,e,n,r,o,s)})):l.init(t,e,n,r,o,s)}))}))},a.prototype.init=function(t,e,i,o,a,s){var l;if(l=new r(t,e,i,o,a,s),n.link(t,l),null!=t.control)return t.control.getGWindows=function(){return l.plurals.map((function(t){return t.gObject}))},t.control.getChildWindows=function(){return l.plurals}},a}(e)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapGoogleMap",["uiGmapMap",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMarker",["$timeout","uiGmapMarker",function(t,e){return new e(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMarkers",["$timeout","uiGmapMarkers",function(t,e){return new e(t)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolygon",["uiGmapPolygon",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapCircle",["uiGmapCircle",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolyline",["uiGmapPolyline",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolylines",["uiGmapPolylines",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapRectangle",["uiGmapLogger","uiGmapRectangle",function(t,e){return e}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapWindow",["$timeout","$compile","$http","$templateCache","uiGmapWindow",function(t,e,n,r,i){return new i(t,e,n,r)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapWindows",["$timeout","$compile","$http","$templateCache","$interpolate","uiGmapWindows",function(t,e,n,r,i,o){return new o(t,e,n,r,i)}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapLayer",["$timeout","uiGmapLogger","uiGmapLayerParentModel",function(t,e,n){return new(function(){function t(){var t,n;this.link=(t=this.link,n=this,function(){return t.apply(n,arguments)}),this.$log=e,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-layer' ng-transclude></span>",this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return t.prototype.link=function(t,e,r,i){return i.getScope().deferred.promise.then((function(i){return null!=t.onCreated?new n(t,e,r,i,t.onCreated):new n(t,e,r,i)}))},t}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMapControl",["uiGmapControl",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapDragZoom",["uiGmapDragZoom",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapDrawingManager",["uiGmapDrawingManager",function(t){return t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapFreeDrawPolygons",["uiGmapApiFreeDrawPolygons",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapMapType",["$timeout","uiGmapLogger","uiGmapMapTypeParentModel",function(t,e,n){return new(function(){function t(){var t,n;this.link=(t=this.link,n=this,function(){return t.apply(n,arguments)}),this.$log=e,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",options:"=options",refresh:"=refresh",id:"@"}}return t.prototype.link=function(t,e,r,i){return i.getScope().deferred.promise.then((function(i){return new n(t,e,r,i)}))},t}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapPolygons",["uiGmapPolygons",function(t){return new t}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapSearchBox",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapSearchBoxParentModel","$http","$templateCache","$compile",function(t,n,r,i,o,a){return new(function(){function s(){var t,e;this.link=(t=this.link,e=this,function(){return t.apply(e,arguments)}),this.$log=n,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-search' ng-transclude></span>",this.replace=!0,this.scope={template:"=template",events:"=events",position:"=?position",options:"=?options",parentdiv:"=?parentdiv",ngModel:"=?"}}return s.prototype.require="ngModel",s.prototype.link=function(n,s,l,u){return t.then((c=this,function(t){return null==n.template&&(o.put("uigmap-searchbox-default.tpl.html",'<input type="text">'),n.template="uigmap-searchbox-default.tpl.html"),i.get(n.template,{cache:o}).success((function(i){if(!e.isUndefined(n.events))return u.getScope().deferred.promise.then((function(o){var u;if(u=e.isDefined(n.position)?n.position.toUpperCase().replace(/-/g,"_"):"TOP_LEFT",t.ControlPosition[u])return new r(n,s,l,o,u,a(i)(n));c.$log.error("searchBox: invalid position property")}));c.$log.error("searchBox: the events property is required")}))}));var c},s}())}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapShow",["$animate","uiGmapLogger",function(t,n){return{scope:{uiGmapShow:"=",uiGmapAfterShow:"&",uiGmapAfterHide:"&"},link:function(r,i){var o,a,s;return o=function(e,n){return t[e](i,"ng-hide").then((function(){return n()}))},a=function(e,n){return t[e](i,"ng-hide",n)},s=function(t,r){return e.version.major>1?n.error("uiGmapShow is not supported for Angular Major greater than 1.\nYour Major is "+e.version.major+'"'):1===e.version.major&&e.version.minor<3?a(t,r):o(t,r)},r.$watch("uiGmapShow",(function(t){if(t&&s("removeClass",r.uiGmapAfterShow),!t)return s("addClass",r.uiGmapAfterHide)}))}}}])}.call(this),function(){e.module("uiGmapgoogle-maps").directive("uiGmapStreetViewPanorama",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper",function(t,n,r,i){var o;return o="uiGmapStreetViewPanorama",{restrict:"EMA",template:'<div class="angular-google-map-street-view-panorama"></div>',replace:!0,scope:{focalcoord:"=",radius:"=?",events:"=?",options:"=?",control:"=?",povoptions:"=?",imagestatus:"="},link:function(a,s,l){return t.then((function(t){var l,u,c,f,h,d,p,g,v,m;return g=void 0,m=void 0,c=!1,d=void 0,p=null,v=null,l=function(){if(i.removeEvents(d),null!=g&&(g.unbind("position"),g.setVisible(!1)),null!=m)return null!=(null!=m?m.setVisible:void 0)&&m.setVisible(!1),m=void 0},h=function(t,n){var r;return r=google.maps.geometry.spherical.computeHeading(t,n),c=!0,a.radius=a.radius||50,v=e.extend({heading:r,zoom:1,pitch:0},a.povoptions||{}),p=p=e.extend({navigationControl:!1,addressControl:!1,linksControl:!1,position:t,pov:v,visible:!0},a.options||{}),c=!1},u=function(){var t;if(a.focalcoord){if(a.radius)return l(),null==m&&(m=new google.maps.StreetViewService),a.events&&(d=i.setEvents(m,a,a)),t=r.getCoords(a.focalcoord),m.getPanoramaByLocation(t,a.radius,(function(e,n){var r,i,o;if(null!=a.imagestatus&&(a.imagestatus=n),null!=(null!=(o=a.events)?o.image_status_changed:void 0)&&a.events.image_status_changed(m,"image_status_changed",a,n),"OK"===n)return i=e.location.latLng,h(i,t),r=s[0],g=new google.maps.StreetViewPanorama(r,p)}));n.error(o+": needs a radius to set the camera view from its focal target.")}else n.error(o+": focalCoord needs to be defined")},null!=a.control&&(a.control.getOptions=function(){return p},a.control.getPovOptions=function(){return v},a.control.getGObject=function(){return m},a.control.getGPano=function(){return g}),a.$watch("options",(function(t,e){if(t!==e&&t!==p&&!c)return u()})),f=!0,a.$watch("focalcoord",(function(t,e){if((t!==e||f)&&null!=t)return f=!1,u()})),a.$on("$destroy",(function(){return l()}))}))}}}])}.call(this),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapuuid",(function(){function t(){}return t.generate=function(){var e=t._gri,n=t._ha;return n(e(32),8)+"-"+n(e(16),4)+"-"+n(16384|e(12),4)+"-"+n(32768|e(14),4)+"-"+n(e(48),12)},t._gri=function(t){return 0>t?NaN:30>=t?0|Math.random()*(1<<t):53>=t?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<t-30)):NaN},t._ha=function(t,e){for(var n=t.toString(16),r=e-n.length,i="0";0<r;r>>>=1,i+=i)1&r&&(n=i+n);return n},t})),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapGoogleMapsUtilV3",(function(){return{init:_.once((function(){!function(){
/*!
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(t){t=t||{},google.maps.OverlayView.apply(this,arguments),this.content_=t.content||"",this.disableAutoPan_=t.disableAutoPan||!1,this.maxWidth_=t.maxWidth||0,this.pixelOffset_=t.pixelOffset||new google.maps.Size(0,0),this.position_=t.position||new google.maps.LatLng(0,0),this.zIndex_=t.zIndex||null,this.boxClass_=t.boxClass||"infoBox",this.boxStyle_=t.boxStyle||{},this.closeBoxMargin_=t.closeBoxMargin||"2px",this.closeBoxURL_=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=t.infoBoxClearance||new google.maps.Size(1,1),void 0===t.visible&&(void 0===t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden_=!t.visible,this.alignBottom_=t.alignBottom||!1,this.pane_=t.pane||"floatPane",this.enableEventPropagation_=t.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function n(t,e){t.getMarkerClusterer().extend(n,google.maps.OverlayView),this.cluster_=t,this.className_=t.getMarkerClusterer().getClusterClass(),this.styles_=e,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(t.getMap())}function r(t){this.markerClusterer_=t,this.map_=t.getMap(),this.gridSize_=t.getGridSize(),this.minClusterSize_=t.getMinimumClusterSize(),this.averageCenter_=t.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new n(this,t.getStyles())}function i(t,e,n){this.extend(i,google.maps.OverlayView),e=e||[],n=n||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=n.gridSize||60,this.minClusterSize_=n.minimumClusterSize||2,this.maxZoom_=n.maxZoom||null,this.styles_=n.styles||[],this.title_=n.title||"",this.zoomOnClick_=!0,void 0!==n.zoomOnClick&&(this.zoomOnClick_=n.zoomOnClick),this.averageCenter_=!1,void 0!==n.averageCenter&&(this.averageCenter_=n.averageCenter),this.ignoreHidden_=!1,void 0!==n.ignoreHidden&&(this.ignoreHidden_=n.ignoreHidden),this.enableRetinaIcons_=!1,void 0!==n.enableRetinaIcons&&(this.enableRetinaIcons_=n.enableRetinaIcons),this.imagePath_=n.imagePath||i.IMAGE_PATH,this.imageExtension_=n.imageExtension||i.IMAGE_EXTENSION,this.imageSizes_=n.imageSizes||i.IMAGE_SIZES,this.calculator_=n.calculator||i.CALCULATOR,this.batchSize_=n.batchSize||i.BATCH_SIZE,this.batchSizeIE_=n.batchSizeIE||i.BATCH_SIZE_IE,this.clusterClass_=n.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(e,!0),this.setMap(t)}
/*!
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function o(t,e){function n(){}n.prototype=e.prototype,t.superClass_=e.prototype,t.prototype=new n,t.prototype.constructor=t}function a(t,e,n){this.marker_=t,this.handCursorURL_=t.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=a.getSharedCross(e)}function s(t){(t=t||{}).labelContent=t.labelContent||"",t.labelAnchor=t.labelAnchor||new google.maps.Point(0,0),t.labelClass=t.labelClass||"markerLabels",t.labelStyle=t.labelStyle||{},t.labelInBackground=t.labelInBackground||!1,void 0===t.labelVisible&&(t.labelVisible=!0),void 0===t.raiseOnDrag&&(t.raiseOnDrag=!0),void 0===t.clickable&&(t.clickable=!0),void 0===t.draggable&&(t.draggable=!1),void 0===t.optimized&&(t.optimized=!1),t.crossImage=t.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",t.handCursor=t.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",t.optimized=!1,this.label=new a(this,t.crossImage,t.handCursor),google.maps.Marker.apply(this,arguments)}
/**
 * @license
 * Copyright 2013 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function l(t){var e=t||{};this.ready_=!1,this.dragging_=!1,null==t.visible&&(t.visible=!0),null==t.shadow&&(t.shadow="7px -3px 5px rgba(88,88,88,0.7)"),null==t.anchor&&(t.anchor=u.BOTTOM),this.setValues(e)}e.prototype=new google.maps.OverlayView,e.prototype.createInfoBoxDiv_=function(){var t,e,n,r=this,i=function(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),void 0===this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(n=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-n.left-n.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],e=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],t=0;t<e.length;t++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,e[t],i));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",(function(t){this.style.cursor="default"})))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),r.enableEventPropagation_||i(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg_=function(){var t="";return""!==this.closeBoxURL_&&(t="<img",t+=" src='"+this.closeBoxURL_+"'",t+=" align=right",t+=" style='",t+=" position: relative;",t+=" cursor: pointer;",t+=" margin: "+this.closeBoxMargin_+";",t+="'>"),t},e.prototype.addClickHandler_=function(){var t;""!==this.closeBoxURL_?(t=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(t,"click",this.getCloseClickHandler_())):this.closeListener_=null},e.prototype.getCloseClickHandler_=function(){var t=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(t,"closeclick"),t.close()}},e.prototype.panBox_=function(t){var e,n=0,r=0;if(!t&&(e=this.getMap())instanceof google.maps.Map){e.getBounds().contains(this.position_)||e.setCenter(this.position_),e.getBounds();var i=e.getDiv(),o=i.offsetWidth,a=i.offsetHeight,s=this.pixelOffset_.width,l=this.pixelOffset_.height,u=this.div_.offsetWidth,c=this.div_.offsetHeight,f=this.infoBoxClearance_.width,h=this.infoBoxClearance_.height,d=this.getProjection().fromLatLngToContainerPixel(this.position_);if(d.x<-s+f?n=d.x+s-f:d.x+u+s+f>o&&(n=d.x+u+s+f-o),this.alignBottom_?d.y<-l+h+c?r=d.y+l-h-c:d.y+l+h>a&&(r=d.y+l+h-a):d.y<-l+h?r=d.y+l-h:d.y+c+l+h>a&&(r=d.y+c+l+h-a),0!==n||0!==r){e.getCenter();e.panBy(n,r)}}},e.prototype.setBoxStyle_=function(){var t,e;if(this.div_){for(t in this.div_.className=this.boxClass_,this.div_.style.cssText="",e=this.boxStyle_)e.hasOwnProperty(t)&&(this.div_.style[t]=e[t]);this.div_.style.WebkitTransform="translateZ(0)",void 0!==this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},e.prototype.getBoxWidths_=function(){var t,e={top:0,bottom:0,left:0,right:0},n=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(t=n.ownerDocument.defaultView.getComputedStyle(n,""))&&(e.top=parseInt(t.borderTopWidth,10)||0,e.bottom=parseInt(t.borderBottomWidth,10)||0,e.left=parseInt(t.borderLeftWidth,10)||0,e.right=parseInt(t.borderRightWidth,10)||0):document.documentElement.currentStyle&&n.currentStyle&&(e.top=parseInt(n.currentStyle.borderTopWidth,10)||0,e.bottom=parseInt(n.currentStyle.borderBottomWidth,10)||0,e.left=parseInt(n.currentStyle.borderLeftWidth,10)||0,e.right=parseInt(n.currentStyle.borderRightWidth,10)||0),e},e.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},e.prototype.draw=function(){this.createInfoBoxDiv_();var t=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=t.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(t.y+this.pixelOffset_.height)+"px":this.div_.style.top=t.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},e.prototype.setOptions=function(t){void 0!==t.boxClass&&(this.boxClass_=t.boxClass,this.setBoxStyle_()),void 0!==t.boxStyle&&(this.boxStyle_=t.boxStyle,this.setBoxStyle_()),void 0!==t.content&&this.setContent(t.content),void 0!==t.disableAutoPan&&(this.disableAutoPan_=t.disableAutoPan),void 0!==t.maxWidth&&(this.maxWidth_=t.maxWidth),void 0!==t.pixelOffset&&(this.pixelOffset_=t.pixelOffset),void 0!==t.alignBottom&&(this.alignBottom_=t.alignBottom),void 0!==t.position&&this.setPosition(t.position),void 0!==t.zIndex&&this.setZIndex(t.zIndex),void 0!==t.closeBoxMargin&&(this.closeBoxMargin_=t.closeBoxMargin),void 0!==t.closeBoxURL&&(this.closeBoxURL_=t.closeBoxURL),void 0!==t.infoBoxClearance&&(this.infoBoxClearance_=t.infoBoxClearance),void 0!==t.isHidden&&(this.isHidden_=t.isHidden),void 0!==t.visible&&(this.isHidden_=!t.visible),void 0!==t.enableEventPropagation&&(this.enableEventPropagation_=t.enableEventPropagation),this.div_&&this.draw()},e.prototype.setContent=function(t){this.content_=t,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),void 0===t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px",void 0===t.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+t:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(t))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(t){this.position_=t,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setZIndex=function(t){this.zIndex_=t,this.div_&&(this.div_.style.zIndex=t),google.maps.event.trigger(this,"zindex_changed")},e.prototype.setVisible=function(t){this.isHidden_=!t,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},e.prototype.getContent=function(){return this.content_},e.prototype.getPosition=function(){return this.position_},e.prototype.getZIndex=function(){return this.zIndex_},e.prototype.getVisible=function(){return void 0!==this.getMap()&&null!==this.getMap()&&!this.isHidden_},e.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},e.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},e.prototype.open=function(t,e){var n=this;e&&(this.position_=e.getPosition(),this.moveListener_=google.maps.event.addListener(e,"position_changed",(function(){n.setPosition(this.getPosition())}))),this.setMap(t),this.div_&&this.panBox_()},e.prototype.close=function(){var t;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(t=0;t<this.eventListeners_.length;t++)google.maps.event.removeListener(this.eventListeners_[t]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},
/*!
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){var e=function(t){var e;switch(t){case"thin":e="2px";break;case"medium":e="4px";break;case"thick":e="6px";break;default:e=t}return e},n=function(t){var n,r={};if(document.defaultView&&document.defaultView.getComputedStyle){if(n=t.ownerDocument.defaultView.getComputedStyle(t,""))return r.top=parseInt(n.borderTopWidth,10)||0,r.bottom=parseInt(n.borderBottomWidth,10)||0,r.left=parseInt(n.borderLeftWidth,10)||0,r.right=parseInt(n.borderRightWidth,10)||0,r}else if(document.documentElement.currentStyle&&t.currentStyle)return r.top=parseInt(e(t.currentStyle.borderTopWidth),10)||0,r.bottom=parseInt(e(t.currentStyle.borderBottomWidth),10)||0,r.left=parseInt(e(t.currentStyle.borderLeftWidth),10)||0,r.right=parseInt(e(t.currentStyle.borderRightWidth),10)||0,r;return r.top=parseInt(t.style["border-top-width"],10)||0,r.bottom=parseInt(t.style["border-bottom-width"],10)||0,r.left=parseInt(t.style["border-left-width"],10)||0,r.right=parseInt(t.style["border-right-width"],10)||0,r},r={x:0,y:0},i=function(t){r.x=void 0!==document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,r.y=void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop};i();var o=function(e){var n=0,i=0;return void 0!==(e=e||t.event).pageX?(n=e.pageX,i=e.pageY):void 0!==e.clientX&&(n=e.clientX+r.x,i=e.clientY+r.y),{left:n,top:i}},a=function(e){for(var n=e.offsetLeft,r=e.offsetTop,i=e.offsetParent;null!==i;){i!==document.body&&i!==document.documentElement&&(n-=i.scrollLeft,r-=i.scrollTop);var o=i,a=o.offsetLeft,s=o.offsetTop;if(!a&&!s&&t.getComputedStyle){var l=document.defaultView.getComputedStyle(o,null).MozTransform||document.defaultView.getComputedStyle(o,null).WebkitTransform;if(l&&"string"==typeof l){var u=l.split(",");a+=parseInt(u[4],10)||0,s+=parseInt(u[5],10)||0}}n+=a,r+=s,i=i.offsetParent}return{left:n,top:r}},s=function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},l=function(t,e){void 0!==e&&(t.style.opacity=e),void 0!==t.style.opacity&&""!==t.style.opacity&&(t.style.filter="alpha(opacity="+100*t.style.opacity+")")};function u(t,e){var n=this,r=new google.maps.OverlayView;r.onAdd=function(){n.init_(t,e)},r.draw=function(){},r.onRemove=function(){},r.setMap(t),this.prjov_=r}u.prototype.init_=function(e,r){var o,a=this;for(this.map_=e,r=r||{},this.key_=r.key||"shift",this.key_=this.key_.toLowerCase(),this.borderWidths_=n(this.map_.getDiv()),this.veilDiv_=[],o=0;o<4;o++)this.veilDiv_[o]=document.createElement("div"),this.veilDiv_[o].onselectstart=function(){return!1},s(this.veilDiv_[o].style,{backgroundColor:"gray",opacity:.25,cursor:"crosshair"}),s(this.veilDiv_[o].style,r.paneStyle),s(this.veilDiv_[o].style,r.veilStyle),s(this.veilDiv_[o].style,{position:"absolute",overflow:"hidden",display:"none"}),"shift"===this.key_&&(this.veilDiv_[o].style.MozUserSelect="none"),l(this.veilDiv_[o]),"transparent"===this.veilDiv_[o].style.backgroundColor&&(this.veilDiv_[o].style.backgroundColor="white",l(this.veilDiv_[o],0)),this.map_.getDiv().appendChild(this.veilDiv_[o]);this.noZoom_=r.noZoom||!1,this.visualEnabled_=r.visualEnabled||!1,this.visualClass_=r.visualClass||"",this.visualPosition_=r.visualPosition||google.maps.ControlPosition.LEFT_TOP,this.visualPositionOffset_=r.visualPositionOffset||new google.maps.Size(35,0),this.visualPositionIndex_=r.visualPositionIndex||null,this.visualSprite_=r.visualSprite||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png",this.visualSize_=r.visualSize||new google.maps.Size(20,20),this.visualTips_=r.visualTips||{},this.visualTips_.off=this.visualTips_.off||"Turn on drag zoom mode",this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode",this.boxDiv_=document.createElement("div"),s(this.boxDiv_.style,{border:"4px solid #736AFF"}),s(this.boxDiv_.style,r.boxStyle),s(this.boxDiv_.style,{position:"absolute",display:"none"}),l(this.boxDiv_),this.map_.getDiv().appendChild(this.boxDiv_),this.boxBorderWidths_=n(this.boxDiv_),this.listeners_=[google.maps.event.addDomListener(document,"keydown",(function(t){a.onKeyDown_(t)})),google.maps.event.addDomListener(document,"keyup",(function(t){a.onKeyUp_(t)})),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",(function(t){a.onMouseDown_(t)})),google.maps.event.addDomListener(this.veilDiv_[1],"mousedown",(function(t){a.onMouseDown_(t)})),google.maps.event.addDomListener(this.veilDiv_[2],"mousedown",(function(t){a.onMouseDown_(t)})),google.maps.event.addDomListener(this.veilDiv_[3],"mousedown",(function(t){a.onMouseDown_(t)})),google.maps.event.addDomListener(document,"mousedown",(function(t){a.onMouseDownDocument_(t)})),google.maps.event.addDomListener(document,"mousemove",(function(t){a.onMouseMove_(t)})),google.maps.event.addDomListener(document,"mouseup",(function(t){a.onMouseUp_(t)})),google.maps.event.addDomListener(t,"scroll",i)],this.hotKeyDown_=!1,this.mouseDown_=!1,this.dragging_=!1,this.startPt_=null,this.endPt_=null,this.mapWidth_=null,this.mapHeight_=null,this.mousePosn_=null,this.mapPosn_=null,this.visualEnabled_&&(this.buttonDiv_=this.initControl_(this.visualPositionOffset_),null!==this.visualPositionIndex_&&(this.buttonDiv_.index=this.visualPositionIndex_),this.map_.controls[this.visualPosition_].push(this.buttonDiv_),this.controlIndex_=this.map_.controls[this.visualPosition_].length-1)},u.prototype.initControl_=function(t){var e,n,r=this;return(e=document.createElement("div")).className=this.visualClass_,e.style.position="relative",e.style.overflow="hidden",e.style.height=this.visualSize_.height+"px",e.style.width=this.visualSize_.width+"px",e.title=this.visualTips_.off,(n=document.createElement("img")).src=this.visualSprite_,n.style.position="absolute",n.style.left=-2*this.visualSize_.width+"px",n.style.top="0px",e.appendChild(n),e.onclick=function(t){r.hotKeyDown_=!r.hotKeyDown_,r.hotKeyDown_?(r.buttonDiv_.firstChild.style.left=-0*r.visualSize_.width+"px",r.buttonDiv_.title=r.visualTips_.on,r.activatedByControl_=!0,google.maps.event.trigger(r,"activate")):(r.buttonDiv_.firstChild.style.left=-2*r.visualSize_.width+"px",r.buttonDiv_.title=r.visualTips_.off,google.maps.event.trigger(r,"deactivate")),r.onMouseMove_(t)},e.onmouseover=function(){r.buttonDiv_.firstChild.style.left=-1*r.visualSize_.width+"px"},e.onmouseout=function(){r.hotKeyDown_?(r.buttonDiv_.firstChild.style.left=-0*r.visualSize_.width+"px",r.buttonDiv_.title=r.visualTips_.on):(r.buttonDiv_.firstChild.style.left=-2*r.visualSize_.width+"px",r.buttonDiv_.title=r.visualTips_.off)},e.ondragstart=function(){return!1},s(e.style,{cursor:"pointer",marginTop:t.height+"px",marginLeft:t.width+"px"}),e},u.prototype.isHotKeyDown_=function(e){var n;if(!(n=(e=e||t.event).shiftKey&&"shift"===this.key_||e.altKey&&"alt"===this.key_||e.ctrlKey&&"ctrl"===this.key_))switch(e.keyCode){case 16:"shift"===this.key_&&(n=!0);break;case 17:"ctrl"===this.key_&&(n=!0);break;case 18:"alt"===this.key_&&(n=!0)}return n},u.prototype.isMouseOnMap_=function(){var t=this.mousePosn_;if(t){var e=this.mapPosn_,n=this.map_.getDiv();return t.left>e.left&&t.left<e.left+n.offsetWidth&&t.top>e.top&&t.top<e.top+n.offsetHeight}return!1},u.prototype.setVeilVisibility_=function(){var t;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){var e=this.map_.getDiv();if(this.mapWidth_=e.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right),this.mapHeight_=e.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom),this.activatedByControl_){var n=parseInt(this.buttonDiv_.style.left,10)+this.visualPositionOffset_.width,r=parseInt(this.buttonDiv_.style.top,10)+this.visualPositionOffset_.height,i=this.visualSize_.width,o=this.visualSize_.height;for(this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=n+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=n+i+"px",this.veilDiv_[1].style.width=this.mapWidth_-(n+i)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=n+"px",this.veilDiv_[2].style.width=i+"px",this.veilDiv_[2].style.height=r+"px",this.veilDiv_[3].style.top=r+o+"px",this.veilDiv_[3].style.left=n+"px",this.veilDiv_[3].style.width=i+"px",this.veilDiv_[3].style.height=this.mapHeight_-(r+o)+"px",t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="block"}else{for(this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.width=this.mapWidth_+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",t=1;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.width="0px",this.veilDiv_[t].style.height="0px";for(t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="block"}}else for(t=0;t<this.veilDiv_.length;t++)this.veilDiv_[t].style.display="none"},u.prototype.onKeyDown_=function(t){this.map_&&!this.hotKeyDown_&&this.isHotKeyDown_(t)&&(this.mapPosn_=a(this.map_.getDiv()),this.hotKeyDown_=!0,this.activatedByControl_=!1,this.setVeilVisibility_(),google.maps.event.trigger(this,"activate"))},u.prototype.getMousePoint_=function(t){var e=o(t),n=new google.maps.Point;return n.x=e.left-this.mapPosn_.left-this.borderWidths_.left,n.y=e.top-this.mapPosn_.top-this.borderWidths_.top,n.x=Math.min(n.x,this.mapWidth_),n.y=Math.min(n.y,this.mapHeight_),n.x=Math.max(n.x,0),n.y=Math.max(n.y,0),n},u.prototype.onMouseDown_=function(t){if(this.map_&&this.hotKeyDown_){this.mapPosn_=a(this.map_.getDiv()),this.dragging_=!0,this.startPt_=this.endPt_=this.getMousePoint_(t),this.boxDiv_.style.width=this.boxDiv_.style.height="0px";var e=this.prjov_.getProjection().fromContainerPixelToLatLng(this.startPt_);google.maps.event.trigger(this,"dragstart",e)}},u.prototype.onMouseDownDocument_=function(t){this.mouseDown_=!0},u.prototype.onMouseMove_=function(t){if(this.mousePosn_=o(t),this.dragging_){this.endPt_=this.getMousePoint_(t);var e=Math.min(this.startPt_.x,this.endPt_.x),n=Math.min(this.startPt_.y,this.endPt_.y),r=Math.abs(this.startPt_.x-this.endPt_.x),i=Math.abs(this.startPt_.y-this.endPt_.y),s=Math.max(0,r-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)),l=Math.max(0,i-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom));this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=e+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=e+r+"px",this.veilDiv_[1].style.width=this.mapWidth_-(e+r)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=e+"px",this.veilDiv_[2].style.width=r+"px",this.veilDiv_[2].style.height=n+"px",this.veilDiv_[3].style.top=n+i+"px",this.veilDiv_[3].style.left=e+"px",this.veilDiv_[3].style.width=r+"px",this.veilDiv_[3].style.height=this.mapHeight_-(n+i)+"px",this.boxDiv_.style.top=n+"px",this.boxDiv_.style.left=e+"px",this.boxDiv_.style.width=s+"px",this.boxDiv_.style.height=l+"px",this.boxDiv_.style.display="block",google.maps.event.trigger(this,"drag",new google.maps.Point(e,n+i),new google.maps.Point(e+r,n),this.prjov_.getProjection())}else this.mouseDown_||(this.mapPosn_=a(this.map_.getDiv()),this.setVeilVisibility_())},u.prototype.onMouseUp_=function(t){var e,n=this;if(this.mouseDown_=!1,this.dragging_){if(this.getMousePoint_(t).x===this.startPt_.x&&this.getMousePoint_(t).y===this.startPt_.y)return void this.onKeyUp_(t);var r=Math.min(this.startPt_.x,this.endPt_.x),i=Math.min(this.startPt_.y,this.endPt_.y),o=Math.abs(this.startPt_.x-this.endPt_.x),a=Math.abs(this.startPt_.y-this.endPt_.y);r+=this.borderWidths_.left,i+=this.borderWidths_.top;var s=this.prjov_.getProjection(),l=s.fromContainerPixelToLatLng(new google.maps.Point(r,i+a)),u=s.fromContainerPixelToLatLng(new google.maps.Point(r+o,i)),c=new google.maps.LatLngBounds(l,u);if(this.noZoom_)this.boxDiv_.style.display="none";else{e=this.map_.getZoom(),this.map_.fitBounds(c),this.map_.getZoom()<e&&this.map_.setZoom(e);var f=s.fromLatLngToContainerPixel(l),h=s.fromLatLngToContainerPixel(u);f.x-=this.borderWidths_.left,f.y-=this.borderWidths_.top,h.x-=this.borderWidths_.left,h.y-=this.borderWidths_.top,this.boxDiv_.style.left=f.x+"px",this.boxDiv_.style.top=h.y+"px",this.boxDiv_.style.width=Math.abs(h.x-f.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)+"px",this.boxDiv_.style.height=Math.abs(h.y-f.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom)+"px",setTimeout((function(){n.boxDiv_.style.display="none"}),1e3)}this.dragging_=!1,this.onMouseMove_(t),google.maps.event.trigger(this,"dragend",c),this.isHotKeyDown_(t)||this.onKeyUp_(t)}},u.prototype.onKeyUp_=function(t){var e,n,r,i,o,a,s,l,u=null;if(this.map_&&this.hotKeyDown_){for(this.hotKeyDown_=!1,this.dragging_&&(this.boxDiv_.style.display="none",this.dragging_=!1,n=Math.min(this.startPt_.x,this.endPt_.x),r=Math.min(this.startPt_.y,this.endPt_.y),i=Math.abs(this.startPt_.x-this.endPt_.x),o=Math.abs(this.startPt_.y-this.endPt_.y),s=(a=this.prjov_.getProjection()).fromContainerPixelToLatLng(new google.maps.Point(n,r+o)),l=a.fromContainerPixelToLatLng(new google.maps.Point(n+i,r)),u=new google.maps.LatLngBounds(s,l)),e=0;e<this.veilDiv_.length;e++)this.veilDiv_[e].style.display="none";this.visualEnabled_&&(this.buttonDiv_.firstChild.style.left=-2*this.visualSize_.width+"px",this.buttonDiv_.title=this.visualTips_.off,this.buttonDiv_.style.display=""),google.maps.event.trigger(this,"deactivate",u)}},google.maps.Map.prototype.enableKeyDragZoom=function(t){this.dragZoom_=new u(this,t)},google.maps.Map.prototype.disableKeyDragZoom=function(){var t,e=this.dragZoom_;if(e){for(t=0;t<e.listeners_.length;++t)google.maps.event.removeListener(e.listeners_[t]);for(this.getDiv().removeChild(e.boxDiv_),t=0;t<e.veilDiv_.length;t++)this.getDiv().removeChild(e.veilDiv_[t]);e.visualEnabled_&&this.controls[e.visualPosition_].removeAt(e.controlIndex_),e.prjov_.setMap(null),this.dragZoom_=null}},google.maps.Map.prototype.keyDragZoomEnabled=function(){return null!==this.dragZoom_},google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}}(),n.prototype.onAdd=function(){var t,e,n=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",(function(){e=t})),google.maps.event.addDomListener(this.div_,"mousedown",(function(){t=!0,e=!1})),google.maps.event.addDomListener(this.div_,"click",(function(r){if(t=!1,!e){var i,o,a=n.cluster_.getMarkerClusterer();google.maps.event.trigger(a,"click",n.cluster_),google.maps.event.trigger(a,"clusterclick",n.cluster_),a.getZoomOnClick()&&(o=a.getMaxZoom(),i=n.cluster_.getBounds(),a.getMap().fitBounds(i),setTimeout((function(){a.getMap().fitBounds(i),null!==o&&a.getMap().getZoom()>o&&a.getMap().setZoom(o+1)}),100)),r.cancelBubble=!0,r.stopPropagation&&r.stopPropagation()}})),google.maps.event.addDomListener(this.div_,"mouseover",(function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseover",n.cluster_)})),google.maps.event.addDomListener(this.div_,"mouseout",(function(){var t=n.cluster_.getMarkerClusterer();google.maps.event.trigger(t,"mouseout",n.cluster_)}))},n.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},n.prototype.draw=function(){if(this.visible_){var t=this.getPosFromLatLng_(this.center_);this.div_.style.top=t.y+"px",this.div_.style.left=t.x+"px"}},n.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},n.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),n=parseInt(e[0].trim(),10),r=parseInt(e[1].trim(),10),i=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(i),t="<img src='"+this.url_+"' style='position: absolute; top: "+r+"px; left: "+n+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(t+="clip: rect("+-1*r+"px, "+(-1*n+this.width_)+"px, "+(-1*r+this.height_)+"px, "+-1*n+"px);"),t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",void 0===this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},n.prototype.useStyle=function(t){this.sums_=t;var e=Math.max(0,t.index-1);e=Math.min(this.styles_.length-1,e);var n=this.styles_[e];this.url_=n.url,this.height_=n.height,this.width_=n.width,this.anchorText_=n.anchorText||[0,0],this.anchorIcon_=n.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=n.textColor||"black",this.textSize_=n.textSize||11,this.textDecoration_=n.textDecoration||"none",this.fontWeight_=n.fontWeight||"bold",this.fontStyle_=n.fontStyle||"normal",this.fontFamily_=n.fontFamily||"Arial,sans-serif",this.backgroundPosition_=n.backgroundPosition||"0 0"},n.prototype.setCenter=function(t){this.center_=t},n.prototype.createCss=function(t){var e=[];return e.push("cursor: pointer;"),e.push("position: absolute; top: "+t.y+"px; left: "+t.x+"px;"),e.push("width: "+this.width_+"px; height: "+this.height_+"px;"),e.join("")},n.prototype.getPosFromLatLng_=function(t){var e=this.getProjection().fromLatLngToDivPixel(t);return e.x-=this.anchorIcon_[1],e.y-=this.anchorIcon_[0],e.x=parseInt(e.x,10),e.y=parseInt(e.y,10),e},r.prototype.getSize=function(){return this.markers_.length},r.prototype.getMarkers=function(){return this.markers_},r.prototype.getCenter=function(){return this.center_},r.prototype.getMap=function(){return this.map_},r.prototype.getMarkerClusterer=function(){return this.markerClusterer_},r.prototype.getBounds=function(){var t,e=new google.maps.LatLngBounds(this.center_,this.center_),n=this.getMarkers();for(t=0;t<n.length;t++)e.extend(n[t].getPosition());return e},r.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},r.prototype.addMarker=function(t){var e,n,r;if(this.isMarkerAlreadyAdded_(t))return!1;if(this.center_){if(this.averageCenter_){var i=this.markers_.length+1,o=(this.center_.lat()*(i-1)+t.getPosition().lat())/i,a=(this.center_.lng()*(i-1)+t.getPosition().lng())/i;this.center_=new google.maps.LatLng(o,a),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();if(t.isAdded=!0,this.markers_.push(t),n=this.markers_.length,null!==(r=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>r)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n<this.minClusterSize_)t.getMap()!==this.map_&&t.setMap(this.map_);else if(n===this.minClusterSize_)for(e=0;e<n;e++)this.markers_[e].setMap(null);else t.setMap(null);return this.updateIcon_(),!0},r.prototype.isMarkerInClusterBounds=function(t){return this.bounds_.contains(t.getPosition())},r.prototype.calculateBounds_=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(t)},r.prototype.updateIcon_=function(){var t=this.markers_.length,e=this.markerClusterer_.getMaxZoom();if(null!==e&&this.map_.getZoom()>e)this.clusterIcon_.hide();else if(t<this.minClusterSize_)this.clusterIcon_.hide();else{var n=this.markerClusterer_.getStyles().length,r=this.markerClusterer_.getCalculator()(this.markers_,n);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(r),this.clusterIcon_.show()}},r.prototype.isMarkerAlreadyAdded_=function(t){var e;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(t);for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e])return!0;return!1},i.prototype.onAdd=function(){var t=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",(function(){t.resetViewport_(!1),this.getZoom()!==(this.get("minZoom")||0)&&this.getZoom()!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")})),google.maps.event.addListener(this.getMap(),"idle",(function(){t.redraw_()}))]},i.prototype.onRemove=function(){var t;for(t=0;t<this.markers_.length;t++)this.markers_[t].getMap()!==this.activeMap_&&this.markers_[t].setMap(this.activeMap_);for(t=0;t<this.clusters_.length;t++)this.clusters_[t].remove();for(this.clusters_=[],t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},i.prototype.draw=function(){},i.prototype.setupStyles_=function(){var t,e;if(!(this.styles_.length>0))for(t=0;t<this.imageSizes_.length;t++)e=this.imageSizes_[t],this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},i.prototype.fitMapToMarkers=function(){var t,e=this.getMarkers(),n=new google.maps.LatLngBounds;for(t=0;t<e.length;t++)n.extend(e[t].getPosition());this.getMap().fitBounds(n)},i.prototype.getGridSize=function(){return this.gridSize_},i.prototype.setGridSize=function(t){this.gridSize_=t},i.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},i.prototype.setMinimumClusterSize=function(t){this.minClusterSize_=t},i.prototype.getMaxZoom=function(){return this.maxZoom_},i.prototype.setMaxZoom=function(t){this.maxZoom_=t},i.prototype.getStyles=function(){return this.styles_},i.prototype.setStyles=function(t){this.styles_=t},i.prototype.getTitle=function(){return this.title_},i.prototype.setTitle=function(t){this.title_=t},i.prototype.getZoomOnClick=function(){return this.zoomOnClick_},i.prototype.setZoomOnClick=function(t){this.zoomOnClick_=t},i.prototype.getAverageCenter=function(){return this.averageCenter_},i.prototype.setAverageCenter=function(t){this.averageCenter_=t},i.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},i.prototype.setIgnoreHidden=function(t){this.ignoreHidden_=t},i.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},i.prototype.setEnableRetinaIcons=function(t){this.enableRetinaIcons_=t},i.prototype.getImageExtension=function(){return this.imageExtension_},i.prototype.setImageExtension=function(t){this.imageExtension_=t},i.prototype.getImagePath=function(){return this.imagePath_},i.prototype.setImagePath=function(t){this.imagePath_=t},i.prototype.getImageSizes=function(){return this.imageSizes_},i.prototype.setImageSizes=function(t){this.imageSizes_=t},i.prototype.getCalculator=function(){return this.calculator_},i.prototype.setCalculator=function(t){this.calculator_=t},i.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},i.prototype.setBatchSizeIE=function(t){this.batchSizeIE_=t},i.prototype.getClusterClass=function(){return this.clusterClass_},i.prototype.setClusterClass=function(t){this.clusterClass_=t},i.prototype.getMarkers=function(){return this.markers_},i.prototype.getTotalMarkers=function(){return this.markers_.length},i.prototype.getClusters=function(){return this.clusters_},i.prototype.getTotalClusters=function(){return this.clusters_.length},i.prototype.addMarker=function(t,e){this.pushMarkerTo_(t),e||this.redraw_()},i.prototype.addMarkers=function(t,e){var n;for(n in t)t.hasOwnProperty(n)&&this.pushMarkerTo_(t[n]);e||this.redraw_()},i.prototype.pushMarkerTo_=function(t){if(t.getDraggable()){var e=this;google.maps.event.addListener(t,"dragend",(function(){e.ready_&&(this.isAdded=!1,e.repaint())}))}t.isAdded=!1,this.markers_.push(t)},i.prototype.removeMarker=function(t,e){var n=this.removeMarker_(t);return!e&&n&&this.repaint(),n},i.prototype.removeMarkers=function(t,e){var n,r,i=!1;for(n=0;n<t.length;n++)r=this.removeMarker_(t[n]),i=i||r;return!e&&i&&this.repaint(),i},i.prototype.removeMarker_=function(t){var e,n=-1;if(this.markers_.indexOf)n=this.markers_.indexOf(t);else for(e=0;e<this.markers_.length;e++)if(t===this.markers_[e]){n=e;break}return-1!==n&&(t.setMap(null),this.markers_.splice(n,1),!0)},i.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},i.prototype.repaint=function(){var t=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout((function(){var e;for(e=0;e<t.length;e++)t[e].remove()}),0)},i.prototype.getExtendedBounds=function(t){var e=this.getProjection(),n=new google.maps.LatLng(t.getNorthEast().lat(),t.getNorthEast().lng()),r=new google.maps.LatLng(t.getSouthWest().lat(),t.getSouthWest().lng()),i=e.fromLatLngToDivPixel(n);i.x+=this.gridSize_,i.y-=this.gridSize_;var o=e.fromLatLngToDivPixel(r);o.x-=this.gridSize_,o.y+=this.gridSize_;var a=e.fromDivPixelToLatLng(i),s=e.fromDivPixelToLatLng(o);return t.extend(a),t.extend(s),t},i.prototype.redraw_=function(){this.createClusters_(0)},i.prototype.resetViewport_=function(t){var e,n;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();for(this.clusters_=[],e=0;e<this.markers_.length;e++)(n=this.markers_[e]).isAdded=!1,t&&n.setMap(null)},i.prototype.distanceBetweenPoints_=function(t,e){var n=(e.lat()-t.lat())*Math.PI/180,r=(e.lng()-t.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(t.lat()*Math.PI/180)*Math.cos(e.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},i.prototype.isMarkerInBounds_=function(t,e){return e.contains(t.getPosition())},i.prototype.addToClosestCluster_=function(t){var e,n,i,o,a=4e4,s=null;for(e=0;e<this.clusters_.length;e++)(o=(i=this.clusters_[e]).getCenter())&&(n=this.distanceBetweenPoints_(o,t.getPosition()))<a&&(a=n,s=i);s&&s.isMarkerInClusterBounds(t)?s.addMarker(t):((i=new r(this)).addMarker(t),this.clusters_.push(i))},i.prototype.createClusters_=function(t){var e,n,r,i=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),void 0!==this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),r=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var o=this.getExtendedBounds(r),a=Math.min(t+this.batchSize_,this.markers_.length);for(e=t;e<a;e++)!(n=this.markers_[e]).isAdded&&this.isMarkerInBounds_(n,o)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);a<this.markers_.length?this.timerRefStatic=setTimeout((function(){i.createClusters_(a)}),0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},i.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)this.prototype[e]=t.prototype[e];return this}.apply(t,[e])},i.CALCULATOR=function(t,e){for(var n=0,r=t.length.toString(),i=r;0!==i;)i=parseInt(i/10,10),n++;return{text:r,index:n=Math.min(n,e),title:""}},i.BATCH_SIZE=2e3,i.BATCH_SIZE_IE=500,i.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",i.IMAGE_EXTENSION="png",i.IMAGE_SIZES=[53,56,66,78,90],o(a,google.maps.OverlayView),a.getSharedCross=function(t){var e;return void 0===a.getSharedCross.crossDiv&&((e=document.createElement("img")).style.cssText="position: absolute; z-index: 1000002; display: none;",e.style.marginLeft="-8px",e.style.marginTop="-9px",e.src=t,a.getSharedCross.crossDiv=e),a.getSharedCross.crossDiv},a.prototype.onAdd=function(){var t,e,n,r,i,o,s,l=this,u=!1,c=!1,f="url("+this.handCursorURL_+")",h=function(t){t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()},d=function(){l.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),void 0===a.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),a.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",(function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(l.marker_,"mouseover",t))})),google.maps.event.addDomListener(this.eventDiv_,"mouseout",(function(t){!l.marker_.getDraggable()&&!l.marker_.getClickable()||c||(this.style.cursor=l.marker_.getCursor(),google.maps.event.trigger(l.marker_,"mouseout",t))})),google.maps.event.addDomListener(this.eventDiv_,"mousedown",(function(t){c=!1,l.marker_.getDraggable()&&(u=!0,this.style.cursor=f),(l.marker_.getDraggable()||l.marker_.getClickable())&&(google.maps.event.trigger(l.marker_,"mousedown",t),h(t))})),google.maps.event.addDomListener(document,"mouseup",(function(e){var n;if(u&&(u=!1,l.eventDiv_.style.cursor="pointer",google.maps.event.trigger(l.marker_,"mouseup",e)),c){if(i){(n=l.getProjection().fromLatLngToDivPixel(l.marker_.getPosition())).y+=20,l.marker_.setPosition(l.getProjection().fromDivPixelToLatLng(n));try{l.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(d,1406)}catch(t){}}l.crossDiv_.style.display="none",l.marker_.setZIndex(t),r=!0,c=!1,e.latLng=l.marker_.getPosition(),google.maps.event.trigger(l.marker_,"dragend",e)}})),google.maps.event.addListener(l.marker_.getMap(),"mousemove",(function(r){var a;u&&(c?(r.latLng=new google.maps.LatLng(r.latLng.lat()-e,r.latLng.lng()-n),a=l.getProjection().fromLatLngToDivPixel(r.latLng),i&&(l.crossDiv_.style.left=a.x+"px",l.crossDiv_.style.top=a.y+"px",l.crossDiv_.style.display="",a.y-=20),l.marker_.setPosition(l.getProjection().fromDivPixelToLatLng(a)),i&&(l.eventDiv_.style.top=a.y+20+"px"),google.maps.event.trigger(l.marker_,"drag",r)):(e=r.latLng.lat()-l.marker_.getPosition().lat(),n=r.latLng.lng()-l.marker_.getPosition().lng(),t=l.marker_.getZIndex(),o=l.marker_.getPosition(),s=l.marker_.getMap().getCenter(),i=l.marker_.get("raiseOnDrag"),c=!0,l.marker_.setZIndex(1e6),r.latLng=l.marker_.getPosition(),google.maps.event.trigger(l.marker_,"dragstart",r)))})),google.maps.event.addDomListener(document,"keydown",(function(t){c&&27===t.keyCode&&(i=!1,l.marker_.setPosition(o),l.marker_.getMap().setCenter(s),google.maps.event.trigger(document,"mouseup",t))})),google.maps.event.addDomListener(this.eventDiv_,"click",(function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(r?r=!1:(google.maps.event.trigger(l.marker_,"click",t),h(t)))})),google.maps.event.addDomListener(this.eventDiv_,"dblclick",(function(t){(l.marker_.getDraggable()||l.marker_.getClickable())&&(google.maps.event.trigger(l.marker_,"dblclick",t),h(t))})),google.maps.event.addListener(this.marker_,"dragstart",(function(t){c||(i=this.get("raiseOnDrag"))})),google.maps.event.addListener(this.marker_,"drag",(function(t){c||i&&(l.setPosition(20),l.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))})),google.maps.event.addListener(this.marker_,"dragend",(function(t){c||i&&l.setPosition(0)})),google.maps.event.addListener(this.marker_,"position_changed",(function(){l.setPosition()})),google.maps.event.addListener(this.marker_,"zindex_changed",(function(){l.setZIndex()})),google.maps.event.addListener(this.marker_,"visible_changed",(function(){l.setVisible()})),google.maps.event.addListener(this.marker_,"labelvisible_changed",(function(){l.setVisible()})),google.maps.event.addListener(this.marker_,"title_changed",(function(){l.setTitle()})),google.maps.event.addListener(this.marker_,"labelcontent_changed",(function(){l.setContent()})),google.maps.event.addListener(this.marker_,"labelanchor_changed",(function(){l.setAnchor()})),google.maps.event.addListener(this.marker_,"labelclass_changed",(function(){l.setStyles()})),google.maps.event.addListener(this.marker_,"labelstyle_changed",(function(){l.setStyles()}))]},a.prototype.onRemove=function(){var t;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),t=0;t<this.listeners_.length;t++)google.maps.event.removeListener(this.listeners_[t])},a.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},a.prototype.setContent=function(){var t=this.marker_.get("labelContent");void 0===t.nodeType?(this.labelDiv_.innerHTML=t,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(t),t=t.cloneNode(!0),this.eventDiv_.innerHTML="",this.eventDiv_.appendChild(t))},a.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},a.prototype.setStyles=function(){var t,e;for(t in this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",e=this.marker_.get("labelStyle"))e.hasOwnProperty(t)&&(this.labelDiv_.style[t]=e[t],this.eventDiv_.style[t]=e[t]);this.setMandatoryStyles()},a.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden",void 0!==this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},a.prototype.setAnchor=function(){var t=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-t.x+"px",this.labelDiv_.style.marginTop=-t.y+"px",this.eventDiv_.style.marginLeft=-t.x+"px",this.eventDiv_.style.marginTop=-t.y+"px"},a.prototype.setPosition=function(t){var e=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());void 0===t&&(t=0),this.labelDiv_.style.left=Math.round(e.x)+"px",this.labelDiv_.style.top=Math.round(e.y-t)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},a.prototype.setZIndex=function(){var t=this.marker_.get("labelInBackground")?-1:1;void 0===this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+t,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},a.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},o(s,google.maps.Marker),s.prototype.setMap=function(t){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(t)},l.prototype=new google.maps.OverlayView,t.RichMarker=l,l.prototype.getVisible=function(){return this.get("visible")},l.prototype.getVisible=l.prototype.getVisible,l.prototype.setVisible=function(t){this.set("visible",t)},l.prototype.setVisible=l.prototype.setVisible,l.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())},l.prototype.visible_changed=l.prototype.visible_changed,l.prototype.setFlat=function(t){this.set("flat",!!t)},l.prototype.setFlat=l.prototype.setFlat,l.prototype.getFlat=function(){return this.get("flat")},l.prototype.getFlat=l.prototype.getFlat,l.prototype.getWidth=function(){return this.get("width")},l.prototype.getWidth=l.prototype.getWidth,l.prototype.getHeight=function(){return this.get("height")},l.prototype.getHeight=l.prototype.getHeight,l.prototype.setShadow=function(t){this.set("shadow",t),this.flat_changed()},l.prototype.setShadow=l.prototype.setShadow,l.prototype.getShadow=function(){return this.get("shadow")},l.prototype.getShadow=l.prototype.getShadow,l.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())},l.prototype.flat_changed=l.prototype.flat_changed,l.prototype.setZIndex=function(t){this.set("zIndex",t)},l.prototype.setZIndex=l.prototype.setZIndex,l.prototype.getZIndex=function(){return this.get("zIndex")},l.prototype.getZIndex=l.prototype.getZIndex,l.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},l.prototype.zIndex_changed=l.prototype.zIndex_changed,l.prototype.getDraggable=function(){return this.get("draggable")},l.prototype.getDraggable=l.prototype.getDraggable,l.prototype.setDraggable=function(t){this.set("draggable",!!t)},l.prototype.setDraggable=l.prototype.setDraggable,l.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},l.prototype.draggable_changed=l.prototype.draggable_changed,l.prototype.getPosition=function(){return this.get("position")},l.prototype.getPosition=l.prototype.getPosition,l.prototype.setPosition=function(t){this.set("position",t)},l.prototype.setPosition=l.prototype.setPosition,l.prototype.position_changed=function(){this.draw()},l.prototype.position_changed=l.prototype.position_changed,l.prototype.getAnchor=function(){return this.get("anchor")},l.prototype.getAnchor=l.prototype.getAnchor,l.prototype.setAnchor=function(t){this.set("anchor",t)},l.prototype.setAnchor=l.prototype.setAnchor,l.prototype.anchor_changed=function(){this.draw()},l.prototype.anchor_changed=l.prototype.anchor_changed,l.prototype.htmlToDocumentFragment_=function(t){var e=document.createElement("DIV");if(e.innerHTML=t,1==e.childNodes.length)return e.removeChild(e.firstChild);for(var n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.firstChild);return n},l.prototype.removeChildren_=function(t){if(t)for(var e;e=t.firstChild;)t.removeChild(e)},l.prototype.setContent=function(t){this.set("content",t)},l.prototype.setContent=l.prototype.setContent,l.prototype.getContent=function(){return this.get("content")},l.prototype.getContent=l.prototype.getContent,l.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var t=this.getContent();if(t){"string"==typeof t&&(t=t.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),t=this.htmlToDocumentFragment_(t)),this.markerContent_.appendChild(t);for(var e,n=this,r=this.markerContent_.getElementsByTagName("IMG"),i=0;e=r[i];i++)google.maps.event.addDomListener(e,"mousedown",(function(t){n.getDraggable()&&(t.preventDefault&&t.preventDefault(),t.returnValue=!1)})),google.maps.event.addDomListener(e,"load",(function(){n.draw()}));google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}},l.prototype.content_changed=l.prototype.content_changed,l.prototype.setCursor_=function(t){if(this.ready_){var e="";-1!==navigator.userAgent.indexOf("Gecko/")?("dragging"==t&&(e="-moz-grabbing"),"dragready"==t&&(e="-moz-grab"),"draggable"==t&&(e="pointer")):("dragging"!=t&&"dragready"!=t||(e="move"),"draggable"==t&&(e="pointer")),this.markerWrapper_.style.cursor!=e&&(this.markerWrapper_.style.cursor=e)}},l.prototype.startDrag=function(t){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var e=this.getMap();this.mapDraggable_=e.get("draggable"),e.set("draggable",!1),this.mouseX_=t.clientX,this.mouseY_=t.clientY,this.setCursor_("dragready"),this.markerWrapper_.style.MozUserSelect="none",this.markerWrapper_.style.KhtmlUserSelect="none",this.markerWrapper_.style.WebkitUserSelect="none",this.markerWrapper_.unselectable="on",this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,"dragstart")}},l.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())},l.prototype.drag=function(t){if(this.getDraggable()&&this.dragging_){var e=this.mouseX_-t.clientX,n=this.mouseY_-t.clientY;this.mouseX_=t.clientX,this.mouseY_=t.clientY;var r=parseInt(this.markerWrapper_.style.left,10)-e,i=parseInt(this.markerWrapper_.style.top,10)-n;this.markerWrapper_.style.left=r+"px",this.markerWrapper_.style.top=i+"px";var o=this.getOffset_(),a=new google.maps.Point(r-o.width,i-o.height),s=this.getProjection();this.setPosition(s.fromDivPixelToLatLng(a)),this.setCursor_("dragging"),google.maps.event.trigger(this,"drag")}else this.stopDrag()},l.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_("")},l.prototype.addDragging_=function(t){if(t){var e=this;this.draggableListener_=google.maps.event.addDomListener(t,"mousedown",(function(t){e.startDrag(t)})),this.setCursor_("draggable")}},l.prototype.addDraggingListeners_=function(){var e=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",(function(t){e.drag(t)}),!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",(function(){e.stopDrag(),e.markerWrapper_.releaseCapture()}),!0)]):this.draggingListeners_=[google.maps.event.addDomListener(t,"mousemove",(function(t){e.drag(t)}),!0),google.maps.event.addDomListener(t,"mouseup",(function(){e.stopDrag()}),!0)]},l.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var t,e=0;t=this.draggingListeners_[e];e++)google.maps.event.removeListener(t);this.draggingListeners_.length=0}},l.prototype.getOffset_=function(){var t=this.getAnchor();if("object"==typeof t)return t;var e=new google.maps.Size(0,0);if(!this.markerContent_)return e;var n=this.markerContent_.offsetWidth,r=this.markerContent_.offsetHeight;switch(t){case u.TOP_LEFT:break;case u.TOP:e.width=-n/2;break;case u.TOP_RIGHT:e.width=-n;break;case u.LEFT:e.height=-r/2;break;case u.MIDDLE:e.width=-n/2,e.height=-r/2;break;case u.RIGHT:e.width=-n,e.height=-r/2;break;case u.BOTTOM_LEFT:e.height=-r;break;case u.BOTTOM:e.width=-n/2,e.height=-r;break;case u.BOTTOM_RIGHT:e.width=-n,e.height=-r}return e},l.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute"),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?"":"none",!this.markerContent_){this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_);var t=this;google.maps.event.addDomListener(this.markerContent_,"click",(function(e){google.maps.event.trigger(t,"click")})),google.maps.event.addDomListener(this.markerContent_,"mouseover",(function(e){google.maps.event.trigger(t,"mouseover")})),google.maps.event.addDomListener(this.markerContent_,"mouseout",(function(e){google.maps.event.trigger(t,"mouseout")}))}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,"ready")},l.prototype.onAdd=l.prototype.onAdd,l.prototype.draw=function(){if(this.ready_&&!this.dragging_){var t=this.getProjection();if(t){var e=this.get("position"),n=t.fromLatLngToDivPixel(e),r=this.getOffset_();this.markerWrapper_.style.top=n.y+r.height+"px",this.markerWrapper_.style.left=n.x+r.width+"px";var i=this.markerContent_.offsetHeight,o=this.markerContent_.offsetWidth;o!=this.get("width")&&this.set("width",o),i!=this.get("height")&&this.set("height",i)}}},l.prototype.draw=l.prototype.draw,l.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},l.prototype.onRemove=l.prototype.onRemove;var u={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};t.RichMarkerPosition=u,t.InfoBox=e,t.Cluster=r,t.ClusterIcon=n,t.MarkerClusterer=i,t.MarkerLabel_=a,t.MarkerWithLabel=s,t.RichMarker=l}()}))}})),function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=t,n.c=e,n.p="",n(0)}([function(t,n,r){e.module("uiGmapgoogle-maps.wrapped").service("uiGmapDataStructures",(function(){return{Graph:r(1).Graph,Queue:r(1).Queue}}))},function(t,e,n){(function(){t.exports={Graph:n(2),Heap:n(3),LinkedList:n(4),Map:n(5),Queue:n(6),RedBlackTree:n(7),Trie:n(8)}}).call(this)},function(t,e){(function(){var e,n={}.hasOwnProperty;e=function(){function t(){this._nodes={},this.nodeSize=0,this.edgeSize=0}return t.prototype.addNode=function(t){if(!this._nodes[t])return this.nodeSize++,this._nodes[t]={_outEdges:{},_inEdges:{}}},t.prototype.getNode=function(t){return this._nodes[t]},t.prototype.removeNode=function(t){var e,r,i,o,a;if(r=this._nodes[t]){for(i in o=r._outEdges)n.call(o,i)&&this.removeEdge(t,i);for(e in a=r._inEdges)n.call(a,e)&&this.removeEdge(e,t);return this.nodeSize--,delete this._nodes[t],r}},t.prototype.addEdge=function(t,e,n){var r,i,o;if(null==n&&(n=1),!this.getEdge(t,e)&&(i=this._nodes[t],o=this._nodes[e],i&&o))return r={weight:n},i._outEdges[e]=r,o._inEdges[t]=r,this.edgeSize++,r},t.prototype.getEdge=function(t,e){var n,r;if(n=this._nodes[t],r=this._nodes[e],n&&r)return n._outEdges[e]},t.prototype.removeEdge=function(t,e){var n,r,i;if(r=this._nodes[t],i=this._nodes[e],n=this.getEdge(t,e))return delete r._outEdges[e],delete i._inEdges[t],this.edgeSize--,n},t.prototype.getInEdgesOf=function(t){var e,r,i,o;for(e in r=[],o=null!=(i=this._nodes[t])?i._inEdges:void 0)n.call(o,e)&&r.push(this.getEdge(e,t));return r},t.prototype.getOutEdgesOf=function(t){var e,r,i,o;for(i in r=[],o=null!=(e=this._nodes[t])?e._outEdges:void 0)n.call(o,i)&&r.push(this.getEdge(t,i));return r},t.prototype.getAllEdgesOf=function(t){var e,n,r,i,o,a,s;if(n=this.getInEdgesOf(t),r=this.getOutEdgesOf(t),0===n.length)return r;for(i=this.getEdge(t,t),e=o=0,a=n.length;0<=a?o<a:o>a;e=0<=a?++o:--o)if(n[e]===i){s=[n[n.length-1],n[e]],n[e]=s[0],n[n.length-1]=s[1],n.pop();break}return n.concat(r)},t.prototype.forEachNode=function(t){var e,r;for(e in r=this._nodes)n.call(r,e)&&t(r[e],e)},t.prototype.forEachEdge=function(t){var e,r,i,o;for(e in i=this._nodes)if(n.call(i,e))for(r in o=i[e]._outEdges)n.call(o,r)&&t(o[r])},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,n,r,i;e=function(){function t(t){var e,n,r,i,o,a;for(null==t&&(t=[]),this._data=[void 0],r=0,o=t.length;r<o;r++)null!=(n=t[r])&&this._data.push(n);if(this._data.length>1)for(e=i=2,a=this._data.length;2<=a?i<a:i>a;e=2<=a?++i:--i)this._upHeap(e);this.size=this._data.length-1}return t.prototype.add=function(t){if(null!=t)return this._data.push(t),this._upHeap(this._data.length-1),this.size++,t},t.prototype.removeMin=function(){var t;if(1!==this._data.length)return this.size--,2===this._data.length?this._data.pop():(t=this._data[1],this._data[1]=this._data.pop(),this._downHeap(),t)},t.prototype.peekMin=function(){return this._data[1]},t.prototype._upHeap=function(t){var e;for(this._data[t];this._data[t]<this._data[r(t)]&&t>1;)e=[this._data[r(t)],this._data[t]],this._data[t]=e[0],this._data[r(t)]=e[1],t=r(t)},t.prototype._downHeap=function(){var t,e,r;for(t=1;n(t<this._data.length)&&((e=n(t))<this._data.length-1&&this._data[i(t)]<this._data[e]&&(e=i(t)),this._data[e]<this._data[t]);)r=[this._data[t],this._data[e]],this._data[e]=r[0],this._data[t]=r[1],t=e},t}(),r=function(t){return t>>1},n=function(t){return t<<1},i=function(t){return 1+(t<<1)},t.exports=e}).call(this)},function(t,e){(function(){var e;e=function(){function t(t){var e,n,r;for(null==t&&(t=[]),this.head={prev:void 0,value:void 0,next:void 0},this.tail={prev:void 0,value:void 0,next:void 0},this.size=0,n=0,r=t.length;n<r;n++)e=t[n],this.add(e)}return t.prototype.at=function(t){var e,n,r,i;if(-this.size<=t&&t<this.size){if(2*(t=this._adjust(t))<this.size)for(e=this.head,n=1;n<=t;n+=1)e=e.next;else for(e=this.tail,r=1,i=this.size-t-1;r<=i;r+=1)e=e.prev;return e}},t.prototype.add=function(t,e){var n,r,i,o,a;if(null==e&&(e=this.size),-this.size<=e&&e<=this.size)return r={value:t},e=this._adjust(e),0===this.size?this.head=r:0===e?(i=[r,this.head,r],this.head.prev=i[0],r.next=i[1],this.head=i[2]):(o=[(n=this.at(e-1)).next,r,r,n],r.next=o[0],null!=(a=n.next)&&(a.prev=o[1]),n.next=o[2],r.prev=o[3]),e===this.size&&(this.tail=r),this.size++,t},t.prototype.removeAt=function(t){var e,n,r;if(null==t&&(t=this.size-1),-this.size<=t&&t<this.size&&0!==this.size)return t=this._adjust(t),1===this.size?(n=this.head.value,this.head.value=this.tail.value=void 0):0===t?(n=this.head.value,this.head=this.head.next,this.head.prev=void 0):(n=(e=this.at(t)).value,e.prev.next=e.next,null!=(r=e.next)&&(r.prev=e.prev),t===this.size-1&&(this.tail=e.prev)),this.size--,n},t.prototype.remove=function(t){var e;if(null!=t){for(e=this.head;e&&e.value!==t;)e=e.next;if(e)return 1===this.size?this.head.value=this.tail.value=void 0:e===this.head?(this.head=this.head.next,this.head.prev=void 0):e===this.tail?(this.tail=this.tail.prev,this.tail.next=void 0):(e.prev.next=e.next,e.next.prev=e.prev),this.size--,t}},t.prototype.indexOf=function(t,e){var n,r;if(null==e&&(e=0),null==this.head.value&&!this.head.next||e>=this.size)return-1;for(e=Math.max(0,this._adjust(e)),n=this.at(e),r=e;n&&n.value!==t;)n=n.next,r++;return r===this.size?-1:r},t.prototype._adjust=function(t){return t<0?this.size+t:t},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,n,r,i={}.hasOwnProperty;e=function(){function t(e){var n,r;for(n in this._content={},this._itemId=0,this._id=t._newMapId(),this.size=0,e)i.call(e,n)&&(r=e[n],this.set(n,r))}return t._mapIdTracker=0,t._newMapId=function(){return this._mapIdTracker++},t.prototype.hash=function(t,e){var i,o;return null==e&&(e=!1),o=n(t),r(t)?(i="_mapId_"+this._id,e&&!t[i]&&(t[i]=this._itemId++),i+"_"+t[i]):o+"_"+t},t.prototype.set=function(t,e){return this.has(t)||this.size++,this._content[this.hash(t,!0)]=[e,t],e},t.prototype.get=function(t){var e;return null!=(e=this._content[this.hash(t)])?e[0]:void 0},t.prototype.has=function(t){return this.hash(t)in this._content},t.prototype.delete=function(t){var e;return(e=this.hash(t))in this._content&&(delete this._content[e],r(t)&&delete t["_mapId_"+this._id],this.size--,!0)},t.prototype.forEach=function(t){var e,n,r;for(e in r=this._content)i.call(r,e)&&t((n=r[e])[1],n[0])},t}(),r=function(t){var e,r,i,o;for(e=["Boolean","Number","String","Undefined","Null","RegExp","Function"],r=n(t),i=0,o=e.length;i<o;i++)if(r===e[i])return!1;return!0},n=function(t){return Object.prototype.toString.apply(t).match(/\[object (.+)\]/)[1]},t.exports=e}).call(this)},function(t,e){(function(){var e;e=function(){function t(t){null==t&&(t=[]),this._content=t,this._dequeueIndex=0,this.size=this._content.length}return t.prototype.enqueue=function(t){return this.size++,this._content.push(t),t},t.prototype.dequeue=function(){var t;if(0!==this.size)return this.size--,t=this._content[this._dequeueIndex],this._dequeueIndex++,2*this._dequeueIndex>this._content.length&&(this._content=this._content.slice(this._dequeueIndex),this._dequeueIndex=0),t},t.prototype.peek=function(){return this._content[this._dequeueIndex]},t}(),t.exports=e}).call(this)},function(t,e){(function(){var e,n,r,i,o,a,s,l,u;e=function(){function t(t){var e,n,r;for(null==t&&(t=[]),this._root,this.size=0,n=0,r=t.length;n<r;n++)null!=(e=t[n])&&this.add(e)}return t.prototype.add=function(t){var e,o,a;if(null!=t){if(this.size++,o={value:t,_color:1},this._root){if(null!=n(this._root,(function(e){return t===e.value?0:t<e.value?e._left?1:(o._parent=e,e._left=o,3):e._right?2:(o._parent=e,e._right=o,3)})))return}else this._root=o;for(e=o;;){if(e===this._root){e._color=2;break}if(2===e._parent._color)break;if(1!==(null!=(a=u(e))?a._color:void 0)){!i(e)&&i(e._parent)?(this._rotateLeft(e._parent),e=e._left):i(e)&&!i(e._parent)&&(this._rotateRight(e._parent),e=e._right),e._parent._color=2,r(e)._color=1,i(e)?this._rotateRight(r(e)):this._rotateLeft(r(e));break}e._parent._color=2,u(e)._color=2,r(e)._color=1,e=r(e)}return t}},t.prototype.has=function(t){return!!n(this._root,(function(e){return t===e.value?0:t<e.value?1:2}))},t.prototype.peekMin=function(){var t;return null!=(t=s(this._root))?t.value:void 0},t.prototype.peekMax=function(){var t;return null!=(t=a(this._root))?t.value:void 0},t.prototype.remove=function(t){var e;if(e=n(this._root,(function(e){return t===e.value?0:t<e.value?1:2})))return this._removeNode(this._root,e),this.size--,t},t.prototype.removeMin=function(){var t,e;if(t=s(this._root))return e=t.value,this._removeNode(this._root,t),e},t.prototype.removeMax=function(){var t,e;if(t=a(this._root))return e=t.value,this._removeNode(this._root,t),e},t.prototype._removeNode=function(t,e){var n,r,a,u,c,f,h,d,p,g;if(e._left&&e._right&&(r=s(e._right),e.value=r.value,e=r),(r=e._left||e._right)||(r={color:2,_right:void 0,_left:void 0,isLeaf:!0}),r._parent=e._parent,null!=(a=e._parent)&&(a[o(e)]=r),2===e._color)if(1===r._color)r._color=2,r._parent||(this._root=r);else for(;;){if(!r._parent){r.isLeaf?this._root=void 0:this._root=r;break}if(1===(null!=(n=l(r))?n._color:void 0)&&(r._parent._color=1,n._color=2,i(r)?this._rotateLeft(r._parent):this._rotateRight(r._parent)),n=l(r),2!==r._parent._color||n&&(2!==n._color||n._left&&2!==n._left._color||n._right&&2!==n._right._color)){if(!(1!==r._parent._color||n&&(2!==n._color||n._left&&2!==(null!=(u=n._left)?u._color:void 0)||n._right&&2!==(null!=(c=n._right)?c._color:void 0)))){null!=n&&(n._color=1),r._parent._color=2;break}if(2===(null!=n?n._color:void 0)){!i(r)||n._right&&2!==n._right._color||1!==(null!=(f=n._left)?f._color:void 0)?i(r)||n._left&&2!==n._left._color||1!==(null!=(d=n._right)?d._color:void 0)||(n._color=1,null!=(p=n._right)&&(p._color=2),this._rotateLeft(n)):(n._color=1,null!=(h=n._left)&&(h._color=2),this._rotateRight(n));break}(n=l(r))._color=r._parent._color,i(r)?(n._right._color=2,this._rotateRight(r._parent)):(n._left._color=2,this._rotateLeft(r._parent))}else null!=n&&(n._color=1),r.isLeaf&&(r._parent[o(r)]=void 0),r=r._parent}if(r.isLeaf)return null!=(g=r._parent)?g[o(r)]=void 0:void 0},t.prototype._rotateLeft=function(t){var e,n;if(null!=(e=t._parent)&&(e[o(t)]=t._right),t._right._parent=t._parent,t._parent=t._right,t._right=t._right._left,t._parent._left=t,null!=(n=t._right)&&(n._parent=t),null==t._parent._parent)return this._root=t._parent},t.prototype._rotateRight=function(t){var e,n;if(null!=(e=t._parent)&&(e[o(t)]=t._left),t._left._parent=t._parent,t._parent=t._left,t._left=t._left._right,t._parent._right=t,null!=(n=t._left)&&(n._parent=t),null==t._parent._parent)return this._root=t._parent},t}(),i=function(t){return t===t._parent._left},o=function(t){return i(t)?"_left":"_right"},n=function(t,e){var n,r,i;for(r=t,i=void 0;r;){if(0===(n=e(r))){i=r;break}if(1===n)r=r._left;else if(2===n)r=r._right;else if(3===n)break}return i},s=function(t){return n(t,(function(t){return t._left?1:0}))},a=function(t){return n(t,(function(t){return t._right?2:0}))},r=function(t){var e;return null!=(e=t._parent)?e._parent:void 0},u=function(t){if(r(t))return i(t._parent)?r(t)._right:r(t)._left},l=function(t){return i(t)?t._parent._right:t._parent._left},t.exports=e}).call(this)},function(t,e,n){(function(){var e,r,i,o={}.hasOwnProperty;e=n(6),r=function(){function t(t){var e,n,r;for(null==t&&(t=[]),this._root={},this.size=0,n=0,r=t.length;n<r;n++)e=t[n],this.add(e)}return t.prototype.add=function(t){var e,n,r,i;if(null!=t){for(this.size++,e=this._root,r=0,i=t.length;r<i;r++)null==e[n=t[r]]&&(e[n]={}),e=e[n];return e.end=!0,t}},t.prototype.has=function(t){var e,n,r,i;if(null==t)return!1;for(e=this._root,r=0,i=t.length;r<i;r++){if(null==e[n=t[r]])return!1;e=e[n]}return!!e.end},t.prototype.longestPrefixOf=function(t){var e,n,r,i,o;if(null==t)return"";for(e=this._root,r="",i=0,o=t.length;i<o&&null!=e[n=t[i]];i++)r+=n,e=e[n];return r},t.prototype.wordsWithPrefix=function(t){var n,r,i,a,s,l,u,c,f,h;if(null==t)return[];for(null!=t||(t=""),u=[],r=this._root,c=0,f=t.length;c<f;c++)if(null==(r=r[i=t[c]]))return[];for((s=new e).enqueue([r,""]);0!==s.size;)for(i in a=(h=s.dequeue())[0],n=h[1],a.end&&u.push(t+n),a)o.call(a,i)&&(l=a[i],s.enqueue([l,n+i]));return u},t.prototype.remove=function(t){var e,n,r,o,a,s,l,u;if(null!=t){for(e=this._root,o=[],a=0,l=t.length;a<l;a++){if(null==e[r=t[a]])return;e=e[r],o.push([r,e])}if(e.end){if(this.size--,delete e.end,i(e,1))return t;for(n=s=u=o.length-1;(u<=1?s<=1:s>=1)&&!i(o[n][1],1);n=u<=1?++s:--s)delete o[n-1][1][o[n][0]];return i(this._root[o[0][0]],1)||delete this._root[o[0][0]],t}}},t}(),i=function(t,e){var n,r;if(0===e)return!0;for(n in r=0,t)if(o.call(t,n)&&++r>=e)return!0;return!1},t.exports=r}).call(this)}]),e.module("uiGmapgoogle-maps.wrapped").service("uiGmapMarkerSpiderfier",["uiGmapGoogleMapApi",function(e){var n=this;return function(){
/** @preserve OverlappingMarkerSpiderfier
https://github.com/jawj/OverlappingMarkerSpiderfier
Copyright (c) 2011 - 2013 George MacKerron
Released under the MIT licence: http://opensource.org/licenses/mit-license
Note: The Google Maps API v3 must be included *before* this code
 */
var e={}.hasOwnProperty,n=[].slice;this.OverlappingMarkerSpiderfier=function(){var r,i,o,a,s,l,u,c,f,h;for(o=0,l=(f=[d,c=d.prototype]).length;o<l;o++)f[o].VERSION="0.3.3";function d(t,n){var i,o,a,s,l,u;for(o in this.map=t,null==n&&(n={}),n)e.call(n,o)&&(u=n[o],this[o]=u);for(this.projHelper=new this.constructor.ProjHelper(this.map),this.initMarkerArrays(),this.listeners={},a=0,s=(l=["click","zoom_changed","maptypeid_changed"]).length;a<s;a++)i=l[a],r.addListener(this.map,i,function(t){return function(){return t.unspiderfy()}}(this))}return i=void 0,r=void 0,u=void 0,h=2*Math.PI,c.keepSpiderfied=!1,c.markersWontHide=!1,c.markersWontMove=!1,c.nearbyDistance=20,c.circleSpiralSwitchover=9,c.circleFootSeparation=23,c.circleStartAngle=h/12,c.spiralFootSeparation=26,c.spiralLengthStart=11,c.spiralLengthFactor=4,c.spiderfiedZIndex=1e3,c.usualLegZIndex=10,c.highlightedLegZIndex=20,c.event="click",c.minZoomLevel=!1,c.legWeight=1.5,c.legColors={usual:{},highlighted:{}},s=c.legColors.usual,a=c.legColors.highlighted,d.initializeGoogleMaps=function(t){return i=t.maps,r=i.event,u=i.MapTypeId,s[u.HYBRID]=s[u.SATELLITE]="#fff",a[u.HYBRID]=a[u.SATELLITE]="#f00",s[u.TERRAIN]=s[u.ROADMAP]="#444",a[u.TERRAIN]=a[u.ROADMAP]="#f00",this.ProjHelper=function(t){return this.setMap(t)},this.ProjHelper.prototype=new i.OverlayView,this.ProjHelper.prototype.draw=function(){}},c.initMarkerArrays=function(){return this.markers=[],this.markerListenerRefs=[]},c.addMarker=function(t){var e,n;return null!=t._oms?this:(t._oms=!0,e=[r.addListener(t,this.event,(n=this,function(e){return n.spiderListener(t,e)}))],this.markersWontHide||e.push(r.addListener(t,"visible_changed",function(e){return function(){return e.markerChangeListener(t,!1)}}(this))),this.markersWontMove||e.push(r.addListener(t,"position_changed",function(e){return function(){return e.markerChangeListener(t,!0)}}(this))),this.markerListenerRefs.push(e),this.markers.push(t),this)},c.markerChangeListener=function(t,e){if(null!=t._omsData&&(e||!t.getVisible())&&null==this.spiderfying&&null==this.unspiderfying)return this.unspiderfy(e?t:null)},c.getMarkers=function(){return this.markers.slice(0)},c.removeMarker=function(t){var e,n,i,o,a;if(null!=t._omsData&&this.unspiderfy(),(e=this.arrIndexOf(this.markers,t))<0)return this;for(n=0,i=(a=this.markerListenerRefs.splice(e,1)[0]).length;n<i;n++)o=a[n],r.removeListener(o);return delete t._oms,this.markers.splice(e,1),this},c.clearMarkers=function(){var t,e,n,i,o,a,s,l,u;for(this.unspiderfy(),t=e=0,n=(u=this.markers).length;e<n;t=++e){for(s=u[t],l=0,i=(a=this.markerListenerRefs[t]).length;l<i;l++)o=a[l],r.removeListener(o);delete s._oms}return this.initMarkerArrays(),this},c.addListener=function(t,e){var n;return(null!=(n=this.listeners)[t]?n[t]:n[t]=[]).push(e),this},c.removeListener=function(t,e){var n;return(n=this.arrIndexOf(this.listeners[t],e))<0||this.listeners[t].splice(n,1),this},c.clearListeners=function(t){return this.listeners[t]=[],this},c.trigger=function(){var t,e,r,i,o,a,s,l;for(e=arguments[0],t=2<=arguments.length?n.call(arguments,1):[],l=[],i=0,o=(s=null!=(a=this.listeners[e])?a:[]).length;i<o;i++)r=s[i],l.push(r.apply(null,t));return l},c.generatePtsCircle=function(t,e){var n,r,o,a,s,l,u;for(s=this.circleFootSeparation*(2+t)/h,r=h/t,u=[],o=a=0,l=t;0<=l?a<l:a>l;o=0<=l?++a:--a)n=this.circleStartAngle+o*r,u.push(new i.Point(e.x+s*Math.cos(n),e.y+s*Math.sin(n)));return u},c.generatePtsSpiral=function(t,e){var n,r,o,a,s,l,u;for(a=this.spiralLengthStart,n=0,u=[],r=o=0,l=t;0<=l?o<l:o>l;r=0<=l?++o:--o)n+=this.spiralFootSeparation/a+5e-4*r,s=new i.Point(e.x+a*Math.cos(n),e.y+a*Math.sin(n)),a+=h*this.spiralLengthFactor/n,u.push(s);return u},c.spiderListener=function(e,n){var r,i,o,a,s,l,u,f,h,d,p,g,v;if((f=null!=e._omsData)&&this.keepSpiderfied||("mouseover"===this.event?(r=this,i=function(){return r.unspiderfy()},t.clearTimeout(c.timeout),c.timeout=setTimeout(i,3e3)):this.unspiderfy()),f||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",e,n);for(d=[],p=[],g=(h=this.nearbyDistance)*h,u=this.llToPt(e.position),o=0,a=(v=this.markers).length;o<a;o++)null!=(s=v[o]).map&&s.getVisible()&&(l=this.llToPt(s.position),this.ptDistanceSq(l,u)<g?d.push({marker:s,markerPt:l}):p.push(s));return 1===d.length?this.trigger("click",e,n):this.spiderfy(d,p)},c.markersNearMarker=function(t,e){var n,r,i,o,a,s,l,u,c,f,h;if(null==e&&(e=!1),null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearMarker";for(u=(l=this.nearbyDistance)*l,a=this.llToPt(t.position),s=[],n=0,r=(c=this.markers).length;n<r&&!((i=c[n])!==t&&null!=i.map&&i.getVisible()&&(o=this.llToPt(null!=(f=null!=(h=i._omsData)?h.usualPosition:void 0)?f:i.position),this.ptDistanceSq(o,a)<u&&(s.push(i),e)));n++);return s},c.markersNearAnyOtherMarker=function(){var t,e,n,r,i,o,a,s,l,u,c,f,h,d,p,g,v,m,y,b,x;if(null==this.projHelper.getProjection())throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(g=(p=this.nearbyDistance)*p,h=function(){var t,e,n,r,i,o;for(o=[],t=0,e=(n=this.markers).length;t<e;t++)s=n[t],o.push({pt:this.llToPt(null!=(r=null!=(i=s._omsData)?i.usualPosition:void 0)?r:s.position),willSpiderfy:!1});return o}.call(this),e=r=0,i=(m=this.markers).length;r<i;e=++r)if(null!=(l=m[e]).map&&l.getVisible()&&!(u=h[e]).willSpiderfy)for(n=d=0,o=(y=this.markers).length;d<o;n=++d)if(c=y[n],n!==e&&null!=c.map&&c.getVisible()&&(f=h[n],(!(n<e)||f.willSpiderfy)&&this.ptDistanceSq(u.pt,f.pt)<g)){u.willSpiderfy=f.willSpiderfy=!0;break}for(x=[],t=v=0,a=(b=this.markers).length;v<a;t=++v)s=b[t],h[t].willSpiderfy&&x.push(s);return x},c.makeHighlightListenerFuncs=function(t){return{highlight:(e=this,function(){return t._omsData.leg.setOptions({strokeColor:e.legColors.highlighted[e.map.mapTypeId],zIndex:e.highlightedLegZIndex})}),unhighlight:function(e){return function(){return t._omsData.leg.setOptions({strokeColor:e.legColors.usual[e.map.mapTypeId],zIndex:e.usualLegZIndex})}}(this)};var e},c.spiderfy=function(t,e){var n,o,a,s,l,u,c,f,h,d,p;return!(this.minZoomLevel&&this.map.getZoom()<this.minZoomLevel)&&(this.spiderfying=!0,d=t.length,n=this.ptAverage(function(){var e,n,r;for(r=[],e=0,n=t.length;e<n;e++)f=t[e],r.push(f.markerPt);return r}()),s=d>=this.circleSpiralSwitchover?this.generatePtsSpiral(d,n).reverse():this.generatePtsCircle(d,n),p=function(){var e,n,f;for(f=[],e=0,n=s.length;e<n;e++)a=s[e],o=this.ptToLl(a),h=this.minExtract(t,function(t){return function(e){return t.ptDistanceSq(e.markerPt,a)}}(this)),c=h.marker,u=new i.Polyline({map:this.map,path:[c.position,o],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),c._omsData={usualPosition:c.position,leg:u},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(l=this.makeHighlightListenerFuncs(c),c._omsData.hightlightListeners={highlight:r.addListener(c,"mouseover",l.highlight),unhighlight:r.addListener(c,"mouseout",l.unhighlight)}),c.setPosition(o),c.setZIndex(Math.round(this.spiderfiedZIndex+a.y)),f.push(c);return f}.call(this),delete this.spiderfying,this.spiderfied=!0,this.trigger("spiderfy",p,e))},c.unspiderfy=function(t){var e,n,i,o,a,s,l;if(null==t&&(t=null),null==this.spiderfied)return this;for(this.unspiderfying=!0,l=[],a=[],e=0,n=(s=this.markers).length;e<n;e++)null!=(o=s[e])._omsData?(o._omsData.leg.setMap(null),o!==t&&o.setPosition(o._omsData.usualPosition),o.setZIndex(null),null!=(i=o._omsData.hightlightListeners)&&(r.removeListener(i.highlight),r.removeListener(i.unhighlight)),delete o._omsData,l.push(o)):a.push(o);return delete this.unspiderfying,delete this.spiderfied,this.trigger("unspiderfy",l,a),this},c.ptDistanceSq=function(t,e){var n,r;return(n=t.x-e.x)*n+(r=t.y-e.y)*r},c.ptAverage=function(t){var e,n,r,o,a,s;for(a=s=0,e=0,n=t.length;e<n;e++)a+=(o=t[e]).x,s+=o.y;return r=t.length,new i.Point(a/r,s/r)},c.llToPt=function(t){return this.projHelper.getProjection().fromLatLngToDivPixel(t)},c.ptToLl=function(t){return this.projHelper.getProjection().fromDivPixelToLatLng(t)},c.minExtract=function(t,e){var n,r,i,o,a,s;for(i=o=0,a=t.length;o<a;i=++o)s=e(t[i]),(null==n||s<r)&&(r=s,n=i);return t.splice(n,1)[0]},c.arrIndexOf=function(t,e){var n,r,i;if(null!=t.indexOf)return t.indexOf(e);for(n=r=0,i=t.length;r<i;n=++r)if(t[n]===e)return n;return-1},d}()}.apply(n),e.then((function(){n.OverlappingMarkerSpiderfier.initializeGoogleMaps(t.google)})),this.OverlappingMarkerSpiderfier}]),e.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendMarkerClusterer",["uiGmapLodash","uiGmapPropMap",function(e,n){return{init:_.once((function(){(function(){var r={}.hasOwnProperty,i=function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};t.NgMapCluster=function(t){function r(t){r.__super__.constructor.call(this,t),this.markers_=new n}return i(r,t),r.prototype.addMarker=function(t){var e,n;if(this.isMarkerAlreadyAdded_(t)){var r=this.markers_.get(t.key);if(r.getPosition().lat()==t.getPosition().lat()&&r.getPosition().lon()==t.getPosition().lon())return!1}if(this.center_){if(this.averageCenter_){var i=this.markers_.length+1,o=(this.center_.lat()*(i-1)+t.getPosition().lat())/i,a=(this.center_.lng()*(i-1)+t.getPosition().lng())/i;this.center_=new google.maps.LatLng(o,a),this.calculateBounds_()}}else this.center_=t.getPosition(),this.calculateBounds_();return t.isAdded=!0,this.markers_.push(t),e=this.markers_.length,null!==(n=this.markerClusterer_.getMaxZoom())&&this.map_.getZoom()>n?t.getMap()!==this.map_&&t.setMap(this.map_):e<this.minClusterSize_?t.getMap()!==this.map_&&t.setMap(this.map_):e===this.minClusterSize_?this.markers_.each((function(t){t.setMap(null)})):t.setMap(null),!0},r.prototype.isMarkerAlreadyAdded_=function(t){return e.isNullOrUndefined(this.markers_.get(t.key))},r.prototype.getBounds=function(){var t=new google.maps.LatLngBounds(this.center_,this.center_);return this.getMarkers().each((function(e){t.extend(e.getPosition())})),t},r.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=new n,delete this.markers_},r}(Cluster),t.NgMapMarkerClusterer=function(t){function e(t,r,i){e.__super__.constructor.call(this,t,r,i),this.markers_=new n}return i(e,t),e.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=new n},e.prototype.removeMarker_=function(t){return!!this.markers_.get(t.key)&&(t.setMap(null),this.markers_.remove(t.key),!0)},e.prototype.createClusters_=function(t){var e,n,r,i=this;if(this.ready_){0===t&&(google.maps.event.trigger(this,"clusteringbegin",this),void 0!==this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),r=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var o=this.getExtendedBounds(r),a=Math.min(t+this.batchSize_,this.markers_.length),s=this.markers_.values();for(e=t;e<a;e++)!(n=s[e]).isAdded&&this.isMarkerInBounds_(n,o)&&(!this.ignoreHidden_||this.ignoreHidden_&&n.getVisible())&&this.addToClosestCluster_(n);if(a<this.markers_.length)this.timerRefStatic=setTimeout((function(){i.createClusters_(a)}),0);else{for(e=0;e<this.clusters_.length;e++)this.clusters_[e].updateIcon_();delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this)}}},e.prototype.addToClosestCluster_=function(t){var e,n,r,i,o=4e4,a=null;for(e=0;e<this.clusters_.length;e++)(i=(r=this.clusters_[e]).getCenter())&&(n=this.distanceBetweenPoints_(i,t.getPosition()))<o&&(o=n,a=r);a&&a.isMarkerInClusterBounds(t)?a.addMarker(t):((r=new NgMapCluster(this)).addMarker(t),this.clusters_.push(r))},e.prototype.redraw_=function(){this.createClusters_(0)},e.prototype.resetViewport_=function(t){var e;for(e=0;e<this.clusters_.length;e++)this.clusters_[e].remove();this.clusters_=[],this.markers_.each((function(e){e.isAdded=!1,t&&e.setMap(null)}))},e.prototype.extend=function(t,e){return function(t){var e;for(e in t.prototype)"constructor"!==e&&(this.prototype[e]=t.prototype[e]);return this}.apply(t,[e])},ClusterIcon.prototype.show=function(){if(this.div_){var t="",e=this.backgroundPosition_.split(" "),n=parseInt(e[0].trim(),10),r=parseInt(e[1].trim(),10),i=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(i),t="<img src='"+this.url_+"' style='position: absolute; top: "+r+"px; left: "+n+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_?t+="width: "+this.width_+"px;height: "+this.height_+"px;":t+="clip: rect("+-1*r+"px, "+(-1*n+this.width_)+"px, "+(-1*r+this.height_)+"px, "+-1*n+"px);",t+="'>",this.div_.innerHTML=t+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>",void 0===this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},e}(MarkerClusterer)}).call(this)}))}}])}(window,angular),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Dexie=e()}(this,(function(){"use strict";var t=Object.keys,e=Array.isArray,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:global;function r(e,n){return"object"!=typeof n?e:(t(n).forEach((function(t){e[t]=n[t]})),e)}var i=Object.getPrototypeOf,o={}.hasOwnProperty;function a(t,e){return o.call(t,e)}function s(e,n){"function"==typeof n&&(n=n(i(e))),t(n).forEach((function(t){u(e,t,n[t])}))}var l=Object.defineProperty;function u(t,e,n,i){l(t,e,r(n&&a(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function c(t){return{from:function(e){return t.prototype=Object.create(e.prototype),u(t.prototype,"constructor",t),{extend:s.bind(null,t.prototype)}}}}var f=Object.getOwnPropertyDescriptor;var h=[].slice;function d(t,e,n){return h.call(t,e,n)}function p(t,e){return e(t)}function g(t){if(!t)throw new Error("Assertion Failed")}function v(t){n.setImmediate?setImmediate(t):setTimeout(t,0)}function m(t,e){return t.reduce((function(t,n,r){var i=e(n,r);return i&&(t[i[0]]=i[1]),t}),{})}function y(t,e){return function(){try{t.apply(this,arguments)}catch(t){e(t)}}}function b(t,e,n){try{t.apply(null,n)}catch(t){e&&e(t)}}function x(t,e){if(a(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var o=x(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(-1!==s){var l=t[e.substr(0,s)];return void 0===l?void 0:x(l,e.substr(s+1))}}function w(t,e,n){if(t&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){g("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)w(t,e[r],n[r])}else{var o=e.indexOf(".");if(-1!==o){var a=e.substr(0,o),s=e.substr(o+1);if(""===s)void 0===n?delete t[a]:t[a]=n;else{var l=t[a];l||(l=t[a]={}),w(l,s,n)}}else void 0===n?delete t[e]:t[e]=n}}function _(t){var e={};for(var n in t)a(t,n)&&(e[n]=t[n]);return e}var k=[].concat;function M(t){return k.apply([],t)}var C="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(M([8,16,32,64].map((function(t){return["Int","Uint","Float"].map((function(e){return e+t+"Array"}))})))).filter((function(t){return n[t]})).map((function(t){return n[t]}));function S(t){if(!t||"object"!=typeof t)return t;var n;if(e(t)){n=[];for(var r=0,i=t.length;r<i;++r)n.push(S(t[r]))}else if(C.indexOf(t.constructor)>=0)n=t;else for(var o in n=t.constructor?Object.create(t.constructor.prototype):{},t)a(t,o)&&(n[o]=S(t[o]));return n}function A(e,n,r,i){return r=r||{},i=i||"",t(e).forEach((function(t){if(a(n,t)){var o=e[t],s=n[t];"object"==typeof o&&"object"==typeof s&&o&&s&&""+o.constructor==""+s.constructor?A(o,s,r,i+t+"."):o!==s&&(r[i+t]=n[t])}else r[i+t]=void 0})),t(n).forEach((function(t){a(e,t)||(r[i+t]=n[t])})),r}var L="undefined"!=typeof Symbol&&Symbol.iterator,E=L?function(t){var e;return null!=t&&(e=t[L])&&e.apply(t)}:function(){return null},P={};function T(t){var n,r,i,o;if(1===arguments.length){if(e(t))return t.slice();if(this===P&&"string"==typeof t)return[t];if(o=E(t)){for(r=[];!(i=o.next()).done;)r.push(i.value);return r}if(null==t)return[t];if("number"==typeof(n=t.length)){for(r=new Array(n);n--;)r[n]=t[n];return r}return[t]}for(n=arguments.length,r=new Array(n);n--;)r[n]=arguments[n];return r}var O="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function D(t,e){O=t,I=e}var I=function(){return!0},F=!new Error("").stack;function N(){if(F)try{throw N.arguments,new Error}catch(t){return t}return new Error}function G(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(I).map((function(t){return"\n"+t})).join("")):""}var W=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],B=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(W),j={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function z(t,e){this._e=N(),this.name=t,this.message=e}function R(t,e,n,r){this._e=N(),this.failures=e,this.failedKeys=r,this.successCount=n}function H(t,e){this._e=N(),this.name="BulkError",this.failures=e,this.message=function(t,e){return t+". Errors: "+e.map((function(t){return t.toString()})).filter((function(t,e,n){return n.indexOf(t)===e})).join("\n")}(t,e)}c(z).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+G(this._e,2))}},toString:function(){return this.name+": "+this.message}}),c(R).from(z),c(H).from(z);var V=B.reduce((function(t,e){return t[e]=e+"Error",t}),{}),$=z,U=B.reduce((function(t,e){var n=e+"Error";function r(t,r){this._e=N(),this.name=n,t?"string"==typeof t?(this.message=t,this.inner=r||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=j[e]||n,this.inner=null)}return c(r).from($),t[e]=r,t}),{});U.Syntax=SyntaxError,U.Type=TypeError,U.Range=RangeError;var q=W.reduce((function(t,e){return t[e+"Error"]=U[e],t}),{});var K=B.reduce((function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=U[e]),t}),{});function Y(){}function X(t){return t}function Z(t,e){return null==t||t===X?e:function(n){return e(t(n))}}function Q(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function J(t,e){return t===Y?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Q(i,this.onerror):i),void 0!==o?o:n}}function tt(t,e){return t===Y?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function et(t,e){return t===Y?e:function(n){var i=t.apply(this,arguments);r(n,i);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?Q(o,this.onsuccess):o),a&&(this.onerror=this.onerror?Q(a,this.onerror):a),void 0===i?void 0===s?void 0:s:r(i,s)}}function nt(t,e){return t===Y?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function rt(t,e){return t===Y?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return e.apply(r,o)}))}return e.apply(this,arguments)}}K.ModifyError=R,K.DexieError=z,K.BulkError=H;var it={},ot=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var t=n.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),at=ot[0],st=ot[1],lt=ot[2],ut=st&&st.then,ct=at&&at.constructor,ft=ot[3],ht=!!lt,dt=!1,pt=lt?function(){lt.then(Nt)}:n.setImmediate?setImmediate.bind(null,Nt):n.MutationObserver?function(){var t=document.createElement("div");new MutationObserver((function(){Nt(),t=null})).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Nt,0)},gt=function(t,e){Mt.push([t,e]),mt&&(pt(),mt=!1)},vt=!0,mt=!0,yt=[],bt=[],xt=null,wt=X,_t={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:oe,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(t){try{oe(t[0],t[1])}catch(t){}}))}},kt=_t,Mt=[],Ct=0,St=[];function At(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Y,this._lib=!1;var e=this._PSD=kt;if(O&&(this._stackHolder=N(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==it)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Tt(this,this._value))}this._state=null,this._value=null,++e.ref,Pt(this,t)}var Lt={get:function(){var t=kt,e=Ut;function n(n,r){var i=this,o=!t.global&&(t!==kt||e!==Ut);o&&Xt();var a=new At((function(e,a){Dt(i,new Et(re(n,t,o),re(r,t,o),e,a,t))}));return O&&Ft(a,this),a}return n.prototype=it,n},set:function(t){u(this,"then",t&&t.prototype===it?Lt:{get:function(){return t},set:Lt.set})}};function Et(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function Pt(t,e){try{e((function(e){if(null===t._state){if(e===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Gt();e&&"function"==typeof e.then?Pt(t,(function(t,n){e instanceof At?e._then(t,n):e.then(t,n)})):(t._state=!0,t._value=e,Ot(t)),n&&Wt()}}),Tt.bind(null,t))}catch(e){Tt(t,e)}}function Tt(t,e){if(bt.push(e),null===t._state){var n=t._lib&&Gt();e=wt(e),t._state=!1,t._value=e,O&&null!==e&&"object"==typeof e&&!e._promise&&b((function(){var n=function t(e,n){var r;return f(e,n)||(r=i(e))&&t(r,n)}(e,"stack");e._promise=t,u(e,"stack",{get:function(){return dt?n&&(n.get?n.get.apply(e):n.value):t.stack}})})),function(t){yt.some((function(e){return e._value===t._value}))||yt.push(t)}(t),Ot(t),n&&Wt()}}function Ot(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Dt(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===Ct&&(++Ct,gt((function(){0==--Ct&&Bt()}),[]))}function Dt(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Ct,gt(It,[n,t,e])}else t._listeners.push(e)}function It(t,e,n){try{xt=e;var r,i=e._value;e._state?r=t(i):(bt.length&&(bt=[]),r=t(i),-1===bt.indexOf(i)&&function(t){var e=yt.length;for(;e;)if(yt[--e]._value===t._value)return void yt.splice(e,1)}(e)),n.resolve(r)}catch(t){n.reject(t)}finally{xt=null,0==--Ct&&Bt(),--n.psd.ref||n.psd.finalize()}}function Ft(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function Nt(){Gt()&&Wt()}function Gt(){var t=vt;return vt=!1,mt=!1,t}function Wt(){var t,e,n;do{for(;Mt.length>0;)for(t=Mt,Mt=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(Mt.length>0);vt=!0,mt=!0}function Bt(){var t=yt;yt=[],t.forEach((function(t){t._PSD.onunhandled.call(null,t._value,t)}));for(var e=St.slice(0),n=e.length;n;)e[--n]()}function jt(t){return new At(it,!1,t)}function zt(t,e){var n=kt;return function(){var r=Gt(),i=kt;try{return te(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{te(i,!1),r&&Wt()}}}s(At.prototype,{then:Lt,_then:function(t,e){Dt(this,new Et(null,null,t,e,kt))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,(function(t){return t instanceof e?n(t):jt(t)})):this.then(null,(function(t){return t&&t.name===e?n(t):jt(t)}))},finally:function(t){return this.then((function(e){return t(),e}),(function(e){return t(),jt(e)}))},stack:{get:function(){if(this._stack)return this._stack;try{dt=!0;var t=function t(e,n,r){if(n.length===r)return n;var i="";if(!1===e._state){var o,a,s=e._value;null!=s?(o=s.name||"Error",a=s.message||s,i=G(s,0)):(o=s,a=""),n.push(o+(a?": "+a:"")+i)}O&&((i=G(e._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),e._prev&&t(e._prev,n,r));return n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{dt=!1}}},timeout:function(t,e){var n=this;return t<1/0?new At((function(r,i){var o=setTimeout((function(){return i(new U.Timeout(e))}),t);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&u(At.prototype,Symbol.toStringTag,"Promise"),_t.env=ee(),s(At,{all:function(){var t=T.apply(null,arguments).map(Zt);return new At((function(e,n){0===t.length&&e([]);var r=t.length;t.forEach((function(i,o){return At.resolve(i).then((function(n){t[o]=n,--r||e(t)}),n)}))}))},resolve:function(t){if(t instanceof At)return t;if(t&&"function"==typeof t.then)return new At((function(e,n){t.then(e,n)}));var e=new At(it,!0,t);return Ft(e,xt),e},reject:jt,race:function(){var t=T.apply(null,arguments).map(Zt);return new At((function(e,n){t.map((function(t){return At.resolve(t).then(e,n)}))}))},PSD:{get:function(){return kt},set:function(t){return kt=t}},newPSD:Kt,usePSD:ne,scheduler:{get:function(){return gt},set:function(t){gt=t}},rejectionMapper:{get:function(){return wt},set:function(t){wt=t}},follow:function(t,e){return new At((function(n,r){return Kt((function(e,n){var r=kt;r.unhandleds=[],r.onunhandled=n,r.finalize=Q((function(){var t=this;!function(t){St.push((function e(){t(),St.splice(St.indexOf(e),1)})),++Ct,gt((function(){0==--Ct&&Bt()}),[])}((function(){0===t.unhandleds.length?e():n(t.unhandleds[0])}))}),r.finalize),t()}),e,n,r)}))}});var Rt={awaits:0,echoes:0,id:0},Ht=0,Vt=[],$t=0,Ut=0,qt=0;function Kt(t,e,n,i){var o=kt,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++qt;var s=_t.env;a.env=ht?{Promise:At,PromiseProp:{value:At,configurable:!0,writable:!0},all:At.all,race:At.race,resolve:At.resolve,reject:At.reject,nthen:ie(s.nthen,a),gthen:ie(s.gthen,a)}:{},e&&r(a,e),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=ne(a,t,n,i);return 0===a.ref&&a.finalize(),l}function Yt(){return Rt.id||(Rt.id=++Ht),++Rt.awaits,Rt.echoes+=7,Rt.id}function Xt(t){!Rt.awaits||t&&t!==Rt.id||(0==--Rt.awaits&&(Rt.id=0),Rt.echoes=7*Rt.awaits)}function Zt(t){return Rt.echoes&&t&&t.constructor===ct?(Yt(),t.then((function(t){return Xt(),t}),(function(t){return Xt(),ae(t)}))):t}function Qt(t){++Ut,Rt.echoes&&0!=--Rt.echoes||(Rt.echoes=Rt.id=0),Vt.push(kt),te(t,!0)}function Jt(){var t=Vt[Vt.length-1];Vt.pop(),te(t,!1)}function te(t,e){var r,i=kt;if((e?!Rt.echoes||$t++&&t===kt:!$t||--$t&&t===kt)||(r=e?Qt.bind(null,t):Jt,ut.call(at,r)),t!==kt&&(kt=t,i===_t&&(_t.env=ee()),ht)){var o=_t.env.Promise,a=t.env;st.then=a.nthen,o.prototype.then=a.gthen,(i.global||t.global)&&(Object.defineProperty(n,"Promise",a.PromiseProp),o.all=a.all,o.race=a.race,o.resolve=a.resolve,o.reject=a.reject)}}function ee(){var t=n.Promise;return ht?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:st.then,gthen:t.prototype.then}:{}}function ne(t,e,n,r,i){var o=kt;try{return te(t,!0),e(n,r,i)}finally{te(o,!1)}}function re(t,e,n){return"function"!=typeof t?t:function(){var r=kt;n&&Yt(),te(e,!0);try{return t.apply(this,arguments)}finally{te(r,!1)}}}function ie(t,e){return function(n,r){return t.call(this,re(n,e,!1),re(r,e,!1))}}function oe(t,e){var i;try{i=e.onuncatched(t)}catch(t){}if(!1!==i)try{var o,a={promise:e,reason:t};if(n.document&&document.createEvent?((o=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),r(o,a)):n.CustomEvent&&r(o=new CustomEvent("unhandledrejection",{detail:a}),a),o&&n.dispatchEvent&&(dispatchEvent(o),!n.PromiseRejectionEvent&&n.onunhandledrejection))try{n.onunhandledrejection(o)}catch(t){}o.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}var ae=At.reject;function se(n){var r={},i=function(t,e){if(e){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return r[t].subscribe.apply(null,o),n}if("string"==typeof t)return r[t]};i.addEventType=s;for(var o=1,a=arguments.length;o<a;++o)s(arguments[o]);return i;function s(t,e,n){if("object"==typeof t)return l(t);e||(e=nt),n||(n=Y);var o={subscribers:[],fire:n,subscribe:function(t){-1===o.subscribers.indexOf(t)&&(o.subscribers.push(t),o.fire=e(o.fire,t))},unsubscribe:function(t){o.subscribers=o.subscribers.filter((function(e){return e!==t})),o.fire=o.subscribers.reduce(e,n)}};return r[t]=i[t]=o,o}function l(n){t(n).forEach((function(t){var r=n[t];if(e(r))s(t,n[t][0],n[t][1]);else{if("asap"!==r)throw new U.InvalidArgument("Invalid event config");var i=s(t,X,(function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];i.subscribers.forEach((function(t){v((function(){t.apply(null,e)}))}))}))}}))}}var le,ue=String.fromCharCode(65535),ce=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return ue}}(),fe="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",he=[],de="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),pe=de,ge=de,ve=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function me(i,o){var l,c,f,h,v,k=me.dependencies,C=r({addons:me.addons,autoOpen:!0,indexedDB:k.indexedDB,IDBKeyRange:k.IDBKeyRange},o),L=C.addons,E=C.autoOpen,D=C.indexedDB,I=C.IDBKeyRange,F=this._dbSchema={},W=[],B=[],j={},z=null,V=null,$=!1,q=null,K=!1,Q="readwrite",nt=this,it=new At((function(t){l=t})),ot=new At((function(t,e){c=e})),at=!0,st=!!Le(D);function lt(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function ut(e,n,r){var i=nt._createTransaction(Q,B,F);i.create(n),i._completion.catch(r);var o=i._reject.bind(i);Kt((function(){kt.trans=i,0===e?(t(F).forEach((function(t){ht(n,t,F[t].primKey,F[t].indexes)})),At.follow((function(){return nt.on.populate.fire(i)})).catch(o)):function(e,n,r){var i=[],o=W.filter((function(t){return t._cfg.version===e}))[0];if(!o)throw new U.Upgrade("Dexie specification of currently installed DB version is missing");F=nt._dbSchema=o._cfg.dbschema;var a=!1;function s(){return i.length?At.resolve(i.shift()(n.idbtrans)).then(s):At.resolve()}return W.filter((function(t){return t._cfg.version>e})).forEach((function(t){i.push((function(){var e=F,i=t._cfg.dbschema;It(e,r),It(i,r),F=nt._dbSchema=i;var o=function(t,e){var n={del:[],add:[],change:[]};for(var r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],o=e[r];if(i){var a={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)a.recreate=!0,n.change.push(a);else{var s=i.idxByName,l=o.idxByName;for(var u in s)l[u]||a.del.push(u);for(u in l){var c=s[u],f=l[u];c?c.src!==f.src&&a.change.push(f):a.add.push(f)}(a.del.length>0||a.add.length>0||a.change.length>0)&&n.change.push(a)}}else n.add.push([r,o])}return n}(e,i);if(o.add.forEach((function(t){ht(r,t[0],t[1].primKey,t[1].indexes)})),o.change.forEach((function(t){if(t.recreate)throw new U.Upgrade("Not yet support for changing primary key");var e=r.objectStore(t.name);t.add.forEach((function(t){dt(e,t)})),t.change.forEach((function(t){e.deleteIndex(t.name),dt(e,t)})),t.del.forEach((function(t){e.deleteIndex(t)}))})),t._cfg.contentUpgrade)return a=!0,At.follow((function(){t._cfg.contentUpgrade(n)}))})),i.push((function(e){a&&pe||function(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}(t._cfg.dbschema,e)}))})),s().then((function(){!function(e,n){t(e).forEach((function(t){n.db.objectStoreNames.contains(t)||ht(n,t,e[t].primKey,e[t].indexes)}))}(F,r)}))}(e,i,n).catch(o)}))}function ht(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(t){dt(i,t)})),i}function dt(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function pt(t,e,n){var r=arguments.length;if(r<2)throw new U.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];n=i.pop();var o=M(i);return[t,o,n]}function gt(t,e,n){this.name=t,this.schema=e,this._tx=n,this.hook=j[t]?j[t].hook:se(null,{creating:[J,Y],reading:[Z,X],updating:[et,Y],deleting:[tt,Y]})}function vt(t,e,n){return(n?_e:xe)((function(n){t.push(n),e&&e()}))}function mt(t,e,n,r,i){return new At((function(o,a){var s=n.length,l=s-1;if(0===s)return o();if(r){var u,c=_e(a),f=be(null);b((function(){for(var r=0;r<s;++r){u={onsuccess:null,onerror:null};var a=n[r];i.call(u,a[0],a[1],e);var h=t.delete(a[0]);h._hookCtx=u,h.onerror=c,h.onsuccess=r===l?be(o):f}}),(function(t){throw u.onerror&&u.onerror(t),t}))}else for(var h=0;h<s;++h){var d=t.delete(n[h]);d.onerror=xe(a),h===l&&(d.onsuccess=zt((function(){return o()})))}}))}function yt(t,e,n,r){var i=this;this.db=nt,this.mode=t,this.storeNames=e,this.idbtrans=null,this.on=se(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new At((function(t,e){i._resolve=t,i._reject=e})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(t){var e=i.active;return i.active=!1,i.on.error.fire(t),i.parent?i.parent._reject(t):e&&i.idbtrans&&i.idbtrans.abort(),ae(t)}))}function bt(t,e,n){this._ctx={table:t,index:":id"===e?null:e,or:n}}function xt(t,e){var n=null,r=null;if(e)try{n=e()}catch(t){r=t}var i=t._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function wt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function _t(t,e){return t._cfg.version-e._cfg.version}function Mt(t,e,n){e.forEach((function(e){var r=n[e];t.forEach((function(t){e in t||(t===yt.prototype||t instanceof yt?u(t,e,{get:function(){return this.table(e)}}):t[e]=new gt(e,r))}))}))}function Ct(t,e,n,r,i,o){var a=zt(o?function(t,e,r){return n(o(t),e,r)}:n,i);t.onerror||(t.onerror=xe(i)),t.onsuccess=y(e?function(){var n=t.result;if(n){var o=function(){n.continue()};e(n,(function(t){o=t}),r,i)&&a(n.value,n,(function(t){o=t})),o()}else r()}:function(){var e=t.result;if(e){var n=function(){e.continue()};a(e.value,e,(function(t){n=t})),n()}else r()},i)}function St(t,e){return D.cmp(t,e)}function Lt(t,e){return St(t,e)>0?t:e}function Et(t,e){return D.cmp(t,e)}function Pt(t,e){return D.cmp(e,t)}function Tt(t,e){return t<e?-1:t===e?0:1}function Ot(t,e){return t>e?-1:t===e?0:1}function Dt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}function It(t,e){for(var r=e.db.objectStoreNames,i=0;i<r.length;++i){var o=r[i],a=e.objectStore(o);f="getAll"in a;for(var s=0;s<a.indexNames.length;++s){var l=a.indexNames[s],u=a.index(l).keyPath,c="string"==typeof u?u:"["+d(u).join("+")+"]";if(t[o]){var h=t[o].idxByName[c];h&&(h.name=l)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(f=!1)}function Ft(t){nt.on("blocked").fire(t),he.filter((function(t){return t.name===nt.name&&t!==nt&&!t._vcFired})).map((function(e){return e.on("versionchange").fire(t)}))}this.version=function(t){if(z||$)throw new U.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=W.filter((function(e){return e._cfg.version===t}))[0];return e||(e=new lt(t),W.push(e),W.sort(_t),at=!1,e)},r(lt.prototype,{stores:function(e){this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,e):e;var n={};W.forEach((function(t){r(n,t._cfg.storesSource)}));var i=this._cfg.dbschema={};return this._parseStoresSpec(n,i),F=nt._dbSchema=i,[j,nt,yt.prototype].forEach((function(t){for(var e in t)t[e]instanceof gt&&delete t[e]})),Mt([j,nt,yt.prototype,this._cfg.tables],t(i),i),B=t(i),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(n,r){t(n).forEach((function(t){if(null!==n[t]){var i={},o=function(t){var n=[];return t.split(",").forEach((function(t){var r=(t=t.trim()).replace(/([&*]|\+\+)/g,""),i=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;n.push(new Ce(r,i||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),e(i),/\./.test(t)))})),n}(n[t]),a=o.shift();if(a.multi)throw new U.Schema("Primary key cannot be multi-valued");a.keyPath&&w(i,a.keyPath,a.auto?0:a.keyPath),o.forEach((function(t){if(t.auto)throw new U.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new U.Schema("Index must have a name and cannot be an empty string");w(i,t.keyPath,t.compound?t.keyPath.map((function(){return""})):"")})),r[t]=new Se(t,a,o,i)}}))}}),this._allTables=j,this._createTransaction=function(t,e,n,r){return new yt(t,e,n,r)},this._whenReady=function(t){return K||kt.letThrough?t():new At((function(t,e){if(!$){if(!E)return void e(new U.DatabaseClosed);nt.open().catch(Y)}it.then(t,e)})).then(t)},this.verno=0,this.open=function(){if($||z)return it.then((function(){return V?ae(V):nt}));O&&(ot._stackHolder=N()),$=!0,V=null,K=!1;var e=l,n=null;return At.race([ot,new At((function(e,r){if(!D)throw new U.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=at?D.open(i):D.open(i,Math.round(10*nt.verno));if(!o)throw new U.MissingAPI("IndexedDB API not available");o.onerror=xe(r),o.onblocked=zt(Ft),o.onupgradeneeded=zt((function(t){if(n=o.transaction,at&&!nt._allowEmptyDB){o.onerror=ke,n.abort(),o.result.close();var e=D.deleteDatabase(i);e.onsuccess=e.onerror=zt((function(){r(new U.NoSuchDatabase("Database "+i+" doesnt exist"))}))}else{n.onerror=xe(r),ut((t.oldVersion>Math.pow(2,62)?0:t.oldVersion)/10,n,r)}}),r),o.onsuccess=zt((function(){if(n=null,z=o.result,he.push(nt),at)!function(){if(nt.verno=z.version/10,nt._dbSchema=F={},0===(B=d(z.objectStoreNames,0)).length)return;var e=z.transaction(Ae(B),"readonly");B.forEach((function(t){for(var n=e.objectStore(t),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new Ce(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),a=[],s=0;s<n.indexNames.length;++s){var l=n.index(n.indexNames[s]);i=(r=l.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var u=new Ce(l.name,r,!!l.unique,!!l.multiEntry,!1,r&&"string"!=typeof r,i);a.push(u)}F[t]=new Se(t,o,a,{})})),Mt([j],t(F),F)}();else if(z.objectStoreNames.length>0)try{It(F,z.transaction(Ae(z.objectStoreNames),"readonly"))}catch(t){}z.onversionchange=zt((function(t){nt._vcFired=!0,nt.on("versionchange").fire(t)})),st||"__dbnames"===i||le.dbnames.put({name:i}).catch(Y),e()}),r)}))]).then((function(){return q=[],At.resolve(me.vip(nt.on.ready.fire)).then((function t(){if(q.length>0){var e=q.reduce(rt,Y);return q=[],At.resolve(me.vip(e)).then(t)}}))})).finally((function(){q=null})).then((function(){return $=!1,nt})).catch((function(t){try{n&&n.abort()}catch(t){}return $=!1,nt.close(),ae(V=t)})).finally((function(){K=!0,e()}))},this.close=function(){var t=he.indexOf(nt);if(t>=0&&he.splice(t,1),z){try{z.close()}catch(t){}z=null}E=!1,V=new U.DatabaseClosed,$&&c(V),it=new At((function(t){l=t})),ot=new At((function(t,e){c=e}))},this.delete=function(){var t=arguments.length>0;return new At((function(e,n){if(t)throw new U.InvalidArgument("Arguments not allowed in db.delete()");function r(){nt.close();var t=D.deleteDatabase(i);t.onsuccess=zt((function(){st||le.dbnames.delete(i).catch(Y),e()})),t.onerror=xe(n),t.onblocked=Ft}$?it.then(r):r()}))},this.backendDB=function(){return z},this.isOpen=function(){return null!==z},this.hasBeenClosed=function(){return V&&V instanceof U.DatabaseClosed},this.hasFailed=function(){return null!==V},this.dynamicallyOpened=function(){return at},this.name=i,s(this,{tables:{get:function(){return t(j).map((function(t){return j[t]}))}}}),this.on=se(this,"populate","blocked","versionchange",{ready:[rt,Y]}),this.on.ready.subscribe=p(this.on.ready.subscribe,(function(t){return function(e,n){me.vip((function(){K?(V||At.resolve().then(e),n&&t(e)):q?(q.push(e),n&&t(e)):(t(e),n||t((function t(){nt.on.ready.unsubscribe(e),nt.on.ready.unsubscribe(t)})))}))}})),this.transaction=function(){var t=pt.apply(this,arguments);return this._transaction.apply(this,t)},this._transaction=function(t,e,n){var r=kt.trans;r&&r.db===nt&&-1===t.indexOf("!")||(r=null);var i=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{var o=e.map((function(t){var e=t instanceof gt?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}));if("r"==t||"readonly"==t)t="readonly";else{if("rw"!=t&&t!=Q)throw new U.InvalidArgument("Invalid transaction mode: "+t);t=Q}if(r){if("readonly"===r.mode&&t===Q){if(!i)throw new U.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach((function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!i)throw new U.SubTransaction("Table "+t+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(t){return r?r._promise(null,(function(e,n){n(t)})):ae(t)}return r?r._promise(t,a,"lock"):kt.trans?ne(kt.transless,(function(){return nt._whenReady(a)})):nt._whenReady(a);function a(){return At.resolve().then((function(){var e,i=kt.transless||kt,a=nt._createTransaction(t,o,F,r),s={trans:a,transless:i};r?a.idbtrans=r.idbtrans:a.create(),n.constructor===ft&&Yt();var l=At.follow((function(){if(e=n.call(a,a))if(e.constructor===ct){var t=Xt.bind(null,null);e.then(t,t)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=Me(e))}),s);return(e&&"function"==typeof e.then?At.resolve(e).then((function(t){return a.active?t:ae(new U.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):l.then((function(){return e}))).then((function(t){return r&&a._resolve(),a._completion.then((function(){return t}))})).catch((function(t){return a._reject(t),ae(t)}))}))}},this.table=function(t){if(!a(j,t))throw new U.InvalidTable("Table "+t+" does not exist");return j[t]},s(gt.prototype,{_trans:function(t,e,n){var r=this._tx||kt.trans;return r&&r.db===nt?r===kt.trans?r._promise(t,e,n):Kt((function(){return r._promise(t,e,n)}),{trans:r,transless:kt.transless||kt}):function t(e,n,r){if(K||kt.letThrough){var i=nt._createTransaction(e,n,F);try{i.create()}catch(t){return ae(t)}return i._promise(e,(function(t,e){return Kt((function(){return kt.trans=i,r(t,e,i)}))})).then((function(t){return i._completion.then((function(){return t}))}))}if(!$){if(!E)return ae(new U.DatabaseClosed);nt.open().catch(Y)}return it.then((function(){return t(e,n,r)}))}(t,[this.name],e)},_idbstore:function(t,e,n){var r=this.name;return this._trans(t,(function(t,n,i){if(-1===i.storeNames.indexOf(r))throw new U.NotFound("Table"+r+" not part of transaction");return e(t,n,i.idbtrans.objectStore(r),i)}),n)},get:function(t,e){if(t&&t.constructor===Object)return this.where(t).first(e);var n=this;return this._idbstore("readonly",(function(e,r,i){var o=i.get(t);o.onerror=xe(r),o.onsuccess=zt((function(){e(n.hook.reading.fire(o.result))}),r)})).then(e)},where:function(n){if("string"==typeof n)return new bt(this,n);if(e(n))return new bt(this,"["+n.join("+")+"]");var r=t(n);if(1===r.length)return this.where(r[0]).equals(n[r[0]]);var i=this.schema.indexes.concat(this.schema.primKey).filter((function(t){return t.compound&&r.every((function(e){return t.keyPath.indexOf(e)>=0}))&&t.keyPath.every((function(t){return r.indexOf(t)>=0}))}))[0];if(i&&ce!==ue)return this.where(i.name).equals(i.keyPath.map((function(t){return n[t]})));i||console.warn("The query "+JSON.stringify(n)+" on "+this.name+" would benefit of a compound index ["+r.join("+")+"]");var o=this.schema.idxByName,a=r.reduce((function(t,e){return[t[0]||o[e],t[0]||!o[e]?Dt(t[1],(function(t){return""+x(t,e)==""+n[e]})):t[1]]}),[null,null]),s=a[0];return s?this.where(s.name).equals(n[s.keyPath]).filter(a[1]):i?this.filter(a[1]):this.where(r).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new xt(new bt(this,e(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new xt(new bt(this))},mapToClass:function(t,e){this.schema.mappedClass=t;var n=Object.create(t.prototype);e&&ye(n,e),this.schema.instanceTemplate=n;var r=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(a(e,r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(me.defineClass(t),t)},bulkDelete:function(t){return this.hook.deleting.fire===Y?this._idbstore(Q,(function(e,n,r,i){e(mt(r,i,t,!1,Y))})):this.where(":id").anyOf(t).delete().then((function(){}))},bulkPut:function(t,e){var n=this;return this._idbstore(Q,(function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!e)throw new U.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&e)throw new U.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var a,s,l=function(t){0===u.length?r(t):i(new H(n.name+".bulkPut(): "+u.length+" of "+c+" operations failed",u))},u=[],c=t.length,f=n;if(n.hook.creating.fire===Y&&n.hook.updating.fire===Y){s=vt(u);for(var h=0,d=t.length;h<d;++h)(a=e?o.put(t[h],e[h]):o.put(t[h])).onerror=s;a.onerror=vt(u,l),a.onsuccess=we(l)}else{var p=e||o.keyPath&&t.map((function(t){return x(t,o.keyPath)})),g=p&&m(p,(function(e,n){return null!=e&&[e,t[n]]}));(p?f.where(":id").anyOf(p.filter((function(t){return null!=t}))).modify((function(){this.value=g[this.primKey],g[this.primKey]=null})).catch(R,(function(t){u=t.failures})).then((function(){for(var n=[],r=e&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||g[o])&&(n.push(t[i]),e&&r.push(o),null!=o&&(g[o]=null))}return n.reverse(),e&&r.reverse(),f.bulkAdd(n,r)})).then((function(t){var e=p[p.length-1];return null!=e?e:t})):f.bulkAdd(t)).then(l).catch(H,(function(t){u=u.concat(t.failures),l()})).catch(i)}}),"locked")},bulkAdd:function(t,e){var n=this,r=this.hook.creating.fire;return this._idbstore(Q,(function(i,o,a,s){if(!a.keyPath&&!n.schema.primKey.auto&&!e)throw new U.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(a.keyPath&&e)throw new U.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new U.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return i();function l(t){0===h.length?i(t):o(new H(n.name+".bulkAdd(): "+h.length+" of "+d+" operations failed",h))}var u,c,f,h=[],d=t.length;if(r!==Y){var p,g=a.keyPath;c=vt(h,null,!0),f=be(null),b((function(){for(var n=0,i=t.length;n<i;++n){p={onerror:null,onsuccess:null};var o=e&&e[n],l=t[n],h=e?o:g?x(l,g):void 0,d=r.call(p,h,l,s);null==h&&null!=d&&(g?w(l=S(l),g,d):o=d),(u=null!=o?a.add(l,o):a.add(l))._hookCtx=p,n<i-1&&(u.onerror=c,p.onsuccess&&(u.onsuccess=f))}}),(function(t){throw p.onerror&&p.onerror(t),t})),u.onerror=vt(h,l,!0),u.onsuccess=be(l)}else{c=vt(h);for(var v=0,m=t.length;v<m;++v)(u=e?a.add(t[v],e[v]):a.add(t[v])).onerror=c;u.onerror=vt(h,l),u.onsuccess=we(l)}}))},add:function(t,e){var n=this.hook.creating.fire;return this._idbstore(Q,(function(r,i,o,a){var s={onsuccess:null,onerror:null};if(n!==Y){var l=null!=e?e:o.keyPath?x(t,o.keyPath):void 0,u=n.call(s,l,t,a);null==l&&null!=u&&(o.keyPath?w(t,o.keyPath,u):e=u)}try{var c=null!=e?o.add(t,e):o.add(t);c._hookCtx=s,c.onerror=_e(i),c.onsuccess=be((function(e){var n=o.keyPath;n&&w(t,n,e),r(e)}))}catch(t){throw s.onerror&&s.onerror(t),t}}))},put:function(t,e){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==Y||i!==Y){var o=this.schema.primKey.keyPath,a=void 0!==e?e:o&&x(t,o);return null==a?this.add(t):(t=S(t),this._trans(Q,(function(){return n.where(":id").equals(a).modify((function(){this.value=t})).then((function(r){return 0===r?n.add(t,e):a}))}),"locked"))}return this._idbstore(Q,(function(n,r,i){var o=void 0!==e?i.put(t,e):i.put(t);o.onerror=xe(r),o.onsuccess=zt((function(e){var r=i.keyPath;r&&w(t,r,e.target.result),n(o.result)}))}))},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore(Q,(function(e,n,r){var i=r.delete(t);i.onerror=xe(n),i.onsuccess=zt((function(){e(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(Q,(function(t,e,n){var r=n.clear();r.onerror=xe(e),r.onsuccess=zt((function(){t(r.result)}))}))},update:function(n,r){if("object"!=typeof r||e(r))throw new U.InvalidArgument("Modifications must be an object.");if("object"!=typeof n||e(n))return this.where(":id").equals(n).modify(r);t(r).forEach((function(t){w(n,t,r[t])}));var i=x(n,this.schema.primKey.keyPath);return void 0===i?ae(new U.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(r)}}),s(yt.prototype,{_lock:function(){return g(!kt.global),++this._reculock,1!==this._reculock||kt.global||(kt.lockOwnerFor=this),this},_unlock:function(){if(g(!kt.global),0==--this._reculock)for(kt.global||(kt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ne(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&kt.lockOwnerFor!==this},create:function(t){var e=this;if(!this.mode)return this;if(g(!this.idbtrans),!t&&!z)switch(V&&V.name){case"DatabaseClosedError":throw new U.DatabaseClosed(V);case"MissingAPIError":throw new U.MissingAPI(V.message,V);default:throw new U.OpenFailed(V)}if(!this.active)throw new U.TransactionInactive;return g(null===this._completion._state),(t=this.idbtrans=t||z.transaction(Ae(this.storeNames),this.mode)).onerror=zt((function(n){ke(n),e._reject(t.error)})),t.onabort=zt((function(n){ke(n),e.active&&e._reject(new U.Abort(t.error)),e.active=!1,e.on("abort").fire(n)})),t.oncomplete=zt((function(){e.active=!1,e._resolve()})),this},_promise:function(t,e,n){var r=this;if(t===Q&&this.mode!==Q)return ae(new U.ReadOnly("Transaction is readonly"));if(!this.active)return ae(new U.TransactionInactive);if(this._locked())return new At((function(i,o){r._blockedFuncs.push([function(){r._promise(t,e,n).then(i,o)},kt])}));if(n)return Kt((function(){var t=new At((function(t,n){r._lock();var i=e(t,n,r);i&&i.then&&i.then(t,n)}));return t.finally((function(){return r._unlock()})),t._lib=!0,t}));var i=new At((function(t,n){var i=e(t,n,r);i&&i.then&&i.then(t,n)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var e=this._root();if(t=At.resolve(t),e._waitingFor)e._waitingFor=e._waitingFor.then((function(){return t}));else{e._waitingFor=t,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new At((function(n,i){t.then((function(t){return e._waitingQueue.push(zt(n.bind(null,t)))}),(function(t){return e._waitingQueue.push(zt(i.bind(null,t)))})).finally((function(){e._waitingFor===r&&(e._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new U.Abort),this.active=!1},tables:{get:(h="Transaction.tables",v=function(){return j},function(){return console.warn(h+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+G(N(),1)),v.apply(this,arguments)})},table:function(t){return new gt(t,nt.table(t).schema,this)}}),s(bt.prototype,(function(){function t(t,e,n){var r=t instanceof bt?new xt(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function e(t){return new xt(t,(function(){return I.only("")})).limit(0)}function n(t,e,n,r,i,o){for(var a=Math.min(t.length,r.length),s=-1,l=0;l<a;++l){var u=e[l];if(u!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):s>=0?t.substr(0,s)+e[s]+n.substr(s+1):null;i(t[l],u)<0&&(s=l)}return a<r.length&&"next"===o?t+n.substr(t.length):a<t.length&&"prev"===o?t.substr(0,n.length):s<0?null:t.substr(0,s)+r[s]+n.substr(s+1)}function r(e,r,i,o){var a,s,l,u,c,f,h,d=i.length;if(!i.every((function(t){return"string"==typeof t})))return t(e,"String expected.");function p(t){a=function(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}(t),s=function(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}(t),l="next"===t?Tt:Ot;var e=i.map((function(t){return{lower:s(t),upper:a(t)}})).sort((function(t,e){return l(t.lower,e.lower)}));u=e.map((function(t){return t.upper})),c=e.map((function(t){return t.lower})),f=t,h="next"===t?"":o}p("next");var g=new xt(e,(function(){return I.bound(u[0],c[d-1]+o)}));g._ondirectionchange=function(t){p(t)};var v=0;return g._addAlgorithm((function(t,e,i){var o=t.key;if("string"!=typeof o)return!1;var a=s(o);if(r(a,c,v))return!0;for(var p=null,g=v;g<d;++g){var m=n(o,a,u[g],c[g],l,f);null===m&&null===p?v=g+1:(null===p||l(p,m)>0)&&(p=m)}return e(null!==p?function(){t.continue(p+h)}:i),!1})),g}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return St(n,r)>0||0===St(n,r)&&(i||o)&&(!i||!o)?e(this):new xt(this,(function(){return I.bound(n,r,!i,!o)}))}catch(e){return t(this,fe)}},equals:function(t){return new xt(this,(function(){return I.only(t)}))},above:function(t){return new xt(this,(function(){return I.lowerBound(t,!0)}))},aboveOrEqual:function(t){return new xt(this,(function(){return I.lowerBound(t)}))},below:function(t){return new xt(this,(function(){return I.upperBound(t,!0)}))},belowOrEqual:function(t){return new xt(this,(function(){return I.upperBound(t)}))},startsWith:function(e){return"string"!=typeof e?t(this,"String expected."):this.between(e,e+ue,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):r(this,(function(t,e){return 0===t.indexOf(e[0])}),[t],ue)},equalsIgnoreCase:function(t){return r(this,(function(t,e){return t===e[0]}),[t],"")},anyOfIgnoreCase:function(){var t=T.apply(P,arguments);return 0===t.length?e(this):r(this,(function(t,e){return-1!==e.indexOf(t)}),t,"")},startsWithAnyOfIgnoreCase:function(){var t=T.apply(P,arguments);return 0===t.length?e(this):r(this,(function(t,e){return e.some((function(e){return 0===t.indexOf(e)}))}),t,ue)},anyOf:function(){var n=T.apply(P,arguments),r=Et;try{n.sort(r)}catch(e){return t(this,fe)}if(0===n.length)return e(this);var i=new xt(this,(function(){return I.bound(n[0],n[n.length-1])}));i._ondirectionchange=function(t){r="next"===t?Et:Pt,n.sort(r)};var o=0;return i._addAlgorithm((function(t,e,i){for(var a=t.key;r(a,n[o])>0;)if(++o===n.length)return e(i),!1;return 0===r(a,n[o])||(e((function(){t.continue(n[o])})),!1)})),i},notEqual:function(t){return this.inAnyRange([[-1/0,t],[t,ce]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=T.apply(P,arguments);if(0===e.length)return new xt(this);try{e.sort(Et)}catch(e){return t(this,fe)}var n=e.reduce((function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[-1/0,e]]}),null);return n.push([e[e.length-1],ce]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return e(this);if(!n.every((function(t){return void 0!==t[0]&&void 0!==t[1]&&Et(t[0],t[1])<=0})))return t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",U.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var a,s=Et;function l(t,e){return s(t[0],e[0])}try{(a=n.reduce((function(t,e){for(var n=0,r=t.length;n<r;++n){var i=t[n];if(St(e[0],i[1])<0&&St(e[1],i[0])>0){i[0]=(o=i[0],a=e[0],St(o,a)<0?o:a),i[1]=Lt(i[1],e[1]);break}}var o,a;return n===r&&t.push(e),t}),[])).sort(l)}catch(e){return t(this,fe)}var u=0,c=o?function(t){return Et(t,a[u][1])>0}:function(t){return Et(t,a[u][1])>=0},f=i?function(t){return Pt(t,a[u][0])>0}:function(t){return Pt(t,a[u][0])>=0};var h=c,d=new xt(this,(function(){return I.bound(a[0][0],a[a.length-1][1],!i,!o)}));return d._ondirectionchange=function(t){"next"===t?(h=c,s=Et):(h=f,s=Pt),a.sort(l)},d._addAlgorithm((function(t,e,n){for(var r=t.key;h(r);)if(++u===a.length)return e(n),!1;return!!function(t){return!c(t)&&!f(t)}(r)||0!==St(r,a[u][1])&&0!==St(r,a[u][0])&&(e((function(){s===Et?t.continue(a[u][0]):t.continue(a[u][1])})),!1)})),d},startsWithAnyOf:function(){var n=T.apply(P,arguments);return n.every((function(t){return"string"==typeof t}))?0===n.length?e(this):this.inAnyRange(n.map((function(t){return[t,t+ue]}))):t(this,"startsWithAnyOf() only works with strings")}}})),s(xt.prototype,(function(){function e(t,e){t.filter=Dt(t.filter,e)}function n(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Dt(r(),e())}:e,t.justLimit=n&&!r}function i(t,e){if(t.isPrimKey)return e;var n=t.table.schema.idxByName[t.index];if(!n)throw new U.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return e.index(n.name)}function o(t,e){var n=i(t,e);return t.keysOnly&&"openKeyCursor"in n?n.openKeyCursor(t.range||null,t.dir+t.unique):n.openCursor(t.range||null,t.dir+t.unique)}function s(t,e,n,r,i){var s=t.replayFilter?Dt(t.filter,t.replayFilter()):t.filter;t.or?function(){var l={},u=0;function c(){2==++u&&n()}function f(t,n,i){if(!s||s(n,i,c,r)){var o=n.primaryKey,u=""+o;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(o)),a(l,u)||(l[u]=!0,e(t,n,i))}}t.or._iterate(f,c,r,i),Ct(o(t,i),t.algorithm,f,c,r,!t.keysOnly&&t.valueMapper)}():Ct(o(t,i),Dt(t.algorithm,s),e,n,r,!t.keysOnly&&t.valueMapper)}return{_read:function(t,e){var n=this._ctx;return n.error?n.table._trans(null,ae.bind(null,n.error)):n.table._idbstore("readonly",t).then(e)},_write:function(t){var e=this._ctx;return e.error?e.table._trans(null,ae.bind(null,e.error)):e.table._idbstore(Q,t,"locked")},_addAlgorithm:function(t){var e=this._ctx;e.algorithm=Dt(e.algorithm,t)},_iterate:function(t,e,n,r){return s(this._ctx,t,e,n,r)},clone:function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&r(n,t),e._ctx=n,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var e=this._ctx;return this._read((function(n,r,i){s(e,t,n,r,i)}))},count:function(t){var e=this._ctx;if(wt(e,!0))return this._read((function(t,n,r){var o=i(e,r),a=e.range?o.count(e.range):o.count();a.onerror=xe(n),a.onsuccess=function(n){t(Math.min(n.target.result,e.limit))}}),t);var n=0;return this._read((function(t,r,i){s(e,(function(){return++n,!1}),(function(){t(n)}),r,i)}),t)},sortBy:function(t,e){var n=t.split(".").reverse(),r=n[0],i=n.length-1;function o(t,e){return e?o(t[n[e]],e-1):t[r]}var a="next"===this._ctx.dir?1:-1;function s(t,e){var n=o(t,i),r=o(e,i);return n<r?-a:n>r?a:0}return this.toArray((function(t){return t.sort(s)})).then(e)},toArray:function(t){var e=this._ctx;return this._read((function(t,n,r){if(f&&"next"===e.dir&&wt(e,!0)&&e.limit>0){var o=e.table.hook.reading.fire,a=i(e,r),l=e.limit<1/0?a.getAll(e.range,e.limit):a.getAll(e.range);l.onerror=xe(n),l.onsuccess=we(o===X?t:function(e){try{t(e.map(o))}catch(t){n(t)}})}else{var u=[];s(e,(function(t){u.push(t)}),(function(){t(u)}),n,r)}}),t)},offset:function(t){var e=this._ctx;return t<=0?this:(e.offset+=t,wt(e)?n(e,(function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n((function(){t.advance(e),e=0})),!1))}})):n(e,(function(){var e=t;return function(){return--e<0}})),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),n(this._ctx,(function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}}),!0),this},until:function(t,n){return e(this._ctx,(function(e,r,i){return!t(e.value)||(r(i),n)})),this},first:function(t){return this.limit(1).toArray((function(t){return t[0]})).then(t)},last:function(t){return this.reverse().first(t)},filter:function(t){return e(this._ctx,(function(e){return t(e.value)})),function(t,e){t.isMatch=Dt(t.isMatch,e)}(this._ctx,t),this},and:function(t){return this.filter(t)},or:function(t){return new bt(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.key,n)}))},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,n){t(n.primaryKey,n)}))},keys:function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.key)})).then((function(){return n})).then(t)},primaryKeys:function(t){var e=this._ctx;if(f&&"next"===e.dir&&wt(e,!0)&&e.limit>0)return this._read((function(t,n,r){var o=i(e,r),a=e.limit<1/0?o.getAllKeys(e.range,e.limit):o.getAllKeys(e.range);a.onerror=xe(n),a.onsuccess=we(t)})).then(t);e.keysOnly=!e.isMatch;var n=[];return this.each((function(t,e){n.push(e.primaryKey)})).then((function(){return n})).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys((function(t){return t[0]})).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var t=this._ctx,n=t.index&&t.table.schema.idxByName[t.index];if(!n||!n.multi)return this;var r={};return e(this._ctx,(function(t){var e=t.primaryKey.toString(),n=a(r,e);return r[e]=!0,!n})),this},modify:function(e){var n=this,i=this._ctx.table.hook,o=i.updating.fire,s=i.deleting.fire;return this._write((function(i,l,u,c){var f;if("function"==typeof e)f=o===Y&&s===Y?e:function(n){var r=S(n);if(!1===e.call(this,n,this))return!1;if(a(this,"value")){var i=A(r,this.value),l=o.call(this,i,this.primKey,r,c);l&&(n=this.value,t(l).forEach((function(t){w(n,t,l[t])})))}else s.call(this,this.primKey,n,c)};else if(o===Y){var h=t(e),d=h.length;f=function(t){for(var n=!1,r=0;r<d;++r){var i=h[r],o=e[i];x(t,i)!==o&&(w(t,i,o),n=!0)}return n}}else{var p=e;e=_(p),f=function(n){var i=!1,a=o.call(this,e,this.primKey,S(n),c);return a&&r(e,a),t(e).forEach((function(t){var r=e[t];x(n,t)!==r&&(w(n,t,r),i=!0)})),a&&(e=_(p)),i}}var g=0,v=0,m=!1,y=[],k=[],M=null;function C(t){return t&&(y.push(t),k.push(M)),l(new R("Error modifying one or more objects",y,v,k))}function L(){m&&v+y.length===g&&(y.length>0?C():i(v))}n.clone().raw()._iterate((function(t,e){M=e.primaryKey;var n={primKey:e.primaryKey,value:t,onsuccess:null,onerror:null};function r(t){return y.push(t),k.push(n.primKey),L(),!0}if(!1!==f.call(n,t,n)){var i=!a(n,"value");++g,b((function(){var t=i?e.delete():e.update(n.value);t._hookCtx=n,t.onerror=_e(r),t.onsuccess=be((function(){++v,L()}))}),r)}else n.onsuccess&&n.onsuccess(n.value)}),(function(){m=!0,L()}),C,u)}))},delete:function(){var t=this,e=this._ctx,n=e.range,r=e.table.hook.deleting.fire,i=r!==Y;if(!i&&wt(e)&&(e.isPrimKey&&!ge||!n))return this._write((function(t,e,r){var i=xe(e),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var a=o.result;b((function(){var e=n?r.delete(n):r.clear();e.onerror=i,e.onsuccess=function(){return t(a)}}),(function(t){return e(t)}))}}));var o=i?2e3:1e4;return this._write((function(n,a,s,l){var u=0,c=t.clone({keysOnly:!e.isMatch&&!i}).distinct().limit(o).raw(),f=[],h=function(){return c.each(i?function(t,e){f.push([e.primaryKey,e.value])}:function(t,e){f.push(e.primaryKey)}).then((function(){return i?f.sort((function(t,e){return Et(t[0],e[0])})):f.sort(Et),mt(s,l,f,i,r)})).then((function(){var t=f.length;return u+=t,f=[],t<o?u:h()}))};n(h())}))}}})),r(this,{Collection:xt,Table:gt,Transaction:yt,Version:lt,WhereClause:bt}),nt.on("versionchange",(function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+nt.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+nt.name+"'. Closing db now to resume the delete request."),nt.close()})),nt.on("blocked",(function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+nt.name+"') was blocked"):console.warn("Upgrade '"+nt.name+"' blocked by other connection holding version "+t.oldVersion/10)})),L.forEach((function(t){t(nt)}))}function ye(n,r){return t(r).forEach((function(t){var i=function t(n){if("function"==typeof n)return new n;if(e(n))return[t(n[0])];if(n&&"object"==typeof n){var r={};return ye(r,n),r}return n}(r[t]);n[t]=i})),n}function be(t){return zt((function(e){var n=e.target,r=n._hookCtx,i=r.value||n.result,o=r&&r.onsuccess;o&&o(i),t&&t(i)}),t)}function xe(t){return zt((function(e){return ke(e),t(e.target.error),!1}))}function we(t){return zt((function(e){t(e.target.result)}))}function _e(t){return zt((function(e){var n=e.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),ke(e),t(r),!1}))}function ke(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function Me(t){var n=function(e){return t.next(e)},r=o(n),i=o((function(e){return t.throw(e)}));function o(t){return function(n){var o=t(n),a=o.value;return o.done?a:a&&"function"==typeof a.then?a.then(r,i):e(a)?At.all(a).then(r,i):r(a)}}return o(n)()}function Ce(t,e,n,r,i,o,a){this.name=t,this.keyPath=e,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=a;var s="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+s}function Se(t,e,n,r){this.name=t,this.primKey=e||new Ce,this.indexes=n||[new Ce],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=m(n,(function(t){return[t.name,t]}))}function Ae(t){return 1===t.length?t[0]:t}function Le(t){var e=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return e&&e.bind(t)}return D(O,ve),s(me,K),s(me,{delete:function(t){var e=new me(t),n=e.delete();return n.onblocked=function(t){return e.on("blocked",t),this},n},exists:function(t){return new me(t).open().then((function(t){return t.close(),!0})).catch(me.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(t){var e=Le(me.dependencies.indexedDB);return e?new At((function(t,n){var r=e();r.onsuccess=function(e){t(d(e.target.result,0))},r.onerror=xe(n)})).then(t):le.dbnames.toCollection().primaryKeys(t)},defineClass:function(){return function(t){t&&r(this,t)}},applyStructure:ye,ignoreTransaction:function(t){return kt.trans?ne(kt.transless,t):t()},vip:function(t){return Kt((function(){return kt.letThrough=!0,t()}))},async:function(t){return function(){try{var e=Me(t.apply(this,arguments));return e&&"function"==typeof e.then?e:At.resolve(e)}catch(t){return ae(t)}}},spawn:function(t,e,n){try{var r=Me(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:At.resolve(r)}catch(t){return ae(t)}},currentTransaction:{get:function(){return kt.trans||null}},waitFor:function(t,e){var n=At.resolve("function"==typeof t?me.ignoreTransaction(t):t).timeout(e||6e4);return kt.trans?kt.trans.waitFor(n):n},Promise:At,debug:{get:function(){return O},set:function(t){D(t,"dexie"===t?function(){return!0}:ve)}},derive:c,extend:r,props:s,override:p,Events:se,getByKeyPath:x,setByKeyPath:w,delByKeyPath:function(t,e){"string"==typeof e?w(t,e,void 0):"length"in e&&[].map.call(e,(function(e){w(t,e,void 0)}))},shallowClone:_,deepClone:S,getObjectDiff:A,asap:v,maxKey:ce,minKey:-1/0,addons:[],connections:he,MultiModifyError:U.Modify,errnames:V,IndexSpec:Ce,TableSchema:Se,dependencies:function(){try{return{indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"2.0.4",version:"2.0.4".split(".").map((function(t){return parseInt(t)})).reduce((function(t,e,n){return t+e/Math.pow(10,2*n)})),default:me,Dexie:me}),At.rejectionMapper=function(t,e){if(!t||t instanceof z||t instanceof TypeError||t instanceof SyntaxError||!t.name||!q[t.name])return t;var n=new q[t.name](e||t.message,t);return"stack"in t&&u(n,"stack",{get:function(){return this.inner.stack}}),n},(le=new me("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==n.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach((function(t){return le.dbnames.put({name:t}).catch(Y)})),localStorage.removeItem("Dexie.DatabaseNames"))}catch(t){}}(),me})),function(t){if("object"==typeof exports)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.objectHash=t()}}((function(){return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return i(e[a][1][t]||t)}),u,u.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){(function(r,i,o,a,s,l,u,c,f){"use strict";var h=t("crypto");function d(t,e){return function(t,e){var n;if(void 0===(n="passthrough"!==e.algorithm?h.createHash(e.algorithm):new b).write&&(n.write=n.update,n.end=n.update),y(e,n).dispatch(t),n.update||n.end(""),n.digest)return n.digest("buffer"===e.encoding?void 0:e.encoding);var r=n.read();return"buffer"!==e.encoding?r.toString(e.encoding):r}(t,e=v(t,e))}(n=e.exports=d).sha1=function(t){return d(t)},n.keys=function(t){return d(t,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},n.MD5=function(t){return d(t,{algorithm:"md5",encoding:"hex"})},n.keysMD5=function(t){return d(t,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var p=h.getHashes?h.getHashes().slice():["sha1","md5"];p.push("passthrough");var g=["buffer","hex","binary","base64"];function v(t,e){e=e||{};var n={};if(n.algorithm=e.algorithm||"sha1",n.encoding=e.encoding||"hex",n.excludeValues=!!e.excludeValues,n.algorithm=n.algorithm.toLowerCase(),n.encoding=n.encoding.toLowerCase(),n.ignoreUnknown=!0===e.ignoreUnknown,n.respectType=!1!==e.respectType,n.respectFunctionNames=!1!==e.respectFunctionNames,n.respectFunctionProperties=!1!==e.respectFunctionProperties,n.unorderedArrays=!0===e.unorderedArrays,n.unorderedSets=!1!==e.unorderedSets,n.unorderedObjects=!1!==e.unorderedObjects,n.replacer=e.replacer||void 0,n.excludeKeys=e.excludeKeys||void 0,void 0===t)throw new Error("Object argument required.");for(var r=0;r<p.length;++r)p[r].toLowerCase()===n.algorithm.toLowerCase()&&(n.algorithm=p[r]);if(-1===p.indexOf(n.algorithm))throw new Error('Algorithm "'+n.algorithm+'"  not supported. supported values: '+p.join(", "));if(-1===g.indexOf(n.encoding)&&"passthrough"!==n.algorithm)throw new Error('Encoding "'+n.encoding+'"  not supported. supported values: '+g.join(", "));return n}function m(t){return"function"==typeof t&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(t))}function y(t,e,n){function r(t){return e.update?e.update(t,"utf8"):e.write(t,"utf8")}return n=n||[],{dispatch:function(e){t.replacer&&(e=t.replacer(e));var n=typeof e;return null===e&&(n="null"),this["_"+n](e)},_object:function(e){var i,a=Object.prototype.toString.call(e),s=/\[object (.*)\]/i.exec(a);if(s=(s=s?s[1]:"unknown:["+a+"]").toLowerCase(),0<=(i=n.indexOf(e)))return this.dispatch("[CIRCULAR:"+i+"]");if(n.push(e),void 0!==o&&o.isBuffer&&o.isBuffer(e))return r("buffer:"),r(e);if("object"===s||"function"===s){var l=Object.keys(e);t.unorderedObjects&&(l=l.sort()),!1===t.respectType||m(e)||l.splice(0,0,"prototype","__proto__","constructor"),t.excludeKeys&&(l=l.filter((function(e){return!t.excludeKeys(e)}))),r("object:"+l.length+":");var u=this;return l.forEach((function(n){u.dispatch(n),r(":"),t.excludeValues||u.dispatch(e[n]),r(",")}))}if(!this["_"+s]){if(t.ignoreUnknown)return r("["+s+"]");throw new Error('Unknown object type "'+s+'"')}this["_"+s](e)},_array:function(e,i){i=void 0!==i?i:!1!==t.unorderedArrays;var o=this;if(r("array:"+e.length+":"),!i||e.length<=1)return e.forEach((function(t){return o.dispatch(t)}));var a=[],s=e.map((function(e){var r=new b,i=n.slice();return y(t,r,i).dispatch(e),a=a.concat(i.slice(n.length)),r.read().toString()}));return n=n.concat(a),s.sort(),this._array(s,!1)},_date:function(t){return r("date:"+t.toJSON())},_symbol:function(t){return r("symbol:"+t.toString())},_error:function(t){return r("error:"+t.toString())},_boolean:function(t){return r("bool:"+t.toString())},_string:function(t){r("string:"+t.length+":"),r(t.toString())},_function:function(e){r("fn:"),m(e)?this.dispatch("[native]"):this.dispatch(e.toString()),!1!==t.respectFunctionNames&&this.dispatch("function-name:"+String(e.name)),t.respectFunctionProperties&&this._object(e)},_number:function(t){return r("number:"+t.toString())},_xml:function(t){return r("xml:"+t.toString())},_null:function(){return r("Null")},_undefined:function(){return r("Undefined")},_regexp:function(t){return r("regex:"+t.toString())},_uint8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return r("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return r("uint8array:"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return r("uint16array:"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return r("uint32array:"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return r("float32array:"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return r("float64array:"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return r("arraybuffer:"),this.dispatch(new Uint8Array(t))},_url:function(t){return r("url:"+t.toString())},_map:function(e){r("map:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_set:function(e){r("set:");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_blob:function(){if(t.ignoreUnknown)return r("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return r("domwindow")},_process:function(){return r("process")},_timer:function(){return r("timer")},_pipe:function(){return r("pipe")},_tcp:function(){return r("tcp")},_udp:function(){return r("udp")},_tty:function(){return r("tty")},_statwatcher:function(){return r("statwatcher")},_securecontext:function(){return r("securecontext")},_connection:function(){return r("connection")},_zlib:function(){return r("zlib")},_context:function(){return r("context")},_nodescript:function(){return r("nodescript")},_httpparser:function(){return r("httpparser")},_dataview:function(){return r("dataview")},_signal:function(){return r("signal")},_fsevent:function(){return r("fsevent")},_tlswrap:function(){return r("tlswrap")}}}function b(){return{buf:"",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}n.writeToStream=function(t,e,n){return void 0===n&&(n=e,e={}),y(e=v(t,e),n).dispatch(t)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_8f7e6cc8.js","/")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(t,e,n){(function(t,e,r,i,o,a,s,l,u){!function(t){"use strict";var e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="+".charCodeAt(0),r="/".charCodeAt(0),i="0".charCodeAt(0),o="a".charCodeAt(0),a="A".charCodeAt(0),s="-".charCodeAt(0),l="_".charCodeAt(0);function u(t){var e=t.charCodeAt(0);return e===n||e===s?62:e===r||e===l?63:e<i?-1:e<i+10?e-i+26+26:e<a+26?e-a:e<o+26?e-o+26:void 0}t.toByteArray=function(t){var n,r,i,o,a;if(0<t.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var s=t.length;o="="===t.charAt(s-2)?2:"="===t.charAt(s-1)?1:0,a=new e(3*t.length/4-o),r=0<o?t.length-4:t.length;var l=0;function c(t){a[l++]=t}for(n=0;n<r;n+=4,3)c((16711680&(i=u(t.charAt(n))<<18|u(t.charAt(n+1))<<12|u(t.charAt(n+2))<<6|u(t.charAt(n+3))))>>16),c((65280&i)>>8),c(255&i);return 2==o?c(255&(i=u(t.charAt(n))<<2|u(t.charAt(n+1))>>4)):1==o&&(c((i=u(t.charAt(n))<<10|u(t.charAt(n+1))<<4|u(t.charAt(n+2))>>2)>>8&255),c(255&i)),a},t.fromByteArray=function(t){var e,n,r,i,o=t.length%3,a="";function s(t){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)}for(e=0,r=t.length-o;e<r;e+=3)a+=s((i=n=(t[e]<<16)+(t[e+1]<<8)+t[e+2])>>18&63)+s(i>>12&63)+s(i>>6&63)+s(63&i);switch(o){case 1:a+=s((n=t[t.length-1])>>2),a+=s(n<<4&63),a+="==";break;case 2:a+=s((n=(t[t.length-2]<<8)+t[t.length-1])>>10),a+=s(n>>4&63),a+=s(n<<2&63),a+="="}return a}}(void 0===n?this.base64js={}:n)}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:10}],3:[function(t,e,n){(function(e,r,i,o,a,s,l,u,c){var f=t("base64-js"),h=t("ieee754");function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var r,o,a,s=typeof t;if("base64"===e&&"string"==s)for(t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t);t.length%4!=0;)t+="=";if("number"==s)r=E(t);else if("string"==s)r=i.byteLength(t,e);else{if("object"!=s)throw new Error("First argument needs to be a number, array or string.");r=E(t.length)}if(i._useTypedArrays?o=i._augment(new Uint8Array(r)):((o=this).length=r,o._isBuffer=!0),i._useTypedArrays&&"number"==typeof t.byteLength)o._set(t);else if(function(t){return P(t)||i.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}(t))for(a=0;a<r;a++)i.isBuffer(t)?o[a]=t.readUInt8(a):o[a]=t[a];else if("string"==s)o.write(t,0,e);else if("number"==s&&!i._useTypedArrays&&!n)for(a=0;a<r;a++)o[a]=0;return o}function d(t,e,n,r){return i._charsWritten=I(function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function p(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}function g(t,e,n,r){r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+1<t.length,"Trying to read beyond buffer length"));var i,o=t.length;if(!(o<=e))return n?(i=t[e],e+1<o&&(i|=t[e+1]<<8)):(i=t[e]<<8,e+1<o&&(i|=t[e+1])),i}function v(t,e,n,r){r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+3<t.length,"Trying to read beyond buffer length"));var i,o=t.length;if(!(o<=e))return n?(e+2<o&&(i=t[e+2]<<16),e+1<o&&(i|=t[e+1]<<8),i|=t[e],e+3<o&&(i+=t[e+3]<<24>>>0)):(e+1<o&&(i=t[e+1]<<16),e+2<o&&(i|=t[e+2]<<8),e+3<o&&(i|=t[e+3]),i+=t[e]<<24>>>0),i}function m(t,e,n,r){if(r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+1<t.length,"Trying to read beyond buffer length")),!(t.length<=e)){var i=g(t,e,n,!0);return 32768&i?-1*(65535-i+1):i}}function y(t,e,n,r){if(r||(B("boolean"==typeof n,"missing or invalid endian"),B(null!=e,"missing offset"),B(e+3<t.length,"Trying to read beyond buffer length")),!(t.length<=e)){var i=v(t,e,n,!0);return 2147483648&i?-1*(4294967295-i+1):i}}function b(t,e,n,r){return r||(B("boolean"==typeof n,"missing or invalid endian"),B(e+3<t.length,"Trying to read beyond buffer length")),h.read(t,e,n,23,4)}function x(t,e,n,r){return r||(B("boolean"==typeof n,"missing or invalid endian"),B(e+7<t.length,"Trying to read beyond buffer length")),h.read(t,e,n,52,8)}function w(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<t.length,"trying to write beyond buffer length"),N(e,65535));var o=t.length;if(!(o<=n))for(var a=0,s=Math.min(o-n,2);a<s;a++)t[n+a]=(e&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function _(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"trying to write beyond buffer length"),N(e,4294967295));var o=t.length;if(!(o<=n))for(var a=0,s=Math.min(o-n,4);a<s;a++)t[n+a]=e>>>8*(r?a:3-a)&255}function k(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+1<t.length,"Trying to write beyond buffer length"),G(e,32767,-32768)),t.length<=n||w(t,0<=e?e:65535+e+1,n,r,i)}function M(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"Trying to write beyond buffer length"),G(e,2147483647,-2147483648)),t.length<=n||_(t,0<=e?e:4294967295+e+1,n,r,i)}function C(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+3<t.length,"Trying to write beyond buffer length"),W(e,34028234663852886e22,-34028234663852886e22)),t.length<=n||h.write(t,e,n,r,23,4)}function S(t,e,n,r,i){i||(B(null!=e,"missing value"),B("boolean"==typeof r,"missing or invalid endian"),B(null!=n,"missing offset"),B(n+7<t.length,"Trying to write beyond buffer length"),W(e,17976931348623157e292,-17976931348623157e292)),t.length<=n||h.write(t,e,n,r,52,8)}n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(t){return!1}}(),i.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.isBuffer=function(t){return!(null==t||!t._isBuffer)},i.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"hex":n=t.length/2;break;case"utf8":case"utf-8":n=O(t).length;break;case"ascii":case"binary":case"raw":n=t.length;break;case"base64":n=D(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;default:throw new Error("Unknown encoding")}return n},i.concat=function(t,e){if(B(P(t),"Usage: Buffer.concat(list, [totalLength])\nlist should be an Array."),0===t.length)return new i(0);if(1===t.length)return t[0];var n;if("number"!=typeof e)for(n=e=0;n<t.length;n++)e+=t[n].length;var r=new i(e),o=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(r,o),o+=a.length}return r},i.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var o=r;r=e,e=n,n=o}e=Number(e)||0;var a,s=this.length-e;switch(n?s<(n=Number(n))&&(n=s):n=s,r=String(r||"utf8").toLowerCase()){case"hex":a=function(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?o<(r=Number(r))&&(r=o):r=o;var a=e.length;B(a%2==0,"Invalid hex string"),a/2<r&&(r=a/2);for(var s=0;s<r;s++){var l=parseInt(e.substr(2*s,2),16);B(!isNaN(l),"Invalid hex string"),t[n+s]=l}return i._charsWritten=2*s,s}(this,t,e,n);break;case"utf8":case"utf-8":a=function(t,e,n,r){return i._charsWritten=I(O(e),t,n,r)}(this,t,e,n);break;case"ascii":a=d(this,t,e,n);break;case"binary":a=function(t,e,n,r){return d(t,e,n,r)}(this,t,e,n);break;case"base64":a=function(t,e,n,r){return i._charsWritten=I(D(e),t,n,r)}(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":a=function(t,e,n,r){return i._charsWritten=I(function(t){for(var e,n,r,i=[],o=0;o<t.length;o++)n=(e=t.charCodeAt(o))>>8,r=e%256,i.push(r),i.push(n);return i}(e),t,n,r)}(this,t,e,n);break;default:throw new Error("Unknown encoding")}return a},i.prototype.toString=function(t,e,n){var r,i=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,(n=void 0!==n?Number(n):n=i.length)===e)return"";switch(t){case"hex":r=function(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;o++)i+=T(t[o]);return i}(i,e,n);break;case"utf8":case"utf-8":r=function(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(r+=F(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+F(i)}(i,e,n);break;case"ascii":r=p(i,e,n);break;case"binary":r=function(t,e,n){return p(t,e,n)}(i,e,n);break;case"base64":r=function(t,e,n){return 0===e&&n===t.length?f.fromByteArray(t):f.fromByteArray(t.slice(e,n))}(i,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(i,e,n);break;default:throw new Error("Unknown encoding")}return r},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e=e||0,r!==n&&0!==t.length&&0!==this.length){B(n<=r,"sourceEnd < sourceStart"),B(0<=e&&e<t.length,"targetStart out of bounds"),B(0<=n&&n<this.length,"sourceStart out of bounds"),B(0<=r&&r<=this.length,"sourceEnd out of bounds"),r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var o=r-n;if(o<100||!i._useTypedArrays)for(var a=0;a<o;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+o),e)}},i.prototype.slice=function(t,e){var n=this.length;if(t=L(t,n,0),e=L(e,n,n),i._useTypedArrays)return i._augment(this.subarray(t,e));for(var r=e-t,o=new i(r,void 0,!0),a=0;a<r;a++)o[a]=this[a+t];return o},i.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},i.prototype.readUInt8=function(t,e){if(e||(B(null!=t,"missing offset"),B(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return this[t]},i.prototype.readUInt16LE=function(t,e){return g(this,t,!0,e)},i.prototype.readUInt16BE=function(t,e){return g(this,t,!1,e)},i.prototype.readUInt32LE=function(t,e){return v(this,t,!0,e)},i.prototype.readUInt32BE=function(t,e){return v(this,t,!1,e)},i.prototype.readInt8=function(t,e){if(e||(B(null!=t,"missing offset"),B(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length))return 128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){return m(this,t,!0,e)},i.prototype.readInt16BE=function(t,e){return m(this,t,!1,e)},i.prototype.readInt32LE=function(t,e){return y(this,t,!0,e)},i.prototype.readInt32BE=function(t,e){return y(this,t,!1,e)},i.prototype.readFloatLE=function(t,e){return b(this,t,!0,e)},i.prototype.readFloatBE=function(t,e){return b(this,t,!1,e)},i.prototype.readDoubleLE=function(t,e){return x(this,t,!0,e)},i.prototype.readDoubleBE=function(t,e){return x(this,t,!1,e)},i.prototype.writeUInt8=function(t,e,n){n||(B(null!=t,"missing value"),B(null!=e,"missing offset"),B(e<this.length,"trying to write beyond buffer length"),N(t,255)),e>=this.length||(this[e]=t)},i.prototype.writeUInt16LE=function(t,e,n){w(this,t,e,!0,n)},i.prototype.writeUInt16BE=function(t,e,n){w(this,t,e,!1,n)},i.prototype.writeUInt32LE=function(t,e,n){_(this,t,e,!0,n)},i.prototype.writeUInt32BE=function(t,e,n){_(this,t,e,!1,n)},i.prototype.writeInt8=function(t,e,n){n||(B(null!=t,"missing value"),B(null!=e,"missing offset"),B(e<this.length,"Trying to write beyond buffer length"),G(t,127,-128)),e>=this.length||(0<=t?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},i.prototype.writeInt16LE=function(t,e,n){k(this,t,e,!0,n)},i.prototype.writeInt16BE=function(t,e,n){k(this,t,e,!1,n)},i.prototype.writeInt32LE=function(t,e,n){M(this,t,e,!0,n)},i.prototype.writeInt32BE=function(t,e,n){M(this,t,e,!1,n)},i.prototype.writeFloatLE=function(t,e,n){C(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){C(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){S(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){S(this,t,e,!1,n)},i.prototype.fill=function(t,e,n){if(t=t||0,e=e||0,n=n||this.length,"string"==typeof t&&(t=t.charCodeAt(0)),B("number"==typeof t&&!isNaN(t),"value is not a number"),B(e<=n,"end < start"),n!==e&&0!==this.length){B(0<=e&&e<this.length,"start out of bounds"),B(0<=n&&n<=this.length,"end out of bounds");for(var r=e;r<n;r++)this[r]=t}},i.prototype.inspect=function(){for(var t=[],e=this.length,r=0;r<e;r++)if(t[r]=T(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]="...";break}return"<Buffer "+t.join(" ")+">"},i.prototype.toArrayBuffer=function(){if("undefined"==typeof Uint8Array)throw new Error("Buffer.toArrayBuffer not supported in this browser");if(i._useTypedArrays)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer};var A=i.prototype;function L(t,e,n){return"number"!=typeof t?n:e<=(t=~~t)?e:0<=t?t:0<=(t+=e)?t:0}function E(t){return(t=~~Math.ceil(+t))<0?0:t}function P(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function T(t){return t<16?"0"+t.toString(16):t.toString(16)}function O(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(t.charCodeAt(n));else{var i=n;55296<=r&&r<=57343&&n++;for(var o=encodeURIComponent(t.slice(i,n+1)).substr(1).split("%"),a=0;a<o.length;a++)e.push(parseInt(o[a],16))}}return e}function D(t){return f.toByteArray(t)}function I(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function F(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}function N(t,e){B("number"==typeof t,"cannot write a non-number as a number"),B(0<=t,"specified a negative value for writing an unsigned value"),B(t<=e,"value is larger than maximum value for type"),B(Math.floor(t)===t,"value has a fractional component")}function G(t,e,n){B("number"==typeof t,"cannot write a non-number as a number"),B(t<=e,"value larger than maximum allowed value"),B(n<=t,"value smaller than minimum allowed value"),B(Math.floor(t)===t,"value has a fractional component")}function W(t,e,n){B("number"==typeof t,"cannot write a non-number as a number"),B(t<=e,"value larger than maximum allowed value"),B(n<=t,"value smaller than minimum allowed value")}function B(t,e){if(!t)throw new Error(e||"Failed assertion")}i._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=A.get,t.set=A.set,t.write=A.write,t.toString=A.toString,t.toLocaleString=A.toString,t.toJSON=A.toJSON,t.copy=A.copy,t.slice=A.slice,t.readUInt8=A.readUInt8,t.readUInt16LE=A.readUInt16LE,t.readUInt16BE=A.readUInt16BE,t.readUInt32LE=A.readUInt32LE,t.readUInt32BE=A.readUInt32BE,t.readInt8=A.readInt8,t.readInt16LE=A.readInt16LE,t.readInt16BE=A.readInt16BE,t.readInt32LE=A.readInt32LE,t.readInt32BE=A.readInt32BE,t.readFloatLE=A.readFloatLE,t.readFloatBE=A.readFloatBE,t.readDoubleLE=A.readDoubleLE,t.readDoubleBE=A.readDoubleBE,t.writeUInt8=A.writeUInt8,t.writeUInt16LE=A.writeUInt16LE,t.writeUInt16BE=A.writeUInt16BE,t.writeUInt32LE=A.writeUInt32LE,t.writeUInt32BE=A.writeUInt32BE,t.writeInt8=A.writeInt8,t.writeInt16LE=A.writeInt16LE,t.writeInt16BE=A.writeInt16BE,t.writeInt32LE=A.writeInt32LE,t.writeInt32BE=A.writeInt32BE,t.writeFloatLE=A.writeFloatLE,t.writeFloatBE=A.writeFloatBE,t.writeDoubleLE=A.writeDoubleLE,t.writeDoubleBE=A.writeDoubleBE,t.fill=A.fill,t.inspect=A.inspect,t.toArrayBuffer=A.toArrayBuffer,t}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(t,e,n){(function(n,r,i,o,a,s,l,u,c){i=t("buffer").Buffer;var f=new i(4);f.fill(0),e.exports={hash:function(t,e,n,r){return i.isBuffer(t)||(t=new i(t)),function(t,e,n){for(var r=new i(e),o=n?r.writeInt32BE:r.writeInt32LE,a=0;a<t.length;a++)o.call(r,t[a],4*a,!0);return r}(e(function(t,e){if(t.length%4!=0){var n=t.length+(4-t.length%4);t=i.concat([t,f],n)}for(var r=[],o=e?t.readInt32BE:t.readInt32LE,a=0;a<t.length;a+=4)r.push(o.call(t,a));return r}(t,r),8*t.length),n,r)}}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],5:[function(t,e,n){(function(e,r,i,o,a,s,l,u,c){i=t("buffer").Buffer;var f=t("./sha"),h=t("./sha256"),d=t("./rng"),p={sha1:f,sha256:h,md5:t("./md5")},g=64,v=new i(g);function m(t,e){var n=p[t=t||"sha1"],r=[];return n||y("algorithm:",t,"is not yet supported"),{update:function(t){return i.isBuffer(t)||(t=new i(t)),r.push(t),t.length,this},digest:function(t){var o=i.concat(r),a=e?function(t,e,n){i.isBuffer(e)||(e=new i(e)),i.isBuffer(n)||(n=new i(n)),e.length>g?e=t(e):e.length<g&&(e=i.concat([e,v],g));for(var r=new i(g),o=new i(g),a=0;a<g;a++)r[a]=54^e[a],o[a]=92^e[a];var s=t(i.concat([r,n]));return t(i.concat([o,s]))}(n,e,o):n(o);return r=null,t?a.toString(t):a}}}function y(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}v.fill(0),n.createHash=function(t){return m(t)},n.createHmac=function(t,e){return m(t,e)},n.randomBytes=function(t,e){if(!e||!e.call)return new i(d(t));try{e.call(this,void 0,new i(d(t)))}catch(t){e(t)}},function(t,e){for(var n in t)e(t[n])}(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],(function(t){n[t]=function(){y("sorry,",t,"is not implemented yet")}}))}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:10}],6:[function(t,e,n){(function(n,r,i,o,a,s,l,u,c){var f=t("./helpers");function h(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=n,l=r,u=i,c=o;r=m(r=m(r=m(r=m(r=v(r=v(r=v(r=v(r=g(r=g(r=g(r=g(r=p(r=p(r=p(r=p(r,i=p(i,o=p(o,n=p(n,r,i,o,t[a+0],7,-680876936),r,i,t[a+1],12,-389564586),n,r,t[a+2],17,606105819),o,n,t[a+3],22,-1044525330),i=p(i,o=p(o,n=p(n,r,i,o,t[a+4],7,-176418897),r,i,t[a+5],12,1200080426),n,r,t[a+6],17,-1473231341),o,n,t[a+7],22,-45705983),i=p(i,o=p(o,n=p(n,r,i,o,t[a+8],7,1770035416),r,i,t[a+9],12,-1958414417),n,r,t[a+10],17,-42063),o,n,t[a+11],22,-1990404162),i=p(i,o=p(o,n=p(n,r,i,o,t[a+12],7,1804603682),r,i,t[a+13],12,-40341101),n,r,t[a+14],17,-1502002290),o,n,t[a+15],22,1236535329),i=g(i,o=g(o,n=g(n,r,i,o,t[a+1],5,-165796510),r,i,t[a+6],9,-1069501632),n,r,t[a+11],14,643717713),o,n,t[a+0],20,-373897302),i=g(i,o=g(o,n=g(n,r,i,o,t[a+5],5,-701558691),r,i,t[a+10],9,38016083),n,r,t[a+15],14,-660478335),o,n,t[a+4],20,-405537848),i=g(i,o=g(o,n=g(n,r,i,o,t[a+9],5,568446438),r,i,t[a+14],9,-1019803690),n,r,t[a+3],14,-187363961),o,n,t[a+8],20,1163531501),i=g(i,o=g(o,n=g(n,r,i,o,t[a+13],5,-1444681467),r,i,t[a+2],9,-51403784),n,r,t[a+7],14,1735328473),o,n,t[a+12],20,-1926607734),i=v(i,o=v(o,n=v(n,r,i,o,t[a+5],4,-378558),r,i,t[a+8],11,-2022574463),n,r,t[a+11],16,1839030562),o,n,t[a+14],23,-35309556),i=v(i,o=v(o,n=v(n,r,i,o,t[a+1],4,-1530992060),r,i,t[a+4],11,1272893353),n,r,t[a+7],16,-155497632),o,n,t[a+10],23,-1094730640),i=v(i,o=v(o,n=v(n,r,i,o,t[a+13],4,681279174),r,i,t[a+0],11,-358537222),n,r,t[a+3],16,-722521979),o,n,t[a+6],23,76029189),i=v(i,o=v(o,n=v(n,r,i,o,t[a+9],4,-640364487),r,i,t[a+12],11,-421815835),n,r,t[a+15],16,530742520),o,n,t[a+2],23,-995338651),i=m(i,o=m(o,n=m(n,r,i,o,t[a+0],6,-198630844),r,i,t[a+7],10,1126891415),n,r,t[a+14],15,-1416354905),o,n,t[a+5],21,-57434055),i=m(i,o=m(o,n=m(n,r,i,o,t[a+12],6,1700485571),r,i,t[a+3],10,-1894986606),n,r,t[a+10],15,-1051523),o,n,t[a+1],21,-2054922799),i=m(i,o=m(o,n=m(n,r,i,o,t[a+8],6,1873313359),r,i,t[a+15],10,-30611744),n,r,t[a+6],15,-1560198380),o,n,t[a+13],21,1309151649),i=m(i,o=m(o,n=m(n,r,i,o,t[a+4],6,-145523070),r,i,t[a+11],10,-1120210379),n,r,t[a+2],15,718787259),o,n,t[a+9],21,-343485551),n=y(n,s),r=y(r,l),i=y(i,u),o=y(o,c)}return Array(n,r,i,o)}function d(t,e,n,r,i,o){return y(function(t,e){return t<<e|t>>>32-e}(y(y(e,t),y(r,o)),i),n)}function p(t,e,n,r,i,o,a){return d(e&n|~e&r,t,e,i,o,a)}function g(t,e,n,r,i,o,a){return d(e&r|n&~r,t,e,i,o,a)}function v(t,e,n,r,i,o,a){return d(e^n^r,t,e,i,o,a)}function m(t,e,n,r,i,o,a){return d(n^(e|~r),t,e,i,o,a)}function y(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}e.exports=function(t){return f.hash(t,h,16)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],7:[function(t,e,n){(function(t,n,r,i,o,a,s,l,u){var c;c=function(t){for(var e,n=new Array(t),r=0;r<t;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n},e.exports=c}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:10}],8:[function(t,e,n){(function(n,r,i,o,a,s,l,u,c){var f=t("./helpers");function h(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n,r=Array(80),i=1732584193,o=-271733879,a=-1732584194,s=271733878,l=-1009589776,u=0;u<t.length;u+=16){for(var c=i,f=o,h=a,v=s,m=l,y=0;y<80;y++){r[y]=y<16?t[u+y]:g(r[y-3]^r[y-8]^r[y-14]^r[y-16],1);var b=p(p(g(i,5),d(y,o,a,s)),p(p(l,r[y]),(n=y)<20?1518500249:n<40?1859775393:n<60?-1894007588:-899497514));l=s,s=a,a=g(o,30),o=i,i=b}i=p(i,c),o=p(o,f),a=p(a,h),s=p(s,v),l=p(l,m)}return Array(i,o,a,s,l)}function d(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function p(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function g(t,e){return t<<e|t>>>32-e}e.exports=function(t){return f.hash(t,h,20,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],9:[function(t,e,n){(function(n,r,i,o,a,s,l,u,c){function f(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function h(t,e){return t>>>e|t<<32-e}function d(t,e){return t>>>e}function p(t,e){var n,r,i,o,a,s,l,u,c,p,g,v,m,y,b,x,w,_,k=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),M=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),C=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var S=0;S<t.length;S+=16){n=M[0],r=M[1],i=M[2],o=M[3],a=M[4],s=M[5],l=M[6],u=M[7];for(var A=0;A<64;A++)C[A]=A<16?t[A+S]:f(f(f(h(_=C[A-2],17)^h(_,19)^d(_,10),C[A-7]),h(w=C[A-15],7)^h(w,18)^d(w,3)),C[A-16]),c=f(f(f(f(u,h(x=a,6)^h(x,11)^h(x,25)),(b=a)&s^~b&l),k[A]),C[A]),p=f(h(y=n,2)^h(y,13)^h(y,22),(g=n)&(v=r)^g&(m=i)^v&m),u=l,l=s,s=a,a=f(o,c),o=i,i=r,r=n,n=f(c,p);M[0]=f(n,M[0]),M[1]=f(r,M[1]),M[2]=f(i,M[2]),M[3]=f(o,M[3]),M[4]=f(a,M[4]),M[5]=f(s,M[5]),M[6]=f(l,M[6]),M[7]=f(u,M[7])}return M}var g=t("./helpers");e.exports=function(t){return g.hash(t,p,32,!0)}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:10}],10:[function(t,e,n){(function(t,n,r,i,o,a,s,l,u){function c(){}(t=e.exports={}).nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener("message",(function(t){var e=t.source;e!==window&&null!==e||"process-tick"!==t.data||(t.stopPropagation(),0<n.length&&n.shift()())}),!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),t.title="browser",t.browser=!0,t.env={},t.argv=[],t.on=c,t.addListener=c,t.once=c,t.off=c,t.removeListener=c,t.removeAllListeners=c,t.emit=c,t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:10}],11:[function(t,e,n){(function(t,e,r,i,o,a,s,l,u){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,d=t[e+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=s;0<c;o=256*o+t[e+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+f],f+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=u}return(d?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+f?h/l:h*Math.pow(2,1-f))*l&&(a++,l/=2),c<=a+f?(s=0,a=c):1<=a+f?(s=(e*l-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));8<=i;t[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[n+d]=255&a,d+=p,a/=256,u-=8);t[n+d-p]|=128*g}}).call(this,t("lYpoI2"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/ieee754/index.js","/node_modules/ieee754")},{buffer:3,lYpoI2:10}]},{},[1])(1)}));