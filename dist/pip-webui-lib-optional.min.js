function uiCodemirrorDirective(t,e){function n(t,n,s,l){var u=angular.extend({value:n.text()},e.codemirror||{},t.$eval(s.uiCodemirror),t.$eval(s.uiCodemirrorOpts)),c=r(n,u);i(c,s.uiCodemirror||s.uiCodemirrorOpts,t),o(c,l,t),a(c,s.uiRefresh,t),t.$on("CodeMirror",function(t,e){if(!angular.isFunction(e))throw new Error("the CodeMirror event requires a callback function");e(c)}),angular.isFunction(u.onLoad)&&u.onLoad(c)}function r(t,e){var n;return"TEXTAREA"===t[0].tagName?n=window.CodeMirror.fromTextArea(t[0],e):(t.html(""),n=new window.CodeMirror(function(e){t.append(e)},e)),n}function i(t,e,n){function r(e,n){angular.isObject(e)&&i.forEach(function(r){if(e.hasOwnProperty(r)){if(n&&e[r]===n[r])return;t.setOption(r,e[r])}})}if(e){var i=Object.keys(window.CodeMirror.defaults);n.$watch(e,r,!0)}}function o(t,e,n){e&&(e.$formatters.push(function(t){if(angular.isUndefined(t)||null===t)return"";if(angular.isObject(t)||angular.isArray(t))throw new Error("ui-codemirror cannot use an object or an array as a model");return t}),e.$render=function(){var n=e.$viewValue||"";t.setValue(n)},t.on("change",function(t){var r=t.getValue();r!==e.$viewValue&&n.$evalAsync(function(){e.$setViewValue(r)})}))}function a(e,n,r){n&&r.$watch(n,function(n,r){n!==r&&t(function(){e.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return n}}}!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function(t){function e(t){if(t in f.style)return t;for(var e=["Moz","Webkit","O","ms"],n=t.charAt(0).toUpperCase()+t.substr(1),r=0;r<e.length;++r){var i=e[r]+n;if(i in f.style)return i}}function n(){return f.style[d.transform]="",f.style[d.transform]="rotateY(90deg)",""!==f.style[d.transform]}function r(t){return"string"==typeof t&&this.parse(t),this}function i(t,e,n){e===!0?t.queue(n):e?t.queue(e,n):t.each(function(){n.call(this)})}function o(e){var n=[];return t.each(e,function(e){e=t.camelCase(e),e=t.transit.propertyMap[e]||t.cssProps[e]||e,e=l(e),d[e]&&(e=l(d[e])),t.inArray(e,n)===-1&&n.push(e)}),n}function a(e,n,r,i){var a=o(e);t.cssEase[r]&&(r=t.cssEase[r]);var s=""+c(n)+" "+r;parseInt(i,10)>0&&(s+=" "+c(i));var l=[];return t.each(a,function(t,e){l.push(e+" "+s)}),l.join(", ")}function s(e,n){n||(t.cssNumber[e]=!0),t.transit.propertyMap[e]=d.transform,t.cssHooks[e]={get:function(n){var r=t(n).css("transit:transform");return r.get(e)},set:function(n,r){var i=t(n).css("transit:transform");i.setFromString(e,r),t(n).css({"transit:transform":i})}}}function l(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function u(t,e){return"string"!=typeof t||t.match(/^[\-0-9\.]+$/)?""+t+e:t}function c(e){var n=e;return"string"!=typeof n||n.match(/^[\-0-9\.]+/)||(n=t.fx.speeds[n]||t.fx.speeds._default),u(n,"ms")}t.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var f=document.createElement("div"),d={},h=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;d.transition=e("transition"),d.transitionDelay=e("transitionDelay"),d.transform=e("transform"),d.transformOrigin=e("transformOrigin"),d.filter=e("Filter"),d.transform3d=n();var p={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},g=d.transitionEnd=p[d.transition]||null;for(var v in d)d.hasOwnProperty(v)&&"undefined"==typeof t.support[v]&&(t.support[v]=d[v]);return f=null,t.cssEase={_default:"ease",in:"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},t.cssHooks["transit:transform"]={get:function(e){return t(e).data("transform")||new r},set:function(e,n){var i=n;i instanceof r||(i=new r(i)),"WebkitTransform"!==d.transform||h?e.style[d.transform]=i.toString():e.style[d.transform]=i.toString(!0),t(e).data("transform",i)}},t.cssHooks.transform={set:t.cssHooks["transit:transform"].set},t.cssHooks.filter={get:function(t){return t.style[d.filter]},set:function(t,e){t.style[d.filter]=e}},t.fn.jquery<"1.8"&&(t.cssHooks.transformOrigin={get:function(t){return t.style[d.transformOrigin]},set:function(t,e){t.style[d.transformOrigin]=e}},t.cssHooks.transition={get:function(t){return t.style[d.transition]},set:function(t,e){t.style[d.transition]=e}}),s("scale"),s("scaleX"),s("scaleY"),s("translate"),s("rotate"),s("rotateX"),s("rotateY"),s("rotate3d"),s("perspective"),s("skewX"),s("skewY"),s("x",!0),s("y",!0),r.prototype={setFromString:function(t,e){var n="string"==typeof e?e.split(","):e.constructor===Array?e:[e];n.unshift(t),r.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);this.setter[t]?this.setter[t].apply(this,e):this[t]=e.join(",")},get:function(t){return this.getter[t]?this.getter[t].apply(this):this[t]||0},setter:{rotate:function(t){this.rotate=u(t,"deg")},rotateX:function(t){this.rotateX=u(t,"deg")},rotateY:function(t){this.rotateY=u(t,"deg")},scale:function(t,e){void 0===e&&(e=t),this.scale=t+","+e},skewX:function(t){this.skewX=u(t,"deg")},skewY:function(t){this.skewY=u(t,"deg")},perspective:function(t){this.perspective=u(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==t&&void 0!==t&&(this._translateX=u(t,"px")),null!==e&&void 0!==e&&(this._translateY=u(e,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");return t[0]&&(t[0]=parseFloat(t[0])),t[1]&&(t[1]=parseFloat(t[1])),t[0]===t[1]?t[0]:t},rotate3d:function(){for(var t=(this.rotate3d||"0,0,0,0deg").split(","),e=0;e<=3;++e)t[e]&&(t[e]=parseFloat(t[e]));return t[3]&&(t[3]=u(t[3],"deg")),t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,n,r){e.setFromString(n,r)})},toString:function(t){var e=[];for(var n in this)if(this.hasOwnProperty(n)){if(!d.transform3d&&("rotateX"===n||"rotateY"===n||"perspective"===n||"transformOrigin"===n))continue;"_"!==n[0]&&(t&&"scale"===n?e.push(n+"3d("+this[n]+",1)"):t&&"translate"===n?e.push(n+"3d("+this[n]+",0)"):e.push(n+"("+this[n]+")"))}return e.join(" ")}},t.fn.transition=t.fn.transit=function(e,n,r,o){var s=this,l=0,u=!0,f=t.extend(!0,{},e);"function"==typeof n&&(o=n,n=void 0),"object"==typeof n&&(r=n.easing,l=n.delay||0,u="undefined"==typeof n.queue||n.queue,o=n.complete,n=n.duration),"function"==typeof r&&(o=r,r=void 0),"undefined"!=typeof f.easing&&(r=f.easing,delete f.easing),"undefined"!=typeof f.duration&&(n=f.duration,delete f.duration),"undefined"!=typeof f.complete&&(o=f.complete,delete f.complete),"undefined"!=typeof f.queue&&(u=f.queue,delete f.queue),"undefined"!=typeof f.delay&&(l=f.delay,delete f.delay),"undefined"==typeof n&&(n=t.fx.speeds._default),"undefined"==typeof r&&(r=t.cssEase._default),n=c(n);var h=a(f,n,r,l),p=t.transit.enabled&&d.transition,v=p?parseInt(n,10)+parseInt(l,10):0;if(0===v){var m=function(t){s.css(f),o&&o.apply(s),t&&t()};return i(s,u,m),s}var y={},x=function(e){var n=!1,r=function(){n&&s.unbind(g,r),v>0&&s.each(function(){this.style[d.transition]=y[this]||null}),"function"==typeof o&&o.apply(s),"function"==typeof e&&e()};v>0&&g&&t.transit.useTransitionEnd?(n=!0,s.bind(g,r)):window.setTimeout(r,v),s.each(function(){v>0&&(this.style[d.transition]=h),t(this).css(f)})},b=function(t){this.offsetWidth,x(t)};return i(s,u,b),this},t.transit.getTransitionValue=a,t}),function(t){function e(t){var e=t.length,r=n.type(t);return"function"!==r&&!n.isWindow(t)&&(!(1!==t.nodeType||!e)||("array"===r||0===e||"number"==typeof e&&e>0&&e-1 in t))}if(!t.jQuery){var n=function(t,e){return new n.fn.init(t,e)};n.isWindow=function(t){return null!=t&&t==t.window},n.type=function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?i[a.call(t)]||"object":typeof t},n.isArray=Array.isArray||function(t){return"array"===n.type(t)},n.isPlainObject=function(t){var e;if(!t||"object"!==n.type(t)||t.nodeType||n.isWindow(t))return!1;try{if(t.constructor&&!o.call(t,"constructor")&&!o.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(t){return!1}for(e in t);return void 0===e||o.call(t,e)},n.each=function(t,n,r){var i,o=0,a=t.length,s=e(t);if(r){if(s)for(;o<a&&(i=n.apply(t[o],r),i!==!1);o++);else for(o in t)if(i=n.apply(t[o],r),i===!1)break}else if(s)for(;o<a&&(i=n.call(t[o],o,t[o]),i!==!1);o++);else for(o in t)if(i=n.call(t[o],o,t[o]),i===!1)break;return t},n.data=function(t,e,i){if(void 0===i){var o=t[n.expando],a=o&&r[o];if(void 0===e)return a;if(a&&e in a)return a[e]}else if(void 0!==e){var o=t[n.expando]||(t[n.expando]=++n.uuid);return r[o]=r[o]||{},r[o][e]=i,i}},n.removeData=function(t,e){var i=t[n.expando],o=i&&r[i];o&&n.each(e,function(t,e){delete o[e]})},n.extend=function(){var t,e,r,i,o,a,s=arguments[0]||{},l=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[l]||{},l++),"object"!=typeof s&&"function"!==n.type(s)&&(s={}),l===u&&(s=this,l--);l<u;l++)if(null!=(o=arguments[l]))for(i in o)t=s[i],r=o[i],s!==r&&(c&&r&&(n.isPlainObject(r)||(e=n.isArray(r)))?(e?(e=!1,a=t&&n.isArray(t)?t:[]):a=t&&n.isPlainObject(t)?t:{},s[i]=n.extend(c,a,r)):void 0!==r&&(s[i]=r));return s},n.queue=function(t,r,i){function o(t,n){var r=n||[];return null!=t&&(e(Object(t))?!function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;)t[i++]=e[r++];if(n!==n)for(;void 0!==e[r];)t[i++]=e[r++];return t.length=i,t}(r,"string"==typeof t?[t]:t):[].push.call(r,t)),r}if(t){r=(r||"fx")+"queue";var a=n.data(t,r);return i?(!a||n.isArray(i)?a=n.data(t,r,o(i)):a.push(i),a):a||[]}},n.dequeue=function(t,e){n.each(t.nodeType?[t]:t,function(t,r){e=e||"fx";var i=n.queue(r,e),o=i.shift();"inprogress"===o&&(o=i.shift()),o&&("fx"===e&&i.unshift("inprogress"),o.call(r,function(){n.dequeue(r,e)}))})},n.fn=n.prototype={init:function(t){if(t.nodeType)return this[0]=t,this;throw new Error("Not a DOM node.")},offset:function(){var e=this[0].getBoundingClientRect?this[0].getBoundingClientRect():{top:0,left:0};return{top:e.top+(t.pageYOffset||document.scrollTop||0)-(document.clientTop||0),left:e.left+(t.pageXOffset||document.scrollLeft||0)-(document.clientLeft||0)}},position:function(){function t(){for(var t=this.offsetParent||document;t&&"html"===!t.nodeType.toLowerCase&&"static"===t.style.position;)t=t.offsetParent;return t||document}var e=this[0],t=t.apply(e),r=this.offset(),i=/^(?:body|html)$/i.test(t.nodeName)?{top:0,left:0}:n(t).offset();return r.top-=parseFloat(e.style.marginTop)||0,r.left-=parseFloat(e.style.marginLeft)||0,t.style&&(i.top+=parseFloat(t.style.borderTopWidth)||0,i.left+=parseFloat(t.style.borderLeftWidth)||0),{top:r.top-i.top,left:r.left-i.left}}};var r={};n.expando="velocity"+(new Date).getTime(),n.uuid=0;for(var i={},o=i.hasOwnProperty,a=i.toString,s="Boolean Number String Function Array Date RegExp Object Error".split(" "),l=0;l<s.length;l++)i["[object "+s[l]+"]"]=s[l].toLowerCase();n.fn.init.prototype=n.fn,t.Velocity={Utilities:n}}}(window),function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t():"function"==typeof define&&define.amd?define(t):t()}(function(){return function(t,e,n,r){function i(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function o(t){return g.isWrapped(t)?t=[].slice.call(t):g.isNode(t)&&(t=[t]),t}function a(t){var e=d.data(t,"velocity");return null===e?r:e}function s(t){return function(e){return Math.round(e*t)*(1/t)}}function l(t,n,r,i){function o(t,e){return 1-3*e+3*t}function a(t,e){return 3*e-6*t}function s(t){return 3*t}function l(t,e,n){return((o(e,n)*t+a(e,n))*t+s(e))*t}function u(t,e,n){return 3*o(e,n)*t*t+2*a(e,n)*t+s(e)}function c(e,n){for(var i=0;i<g;++i){var o=u(n,t,r);if(0===o)return n;var a=l(n,t,r)-e;n-=a/o}return n}function f(){for(var e=0;e<x;++e)M[e]=l(e*b,t,r)}function d(e,n,i){var o,a,s=0;do a=n+(i-n)/2,o=l(a,t,r)-e,o>0?i=a:n=a;while(Math.abs(o)>m&&++s<y);return a}function h(e){for(var n=0,i=1,o=x-1;i!=o&&M[i]<=e;++i)n+=b;--i;var a=(e-M[i])/(M[i+1]-M[i]),s=n+a*b,l=u(s,t,r);return l>=v?c(e,s):0==l?s:d(e,n,n+b)}function p(){C=!0,t==n&&r==i||f()}var g=4,v=.001,m=1e-7,y=10,x=11,b=1/(x-1),w="Float32Array"in e;if(4!==arguments.length)return!1;for(var k=0;k<4;++k)if("number"!=typeof arguments[k]||isNaN(arguments[k])||!isFinite(arguments[k]))return!1;t=Math.min(t,1),r=Math.min(r,1),t=Math.max(t,0),r=Math.max(r,0);var M=w?new Float32Array(x):new Array(x),C=!1,S=function(e){return C||p(),t===n&&r===i?e:0===e?0:1===e?1:l(h(e),n,i)};S.getControlPoints=function(){return[{x:t,y:n},{x:r,y:i}]};var A="generateBezier("+[t,n,r,i]+")";return S.toString=function(){return A},S}function u(t,e){var n=t;return g.isString(t)?x.Easings[t]||(n=!1):n=g.isArray(t)&&1===t.length?s.apply(null,t):g.isArray(t)&&2===t.length?b.apply(null,t.concat([e])):!(!g.isArray(t)||4!==t.length)&&l.apply(null,t),n===!1&&(n=x.Easings[x.defaults.easing]?x.defaults.easing:y),n}function c(t){if(t)for(var e=(new Date).getTime(),n=0,i=x.State.calls.length;n<i;n++)if(x.State.calls[n]){var o=x.State.calls[n],s=o[0],l=o[2],u=o[3],h=!!u;u||(u=x.State.calls[n][3]=e-16);for(var p=Math.min((e-u)/l.duration,1),v=0,m=s.length;v<m;v++){var y=s[v],b=y.element;if(a(b)){var k=!1;if(l.display!==r&&null!==l.display&&"none"!==l.display){if("flex"===l.display){var C=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];d.each(C,function(t,e){w.setPropertyValue(b,"display",e)})}w.setPropertyValue(b,"display",l.display)}l.visibility!==r&&"hidden"!==l.visibility&&w.setPropertyValue(b,"visibility",l.visibility);for(var S in y)if("element"!==S){var A,_=y[S],L=g.isString(_.easing)?x.Easings[_.easing]:_.easing;if(1===p)A=_.endValue;else if(A=_.startValue+(_.endValue-_.startValue)*L(p),!h&&A===_.currentValue)continue;if(_.currentValue=A,w.Hooks.registered[S]){var T=w.Hooks.getRoot(S),E=a(b).rootPropertyValueCache[T];E&&(_.rootPropertyValue=E)}var N=w.setPropertyValue(b,S,_.currentValue+(0===parseFloat(A)?"":_.unitType),_.rootPropertyValue,_.scrollData);w.Hooks.registered[S]&&(w.Normalizations.registered[T]?a(b).rootPropertyValueCache[T]=w.Normalizations.registered[T]("extract",null,N[1]):a(b).rootPropertyValueCache[T]=N[1]),"transform"===N[0]&&(k=!0)}l.mobileHA&&a(b).transformCache.translate3d===r&&(a(b).transformCache.translate3d="(0px, 0px, 0px)",k=!0),k&&w.flushTransformCache(b)}}l.display!==r&&"none"!==l.display&&(x.State.calls[n][2].display=!1),l.visibility!==r&&"hidden"!==l.visibility&&(x.State.calls[n][2].visibility=!1),l.progress&&l.progress.call(o[1],o[1],p,Math.max(0,u+l.duration-e),u),1===p&&f(n)}x.State.isTicking&&M(c)}function f(t,e){if(!x.State.calls[t])return!1;for(var n=x.State.calls[t][0],i=x.State.calls[t][1],o=x.State.calls[t][2],s=x.State.calls[t][4],l=!1,u=0,c=n.length;u<c;u++){var f=n[u].element;if(e||o.loop||("none"===o.display&&w.setPropertyValue(f,"display",o.display),"hidden"===o.visibility&&w.setPropertyValue(f,"visibility",o.visibility)),o.loop!==!0&&(d.queue(f)[1]===r||!/\.velocityQueueEntryFlag/i.test(d.queue(f)[1]))&&a(f)){a(f).isAnimating=!1,a(f).rootPropertyValueCache={};var h=!1;d.each(w.Lists.transforms3D,function(t,e){var n=/^scale/.test(e)?1:0,i=a(f).transformCache[e];a(f).transformCache[e]!==r&&new RegExp("^\\("+n+"[^.]").test(i)&&(h=!0,delete a(f).transformCache[e])}),o.mobileHA&&(h=!0,delete a(f).transformCache.translate3d),h&&w.flushTransformCache(f),w.Values.removeClass(f,"velocity-animating")}if(!e&&o.complete&&!o.loop&&u===c-1)try{o.complete.call(i,i)}catch(t){setTimeout(function(){throw t},1)}s&&o.loop!==!0&&s(i),o.loop!==!0||e||(d.each(a(f).tweensContainer,function(t,e){/^rotate/.test(t)&&360===parseFloat(e.endValue)&&(e.endValue=0,e.startValue=360)}),x(f,"reverse",{loop:!0,delay:o.delay})),o.queue!==!1&&d.dequeue(f,o.queue)}x.State.calls[t]=!1;for(var p=0,g=x.State.calls.length;p<g;p++)if(x.State.calls[p]!==!1){l=!0;break}l===!1&&(x.State.isTicking=!1,delete x.State.calls,x.State.calls=[])}var d,h=function(){if(n.documentMode)return n.documentMode;for(var t=7;t>4;t--){var e=n.createElement("div");if(e.innerHTML="<!--[if IE "+t+"]><span></span><![endif]-->",e.getElementsByTagName("span").length)return e=null,t}return r}(),p=function(){var t=0;return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(e){var n,r=(new Date).getTime();return n=Math.max(0,16-(r-t)),t=r+n,setTimeout(function(){e(r+n)},n)}}(),g={isString:function(t){return"string"==typeof t},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isNode:function(t){return t&&t.nodeType},isNodeList:function(t){return"object"==typeof t&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&t.length!==r&&(0===t.length||"object"==typeof t[0]&&t[0].nodeType>0)},isWrapped:function(t){return t&&(t.jquery||e.Zepto&&e.Zepto.zepto.isZ(t))},isSVG:function(t){return e.SVGElement&&t instanceof e.SVGElement},isEmptyObject:function(t){for(var e in t)return!1;return!0}},v=!1;if(t.fn&&t.fn.jquery?(d=t,v=!0):d=e.Velocity.Utilities,h<=8&&!v)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(h<=7)return void(jQuery.fn.velocity=jQuery.fn.animate);var m=400,y="swing",x={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:e.chrome,isFirefox:/Firefox/i.test(navigator.userAgent),prefixElement:n.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:d,Redirects:{},Easings:{},Promise:e.Promise,defaults:{queue:"",duration:m,easing:y,begin:r,complete:r,progress:r,display:r,visibility:r,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},init:function(t){d.data(t,"velocity",{isSVG:g.isSVG(t),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}})},hook:null,mock:!1,version:{major:1,minor:1,patch:0},debug:!1};e.pageYOffset!==r?(x.State.scrollAnchor=e,x.State.scrollPropertyLeft="pageXOffset",x.State.scrollPropertyTop="pageYOffset"):(x.State.scrollAnchor=n.documentElement||n.body.parentNode||n.body,x.State.scrollPropertyLeft="scrollLeft",x.State.scrollPropertyTop="scrollTop");var b=function(){function t(t){return-t.tension*t.x-t.friction*t.v}function e(e,n,r){var i={x:e.x+r.dx*n,v:e.v+r.dv*n,tension:e.tension,friction:e.friction};return{dx:i.v,dv:t(i)}}function n(n,r){var i={dx:n.v,dv:t(n)},o=e(n,.5*r,i),a=e(n,.5*r,o),s=e(n,r,a),l=1/6*(i.dx+2*(o.dx+a.dx)+s.dx),u=1/6*(i.dv+2*(o.dv+a.dv)+s.dv);return n.x=n.x+l*r,n.v=n.v+u*r,n}return function t(e,r,i){var o,a,s,l={x:-1,v:0,tension:null,friction:null},u=[0],c=0,f=1e-4,d=.016;for(e=parseFloat(e)||500,r=parseFloat(r)||20,i=i||null,l.tension=e,l.friction=r,o=null!==i,o?(c=t(e,r),a=c/i*d):a=d;;)if(s=n(s||l,a),u.push(1+s.x),c+=16,!(Math.abs(s.x)>f&&Math.abs(s.v)>f))break;return o?function(t){return u[t*(u.length-1)|0]}:c}}();x.Easings={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},spring:function(t){return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t)}},d.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],function(t,e){x.Easings[e[0]]=l.apply(null,e[1])});var w=x.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){for(var t=0;t<w.Lists.colors.length;t++){var e="color"===w.Lists.colors[t]?"0 0 0 1":"255 255 255 1";w.Hooks.templates[w.Lists.colors[t]]=["Red Green Blue Alpha",e]}var n,r,i;if(h)for(n in w.Hooks.templates){r=w.Hooks.templates[n],i=r[0].split(" ");var o=r[1].match(w.RegEx.valueSplit);"Color"===i[0]&&(i.push(i.shift()),o.push(o.shift()),w.Hooks.templates[n]=[i.join(" "),o.join(" ")])}for(n in w.Hooks.templates){r=w.Hooks.templates[n],i=r[0].split(" ");for(var t in i){var a=n+i[t],s=t;w.Hooks.registered[a]=[n,s]}}},getRoot:function(t){var e=w.Hooks.registered[t];return e?e[0]:t},cleanRootPropertyValue:function(t,e){return w.RegEx.valueUnwrap.test(e)&&(e=e.match(w.RegEx.valueUnwrap)[1]),w.Values.isCSSNullValue(e)&&(e=w.Hooks.templates[t][1]),e},extractValue:function(t,e){var n=w.Hooks.registered[t];if(n){var r=n[0],i=n[1];return e=w.Hooks.cleanRootPropertyValue(r,e),e.toString().match(w.RegEx.valueSplit)[i]}return e},injectValue:function(t,e,n){var r=w.Hooks.registered[t];if(r){var i,o,a=r[0],s=r[1];return n=w.Hooks.cleanRootPropertyValue(a,n),i=n.toString().match(w.RegEx.valueSplit),i[s]=e,o=i.join(" ")}return n}},Normalizations:{registered:{clip:function(t,e,n){switch(t){case"name":return"clip";case"extract":var r;return w.RegEx.wrappedValueAlreadyExtracted.test(n)?r=n:(r=n.toString().match(w.RegEx.valueUnwrap),r=r?r[1].replace(/,(\s+)?/g," "):n),r;case"inject":return"rect("+n+")"}},blur:function(t,e,n){switch(t){case"name":return"-webkit-filter";case"extract":var r=parseFloat(n);if(!r&&0!==r){var i=n.toString().match(/blur\(([0-9]+[A-z]+)\)/i);r=i?i[1]:0}return r;case"inject":return parseFloat(n)?"blur("+n+")":"none"}},opacity:function(t,e,n){if(h<=8)switch(t){case"name":return"filter";case"extract":var r=n.toString().match(/alpha\(opacity=(.*)\)/i);return n=r?r[1]/100:1;case"inject":return e.style.zoom=1,parseFloat(n)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(n),10)+")"}else switch(t){case"name":return"opacity";case"extract":return n;case"inject":return n}}},register:function(){h<=9||x.State.isGingerbread||(w.Lists.transformsBase=w.Lists.transformsBase.concat(w.Lists.transforms3D));for(var t=0;t<w.Lists.transformsBase.length;t++)!function(){var e=w.Lists.transformsBase[t];w.Normalizations.registered[e]=function(t,n,i){switch(t){case"name":return"transform";case"extract":return a(n)===r||a(n).transformCache[e]===r?/^scale/i.test(e)?1:0:a(n).transformCache[e].replace(/[()]/g,"");case"inject":var o=!1;switch(e.substr(0,e.length-1)){case"translate":o=!/(%|px|em|rem|vw|vh|\d)$/i.test(i);break;case"scal":case"scale":x.State.isAndroid&&a(n).transformCache[e]===r&&i<1&&(i=1),o=!/(\d)$/i.test(i);break;case"skew":o=!/(deg|\d)$/i.test(i);break;case"rotate":o=!/(deg|\d)$/i.test(i)}return o||(a(n).transformCache[e]="("+i+")"),a(n).transformCache[e]}}}();for(var t=0;t<w.Lists.colors.length;t++)!function(){var e=w.Lists.colors[t];w.Normalizations.registered[e]=function(t,n,i){switch(t){case"name":return e;case"extract":var o;if(w.RegEx.wrappedValueAlreadyExtracted.test(i))o=i;else{var a,s={black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",red:"rgb(255, 0, 0)",white:"rgb(255, 255, 255)"};/^[A-z]+$/i.test(i)?a=s[i]!==r?s[i]:s.black:w.RegEx.isHex.test(i)?a="rgb("+w.Values.hexToRgb(i).join(" ")+")":/^rgba?\(/i.test(i)||(a=s.black),o=(a||i).toString().match(w.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return h<=8||3!==o.split(" ").length||(o+=" 1"),o;case"inject":return h<=8?4===i.split(" ").length&&(i=i.split(/\s+/).slice(0,3).join(" ")):3===i.split(" ").length&&(i+=" 1"),(h<=8?"rgb":"rgba")+"("+i.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(t){return t.replace(/-(\w)/g,function(t,e){return e.toUpperCase()})},SVGAttribute:function(t){var e="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y2";return(h||x.State.isAndroid&&!x.State.isChrome)&&(e+="|transform"),new RegExp("^("+e+")$","i").test(t)},prefixCheck:function(t){if(x.State.prefixMatches[t])return[x.State.prefixMatches[t],!0];for(var e=["","Webkit","Moz","ms","O"],n=0,r=e.length;n<r;n++){var i;if(i=0===n?t:e[n]+t.replace(/^\w/,function(t){return t.toUpperCase()}),g.isString(x.State.prefixElement.style[i]))return x.State.prefixMatches[t]=i,[i,!0]}return[t,!1]}},Values:{hexToRgb:function(t){var e,n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return t=t.replace(n,function(t,e,n,r){return e+e+n+n+r+r}),e=r.exec(t),e?[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]:[0,0,0]},isCSSNullValue:function(t){return 0==t||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(t)},getUnitType:function(t){return/^(rotate|skew)/i.test(t)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(t)?"":"px"},getDisplayType:function(t){var e=t&&t.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(e)?"inline":/^(li)$/i.test(e)?"list-item":/^(tr)$/i.test(e)?"table-row":"block"},addClass:function(t,e){t.classList?t.classList.add(e):t.className+=(t.className.length?" ":"")+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.toString().replace(new RegExp("(^|\\s)"+e.split(" ").join("|")+"(\\s|$)","gi")," ")}},getPropertyValue:function(t,n,i,o){function s(t,n){function i(){u&&w.setPropertyValue(t,"display","none")}var l=0;if(h<=8)l=d.css(t,n);else{var u=!1;if(/^(width|height)$/.test(n)&&0===w.getPropertyValue(t,"display")&&(u=!0,w.setPropertyValue(t,"display",w.Values.getDisplayType(t))),!o){if("height"===n&&"border-box"!==w.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var c=t.offsetHeight-(parseFloat(w.getPropertyValue(t,"borderTopWidth"))||0)-(parseFloat(w.getPropertyValue(t,"borderBottomWidth"))||0)-(parseFloat(w.getPropertyValue(t,"paddingTop"))||0)-(parseFloat(w.getPropertyValue(t,"paddingBottom"))||0);return i(),c}if("width"===n&&"border-box"!==w.getPropertyValue(t,"boxSizing").toString().toLowerCase()){var f=t.offsetWidth-(parseFloat(w.getPropertyValue(t,"borderLeftWidth"))||0)-(parseFloat(w.getPropertyValue(t,"borderRightWidth"))||0)-(parseFloat(w.getPropertyValue(t,"paddingLeft"))||0)-(parseFloat(w.getPropertyValue(t,"paddingRight"))||0);return i(),f}}var p;p=a(t)===r?e.getComputedStyle(t,null):a(t).computedStyle?a(t).computedStyle:a(t).computedStyle=e.getComputedStyle(t,null),(h||x.State.isFirefox)&&"borderColor"===n&&(n="borderTopColor"),l=9===h&&"filter"===n?p.getPropertyValue(n):p[n],""!==l&&null!==l||(l=t.style[n]),i()}if("auto"===l&&/^(top|right|bottom|left)$/i.test(n)){var g=s(t,"position");("fixed"===g||"absolute"===g&&/top|left/i.test(n))&&(l=d(t).position()[n]+"px")}return l}var l;if(w.Hooks.registered[n]){var u=n,c=w.Hooks.getRoot(u);i===r&&(i=w.getPropertyValue(t,w.Names.prefixCheck(c)[0])),w.Normalizations.registered[c]&&(i=w.Normalizations.registered[c]("extract",t,i)),l=w.Hooks.extractValue(u,i)}else if(w.Normalizations.registered[n]){var f,p;f=w.Normalizations.registered[n]("name",t),"transform"!==f&&(p=s(t,w.Names.prefixCheck(f)[0]),w.Values.isCSSNullValue(p)&&w.Hooks.templates[n]&&(p=w.Hooks.templates[n][1])),l=w.Normalizations.registered[n]("extract",t,p)}return/^[\d-]/.test(l)||(l=a(t)&&a(t).isSVG&&w.Names.SVGAttribute(n)?/^(height|width)$/i.test(n)?t.getBBox()[n]:t.getAttribute(n):s(t,w.Names.prefixCheck(n)[0])),w.Values.isCSSNullValue(l)&&(l=0),x.debug>=2&&console.log("Get "+n+": "+l),l},setPropertyValue:function(t,n,r,i,o){var s=n;if("scroll"===n)o.container?o.container["scroll"+o.direction]=r:"Left"===o.direction?e.scrollTo(r,o.alternateValue):e.scrollTo(o.alternateValue,r);else if(w.Normalizations.registered[n]&&"transform"===w.Normalizations.registered[n]("name",t))w.Normalizations.registered[n]("inject",t,r),s="transform",r=a(t).transformCache[n];else{if(w.Hooks.registered[n]){var l=n,u=w.Hooks.getRoot(n);i=i||w.getPropertyValue(t,u),r=w.Hooks.injectValue(l,r,i),n=u}if(w.Normalizations.registered[n]&&(r=w.Normalizations.registered[n]("inject",t,r),n=w.Normalizations.registered[n]("name",t)),s=w.Names.prefixCheck(n)[0],h<=8)try{t.style[s]=r}catch(t){x.debug&&console.log("Browser does not support ["+r+"] for ["+s+"]")}else a(t)&&a(t).isSVG&&w.Names.SVGAttribute(n)?t.setAttribute(n,r):t.style[s]=r;x.debug>=2&&console.log("Set "+n+" ("+s+"): "+r)}return[s,r]},flushTransformCache:function(t){function e(e){return parseFloat(w.getPropertyValue(t,e))}var n="";if((h||x.State.isAndroid&&!x.State.isChrome)&&a(t).isSVG){var r={translate:[e("translateX"),e("translateY")],skewX:[e("skewX")],skewY:[e("skewY")],scale:1!==e("scale")?[e("scale"),e("scale")]:[e("scaleX"),e("scaleY")],rotate:[e("rotateZ"),0,0]};d.each(a(t).transformCache,function(t){/^translate/i.test(t)?t="translate":/^scale/i.test(t)?t="scale":/^rotate/i.test(t)&&(t="rotate"),r[t]&&(n+=t+"("+r[t].join(" ")+") ",delete r[t])})}else{var i,o;d.each(a(t).transformCache,function(e){return i=a(t).transformCache[e],"transformPerspective"===e?(o=i,!0):(9===h&&"rotateZ"===e&&(e="rotate"),void(n+=e+i+" "))}),o&&(n="perspective"+o+" "+n)}w.setPropertyValue(t,"transform",n)}};w.Hooks.register(),w.Normalizations.register(),x.hook=function(t,e,n){var i=r;return t=o(t),d.each(t,function(t,o){if(a(o)===r&&x.init(o),n===r)i===r&&(i=x.CSS.getPropertyValue(o,e));else{var s=x.CSS.setPropertyValue(o,e,n);"transform"===s[0]&&x.CSS.flushTransformCache(o),
i=s}}),i};var k=function(){function t(){return l?L.promise||null:h}function s(){function t(t){function h(t,e){var n=r,i=r,o=r;return g.isArray(t)?(n=t[0],!g.isArray(t[1])&&/^[\d-]/.test(t[1])||g.isFunction(t[1])||w.RegEx.isHex.test(t[1])?o=t[1]:(g.isString(t[1])&&!w.RegEx.isHex.test(t[1])||g.isArray(t[1]))&&(i=e?t[1]:u(t[1],l.duration),t[2]!==r&&(o=t[2]))):n=t,e||(i=i||l.easing),g.isFunction(n)&&(n=n.call(s,S,C)),g.isFunction(o)&&(o=o.call(s,S,C)),[n||0,i,o]}function p(t,e){var n,r;return r=(e||"0").toString().toLowerCase().replace(/[%A-z]+$/,function(t){return n=t,""}),n||(n=w.Values.getUnitType(t)),[r,n]}function m(){var t={myParent:s.parentNode||n.body,position:w.getPropertyValue(s,"position"),fontSize:w.getPropertyValue(s,"fontSize")},r=t.position===W.lastPosition&&t.myParent===W.lastParent,i=t.fontSize===W.lastFontSize;W.lastParent=t.myParent,W.lastPosition=t.position,W.lastFontSize=t.fontSize;var o=100,l={};if(i&&r)l.emToPx=W.lastEmToPx,l.percentToPxWidth=W.lastPercentToPxWidth,l.percentToPxHeight=W.lastPercentToPxHeight;else{var u=a(s).isSVG?n.createElementNS("http://www.w3.org/2000/svg","rect"):n.createElement("div");x.init(u),t.myParent.appendChild(u),d.each(["overflow","overflowX","overflowY"],function(t,e){x.CSS.setPropertyValue(u,e,"hidden")}),x.CSS.setPropertyValue(u,"position",t.position),x.CSS.setPropertyValue(u,"fontSize",t.fontSize),x.CSS.setPropertyValue(u,"boxSizing","content-box"),d.each(["minWidth","maxWidth","width","minHeight","maxHeight","height"],function(t,e){x.CSS.setPropertyValue(u,e,o+"%")}),x.CSS.setPropertyValue(u,"paddingLeft",o+"em"),l.percentToPxWidth=W.lastPercentToPxWidth=(parseFloat(w.getPropertyValue(u,"width",null,!0))||1)/o,l.percentToPxHeight=W.lastPercentToPxHeight=(parseFloat(w.getPropertyValue(u,"height",null,!0))||1)/o,l.emToPx=W.lastEmToPx=(parseFloat(w.getPropertyValue(u,"paddingLeft"))||1)/o,t.myParent.removeChild(u)}return null===W.remToPx&&(W.remToPx=parseFloat(w.getPropertyValue(n.body,"fontSize"))||16),null===W.vwToPx&&(W.vwToPx=parseFloat(e.innerWidth)/100,W.vhToPx=parseFloat(e.innerHeight)/100),l.remToPx=W.remToPx,l.vwToPx=W.vwToPx,l.vhToPx=W.vhToPx,x.debug>=1&&console.log("Unit ratios: "+JSON.stringify(l),s),l}if(l.begin&&0===S)try{l.begin.call(v,v)}catch(t){setTimeout(function(){throw t},1)}if("scroll"===T){var k,M,A,_=/^x$/i.test(l.axis)?"Left":"Top",E=parseFloat(l.offset)||0;l.container?g.isWrapped(l.container)||g.isNode(l.container)?(l.container=l.container[0]||l.container,k=l.container["scroll"+_],A=k+d(s).position()[_.toLowerCase()]+E):l.container=null:(k=x.State.scrollAnchor[x.State["scrollProperty"+_]],M=x.State.scrollAnchor[x.State["scrollProperty"+("Left"===_?"Top":"Left")]],A=d(s).offset()[_.toLowerCase()]+E),f={scroll:{rootPropertyValue:!1,startValue:k,currentValue:k,endValue:A,unitType:"",easing:l.easing,scrollData:{container:l.container,direction:_,alternateValue:M}},element:s},x.debug&&console.log("tweensContainer (scroll): ",f.scroll,s)}else if("reverse"===T){if(!a(s).tweensContainer)return void d.dequeue(s,l.queue);"none"===a(s).opts.display&&(a(s).opts.display="auto"),"hidden"===a(s).opts.visibility&&(a(s).opts.visibility="visible"),a(s).opts.loop=!1,a(s).opts.begin=null,a(s).opts.complete=null,b.easing||delete l.easing,b.duration||delete l.duration,l=d.extend({},a(s).opts,l);var N=d.extend(!0,{},a(s).tweensContainer);for(var P in N)if("element"!==P){var F=N[P].startValue;N[P].startValue=N[P].currentValue=N[P].endValue,N[P].endValue=F,g.isEmptyObject(b)||(N[P].easing=l.easing),x.debug&&console.log("reverse tweensContainer ("+P+"): "+JSON.stringify(N[P]),s)}f=N}else if("start"===T){var N;a(s).tweensContainer&&a(s).isAnimating===!0&&(N=a(s).tweensContainer),d.each(y,function(t,e){if(RegExp("^"+w.Lists.colors.join("$|^")+"$").test(t)){var n=h(e,!0),i=n[0],o=n[1],a=n[2];if(w.RegEx.isHex.test(i)){for(var s=["Red","Green","Blue"],l=w.Values.hexToRgb(i),u=a?w.Values.hexToRgb(a):r,c=0;c<s.length;c++){var f=[l[c]];o&&f.push(o),u!==r&&f.push(u[c]),y[t+s[c]]=f}delete y[t]}}});for(var O in y){var z=h(y[O]),H=z[0],I=z[1],R=z[2];O=w.Names.camelCase(O);var B=w.Hooks.getRoot(O),j=!1;if(a(s).isSVG||w.Names.prefixCheck(B)[1]!==!1||w.Normalizations.registered[B]!==r){(l.display!==r&&null!==l.display&&"none"!==l.display||l.visibility!==r&&"hidden"!==l.visibility)&&/opacity|filter/.test(O)&&!R&&0!==H&&(R=0),l._cacheValues&&N&&N[O]?(R===r&&(R=N[O].endValue+N[O].unitType),j=a(s).rootPropertyValueCache[B]):w.Hooks.registered[O]?R===r?(j=w.getPropertyValue(s,B),R=w.getPropertyValue(s,O,j)):j=w.Hooks.templates[B][1]:R===r&&(R=w.getPropertyValue(s,O));var V,q,X,U=!1;if(V=p(O,R),R=V[0],X=V[1],V=p(O,H),H=V[0].replace(/^([+-\/*])=/,function(t,e){return U=e,""}),q=V[1],R=parseFloat(R)||0,H=parseFloat(H)||0,"%"===q&&(/^(fontSize|lineHeight)$/.test(O)?(H/=100,q="em"):/^scale/.test(O)?(H/=100,q=""):/(Red|Green|Blue)$/i.test(O)&&(H=H/100*255,q="")),/[\/*]/.test(U))q=X;else if(X!==q&&0!==R)if(0===H)q=X;else{o=o||m();var Y=/margin|padding|left|right|width|text|word|letter/i.test(O)||/X$/.test(O)||"x"===O?"x":"y";switch(X){case"%":R*="x"===Y?o.percentToPxWidth:o.percentToPxHeight;break;case"px":break;default:R*=o[X+"ToPx"]}switch(q){case"%":R*=1/("x"===Y?o.percentToPxWidth:o.percentToPxHeight);break;case"px":break;default:R*=1/o[q+"ToPx"]}}switch(U){case"+":H=R+H;break;case"-":H=R-H;break;case"*":H=R*H;break;case"/":H=R/H}f[O]={rootPropertyValue:j,startValue:R,currentValue:R,endValue:H,unitType:q,easing:I},x.debug&&console.log("tweensContainer ("+O+"): "+JSON.stringify(f[O]),s)}else x.debug&&console.log("Skipping ["+B+"] due to a lack of browser support.")}f.element=s}f.element&&(w.Values.addClass(s,"velocity-animating"),D.push(f),""===l.queue&&(a(s).tweensContainer=f,a(s).opts=l),a(s).isAnimating=!0,S===C-1?(x.State.calls.length>1e4&&(x.State.calls=i(x.State.calls)),x.State.calls.push([D,v,l,null,L.resolver]),x.State.isTicking===!1&&(x.State.isTicking=!0,c())):S++)}var o,s=this,l=d.extend({},x.defaults,b),f={};switch(a(s)===r&&x.init(s),parseFloat(l.delay)&&l.queue!==!1&&d.queue(s,l.queue,function(t){x.velocityQueueEntryFlag=!0,a(s).delayTimer={setTimeout:setTimeout(t,parseFloat(l.delay)),next:t}}),l.duration.toString().toLowerCase()){case"fast":l.duration=200;break;case"normal":l.duration=m;break;case"slow":l.duration=600;break;default:l.duration=parseFloat(l.duration)||1}x.mock!==!1&&(x.mock===!0?l.duration=l.delay=1:(l.duration*=parseFloat(x.mock)||1,l.delay*=parseFloat(x.mock)||1)),l.easing=u(l.easing,l.duration),l.begin&&!g.isFunction(l.begin)&&(l.begin=null),l.progress&&!g.isFunction(l.progress)&&(l.progress=null),l.complete&&!g.isFunction(l.complete)&&(l.complete=null),l.display!==r&&null!==l.display&&(l.display=l.display.toString().toLowerCase(),"auto"===l.display&&(l.display=x.CSS.Values.getDisplayType(s))),l.visibility!==r&&null!==l.visibility&&(l.visibility=l.visibility.toString().toLowerCase()),l.mobileHA=l.mobileHA&&x.State.isMobile&&!x.State.isGingerbread,l.queue===!1?l.delay?setTimeout(t,l.delay):t():d.queue(s,l.queue,function(e,n){return n===!0?(L.promise&&L.resolver(v),!0):(x.velocityQueueEntryFlag=!0,void t(e))}),""!==l.queue&&"fx"!==l.queue||"inprogress"===d.queue(s)[0]||d.dequeue(s)}var l,h,p,v,y,b,M=arguments[0]&&(d.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||g.isString(arguments[0].properties));if(g.isWrapped(this)?(l=!1,p=0,v=this,h=this):(l=!0,p=1,v=M?arguments[0].elements:arguments[0]),v=o(v)){M?(y=arguments[0].properties,b=arguments[0].options):(y=arguments[p],b=arguments[p+1]);var C=v.length,S=0;if("stop"!==y&&!d.isPlainObject(b)){var A=p+1;b={};for(var _=A;_<arguments.length;_++)g.isArray(arguments[_])||!/^(fast|normal|slow)$/i.test(arguments[_])&&!/^\d/.test(arguments[_])?g.isString(arguments[_])||g.isArray(arguments[_])?b.easing=arguments[_]:g.isFunction(arguments[_])&&(b.complete=arguments[_]):b.duration=arguments[_]}var L={promise:null,resolver:null,rejecter:null};l&&x.Promise&&(L.promise=new x.Promise(function(t,e){L.resolver=t,L.rejecter=e}));var T;switch(y){case"scroll":T="scroll";break;case"reverse":T="reverse";break;case"stop":d.each(v,function(t,e){a(e)&&a(e).delayTimer&&(clearTimeout(a(e).delayTimer.setTimeout),a(e).delayTimer.next&&a(e).delayTimer.next(),delete a(e).delayTimer)});var E=[];return d.each(x.State.calls,function(t,e){e&&d.each(e[1],function(n,i){var o=g.isString(b)?b:"";return b!==r&&e[2].queue!==o||void d.each(v,function(e,n){n===i&&(b!==r&&(d.each(d.queue(n,o),function(t,e){g.isFunction(e)&&e(null,!0)}),d.queue(n,o,[])),a(n)&&""===o&&d.each(a(n).tweensContainer,function(t,e){e.endValue=e.currentValue}),E.push(t))})})}),d.each(E,function(t,e){f(e,!0)}),L.promise&&L.resolver(v),t();default:if(!d.isPlainObject(y)||g.isEmptyObject(y)){if(g.isString(y)&&x.Redirects[y]){var N=d.extend({},b),P=N.duration,F=N.delay||0;return N.backwards===!0&&(v=d.extend(!0,[],v).reverse()),d.each(v,function(t,e){parseFloat(N.stagger)?N.delay=F+parseFloat(N.stagger)*t:g.isFunction(N.stagger)&&(N.delay=F+N.stagger.call(e,t,C)),N.drag&&(N.duration=parseFloat(P)||(/^(callout|transition)/.test(y)?1e3:m),N.duration=Math.max(N.duration*(N.backwards?1-t/C:(t+1)/C),.75*N.duration,200)),x.Redirects[y].call(e,e,N||{},t,C,v,L.promise?L:r)}),t()}var O="Velocity: First argument ("+y+") was not a property map, a known action, or a registered redirect. Aborting.";return L.promise?L.rejecter(new Error(O)):console.log(O),t()}T="start"}var W={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},D=[];d.each(v,function(t,e){g.isNode(e)&&s.call(e)});var z,N=d.extend({},x.defaults,b);if(N.loop=parseInt(N.loop),z=2*N.loop-1,N.loop)for(var H=0;H<z;H++){var I={delay:N.delay,progress:N.progress};H===z-1&&(I.display=N.display,I.visibility=N.visibility,I.complete=N.complete),k(v,"reverse",I)}return t()}};x=d.extend(k,x),x.animate=k;var M=e.requestAnimationFrame||p;return x.State.isMobile||n.hidden===r||n.addEventListener("visibilitychange",function(){n.hidden?(M=function(t){return setTimeout(function(){t(!0)},16)},c()):M=e.requestAnimationFrame||p}),t.Velocity=x,t!==e&&(t.fn.velocity=k,t.fn.velocity.defaults=x.defaults),d.each(["Down","Up"],function(t,e){x.Redirects["slide"+e]=function(t,n,i,o,a,s){var l=d.extend({},n),u=l.begin,c=l.complete,f={height:"",marginTop:"",marginBottom:"",paddingTop:"",paddingBottom:""},h={};l.display===r&&(l.display="Down"===e?"inline"===x.CSS.Values.getDisplayType(t)?"inline-block":"block":"none"),l.begin=function(){u&&u.call(a,a);for(var n in f){h[n]=t.style[n];var r=x.CSS.getPropertyValue(t,n);f[n]="Down"===e?[r,0]:[0,r]}h.overflow=t.style.overflow,t.style.overflow="hidden"},l.complete=function(){for(var e in h)t.style[e]=h[e];c&&c.call(a,a),s&&s.resolver(a)},x(t,f,l)}}),d.each(["In","Out"],function(t,e){x.Redirects["fade"+e]=function(t,n,i,o,a,s){var l=d.extend({},n),u={opacity:"In"===e?1:0},c=l.complete;i!==o-1?l.complete=l.begin=null:l.complete=function(){c&&c.call(a,a),s&&s.resolver(a)},l.display===r&&(l.display="In"===e?"auto":"none"),x(this,u,l)}}),x}(window.jQuery||window.Zepto||window,window,document)}),!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function r(t){return null===t?NaN:+t}function i(t){return!isNaN(t)}function o(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function a(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(t){return(t+="")===xa||t[0]===ba?ba+t:t}function f(t){return(t+="")[0]===ba?t.slice(1):t}function d(t){return c(t)in this._}function h(t){return(t=c(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(f(e));return t}function g(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(t){return t}function x(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function b(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=wa.length;n<r;++n){var i=wa[n]+e;if(i in t)return i}}function w(){}function k(){}function M(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new u;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function C(){la.event.preventDefault()}function S(){for(var t,e=la.event;t=e.sourceEvent;)e=t;return e}function A(t){for(var e=new k,n=0,r=arguments.length;++n<r;)e[arguments[n]]=M(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=la.event;i.target=t,la.event=i,e[i.type].apply(n,r)}finally{la.event=o}}},e}function _(t){return Ma(t,_a),t}function L(t){return"function"==typeof t?t:function(){return Ca(t,this)}}function T(t){return"function"==typeof t?t:function(){return Sa(t,this)}}function E(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=la.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:a:t.local?o:i}function N(t){return t.trim().replace(/\s+/g," ")}function P(t){return new RegExp("(?:^|\\s+)"+la.requote(t)+"(?:\\s+|$)","g")}function F(t){return(t+"").trim().split(/^|\s+/)}function O(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=F(t).map(W);var i=t.length;return"function"==typeof e?r:n}function W(t){var e=P(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",N(i+" "+t))):n.setAttribute("class",N(i.replace(e," ")))}}function D(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function z(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function H(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n===La&&e.documentElement.namespaceURI===La?e.createElement(t):e.createElementNS(n,t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=la.ns.qualify(t)).local?n:e}function I(){var t=this.parentNode;t&&t.removeChild(this)}function R(t){return{__data__:t}}function B(t){return function(){return Aa(this,t)}}function j(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function V(t,e){for(var n=0,r=t.length;n<r;n++)for(var i,o=t[n],a=0,s=o.length;a<s;a++)(i=o[a])&&e(i,a,n);return t}function q(t){return Ma(t,Ea),t}function X(t){var e,n;return function(r,i,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<l;);return a}}function U(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=l(e,ca(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+la.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var a="__on"+t,s=t.indexOf("."),l=Y;s>0&&(t=t.slice(0,s));var u=Na.get(t);return u&&(t=u,l=G),s?e?i:r:e?w:o}function Y(t,e){return function(n){var r=la.event;la.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{la.event=r}}}function G(t,e){var n=Y(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function $(n){var r=".dragsuppress-"+ ++Fa,i="click"+r,o=la.select(e(n)).on("touchmove"+r,C).on("dragstart"+r,C).on("selectstart"+r,C);if(null==Pa&&(Pa=!("onselectstart"in n)&&b(n.style,"userSelect")),Pa){var a=t(n).style,s=a[Pa];a[Pa]="none"}return function(t){if(o.on(r,null),Pa&&(a[Pa]=s),t){var e=function(){o.on(i,null)};o.on(i,function(){C(),e()},!0),setTimeout(e,0)}}}function Z(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(Oa<0){var o=e(t);if(o.scrollX||o.scrollY){r=la.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Oa=!(a.f||a.e),r.remove()}}return Oa?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}function K(){return la.event.changedTouches[0].identifier}function Q(t){return t>0?1:t<0?-1:0}function J(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:t<-1?za:Math.acos(t)}function et(t){return t>1?Ra:t<-1?-Ra:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function rt(t){return((t=Math.exp(t))+1/t)/2}function it(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function at(){}function st(t,e,n){return this instanceof st?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):wt(""+t,kt,st):new st(t,e,n)}function lt(t,e,n){function r(t){return t>360?t-=360:t<0&&(t+=360),t<60?o+(a-o)*t/60:t<180?a:t<240?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=n<0?0:n>1?1:n,a=n<=.5?n*(1+e):n+e-n*e,o=2*n-a,new mt(i(t+120),i(t),i(t-120))}function ut(t,e,n){return this instanceof ut?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ut?new ut(t.h,t.c,t.l):t instanceof ft?ht(t.l,t.a,t.b):ht((t=Mt((t=la.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ut(t,e,n)}function ct(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ft(n,Math.cos(t*=Ba)*e,Math.sin(t)*e)}function ft(t,e,n){return this instanceof ft?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ft?new ft(t.l,t.a,t.b):t instanceof ut?ct(t.h,t.c,t.l):Mt((t=mt(t)).r,t.g,t.b):new ft(t,e,n)}function dt(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=pt(i)*Qa,r=pt(r)*Ja,o=pt(o)*ts,new mt(vt(3.2404542*i-1.5371385*r-.4985314*o),vt(-.969266*i+1.8760108*r+.041556*o),vt(.0556434*i-.2040259*r+1.0572252*o))}function ht(t,e,n){return t>0?new ut(Math.atan2(n,e)*ja,Math.sqrt(e*e+n*n),t):new ut(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function gt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function vt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,e,n){return this instanceof mt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):wt(""+t,mt,lt):new mt(t,e,n)}function yt(t){return new mt(t>>16,t>>8&255,255&t)}function xt(t){return yt(t)+""}function bt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function wt(t,e,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(St(i[0]),St(i[1]),St(i[2]))}return(o=rs.get(t))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,l=15&o,l=l<<4|l):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function kt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(e<n?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new st(r,i,l)}function Mt(t,e,n){t=Ct(t),e=Ct(e),n=Ct(n);var r=gt((.4124564*t+.3575761*e+.1804375*n)/Qa),i=gt((.2126729*t+.7151522*e+.072175*n)/Ja),o=gt((.0193339*t+.119192*e+.9503041*n)/ts);return ft(116*i-16,500*(r-i),200*(i-o))}function Ct(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function St(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function At(t){return"function"==typeof t?t:function(){return t}}function _t(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Lt(e,n,t,r)}}function Lt(t,e,n,r){function i(){var t,e=l.status;if(!e&&Et(l)||e>=200&&e<300||304===e){try{t=n.call(o,l)}catch(t){return void a.error.call(o,t)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=la.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var e=la.event;la.event=t;try{a.progress.call(o,l)}finally{la.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ca(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},la.rebind(o,a,"on"),null==r?o:o.get(Tt(r))}function Tt(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Et(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Nt(t,e,n){var r=arguments.length;r<2&&(e=0),r<3&&(n=Date.now());var i=n+e,o={c:t,t:i,n:null};return os?os.n=o:is=o,os=o,as||(ss=clearTimeout(ss),as=1,ls(Pt)),o}function Pt(){var t=Ft(),e=Ot()-t;e>24?(isFinite(e)&&(clearTimeout(ss),ss=setTimeout(Pt,e)),as=0):(as=1,ls(Pt))}function Ft(){for(var t=Date.now(),e=is;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ot(){for(var t,e=is,n=1/0;e;)e.c?(e.t<n&&(n=e.t),e=(t=e).n):e=t?t.n=e.n:is=e.n;return os=t,n}function Wt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Dt(t,e){var n=Math.pow(10,3*ya(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function zt(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:y;return function(t){var n=cs.exec(t),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],d=n[8],h=n[9],p=1,g="",v="",m=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),h){case"n":f=!0,h="g";break;case"%":p=100,v="%",h="f";break;case"p":p=100,v="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+h.toLowerCase());case"c":y=!1;case"d":m=!0,d=0;break;case"s":p=-1,h="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):"e"!=h&&"f"!=h||(d=Math.max(0,Math.min(20,d)))),h=fs.get(h)||Ht;var x=u&&f;return function(t){var n=v;if(m&&t%1)return"";var i=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===s?"":s;if(p<0){var l=la.formatPrefix(t,d);t=l.scale(t),n=l.symbol+v}else t*=p;t=h(t,d);var b,w,k=t.lastIndexOf(".");if(k<0){var M=y?t.lastIndexOf("e"):-1;M<0?(b=t,w=""):(b=t.substring(0,M),w=t.substring(M))}else b=t.substring(0,k),w=e+t.substring(k+1);!u&&f&&(b=o(b,1/0));var C=g.length+b.length+w.length+(x?0:i.length),S=C<c?new Array(C=c-C+1).join(r):"";return x&&(b=o(S+b,S.length?c-w.length:1/0)),i+=g,t=b+w,("<"===a?i+t+S:">"===a?S+i+t:"^"===a?S.substring(0,C>>=1)+i+t+S.substring(C):i+(x?t:S+t))+n}}}function Ht(t){return t+""}function It(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Rt(t,e,n){function r(e){var n=t(e),r=o(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new hs(n-1)),1),n}function o(t,n){return e(t=new hs((+t)),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date((+a))),e(a,1);else for(;a<r;)s.push(new Date((+a))),e(a,1);return s}function s(t,e,n){try{hs=It;var r=new It;return r._=t,a(r,e,n)}finally{hs=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=Bt(t);return l.floor=l,l.round=Bt(r),l.ceil=Bt(i),l.offset=Bt(o),l.range=s,t}function Bt(t){return function(e,n){try{hs=It;var r=new It;return r._=e,t(r,n)._}finally{hs=Date}}}function jt(t){function e(t){function e(e){for(var n,i,o,a=[],s=-1,l=0;++s<r;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=gs[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=L[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&hs!==It,a=new(o?It:hs);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,s=0,l=e.length,u=n.length;s<l;){if(r>=u)return-1;if(i=e.charCodeAt(s++),37===i){if(a=e.charAt(s++),o=T[a in gs?e.charAt(s++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){k.lastIndex=0;var r=k.exec(e.slice(n));return r?(t.w=M.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){A.lastIndex=0;var r=A.exec(e.slice(n));return r?(t.m=_.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){C.lastIndex=0;var r=C.exec(e.slice(n));return r?(t.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,r){return n(t,L.c.toString(),e,r)}function l(t,e,r){return n(t,L.x.toString(),e,r)}function u(t,e,r){return n(t,L.X.toString(),e,r)}function c(t,e,n){var r=x.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,d=t.date,h=t.time,p=t.periods,g=t.days,v=t.shortDays,m=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{hs=It;var e=new hs;return e._=t,r(e)}finally{hs=Date}}var r=e(t);return n.parse=function(t){try{hs=It;var e=r.parse(t);return e&&e._}finally{hs=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=le;var x=la.map(),b=qt(g),w=Xt(g),k=qt(v),M=Xt(v),C=qt(m),S=Xt(m),A=qt(y),_=Xt(y);p.forEach(function(t,e){x.set(t.toLowerCase(),e)});var L={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(f),d:function(t,e){return Vt(t.getDate(),e,2)},e:function(t,e){return Vt(t.getDate(),e,2)},H:function(t,e){return Vt(t.getHours(),e,2)},I:function(t,e){return Vt(t.getHours()%12||12,e,2)},j:function(t,e){return Vt(1+ds.dayOfYear(t),e,3)},L:function(t,e){return Vt(t.getMilliseconds(),e,3)},m:function(t,e){return Vt(t.getMonth()+1,e,2)},M:function(t,e){return Vt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Vt(t.getSeconds(),e,2)},U:function(t,e){return Vt(ds.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Vt(ds.mondayOfYear(t),e,2)},x:e(d),X:e(h),y:function(t,e){return Vt(t.getFullYear()%100,e,2)},Y:function(t,e){return Vt(t.getFullYear()%1e4,e,4)},Z:ae,"%":function(){return"%"}},T={a:r,A:i,b:o,B:a,c:s,d:te,e:te,H:ne,I:ne,j:ee,L:oe,m:Jt,M:re,p:c,S:ie,U:Yt,w:Ut,W:Gt,x:l,X:u,y:Zt,Y:$t,Z:Kt,"%":se};return e}function Vt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function qt(t){return new RegExp("^(?:"+t.map(la.requote).join("|")+")","i")}function Xt(t){for(var e=new u,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ut(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Yt(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Gt(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function $t(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Zt(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+2));return r?(t.y=Qt(+r[0]),n+r[0].length):-1}function Kt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Qt(t){return t+(t>68?1900:2e3)}function Jt(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function te(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ee(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ne(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function re(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function ie(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function oe(t,e,n){vs.lastIndex=0;var r=vs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function ae(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=ya(e)/60|0,i=ya(e)%60;return n+Vt(r,"0",2)+Vt(i,"0",2)}function se(t,e,n){ms.lastIndex=0;var r=ms.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function le(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function ue(){}function ce(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function fe(t,e){t&&ws.hasOwnProperty(t.type)&&ws[t.type](t,e)}function de(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function he(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)de(t[n],e,1);e.polygonEnd()}function pe(){function t(t,e){t*=Ba,e=e*Ba/2+za/4;var n=t-r,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,f=i*l+c*Math.cos(s),d=c*a*Math.sin(s);Ms.add(Math.atan2(d,f)),r=t,i=l,o=u}var e,n,r,i,o;Cs.point=function(a,s){Cs.point=t,r=(e=a)*Ba,i=Math.cos(s=(n=s)*Ba/2+za/4),o=Math.sin(s)},Cs.lineEnd=function(){t(e,n)}}function ge(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function ve(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function me(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ye(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function xe(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function be(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function we(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function ke(t,e){return ya(t[0]-e[0])<Wa&&ya(t[1]-e[1])<Wa}function Me(t,e){t*=Ba;var n=Math.cos(e*=Ba);Ce(n*Math.cos(t),n*Math.sin(t),Math.sin(e));
}function Ce(t,e,n){++Ss,_s+=(t-_s)/Ss,Ls+=(e-Ls)/Ss,Ts+=(n-Ts)/Ss}function Se(){function t(t,i){t*=Ba;var o=Math.cos(i*=Ba),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+r*l);As+=u,Es+=u*(e+(e=a)),Ns+=u*(n+(n=s)),Ps+=u*(r+(r=l)),Ce(e,n,r)}var e,n,r;Ds.point=function(i,o){i*=Ba;var a=Math.cos(o*=Ba);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Ds.point=t,Ce(e,n,r)}}function Ae(){Ds.point=Me}function _e(){function t(t,e){t*=Ba;var n=Math.cos(e*=Ba),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=i*l-o*s,c=o*a-r*l,f=r*s-i*a,d=Math.sqrt(u*u+c*c+f*f),h=r*a+i*s+o*l,p=d&&-tt(h)/d,g=Math.atan2(d,h);Fs+=p*u,Os+=p*c,Ws+=p*f,As+=g,Es+=g*(r+(r=a)),Ns+=g*(i+(i=s)),Ps+=g*(o+(o=l)),Ce(r,i,o)}var e,n,r,i,o;Ds.point=function(a,s){e=a,n=s,Ds.point=t,a*=Ba;var l=Math.cos(s*=Ba);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),Ce(r,i,o)},Ds.lineEnd=function(){t(e,n),Ds.lineEnd=Ae,Ds.point=Me}}function Le(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function Te(){return!0}function Ee(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(ke(n,r)){i.lineStart();for(var s=0;s<e;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var l=new Pe(n,t,null,(!0)),u=new Pe(n,null,l,(!1));l.o=u,o.push(l),a.push(u),l=new Pe(r,t,null,(!1)),u=new Pe(r,null,l,(!0)),l.o=u,o.push(l),a.push(u)}}),a.sort(e),Ne(o),Ne(a),o.length){for(var s=0,l=n,u=a.length;s<u;++s)a[s].e=l=!l;for(var c,f,d=o[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,u=c.length;s<u;++s)i.point((f=c[s])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){c=h.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function Ne(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function Pe(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Fe(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);v.point(n[0],n[1])}function l(){y.point=s,v.lineStart()}function u(){y.point=a,v.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),b.lineEnd();var t,e=b.clean(),n=x.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&e){t=n[0];var i,r=t.length-1,a=-1;if(r>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),h.push(n.filter(Oe))}var h,p,g,v=e(o),m=i.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=d,h=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,h=la.merge(h);var t=Re(m,p);h.length?(w||(o.polygonStart(),w=!0),Ee(h,De,t,n,o)):t&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),h=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},x=We(),b=e(x),w=!1;return y}}function Oe(t){return t.length>1}function We(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:w,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function De(t,e){return((t=t.x)[0]<0?t[1]-Ra-Wa:Ra-t[1])-((e=e.x)[0]<0?e[1]-Ra-Wa:Ra-e[1])}function ze(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?za:-za,l=ya(o-n);ya(l-za)<Wa?(t.point(n,r=(r+a)/2>0?Ra:-Ra),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=za&&(ya(n-i)<Wa&&(n-=i*Wa),ya(o-s)<Wa&&(o-=s*Wa),r=He(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function He(t,e,n,r){var i,o,a=Math.sin(t-n);return ya(a)>Wa?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}function Ie(t,e,n,r){var i;if(null==t)i=n*Ra,r.point(-za,i),r.point(0,i),r.point(za,i),r.point(za,0),r.point(za,-i),r.point(0,-i),r.point(-za,-i),r.point(-za,0),r.point(-za,i);else if(ya(t[0]-e[0])>Wa){var o=t[0]<e[0]?za:-za;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Re(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;Ms.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var f=u[0],d=f[0],h=f[1]/2+za/4,p=Math.sin(h),g=Math.cos(h),v=1;;){v===c&&(v=0),t=u[v];var m=t[0],y=t[1]/2+za/4,x=Math.sin(y),b=Math.cos(y),w=m-d,k=w>=0?1:-1,M=k*w,C=M>za,S=p*x;if(Ms.add(Math.atan2(S*k*Math.sin(M),g*b+S*Math.cos(M))),o+=C?w+k*Ha:w,C^d>=n^m>=n){var A=me(ge(f),ge(t));be(A);var _=me(i,A);be(_);var L=(C^w>=0?-1:1)*et(_[2]);(r>L||r===L&&(A[0]||A[1]))&&(a+=C^w>=0?1:-1)}if(!v++)break;d=m,p=x,g=b,f=t}}return(o<-Wa||o<Wa&&Ms<-Wa)^1&a}function Be(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var h,p=[f,d],g=e(f,d),v=a?g?0:i(f,d):g?i(f+(f<0?za:-za),d):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(h=r(n,p),(ke(n,h)||ke(p,h))&&(p[0]+=Wa,p[1]+=Wa,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),h=r(p,n),t.point(h[0],h[1])):(h=r(n,p),t.point(h[0],h[1]),t.lineEnd()),n=h;else if(s&&n&&a^g){var m;v&o||!(m=r(p,n,!0))||(c=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||n&&ke(n,p)||t.point(p[0],p[1]),n=p,l=g,o=v},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(t,e,n){var r=ge(t),i=ge(e),a=[1,0,0],s=me(r,i),l=ve(s,s),u=s[0],c=l-u*u;if(!c)return!n&&t;var f=o*l/c,d=-o*u/c,h=me(a,s),p=xe(a,f),g=xe(s,d);ye(p,g);var v=h,m=ve(p,v),y=ve(v,v),x=m*m-y*(ve(p,p)-1);if(!(x<0)){var b=Math.sqrt(x),w=xe(v,(-m-b)/y);if(ye(w,p),w=we(w),!n)return w;var k,M=t[0],C=e[0],S=t[1],A=e[1];C<M&&(k=M,M=C,C=k);var _=C-M,L=ya(_-za)<Wa,T=L||_<Wa;if(!L&&A<S&&(k=S,S=A,A=k),T?L?S+A>0^w[1]<(ya(w[0]-M)<Wa?S:A):S<=w[1]&&w[1]<=A:_>za^(M<=w[0]&&w[0]<=C)){var E=xe(v,(-m+b)/y);return ye(E,p),[w,we(E)]}}}function i(e,n){var r=a?t:za-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),a=o>0,s=ya(o)>Wa,l=gn(t,6*Ba);return Fe(e,n,l,a?[0,-t]:[-za,t-za])}function je(t,e,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=s.x,f=s.y,d=0,h=1,p=c-l,g=f-u;if(o=t-l,p||!(o>0)){if(o/=p,p<0){if(o<d)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>d&&(d=o)}if(o=n-l,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>d&&(d=o)}else if(p>0){if(o<d)return;o<h&&(h=o)}if(o=e-u,g||!(o>0)){if(o/=g,g<0){if(o<d)return;o<h&&(h=o)}else if(g>0){if(o>h)return;o>d&&(d=o)}if(o=r-u,g||!(o<0)){if(o/=g,g<0){if(o>h)return;o>d&&(d=o)}else if(g>0){if(o<d)return;o<h&&(h=o)}return d>0&&(i.a={x:l+d*p,y:u+d*g}),h<1&&(i.b={x:l+h*p,y:u+h*g}),i}}}}}}function Ve(t,e,n,r){function i(r,i){return ya(r[0]-t)<Wa?i>0?0:3:ya(r[0]-n)<Wa?i>0?2:1:ya(r[1]-e)<Wa?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=v.length,r=t[1],i=0;i<n;++i)for(var o,a=1,s=v[i],l=s.length,u=s[0];a<l;++a)o=s[a],u[1]<=r?o[1]>r&&J(u,o,t)>0&&++e:o[1]<=r&&J(u,o,t)<0&&--e,u=o;return 0!==e}function u(o,s,l,u){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+l+4)%4)!==f)}else u.point(s[0],s[1])}function c(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function f(t,e){c(t,e)&&s.point(t,e)}function d(){T.point=p,v&&v.push(m=[]),C=!0,M=!1,w=k=NaN}function h(){g&&(p(y,x),b&&M&&_.rejoin(),g.push(_.buffer())),T.point=f,M&&s.lineEnd()}function p(t,e){t=Math.max(-Hs,Math.min(Hs,t)),e=Math.max(-Hs,Math.min(Hs,e));var n=c(t,e);if(v&&m.push([t,e]),C)y=t,x=e,b=n,C=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&M)s.point(t,e);else{var r={a:{x:w,y:k},b:{x:t,y:e}};L(r)?(M||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),S=!1):n&&(s.lineStart(),s.point(t,e),S=!1)}w=t,k=e,M=n}var g,v,m,y,x,b,w,k,M,C,S,A=s,_=We(),L=je(t,e,n,r),T={point:f,lineStart:d,lineEnd:h,polygonStart:function(){s=_,g=[],v=[],S=!0},polygonEnd:function(){s=A,g=la.merge(g);var e=l([t,r]),n=S&&e,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&Ee(g,o,e,u,s),s.polygonEnd()),g=v=m=null}};return T}}function qe(t){var e=0,n=za/3,r=sn(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*za/180,n=t[1]*za/180):[e/za*180,n/za*180]},i}function Xe(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,et((o-(t*t+n*n)*i*i)/(2*i))]},n}function Ue(){function t(t,e){Rs+=i*t-r*e,r=t,i=e}var e,n,r,i;Xs.point=function(o,a){Xs.point=t,e=r=o,n=i=a},Xs.lineEnd=function(){t(e,n)}}function Ye(t,e){t<Bs&&(Bs=t),t>Vs&&(Vs=t),e<js&&(js=e),e>qs&&(qs=e)}function Ge(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function r(){s.point=t}function i(){a.push("Z")}var o=$e(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=$e(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function $e(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ze(t,e){_s+=t,Ls+=e,++Ts}function Ke(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);Es+=a*(e+t)/2,Ns+=a*(n+r)/2,Ps+=a,Ze(e=t,n=r)}var e,n;Ys.point=function(r,i){Ys.point=t,Ze(e=r,n=i)}}function Qe(){Ys.point=Ze}function Je(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);Es+=a*(r+t)/2,Ns+=a*(i+e)/2,Ps+=a,a=i*t-r*e,Fs+=a*(r+t),Os+=a*(i+e),Ws+=3*a,Ze(r=t,i=e)}var e,n,r,i;Ys.point=function(o,a){Ys.point=t,Ze(e=r=o,n=i=a)},Ys.lineEnd=function(){t(e,n)}}function tn(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,Ha)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:w};return s}function en(t){function e(t){return(s?r:n)(t)}function n(e){return on(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){x=NaN,C.point=o,e.lineStart()}function o(n,r){var o=ge([n,r]),a=t(n,r);i(x,b,y,w,k,M,x=a[0],b=a[1],y=n,w=o[0],k=o[1],M=o[2],s,e),e.point(x,b)}function a(){C.point=n,e.lineEnd()}function l(){r(),C.point=u,C.lineEnd=c}function u(t,e){o(f=t,d=e),h=x,p=b,g=w,v=k,m=M,C.point=o}function c(){i(x,b,y,w,k,M,h,p,f,g,v,m,s,e),C.lineEnd=a,a()}var f,d,h,p,g,v,m,y,x,b,w,k,M,C={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),C.lineStart=l},polygonEnd:function(){e.polygonEnd(),C.lineStart=r}};return C}function i(e,n,r,s,l,u,c,f,d,h,p,g,v,m){var y=c-e,x=f-n,b=y*y+x*x;if(b>4*o&&v--){var w=s+h,k=l+p,M=u+g,C=Math.sqrt(w*w+k*k+M*M),S=Math.asin(M/=C),A=ya(ya(M)-1)<Wa||ya(r-d)<Wa?(r+d)/2:Math.atan2(k,w),_=t(A,S),L=_[0],T=_[1],E=L-e,N=T-n,P=x*E-y*N;(P*P/b>o||ya((y*E+x*N)/b-.5)>.3||s*h+l*p+u*g<a)&&(i(e,n,r,s,l,u,L,T,A,w/=C,k/=C,M,v,m),m.point(L,T),i(L,T,A,w,k,M,c,f,d,h,p,g,v,m))}}var o=.5,a=Math.cos(30*Ba),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function nn(t){var e=en(function(e,n){return t([e*ja,n*ja])});return function(t){return ln(e(t))}}function rn(t){this.stream=t}function on(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function an(t){return sn(function(){return t})()}function sn(t){function e(t){return t=s(t[0]*Ba,t[1]*Ba),[t[0]*d+l,u-t[1]*d]}function n(t){return t=s.invert((t[0]-l)/d,(u-t[1])/d),t&&[t[0]*ja,t[1]*ja]}function r(){s=Le(a=fn(m,x,b),o);var t=o(g,v);return l=h-t[0]*d,u=p+t[1]*d,i()}function i(){return c&&(c.valid=!1,c=null),e}var o,a,s,l,u,c,f=en(function(t,e){return t=o(t,e),[t[0]*d+l,u-t[1]*d]}),d=150,h=480,p=250,g=0,v=0,m=0,x=0,b=0,w=zs,k=y,M=null,C=null;return e.stream=function(t){return c&&(c.valid=!1),c=ln(w(a,f(k(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(M=t,zs):Be((M=+t)*Ba),i()):M},e.clipExtent=function(t){return arguments.length?(C=t,k=t?Ve(t[0][0],t[0][1],t[1][0],t[1][1]):y,i()):C},e.scale=function(t){return arguments.length?(d=+t,r()):d},e.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],r()):[h,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Ba,v=t[1]%360*Ba,r()):[g*ja,v*ja]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Ba,x=t[1]%360*Ba,b=t.length>2?t[2]%360*Ba:0,r()):[m*ja,x*ja,b*ja]},la.rebind(e,f,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function ln(t){return on(t,function(e,n){t.point(e*Ba,n*Ba)})}function un(t,e){return[t,e]}function cn(t,e){return[t>za?t-Ha:t<-za?t+Ha:t,e]}function fn(t,e,n){return t?e||n?Le(hn(t),pn(e,n)):hn(t):e||n?pn(e,n):cn}function dn(t){return function(e,n){return e+=t,[e>za?e-Ha:e<-za?e+Ha:e,n]}}function hn(t){var e=dn(t);return e.invert=dn(-t),e}function pn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),et(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),et(c*r-s*i)]},n}function gn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=vn(n,i),o=vn(n,o),(a>0?i<o:i>o)&&(i+=a*Ha)):(i=t+a*Ha,o=t-.5*l);for(var u,c=i;a>0?c>o:c<o;c-=l)s.point((u=we([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function vn(t,e){var n=ge(e);n[0]-=t,be(n);var r=tt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Wa)%(2*Math.PI)}function mn(t,e,n){var r=la.range(t,e-Wa,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function yn(t,e,n){var r=la.range(t,e-Wa,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function xn(t){return t.source}function bn(t){return t.target}function wn(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(t),u=i*Math.sin(t),c=a*Math.cos(n),f=a*Math.sin(n),d=2*Math.asin(Math.sqrt(ot(r-e)+i*a*ot(n-t))),h=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*h,n=Math.sin(d-t)*h,r=n*l+e*c,i=n*u+e*f,a=n*o+e*s;return[Math.atan2(i,r)*ja,Math.atan2(a,Math.sqrt(r*r+i*i))*ja]}:function(){return[t*ja,e*ja]};return p.distance=d,p}function kn(){function t(t,i){var o=Math.sin(i*=Ba),a=Math.cos(i),s=ya((t*=Ba)-e),l=Math.cos(s);Gs+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),e=t,n=o,r=a}var e,n,r;$s.point=function(i,o){e=i*Ba,n=Math.sin(o*=Ba),r=Math.cos(o),$s.point=t},$s.lineEnd=function(){$s.point=$s.lineEnd=w}}function Mn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function Cn(t,e){function n(t,e){a>0?e<-Ra+Wa&&(e=-Ra+Wa):e>Ra-Wa&&(e=Ra-Wa);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(za/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=Q(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-Ra]},n):An}function Sn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return ya(i)<Wa?un:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-Q(i)*Math.sqrt(t*t+n*n)]},n)}function An(t,e){return[t,Math.log(Math.tan(za/4+e/2))]}function _n(t){var e,n=an(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=za*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function Ln(t,e){return[Math.log(Math.tan(za/4+e/2)),-t]}function Tn(t){return t[0]}function En(t){return t[1]}function Nn(t){for(var e=t.length,n=[0,1],r=2,i=2;i<e;i++){for(;r>1&&J(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Pn(t,e){return t[0]-e[0]||t[1]-e[1]}function Fn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function On(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],c=e[1]-l,f=r[1]-u,d=(s*(l-u)-f*(i-o))/(f*a-s*c);return[i+d*a,l+d*c]}function Wn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function Dn(){rr(this),this.edge=this.site=this.circle=null}function zn(t){var e=sl.pop()||new Dn;return e.site=t,e}function Hn(t){Gn(t),il.remove(t),sl.push(t),rr(t)}function In(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];Hn(t);for(var l=o;l.circle&&ya(n-l.circle.x)<Wa&&ya(r-l.circle.cy)<Wa;)o=l.P,s.unshift(l),Hn(l),l=o;s.unshift(l),Gn(l);for(var u=a;u.circle&&ya(n-u.circle.x)<Wa&&ya(r-u.circle.cy)<Wa;)a=u.N,s.push(u),Hn(u),u=a;s.push(u),Gn(u);var c,f=s.length;for(c=1;c<f;++c)u=s[c],l=s[c-1],tr(u.edge,l.site,u.site,i);l=s[0],u=s[f-1],u.edge=Qn(l.site,u.site,null,i),Yn(l),Yn(u)}function Rn(t){for(var e,n,r,i,o=t.x,a=t.y,s=il._;s;)if(r=Bn(s,a)-o,r>Wa)s=s.L;else{if(i=o-jn(s,a),!(i>Wa)){r>-Wa?(e=s.P,n=s):i>-Wa?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=zn(t);if(il.insert(e,l),e||n){if(e===n)return Gn(e),n=zn(e.site),il.insert(l,n),l.edge=n.edge=Qn(e.site,l.site),Yn(e),void Yn(n);if(!n)return void(l.edge=Qn(e.site,l.site));Gn(e),Gn(n);var u=e.site,c=u.x,f=u.y,d=t.x-c,h=t.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(d*v-h*g),y=d*d+h*h,x=g*g+v*v,b={x:(v*y-h*x)/m+c,y:(d*x-g*y)/m+f};tr(n.edge,u,p,b),l.edge=Qn(u,t,null,b),n.edge=Qn(t,p,null,b),Yn(e),Yn(n)}}function Bn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-(1/0);n=a.site;var s=n.x,l=n.y,u=l-e;if(!u)return s;var c=s-r,f=1/o-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+i-o/2)))/f+r:(r+s)/2}function jn(t,e){var n=t.N;if(n)return Bn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Vn(t){this.site=t,this.edges=[]}function qn(t){for(var e,n,r,i,o,a,s,l,u,c,f=t[0][0],d=t[1][0],h=t[0][1],p=t[1][1],g=rl,v=g.length;v--;)if(o=g[v],o&&o.prepare())for(s=o.edges,l=s.length,a=0;a<l;)c=s[a].end(),r=c.x,i=c.y,u=s[++a%l].start(),e=u.x,n=u.y,(ya(r-e)>Wa||ya(i-n)>Wa)&&(s.splice(a,0,new er(Jn(o.site,c,ya(r-f)<Wa&&p-i>Wa?{x:f,y:ya(e-f)<Wa?n:p}:ya(i-p)<Wa&&d-r>Wa?{x:ya(n-p)<Wa?e:d,y:p}:ya(r-d)<Wa&&i-h>Wa?{x:d,y:ya(e-d)<Wa?n:h}:ya(i-h)<Wa&&r-f>Wa?{x:ya(n-h)<Wa?e:f,y:h}:null),o.site,null)),++l)}function Xn(t,e){return e.angle-t.angle}function Un(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,f=o.y-s,d=2*(l*f-u*c);if(!(d>=-Da)){var h=l*l+u*u,p=c*c+f*f,g=(f*h-u*p)/d,v=(l*p-c*h)/d,f=v+s,m=ll.pop()||new Un;m.arc=t,m.site=i,m.x=g+a,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,t.circle=m;for(var y=null,x=al._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}al.insert(y,m),y||(ol=m)}}}}function Gn(t){var e=t.circle;e&&(e.P||(ol=e.N),al.remove(e),ll.push(e),rr(e),t.circle=null)}function $n(t){for(var e,n=nl,r=je(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!Zn(e,t)||!r(e)||ya(e.a.x-e.b.x)<Wa&&ya(e.a.y-e.b.y)<Wa)&&(e.a=e.b=null,n.splice(i,1))}function Zn(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,f=t.r,d=c.x,h=c.y,p=f.x,g=f.y,v=(d+p)/2,m=(h+g)/2;if(g===h){if(v<a||v>=s)return;if(d>p){if(o){if(o.y>=u)return}else o={x:v,y:l};n={x:v,y:u}}else{if(o){if(o.y<l)return}else o={x:v,y:u};n={x:v,y:l}}}else if(r=(d-p)/(g-h),i=m-r*v,r<-1||r>1)if(d>p){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(h<g){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Kn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Qn(t,e,n,r){var i=new Kn(t,e);return nl.push(i),n&&tr(i,t,e,n),r&&tr(i,e,t,r),rl[t.i].edges.push(new er(i,t,e)),rl[e.i].edges.push(new er(i,e,t)),i}function Jn(t,e,n){var r=new Kn(t,null);return r.a=e,r.b=n,nl.push(r),r}function tr(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function er(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function ir(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ar(t){for(;t.L;)t=t.L;return t}function sr(t,e){var n,r,i,o=t.sort(lr).pop();for(nl=[],rl=new Array(t.length),il=new nr,al=new nr;;)if(i=ol,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(rl[o.i]=new Vn(o),Rn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;In(i.arc)}e&&($n(e),qn(e));var a={cells:rl,edges:nl};return il=al=nl=rl=null,a}function lr(t,e){return e.y-t.y||e.x-t.x}function ur(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function cr(t){return t.x}function fr(t){return t.y}function dr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hr(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=e.nodes;l[0]&&hr(t,l[0],n,r,a,s),l[1]&&hr(t,l[1],a,r,i,s),l[2]&&hr(t,l[2],n,s,a,o),l[3]&&hr(t,l[3],a,s,i,o)}}function pr(t,e,n,r,i,o,a){var s,l=1/0;return function t(u,c,f,d,h){if(!(c>o||f>a||d<r||h<i)){if(p=u.point){var p,g=e-u.x,v=n-u.y,m=g*g+v*v;if(m<l){var y=Math.sqrt(l=m);r=e-y,i=n-y,o=e+y,a=n+y,s=p}}for(var x=u.nodes,b=.5*(c+d),w=.5*(f+h),k=e>=b,M=n>=w,C=M<<1|k,S=C+4;C<S;++C)if(u=x[3&C])switch(3&C){case 0:t(u,c,f,b,w);break;case 1:t(u,b,f,d,w);break;case 2:t(u,c,w,b,h);break;case 3:t(u,b,w,d,h)}}}(t,r,i,o,a),s}function gr(t,e){t=la.rgb(t),e=la.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return"#"+bt(Math.round(n+o*t))+bt(Math.round(r+a*t))+bt(Math.round(i+s*t))}}function vr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=xr(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function mr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yr(t,e){var n,r,i,o=cl.lastIndex=fl.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=cl.exec(t))&&(r=fl.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:mr(n,r)})),o=fl.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function xr(t,e){for(var n,r=la.interpolators.length;--r>=0&&!(n=la.interpolators[r](t,e)););return n}function br(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;n<s;++n)r.push(xr(t[n],e[n]));for(;n<o;++n)i[n]=t[n];for(;n<a;++n)i[n]=e[n];return function(t){for(n=0;n<s;++n)i[n]=r[n](t);return i}}function wr(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function kr(t){return function(e){return 1-t(1-e)}}function Mr(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Cr(t){return t*t}function Sr(t){return t*t*t}function Ar(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(t<.5?n:3*(t-e)+n-.75)}function _r(t){return function(e){return Math.pow(e,t)}}function Lr(t){return 1-Math.cos(t*Ra)}function Tr(t){return Math.pow(2,10*(t-1))}function Er(t){return 1-Math.sqrt(1-t*t)}function Nr(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/Ha*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*Ha/e)}}function Pr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Fr(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Or(t,e){t=la.hcl(t),e=la.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return ct(n+o*t,r+a*t,i+s*t)+""}}function Wr(t,e){t=la.hsl(t),e=la.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:o<-180&&(o+=360),function(t){return lt(n+o*t,r+a*t,i+s*t)+""}}function Dr(t,e){t=la.lab(t),e=la.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(t){return dt(n+o*t,r+a*t,i+s*t)+""}}function zr(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Hr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Rr(e),i=Ir(e,n),o=Rr(Br(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*ja,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*ja:0}function Ir(t,e){return t[0]*e[0]+t[1]*e[1]}function Rr(t){var e=Math.sqrt(Ir(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Br(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function jr(t){return t.length?t.pop()+",":""}function Vr(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:mr(t[0],e[0])},{i:i-2,x:mr(t[1],e[1])})}else(e[0]||e[1])&&n.push("translate("+e+")")}function qr(t,e,n,r){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),r.push({i:n.push(jr(n)+"rotate(",null,")")-2,x:mr(t,e)})):e&&n.push(jr(n)+"rotate("+e+")")}function Xr(t,e,n,r){t!==e?r.push({i:n.push(jr(n)+"skewX(",null,")")-2,x:mr(t,e)}):e&&n.push(jr(n)+"skewX("+e+")")}function Ur(t,e,n,r){if(t[0]!==e[0]||t[1]!==e[1]){var i=n.push(jr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:mr(t[0],e[0])},{i:i-2,x:mr(t[1],e[1])})}else 1===e[0]&&1===e[1]||n.push(jr(n)+"scale("+e+")")}function Yr(t,e){var n=[],r=[];return t=la.transform(t),e=la.transform(e),Vr(t.translate,e.translate,n,r),qr(t.rotate,e.rotate,n,r),Xr(t.skew,e.skew,n,r),Ur(t.scale,e.scale,n,r),t=e=null,function(t){for(var e,i=-1,o=r.length;++i<o;)n[(e=r[i]).i]=e.x(t);return n.join("")}}function Gr(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function $r(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Zr(t){for(var e=t.source,n=t.target,r=Qr(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Kr(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Qr(t,e){if(t===e)return t;for(var n=Kr(t),r=Kr(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function Jr(t){t.fixed|=2}function ti(t){t.fixed&=-7}function ei(t){t.fixed|=4,t.px=t.x,t.py=t.y}function ni(t){t.fixed&=-5}function ri(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)o=a[l],null!=o&&(ri(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,i+=u*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function ii(t,e){return la.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ci,t}function oi(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ai(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function si(t){return t.children}function li(t){return t.value}function ui(t,e){return e.value-t.value}function ci(t){return la.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function fi(t){return t.x}function di(t){return t.y}function hi(t,e,n){t.y0=e,t.y=n}function pi(t){return la.range(t.length)}function gi(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function vi(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;n<o;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function mi(t){return t.reduce(yi,0)}function yi(t,e){return t+e[1]}function xi(t,e){return bi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function bi(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function wi(t){return[la.min(t),la.max(t)]}function ki(t,e){return t.value-e.value}function Mi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function Ci(t,e){t._pack_next=e,e._pack_prev=t}function Si(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function Ai(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}if((n=t.children)&&(u=n.length)){var n,r,i,o,a,s,l,u,c=1/0,f=-(1/0),d=1/0,h=-(1/0);if(n.forEach(_i),r=n[0],r.x=-r.r,r.y=0,e(r),u>1&&(i=n[1],i.x=i.r,i.y=0,e(i),u>2))for(o=n[2],Ei(r,i,o),e(o),Mi(r,o),r._pack_prev=o,Mi(o,i),i=r._pack_next,a=3;a<u;a++){Ei(r,i,o=n[a]);var p=0,g=1,v=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(Si(s,o)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!Si(l,o);l=l._pack_prev,v++);p?(g<v||g==v&&i.r<r.r?Ci(r,i=s):Ci(r=l,i),a--):(Mi(r,o),i=o,e(o))}var m=(c+f)/2,y=(d+h)/2,x=0;for(a=0;a<u;a++)o=n[a],o.x-=m,o.y-=y,x=Math.max(x,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=x,n.forEach(Li)}}function _i(t){t._pack_next=t._pack_prev=t}function Li(t){delete t._pack_next,delete t._pack_prev}function Ti(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ti(i[o],e,n,r)}function Ei(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function Ni(t,e){return t.parent==e.parent?1:2}function Pi(t){var e=t.children;return e.length?e[0]:t.t}function Fi(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Oi(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Wi(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Di(t,e,n){return t.a.parent===e.parent?t.a:n}function zi(t){return 1+la.max(t,function(t){return t.y})}function Hi(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Ii(t){var e=t.children;return e&&e.length?Ii(e[0]):t}function Ri(t){var e,n=t.children;return n&&(e=n.length)?Ri(n[e-1]):t}function Bi(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ji(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Vi(t){var e=t[0],n=t[t.length-1];return e<n?[e,n]:[n,e]}function qi(t){return t.rangeExtent?t.rangeExtent():Vi(t.range())}function Xi(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Ui(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,
i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Yi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:kl}function Gi(t,e,n,r){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=la.bisect(t,e,1,s)-1;return o[n](i[n](e))}}function $i(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Gi:Xi,l=r?$r:Gr;return a=i(t,e,l,n),s=i(e,t,l,xr),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(zr)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return Ji(t,e)},o.tickFormat=function(e,n){return to(t,e,n)},o.nice=function(e){return Ki(t,e),i()},o.copy=function(){return $i(t,e,n,r)},i()}function Zi(t,e){return la.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ki(t,e){return Ui(t,Yi(Qi(t,e)[2])),Ui(t,Yi(Qi(t,e)[2])),t}function Qi(t,e){null==e&&(e=10);var n=Vi(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Ji(t,e){return la.range.apply(la,Qi(t,e))}function to(t,e,n){var r=Qi(t,e);if(n){var i=cs.exec(n);if(i.shift(),"s"===i[8]){var o=la.formatPrefix(Math.max(ya(r[0]),ya(r[1])));return i[7]||(i[7]="."+eo(o.scale(r[2]))),i[8]="f",n=la.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+no(i[8],r)),n=i.join("")}else n=",."+eo(r[2])+"f";return la.format(n)}function eo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function no(t,e){var n=eo(e[2]);return t in Ml?Math.abs(n-eo(Math.max(ya(e[0]),ya(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ro(t,e,n,r){function i(t){return(n?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(i(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),a):e},a.nice=function(){var e=Ui(r.map(i),n?Math:Sl);return t.domain(e),r=e.map(o),a},a.ticks=function(){var t=Vi(r),a=[],s=t[0],l=t[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),f=e%1?2:e;if(isFinite(c-u)){if(n){for(;u<c;u++)for(var d=1;d<f;d++)a.push(o(u)*d);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var d=f-1;d>0;d--)a.push(o(u)*d);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(t,n){if(!arguments.length)return Cl;arguments.length<2?n=Cl:"function"!=typeof n&&(n=la.format(n));var r=Math.max(1,e*t/a.ticks().length);return function(t){var a=t/o(Math.round(i(t)));return a*e<e-.5&&(a*=e),a<=r?n(t):""}},a.copy=function(){return ro(t.copy(),e,n,r)},Zi(a,t)}function io(t,e,n){function r(e){return t(i(e))}var i=oo(e),o=oo(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return Ji(n,t)},r.tickFormat=function(t,e){return to(n,t,e)},r.nice=function(t){return r.domain(Ki(n,t))},r.exponent=function(a){return arguments.length?(i=oo(e=a),o=oo(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return io(t.copy(),e,n)},Zi(r,t)}function oo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ao(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%o.length]}function r(e,n){return la.range(t.length).map(function(t){return e+n*t})}var i,o,a;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new u;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return o=r(l+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+s)|0;return o=r(l+Math.round(c*s/2+(u-l-(t.length-1+s)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=(f-c)/(t.length-s+2*l);return o=r(c+d*l,d),u&&o.reverse(),a=d*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],d=Math.floor((f-c)/(t.length-s+2*l));return o=r(c+Math.round((f-c-(t.length-s)*d)/2),d),u&&o.reverse(),a=Math.round(d*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Vi(e.a[0])},n.copy=function(){return ao(t,e)},n.domain(t)}function so(t,e){function o(){var n=0,r=e.length;for(s=[];++n<r;)s[n-1]=la.quantile(t,n/r);return a}function a(t){if(!isNaN(t=+t))return e[la.bisect(s,t)]}var s;return a.domain=function(e){return arguments.length?(t=e.map(r).filter(i).sort(n),o()):t},a.range=function(t){return arguments.length?(e=t,o()):e},a.quantiles=function(){return s},a.invertExtent=function(n){return n=e.indexOf(n),n<0?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},a.copy=function(){return so(t,e)},o()}function lo(t,e,n){function r(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=e<0?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return lo(t,e,n)},i()}function uo(t,e){function n(n){if(n<=n)return e[la.bisect(t,n)]}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return uo(t,e)},n}function co(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Ji(t,e)},e.tickFormat=function(e,n){return to(t,e,n)},e.copy=function(){return co(t)},e}function fo(){return 0}function ho(t){return t.innerRadius}function po(t){return t.outerRadius}function go(t){return t.startAngle}function vo(t){return t.endAngle}function mo(t){return t&&t.padAngle}function yo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function xo(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,f=t[1]+u,d=e[0]+l,h=e[1]+u,p=(c+d)/2,g=(f+h)/2,v=d-c,m=h-f,y=v*v+m*m,x=n-r,b=c*h-d*f,w=(m<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),k=(b*m-v*w)/y,M=(-b*v-m*w)/y,C=(b*m+v*w)/y,S=(-b*v+m*w)/y,A=k-p,_=M-g,L=C-p,T=S-g;return A*A+_*_>L*L+T*T&&(k=C,M=S),[[k-l,M-u],[k*n/x,M*n/x]]}function bo(t){function e(e){function a(){u.push("M",o(t(c),s))}for(var l,u=[],c=[],f=-1,d=e.length,h=At(n),p=At(r);++f<d;)i.call(this,l=e[f],f)?c.push([+h.call(this,l,f),+p.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=Tn,r=En,i=Te,o=wo,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Nl.get(t)||wo).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function wo(t){return t.length>1?t.join("L"):t+"Z"}function ko(t){return t.join("L")+"Z"}function Mo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Co(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function So(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function Ao(t,e){return t.length<4?wo(t):t[1]+To(t.slice(1,-1),Eo(t,e))}function _o(t,e){return t.length<3?ko(t):t[0]+To((t.push(t[0]),t),Eo([t[t.length-2]].concat(t,[t[1]]),e))}function Lo(t,e){return t.length<3?wo(t):t[0]+To(t,Eo(t,e))}function To(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return wo(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Eo(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function No(t){if(t.length<3)return wo(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Wo(Ol,a),",",Wo(Ol,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Do(l,a,s);return t.pop(),l.push("L",r),l.join("")}function Po(t){if(t.length<4)return wo(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);for(n.push(Wo(Ol,o)+","+Wo(Ol,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Do(n,o,a);return n.join("")}function Fo(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);for(e=[Wo(Ol,a),",",Wo(Ol,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Do(e,a,s);return e.join("")}function Oo(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)r=t[u],i=u/n,r[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*l);return No(t)}function Wo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Do(t,e,n){t.push("C",Wo(Pl,e),",",Wo(Pl,n),",",Wo(Fl,e),",",Wo(Fl,n),",",Wo(Ol,e),",",Wo(Ol,n))}function zo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Ho(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=zo(i,o);++e<n;)r[e]=(a+(a=zo(i=o,o=t[e+1])))/2;return r[e]=a,r}function Io(t){for(var e,n,r,i,o=[],a=Ho(t),s=-1,l=t.length-1;++s<l;)e=zo(t[s],t[s+1]),ya(e)<Wa?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Ro(t){return t.length<3?wo(t):t[0]+To(t,Io(t))}function Bo(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]-Ra,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function jo(t){function e(e){function l(){g.push("M",s(t(m),f),c,u(t(v.reverse()),f),"Z")}for(var d,h,p,g=[],v=[],m=[],y=-1,x=e.length,b=At(n),w=At(i),k=n===r?function(){return h}:At(r),M=i===o?function(){return p}:At(o);++y<x;)a.call(this,d=e[y],y)?(v.push([h=+b.call(this,d,y),p=+w.call(this,d,y)]),m.push([+k.call(this,d,y),+M.call(this,d,y)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=Tn,r=Tn,i=0,o=En,a=Te,s=wo,l=s.key,u=s,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Nl.get(t)||wo).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Vo(t){return t.radius}function qo(t){return[t.x,t.y]}function Xo(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Ra;return[n*Math.cos(r),n*Math.sin(r)]}}function Uo(){return 64}function Yo(){return"circle"}function Go(t){var e=Math.sqrt(t/za);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function $o(t){return function(){var e,n,r;(e=this[t])&&(r=e[n=e.active])&&(r.timer.c=null,r.timer.t=NaN,--e.count?delete e[n]:delete this[t],e.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Zo(t,e,n){return Ma(t,Bl),t.namespace=e,t.id=n,t}function Ko(t,e,n,r){var i=t.id,o=t.namespace;return V(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Qo(t){return null==t&&(t=""),function(){this.textContent=t}}function Jo(t){return null==t?"__transition__":"__transition_"+t+"__"}function ta(t,e,n,r,i){function o(t){var e=g.delay;return c.t=e+l,e<=t?a(t-e):void(c.c=a)}function a(n){var i=p.active,o=p[i];o&&(o.timer.c=null,o.timer.t=NaN,--p.count,delete p[i],o.event&&o.event.interrupt.call(t,t.__data__,o.index));for(var a in p)if(+a<r){var u=p[a];u.timer.c=null,u.timer.t=NaN,--p.count,delete p[a]}c.c=s,Nt(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=r,g.event&&g.event.start.call(t,t.__data__,e),h=[],g.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&h.push(r)}),d=g.ease,f=g.duration}function s(i){for(var o=i/f,a=d(o),s=h.length;s>0;)h[--s].call(t,a);if(o>=1)return g.event&&g.event.end.call(t,t.__data__,e),--p.count?delete p[r]:delete t[n],1}var l,c,f,d,h,p=t[n]||(t[n]={active:0,count:0}),g=p[r];g||(l=i.time,c=Nt(o,0,l),g=p[r]={tween:new u,time:l,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++p.count)}function ea(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function na(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function ra(t){return t.toISOString()}function ia(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=la.bisect(Zl,i);return o==Zl.length?[e.year,Qi(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/Zl[o-1]<Zl[o]/i?o-1:o]:[Jl,Qi(t,n)[2]]}return r.invert=function(e){return oa(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(oa)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,oa(+n+1),e).length}var o=r.domain(),a=Vi(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),r.domain(Ui(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=oa(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=oa(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Vi(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],oa(+n[1]+1),e<1?1:e)},r.tickFormat=function(){return n},r.copy=function(){return ia(t.copy(),e,n)},Zi(r,t)}function oa(t){return new Date(t)}function aa(t){return JSON.parse(t.responseText)}function sa(t){var e=fa.createRange();return e.selectNode(fa.body),e.createContextualFragment(t.responseText)}var la={version:"3.5.17"},ua=[].slice,ca=function(t){return ua.call(t)},fa=this.document;if(fa)try{ca(fa.documentElement.childNodes)[0].nodeType}catch(t){ca=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),fa)try{fa.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var da=this.Element.prototype,ha=da.setAttribute,pa=da.setAttributeNS,ga=this.CSSStyleDeclaration.prototype,va=ga.setProperty;da.setAttribute=function(t,e){ha.call(this,t,e+"")},da.setAttributeNS=function(t,e,n){pa.call(this,t,e,n+"")},ga.setProperty=function(t,e,n){va.call(this,t,e+"",n)}}la.ascending=n,la.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},la.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},la.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},la.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},la.sum=function(t,e){var n,r=0,o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)i(n=+t[a])&&(r+=n);else for(;++a<o;)i(n=+e.call(t,t[a],a))&&(r+=n);return r},la.mean=function(t,e){var n,o=0,a=t.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)i(n=r(t[s]))?o+=n:--l;else for(;++s<a;)i(n=r(e.call(t,t[s],s)))?o+=n:--l;if(l)return o/l},la.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},la.median=function(t,e){var o,a=[],s=t.length,l=-1;if(1===arguments.length)for(;++l<s;)i(o=r(t[l]))&&a.push(o);else for(;++l<s;)i(o=r(e.call(t,t[l],l)))&&a.push(o);if(a.length)return la.quantile(a.sort(n),.5)},la.variance=function(t,e){var n,o,a=t.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)i(n=r(t[u]))&&(o=n-s,s+=o/++c,l+=o*(n-s));else for(;++u<a;)i(n=r(e.call(t,t[u],u)))&&(o=n-s,s+=o/++c,l+=o*(n-s));if(c>1)return l/(c-1)},la.deviation=function(){var t=la.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ma=o(n);la.bisectLeft=ma.left,la.bisect=la.bisectRight=ma.right,la.bisector=function(t){return o(1===t.length?function(e,r){return n(t(e),r)}:t)},la.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,o<2&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},la.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},la.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=[e=i,i=t[++n]];return o},la.transpose=function(t){if(!(i=t.length))return[];for(var e=-1,n=la.min(t,a),r=new Array(n);++e<n;)for(var i,o=-1,s=r[e]=new Array(i);++o<i;)s[o]=t[o][e];return r},la.zip=function(){return la.transpose(arguments)},la.keys=function(t){var e=[];for(var n in t)e.push(n);return e},la.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},la.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},la.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n};var ya=Math.abs;la.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=s(ya(n)),a=-1;if(t*=o,e*=o,n*=o,n<0)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},la.map=function(t,e){var n=new u;if(t instanceof u)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var xa="__proto__",ba="\0";l(u,{has:d,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:h,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:f(e),value:this._[e]});return t},size:g,empty:v,forEach:function(t){for(var e in this._)t.call(this,f(e),this._[e])}}),la.nest=function(){function t(e,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var l,c,f,d,h=-1,p=a.length,g=o[s++],v=new u;++h<p;)(d=v.get(l=g(c=a[h])))?d.push(c):v.set(l,[c]);return e?(c=e(),f=function(n,r){c.set(n,t(e,r,s))}):(c={},f=function(n,r){c[n]=t(e,r,s)}),v.forEach(f),c}function e(t,n){if(n>=o.length)return t;var r=[],i=a[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(la.map,n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},la.set=function(t){var e=new m;if(t)for(var n=0,r=t.length;n<r;++n)e.add(t[n]);return e},l(m,{has:d,add:function(t){return this._[c(t+="")]=!0,t},remove:h,values:p,size:g,empty:v,forEach:function(t){for(var e in this._)t.call(this,f(e))}}),la.behavior={},la.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=x(t,e,e[n]);return t};var wa=["webkit","ms","moz","Moz","o","O"];la.dispatch=function(){for(var t=new k,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=M(t);return t},k.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},la.event=null,la.requote=function(t){return t.replace(ka,"\\$&")};var ka=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Ma={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},Ca=function(t,e){return e.querySelector(t)},Sa=function(t,e){return e.querySelectorAll(t)},Aa=function(t,e){var n=t.matches||t[b(t,"matchesSelector")];return(Aa=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Ca=function(t,e){return Sizzle(t,e)[0]||null},Sa=Sizzle,Aa=Sizzle.matchesSelector),la.selection=function(){return la.select(fa.documentElement)};var _a=la.selection.prototype=[];_a.select=function(t){var e,n,r,i,o=[];t=L(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return _(o)},_a.selectAll=function(t){var e,n,r=[];t=T(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(e=ca(t.call(n,n.__data__,s,i))),e.parentNode=n);return _(r)};var La="http://www.w3.org/1999/xhtml",Ta={svg:"http://www.w3.org/2000/svg",xhtml:La,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};la.ns={prefix:Ta,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),Ta.hasOwnProperty(n)?{space:Ta[n],local:t}:t}},_a.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=la.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(E(e,t[e]));return this}return this.each(E(t,e))},_a.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=F(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!P(t[i]).test(e))return!1;return!0}for(e in t)this.each(O(e,t[e]));return this}return this.each(O(t,e))},_a.style=function(t,n,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(n="");for(r in t)this.each(D(r,t[r],n));return this}if(i<2){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(D(t,n,r))},_a.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(z(e,t[e]));return this}return this.each(z(t,e))},_a.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},_a.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},_a.append=function(t){return t=H(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},_a.insert=function(t,e){return t=H(t),e=L(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},_a.remove=function(){return this.each(I)},_a.data=function(t,e){function n(t,n){var r,i,o,a=t.length,f=n.length,d=Math.min(a,f),h=new Array(f),p=new Array(f),g=new Array(a);if(e){var v,m=new u,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(m.has(v=e.call(i,i.__data__,r))?g[r]=i:m.set(v,i),y[r]=v);for(r=-1;++r<f;)(i=m.get(v=e.call(n,o=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=o):p[r]=R(o),m.set(v,!0);for(r=-1;++r<a;)r in y&&m.get(y[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<d;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):p[r]=R(o);for(;r<f;++r)p[r]=R(n[r]);for(;r<a;++r)g[r]=t[r]}p.update=h,p.parentNode=h.parentNode=g.parentNode=t.parentNode,s.push(p),l.push(h),c.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=q([]),l=_([]),c=_([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return l.enter=function(){return s},l.exit=function(){return c},l},_a.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},_a.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=B(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return _(i)},_a.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},_a.sort=function(t){t=j.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},_a.each=function(t){return V(this,function(e,n,r){t.call(e,e.__data__,n,r)})},_a.call=function(t){var e=ca(arguments);return t.apply(e[0]=this,e),this},_a.empty=function(){return!this.node()},_a.node=function(){for(var t=0,e=this.length;t<e;t++)for(var n=this[t],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},_a.size=function(){var t=0;return V(this,function(){++t}),t};var Ea=[];la.selection.enter=q,la.selection.enter.prototype=Ea,Ea.append=_a.append,Ea.empty=_a.empty,Ea.node=_a.node,Ea.call=_a.call,Ea.size=_a.size,Ea.select=function(t){for(var e,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(e.push(r[u]=n=t.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return _(a)},Ea.insert=function(t,e){return arguments.length<2&&(e=X(this)),_a.insert.call(this,t,e)},la.select=function(e){var n;return"string"==typeof e?(n=[Ca(e,fa)],n.parentNode=fa.documentElement):(n=[e],n.parentNode=t(e)),_([n])},la.selectAll=function(t){var e;return"string"==typeof t?(e=ca(Sa(t,fa)),e.parentNode=fa.documentElement):(e=ca(t),e.parentNode=null),_([e])},_a.on=function(t,e,n){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(e=!1);for(n in t)this.each(U(n,t[n],e));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(U(t,e,n))};var Na=la.map({mouseenter:"mouseover",mouseleave:"mouseout"});fa&&Na.forEach(function(t){"on"+t in fa&&Na.remove(t)});var Pa,Fa=0;la.mouse=function(t){return Z(t,S())};var Oa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;la.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=S().changedTouches),e)for(var r,i=0,o=e.length;i<o;++i)if((r=e[i]).identifier===n)return Z(t,r)},la.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,e,n,o,a){return function(){function s(){var t,n,r=e(d,g);r&&(t=r[0]-x[0],n=r[1]-x[1],p|=t|n,x=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:t,dy:n}))}function l(){e(d,g)&&(m.on(o+v,null).on(a+v,null),y(p),h({type:"dragend"}))}var u,c=this,f=la.event.target.correspondingElement||la.event.target,d=c.parentNode,h=r.of(c,arguments),p=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=la.select(n(f)).on(o+v,s).on(a+v,l),y=$(f),x=e(d,g);i?(u=i.apply(c,arguments),u=[u.x-x[0],u.y-x[1]]):u=[0,0],h({type:"dragstart"})}}var r=A(t,"drag","dragstart","dragend"),i=null,o=n(w,la.mouse,e,"mousemove","mouseup"),a=n(K,la.touch,y,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},la.rebind(t,r,"on")},la.touches=function(t,e){return arguments.length<2&&(e=S().touches),e?ca(e).map(function(e){var n=Z(t,e);return n.identifier=e.identifier,n}):[]};var Wa=1e-6,Da=Wa*Wa,za=Math.PI,Ha=2*za,Ia=Ha-Wa,Ra=za/2,Ba=za/180,ja=180/za,Va=Math.SQRT2,qa=2,Xa=4;la.interpolateZoom=function(t,e){var n,r,i=t[0],o=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-i,f=l-o,d=c*c+f*f;if(d<Da)r=Math.log(u/a)/Va,n=function(t){return[i+t*c,o+t*f,a*Math.exp(Va*t*r)]};else{var h=Math.sqrt(d),p=(u*u-a*a+Xa*d)/(2*a*qa*h),g=(u*u-a*a-Xa*d)/(2*u*qa*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/Va,n=function(t){var e=t*r,n=rt(v),s=a/(qa*h)*(n*it(Va*e+v)-nt(v));return[i+s*c,o+s*f,a*n/rt(Va*e+v)]}}return n.duration=1e3*r,n},la.behavior.zoom=function(){function t(t){t.on(N,f).on(Ya+".zoom",h).on("dblclick.zoom",p).on(O,d)}function n(t){return[(t[0]-S.x)/S.k,(t[1]-S.y)/S.k]}function r(t){return[t[0]*S.k+S.x,t[1]*S.k+S.y]}function i(t){S.k=Math.max(L[0],Math.min(L[1],t))}function o(t,e){e=r(e),S.x+=t[0]-e[0],S.y+=t[1]-e[1]}function a(e,n,r,a){e.__chart__={x:S.x,y:S.y,k:S.k},i(Math.pow(2,a)),o(v=n,r),e=la.select(e),T>0&&(e=e.transition().duration(T)),e.call(t.event)}function s(){w&&w.domain(b.range().map(function(t){return(t-S.x)/S.k}).map(b.invert)),M&&M.domain(k.range().map(function(t){return(t-S.y)/S.k}).map(k.invert))}function l(t){E++||t({type:"zoomstart"})}function u(t){s(),t({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(t){--E||(t({type:"zoomend"}),v=null)}function f(){function t(){s=1,o(la.mouse(i),d),u(a)}function r(){f.on(P,null).on(F,null),h(s),c(a)}var i=this,a=W.of(i,arguments),s=0,f=la.select(e(i)).on(P,t).on(F,r),d=n(la.mouse(i)),h=$(i);Rl.call(i),l(a)}function d(){function t(){var t=la.touches(p);return h=S.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var e=la.event.target;la.select(e).on(b,r).on(w,s),k.push(e);for(var n=la.event.changedTouches,i=0,o=n.length;i<o;++i)v[n[i].identifier]=null;var l=t(),u=Date.now();if(1===l.length){if(u-x<500){var c=l[0];a(p,c,v[c.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),C()}x=u}else if(l.length>1){var c=l[0],f=l[1],d=c[0]-f[0],h=c[1]-f[1];m=d*d+h*h}}function r(){var t,e,n,r,a=la.touches(p);Rl.call(p);for(var s=0,l=a.length;s<l;++s,r=null)if(n=a[s],r=v[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],i(f*h)}x=null,o(t,e),u(g)}function s(){if(la.event.touches.length){for(var e=la.event.changedTouches,n=0,r=e.length;n<r;++n)delete v[e[n].identifier];for(var i in v)return void t()}la.selectAll(k).on(y,null),M.on(N,f).on(O,d),A(),c(g)}var h,p=this,g=W.of(p,arguments),v={},m=0,y=".zoom-"+la.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,k=[],M=la.select(p),A=$(p);e(),l(g),M.on(N,null).on(O,e)}function h(){var t=W.of(this,arguments);y?clearTimeout(y):(Rl.call(this),g=n(v=m||la.mouse(this)),l(t)),y=setTimeout(function(){y=null,c(t)},50),C(),i(Math.pow(2,.002*Ua())*S.k),o(v,g),u(t)}function p(){var t=la.mouse(this),e=Math.log(S.k)/Math.LN2;a(this,t,n(t),la.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,v,m,y,x,b,w,k,M,S={x:0,y:0,k:1},_=[960,500],L=Ga,T=250,E=0,N="mousedown.zoom",P="mousemove.zoom",F="mouseup.zoom",O="touchstart.zoom",W=A(t,"zoomstart","zoom","zoomend");
return Ya||(Ya="onwheel"in fa?(Ua=function(){return-la.event.deltaY*(la.event.deltaMode?120:1)},"wheel"):"onmousewheel"in fa?(Ua=function(){return la.event.wheelDelta},"mousewheel"):(Ua=function(){return-la.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=W.of(this,arguments),e=S;Hl?la.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var n=_[0],r=_[1],i=v?v[0]:n/2,o=v?v[1]:r/2,a=la.interpolateZoom([(i-S.x)/S.k,(o-S.y)/S.k,n/S.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=a(e),s=n/r[2];this.__chart__=S={x:i-r[0]*s,y:o-r[1]*s,k:s},u(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=S,l(t),u(t),c(t))})},t.translate=function(e){return arguments.length?(S={x:+e[0],y:+e[1],k:S.k},s(),t):[S.x,S.y]},t.scale=function(e){return arguments.length?(S={x:S.x,y:S.y,k:null},i(+e),s(),t):S.k},t.scaleExtent=function(e){return arguments.length?(L=null==e?Ga:[+e[0],+e[1]],t):L},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(_=e&&[+e[0],+e[1]],t):_},t.duration=function(e){return arguments.length?(T=+e,t):T},t.x=function(e){return arguments.length?(w=e,b=e.copy(),S={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(M=e,k=e.copy(),S={x:0,y:0,k:1},t):M},la.rebind(t,W,"on")};var Ua,Ya,Ga=[0,1/0];la.color=at,at.prototype.toString=function(){return this.rgb()+""},la.hsl=st;var $a=st.prototype=new at;$a.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},$a.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},$a.rgb=function(){return lt(this.h,this.s,this.l)},la.hcl=ut;var Za=ut.prototype=new at;Za.brighter=function(t){return new ut(this.h,this.c,Math.min(100,this.l+Ka*(arguments.length?t:1)))},Za.darker=function(t){return new ut(this.h,this.c,Math.max(0,this.l-Ka*(arguments.length?t:1)))},Za.rgb=function(){return ct(this.h,this.c,this.l).rgb()},la.lab=ft;var Ka=18,Qa=.95047,Ja=1,ts=1.08883,es=ft.prototype=new at;es.brighter=function(t){return new ft(Math.min(100,this.l+Ka*(arguments.length?t:1)),this.a,this.b)},es.darker=function(t){return new ft(Math.max(0,this.l-Ka*(arguments.length?t:1)),this.a,this.b)},es.rgb=function(){return dt(this.l,this.a,this.b)},la.rgb=mt;var ns=mt.prototype=new at;ns.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&e<i&&(e=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new mt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new mt(i,i,i)},ns.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},ns.hsl=function(){return kt(this.r,this.g,this.b)},ns.toString=function(){return"#"+bt(this.r)+bt(this.g)+bt(this.b)};var rs=la.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});rs.forEach(function(t,e){rs.set(t,yt(e))}),la.functor=At,la.xhr=_t(y),la.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Lt(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=u)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;c<u;){var r=t.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var r,i,o={},a={},s=[],u=t.length,c=0,f=0;(r=n())!==a;){for(var d=[];r!==o&&r!==a;)d.push(r),r=n();e&&null==(d=e(d,f++))||s.push(d)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new m,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},la.csv=la.dsv(",","text/csv"),la.tsv=la.dsv("\t","text/tab-separated-values");var is,os,as,ss,ls=this[b(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};la.timer=function(){Nt.apply(this,arguments)},la.timer.flush=function(){Ft(),Ot()},la.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var us=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Dt);la.formatPrefix=function(t,e){var n=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=la.round(t,Wt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),us[8+n/3]};var cs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,fs=la.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=la.round(t,Wt(t,e))).toFixed(Math.max(0,Math.min(20,Wt(t*(1+1e-15),e))))}}),ds=la.time={},hs=Date;It.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ps.setUTCDate.apply(this._,arguments)},setDay:function(){ps.setUTCDay.apply(this._,arguments)},setFullYear:function(){ps.setUTCFullYear.apply(this._,arguments)},setHours:function(){ps.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ps.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ps.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ps.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ps.setUTCSeconds.apply(this._,arguments)},setTime:function(){ps.setTime.apply(this._,arguments)}};var ps=Date.prototype;ds.year=Rt(function(t){return t=ds.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ds.years=ds.year.range,ds.years.utc=ds.year.utc.range,ds.day=Rt(function(t){var e=new hs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ds.days=ds.day.range,ds.days.utc=ds.day.utc.range,ds.dayOfYear=function(t){var e=ds.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ds[t]=Rt(function(t){return(t=ds.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ds.year(t).getDay();return Math.floor((ds.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ds[t+"s"]=n.range,ds[t+"s"].utc=n.utc.range,ds[t+"OfYear"]=function(t){var n=ds.year(t).getDay();return Math.floor((ds.dayOfYear(t)+(n+e)%7)/7)}}),ds.week=ds.sunday,ds.weeks=ds.sunday.range,ds.weeks.utc=ds.sunday.utc.range,ds.weekOfYear=ds.sundayOfYear;var gs={"-":"",_:" ",0:"0"},vs=/^\s*\d+/,ms=/^%/;la.locale=function(t){return{numberFormat:zt(t),timeFormat:jt(t)}};var ys=la.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});la.format=ys.numberFormat,la.geo={},ue.prototype={s:0,t:0,add:function(t){ce(t,this.t,xs),ce(xs.s,this.s,this),this.s?this.t+=xs.t:this.s=xs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var xs=new ue;la.geo.stream=function(t,e){t&&bs.hasOwnProperty(t.type)?bs[t.type](t,e):fe(t,e)};var bs={Feature:function(t,e){fe(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)fe(n[r].geometry,e)}},ws={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){de(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)de(n[r],e,0)},Polygon:function(t,e){he(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)he(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)fe(n[r],e)}};la.geo.area=function(t){return ks=0,la.geo.stream(t,Cs),ks};var ks,Ms=new ue,Cs={sphere:function(){ks+=4*za},point:w,lineStart:w,lineEnd:w,polygonStart:function(){Ms.reset(),Cs.lineStart=pe},polygonEnd:function(){var t=2*Ms;ks+=t<0?4*za+t:t,Cs.lineStart=Cs.lineEnd=Cs.point=w}};la.geo.bounds=function(){function t(t,e){x.push(b=[c=t,d=t]),e<f&&(f=e),e>h&&(h=e)}function e(e,n){var r=ge([e*Ba,n*Ba]);if(m){var i=me(m,r),o=[i[1],-i[0],0],a=me(o,i);be(a),a=we(a);var l=e-p,u=l>0?1:-1,g=a[0]*ja*u,v=ya(l)>180;if(v^(u*p<g&&g<u*e)){var y=a[1]*ja;y>h&&(h=y)}else if(g=(g+360)%360-180,v^(u*p<g&&g<u*e)){var y=-a[1]*ja;y<f&&(f=y)}else n<f&&(f=n),n>h&&(h=n);v?e<p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e):d>=c?(e<c&&(c=e),e>d&&(d=e)):e>p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e)}else t(e,n);m=r,p=e}function n(){w.point=e}function r(){b[0]=c,b[1]=d,w.point=t,m=null}function i(t,n){if(m){var r=t-p;y+=ya(r)>180?r+(r>0?360:-360):r}else g=t,v=n;Cs.point(t,n),e(t,n)}function o(){Cs.lineStart()}function a(){i(g,v),Cs.lineEnd(),ya(y)>Wa&&(c=-(d=180)),b[0]=c,b[1]=d,m=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,d,h,p,g,v,m,y,x,b,w={point:t,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,Cs.polygonStart()},polygonEnd:function(){Cs.polygonEnd(),w.point=t,w.lineStart=n,w.lineEnd=r,Ms<0?(c=-(d=180),f=-(h=90)):y>Wa?h=90:y<-Wa&&(f=-90),b[0]=c,b[1]=d}};return function(t){h=d=-(c=f=1/0),x=[],la.geo.stream(t,w);var e=x.length;if(e){x.sort(l);for(var n,r=1,i=x[0],o=[i];r<e;++r)n=x[r],u(n[0],i)||u(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,p=-(1/0),e=o.length-1,r=0,i=o[e];r<=e;i=n,++r)n=o[r],(a=s(i[1],n[0]))>p&&(p=a,c=n[0],d=i[1])}return x=b=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[d,h]]}}(),la.geo.centroid=function(t){Ss=As=_s=Ls=Ts=Es=Ns=Ps=Fs=Os=Ws=0,la.geo.stream(t,Ds);var e=Fs,n=Os,r=Ws,i=e*e+n*n+r*r;return i<Da&&(e=Es,n=Ns,r=Ps,As<Wa&&(e=_s,n=Ls,r=Ts),i=e*e+n*n+r*r,i<Da)?[NaN,NaN]:[Math.atan2(n,e)*ja,et(r/Math.sqrt(i))*ja]};var Ss,As,_s,Ls,Ts,Es,Ns,Ps,Fs,Os,Ws,Ds={sphere:w,point:Me,lineStart:Se,lineEnd:Ae,polygonStart:function(){Ds.lineStart=_e},polygonEnd:function(){Ds.lineStart=Se}},zs=Fe(Te,ze,Ie,[-za,-za/2]),Hs=1e9;la.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(s){return arguments.length?(o=Ve(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(la.geo.conicEqualArea=function(){return qe(Xe)}).raw=Xe,la.geo.albers=function(){return la.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},la.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}var e,n,r,i,o=la.geo.albers(),a=la.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=la.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=a.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Wa,f+.12*u+Wa],[c-.214*u-Wa,f+.234*u-Wa]]).stream(l).point,i=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Wa,f+.166*u+Wa],[c-.115*u-Wa,f+.234*u-Wa]]).stream(l).point,t},t.scale(1070)};var Is,Rs,Bs,js,Vs,qs,Xs={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Rs=0,Xs.lineStart=Ue},polygonEnd:function(){Xs.lineStart=Xs.lineEnd=Xs.point=w,Is+=ya(Rs/2)}},Us={point:Ye,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Ys={point:Ze,lineStart:Ke,lineEnd:Qe,polygonStart:function(){Ys.lineStart=Je},polygonEnd:function(){Ys.point=Ze,Ys.lineStart=Ke,Ys.lineEnd=Qe}};la.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),la.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,r,i,o,a,s=4.5;return t.area=function(t){return Is=0,la.geo.stream(t,i(Xs)),Is},t.centroid=function(t){return _s=Ls=Ts=Es=Ns=Ps=Fs=Os=Ws=0,la.geo.stream(t,i(Ys)),Ws?[Fs/Ws,Os/Ws]:Ps?[Es/Ps,Ns/Ps]:Ts?[_s/Ts,Ls/Ts]:[NaN,NaN]},t.bounds=function(t){return Vs=qs=-(Bs=js=1/0),la.geo.stream(t,i(Us)),[[Bs,js],[Vs,qs]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||nn(t):y,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Ge:new tn(t),"function"!=typeof s&&o.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(la.geo.albersUsa()).context(null)},la.geo.transform=function(t){return{stream:function(e){var n=new rn(e);for(var r in t)n[r]=t[r];return n}}},rn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},la.geo.projection=an,la.geo.projectionMutator=sn,(la.geo.equirectangular=function(){return an(un)}).raw=un.invert=un,la.geo.rotation=function(t){function e(e){return e=t(e[0]*Ba,e[1]*Ba),e[0]*=ja,e[1]*=ja,e}return t=fn(t[0]%360*Ba,t[1]*Ba,t.length>2?t[2]*Ba:0),e.invert=function(e){return e=t.invert(e[0]*Ba,e[1]*Ba),e[0]*=ja,e[1]*=ja,e},e},cn.invert=un,la.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=fn(-t[0]*Ba,-t[1]*Ba,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=ja,t[1]*=ja}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=gn((e=+r)*Ba,i*Ba),t):e},t.precision=function(r){return arguments.length?(n=gn(e*Ba,(i=+r)*Ba),t):i},t.angle(90)},la.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Ba,i=t[1]*Ba,o=e[1]*Ba,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},la.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return la.range(Math.ceil(o/v)*v,i,v).map(d).concat(la.range(Math.ceil(u/m)*m,l,m).map(h)).concat(la.range(Math.ceil(r/p)*p,n,p).filter(function(t){return ya(t%v)>Wa}).map(c)).concat(la.range(Math.ceil(s/g)*g,a,g).filter(function(t){return ya(t%m)>Wa}).map(f))}var n,r,i,o,a,s,l,u,c,f,d,h,p=10,g=p,v=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(o).concat(h(l).slice(1),d(i).reverse().slice(1),h(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],u=+e[0][1],l=+e[1][1],o>i&&(e=o,o=i,i=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[i,l]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=mn(s,a,90),f=yn(r,n,y),d=mn(u,l,90),h=yn(o,i,y),t):y},t.majorExtent([[-180,-90+Wa],[180,90-Wa]]).minorExtent([[-180,-80-Wa],[180,80+Wa]])},la.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=xn,i=bn;return t.distance=function(){return la.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},la.geo.interpolate=function(t,e){return wn(t[0]*Ba,t[1]*Ba,e[0]*Ba,e[1]*Ba)},la.geo.length=function(t){return Gs=0,la.geo.stream(t,$s),Gs};var Gs,$s={sphere:w,point:w,lineStart:kn,lineEnd:w,polygonStart:w,polygonEnd:w},Zs=Mn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(la.geo.azimuthalEqualArea=function(){return an(Zs)}).raw=Zs;var Ks=Mn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},y);(la.geo.azimuthalEquidistant=function(){return an(Ks)}).raw=Ks,(la.geo.conicConformal=function(){return qe(Cn)}).raw=Cn,(la.geo.conicEquidistant=function(){return qe(Sn)}).raw=Sn;var Qs=Mn(function(t){return 1/t},Math.atan);(la.geo.gnomonic=function(){return an(Qs)}).raw=Qs,An.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ra]},(la.geo.mercator=function(){return _n(An)}).raw=An;var Js=Mn(function(){return 1},Math.asin);(la.geo.orthographic=function(){return an(Js)}).raw=Js;var tl=Mn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(la.geo.stereographic=function(){return an(tl)}).raw=tl,Ln.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ra]},(la.geo.transverseMercator=function(){var t=_n(Ln),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=Ln,la.geom={},la.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=At(n),o=At(r),a=t.length,s=[],l=[];for(e=0;e<a;e++)s.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(Pn),e=0;e<a;e++)l.push([s[e][0],-s[e][1]]);var u=Nn(s),c=Nn(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],h=[];for(e=u.length-1;e>=0;--e)h.push(t[s[u[e]][2]]);for(e=+f;e<c.length-d;++e)h.push(t[s[c[e]][2]]);return h}var n=Tn,r=En;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},la.geom.polygon=function(t){return Ma(t,el),t};var el=la.geom.polygon.prototype=[];el.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},el.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},el.clip=function(t){for(var e,n,r,i,o,a,s=Wn(t),l=-1,u=this.length-Wn(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-s)-1],n=-1;++n<r;)a=e[n],Fn(a,c,i)?(Fn(o,c,i)||t.push(On(o,a,c,i)),t.push(a)):Fn(o,c,i)&&t.push(On(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var nl,rl,il,ol,al,sl=[],ll=[];Vn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Xn),e.length},er.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=ar(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(ir(this,n),t=n,n=t.U),n.C=!1,r.C=!0,or(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(or(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ir(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?ar(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,ir(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,or(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,ir(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,or(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,ir(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,or(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},la.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return sr(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Wa)*Wa,y:Math.round(a(t,e)/Wa)*Wa,i:e}})}var r=Tn,i=En,o=r,a=i,s=ul;return t?e(t):(e.links=function(t){return sr(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return sr(n(t)).cells.forEach(function(n,r){for(var i,o,a=n.site,s=n.edges.sort(Xn),l=-1,u=s.length,c=s[u-1].edge,f=c.l===a?c.r:c.l;++l<u;)i=c,o=f,c=s[l].edge,f=c.l===a?c.r:c.l,r<o.i&&r<f.i&&ur(a,o,f)<0&&e.push([t[r],t[o.i],t[f.i]])}),e},e.x=function(t){return arguments.length?(o=At(r=t),e):r},e.y=function(t){return arguments.length?(a=At(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?ul:t,e):s===ul?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===ul?null:s&&s[1]},e)};var ul=[[-1e6,-1e6],[1e6,1e6]];la.geom.delaunay=function(t){return la.geom.voronoi().triangles(t)},la.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(ya(l-n)+ya(c-r)<.01)u(t,e,n,r,i,o,a,s);else{var f=t.point;t.x=t.y=t.point=null,u(t,f,l,c,i,o,a,s),u(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else u(t,e,n,r,i,o,a,s)}function u(t,e,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),f=n>=u,d=r>=c,h=d<<1|f;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]=dr()),f?i=u:s=u,d?a=c:l=c,o(t,e,n,r,i,a,s,l)}var c,f,d,h,p,g,v,m,y,x=At(s),b=At(l);if(null!=e)g=e,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],d=[],p=t.length,a)for(h=0;h<p;++h)c=t[h],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),f.push(c.x),d.push(c.y);else for(h=0;h<p;++h){var w=+x(c=t[h],h),k=+b(c,h);w<g&&(g=w),k<v&&(v=k),w>m&&(m=w),k>y&&(y=k),f.push(w),d.push(k)}var M=m-g,C=y-v;M>C?y=v+M:m=g+C;var S=dr();if(S.add=function(t){o(S,t,+x(t,++h),+b(t,h),g,v,m,y)},S.visit=function(t){hr(t,S,g,v,m,y)},S.find=function(t){return pr(S,t[0],t[1],g,v,m,y)},h=-1,null==e){for(;++h<p;)o(S,t[h],f[h],d[h],g,v,m,y);--h}else t.forEach(S.add);return f=d=t=c=null,S}var a,s=Tn,l=En;return(a=arguments.length)?(s=cr,l=fr,3===a&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},la.interpolateRgb=gr,la.interpolateObject=vr,la.interpolateNumber=mr,la.interpolateString=yr;var cl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,fl=new RegExp(cl.source,"g");la.interpolate=xr,la.interpolators=[function(t,e){var n=typeof e;return("string"===n?rs.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?gr:yr:e instanceof at?gr:Array.isArray(e)?br:"object"===n&&isNaN(e)?vr:mr)(t,e)}],la.interpolateArray=br;var dl=function(){return y},hl=la.map({linear:dl,poly:_r,quad:function(){return Cr},cubic:function(){return Sr},sin:function(){return Lr},exp:function(){return Tr},circle:function(){return Er},elastic:Nr,back:Pr,bounce:function(){return Fr}}),pl=la.map({in:y,out:kr,"in-out":Mr,"out-in":function(t){return Mr(kr(t))}});la.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=hl.get(n)||dl,r=pl.get(r)||y,wr(r(n.apply(null,ua.call(arguments,1))))},la.interpolateHcl=Or,la.interpolateHsl=Wr,la.interpolateLab=Dr,la.interpolateRound=zr,la.transform=function(t){var e=fa.createElementNS(la.ns.prefix.svg,"g");return(la.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Hr(n?n.matrix:gl)})(t)},Hr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var gl={a:1,b:0,c:0,d:1,e:0,f:0};la.interpolateTransform=Yr,la.layout={},la.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Zr(t[n]));return e}},la.layout.chord=function(){function t(){var t,u,f,d,h,p={},g=[],v=la.range(o),m=[];for(n=[],r=[],t=0,d=-1;++d<o;){for(u=0,h=-1;++h<o;)u+=i[d][h];g.push(u),m.push(la.range(o)),t+=u}for(a&&v.sort(function(t,e){return a(g[t],g[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(Ha-c*o)/t,u=0,d=-1;++d<o;){for(f=u,h=-1;++h<o;){var y=v[d],x=m[y][h],b=i[y][x],w=u,k=u+=b*t;p[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:k,value:b}}r[y]={index:y,startAngle:f,endAngle:u,value:g[y]},u+=c}for(d=-1;++d<o;)for(h=d-1;++h<o;){var M=p[d+"-"+h],C=p[h+"-"+d];(M.value||C.value)&&n.push(M.value<C.value?{source:C,target:M}:{source:M,target:C})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,u):i},u.padding=function(t){return arguments.length?(c=t,n=r=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,n=r=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return r||t(),r},u},la.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,l=o*o+a*a;if(s*s/m<l){if(l<g){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}if(e.point&&l&&l<g){var u=e.pointCharge/l;t.px-=o*u,t.py-=a*u}}return!e.charge}}function e(t){t.px=la.event.x,t.py=la.event.y,l.resume()}var n,r,i,o,a,s,l={},u=la.dispatch("start","tick","end"),c=[1,1],f=.9,d=vl,h=ml,p=-30,g=yl,v=.1,m=.64,x=[],b=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var e,r,l,d,h,g,m,y,w,k=x.length,M=b.length;for(r=0;r<M;++r)l=b[r],d=l.source,h=l.target,y=h.x-d.x,w=h.y-d.y,(g=y*y+w*w)&&(g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,y*=g,w*=g,
h.x-=y*(m=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=w*m,d.x+=y*(m=1-m),d.y+=w*m);if((m=i*v)&&(y=c[0]/2,w=c[1]/2,r=-1,m))for(;++r<k;)l=x[r],l.x+=(y-l.x)*m,l.y+=(w-l.y)*m;if(p)for(ri(e=la.geom.quadtree(x),i,s),r=-1;++r<k;)(l=x[r]).fixed||e.visit(t(l));for(r=-1;++r<k;)l=x[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);u.tick({type:"tick",alpha:i})},l.nodes=function(t){return arguments.length?(x=t,l):x},l.links=function(t){return arguments.length?(b=t,l):b},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(g=t*t,l):Math.sqrt(g)},l.gravity=function(t){return arguments.length?(v=+t,l):v},l.theta=function(t){return arguments.length?(m=t*t,l):Math.sqrt(m)},l.alpha=function(t){return arguments.length?(t=+t,i?t>0?i=t:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:i=0})):t>0&&(u.start({type:"start",alpha:i=t}),n=Nt(l.tick)),l):i},l.start=function(){function t(t,r){if(!n){for(n=new Array(i),l=0;l<i;++l)n[l]=[];for(l=0;l<u;++l){var o=b[l];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[e],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][t]))return a;return Math.random()*r}var e,n,r,i=x.length,u=b.length,f=c[0],g=c[1];for(e=0;e<i;++e)(r=x[e]).index=e,r.weight=0;for(e=0;e<u;++e)r=b[e],"number"==typeof r.source&&(r.source=x[r.source]),"number"==typeof r.target&&(r.target=x[r.target]),++r.source.weight,++r.target.weight;for(e=0;e<i;++e)r=x[e],isNaN(r.x)&&(r.x=t("x",f)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof d)for(e=0;e<u;++e)o[e]=+d.call(this,b[e],e);else for(e=0;e<u;++e)o[e]=d;if(a=[],"function"==typeof h)for(e=0;e<u;++e)a[e]=+h.call(this,b[e],e);else for(e=0;e<u;++e)a[e]=h;if(s=[],"function"==typeof p)for(e=0;e<i;++e)s[e]=+p.call(this,x[e],e);else for(e=0;e<i;++e)s[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return r||(r=la.behavior.drag().origin(y).on("dragstart.force",Jr).on("drag.force",e).on("dragend.force",ti)),arguments.length?void this.on("mouseover.force",ei).on("mouseout.force",ni).call(r):r},la.rebind(l,u,"on")};var vl=20,ml=1,yl=1/0;la.layout.hierarchy=function(){function t(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(t,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=u}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return ai(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=ui,n=si,r=li;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(oi(e,function(t){t.children&&(t.value=0)}),ai(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},la.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=e.value?r/e.value:0;++u<a;)t(s=o[u],n,l=s.value*r,i),n+=l}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return t(a[0],0,i[0],i[1]/e(a[0])),a}var r=la.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},ii(n,r)},la.layout.pie=function(){function t(a){var s,l=a.length,u=a.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,d=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),h=d*(f<0?-1:1),p=la.sum(u),g=p?(f-l*h)/p:0,v=la.range(l),m=[];return null!=n&&v.sort(n===xl?function(t,e){return u[e]-u[t]}:function(t,e){return n(a[t],a[e])}),v.forEach(function(t){m[t]={data:a[t],value:s=u[t],startAngle:c,endAngle:c+=s*g+h,padAngle:d}}),m}var e=Number,n=xl,r=0,i=Ha,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var xl={};la.layout.stack=function(){function t(s,l){if(!(d=s.length))return s;var u=s.map(function(n,r){return e.call(t,n,r)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),f=n.call(t,c,l);u=la.permute(u,f),c=la.permute(c,f);var d,h,p,g,v=r.call(t,c,l),m=u[0].length;for(p=0;p<m;++p)for(i.call(t,u[0][p],g=v[p],c[0][p][1]),h=1;h<d;++h)i.call(t,u[h][p],g+=c[h-1][p][1],c[h][p][1]);return s}var e=y,n=pi,r=gi,i=hi,o=fi,a=di;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:bl.get(e)||pi,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:wl.get(e)||gi,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var bl=la.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(vi),o=t.map(mi),a=la.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,l=0,u=[],c=[];for(e=0;e<r;++e)n=a[e],s<l?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return la.range(t.length).reverse()},default:pi}),wl=la.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,s,l,u,c=t.length,f=t[0],d=f.length,h=[];for(h[0]=l=u=0,n=1;n<d;++n){for(e=0,i=0;e<c;++e)i+=t[e][n][1];for(e=0,o=0,s=f[n][0]-f[n-1][0];e<c;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);r<e;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}h[n]=l-=i?o/i*s:0,l<u&&(u=l)}for(n=0;n<d;++n)h[n]-=u;return h},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(e=0,r=0;e<i;e++)r+=t[e][n][1];if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:gi});la.layout.histogram=function(){function t(t,o){for(var a,s,l=[],u=t.map(n,this),c=r.call(this,u,o),f=i.call(this,c,u,o),o=-1,d=u.length,h=f.length-1,p=e?1:1/d;++o<h;)a=l[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(h>0)for(o=-1;++o<d;)s=u[o],s>=c[0]&&s<=c[1]&&(a=l[la.bisect(f,s,1,h)-1],a.y+=p,a.push(t[o]));return l}var e=!0,n=Number,r=wi,i=xi;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=At(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return bi(t,e)}:At(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},la.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=i[0],u=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ai(s,function(t){t.r=+c(t.value)}),ai(s,Ai),r){var f=r*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;ai(s,function(t){t.r+=f}),ai(s,Ai),ai(s,function(t){t.r-=f})}return Ti(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,n=la.layout.hierarchy().sort(ki),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},ii(t,n)},la.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),f=c[0],d=e(f);if(ai(d,n),d.parent.m=-d.z,oi(d,r),u)oi(f,o);else{var h=f,p=f,g=f;oi(f,function(t){t.x<h.x&&(h=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var v=s(h,p)/2-h.x,m=l[0]/(p.x+s(p,h)/2+v),y=l[1]/(g.depth||1);oi(f,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Wi(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+s(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+s(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,o=t,a=e,l=i.parent.children[0],u=i.m,c=o.m,f=a.m,d=l.m;a=Fi(a),i=Pi(i),a&&i;)l=Pi(l),o=Fi(o),o.a=t,r=a.z+f-i.z-u+s(a._,i._),r>0&&(Oi(Di(a,t,n),t,r),u+=r,c+=r),f+=a.m,u+=i.m,d+=l.m,c+=o.m;a&&!Fi(o)&&(o.t=a,o.m+=f-c),i&&!Pi(l)&&(l.t=i,l.m+=u-d,n=t)}return n}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=la.layout.hierarchy().sort(null).value(null),s=Ni,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?o:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:o,t):u?l:null},ii(t,a)},la.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],u=0;ai(l,function(t){var e=t.children;e&&e.length?(t.x=Hi(e),t.y=zi(e)):(t.x=a?u+=n(t,a):0,t.y=0,a=t)});var c=Ii(l),f=Ri(l),d=c.x-n(c,f)/2,h=f.x+n(f,c)/2;return ai(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-d)/(h-d)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),s}var e=la.layout.hierarchy().sort(null).value(null),n=Ni,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},ii(t,e)},la.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(e<0?0:e),n.area=isNaN(r)||r<=0?0:r}function e(n){var o=n.children;if(o&&o.length){var a,s,l,u=f(n),c=[],d=o.slice(),p=1/0,g="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==h||(s=r(c,g))<=p?(d.pop(),p=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,a=f(e),s=r.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(n<o&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*p/r,r/(e*o*p)):1/0}function i(t,e,n,r){var i,o=-1,a=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=t[o],i.x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=t[o],i.x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=u[0],o.dy=u[1]):o.dx=o.dy=0,a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),d&&(a=i),i}var a,s=la.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=Bi,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Bi(e):ji(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return ji(e,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Bi:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(d=t,a=null,o):d},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(h=t+"",o):h},ii(o,s)},la.random={normal:function(t,e){var n=arguments.length;return n<2&&(e=1),n<1&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var t=la.random.normal.apply(la,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=la.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;n<t;n++)e+=Math.random();return e}}},la.scale={};var kl={floor:y,ceil:y};la.scale.linear=function(){return $i([0,1],[0,1],xr,!1)};var Ml={s:1,g:1,p:1,r:1,e:1};la.scale.log=function(){return ro(la.scale.linear().domain([0,1]),10,!0,[1,10])};var Cl=la.format(".0e"),Sl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};la.scale.pow=function(){return io(la.scale.linear(),1,[0,1])},la.scale.sqrt=function(){return la.scale.pow().exponent(.5)},la.scale.ordinal=function(){return ao([],{t:"range",a:[[]]})},la.scale.category10=function(){return la.scale.ordinal().range(Al)},la.scale.category20=function(){return la.scale.ordinal().range(_l)},la.scale.category20b=function(){return la.scale.ordinal().range(Ll)},la.scale.category20c=function(){return la.scale.ordinal().range(Tl)};var Al=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xt),_l=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xt),Ll=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xt),Tl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xt);la.scale.quantile=function(){return so([],[])},la.scale.quantize=function(){return lo(0,1,[0,1])},la.scale.threshold=function(){return uo([.5],[0,1])},la.scale.identity=function(){return co([0,1])},la.svg={},la.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Ra,f=s.apply(this,arguments)-Ra,d=Math.abs(f-c),h=c>f?0:1;if(u<t&&(p=u,u=t,t=p),d>=Ia)return e(u,h)+(t?e(t,1-h):"")+"Z";var p,g,v,m,y,x,b,w,k,M,C,S,A=0,_=0,L=[];if((m=(+l.apply(this,arguments)||0)/2)&&(v=o===El?Math.sqrt(t*t+u*u):+o.apply(this,arguments),h||(_*=-1),u&&(_=et(v/u*Math.sin(m))),t&&(A=et(v/t*Math.sin(m)))),u){y=u*Math.cos(c+_),x=u*Math.sin(c+_),b=u*Math.cos(f-_),w=u*Math.sin(f-_);var T=Math.abs(f-c-2*_)<=za?0:1;if(_&&yo(y,x,b,w)===h^T){var E=(c+f)/2;y=u*Math.cos(E),x=u*Math.sin(E),b=w=null}}else y=x=0;if(t){k=t*Math.cos(f-A),M=t*Math.sin(f-A),C=t*Math.cos(c+A),S=t*Math.sin(c+A);var N=Math.abs(c-f+2*A)<=za?0:1;if(A&&yo(k,M,C,S)===1-h^N){var P=(c+f)/2;k=t*Math.cos(P),M=t*Math.sin(P),C=S=null}}else k=M=0;if(d>Wa&&(p=Math.min(Math.abs(u-t)/2,+i.apply(this,arguments)))>.001){g=t<u^h?0:1;var F=p,O=p;if(d<za){var W=null==C?[k,M]:null==b?[y,x]:On([y,x],[C,S],[b,w],[k,M]),D=y-W[0],z=x-W[1],H=b-W[0],I=w-W[1],R=1/Math.sin(Math.acos((D*H+z*I)/(Math.sqrt(D*D+z*z)*Math.sqrt(H*H+I*I)))/2),B=Math.sqrt(W[0]*W[0]+W[1]*W[1]);O=Math.min(p,(t-B)/(R-1)),F=Math.min(p,(u-B)/(R+1))}if(null!=b){var j=xo(null==C?[k,M]:[C,S],[y,x],u,F,h),V=xo([b,w],[k,M],u,F,h);p===F?L.push("M",j[0],"A",F,",",F," 0 0,",g," ",j[1],"A",u,",",u," 0 ",1-h^yo(j[1][0],j[1][1],V[1][0],V[1][1]),",",h," ",V[1],"A",F,",",F," 0 0,",g," ",V[0]):L.push("M",j[0],"A",F,",",F," 0 1,",g," ",V[0])}else L.push("M",y,",",x);if(null!=C){var q=xo([y,x],[C,S],t,-O,h),X=xo([k,M],null==b?[y,x]:[b,w],t,-O,h);p===O?L.push("L",X[0],"A",O,",",O," 0 0,",g," ",X[1],"A",t,",",t," 0 ",h^yo(X[1][0],X[1][1],q[1][0],q[1][1]),",",1-h," ",q[1],"A",O,",",O," 0 0,",g," ",q[0]):L.push("L",X[0],"A",O,",",O," 0 0,",g," ",q[0])}else L.push("L",k,",",M)}else L.push("M",y,",",x),null!=b&&L.push("A",u,",",u," 0 ",T,",",h," ",b,",",w),L.push("L",k,",",M),null!=C&&L.push("A",t,",",t," 0 ",N,",",1-h," ",C,",",S);return L.push("Z"),L.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=ho,r=po,i=fo,o=El,a=go,s=vo,l=mo;return t.innerRadius=function(e){return arguments.length?(n=At(e),t):n},t.outerRadius=function(e){return arguments.length?(r=At(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=At(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==El?El:At(e),t):o},t.startAngle=function(e){return arguments.length?(a=At(e),t):a},t.endAngle=function(e){return arguments.length?(s=At(e),t):s},t.padAngle=function(e){return arguments.length?(l=At(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ra;return[Math.cos(e)*t,Math.sin(e)*t]},t};var El="auto";la.svg.line=function(){return bo(y)};var Nl=la.map({linear:wo,"linear-closed":ko,step:Mo,"step-before":Co,"step-after":So,basis:No,"basis-open":Po,"basis-closed":Fo,bundle:Oo,cardinal:Lo,"cardinal-open":Ao,"cardinal-closed":_o,monotone:Ro});Nl.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Pl=[0,2/3,1/3,0],Fl=[0,1/3,2/3,0],Ol=[0,1/6,2/3,1/6];la.svg.line.radial=function(){var t=bo(Bo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Co.reverse=So,So.reverse=Co,la.svg.area=function(){return jo(y)},la.svg.area.radial=function(){var t=jo(Bo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},la.svg.chord=function(){function t(t,s){var l=e(this,o,t,s),u=e(this,a,t,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=s.call(t,i,r),a=l.call(t,i,r)-Ra,c=u.call(t,i,r)-Ra;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>za)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=xn,a=bn,s=Vo,l=go,u=vo;return t.radius=function(e){return arguments.length?(s=At(e),t):s},t.source=function(e){return arguments.length?(o=At(e),t):o},t.target=function(e){return arguments.length?(a=At(e),t):a},t.startAngle=function(e){return arguments.length?(l=At(e),t):l},t.endAngle=function(e){return arguments.length?(u=At(e),t):u},t},la.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=xn,n=bn,r=qo;return t.source=function(n){return arguments.length?(e=At(n),t):e},t.target=function(e){return arguments.length?(n=At(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},la.svg.diagonal.radial=function(){var t=la.svg.diagonal(),e=qo,n=t.projection;return t.projection=function(t){return arguments.length?n(Xo(e=t)):e},t},la.svg.symbol=function(){function t(t,r){return(Wl.get(e.call(this,t,r))||Go)(n.call(this,t,r))}var e=Yo,n=Uo;return t.type=function(n){return arguments.length?(e=At(n),t):e},t.size=function(e){return arguments.length?(n=At(e),t):n},t};var Wl=la.map({circle:Go,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*zl)),n=e*zl;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Dl),n=e*Dl/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Dl),n=e*Dl/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});la.svg.symbolTypes=Wl.keys();var Dl=Math.sqrt(3),zl=Math.tan(30*Ba);_a.transition=function(t){for(var e,n,r=Hl||++jl,i=Jo(t),o=[],a=Il||{time:Date.now(),ease:Ar,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&ta(n,c,i,r,a),e.push(n)}return Zo(o,i,r)},_a.interrupt=function(t){return this.each(null==t?Rl:$o(Jo(t)))};var Hl,Il,Rl=$o(Jo()),Bl=[],jl=0;Bl.call=_a.call,Bl.empty=_a.empty,Bl.node=_a.node,Bl.size=_a.size,la.transition=function(t,e){return t&&t.transition?Hl?t.transition(e):t:la.selection().transition(t)},la.transition.prototype=Bl,Bl.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=L(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),ta(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return Zo(a,o,i)},Bl.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,l=[];t=T(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,h=f.length;++d<h;)if(r=f[d]){o=r[s][a],n=t.call(r,r.__data__,d,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&ta(i,p,s,a,o),e.push(i)}return Zo(l,s,a)},Bl.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=B(t));for(var o=0,a=this.length;o<a;o++){i.push(e=[]);for(var n=this[o],s=0,l=n.length;s<l;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return Zo(i,this.namespace,this.id)},Bl.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):V(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Bl.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Yr:xr,s=la.ns.qualify(t);return Ko(this,"attr."+t,e,s.local?o:i)},Bl.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=la.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Bl.style=function(t,n,r){function i(){this.style.removeProperty(t)}function o(n){return null==n?i:(n+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(i=xr(o,n),function(e){this.style.setProperty(t,i(e),r)})})}var a=arguments.length;if(a<3){if("string"!=typeof t){a<2&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Ko(this,"style."+t,n,o)},Bl.styleTween=function(t,n,r){function i(i,o){var a=n.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Bl.text=function(t){return Ko(this,"text",t,Qo)},Bl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Bl.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=la.ease.apply(la,arguments)),V(this,function(r){r[n][e].ease=t}))},Bl.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:V(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Bl.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:V(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Bl.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Il,o=Hl;try{Hl=n,V(this,function(e,i,o){Il=e[r][n],t.call(e,e.__data__,i,o)})}finally{Il=i,Hl=o}}else V(this,function(i){var o=i[r][n];(o.event||(o.event=la.dispatch("start","end","interrupt"))).on(t,e)});return this},Bl.transition=function(){for(var t,e,n,r,i=this.id,o=++jl,a=this.namespace,s=[],l=0,u=this.length;l<u;l++){s.push(t=[]);for(var e=this[l],c=0,f=e.length;c<f;c++)(n=e[c])&&(r=n[a][i],ta(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return Zo(s,a,o)},la.svg.axis=function(){function t(t){t.each(function(){var t,u=la.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),d=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,h=null==e?f.tickFormat?f.tickFormat.apply(f,s):y:e,p=u.selectAll(".tick").data(d,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Wa),v=la.transition(p.exit()).style("opacity",Wa).remove(),m=la.transition(p.order()).style("opacity",1),x=Math.max(i,0)+a,b=qi(f),w=u.selectAll(".domain").data([0]),k=(w.enter().append("path").attr("class","domain"),la.transition(w));g.append("line"),g.append("text");var M,C,S,A,_=g.select("line"),L=m.select("line"),T=p.select("text").text(h),E=g.select("text"),N=m.select("text"),P="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=ea,M="x",S="y",C="x2",A="y2",T.attr("dy",P<0?"0em":".71em").style("text-anchor","middle"),k.attr("d","M"+b[0]+","+P*o+"V0H"+b[1]+"V"+P*o)):(t=na,M="y",S="x",C="y2",A="x2",T.attr("dy",".32em").style("text-anchor",P<0?"end":"start"),k.attr("d","M"+P*o+","+b[0]+"H0V"+b[1]+"H"+P*o)),_.attr(A,P*i),E.attr(S,P*x),L.attr(C,0).attr(A,P*i),N.attr(M,0).attr(S,P*x),f.rangeBand){var F=f,O=F.rangeBand()/2;c=f=function(t){return F(t)+O}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),m.call(t,f,f)})}var e,n=la.scale.linear(),r=Vl,i=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in ql?e+"":Vl,t):r},t.ticks=function(){return arguments.length?(s=ca(arguments),t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Vl="bottom",ql={top:1,right:1,bottom:1,left:1};la.svg.brush=function(){function t(e){e.each(function(){var e=la.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Xl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,f=la.transition(e),d=la.transition(a);u&&(l=qi(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=qi(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function o(){function o(){32==la.event.keyCode&&(T||(x=null,N[0]-=f[1],N[1]-=d[1],T=2),C())}function g(){32==la.event.keyCode&&2==T&&(N[0]+=f[1],N[1]+=d[1],T=0,C())}function v(){var t=la.mouse(w),e=!1;b&&(t[0]+=b[0],t[1]+=b[1]),T||(la.event.altKey?(x||(x=[(f[0]+f[1])/2,(d[0]+d[1])/2]),N[0]=f[+(t[0]<x[0])],N[1]=d[+(t[1]<x[1])]):x=null),_&&m(t,u,0)&&(r(S),e=!0),L&&m(t,c,1)&&(i(S),e=!0),e&&(n(S),M({type:"brush",mode:T?"move":"resize"}))}function m(t,e,n){var r,i,o=qi(e),l=o[0],u=o[1],c=N[n],g=n?d:f,v=g[1]-g[0];if(T&&(l-=c,u-=v+c),r=(n?p:h)?Math.max(l,Math.min(u,t[n])):t[n],T?i=(r+=c)+v:(x&&(c=Math.max(l,Math.min(u,2*x[n]-r))),c<r?(i=r,r=c):i=c),g[0]!=r||g[1]!=i)return n?s=null:a=null,g[0]=r,g[1]=i,!0}function y(){v(),S.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),la.select("body").style("cursor",null),P.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),M({type:"brushend"})}var x,b,w=this,k=la.select(la.event.target),M=l.of(w,arguments),S=la.select(w),A=k.datum(),_=!/^(n|s)$/.test(A)&&u,L=!/^(e|w)$/.test(A)&&c,T=k.classed("extent"),E=$(w),N=la.mouse(w),P=la.select(e(w)).on("keydown.brush",o).on("keyup.brush",g);if(la.event.changedTouches?P.on("touchmove.brush",v).on("touchend.brush",y):P.on("mousemove.brush",v).on("mouseup.brush",y),S.interrupt().selectAll("*").interrupt(),T)N[0]=f[0]-N[0],N[1]=d[0]-N[1];else if(A){var F=+/w$/.test(A),O=+/^n/.test(A);b=[f[1-F]-N[0],d[1-O]-N[1]],N[0]=f[F],N[1]=d[O]}else la.event.altKey&&(x=N.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),la.select("body").style("cursor",k.style("cursor")),M({type:"brushstart"}),v()}var a,s,l=A(t,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],d=[0,0],h=!0,p=!0,g=Ul[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:f,y:d,i:a,j:s},n=this.__chart__||e;this.__chart__=e,Hl?la.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,f=n.x,d=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=br(f,e.x),r=br(d,e.y);return a=s=null,function(i){f=e.x=n(i),d=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,g=Ul[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,g=Ul[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(h=!!e[0],p=!!e[1]):u?h=!!e:c&&(p=!!e),t):u&&c?[h,p]:u?h:c?p:null},t.extent=function(e){var n,r,i,o,l;return arguments.length?(u&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),r<n&&(l=n,n=r,r=l),n==f[0]&&r==f[1]||(f=[n,r])),c&&(i=e[0],o=e[1],u&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),o<i&&(l=i,i=o,o=l),i==d[0]&&o==d[1]||(d=[i,o])),t):(u&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],u.invert&&(n=u.invert(n),r=u.invert(r)),r<n&&(l=n,n=r,r=l))),c&&(s?(i=s[0],o=s[1]):(i=d[0],o=d[1],c.invert&&(i=c.invert(i),o=c.invert(o)),o<i&&(l=i,i=o,o=l))),u&&c?[[n,i],[r,o]]:u?[n,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],d=[0,0],a=s=null),t},t.empty=function(){return!!u&&f[0]==f[1]||!!c&&d[0]==d[1]},la.rebind(t,l,"on")};var Xl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Yl=ds.format=ys.timeFormat,Gl=Yl.utc,$l=Gl("%Y-%m-%dT%H:%M:%S.%LZ");Yl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?ra:$l,
ra.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},ra.toString=$l.toString,ds.second=Rt(function(t){return new hs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ds.seconds=ds.second.range,ds.seconds.utc=ds.second.utc.range,ds.minute=Rt(function(t){return new hs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ds.minutes=ds.minute.range,ds.minutes.utc=ds.minute.utc.range,ds.hour=Rt(function(t){var e=t.getTimezoneOffset()/60;return new hs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ds.hours=ds.hour.range,ds.hours.utc=ds.hour.utc.range,ds.month=Rt(function(t){return t=ds.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ds.months=ds.month.range,ds.months.utc=ds.month.utc.range;var Zl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Kl=[[ds.second,1],[ds.second,5],[ds.second,15],[ds.second,30],[ds.minute,1],[ds.minute,5],[ds.minute,15],[ds.minute,30],[ds.hour,1],[ds.hour,3],[ds.hour,6],[ds.hour,12],[ds.day,1],[ds.day,2],[ds.week,1],[ds.month,1],[ds.month,3],[ds.year,1]],Ql=Yl.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Te]]),Jl={range:function(t,e,n){return la.range(Math.ceil(t/n)*n,+e,n).map(oa)},floor:y,ceil:y};Kl.year=ds.year,ds.scale=function(){return ia(la.scale.linear(),Kl,Ql)};var tu=Kl.map(function(t){return[t[0].utc,t[1]]}),eu=Gl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Te]]);tu.year=ds.year.utc,ds.scale.utc=function(){return ia(la.scale.linear(),tu,eu)},la.text=_t(function(t){return t.responseText}),la.json=function(t,e){return Lt(t,"application/json",aa,e)},la.html=function(t,e){return Lt(t,"text/html",sa,e)},la.xml=_t(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=la,define(la)):"object"==typeof module&&module.exports?module.exports=la:this.d3=la}(),function(){var t={};t.dev=!1,t.tooltip=t.tooltip||{},t.utils=t.utils||{},t.models=t.models||{},t.charts={},t.logs={},t.dom={},"undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"==typeof d3&&(d3=require("d3")),t.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),t.dev&&(t.dispatch.on("render_start",function(e){t.logs.startTime=+new Date}),t.dispatch.on("render_end",function(e){t.logs.endTime=+new Date,t.logs.totalTime=t.logs.endTime-t.logs.startTime,t.log("total",t.logs.totalTime)})),t.log=function(){if(t.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(t.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind){var e=Function.prototype.bind.call(console.log,console);e.apply(console,arguments)}return arguments[arguments.length-1]},t.deprecated=function(t,e){console&&console.warn&&console.warn("nvd3 warning: `"+t+"` has been deprecated. ",e||"")},t.render=function(e){e=e||1,t.render.active=!0,t.dispatch.render_start();var n=function(){for(var r,i,o=0;o<e&&(i=t.render.queue[o]);o++)r=i.generate(),typeof i.callback==typeof Function&&i.callback(r);t.render.queue.splice(0,o),t.render.queue.length?setTimeout(n):(t.dispatch.render_end(),t.render.active=!1)};setTimeout(n)},t.render.active=!1,t.render.queue=[],t.addGraph=function(e){typeof arguments[0]==typeof Function&&(e={generate:arguments[0],callback:arguments[1]}),t.render.queue.push(e),t.render.active||t.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=t),"undefined"!=typeof window&&(window.nv=t),t.dom.write=function(t){return void 0!==window.fastdom?fastdom.mutate(t):t()},t.dom.read=function(t){return void 0!==window.fastdom?fastdom.measure(t):t()},t.interactiveGuideline=function(){"use strict";function e(f){f.each(function(f){function d(){var t=d3.mouse(this),r=t[0],i=t[1],s=!0,l=!1;if(c&&(r=d3.event.offsetX,i=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(s=!1),d3.event.target.className.baseVal.match("nv-legend")&&(l=!0)),s&&(r-=n.left,i-=n.top),"mouseout"===d3.event.type||r<0||i<0||r>p||i>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||l){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(u.nvPointerEventsClass)))return;return a.elementMouseout({mouseX:r,mouseY:i}),e.renderGuideLine(null),void u.hidden(!0)}u.hidden(!1);var f="function"==typeof o.rangeBands,d=void 0;if(f){var h=d3.bisect(o.range(),r)-1;if(!(o.range()[h]+o.rangeBand()>=r))return a.elementMouseout({mouseX:r,mouseY:i}),e.renderGuideLine(null),void u.hidden(!0);d=o.domain()[d3.bisect(o.range(),r)-1]}else d=o.invert(r);a.elementMousemove({mouseX:r,mouseY:i,pointXValue:d}),"dblclick"===d3.event.type&&a.elementDblclick({mouseX:r,mouseY:i,pointXValue:d}),"click"===d3.event.type&&a.elementClick({mouseX:r,mouseY:i,pointXValue:d}),"mousedown"===d3.event.type&&a.elementMouseDown({mouseX:r,mouseY:i,pointXValue:d}),"mouseup"===d3.event.type&&a.elementMouseUp({mouseX:r,mouseY:i,pointXValue:d})}var h=d3.select(this),p=r||960,g=i||400,v=h.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([f]),m=v.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");m.append("g").attr("class","nv-interactiveGuideLine"),l&&(l.on("touchmove",d).on("mousemove",d,!0).on("mouseout",d,!0).on("mousedown",d,!0).on("mouseup",d,!0).on("dblclick",d).on("click",d),e.guideLine=null,e.renderGuideLine=function(n){s&&(e.guideLine&&e.guideLine.attr("x1")===n||t.dom.write(function(){var e=v.select(".nv-interactiveGuideLine").selectAll("line").data(null!=n?[t.utils.NaNtoZero(n)]:[],String);e.enter().append("line").attr("class","nv-guideline").attr("x1",function(t){return t}).attr("x2",function(t){return t}).attr("y1",g).attr("y2",0),e.exit().remove()}))})})}var n={left:0,top:0},r=null,i=null,o=d3.scale.linear(),a=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),s=!0,l=null,u=t.models.tooltip(),c=window.ActiveXObject;return u.duration(0).hideDelay(0).hidden(!1),e.dispatch=a,e.tooltip=u,e.margin=function(t){return arguments.length?(n.top="undefined"!=typeof t.top?t.top:n.top,n.left="undefined"!=typeof t.left?t.left:n.left,e):n},e.width=function(t){return arguments.length?(r=t,e):r},e.height=function(t){return arguments.length?(i=t,e):i},e.xScale=function(t){return arguments.length?(o=t,e):o},e.showGuideLine=function(t){return arguments.length?(s=t,e):s},e.svgContainer=function(t){return arguments.length?(l=t,e):l},e},t.interactiveBisect=function(t,e,n){"use strict";if(!(t instanceof Array))return null;var r;r="function"!=typeof n?function(t){return t.x}:n;var i=function(t,e){return r(t)-e},o=d3.bisector(i).left,a=d3.max([0,o(t,e)-1]),s=r(t[a]);if("undefined"==typeof s&&(s=a),s===e)return a;var l=d3.min([a+1,t.length-1]),u=r(t[l]);return"undefined"==typeof u&&(u=l),Math.abs(u-e)>=Math.abs(s-e)?a:l},t.nearestValueIndex=function(t,e,n){"use strict";var r=1/0,i=null;return t.forEach(function(t,o){var a=Math.abs(e-t);null!=t&&a<=r&&a<n&&(r=a,i=o)}),i},t.models.tooltip=function(){"use strict";function e(){if(!f||!f.node()){var t=[1];f=d3.select(document.body).select("#"+r).data(t),f.enter().append("div").attr("class","nvtooltip "+(l?l:"xy-tooltip")).attr("id",r).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(v,!0).classed(v,!0),f.exit().remove()}}function n(){if(h&&k(i))return t.dom.write(function(){e();var t=b(i);t&&(f.node().innerHTML=t),C()}),n}var r="nvtooltip-"+Math.floor(1e5*Math.random()),i=null,o="w",a=25,s=0,l=null,u=!0,c=200,f=null,d={left:null,top:null},h=!0,p=100,g=!0,v="nv-pointer-events-none",m=function(t,e){return t},y=function(t){return t},x=function(t,e){return t},b=function(t){if(null===t)return"";var e=d3.select(document.createElement("table"));if(g){var n=e.selectAll("thead").data([t]).enter().append("thead");n.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(y(t.value))}var r=e.selectAll("tbody").data([t]).enter().append("tbody"),i=r.selectAll("tr").data(function(t){return t.series}).enter().append("tr").classed("highlight",function(t){return t.highlight});i.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(t){return t.color}),i.append("td").classed("key",!0).classed("total",function(t){return!!t.total}).html(function(t,e){return x(t.key,e)}),i.append("td").classed("value",!0).html(function(t,e){return m(t.value,e)}),i.filter(function(t,e){return void 0!==t.percent}).append("td").classed("percent",!0).html(function(t,e){return"("+d3.format("%")(t.percent)+")"}),i.selectAll("td").each(function(t){if(t.highlight){var e=d3.scale.linear().domain([0,1]).range(["#fff",t.color]),n=.6;d3.select(this).style("border-bottom-color",e(n)).style("border-top-color",e(n))}});var o=e.node().outerHTML;return void 0!==t.footer&&(o+="<div class='footer'>"+t.footer+"</div>"),o},w=function(){var t={left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0};if("none"!=getComputedStyle(document.body).transform){var e=document.body.getBoundingClientRect();t.left-=e.left,t.top-=e.top}return t},k=function(e){if(e&&e.series){if(t.utils.isArray(e.series))return!0;if(t.utils.isObject(e.series))return e.series=[e.series],!0}return!1},M=function(t){var e,n,r,i=f.node().offsetHeight,s=f.node().offsetWidth,l=document.documentElement.clientWidth,u=document.documentElement.clientHeight;switch(o){case"e":e=-s-a,n=-(i/2),t.left+e<0&&(e=a),(r=t.top+n)<0&&(n-=r),(r=t.top+n+i)>u&&(n-=r-u);break;case"w":e=a,n=-(i/2),t.left+e+s>l&&(e=-s-a),(r=t.top+n)<0&&(n-=r),(r=t.top+n+i)>u&&(n-=r-u);break;case"n":e=-(s/2)-5,n=a,t.top+n+i>u&&(n=-i-a),(r=t.left+e)<0&&(e-=r),(r=t.left+e+s)>l&&(e-=r-l);break;case"s":e=-(s/2),n=-i-a,t.top+n<0&&(n=a),(r=t.left+e)<0&&(e-=r),(r=t.left+e+s)>l&&(e-=r-l);break;case"center":e=-(s/2),n=-(i/2);break;default:e=0,n=0}return{left:e,top:n}},C=function(){t.dom.read(function(){var t=w(),e=M(t),n=t.left+e.left,r=t.top+e.top;if(u)f.interrupt().transition().delay(c).duration(0).style("opacity",0);else{var i="translate("+d.left+"px, "+d.top+"px)",o="translate("+Math.round(n)+"px, "+Math.round(r)+"px)",a=d3.interpolateString(i,o),s=f.style("opacity")<.1;f.interrupt().transition().duration(s?0:p).styleTween("transform",function(t){return a},"important").styleTween("-webkit-transform",function(t){return a}).style("-ms-transform",o).style("opacity",1)}d.left=n,d.top=r})};return n.nvPointerEventsClass=v,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{duration:{get:function(){return p},set:function(t){p=t}},gravity:{get:function(){return o},set:function(t){o=t}},distance:{get:function(){return a},set:function(t){a=t}},snapDistance:{get:function(){return s},set:function(t){s=t}},classes:{get:function(){return l},set:function(t){l=t}},enabled:{get:function(){return h},set:function(t){h=t}},hideDelay:{get:function(){return c},set:function(t){c=t}},contentGenerator:{get:function(){return b},set:function(t){b=t}},valueFormatter:{get:function(){return m},set:function(t){m=t}},headerFormatter:{get:function(){return y},set:function(t){y=t}},keyFormatter:{get:function(){return x},set:function(t){x=t}},headerEnabled:{get:function(){return g},set:function(t){g=t}},position:{get:function(){return w},set:function(t){w=t}},chartContainer:{get:function(){return document.body},set:function(e){t.deprecated("chartContainer","feature removed after 1.8.3")}},fixedTop:{get:function(){return null},set:function(e){t.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(e){t.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return u},set:function(t){u!=t&&(u=!!t,n())}},data:{get:function(){return i},set:function(t){t.point&&(t.value=t.point.x,t.series=t.series||{},t.series.value=t.point.y,t.series.color=t.point.color||t.series.color),i=t}},node:{get:function(){return f.node()},set:function(t){}},id:{get:function(){return r},set:function(t){}}}),t.utils.initOptions(n),n},t.utils.windowSize=function(){var t={width:640,height:480};return window.innerWidth&&window.innerHeight?(t.width=window.innerWidth,t.height=window.innerHeight,t):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(t.width=document.documentElement.offsetWidth,t.height=document.documentElement.offsetHeight,t):document.body&&document.body.offsetWidth?(t.width=document.body.offsetWidth,t.height=document.body.offsetHeight,t):t},t.utils.isArray=Array.isArray,t.utils.isObject=function(t){return null!==t&&"object"==typeof t},t.utils.isFunction=function(t){return"function"==typeof t},t.utils.isDate=function(t){return"[object Date]"===toString.call(t)},t.utils.isNumber=function(t){return!isNaN(t)&&"number"==typeof t},t.utils.windowResize=function(e){return window.addEventListener?window.addEventListener("resize",e):t.log("ERROR: Failed to bind to window.resize with: ",e),{callback:e,clear:function(){window.removeEventListener("resize",e)}}},t.utils.getColor=function(e){if(void 0===e)return t.utils.defaultColor();if(t.utils.isArray(e)){var n=d3.scale.ordinal().range(e);return function(t,e){var r=void 0===e?t:e;return t.color||n(r)}}return e},t.utils.defaultColor=function(){return t.utils.getColor(d3.scale.category20().range())},t.utils.customTheme=function(e,n,r){n=n||function(t){return t.key},r=r||d3.scale.category20().range();var i=r.length;return function(o,a){var s=n(o);return t.utils.isFunction(e[s])?e[s]():void 0!==e[s]?e[s]:(i||(i=r.length),i-=1,r[i])}},t.utils.pjax=function(e,n){var r=function(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),t.utils.pjax(e,n)})};d3.selectAll(e).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},t.utils.calcApproxTextWidth=function(e){if(t.utils.isFunction(e.style)&&t.utils.isFunction(e.text)){var n=parseInt(e.style("font-size").replace("px",""),10),r=e.text().length;return t.utils.NaNtoZero(r*n*.5)}return 0},t.utils.NaNtoZero=function(e){return!t.utils.isNumber(e)||isNaN(e)||null===e||e===1/0||e===-(1/0)?0:e},d3.selection.prototype.watchTransition=function(t){var e=[this].concat([].slice.call(arguments,1));return t.transition.apply(t,e)},t.utils.renderWatch=function(e,n){if(!(this instanceof t.utils.renderWatch))return new t.utils.renderWatch(e,n);var r=void 0!==n?n:250,i=[],o=this;this.models=function(t){return t=[].slice.call(arguments,0),t.forEach(function(t){t.__rendered=!1,function(t){t.dispatch.on("renderEnd",function(e){t.__rendered=!0,o.renderEnd("model")})}(t),i.indexOf(t)<0&&i.push(t)}),this},this.reset=function(t){void 0!==t&&(r=t),i=[]},this.transition=function(t,e,n){if(e=arguments.length>1?[].slice.call(arguments,1):[],n=e.length>1?e.pop():void 0!==r?r:250,t.__rendered=!1,i.indexOf(t)<0&&i.push(t),0===n)return t.__rendered=!0,t.delay=function(){return this},t.duration=function(){return this},t;0===t.length?t.__rendered=!0:t.every(function(t){return!t.length})?t.__rendered=!0:t.__rendered=!1;var a=0;return t.transition().duration(n).each(function(){++a}).each("end",function(n,r){0===--a&&(t.__rendered=!0,o.renderEnd.apply(this,e))})},this.renderEnd=function(){i.every(function(t){return t.__rendered})&&(i.forEach(function(t){t.__rendered=!1}),e.renderEnd.apply(this,arguments))}},t.utils.deepExtend=function(e){var n=arguments.length>1?[].slice.call(arguments,1):[];n.forEach(function(n){for(var r in n){var i=t.utils.isArray(e[r]),o=t.utils.isObject(e[r]),a=t.utils.isObject(n[r]);o&&!i&&a?t.utils.deepExtend(e[r],n[r]):e[r]=n[r]}})},t.utils.state=function(){if(!(this instanceof t.utils.state))return new t.utils.state;var e={},n=function(){},r=function(){return{}},i=null,o=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(t){n(t,!0)}),this.getter=function(t){return r=t,this},this.setter=function(t,e){return e||(e=function(){}),n=function(n,r){t(n),r&&e()},this},this.init=function(e){i=i||{},t.utils.deepExtend(i,e)};var a=function(){var t=r();if(JSON.stringify(t)===JSON.stringify(e))return!1;for(var n in t)void 0===e[n]&&(e[n]={}),e[n]=t[n],o=!0;return!0};this.update=function(){i&&(n(i,!1),i=null),a.call(this)&&this.dispatch.change(e)}},t.utils.optionsFunc=function(e){return e&&d3.map(e).forEach(function(e,n){t.utils.isFunction(this[e])&&this[e](n)}.bind(this)),this},t.utils.calcTicksX=function(e,n){var r=1,i=0;for(i;i<n.length;i+=1){var o=n[i]&&n[i].values?n[i].values.length:0;r=o>r?o:r}return t.log("Requested number of ticks: ",e),t.log("Calculated max values to be: ",r),e=e>r?e=r-1:e,e=e<1?1:e,e=Math.floor(e),t.log("Calculating tick count as: ",e),e},t.utils.calcTicksY=function(e,n){return t.utils.calcTicksX(e,n)},t.utils.initOption=function(t,e){t._calls&&t._calls[e]?t[e]=t._calls[e]:(t[e]=function(n){return arguments.length?(t._overrides[e]=!0,t._options[e]=n,t):t._options[e]},t["_"+e]=function(n){return arguments.length?(t._overrides[e]||(t._options[e]=n),t):t._options[e]})},t.utils.initOptions=function(e){e._overrides=e._overrides||{};var n=Object.getOwnPropertyNames(e._options||{}),r=Object.getOwnPropertyNames(e._calls||{});n=n.concat(r);for(var i in n)t.utils.initOption(e,n[i])},t.utils.inheritOptionsD3=function(t,e,n){t._d3options=n.concat(t._d3options||[]),n.unshift(e),n.unshift(t),d3.rebind.apply(this,n)},t.utils.arrayUnique=function(t){return t.sort().filter(function(e,n){return!n||e!=t[n-1]})},t.utils.symbolMap=d3.map(),t.utils.symbol=function(){function e(e,i){var o=n.call(this,e,i),a=r.call(this,e,i);return d3.svg.symbolTypes.indexOf(o)!==-1?d3.svg.symbol().type(o).size(a)():t.utils.symbolMap.get(o)(a)}var n,r=64;return e.type=function(t){return arguments.length?(n=d3.functor(t),e):n},e.size=function(t){return arguments.length?(r=d3.functor(t),e):r},e},t.utils.inheritOptions=function(e,n){var r=Object.getOwnPropertyNames(n._options||{}),i=Object.getOwnPropertyNames(n._calls||{}),o=n._inherited||[],a=n._d3options||[],s=r.concat(i).concat(o).concat(a);s.unshift(n),s.unshift(e),d3.rebind.apply(this,s),e._inherited=t.utils.arrayUnique(r.concat(i).concat(o).concat(r).concat(e._inherited||[])),e._d3options=t.utils.arrayUnique(a.concat(e._d3options||[]))},t.utils.initSVG=function(t){t.classed({"nvd3-svg":!0})},t.utils.sanitizeHeight=function(t,e){return t||parseInt(e.style("height"),10)||400},t.utils.sanitizeWidth=function(t,e){return t||parseInt(e.style("width"),10)||960},t.utils.availableHeight=function(e,n,r){return Math.max(0,t.utils.sanitizeHeight(e,n)-r.top-r.bottom)},t.utils.availableWidth=function(e,n,r){return Math.max(0,t.utils.sanitizeWidth(e,n)-r.left-r.right)},t.utils.noData=function(e,n){var r=e.options(),i=r.margin(),o=r.noData(),a=null==o?["No Data Available."]:[o],s=t.utils.availableHeight(null,n,i),l=t.utils.availableWidth(null,n,i),u=i.left+l/2,c=i.top+s/2;n.selectAll("g").remove();var f=n.selectAll(".nv-noData").data(a);f.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),f.attr("x",u).attr("y",c).text(function(t){return t})},t.utils.wrapTicks=function(t,e){t.each(function(){for(var t,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],o=0,a=1.1,s=n.attr("y"),l=parseFloat(n.attr("dy")),u=n.text(null).append("tspan").attr("x",0).attr("y",s).attr("dy",l+"em");t=r.pop();)i.push(t),u.text(i.join(" ")),u.node().getComputedTextLength()>e&&(i.pop(),u.text(i.join(" ")),i=[t],u=n.append("tspan").attr("x",0).attr("y",s).attr("dy",++o*a+l+"em").text(t))})},t.utils.arrayEquals=function(e,n){if(e===n)return!0;if(!e||!n)return!1;if(e.length!=n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]instanceof Array&&n[r]instanceof Array){if(!t.arrayEquals(e[r],n[r]))return!1}else if(e[r]!=n[r])return!1;return!0},t.models.axis=function(){"use strict";function e(a){return x.reset(),a.each(function(e){var a=d3.select(this);t.utils.initSVG(a);var v=a.selectAll("g.nv-wrap.nv-axis").data([e]),m=v.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),b=(m.append("g"),v.select("g"));null!==h?n.ticks(h):"top"!=n.orient()&&"bottom"!=n.orient()||n.ticks(Math.abs(r.range()[1]-r.range()[0])/100),b.watchTransition(x,"axis").call(n),y=y||n.scale();var w=n.tickFormat();null==w&&(w=y.tickFormat());var k=b.selectAll("text.nv-axislabel").data([s||null]);k.exit().remove(),void 0!==g&&b.selectAll("g").select("text").style("font-size",g);var M,C,S;switch(n.orient()){case"top":k.enter().append("text").attr("class","nv-axislabel"),S=0,1===r.range().length?S=d?2*r.range()[0]+r.rangeBand():0:2===r.range().length?S=d?r.range()[0]+r.range()[1]+r.rangeBand():r.range()[1]:r.range().length>2&&(S=r.range()[r.range().length-1]+(r.range()[1]-r.range()[0])),k.attr("text-anchor","middle").attr("y",0).attr("x",S/2),l&&(C=v.selectAll("g.nv-axisMaxMin").data(r.domain()),C.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),C.exit().remove(),C.attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text(function(t,e){var n=w(t);return(""+n).match("NaN")?"":n}),C.watchTransition(x,"min-max top").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r.range()[n])+",0)"}));break;case"bottom":M=p+36;var A=30,_=0,L=b.selectAll("g").select("text"),T="";if(u%360){L.attr("transform",""),L.each(function(t,e){var n=this.getBoundingClientRect(),r=n.width;_=n.height,r>A&&(A=r)}),T="rotate("+u+" 0,"+(_/2+n.tickPadding())+")";var E=Math.abs(Math.sin(u*Math.PI/180));M=(E?E*A:A)+30,L.attr("transform",T).style("text-anchor",u%360>0?"start":"end")}else f?L.attr("transform",function(t,e){return"translate(0,"+(e%2==0?"0":"12")+")"}):L.attr("transform","translate(0,0)");k.enter().append("text").attr("class","nv-axislabel"),S=0,1===r.range().length?S=d?2*r.range()[0]+r.rangeBand():0:2===r.range().length?S=d?r.range()[0]+r.range()[1]+r.rangeBand():r.range()[1]:r.range().length>2&&(S=r.range()[r.range().length-1]+(r.range()[1]-r.range()[0])),k.attr("text-anchor","middle").attr("y",M).attr("x",S/2),l&&(C=v.selectAll("g.nv-axisMaxMin").data([r.domain()[0],r.domain()[r.domain().length-1]]),C.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-x",0==e?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),C.exit().remove(),C.attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e)+(d?r.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",T).style("text-anchor",u?u%360>0?"start":"end":"middle").text(function(t,e){var n=w(t);return(""+n).match("NaN")?"":n}),C.watchTransition(x,"min-max bottom").attr("transform",function(e,n){return"translate("+t.utils.NaNtoZero(r(e)+(d?r.rangeBand()/2:0))+",0)"}));break;case"right":k.enter().append("text").attr("class","nv-axislabel"),k.style("text-anchor",c?"middle":"begin").attr("transform",c?"rotate(90)":"").attr("y",c?-Math.max(i.right,o)+12-(p||0):-10).attr("x",c?d3.max(r.range())/2:n.tickPadding()),l&&(C=v.selectAll("g.nv-axisMaxMin").data(r.domain()),C.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),C.exit().remove(),C.attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text(function(t,e){var n=w(t);return(""+n).match("NaN")?"":n}),C.watchTransition(x,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r.range()[n])+")"}).select("text").style("opacity",1));break;case"left":k.enter().append("text").attr("class","nv-axislabel"),k.style("text-anchor",c?"middle":"end").attr("transform",c?"rotate(-90)":"").attr("y",c?-Math.max(i.left,o)+25-(p||0):-10).attr("x",c?-d3.max(r.range())/2:-n.tickPadding()),l&&(C=v.selectAll("g.nv-axisMaxMin").data(r.domain()),C.enter().append("g").attr("class",function(t,e){return["nv-axisMaxMin","nv-axisMaxMin-y",0==e?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),C.exit().remove(),C.attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(y(e))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text(function(t,e){var n=w(t);return(""+n).match("NaN")?"":n}),C.watchTransition(x,"min-max right").attr("transform",function(e,n){return"translate(0,"+t.utils.NaNtoZero(r.range()[n])+")"}).select("text").style("opacity",1))}if(k.text(function(t){return t}),!l||"left"!==n.orient()&&"right"!==n.orient()||(b.selectAll("g").each(function(t,e){d3.select(this).select("text").attr("opacity",1),(r(t)<r.range()[1]+10||r(t)>r.range()[0]-10)&&((t>1e-10||t<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),r.domain()[0]==r.domain()[1]&&0==r.domain()[0]&&v.selectAll("g.nv-axisMaxMin").style("opacity",function(t,e){return e?0:1})),l&&("top"===n.orient()||"bottom"===n.orient())){var N=[];v.selectAll("g.nv-axisMaxMin").each(function(t,e){try{e?N.push(r(t)-this.getBoundingClientRect().width-4):N.push(r(t)+this.getBoundingClientRect().width+4)}catch(n){e?N.push(r(t)-4):N.push(r(t)+4)}}),b.selectAll("g").each(function(t,e){(r(t)<N[0]||r(t)>N[1])&&(t>1e-10||t<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}b.selectAll(".tick").filter(function(t){return!parseFloat(Math.round(1e5*t)/1e6)&&void 0!==t}).classed("zero",!0),y=r.copy()}),x.renderEnd("axis immediate"),e}var n=d3.svg.axis(),r=d3.scale.linear(),i={top:0,right:0,bottom:0,left:0},o=75,a=60,s=null,l=!0,u=0,c=!0,f=!1,d=!1,h=null,p=0,g=void 0,v=250,m=d3.dispatch("renderEnd");n.scale(r).orient("bottom").tickFormat(function(t){return t});var y,x=t.utils.renderWatch(m,v);return e.axis=n,e.dispatch=m,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{axisLabelDistance:{get:function(){return p},set:function(t){p=t}},staggerLabels:{get:function(){return f},set:function(t){f=t}},rotateLabels:{get:function(){return u},set:function(t){u=t}},rotateYLabel:{get:function(){return c},set:function(t){c=t}},showMaxMin:{get:function(){return l},set:function(t){l=t}},axisLabel:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return a},set:function(t){a=t}},ticks:{get:function(){return h},set:function(t){h=t}},width:{get:function(){return o},set:function(t){o=t}},fontSize:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},duration:{get:function(){return v},set:function(t){v=t,x.reset(v)}},scale:{get:function(){return r},set:function(i){r=i,n.scale(r),d="function"==typeof r.rangeBands,t.utils.inheritOptionsD3(e,r,["domain","range","rangeBand","rangeBands"])}}}),t.utils.initOptions(e),t.utils.inheritOptionsD3(e,n,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),t.utils.inheritOptionsD3(e,r,["domain","range","rangeBand","rangeBands"]),e},t.models.boxPlot=function(){"use strict";function e(f){return E.reset(),f.each(function(e){var f=u-l.left-l.right,N=c-l.top-l.bottom;A=d3.select(this),t.utils.initSVG(A),d.domain(n||e.map(function(t,e){return p(t,e)})).rangeBands(r||[0,f],.1);var P=[];if(!i){var F,O,W=[];e.forEach(function(t,e){var n=g(t),r=m(t),i=y(t),o=x(t),a=w(t);a&&a.forEach(function(t,e){W.push(k(t,e,void 0))}),i&&W.push(i),n&&W.push(n),r&&W.push(r),o&&W.push(o)}),F=d3.min(W),O=d3.max(W),P=[F,O]}h.domain(i||P),h.range(o||[N,0]),a=a||d,s=s||h.copy().range([h(0),h(0)]);var D=A.selectAll("g.nv-wrap").data([e]);D.enter().append("g").attr("class","nvd3 nv-wrap");D.attr("transform","translate("+l.left+","+l.top+")");var z=D.selectAll(".nv-boxplot").data(function(t){return t}),H=z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);z.attr("class","nv-boxplot").attr("transform",function(t,e,n){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", 0)"}).classed("hover",function(t){return t.hover}),z.watchTransition(E,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(t,n){return n*L/e.length}).attr("transform",function(t,e){return"translate("+(d(p(t,e))+.05*d.rangeBand())+", 0)"}),z.exit().remove(),H.each(function(t,e){var n=d3.select(this);[y,x].forEach(function(r){if(void 0!==r(t)&&null!==r(t)){var i=r===y?"low":"high";n.append("line").style("stroke",b(t)||S(t,e)).attr("class","nv-boxplot-whisker nv-boxplot-"+i),n.append("line").style("stroke",b(t)||S(t,e)).attr("class","nv-boxplot-tick nv-boxplot-"+i)}})});var I=function(){return null===T?.9*d.rangeBand():Math.min(75,.9*d.rangeBand())},R=function(){return.45*d.rangeBand()-I()/2},B=function(){return.45*d.rangeBand()+I()/2};[y,x].forEach(function(t){var e=t===y?"low":"high",n=t===y?g:m;z.select("line.nv-boxplot-whisker.nv-boxplot-"+e).watchTransition(E,"nv-boxplot: boxplots").attr("x1",.45*d.rangeBand()).attr("y1",function(e,n){return h(t(e))}).attr("x2",.45*d.rangeBand()).attr("y2",function(t,e){return h(n(t))}),z.select("line.nv-boxplot-tick.nv-boxplot-"+e).watchTransition(E,"nv-boxplot: boxplots").attr("x1",R).attr("y1",function(e,n){return h(t(e))}).attr("x2",B).attr("y2",function(e,n){return h(t(e))})}),[y,x].forEach(function(t){var e=t===y?"low":"high";H.selectAll(".nv-boxplot-"+e).on("mouseover",function(e,n,r){d3.select(this).classed("hover",!0),_.elementMouseover({series:{key:t(e),color:b(e)||S(e,r)},e:d3.event})}).on("mouseout",function(e,n,r){d3.select(this).classed("hover",!1),_.elementMouseout({series:{key:t(e),color:b(e)||S(e,r)},e:d3.event})}).on("mousemove",function(t,e){_.elementMousemove({e:d3.event})})}),H.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(t,e){d3.select(this).classed("hover",!0),_.elementMouseover({key:p(t),value:p(t),series:[{key:"Q3",value:m(t),color:b(t)||S(t,e)},{key:"Q2",value:v(t),color:b(t)||S(t,e)},{key:"Q1",value:g(t),color:b(t)||S(t,e)}],data:t,index:e,e:d3.event})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),_.elementMouseout({key:p(t),value:p(t),series:[{key:"Q3",value:m(t),color:b(t)||S(t,e)},{key:"Q2",value:v(t),color:b(t)||S(t,e)},{key:"Q1",value:g(t),color:b(t)||S(t,e)}],data:t,index:e,e:d3.event})}).on("mousemove",function(t,e){_.elementMousemove({e:d3.event})}),z.select("rect.nv-boxplot-box").watchTransition(E,"nv-boxplot: boxes").attr("y",function(t,e){
return h(m(t))}).attr("width",I).attr("x",R).attr("height",function(t,e){return Math.abs(h(m(t))-h(g(t)))||1}).style("fill",function(t,e){return b(t)||S(t,e)}).style("stroke",function(t,e){return b(t)||S(t,e)}),H.append("line").attr("class","nv-boxplot-median"),z.select("line.nv-boxplot-median").watchTransition(E,"nv-boxplot: boxplots line").attr("x1",R).attr("y1",function(t,e){return h(v(t))}).attr("x2",B).attr("y2",function(t,e){return h(v(t))});var j=z.selectAll(".nv-boxplot-outlier").data(function(t){return w(t)||[]});j.enter().append("circle").style("fill",function(t,e,n){return C(t,e,n)||S(t,n)}).style("stroke",function(t,e,n){return C(t,e,n)||S(t,n)}).style("z-index",9e3).on("mouseover",function(t,e,n){d3.select(this).classed("hover",!0),_.elementMouseover({series:{key:M(t,e,n),color:C(t,e,n)||S(t,n)},e:d3.event})}).on("mouseout",function(t,e,n){d3.select(this).classed("hover",!1),_.elementMouseout({series:{key:M(t,e,n),color:C(t,e,n)||S(t,n)},e:d3.event})}).on("mousemove",function(t,e){_.elementMousemove({e:d3.event})}),j.attr("class","nv-boxplot-outlier"),j.watchTransition(E,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*d.rangeBand()).attr("cy",function(t,e,n){return h(k(t,e,n))}).attr("r","3"),j.exit().remove(),a=d.copy(),s=h.copy()}),E.renderEnd("nv-boxplot immediate"),e}var n,r,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,f=Math.floor(1e4*Math.random()),d=d3.scale.ordinal(),h=d3.scale.linear(),p=function(t){return t.label},g=function(t){return t.values.Q1},v=function(t){return t.values.Q2},m=function(t){return t.values.Q3},y=function(t){return t.values.whisker_low},x=function(t){return t.values.whisker_high},b=function(t){return t.color},w=function(t){return t.values.outliers},k=function(t,e,n){return t},M=function(t,e,n){return t},C=function(t,e,n){},S=t.utils.defaultColor(),A=null,_=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),L=250,T=null,E=t.utils.renderWatch(_,L);return e.dispatch=_,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return u},set:function(t){u=t}},height:{get:function(){return c},set:function(t){c=t}},maxBoxWidth:{get:function(){return T},set:function(t){T=t}},x:{get:function(){return p},set:function(t){p=t}},q1:{get:function(){return g},set:function(t){g=t}},q2:{get:function(){return v},set:function(t){v=t}},q3:{get:function(){return m},set:function(t){m=t}},wl:{get:function(){return y},set:function(t){y=t}},wh:{get:function(){return x},set:function(t){x=t}},itemColor:{get:function(){return b},set:function(t){b=t}},outliers:{get:function(){return w},set:function(t){w=t}},outlierValue:{get:function(){return k},set:function(t){k=t}},outlierLabel:{get:function(){return M},set:function(t){M=t}},outlierColor:{get:function(){return C},set:function(t){C=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return r},set:function(t){r=t}},yRange:{get:function(){return o},set:function(t){o=t}},id:{get:function(){return f},set:function(t){f=t}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(t){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},color:{get:function(){return S},set:function(e){S=t.utils.getColor(e)}},duration:{get:function(){return L},set:function(t){L=t,E.reset(L)}}}),t.utils.initOptions(e),e},t.models.boxPlotChart=function(){"use strict";function e(c){return x.reset(),x.models(i),f&&x.models(o),d&&x.models(a),c.each(function(c){var g=d3.select(this);t.utils.initSVG(g);var x=(l||parseInt(g.style("width"))||960)-s.left-s.right,b=(u||parseInt(g.style("height"))||400)-s.top-s.bottom;if(e.update=function(){m.beforeUpdate(),g.transition().duration(y).call(e)},e.container=this,!c||!c.length){var w=g.selectAll(".nv-noData").data([v]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",s.left+x/2).attr("y",s.top+b/2).text(function(t){return t}),e}g.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var k=g.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([c]),M=k.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),C=M.append("defs"),S=k.select("g");M.append("g").attr("class","nv-x nv-axis"),M.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),M.append("g").attr("class","nv-barsWrap"),S.attr("transform","translate("+s.left+","+s.top+")"),h&&S.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)"),i.width(x).height(b);var A=S.select(".nv-barsWrap").datum(c.filter(function(t){return!t.disabled}));if(A.transition().call(i),C.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),S.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",n.rangeBand()*(p?2:1)).attr("height",16).attr("x",-n.rangeBand()/(p?1:2)),f){o.scale(n).ticks(t.utils.calcTicksX(x/100,c)).tickSize(-b,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),S.select(".nv-x.nv-axis").call(o);var _=S.select(".nv-x.nv-axis").selectAll("g");p&&_.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2===0?"5":"17")+")"})}d&&(a.scale(r).ticks(Math.floor(b/36)).tickSize(-x,0),S.select(".nv-y.nv-axis").call(a)),S.select(".nv-zeroLine line").attr("x1",0).attr("x2",x).attr("y1",r(0)).attr("y2",r(0))}),x.renderEnd("nv-boxplot chart immediate"),e}var n,r,i=t.models.boxPlot(),o=t.models.axis(),a=t.models.axis(),s={top:15,right:10,bottom:50,left:60},l=null,u=null,c=t.utils.getColor(),f=!0,d=!0,h=!1,p=!1,g=t.models.tooltip(),v="No Data Available.",m=d3.dispatch("beforeUpdate","renderEnd"),y=250;o.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),a.orient(h?"right":"left").tickFormat(d3.format(",.1f")),g.duration(0);var x=t.utils.renderWatch(m,y);return i.dispatch.on("elementMouseover.tooltip",function(t){g.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){g.data(t).hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){g()}),e.dispatch=m,e.boxplot=i,e.xAxis=o,e.yAxis=a,e.tooltip=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},staggerLabels:{get:function(){return p},set:function(t){p=t}},showXAxis:{get:function(){return f},set:function(t){f=t}},showYAxis:{get:function(){return d},set:function(t){d=t}},tooltipContent:{get:function(){return g},set:function(t){g=t}},noData:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!==t.top?t.top:s.top,s.right=void 0!==t.right?t.right:s.right,s.bottom=void 0!==t.bottom?t.bottom:s.bottom,s.left=void 0!==t.left?t.left:s.left}},duration:{get:function(){return y},set:function(t){y=t,x.reset(y),i.duration(y),o.duration(y),a.duration(y)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),i.color(c)}},rightAlignYAxis:{get:function(){return h},set:function(t){h=t,a.orient(t?"right":"left")}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.bullet=function(){"use strict";function e(t,e){var n=t.slice();t.sort(function(t,r){var i=n.indexOf(t),o=n.indexOf(r);return d3.descending(e[i],e[o])})}function n(i){return i.each(function(n,i){var y=g-r.left-r.right,C=v-r.top-r.bottom;m=d3.select(this),t.utils.initSVG(m);var S=a.call(this,n,i).slice(),A=s.call(this,n,i).slice(),_=l.call(this,n,i).slice(),L=u.call(this,n,i).slice(),T=c.call(this,n,i).slice(),E=f.call(this,n,i).slice(),N=d.call(this,n,i).slice(),P=h.call(this,n,i).slice();e(T,S),e(E,A),e(N,_),e(P,L),S.sort(d3.descending),A.sort(d3.descending),_.sort(d3.descending),L.sort(d3.descending);var F=d3.scale.linear().domain(d3.extent(d3.merge([p,S]))).range(o?[y,0]:[0,y]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(F.range());this.__chart__=F;for(var O=(d3.min(S),d3.max(S),S[1],m.selectAll("g.nv-wrap.nv-bullet").data([n])),W=O.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),D=W.append("g"),z=O.select("g"),i=0,H=S.length;i<H;i++){var I="nv-range nv-range"+i;i<=2&&(I=I+" nv-range"+k[i]),D.append("rect").attr("class",I)}D.append("rect").attr("class","nv-measure"),O.attr("transform","translate("+r.left+","+r.top+")");for(var R=function(t){return Math.abs(F(t)-F(0))},B=function(t){return F(t<0?t:0)},i=0,H=S.length;i<H;i++){var j=S[i];z.select("rect.nv-range"+i).datum(j).attr("height",C).transition().duration(M).attr("width",R(j)).attr("x",B(j))}z.select("rect.nv-measure").style("fill",x).attr("height",C/3).attr("y",C/3).on("mouseover",function(){b.elementMouseover({value:L[0],label:P[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){b.elementMousemove({value:L[0],label:P[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){b.elementMouseout({value:L[0],label:P[0]||"Current",color:d3.select(this).style("fill")})}).transition().duration(M).attr("width",L<0?F(0)-F(L[0]):F(L[0])-F(0)).attr("x",B(L));var V=C/6,q=A.map(function(t,e){return{value:t,label:E[e]}});D.selectAll("path.nv-markerTriangle").data(q).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+V+"L"+V+","+-V+" "+-V+","+-V+"Z").on("mouseover",function(t){b.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[F(t.value),C/2]})}).on("mousemove",function(t){b.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){b.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),z.selectAll("path.nv-markerTriangle").data(q).transition().duration(M).attr("transform",function(t){return"translate("+F(t.value)+","+C/2+")"});var X=_.map(function(t,e){return{value:t,label:N[e]}});D.selectAll("line.nv-markerLine").data(X).enter().append("line").attr("cursor","").attr("class","nv-markerLine").attr("x1",function(t){return F(t.value)}).attr("y1","2").attr("x2",function(t){return F(t.value)}).attr("y2",C-2).on("mouseover",function(t){b.elementMouseover({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill"),pos:[F(t.value),C/2]})}).on("mousemove",function(t){b.elementMousemove({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){b.elementMouseout({value:t.value,label:t.label||"Previous",color:d3.select(this).style("fill")})}),z.selectAll("line.nv-markerLine").data(X).transition().duration(M).attr("x1",function(t){return F(t.value)}).attr("x2",function(t){return F(t.value)}),O.selectAll(".nv-range").on("mouseover",function(t,e){var n=T[e]||w[e];b.elementMouseover({value:t,label:n,color:d3.select(this).style("fill")})}).on("mousemove",function(){b.elementMousemove({value:L[0],label:P[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){var n=T[e]||w[e];b.elementMouseout({value:t,label:n,color:d3.select(this).style("fill")})})}),n}var r={top:0,right:0,bottom:0,left:0},i="left",o=!1,a=function(t){return t.ranges},s=function(t){return t.markers?t.markers:[]},l=function(t){return t.markerLines?t.markerLines:[0]},u=function(t){return t.measures},c=function(t){return t.rangeLabels?t.rangeLabels:[]},f=function(t){return t.markerLabels?t.markerLabels:[]},d=function(t){return t.markerLineLabels?t.markerLineLabels:[]},h=function(t){return t.measureLabels?t.measureLabels:[]},p=[0],g=380,v=30,m=null,y=null,x=t.utils.getColor(["#1f77b4"]),b=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),w=["Maximum","Mean","Minimum"],k=["Max","Avg","Min"],M=1e3;return n.dispatch=b,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{ranges:{get:function(){return a},set:function(t){a=t}},markers:{get:function(){return s},set:function(t){s=t}},measures:{get:function(){return u},set:function(t){u=t}},forceX:{get:function(){return p},set:function(t){p=t}},width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return v},set:function(t){v=t}},tickFormat:{get:function(){return y},set:function(t){y=t}},duration:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return r},set:function(t){r.top=void 0!==t.top?t.top:r.top,r.right=void 0!==t.right?t.right:r.right,r.bottom=void 0!==t.bottom?t.bottom:r.bottom,r.left=void 0!==t.left?t.left:r.left}},orient:{get:function(){return i},set:function(t){i=t,o="right"==i||"bottom"==i}},color:{get:function(){return x},set:function(e){x=t.utils.getColor(e)}}}),t.utils.initOptions(n),n},t.models.bulletChart=function(){"use strict";function e(r){return r.each(function(i,p){var g=d3.select(this);t.utils.initSVG(g);var v=t.utils.availableWidth(c,g,a),m=f-a.top-a.bottom;if(e.update=function(){e(r)},e.container=this,!i||!s.call(this,i,p))return t.utils.noData(e,g),e;g.selectAll(".nv-noData").remove();var y=s.call(this,i,p).slice().sort(d3.descending),x=l.call(this,i,p).slice().sort(d3.descending),b=u.call(this,i,p).slice().sort(d3.descending),w=g.selectAll("g.nv-wrap.nv-bulletChart").data([i]),k=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),M=k.append("g"),C=w.select("g");M.append("g").attr("class","nv-bulletWrap"),M.append("g").attr("class","nv-titles"),w.attr("transform","translate("+a.left+","+a.top+")");var S=d3.scale.linear().domain([0,Math.max(y[0],x[0]||0,b[0])]).range(o?[v,0]:[0,v]),A=this.__chart__||d3.scale.linear().domain([0,1/0]).range(S.range());this.__chart__=S;var _=M.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(f-a.top-a.bottom)/2+")");_.append("text").attr("class","nv-title").text(function(t){return t.title}),_.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(t){return t.subtitle}),n.width(v).height(m);var L=C.select(".nv-bulletWrap");d3.transition(L).call(n);var T=d||S.tickFormat(v/100),E=C.selectAll("g.nv-tick").data(S.ticks(h?h:v/50),function(t){return this.textContent||T(t)}),N=E.enter().append("g").attr("class","nv-tick").attr("transform",function(t){return"translate("+A(t)+",0)"}).style("opacity",1e-6);N.append("line").attr("y1",m).attr("y2",7*m/6),N.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*m/6).text(T);var P=d3.transition(E).transition().duration(n.duration()).attr("transform",function(t){return"translate("+S(t)+",0)"}).style("opacity",1);P.select("line").attr("y1",m).attr("y2",7*m/6),P.select("text").attr("y",7*m/6),d3.transition(E.exit()).transition().duration(n.duration()).attr("transform",function(t){return"translate("+S(t)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),e}var n=t.models.bullet(),r=t.models.tooltip(),i="left",o=!1,a={top:5,right:40,bottom:20,left:120},s=function(t){return t.ranges},l=function(t){return t.markers?t.markers:[]},u=function(t){return t.measures},c=null,f=55,d=null,h=null,p=null,g=d3.dispatch();return r.duration(0).headerEnabled(!1),n.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.label,value:t.value,color:t.color},r.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){r.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(t){r()}),e.bullet=n,e.dispatch=g,e.tooltip=r,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{ranges:{get:function(){return s},set:function(t){s=t}},markers:{get:function(){return l},set:function(t){l=t}},measures:{get:function(){return u},set:function(t){u=t}},width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},tickFormat:{get:function(){return d},set:function(t){d=t}},ticks:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return p},set:function(t){p=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},orient:{get:function(){return i},set:function(t){i=t,o="right"==i||"bottom"==i}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.candlestickBar=function(){"use strict";function e(M){return M.each(function(e){n=d3.select(this);var M=t.utils.availableWidth(l,n,s),C=t.utils.availableHeight(u,n,s);t.utils.initSVG(n);var A=M/e[0].values.length*.45;f.domain(r||d3.extent(e[0].values.map(h).concat(x))),w?f.range(o||[.5*M/e[0].values.length,M*(e[0].values.length-.5)/e[0].values.length]):f.range(o||[5+A/2,M-A/2-5]),d.domain(i||[d3.min(e[0].values.map(y).concat(b)),d3.max(e[0].values.map(m).concat(b))]).range(a||[C,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var _=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([e[0].values]),L=_.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),T=L.append("defs"),E=L.append("g"),N=_.select("g");E.append("g").attr("class","nv-ticks"),_.attr("transform","translate("+s.left+","+s.top+")"),n.on("click",function(t,e){S.chartClick({data:t,index:e,pos:d3.event,id:c})}),T.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),_.select("#nv-chart-clip-path-"+c+" rect").attr("width",M).attr("height",C),N.attr("clip-path",k?"url(#nv-chart-clip-path-"+c+")":"");var P=_.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});P.exit().remove();var F=P.enter().append("g");P.attr("class",function(t,e,n){return(g(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e});F.append("line").attr("class","nv-candlestick-lines").attr("transform",function(t,e){return"translate("+f(h(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return d(m(t,e))}).attr("x2",0).attr("y2",function(t,e){return d(y(t,e))}),F.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(t,e){return"translate("+(f(h(t,e))-A/2)+","+(d(p(t,e))-(g(t,e)>v(t,e)?d(v(t,e))-d(g(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",A).attr("height",function(t,e){var n=g(t,e),r=v(t,e);return n>r?d(r)-d(n):d(n)-d(r)});P.select(".nv-candlestick-lines").transition().attr("transform",function(t,e){return"translate("+f(h(t,e))+",0)"}).attr("x1",0).attr("y1",function(t,e){return d(m(t,e))}).attr("x2",0).attr("y2",function(t,e){return d(y(t,e))}),P.select(".nv-candlestick-rects").transition().attr("transform",function(t,e){return"translate("+(f(h(t,e))-A/2)+","+(d(p(t,e))-(g(t,e)>v(t,e)?d(v(t,e))-d(g(t,e)):0))+")"}).attr("x",0).attr("y",0).attr("width",A).attr("height",function(t,e){var n=g(t,e),r=v(t,e);return n>r?d(r)-d(n):d(n)-d(r)})}),e}var n,r,i,o,a,s={top:0,right:0,bottom:0,left:0},l=null,u=null,c=Math.floor(1e4*Math.random()),f=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},g=function(t){return t.open},v=function(t){return t.close},m=function(t){return t.high},y=function(t){return t.low},x=[],b=[],w=!1,k=!0,M=t.utils.defaultColor(),C=!1,S=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return e.highlightPoint=function(t,r){e.clearHighlights(),n.select(".nv-candlestickBar .nv-tick-0-"+t).classed("hover",r)},e.clearHighlights=function(){n.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},e.dispatch=S,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return l},set:function(t){l=t}},height:{get:function(){return u},set:function(t){u=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return r},set:function(t){r=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},forceX:{get:function(){return x},set:function(t){x=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return k},set:function(t){k=t}},id:{get:function(){return c},set:function(t){c=t}},interactive:{get:function(){return C},set:function(t){C=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return g()},set:function(t){g=t}},close:{get:function(){return v()},set:function(t){v=t}},high:{get:function(){return m},set:function(t){m=t}},low:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return s},set:function(t){s.top=void 0!=t.top?t.top:s.top,s.right=void 0!=t.right?t.right:s.right,s.bottom=void 0!=t.bottom?t.bottom:s.bottom,s.left=void 0!=t.left?t.left:s.left}},color:{get:function(){return M},set:function(e){M=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.cumulativeLineChart=function(){"use strict";function e(f){return O.reset(),O.models(o),y&&O.models(a),x&&O.models(s),f.each(function(f){function _(t,n){d3.select(e.container).style("cursor","ew-resize")}function N(t,e){F.x=d3.event.x,F.i=Math.round(P.invert(F.x)),z()}function O(t,n){d3.select(e.container).style("cursor","auto"),S.index=F.i,T.stateChange(S)}function z(){et.data([F]);var t=e.duration();e.duration(0),e.update(),e.duration(t)}var H=d3.select(this);t.utils.initSVG(H),H.classed("nv-chart-"+C,!0);var I=t.utils.availableWidth(g,H,d),R=t.utils.availableHeight(v,H,d);if(e.update=function(){0===E?H.call(e):H.transition().duration(E).call(e)},e.container=this,S.setter(D(f),e.update).getter(W(f)).update(),S.disabled=f.map(function(t){return!!t.disabled}),!A){var B;A={};for(B in S)S[B]instanceof Array?A[B]=S[B].slice(0):A[B]=S[B]}var j=d3.behavior.drag().on("dragstart",_).on("drag",N).on("dragend",O);if(!(f&&f.length&&f.filter(function(t){return t.values.length}).length))return t.utils.noData(e,H),e;if(H.selectAll(".nv-noData").remove(),r=o.xScale(),i=o.yScale(),M)o.yDomain(null);else{var V=f.filter(function(t){return!t.disabled}).map(function(t,e){var n=d3.extent(t.values,o.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),q=[d3.min(V,function(t){return t[0]}),d3.max(V,function(t){return t[1]})];o.yDomain(q)}P.domain([0,f[0].values.length-1]).range([0,I]).clamp(!0);var f=n(F.i,f),X=k?"none":"all",U=H.selectAll("g.nv-wrap.nv-cumulativeLine").data([f]),Y=U.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),G=U.select("g");if(Y.append("g").attr("class","nv-interactive"),Y.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),Y.append("g").attr("class","nv-y nv-axis"),Y.append("g").attr("class","nv-background"),Y.append("g").attr("class","nv-linesWrap").style("pointer-events",X),Y.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),Y.append("g").attr("class","nv-legendWrap"),Y.append("g").attr("class","nv-controlsWrap"),m?(l.width(I),G.select(".nv-legendWrap").datum(f).call(l),h||l.height()===d.top||(d.top=l.height(),R=t.utils.availableHeight(v,H,d)),G.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")):G.select(".nv-legendWrap").selectAll("*").remove(),w){var $=[{key:"Re-scale y-axis",disabled:!M}];u.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),G.select(".nv-controlsWrap").datum($).attr("transform","translate(0,"+-d.top+")").call(u)}else G.select(".nv-controlsWrap").selectAll("*").remove();U.attr("transform","translate("+d.left+","+d.top+")"),b&&G.select(".nv-y.nv-axis").attr("transform","translate("+I+",0)");var Z=f.filter(function(t){return t.tempDisabled});U.select(".tempDisabled").remove(),Z.length&&U.append("text").attr("class","tempDisabled").attr("x",I/2).attr("y","-.71em").style("text-anchor","end").text(Z.map(function(t){return t.key}).join(", ")+" values cannot be calculated for this time period."),k&&(c.width(I).height(R).margin({left:d.left,top:d.top}).svgContainer(H).xScale(r),U.select(".nv-interactive").call(c)),Y.select(".nv-background").append("rect"),G.select(".nv-background rect").attr("width",I).attr("height",R),o.y(function(t){return t.display.y}).width(I).height(R).color(f.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!f[e].disabled&&!f[e].tempDisabled}));var K=G.select(".nv-linesWrap").datum(f.filter(function(t){return!t.disabled&&!t.tempDisabled}));K.call(o),f.forEach(function(t,e){t.seriesIndex=e});var Q=f.filter(function(t){return!t.disabled&&!!L(t)}),J=G.select(".nv-avgLinesWrap").selectAll("line").data(Q,function(t){return t.key}),tt=function(t){var e=i(L(t));return e<0?0:e>R?R:e};J.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(t,e){return o.color()(t,t.seriesIndex)}).attr("x1",0).attr("x2",I).attr("y1",tt).attr("y2",tt),J.style("stroke-opacity",function(t){var e=i(L(t));return e<0||e>R?0:1}).attr("x1",0).attr("x2",I).attr("y1",tt).attr("y2",tt),J.exit().remove();var et=K.selectAll(".nv-indexLine").data([F]);et.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(j),et.attr("transform",function(t){return"translate("+P(t.i)+",0)"}).attr("height",R),y&&(a.scale(r)._ticks(t.utils.calcTicksX(I/70,f)).tickSize(-R,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),G.select(".nv-x.nv-axis").call(a)),x&&(s.scale(i)._ticks(t.utils.calcTicksY(R/36,f)).tickSize(-I,0),G.select(".nv-y.nv-axis").call(s)),G.select(".nv-background rect").on("click",function(){F.x=d3.mouse(this)[0],F.i=Math.round(P.invert(F.x)),S.index=F.i,T.stateChange(S),z()}),o.dispatch.on("elementClick",function(t){F.i=t.pointIndex,F.x=P(F.i),S.index=F.i,T.stateChange(S),z()}),u.dispatch.on("legendClick",function(t,n){t.disabled=!t.disabled,M=!t.disabled,S.rescaleY=M,T.stateChange(S),e.update()}),l.dispatch.on("stateChange",function(t){for(var n in t)S[n]=t[n];T.stateChange(S),e.update()}),c.dispatch.on("elementMousemove",function(n){o.clearHighlights();var r,i,l,u=[];if(f.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,s){i=t.interactiveBisect(a.values,n.pointXValue,e.x()),o.highlightPoint(s,i,!0);var c=a.values[i];"undefined"!=typeof c&&("undefined"==typeof r&&(r=c),"undefined"==typeof l&&(l=e.xScale()(e.x()(c,i))),u.push({key:a.key,value:e.y()(c,i),color:p(a,a.seriesIndex)}))}),u.length>2){var d=e.yScale().invert(n.mouseY),h=Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),g=.03*h,v=t.nearestValueIndex(u.map(function(t){return t.value}),d,g);null!==v&&(u[v].highlight=!0)}var m=a.tickFormat()(e.x()(r,i),i);c.tooltip.valueFormatter(function(t,e){return s.tickFormat()(t)}).data({value:m,series:u})(),c.renderGuideLine(l)}),c.dispatch.on("elementMouseout",function(t){o.clearHighlights()}),T.on("changeState",function(t){"undefined"!=typeof t.disabled&&(f.forEach(function(e,n){e.disabled=t.disabled[n]}),S.disabled=t.disabled),"undefined"!=typeof t.index&&(F.i=t.index,F.x=P(F.i),S.index=t.index,et.data([F])),"undefined"!=typeof t.rescaleY&&(M=t.rescaleY),e.update()})}),O.renderEnd("cumulativeLineChart immediate"),e}function n(t,e){return z||(z=o.y()),e.map(function(e,n){if(!e.values)return e;var r=e.values[t];if(null==r)return e;var i=z(r,t);return i<-.95&&!N?(e.tempDisabled=!0,e):(e.tempDisabled=!1,e.values=e.values.map(function(t,e){return t.display={y:(z(t,e)-i)/(1+i)},t}),e)})}var r,i,o=t.models.line(),a=t.models.axis(),s=t.models.axis(),l=t.models.legend(),u=t.models.legend(),c=t.interactiveGuideline(),f=t.models.tooltip(),d={top:30,right:30,bottom:50,left:60},h=null,p=t.utils.defaultColor(),g=null,v=null,m=!0,y=!0,x=!0,b=!1,w=!0,k=!1,M=!0,C=o.id(),S=t.utils.state(),A=null,_=null,L=function(t){return t.average},T=d3.dispatch("stateChange","changeState","renderEnd"),E=250,N=!1;S.index=0,S.rescaleY=M,a.orient("bottom").tickPadding(7),s.orient(b?"right":"left"),f.valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return a.tickFormat()(t,e)}),u.updateState(!1);var P=d3.scale.linear(),F={i:0,x:0},O=t.utils.renderWatch(T,E),W=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),index:F.i,rescaleY:M}}},D=function(t){return function(e){void 0!==e.index&&(F.i=e.index),void 0!==e.rescaleY&&(M=e.rescaleY),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};o.dispatch.on("elementMouseover.tooltip",function(t){var n={x:e.x()(t.point),y:e.y()(t.point),color:t.point.color};t.point=n,f.data(t).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(t){f.hidden(!0)});var z=null;return e.dispatch=T,e.lines=o,e.legend=l,e.controls=u,e.xAxis=a,e.yAxis=s,e.interactiveLayer=c,e.state=S,e.tooltip=f,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return g},set:function(t){g=t}},height:{get:function(){return v},set:function(t){v=t}},rescaleY:{get:function(){return M},set:function(t){M=t}},showControls:{get:function(){return w},set:function(t){w=t}},showLegend:{get:function(){return m},set:function(t){m=t}},average:{get:function(){return L},set:function(t){L=t}},defaultState:{get:function(){return A},set:function(t){A=t}},noData:{get:function(){return _},set:function(t){_=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},noErrorCheck:{get:function(){return N},set:function(t){N=t}},margin:{get:function(){return d},set:function(t){void 0!==t.top&&(d.top=t.top,h=t.top),d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),l.color(p)}},useInteractiveGuideline:{get:function(){return k},set:function(t){k=t,t===!0&&(e.interactive(!1),e.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,s.orient(t?"right":"left")}},duration:{get:function(){return E},set:function(t){E=t,o.duration(E),a.duration(E),s.duration(E),O.reset(E)}}}),t.utils.inheritOptions(e,o),t.utils.initOptions(e),e},t.models.discreteBar=function(){"use strict";function e(d){return C.reset(),d.each(function(e){var d=c-u.left-u.right,M=f-u.top-u.bottom;n=d3.select(this),t.utils.initSVG(n),e.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var S=r&&i?[]:e.map(function(t){return t.values.map(function(t,e){return{x:g(t,e),y:v(t,e),y0:t.y0}})});h.domain(r||d3.merge(S).map(function(t){return t.x})).rangeBands(o||[0,d],.1),p.domain(i||d3.extent(d3.merge(S).map(function(t){return t.y}).concat(m))),x?p.range(a||[M-(p.domain()[0]<0?12:0),p.domain()[1]>0?12:0]):p.range(a||[M,0]),s=s||h,l=l||p.copy().range([p(0),p(0)]);var A=n.selectAll("g.nv-wrap.nv-discretebar").data([e]),_=A.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),L=_.append("g");A.select("g");L.append("g").attr("class","nv-groups"),A.attr("transform","translate("+u.left+","+u.top+")");var T=A.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});T.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),T.exit().watchTransition(C,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),T.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}),T.watchTransition(C,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);
var E=T.selectAll("g.nv-bar").data(function(t){return t.values});E.exit().remove();var N=E.enter().append("g").attr("transform",function(t,e,n){return"translate("+(h(g(t,e))+.05*h.rangeBand())+", "+p(0)+")"}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),w.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),w.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){w.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){var n=this;w.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(t,e){w.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});N.append("rect").attr("height",0).attr("width",.9*h.rangeBand()/e.length),x?(N.append("text").attr("text-anchor","middle"),E.select("text").text(function(t,e){return b(v(t,e))}).watchTransition(C,"discreteBar: bars text").attr("x",.9*h.rangeBand()/2).attr("y",function(t,e){return v(t,e)<0?p(v(t,e))-p(0)+12:-4})):E.selectAll("text").remove(),E.attr("class",function(t,e){return v(t,e)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(t,e){return t.color||y(t,e)}).style("stroke",function(t,e){return t.color||y(t,e)}).select("rect").attr("class",k).watchTransition(C,"discreteBar: bars rect").attr("width",.9*h.rangeBand()/e.length),E.watchTransition(C,"discreteBar: bars").attr("transform",function(t,e){var n=h(g(t,e))+.05*h.rangeBand(),r=v(t,e)<0?p(0):p(0)-p(v(t,e))<1?p(0)-1:p(v(t,e));return"translate("+n+", "+r+")"}).select("rect").attr("height",function(t,e){return Math.max(Math.abs(p(v(t,e))-p(0)),1)}),s=h.copy(),l=p.copy()}),C.renderEnd("discreteBar immediate"),e}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,f=500,d=Math.floor(1e4*Math.random()),h=d3.scale.ordinal(),p=d3.scale.linear(),g=function(t){return t.x},v=function(t){return t.y},m=[0],y=t.utils.defaultColor(),x=!1,b=d3.format(",.2f"),w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),k="discreteBar",M=250,C=t.utils.renderWatch(w,M);return e.dispatch=w,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},forceY:{get:function(){return m},set:function(t){m=t}},showValues:{get:function(){return x},set:function(t){x=t}},x:{get:function(){return g},set:function(t){g=t}},y:{get:function(){return v},set:function(t){v=t}},xScale:{get:function(){return h},set:function(t){h=t}},yScale:{get:function(){return p},set:function(t){p=t}},xDomain:{get:function(){return r},set:function(t){r=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},valueFormat:{get:function(){return b},set:function(t){b=t}},id:{get:function(){return d},set:function(t){d=t}},rectClass:{get:function(){return k},set:function(t){k=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},color:{get:function(){return y},set:function(e){y=t.utils.getColor(e)}},duration:{get:function(){return M},set:function(t){M=t,C.reset(M)}}}),t.utils.initOptions(e),e},t.models.discreteBarChart=function(){"use strict";function e(l){return C.reset(),C.models(i),g&&C.models(o),v&&C.models(a),l.each(function(l){var h=d3.select(this);t.utils.initSVG(h);var w=t.utils.availableWidth(f,h,u),C=t.utils.availableHeight(d,h,u);if(e.update=function(){k.beforeUpdate(),h.transition().duration(M).call(e)},e.container=this,!(l&&l.length&&l.filter(function(t){return t.values.length}).length))return t.utils.noData(e,h),e;h.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var S=h.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([l]),A=S.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),_=A.append("defs"),L=S.select("g");A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),A.append("g").attr("class","nv-barsWrap"),A.append("g").attr("class","nv-legendWrap"),L.attr("transform","translate("+u.left+","+u.top+")"),p?(s.width(w),L.select(".nv-legendWrap").datum(l).call(s),c||s.height()===u.top||(u.top=s.height(),C=t.utils.availableHeight(d,h,u)),S.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")):L.select(".nv-legendWrap").selectAll("*").remove(),m&&L.select(".nv-y.nv-axis").attr("transform","translate("+w+",0)"),i.width(w).height(C);var T=L.select(".nv-barsWrap").datum(l.filter(function(t){return!t.disabled}));if(T.transition().call(i),_.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),L.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",n.rangeBand()*(y?2:1)).attr("height",16).attr("x",-n.rangeBand()/(y?1:2)),g){o.scale(n)._ticks(t.utils.calcTicksX(w/100,l)).tickSize(-C,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+(r.range()[0]+(i.showValues()&&r.domain()[0]<0?16:0))+")"),L.select(".nv-x.nv-axis").call(o);var E=L.select(".nv-x.nv-axis").selectAll("g");y&&E.selectAll("text").attr("transform",function(t,e,n){return"translate(0,"+(n%2==0?"5":"17")+")"}),b&&E.selectAll(".tick text").attr("transform","rotate("+b+" 0,0)").style("text-anchor",b>0?"start":"end"),x&&L.selectAll(".tick text").call(t.utils.wrapTicks,e.xAxis.rangeBand())}v&&(a.scale(r)._ticks(t.utils.calcTicksY(C/36,l)).tickSize(-w,0),L.select(".nv-y.nv-axis").call(a)),L.select(".nv-zeroLine line").attr("x1",0).attr("x2",m?-w:w).attr("y1",r(0)).attr("y2",r(0))}),C.renderEnd("discreteBar chart immediate"),e}var n,r,i=t.models.discreteBar(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend(),l=t.models.tooltip(),u={top:15,right:10,bottom:50,left:60},c=null,f=null,d=null,h=t.utils.getColor(),p=!1,g=!0,v=!0,m=!1,y=!1,x=!1,b=0,w=null,k=d3.dispatch("beforeUpdate","renderEnd"),M=250;o.orient("bottom").showMaxMin(!1).tickFormat(function(t){return t}),a.orient(m?"right":"left").tickFormat(d3.format(",.1f")),l.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).keyFormatter(function(t,e){return o.tickFormat()(t,e)});var C=t.utils.renderWatch(k,M);return i.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:e.x()(t.data),value:e.y()(t.data),color:t.color},l.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){l()}),e.dispatch=k,e.discretebar=i,e.legend=s,e.xAxis=o,e.yAxis=a,e.tooltip=l,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},showLegend:{get:function(){return p},set:function(t){p=t}},staggerLabels:{get:function(){return y},set:function(t){y=t}},rotateLabels:{get:function(){return b},set:function(t){b=t}},wrapLabels:{get:function(){return x},set:function(t){x=!!t}},showXAxis:{get:function(){return g},set:function(t){g=t}},showYAxis:{get:function(){return v},set:function(t){v=t}},noData:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return u},set:function(t){void 0!==t.top&&(u.top=t.top,c=t.top),u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return M},set:function(t){M=t,C.reset(M),i.duration(M),o.duration(M),a.duration(M)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),i.color(h),s.color(h)}},rightAlignYAxis:{get:function(){return m},set:function(t){m=t,a.orient(t?"right":"left")}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.distribution=function(){"use strict";function e(c){return d.reset(),c.each(function(e){var c=(i-("x"===a?r.left+r.right:r.top+r.bottom),"x"==a?"y":"x"),f=d3.select(this);t.utils.initSVG(f),n=n||u;var h=f.selectAll("g.nv-distribution").data([e]),p=h.enter().append("g").attr("class","nvd3 nv-distribution"),g=(p.append("g"),h.select("g"));h.attr("transform","translate("+r.left+","+r.top+")");var v=g.selectAll("g.nv-dist").data(function(t){return t},function(t){return t.key});v.enter().append("g"),v.attr("class",function(t,e){return"nv-dist nv-series-"+e}).style("stroke",function(t,e){return l(t,e)});var m=v.selectAll("line.nv-dist"+a).data(function(t){return t.values});m.enter().append("line").attr(a+"1",function(t,e){return n(s(t,e))}).attr(a+"2",function(t,e){return n(s(t,e))}),d.transition(v.exit().selectAll("line.nv-dist"+a),"dist exit").attr(a+"1",function(t,e){return u(s(t,e))}).attr(a+"2",function(t,e){return u(s(t,e))}).style("stroke-opacity",0).remove(),m.attr("class",function(t,e){return"nv-dist"+a+" nv-dist"+a+"-"+e}).attr(c+"1",0).attr(c+"2",o),d.transition(m,"dist").attr(a+"1",function(t,e){return u(s(t,e))}).attr(a+"2",function(t,e){return u(s(t,e))}),n=u.copy()}),d.renderEnd("distribution immediate"),e}var n,r={top:0,right:0,bottom:0,left:0},i=400,o=8,a="x",s=function(t){return t[a]},l=t.utils.defaultColor(),u=d3.scale.linear(),c=250,f=d3.dispatch("renderEnd"),d=t.utils.renderWatch(f,c);return e.options=t.utils.optionsFunc.bind(e),e.dispatch=f,e.margin=function(t){return arguments.length?(r.top="undefined"!=typeof t.top?t.top:r.top,r.right="undefined"!=typeof t.right?t.right:r.right,r.bottom="undefined"!=typeof t.bottom?t.bottom:r.bottom,r.left="undefined"!=typeof t.left?t.left:r.left,e):r},e.width=function(t){return arguments.length?(i=t,e):i},e.axis=function(t){return arguments.length?(a=t,e):a},e.size=function(t){return arguments.length?(o=t,e):o},e.getData=function(t){return arguments.length?(s=d3.functor(t),e):s},e.scale=function(t){return arguments.length?(u=t,e):u},e.color=function(n){return arguments.length?(l=t.utils.getColor(n),e):l},e.duration=function(t){return arguments.length?(c=t,d.reset(c),e):c},e},t.models.focus=function(e){"use strict";function n(b){return x.reset(),x.models(e),d&&x.models(o),h&&x.models(a),b.each(function(x){function b(t){var e=+("e"==t),n=e?1:-1,r=S/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function w(){s.empty()||s.extent(g),E.data([s.empty()?r.domain():g]).each(function(t,e){var n=r(t[0])-r.range()[0],i=C-r(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",r(t[1])).attr("width",i<0?0:i)})}function k(t){g=s.empty()?null:s.extent();var e=s.empty()?r.domain():s.extent();m.brush({extent:e,brush:s}),w(),t&&m.onBrush(e)}var M=d3.select(this);t.utils.initSVG(M);var C=t.utils.availableWidth(c,M,l),S=f-l.top-l.bottom;n.update=function(){0===v?M.call(n):M.transition().duration(v).call(n)},n.container=this,r=e.xScale(),i=e.yScale();var A=M.selectAll("g.nv-focus").data([x]),_=A.enter().append("g").attr("class","nvd3 nv-focus").append("g"),L=A.select("g");A.attr("transform","translate("+l.left+","+l.top+")"),_.append("g").attr("class","nv-background").append("rect"),_.append("g").attr("class","nv-x nv-axis"),_.append("g").attr("class","nv-y nv-axis"),_.append("g").attr("class","nv-contentWrap"),_.append("g").attr("class","nv-brushBackground"),_.append("g").attr("class","nv-x nv-brush"),p&&L.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)"),L.select(".nv-background rect").attr("width",C).attr("height",S),e.width(C).height(S).color(x.map(function(t,e){return t.color||u(t,e)}).filter(function(t,e){return!x[e].disabled}));var T=L.select(".nv-contentWrap").datum(x.filter(function(t){return!t.disabled}));d3.transition(T).call(e),s.x(r).on("brush",function(){k(y)}),s.on("brushend",function(){y||m.onBrush(s.empty()?r.domain():s.extent())}),g&&s.extent(g);var E=L.select(".nv-brushBackground").selectAll("g").data([g||s.extent()]),N=E.enter().append("g");N.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",S),N.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",S);var P=L.select(".nv-x.nv-brush").call(s);P.selectAll("rect").attr("height",S),P.selectAll(".resize").append("path").attr("d",b),k(!0),L.select(".nv-background rect").attr("width",C).attr("height",S),d&&(o.scale(r)._ticks(t.utils.calcTicksX(C/100,x)).tickSize(-S,0),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(L.select(".nv-x.nv-axis")).call(o)),h&&(a.scale(i)._ticks(t.utils.calcTicksY(S/36,x)).tickSize(-C,0),d3.transition(L.select(".nv-y.nv-axis")).call(a)),L.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")")}),x.renderEnd("focus immediate"),n}var r,i,e=e||t.models.line(),o=t.models.axis(),a=t.models.axis(),s=d3.svg.brush(),l={top:10,right:0,bottom:30,left:0},u=t.utils.defaultColor(),c=null,f=70,d=!0,h=!1,p=!1,g=null,v=250,m=d3.dispatch("brush","onBrush","renderEnd"),y=!0;e.interactive(!1),e.pointActive(function(t){return!1});var x=t.utils.renderWatch(m,v);return n.dispatch=m,n.content=e,n.brush=s,n.xAxis=o,n.yAxis=a,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},showXAxis:{get:function(){return d},set:function(t){d=t}},showYAxis:{get:function(){return h},set:function(t){h=t}},brushExtent:{get:function(){return g},set:function(t){g=t}},syncBrushing:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return l},set:function(t){l.top=void 0!==t.top?t.top:l.top,l.right=void 0!==t.right?t.right:l.right,l.bottom=void 0!==t.bottom?t.bottom:l.bottom,l.left=void 0!==t.left?t.left:l.left}},duration:{get:function(){return v},set:function(t){v=t,x.reset(v),e.duration(v),o.duration(v),a.duration(v)}},color:{get:function(){return u},set:function(n){u=t.utils.getColor(n),e.color(u)}},interpolate:{get:function(){return e.interpolate()},set:function(t){e.interpolate(t)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t)}},yTickFormat:{get:function(){return a.tickFormat()},set:function(t){a.tickFormat(t)}},x:{get:function(){return e.x()},set:function(t){e.x(t)}},y:{get:function(){return e.y()},set:function(t){e.y(t)}},rightAlignYAxis:{get:function(){return p},set:function(t){p=t,a.orient(p?"right":"left")}}}),t.utils.inheritOptions(n,e),t.utils.initOptions(n),n},t.models.forceDirectedGraph=function(){"use strict";function e(a){return b.reset(),a.each(function(a){o=d3.select(this),t.utils.initSVG(o);var u=t.utils.availableWidth(r,o,n),b=t.utils.availableHeight(i,o,n);if(o.attr("width",u).attr("height",b),!(a&&a.links&&a.nodes))return t.utils.noData(e,o),e;o.selectAll(".nv-noData").remove(),o.selectAll("*").remove();var w=new Set;a.nodes.forEach(function(t){var e=Object.keys(t);e.forEach(function(t){w.add(t)})});var k=d3.layout.force().nodes(a.nodes).links(a.links).size([u,b]).linkStrength(c).friction(f).linkDistance(d).charge(h).gravity(p).theta(g).alpha(v).start(),M=o.selectAll(".link").data(a.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",function(t){return Math.sqrt(t.value)}),C=o.selectAll(".node").data(a.nodes).enter().append("g").attr("class","nv-force-node").call(k.drag);C.append("circle").attr("r",m).style("fill",function(t){return s(t)}).on("mouseover",function(t){o.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.py),o.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.px);var e=s(t);t.series=[],w.forEach(function(n){t.series.push({color:e,key:n,value:t[n]})}),l.data(t).hidden(!1)}).on("mouseout",function(t){l.hidden(!0)}),l.headerFormatter(function(t){return"Node"}),x(M),y(C),k.on("tick",function(){M.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),C.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})})}),e}var n={top:2,right:0,bottom:2,left:0},r=400,i=32,o=null,a=d3.dispatch("renderEnd"),s=t.utils.getColor(["#000"]),l=t.models.tooltip(),u=null,c=.1,f=.9,d=30,h=-120,p=.1,g=.8,v=.1,m=5,y=function(t){},x=function(t){},b=t.utils.renderWatch(a);return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},linkStrength:{get:function(){return c},set:function(t){c=t}},friction:{get:function(){return f},set:function(t){f=t}},linkDist:{get:function(){return d},set:function(t){d=t}},charge:{get:function(){return h},set:function(t){h=t}},gravity:{get:function(){return p},set:function(t){p=t}},theta:{get:function(){return g},set:function(t){g=t}},alpha:{get:function(){return v},set:function(t){v=t}},radius:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return getX},set:function(t){getX=d3.functor(t)}},y:{get:function(){return getY},set:function(t){getY=d3.functor(t)}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}},noData:{get:function(){return u},set:function(t){u=t}},nodeExtras:{get:function(){return y},set:function(t){y=t}},linkExtras:{get:function(){return x},set:function(t){x=t}}}),e.dispatch=a,e.tooltip=l,t.utils.initOptions(e),e},t.models.furiousLegend=function(){"use strict";function e(m){function y(t,e){return"furious"!=v?"#000":p?t.disengaged?s(t,e):"#fff":p?void 0:t.disabled?s(t,e):"#fff"}function x(t,e){return p&&"furious"==v?t.disengaged?"#fff":s(t,e):t.disabled?"#fff":s(t,e)}return m.each(function(e){var m=r-n.left-n.right,b=d3.select(this);t.utils.initSVG(b);var w=b.selectAll("g.nv-legend").data([e]),k=(w.enter().append("g").attr("class","nvd3 nv-legend").append("g"),w.select("g"));w.attr("transform","translate("+n.left+","+n.top+")");var M,C=k.selectAll(".nv-series").data(function(t){return"furious"!=v?t:t.filter(function(t){return!!p||!t.disengaged})}),S=C.enter().append("g").attr("class","nv-series");if("classic"==v)S.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),M=C.select("circle");else if("furious"==v){S.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),M=C.select("rect"),S.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var A=C.select(".nv-check-box");A.each(function(t,e){d3.select(this).selectAll("path").attr("stroke",y(t,e))})}S.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var _=C.select("text.nv-legend-text");C.on("mouseover",function(t,e){g.legendMouseover(t,e)}).on("mouseout",function(t,e){g.legendMouseout(t,e)}).on("click",function(t,e){g.legendClick(t,e);var n=C.data();if(d){if("classic"==v)h?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==v)if(p)t.disengaged=!t.disengaged,t.userDisabled=void 0==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!p){t.disabled=!t.disabled,t.userDisabled=t.disabled;var r=n.filter(function(t){return!t.disengaged});r.every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}g.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(("furious"!=v||!p)&&(g.legendDblclick(t,e),d)){var n=C.data();n.forEach(function(t){t.disabled=!0,"furious"==v&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==v&&(t.userDisabled=t.disabled),g.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),C.classed("nv-disabled",function(t){return t.userDisabled}),C.exit().remove(),_.attr("fill",y).text(function(t){return a(o(t))});var L;switch(v){case"furious":L=23;break;case"classic":L=20}if(u){var T=[];C.each(function(e,n){var r;if(a(o(e))&&a(o(e)).length>l){var i=a(o(e)).substring(0,l);r=d3.select(this).select("text").text(i+"..."),d3.select(this).append("svg:title").text(a(o(e)))}else r=d3.select(this).select("text");var s;try{if(s=r.node().getComputedTextLength(),s<=0)throw Error()}catch(e){s=t.utils.calcApproxTextWidth(r)}T.push(s+c)});for(var E=0,N=0,P=[];N<m&&E<T.length;)P[E]=T[E],N+=T[E++];for(0===E&&(E=1);N>m&&E>1;){P=[],E--;for(var F=0;F<T.length;F++)T[F]>(P[F%E]||0)&&(P[F%E]=T[F]);N=P.reduce(function(t,e,n,r){return t+e})}for(var O=[],W=0,D=0;W<E;W++)O[W]=D,D+=P[W];C.attr("transform",function(t,e){return"translate("+O[e%E]+","+(5+Math.floor(e/E)*L)+")"}),f?k.attr("transform","translate("+(r-n.right-N)+","+n.top+")"):k.attr("transform","translate(0,"+n.top+")"),i=n.top+n.bottom+Math.ceil(T.length/E)*L}else{var z,H=5,I=5,R=0;C.attr("transform",function(t,e){var i=d3.select(this).select("text").node().getComputedTextLength()+c;return z=I,r<n.left+n.right+z+i&&(I=z=5,H+=L),I+=i,I>R&&(R=I),"translate("+z+","+H+")"}),k.attr("transform","translate("+(r-n.right-R)+","+n.top+")"),i=n.top+n.bottom+H+15}"furious"==v&&M.attr("width",function(t,e){return _[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),M.style("fill",x).style("stroke",function(t,e){return t.color||s(t,e)})}),e}var n={top:5,right:0,bottom:5,left:0},r=400,i=20,o=function(t){return t.key},a=function(t){return t},s=t.utils.getColor(),l=20,u=!0,c=28,f=!0,d=!0,h=!1,p=!1,g=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),v="classic";return e.dispatch=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},key:{get:function(){return o},set:function(t){o=t}},keyFormatter:{get:function(){return a},set:function(t){a=t}},align:{get:function(){return u},set:function(t){u=t}},rightAlign:{get:function(){return f},set:function(t){f=t}},maxKeyLength:{get:function(){return l},set:function(t){l=t}},padding:{get:function(){return c},set:function(t){c=t}},updateState:{get:function(){return d},set:function(t){d=t}},radioButtonMode:{get:function(){return h},set:function(t){h=t}},expanded:{get:function(){return p},set:function(t){p=t}},vers:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.historicalBar=function(){"use strict";function e(M){return M.each(function(e){k.reset(),c=d3.select(this);var M=t.utils.availableWidth(s,c,a),C=t.utils.availableHeight(l,c,a);t.utils.initSVG(c),f.domain(n||d3.extent(e[0].values.map(h).concat(g))),m?f.range(i||[.5*M/e[0].values.length,M*(e[0].values.length-.5)/e[0].values.length]):f.range(i||[0,M]),d.domain(r||d3.extent(e[0].values.map(p).concat(v))).range(o||[C,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var S=c.selectAll("g.nv-wrap.nv-historicalBar-"+u).data([e[0].values]),A=S.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+u),_=A.append("defs"),L=A.append("g"),T=S.select("g");L.append("g").attr("class","nv-bars"),S.attr("transform","translate("+a.left+","+a.top+")"),c.on("click",function(t,e){b.chartClick({data:t,index:e,pos:d3.event,id:u})}),_.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),S.select("#nv-chart-clip-path-"+u+" rect").attr("width",M).attr("height",C),T.attr("clip-path",y?"url(#nv-chart-clip-path-"+u+")":"");var E=S.select(".nv-bars").selectAll(".nv-bar").data(function(t){return t},function(t,e){return h(t,e)});E.exit().remove(),E.enter().append("rect").attr("x",0).attr("y",function(e,n){return t.utils.NaNtoZero(d(Math.max(0,p(e,n))))}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.abs(d(p(e,n))-d(0)))}).attr("transform",function(t,n){return"translate("+(f(h(t,n))-M/e[0].values.length*.45)+",0)"}).on("mouseover",function(t,e){w&&(d3.select(this).classed("hover",!0),b.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mouseout",function(t,e){w&&(d3.select(this).classed("hover",!1),b.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")}))}).on("mousemove",function(t,e){w&&b.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){if(w){var n=this;b.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}}).on("dblclick",function(t,e){w&&(b.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),E.attr("fill",function(t,e){return x(t,e)}).attr("class",function(t,e,n){return(p(t,e)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+e}).watchTransition(k,"bars").attr("transform",function(t,n){return"translate("+(f(h(t,n))-M/e[0].values.length*.45)+",0)"}).attr("width",M/e[0].values.length*.9),E.watchTransition(k,"bars").attr("y",function(e,n){var r=p(e,n)<0?d(0):d(0)-d(p(e,n))<1?d(0)-1:d(p(e,n));return t.utils.NaNtoZero(r)}).attr("height",function(e,n){return t.utils.NaNtoZero(Math.max(Math.abs(d(p(e,n))-d(0)),1))})}),k.renderEnd("historicalBar immediate"),e}var n,r,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=null,f=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},g=[],v=[0],m=!1,y=!0,x=t.utils.defaultColor(),b=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w=!0,k=t.utils.renderWatch(b,0);return e.highlightPoint=function(t,e){c.select(".nv-bars .nv-bar-0-"+t).classed("hover",e)},e.clearHighlights=function(){c.select(".nv-bars .nv-bar.hover").classed("hover",!1)},e.dispatch=b,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},forceX:{get:function(){return g},set:function(t){g=t}},forceY:{get:function(){return v},set:function(t){v=t}},padData:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},clipEdge:{get:function(){return y},set:function(t){y=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return w},set:function(t){w=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},color:{get:function(){return x},set:function(e){x=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.historicalBarChart=function(e){"use strict";function n(e){return e.each(function(c){A.reset(),A.models(o),m&&A.models(a),y&&A.models(s);var M=d3.select(this);t.utils.initSVG(M);var _=t.utils.availableWidth(p,M,f),L=t.utils.availableHeight(g,M,f);if(n.update=function(){M.transition().duration(S).call(n)},n.container=this,w.disabled=c.map(function(t){return!!t.disabled}),!k){var T;k={};for(T in w)w[T]instanceof Array?k[T]=w[T].slice(0):k[T]=w[T]}if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return t.utils.noData(n,M),n;M.selectAll(".nv-noData").remove(),r=o.xScale(),i=o.yScale();var E=M.selectAll("g.nv-wrap.nv-historicalBarChart").data([c]),N=E.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),P=E.select("g");N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-barsWrap"),N.append("g").attr("class","nv-legendWrap"),N.append("g").attr("class","nv-interactive"),v?(l.width(_),P.select(".nv-legendWrap").datum(c).call(l),d||l.height()===f.top||(f.top=l.height(),L=t.utils.availableHeight(g,M,f)),E.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")):P.select(".nv-legendWrap").selectAll("*").remove(),E.attr("transform","translate("+f.left+","+f.top+")"),x&&P.select(".nv-y.nv-axis").attr("transform","translate("+_+",0)"),b&&(u.width(_).height(L).margin({left:f.left,top:f.top}).svgContainer(M).xScale(r),E.select(".nv-interactive").call(u)),o.width(_).height(L).color(c.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!c[e].disabled}));var F=P.select(".nv-barsWrap").datum(c.filter(function(t){return!t.disabled}));F.transition().call(o),m&&(a.scale(r)._ticks(t.utils.calcTicksX(_/100,c)).tickSize(-L,0),P.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),P.select(".nv-x.nv-axis").transition().call(a)),y&&(s.scale(i)._ticks(t.utils.calcTicksY(L/36,c)).tickSize(-_,0),P.select(".nv-y.nv-axis").transition().call(s)),u.dispatch.on("elementMousemove",function(e){o.clearHighlights();var r,i,l,f=[];c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(a,s){i=t.interactiveBisect(a.values,e.pointXValue,n.x()),o.highlightPoint(i,!0);var u=a.values[i];void 0!==u&&(void 0===r&&(r=u),void 0===l&&(l=n.xScale()(n.x()(u,i))),f.push({key:a.key,value:n.y()(u,i),color:h(a,a.seriesIndex),data:a.values[i]}))});var d=a.tickFormat()(n.x()(r,i));u.tooltip.valueFormatter(function(t,e){return s.tickFormat()(t)}).data({value:d,index:i,series:f})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(t){C.tooltipHide(),o.clearHighlights()}),l.dispatch.on("legendClick",function(t,r){t.disabled=!t.disabled,c.filter(function(t){return!t.disabled}).length||c.map(function(t){return t.disabled=!1,E.selectAll(".nv-series").classed("disabled",!1),t}),w.disabled=c.map(function(t){return!!t.disabled}),C.stateChange(w),e.transition().call(n)}),l.dispatch.on("legendDblclick",function(t){c.forEach(function(t){t.disabled=!0}),t.disabled=!1,w.disabled=c.map(function(t){return!!t.disabled}),C.stateChange(w),n.update()}),C.on("changeState",function(t){"undefined"!=typeof t.disabled&&(c.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),n.update()})}),A.renderEnd("historicalBarChart immediate"),n}var r,i,o=e||t.models.historicalBar(),a=t.models.axis(),s=t.models.axis(),l=t.models.legend(),u=t.interactiveGuideline(),c=t.models.tooltip(),f={top:30,right:90,bottom:50,left:90},d=null,h=t.utils.defaultColor(),p=null,g=null,v=!1,m=!0,y=!0,x=!1,b=!1,w={},k=null,M=null,C=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),S=250;a.orient("bottom").tickPadding(7),s.orient(x?"right":"left"),c.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return s.tickFormat()(t,e)}).headerFormatter(function(t,e){return a.tickFormat()(t,e);
});var A=t.utils.renderWatch(C,0);return o.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:n.x()(t.data),value:n.y()(t.data),color:t.color},c.data(t).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(t){c.hidden(!0)}),o.dispatch.on("elementMousemove.tooltip",function(t){c()}),n.dispatch=C,n.bars=o,n.legend=l,n.xAxis=a,n.yAxis=s,n.interactiveLayer=u,n.tooltip=c,n.options=t.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return g},set:function(t){g=t}},showLegend:{get:function(){return v},set:function(t){v=t}},showXAxis:{get:function(){return m},set:function(t){m=t}},showYAxis:{get:function(){return y},set:function(t){y=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return f},set:function(t){void 0!==t.top&&(f.top=t.top,d=t.top),f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),l.color(h),o.color(h)}},duration:{get:function(){return S},set:function(t){S=t,A.reset(S),s.duration(S),a.duration(S)}},rightAlignYAxis:{get:function(){return x},set:function(t){x=t,s.orient(t?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(t){b=t,t===!0&&n.interactive(!1)}}}),t.utils.inheritOptions(n,o),t.utils.initOptions(n),n},t.models.ohlcBarChart=function(){var e=t.models.historicalBarChart(t.models.ohlcBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data,r=n.open<n.close?"2ca02c":"d62728";return'<h3 style="color: #'+r+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.candlestickBarChart=function(){var e=t.models.historicalBarChart(t.models.candlestickBar());return e.useInteractiveGuideline(!0),e.interactiveLayer.tooltip.contentGenerator(function(t){var n=t.series[0].data,r=n.open<n.close?"2ca02c":"d62728";return'<h3 style="color: #'+r+'">'+t.value+"</h3><table><tr><td>open:</td><td>"+e.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+e.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+e.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+e.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),e},t.models.legend=function(){"use strict";function e(m){function y(t,e){return"furious"!=v?"#000":p?t.disengaged?"#000":"#fff":p?void 0:(t.color||(t.color=s(t,e)),t.disabled?t.color:"#fff")}function x(t,e){return p&&"furious"==v&&t.disengaged?"#eee":t.color||s(t,e)}function b(t,e){return p&&"furious"==v?1:t.disabled?0:1}return m.each(function(e){var s=r-n.left-n.right,m=d3.select(this);t.utils.initSVG(m);var w=m.selectAll("g.nv-legend").data([e]),k=w.enter().append("g").attr("class","nvd3 nv-legend").append("g"),M=w.select("g");f?w.attr("transform","translate("+-n.right+","+n.top+")"):w.attr("transform","translate("+n.left+","+n.top+")");var C,S,A=M.selectAll(".nv-series").data(function(t){return"furious"!=v?t:t.filter(function(t){return!!p||!t.disengaged})}),_=A.enter().append("g").attr("class","nv-series");switch(v){case"furious":S=23;break;case"classic":S=20}if("classic"==v)_.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),C=A.select(".nv-legend-symbol");else if("furious"==v){_.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),C=A.select(".nv-legend-symbol"),_.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)");var L=A.select(".nv-check-box");L.each(function(t,e){d3.select(this).selectAll("path").attr("stroke",y(t,e))})}_.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var T=A.select("text.nv-legend-text");A.on("mouseover",function(t,e){g.legendMouseover(t,e)}).on("mouseout",function(t,e){g.legendMouseout(t,e)}).on("click",function(t,e){g.legendClick(t,e);var n=A.data();if(d){if("classic"==v)h?(n.forEach(function(t){t.disabled=!0}),t.disabled=!1):(t.disabled=!t.disabled,n.every(function(t){return t.disabled})&&n.forEach(function(t){t.disabled=!1}));else if("furious"==v)if(p)t.disengaged=!t.disengaged,t.userDisabled=void 0==t.userDisabled?!!t.disabled:t.userDisabled,t.disabled=t.disengaged||t.userDisabled;else if(!p){t.disabled=!t.disabled,t.userDisabled=t.disabled;var r=n.filter(function(t){return!t.disengaged});r.every(function(t){return t.userDisabled})&&n.forEach(function(t){t.disabled=t.userDisabled=!1})}g.stateChange({disabled:n.map(function(t){return!!t.disabled}),disengaged:n.map(function(t){return!!t.disengaged})})}}).on("dblclick",function(t,e){if(("furious"!=v||!p)&&(g.legendDblclick(t,e),d)){var n=A.data();n.forEach(function(t){t.disabled=!0,"furious"==v&&(t.userDisabled=t.disabled)}),t.disabled=!1,"furious"==v&&(t.userDisabled=t.disabled),g.stateChange({disabled:n.map(function(t){return!!t.disabled})})}}),A.classed("nv-disabled",function(t){return t.userDisabled}),A.exit().remove(),T.attr("fill",y).text(function(t){return a(o(t))});var E=0;if(u){var N=[];A.each(function(e,n){var r;if(a(o(e))&&a(o(e)).length>l){var i=a(o(e)).substring(0,l);r=d3.select(this).select("text").text(i+"..."),d3.select(this).append("svg:title").text(a(o(e)))}else r=d3.select(this).select("text");var s;try{if(s=r.node().getComputedTextLength(),s<=0)throw Error()}catch(e){s=t.utils.calcApproxTextWidth(r)}N.push(s+c)});var P=0,F=[];for(E=0;E<s&&P<N.length;)F[P]=N[P],E+=N[P++];for(0===P&&(P=1);E>s&&P>1;){F=[],P--;for(var O=0;O<N.length;O++)N[O]>(F[O%P]||0)&&(F[O%P]=N[O]);E=F.reduce(function(t,e,n,r){return t+e})}for(var W=[],D=0,z=0;D<P;D++)W[D]=z,z+=F[D];A.attr("transform",function(t,e){return"translate("+W[e%P]+","+(5+Math.floor(e/P)*S)+")"}),f?M.attr("transform","translate("+(r-n.right-E)+","+n.top+")"):M.attr("transform","translate(0,"+n.top+")"),i=n.top+n.bottom+Math.ceil(N.length/P)*S}else{var H,I=5,R=5,B=0;A.attr("transform",function(t,e){var i=d3.select(this).select("text").node().getComputedTextLength()+c;return H=R,r<n.left+n.right+H+i&&(R=H=5,I+=S),R+=i,R>B&&(B=R),E<H+B&&(E=H+B),"translate("+H+","+I+")"}),M.attr("transform","translate("+(r-n.right-B)+","+n.top+")"),i=n.top+n.bottom+I+15}if("furious"==v){C.attr("width",function(t,e){return T[0][e].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),k.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0);var j=M.select(".nv-legend-bg");j.transition().duration(300).attr("x",-S).attr("width",E+S-12).attr("height",i+10).attr("y",-n.top-10).attr("opacity",p?1:0)}C.style("fill",x).style("fill-opacity",b).style("stroke",x)}),e}var n={top:5,right:0,bottom:5,left:0},r=400,i=20,o=function(t){return t.key},a=function(t){return t},s=t.utils.getColor(),l=20,u=!0,c=32,f=!0,d=!0,h=!1,p=!1,g=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),v="classic";return e.dispatch=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},key:{get:function(){return o},set:function(t){o=t}},keyFormatter:{get:function(){return a},set:function(t){a=t}},align:{get:function(){return u},set:function(t){u=t}},maxKeyLength:{get:function(){return l},set:function(t){l=t}},rightAlign:{get:function(){return f},set:function(t){f=t}},padding:{get:function(){return c},set:function(t){c=t}},updateState:{get:function(){return d},set:function(t){d=t}},radioButtonMode:{get:function(){return h},set:function(t){h=t}},expanded:{get:function(){return p},set:function(t){p=t}},vers:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.line=function(){"use strict";function e(m){return w.reset(),w.models(i),m.each(function(e){l=d3.select(this);var m=t.utils.availableWidth(a,l,o),y=t.utils.availableHeight(s,l,o);t.utils.initSVG(l),n=i.xScale(),r=i.yScale(),x=x||n,b=b||r;var k=l.selectAll("g.nv-wrap.nv-line").data([e]),M=k.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),C=M.append("defs"),S=M.append("g"),A=k.select("g");S.append("g").attr("class","nv-groups"),S.append("g").attr("class","nv-scatterWrap"),k.attr("transform","translate("+o.left+","+o.top+")"),i.width(m).height(y);var _=k.select(".nv-scatterWrap");_.call(i),C.append("clipPath").attr("id","nv-edge-clip-"+i.id()).append("rect"),k.select("#nv-edge-clip-"+i.id()+" rect").attr("width",m).attr("height",y>0?y:0),A.attr("clip-path",g?"url(#nv-edge-clip-"+i.id()+")":""),_.attr("clip-path",g?"url(#nv-edge-clip-"+i.id()+")":"");var L=k.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});L.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(t){return t.strokeWidth||u}).style("fill-opacity",1e-6),L.exit().remove(),L.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return c(t,e)}).style("stroke",function(t,e){return c(t,e)}),L.watchTransition(w,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(t){return t.fillOpacity||.5});var T=L.selectAll("path.nv-area").data(function(t){return p(t)?[t]:[]});T.enter().append("path").attr("class","nv-area").attr("d",function(e){return d3.svg.area().interpolate(v).defined(h).x(function(e,n){return t.utils.NaNtoZero(x(f(e,n)))}).y0(function(e,n){return t.utils.NaNtoZero(b(d(e,n)))}).y1(function(t,e){return b(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])}).apply(this,[e.values])}),L.exit().selectAll("path.nv-area").remove(),T.watchTransition(w,"line: areaPaths").attr("d",function(e){return d3.svg.area().interpolate(v).defined(h).x(function(e,r){return t.utils.NaNtoZero(n(f(e,r)))}).y0(function(e,n){return t.utils.NaNtoZero(r(d(e,n)))}).y1(function(t,e){return r(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])}).apply(this,[e.values])});var E=L.selectAll("path.nv-line").data(function(t){return[t.values]});E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(v).defined(h).x(function(e,n){return t.utils.NaNtoZero(x(f(e,n)))}).y(function(e,n){return t.utils.NaNtoZero(b(d(e,n)))})),E.watchTransition(w,"line: linePaths").attr("d",d3.svg.line().interpolate(v).defined(h).x(function(e,r){return t.utils.NaNtoZero(n(f(e,r)))}).y(function(e,n){return t.utils.NaNtoZero(r(d(e,n)))})),x=n.copy(),b=r.copy()}),w.renderEnd("line immediate"),e}var n,r,i=t.models.scatter(),o={top:0,right:0,bottom:0,left:0},a=960,s=500,l=null,u=1.5,c=t.utils.defaultColor(),f=function(t){return t.x},d=function(t){return t.y},h=function(t,e){return!isNaN(d(t,e))&&null!==d(t,e)},p=function(t){return t.area},g=!1,v="linear",m=250,y=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");i.pointSize(16).pointDomain([16,256]);var x,b,w=t.utils.renderWatch(y,m);return e.dispatch=y,e.scatter=i,i.dispatch.on("elementClick",function(){y.elementClick.apply(this,arguments)}),i.dispatch.on("elementMouseover",function(){y.elementMouseover.apply(this,arguments)}),i.dispatch.on("elementMouseout",function(){y.elementMouseout.apply(this,arguments)}),e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},defined:{get:function(){return h},set:function(t){h=t}},interpolate:{get:function(){return v},set:function(t){v=t}},clipEdge:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},duration:{get:function(){return m},set:function(t){m=t,w.reset(m),i.duration(m)}},isArea:{get:function(){return p},set:function(t){p=d3.functor(t)}},x:{get:function(){return f},set:function(t){f=t,i.x(t)}},y:{get:function(){return d},set:function(t){d=t,i.y(t)}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),i.color(c)}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.lineChart=function(){"use strict";function e(u){return L.reset(),L.models(i),y&&L.models(o),x&&L.models(a),u.each(function(u){function S(){y&&H.select(".nv-focus .nv-x.nv-axis").transition().duration(_).call(o)}function L(){x&&H.select(".nv-focus .nv-y.nv-axis").transition().duration(_).call(a)}function N(t){var e=H.select(".nv-focus .nv-linesWrap").datum(u.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter(function(e,n){return i.x()(e,n)>=t[0]&&i.x()(e,n)<=t[1]}),disableTooltip:e.disableTooltip}}));e.transition().duration(_).call(i),S(),L()}var P=d3.select(this);t.utils.initSVG(P);var F=t.utils.availableWidth(p,P,f),O=t.utils.availableHeight(g,P,f)-(k?c.height():0);if(e.update=function(){0===_?P.call(e):P.transition().duration(_).call(e)},e.container=this,M.setter(E(u),e.update).getter(T(u)).update(),M.disabled=u.map(function(t){return!!t.disabled}),!C){var W;C={};for(W in M)M[W]instanceof Array?C[W]=M[W].slice(0):C[W]=M[W]}if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(e,P),e;P.selectAll(".nv-noData").remove(),c.dispatch.on("onBrush",function(t){N(t)}),n=i.xScale(),r=i.yScale();var D=P.selectAll("g.nv-wrap.nv-lineChart").data([u]),z=D.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),H=D.select("g");z.append("g").attr("class","nv-legendWrap");var I=z.append("g").attr("class","nv-focus");I.append("g").attr("class","nv-background").append("rect"),I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-linesWrap"),I.append("g").attr("class","nv-interactive");z.append("g").attr("class","nv-focusWrap");v?(s.width(F),H.select(".nv-legendWrap").datum(u).call(s),"bottom"===m?D.select(".nv-legendWrap").attr("transform","translate(0,"+O+")"):"top"===m&&(d||s.height()===f.top||(f.top=s.height(),O=t.utils.availableHeight(g,P,f)-(k?c.height():0)),D.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")"))):H.select(".nv-legendWrap").selectAll("*").remove(),D.attr("transform","translate("+f.left+","+f.top+")"),b&&H.select(".nv-y.nv-axis").attr("transform","translate("+F+",0)"),w&&(l.width(F).height(O).margin({left:f.left,top:f.top}).svgContainer(P).xScale(n),D.select(".nv-interactive").call(l)),H.select(".nv-focus .nv-background rect").attr("width",F).attr("height",O),i.width(F).height(O).color(u.map(function(t,e){return t.color||h(t,e)}).filter(function(t,e){return!u[e].disabled}));var R=H.select(".nv-linesWrap").datum(u.filter(function(t){return!t.disabled}));if(y&&o.scale(n)._ticks(t.utils.calcTicksX(F/100,u)).tickSize(-O,0),x&&a.scale(r)._ticks(t.utils.calcTicksY(O/36,u)).tickSize(-F,0),H.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+O+")"),k){c.width(F),H.select(".nv-focusWrap").attr("transform","translate(0,"+(O+f.bottom+c.margin().top)+")").datum(u.filter(function(t){return!t.disabled})).call(c);var B=c.brush.empty()?c.xDomain():c.brush.extent();null!==B&&N(B)}else R.call(i),S(),L();s.dispatch.on("stateChange",function(t){for(var n in t)M[n]=t[n];A.stateChange(M),e.update()}),l.dispatch.on("elementMousemove",function(r){i.clearHighlights();var o,s,f,d=[];if(u.filter(function(t,e){return t.seriesIndex=e,!t.disabled&&!t.disableTooltip}).forEach(function(a,l){var u=k?c.brush.empty()?c.xScale().domain():c.brush.extent():n.domain(),p=a.values.filter(function(t,e){return u[0]<=u[1]?i.x()(t,e)>=u[0]&&i.x()(t,e)<=u[1]:i.x()(t,e)>=u[1]&&i.x()(t,e)<=u[0]});s=t.interactiveBisect(p,r.pointXValue,i.x());var g=p[s],v=e.y()(g,s);null!==v&&i.highlightPoint(l,s,!0),void 0!==g&&(void 0===o&&(o=g),void 0===f&&(f=e.xScale()(e.x()(g,s))),d.push({key:a.key,value:v,color:h(a,a.seriesIndex),data:g}))}),d.length>2){var p=e.yScale().invert(r.mouseY),g=Math.abs(e.yScale().domain()[0]-e.yScale().domain()[1]),v=.03*g,m=t.nearestValueIndex(d.map(function(t){return t.value}),p,v);null!==m&&(d[m].highlight=!0)}var y=function(t,e){return null==t?"N/A":a.tickFormat()(t)};l.tooltip.valueFormatter(l.tooltip.valueFormatter()||y).data({value:e.x()(o,s),index:s,series:d})(),l.renderGuideLine(f)}),l.dispatch.on("elementClick",function(n){var r,o=[];u.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(i){var a=t.interactiveBisect(i.values,n.pointXValue,e.x()),s=i.values[a];if("undefined"!=typeof s){"undefined"==typeof r&&(r=e.xScale()(e.x()(s,a)));var l=e.yScale()(e.y()(s,a));o.push({point:s,pointIndex:a,pos:[r,l],seriesIndex:i.seriesIndex,series:i})}}),i.dispatch.elementClick(o)}),l.dispatch.on("elementMouseout",function(t){i.clearHighlights()}),A.on("changeState",function(t){"undefined"!=typeof t.disabled&&u.length===t.disabled.length&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),M.disabled=t.disabled),e.update()})}),L.renderEnd("lineChart immediate"),e}var n,r,i=t.models.line(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend(),l=t.interactiveGuideline(),u=t.models.tooltip(),c=t.models.focus(t.models.line()),f={top:30,right:20,bottom:50,left:60},d=null,h=t.utils.defaultColor(),p=null,g=null,v=!0,m="top",y=!0,x=!0,b=!1,w=!1,k=!1,M=t.utils.state(),C=null,S=null,A=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),_=250;o.orient("bottom").tickPadding(7),a.orient(b?"right":"left"),i.clipEdge(!0).duration(0),u.valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),l.tooltip.valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)});var L=t.utils.renderWatch(A,_),T=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},E=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return i.dispatch.on("elementMouseover.tooltip",function(t){t.series.disableTooltip||u.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)}),e.dispatch=A,e.lines=i,e.legend=s,e.focus=c,e.xAxis=o,e.x2Axis=c.xAxis,e.yAxis=a,e.y2Axis=c.yAxis,e.interactiveLayer=l,e.tooltip=u,e.state=M,e.dispatch=A,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return g},set:function(t){g=t}},showLegend:{get:function(){return v},set:function(t){v=t}},legendPosition:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return C},set:function(t){C=t}},noData:{get:function(){return S},set:function(t){S=t}},focusEnable:{get:function(){return k},set:function(t){k=t}},focusHeight:{get:function(){return c.height()},set:function(t){c.height(t)}},focusShowAxisX:{get:function(){return c.showXAxis()},set:function(t){c.showXAxis(t)}},focusShowAxisY:{get:function(){return c.showYAxis()},set:function(t){c.showYAxis(t)}},brushExtent:{get:function(){return c.brushExtent()},set:function(t){c.brushExtent(t)}},focusMargin:{get:function(){return c.margin},set:function(t){void 0!==t.top&&(f.top=t.top,d=t.top),c.margin.right=void 0!==t.right?t.right:c.margin.right,c.margin.bottom=void 0!==t.bottom?t.bottom:c.margin.bottom,c.margin.left=void 0!==t.left?t.left:c.margin.left}},margin:{get:function(){return f},set:function(t){f.top=void 0!==t.top?t.top:f.top,f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},duration:{get:function(){return _},set:function(t){_=t,L.reset(_),i.duration(_),c.duration(_),o.duration(_),a.duration(_)}},color:{get:function(){return h},set:function(e){h=t.utils.getColor(e),s.color(h),i.color(h),c.color(h)}},interpolate:{get:function(){return i.interpolate()},set:function(t){i.interpolate(t),c.interpolate(t)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(t){o.tickFormat(t),c.xTickFormat(t)}},yTickFormat:{get:function(){return a.tickFormat()},set:function(t){a.tickFormat(t),c.yTickFormat(t)}},x:{get:function(){return i.x()},set:function(t){i.x(t),c.x(t)}},y:{get:function(){return i.y()},set:function(t){i.y(t),c.y(t)}},rightAlignYAxis:{get:function(){return b},set:function(t){b=t,a.orient(b?"right":"left")}},useInteractiveGuideline:{get:function(){return w},set:function(t){w=t,w&&(i.interactive(!1),i.useVoronoi(!1))}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.lineWithFocusChart=function(){return t.models.lineChart().margin({bottom:30}).focusEnable(!0)},t.models.linePlusBarChart=function(){"use strict";function e(w){return w.each(function(w){function D(t){var e=+("e"==t),n=e?1:-1,r=Q/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function q(){b.empty()||b.extent(W),ht.data([b.empty()?i.domain():W]).each(function(t,e){var n=i(t[0])-i.range()[0],r=i.range()[1]-i(t[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",i(t[1])).attr("width",r<0?0:r)})}function X(){W=b.empty()?null:b.extent(),n=b.empty()?i.domain():b.extent(),z.brush({extent:n,brush:b}),q(),f.width(Z).height(K).color(w.map(function(t,e){return t.color||T(t,e)}).filter(function(t,e){return!w[e].disabled&&w[e].bar})),u.width(Z).height(K).color(w.map(function(t,e){return t.color||T(t,e)}).filter(function(t,e){return!w[e].disabled&&!w[e].bar}));var e=at.select(".nv-focus .nv-barsWrap").datum(tt.length?tt.map(function(t,e){return{key:t.key,values:t.values.filter(function(t,e){return f.x()(t,e)>=n[0]&&f.x()(t,e)<=n[1]})}}):[{values:[]}]),s=at.select(".nv-focus .nv-linesWrap").datum(G(et)?[{values:[]}]:et.filter(function(t){return!t.disabled}).map(function(t,e){return{area:t.area,fillOpacity:t.fillOpacity,strokeWidth:t.strokeWidth,key:t.key,values:t.values.filter(function(t,e){return u.x()(t,e)>=n[0]&&u.x()(t,e)<=n[1]})}}));r=tt.length&&!V?f.xScale():u.xScale(),h.scale(r)._ticks(t.utils.calcTicksX(Z/100,w)).tickSize(-K,0),h.domain([Math.ceil(n[0]),Math.floor(n[1])]),at.select(".nv-x.nv-axis").transition().duration(H).call(h),e.transition().duration(H).call(f),s.transition().duration(H).call(u),at.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),g.scale(o)._ticks(t.utils.calcTicksY(K/36,w)).tickSize(-Z,0),v.scale(a)._ticks(t.utils.calcTicksY(K/36,w)),V?v.tickSize(et.length?0:-Z,0):v.tickSize(tt.length?0:-Z,0);var l=tt.length?1:0,c=et.length&&!G(et)?1:0,d=V?c:l,p=V?l:c;at.select(".nv-focus .nv-y1.nv-axis").style("opacity",d),at.select(".nv-focus .nv-y2.nv-axis").style("opacity",p).attr("transform","translate("+r.range()[1]+",0)"),at.select(".nv-focus .nv-y1.nv-axis").transition().duration(H).call(g),at.select(".nv-focus .nv-y2.nv-axis").transition().duration(H).call(v)}var $=d3.select(this);t.utils.initSVG($);var Z=t.utils.availableWidth(S,$,k),K=t.utils.availableHeight(A,$,k)-(N?O:0),Q=O-C.top-C.bottom;if(e.update=function(){$.transition().duration(H).call(e)},e.container=this,I.setter(Y(w),e.update).getter(U(w)).update(),I.disabled=w.map(function(t){return!!t.disabled}),!R){var J;R={};for(J in I)I[J]instanceof Array?R[J]=I[J].slice(0):R[J]=I[J]}if(!(w&&w.length&&w.filter(function(t){return t.values.length}).length))return t.utils.noData(e,$),e;$.selectAll(".nv-noData").remove();var tt=w.filter(function(t){return!t.disabled&&t.bar}),et=w.filter(function(t){return!t.bar});r=tt.length&&!V?f.xScale():u.xScale(),i=p.scale(),o=V?u.yScale():f.yScale(),a=V?f.yScale():u.yScale(),s=V?c.yScale():d.yScale(),l=V?d.yScale():c.yScale();var nt=w.filter(function(t){return!t.disabled&&(V?!t.bar:t.bar)}).map(function(t){return t.values.map(function(t,e){return{x:_(t,e),y:L(t,e)}})}),rt=w.filter(function(t){return!t.disabled&&(V?t.bar:!t.bar)}).map(function(t){return t.values.map(function(t,e){return{x:_(t,e),y:L(t,e)}})});r.range([0,Z]),i.domain(d3.extent(d3.merge(nt.concat(rt)),function(t){return t.x})).range([0,Z]);var it=$.selectAll("g.nv-wrap.nv-linePlusBar").data([w]),ot=it.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),at=it.select("g");ot.append("g").attr("class","nv-legendWrap");var st=ot.append("g").attr("class","nv-focus");st.append("g").attr("class","nv-x nv-axis"),st.append("g").attr("class","nv-y1 nv-axis"),st.append("g").attr("class","nv-y2 nv-axis"),st.append("g").attr("class","nv-barsWrap"),st.append("g").attr("class","nv-linesWrap");var lt=ot.append("g").attr("class","nv-context");if(lt.append("g").attr("class","nv-x nv-axis"),lt.append("g").attr("class","nv-y1 nv-axis"),lt.append("g").attr("class","nv-y2 nv-axis"),lt.append("g").attr("class","nv-barsWrap"),lt.append("g").attr("class","nv-linesWrap"),lt.append("g").attr("class","nv-brushBackground"),lt.append("g").attr("class","nv-x nv-brush"),E){var ut=x.align()?Z/2:Z,ct=x.align()?ut:0;x.width(ut),at.select(".nv-legendWrap").datum(w.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,V?t.key=t.originalKey+(t.bar?j:B):t.key=t.originalKey+(t.bar?B:j),t})).call(x),M||x.height()===k.top||(k.top=x.height(),K=t.utils.availableHeight(A,$,k)-O),at.select(".nv-legendWrap").attr("transform","translate("+ct+","+-k.top+")")}else at.select(".nv-legendWrap").selectAll("*").remove();it.attr("transform","translate("+k.left+","+k.top+")"),at.select(".nv-context").style("display",N?"initial":"none"),d.width(Z).height(Q).color(w.map(function(t,e){return t.color||T(t,e)}).filter(function(t,e){return!w[e].disabled&&w[e].bar})),c.width(Z).height(Q).color(w.map(function(t,e){return t.color||T(t,e)}).filter(function(t,e){return!w[e].disabled&&!w[e].bar}));var ft=at.select(".nv-context .nv-barsWrap").datum(tt.length?tt:[{values:[]}]),dt=at.select(".nv-context .nv-linesWrap").datum(G(et)?[{values:[]}]:et.filter(function(t){return!t.disabled}));at.select(".nv-context").attr("transform","translate(0,"+(K+k.bottom+C.top)+")"),ft.transition().call(d),dt.transition().call(c),F&&(p._ticks(t.utils.calcTicksX(Z/100,w)).tickSize(-Q,0),at.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")"),at.select(".nv-context .nv-x.nv-axis").transition().call(p)),P&&(m.scale(s)._ticks(Q/36).tickSize(-Z,0),y.scale(l)._ticks(Q/36).tickSize(tt.length?0:-Z,0),at.select(".nv-context .nv-y3.nv-axis").style("opacity",tt.length?1:0).attr("transform","translate(0,"+i.range()[0]+")"),at.select(".nv-context .nv-y2.nv-axis").style("opacity",et.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),at.select(".nv-context .nv-y1.nv-axis").transition().call(m),at.select(".nv-context .nv-y2.nv-axis").transition().call(y)),b.x(i).on("brush",X),W&&b.extent(W);var ht=at.select(".nv-brushBackground").selectAll("g").data([W||b.extent()]),pt=ht.enter().append("g");pt.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Q),pt.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Q);var gt=at.select(".nv-x.nv-brush").call(b);gt.selectAll("rect").attr("height",Q),gt.selectAll(".resize").append("path").attr("d",D),x.dispatch.on("stateChange",function(t){for(var n in t)I[n]=t[n];z.stateChange(I),e.update()}),z.on("changeState",function(t){"undefined"!=typeof t.disabled&&(w.forEach(function(e,n){e.disabled=t.disabled[n]}),I.disabled=t.disabled),e.update()}),X()}),e}var n,r,i,o,a,s,l,u=t.models.line(),c=t.models.line(),f=t.models.historicalBar(),d=t.models.historicalBar(),h=t.models.axis(),p=t.models.axis(),g=t.models.axis(),v=t.models.axis(),m=t.models.axis(),y=t.models.axis(),x=t.models.legend(),b=d3.svg.brush(),w=t.models.tooltip(),k={top:30,right:30,bottom:30,left:60},M=null,C={top:0,right:30,bottom:20,left:60},S=null,A=null,_=function(t){return t.x},L=function(t){return t.y},T=t.utils.defaultColor(),E=!0,N=!0,P=!1,F=!0,O=50,W=null,D=null,z=d3.dispatch("brush","stateChange","changeState"),H=0,I=t.utils.state(),R=null,B=" (left axis)",j=" (right axis)",V=!1;u.clipEdge(!0),c.interactive(!1),c.pointActive(function(t){return!1}),h.orient("bottom").tickPadding(5),g.orient("left"),v.orient("right"),p.orient("bottom").tickPadding(5),m.orient("left"),y.orient("right"),w.headerEnabled(!0).headerFormatter(function(t,e){return h.tickFormat()(t,e)});var q=function(){return V?{main:v,focus:y}:{main:g,focus:m}},X=function(){return V?{main:g,focus:m}:{main:v,focus:y}},U=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},Y=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},G=function(t){return t.every(function(t){return t.disabled})};return u.dispatch.on("elementMouseover.tooltip",function(t){w.duration(100).valueFormatter(function(t,e){return X().main.tickFormat()(t,e)}).data(t).hidden(!1)}),u.dispatch.on("elementMouseout.tooltip",function(t){w.hidden(!0)}),f.dispatch.on("elementMouseover.tooltip",function(t){t.value=e.x()(t.data),t.series={value:e.y()(t.data),color:t.color},w.duration(0).valueFormatter(function(t,e){return q().main.tickFormat()(t,e)}).data(t).hidden(!1)}),f.dispatch.on("elementMouseout.tooltip",function(t){w.hidden(!0)}),f.dispatch.on("elementMousemove.tooltip",function(t){w()}),e.dispatch=z,e.legend=x,e.lines=u,e.lines2=c,e.bars=f,e.bars2=d,e.xAxis=h,e.x2Axis=p,e.y1Axis=g,e.y2Axis=v,e.y3Axis=m,e.y4Axis=y,e.tooltip=w,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return S},set:function(t){S=t}},height:{get:function(){return A},set:function(t){A=t}},showLegend:{get:function(){return E},set:function(t){E=t}},brushExtent:{get:function(){return W},set:function(t){W=t}},noData:{get:function(){return D},set:function(t){D=t}},focusEnable:{get:function(){return N},set:function(t){N=t}},focusHeight:{get:function(){return O},set:function(t){O=t}},focusShowAxisX:{get:function(){return F},set:function(t){F=t}},focusShowAxisY:{get:function(){return P},set:function(t){P=t}},legendLeftAxisHint:{get:function(){return B},set:function(t){B=t}},legendRightAxisHint:{get:function(){return j},set:function(t){j=t}},margin:{get:function(){return k},set:function(t){void 0!==t.top&&(k.top=t.top,M=t.top),k.right=void 0!==t.right?t.right:k.right,k.bottom=void 0!==t.bottom?t.bottom:k.bottom,k.left=void 0!==t.left?t.left:k.left}},focusMargin:{get:function(){return C},set:function(t){C.top=void 0!==t.top?t.top:C.top,C.right=void 0!==t.right?t.right:C.right,C.bottom=void 0!==t.bottom?t.bottom:C.bottom,C.left=void 0!==t.left?t.left:C.left}},duration:{get:function(){return H},set:function(t){H=t}},color:{get:function(){return T},set:function(e){T=t.utils.getColor(e),x.color(T)}},x:{get:function(){return _},set:function(t){_=t,u.x(t),c.x(t),f.x(t),d.x(t)}},y:{get:function(){return L},set:function(t){L=t,u.y(t),c.y(t),f.y(t),d.y(t)}},switchYAxisOrder:{get:function(){return V},set:function(t){if(V!==t){var e=g;g=v,v=e;var n=m;m=y,y=n}V=t,g.orient("left"),v.orient("right"),m.orient("left"),
y.orient("right")}}}),t.utils.inheritOptions(e,u),t.utils.initOptions(e),e},t.models.multiBar=function(){"use strict";function e(N){return T.reset(),N.each(function(e){var N=c-u.left-u.right,P=f-u.top-u.bottom;g=d3.select(this),t.utils.initSVG(g);var F=0;if(M&&e.length&&(M=[{values:e[0].values.map(function(t){return{x:t.x,y:0,series:t.series,size:.01}})}]),b){var O=d3.layout.stack().offset(w).values(function(t){return t.values}).y(m)(!e.length&&M?M:e);O.forEach(function(t,n){t.nonStackable?(e[n].nonStackableSeries=F++,O[n]=e[n]):n>0&&O[n-1].nonStackable&&O[n].values.map(function(t,e){t.y0-=O[n-1].values[e].y,t.y1=t.y0+t.y})}),e=O}e.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),b&&e.length>0&&e[0].values.map(function(t,n){var r=0,i=0;e.map(function(t,o){if(!e[o].nonStackable){var a=t.values[n];a.size=Math.abs(a.y),a.y<0?(a.y1=i,i-=a.size):(a.y1=a.size+r,r+=a.size)}})});var W=r&&i?[]:e.map(function(t,e){return t.values.map(function(t,n){return{x:v(t,n),y:m(t,n),y0:t.y0,y1:t.y1,idx:e}})});d.domain(r||d3.merge(W).map(function(t){return t.x})).rangeBands(o||[0,N],A),h.domain(i||d3.extent(d3.merge(W).map(function(t){var n=t.y;return b&&!e[t.idx].nonStackable&&(n=t.y>0?t.y1:t.y1+t.y),n}).concat(y))).range(a||[P,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),h.domain()[0]===h.domain()[1]&&(h.domain()[0]?h.domain([h.domain()[0]+.01*h.domain()[0],h.domain()[1]-.01*h.domain()[1]]):h.domain([-1,1])),s=s||d,l=l||h;var D=g.selectAll("g.nv-wrap.nv-multibar").data([e]),z=D.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),H=z.append("defs"),I=z.append("g"),R=D.select("g");I.append("g").attr("class","nv-groups"),D.attr("transform","translate("+u.left+","+u.top+")"),H.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect"),D.select("#nv-edge-clip-"+p+" rect").attr("width",N).attr("height",P),R.attr("clip-path",x?"url(#nv-edge-clip-"+p+")":"");var B=D.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});B.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var j=T.transition(B.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,S)).attr("y",function(t,n,r){var i=l(0)||0;return b&&e[t.series]&&!e[t.series].nonStackable&&(i=l(t.y0)),i}).attr("height",0).remove();j.delay&&j.delay(function(t,e){var n=e*(S/(E+1))-e;return n}),B.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return k(t,e)}).style("stroke",function(t,e){return k(t,e)}),B.style("stroke-opacity",1).style("fill-opacity",_);var V=B.selectAll("rect.nv-bar").data(function(t){return M&&!e.length?M.values:t.values});V.exit().remove();V.enter().append("rect").attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(t,n,r){return b&&!e[r].nonStackable?0:r*d.rangeBand()/e.length}).attr("y",function(t,n,r){return l(b&&!e[r].nonStackable?t.y0:0)||0}).attr("height",0).attr("width",function(t,n,r){return d.rangeBand()/(b&&!e[r].nonStackable?1:e.length)}).attr("transform",function(t,e){return"translate("+d(v(t,e))+",0)"});V.style("fill",function(t,e,n){return k(t,n,e)}).style("stroke",function(t,e,n){return k(t,n,e)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),L.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),L.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){L.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){var n=this;L.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(t,e){L.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),V.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(t,e){return"translate("+d(v(t,e))+",0)"}),C&&(n||(n=e.map(function(){return!0})),V.style("fill",function(t,e,r){return d3.rgb(C(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[r]).toString()}).style("stroke",function(t,e,r){return d3.rgb(C(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[r]).toString()}));var q=V.watchTransition(T,"multibar",Math.min(250,S)).delay(function(t,n){return n*S/e[0].values.length});b?q.attr("y",function(t,n,r){var i=0;return i=e[r].nonStackable?m(t,n)<0?h(0):h(0)-h(m(t,n))<-1?h(0)-1:h(m(t,n))||0:h(t.y1)}).attr("height",function(t,n,r){return e[r].nonStackable?Math.max(Math.abs(h(m(t,n))-h(0)),0)||0:Math.max(Math.abs(h(t.y+t.y0)-h(t.y0)),0)}).attr("x",function(t,n,r){var i=0;return e[r].nonStackable&&(i=t.series*d.rangeBand()/e.length,e.length!==F&&(i=e[r].nonStackableSeries*d.rangeBand()/(2*F))),i}).attr("width",function(t,n,r){if(e[r].nonStackable){var i=d.rangeBand()/F;return e.length!==F&&(i=d.rangeBand()/(2*F)),i}return d.rangeBand()}):q.attr("x",function(t,n){return t.series*d.rangeBand()/e.length}).attr("width",d.rangeBand()/e.length).attr("y",function(t,e){return m(t,e)<0?h(0):h(0)-h(m(t,e))<1?h(0)-1:h(m(t,e))||0}).attr("height",function(t,e){return Math.max(Math.abs(h(m(t,e))-h(0)),1)||0}),s=d.copy(),l=h.copy(),e[0]&&e[0].values&&(E=e[0].values.length)}),T.renderEnd("multibar immediate"),e}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,f=500,d=d3.scale.ordinal(),h=d3.scale.linear(),p=Math.floor(1e4*Math.random()),g=null,v=function(t){return t.x},m=function(t){return t.y},y=[0],x=!0,b=!1,w="zero",k=t.utils.defaultColor(),M=!1,C=null,S=500,A=.1,_=.75,L=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),T=t.utils.renderWatch(L,S),E=0;return e.dispatch=L,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},x:{get:function(){return v},set:function(t){v=t}},y:{get:function(){return m},set:function(t){m=t}},xScale:{get:function(){return d},set:function(t){d=t}},yScale:{get:function(){return h},set:function(t){h=t}},xDomain:{get:function(){return r},set:function(t){r=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},forceY:{get:function(){return y},set:function(t){y=t}},stacked:{get:function(){return b},set:function(t){b=t}},stackOffset:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return x},set:function(t){x=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return p},set:function(t){p=t}},hideable:{get:function(){return M},set:function(t){M=t}},groupSpacing:{get:function(){return A},set:function(t){A=t}},fillOpacity:{get:function(){return _},set:function(t){_=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return S},set:function(t){S=t,T.reset(S)}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}},barColor:{get:function(){return C},set:function(e){C=e?t.utils.getColor(e):null}}}),t.utils.initOptions(e),e},t.models.multiBarChart=function(){"use strict";function e(L){return F.reset(),F.models(i),x&&F.models(o),b&&F.models(a),L.each(function(L){var F=d3.select(this);t.utils.initSVG(F);var z=t.utils.availableWidth(h,F,f),H=t.utils.availableHeight(p,F,f);if(e.update=function(){0===N?F.call(e):F.transition().duration(N).call(e)},e.container=this,A.setter(D(L),e.update).getter(W(L)).update(),A.disabled=L.map(function(t){return!!t.disabled}),!_){var I;_={};for(I in A)A[I]instanceof Array?_[I]=A[I].slice(0):_[I]=A[I]}if(!(L&&L.length&&L.filter(function(t){return t.values.length}).length))return t.utils.noData(e,F),e;F.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var R=F.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([L]),B=R.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),j=R.select("g");if(B.append("g").attr("class","nv-x nv-axis"),B.append("g").attr("class","nv-y nv-axis"),B.append("g").attr("class","nv-barsWrap"),B.append("g").attr("class","nv-legendWrap"),B.append("g").attr("class","nv-controlsWrap"),B.append("g").attr("class","nv-interactive"),y?(l.width(z-E()),j.select(".nv-legendWrap").datum(L).call(l),d||l.height()===f.top||(f.top=l.height(),H=t.utils.availableHeight(p,F,f)),j.select(".nv-legendWrap").attr("transform","translate("+E()+","+-f.top+")")):j.select(".nv-legendWrap").selectAll("*").remove(),v){var V=[{key:m.grouped||"Grouped",disabled:i.stacked()},{key:m.stacked||"Stacked",disabled:!i.stacked()}];u.width(E()).color(["#444","#444","#444"]),j.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-f.top+")").call(u)}else j.select(".nv-controlsWrap").selectAll("*").remove();R.attr("transform","translate("+f.left+","+f.top+")"),w&&j.select(".nv-y.nv-axis").attr("transform","translate("+z+",0)"),i.disabled(L.map(function(t){return t.disabled})).width(z).height(H).color(L.map(function(t,e){return t.color||g(t,e)}).filter(function(t,e){return!L[e].disabled}));var q=j.select(".nv-barsWrap").datum(L.filter(function(t){return!t.disabled}));if(q.call(i),x){o.scale(n)._ticks(t.utils.calcTicksX(z/100,L)).tickSize(-H,0),j.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),j.select(".nv-x.nv-axis").call(o);var X=j.select(".nv-x.nv-axis > g").selectAll("g");if(X.selectAll("line, text").style("opacity",1),M){var U=function(t,e){return"translate("+t+","+e+")"},Y=5,G=17;X.selectAll("text").attr("transform",function(t,e,n){return U(0,n%2==0?Y:G)});var $=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;j.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(t,e){return U(0,0===e||$%2!==0?G:Y)})}C&&j.selectAll(".tick text").call(t.utils.wrapTicks,e.xAxis.rangeBand()),k&&X.filter(function(t,e){return e%Math.ceil(L[0].values.length/(z/100))!==0}).selectAll("text, line").style("opacity",0),S&&X.selectAll(".tick text").attr("transform","rotate("+S+" 0,0)").style("text-anchor",S>0?"start":"end"),j.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}b&&(a.scale(r)._ticks(t.utils.calcTicksY(H/36,L)).tickSize(-z,0),j.select(".nv-y.nv-axis").call(a)),P&&(s.width(z).height(H).margin({left:f.left,top:f.top}).svgContainer(F).xScale(n),R.select(".nv-interactive").call(s)),l.dispatch.on("stateChange",function(t){for(var n in t)A[n]=t[n];T.stateChange(A),e.update()}),u.dispatch.on("legendClick",function(t,n){if(t.disabled){switch(V=V.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case m.grouped:i.stacked(!1);break;case"Stacked":case m.stacked:i.stacked(!0)}A.stacked=i.stacked(),T.stateChange(A),e.update()}}),T.on("changeState",function(t){"undefined"!=typeof t.disabled&&(L.forEach(function(e,n){e.disabled=t.disabled[n]}),A.disabled=t.disabled),"undefined"!=typeof t.stacked&&(i.stacked(t.stacked),A.stacked=t.stacked,O=t.stacked),e.update()}),P?(s.dispatch.on("elementMousemove",function(t){if(void 0!=t.pointXValue){var r,i,o,a,l=[];L.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(s,u){i=n.domain().indexOf(t.pointXValue);var c=s.values[i];void 0!==c&&(a=c.x,void 0===r&&(r=c),void 0===o&&(o=t.mouseX),l.push({key:s.key,value:e.y()(c,i),color:g(s,s.seriesIndex),data:s.values[i]}))}),s.tooltip.data({value:a,index:i,series:l})(),s.renderGuideLine(o)}}),s.dispatch.on("elementMouseout",function(t){s.tooltip.hidden(!0)})):(i.dispatch.on("elementMouseover.tooltip",function(t){t.value=e.x()(t.data),t.series={key:t.data.key,value:e.y()(t.data),color:t.color},c.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){c.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){c()}))}),F.renderEnd("multibarchart immediate"),e}var n,r,i=t.models.multiBar(),o=t.models.axis(),a=t.models.axis(),s=t.interactiveGuideline(),l=t.models.legend(),u=t.models.legend(),c=t.models.tooltip(),f={top:30,right:20,bottom:50,left:60},d=null,h=null,p=null,g=t.utils.defaultColor(),v=!0,m={},y=!0,x=!0,b=!0,w=!1,k=!0,M=!1,C=!1,S=0,A=t.utils.state(),_=null,L=null,T=d3.dispatch("stateChange","changeState","renderEnd"),E=function(){return v?180:0},N=250,P=!1;A.stacked=!1,i.stacked(!1),o.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(t){return t}),a.orient(w?"right":"left").tickFormat(d3.format(",.1f")),c.duration(0).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),s.tooltip.valueFormatter(function(t,e){return null==t?"N/A":a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),s.tooltip.valueFormatter(function(t,e){return null==t?"N/A":a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),s.tooltip.duration(0).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),u.updateState(!1);var F=t.utils.renderWatch(T),O=!1,W=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:O}}},D=function(t){return function(e){void 0!==e.stacked&&(O=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return e.dispatch=T,e.multibar=i,e.legend=l,e.controls=u,e.xAxis=o,e.yAxis=a,e.state=A,e.tooltip=c,e.interactiveLayer=s,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return h},set:function(t){h=t}},height:{get:function(){return p},set:function(t){p=t}},showLegend:{get:function(){return y},set:function(t){y=t}},showControls:{get:function(){return v},set:function(t){v=t}},controlLabels:{get:function(){return m},set:function(t){m=t}},showXAxis:{get:function(){return x},set:function(t){x=t}},showYAxis:{get:function(){return b},set:function(t){b=t}},defaultState:{get:function(){return _},set:function(t){_=t}},noData:{get:function(){return L},set:function(t){L=t}},reduceXTicks:{get:function(){return k},set:function(t){k=t}},rotateLabels:{get:function(){return S},set:function(t){S=t}},staggerLabels:{get:function(){return M},set:function(t){M=t}},wrapLabels:{get:function(){return C},set:function(t){C=!!t}},margin:{get:function(){return f},set:function(t){void 0!==t.top&&(f.top=t.top,d=t.top),f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},duration:{get:function(){return N},set:function(t){N=t,i.duration(N),o.duration(N),a.duration(N),F.reset(N)}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e),l.color(g)}},rightAlignYAxis:{get:function(){return w},set:function(t){w=t,a.orient(w?"right":"left")}},useInteractiveGuideline:{get:function(){return P},set:function(t){P=t}},barColor:{get:function(){return i.barColor},set:function(t){i.barColor(t),l.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.multiBarHorizontal=function(){"use strict";function e(d){return N.reset(),d.each(function(e){var d=c-u.left-u.right,T=f-u.top-u.bottom;h=d3.select(this),t.utils.initSVG(h),k&&(e=d3.layout.stack().offset("zero").values(function(t){return t.values}).y(m)(e)),e.forEach(function(t,e){t.values.forEach(function(n){n.series=e,n.key=t.key})}),k&&e[0].values.map(function(t,n){var r=0,i=0;e.map(function(t){var e=t.values[n];e.size=Math.abs(e.y),e.y<0?(e.y1=i-e.size,i-=e.size):(e.y1=r,r+=e.size)})});var P=r&&i?[]:e.map(function(t){return t.values.map(function(t,e){return{x:v(t,e),y:m(t,e),y0:t.y0,y1:t.y1}})});p.domain(r||d3.merge(P).map(function(t){return t.x})).rangeBands(o||[0,T],A),g.domain(i||d3.extent(d3.merge(P).map(function(t){return k?t.y>0?t.y1+t.y:t.y1:t.y}).concat(x))),M&&!k?g.range(a||[g.domain()[0]<0?S:0,d-(g.domain()[1]>0?S:0)]):g.range(a||[0,d]),s=s||p,l=l||d3.scale.linear().domain(g.domain()).range([g(0),g(0)]);var F=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([e]),O=F.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),W=(O.append("defs"),O.append("g"));F.select("g");W.append("g").attr("class","nv-groups"),F.attr("transform","translate("+u.left+","+u.top+")");var D=F.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t,e){return e});D.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),D.exit().watchTransition(N,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),D.attr("class",function(t,e){return"nv-group nv-series-"+e}).classed("hover",function(t){return t.hover}).style("fill",function(t,e){return b(t,e)}).style("stroke",function(t,e){return b(t,e)}),D.watchTransition(N,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",_);var z=D.selectAll("g.nv-bar").data(function(t){return t.values});z.exit().remove();var H=z.enter().append("g").attr("transform",function(t,n,r){return"translate("+l(k?t.y0:0)+","+(k?0:r*p.rangeBand()/e.length+p(v(t,n)))+")"});H.append("rect").attr("width",0).attr("height",p.rangeBand()/(k?1:e.length)),z.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),E.elementMouseover({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),E.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mouseout",function(t,e){E.elementMouseout({data:t,index:e,color:d3.select(this).style("fill")})}).on("mousemove",function(t,e){E.elementMousemove({data:t,index:e,color:d3.select(this).style("fill")})}).on("click",function(t,e){var n=this;E.elementClick({data:t,index:e,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(t,e){E.elementDblClick({data:t,index:e,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),y(e[0],0)&&(H.append("polyline"),z.select("polyline").attr("fill","none").attr("points",function(t,n){var r=y(t,n),i=.8*p.rangeBand()/(2*(k?1:e.length));r=r.length?r:[-Math.abs(r),Math.abs(r)],r=r.map(function(t){return g(t)-g(0)});var o=[[r[0],-i],[r[0],i],[r[0],0],[r[1],0],[r[1],-i],[r[1],i]];return o.map(function(t){return t.join(",")}).join(" ")}).attr("transform",function(t,n){var r=p.rangeBand()/(2*(k?1:e.length));return"translate("+(m(t,n)<0?0:g(m(t,n))-g(0))+", "+r+")"})),H.append("text"),M&&!k?(z.select("text").attr("text-anchor",function(t,e){return m(t,e)<0?"end":"start"}).attr("y",p.rangeBand()/(2*e.length)).attr("dy",".32em").text(function(t,e){var n=L(m(t,e)),r=y(t,e);return void 0===r?n:r.length?n+"+"+L(Math.abs(r[1]))+"-"+L(Math.abs(r[0])):n+""+L(Math.abs(r))}),z.watchTransition(N,"multibarhorizontal: bars").select("text").attr("x",function(t,e){return m(t,e)<0?-4:g(m(t,e))-g(0)+4})):z.selectAll("text").text(""),C&&!k?(H.append("text").classed("nv-bar-label",!0),z.select("text.nv-bar-label").attr("text-anchor",function(t,e){return m(t,e)<0?"start":"end"}).attr("y",p.rangeBand()/(2*e.length)).attr("dy",".32em").text(function(t,e){return v(t,e)}),z.watchTransition(N,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(t,e){return m(t,e)<0?g(0)-g(m(t,e))+4:-4})):z.selectAll("text.nv-bar-label").text(""),z.attr("class",function(t,e){return m(t,e)<0?"nv-bar negative":"nv-bar positive"}),w&&(n||(n=e.map(function(){return!0})),z.style("fill",function(t,e,r){return d3.rgb(w(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[r]).toString()}).style("stroke",function(t,e,r){return d3.rgb(w(t,e)).darker(n.map(function(t,e){return e}).filter(function(t,e){return!n[e]})[r]).toString()})),k?z.watchTransition(N,"multibarhorizontal: bars").attr("transform",function(t,e){return"translate("+g(t.y1)+","+p(v(t,e))+")"}).select("rect").attr("width",function(t,e){return Math.abs(g(m(t,e)+t.y0)-g(t.y0))||0}).attr("height",p.rangeBand()):z.watchTransition(N,"multibarhorizontal: bars").attr("transform",function(t,n){return"translate("+g(m(t,n)<0?m(t,n):0)+","+(t.series*p.rangeBand()/e.length+p(v(t,n)))+")"}).select("rect").attr("height",p.rangeBand()/e.length).attr("width",function(t,e){return Math.max(Math.abs(g(m(t,e))-g(0)),1)||0}),s=p.copy(),l=g.copy()}),N.renderEnd("multibarHorizontal immediate"),e}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,f=500,d=Math.floor(1e4*Math.random()),h=null,p=d3.scale.ordinal(),g=d3.scale.linear(),v=function(t){return t.x},m=function(t){return t.y},y=function(t){return t.yErr},x=[0],b=t.utils.defaultColor(),w=null,k=!1,M=!1,C=!1,S=60,A=.1,_=.75,L=d3.format(",.2f"),T=250,E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),N=t.utils.renderWatch(E,T);return e.dispatch=E,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return c},set:function(t){c=t}},height:{get:function(){return f},set:function(t){f=t}},x:{get:function(){return v},set:function(t){v=t}},y:{get:function(){return m},set:function(t){m=t}},yErr:{get:function(){return y},set:function(t){y=t}},xScale:{get:function(){return p},set:function(t){p=t}},yScale:{get:function(){return g},set:function(t){g=t}},xDomain:{get:function(){return r},set:function(t){r=t}},yDomain:{get:function(){return i},set:function(t){i=t}},xRange:{get:function(){return o},set:function(t){o=t}},yRange:{get:function(){return a},set:function(t){a=t}},forceY:{get:function(){return x},set:function(t){x=t}},stacked:{get:function(){return k},set:function(t){k=t}},showValues:{get:function(){return M},set:function(t){M=t}},disabled:{get:function(){return n},set:function(t){n=t}},id:{get:function(){return d},set:function(t){d=t}},valueFormat:{get:function(){return L},set:function(t){L=t}},valuePadding:{get:function(){return S},set:function(t){S=t}},groupSpacing:{get:function(){return A},set:function(t){A=t}},fillOpacity:{get:function(){return _},set:function(t){_=t}},margin:{get:function(){return u},set:function(t){u.top=void 0!==t.top?t.top:u.top,u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},duration:{get:function(){return T},set:function(t){T=t,N.reset(T)}},color:{get:function(){return b},set:function(e){b=t.utils.getColor(e)}},barColor:{get:function(){return w},set:function(e){w=e?t.utils.getColor(e):null}}}),t.utils.initOptions(e),e},t.models.multiBarHorizontalChart=function(){"use strict";function e(u){return T.reset(),T.models(i),y&&T.models(o),x&&T.models(a),u.each(function(u){var M=d3.select(this);t.utils.initSVG(M);var T=t.utils.availableWidth(d,M,c),E=t.utils.availableHeight(h,M,c);if(e.update=function(){M.transition().duration(A).call(e)},e.container=this,b=i.stacked(),w.setter(L(u),e.update).getter(_(u)).update(),w.disabled=u.map(function(t){return!!t.disabled}),!k){var N;k={};for(N in w)w[N]instanceof Array?k[N]=w[N].slice(0):k[N]=w[N]}if(!(u&&u.length&&u.filter(function(t){return t.values.length}).length))return t.utils.noData(e,M),e;M.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var P=M.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([u]),F=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),O=P.select("g");if(F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),F.append("g").attr("class","nv-barsWrap"),F.append("g").attr("class","nv-legendWrap"),F.append("g").attr("class","nv-controlsWrap"),m?(s.width(T-S()),O.select(".nv-legendWrap").datum(u).call(s),f||s.height()===c.top||(c.top=s.height(),E=t.utils.availableHeight(h,M,c)),O.select(".nv-legendWrap").attr("transform","translate("+S()+","+-c.top+")")):O.select(".nv-legendWrap").selectAll("*").remove(),g){var W=[{key:v.grouped||"Grouped",disabled:i.stacked()},{key:v.stacked||"Stacked",disabled:!i.stacked()}];l.width(S()).color(["#444","#444","#444"]),O.select(".nv-controlsWrap").datum(W).attr("transform","translate(0,"+-c.top+")").call(l)}else O.select(".nv-controlsWrap").selectAll("*").remove();P.attr("transform","translate("+c.left+","+c.top+")"),i.disabled(u.map(function(t){return t.disabled})).width(T).height(E).color(u.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!u[e].disabled}));var D=O.select(".nv-barsWrap").datum(u.filter(function(t){return!t.disabled}));if(D.transition().call(i),y){o.scale(n)._ticks(t.utils.calcTicksY(E/24,u)).tickSize(-T,0),O.select(".nv-x.nv-axis").call(o);var z=O.select(".nv-x.nv-axis").selectAll("g");z.selectAll("line, text")}x&&(a.scale(r)._ticks(t.utils.calcTicksX(T/100,u)).tickSize(-E,0),O.select(".nv-y.nv-axis").attr("transform","translate(0,"+E+")"),O.select(".nv-y.nv-axis").call(a)),O.select(".nv-zeroLine line").attr("x1",r(0)).attr("x2",r(0)).attr("y1",0).attr("y2",-E),s.dispatch.on("stateChange",function(t){for(var n in t)w[n]=t[n];C.stateChange(w),e.update()}),l.dispatch.on("legendClick",function(t,n){if(t.disabled){switch(W=W.map(function(t){return t.disabled=!0,t}),t.disabled=!1,t.key){case"Grouped":case v.grouped:i.stacked(!1);break;case"Stacked":case v.stacked:i.stacked(!0)}w.stacked=i.stacked(),C.stateChange(w),b=i.stacked(),e.update()}}),C.on("changeState",function(t){"undefined"!=typeof t.disabled&&(u.forEach(function(e,n){e.disabled=t.disabled[n]}),w.disabled=t.disabled),"undefined"!=typeof t.stacked&&(i.stacked(t.stacked),w.stacked=t.stacked,b=t.stacked),e.update()})}),T.renderEnd("multibar horizontal chart immediate"),e}var n,r,i=t.models.multiBarHorizontal(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend().height(30),l=t.models.legend().height(30),u=t.models.tooltip(),c={top:30,right:20,bottom:50,left:60},f=null,d=null,h=null,p=t.utils.defaultColor(),g=!0,v={},m=!0,y=!0,x=!0,b=!1,w=t.utils.state(),k=null,M=null,C=d3.dispatch("stateChange","changeState","renderEnd"),S=function(){return g?180:0},A=250;w.stacked=!1,i.stacked(b),o.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(t){return t}),a.orient("bottom").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter(function(t,e){return a.tickFormat()(t,e)}).headerFormatter(function(t,e){return o.tickFormat()(t,e)}),l.updateState(!1);var _=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),stacked:b}}},L=function(t){return function(e){void 0!==e.stacked&&(b=e.stacked),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},T=t.utils.renderWatch(C,A);return i.dispatch.on("elementMouseover.tooltip",function(t){t.value=e.x()(t.data),t.series={key:t.data.key,value:e.y()(t.data),color:t.color},u.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){u.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(t){u()}),e.dispatch=C,e.multibar=i,e.legend=s,e.controls=l,e.xAxis=o,e.yAxis=a,e.state=w,e.tooltip=u,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},showLegend:{get:function(){return m},set:function(t){m=t}},showControls:{get:function(){return g},set:function(t){g=t}},controlLabels:{get:function(){return v},set:function(t){v=t}},showXAxis:{get:function(){return y},set:function(t){y=t}},showYAxis:{get:function(){return x},set:function(t){x=t}},defaultState:{get:function(){return k},set:function(t){k=t}},noData:{get:function(){return M},set:function(t){M=t}},margin:{get:function(){return c},set:function(t){void 0!==t.top&&(c.top=t.top,f=t.top),c.right=void 0!==t.right?t.right:c.right,c.bottom=void 0!==t.bottom?t.bottom:c.bottom,c.left=void 0!==t.left?t.left:c.left}},duration:{get:function(){return A},set:function(t){A=t,T.reset(A),i.duration(A),o.duration(A),a.duration(A)}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),s.color(p)}},barColor:{get:function(){return i.barColor},set:function(t){i.barColor(t),s.color(function(t,e){return d3.rgb("#ccc").darker(1.5*e).toString()})}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.multiChart=function(){"use strict";function e(c){return c.each(function(c){function p(t){var e=2===c[t.seriesIndex].yAxis?P:N;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},O.duration(0).headerFormatter(function(t,e){return E.tickFormat()(t,e)}).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}function y(t){var e=2===c[t.seriesIndex].yAxis?P:N;t.value=t.point.x,t.series={value:t.point.y,color:t.point.color,key:t.series.key},O.duration(100).headerFormatter(function(t,e){return E.tickFormat()(t,e)}).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}function W(t){var e=2===c[t.seriesIndex].yAxis?P:N;t.point.x=L.x()(t.point),t.point.y=L.y()(t.point),O.duration(0).headerFormatter(function(t,e){return E.tickFormat()(t,e)}).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}function z(t){var e=2===c[t.data.series].yAxis?P:N;t.value=A.x()(t.data),t.series={value:A.y()(t.data),color:t.color,key:t.data.key},O.duration(0).headerFormatter(function(t,e){return E.tickFormat()(t,e)}).valueFormatter(function(t,n){return e.tickFormat()(t,n)}).data(t).hidden(!1)}function H(){for(var t=0,e=D.length;t<e;t++){var n=D[t];try{n.clearHighlights()}catch(t){}}}function I(t,e,n){for(var r=0,i=D.length;r<i;r++){var o=D[r];try{o.highlightPoint(t,e,n)}catch(t){}}}var R=d3.select(this);t.utils.initSVG(R),e.update=function(){R.transition().call(e)},e.container=this;var B=t.utils.availableWidth(s,R,i),j=t.utils.availableHeight(l,R,i),V=c.filter(function(t){return"line"==t.type&&1==t.yAxis}),q=c.filter(function(t){return"line"==t.type&&2==t.yAxis}),X=c.filter(function(t){return"scatter"==t.type&&1==t.yAxis}),U=c.filter(function(t){return"scatter"==t.type&&2==t.yAxis}),Y=c.filter(function(t){return"bar"==t.type&&1==t.yAxis}),G=c.filter(function(t){return"bar"==t.type&&2==t.yAxis}),$=c.filter(function(t){return"area"==t.type&&1==t.yAxis}),Z=c.filter(function(t){return"area"==t.type&&2==t.yAxis});if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return t.utils.noData(e,R),e;R.selectAll(".nv-noData").remove();var K=c.filter(function(t){return!t.disabled&&1==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:f(t),y:d(t)}})}),Q=c.filter(function(t){return!t.disabled&&2==t.yAxis}).map(function(t){return t.values.map(function(t,e){return{x:f(t),y:d(t)}})});x.domain(d3.extent(d3.merge(K.concat(Q)),function(t){return t.x})).range([0,B]);var J=R.selectAll("g.wrap.multiChart").data([c]),tt=J.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");tt.append("g").attr("class","nv-x nv-axis"),tt.append("g").attr("class","nv-y1 nv-axis"),tt.append("g").attr("class","nv-y2 nv-axis"),tt.append("g").attr("class","stack1Wrap"),tt.append("g").attr("class","stack2Wrap"),tt.append("g").attr("class","bars1Wrap"),tt.append("g").attr("class","bars2Wrap"),tt.append("g").attr("class","scatters1Wrap"),tt.append("g").attr("class","scatters2Wrap"),tt.append("g").attr("class","lines1Wrap"),tt.append("g").attr("class","lines2Wrap"),tt.append("g").attr("class","legendWrap"),tt.append("g").attr("class","nv-interactive");var et=J.select("g"),nt=c.map(function(t,e){return c[e].color||a(t,e)});if(u){var rt=F.align()?B/2:B,it=F.align()?rt:0;F.width(rt),F.color(nt),et.select(".legendWrap").datum(c.map(function(t){return t.originalKey=void 0===t.originalKey?t.key:t.originalKey,t.key=t.originalKey+(1==t.yAxis?"":m),t})).call(F),
o||F.height()===i.top||(i.top=F.height(),j=t.utils.availableHeight(l,R,i)),et.select(".legendWrap").attr("transform","translate("+it+","+-i.top+")")}else et.select(".legendWrap").selectAll("*").remove();k.width(B).height(j).interpolate(h).color(nt.filter(function(t,e){return!c[e].disabled&&1==c[e].yAxis&&"line"==c[e].type})),M.width(B).height(j).interpolate(h).color(nt.filter(function(t,e){return!c[e].disabled&&2==c[e].yAxis&&"line"==c[e].type})),C.width(B).height(j).color(nt.filter(function(t,e){return!c[e].disabled&&1==c[e].yAxis&&"scatter"==c[e].type})),S.width(B).height(j).color(nt.filter(function(t,e){return!c[e].disabled&&2==c[e].yAxis&&"scatter"==c[e].type})),A.width(B).height(j).color(nt.filter(function(t,e){return!c[e].disabled&&1==c[e].yAxis&&"bar"==c[e].type})),_.width(B).height(j).color(nt.filter(function(t,e){return!c[e].disabled&&2==c[e].yAxis&&"bar"==c[e].type})),L.width(B).height(j).interpolate(h).color(nt.filter(function(t,e){return!c[e].disabled&&1==c[e].yAxis&&"area"==c[e].type})),T.width(B).height(j).interpolate(h).color(nt.filter(function(t,e){return!c[e].disabled&&2==c[e].yAxis&&"area"==c[e].type})),et.attr("transform","translate("+i.left+","+i.top+")");var ot=et.select(".lines1Wrap").datum(V.filter(function(t){return!t.disabled})),at=et.select(".scatters1Wrap").datum(X.filter(function(t){return!t.disabled})),st=et.select(".bars1Wrap").datum(Y.filter(function(t){return!t.disabled})),lt=et.select(".stack1Wrap").datum($.filter(function(t){return!t.disabled})),ut=et.select(".lines2Wrap").datum(q.filter(function(t){return!t.disabled})),ct=et.select(".scatters2Wrap").datum(U.filter(function(t){return!t.disabled})),ft=et.select(".bars2Wrap").datum(G.filter(function(t){return!t.disabled})),dt=et.select(".stack2Wrap").datum(Z.filter(function(t){return!t.disabled})),ht=$.length?$.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[],pt=Z.length?Z.map(function(t){return t.values}).reduce(function(t,e){return t.map(function(t,n){return{x:t.x,y:t.y+e[n].y}})}).concat([{x:0,y:0}]):[];b.domain(n||d3.extent(d3.merge(K).concat(ht),function(t){return t.y})).range([0,j]),w.domain(r||d3.extent(d3.merge(Q).concat(pt),function(t){return t.y})).range([0,j]),k.yDomain(b.domain()),C.yDomain(b.domain()),A.yDomain(b.domain()),L.yDomain(b.domain()),M.yDomain(w.domain()),S.yDomain(w.domain()),_.yDomain(w.domain()),T.yDomain(w.domain()),$.length&&d3.transition(lt).call(L),Z.length&&d3.transition(dt).call(T),Y.length&&d3.transition(st).call(A),G.length&&d3.transition(ft).call(_),V.length&&d3.transition(ot).call(k),q.length&&d3.transition(ut).call(M),X.length&&d3.transition(at).call(C),U.length&&d3.transition(ct).call(S),E._ticks(t.utils.calcTicksX(B/100,c)).tickSize(-j,0),et.select(".nv-x.nv-axis").attr("transform","translate(0,"+j+")"),d3.transition(et.select(".nv-x.nv-axis")).call(E),N._ticks(t.utils.calcTicksY(j/36,c)).tickSize(-B,0),d3.transition(et.select(".nv-y1.nv-axis")).call(N),P._ticks(t.utils.calcTicksY(j/36,c)).tickSize(-B,0),d3.transition(et.select(".nv-y2.nv-axis")).call(P),et.select(".nv-y1.nv-axis").classed("nv-disabled",!K.length).attr("transform","translate("+x.range()[0]+",0)"),et.select(".nv-y2.nv-axis").classed("nv-disabled",!Q.length).attr("transform","translate("+x.range()[1]+",0)"),F.dispatch.on("stateChange",function(t){e.update()}),v&&(g.width(B).height(j).margin({left:i.left,top:i.top}).svgContainer(R).xScale(x),J.select(".nv-interactive").call(g)),v?(g.dispatch.on("elementMousemove",function(n){H();var r,i,o,s=[];c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(l,u){var c=x.domain(),f=l.values.filter(function(t,n){return e.x()(t,n)>=c[0]&&e.x()(t,n)<=c[1]});i=t.interactiveBisect(f,n.pointXValue,e.x());var d=f[i],h=e.y()(d,i);null!==h&&I(u,i,!0),void 0!==d&&(void 0===r&&(r=d),void 0===o&&(o=x(e.x()(d,i))),s.push({key:l.key,value:h,color:a(l,l.seriesIndex),data:d,yAxis:2==l.yAxis?P:N}))});var l=function(t,e){var n=s[e].yAxis;return null==t?"N/A":n.tickFormat()(t)};g.tooltip.headerFormatter(function(t,e){return E.tickFormat()(t,e)}).valueFormatter(g.tooltip.valueFormatter()||l).data({value:e.x()(r,i),index:i,series:s})(),g.renderGuideLine(o)}),g.dispatch.on("elementMouseout",function(t){H()})):(k.dispatch.on("elementMouseover.tooltip",p),M.dispatch.on("elementMouseover.tooltip",p),k.dispatch.on("elementMouseout.tooltip",function(t){O.hidden(!0)}),M.dispatch.on("elementMouseout.tooltip",function(t){O.hidden(!0)}),C.dispatch.on("elementMouseover.tooltip",y),S.dispatch.on("elementMouseover.tooltip",y),C.dispatch.on("elementMouseout.tooltip",function(t){O.hidden(!0)}),S.dispatch.on("elementMouseout.tooltip",function(t){O.hidden(!0)}),L.dispatch.on("elementMouseover.tooltip",W),T.dispatch.on("elementMouseover.tooltip",W),L.dispatch.on("elementMouseout.tooltip",function(t){O.hidden(!0)}),T.dispatch.on("elementMouseout.tooltip",function(t){O.hidden(!0)}),A.dispatch.on("elementMouseover.tooltip",z),_.dispatch.on("elementMouseover.tooltip",z),A.dispatch.on("elementMouseout.tooltip",function(t){O.hidden(!0)}),_.dispatch.on("elementMouseout.tooltip",function(t){O.hidden(!0)}),A.dispatch.on("elementMousemove.tooltip",function(t){O()}),_.dispatch.on("elementMousemove.tooltip",function(t){O()}))}),e}var n,r,i={top:30,right:20,bottom:50,left:60},o=null,a=t.utils.defaultColor(),s=null,l=null,u=!0,c=null,f=function(t){return t.x},d=function(t){return t.y},h="linear",p=!0,g=t.interactiveGuideline(),v=!1,m=" (right axis)",y=250,x=d3.scale.linear(),b=d3.scale.linear(),w=d3.scale.linear(),k=t.models.line().yScale(b).duration(y),M=t.models.line().yScale(w).duration(y),C=t.models.scatter().yScale(b).duration(y),S=t.models.scatter().yScale(w).duration(y),A=t.models.multiBar().stacked(!1).yScale(b).duration(y),_=t.models.multiBar().stacked(!1).yScale(w).duration(y),L=t.models.stackedArea().yScale(b).duration(y),T=t.models.stackedArea().yScale(w).duration(y),E=t.models.axis().scale(x).orient("bottom").tickPadding(5).duration(y),N=t.models.axis().scale(b).orient("left").duration(y),P=t.models.axis().scale(w).orient("right").duration(y),F=t.models.legend().height(30),O=t.models.tooltip(),W=d3.dispatch(),D=[k,M,C,S,A,_,L,T];return e.dispatch=W,e.legend=F,e.lines1=k,e.lines2=M,e.scatters1=C,e.scatters2=S,e.bars1=A,e.bars2=_,e.stack1=L,e.stack2=T,e.xAxis=E,e.yAxis1=N,e.yAxis2=P,e.tooltip=O,e.interactiveLayer=g,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},showLegend:{get:function(){return u},set:function(t){u=t}},yDomain1:{get:function(){return n},set:function(t){n=t}},yDomain2:{get:function(){return r},set:function(t){r=t}},noData:{get:function(){return c},set:function(t){c=t}},interpolate:{get:function(){return h},set:function(t){h=t}},legendRightAxisHint:{get:function(){return m},set:function(t){m=t}},margin:{get:function(){return i},set:function(t){void 0!==t.top&&(i.top=t.top,o=t.top),i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return a},set:function(e){a=t.utils.getColor(e)}},x:{get:function(){return f},set:function(t){f=t,k.x(t),M.x(t),C.x(t),S.x(t),A.x(t),_.x(t),L.x(t),T.x(t)}},y:{get:function(){return d},set:function(t){d=t,k.y(t),M.y(t),C.y(t),S.y(t),L.y(t),T.y(t),A.y(t),_.y(t)}},useVoronoi:{get:function(){return p},set:function(t){p=t,k.useVoronoi(t),M.useVoronoi(t),L.useVoronoi(t),T.useVoronoi(t)}},useInteractiveGuideline:{get:function(){return v},set:function(t){v=t,v&&(k.interactive(!1),k.useVoronoi(!1),M.interactive(!1),M.useVoronoi(!1),L.interactive(!1),L.useVoronoi(!1),T.interactive(!1),T.useVoronoi(!1),C.interactive(!1),S.interactive(!1))}},duration:{get:function(){return y},set:function(t){y=t,[k,M,L,T,C,S,E,N,P].forEach(function(t){t.duration(y)})}}}),t.utils.initOptions(e),e},t.models.ohlcBar=function(){"use strict";function e(C){return C.each(function(e){c=d3.select(this);var C=t.utils.availableWidth(s,c,a),A=t.utils.availableHeight(l,c,a);t.utils.initSVG(c);var _=C/e[0].values.length*.9;f.domain(n||d3.extent(e[0].values.map(h).concat(x))),w?f.range(i||[.5*C/e[0].values.length,C*(e[0].values.length-.5)/e[0].values.length]):f.range(i||[5+_/2,C-_/2-5]),d.domain(r||[d3.min(e[0].values.map(y).concat(b)),d3.max(e[0].values.map(m).concat(b))]).range(o||[A,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]+.01*d.domain()[0],d.domain()[1]-.01*d.domain()[1]]):d.domain([-1,1]));var L=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([e[0].values]),T=L.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),E=T.append("defs"),N=T.append("g"),P=L.select("g");N.append("g").attr("class","nv-ticks"),L.attr("transform","translate("+a.left+","+a.top+")"),c.on("click",function(t,e){S.chartClick({data:t,index:e,pos:d3.event,id:u})}),E.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),L.select("#nv-chart-clip-path-"+u+" rect").attr("width",C).attr("height",A),P.attr("clip-path",k?"url(#nv-chart-clip-path-"+u+")":"");var F=L.select(".nv-ticks").selectAll(".nv-tick").data(function(t){return t});F.exit().remove(),F.enter().append("path").attr("class",function(t,e,n){return(g(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}).attr("d",function(t,e){return"m0,0l0,"+(d(g(t,e))-d(m(t,e)))+"l"+-_/2+",0l"+_/2+",0l0,"+(d(y(t,e))-d(g(t,e)))+"l0,"+(d(v(t,e))-d(y(t,e)))+"l"+_/2+",0l"+-_/2+",0z"}).attr("transform",function(t,e){return"translate("+f(h(t,e))+","+d(m(t,e))+")"}).attr("fill",function(t,e){return M[0]}).attr("stroke",function(t,e){return M[0]}).attr("x",0).attr("y",function(t,e){return d(Math.max(0,p(t,e)))}).attr("height",function(t,e){return Math.abs(d(p(t,e))-d(0))}),F.attr("class",function(t,e,n){return(g(t,e)>v(t,e)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+e}),d3.transition(F).attr("transform",function(t,e){return"translate("+f(h(t,e))+","+d(m(t,e))+")"}).attr("d",function(t,n){var r=C/e[0].values.length*.9;return"m0,0l0,"+(d(g(t,n))-d(m(t,n)))+"l"+-r/2+",0l"+r/2+",0l0,"+(d(y(t,n))-d(g(t,n)))+"l0,"+(d(v(t,n))-d(y(t,n)))+"l"+r/2+",0l"+-r/2+",0z"})}),e}var n,r,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=null,f=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},g=function(t){return t.open},v=function(t){return t.close},m=function(t){return t.high},y=function(t){return t.low},x=[],b=[],w=!1,k=!0,M=t.utils.defaultColor(),C=!1,S=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return e.highlightPoint=function(t,n){e.clearHighlights(),c.select(".nv-ohlcBar .nv-tick-0-"+t).classed("hover",n)},e.clearHighlights=function(){c.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},e.dispatch=S,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},forceX:{get:function(){return x},set:function(t){x=t}},forceY:{get:function(){return b},set:function(t){b=t}},padData:{get:function(){return w},set:function(t){w=t}},clipEdge:{get:function(){return k},set:function(t){k=t}},id:{get:function(){return u},set:function(t){u=t}},interactive:{get:function(){return C},set:function(t){C=t}},x:{get:function(){return h},set:function(t){h=t}},y:{get:function(){return p},set:function(t){p=t}},open:{get:function(){return g()},set:function(t){g=t}},close:{get:function(){return v()},set:function(t){v=t}},high:{get:function(){return m},set:function(t){m=t}},low:{get:function(){return y},set:function(t){y=t}},margin:{get:function(){return a},set:function(t){a.top=void 0!=t.top?t.top:a.top,a.right=void 0!=t.right?t.right:a.right,a.bottom=void 0!=t.bottom?t.bottom:a.bottom,a.left=void 0!=t.left?t.left:a.left}},color:{get:function(){return M},set:function(e){M=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.parallelCoordinates=function(){"use strict";function e(_){return A.reset(),_.each(function(e){function A(t){return M(p.map(function(e){if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key]))||R){var n=f[e.key].domain(),r=f[e.key].range(),i=n[0]-(n[1]-n[0])/9;if(w.indexOf(e.key)<0){var o=d3.scale.linear().domain([i,n[1]]).range([u-12,r[1]]);f[e.key].brush.y(o),w.push(e.key)}if(isNaN(t.values[e.key])||isNaN(parseFloat(t.values[e.key])))return[c(e.key),f[e.key](i)]}return void 0!==U&&(w.length>0||R?(U.style("display","inline"),Y.style("display","inline")):(U.style("display","none"),Y.style("display","none"))),[c(e.key),f[e.key](t.values[e.key])]}))}function _(t){y.forEach(function(e){var n=f[e.dimension].brush.y().domain();e.hasOnlyNaN&&(e.extent[1]=(f[e.dimension].domain()[1]-n[0])*(e.extent[1]-e.extent[0])/(I[e.dimension]-e.extent[0])+n[0]),e.hasNaN&&(e.extent[0]=n[0]),t&&f[e.dimension].brush.extent(e.extent)}),i.select(".nv-brushBackground").each(function(t){d3.select(this).call(f[t.key].brush)}).selectAll("rect").attr("x",-8).attr("width",16),N()}function L(){v===!1&&(v=!0,_(!0))}function T(){Q=g.filter(function(t){return!f[t].brush.empty()}),J=Q.map(function(t){return f[t].brush.extent()}),y=[],Q.forEach(function(t,e){y[e]={dimension:t,extent:J[e],hasNaN:!1,hasOnlyNaN:!1}}),x=[],n.style("display",function(t){var e=Q.every(function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||J[n][0]!=f[e].brush.y().domain()[0])||J[n][0]<=t.values[e]&&t.values[e]<=J[n][1]&&!isNaN(parseFloat(t.values[e]))});return e&&x.push(t),e?null:"none"}),N(),S.brush({filters:y,active:x})}function E(){var t=Q.length>0;y.forEach(function(t){t.extent[0]===f[t.dimension].brush.y().domain()[0]&&w.indexOf(t.dimension)>=0&&(t.hasNaN=!0),t.extent[1]<f[t.dimension].domain()[0]&&(t.hasOnlyNaN=!0)}),S.brushEnd(x,t)}function N(){i.select(".nv-axis").each(function(t,e){var n=y.filter(function(e){return e.dimension==t.key});B[t.key]=f[t.key].domain(),0!=n.length&&v&&(B[t.key]=[],n[0].extent[1]>f[t.key].domain()[0]&&(B[t.key]=[n[0].extent[1]]),n[0].extent[0]>=f[t.key].domain()[0]&&B[t.key].push(n[0].extent[0])),d3.select(this).call(C.scale(f[t.key]).tickFormat(t.format).tickValues(B[t.key]))})}function P(t){b[t.key]=this.parentNode.__origin__=c(t.key),r.attr("visibility","hidden")}function F(t){b[t.key]=Math.min(l,Math.max(0,this.parentNode.__origin__+=d3.event.x)),n.attr("d",A),p.sort(function(t,e){return W(t.key)-W(e.key)}),p.forEach(function(t,e){return t.currentPosition=e}),c.domain(p.map(function(t){return t.key})),i.attr("transform",function(t){return"translate("+W(t.key)+")"})}function O(t,e){delete this.parentNode.__origin__,delete b[t.key],d3.select(this.parentNode).attr("transform","translate("+c(t.key)+")"),n.attr("d",A),r.attr("d",A).attr("visibility",null),S.dimensionsOrder(p)}function W(t){var e=b[t];return null==e?c(t):e}var D=d3.select(this);if(l=t.utils.availableWidth(a,D,o),u=t.utils.availableHeight(s,D,o),t.utils.initSVG(D),void 0===e[0].values){var z=[];e.forEach(function(t){var e={},n=Object.keys(t);n.forEach(function(n){"name"!==n&&(e[n]=t[n])}),z.push({key:t.name,values:e})}),e=z}var H=e.map(function(t){return t.values});0===x.length&&(x=e),g=h.sort(function(t,e){return t.currentPosition-e.currentPosition}).map(function(t){return t.key}),p=h.filter(function(t){return!t.disabled}),c.rangePoints([0,l],1).domain(p.map(function(t){return t.key}));var I={},R=!1,B=[];g.forEach(function(t){var e=d3.extent(H,function(e){return+e[t]}),n=e[0],r=e[1],i=!1;(isNaN(n)||isNaN(r))&&(i=!0,n=0,r=0),n===r&&(n-=1,r+=1);var o=y.filter(function(e){return e.dimension==t});0!==o.length&&(i?(n=f[t].domain()[0],r=f[t].domain()[1]):!o[0].hasOnlyNaN&&v?(n=n>o[0].extent[0]?o[0].extent[0]:n,r=r<o[0].extent[1]?o[0].extent[1]:r):o[0].hasNaN&&(r=r<o[0].extent[1]?o[0].extent[1]:r,I[t]=f[t].domain()[1],R=!0)),f[t]=d3.scale.linear().domain([n,r]).range([.9*(u-12),0]),w=[],f[t].brush=d3.svg.brush().y(f[t]).on("brushstart",L).on("brush",T).on("brushend",E)});var j=D.selectAll("g.nv-wrap.nv-parallelCoordinates").data([e]),V=j.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates"),q=V.append("g"),X=j.select("g");q.append("g").attr("class","nv-parallelCoordinates background"),q.append("g").attr("class","nv-parallelCoordinates foreground"),q.append("g").attr("class","nv-parallelCoordinates missingValuesline"),j.attr("transform","translate("+o.left+","+o.top+")"),M.interpolate("cardinal").tension(k),C.orient("left");var U,Y,G=d3.behavior.drag().on("dragstart",P).on("drag",F).on("dragend",O),$=c.range()[1]-c.range()[0];if($=isNaN($)?c.range()[0]:$,!isNaN($)){var Z=[0+$/2,u-12,l-$/2,u-12];U=j.select(".missingValuesline").selectAll("line").data([Z]),U.enter().append("line"),U.exit().remove(),U.attr("x1",function(t){return t[0]}).attr("y1",function(t){return t[1]}).attr("x2",function(t){return t[2]}).attr("y2",function(t){return t[3]}),Y=j.select(".missingValuesline").selectAll("text").data([d]),Y.append("text").data([d]),Y.enter().append("text"),Y.exit().remove(),Y.attr("y",u).attr("x",l-92-$/2).text(function(t){return t})}r=j.select(".background").selectAll("path").data(e),r.enter().append("path"),r.exit().remove(),r.attr("d",A),n=j.select(".foreground").selectAll("path").data(e),n.enter().append("path"),n.exit().remove(),n.attr("d",A).style("stroke-width",function(t,e){return isNaN(t.strokeWidth)&&(t.strokeWidth=1),t.strokeWidth}).attr("stroke",function(t,e){return t.color||m(t,e)}),n.on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("stroke-width",t.strokeWidth+2+"px").style("stroke-opacity",1),S.elementMouseover({label:t.name,color:t.color||m(t,e),values:t.values,dimensions:p})}),n.on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("stroke-width",t.strokeWidth+"px").style("stroke-opacity",.7),S.elementMouseout({label:t.name,index:e})}),n.on("mousemove",function(t,e){S.elementMousemove()}),n.on("click",function(t){S.elementClick({id:t.id})}),i=X.selectAll(".dimension").data(p);var K=i.enter().append("g").attr("class","nv-parallelCoordinates dimension");i.attr("transform",function(t){return"translate("+c(t.key)+",0)"}),K.append("g").attr("class","nv-axis"),K.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(t,e){S.elementMouseover({label:t.tooltip||t.key,color:t.color})}).on("mouseout",function(t,e){S.elementMouseout({label:t.tooltip})}).on("mousemove",function(t,e){S.elementMousemove()}).call(G),K.append("g").attr("class","nv-brushBackground"),i.exit().remove(),i.select(".nv-label").text(function(t){return t.key}),_(v);var Q=g.filter(function(t){return!f[t].brush.empty()}),J=Q.map(function(t){return f[t].brush.extent()}),tt=x.slice(0);x=[],n.style("display",function(t){var e=Q.every(function(e,n){return!(!isNaN(t.values[e])&&!isNaN(parseFloat(t.values[e]))||J[n][0]!=f[e].brush.y().domain()[0])||J[n][0]<=t.values[e]&&t.values[e]<=J[n][1]&&!isNaN(parseFloat(t.values[e]))});return e&&x.push(t),e?null:"none"}),(y.length>0||!t.utils.arrayEquals(x,tt))&&S.activeChanged(x)}),e}var n,r,i,o={top:30,right:0,bottom:10,left:0},a=null,s=null,l=null,u=null,c=d3.scale.ordinal(),f={},d="undefined values",h=[],p=[],g=[],v=!0,m=t.utils.defaultColor(),y=[],x=[],b=[],w=[],k=1,M=d3.svg.line(),C=d3.svg.axis(),S=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),A=t.utils.renderWatch(S);return e.dispatch=S,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},dimensionData:{get:function(){return h},set:function(t){h=t}},displayBrush:{get:function(){return v},set:function(t){v=t}},filters:{get:function(){return y},set:function(t){y=t}},active:{get:function(){return x},set:function(t){x=t}},lineTension:{get:function(){return k},set:function(t){k=t}},undefinedValuesLabel:{get:function(){return d},set:function(t){d=t}},dimensions:{get:function(){return h.map(function(t){return t.key})},set:function(e){t.deprecated("dimensions","use dimensionData instead"),0===h.length?e.forEach(function(t){h.push({key:t})}):e.forEach(function(t,e){h[e].key=t})}},dimensionNames:{get:function(){return h.map(function(t){return t.key})},set:function(e){t.deprecated("dimensionNames","use dimensionData instead"),g=[],0===h.length?e.forEach(function(t){h.push({key:t})}):e.forEach(function(t,e){h[e].key=t})}},dimensionFormats:{get:function(){return h.map(function(t){return t.format})},set:function(e){t.deprecated("dimensionFormats","use dimensionData instead"),0===h.length?e.forEach(function(t){h.push({format:t})}):e.forEach(function(t,e){h[e].format=t})}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return m},set:function(e){m=t.utils.getColor(e)}}}),t.utils.initOptions(e),e},t.models.parallelCoordinatesChart=function(){"use strict";function e(i){return y.reset(),y.models(n),i.each(function(i){var c=d3.select(this);t.utils.initSVG(c);var g=t.utils.availableWidth(s,c,o),v=t.utils.availableHeight(l,c,o);if(e.update=function(){c.call(e)},e.container=this,f.setter(b(d),e.update).getter(x(d)).update(),f.disabled=d.map(function(t){return!!t.disabled}),d=d.map(function(t){return t.disabled=!!t.disabled,t}),d.forEach(function(t,e){t.originalPosition=isNaN(t.originalPosition)?e:t.originalPosition,t.currentPosition=isNaN(t.currentPosition)?e:t.currentPosition}),!p){var y;p={};for(y in f)f[y]instanceof Array?p[y]=f[y].slice(0):p[y]=f[y]}if(!i||!i.length)return t.utils.noData(e,c),e;c.selectAll(".nv-noData").remove();var w=c.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([i]),k=w.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),M=w.select("g");k.append("g").attr("class","nv-parallelCoordinatesWrap"),k.append("g").attr("class","nv-legendWrap"),M.select("rect").attr("width",g).attr("height",v>0?v:0),u?(r.width(g).color(function(t){return"rgb(188,190,192)"}),M.select(".nv-legendWrap").datum(d.sort(function(t,e){return t.originalPosition-e.originalPosition})).call(r),a||r.height()===o.top||(o.top=r.height(),v=t.utils.availableHeight(l,c,o)),w.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-o.top+")")):M.select(".nv-legendWrap").selectAll("*").remove(),w.attr("transform","translate("+o.left+","+o.top+")"),n.width(g).height(v).dimensionData(d).displayBrush(h);var C=M.select(".nv-parallelCoordinatesWrap ").datum(i);C.transition().call(n),n.dispatch.on("brushEnd",function(t,e){e?(h=!0,m.brushEnd(t)):h=!1}),r.dispatch.on("stateChange",function(t){for(var n in t)f[n]=t[n];m.stateChange(f),e.update()}),n.dispatch.on("dimensionsOrder",function(t){d.sort(function(t,e){return t.currentPosition-e.currentPosition});var e=!1;d.forEach(function(t,n){t.currentPosition=n,t.currentPosition!==t.originalPosition&&(e=!0)}),m.dimensionsOrder(d,e)}),m.on("changeState",function(t){"undefined"!=typeof t.disabled&&(d.forEach(function(e,n){e.disabled=t.disabled[n]}),f.disabled=t.disabled),e.update()})}),y.renderEnd("parraleleCoordinateChart immediate"),e}var n=t.models.parallelCoordinates(),r=t.models.legend(),i=t.models.tooltip(),o=(t.models.tooltip(),{top:0,right:0,bottom:0,left:0}),a=null,s=null,l=null,u=!0,c=t.utils.defaultColor(),f=t.utils.state(),d=[],h=!0,p=null,g=null,v="undefined",m=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),y=t.utils.renderWatch(m),x=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},b=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return i.contentGenerator(function(t){var e='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td><strong>'+t.key+"</strong></td></tr></thead>";return 0!==t.series.length&&(e+='<tbody><tr><td height ="10px"></td></tr>',t.series.forEach(function(t){e=e+'<tr><td class="legend-color-guide"><div style="background-color:'+t.color+'"></div></td><td class="key">'+t.key+'</td><td class="value">'+t.value+"</td></tr>"}),e+="</tbody>"),e+="</table>"}),n.dispatch.on("elementMouseover.tooltip",function(t){var e={key:t.label,color:t.color,series:[]};t.values&&(Object.keys(t.values).forEach(function(n){var r=t.dimensions.filter(function(t){return t.key===n})[0];if(r){var i;i=isNaN(t.values[n])||isNaN(parseFloat(t.values[n]))?v:r.format(t.values[n]),e.series.push({idx:r.currentPosition,key:n,value:i,color:r.color})}}),e.series.sort(function(t,e){return t.idx-e.idx})),i.data(e).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){i.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(){i()}),e.dispatch=m,e.parallelCoordinates=n,e.legend=r,e.tooltip=i,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},showLegend:{get:function(){return u},set:function(t){u=t}},defaultState:{get:function(){return p},set:function(t){p=t}},dimensionData:{get:function(){return d},set:function(t){d=t}},displayBrush:{get:function(){return h},set:function(t){h=t}},noData:{get:function(){return g},set:function(t){g=t}},nanValue:{get:function(){return v},set:function(t){v=t}},margin:{get:function(){return o},set:function(t){void 0!==t.top&&(o.top=t.top,a=t.top),o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}},color:{get:function(){return c},set:function(e){c=t.utils.getColor(e),r.color(c),n.color(c)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.pie=function(){"use strict";function e(N){return E.reset(),N.each(function(e){function N(t,e){t.endAngle=isNaN(t.endAngle)?0:t.endAngle,t.startAngle=isNaN(t.startAngle)?0:t.startAngle,g||(t.innerRadius=0);var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return L[e](n(t))}}var P=r-n.left-n.right,F=i-n.top-n.bottom,O=Math.min(P,F)/2,W=[],D=[];if(l=d3.select(this),0===A.length)for(var z=O-O/5,H=C*O,I=0;I<e[0].length;I++)W.push(z),D.push(H);else m?(W=A.map(function(t){return(t.outer-t.outer/5)*O}),D=A.map(function(t){return(t.inner-t.inner/5)*O}),C=d3.min(A.map(function(t){return t.inner-t.inner/5}))):(W=A.map(function(t){return t.outer*O}),D=A.map(function(t){return t.inner*O}),C=d3.min(A.map(function(t){return t.inner})));t.utils.initSVG(l);var R=l.selectAll(".nv-wrap.nv-pie").data(e),B=R.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+s),j=B.append("g"),V=R.select("g"),q=j.append("g").attr("class","nv-pie");j.append("g").attr("class","nv-pieLabels"),R.attr("transform","translate("+n.left+","+n.top+")"),V.select(".nv-pie").attr("transform","translate("+P/2+","+F/2+")"),V.select(".nv-pieLabels").attr("transform","translate("+P/2+","+F/2+")"),l.on("click",function(t,e){_.chartClick({data:t,index:e,pos:d3.event,id:s})}),L=[],T=[];for(var I=0;I<e[0].length;I++){var X=d3.svg.arc().outerRadius(W[I]),U=d3.svg.arc().outerRadius(W[I]+5);b!==!1&&(X.startAngle(b),U.startAngle(b)),k!==!1&&(X.endAngle(k),U.endAngle(k)),g&&(X.innerRadius(D[I]),U.innerRadius(D[I])),X.cornerRadius&&M&&(X.cornerRadius(M),U.cornerRadius(M)),L.push(X),T.push(U)}var Y=d3.layout.pie().sort(null).value(function(t){return t.disabled?0:a(t)});Y.padAngle&&w&&Y.padAngle(w),g&&v&&(q.append("text").attr("class","nv-pie-title"),R.select(".nv-pie-title").style("text-anchor","middle").text(function(t){return v}).style("font-size",Math.min(P,F)*C*2/(v.length+2)+"px").attr("dy","0.35em").attr("transform",function(t,e){return"translate(0, "+y+")"}));var G=R.select(".nv-pie").selectAll(".nv-slice").data(Y),$=R.select(".nv-pieLabels").selectAll(".nv-label").data(Y);G.exit().remove(),$.exit().remove();var Z=G.enter().append("g");Z.attr("class","nv-slice"),Z.on("mouseover",function(t,e){d3.select(this).classed("hover",!0),m&&d3.select(this).select("path").transition().duration(70).attr("d",T[e]),_.elementMouseover({data:t.data,index:e,color:d3.select(this).style("fill"),percent:(t.endAngle-t.startAngle)/(2*Math.PI)})}),Z.on("mouseout",function(t,e){d3.select(this).classed("hover",!1),m&&d3.select(this).select("path").transition().duration(50).attr("d",L[e]),_.elementMouseout({data:t.data,index:e})}),Z.on("mousemove",function(t,e){_.elementMousemove({data:t.data,index:e})}),Z.on("click",function(t,e){var n=this;_.elementClick({data:t.data,index:e,color:d3.select(this).style("fill"),event:d3.event,element:n})}),Z.on("dblclick",function(t,e){_.elementDblClick({data:t.data,index:e,color:d3.select(this).style("fill")})}),G.attr("fill",function(t,e){return u(t.data,e)}),G.attr("stroke",function(t,e){return u(t.data,e)});Z.append("path").each(function(t){this._current=t});if(G.select("path").transition().duration(S).attr("d",function(t,e){return L[e](t)}).attrTween("d",N),f){for(var K=[],I=0;I<e[0].length;I++)K.push(L[I]),d?g&&(K[I]=d3.svg.arc().outerRadius(L[I].outerRadius()),b!==!1&&K[I].startAngle(b),k!==!1&&K[I].endAngle(k)):g||K[I].innerRadius(0);$.enter().append("g").classed("nv-label",!0).each(function(t,e){var n=d3.select(this);n.attr("transform",function(t,e){if(x){t.outerRadius=W[e]+10,t.innerRadius=W[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+K[e].centroid(t)+") rotate("+n+")"}return t.outerRadius=O+10,t.innerRadius=O+15,"translate("+K[e].centroid(t)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",x?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var Q={},J=14,tt=140,et=function(t){return Math.floor(t[0]/tt)*tt+","+Math.floor(t[1]/J)*J},nt=function(t){return(t.endAngle-t.startAngle)/(2*Math.PI)};$.watchTransition(E,"pie labels").attr("transform",function(t,e){if(x){t.outerRadius=W[e]+10,t.innerRadius=W[e]+15;var n=(t.startAngle+t.endAngle)/2*(180/Math.PI);return(t.startAngle+t.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+K[e].centroid(t)+") rotate("+n+")"}t.outerRadius=O+10,t.innerRadius=O+15;var r=K[e].centroid(t),i=nt(t);if(t.value&&i>=p){var o=et(r);Q[o]&&(r[1]-=J),Q[et(r)]=!0}return"translate("+r+")"}),$.select(".nv-label text").style("text-anchor",function(t,e){return x?(t.startAngle+t.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(t,e){var n=nt(t),r="";if(!t.value||n<p)return"";if("function"==typeof h)r=h(t,e,{key:o(t.data),value:a(t.data),percent:c(n)});else switch(h){case"key":r=o(t.data);break;case"value":r=c(a(t.data));break;case"percent":r=d3.format("%")(n)}return r})}}),E.renderEnd("pie immediate"),e}var n={top:0,right:0,bottom:0,left:0},r=500,i=500,o=function(t){return t.x},a=function(t){return t.y},s=Math.floor(1e4*Math.random()),l=null,u=t.utils.defaultColor(),c=d3.format(",.2f"),f=!0,d=!1,h="key",p=.02,g=!1,v=!1,m=!0,y=0,x=!1,b=!1,w=!1,k=!1,M=0,C=.5,S=250,A=[],_=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),L=[],T=[],E=t.utils.renderWatch(_);return e.dispatch=_,e.options=t.utils.optionsFunc.bind(e),
e._options=Object.create({},{arcsRadius:{get:function(){return A},set:function(t){A=t}},width:{get:function(){return r},set:function(t){r=t}},height:{get:function(){return i},set:function(t){i=t}},showLabels:{get:function(){return f},set:function(t){f=t}},title:{get:function(){return v},set:function(t){v=t}},titleOffset:{get:function(){return y},set:function(t){y=t}},labelThreshold:{get:function(){return p},set:function(t){p=t}},valueFormat:{get:function(){return c},set:function(t){c=t}},x:{get:function(){return o},set:function(t){o=t}},id:{get:function(){return s},set:function(t){s=t}},endAngle:{get:function(){return k},set:function(t){k=t}},startAngle:{get:function(){return b},set:function(t){b=t}},padAngle:{get:function(){return w},set:function(t){w=t}},cornerRadius:{get:function(){return M},set:function(t){M=t}},donutRatio:{get:function(){return C},set:function(t){C=t}},labelsOutside:{get:function(){return d},set:function(t){d=t}},labelSunbeamLayout:{get:function(){return x},set:function(t){x=t}},donut:{get:function(){return g},set:function(t){g=t}},growOnHover:{get:function(){return m},set:function(t){m=t}},pieLabelsOutside:{get:function(){return d},set:function(e){d=e,t.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return d},set:function(e){d=e,t.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return c},set:function(e){c=e,t.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return n},set:function(t){n.top="undefined"!=typeof t.top?t.top:n.top,n.right="undefined"!=typeof t.right?t.right:n.right,n.bottom="undefined"!=typeof t.bottom?t.bottom:n.bottom,n.left="undefined"!=typeof t.left?t.left:n.left}},duration:{get:function(){return S},set:function(t){S=t,E.reset(S)}},y:{get:function(){return a},set:function(t){a=d3.functor(t)}},color:{get:function(){return u},set:function(e){u=t.utils.getColor(e)}},labelType:{get:function(){return h},set:function(t){h=t||"key"}}}),t.utils.initOptions(e),e},t.models.pieChart=function(){"use strict";function e(i){return y.reset(),y.models(n),i.each(function(i){var u=d3.select(this);t.utils.initSVG(u);var d=t.utils.availableWidth(s,u,o),g=t.utils.availableHeight(l,u,o);if(e.update=function(){u.transition().call(e)},e.container=this,h.setter(b(i),e.update).getter(x(i)).update(),h.disabled=i.map(function(t){return!!t.disabled}),!p){var v;p={};for(v in h)h[v]instanceof Array?p[v]=h[v].slice(0):p[v]=h[v]}if(!i||!i.length)return t.utils.noData(e,u),e;u.selectAll(".nv-noData").remove();var y=u.selectAll("g.nv-wrap.nv-pieChart").data([i]),w=y.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),k=y.select("g");if(w.append("g").attr("class","nv-pieWrap"),w.append("g").attr("class","nv-legendWrap"),c){if("top"===f)r.width(d).key(n.x()),y.select(".nv-legendWrap").datum(i).call(r),a||r.height()===o.top||(o.top=r.height(),g=t.utils.availableHeight(l,u,o)),y.select(".nv-legendWrap").attr("transform","translate(0,"+-o.top+")");else if("right"===f){var M=t.models.legend().width();d/2<M&&(M=d/2),r.height(g).key(n.x()),r.width(M),d-=r.width(),y.select(".nv-legendWrap").datum(i).call(r).attr("transform","translate("+d+",0)")}}else k.select(".nv-legendWrap").selectAll("*").remove();y.attr("transform","translate("+o.left+","+o.top+")"),n.width(d).height(g);var C=k.select(".nv-pieWrap").datum([i]);d3.transition(C).call(n),r.dispatch.on("stateChange",function(t){for(var n in t)h[n]=t[n];m.stateChange(h),e.update()}),m.on("changeState",function(t){"undefined"!=typeof t.disabled&&(i.forEach(function(e,n){e.disabled=t.disabled[n]}),h.disabled=t.disabled),e.update()})}),y.renderEnd("pieChart immediate"),e}var n=t.models.pie(),r=t.models.legend(),i=t.models.tooltip(),o={top:30,right:20,bottom:20,left:20},a=null,s=null,l=null,u=!1,c=!0,f="top",d=t.utils.defaultColor(),h=t.utils.state(),p=null,g=null,v=250,m=d3.dispatch("stateChange","changeState","renderEnd");i.duration(0).headerEnabled(!1).valueFormatter(function(t,e){return n.valueFormat()(t,e)});var y=t.utils.renderWatch(m),x=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},b=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return n.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:e.x()(t.data),value:e.y()(t.data),color:t.color,percent:t.percent},u||(delete t.percent,delete t.series.percent),i.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){i.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(t){i()}),e.legend=r,e.dispatch=m,e.pie=n,e.tooltip=i,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},noData:{get:function(){return g},set:function(t){g=t}},showTooltipPercent:{get:function(){return u},set:function(t){u=t}},showLegend:{get:function(){return c},set:function(t){c=t}},legendPosition:{get:function(){return f},set:function(t){f=t}},defaultState:{get:function(){return p},set:function(t){p=t}},color:{get:function(){return d},set:function(t){d=t,r.color(d),n.color(d)}},duration:{get:function(){return v},set:function(t){v=t,y.reset(v),n.duration(v)}},margin:{get:function(){return o},set:function(t){void 0!==t.top&&(o.top=t.top,a=t.top),o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.sankey=function(){"use strict";function e(){h.forEach(function(t){t.sourceLinks=[],t.targetLinks=[]}),p.forEach(function(t){var e=t.source,n=t.target;"number"==typeof e&&(e=t.source=h[t.source]),"number"==typeof n&&(n=t.target=h[t.target]),e.sourceLinks.push(t),n.targetLinks.push(t)})}function n(){h.forEach(function(t){t.value=Math.max(d3.sum(t.sourceLinks,l),d3.sum(t.targetLinks,l))})}function r(){for(var t,e=h,n=0;e.length&&n<h.length;)t=[],e.forEach(function(e){e.x=n,e.dx=c,e.sourceLinks.forEach(function(e){t.indexOf(e.target)<0&&t.push(e.target)})}),e=t,++n;g&&i(n),o((d[0]-c)/(n-1))}function i(t){h.forEach(function(e){e.sourceLinks.length||(e.x=t-1)})}function o(t){h.forEach(function(e){e.x*=t})}function a(t){function e(){var t=d3.min(a,function(t){return(d[1]-(t.length-1)*f)/d3.sum(t,l)});a.forEach(function(e){e.forEach(function(e,n){e.y=n,e.dy=e.value*t})}),p.forEach(function(e){e.dy=e.value*t})}function n(t){function e(t){return(t.source.y+t.sy+t.dy/2)*t.value}a.forEach(function(n,r){n.forEach(function(n){if(n.targetLinks.length){var r=d3.sum(n.targetLinks,e)/d3.sum(n.targetLinks,l);n.y+=(r-x(n))*t}})})}function r(t){function e(t){return(t.target.y+t.ty+t.dy/2)*t.value}a.slice().reverse().forEach(function(n){n.forEach(function(n){if(n.sourceLinks.length){var r=d3.sum(n.sourceLinks,e)/d3.sum(n.sourceLinks,l);n.y+=(r-x(n))*t}})})}function i(){a.forEach(function(t){var e,n,r,i=0,a=t.length;for(t.sort(o),r=0;r<a;++r)e=t[r],n=i-e.y,n>0&&(e.y+=n),i=e.y+e.dy+f;if(n=i-f-d[1],n>0)for(i=e.y-=n,r=a-2;r>=0;--r)e=t[r],n=e.y+e.dy+f-i,n>0&&(e.y-=n),i=e.y})}function o(t,e){return t.y-e.y}var a=d3.nest().key(function(t){return t.x}).sortKeys(d3.ascending).entries(h).map(function(t){return t.values});e(),i(),s();for(var u=1;t>0;--t)r(u*=.99),i(),s(),n(u),i(),s()}function s(){function t(t,e){return t.source.y-e.source.y}function e(t,e){return t.target.y-e.target.y}h.forEach(function(n){n.sourceLinks.sort(e),n.targetLinks.sort(t)}),h.forEach(function(t){var e=0,n=0;t.sourceLinks.forEach(function(t){t.sy=e,e+=t.dy}),t.targetLinks.forEach(function(t){t.ty=n,n+=t.dy})})}function l(t){return t.value}var u={},c=24,f=8,d=[1,1],h=[],p=[],g=!0,v=function(t){e(),n(),r(),a(t)},m=function(){s()},y=function(){function t(t){var n=t.source.x+t.source.dx,r=t.target.x,i=d3.interpolateNumber(n,r),o=i(e),a=i(1-e),s=t.source.y+t.sy+t.dy/2,l=t.target.y+t.ty+t.dy/2,u="M"+n+","+s+"C"+o+","+s+" "+a+","+l+" "+r+","+l;return u}var e=.5;return t.curvature=function(n){return arguments.length?(e=+n,t):e},t},x=function(t){return t.y+t.dy/2};return u.options=t.utils.optionsFunc.bind(u),u._options=Object.create({},{nodeWidth:{get:function(){return c},set:function(t){c=+t}},nodePadding:{get:function(){return f},set:function(t){f=t}},nodes:{get:function(){return h},set:function(t){h=t}},links:{get:function(){return p},set:function(t){p=t}},size:{get:function(){return d},set:function(t){d=t}},sinksRight:{get:function(){return g},set:function(t){g=t}},layout:{get:function(){v(32)},set:function(t){v(t)}},relayout:{get:function(){m()},set:function(t){}},center:{get:function(){return x()},set:function(t){"function"==typeof t&&(x=t)}},link:{get:function(){return y()},set:function(t){return"function"==typeof t&&(y=t),y()}}}),t.utils.initOptions(u),u},t.models.sankeyChart=function(){"use strict";function e(t){return t.each(function(e){function n(t){d3.select(this).attr("transform","translate("+t.x+","+(t.y=Math.max(0,Math.min(o-t.dy,d3.event.y)))+")"),r.relayout(),x.attr("d",y)}var l={nodes:[{node:1,name:"Test 1"},{node:2,name:"Test 2"},{node:3,name:"Test 3"},{node:4,name:"Test 4"},{node:5,name:"Test 5"},{node:6,name:"Test 6"}],links:[{source:0,target:1,value:2295},{source:0,target:5,value:1199},{source:1,target:2,value:1119},{source:1,target:5,value:1176},{source:2,target:3,value:487},{source:2,target:5,value:632},{source:3,target:4,value:301},{source:3,target:5,value:186}]},c=!1,f=!1;if(("object"==typeof e.nodes&&e.nodes.length)>=0&&("object"==typeof e.links&&e.links.length)>=0&&(c=!0),e.nodes&&e.nodes.length>0&&e.links&&e.links.length>0&&(f=!0),!c)return console.error("NVD3 Sankey chart error:","invalid data format for",e),console.info("Valid data format is: ",l,JSON.stringify(l)),m(t,"Error loading chart, data is invalid"),!1;if(!f)return m(t,"No data available"),!1;var d=t.append("svg").attr("width",i).attr("height",o).append("g").attr("class","nvd3 nv-wrap nv-sankeyChart");r.nodeWidth(a).nodePadding(s).size([i,o]);var y=r.link();r.nodes(e.nodes).links(e.links).layout(32).center(u);var x=d.append("g").selectAll(".link").data(e.links).enter().append("path").attr("class","link").attr("d",y).style("stroke-width",function(t){return Math.max(1,t.dy)}).sort(function(t,e){return e.dy-t.dy});x.append("title").text(h);var b=d.append("g").selectAll(".node").data(e.nodes).enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).call(d3.behavior.drag().origin(function(t){return t}).on("dragstart",function(){this.parentNode.appendChild(this)}).on("drag",n));b.append("rect").attr("height",function(t){return t.dy}).attr("width",r.nodeWidth()).style("fill",p).style("stroke",g).append("title").text(v),b.append("text").attr("x",-6).attr("y",function(t){return t.dy/2}).attr("dy",".35em").attr("text-anchor","end").attr("transform",null).text(function(t){return t.name}).filter(function(t){return t.x<i/2}).attr("x",6+r.nodeWidth()).attr("text-anchor","start")}),e}var n={top:5,right:0,bottom:5,left:0},r=t.models.sankey(),i=600,o=400,a=36,s=40,l="units",u=void 0,c=d3.format(",.0f"),f=function(t){return c(t)+" "+l},d=d3.scale.category20(),h=function(t){return t.source.name+"  "+t.target.name+"\n"+f(t.value)},p=function(t){return t.color=d(t.name.replace(/ .*/,""))},g=function(t){return d3.rgb(t.color).darker(2)},v=function(t){return t.name+"\n"+f(t.value)},m=function(t,e){t.append("text").attr("x",0).attr("y",0).attr("class","nvd3-sankey-chart-error").attr("text-anchor","middle").text(e)};return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{units:{get:function(){return l},set:function(t){l=t}},width:{get:function(){return i},set:function(t){i=t}},height:{get:function(){return o},set:function(t){o=t}},format:{get:function(){return f},set:function(t){f=t}},linkTitle:{get:function(){return h},set:function(t){h=t}},nodeWidth:{get:function(){return a},set:function(t){a=t}},nodePadding:{get:function(){return s},set:function(t){s=t}},center:{get:function(){return u},set:function(t){u=t}},margin:{get:function(){return n},set:function(t){n.top=void 0!==t.top?t.top:n.top,n.right=void 0!==t.right?t.right:n.right,n.bottom=void 0!==t.bottom?t.bottom:n.bottom,n.left=void 0!==t.left?t.left:n.left}},nodeStyle:{get:function(){return{}},set:function(t){p=void 0!==t.fillColor?t.fillColor:p,g=void 0!==t.strokeColor?t.strokeColor:g,v=void 0!==t.title?t.title:v}}}),t.utils.initOptions(e),e},t.models.scatter=function(){"use strict";function e(t){var e,n;return e=t[0].series+":"+t[1],n=K[e]=K[e]||{}}function n(t){var e;e=t[0].series+":"+t[1],delete K[e]}function r(t){var n,r,i,o=e(t),a=!1;for(n=1;n<arguments.length;n+=2)r=arguments[n],i=arguments[n+1](t[0],t[1]),o[r]===i&&o.hasOwnProperty(r)||(o[r]=i,a=!0);return a}function i(e){return $.reset(),e.each(function(e){function X(){if(G=!1,!L)return!1;if(q===!0){var n=d3.merge(e.map(function(e,n){return e.values.map(function(e,r){var i=w(e,r),o=k(e,r);return[t.utils.NaNtoZero(y(i))+1e-4*Math.random(),t.utils.NaNtoZero(x(o))+1e-4*Math.random(),n,r,e]}).filter(function(t,e){return T(t[4],e)})}));if(0==n.length)return!1;n.length<3&&(n.push([y.range()[0]-20,x.range()[0]-20,null,null]),n.push([y.range()[1]+20,x.range()[1]+20,null,null]),n.push([y.range()[0]-20,x.range()[0]+20,null,null]),n.push([y.range()[1]+20,x.range()[1]-20,null,null]));var r=d3.geom.polygon([[-10,-10],[-10,h+10],[d+10,h+10],[d+10,-10]]),i=d3.geom.voronoi(n).map(function(t,e){return{data:r.clip(t),series:n[e][2],point:n[e][3]}});it.select(".nv-point-paths").selectAll("path").remove();var o=it.select(".nv-point-paths").selectAll("path").data(i),a=o.enter().append("svg:path").attr("d",function(t){return t&&t.data&&0!==t.data.length?"M"+t.data.join(",")+"Z":"M 0 0"}).attr("id",function(t,e){return"nv-path-"+e}).attr("clip-path",function(t,e){return"url(#nv-clip-"+v+"-"+e+")"});if(O&&a.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),F){it.select(".nv-point-clips").selectAll("*").remove();var s=it.select(".nv-point-clips").selectAll("clipPath").data(n);s.enter().append("svg:clipPath").attr("id",function(t,e){return"nv-clip-"+v+"-"+e}).append("svg:circle").attr("cx",function(t){return t[0]}).attr("cy",function(t){return t[1]}).attr("r",W)}var l=function(t,n,r){if(G)return 0;var i=e[n.series];if(void 0!==i){var o=i.values[n.point];o.color=p(i,n.series),o.x=w(o),o.y=k(o);var a=m.node().getBoundingClientRect(),s=window.pageYOffset||document.documentElement.scrollTop,l=window.pageXOffset||document.documentElement.scrollLeft,u={left:y(w(o,n.point))+a.left+l+f.left+10,top:x(k(o,n.point))+a.top+s+f.top+10};r({point:o,series:i,pos:u,relativePos:[y(w(o,n.point))+f.left,x(k(o,n.point))+f.top],seriesIndex:n.series,pointIndex:n.point,event:d3.event,element:t})}};o.on("click",function(t){l(this,t,V.elementClick)}).on("dblclick",function(t){l(this,t,V.elementDblClick)}).on("mouseover",function(t){l(this,t,V.elementMouseover)}).on("mouseout",function(t,e){l(this,t,V.elementMouseout)})}else it.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(t,n){if(G||!e[t.series])return 0;var r=e[t.series],i=r.values[n],o=this;V.elementClick({point:i,series:r,pos:[y(w(i,n))+f.left,x(k(i,n))+f.top],relativePos:[y(w(i,n))+f.left,x(k(i,n))+f.top],seriesIndex:t.series,pointIndex:n,event:d3.event,element:o})}).on("dblclick",function(t,n){if(G||!e[t.series])return 0;var r=e[t.series],i=r.values[n];V.elementDblClick({point:i,series:r,pos:[y(w(i,n))+f.left,x(k(i,n))+f.top],relativePos:[y(w(i,n))+f.left,x(k(i,n))+f.top],seriesIndex:t.series,pointIndex:n})}).on("mouseover",function(t,n){if(G||!e[t.series])return 0;var r=e[t.series],i=r.values[n];V.elementMouseover({point:i,series:r,pos:[y(w(i,n))+f.left,x(k(i,n))+f.top],relativePos:[y(w(i,n))+f.left,x(k(i,n))+f.top],seriesIndex:t.series,pointIndex:n,color:p(t,n)})}).on("mouseout",function(t,n){if(G||!e[t.series])return 0;var r=e[t.series],i=r.values[n];V.elementMouseout({point:i,series:r,pos:[y(w(i,n))+f.left,x(k(i,n))+f.top],relativePos:[y(w(i,n))+f.left,x(k(i,n))+f.top],seriesIndex:t.series,pointIndex:n,color:p(t,n)})})}m=d3.select(this);var K=t.utils.availableWidth(d,m,f),Q=t.utils.availableHeight(h,m,f);t.utils.initSVG(m),e.forEach(function(t,e){t.values.forEach(function(t){t.series=e})});var J=i.yScale().name===d3.scale.log().name,tt=D&&z&&R?[]:d3.merge(e.map(function(t){return t.values.map(function(t,e){return{x:w(t,e),y:k(t,e),size:M(t,e)}})}));if(y.domain(D||d3.extent(tt.map(function(t){return t.x}).concat(S))),E&&e[0]?y.range(H||[(K*N+K)/(2*e[0].values.length),K-K*(1+N)/(2*e[0].values.length)]):y.range(H||[0,K]),J){var et=d3.min(tt.map(function(t){if(0!==t.y)return t.y}));x.clamp(!0).domain(z||d3.extent(tt.map(function(t){return 0!==t.y?t.y:.1*et}).concat(A))).range(I||[Q,0])}else x.domain(z||d3.extent(tt.map(function(t){return t.y}).concat(A))).range(I||[Q,0]);b.domain(R||d3.extent(tt.map(function(t){return t.size}).concat(_))).range(B||Z),j=y.domain()[0]===y.domain()[1]||x.domain()[0]===x.domain()[1],y.domain()[0]===y.domain()[1]&&(y.domain()[0]?y.domain([y.domain()[0]-.01*y.domain()[0],y.domain()[1]+.01*y.domain()[1]]):y.domain([-1,1])),x.domain()[0]===x.domain()[1]&&(x.domain()[0]?x.domain([x.domain()[0]-.01*x.domain()[0],x.domain()[1]+.01*x.domain()[1]]):x.domain([-1,1])),isNaN(y.domain()[0])&&y.domain([-1,1]),isNaN(x.domain()[0])&&x.domain([-1,1]),o=o||y,a=a||x,s=s||b;var nt=y(1)!==o(1)||x(1)!==a(1)||b(1)!==s(1);l=l||d,u=u||h;var rt=l!==d||u!==h,it=m.selectAll("g.nv-wrap.nv-scatter").data([e]),ot=it.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+v),at=ot.append("defs"),st=ot.append("g"),lt=it.select("g");it.classed("nv-single-point",j),st.append("g").attr("class","nv-groups"),st.append("g").attr("class","nv-point-paths"),ot.append("g").attr("class","nv-point-clips"),it.attr("transform","translate("+f.left+","+f.top+")"),at.append("clipPath").attr("id","nv-edge-clip-"+v).append("rect").attr("transform","translate( -10, -10)"),it.select("#nv-edge-clip-"+v+" rect").attr("width",K+20).attr("height",Q>0?Q+20:0),lt.attr("clip-path",P?"url(#nv-edge-clip-"+v+")":""),G=!0;var ut=it.select(".nv-groups").selectAll(".nv-group").data(function(t){return t},function(t){return t.key});ut.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),ut.exit().remove(),ut.attr("class",function(t,e){return(t.classed||"")+" nv-group nv-series-"+e}).classed("nv-noninteractive",!L).classed("hover",function(t){return t.hover}),ut.watchTransition($,"scatter: groups").style("fill",function(t,e){return p(t,e)}).style("stroke",function(t,e){return t.pointBorderColor||g||p(t,e)}).style("stroke-opacity",1).style("fill-opacity",.5);var ct=ut.selectAll("path.nv-point").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return T(t[0],e)})});if(ct.enter().append("path").attr("class",function(t){return"nv-point nv-point-"+t[1]}).style("fill",function(t){return t.color}).style("stroke",function(t){return t.color}).attr("transform",function(e){return"translate("+t.utils.NaNtoZero(o(w(e[0],e[1])))+","+t.utils.NaNtoZero(a(k(e[0],e[1])))+")"}).attr("d",t.utils.symbol().type(function(t){return C(t[0])}).size(function(t){return b(M(t[0],t[1]))})),ct.exit().each(n).remove(),ut.exit().selectAll("path.nv-point").watchTransition($,"scatter exit").attr("transform",function(e){return"translate("+t.utils.NaNtoZero(y(w(e[0],e[1])))+","+t.utils.NaNtoZero(x(k(e[0],e[1])))+")"}).remove(),ct.filter(function(t){return nt||rt||r(t,"x",w,"y",k)}).watchTransition($,"scatter points").attr("transform",function(e){return"translate("+t.utils.NaNtoZero(y(w(e[0],e[1])))+","+t.utils.NaNtoZero(x(k(e[0],e[1])))+")"}),ct.filter(function(t){return nt||rt||r(t,"shape",C,"size",M)}).watchTransition($,"scatter points").attr("d",t.utils.symbol().type(function(t){return C(t[0])}).size(function(t){return b(M(t[0],t[1]))})),Y){var ft=ut.selectAll(".nv-label").data(function(t){return t.values.map(function(t,e){return[t,e]}).filter(function(t,e){return T(t[0],e)})});ft.enter().append("text").style("fill",function(t,e){return t.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(e){var n=t.utils.NaNtoZero(o(w(e[0],e[1])))+Math.sqrt(b(M(e[0],e[1]))/Math.PI)+2;return"translate("+n+","+t.utils.NaNtoZero(a(k(e[0],e[1])))+")"}).text(function(t,e){return t[0].label}),ft.exit().remove(),ut.exit().selectAll("path.nv-label").watchTransition($,"scatter exit").attr("transform",function(e){var n=t.utils.NaNtoZero(y(w(e[0],e[1])))+Math.sqrt(b(M(e[0],e[1]))/Math.PI)+2;return"translate("+n+","+t.utils.NaNtoZero(x(k(e[0],e[1])))+")"}).remove(),ft.each(function(t){d3.select(this).classed("nv-label",!0).classed("nv-label-"+t[1],!1).classed("hover",!1)}),ft.watchTransition($,"scatter labels").attr("transform",function(e){var n=t.utils.NaNtoZero(y(w(e[0],e[1])))+Math.sqrt(b(M(e[0],e[1]))/Math.PI)+2;return"translate("+n+","+t.utils.NaNtoZero(x(k(e[0],e[1])))+")"})}U?(clearTimeout(c),c=setTimeout(X,U)):X(),o=y.copy(),a=x.copy(),s=b.copy(),l=d,u=h}),$.renderEnd("scatter immediate"),i}var o,a,s,l,u,c,f={top:0,right:0,bottom:0,left:0},d=null,h=null,p=t.utils.defaultColor(),g=null,v=Math.floor(1e5*Math.random()),m=null,y=d3.scale.linear(),x=d3.scale.linear(),b=d3.scale.linear(),w=function(t){return t.x},k=function(t){return t.y},M=function(t){return t.size||1},C=function(t){return t.shape||"circle"},S=[],A=[],_=[],L=!0,T=function(t){return!t.notActive},E=!1,N=.1,P=!1,F=!0,O=!1,W=function(){return 25},D=null,z=null,H=null,I=null,R=null,B=null,j=!1,V=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),q=!0,X=250,U=300,Y=!1,G=!1,$=t.utils.renderWatch(V,X),Z=[16,256],K={};return i.dispatch=V,i.options=t.utils.optionsFunc.bind(i),i._calls=new function(){this.clearHighlights=function(){return t.dom.write(function(){m.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(e,n,r){t.dom.write(function(){m.select(".nv-groups").selectAll(".nv-series-"+e).selectAll(".nv-point-"+n).classed("hover",r)})}},V.on("elementMouseover.point",function(t){L&&i._calls.highlightPoint(t.seriesIndex,t.pointIndex,!0)}),V.on("elementMouseout.point",function(t){L&&i._calls.highlightPoint(t.seriesIndex,t.pointIndex,!1)}),i._options=Object.create({},{width:{get:function(){return d},set:function(t){d=t}},height:{get:function(){return h},set:function(t){h=t}},xScale:{get:function(){return y},set:function(t){y=t}},yScale:{get:function(){return x},set:function(t){x=t}},pointScale:{get:function(){return b},set:function(t){b=t}},xDomain:{get:function(){return D},set:function(t){D=t}},yDomain:{get:function(){return z},set:function(t){z=t}},pointDomain:{get:function(){return R},set:function(t){R=t}},xRange:{get:function(){return H},set:function(t){H=t}},yRange:{get:function(){return I},set:function(t){I=t}},pointRange:{get:function(){return B},set:function(t){B=t}},forceX:{get:function(){return S},set:function(t){S=t}},forceY:{get:function(){return A},set:function(t){A=t}},forcePoint:{get:function(){return _},set:function(t){_=t}},interactive:{get:function(){return L},set:function(t){L=t}},pointActive:{get:function(){return T},set:function(t){T=t}},padDataOuter:{get:function(){return N},set:function(t){N=t}},padData:{get:function(){return E},set:function(t){E=t}},clipEdge:{get:function(){return P},set:function(t){P=t}},clipVoronoi:{get:function(){return F},set:function(t){F=t}},clipRadius:{get:function(){return W},set:function(t){W=t}},showVoronoi:{get:function(){return O},set:function(t){O=t}},id:{get:function(){return v},set:function(t){v=t}},interactiveUpdateDelay:{get:function(){return U},set:function(t){U=t}},showLabels:{get:function(){return Y},set:function(t){Y=t}},pointBorderColor:{get:function(){return g},set:function(t){g=t}},x:{get:function(){return w},set:function(t){w=d3.functor(t)}},y:{get:function(){return k},set:function(t){k=d3.functor(t)}},pointSize:{get:function(){return M},set:function(t){M=d3.functor(t)}},pointShape:{get:function(){return C},set:function(t){C=d3.functor(t)}},margin:{get:function(){return f},set:function(t){f.top=void 0!==t.top?t.top:f.top,f.right=void 0!==t.right?t.right:f.right,f.bottom=void 0!==t.bottom?t.bottom:f.bottom,f.left=void 0!==t.left?t.left:f.left}},duration:{get:function(){return X},set:function(t){X=t,$.reset(X)}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e)}},useVoronoi:{get:function(){return q},set:function(t){q=t,q===!1&&(F=!1)}}}),t.utils.initOptions(i),i},t.models.scatterChart=function(){"use strict";function e(A){return N.reset(),N.models(n),b&&N.models(r),w&&N.models(i),m&&N.models(a),y&&N.models(s),A.each(function(A){h=d3.select(this),t.utils.initSVG(h);var O=t.utils.availableWidth(f,h,u),W=t.utils.availableHeight(d,h,u);if(e.update=function(){0===_?h.call(e):h.transition().duration(_).call(e)},e.container=this,M.setter(F(A),e.update).getter(P(A)).update(),M.disabled=A.map(function(t){return!!t.disabled}),!C){var D;C={};for(D in M)M[D]instanceof Array?C[D]=M[D].slice(0):C[D]=M[D]}if(!(A&&A.length&&A.filter(function(t){return t.values.length}).length))return t.utils.noData(e,h),N.renderEnd("scatter immediate"),e;h.selectAll(".nv-noData").remove(),g=n.xScale(),v=n.yScale();var z=h.selectAll("g.nv-wrap.nv-scatterChart").data([A]),H=z.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+n.id()),I=H.append("g"),R=z.select("g");if(I.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-scatterWrap"),I.append("g").attr("class","nv-regressionLinesWrap"),I.append("g").attr("class","nv-distWrap"),I.append("g").attr("class","nv-legendWrap"),k&&R.select(".nv-y.nv-axis").attr("transform","translate("+O+",0)"),x){var B=O;o.width(B),z.select(".nv-legendWrap").datum(A).call(o),c||o.height()===u.top||(u.top=o.height(),W=t.utils.availableHeight(d,h,u)),z.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")}else R.select(".nv-legendWrap").selectAll("*").remove();z.attr("transform","translate("+u.left+","+u.top+")"),n.width(O).height(W).color(A.map(function(t,e){return t.color=t.color||p(t,e),t.color}).filter(function(t,e){return!A[e].disabled})).showLabels(L),z.select(".nv-scatterWrap").datum(A.filter(function(t){return!t.disabled})).call(n),z.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+n.id()+")");var j=z.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(t){return t});j.enter().append("g").attr("class","nv-regLines");var V=j.selectAll(".nv-regLine").data(function(t){return[t]});V.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),V.filter(function(t){return t.intercept&&t.slope}).watchTransition(N,"scatterPlusLineChart: regline").attr("x1",g.range()[0]).attr("x2",g.range()[1]).attr("y1",function(t,e){return v(g.domain()[0]*t.slope+t.intercept)}).attr("y2",function(t,e){return v(g.domain()[1]*t.slope+t.intercept)}).style("stroke",function(t,e,n){return p(t,n)}).style("stroke-opacity",function(t,e){return t.disabled||"undefined"==typeof t.slope||"undefined"==typeof t.intercept?0:1}),b&&(r.scale(g)._ticks(t.utils.calcTicksX(O/100,A)).tickSize(-W,0),R.select(".nv-x.nv-axis").attr("transform","translate(0,"+v.range()[0]+")").call(r)),w&&(i.scale(v)._ticks(t.utils.calcTicksY(W/36,A)).tickSize(-O,0),R.select(".nv-y.nv-axis").call(i)),m&&(a.getData(n.x()).scale(g).width(O).color(A.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!A[e].disabled})),I.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),R.select(".nv-distributionX").attr("transform","translate(0,"+v.range()[0]+")").datum(A.filter(function(t){return!t.disabled})).call(a)),y&&(s.getData(n.y()).scale(v).width(W).color(A.map(function(t,e){return t.color||p(t,e)}).filter(function(t,e){return!A[e].disabled})),I.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),R.select(".nv-distributionY").attr("transform","translate("+(k?O:-s.size())+",0)").datum(A.filter(function(t){return!t.disabled})).call(s)),o.dispatch.on("stateChange",function(t){for(var n in t)M[n]=t[n];S.stateChange(M),e.update()}),S.on("changeState",function(t){"undefined"!=typeof t.disabled&&(A.forEach(function(e,n){e.disabled=t.disabled[n]}),M.disabled=t.disabled),e.update()}),n.dispatch.on("elementMouseout.tooltip",function(t){l.hidden(!0),h.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",0),h.select(".nv-chart-"+n.id()+" .nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",s.size())}),n.dispatch.on("elementMouseover.tooltip",function(t){h.select(".nv-series-"+t.seriesIndex+" .nv-distx-"+t.pointIndex).attr("y1",t.relativePos[1]-W),h.select(".nv-series-"+t.seriesIndex+" .nv-disty-"+t.pointIndex).attr("x2",t.relativePos[0]+a.size()),l.data(t).hidden(!1)}),T=g.copy(),E=v.copy()}),N.renderEnd("scatter with line immediate"),e}var n=t.models.scatter(),r=t.models.axis(),i=t.models.axis(),o=t.models.legend(),a=t.models.distribution(),s=t.models.distribution(),l=t.models.tooltip(),u={top:30,right:20,bottom:50,left:75},c=null,f=null,d=null,h=null,p=t.utils.defaultColor(),g=n.xScale(),v=n.yScale(),m=!1,y=!1,x=!0,b=!0,w=!0,k=!1,M=t.utils.state(),C=null,S=d3.dispatch("stateChange","changeState","renderEnd"),A=null,_=250,L=!1;n.xScale(g).yScale(v),r.orient("bottom").tickPadding(10),i.orient(k?"right":"left").tickPadding(10),a.axis("x"),s.axis("y"),l.headerFormatter(function(t,e){return r.tickFormat()(t,e)}).valueFormatter(function(t,e){return i.tickFormat()(t,e)});var T,E,N=t.utils.renderWatch(S,_),P=function(t){return function(){return{active:t.map(function(t){return!t.disabled})}}},F=function(t){return function(e){void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}};return e.dispatch=S,e.scatter=n,e.legend=o,e.xAxis=r,e.yAxis=i,e.distX=a,e.distY=s,e.tooltip=l,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return f},set:function(t){f=t}},height:{get:function(){return d},set:function(t){d=t}},container:{get:function(){return h},set:function(t){h=t}},showDistX:{get:function(){return m},set:function(t){m=t}},showDistY:{get:function(){return y},set:function(t){y=t}},showLegend:{get:function(){return x},set:function(t){x=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return w},set:function(t){w=t}},defaultState:{get:function(){return C},set:function(t){C=t}},noData:{get:function(){return A},set:function(t){A=t}},duration:{get:function(){return _},set:function(t){_=t}},showLabels:{get:function(){return L},set:function(t){L=t}},margin:{get:function(){return u},set:function(t){void 0!==t.top&&(u.top=t.top,c=t.top),u.right=void 0!==t.right?t.right:u.right,u.bottom=void 0!==t.bottom?t.bottom:u.bottom,u.left=void 0!==t.left?t.left:u.left}},rightAlignYAxis:{get:function(){return k},set:function(t){k=t,i.orient(t?"right":"left")}},color:{get:function(){return p},set:function(e){p=t.utils.getColor(e),o.color(p),a.color(p),s.color(p)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.models.sparkline=function(){"use strict";function e(c){return x.reset(),c.each(function(e){var c=s-a.left-a.right,y=l-a.top-a.bottom;u=d3.select(this),t.utils.initSVG(u),f.domain(n||d3.extent(e,h)).range(i||[0,c]),d.domain(r||d3.extent(e,p)).range(o||[y,0]);var x=u.selectAll("g.nv-wrap.nv-sparkline").data([e]),b=x.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline");b.append("g"),x.select("g");x.attr("transform","translate("+a.left+","+a.top+")");var w=x.selectAll("path").data(function(t){return[t]});w.enter().append("path"),w.exit().remove(),w.style("stroke",function(t,e){return t.color||g(t,e)}).attr("d",d3.svg.line().x(function(t,e){return f(h(t,e));
}).y(function(t,e){return d(p(t,e))}));var k=x.selectAll("circle.nv-point").data(function(t){function e(e){if(e!=-1){var n=t[e];return n.pointIndex=e,n}return null}var n=t.map(function(t,e){return p(t,e)}),r=e(n.lastIndexOf(d.domain()[1])),i=e(n.indexOf(d.domain()[0])),o=e(n.length-1);return[v?i:null,v?r:null,m?o:null].filter(function(t){return null!=t})});k.enter().append("circle"),k.exit().remove(),k.attr("cx",function(t,e){return f(h(t,t.pointIndex))}).attr("cy",function(t,e){return d(p(t,t.pointIndex))}).attr("r",2).attr("class",function(t,e){return h(t,t.pointIndex)==f.domain()[1]?"nv-point nv-currentValue":p(t,t.pointIndex)==d.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),x.renderEnd("sparkline immediate"),e}var n,r,i,o,a={top:2,right:0,bottom:2,left:0},s=400,l=32,u=null,c=!0,f=d3.scale.linear(),d=d3.scale.linear(),h=function(t){return t.x},p=function(t){return t.y},g=t.utils.getColor(["#000"]),v=!0,m=!0,y=d3.dispatch("renderEnd"),x=t.utils.renderWatch(y);return e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return s},set:function(t){s=t}},height:{get:function(){return l},set:function(t){l=t}},xDomain:{get:function(){return n},set:function(t){n=t}},yDomain:{get:function(){return r},set:function(t){r=t}},xRange:{get:function(){return i},set:function(t){i=t}},yRange:{get:function(){return o},set:function(t){o=t}},xScale:{get:function(){return f},set:function(t){f=t}},yScale:{get:function(){return d},set:function(t){d=t}},animate:{get:function(){return c},set:function(t){c=t}},showMinMaxPoints:{get:function(){return v},set:function(t){v=t}},showCurrentPoint:{get:function(){return m},set:function(t){m=t}},x:{get:function(){return h},set:function(t){h=d3.functor(t)}},y:{get:function(){return p},set:function(t){p=d3.functor(t)}},margin:{get:function(){return a},set:function(t){a.top=void 0!==t.top?t.top:a.top,a.right=void 0!==t.right?t.right:a.right,a.bottom=void 0!==t.bottom?t.bottom:a.bottom,a.left=void 0!==t.left?t.left:a.left}},color:{get:function(){return g},set:function(e){g=t.utils.getColor(e)}}}),e.dispatch=y,t.utils.initOptions(e),e},t.models.sparklinePlus=function(){"use strict";function e(g){return m.reset(),m.models(i),g.each(function(g){function v(){if(!u){var t=S.selectAll(".nv-hoverValue").data(l),e=t.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);t.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),t.attr("transform",function(t){return"translate("+n(i.x()(g[t],t))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(e.append("line").attr("x1",0).attr("y1",-o.top).attr("x2",0).attr("y2",b),e.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-o.top).attr("text-anchor","end").attr("dy",".9em"),S.select(".nv-hoverValue .nv-xValue").text(c(i.x()(g[l[0]],l[0]))),e.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-o.top).attr("text-anchor","start").attr("dy",".9em"),S.select(".nv-hoverValue .nv-yValue").text(f(i.y()(g[l[0]],l[0]))))}}function m(){function t(t,e){for(var n=Math.abs(i.x()(t[0],0)-e),r=0,o=0;o<t.length;o++)Math.abs(i.x()(t[o],o)-e)<n&&(n=Math.abs(i.x()(t[o],o)-e),r=o);return r}if(!u){var e=d3.mouse(this)[0]-o.left;l=[t(g,Math.round(n.invert(e)))],v()}}var y=d3.select(this);t.utils.initSVG(y);var x=t.utils.availableWidth(a,y,o),b=t.utils.availableHeight(s,y,o);if(e.update=function(){y.call(e)},e.container=this,!g||!g.length)return t.utils.noData(e,y),e;y.selectAll(".nv-noData").remove();var w=i.y()(g[g.length-1],g.length-1);n=i.xScale(),r=i.yScale();var k=y.selectAll("g.nv-wrap.nv-sparklineplus").data([g]),M=k.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),C=M.append("g"),S=k.select("g");C.append("g").attr("class","nv-sparklineWrap"),C.append("g").attr("class","nv-valueWrap"),C.append("g").attr("class","nv-hoverArea"),k.attr("transform","translate("+o.left+","+o.top+")");var A=S.select(".nv-sparklineWrap");if(i.width(x).height(b),A.call(i),d){var _=S.select(".nv-valueWrap"),L=_.selectAll(".nv-currentValue").data([w]);L.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),L.attr("x",x+(p?o.right:0)).attr("y",h?function(t){return r(t)}:0).style("fill",i.color()(g[g.length-1],g.length-1)).text(f(w))}C.select(".nv-hoverArea").append("rect").on("mousemove",m).on("click",function(){u=!u}).on("mouseout",function(){l=[],v()}),S.select(".nv-hoverArea rect").attr("transform",function(t){return"translate("+-o.left+","+-o.top+")"}).attr("width",x+o.left+o.right).attr("height",b+o.top)}),m.renderEnd("sparklinePlus immediate"),e}var n,r,i=t.models.sparkline(),o={top:15,right:100,bottom:10,left:50},a=null,s=null,l=[],u=!1,c=d3.format(",r"),f=d3.format(",.2f"),d=!0,h=!0,p=!1,g=null,v=d3.dispatch("renderEnd"),m=t.utils.renderWatch(v);return e.dispatch=v,e.sparkline=i,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return a},set:function(t){a=t}},height:{get:function(){return s},set:function(t){s=t}},xTickFormat:{get:function(){return c},set:function(t){c=t}},yTickFormat:{get:function(){return f},set:function(t){f=t}},showLastValue:{get:function(){return d},set:function(t){d=t}},alignValue:{get:function(){return h},set:function(t){h=t}},rightAlignValue:{get:function(){return p},set:function(t){p=t}},noData:{get:function(){return g},set:function(t){g=t}},margin:{get:function(){return o},set:function(t){o.top=void 0!==t.top?t.top:o.top,o.right=void 0!==t.right?t.right:o.right,o.bottom=void 0!==t.bottom?t.bottom:o.bottom,o.left=void 0!==t.left?t.left:o.left}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.stackedArea=function(){"use strict";function e(h){return w.reset(),w.models(y),h.each(function(h){var x=o-i.left-i.right,k=a-i.top-i.bottom;u=d3.select(this),t.utils.initSVG(u),n=y.xScale(),r=y.yScale();var M=h;h.forEach(function(t,e){t.seriesIndex=e,t.values=t.values.map(function(t,n){return t.index=n,t.seriesIndex=e,t})});var C=h.filter(function(t){return!t.disabled});h=d3.layout.stack().order(g).offset(p).values(function(t){return t.values}).x(c).y(f).out(function(t,e,n){t.display={y:n,y0:e}})(C);var S=u.selectAll("g.nv-wrap.nv-stackedarea").data([h]),A=S.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),_=A.append("defs"),L=A.append("g"),T=S.select("g");L.append("g").attr("class","nv-areaWrap"),L.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+i.left+","+i.top+")"),0==y.forceY().length&&y.forceY().push(0),y.width(x).height(k).x(c).y(function(t){if(void 0!==t.display)return t.display.y+t.display.y0}).color(h.map(function(t,e){return t.color=t.color||s(t,t.seriesIndex),t.color}));var E=T.select(".nv-scatterWrap").datum(h);E.call(y),_.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),S.select("#nv-edge-clip-"+l+" rect").attr("width",x).attr("height",k),T.attr("clip-path",m?"url(#nv-edge-clip-"+l+")":"");var N=d3.svg.area().defined(d).x(function(t,e){return n(c(t,e))}).y0(function(t){return r(t.display.y0)}).y1(function(t){return r(t.display.y+t.display.y0)}).interpolate(v),P=d3.svg.area().defined(d).x(function(t,e){return n(c(t,e))}).y0(function(t){return r(t.display.y0)}).y1(function(t){return r(t.display.y0)}),F=T.select(".nv-areaWrap").selectAll("path.nv-area").data(function(t){return t});F.enter().append("path").attr("class",function(t,e){return"nv-area nv-area-"+e}).attr("d",function(t,e){return P(t.values,t.seriesIndex)}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0),b.areaMouseover({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1),b.areaMouseout({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}).on("click",function(t,e){d3.select(this).classed("hover",!1),b.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex})}),F.exit().remove(),F.style("fill",function(t,e){return t.color||s(t,t.seriesIndex)}).style("stroke",function(t,e){return t.color||s(t,t.seriesIndex)}),F.watchTransition(w,"stackedArea path").attr("d",function(t,e){return N(t.values,e)}),y.dispatch.on("elementMouseover.area",function(t){T.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!0)}),y.dispatch.on("elementMouseout.area",function(t){T.select(".nv-chart-"+l+" .nv-area-"+t.seriesIndex).classed("hover",!1)}),e.d3_stackedOffset_stackPercent=function(t){var e,n,r,i=t.length,o=t[0].length,a=[];for(n=0;n<o;++n){for(e=0,r=0;e<M.length;e++)r+=f(M[e].values[n]);if(r)for(e=0;e<i;e++)t[e][n][1]/=r;else for(e=0;e<i;e++)t[e][n][1]=0}for(n=0;n<o;++n)a[n]=0;return a}}),w.renderEnd("stackedArea immediate"),e}var n,r,i={top:0,right:0,bottom:0,left:0},o=960,a=500,s=t.utils.defaultColor(),l=Math.floor(1e5*Math.random()),u=null,c=function(t){return t.x},f=function(t){return t.y},d=function(t,e){return!isNaN(f(t,e))&&null!==f(t,e)},h="stack",p="zero",g="default",v="linear",m=!1,y=t.models.scatter(),x=250,b=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");y.pointSize(2.2).pointDomain([2.2,2.2]);var w=t.utils.renderWatch(b,x);return e.dispatch=b,e.scatter=y,y.dispatch.on("elementClick",function(){b.elementClick.apply(this,arguments)}),y.dispatch.on("elementMouseover",function(){b.elementMouseover.apply(this,arguments)}),y.dispatch.on("elementMouseout",function(){b.elementMouseout.apply(this,arguments)}),e.interpolate=function(t){return arguments.length?(v=t,e):v},e.duration=function(t){return arguments.length?(x=t,w.reset(x),y.duration(x),e):x},e.dispatch=b,e.scatter=y,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(t){o=t}},height:{get:function(){return a},set:function(t){a=t}},defined:{get:function(){return d},set:function(t){d=t}},clipEdge:{get:function(){return m},set:function(t){m=t}},offset:{get:function(){return p},set:function(t){p=t}},order:{get:function(){return g},set:function(t){g=t}},interpolate:{get:function(){return v},set:function(t){v=t}},x:{get:function(){return c},set:function(t){c=d3.functor(t)}},y:{get:function(){return f},set:function(t){f=d3.functor(t)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left}},color:{get:function(){return s},set:function(e){s=t.utils.getColor(e)}},style:{get:function(){return h},set:function(t){switch(h=t){case"stack":e.offset("zero"),e.order("default");break;case"stream":e.offset("wiggle"),e.order("inside-out");break;case"stream-center":e.offset("silhouette"),e.order("inside-out");break;case"expand":e.offset("expand"),e.order("default");break;case"stack_percent":e.offset(e.d3_stackedOffset_stackPercent),e.order("default")}}},duration:{get:function(){return x},set:function(t){x=t,w.reset(x),y.duration(x)}}}),t.utils.inheritOptions(e,y),t.utils.initOptions(e),e},t.models.stackedAreaChart=function(){"use strict";function e(c){return z.reset(),z.models(i),b&&z.models(o),w&&z.models(a),c.each(function(c){function T(){b&&$.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+X+")").transition().duration(O).call(o)}function z(){if(w){if("expand"===i.style()||"stack_percent"===i.style()){var t=a.tickFormat();W&&t===B||(W=t),a.tickFormat(B)}else W&&(a.tickFormat(W),W=null);$.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(a)}}function j(t){var e=$.select(".nv-focus .nv-stackedWrap").datum(c.filter(function(t){return!t.disabled}).map(function(e,n){return{key:e.key,area:e.area,classed:e.classed,values:e.values.filter(function(e,n){return i.x()(e,n)>=t[0]&&i.x()(e,n)<=t[1]}),disableTooltip:e.disableTooltip}}));e.transition().duration(O).call(i),T(),z()}var V=d3.select(this);t.utils.initSVG(V);var q=t.utils.availableWidth(p,V,d),X=t.utils.availableHeight(g,V,d)-(M?f.height():0);if(e.update=function(){V.transition().duration(O).call(e)},e.container=this,_.setter(R(c),e.update).getter(I(c)).update(),_.disabled=c.map(function(t){return!!t.disabled}),!L){var U;L={};for(U in _)_[U]instanceof Array?L[U]=_[U].slice(0):L[U]=_[U]}if(!(c&&c.length&&c.filter(function(t){return t.values.length}).length))return t.utils.noData(e,V),e;V.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var Y=V.selectAll("g.nv-wrap.nv-stackedAreaChart").data([c]),G=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),$=Y.select("g");G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap");var Z=G.append("g").attr("class","nv-focus");Z.append("g").attr("class","nv-background").append("rect"),Z.append("g").attr("class","nv-x nv-axis"),Z.append("g").attr("class","nv-y nv-axis"),Z.append("g").attr("class","nv-stackedWrap"),Z.append("g").attr("class","nv-interactive");G.append("g").attr("class","nv-focusWrap");if(y){var K=m&&"top"===x?q-N:q;if(s.width(K),$.select(".nv-legendWrap").datum(c).call(s),"bottom"===x){var Q=(b?12:0)+10;d.bottom=Math.max(s.height()+Q,d.bottom),X=t.utils.availableHeight(g,V,d)-(M?f.height():0);var J=X+Q;$.select(".nv-legendWrap").attr("transform","translate(0,"+J+")")}else"top"===x&&(h||d.top==s.height()||(d.top=s.height(),X=t.utils.availableHeight(g,V,d)-(M?f.height():0)),$.select(".nv-legendWrap").attr("transform","translate("+(q-K)+","+-d.top+")"))}else $.select(".nv-legendWrap").selectAll("*").remove();if(m){var tt=[{key:F.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=i.style(),style:"stack"},{key:F.stream||"Stream",metaKey:"Stream",disabled:"stream"!=i.style(),style:"stream"},{key:F.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=i.style(),style:"expand"},{key:F.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=i.style(),style:"stack_percent"}];N=P.length/3*260,tt=tt.filter(function(t){return P.indexOf(t.metaKey)!==-1}),l.width(N).color(["#444","#444","#444"]),$.select(".nv-controlsWrap").datum(tt).call(l);var et=Math.max(l.height(),y&&"top"===x?s.height():0);d.top!=et&&(d.top=et,X=t.utils.availableHeight(g,V,d)-(M?f.height():0)),$.select(".nv-controlsWrap").attr("transform","translate(0,"+-d.top+")")}else $.select(".nv-controlsWrap").selectAll("*").remove();Y.attr("transform","translate("+d.left+","+d.top+")"),k&&$.select(".nv-y.nv-axis").attr("transform","translate("+q+",0)"),C&&(u.width(q).height(X).margin({left:d.left,top:d.top}).svgContainer(V).xScale(n),Y.select(".nv-interactive").call(u)),$.select(".nv-focus .nv-background rect").attr("width",q).attr("height",X),i.width(q).height(X).color(c.map(function(t,e){return t.color||v(t,e)}).filter(function(t,e){return!c[e].disabled}));var nt=$.select(".nv-focus .nv-stackedWrap").datum(c.filter(function(t){return!t.disabled}));if(b&&o.scale(n)._ticks(t.utils.calcTicksX(q/100,c)).tickSize(-X,0),w){var rt;rt="wiggle"===i.offset()?0:t.utils.calcTicksY(X/36,c),a.scale(r)._ticks(rt).tickSize(-q,0)}if(M){f.width(q),$.select(".nv-focusWrap").attr("transform","translate(0,"+(X+d.bottom+f.margin().top)+")").datum(c.filter(function(t){return!t.disabled})).call(f);var it=f.brush.empty()?f.xDomain():f.brush.extent();null!==it&&j(it)}else nt.transition().call(i),T(),z();i.dispatch.on("areaClick.toggle",function(t){1===c.filter(function(t){return!t.disabled}).length?c.forEach(function(t){t.disabled=!1}):c.forEach(function(e,n){e.disabled=n!=t.seriesIndex}),_.disabled=c.map(function(t){return!!t.disabled}),E.stateChange(_),e.update()}),s.dispatch.on("stateChange",function(t){for(var n in t)_[n]=t[n];E.stateChange(_),e.update()}),l.dispatch.on("legendClick",function(t,n){t.disabled&&(tt=tt.map(function(t){return t.disabled=!0,t}),t.disabled=!1,i.style(t.style),_.style=i.style(),E.stateChange(_),e.update())}),u.dispatch.on("elementMousemove",function(n){i.clearHighlights();var r,o,a,s=[],l=0,f=!0;if(c.filter(function(t,e){return t.seriesIndex=e,!t.disabled}).forEach(function(u,c){o=t.interactiveBisect(u.values,n.pointXValue,e.x());var d=u.values[o],h=e.y()(d,o);if(null!=h&&i.highlightPoint(c,o,!0),"undefined"!=typeof d){"undefined"==typeof r&&(r=d),"undefined"==typeof a&&(a=e.xScale()(e.x()(d,o)));var p="expand"==i.style()?d.display.y:e.y()(d,o);s.push({key:u.key,value:p,color:v(u,u.seriesIndex),point:d}),S&&"expand"!=i.style()&&null!=p&&(l+=p,f=!1)}}),s.reverse(),s.length>2){var d=e.yScale().invert(n.mouseY),h=null;s.forEach(function(t,e){d=Math.abs(d);var n=Math.abs(t.point.display.y0),r=Math.abs(t.point.display.y);if(d>=n&&d<=r+n)return void(h=e)}),null!=h&&(s[h].highlight=!0)}S&&"expand"!=i.style()&&s.length>=2&&!f&&s.push({key:A,value:l,total:!0});var p=e.x()(r,o),g=u.tooltip.valueFormatter();"expand"===i.style()||"stack_percent"===i.style()?(D||(D=g),g=d3.format(".1%")):D&&(g=D,D=null),u.tooltip.valueFormatter(g).data({value:p,series:s})(),u.renderGuideLine(a)}),u.dispatch.on("elementMouseout",function(t){i.clearHighlights()}),f.dispatch.on("onBrush",function(t){j(t)}),E.on("changeState",function(t){"undefined"!=typeof t.disabled&&c.length===t.disabled.length&&(c.forEach(function(e,n){e.disabled=t.disabled[n]}),_.disabled=t.disabled),"undefined"!=typeof t.style&&(i.style(t.style),H=t.style),e.update()})}),z.renderEnd("stacked Area chart immediate"),e}var n,r,i=t.models.stackedArea(),o=t.models.axis(),a=t.models.axis(),s=t.models.legend(),l=t.models.legend(),u=t.interactiveGuideline(),c=t.models.tooltip(),f=t.models.focus(t.models.stackedArea()),d={top:10,right:25,bottom:50,left:60},h=null,p=null,g=null,v=t.utils.defaultColor(),m=!0,y=!0,x="top",b=!0,w=!0,k=!1,M=!1,C=!1,S=!0,A="TOTAL",_=t.utils.state(),L=null,T=null,E=d3.dispatch("stateChange","changeState","renderEnd"),N=250,P=["Stacked","Stream","Expanded"],F={},O=250;_.style=i.style(),o.orient("bottom").tickPadding(7),a.orient(k?"right":"left"),c.headerFormatter(function(t,e){return o.tickFormat()(t,e)}).valueFormatter(function(t,e){return a.tickFormat()(t,e)}),u.tooltip.headerFormatter(function(t,e){return o.tickFormat()(t,e)}).valueFormatter(function(t,e){return null==t?"N/A":a.tickFormat()(t,e)});var W=null,D=null;l.updateState(!1);var z=t.utils.renderWatch(E),H=i.style(),I=function(t){return function(){return{active:t.map(function(t){return!t.disabled}),style:i.style()}}},R=function(t){return function(e){void 0!==e.style&&(H=e.style),void 0!==e.active&&t.forEach(function(t,n){t.disabled=!e.active[n]})}},B=d3.format("%");return i.dispatch.on("elementMouseover.tooltip",function(t){t.point.x=i.x()(t.point),t.point.y=i.y()(t.point),c.data(t).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(t){c.hidden(!0)}),e.dispatch=E,e.stacked=i,e.legend=s,e.controls=l,e.xAxis=o,e.x2Axis=f.xAxis,e.yAxis=a,e.y2Axis=f.yAxis,e.interactiveLayer=u,e.tooltip=c,e.focus=f,e.dispatch=E,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return p},set:function(t){p=t}},height:{get:function(){return g},set:function(t){g=t}},showLegend:{get:function(){return y},set:function(t){y=t}},legendPosition:{get:function(){return x},set:function(t){x=t}},showXAxis:{get:function(){return b},set:function(t){b=t}},showYAxis:{get:function(){return w},set:function(t){w=t}},defaultState:{get:function(){return L},set:function(t){L=t}},noData:{get:function(){return T},set:function(t){T=t}},showControls:{get:function(){return m},set:function(t){m=t}},controlLabels:{get:function(){return F},set:function(t){F=t}},controlOptions:{get:function(){return P},set:function(t){P=t}},showTotalInTooltip:{get:function(){return S},set:function(t){S=t}},totalLabel:{get:function(){return A},set:function(t){A=t}},focusEnable:{get:function(){return M},set:function(t){M=t}},focusHeight:{get:function(){return f.height()},set:function(t){f.height(t)}},brushExtent:{get:function(){return f.brushExtent()},set:function(t){f.brushExtent(t)}},margin:{get:function(){return d},set:function(t){void 0!==t.top&&(d.top=t.top,h=t.top),d.right=void 0!==t.right?t.right:d.right,d.bottom=void 0!==t.bottom?t.bottom:d.bottom,d.left=void 0!==t.left?t.left:d.left}},focusMargin:{get:function(){return f.margin},set:function(t){f.margin.top=void 0!==t.top?t.top:f.margin.top,f.margin.right=void 0!==t.right?t.right:f.margin.right,f.margin.bottom=void 0!==t.bottom?t.bottom:f.margin.bottom,f.margin.left=void 0!==t.left?t.left:f.margin.left}},duration:{get:function(){return O},set:function(t){O=t,z.reset(O),i.duration(O),o.duration(O),a.duration(O)}},color:{get:function(){return v},set:function(e){v=t.utils.getColor(e),s.color(v),i.color(v),f.color(v)}},x:{get:function(){return i.x()},set:function(t){i.x(t),f.x(t)}},y:{get:function(){return i.y()},set:function(t){i.y(t),f.y(t)}},rightAlignYAxis:{get:function(){return k},set:function(t){k=t,a.orient(k?"right":"left")}},useInteractiveGuideline:{get:function(){return C},set:function(t){C=!!t,e.interactive(!t),e.useVoronoi(!t),i.scatter.interactive(!t)}}}),t.utils.inheritOptions(e,i),t.utils.initOptions(e),e},t.models.stackedAreaWithFocusChart=function(){return t.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},t.models.sunburst=function(){"use strict";function e(t){var e=n(t);return e>90?180:0}function n(t){var e=Math.max(0,Math.min(2*Math.PI,N(t.x))),n=Math.max(0,Math.min(2*Math.PI,N(t.x+t.dx))),r=(e+n)/2*(180/Math.PI)-90;return r}function r(t){var e=Math.max(0,Math.min(2*Math.PI,N(t.x))),n=Math.max(0,Math.min(2*Math.PI,N(t.x+t.dx)));return(n-e)/(2*Math.PI)}function i(t){var e=Math.max(0,Math.min(2*Math.PI,N(t.x))),n=Math.max(0,Math.min(2*Math.PI,N(t.x+t.dx))),r=n-e;return r>S}function o(t,e){var n=d3.interpolate(N.domain(),[f.x,f.x+f.dx]),r=d3.interpolate(P.domain(),[f.y,1]),i=d3.interpolate(P.range(),[f.y?20:0,p]);return 0===e?function(){return W(t)}:function(e){return N.domain(n(e)),P.domain(r(e)).range(i(e)),W(t)}}function a(t){var e=d3.interpolate({x:t.x0,dx:t.dx0,y:t.y0,dy:t.dy0},t);return function(n){var r=e(n);return t.x0=r.x,t.dx0=r.dx,t.y0=r.y,t.dy0=r.dy,W(r)}}function s(t){var e=_(t);O[e]||(O[e]={});var n=O[e];n.dx=t.dx,n.x=t.x,n.dy=t.dy,n.y=t.y}function l(t){t.forEach(function(t){var e=_(t),n=O[e];n?(t.dx0=n.dx,t.x0=n.x,t.dy0=n.dy,t.y0=n.y):(t.dx0=t.dx,t.x0=t.x,t.dy0=t.dy,t.y0=t.y),s(t)})}function u(t){var r=w.selectAll("text"),a=w.selectAll("path");r.transition().attr("opacity",0),f=t,a.transition().duration(T).attrTween("d",o).each("end",function(r){if(r.x>=t.x&&r.x<t.x+t.dx&&r.depth>=t.depth){var o=d3.select(this.parentNode),a=o.select("text");a.transition().duration(T).text(function(t){return C(t)}).attr("opacity",function(t){return i(t)?1:0}).attr("transform",function(){var i=this.getBBox().width;if(0===r.depth)return"translate("+i/2*-1+",0)";if(r.depth===t.depth)return"translate("+(P(r.y)+5)+",0)";var o=n(r),a=e(r);return 0===a?"rotate("+o+")translate("+(P(r.y)+5)+",0)":"rotate("+o+")translate("+(P(r.y)+i+5)+",0)rotate("+a+")"})}})}function c(o){return D.reset(),o.each(function(o){w=d3.select(this),d=t.utils.availableWidth(v,w,g),h=t.utils.availableHeight(m,w,g),p=Math.min(d,h)/2,P.range([0,p]);var s=w.select("g.nvd3.nv-wrap.nv-sunburst");s[0][0]?s.attr("transform","translate("+(d/2+g.left+g.right)+","+(h/2+g.top+g.bottom)+")"):s=w.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+b).attr("transform","translate("+(d/2+g.left+g.right)+","+(h/2+g.top+g.bottom)+")"),w.on("click",function(t,e){E.chartClick({data:t,index:e,pos:d3.event,id:b})}),F.value(x[y]||x.count);var c=F.nodes(o[0]).reverse();l(c);var f=s.selectAll(".arc-container").data(c,_),S=f.enter().append("g").attr("class","arc-container");S.append("path").attr("d",W).style("fill",function(t){return t.color?t.color:k(L?(t.children?t:t.parent).name:t.name)}).style("stroke","#FFF").on("click",function(t,e){u(t),E.elementClick({data:t,index:e})}).on("mouseover",function(t,e){d3.select(this).classed("hover",!0).style("opacity",.8),E.elementMouseover({data:t,color:d3.select(this).style("fill"),percent:r(t)})}).on("mouseout",function(t,e){d3.select(this).classed("hover",!1).style("opacity",1),E.elementMouseout({data:t})}).on("mousemove",function(t,e){E.elementMousemove({data:t})}),f.each(function(t){d3.select(this).select("path").transition().duration(T).attrTween("d",a)}),M&&(f.selectAll("text").remove(),f.append("text").text(function(t){return C(t)}).transition().duration(T).attr("opacity",function(t){return i(t)?1:0}).attr("transform",function(t){var r=this.getBBox().width;if(0===t.depth)return"rotate(0)translate("+r/2*-1+",0)";var i=n(t),o=e(t);return 0===o?"rotate("+i+")translate("+(P(t.y)+5)+",0)":"rotate("+i+")translate("+(P(t.y)+r+5)+",0)rotate("+o+")"})),u(c[c.length-1]),f.exit().transition().duration(T).attr("opacity",0).each("end",function(t){var e=_(t);O[e]=void 0}).remove()}),D.renderEnd("sunburst immediate"),c}var f,d,h,p,g={top:0,right:0,bottom:0,left:0},v=600,m=600,y="count",x={count:function(t){return 1},value:function(t){return t.value||t.size},size:function(t){return t.value||t.size}},b=Math.floor(1e4*Math.random()),w=null,k=t.utils.defaultColor(),M=!1,C=function(t){return"count"===y?t.name+" #"+t.value:t.name+" "+(t.value||t.size)},S=.02,A=function(t,e){return t.name>e.name},_=function(t,e){return t.name},L=!0,T=500,E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),N=d3.scale.linear().range([0,2*Math.PI]),P=d3.scale.sqrt(),F=d3.layout.partition().sort(A),O={},W=d3.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,N(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,N(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,P(t.y))}).outerRadius(function(t){return Math.max(0,P(t.y+t.dy))}),D=t.utils.renderWatch(E);return c.dispatch=E,c.options=t.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return v},set:function(t){v=t}},height:{get:function(){return m},set:function(t){m=t}},mode:{get:function(){return y},set:function(t){y=t}},id:{get:function(){return b},set:function(t){b=t}},duration:{get:function(){return T},set:function(t){T=t}},groupColorByParent:{get:function(){return L},set:function(t){L=!!t}},showLabels:{get:function(){return M},set:function(t){M=!!t}},labelFormat:{get:function(){return C},set:function(t){C=t}},labelThreshold:{get:function(){return S},set:function(t){S=t}},sort:{get:function(){return A},set:function(t){A=t}},key:{get:function(){return _},set:function(t){_=t}},margin:{get:function(){return g},set:function(t){g.top=void 0!=t.top?t.top:g.top,g.right=void 0!=t.right?t.right:g.right,g.bottom=void 0!=t.bottom?t.bottom:g.bottom,g.left=void 0!=t.left?t.left:g.left}},color:{get:function(){return k},set:function(e){k=t.utils.getColor(e)}}}),t.utils.initOptions(c),c},t.models.sunburstChart=function(){"use strict";function e(r){return h.reset(),h.models(n),r.each(function(r){var s=d3.select(this);t.utils.initSVG(s);var l=t.utils.availableWidth(o,s,i),u=t.utils.availableHeight(a,s,i);return e.update=function(){0===f?s.call(e):s.transition().duration(f).call(e)},e.container=s,r&&r.length?(s.selectAll(".nv-noData").remove(),n.width(l).height(u).margin(i),void s.call(n)):(t.utils.noData(e,s),e)}),h.renderEnd("sunburstChart immediate"),e}var n=t.models.sunburst(),r=t.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=null,a=null,s=t.utils.defaultColor(),l=!1,u=(Math.round(1e5*Math.random()),null),c=null,f=250,d=d3.dispatch("stateChange","changeState","renderEnd"),h=t.utils.renderWatch(d);return r.duration(0).headerEnabled(!1).valueFormatter(function(t){return t}),n.dispatch.on("elementMouseover.tooltip",function(t){t.series={key:t.data.name,value:t.data.value||t.data.size,color:t.color,percent:t.percent},l||(delete t.percent,delete t.series.percent),r.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(t){r.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(t){r()}),e.dispatch=d,e.sunburst=n,e.tooltip=r,e.options=t.utils.optionsFunc.bind(e),e._options=Object.create({},{noData:{get:function(){return c},set:function(t){c=t}},defaultState:{get:function(){return u},set:function(t){u=t}},showTooltipPercent:{get:function(){return l},set:function(t){l=t}},color:{get:function(){return s},set:function(t){s=t,n.color(s)}},duration:{get:function(){return f},set:function(t){f=t,h.reset(f),n.duration(f)}},margin:{get:function(){return i},set:function(t){i.top=void 0!==t.top?t.top:i.top,i.right=void 0!==t.right?t.right:i.right,i.bottom=void 0!==t.bottom?t.bottom:i.bottom,i.left=void 0!==t.left?t.left:i.left,n.margin(i)}}}),t.utils.inheritOptions(e,n),t.utils.initOptions(e),e},t.version="1.8.5"}(),function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n,r,i,a,s){function l(){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}function u(n){a(function(){e.parent().length&&g.push(t.$watch(n,function(t,e){t!=e&&c()}))})}function c(){var n=e.clone();if(e.attr("__afu_gen__")&&angular.element(document.getElementById(e.attr("id").substring(1))).remove(),e.parent().length){for(var r=0;r<g.length;r++)g[r]();e.replaceWith(n),s(n)(t)}return n}function f(r,o){if(r){u(r);var a=i(r)(t);a?(e.attr(o,a),n[o]=a):(e.attr(o,null),delete n[o])}}function d(e){var i;i=e.__files_||e.target&&e.target.files,p(i,n,r,t,e)}function h(t){var n=null!=v[0].value&&""!=v[0].value;if(v[0].value=null,navigator.userAgent.indexOf("Chrome")===-1)if(e.attr("__afu_clone__"))e.attr("__afu_clone__",null);else if(n&&d({target:{files:[]}}),navigator.appVersion.indexOf("MSIE 10")!==-1){var r=c();return r.attr("__afu_clone__",!0),r[0].click(),t.preventDefault(),t.stopPropagation(),!0}}function p(t,e,n,r,s){for(var l=[],u=[],c=e.accept?new RegExp(o(e.accept),"gi"):null,f=0;f<t.length;f++){var d=t.item(f);!c||d.type.match(c)||null!=d.name&&d.name.match(c)?l.push(d):u.push(d)}n&&a(function(){r[e.ngModel]&&(r[e.ngModel].value=l),r[e.ngModel]=l,n&&n.$setViewValue(null!=l&&0==l.length?"":l),e.ngModelRejected&&(r[e.ngModelRejected]&&(r[e.ngModelRejected].value=u),r[e.ngModelRejected]=u)}),e.ngFileChange&&""!=e.ngFileChange&&a(function(){i(e.ngFileChange)(r,{$files:l,$rejectedFiles:u,$event:s})})}var g=[];f(n.ngMultiple,"multiple"),f(n.ngAccept,"accept"),f(n.ngCapture,"capture"),""!=n.ngFileSelect&&(n.ngFileChange=n.ngFileSelect);var v=e;if(l())e.bind("click",h);else{v=angular.element('<input type="file">'),n.multiple&&v.attr("multiple",n.multiple),n.accept&&v.attr("accept",n.accept),n.capture&&v.attr("capture",n.capture);for(var m in n)if(0==m.indexOf("inputFile")){var y=m.substring("inputFile".length);y=y[0].toLowerCase()+y.substring(1),v.attr(y,n[m])}v.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__afu_gen__",!0),e.attr("__refElem__",!0),v[0].__refElem__=e[0],e.parent()[0].insertBefore(v[0],e[0]),e.css("overflow","hidden"),e.bind("click",function(t){h(t)||v[0].click()})}v.bind("change",d),e.on("$destroy",function(){for(var t=0;t<g.length;t++)g[t]();e[0]!=v[0]&&v.remove()}),g.push(t.$watch(n.ngModel,function(t,e){t==e||null!=t&&t.length||(navigator.appVersion.indexOf("MSIE 10")!==-1?c():v[0].value=null)}))}function n(t,e,n,a,s,l,u){function c(t,e,n){var r=!0;if(y){var i=n.dataTransfer.items;if(null!=i)for(var o=0;o<i.length&&r;o++)r=r&&("file"==i[o].kind||""==i[o].kind)&&(null!=i[o].type.match(y)||null!=i[o].name&&null!=i[o].name.match(y))}var a=s(e.dragOverClass)(t,{$event:n});return a&&(a.delay&&(v=a.delay),a.accept&&(a=r?a.accept:a.reject)),a||e.dragOverClass||"dragover"}function f(t,e,n,r){function o(t){!y||t.type.match(y)||null!=t.name&&t.name.match(y)?s.push(t):c.push(t)}function a(t,e,n){if(null!=e)if(e.isDirectory){var r=(n||"")+e.name;o({name:e.name,type:"directory",path:r});var i=e.createReader(),s=[];
d++;var l=function(){i.readEntries(function(r){try{if(r.length)s=s.concat(Array.prototype.slice.call(r||[],0)),l();else{for(var i=0;i<s.length;i++)a(t,s[i],(n?n:"")+e.name+"/");d--}}catch(t){d--,console.error(t)}},function(){d--})};l()}else d++,e.file(function(t){try{d--,t.path=(n?n:"")+t.name,o(t)}catch(t){d--,console.error(t)}},function(t){d--})}var s=[],c=[],f=t.dataTransfer.items,d=0;if(f&&f.length>0&&"file"!=u.protocol())for(var h=0;h<f.length;h++){if(f[h].webkitGetAsEntry&&f[h].webkitGetAsEntry()&&f[h].webkitGetAsEntry().isDirectory){var p=f[h].webkitGetAsEntry();if(p.isDirectory&&!n)continue;null!=p&&(i(p.name)?a(s,p):f[h].webkitGetAsEntry().isDirectory||o(f[h].getAsFile()))}else{var g=f[h].getAsFile();null!=g&&o(g)}if(!r&&s.length>0)break}else{var v=t.dataTransfer.files;if(null!=v)for(var h=0;h<v.length&&(o(v.item(h)),r||!(s.length>0));h++);}var m=0;!function t(n){l(function(){if(d)10*m++<2e4&&t(10);else{if(!r&&s.length>1){for(var n=0;"directory"==s[n].type;)n++;s=[s[n]]}e(s,c)}},n||0)}()}var d=r();if(n.dropAvailable&&l(function(){t.dropAvailable?t.dropAvailable.value=d:t.dropAvailable=d}),!d)return void(0!=s(n.hideOnDropNotAvailable)(t)&&e.css("display","none"));var h,p=null,g=s(n.stopPropagation)(t),v=1,m=s(n.ngAccept)(t)||n.accept,y=m?new RegExp(o(m),"gi"):null;e[0].addEventListener("dragover",function(r){r.preventDefault(),g&&r.stopPropagation();var i=r.dataTransfer.effectAllowed;r.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",l.cancel(p),t.actualDragOverClass||(h=c(t,n,r)),e.addClass(h)},!1),e[0].addEventListener("dragenter",function(t){t.preventDefault(),g&&t.stopPropagation()},!1),e[0].addEventListener("dragleave",function(t){p=l(function(){e.removeClass(h),h=null},v||1)},!1),""!=n.ngFileDrop&&(n.ngFileChange=t.ngFileDrop),e[0].addEventListener("drop",function(r){r.preventDefault(),g&&r.stopPropagation(),e.removeClass(h),h=null,f(r,function(e,i){l(function(){a&&(t[n.ngModel]&&(t[n.ngModel].value=e),t[n.ngModel]=e,a&&a.$setViewValue(null!=e&&0==e.length?"":e)),n.ngModelRejected&&(t[n.ngModelRejected]&&(t[n.ngModelRejected].value=i),t[n.ngModelRejected]=i)}),l(function(){s(n.ngFileChange)(t,{$files:e,$rejectedFiles:i,$event:r})})},0!=s(n.allowDir)(t),n.multiple||s(n.ngMultiple)(t))},!1)}function r(){var t=document.createElement("div");return"draggable"in t&&"ondrop"in t}function i(t){return/^[\000-\177]*$/.test(t)}function o(t){if(t.length>2&&"/"===t[0]&&"/"===t[t.length-1])return t.substring(1,t.length-1);var e=t.split(","),n="";if(e.length>1)for(var r=0;r<e.length;r++)0==e[r].indexOf(".")&&(e[r]="*"+e[r]),n+="("+o(e[r])+")",r<e.length-1&&(n+="|");else n="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",n=n.replace(/\\\*/g,".*").replace(/\\\?/g,".");return n}window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&t("setRequestHeader",function(t){return function(e,n){if("__setXHR_"===e){var r=n(this);r instanceof Function&&r(this)}else t.apply(this,arguments)}});var a=angular.module("angularFileUpload",[]);a.version="3.0.4",a.service("$upload",["$http","$q","$timeout",function(t,e,n){function r(r){r.method=r.method||"POST",r.headers=r.headers||{},r.transformRequest=r.transformRequest||function(e,n){return window.ArrayBuffer&&e instanceof window.ArrayBuffer?e:t.defaults.transformRequest[0](e,n)};var i=e.defer(),o=i.promise;return r.headers.__setXHR_=function(){return function(t){t&&(r.__XHR=t,r.xhrFn&&r.xhrFn(t),t.upload.addEventListener("progress",function(t){t.config=r,i.notify?i.notify(t):o.progress_fn&&n(function(){o.progress_fn(t)})},!1),t.upload.addEventListener("load",function(t){t.lengthComputable&&(t.config=r,i.notify?i.notify(t):o.progress_fn&&n(function(){o.progress_fn(t)}))},!1))}},t(r).then(function(t){i.resolve(t)},function(t){i.reject(t)},function(t){i.notify(t)}),o.success=function(t){return o.then(function(e){t(e.data,e.status,e.headers,r)}),o},o.error=function(t){return o.then(null,function(e){t(e.data,e.status,e.headers,r)}),o},o.progress=function(t){return o.progress_fn=t,o.then(null,null,function(e){t(e)}),o},o.abort=function(){return r.__XHR&&n(function(){r.__XHR.abort()}),o},o.xhr=function(t){return r.xhrFn=function(e){return function(){e&&e.apply(o,arguments),t.apply(o,arguments)}}(r.xhrFn),o},o}this.upload=function(t){t.headers=t.headers||{},t.headers["Content-Type"]=void 0;t.transformRequest;return t.transformRequest=t.transformRequest?"[object Array]"===Object.prototype.toString.call(t.transformRequest)?t.transformRequest:[t.transformRequest]:[],t.transformRequest.push(function(e,n){var r=new FormData,i={};for(var o in t.fields)i[o]=t.fields[o];if(e&&(i.data=e),t.formDataAppender)for(var o in i)t.formDataAppender(r,o,i[o]);else for(var o in i){var a=i[o];void 0!==a&&("[object String]"===Object.prototype.toString.call(a)?r.append(o,a):t.sendObjectsAsJsonBlob&&"object"==typeof a?r.append(o,new Blob([a],{type:"application/json"})):r.append(o,JSON.stringify(a)))}if(null!=t.file){var s=t.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(t.file))for(var l="[object String]"===Object.prototype.toString.call(s),u=0;u<t.file.length;u++)r.append(l?s:s[u],t.file[u],t.fileName&&t.fileName[u]||t.file[u].name);else r.append(s,t.file,t.fileName||t.file.name)}return r}),r(t)},this.http=function(t){return r(t)}}]),a.directive("ngFileSelect",["$parse","$timeout","$compile",function(t,n,r){return{restrict:"AEC",require:"?ngModel",link:function(i,o,a,s){e(i,o,a,s,t,n,r)}}}]),a.directive("ngFileDrop",["$parse","$timeout","$location",function(t,e,r){return{restrict:"AEC",require:"?ngModel",link:function(i,o,a,s){n(i,o,a,s,t,e,r)}}}]),a.directive("ngNoFileDrop",function(){return function(t,e,n){r()&&e.css("display","none")}}),a.directive("ngFileDropAvailable",["$parse","$timeout",function(t,e){return function(n,i,o){if(r()){var a=t(o.ngFileDropAvailable);e(function(){a(n)})}}}]);var s=angular.module("ngFileUpload",[]);for(var l in a)s[l]=a[l]}(),function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n){try{Object.defineProperty(t,e,{get:n})}catch(t){}}var n=function(){try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(t)return!0}catch(t){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1};if(window.XMLHttpRequest&&!window.FormData||window.FileAPI&&FileAPI.forceLoad){var r=function(t){if(!t.__listeners){t.upload||(t.upload={}),t.__listeners=[];var e=t.upload.addEventListener;t.upload.addEventListener=function(n,r,i){t.__listeners[n]=r,e&&e.apply(this,arguments)}}};t("open",function(t){return function(e,n,i){r(this),this.__url=n;try{t.apply(this,[e,n,i])}catch(n){n.message.indexOf("Access is denied")>-1&&(this.__origError=n,this.__url="_fix_for_ie_crossdomain__",t.apply(this,[e,this.__url,i]))}}}),t("getResponseHeader",function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}}),t("getAllResponseHeaders",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==t?null:t.apply(this)}}),t("abort",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==t?null:t.apply(this)}}),t("setRequestHeader",function(t){return function(e,n){if("__setXHR_"===e){r(this);var i=n(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=n,t.apply(this,arguments)}}),t("send",function(t){return function(){var r=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var i=arguments[0],o={url:r.__url,jsonp:!1,cache:!0,complete:function(t,n){r.__completed=!0,!t&&r.__listeners.load&&r.__listeners.load({type:"load",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),!t&&r.__listeners.loadend&&r.__listeners.loadend({type:"loadend",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),"abort"===t&&r.__listeners.abort&&r.__listeners.abort({type:"abort",loaded:r.__loaded,total:r.__total,target:r,lengthComputable:!0}),void 0!==n.status&&e(r,"status",function(){return 0==n.status&&t&&"abort"!==t?500:n.status}),void 0!==n.statusText&&e(r,"statusText",function(){return n.statusText}),e(r,"readyState",function(){return 4}),void 0!==n.response&&e(r,"response",function(){return n.response});var i=n.responseText||(t&&0==n.status&&"abort"!==t?t:void 0);e(r,"responseText",function(){return i}),e(r,"response",function(){return i}),t&&e(r,"err",function(){return t}),r.__fileApiXHR=n,r.onreadystatechange&&r.onreadystatechange(),r.onload&&r.onload()},fileprogress:function(t){if(t.target=r,r.__listeners.progress&&r.__listeners.progress(t),r.__total=t.total,r.__loaded=t.loaded,t.total===t.loaded){var e=this;setTimeout(function(){r.__completed||(r.getAllResponseHeaders=function(){},e.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:r.__requestHeaders};o.data={},o.files={};for(var a=0;a<i.data.length;a++){var s=i.data[a];null!=s.val&&null!=s.val.name&&null!=s.val.size&&null!=s.val.type?o.files[s.key]=s.val:o.data[s.key]=s.val}setTimeout(function(){if(!n())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';r.__fileApiXHR=FileAPI.upload(o)},1)}else{if("_fix_for_ie_crossdomain__"===this.__url)throw this.__origError;t.apply(r,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0;var i=function(t){if(!n())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var e=angular.element(t);if(!e.attr("disabled")){for(var r=!1,i=0;i<e[0].attributes.length;i++){var o=e[0].attributes[i];if(o.name.indexOf("file-select")!==-1){r=!0;break}}if(!e.hasClass("js-fileapi-wrapper")&&(r||null!=e.attr("__afu_gen__"))&&(e.addClass("js-fileapi-wrapper"),null!=e.attr("__afu_gen__"))){for(var a=e[0].__refElem__&&angular.element(e[0].__refElem__)||e;a&&!a.attr("__refElem__");)a=angular.element(a[0].nextSibling);a.bind("mouseover",function(){""!==e.parent().css("position")&&"static"!==e.parent().css("position")||e.parent().css("position","relative"),e.css("position","absolute").css("top",a[0].offsetTop+"px").css("left",a[0].offsetLeft+"px").css("width",a[0].offsetWidth+"px").css("height",a[0].offsetHeight+"px").css("padding",a.css("padding")).css("margin",a.css("margin")).css("filter","alpha(opacity=0)"),a.attr("onclick",""),e.css("z-index","1000")})}}},o=function(t){return function(e){for(var n=FileAPI.getFiles(e),r=0;r<n.length;r++)void 0===n[r].size&&(n[r].size=0),void 0===n[r].name&&(n[r].name="file"),void 0===n[r].type&&(n[r].type="undefined");e.target||(e.target={}),e.target.files=n,e.target.files!=n&&(e.__files_=n),(e.__files_||e.target.files).item=function(t){return(e.__files_||e.target.files)[t]||null},t&&t.apply(this,[e])}},a=function(t,e){return("change"===e.toLowerCase()||"onchange"===e.toLowerCase())&&"file"==t.getAttribute("type")};HTMLInputElement.prototype.addEventListener&&(HTMLInputElement.prototype.addEventListener=function(t){return function(e,n,r,s){a(this,e)?(i(this),t.apply(this,[e,o(n),r,s])):t.apply(this,[e,n,r,s])}}(HTMLInputElement.prototype.addEventListener)),HTMLInputElement.prototype.attachEvent&&(HTMLInputElement.prototype.attachEvent=function(t){return function(e,n){a(this,e)?(i(this),window.jQuery?angular.element(this).bind("change",o(null)):t.apply(this,[e,o(n)])):t.apply(this,[e,n])}}(HTMLInputElement.prototype.attachEvent)),window.FormData=FormData=function(){return{append:function(t,e,n){e.__isFileAPIBlobShim&&(e=e.data[0]),this.data.push({key:t,val:e,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(t){return{data:t,__isFileAPIBlobShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var t,e,r,i,o,a=document.createElement("script"),s=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)t=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)e=window.FileAPI.jsPath;else for(r=0;r<s.length;r++)if(o=s[r].src,i=o.search(/\/angular\-file\-upload[\-a-zA-z0-9\.]*\.js/),i>-1){e=o.substring(0,i+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=e),a.setAttribute("src",t||e+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(a),FileAPI.hasFlash=n()}}(),FileAPI.disableFileInput=function(t,e){e?t.removeClass("js-fileapi-wrapper"):t.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var t=this,e=!1;this.listeners={},this.addEventListener=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},this.removeEventListener=function(e,n){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(n),1)},this.dispatchEvent=function(e){var n=t.listeners[e.type];if(n)for(var r=0;r<n.length;r++)n[r].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(e,n){var r={type:e,target:t,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(r.target.result=n.result),r},r=function(r){if(e||(e=!0,t.onloadstart&&t.onloadstart(n("loadstart",r))),"load"===r.type){t.onloadend&&t.onloadend(n("loadend",r));var i=n("load",r);t.onload&&t.onload(i),t.dispatchEvent(i)}else if("progress"===r.type){var i=n("progress",r);t.onprogress&&t.onprogress(i),t.dispatchEvent(i)}else{var i=n("error",r);t.onerror&&t.onerror(i),t.dispatchEvent(i)}};this.readAsArrayBuffer=function(t){FileAPI.readAsBinaryString(t,r)},this.readAsBinaryString=function(t){FileAPI.readAsBinaryString(t,r)},this.readAsDataURL=function(t){FileAPI.readAsDataURL(t,r)},this.readAsText=function(t){FileAPI.readAsText(t,r)}})}(),function(t){function e(){var t=Error.apply(this,arguments);t.name=this.name="FlashError",this.stack=t.stack,this.message=t.message}function r(){var t=Error.apply(this,arguments);t.name=this.name="WebcamError",this.stack=t.stack,this.message=t.message}var i;IntermediateInheritor=function(){},IntermediateInheritor.prototype=Error.prototype,e.prototype=new IntermediateInheritor,r.prototype=new IntermediateInheritor;var o={version:"1.0.22",protocol:location.protocol.match(/https/i)?"https":"http",loaded:!1,live:!1,userMedia:!0,iOS:/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream,params:{width:0,height:0,dest_width:0,dest_height:0,image_format:"jpeg",jpeg_quality:90,enable_flash:!0,force_flash:!1,flip_horiz:!1,fps:30,upload_name:"webcam",constraints:null,swfURL:"",flashNotDetectedText:"ERROR: No Adobe Flash Player detected.  Webcam.js relies on Flash for browsers that do not support getUserMedia (like yours).",noInterfaceFoundText:"No supported webcam interface found.",unfreeze_snap:!0,iosPlaceholderText:"Click here to open camera.",user_callback:null,user_canvas:null},errors:{FlashError:e,WebcamError:r},hooks:{},init:function(){var e=this;this.mediaDevices=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices:navigator.mozGetUserMedia||navigator.webkitGetUserMedia?{getUserMedia:function(t){return new Promise(function(e,n){(navigator.mozGetUserMedia||navigator.webkitGetUserMedia).call(navigator,t,e,n)})}}:null,t.URL=t.URL||t.webkitURL||t.mozURL||t.msURL,this.userMedia=this.userMedia&&!!this.mediaDevices&&!!t.URL,navigator.userAgent.match(/Firefox\D+(\d+)/)&&parseInt(RegExp.$1,10)<21&&(this.userMedia=null),this.userMedia&&t.addEventListener("beforeunload",function(t){e.reset()})},exifOrientation:function(t){var e=new DataView(t);if(255!=e.getUint8(0)||216!=e.getUint8(1))return console.log("Not a valid JPEG file"),0;for(var r=2,i=null;r<t.byteLength;){if(255!=e.getUint8(r))return console.log("Not a valid marker at offset "+r+", found: "+e.getUint8(r)),0;if(i=e.getUint8(r+1),225==i){r+=4;var o="";for(n=0;n<4;n++)o+=String.fromCharCode(e.getUint8(r+n));if("Exif"!=o)return console.log("Not valid EXIF data found"),0;r+=6;var a=null;if(18761==e.getUint16(r))a=!1;else{if(19789!=e.getUint16(r))return console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),0;a=!0}if(42!=e.getUint16(r+2,!a))return console.log("Not valid TIFF data! (no 0x002A)"),0;var s=e.getUint32(r+4,!a);if(s<8)return console.log("Not valid TIFF data! (First offset less than 8)",e.getUint32(r+4,!a)),0;for(var l=r+s,u=e.getUint16(l,!a),c=0;c<u;c++){var f=l+12*c+2;if(274==e.getUint16(f,!a)){var d=e.getUint16(f+2,!a),h=e.getUint32(f+4,!a);if(3!=d&&1!=h)return console.log("Invalid EXIF orientation value type ("+d+") or count ("+h+")"),0;var p=e.getUint16(f+8,!a);return p<1||p>8?(console.log("Invalid EXIF orientation value ("+p+")"),0):p}}}else r+=2+e.getUint16(r+2)}return 0},fixOrientation:function(t,e,n){var r=new Image;r.addEventListener("load",function(t){var i=document.createElement("canvas"),o=i.getContext("2d");switch(e<5?(i.width=r.width,i.height=r.height):(i.width=r.height,i.height=r.width),e){case 2:o.transform(-1,0,0,1,r.width,0);break;case 3:o.transform(-1,0,0,-1,r.width,r.height);break;case 4:o.transform(1,0,0,-1,0,r.height);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,r.height,0);break;case 7:o.transform(0,-1,-1,0,r.height,r.width);break;case 8:o.transform(0,-1,1,0,0,r.width)}o.drawImage(r,0,0),n.src=i.toDataURL()},!1),r.src=t},attach:function(e){if("string"==typeof e&&(e=document.getElementById(e)||document.querySelector(e)),!e)return this.dispatch("error",new r("Could not locate DOM element to attach to."));this.container=e,e.innerHTML="";var n=document.createElement("div");if(e.appendChild(n),this.peg=n,this.params.width||(this.params.width=e.offsetWidth),this.params.height||(this.params.height=e.offsetHeight),!this.params.width||!this.params.height)return this.dispatch("error",new r("No width and/or height for webcam.  Please call set() first, or attach to a visible element."));this.params.dest_width||(this.params.dest_width=this.params.width),this.params.dest_height||(this.params.dest_height=this.params.height),this.userMedia=void 0===i?this.userMedia:i,this.params.force_flash&&(i=this.userMedia,this.userMedia=null),"number"!=typeof this.params.fps&&(this.params.fps=30);var a=this.params.width/this.params.dest_width,s=this.params.height/this.params.dest_height;if(this.userMedia){var l=document.createElement("video");l.setAttribute("autoplay","autoplay"),l.style.width=""+this.params.dest_width+"px",l.style.height=""+this.params.dest_height+"px",1==a&&1==s||(e.style.overflow="hidden",l.style.webkitTransformOrigin="0px 0px",l.style.mozTransformOrigin="0px 0px",l.style.msTransformOrigin="0px 0px",l.style.oTransformOrigin="0px 0px",l.style.transformOrigin="0px 0px",l.style.webkitTransform="scaleX("+a+") scaleY("+s+")",l.style.mozTransform="scaleX("+a+") scaleY("+s+")",l.style.msTransform="scaleX("+a+") scaleY("+s+")",l.style.oTransform="scaleX("+a+") scaleY("+s+")",l.style.transform="scaleX("+a+") scaleY("+s+")"),e.appendChild(l),this.video=l;var u=this;this.mediaDevices.getUserMedia({audio:!1,video:this.params.constraints||{mandatory:{minWidth:this.params.dest_width,minHeight:this.params.dest_height}}}).then(function(e){l.onloadedmetadata=function(t){u.stream=e,u.loaded=!0,u.live=!0,u.dispatch("load"),u.dispatch("live"),u.flip()},l.src=t.URL.createObjectURL(e)||e}).catch(function(t){u.params.enable_flash&&u.detectFlash()?setTimeout(function(){u.params.force_flash=1,u.attach(e)},1):u.dispatch("error",t)})}else if(this.iOS){var c=document.createElement("div");c.id=this.container.id+"-ios_div",c.className="webcamjs-ios-placeholder",c.style.width=""+this.params.width+"px",c.style.height=""+this.params.height+"px",c.style.textAlign="center",c.style.display="table-cell",c.style.verticalAlign="middle",c.style.backgroundRepeat="no-repeat",c.style.backgroundSize="contain",c.style.backgroundPosition="center";var f=document.createElement("span");f.className="webcamjs-ios-text",f.innerHTML=this.params.iosPlaceholderText,c.appendChild(f);var d=document.createElement("img");d.id=this.container.id+"-ios_img",d.style.width=""+this.params.dest_width+"px",d.style.height=""+this.params.dest_height+"px",d.style.display="none",c.appendChild(d);var h=document.createElement("input");h.id=this.container.id+"-ios_input",h.setAttribute("type","file"),h.setAttribute("accept","image/*"),h.setAttribute("capture","camera");var u=this,p=this.params;h.addEventListener("change",function(t){if(t.target.files.length>0&&0==t.target.files[0].type.indexOf("image/")){var e=URL.createObjectURL(t.target.files[0]),n=new Image;n.addEventListener("load",function(t){var e=document.createElement("canvas");e.width=p.dest_width,e.height=p.dest_height;var r=e.getContext("2d");ratio=Math.min(n.width/p.dest_width,n.height/p.dest_height);var i=p.dest_width*ratio,o=p.dest_height*ratio,a=(n.width-i)/2,s=(n.height-o)/2;r.drawImage(n,a,s,i,o,0,0,p.dest_width,p.dest_height);var l=e.toDataURL();d.src=l,c.style.backgroundImage="url('"+l+"')"},!1);var r=new FileReader;r.addEventListener("load",function(t){var r=u.exifOrientation(t.target.result);r>1?u.fixOrientation(e,r,n):n.src=e},!1);var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=function(t){200!=this.status&&0!==this.status||r.readAsArrayBuffer(this.response)},i.send()}},!1),h.style.display="none",e.appendChild(h),c.addEventListener("click",function(t){p.user_callback?u.snap(p.user_callback,p.user_canvas):(h.style.display="block",h.focus(),h.click(),h.style.display="none")},!1),e.appendChild(c),this.loaded=!0,this.live=!0}else if(this.params.enable_flash&&this.detectFlash()){t.Webcam=o;var c=document.createElement("div");c.innerHTML=this.getSWFHTML(),e.appendChild(c)}else this.dispatch("error",new r(this.params.noInterfaceFoundText));if(this.params.crop_width&&this.params.crop_height){var g=Math.floor(this.params.crop_width*a),v=Math.floor(this.params.crop_height*s);e.style.width=""+g+"px",e.style.height=""+v+"px",e.style.overflow="hidden",e.scrollLeft=Math.floor(this.params.width/2-g/2),e.scrollTop=Math.floor(this.params.height/2-v/2)}else e.style.width=""+this.params.width+"px",e.style.height=""+this.params.height+"px"},reset:function(){if(this.preview_active&&this.unfreeze(),this.unflip(),this.userMedia){if(this.stream)if(this.stream.getVideoTracks){var t=this.stream.getVideoTracks();t&&t[0]&&t[0].stop&&t[0].stop()}else this.stream.stop&&this.stream.stop();delete this.stream,delete this.video}if(this.userMedia!==!0&&this.loaded&&!this.iOS){var e=this.getMovie();e&&e._releaseCamera&&e._releaseCamera()}this.container&&(this.container.innerHTML="",delete this.container),this.loaded=!1,this.live=!1},set:function(){if(1==arguments.length)for(var t in arguments[0])this.params[t]=arguments[0][t];else this.params[arguments[0]]=arguments[1]},on:function(t,e){t=t.replace(/^on/i,"").toLowerCase(),this.hooks[t]||(this.hooks[t]=[]),this.hooks[t].push(e)},off:function(t,e){if(t=t.replace(/^on/i,"").toLowerCase(),this.hooks[t])if(e){var n=this.hooks[t].indexOf(e);n>-1&&this.hooks[t].splice(n,1)}else this.hooks[t]=[]},dispatch:function(){var n=arguments[0].replace(/^on/i,"").toLowerCase(),i=Array.prototype.slice.call(arguments,1);if(this.hooks[n]&&this.hooks[n].length){for(var o=0,a=this.hooks[n].length;o<a;o++){var s=this.hooks[n][o];"function"==typeof s?s.apply(this,i):"object"==typeof s&&2==s.length?s[0][s[1]].apply(s[0],i):t[s]&&t[s].apply(t,i)}return!0}return"error"==n&&(i[0]instanceof e||i[0]instanceof r?message=i[0].message:message="Could not access webcam: "+i[0].name+": "+i[0].message+" "+i[0].toString(),alert("Webcam.js Error: "+message)),!1},setSWFLocation:function(t){this.set("swfURL",t)},detectFlash:function(){var e="Shockwave Flash",n="ShockwaveFlash.ShockwaveFlash",r="application/x-shockwave-flash",i=t,o=navigator,a=!1;if("undefined"!=typeof o.plugins&&"object"==typeof o.plugins[e]){var s=o.plugins[e].description;s&&"undefined"!=typeof o.mimeTypes&&o.mimeTypes[r]&&o.mimeTypes[r].enabledPlugin&&(a=!0)}else if("undefined"!=typeof i.ActiveXObject)try{var l=new ActiveXObject(n);if(l){var u=l.GetVariable("$version");u&&(a=!0)}}catch(t){}return a},getSWFHTML:function(){var n="",r=this.params.swfURL;if(location.protocol.match(/file/))return this.dispatch("error",new e("Flash does not work from local disk.  Please run from a web server.")),'<h3 style="color:red">ERROR: the Webcam.js Flash fallback does not work from local disk.  Please run it from a web server.</h3>';if(!this.detectFlash())return this.dispatch("error",new e("Adobe Flash Player not found.  Please install from get.adobe.com/flashplayer and try again.")),'<h3 style="color:red">'+this.params.flashNotDetectedText+"</h3>";if(!r){for(var i="",o=document.getElementsByTagName("script"),a=0,s=o.length;a<s;a++){var l=o[a].getAttribute("src");l&&l.match(/\/webcam(\.min)?\.js/)&&(i=l.replace(/\/webcam(\.min)?\.js.*$/,""),a=s)}r=i?i+"/webcam.swf":"webcam.swf"}t.localStorage&&!localStorage.getItem("visited")&&(this.params.new_user=1,localStorage.setItem("visited",1));var u="";for(var c in this.params)u&&(u+="&"),u+=c+"="+escape(this.params[c]);return n+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" type="application/x-shockwave-flash" codebase="'+this.protocol+'://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+this.params.width+'" height="'+this.params.height+'" id="webcam_movie_obj" align="middle"><param name="wmode" value="opaque" /><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+r+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+u+'"/><embed id="webcam_movie_embed" src="'+r+'" wmode="opaque" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+this.params.width+'" height="'+this.params.height+'" name="webcam_movie_embed" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+u+'"></embed></object>'},getMovie:function(){if(!this.loaded)return this.dispatch("error",new e("Flash Movie is not loaded yet"));var t=document.getElementById("webcam_movie_obj");return t&&t._snap||(t=document.getElementById("webcam_movie_embed")),t||this.dispatch("error",new e("Cannot locate Flash movie in DOM")),t},freeze:function(){var t=this,e=this.params;this.preview_active&&this.unfreeze();var n=this.params.width/this.params.dest_width,r=this.params.height/this.params.dest_height;this.unflip();var i=e.crop_width||e.dest_width,o=e.crop_height||e.dest_height,a=document.createElement("canvas");a.width=i,a.height=o;var s=a.getContext("2d");this.preview_canvas=a,this.preview_context=s,1==n&&1==r||(a.style.webkitTransformOrigin="0px 0px",a.style.mozTransformOrigin="0px 0px",a.style.msTransformOrigin="0px 0px",a.style.oTransformOrigin="0px 0px",a.style.transformOrigin="0px 0px",a.style.webkitTransform="scaleX("+n+") scaleY("+r+")",a.style.mozTransform="scaleX("+n+") scaleY("+r+")",a.style.msTransform="scaleX("+n+") scaleY("+r+")",a.style.oTransform="scaleX("+n+") scaleY("+r+")",a.style.transform="scaleX("+n+") scaleY("+r+")"),this.snap(function(){a.style.position="relative",a.style.left=""+t.container.scrollLeft+"px",a.style.top=""+t.container.scrollTop+"px",t.container.insertBefore(a,t.peg),t.container.style.overflow="hidden",t.preview_active=!0},a)},unfreeze:function(){this.preview_active&&(this.container.removeChild(this.preview_canvas),delete this.preview_context,delete this.preview_canvas,this.preview_active=!1,this.flip())},flip:function(){if(this.params.flip_horiz){var t=this.container.style;t.webkitTransform="scaleX(-1)",t.mozTransform="scaleX(-1)",t.msTransform="scaleX(-1)",t.oTransform="scaleX(-1)",t.transform="scaleX(-1)",t.filter="FlipH",t.msFilter="FlipH"}},unflip:function(){if(this.params.flip_horiz){var t=this.container.style;t.webkitTransform="scaleX(1)",t.mozTransform="scaleX(1)",t.msTransform="scaleX(1)",t.oTransform="scaleX(1)",t.transform="scaleX(1)",t.filter="",t.msFilter=""}},savePreview:function(t,e){var n=this.params,r=this.preview_canvas,i=this.preview_context;if(e){var o=e.getContext("2d");o.drawImage(r,0,0)}t(e?null:r.toDataURL("image/"+n.image_format,n.jpeg_quality/100),r,i),this.params.unfreeze_snap&&this.unfreeze()},snap:function(t,e){t||(t=this.params.user_callback),e||(e=this.params.user_canvas);var n=this.params;if(!this.loaded)return this.dispatch("error",new r("Webcam is not loaded yet"));if(!t)return this.dispatch("error",new r("Please provide a callback function or canvas to snap()"));if(this.preview_active)return this.savePreview(t,e),null;var i=document.createElement("canvas");i.width=this.params.dest_width,i.height=this.params.dest_height;var o=i.getContext("2d");this.params.flip_horiz&&(o.translate(n.dest_width,0),o.scale(-1,1));var a=function(){if(this.src&&this.width&&this.height&&o.drawImage(this,0,0,n.dest_width,n.dest_height),n.crop_width&&n.crop_height){var r=document.createElement("canvas");r.width=n.crop_width,r.height=n.crop_height;var a=r.getContext("2d");a.drawImage(i,Math.floor(n.dest_width/2-n.crop_width/2),Math.floor(n.dest_height/2-n.crop_height/2),n.crop_width,n.crop_height,0,0,n.crop_width,n.crop_height),o=a,i=r}if(e){var s=e.getContext("2d");s.drawImage(i,0,0)}t(e?null:i.toDataURL("image/"+n.image_format,n.jpeg_quality/100),i,o)};if(this.userMedia)o.drawImage(this.video,0,0,this.params.dest_width,this.params.dest_height),a();else if(this.iOS){var s=document.getElementById(this.container.id+"-ios_div"),l=document.getElementById(this.container.id+"-ios_img"),u=document.getElementById(this.container.id+"-ios_input");iFunc=function(t){a.call(l),l.removeEventListener("load",iFunc),s.style.backgroundImage="none",l.removeAttribute("src"),u.value=null},u.value?iFunc(null):(l.addEventListener("load",iFunc),u.style.display="block",u.focus(),u.click(),u.style.display="none")}else{var c=this.getMovie()._snap(),l=new Image;l.onload=a,l.src="data:image/"+this.params.image_format+";base64,"+c}return null},configure:function(t){t||(t="camera"),this.getMovie()._configure(t)},flashNotify:function(t,n){switch(t){case"flashLoadComplete":this.loaded=!0,this.dispatch("load");break;case"cameraLive":this.live=!0,this.dispatch("live");break;case"error":this.dispatch("error",new e(n))}},b64ToUint6:function(t){return t>64&&t<91?t-65:t>96&&t<123?t-71:t>47&&t<58?t+4:43===t?62:47===t?63:0},base64DecToArr:function(t,e){for(var n,r,i=t.replace(/[^A-Za-z0-9\+\/]/g,""),o=i.length,a=e?Math.ceil((3*o+1>>2)/e)*e:3*o+1>>2,s=new Uint8Array(a),l=0,u=0,c=0;c<o;c++)if(r=3&c,l|=this.b64ToUint6(i.charCodeAt(c))<<18-6*r,3===r||o-c===1){for(n=0;n<3&&u<a;n++,u++)s[u]=l>>>(16>>>n&24)&255;l=0}return s},upload:function(t,e,n){var r=this.params.upload_name||"webcam",i="";if(!t.match(/^data\:image\/(\w+)/))throw"Cannot locate image format in Data URI";i=RegExp.$1;var a=t.replace(/^data\:image\/\w+\;base64\,/,""),s=new XMLHttpRequest;s.open("POST",e,!0),s.upload&&s.upload.addEventListener&&s.upload.addEventListener("progress",function(t){if(t.lengthComputable){var e=t.loaded/t.total;o.dispatch("uploadProgress",e,t)}},!1);var l=this;s.onload=function(){n&&n.apply(l,[s.status,s.responseText,s.statusText]),o.dispatch("uploadComplete",s.status,s.responseText,s.statusText)};var u=new Blob([this.base64DecToArr(a)],{type:"image/"+i}),c=new FormData;c.append(r,u,r+"."+i.replace(/e/,"")),s.send(c)}};o.init(),"function"==typeof define&&define.amd?define(function(){return o}):"object"==typeof module&&module.exports?module.exports=o:t.Webcam=o}(window);var _self="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},Prism=function(){var t=/\blang(?:uage)?-(\w+)\b/i,e=0,n=_self.Prism={util:{encode:function(t){return t instanceof r?new r(t.type,n.util.encode(t.content),t.alias):"Array"===n.util.type(t)?t.map(n.util.encode):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(t){return Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1];
},objId:function(t){return t.__id||Object.defineProperty(t,"__id",{value:++e}),t.__id},clone:function(t){var e=n.util.type(t);switch(e){case"Object":var r={};for(var i in t)t.hasOwnProperty(i)&&(r[i]=n.util.clone(t[i]));return r;case"Array":return t.map&&t.map(function(t){return n.util.clone(t)})}return t}},languages:{extend:function(t,e){var r=n.util.clone(n.languages[t]);for(var i in e)r[i]=e[i];return r},insertBefore:function(t,e,r,i){i=i||n.languages;var o=i[t];if(2==arguments.length){r=arguments[1];for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);return o}var s={};for(var l in o)if(o.hasOwnProperty(l)){if(l==e)for(var a in r)r.hasOwnProperty(a)&&(s[a]=r[a]);s[l]=o[l]}return n.languages.DFS(n.languages,function(e,n){n===i[t]&&e!=t&&(this[e]=s)}),i[t]=s},DFS:function(t,e,r,i){i=i||{};for(var o in t)t.hasOwnProperty(o)&&(e.call(t,o,t[o],r||o),"Object"!==n.util.type(t[o])||i[n.util.objId(t[o])]?"Array"!==n.util.type(t[o])||i[n.util.objId(t[o])]||(i[n.util.objId(t[o])]=!0,n.languages.DFS(t[o],e,o,i)):(i[n.util.objId(t[o])]=!0,n.languages.DFS(t[o],e,null,i)))}},plugins:{},highlightAll:function(t,e){var r={callback:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};n.hooks.run("before-highlightall",r);for(var i,o=r.elements||document.querySelectorAll(r.selector),a=0;i=o[a++];)n.highlightElement(i,t===!0,r.callback)},highlightElement:function(e,r,i){for(var o,a,s=e;s&&!t.test(s.className);)s=s.parentNode;s&&(o=(s.className.match(t)||[,""])[1].toLowerCase(),a=n.languages[o]),e.className=e.className.replace(t,"").replace(/\s+/g," ")+" language-"+o,s=e.parentNode,/pre/i.test(s.nodeName)&&(s.className=s.className.replace(t,"").replace(/\s+/g," ")+" language-"+o);var l=e.textContent,u={element:e,language:o,grammar:a,code:l};if(n.hooks.run("before-sanity-check",u),!u.code||!u.grammar)return u.code&&(u.element.textContent=u.code),void n.hooks.run("complete",u);if(n.hooks.run("before-highlight",u),r&&_self.Worker){var c=new Worker(n.filename);c.onmessage=function(t){u.highlightedCode=t.data,n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,i&&i.call(u.element),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},c.postMessage(JSON.stringify({language:u.language,code:u.code,immediateClose:!0}))}else u.highlightedCode=n.highlight(u.code,u.grammar,u.language),n.hooks.run("before-insert",u),u.element.innerHTML=u.highlightedCode,i&&i.call(e),n.hooks.run("after-highlight",u),n.hooks.run("complete",u)},highlight:function(t,e,i){var o=n.tokenize(t,e);return r.stringify(n.util.encode(o),i)},tokenize:function(t,e,r){var i=n.Token,o=[t],a=e.rest;if(a){for(var s in a)e[s]=a[s];delete e.rest}t:for(var s in e)if(e.hasOwnProperty(s)&&e[s]){var l=e[s];l="Array"===n.util.type(l)?l:[l];for(var u=0;u<l.length;++u){var c=l[u],f=c.inside,d=!!c.lookbehind,h=!!c.greedy,p=0,g=c.alias;if(h&&!c.pattern.global){var v=c.pattern.toString().match(/[imuy]*$/)[0];c.pattern=RegExp(c.pattern.source,v+"g")}c=c.pattern||c;for(var m=0,y=0;m<o.length;y+=o[m].length,++m){var x=o[m];if(o.length>t.length)break t;if(!(x instanceof i)){c.lastIndex=0;var b=c.exec(x),w=1;if(!b&&h&&m!=o.length-1){if(c.lastIndex=y,b=c.exec(t),!b)break;for(var k=b.index+(d?b[1].length:0),M=b.index+b[0].length,C=m,S=y,A=o.length;C<A&&S<M;++C)S+=o[C].length,k>=S&&(++m,y=S);if(o[m]instanceof i||o[C-1].greedy)continue;w=C-m,x=t.slice(y,S),b.index-=y}if(b){d&&(p=b[1].length);var k=b.index+p,b=b[0].slice(p),M=k+b.length,_=x.slice(0,k),L=x.slice(M),T=[m,w];_&&T.push(_);var E=new i(s,f?n.tokenize(b,f):b,g,b,h);T.push(E),L&&T.push(L),Array.prototype.splice.apply(o,T)}}}}}return o},hooks:{all:{},add:function(t,e){var r=n.hooks.all;r[t]=r[t]||[],r[t].push(e)},run:function(t,e){var r=n.hooks.all[t];if(r&&r.length)for(var i,o=0;i=r[o++];)i(e)}}},r=n.Token=function(t,e,n,r,i){this.type=t,this.content=e,this.alias=n,this.length=0|(r||"").length,this.greedy=!!i};if(r.stringify=function(t,e,i){if("string"==typeof t)return t;if("Array"===n.util.type(t))return t.map(function(n){return r.stringify(n,e,t)}).join("");var o={type:t.type,content:r.stringify(t.content,e,i),tag:"span",classes:["token",t.type],attributes:{},language:e,parent:i};if("comment"==o.type&&(o.attributes.spellcheck="true"),t.alias){var a="Array"===n.util.type(t.alias)?t.alias:[t.alias];Array.prototype.push.apply(o.classes,a)}n.hooks.run("wrap",o);var s=Object.keys(o.attributes).map(function(t){return t+'="'+(o.attributes[t]||"").replace(/"/g,"&quot;")+'"'}).join(" ");return"<"+o.tag+' class="'+o.classes.join(" ")+'"'+(s?" "+s:"")+">"+o.content+"</"+o.tag+">"},!_self.document)return _self.addEventListener?(_self.addEventListener("message",function(t){var e=JSON.parse(t.data),r=e.language,i=e.code,o=e.immediateClose;_self.postMessage(n.highlight(i,n.languages[r],r)),o&&_self.close()},!1),_self.Prism):_self.Prism;var i=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return i&&(n.filename=i.src,document.addEventListener&&!i.hasAttribute("data-manual")&&("loading"!==document.readyState?window.requestAnimationFrame?window.requestAnimationFrame(n.highlightAll):window.setTimeout(n.highlightAll,16):document.addEventListener("DOMContentLoaded",n.highlightAll))),_self.Prism}();"undefined"!=typeof module&&module.exports&&(module.exports=Prism),"undefined"!=typeof global&&(global.Prism=Prism),Prism.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/i,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},Prism.hooks.add("wrap",function(t){"entity"===t.type&&(t.attributes.title=t.content.replace(/&amp;/,"&"))}),Prism.languages.xml=Prism.languages.markup,Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:{pattern:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},Prism.languages.css.atrule.inside.rest=Prism.util.clone(Prism.languages.css),Prism.languages.markup&&(Prism.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:Prism.languages.css,alias:"language-css"}}),Prism.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:Prism.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:Prism.languages.css}},alias:"language-css"}},Prism.languages.markup.tag)),Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript,function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(){var t={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.forEach&&Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(e){for(var n,r=e.getAttribute("data-src"),i=e,o=/\blang(?:uage)?-(?!\*)(\w+)\b/i;i&&!o.test(i.className);)i=i.parentNode;if(i&&(n=(e.className.match(o)||[,""])[1]),!n){var a=(r.match(/\.(\w+)$/)||[,""])[1];n=t[a]||a}var s=document.createElement("code");s.className="language-"+n,e.textContent="",s.textContent="Loading",e.appendChild(s);var l=new XMLHttpRequest;l.open("GET",r,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?(s.textContent=l.responseText,Prism.highlightElement(s)):l.status>=400?s.textContent=" Error "+l.status+" while fetching file: "+l.statusText:s.textContent=" Error: File does not exist or is empty")},l.send(null)})},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight))}(),Prism.languages.javascript=Prism.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),Prism.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}}}),Prism.languages.markup&&Prism.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:Prism.languages.javascript,alias:"language-javascript"}}),Prism.languages.js=Prism.languages.javascript,Prism.languages.json={property:/"(?:\\.|[^|"])*"(?=\s*:)/gi,string:/"(?!:)(?:\\.|[^|"])*"(?!:)/g,number:/\b-?(0x[\dA-Fa-f]+|\d*\.?\d+([Ee][+-]?\d+)?)\b/g,punctuation:/[{}[\]);,]/g,operator:/:/g,boolean:/\b(true|false)\b/gi,null:/\bnull\b/gi},Prism.languages.jsonp=Prism.languages.json,Prism.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:{pattern:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},Prism.languages.css.atrule.inside.rest=Prism.util.clone(Prism.languages.css),Prism.languages.markup&&(Prism.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:Prism.languages.css,alias:"language-css"}}),Prism.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:Prism.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:Prism.languages.css}},alias:"language-css"}},Prism.languages.markup.tag)),Prism.languages.yaml={scalar:{pattern:/([\-:]\s*(![^\s]+)?[ \t]*[|>])[ \t]*(?:((?:\r?\n|\r)[ \t]+)[^\r\n]+(?:\3[^\r\n]+)*)/,lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:/(\s*(?:^|[:\-,[{\r\n?])[ \t]*(![^\s]+)?[ \t]*)[^\r\n{[\]},#\s]+?(?=\s*:\s)/,lookbehind:!0,alias:"atrule"},directive:{pattern:/(^[ \t]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)(\d{4}-\d\d?-\d\d?([tT]|[ \t]+)\d\d?:\d{2}:\d{2}(\.\d*)?[ \t]*(Z|[-+]\d\d?(:\d{2})?)?|\d{4}-\d{2}-\d{2}|\d\d?:\d{2}(:\d{2}(\.\d*)?)?)(?=[ \t]*($|,|]|}))/m,lookbehind:!0,alias:"number"},boolean:{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)(true|false)[ \t]*(?=$|,|]|})/im,lookbehind:!0,alias:"important"},null:{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)(null|~)[ \t]*(?=$|,|]|})/im,lookbehind:!0,alias:"important"},string:{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')(?=[ \t]*($|,|]|}))/m,lookbehind:!0},number:{pattern:/([:\-,[{]\s*(![^\s]+)?[ \t]*)[+\-]?(0x[\da-f]+|0o[0-7]+|(\d+\.?\d*|\.?\d+)(e[\+\-]?\d+)?|\.inf|\.nan)[ \t]*(?=$|,|]|})/im,lookbehind:!0},tag:/![^\s]+/,important:/[&*][\w]+/,punctuation:/---|[:[\]{}\-,|>?]|\.\.\./},function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.CodeMirror=e()}(this,function(){"use strict";function t(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}function e(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function n(t,n){return e(t).appendChild(n)}function r(t,e,n,r){var i=document.createElement(t);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof e)i.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function i(t,e){if(3==e.nodeType&&(e=e.parentNode),t.contains)return t.contains(e);do if(11==e.nodeType&&(e=e.host),e==t)return!0;while(e=e.parentNode)}function o(){var t;try{t=document.activeElement}catch(e){t=document.body||null}for(;t&&t.root&&t.root.activeElement;)t=t.root.activeElement;return t}function a(e,n){var r=e.className;t(n).test(r)||(e.className+=(r?" ":"")+n)}function s(e,n){for(var r=e.split(" "),i=0;i<r.length;i++)r[i]&&!t(r[i]).test(n)&&(n+=" "+r[i]);return n}function l(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function u(t,e,n){e||(e={});for(var r in t)!t.hasOwnProperty(r)||n===!1&&e.hasOwnProperty(r)||(e[r]=t[r]);return e}function c(t,e,n,r,i){null==e&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));for(var o=r||0,a=i||0;;){var s=t.indexOf("\t",o);if(s<0||s>=e)return a+(e-o);a+=s-o,a+=n-a%n,o=s+1}}function f(t,e){for(var n=0;n<t.length;++n)if(t[n]==e)return n;return-1}function d(t,e,n){for(var r=0,i=0;;){var o=t.indexOf("\t",r);o==-1&&(o=t.length);var a=o-r;if(o==t.length||i+a>=e)return r+Math.min(a,e-i);if(i+=o-r,i+=n-i%n,r=o+1,i>=e)return r}}function h(t){for(;Ca.length<=t;)Ca.push(p(Ca)+" ");return Ca[t]}function p(t){return t[t.length-1]}function g(t,e){for(var n=[],r=0;r<t.length;r++)n[r]=e(t[r],r);return n}function v(t,e,n){for(var r=0,i=n(e);r<t.length&&n(t[r])<=i;)r++;t.splice(r,0,e)}function m(){}function y(t,e){var n;return Object.create?n=Object.create(t):(m.prototype=t,n=new m),e&&u(e,n),n}function x(t){return/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Sa.test(t))}function b(t,e){return e?!!(e.source.indexOf("\\w")>-1&&x(t))||e.test(t):x(t)}function w(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}function k(t){return t.charCodeAt(0)>=768&&Aa.test(t)}function M(t,e,n){for(;(n<0?e>0:e<t.length)&&k(t.charAt(e));)e+=n;return e}function C(t,e,n){for(;;){if(Math.abs(e-n)<=1)return t(e)?e:n;var r=Math.floor((e+n)/2);t(r)?n=r:e=r}}function S(t,e,n){var i=this;this.input=n,i.scrollbarFiller=r("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=r("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=r("div",null,"CodeMirror-code"),i.selectionDiv=r("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=r("div",null,"CodeMirror-cursors"),i.measure=r("div",null,"CodeMirror-measure"),i.lineMeasure=r("div",null,"CodeMirror-measure"),i.lineSpace=r("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=r("div",[r("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=r("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=r("div",null,null,"position: absolute; height: "+xa+"px; width: 1px;"),i.gutters=r("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=r("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=r("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),Zo&&Ko<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),Qo||Uo&&aa||(i.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(i.wrapper):t(i.wrapper)),i.viewFrom=i.viewTo=e.first,i.reportedViewFrom=i.reportedViewTo=e.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function A(t,e){if(e-=t.first,e<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var n=t;!n.lines;)for(var r=0;;++r){var i=n.children[r],o=i.chunkSize();if(e<o){n=i;break}e-=o}return n.lines[e]}function _(t,e,n){var r=[],i=e.line;return t.iter(e.line,n.line+1,function(t){var o=t.text;i==n.line&&(o=o.slice(0,n.ch)),i==e.line&&(o=o.slice(e.ch)),r.push(o),++i}),r}function L(t,e,n){var r=[];return t.iter(e,n,function(t){r.push(t.text)}),r}function T(t,e){var n=e-t.height;if(n)for(var r=t;r;r=r.parent)r.height+=n}function E(t){if(null==t.parent)return null;for(var e=t.parent,n=f(e.lines,t),r=e.parent;r;e=r,r=r.parent)for(var i=0;r.children[i]!=e;++i)n+=r.children[i].chunkSize();return n+e.first}function N(t,e){var n=t.first;t:do{for(var r=0;r<t.children.length;++r){var i=t.children[r],o=i.height;if(e<o){t=i;continue t}e-=o,n+=i.chunkSize()}return n}while(!t.lines);for(var a=0;a<t.lines.length;++a){var s=t.lines[a],l=s.height;if(e<l)break;e-=l}return n+a}function P(t,e){return e>=t.first&&e<t.first+t.size}function F(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function O(t,e,n){return void 0===n&&(n=null),this instanceof O?(this.line=t,this.ch=e,void(this.sticky=n)):new O(t,e,n)}function W(t,e){return t.line-e.line||t.ch-e.ch}function D(t,e){return t.sticky==e.sticky&&0==W(t,e)}function z(t){return O(t.line,t.ch)}function H(t,e){return W(t,e)<0?e:t}function I(t,e){return W(t,e)<0?t:e}function R(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function B(t,e){if(e.line<t.first)return O(t.first,0);var n=t.first+t.size-1;return e.line>n?O(n,A(t,n).text.length):j(e,A(t,e.line).text.length)}function j(t,e){var n=t.ch;return null==n||n>e?O(t.line,e):n<0?O(t.line,0):t}function V(t,e){for(var n=[],r=0;r<e.length;r++)n[r]=B(t,e[r]);return n}function q(){_a=!0}function X(){La=!0}function U(t,e,n){this.marker=t,this.from=e,this.to=n}function Y(t,e){if(t)for(var n=0;n<t.length;++n){var r=t[n];if(r.marker==e)return r}}function G(t,e){for(var n,r=0;r<t.length;++r)t[r]!=e&&(n||(n=[])).push(t[r]);return n}function $(t,e){t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],e.marker.attachLine(t)}function Z(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],a=o.marker,s=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);if(s||o.from==e&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var l=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);(r||(r=[])).push(new U(a,o.from,l?null:o.to))}}return r}function K(t,e,n){var r;if(t)for(var i=0;i<t.length;++i){var o=t[i],a=o.marker,s=null==o.to||(a.inclusiveRight?o.to>=e:o.to>e);if(s||o.from==e&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var l=null==o.from||(a.inclusiveLeft?o.from<=e:o.from<e);(r||(r=[])).push(new U(a,l?null:o.from-e,null==o.to?null:o.to-e))}}return r}function Q(t,e){if(e.full)return null;var n=P(t,e.from.line)&&A(t,e.from.line).markedSpans,r=P(t,e.to.line)&&A(t,e.to.line).markedSpans;if(!n&&!r)return null;var i=e.from.ch,o=e.to.ch,a=0==W(e.from,e.to),s=Z(n,i,a),l=K(r,o,a),u=1==e.text.length,c=p(e.text).length+(u?i:0);if(s)for(var f=0;f<s.length;++f){var d=s[f];if(null==d.to){var h=Y(l,d.marker);h?u&&(d.to=null==h.to?null:h.to+c):d.to=i}}if(l)for(var g=0;g<l.length;++g){var v=l[g];if(null!=v.to&&(v.to+=c),null==v.from){var m=Y(s,v.marker);m||(v.from=c,u&&(s||(s=[])).push(v))}else v.from+=c,u&&(s||(s=[])).push(v)}s&&(s=J(s)),l&&l!=s&&(l=J(l));var y=[s];if(!u){var x,b=e.text.length-2;if(b>0&&s)for(var w=0;w<s.length;++w)null==s[w].to&&(x||(x=[])).push(new U(s[w].marker,null,null));for(var k=0;k<b;++k)y.push(x);y.push(l)}return y}function J(t){for(var e=0;e<t.length;++e){var n=t[e];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&t.splice(e--,1)}return t.length?t:null}function tt(t,e,n){var r=null;if(t.iter(e.line,n.line+1,function(t){if(t.markedSpans)for(var e=0;e<t.markedSpans.length;++e){var n=t.markedSpans[e].marker;!n.readOnly||r&&f(r,n)!=-1||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:e,to:n}],o=0;o<r.length;++o)for(var a=r[o],s=a.find(0),l=0;l<i.length;++l){var u=i[l];if(!(W(u.to,s.from)<0||W(u.from,s.to)>0)){var c=[l,1],d=W(u.from,s.from),h=W(u.to,s.to);(d<0||!a.inclusiveLeft&&!d)&&c.push({from:u.from,to:s.from}),(h>0||!a.inclusiveRight&&!h)&&c.push({from:s.to,to:u.to}),i.splice.apply(i,c),l+=c.length-3}}return i}function et(t){var e=t.markedSpans;if(e){for(var n=0;n<e.length;++n)e[n].marker.detachLine(t);t.markedSpans=null}}function nt(t,e){if(e){for(var n=0;n<e.length;++n)e[n].marker.attachLine(t);t.markedSpans=e}}function rt(t){return t.inclusiveLeft?-1:0}function it(t){return t.inclusiveRight?1:0}function ot(t,e){var n=t.lines.length-e.lines.length;if(0!=n)return n;var r=t.find(),i=e.find(),o=W(r.from,i.from)||rt(t)-rt(e);if(o)return-o;var a=W(r.to,i.to)||it(t)-it(e);return a?a:e.id-t.id}function at(t,e){var n,r=La&&t.markedSpans;if(r)for(var i=void 0,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&null==(e?i.from:i.to)&&(!n||ot(n,i.marker)<0)&&(n=i.marker);return n}function st(t){return at(t,!0)}function lt(t){return at(t,!1)}function ut(t,e,n,r,i){var o=A(t,e),a=La&&o.markedSpans;if(a)for(var s=0;s<a.length;++s){var l=a[s];if(l.marker.collapsed){var u=l.marker.find(0),c=W(u.from,n)||rt(l.marker)-rt(i),f=W(u.to,r)||it(l.marker)-it(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?W(u.to,n)>=0:W(u.to,n)>0)||c>=0&&(l.marker.inclusiveRight&&i.inclusiveLeft?W(u.from,r)<=0:W(u.from,r)<0)))return!0}}}function ct(t){for(var e;e=st(t);)t=e.find(-1,!0).line;return t}function ft(t){for(var e;e=lt(t);)t=e.find(1,!0).line;return t}function dt(t){for(var e,n;e=lt(t);)t=e.find(1,!0).line,(n||(n=[])).push(t);return n}function ht(t,e){var n=A(t,e),r=ct(n);return n==r?e:E(r)}function pt(t,e){if(e>t.lastLine())return e;var n,r=A(t,e);if(!gt(t,r))return e;for(;n=lt(r);)r=n.find(1,!0).line;return E(r)+1}function gt(t,e){var n=La&&e.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&vt(t,e,r))return!0}}function vt(t,e,n){if(null==n.to){var r=n.marker.find(1,!0);return vt(t,r.line,Y(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==e.text.length)return!0;for(var i=void 0,o=0;o<e.markedSpans.length;++o)if(i=e.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&vt(t,e,i))return!0}function mt(t){t=ct(t);for(var e=0,n=t.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==t)break;e+=i.height}for(var o=n.parent;o;n=o,o=n.parent)for(var a=0;a<o.children.length;++a){var s=o.children[a];if(s==n)break;e+=s.height}return e}function yt(t){if(0==t.height)return 0;for(var e,n=t.text.length,r=t;e=st(r);){var i=e.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=t;e=lt(r);){var o=e.find(0,!0);n-=r.text.length-o.from.ch,r=o.to.line,n+=r.text.length-o.to.ch}return n}function xt(t){var e=t.display,n=t.doc;e.maxLine=A(n,n.first),e.maxLineLength=yt(e.maxLine),e.maxLineChanged=!0,n.iter(function(t){var n=yt(t);n>e.maxLineLength&&(e.maxLineLength=n,e.maxLine=t)})}function bt(t,e,n,r){if(!t)return r(e,n,"ltr");for(var i=!1,o=0;o<t.length;++o){var a=t[o];(a.from<n&&a.to>e||e==n&&a.to==e)&&(r(Math.max(a.from,e),Math.min(a.to,n),1==a.level?"rtl":"ltr"),i=!0)}i||r(e,n,"ltr")}function wt(t,e,n){var r;Ta=null;for(var i=0;i<t.length;++i){var o=t[i];if(o.from<e&&o.to>e)return i;o.to==e&&(o.from!=o.to&&"before"==n?r=i:Ta=i),o.from==e&&(o.from!=o.to&&"before"!=n?r=i:Ta=i)}return null!=r?r:Ta}function kt(t){var e=t.order;return null==e&&(e=t.order=Ea(t.text)),e}function Mt(t,e,n){var r=M(t.text,e+n,n);return r<0||r>t.text.length?null:r}function Ct(t,e,n){var r=Mt(t,e.ch,n);return null==r?null:new O(e.line,r,n<0?"after":"before")}function St(t,e,n,r,i){if(t){var o=kt(n);if(o){var a,s=i<0?p(o):o[0],l=i<0==(1==s.level),u=l?"after":"before";if(s.level>0){var c=$e(e,n);a=i<0?n.text.length-1:0;var f=Ze(e,c,a).top;a=C(function(t){return Ze(e,c,t).top==f},i<0==(1==s.level)?s.from:s.to-1,a),"before"==u&&(a=Mt(n,a,1,!0))}else a=i<0?s.to:s.from;return new O(r,a,u)}}return new O(r,i<0?n.text.length:0,i<0?"before":"after")}function At(t,e,n,r){var i=kt(e);if(!i)return Ct(e,n,r);n.ch>=e.text.length?(n.ch=e.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=wt(i,n.ch,n.sticky),a=i[o];if(a.level%2==0&&(r>0?a.to>n.ch:a.from<n.ch))return Ct(e,n,r);var s,l=function(t,n){return Mt(e,t instanceof O?t.ch:t,n)},u=function(n){return t.options.lineWrapping?(s=s||$e(t,e),gn(t,e,s,n)):{begin:0,end:e.text.length}},c=u("before"==n.sticky?l(n,-1):n.ch);if(a.level%2==1){var f=l(n,-r);if(null!=f&&(r>0?f>=a.from&&f>=c.begin:f<=a.to&&f<=c.end)){var d=r<0?"before":"after";return new O(n.line,f,d)}}var h=function(t,e,r){for(var o=function(t,e){return e?new O(n.line,l(t,1),"before"):new O(n.line,t,"after")};t>=0&&t<i.length;t+=e){var a=i[t],s=e>0==(1!=a.level),u=s?r.begin:l(r.end,-1);if(a.from<=u&&u<a.to)return o(u,s);if(u=s?a.from:l(a.to,-1),r.begin<=u&&u<r.end)return o(u,s)}},p=h(o+r,r,c);if(p)return p;var g=r>0?c.end:l(c.begin,-1);return null==g||r>0&&g==e.text.length||!(p=h(r>0?0:i.length-1,r,u(g)))?null:p}function _t(t,e){return t._handlers&&t._handlers[e]||Na}function Lt(t,e,n){if(t.removeEventListener)t.removeEventListener(e,n,!1);else if(t.detachEvent)t.detachEvent("on"+e,n);else{var r=t._handlers,i=r&&r[e];if(i){var o=f(i,n);o>-1&&(r[e]=i.slice(0,o).concat(i.slice(o+1)))}}}function Tt(t,e){var n=_t(t,e);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function Et(t,e,n){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),Tt(t,n||e.type,t,e),Dt(e)||e.codemirrorIgnore}function Nt(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var n=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),r=0;r<e.length;++r)f(n,e[r])==-1&&n.push(e[r])}function Pt(t,e){return _t(t,e).length>0}function Ft(t){t.prototype.on=function(t,e){Pa(this,t,e)},t.prototype.off=function(t,e){Lt(this,t,e)}}function Ot(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Wt(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Dt(t){return null!=t.defaultPrevented?t.defaultPrevented:0==t.returnValue}function zt(t){Ot(t),Wt(t)}function Ht(t){return t.target||t.srcElement}function It(t){var e=t.which;return null==e&&(1&t.button?e=1:2&t.button?e=3:4&t.button&&(e=2)),sa&&t.ctrlKey&&1==e&&(e=3),e}function Rt(t){if(null==ma){var e=r("span","");n(t,r("span",[e,document.createTextNode("x")])),0!=t.firstChild.offsetHeight&&(ma=e.offsetWidth<=1&&e.offsetHeight>2&&!(Zo&&Ko<8))}var i=ma?r("span",""):r("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Bt(t){if(null!=ya)return ya;var r=n(t,document.createTextNode("AA")),i=fa(r,0,1).getBoundingClientRect(),o=fa(r,1,2).getBoundingClientRect();return e(t),!(!i||i.left==i.right)&&(ya=o.right-i.right<3)}function jt(t){if(null!=za)return za;var e=n(t,r("span","x")),i=e.getBoundingClientRect(),o=fa(e,0,1).getBoundingClientRect();return za=Math.abs(i.left-o.left)>1}function Vt(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Ha[t]=e}function qt(t,e){Ia[t]=e}function Xt(t){if("string"==typeof t&&Ia.hasOwnProperty(t))t=Ia[t];else if(t&&"string"==typeof t.name&&Ia.hasOwnProperty(t.name)){var e=Ia[t.name];"string"==typeof e&&(e={name:e}),t=y(e,t),t.name=e.name}else{if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Xt("application/xml");if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Xt("application/json")}return"string"==typeof t?{name:t}:t||{name:"null"}}function Ut(t,e){e=Xt(e);var n=Ha[e.name];if(!n)return Ut(t,"text/plain");var r=n(t,e);if(Ra.hasOwnProperty(e.name)){var i=Ra[e.name];for(var o in i)i.hasOwnProperty(o)&&(r.hasOwnProperty(o)&&(r["_"+o]=r[o]),r[o]=i[o])}if(r.name=e.name,e.helperType&&(r.helperType=e.helperType),e.modeProps)for(var a in e.modeProps)r[a]=e.modeProps[a];return r}function Yt(t,e){var n=Ra.hasOwnProperty(t)?Ra[t]:Ra[t]={};u(e,n)}function Gt(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var n={};for(var r in e){var i=e[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function $t(t,e){for(var n;t.innerMode&&(n=t.innerMode(e),n&&n.mode!=t);)e=n.state,t=n.mode;return n||{mode:t,state:e}}function Zt(t,e,n){return!t.startState||t.startState(e,n)}function Kt(t,e,n,r){var i=[t.state.modeGen],o={};oe(t,e.text,t.doc.mode,n,function(t,e){return i.push(t,e)},o,r);for(var a=function(n){var r=t.state.overlays[n],a=1,s=0;oe(t,e.text,r.mode,!0,function(t,e){for(var n=a;s<t;){var o=i[a];o>t&&i.splice(a,1,t,i[a+1],o),a+=2,s=Math.min(t,o)}if(e)if(r.opaque)i.splice(n,a-n,t,"overlay "+e),a=n+2;else for(;n<a;n+=2){var l=i[n+1];i[n+1]=(l?l+" ":"")+"overlay "+e}},o)},s=0;s<t.state.overlays.length;++s)a(s);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Qt(t,e,n){if(!e.styles||e.styles[0]!=t.state.modeGen){var r=Jt(t,E(e)),i=Kt(t,e,e.text.length>t.options.maxHighlightLength?Gt(t.doc.mode,r):r);e.stateAfter=r,e.styles=i.styles,i.classes?e.styleClasses=i.classes:e.styleClasses&&(e.styleClasses=null),n===t.doc.frontier&&t.doc.frontier++}return e.styles}function Jt(t,e,n){var r=t.doc,i=t.display;if(!r.mode.startState)return!0;var o=ae(t,e,n),a=o>r.first&&A(r,o-1).stateAfter;
return a=a?Gt(r.mode,a):Zt(r.mode),r.iter(o,e,function(n){te(t,n.text,a);var s=o==e-1||o%5==0||o>=i.viewFrom&&o<i.viewTo;n.stateAfter=s?Gt(r.mode,a):null,++o}),n&&(r.frontier=o),a}function te(t,e,n,r){var i=t.doc.mode,o=new Ba(e,t.options.tabSize);for(o.start=o.pos=r||0,""==e&&ee(i,n);!o.eol();)ne(i,o,n),o.start=o.pos}function ee(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var n=$t(t,e);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function ne(t,e,n,r){for(var i=0;i<10;i++){r&&(r[0]=$t(t,n).mode);var o=t.token(e,n);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}function re(t,e,n,r){var i,o=function(t){return{start:f.start,end:f.pos,string:f.current(),type:i||null,state:t?Gt(a.mode,c):c}},a=t.doc,s=a.mode;e=B(a,e);var l,u=A(a,e.line),c=Jt(t,e.line,n),f=new Ba(u.text,t.options.tabSize);for(r&&(l=[]);(r||f.pos<e.ch)&&!f.eol();)f.start=f.pos,i=ne(s,f,c),r&&l.push(o(!0));return r?l:o()}function ie(t,e){if(t)for(;;){var n=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;t=t.slice(0,n.index)+t.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==e[r]?e[r]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(e[r])||(e[r]+=" "+n[2])}return t}function oe(t,e,n,r,i,o,a){var s=n.flattenSpans;null==s&&(s=t.options.flattenSpans);var l,u=0,c=null,f=new Ba(e,t.options.tabSize),d=t.options.addModeClass&&[null];for(""==e&&ie(ee(n,r),o);!f.eol();){if(f.pos>t.options.maxHighlightLength?(s=!1,a&&te(t,e,r,f.pos),f.pos=e.length,l=null):l=ie(ne(n,f,r,d),o),d){var h=d[0].name;h&&(l="m-"+(l?h+" "+l:h))}if(!s||c!=l){for(;u<f.start;)u=Math.min(f.start,u+5e3),i(u,c);c=l}f.start=f.pos}for(;u<f.pos;){var p=Math.min(f.pos,u+5e3);i(p,c),u=p}}function ae(t,e,n){for(var r,i,o=t.doc,a=n?-1:e-(t.doc.mode.innerMode?1e3:100),s=e;s>a;--s){if(s<=o.first)return o.first;var l=A(o,s-1);if(l.stateAfter&&(!n||s<=o.frontier))return s;var u=c(l.text,null,t.options.tabSize);(null==i||r>u)&&(i=s-1,r=u)}return i}function se(t,e,n,r){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),null!=t.order&&(t.order=null),et(t),nt(t,n);var i=r?r(t):1;i!=t.height&&T(t,i)}function le(t){t.parent=null,et(t)}function ue(t,e){if(!t||/^\s*$/.test(t))return null;var n=e.addModeClass?Xa:qa;return n[t]||(n[t]=t.replace(/\S+/g,"cm-$&"))}function ce(t,e){var n=r("span",null,null,Qo?"padding-right: .1px":null),i={pre:r("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:(Zo||Qo)&&t.getOption("lineWrapping")};n.setAttribute("role","presentation"),i.pre.setAttribute("role","presentation"),e.measure={};for(var o=0;o<=(e.rest?e.rest.length:0);o++){var a=o?e.rest[o-1]:e.line,l=void 0;i.pos=0,i.addToken=de,Bt(t.display.measure)&&(l=kt(a))&&(i.addToken=pe(i.addToken,l)),i.map=[];var u=e!=t.display.externalMeasured&&E(a);ve(a,i,Qt(t,a,u)),a.styleClasses&&(a.styleClasses.bgClass&&(i.bgClass=s(a.styleClasses.bgClass,i.bgClass||"")),a.styleClasses.textClass&&(i.textClass=s(a.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Rt(t.display.measure))),0==o?(e.measure.map=i.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(i.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(Qo){var c=i.content.lastChild;(/\bcm-tab\b/.test(c.className)||c.querySelector&&c.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return Tt(t,"renderLine",t,e.line,i.pre),i.pre.className&&(i.textClass=s(i.pre.className,i.textClass||"")),i}function fe(t){var e=r("span","","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function de(t,e,n,i,o,a,s){if(e){var l,u=t.splitSpaces?he(e,t.trailingSpace):e,c=t.cm.state.specialChars,f=!1;if(c.test(e)){l=document.createDocumentFragment();for(var d=0;;){c.lastIndex=d;var p=c.exec(e),g=p?p.index-d:e.length-d;if(g){var v=document.createTextNode(u.slice(d,d+g));Zo&&Ko<9?l.appendChild(r("span",[v])):l.appendChild(v),t.map.push(t.pos,t.pos+g,v),t.col+=g,t.pos+=g}if(!p)break;d+=g+1;var m=void 0;if("\t"==p[0]){var y=t.cm.options.tabSize,x=y-t.col%y;m=l.appendChild(r("span",h(x),"cm-tab")),m.setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),t.col+=x}else"\r"==p[0]||"\n"==p[0]?(m=l.appendChild(r("span","\r"==p[0]?"":"","cm-invalidchar")),m.setAttribute("cm-text",p[0]),t.col+=1):(m=t.cm.options.specialCharPlaceholder(p[0]),m.setAttribute("cm-text",p[0]),Zo&&Ko<9?l.appendChild(r("span",[m])):l.appendChild(m),t.col+=1);t.map.push(t.pos,t.pos+1,m),t.pos++}}else t.col+=e.length,l=document.createTextNode(u),t.map.push(t.pos,t.pos+e.length,l),Zo&&Ko<9&&(f=!0),t.pos+=e.length;if(t.trailingSpace=32==u.charCodeAt(e.length-1),n||i||o||f||s){var b=n||"";i&&(b+=i),o&&(b+=o);var w=r("span",[l],b,s);return a&&(w.title=a),t.content.appendChild(w)}t.content.appendChild(l)}}function he(t,e){if(t.length>1&&!/  /.test(t))return t;for(var n=e,r="",i=0;i<t.length;i++){var o=t.charAt(i);" "!=o||!n||i!=t.length-1&&32!=t.charCodeAt(i+1)||(o=""),r+=o,n=" "==o}return r}function pe(t,e){return function(n,r,i,o,a,s,l){i=i?i+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+r.length;;){for(var f=void 0,d=0;d<e.length&&(f=e[d],!(f.to>u&&f.from<=u));d++);if(f.to>=c)return t(n,r,i,o,a,s,l);t(n,r.slice(0,f.to-u),i,o,null,s,l),o=null,r=r.slice(f.to-u),u=f.to}}}function ge(t,e,n,r){var i=!r&&n.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!r&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function ve(t,e,n){var r=t.markedSpans,i=t.text,o=0;if(r)for(var a,s,l,u,c,f,d,h=i.length,p=0,g=1,v="",m=0;;){if(m==p){l=u=c=f=s="",d=null,m=1/0;for(var y=[],x=void 0,b=0;b<r.length;++b){var w=r[b],k=w.marker;"bookmark"==k.type&&w.from==p&&k.widgetNode?y.push(k):w.from<=p&&(null==w.to||w.to>p||k.collapsed&&w.to==p&&w.from==p)?(null!=w.to&&w.to!=p&&m>w.to&&(m=w.to,u=""),k.className&&(l+=" "+k.className),k.css&&(s=(s?s+";":"")+k.css),k.startStyle&&w.from==p&&(c+=" "+k.startStyle),k.endStyle&&w.to==m&&(x||(x=[])).push(k.endStyle,w.to),k.title&&!f&&(f=k.title),k.collapsed&&(!d||ot(d.marker,k)<0)&&(d=w)):w.from>p&&m>w.from&&(m=w.from)}if(x)for(var M=0;M<x.length;M+=2)x[M+1]==m&&(u+=" "+x[M]);if(!d||d.from==p)for(var C=0;C<y.length;++C)ge(e,0,y[C]);if(d&&(d.from||0)==p){if(ge(e,(null==d.to?h+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=h)break;for(var S=Math.min(h,m);;){if(v){var A=p+v.length;if(!d){var _=A>S?v.slice(0,S-p):v;e.addToken(e,_,a?a+l:l,c,p+_.length==m?u:"",f,s)}if(A>=S){v=v.slice(S-p),p=S;break}p=A,c=""}v=i.slice(o,o=n[g++]),a=ue(n[g++],e.cm.options)}}else for(var L=1;L<n.length;L+=2)e.addToken(e,i.slice(o,o=n[L]),ue(n[L+1],e.cm.options))}function me(t,e,n){this.line=e,this.rest=dt(e),this.size=this.rest?E(p(this.rest))-n+1:1,this.node=this.text=null,this.hidden=gt(t,e)}function ye(t,e,n){for(var r,i=[],o=e;o<n;o=r){var a=new me(t.doc,A(t.doc,o),o);r=o+a.size,i.push(a)}return i}function xe(t){Ua?Ua.ops.push(t):t.ownsGroup=Ua={ops:[t],delayedCallbacks:[]}}function be(t){var e=t.delayedCallbacks,n=0;do{for(;n<e.length;n++)e[n].call(null);for(var r=0;r<t.ops.length;r++){var i=t.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<e.length)}function we(t,e){var n=t.ownsGroup;if(n)try{be(n)}finally{Ua=null,e(n)}}function ke(t,e){var n=_t(t,e);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);Ua?r=Ua.delayedCallbacks:Ya?r=Ya:(r=Ya=[],setTimeout(Me,0));for(var o=function(t){r.push(function(){return n[t].apply(null,i)})},a=0;a<n.length;++a)o(a)}}function Me(){var t=Ya;Ya=null;for(var e=0;e<t.length;++e)t[e]()}function Ce(t,e,n,r){for(var i=0;i<e.changes.length;i++){var o=e.changes[i];"text"==o?Le(t,e):"gutter"==o?Ee(t,e,n,r):"class"==o?Te(e):"widget"==o&&Ne(t,e,r)}e.changes=null}function Se(t){return t.node==t.text&&(t.node=r("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),Zo&&Ko<8&&(t.node.style.zIndex=2)),t.node}function Ae(t){var e=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(e&&(e+=" CodeMirror-linebackground"),t.background)e?t.background.className=e:(t.background.parentNode.removeChild(t.background),t.background=null);else if(e){var n=Se(t);t.background=n.insertBefore(r("div",null,e),n.firstChild)}}function _e(t,e){var n=t.display.externalMeasured;return n&&n.line==e.line?(t.display.externalMeasured=null,e.measure=n.measure,n.built):ce(t,e)}function Le(t,e){var n=e.text.className,r=_e(t,e);e.text==e.node&&(e.node=r.pre),e.text.parentNode.replaceChild(r.pre,e.text),e.text=r.pre,r.bgClass!=e.bgClass||r.textClass!=e.textClass?(e.bgClass=r.bgClass,e.textClass=r.textClass,Te(e)):n&&(e.text.className=n)}function Te(t){Ae(t),t.line.wrapClass?Se(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var e=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=e||""}function Ee(t,e,n,i){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var o=Se(e);e.gutterBackground=r("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),o.insertBefore(e.gutterBackground,e.text)}var a=e.line.gutterMarkers;if(t.options.lineNumbers||a){var s=Se(e),l=e.gutter=r("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(t.display.input.setUneditable(l),s.insertBefore(l,e.text),e.line.gutterClass&&(l.className+=" "+e.line.gutterClass),!t.options.lineNumbers||a&&a["CodeMirror-linenumbers"]||(e.lineNumber=l.appendChild(r("div",F(t.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),a)for(var u=0;u<t.options.gutters.length;++u){var c=t.options.gutters[u],f=a.hasOwnProperty(c)&&a[c];f&&l.appendChild(r("div",[f],"CodeMirror-gutter-elt","left: "+i.gutterLeft[c]+"px; width: "+i.gutterWidth[c]+"px"))}}}function Ne(t,e,n){e.alignable&&(e.alignable=null);for(var r=e.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&e.node.removeChild(r);Fe(t,e,n)}function Pe(t,e,n,r){var i=_e(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),Te(e),Ee(t,e,n,r),Fe(t,e,r),e.node}function Fe(t,e,n){if(Oe(t,e.line,e,n,!0),e.rest)for(var r=0;r<e.rest.length;r++)Oe(t,e.rest[r],e,n,!1)}function Oe(t,e,n,i,o){if(e.widgets)for(var a=Se(n),s=0,l=e.widgets;s<l.length;++s){var u=l[s],c=r("div",[u.node],"CodeMirror-linewidget");u.handleMouseEvents||c.setAttribute("cm-ignore-events","true"),We(u,c,n,i),t.display.input.setUneditable(c),o&&u.above?a.insertBefore(c,n.gutter||n.text):a.appendChild(c),ke(u,"redraw")}}function We(t,e,n,r){if(t.noHScroll){(n.alignable||(n.alignable=[])).push(e);var i=r.wrapperWidth;e.style.left=r.fixedPos+"px",t.coverGutter||(i-=r.gutterTotalWidth,e.style.paddingLeft=r.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-r.gutterTotalWidth+"px"))}function De(t){if(null!=t.height)return t.height;var e=t.doc.cm;if(!e)return 0;if(!i(document.body,t.node)){var o="position: relative;";t.coverGutter&&(o+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(o+="width: "+e.display.wrapper.clientWidth+"px;"),n(e.display.measure,r("div",[t.node],null,o))}return t.height=t.node.parentNode.offsetHeight}function ze(t,e){for(var n=Ht(e);n!=t.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==t.sizer&&n!=t.mover)return!0}function He(t){return t.lineSpace.offsetTop}function Ie(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function Re(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=n(t.measure,r("pre","x")),i=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,o={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(o.left)||isNaN(o.right)||(t.cachedPaddingH=o),o}function Be(t){return xa-t.display.nativeBarWidth}function je(t){return t.display.scroller.clientWidth-Be(t)-t.display.barWidth}function Ve(t){return t.display.scroller.clientHeight-Be(t)-t.display.barHeight}function qe(t,e,n){var r=t.options.lineWrapping,i=r&&je(t);if(!e.measure.heights||r&&e.measure.width!=i){var o=e.measure.heights=[];if(r){e.measure.width=i;for(var a=e.text.firstChild.getClientRects(),s=0;s<a.length-1;s++){var l=a[s],u=a[s+1];Math.abs(l.bottom-u.bottom)>2&&o.push((l.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}function Xe(t,e,n){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};for(var r=0;r<t.rest.length;r++)if(t.rest[r]==e)return{map:t.measure.maps[r],cache:t.measure.caches[r]};for(var i=0;i<t.rest.length;i++)if(E(t.rest[i])>n)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}function Ue(t,e){e=ct(e);var r=E(e),i=t.display.externalMeasured=new me(t.doc,e,r);i.lineN=r;var o=i.built=ce(t,i);return i.text=o.pre,n(t.display.lineMeasure,o.pre),i}function Ye(t,e,n,r){return Ze(t,$e(t,e),n,r)}function Ge(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[Cn(t,e)];var n=t.display.externalMeasured;return n&&e>=n.lineN&&e<n.lineN+n.size?n:void 0}function $e(t,e){var n=E(e),r=Ge(t,n);r&&!r.text?r=null:r&&r.changes&&(Ce(t,r,n,xn(t)),t.curOp.forceUpdate=!0),r||(r=Ue(t,e));var i=Xe(r,e,n);return{line:e,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Ze(t,e,n,r,i){e.before&&(n=-1);var o,a=n+(r||"");return e.cache.hasOwnProperty(a)?o=e.cache[a]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(qe(t,e.view,e.rect),e.hasHeights=!0),o=Je(t,e,n,r),o.bogus||(e.cache[a]=o)),{left:o.left,right:o.right,top:i?o.rtop:o.top,bottom:i?o.rbottom:o.bottom}}function Ke(t,e,n){for(var r,i,o,a,s,l,u=0;u<t.length;u+=3)if(s=t[u],l=t[u+1],e<s?(i=0,o=1,a="left"):e<l?(i=e-s,o=i+1):(u==t.length-3||e==l&&t[u+3]>e)&&(o=l-s,i=o-1,e>=l&&(a="right")),null!=i){if(r=t[u+2],s==l&&n==(r.insertLeft?"left":"right")&&(a=n),"left"==n&&0==i)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)r=t[(u-=3)+2],a="left";if("right"==n&&i==l-s)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)r=t[(u+=3)+2],a="right";break}return{node:r,start:i,end:o,collapse:a,coverStart:s,coverEnd:l}}function Qe(t,e){var n=Ga;if("left"==e)for(var r=0;r<t.length&&(n=t[r]).left==n.right;r++);else for(var i=t.length-1;i>=0&&(n=t[i]).left==n.right;i--);return n}function Je(t,e,n,r){var i,o=Ke(e.map,n,r),a=o.node,s=o.start,l=o.end,u=o.collapse;if(3==a.nodeType){for(var c=0;c<4;c++){for(;s&&k(e.line.text.charAt(o.coverStart+s));)--s;for(;o.coverStart+l<o.coverEnd&&k(e.line.text.charAt(o.coverStart+l));)++l;if(i=Zo&&Ko<9&&0==s&&l==o.coverEnd-o.coverStart?a.parentNode.getBoundingClientRect():Qe(fa(a,s,l).getClientRects(),r),i.left||i.right||0==s)break;l=s,s-=1,u="right"}Zo&&Ko<11&&(i=tn(t.display.measure,i))}else{s>0&&(u=r="right");var f;i=t.options.lineWrapping&&(f=a.getClientRects()).length>1?f["right"==r?f.length-1:0]:a.getBoundingClientRect()}if(Zo&&Ko<9&&!s&&(!i||!i.left&&!i.right)){var d=a.parentNode.getClientRects()[0];i=d?{left:d.left,right:d.left+yn(t.display),top:d.top,bottom:d.bottom}:Ga}for(var h=i.top-e.rect.top,p=i.bottom-e.rect.top,g=(h+p)/2,v=e.view.measure.heights,m=0;m<v.length-1&&!(g<v[m]);m++);var y=m?v[m-1]:0,x=v[m],b={left:("right"==u?i.right:i.left)-e.rect.left,right:("left"==u?i.left:i.right)-e.rect.left,top:y,bottom:x};return i.left||i.right||(b.bogus=!0),t.options.singleCursorHeightPerLine||(b.rtop=h,b.rbottom=p),b}function tn(t,e){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!jt(t))return e;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*n,right:e.right*n,top:e.top*r,bottom:e.bottom*r}}function en(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function nn(t){t.display.externalMeasure=null,e(t.display.lineMeasure);for(var n=0;n<t.display.view.length;n++)en(t.display.view[n])}function rn(t){nn(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function on(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function an(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function sn(t,e,n,r,i){if(!i&&e.widgets)for(var o=0;o<e.widgets.length;++o)if(e.widgets[o].above){var a=De(e.widgets[o]);n.top+=a,n.bottom+=a}if("line"==r)return n;r||(r="local");var s=mt(e);if("local"==r?s+=He(t.display):s-=t.display.viewOffset,"page"==r||"window"==r){var l=t.display.lineSpace.getBoundingClientRect();s+=l.top+("window"==r?0:an());var u=l.left+("window"==r?0:on());n.left+=u,n.right+=u}return n.top+=s,n.bottom+=s,n}function ln(t,e,n){if("div"==n)return e;var r=e.left,i=e.top;if("page"==n)r-=on(),i-=an();else if("local"==n||!n){var o=t.display.sizer.getBoundingClientRect();r+=o.left,i+=o.top}var a=t.display.lineSpace.getBoundingClientRect();return{left:r-a.left,top:i-a.top}}function un(t,e,n,r,i){return r||(r=A(t.doc,e.line)),sn(t,r,Ye(t,r,e.ch,i),n)}function cn(t,e,n,r,i,o){function a(e,a){var s=Ze(t,i,e,a?"right":"left",o);return a?s.left=s.right:s.right=s.left,sn(t,r,s,n)}function s(t,e,n){var r=l[e],i=r.level%2!=0;return a(n?t-1:t,i!=n)}r=r||A(t.doc,e.line),i||(i=$e(t,r));var l=kt(r),u=e.ch,c=e.sticky;if(u>=r.text.length?(u=r.text.length,c="before"):u<=0&&(u=0,c="after"),!l)return a("before"==c?u-1:u,"before"==c);var f=wt(l,u,c),d=Ta,h=s(u,f,"before"==c);return null!=d&&(h.other=s(u,d,"before"!=c)),h}function fn(t,e){var n=0;e=B(t.doc,e),t.options.lineWrapping||(n=yn(t.display)*e.ch);var r=A(t.doc,e.line),i=mt(r)+He(t.display);return{left:n,right:n,top:i,bottom:i+r.height}}function dn(t,e,n,r,i){var o=O(t,e,n);return o.xRel=i,r&&(o.outside=!0),o}function hn(t,e,n){var r=t.doc;if(n+=t.display.viewOffset,n<0)return dn(r.first,0,null,!0,-1);var i=N(r,n),o=r.first+r.size-1;if(i>o)return dn(r.first+r.size-1,A(r,o).text.length,null,!0,1);e<0&&(e=0);for(var a=A(r,i);;){var s=vn(t,a,i,e,n),l=lt(a),u=l&&l.find(0,!0);if(!l||!(s.ch>u.from.ch||s.ch==u.from.ch&&s.xRel>0))return s;i=E(a=u.to.line)}}function pn(t,e,n,r){var i=function(r){return sn(t,e,Ze(t,n,r),"line")},o=e.text.length,a=C(function(t){return i(t-1).bottom<=r},o,0);return o=C(function(t){return i(t).top>r},a,o),{begin:a,end:o}}function gn(t,e,n,r){var i=sn(t,e,Ze(t,n,r),"line").top;return pn(t,e,n,i)}function vn(t,e,n,r,i){i-=mt(e);var o,a=0,s=e.text.length,l=$e(t,e),u=kt(e);if(u){if(t.options.lineWrapping){var c;c=pn(t,e,l,i),a=c.begin,s=c.end,c}o=new O(n,a);var f,d,h=cn(t,o,"line",e,l).left,p=h<r?1:-1,g=h-r;do{if(f=g,d=o,o=At(t,e,o,p),null==o||o.ch<a||s<=("before"==o.sticky?o.ch-1:o.ch)){o=d;break}g=cn(t,o,"line",e,l).left-r}while(p<0!=g<0&&Math.abs(g)<=Math.abs(f));if(Math.abs(g)>Math.abs(f)){if(g<0==f<0)throw new Error("Broke out of infinite loop in coordsCharInner");o=d}}else{var v=C(function(n){var o=sn(t,e,Ze(t,l,n),"line");return o.top>i?(s=Math.min(n,s),!0):!(o.bottom<=i)&&(o.left>r||!(o.right<r)&&r-o.left<o.right-r)},a,s);v=M(e.text,v,1),o=new O(n,v,v==s?"before":"after")}var m=cn(t,o,"line",e,l);return(i<m.top||m.bottom<i)&&(o.outside=!0),o.xRel=r<m.left?-1:r>m.right?1:0,o}function mn(t){if(null!=t.cachedTextHeight)return t.cachedTextHeight;if(null==Va){Va=r("pre");for(var i=0;i<49;++i)Va.appendChild(document.createTextNode("x")),Va.appendChild(r("br"));Va.appendChild(document.createTextNode("x"))}n(t.measure,Va);var o=Va.offsetHeight/50;return o>3&&(t.cachedTextHeight=o),e(t.measure),o||1}function yn(t){if(null!=t.cachedCharWidth)return t.cachedCharWidth;var e=r("span","xxxxxxxxxx"),i=r("pre",[e]);n(t.measure,i);var o=e.getBoundingClientRect(),a=(o.right-o.left)/10;return a>2&&(t.cachedCharWidth=a),a||10}function xn(t){for(var e=t.display,n={},r={},i=e.gutters.clientLeft,o=e.gutters.firstChild,a=0;o;o=o.nextSibling,++a)n[t.options.gutters[a]]=o.offsetLeft+o.clientLeft+i,r[t.options.gutters[a]]=o.clientWidth;return{fixedPos:bn(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:e.wrapper.clientWidth}}function bn(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function wn(t){var e=mn(t.display),n=t.options.lineWrapping,r=n&&Math.max(5,t.display.scroller.clientWidth/yn(t.display)-3);return function(i){if(gt(t.doc,i))return 0;var o=0;if(i.widgets)for(var a=0;a<i.widgets.length;a++)i.widgets[a].height&&(o+=i.widgets[a].height);return n?o+(Math.ceil(i.text.length/r)||1)*e:o+e}}function kn(t){var e=t.doc,n=wn(t);e.iter(function(t){var e=n(t);e!=t.height&&T(t,e)})}function Mn(t,e,n,r){var i=t.display;if(!n&&"true"==Ht(e).getAttribute("cm-not-content"))return null;var o,a,s=i.lineSpace.getBoundingClientRect();try{o=e.clientX-s.left,a=e.clientY-s.top}catch(t){return null}var l,u=hn(t,o,a);if(r&&1==u.xRel&&(l=A(t.doc,u.line).text).length==u.ch){var f=c(l,l.length,t.options.tabSize)-l.length;u=O(u.line,Math.max(0,Math.round((o-Re(t.display).left)/yn(t.display))-f))}return u}function Cn(t,e){if(e>=t.display.viewTo)return null;if(e-=t.display.viewFrom,e<0)return null;for(var n=t.display.view,r=0;r<n.length;r++)if(e-=n[r].size,e<0)return r}function Sn(t){t.display.input.showSelection(t.display.input.prepareSelection())}function An(t,e){for(var n=t.doc,r={},i=r.cursors=document.createDocumentFragment(),o=r.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(e!==!1||a!=n.sel.primIndex){var s=n.sel.ranges[a];if(!(s.from().line>=t.display.viewTo||s.to().line<t.display.viewFrom)){var l=s.empty();(l||t.options.showCursorWhenSelecting)&&_n(t,s.head,i),l||Ln(t,s,o)}}return r}function _n(t,e,n){var i=cn(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),o=n.appendChild(r("div","","CodeMirror-cursor"));if(o.style.left=i.left+"px",o.style.top=i.top+"px",o.style.height=Math.max(0,i.bottom-i.top)*t.options.cursorHeight+"px",i.other){var a=n.appendChild(r("div","","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=i.other.left+"px",a.style.top=i.other.top+"px",a.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Ln(t,e,n){function i(t,e,n,i){e<0&&(e=0),e=Math.round(e),i=Math.round(i),l.appendChild(r("div",null,"CodeMirror-selected","position: absolute; left: "+t+"px;\n                             top: "+e+"px; width: "+(null==n?f-t:n)+"px;\n                             height: "+(i-e)+"px"))}function o(e,n,r){function o(n,r){return un(t,O(e,n),"div",u,r)}var a,l,u=A(s,e),d=u.text.length;return bt(kt(u),n||0,null==r?d:r,function(t,e,s){var u,h,p,g=o(t,"left");if(t==e)u=g,h=p=g.left;else{if(u=o(e-1,"right"),"rtl"==s){var v=g;g=u,u=v}h=g.left,p=u.right}null==n&&0==t&&(h=c),u.top-g.top>3&&(i(h,g.top,null,g.bottom),h=c,g.bottom<u.top&&i(h,g.bottom,null,u.top)),null==r&&e==d&&(p=f),(!a||g.top<a.top||g.top==a.top&&g.left<a.left)&&(a=g),(!l||u.bottom>l.bottom||u.bottom==l.bottom&&u.right>l.right)&&(l=u),h<c+1&&(h=c),i(h,u.top,p-h,u.bottom)}),{start:a,end:l}}var a=t.display,s=t.doc,l=document.createDocumentFragment(),u=Re(t.display),c=u.left,f=Math.max(a.sizerWidth,je(t)-a.sizer.offsetLeft)-u.right,d=e.from(),h=e.to();if(d.line==h.line)o(d.line,d.ch,h.ch);else{var p=A(s,d.line),g=A(s,h.line),v=ct(p)==ct(g),m=o(d.line,d.ch,v?p.text.length+1:null).end,y=o(h.line,v?0:null,h.ch).start;v&&(m.top<y.top-2?(i(m.right,m.top,null,m.bottom),i(c,y.top,y.left,y.bottom)):i(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&i(c,m.bottom,null,y.top)}n.appendChild(l)}function Tn(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var n=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){return e.cursorDiv.style.visibility=(n=!n)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function En(t){t.state.focused||(t.display.input.focus(),Pn(t))}function Nn(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,Fn(t))},100)}function Pn(t,e){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1),"nocursor"!=t.options.readOnly&&(t.state.focused||(Tt(t,"focus",t,e),t.state.focused=!0,a(t.display.wrapper,"CodeMirror-focused"),t.curOp||t.display.selForContextMenu==t.doc.sel||(t.display.input.reset(),Qo&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),Tn(t))}function Fn(t,e){t.state.delayingBlurEvent||(t.state.focused&&(Tt(t,"blur",t,e),t.state.focused=!1,pa(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function On(t){var e=t.display,n=e.view;if(e.alignWidgets||e.gutters.firstChild&&t.options.fixedGutter){for(var r=bn(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=r+"px",a=0;a<n.length;a++)if(!n[a].hidden){t.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var s=n[a].alignable;if(s)for(var l=0;l<s.length;l++)s[l].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=r+i+"px")}}function Wn(t){if(!t.options.lineNumbers)return!1;var e=t.doc,n=F(t.options,e.first+e.size-1),i=t.display;if(n.length!=i.lineNumChars){var o=i.measure.appendChild(r("div",[r("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),a=o.firstChild.offsetWidth,s=o.offsetWidth-a;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(a,i.lineGutter.offsetWidth-s)+1,i.lineNumWidth=i.lineNumInnerWidth+s,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",Ar(t),!0}return!1}function Dn(t){for(var e=t.display,n=e.lineDiv.offsetTop,r=0;r<e.view.length;r++){var i=e.view[r],o=void 0;if(!i.hidden){if(Zo&&Ko<8){var a=i.node.offsetTop+i.node.offsetHeight;o=a-n,n=a}else{var s=i.node.getBoundingClientRect();o=s.bottom-s.top}var l=i.line.height-o;if(o<2&&(o=mn(e)),(l>.001||l<-.001)&&(T(i.line,o),zn(i.line),i.rest))for(var u=0;u<i.rest.length;u++)zn(i.rest[u])}}}function zn(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e)t.widgets[e].height=t.widgets[e].node.parentNode.offsetHeight}function Hn(t,e,n){var r=n&&null!=n.top?Math.max(0,n.top):t.scroller.scrollTop;r=Math.floor(r-He(t));var i=n&&null!=n.bottom?n.bottom:r+t.wrapper.clientHeight,o=N(e,r),a=N(e,i);if(n&&n.ensure){var s=n.ensure.from.line,l=n.ensure.to.line;s<o?(o=s,a=N(e,mt(A(e,s))+t.wrapper.clientHeight)):Math.min(l,e.lastLine())>=a&&(o=N(e,mt(A(e,l))-t.wrapper.clientHeight),a=l)}return{from:o,to:Math.max(a,o+1)}}function In(t,e){Math.abs(t.doc.scrollTop-e)<2||(t.doc.scrollTop=e,Uo||Cr(t,{top:e}),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e),t.display.scrollbars.setScrollTop(e),Uo&&Cr(t),xr(t,100))}function Rn(t,e,n){(n?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)||(e=Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth),t.doc.scrollLeft=e,On(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function Bn(t){var e=t.wheelDeltaX,n=t.wheelDeltaY;return null==e&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),null==n&&t.detail&&t.axis==t.VERTICAL_AXIS?n=t.detail:null==n&&(n=t.wheelDelta),{x:e,y:n}}function jn(t){var e=Bn(t);return e.x*=Za,e.y*=Za,e}function Vn(t,e){var n=Bn(e),r=n.x,i=n.y,o=t.display,a=o.scroller,s=a.scrollWidth>a.clientWidth,l=a.scrollHeight>a.clientHeight;if(r&&s||i&&l){if(i&&sa&&Qo)t:for(var u=e.target,c=o.view;u!=a;u=u.parentNode)for(var f=0;f<c.length;f++)if(c[f].node==u){t.display.currentWheelTarget=u;break t}if(r&&!Uo&&!ea&&null!=Za)return i&&l&&In(t,Math.max(0,Math.min(a.scrollTop+i*Za,a.scrollHeight-a.clientHeight))),Rn(t,Math.max(0,Math.min(a.scrollLeft+r*Za,a.scrollWidth-a.clientWidth))),(!i||i&&l)&&Ot(e),void(o.wheelStartX=null);if(i&&null!=Za){var d=i*Za,h=t.doc.scrollTop,p=h+o.wrapper.clientHeight;d<0?h=Math.max(0,h+d-50):p=Math.min(t.doc.height,p+d+50),Cr(t,{top:h,bottom:p})}$a<20&&(null==o.wheelStartX?(o.wheelStartX=a.scrollLeft,o.wheelStartY=a.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){if(null!=o.wheelStartX){var t=a.scrollLeft-o.wheelStartX,e=a.scrollTop-o.wheelStartY,n=e&&o.wheelDY&&e/o.wheelDY||t&&o.wheelDX&&t/o.wheelDX;o.wheelStartX=o.wheelStartY=null,n&&(Za=(Za*$a+n)/($a+1),++$a)}},200)):(o.wheelDX+=r,o.wheelDY+=i))}}function qn(t){var e=t.display,n=e.gutters.offsetWidth,r=Math.round(t.doc.height+Ie(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Be(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:n}}function Xn(t,e){e||(e=qn(t));var n=t.display.barWidth,r=t.display.barHeight;Un(t,e);for(var i=0;i<4&&n!=t.display.barWidth||r!=t.display.barHeight;i++)n!=t.display.barWidth&&t.options.lineWrapping&&Dn(t),Un(t,qn(t)),n=t.display.barWidth,r=t.display.barHeight}function Un(t,e){var n=t.display,r=n.scrollbars.update(e);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=e.gutterWidth+"px"):n.gutterFiller.style.display=""}function Yn(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&pa(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Ja[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),Pa(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,n){"horizontal"==n?Rn(t,e):In(t,e)},t),t.display.scrollbars.addClass&&a(t.display.wrapper,t.display.scrollbars.addClass)}function Gn(t,e){if(!Et(t,"scrollCursorIntoView")){var n=t.display,i=n.sizer.getBoundingClientRect(),o=null;if(e.top+i.top<0?o=!0:e.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(o=!1),null!=o&&!ia){var a=r("div","",null,"position: absolute;\n                         top: "+(e.top-n.viewOffset-He(t.display))+"px;\n                         height: "+(e.bottom-e.top+Be(t)+n.barHeight)+"px;\n                         left: "+e.left+"px; width: 2px;");t.display.lineSpace.appendChild(a),a.scrollIntoView(o),t.display.lineSpace.removeChild(a)}}}function $n(t,e,n,r){null==r&&(r=0);for(var i,o=0;o<5;o++){var a=!1;i=cn(t,e);var s=n&&n!=e?cn(t,n):i,l=Kn(t,Math.min(i.left,s.left),Math.min(i.top,s.top)-r,Math.max(i.left,s.left),Math.max(i.bottom,s.bottom)+r),u=t.doc.scrollTop,c=t.doc.scrollLeft;if(null!=l.scrollTop&&(In(t,l.scrollTop),Math.abs(t.doc.scrollTop-u)>1&&(a=!0)),null!=l.scrollLeft&&(Rn(t,l.scrollLeft),Math.abs(t.doc.scrollLeft-c)>1&&(a=!0)),!a)break}return i}function Zn(t,e,n,r,i){var o=Kn(t,e,n,r,i);null!=o.scrollTop&&In(t,o.scrollTop),null!=o.scrollLeft&&Rn(t,o.scrollLeft)}function Kn(t,e,n,r,i){var o=t.display,a=mn(t.display);n<0&&(n=0);var s=t.curOp&&null!=t.curOp.scrollTop?t.curOp.scrollTop:o.scroller.scrollTop,l=Ve(t),u={};
i-n>l&&(i=n+l);var c=t.doc.height+Ie(o),f=n<a,d=i>c-a;if(n<s)u.scrollTop=f?0:n;else if(i>s+l){var h=Math.min(n,(d?c:i)-l);h!=s&&(u.scrollTop=h)}var p=t.curOp&&null!=t.curOp.scrollLeft?t.curOp.scrollLeft:o.scroller.scrollLeft,g=je(t)-(t.options.fixedGutter?o.gutters.offsetWidth:0),v=r-e>g;return v&&(r=e+g),e<10?u.scrollLeft=0:e<p?u.scrollLeft=Math.max(0,e-(v?0:10)):r>g+p-3&&(u.scrollLeft=r+(v?0:10)-g),u}function Qn(t,e,n){null==e&&null==n||tr(t),null!=e&&(t.curOp.scrollLeft=(null==t.curOp.scrollLeft?t.doc.scrollLeft:t.curOp.scrollLeft)+e),null!=n&&(t.curOp.scrollTop=(null==t.curOp.scrollTop?t.doc.scrollTop:t.curOp.scrollTop)+n)}function Jn(t){tr(t);var e=t.getCursor(),n=e,r=e;t.options.lineWrapping||(n=e.ch?O(e.line,e.ch-1):e,r=O(e.line,e.ch+1)),t.curOp.scrollToPos={from:n,to:r,margin:t.options.cursorScrollMargin,isCursor:!0}}function tr(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var n=fn(t,e.from),r=fn(t,e.to),i=Kn(t,Math.min(n.left,r.left),Math.min(n.top,r.top)-e.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+e.margin);t.scrollTo(i.scrollLeft,i.scrollTop)}}function er(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ts},xe(t.curOp)}function nr(t){var e=t.curOp;we(e,function(t){for(var e=0;e<t.ops.length;e++)t.ops[e].cm.curOp=null;rr(t)})}function rr(t){for(var e=t.ops,n=0;n<e.length;n++)ir(e[n]);for(var r=0;r<e.length;r++)or(e[r]);for(var i=0;i<e.length;i++)ar(e[i]);for(var o=0;o<e.length;o++)sr(e[o]);for(var a=0;a<e.length;a++)lr(e[a])}function ir(t){var e=t.cm,n=e.display;wr(e),t.updateMaxLine&&xt(e),t.mustUpdate=t.viewChanged||t.forceUpdate||null!=t.scrollTop||t.scrollToPos&&(t.scrollToPos.from.line<n.viewFrom||t.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new es(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function or(t){t.updatedDisplay=t.mustUpdate&&kr(t.cm,t.update)}function ar(t){var e=t.cm,n=e.display;t.updatedDisplay&&Dn(e),t.barMeasure=qn(e),n.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Ye(e,n.maxLine,n.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+t.adjustWidthTo+Be(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+t.adjustWidthTo-je(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=n.input.prepareSelection(t.focus))}function sr(t){var e=t.cm;null!=t.adjustWidthTo&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&Rn(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var n=t.focus&&t.focus==o()&&(!document.hasFocus||document.hasFocus());t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,n),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Xn(e,t.barMeasure),t.updatedDisplay&&_r(e,t.barMeasure),t.selectionChanged&&Tn(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),n&&En(t.cm)}function lr(t){var e=t.cm,n=e.display,r=e.doc;if(t.updatedDisplay&&Mr(e,t.update),null==n.wheelStartX||null==t.scrollTop&&null==t.scrollLeft&&!t.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==t.scrollTop||n.scroller.scrollTop==t.scrollTop&&!t.forceScroll||(r.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,t.scrollTop)),n.scrollbars.setScrollTop(r.scrollTop),n.scroller.scrollTop=r.scrollTop),null==t.scrollLeft||n.scroller.scrollLeft==t.scrollLeft&&!t.forceScroll||(r.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,t.scrollLeft)),n.scrollbars.setScrollLeft(r.scrollLeft),n.scroller.scrollLeft=r.scrollLeft,On(e)),t.scrollToPos){var i=$n(e,B(r,t.scrollToPos.from),B(r,t.scrollToPos.to),t.scrollToPos.margin);t.scrollToPos.isCursor&&e.state.focused&&Gn(e,i)}var o=t.maybeHiddenMarkers,a=t.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||Tt(o[s],"hide");if(a)for(var l=0;l<a.length;++l)a[l].lines.length&&Tt(a[l],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&Tt(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function ur(t,e){if(t.curOp)return e();er(t);try{return e()}finally{nr(t)}}function cr(t,e){return function(){if(t.curOp)return e.apply(t,arguments);er(t);try{return e.apply(t,arguments)}finally{nr(t)}}}function fr(t){return function(){if(this.curOp)return t.apply(this,arguments);er(this);try{return t.apply(this,arguments)}finally{nr(this)}}}function dr(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);er(e);try{return t.apply(this,arguments)}finally{nr(e)}}}function hr(t,e,n,r){null==e&&(e=t.doc.first),null==n&&(n=t.doc.first+t.doc.size),r||(r=0);var i=t.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)La&&ht(t.doc,e)<i.viewTo&&gr(t);else if(n<=i.viewFrom)La&&pt(t.doc,n+r)>i.viewFrom?gr(t):(i.viewFrom+=r,i.viewTo+=r);else if(e<=i.viewFrom&&n>=i.viewTo)gr(t);else if(e<=i.viewFrom){var o=vr(t,n,n+r,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=r):gr(t)}else if(n>=i.viewTo){var a=vr(t,e,e,-1);a?(i.view=i.view.slice(0,a.index),i.viewTo=a.lineN):gr(t)}else{var s=vr(t,e,e,-1),l=vr(t,n,n+r,1);s&&l?(i.view=i.view.slice(0,s.index).concat(ye(t,s.lineN,l.lineN)).concat(i.view.slice(l.index)),i.viewTo+=r):gr(t)}var u=i.externalMeasured;u&&(n<u.lineN?u.lineN+=r:e<u.lineN+u.size&&(i.externalMeasured=null))}function pr(t,e,n){t.curOp.viewChanged=!0;var r=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(r.externalMeasured=null),!(e<r.viewFrom||e>=r.viewTo)){var o=r.view[Cn(t,e)];if(null!=o.node){var a=o.changes||(o.changes=[]);f(a,n)==-1&&a.push(n)}}}function gr(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function vr(t,e,n,r){var i,o=Cn(t,e),a=t.display.view;if(!La||n==t.doc.first+t.doc.size)return{index:o,lineN:n};for(var s=t.display.viewFrom,l=0;l<o;l++)s+=a[l].size;if(s!=e){if(r>0){if(o==a.length-1)return null;i=s+a[o].size-e,o++}else i=s-e;e+=i,n+=i}for(;ht(t.doc,n)!=n;){if(o==(r<0?0:a.length-1))return null;n+=r*a[o-(r<0?1:0)].size,o+=r}return{index:o,lineN:n}}function mr(t,e,n){var r=t.display,i=r.view;0==i.length||e>=r.viewTo||n<=r.viewFrom?(r.view=ye(t,e,n),r.viewFrom=e):(r.viewFrom>e?r.view=ye(t,e,r.viewFrom).concat(r.view):r.viewFrom<e&&(r.view=r.view.slice(Cn(t,e))),r.viewFrom=e,r.viewTo<n?r.view=r.view.concat(ye(t,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Cn(t,n)))),r.viewTo=n}function yr(t){for(var e=t.display.view,n=0,r=0;r<e.length;r++){var i=e[r];i.hidden||i.node&&!i.changes||++n}return n}function xr(t,e){t.doc.mode.startState&&t.doc.frontier<t.display.viewTo&&t.state.highlight.set(e,l(br,t))}function br(t){var e=t.doc;if(e.frontier<e.first&&(e.frontier=e.first),!(e.frontier>=t.display.viewTo)){var n=+new Date+t.options.workTime,r=Gt(e.mode,Jt(t,e.frontier)),i=[];e.iter(e.frontier,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(e.frontier>=t.display.viewFrom){var a=o.styles,s=o.text.length>t.options.maxHighlightLength,l=Kt(t,o,s?Gt(e.mode,r):r,!0);o.styles=l.styles;var u=o.styleClasses,c=l.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var f=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),d=0;!f&&d<a.length;++d)f=a[d]!=o.styles[d];f&&i.push(e.frontier),o.stateAfter=s?r:Gt(e.mode,r)}else o.text.length<=t.options.maxHighlightLength&&te(t,o.text,r),o.stateAfter=e.frontier%5==0?Gt(e.mode,r):null;if(++e.frontier,+new Date>n)return xr(t,t.options.workDelay),!0}),i.length&&ur(t,function(){for(var e=0;e<i.length;e++)pr(t,i[e],"text")})}}function wr(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Be(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Be(t)+"px",e.scrollbarsClipped=!0)}function kr(t,n){var r=t.display,i=t.doc;if(n.editorIsHidden)return gr(t),!1;if(!n.force&&n.visible.from>=r.viewFrom&&n.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==yr(t))return!1;Wn(t)&&(gr(t),n.dims=xn(t));var a=i.first+i.size,s=Math.max(n.visible.from-t.options.viewportMargin,i.first),l=Math.min(a,n.visible.to+t.options.viewportMargin);r.viewFrom<s&&s-r.viewFrom<20&&(s=Math.max(i.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(a,r.viewTo)),La&&(s=ht(t.doc,s),l=pt(t.doc,l));var u=s!=r.viewFrom||l!=r.viewTo||r.lastWrapHeight!=n.wrapperHeight||r.lastWrapWidth!=n.wrapperWidth;mr(t,s,l),r.viewOffset=mt(A(t.doc,r.viewFrom)),t.display.mover.style.top=r.viewOffset+"px";var c=yr(t);if(!u&&0==c&&!n.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var f=o();return c>4&&(r.lineDiv.style.display="none"),Sr(t,r.updateLineNumbers,n.dims),c>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,f&&o()!=f&&f.offsetHeight&&f.focus(),e(r.cursorDiv),e(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,u&&(r.lastWrapHeight=n.wrapperHeight,r.lastWrapWidth=n.wrapperWidth,xr(t,400)),r.updateLineNumbers=null,!0}function Mr(t,e){for(var n=e.viewport,r=!0;(r&&t.options.lineWrapping&&e.oldDisplayWidth!=je(t)||(n&&null!=n.top&&(n={top:Math.min(t.doc.height+Ie(t.display)-Ve(t),n.top)}),e.visible=Hn(t.display,t.doc,n),!(e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)))&&kr(t,e);r=!1){Dn(t);var i=qn(t);Sn(t),Xn(t,i),_r(t,i)}e.signal(t,"update",t),t.display.viewFrom==t.display.reportedViewFrom&&t.display.viewTo==t.display.reportedViewTo||(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function Cr(t,e){var n=new es(t,e);if(kr(t,n)){Dn(t),Mr(t,n);var r=qn(t);Sn(t),Xn(t,r),_r(t,r),n.finish()}}function Sr(t,n,r){function i(e){var n=e.nextSibling;return Qo&&sa&&t.display.currentWheelTarget==e?e.style.display="none":e.parentNode.removeChild(e),n}for(var o=t.display,a=t.options.lineNumbers,s=o.lineDiv,l=s.firstChild,u=o.view,c=o.viewFrom,d=0;d<u.length;d++){var h=u[d];if(h.hidden);else if(h.node&&h.node.parentNode==s){for(;l!=h.node;)l=i(l);var p=a&&null!=n&&n<=c&&h.lineNumber;h.changes&&(f(h.changes,"gutter")>-1&&(p=!1),Ce(t,h,c,r)),p&&(e(h.lineNumber),h.lineNumber.appendChild(document.createTextNode(F(t.options,c)))),l=h.node.nextSibling}else{var g=Pe(t,h,c,r);s.insertBefore(g,l)}c+=h.size}for(;l;)l=i(l)}function Ar(t){var e=t.display.gutters.offsetWidth;t.display.sizer.style.marginLeft=e+"px"}function _r(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Be(t)+"px"}function Lr(t){var n=t.display.gutters,i=t.options.gutters;e(n);for(var o=0;o<i.length;++o){var a=i[o],s=n.appendChild(r("div",null,"CodeMirror-gutter "+a));"CodeMirror-linenumbers"==a&&(t.display.lineGutter=s,s.style.width=(t.display.lineNumWidth||1)+"px")}n.style.display=o?"":"none",Ar(t)}function Tr(t){var e=f(t.gutters,"CodeMirror-linenumbers");e==-1&&t.lineNumbers?t.gutters=t.gutters.concat(["CodeMirror-linenumbers"]):e>-1&&!t.lineNumbers&&(t.gutters=t.gutters.slice(0),t.gutters.splice(e,1))}function Er(t,e){var n=t[e];t.sort(function(t,e){return W(t.from(),e.from())}),e=f(t,n);for(var r=1;r<t.length;r++){var i=t[r],o=t[r-1];if(W(o.to(),i.from())>=0){var a=I(o.from(),i.from()),s=H(o.to(),i.to()),l=o.empty()?i.from()==i.head:o.from()==o.head;r<=e&&--e,t.splice(--r,2,new rs(l?s:a,l?a:s))}}return new ns(t,e)}function Nr(t,e){return new ns([new rs(t,e||t)],0)}function Pr(t){return t.text?O(t.from.line+t.text.length-1,p(t.text).length+(1==t.text.length?t.from.ch:0)):t.to}function Fr(t,e){if(W(t,e.from)<0)return t;if(W(t,e.to)<=0)return Pr(e);var n=t.line+e.text.length-(e.to.line-e.from.line)-1,r=t.ch;return t.line==e.to.line&&(r+=Pr(e).ch-e.to.ch),O(n,r)}function Or(t,e){for(var n=[],r=0;r<t.sel.ranges.length;r++){var i=t.sel.ranges[r];n.push(new rs(Fr(i.anchor,e),Fr(i.head,e)))}return Er(n,t.sel.primIndex)}function Wr(t,e,n){return t.line==e.line?O(n.line,t.ch-e.ch+n.ch):O(n.line+(t.line-e.line),t.ch)}function Dr(t,e,n){for(var r=[],i=O(t.first,0),o=i,a=0;a<e.length;a++){var s=e[a],l=Wr(s.from,i,o),u=Wr(Pr(s),i,o);if(i=s.to,o=u,"around"==n){var c=t.sel.ranges[a],f=W(c.head,c.anchor)<0;r[a]=new rs(f?u:l,f?l:u)}else r[a]=new rs(l,l)}return new ns(r,t.sel.primIndex)}function zr(t){t.doc.mode=Ut(t.options,t.doc.modeOption),Hr(t)}function Hr(t){t.doc.iter(function(t){t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null)}),t.doc.frontier=t.doc.first,xr(t,100),t.state.modeGen++,t.curOp&&hr(t)}function Ir(t,e){return 0==e.from.ch&&0==e.to.ch&&""==p(e.text)&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function Rr(t,e,n,r){function i(t){return n?n[t]:null}function o(t,n,i){se(t,n,i,r),ke(t,"change",t,e)}function a(t,e){for(var n=[],o=t;o<e;++o)n.push(new ja(u[o],i(o),r));return n}var s=e.from,l=e.to,u=e.text,c=A(t,s.line),f=A(t,l.line),d=p(u),h=i(u.length-1),g=l.line-s.line;if(e.full)t.insert(0,a(0,u.length)),t.remove(u.length,t.size-u.length);else if(Ir(t,e)){var v=a(0,u.length-1);o(f,f.text,h),g&&t.remove(s.line,g),v.length&&t.insert(s.line,v)}else if(c==f)if(1==u.length)o(c,c.text.slice(0,s.ch)+d+c.text.slice(l.ch),h);else{var m=a(1,u.length-1);m.push(new ja(d+c.text.slice(l.ch),h,r)),o(c,c.text.slice(0,s.ch)+u[0],i(0)),t.insert(s.line+1,m)}else if(1==u.length)o(c,c.text.slice(0,s.ch)+u[0]+f.text.slice(l.ch),i(0)),t.remove(s.line+1,g);else{o(c,c.text.slice(0,s.ch)+u[0],i(0)),o(f,d+f.text.slice(l.ch),h);var y=a(1,u.length-1);g>1&&t.remove(s.line+1,g-1),t.insert(s.line+1,y)}ke(t,"change",t,e)}function Br(t,e,n){function r(t,i,o){if(t.linked)for(var a=0;a<t.linked.length;++a){var s=t.linked[a];if(s.doc!=i){var l=o&&s.sharedHist;n&&!l||(e(s.doc,l),r(s.doc,t,l))}}}r(t,null,!0)}function jr(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,kn(t),zr(t),t.options.lineWrapping||xt(t),t.options.mode=e.modeOption,hr(t)}function Vr(t){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t||1}function qr(t,e){var n={from:z(e.from),to:Pr(e),text:_(t,e.from,e.to)};return Kr(t,n,e.from.line,e.to.line+1),Br(t,function(t){return Kr(t,n,e.from.line,e.to.line+1)},!0),n}function Xr(t){for(;t.length;){var e=p(t);if(!e.ranges)break;t.pop()}}function Ur(t,e){return e?(Xr(t.done),p(t.done)):t.done.length&&!p(t.done).ranges?p(t.done):t.done.length>1&&!t.done[t.done.length-2].ranges?(t.done.pop(),p(t.done)):void 0}function Yr(t,e,n,r){var i=t.history;i.undone.length=0;var o,a,s=+new Date;if((i.lastOp==r||i.lastOrigin==e.origin&&e.origin&&("+"==e.origin.charAt(0)&&t.cm&&i.lastModTime>s-t.cm.options.historyEventDelay||"*"==e.origin.charAt(0)))&&(o=Ur(i,i.lastOp==r)))a=p(o.changes),0==W(e.from,e.to)&&0==W(e.from,a.to)?a.to=Pr(e):o.changes.push(qr(t,e));else{var l=p(i.done);for(l&&l.ranges||Zr(t.sel,i.done),o={changes:[qr(t,e)],generation:i.generation},i.done.push(o);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=s,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=e.origin,a||Tt(t,"historyAdded")}function Gr(t,e,n,r){var i=e.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function $r(t,e,n,r){var i=t.history,o=r&&r.origin;n==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Gr(t,o,p(i.done),e))?i.done[i.done.length-1]=e:Zr(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=n,r&&r.clearRedo!==!1&&Xr(i.undone)}function Zr(t,e){var n=p(e);n&&n.ranges&&n.equals(t)||e.push(t)}function Kr(t,e,n,r){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,n),Math.min(t.first+t.size,r),function(n){n.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=n.markedSpans),++o})}function Qr(t){if(!t)return null;for(var e,n=0;n<t.length;++n)t[n].marker.explicitlyCleared?e||(e=t.slice(0,n)):e&&e.push(t[n]);return e?e.length?e:null:t}function Jr(t,e){var n=e["spans_"+t.id];if(!n)return null;for(var r=[],i=0;i<e.text.length;++i)r.push(Qr(n[i]));return r}function ti(t,e){var n=Jr(t,e),r=Q(t,e);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var o=n[i],a=r[i];if(o&&a)t:for(var s=0;s<a.length;++s){for(var l=a[s],u=0;u<o.length;++u)if(o[u].marker==l.marker)continue t;o.push(l)}else a&&(n[i]=a)}return n}function ei(t,e,n){for(var r=[],i=0;i<t.length;++i){var o=t[i];if(o.ranges)r.push(n?ns.prototype.deepCopy.call(o):o);else{var a=o.changes,s=[];r.push({changes:s});for(var l=0;l<a.length;++l){var u=a[l],c=void 0;if(s.push({from:u.from,to:u.to,text:u.text}),e)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&f(e,Number(c[1]))>-1&&(p(s)[d]=u[d],delete u[d])}}}return r}function ni(t,e,n,r){if(t.cm&&t.cm.display.shift||t.extend){var i=e.anchor;if(r){var o=W(n,i)<0;o!=W(r,i)<0?(i=n,n=r):o!=W(n,r)<0&&(n=r)}return new rs(i,n)}return new rs(r||n,n)}function ri(t,e,n,r){ui(t,new ns([ni(t,t.sel.primary(),e,n)],0),r)}function ii(t,e,n){for(var r=[],i=0;i<t.sel.ranges.length;i++)r[i]=ni(t,t.sel.ranges[i],e[i],null);var o=Er(r,t.sel.primIndex);ui(t,o,n)}function oi(t,e,n,r){var i=t.sel.ranges.slice(0);i[e]=n,ui(t,Er(i,t.sel.primIndex),r)}function ai(t,e,n,r){ui(t,Nr(e,n),r)}function si(t,e,n){var r={ranges:e.ranges,update:function(e){var n=this;this.ranges=[];for(var r=0;r<e.length;r++)n.ranges[r]=new rs(B(t,e[r].anchor),B(t,e[r].head))},origin:n&&n.origin};return Tt(t,"beforeSelectionChange",t,r),t.cm&&Tt(t.cm,"beforeSelectionChange",t.cm,r),r.ranges!=e.ranges?Er(r.ranges,r.ranges.length-1):e}function li(t,e,n){var r=t.history.done,i=p(r);i&&i.ranges?(r[r.length-1]=e,ci(t,e,n)):ui(t,e,n)}function ui(t,e,n){ci(t,e,n),$r(t,t.sel,t.cm?t.cm.curOp.id:NaN,n)}function ci(t,e,n){(Pt(t,"beforeSelectionChange")||t.cm&&Pt(t.cm,"beforeSelectionChange"))&&(e=si(t,e,n));var r=n&&n.bias||(W(e.primary().head,t.sel.primary().head)<0?-1:1);fi(t,hi(t,e,r,!0)),n&&n.scroll===!1||!t.cm||Jn(t.cm)}function fi(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=t.cm.curOp.selectionChanged=!0,Nt(t.cm)),ke(t,"cursorActivity",t))}function di(t){fi(t,hi(t,t.sel,null,!1),wa)}function hi(t,e,n,r){for(var i,o=0;o<e.ranges.length;o++){var a=e.ranges[o],s=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],l=gi(t,a.anchor,s&&s.anchor,n,r),u=gi(t,a.head,s&&s.head,n,r);(i||l!=a.anchor||u!=a.head)&&(i||(i=e.ranges.slice(0,o)),i[o]=new rs(l,u))}return i?Er(i,e.primIndex):e}function pi(t,e,n,r,i){var o=A(t,e.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var s=o.markedSpans[a],l=s.marker;if((null==s.from||(l.inclusiveLeft?s.from<=e.ch:s.from<e.ch))&&(null==s.to||(l.inclusiveRight?s.to>=e.ch:s.to>e.ch))){if(i&&(Tt(l,"beforeCursorEnter"),l.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!l.atomic)continue;if(n){var u=l.find(r<0?1:-1),c=void 0;if((r<0?l.inclusiveRight:l.inclusiveLeft)&&(u=vi(t,u,-r,u&&u.line==e.line?o:null)),u&&u.line==e.line&&(c=W(u,n))&&(r<0?c<0:c>0))return pi(t,u,e,r,i)}var f=l.find(r<0?-1:1);return(r<0?l.inclusiveLeft:l.inclusiveRight)&&(f=vi(t,f,r,f.line==e.line?o:null)),f?pi(t,f,e,r,i):null}}return e}function gi(t,e,n,r,i){var o=r||1,a=pi(t,e,n,o,i)||!i&&pi(t,e,n,o,!0)||pi(t,e,n,-o,i)||!i&&pi(t,e,n,-o,!0);return a?a:(t.cantEdit=!0,O(t.first,0))}function vi(t,e,n,r){return n<0&&0==e.ch?e.line>t.first?B(t,O(e.line-1)):null:n>0&&e.ch==(r||A(t,e.line)).text.length?e.line<t.first+t.size-1?O(e.line+1,0):null:new O(e.line,e.ch+n)}function mi(t){t.setSelection(O(t.firstLine(),0),O(t.lastLine()),wa)}function yi(t,e,n){var r={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(e,n,i,o){e&&(r.from=B(t,e)),n&&(r.to=B(t,n)),i&&(r.text=i),void 0!==o&&(r.origin=o)}),Tt(t,"beforeChange",t,r),t.cm&&Tt(t.cm,"beforeChange",t.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function xi(t,e,n){if(t.cm){if(!t.cm.curOp)return cr(t.cm,xi)(t,e,n);if(t.cm.state.suppressEdits)return}if(!(Pt(t,"beforeChange")||t.cm&&Pt(t.cm,"beforeChange"))||(e=yi(t,e,!0))){var r=_a&&!n&&tt(t,e.from,e.to);if(r)for(var i=r.length-1;i>=0;--i)bi(t,{from:r[i].from,to:r[i].to,text:i?[""]:e.text});else bi(t,e)}}function bi(t,e){if(1!=e.text.length||""!=e.text[0]||0!=W(e.from,e.to)){var n=Or(t,e);Yr(t,e,n,t.cm?t.cm.curOp.id:NaN),Mi(t,e,n,Q(t,e));var r=[];Br(t,function(t,n){n||f(r,t.history)!=-1||(Li(t.history,e),r.push(t.history)),Mi(t,e,null,Q(t,e))})}}function wi(t,e,n){if(!t.cm||!t.cm.state.suppressEdits||n){for(var r,i=t.history,o=t.sel,a="undo"==e?i.done:i.undone,s="undo"==e?i.undone:i.done,l=0;l<a.length&&(r=a[l],n?!r.ranges||r.equals(t.sel):r.ranges);l++);if(l!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;r=a.pop(),r.ranges;){if(Zr(r,s),n&&!r.equals(t.sel))return void ui(t,r,{clearRedo:!1});o=r}var u=[];Zr(o,s),s.push({changes:u,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var c=Pt(t,"beforeChange")||t.cm&&Pt(t.cm,"beforeChange"),d=function(n){var i=r.changes[n];if(i.origin=e,c&&!yi(t,i,!1))return a.length=0,{};u.push(qr(t,i));var o=n?Or(t,i):p(a);Mi(t,i,o,ti(t,i)),!n&&t.cm&&t.cm.scrollIntoView({from:i.from,to:Pr(i)});var s=[];Br(t,function(t,e){e||f(s,t.history)!=-1||(Li(t.history,i),s.push(t.history)),Mi(t,i,null,ti(t,i))})},h=r.changes.length-1;h>=0;--h){var g=d(h);if(g)return g.v}}}}function ki(t,e){if(0!=e&&(t.first+=e,t.sel=new ns(g(t.sel.ranges,function(t){return new rs(O(t.anchor.line+e,t.anchor.ch),O(t.head.line+e,t.head.ch))}),t.sel.primIndex),t.cm)){hr(t.cm,t.first,t.first-e,e);for(var n=t.cm.display,r=n.viewFrom;r<n.viewTo;r++)pr(t.cm,r,"gutter")}}function Mi(t,e,n,r){if(t.cm&&!t.cm.curOp)return cr(t.cm,Mi)(t,e,n,r);if(e.to.line<t.first)return void ki(t,e.text.length-1-(e.to.line-e.from.line));if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);ki(t,i),e={from:O(t.first,0),to:O(e.to.line+i,e.to.ch),text:[p(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:O(o,A(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=_(t,e.from,e.to),n||(n=Or(t,e)),t.cm?Ci(t.cm,e,r):Rr(t,e,r),ci(t,n,wa)}}function Ci(t,e,n){var r=t.doc,i=t.display,o=e.from,a=e.to,s=!1,l=o.line;t.options.lineWrapping||(l=E(ct(A(r,o.line))),r.iter(l,a.line+1,function(t){if(t==i.maxLine)return s=!0,!0})),r.sel.contains(e.from,e.to)>-1&&Nt(t),Rr(r,e,n,wn(t)),t.options.lineWrapping||(r.iter(l,o.line+e.text.length,function(t){var e=yt(t);e>i.maxLineLength&&(i.maxLine=t,i.maxLineLength=e,i.maxLineChanged=!0,s=!1)}),s&&(t.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,o.line),xr(t,400);var u=e.text.length-(a.line-o.line)-1;e.full?hr(t):o.line!=a.line||1!=e.text.length||Ir(t.doc,e)?hr(t,o.line,a.line+1,u):pr(t,o.line,"text");var c=Pt(t,"changes"),f=Pt(t,"change");if(f||c){var d={from:o,to:a,text:e.text,removed:e.removed,origin:e.origin};f&&ke(t,"change",t,d),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}function Si(t,e,n,r,i){if(r||(r=n),W(r,n)<0){var o=r;r=n,n=o}"string"==typeof e&&(e=t.splitLines(e)),xi(t,{from:n,to:r,text:e,origin:i})}function Ai(t,e,n,r){n<t.line?t.line+=r:e<t.line&&(t.line=e,t.ch=0)}function _i(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i],a=!0;if(o.ranges){o.copied||(o=t[i]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)Ai(o.ranges[s].anchor,e,n,r),Ai(o.ranges[s].head,e,n,r)}else{for(var l=0;l<o.changes.length;++l){var u=o.changes[l];if(n<u.from.line)u.from=O(u.from.line+r,u.from.ch),u.to=O(u.to.line+r,u.to.ch);else if(e<=u.to.line){a=!1;break}}a||(t.splice(0,i+1),i=0)}}}function Li(t,e){var n=e.from.line,r=e.to.line,i=e.text.length-(r-n)-1;_i(t.done,n,r,i),_i(t.undone,n,r,i)}function Ti(t,e,n,r){var i=e,o=e;return"number"==typeof e?o=A(t,R(t,e)):i=E(e),null==i?null:(r(o,i)&&t.cm&&pr(t.cm,i,n),o)}function Ei(t,e,n){mt(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&Qn(t,null,n)}function Ni(t,e,n,r){var i=new as(t,n,r),o=t.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),Ti(t,e,"widget",function(e){var n=e.widgets||(e.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=e,o&&!gt(t,e)){var r=mt(e)<t.scrollTop;T(e,e.height+De(i)),r&&Qn(o,null,i.height),o.curOp.forceUpdate=!0}return!0}),ke(o,"lineWidgetAdded",o,i,"number"==typeof e?e:E(e)),i}function Pi(t,e,n,i,o){if(i&&i.shared)return Fi(t,e,n,i,o);if(t.cm&&!t.cm.curOp)return cr(t.cm,Pi)(t,e,n,i,o);var a=new ls(t,o),s=W(e,n);if(i&&u(i,a,!1),s>0||0==s&&a.clearWhenEmpty!==!1)return a;if(a.replacedWith&&(a.collapsed=!0,a.widgetNode=r("span",[a.replacedWith],"CodeMirror-widget"),a.widgetNode.setAttribute("role","presentation"),i.handleMouseEvents||a.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(a.widgetNode.insertLeft=!0)),a.collapsed){if(ut(t,e.line,e,n,a)||e.line!=n.line&&ut(t,n.line,e,n,a))throw new Error("Inserting collapsed marker partially overlapping an existing one");X()}a.addToHistory&&Yr(t,{from:e,to:n,origin:"markText"},t.sel,NaN);var l,c=e.line,f=t.cm;if(t.iter(c,n.line+1,function(t){f&&a.collapsed&&!f.options.lineWrapping&&ct(t)==f.display.maxLine&&(l=!0),a.collapsed&&c!=e.line&&T(t,0),$(t,new U(a,c==e.line?e.ch:null,c==n.line?n.ch:null)),++c}),a.collapsed&&t.iter(e.line,n.line+1,function(e){gt(t,e)&&T(e,0)}),a.clearOnEnter&&Pa(a,"beforeCursorEnter",function(){return a.clear()}),a.readOnly&&(q(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),a.collapsed&&(a.id=++ss,a.atomic=!0),f){if(l&&(f.curOp.updateMaxLine=!0),a.collapsed)hr(f,e.line,n.line+1);else if(a.className||a.title||a.startStyle||a.endStyle||a.css)for(var d=e.line;d<=n.line;d++)pr(f,d,"text");a.atomic&&di(f.doc),ke(f,"markerAdded",f,a)}return a}function Fi(t,e,n,r,i){r=u(r),r.shared=!1;var o=[Pi(t,e,n,r,i)],a=o[0],s=r.widgetNode;return Br(t,function(t){s&&(r.widgetNode=s.cloneNode(!0)),o.push(Pi(t,B(t,e),B(t,n),r,i));for(var l=0;l<t.linked.length;++l)if(t.linked[l].isParent)return;a=p(o)}),new us(o,a)}function Oi(t){return t.findMarks(O(t.first,0),t.clipPos(O(t.lastLine())),function(t){return t.parent})}function Wi(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.find(),o=t.clipPos(i.from),a=t.clipPos(i.to);if(W(o,a)){var s=Pi(t,o,a,r.primary,r.primary.type);r.markers.push(s),s.parent=r}}}function Di(t){for(var e=function(e){var n=t[e],r=[n.primary.doc];Br(n.primary.doc,function(t){return r.push(t)});for(var i=0;i<n.markers.length;i++){var o=n.markers[i];f(r,o.doc)==-1&&(o.parent=null,n.markers.splice(i--,1))}},n=0;n<t.length;n++)e(n)}function zi(t){var e=this;if(Ri(e),!Et(e,t)&&!ze(e.display,t)){Ot(t),Zo&&(ds=+new Date);var n=Mn(e,t,!0),r=t.dataTransfer.files;if(n&&!e.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,o=Array(i),a=0,s=function(t,r){if(!e.options.allowDropFileTypes||f(e.options.allowDropFileTypes,t.type)!=-1){var s=new FileReader;s.onload=cr(e,function(){var t=s.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(t)&&(t=""),o[r]=t,++a==i){n=B(e.doc,n);var l={from:n,to:n,text:e.doc.splitLines(o.join(e.doc.lineSeparator())),origin:"paste"};xi(e.doc,l),li(e.doc,Nr(n,Pr(l)))}}),s.readAsText(t)}},l=0;l<i;++l)s(r[l],l);else{if(e.state.draggingText&&e.doc.sel.contains(n)>-1)return e.state.draggingText(t),void setTimeout(function(){return e.display.input.focus()},20);try{var u=t.dataTransfer.getData("Text");if(u){var c;if(e.state.draggingText&&!e.state.draggingText.copy&&(c=e.listSelections()),ci(e.doc,Nr(n,n)),c)for(var d=0;d<c.length;++d)Si(e.doc,"",c[d].anchor,c[d].head,"drag");e.replaceSelection(u,"around","paste"),e.display.input.focus()}}catch(t){}}}}function Hi(t,e){if(Zo&&(!t.state.draggingText||+new Date-ds<100))return void zt(e);if(!Et(t,e)&&!ze(t.display,e)&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!na)){var n=r("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",ea&&(n.width=n.height=1,t.display.wrapper.appendChild(n),n._top=n.offsetTop),e.dataTransfer.setDragImage(n,0,0),ea&&n.parentNode.removeChild(n)}}function Ii(t,e){var i=Mn(t,e);if(i){var o=document.createDocumentFragment();_n(t,i,o),t.display.dragCursor||(t.display.dragCursor=r("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),n(t.display.dragCursor,o)}}function Ri(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Bi(t){if(document.body.getElementsByClassName)for(var e=document.body.getElementsByClassName("CodeMirror"),n=0;n<e.length;n++){var r=e[n].CodeMirror;r&&t(r)}}function ji(){hs||(Vi(),hs=!0)}function Vi(){var t;Pa(window,"resize",function(){null==t&&(t=setTimeout(function(){t=null,Bi(qi)},100))}),Pa(window,"blur",function(){return Bi(Fn)})}function qi(t){var e=t.display;e.lastWrapHeight==e.wrapper.clientHeight&&e.lastWrapWidth==e.wrapper.clientWidth||(e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize())}function Xi(t){var e=t.split(/-(?!$)/);t=e[e.length-1];for(var n,r,i,o,a=0;a<e.length-1;a++){var s=e[a];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))n=!0;else if(/^(c|ctrl|control)$/i.test(s))r=!0;else{if(!/^s(hift)?$/i.test(s))throw new Error("Unrecognized modifier name: "+s);i=!0}}return n&&(t="Alt-"+t),r&&(t="Ctrl-"+t),o&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Ui(t){var e={};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete t[n];continue}for(var i=g(n.split(" "),Xi),o=0;o<i.length;o++){var a=void 0,s=void 0;o==i.length-1?(s=i.join(" "),a=r):(s=i.slice(0,o+1).join(" "),a="...");var l=e[s];if(l){if(l!=a)throw new Error("Inconsistent bindings for "+s)}else e[s]=a}delete t[n]}for(var u in e)t[u]=e[u];return t}function Yi(t,e,n,r){e=Zi(e);var i=e.call?e.call(t,r):e[t];if(i===!1)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(e.fallthrough){if("[object Array]"!=Object.prototype.toString.call(e.fallthrough))return Yi(t,e.fallthrough,n,r);for(var o=0;o<e.fallthrough.length;o++){var a=Yi(t,e.fallthrough[o],n,r);if(a)return a}}}function Gi(t){var e="string"==typeof t?t:ps[t.keyCode];return"Ctrl"==e||"Alt"==e||"Shift"==e||"Mod"==e}function $i(t,e){if(ea&&34==t.keyCode&&t.char)return!1;var n=ps[t.keyCode],r=n;return null!=r&&!t.altGraphKey&&(t.altKey&&"Alt"!=n&&(r="Alt-"+r),(da?t.metaKey:t.ctrlKey)&&"Ctrl"!=n&&(r="Ctrl-"+r),(da?t.ctrlKey:t.metaKey)&&"Cmd"!=n&&(r="Cmd-"+r),!e&&t.shiftKey&&"Shift"!=n&&(r="Shift-"+r),r)}function Zi(t){return"string"==typeof t?ys[t]:t}function Ki(t,e){for(var n=t.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var o=e(n[i]);r.length&&W(o.from,p(r).to)<=0;){var a=r.pop();if(W(a.from,o.from)<0){o.from=a.from;break}}r.push(o)}ur(t,function(){for(var e=r.length-1;e>=0;e--)Si(t.doc,"",r[e].from,r[e].to,"+delete");Jn(t)})}function Qi(t,e){var n=A(t.doc,e),r=ct(n);return r!=n&&(e=E(r)),St(!0,t,r,e,1)}function Ji(t,e){var n=A(t.doc,e),r=ft(n);return r!=n&&(e=E(r)),St(!0,t,n,e,-1)}function to(t,e){var n=Qi(t,e.line),r=A(t.doc,n.line),i=kt(r);if(!i||0==i[0].level){var o=Math.max(0,r.text.search(/\S/)),a=e.line==n.line&&e.ch<=o&&e.ch;return O(n.line,a?0:o,n.sticky)}return n}function eo(t,e,n){
if("string"==typeof e&&(e=ws[e],!e))return!1;t.display.input.ensurePolled();var r=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),n&&(t.display.shift=!1),i=e(t)!=ba}finally{t.display.shift=r,t.state.suppressEdits=!1}return i}function no(t,e,n){for(var r=0;r<t.state.keyMaps.length;r++){var i=Yi(e,t.state.keyMaps[r],n,t);if(i)return i}return t.options.extraKeys&&Yi(e,t.options.extraKeys,n,t)||Yi(e,t.options.keyMap,n,t)}function ro(t,e,n,r){var i=t.state.keySeq;if(i){if(Gi(e))return"handled";ks.set(50,function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())}),e=i+" "+e}var o=no(t,e,r);return"multi"==o&&(t.state.keySeq=e),"handled"==o&&ke(t,"keyHandled",t,e,n),"handled"!=o&&"multi"!=o||(Ot(n),Tn(t)),i&&!o&&/\'$/.test(e)?(Ot(n),!0):!!o}function io(t,e){var n=$i(e,!0);return!!n&&(e.shiftKey&&!t.state.keySeq?ro(t,"Shift-"+n,e,function(e){return eo(t,e,!0)})||ro(t,n,e,function(e){if("string"==typeof e?/^go[A-Z]/.test(e):e.motion)return eo(t,e)}):ro(t,n,e,function(e){return eo(t,e)}))}function oo(t,e,n){return ro(t,"'"+n+"'",e,function(e){return eo(t,e,!0)})}function ao(t){var e=this;if(e.curOp.focus=o(),!Et(e,t)){Zo&&Ko<11&&27==t.keyCode&&(t.returnValue=!1);var n=t.keyCode;e.display.shift=16==n||t.shiftKey;var r=io(e,t);ea&&(Ms=r?n:null,!r&&88==n&&!Da&&(sa?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)||so(e)}}function so(t){function e(t){18!=t.keyCode&&t.altKey||(pa(n,"CodeMirror-crosshair"),Lt(document,"keyup",e),Lt(document,"mouseover",e))}var n=t.display.lineDiv;a(n,"CodeMirror-crosshair"),Pa(document,"keyup",e),Pa(document,"mouseover",e)}function lo(t){16==t.keyCode&&(this.doc.sel.shift=!1),Et(this,t)}function uo(t){var e=this;if(!(ze(e.display,t)||Et(e,t)||t.ctrlKey&&!t.altKey||sa&&t.metaKey)){var n=t.keyCode,r=t.charCode;if(ea&&n==Ms)return Ms=null,void Ot(t);if(!ea||t.which&&!(t.which<10)||!io(e,t)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(oo(e,t,i)||e.display.input.onKeyPress(t))}}}function co(t){var e=this,n=e.display;if(!(Et(e,t)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=t.shiftKey,ze(n,t))return void(Qo||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!vo(e,t)){var r=Mn(e,t);switch(window.focus(),It(t)){case 1:e.state.selectingText?e.state.selectingText(t):r?fo(e,t,r):Ht(t)==n.scroller&&Ot(t);break;case 2:Qo&&(e.state.lastMiddleDown=+new Date),r&&ri(e.doc,r),setTimeout(function(){return n.input.focus()},20),Ot(t);break;case 3:ha?mo(e,t):Nn(e)}}}}function fo(t,e,n){Zo?setTimeout(l(En,t),0):t.curOp.focus=o();var r,i=+new Date;bs&&bs.time>i-400&&0==W(bs.pos,n)?r="triple":xs&&xs.time>i-400&&0==W(xs.pos,n)?(r="double",bs={time:i,pos:n}):(r="single",xs={time:i,pos:n});var a,s=t.doc.sel,u=sa?e.metaKey:e.ctrlKey;t.options.dragDrop&&Fa&&!t.isReadOnly()&&"single"==r&&(a=s.contains(n))>-1&&(W((a=s.ranges[a]).from(),n)<0||n.xRel>0)&&(W(a.to(),n)>0||n.xRel<0)?ho(t,e,n,u):po(t,e,n,r,u)}function ho(t,e,n,r){var i=t.display,o=+new Date,a=cr(t,function(s){Qo&&(i.scroller.draggable=!1),t.state.draggingText=!1,Lt(document,"mouseup",a),Lt(i.scroller,"drop",a),Math.abs(e.clientX-s.clientX)+Math.abs(e.clientY-s.clientY)<10&&(Ot(s),!r&&+new Date-200<o&&ri(t.doc,n),Qo||Zo&&9==Ko?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())});Qo&&(i.scroller.draggable=!0),t.state.draggingText=a,a.copy=sa?e.altKey:e.ctrlKey,i.scroller.dragDrop&&i.scroller.dragDrop(),Pa(document,"mouseup",a),Pa(i.scroller,"drop",a)}function po(t,e,n,r,i){function a(e){if(0!=W(x,e))if(x=e,"rect"==r){for(var i=[],o=t.options.tabSize,a=c(A(f,n.line).text,n.ch,o),s=c(A(f,e.line).text,e.ch,o),l=Math.min(a,s),u=Math.max(a,s),v=Math.min(n.line,e.line),m=Math.min(t.lastLine(),Math.max(n.line,e.line));v<=m;v++){var y=A(f,v).text,b=d(y,l,o);l==u?i.push(new rs(O(v,b),O(v,b))):y.length>b&&i.push(new rs(O(v,b),O(v,d(y,u,o))))}i.length||i.push(new rs(n,n)),ui(f,Er(g.ranges.slice(0,p).concat(i),p),{origin:"*mouse",scroll:!1}),t.scrollIntoView(e)}else{var w=h,k=w.anchor,M=e;if("single"!=r){var C;C="double"==r?t.findWordAt(e):new rs(O(e.line,0),B(f,O(e.line+1,0))),W(C.anchor,k)>0?(M=C.head,k=I(w.from(),C.anchor)):(M=C.anchor,k=H(w.to(),C.head))}var S=g.ranges.slice(0);S[p]=new rs(B(f,k),M),ui(f,Er(S,p),ka)}}function s(e){var n=++w,i=Mn(t,e,!0,"rect"==r);if(i)if(0!=W(i,x)){t.curOp.focus=o(),a(i);var l=Hn(u,f);(i.line>=l.to||i.line<l.from)&&setTimeout(cr(t,function(){w==n&&s(e)}),150)}else{var c=e.clientY<b.top?-20:e.clientY>b.bottom?20:0;c&&setTimeout(cr(t,function(){w==n&&(u.scroller.scrollTop+=c,s(e))}),50)}}function l(e){t.state.selectingText=!1,w=1/0,Ot(e),u.input.focus(),Lt(document,"mousemove",k),Lt(document,"mouseup",M),f.history.lastSelOrigin=null}var u=t.display,f=t.doc;Ot(e);var h,p,g=f.sel,v=g.ranges;if(i&&!e.shiftKey?(p=f.sel.contains(n),h=p>-1?v[p]:new rs(n,n)):(h=f.sel.primary(),p=f.sel.primIndex),la?e.shiftKey&&e.metaKey:e.altKey)r="rect",i||(h=new rs(n,n)),n=Mn(t,e,!0,!0),p=-1;else if("double"==r){var m=t.findWordAt(n);h=t.display.shift||f.extend?ni(f,h,m.anchor,m.head):m}else if("triple"==r){var y=new rs(O(n.line,0),B(f,O(n.line+1,0)));h=t.display.shift||f.extend?ni(f,h,y.anchor,y.head):y}else h=ni(f,h,n);i?p==-1?(p=v.length,ui(f,Er(v.concat([h]),p),{scroll:!1,origin:"*mouse"})):v.length>1&&v[p].empty()&&"single"==r&&!e.shiftKey?(ui(f,Er(v.slice(0,p).concat(v.slice(p+1)),0),{scroll:!1,origin:"*mouse"}),g=f.sel):oi(f,p,h,ka):(p=0,ui(f,new ns([h],0),ka),g=f.sel);var x=n,b=u.wrapper.getBoundingClientRect(),w=0,k=cr(t,function(t){It(t)?s(t):l(t)}),M=cr(t,l);t.state.selectingText=M,Pa(document,"mousemove",k),Pa(document,"mouseup",M)}function go(t,e,n,r){var i,o;try{i=e.clientX,o=e.clientY}catch(t){return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;r&&Ot(e);var a=t.display,s=a.lineDiv.getBoundingClientRect();if(o>s.bottom||!Pt(t,n))return Dt(e);o-=s.top-a.viewOffset;for(var l=0;l<t.options.gutters.length;++l){var u=a.gutters.childNodes[l];if(u&&u.getBoundingClientRect().right>=i){var c=N(t.doc,o),f=t.options.gutters[l];return Tt(t,n,t,c,f,e),Dt(e)}}}function vo(t,e){return go(t,e,"gutterClick",!0)}function mo(t,e){ze(t.display,e)||yo(t,e)||Et(t,e,"contextmenu")||t.display.input.onContextMenu(e)}function yo(t,e){return!!Pt(t,"gutterContextMenu")&&go(t,e,"gutterContextMenu",!1)}function xo(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),rn(t)}function bo(t){function e(e,r,i,o){t.defaults[e]=r,i&&(n[e]=o?function(t,e,n){n!=Cs&&i(t,e,n)}:i)}var n=t.optionHandlers;t.defineOption=e,t.Init=Cs,e("value","",function(t,e){return t.setValue(e)},!0),e("mode",null,function(t,e){t.doc.modeOption=e,zr(t)},!0),e("indentUnit",2,zr,!0),e("indentWithTabs",!1),e("smartIndent",!0),e("tabSize",4,function(t){Hr(t),rn(t),hr(t)},!0),e("lineSeparator",null,function(t,e){if(t.doc.lineSep=e,e){var n=[],r=t.doc.first;t.doc.iter(function(t){for(var i=0;;){var o=t.text.indexOf(e,i);if(o==-1)break;i=o+e.length,n.push(O(r,o))}r++});for(var i=n.length-1;i>=0;i--)Si(t.doc,e,n[i],O(n[i].line,n[i].ch+e.length))}}),e("specialChars",/[\u0000-\u001f\u007f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(t,e,n){t.state.specialChars=new RegExp(e.source+(e.test("\t")?"":"|\t"),"g"),n!=Cs&&t.refresh()}),e("specialCharPlaceholder",fe,function(t){return t.refresh()},!0),e("electricChars",!0),e("inputStyle",aa?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),e("spellcheck",!1,function(t,e){return t.getInputField().spellcheck=e},!0),e("rtlMoveVisually",!ua),e("wholeLineUpdateBefore",!0),e("theme","default",function(t){xo(t),wo(t)},!0),e("keyMap","default",function(t,e,n){var r=Zi(e),i=n!=Cs&&Zi(n);i&&i.detach&&i.detach(t,r),r.attach&&r.attach(t,i||null)}),e("extraKeys",null),e("lineWrapping",!1,Mo,!0),e("gutters",[],function(t){Tr(t.options),wo(t)},!0),e("fixedGutter",!0,function(t,e){t.display.gutters.style.left=e?bn(t.display)+"px":"0",t.refresh()},!0),e("coverGutterNextToScrollbar",!1,function(t){return Xn(t)},!0),e("scrollbarStyle","native",function(t){Yn(t),Xn(t),t.display.scrollbars.setScrollTop(t.doc.scrollTop),t.display.scrollbars.setScrollLeft(t.doc.scrollLeft)},!0),e("lineNumbers",!1,function(t){Tr(t.options),wo(t)},!0),e("firstLineNumber",1,wo,!0),e("lineNumberFormatter",function(t){return t},wo,!0),e("showCursorWhenSelecting",!1,Sn,!0),e("resetSelectionOnContextMenu",!0),e("lineWiseCopyCut",!0),e("readOnly",!1,function(t,e){"nocursor"==e?(Fn(t),t.display.input.blur(),t.display.disabled=!0):t.display.disabled=!1,t.display.input.readOnlyChanged(e)}),e("disableInput",!1,function(t,e){e||t.display.input.reset()},!0),e("dragDrop",!0,ko),e("allowDropFileTypes",null),e("cursorBlinkRate",530),e("cursorScrollMargin",0),e("cursorHeight",1,Sn,!0),e("singleCursorHeightPerLine",!0,Sn,!0),e("workTime",100),e("workDelay",100),e("flattenSpans",!0,Hr,!0),e("addModeClass",!1,Hr,!0),e("pollInterval",100),e("undoDepth",200,function(t,e){return t.doc.history.undoDepth=e}),e("historyEventDelay",1250),e("viewportMargin",10,function(t){return t.refresh()},!0),e("maxHighlightLength",1e4,Hr,!0),e("moveInputWithCursor",!0,function(t,e){e||t.display.input.resetPosition()}),e("tabindex",null,function(t,e){return t.display.input.getField().tabIndex=e||""}),e("autofocus",null)}function wo(t){Lr(t),hr(t),On(t)}function ko(t,e,n){var r=n&&n!=Cs;if(!e!=!r){var i=t.display.dragFunctions,o=e?Pa:Lt;o(t.display.scroller,"dragstart",i.start),o(t.display.scroller,"dragenter",i.enter),o(t.display.scroller,"dragover",i.over),o(t.display.scroller,"dragleave",i.leave),o(t.display.scroller,"drop",i.drop)}}function Mo(t){t.options.lineWrapping?(a(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(pa(t.display.wrapper,"CodeMirror-wrap"),xt(t)),kn(t),hr(t),rn(t),setTimeout(function(){return Xn(t)},100)}function Co(t,e){var n=this;if(!(this instanceof Co))return new Co(t,e);this.options=e=e?u(e):{},u(Ss,e,!1),Tr(e);var r=e.value;"string"==typeof r&&(r=new fs(r,e.mode,null,e.lineSeparator)),this.doc=r;var i=new Co.inputStyles[e.inputStyle](this),o=this.display=new S(t,r,i);o.wrapper.CodeMirror=this,Lr(this),xo(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Yn(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new va,keySeq:null,specialChars:null},e.autofocus&&!aa&&o.input.focus(),Zo&&Ko<11&&setTimeout(function(){return n.display.input.reset(!0)},20),So(this),ji(),er(this),this.curOp.forceUpdate=!0,jr(this,r),e.autofocus&&!aa||this.hasFocus()?setTimeout(l(Pn,this),20):Fn(this);for(var a in As)As.hasOwnProperty(a)&&As[a](n,e[a],Cs);Wn(this),e.finishInit&&e.finishInit(this);for(var s=0;s<_s.length;++s)_s[s](n);nr(this),Qo&&e.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}function So(t){function e(){i.activeTouch&&(o=setTimeout(function(){return i.activeTouch=null},1e3),a=i.activeTouch,a.end=+new Date)}function n(t){if(1!=t.touches.length)return!1;var e=t.touches[0];return e.radiusX<=1&&e.radiusY<=1}function r(t,e){if(null==e.left)return!0;var n=e.left-t.left,r=e.top-t.top;return n*n+r*r>400}var i=t.display;Pa(i.scroller,"mousedown",cr(t,co)),Zo&&Ko<11?Pa(i.scroller,"dblclick",cr(t,function(e){if(!Et(t,e)){var n=Mn(t,e);if(n&&!vo(t,e)&&!ze(t.display,e)){Ot(e);var r=t.findWordAt(n);ri(t.doc,r.anchor,r.head)}}})):Pa(i.scroller,"dblclick",function(e){return Et(t,e)||Ot(e)}),ha||Pa(i.scroller,"contextmenu",function(e){return mo(t,e)});var o,a={end:0};Pa(i.scroller,"touchstart",function(e){if(!Et(t,e)&&!n(e)){i.input.ensurePolled(),clearTimeout(o);var r=+new Date;i.activeTouch={start:r,moved:!1,prev:r-a.end<=300?a:null},1==e.touches.length&&(i.activeTouch.left=e.touches[0].pageX,i.activeTouch.top=e.touches[0].pageY)}}),Pa(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),Pa(i.scroller,"touchend",function(n){var o=i.activeTouch;if(o&&!ze(i,n)&&null!=o.left&&!o.moved&&new Date-o.start<300){var a,s=t.coordsChar(i.activeTouch,"page");a=!o.prev||r(o,o.prev)?new rs(s,s):!o.prev.prev||r(o,o.prev.prev)?t.findWordAt(s):new rs(O(s.line,0),B(t.doc,O(s.line+1,0))),t.setSelection(a.anchor,a.head),t.focus(),Ot(n)}e()}),Pa(i.scroller,"touchcancel",e),Pa(i.scroller,"scroll",function(){i.scroller.clientHeight&&(In(t,i.scroller.scrollTop),Rn(t,i.scroller.scrollLeft,!0),Tt(t,"scroll",t))}),Pa(i.scroller,"mousewheel",function(e){return Vn(t,e)}),Pa(i.scroller,"DOMMouseScroll",function(e){return Vn(t,e)}),Pa(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(e){Et(t,e)||zt(e)},over:function(e){Et(t,e)||(Ii(t,e),zt(e))},start:function(e){return Hi(t,e)},drop:cr(t,zi),leave:function(e){Et(t,e)||Ri(t)}};var s=i.input.getField();Pa(s,"keyup",function(e){return lo.call(t,e)}),Pa(s,"keydown",cr(t,ao)),Pa(s,"keypress",cr(t,uo)),Pa(s,"focus",function(e){return Pn(t,e)}),Pa(s,"blur",function(e){return Fn(t,e)})}function Ao(t,e,n,r){var i,o=t.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?i=Jt(t,e):n="prev");var a=t.options.tabSize,s=A(o,e),l=c(s.text,null,a);s.stateAfter&&(s.stateAfter=null);var u,f=s.text.match(/^\s*/)[0];if(r||/\S/.test(s.text)){if("smart"==n&&(u=o.mode.indent(i,s.text.slice(f.length),s.text),u==ba||u>150)){if(!r)return;n="prev"}}else u=0,n="not";"prev"==n?u=e>o.first?c(A(o,e-1).text,null,a):0:"add"==n?u=l+t.options.indentUnit:"subtract"==n?u=l-t.options.indentUnit:"number"==typeof n&&(u=l+n),u=Math.max(0,u);var d="",p=0;if(t.options.indentWithTabs)for(var g=Math.floor(u/a);g;--g)p+=a,d+="\t";if(p<u&&(d+=h(u-p)),d!=f)return Si(o,d,O(e,0),O(e,f.length),"+input"),s.stateAfter=null,!0;for(var v=0;v<o.sel.ranges.length;v++){var m=o.sel.ranges[v];if(m.head.line==e&&m.head.ch<f.length){var y=O(e,f.length);oi(o,v,new rs(y,y));break}}}function _o(t){Ls=t}function Lo(t,e,n,r,i){var o=t.doc;t.display.shift=!1,r||(r=o.sel);var a=t.state.pasteIncoming||"paste"==i,s=Oa(e),l=null;if(a&&r.ranges.length>1)if(Ls&&Ls.text.join("\n")==e){if(r.ranges.length%Ls.text.length==0){l=[];for(var u=0;u<Ls.text.length;u++)l.push(o.splitLines(Ls.text[u]))}}else s.length==r.ranges.length&&(l=g(s,function(t){return[t]}));for(var c,f=r.ranges.length-1;f>=0;f--){var d=r.ranges[f],h=d.from(),v=d.to();d.empty()&&(n&&n>0?h=O(h.line,h.ch-n):t.state.overwrite&&!a?v=O(v.line,Math.min(A(o,v.line).text.length,v.ch+p(s).length)):Ls&&Ls.lineWise&&Ls.text.join("\n")==e&&(h=v=O(h.line,0))),c=t.curOp.updateInput;var m={from:h,to:v,text:l?l[f%l.length]:s,origin:i||(a?"paste":t.state.cutIncoming?"cut":"+input")};xi(t.doc,m),ke(t,"inputRead",t,m)}e&&!a&&Eo(t,e),Jn(t),t.curOp.updateInput=c,t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=!1}function To(t,e){var n=t.clipboardData&&t.clipboardData.getData("Text");if(n)return t.preventDefault(),e.isReadOnly()||e.options.disableInput||ur(e,function(){return Lo(e,n,0,null,"paste")}),!0}function Eo(t,e){if(t.options.electricChars&&t.options.smartIndent)for(var n=t.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var o=t.getModeAt(i.head),a=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(e.indexOf(o.electricChars.charAt(s))>-1){a=Ao(t,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(A(t.doc,i.head.line).text.slice(0,i.head.ch))&&(a=Ao(t,i.head.line,"smart"));a&&ke(t,"electricInput",t,i.head.line)}}}function No(t){for(var e=[],n=[],r=0;r<t.doc.sel.ranges.length;r++){var i=t.doc.sel.ranges[r].head.line,o={anchor:O(i,0),head:O(i+1,0)};n.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:n}}function Po(t,e){t.setAttribute("autocorrect","off"),t.setAttribute("autocapitalize","off"),t.setAttribute("spellcheck",!!e)}function Fo(){var t=r("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),e=r("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return Qo?t.style.width="1000px":t.setAttribute("wrap","off"),oa&&(t.style.border="1px solid black"),Po(t),e}function Oo(t){var e=t.optionHandlers,n=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(t,n){var r=this.options,i=r[t];r[t]==n&&"mode"!=t||(r[t]=n,e.hasOwnProperty(t)&&cr(this,e[t])(this,n,i),Tt(this,"optionChange",this,t))},getOption:function(t){return this.options[t]},getDoc:function(){return this.doc},addKeyMap:function(t,e){this.state.keyMaps[e?"push":"unshift"](Zi(t))},removeKeyMap:function(t){for(var e=this.state.keyMaps,n=0;n<e.length;++n)if(e[n]==t||e[n].name==t)return e.splice(n,1),!0},addOverlay:fr(function(e,n){var r=e.token?e:t.getMode(this.options,e);if(r.startState)throw new Error("Overlays may not be stateful.");v(this.state.overlays,{mode:r,modeSpec:e,opaque:n&&n.opaque,priority:n&&n.priority||0},function(t){return t.priority}),this.state.modeGen++,hr(this)}),removeOverlay:fr(function(t){for(var e=this,n=this.state.overlays,r=0;r<n.length;++r){var i=n[r].modeSpec;if(i==t||"string"==typeof t&&i.name==t)return n.splice(r,1),e.state.modeGen++,void hr(e)}}),indentLine:fr(function(t,e,n){"string"!=typeof e&&"number"!=typeof e&&(e=null==e?this.options.smartIndent?"smart":"prev":e?"add":"subtract"),P(this.doc,t)&&Ao(this,t,e,n)}),indentSelection:fr(function(t){for(var e=this,n=this.doc.sel.ranges,r=-1,i=0;i<n.length;i++){var o=n[i];if(o.empty())o.head.line>r&&(Ao(e,o.head.line,t,!0),r=o.head.line,i==e.doc.sel.primIndex&&Jn(e));else{var a=o.from(),s=o.to(),l=Math.max(r,a.line);r=Math.min(e.lastLine(),s.line-(s.ch?0:1))+1;for(var u=l;u<r;++u)Ao(e,u,t);var c=e.doc.sel.ranges;0==a.ch&&n.length==c.length&&c[i].from().ch>0&&oi(e.doc,i,new rs(a,c[i].to()),wa)}}}),getTokenAt:function(t,e){return re(this,t,e)},getLineTokens:function(t,e){return re(this,O(t),e,!0)},getTokenTypeAt:function(t){t=B(this.doc,t);var e,n=Qt(this,A(this.doc,t.line)),r=0,i=(n.length-1)/2,o=t.ch;if(0==o)e=n[2];else for(;;){var a=r+i>>1;if((a?n[2*a-1]:0)>=o)i=a;else{if(!(n[2*a+1]<o)){e=n[2*a+2];break}r=a+1}}var s=e?e.indexOf("overlay "):-1;return s<0?e:0==s?null:e.slice(0,s-1)},getModeAt:function(e){var n=this.doc.mode;return n.innerMode?t.innerMode(n,this.getTokenAt(e).state).mode:n},getHelper:function(t,e){return this.getHelpers(t,e)[0]},getHelpers:function(t,e){var r=this,i=[];if(!n.hasOwnProperty(e))return i;var o=n[e],a=this.getModeAt(t);if("string"==typeof a[e])o[a[e]]&&i.push(o[a[e]]);else if(a[e])for(var s=0;s<a[e].length;s++){var l=o[a[e][s]];l&&i.push(l)}else a.helperType&&o[a.helperType]?i.push(o[a.helperType]):o[a.name]&&i.push(o[a.name]);for(var u=0;u<o._global.length;u++){var c=o._global[u];c.pred(a,r)&&f(i,c.val)==-1&&i.push(c.val)}return i},getStateAfter:function(t,e){var n=this.doc;return t=R(n,null==t?n.first+n.size-1:t),Jt(this,t+1,e)},cursorCoords:function(t,e){var n,r=this.doc.sel.primary();return n=null==t?r.head:"object"==typeof t?B(this.doc,t):t?r.from():r.to(),cn(this,n,e||"page")},charCoords:function(t,e){return un(this,B(this.doc,t),e||"page")},coordsChar:function(t,e){return t=ln(this,t,e||"page"),hn(this,t.left,t.top)},lineAtHeight:function(t,e){return t=ln(this,{top:t,left:0},e||"page").top,N(this.doc,t+this.display.viewOffset)},heightAtLine:function(t,e,n){var r,i=!1;if("number"==typeof t){var o=this.doc.first+this.doc.size-1;t<this.doc.first?t=this.doc.first:t>o&&(t=o,i=!0),r=A(this.doc,t)}else r=t;return sn(this,r,{top:0,left:0},e||"page",n||i).top+(i?this.doc.height-mt(r):0)},defaultTextHeight:function(){return mn(this.display)},defaultCharWidth:function(){return yn(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(t,e,n,r,i){var o=this.display;t=cn(this,B(this.doc,t));var a=t.bottom,s=t.left;if(e.style.position="absolute",e.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(e),o.sizer.appendChild(e),"over"==r)a=t.top;else if("above"==r||"near"==r){var l=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==r||t.bottom+e.offsetHeight>l)&&t.top>e.offsetHeight?a=t.top-e.offsetHeight:t.bottom+e.offsetHeight<=l&&(a=t.bottom),s+e.offsetWidth>u&&(s=u-e.offsetWidth)}e.style.top=a+"px",e.style.left=e.style.right="","right"==i?(s=o.sizer.clientWidth-e.offsetWidth,e.style.right="0px"):("left"==i?s=0:"middle"==i&&(s=(o.sizer.clientWidth-e.offsetWidth)/2),e.style.left=s+"px"),n&&Zn(this,s,a,s+e.offsetWidth,a+e.offsetHeight)},triggerOnKeyDown:fr(ao),triggerOnKeyPress:fr(uo),triggerOnKeyUp:lo,execCommand:function(t){if(ws.hasOwnProperty(t))return ws[t].call(null,this)},triggerElectric:fr(function(t){Eo(this,t)}),findPosH:function(t,e,n,r){var i=this,o=1;e<0&&(o=-1,e=-e);for(var a=B(this.doc,t),s=0;s<e&&(a=Wo(i.doc,a,o,n,r),!a.hitSide);++s);return a},moveH:fr(function(t,e){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Wo(n.doc,r.head,t,e,n.options.rtlMoveVisually):t<0?r.from():r.to()},Ma)}),deleteH:fr(function(t,e){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):Ki(this,function(n){var i=Wo(r,n.head,t,e,!1);return t<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(t,e,n,r){var i=this,o=1,a=r;e<0&&(o=-1,e=-e);for(var s=B(this.doc,t),l=0;l<e;++l){var u=cn(i,s,"div");if(null==a?a=u.left:u.left=a,s=Do(i,u,o,n),s.hitSide)break}return s},moveV:fr(function(t,e){var n=this,r=this.doc,i=[],o=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(a){if(o)return t<0?a.from():a.to();var s=cn(n,a.head,"div");null!=a.goalColumn&&(s.left=a.goalColumn),i.push(s.left);var l=Do(n,s,t,e);return"page"==e&&a==r.sel.primary()&&Qn(n,null,un(n,l,"div").top-s.top),l},Ma),i.length)for(var a=0;a<r.sel.ranges.length;a++)r.sel.ranges[a].goalColumn=i[a]}),findWordAt:function(t){var e=this.doc,n=A(e,t.line).text,r=t.ch,i=t.ch;if(n){var o=this.getHelper(t,"wordChars");"before"!=t.sticky&&i!=n.length||!r?++i:--r;for(var a=n.charAt(r),s=b(a,o)?function(t){return b(t,o)}:/\s/.test(a)?function(t){return/\s/.test(t)}:function(t){return!/\s/.test(t)&&!b(t)};r>0&&s(n.charAt(r-1));)--r;for(;i<n.length&&s(n.charAt(i));)++i}return new rs(O(t.line,r),O(t.line,i))},toggleOverwrite:function(t){null!=t&&t==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?a(this.display.cursorDiv,"CodeMirror-overwrite"):pa(this.display.cursorDiv,"CodeMirror-overwrite"),Tt(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==o()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:fr(function(t,e){null==t&&null==e||tr(this),null!=t&&(this.curOp.scrollLeft=t),null!=e&&(this.curOp.scrollTop=e)}),getScrollInfo:function(){var t=this.display.scroller;return{left:t.scrollLeft,top:t.scrollTop,height:t.scrollHeight-Be(this)-this.display.barHeight,width:t.scrollWidth-Be(this)-this.display.barWidth,clientHeight:Ve(this),clientWidth:je(this)}},scrollIntoView:fr(function(t,e){if(null==t?(t={from:this.doc.sel.primary().head,to:null},null==e&&(e=this.options.cursorScrollMargin)):"number"==typeof t?t={from:O(t,0),to:null}:null==t.from&&(t={from:t,to:null}),t.to||(t.to=t.from),t.margin=e||0,null!=t.from.line)tr(this),this.curOp.scrollToPos=t;else{var n=Kn(this,Math.min(t.from.left,t.to.left),Math.min(t.from.top,t.to.top)-t.margin,Math.max(t.from.right,t.to.right),Math.max(t.from.bottom,t.to.bottom)+t.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:fr(function(t,e){var n=this,r=function(t){return"number"==typeof t||/^\d+$/.test(String(t))?t+"px":t};null!=t&&(this.display.wrapper.style.width=r(t)),null!=e&&(this.display.wrapper.style.height=r(e)),this.options.lineWrapping&&nn(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(t){if(t.widgets)for(var e=0;e<t.widgets.length;e++)if(t.widgets[e].noHScroll){pr(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,Tt(this,"refresh",this)}),operation:function(t){return ur(this,t)},refresh:fr(function(){var t=this.display.cachedTextHeight;hr(this),this.curOp.forceUpdate=!0,rn(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),Ar(this),(null==t||Math.abs(t-mn(this.display))>.5)&&kn(this),Tt(this,"refresh",this)}),swapDoc:fr(function(t){var e=this.doc;return e.cm=null,jr(this,t),rn(this),this.display.input.reset(),this.scrollTo(t.scrollLeft,t.scrollTop),this.curOp.forceScroll=!0,ke(this,"swapDoc",this,e),e}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ft(t),t.registerHelper=function(e,r,i){n.hasOwnProperty(e)||(n[e]=t[e]={_global:[]}),n[e][r]=i},t.registerGlobalHelper=function(e,r,i,o){t.registerHelper(e,r,o),n[e]._global.push({pred:i,val:o})}}function Wo(t,e,n,r,i){function o(){var r=e.line+n;return!(r<t.first||r>=t.first+t.size)&&(e=new O(r,e.ch,e.sticky),u=A(t,r))}function a(r){var a;if(a=i?At(t.cm,u,e,n):Ct(u,e,n),null==a){if(r||!o())return!1;e=St(i,t.cm,u,e.line,n)}else e=a;return!0}var s=e,l=n,u=A(t,e.line);if("char"==r)a();else if("column"==r)a(!0);else if("word"==r||"group"==r)for(var c=null,f="group"==r,d=t.cm&&t.cm.getHelper(e,"wordChars"),h=!0;!(n<0)||a(!h);h=!1){var p=u.text.charAt(e.ch)||"\n",g=b(p,d)?"w":f&&"\n"==p?"n":!f||/\s/.test(p)?null:"p";if(!f||h||g||(g="s"),c&&c!=g){n<0&&(n=1,a(),e.sticky="after");break}if(g&&(c=g),n>0&&!a(!h))break}var v=gi(t,e,s,l,!0);return D(s,v)&&(v.hitSide=!0),v}function Do(t,e,n,r){var i,o=t.doc,a=e.left;if("page"==r){var s=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),l=Math.max(s-.5*mn(t.display),3);i=(n>0?e.bottom:e.top)+n*l}else"line"==r&&(i=n>0?e.bottom+3:e.top-3);for(var u;u=hn(t,a,i),u.outside;){if(n<0?i<=0:i>=o.height){u.hitSide=!0;break}i+=5*n}return u}function zo(t,e){var n=Ge(t,e.line);if(!n||n.hidden)return null;var r=A(t.doc,e.line),i=Xe(n,r,e.line),o=kt(r),a="left";if(o){var s=wt(o,e.ch);a=s%2?"right":"left"}var l=Ke(i.map,e.ch,a);return l.offset="right"==l.collapse?l.end:l.start,l}function Ho(t,e){return e&&(t.bad=!0),t}function Io(t,e,n,r,i){function o(t){return function(e){return e.id==t}}function a(e){if(1==e.nodeType){var n=e.getAttribute("cm-text");if(null!=n)return void(s+=""==n?e.textContent.replace(/\u200b/g,""):n);var c,f=e.getAttribute("cm-marker");if(f){var d=t.findMarks(O(r,0),O(i+1,0),o(+f));return void(d.length&&(c=d[0].find())&&(s+=_(t.doc,c.from,c.to).join(u)))}if("false"==e.getAttribute("contenteditable"))return;for(var h=0;h<e.childNodes.length;h++)a(e.childNodes[h]);/^(pre|div|p)$/i.test(e.nodeName)&&(l=!0)}else if(3==e.nodeType){var p=e.nodeValue;if(!p)return;l&&(s+=u,l=!1),s+=p}}for(var s="",l=!1,u=t.doc.lineSeparator();a(e),e!=n;)e=e.nextSibling;return s}function Ro(t,e,n){var r;if(e==t.display.lineDiv){if(r=t.display.lineDiv.childNodes[n],!r)return Ho(t.clipPos(O(t.display.viewTo-1)),!0);e=null,n=0}else for(r=e;;r=r.parentNode){if(!r||r==t.display.lineDiv)return null;if(r.parentNode&&r.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var o=t.display.view[i];if(o.node==r)return Bo(o,e,n)}}function Bo(t,e,n){function r(e,n,r){for(var i=-1;i<(f?f.length:0);i++)for(var o=i<0?c.map:f[i],a=0;a<o.length;a+=3){var s=o[a+2];if(s==e||s==n){var l=E(i<0?t.line:t.rest[i]),u=o[a]+r;return(r<0||s!=e)&&(u=o[a+(r?1:0)]),O(l,u)}}}var o=t.text.firstChild,a=!1;if(!e||!i(o,e))return Ho(O(E(t.line),0),!0);if(e==o&&(a=!0,e=o.childNodes[n],n=0,!e)){var s=t.rest?p(t.rest):t.line;return Ho(O(E(s),s.text.length),a)}var l=3==e.nodeType?e:null,u=e;for(l||1!=e.childNodes.length||3!=e.firstChild.nodeType||(l=e.firstChild,n&&(n=l.nodeValue.length));u.parentNode!=o;)u=u.parentNode;var c=t.measure,f=c.maps,d=r(l,u,n);if(d)return Ho(d,a);for(var h=u.nextSibling,g=l?l.nodeValue.length-n:0;h;h=h.nextSibling){if(d=r(h,h.firstChild,0))return Ho(O(d.line,d.ch-g),a);g+=h.textContent.length}for(var v=u.previousSibling,m=n;v;v=v.previousSibling){if(d=r(v,v.firstChild,-1))return Ho(O(d.line,d.ch+m),a);m+=v.textContent.length}}function jo(t,e){function n(){t.value=l.getValue()}if(e=e?u(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),null==e.autofocus){var r=o();e.autofocus=r==t||null!=t.getAttribute("autofocus")&&r==document.body}var i;if(t.form&&(Pa(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var a=t.form;i=a.submit;try{var s=a.submit=function(){n(),a.submit=i,a.submit(),a.submit=s}}catch(t){}}e.finishInit=function(e){e.save=n,e.getTextArea=function(){return t},e.toTextArea=function(){e.toTextArea=isNaN,n(),t.parentNode.removeChild(e.getWrapperElement()),t.style.display="",t.form&&(Lt(t.form,"submit",n),"function"==typeof t.form.submit&&(t.form.submit=i))}},t.style.display="none";var l=Co(function(e){return t.parentNode.insertBefore(e,t.nextSibling)},e);return l}function Vo(t){t.off=Lt,t.on=Pa,t.wheelEventPixels=jn,t.Doc=fs,t.splitLines=Oa,t.countColumn=c,t.findColumn=d,t.isWordChar=x,t.Pass=ba,t.signal=Tt,t.Line=ja,t.changeEnd=Pr,t.scrollbarModel=Ja,t.Pos=O,t.cmpPos=W,t.modes=Ha,t.mimeModes=Ia,t.resolveMode=Xt,t.getMode=Ut,t.modeExtensions=Ra,t.extendMode=Yt,t.copyState=Gt,t.startState=Zt,t.innerMode=$t,t.commands=ws,t.keyMap=ys,t.keyName=$i,t.isModifierKey=Gi,t.lookupKey=Yi,t.normalizeKeyMap=Ui,t.StringStream=Ba,t.SharedTextMarker=us,t.TextMarker=ls,t.LineWidget=as,t.e_preventDefault=Ot,t.e_stopPropagation=Wt,t.e_stop=zt,t.addClass=a,t.contains=i,t.rmClass=pa,t.keyNames=ps}var qo=navigator.userAgent,Xo=navigator.platform,Uo=/gecko\/\d/i.test(qo),Yo=/MSIE \d/.test(qo),Go=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(qo),$o=/Edge\/(\d+)/.exec(qo),Zo=Yo||Go||$o,Ko=Zo&&(Yo?document.documentMode||6:+($o||Go)[1]),Qo=!$o&&/WebKit\//.test(qo),Jo=Qo&&/Qt\/\d+\.\d+/.test(qo),ta=!$o&&/Chrome\//.test(qo),ea=/Opera\//.test(qo),na=/Apple Computer/.test(navigator.vendor),ra=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(qo),ia=/PhantomJS/.test(qo),oa=!$o&&/AppleWebKit/.test(qo)&&/Mobile\/\w+/.test(qo),aa=oa||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(qo),sa=oa||/Mac/.test(Xo),la=/\bCrOS\b/.test(qo),ua=/win/i.test(Xo),ca=ea&&qo.match(/Version\/(\d*\.\d*)/);ca&&(ca=Number(ca[1])),ca&&ca>=15&&(ea=!1,Qo=!0);var fa,da=sa&&(Jo||ea&&(null==ca||ca<12.11)),ha=Uo||Zo&&Ko>=9,pa=function(e,n){var r=e.className,i=t(n).exec(r);if(i){var o=r.slice(i.index+i[0].length);e.className=r.slice(0,i.index)+(o?i[1]+o:"")}};fa=document.createRange?function(t,e,n,r){var i=document.createRange();return i.setEnd(r||t,n),i.setStart(t,e),i}:function(t,e,n){var r=document.body.createTextRange();try{r.moveToElementText(t.parentNode)}catch(t){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",e),r};var ga=function(t){t.select()};oa?ga=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:Zo&&(ga=function(t){try{t.select()}catch(t){}});var va=function(){this.id=null};va.prototype.set=function(t,e){clearTimeout(this.id),this.id=setTimeout(e,t)};var ma,ya,xa=30,ba={toString:function(){return"CodeMirror.Pass"}},wa={scroll:!1},ka={origin:"*mouse"},Ma={origin:"+move"},Ca=[""],Sa=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Aa=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,_a=!1,La=!1,Ta=null,Ea=function(){
function t(t){return t<=247?n.charAt(t):1424<=t&&t<=1524?"R":1536<=t&&t<=1785?r.charAt(t-1536):1774<=t&&t<=2220?"r":8192<=t&&t<=8203?"w":8204==t?"b":"L"}function e(t,e,n){this.level=t,this.from=e,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,o=/[stwN]/,a=/[LRr]/,s=/[Lb1n]/,l=/[1n]/,u="L";return function(n){if(!i.test(n))return!1;for(var r=n.length,c=[],f=0;f<r;++f)c.push(t(n.charCodeAt(f)));for(var d=0,h=u;d<r;++d){var g=c[d];"m"==g?c[d]=h:h=g}for(var v=0,m=u;v<r;++v){var y=c[v];"1"==y&&"r"==m?c[v]="n":a.test(y)&&(m=y,"r"==y&&(c[v]="R"))}for(var x=1,b=c[0];x<r-1;++x){var w=c[x];"+"==w&&"1"==b&&"1"==c[x+1]?c[x]="1":","!=w||b!=c[x+1]||"1"!=b&&"n"!=b||(c[x]=b),b=w}for(var k=0;k<r;++k){var M=c[k];if(","==M)c[k]="N";else if("%"==M){var C=void 0;for(C=k+1;C<r&&"%"==c[C];++C);for(var S=k&&"!"==c[k-1]||C<r&&"1"==c[C]?"1":"N",A=k;A<C;++A)c[A]=S;k=C-1}}for(var _=0,L=u;_<r;++_){var T=c[_];"L"==L&&"1"==T?c[_]="L":a.test(T)&&(L=T)}for(var E=0;E<r;++E)if(o.test(c[E])){var N=void 0;for(N=E+1;N<r&&o.test(c[N]);++N);for(var P="L"==(E?c[E-1]:u),F="L"==(N<r?c[N]:u),O=P||F?"L":"R",W=E;W<N;++W)c[W]=O;E=N-1}for(var D,z=[],H=0;H<r;)if(s.test(c[H])){var I=H;for(++H;H<r&&s.test(c[H]);++H);z.push(new e(0,I,H))}else{var R=H,B=z.length;for(++H;H<r&&"L"!=c[H];++H);for(var j=R;j<H;)if(l.test(c[j])){R<j&&z.splice(B,0,new e(1,R,j));var V=j;for(++j;j<H&&l.test(c[j]);++j);z.splice(B,0,new e(2,V,j)),R=j}else++j;R<H&&z.splice(B,0,new e(1,R,H))}return 1==z[0].level&&(D=n.match(/^\s+/))&&(z[0].from=D[0].length,z.unshift(new e(0,0,D[0].length))),1==p(z).level&&(D=n.match(/\s+$/))&&(p(z).to-=D[0].length,z.push(new e(0,r-D[0].length,r))),z}}(),Na=[],Pa=function(t,e,n){if(t.addEventListener)t.addEventListener(e,n,!1);else if(t.attachEvent)t.attachEvent("on"+e,n);else{var r=t._handlers||(t._handlers={});r[e]=(r[e]||Na).concat(n)}},Fa=function(){if(Zo&&Ko<9)return!1;var t=r("div");return"draggable"in t||"dragDrop"in t}(),Oa=3!="\n\nb".split(/\n/).length?function(t){for(var e=0,n=[],r=t.length;e<=r;){var i=t.indexOf("\n",e);i==-1&&(i=t.length);var o=t.slice(e,"\r"==t.charAt(i-1)?i-1:i),a=o.indexOf("\r");a!=-1?(n.push(o.slice(0,a)),e+=a+1):(n.push(o),e=i+1)}return n}:function(t){return t.split(/\r\n?|\n/)},Wa=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch(t){return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch(t){}return!(!e||e.parentElement()!=t)&&0!=e.compareEndPoints("StartToEnd",e)},Da=function(){var t=r("div");return"oncopy"in t||(t.setAttribute("oncopy","return;"),"function"==typeof t.oncopy)}(),za=null,Ha={},Ia={},Ra={},Ba=function(t,e){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Ba.prototype.eol=function(){return this.pos>=this.string.length},Ba.prototype.sol=function(){return this.pos==this.lineStart},Ba.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Ba.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Ba.prototype.eat=function(t){var e,n=this.string.charAt(this.pos);if(e="string"==typeof t?n==t:n&&(t.test?t.test(n):t(n)))return++this.pos,n},Ba.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Ba.prototype.eatSpace=function(){for(var t=this,e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++t.pos;return this.pos>e},Ba.prototype.skipToEnd=function(){this.pos=this.string.length},Ba.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Ba.prototype.backUp=function(t){this.pos-=t},Ba.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=c(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?c(this.string,this.lineStart,this.tabSize):0)},Ba.prototype.indentation=function(){return c(this.string,null,this.tabSize)-(this.lineStart?c(this.string,this.lineStart,this.tabSize):0)},Ba.prototype.match=function(t,e,n){if("string"!=typeof t){var r=this.string.slice(this.pos).match(t);return r&&r.index>0?null:(r&&e!==!1&&(this.pos+=r[0].length),r)}var i=function(t){return n?t.toLowerCase():t},o=this.string.substr(this.pos,t.length);if(i(o)==i(t))return e!==!1&&(this.pos+=t.length),!0},Ba.prototype.current=function(){return this.string.slice(this.start,this.pos)},Ba.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}};var ja=function(t,e,n){this.text=t,nt(this,e),this.height=n?n(this):1};ja.prototype.lineNo=function(){return E(this)},Ft(ja);var Va,qa={},Xa={},Ua=null,Ya=null,Ga={left:0,right:0,top:0,bottom:0},$a=0,Za=null;Zo?Za=-.53:Uo?Za=15:ta?Za=-.7:na&&(Za=-1/3);var Ka=function(t,e,n){this.cm=n;var i=this.vert=r("div",[r("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),o=this.horiz=r("div",[r("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");t(i),t(o),Pa(i,"scroll",function(){i.clientHeight&&e(i.scrollTop,"vertical")}),Pa(o,"scroll",function(){o.clientWidth&&e(o.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,Zo&&Ko<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ka.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,n=t.scrollHeight>t.clientHeight+1,r=t.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=e?r+"px":"0";var i=t.viewHeight-(e?r:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(n?r:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:e?r:0}},Ka.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},Ka.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},Ka.prototype.zeroWidthHack=function(){var t=sa&&!ra?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new va,this.disableVert=new va},Ka.prototype.enableZeroWidthBar=function(t,e){function n(){var r=t.getBoundingClientRect(),i=document.elementFromPoint(r.left+1,r.bottom-1);i!=t?t.style.pointerEvents="none":e.set(1e3,n)}t.style.pointerEvents="auto",e.set(1e3,n)},Ka.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var Qa=function(){};Qa.prototype.update=function(){return{bottom:0,right:0}},Qa.prototype.setScrollLeft=function(){},Qa.prototype.setScrollTop=function(){},Qa.prototype.clear=function(){};var Ja={native:Ka,null:Qa},ts=0,es=function(t,e,n){var r=t.display;this.viewport=e,this.visible=Hn(r,t.doc,e),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=je(t),this.force=n,this.dims=xn(t),this.events=[]};es.prototype.signal=function(t,e){Pt(t,e)&&this.events.push(arguments)},es.prototype.finish=function(){for(var t=this,e=0;e<this.events.length;e++)Tt.apply(null,t.events[e])};var ns=function(t,e){this.ranges=t,this.primIndex=e};ns.prototype.primary=function(){return this.ranges[this.primIndex]},ns.prototype.equals=function(t){var e=this;if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var r=e.ranges[n],i=t.ranges[n];if(!D(r.anchor,i.anchor)||!D(r.head,i.head))return!1}return!0},ns.prototype.deepCopy=function(){for(var t=this,e=[],n=0;n<this.ranges.length;n++)e[n]=new rs(z(t.ranges[n].anchor),z(t.ranges[n].head));return new ns(e,this.primIndex)},ns.prototype.somethingSelected=function(){for(var t=this,e=0;e<this.ranges.length;e++)if(!t.ranges[e].empty())return!0;return!1},ns.prototype.contains=function(t,e){var n=this;e||(e=t);for(var r=0;r<this.ranges.length;r++){var i=n.ranges[r];if(W(e,i.from())>=0&&W(t,i.to())<=0)return r}return-1};var rs=function(t,e){this.anchor=t,this.head=e};rs.prototype.from=function(){return I(this.anchor,this.head)},rs.prototype.to=function(){return H(this.anchor,this.head)},rs.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};var is=function(t){var e=this;this.lines=t,this.parent=null;for(var n=0,r=0;r<t.length;++r)t[r].parent=e,n+=t[r].height;this.height=n};is.prototype.chunkSize=function(){return this.lines.length},is.prototype.removeInner=function(t,e){for(var n=this,r=t,i=t+e;r<i;++r){var o=n.lines[r];n.height-=o.height,le(o),ke(o,"delete")}this.lines.splice(t,e)},is.prototype.collapse=function(t){t.push.apply(t,this.lines)},is.prototype.insertInner=function(t,e,n){var r=this;this.height+=n,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var i=0;i<e.length;++i)e[i].parent=r},is.prototype.iterN=function(t,e,n){for(var r=this,i=t+e;t<i;++t)if(n(r.lines[t]))return!0};var os=function(t){var e=this;this.children=t;for(var n=0,r=0,i=0;i<t.length;++i){var o=t[i];n+=o.chunkSize(),r+=o.height,o.parent=e}this.size=n,this.height=r,this.parent=null};os.prototype.chunkSize=function(){return this.size},os.prototype.removeInner=function(t,e){var n=this;this.size-=e;for(var r=0;r<this.children.length;++r){var i=n.children[r],o=i.chunkSize();if(t<o){var a=Math.min(e,o-t),s=i.height;if(i.removeInner(t,a),n.height-=s-i.height,o==a&&(n.children.splice(r--,1),i.parent=null),0==(e-=a))break;t=0}else t-=o}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof is))){var l=[];this.collapse(l),this.children=[new is(l)],this.children[0].parent=this}},os.prototype.collapse=function(t){for(var e=this,n=0;n<this.children.length;++n)e.children[n].collapse(t)},os.prototype.insertInner=function(t,e,n){var r=this;this.size+=e.length,this.height+=n;for(var i=0;i<this.children.length;++i){var o=r.children[i],a=o.chunkSize();if(t<=a){if(o.insertInner(t,e,n),o.lines&&o.lines.length>50){for(var s=o.lines.length%25+25,l=s;l<o.lines.length;){var u=new is(o.lines.slice(l,l+=25));o.height-=u.height,r.children.splice(++i,0,u),u.parent=r}o.lines=o.lines.slice(0,s),r.maybeSpill()}break}t-=a}},os.prototype.maybeSpill=function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),n=new os(e);if(t.parent){t.size-=n.size,t.height-=n.height;var r=f(t.parent.children,t);t.parent.children.splice(r+1,0,n)}else{var i=new os(t.children);i.parent=t,t.children=[i,n],t=i}n.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},os.prototype.iterN=function(t,e,n){for(var r=this,i=0;i<this.children.length;++i){var o=r.children[i],a=o.chunkSize();if(t<a){var s=Math.min(e,a-t);if(o.iterN(t,s,n))return!0;if(0==(e-=s))break;t=0}else t-=a}};var as=function(t,e,n){var r=this;if(n)for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);this.doc=t,this.node=e};as.prototype.clear=function(){var t=this,e=this.doc.cm,n=this.line.widgets,r=this.line,i=E(r);if(null!=i&&n){for(var o=0;o<n.length;++o)n[o]==t&&n.splice(o--,1);n.length||(r.widgets=null);var a=De(this);T(r,Math.max(0,r.height-a)),e&&(ur(e,function(){Ei(e,r,-a),pr(e,i,"widget")}),ke(e,"lineWidgetCleared",e,this,i))}},as.prototype.changed=function(){var t=this,e=this.height,n=this.doc.cm,r=this.line;this.height=null;var i=De(this)-e;i&&(T(r,r.height+i),n&&ur(n,function(){n.curOp.forceUpdate=!0,Ei(n,r,i),ke(n,"lineWidgetChanged",n,t,E(r))}))},Ft(as);var ss=0,ls=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++ss};ls.prototype.clear=function(){var t=this;if(!this.explicitlyCleared){var e=this.doc.cm,n=e&&!e.curOp;if(n&&er(e),Pt(this,"clear")){var r=this.find();r&&ke(this,"clear",r.from,r.to)}for(var i=null,o=null,a=0;a<this.lines.length;++a){var s=t.lines[a],l=Y(s.markedSpans,t);e&&!t.collapsed?pr(e,E(s),"text"):e&&(null!=l.to&&(o=E(s)),null!=l.from&&(i=E(s))),s.markedSpans=G(s.markedSpans,l),null==l.from&&t.collapsed&&!gt(t.doc,s)&&e&&T(s,mn(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var u=0;u<this.lines.length;++u){var c=ct(t.lines[u]),f=yt(c);f>e.display.maxLineLength&&(e.display.maxLine=c,e.display.maxLineLength=f,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&hr(e,i,o+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&di(e.doc)),e&&ke(e,"markerCleared",e,this,i,o),n&&nr(e),this.parent&&this.parent.clear()}},ls.prototype.find=function(t,e){var n=this;null==t&&"bookmark"==this.type&&(t=1);for(var r,i,o=0;o<this.lines.length;++o){var a=n.lines[o],s=Y(a.markedSpans,n);if(null!=s.from&&(r=O(e?a:E(a),s.from),t==-1))return r;if(null!=s.to&&(i=O(e?a:E(a),s.to),1==t))return i}return r&&{from:r,to:i}},ls.prototype.changed=function(){var t=this,e=this.find(-1,!0),n=this,r=this.doc.cm;e&&r&&ur(r,function(){var i=e.line,o=E(e.line),a=Ge(r,o);if(a&&(en(a),r.curOp.selectionChanged=r.curOp.forceUpdate=!0),r.curOp.updateMaxLine=!0,!gt(n.doc,i)&&null!=n.height){var s=n.height;n.height=null;var l=De(n)-s;l&&T(i,i.height+l)}ke(r,"markerChanged",r,t)})},ls.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;e.maybeHiddenMarkers&&f(e.maybeHiddenMarkers,this)!=-1||(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},ls.prototype.detachLine=function(t){if(this.lines.splice(f(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},Ft(ls);var us=function(t,e){var n=this;this.markers=t,this.primary=e;for(var r=0;r<t.length;++r)t[r].parent=n};us.prototype.clear=function(){var t=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)t.markers[e].clear();ke(this,"clear")}},us.prototype.find=function(t,e){return this.primary.find(t,e)},Ft(us);var cs=0,fs=function(t,e,n,r){if(!(this instanceof fs))return new fs(t,e,n,r);null==n&&(n=0),os.call(this,[new is([new ja("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=O(n,0);this.sel=Nr(i),this.history=new Vr(null),this.id=++cs,this.modeOption=e,this.lineSep=r,this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Rr(this,{from:i,to:i,text:t}),ui(this,Nr(i),wa)};fs.prototype=y(os.prototype,{constructor:fs,iter:function(t,e,n){n?this.iterN(t-this.first,e-t,n):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var n=0,r=0;r<e.length;++r)n+=e[r].height;this.insertInner(t-this.first,e,n)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=L(this,this.first,this.first+this.size);return t===!1?e:e.join(t||this.lineSeparator())},setValue:dr(function(t){var e=O(this.first,0),n=this.first+this.size-1;xi(this,{from:e,to:O(n,A(this,n).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),ui(this,Nr(e))}),replaceRange:function(t,e,n,r){e=B(this,e),n=n?B(this,n):e,Si(this,t,e,n,r)},getRange:function(t,e,n){var r=_(this,B(this,t),B(this,e));return n===!1?r:r.join(n||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(P(this,t))return A(this,t)},getLineNumber:function(t){return E(t)},getLineHandleVisualStart:function(t){return"number"==typeof t&&(t=A(this,t)),ct(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return B(this,t)},getCursor:function(t){var e,n=this.sel.primary();return e=null==t||"head"==t?n.head:"anchor"==t?n.anchor:"end"==t||"to"==t||t===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:dr(function(t,e,n){ai(this,B(this,"number"==typeof t?O(t,e||0):t),null,n)}),setSelection:dr(function(t,e,n){ai(this,B(this,t),B(this,e||t),n)}),extendSelection:dr(function(t,e,n){ri(this,B(this,t),e&&B(this,e),n)}),extendSelections:dr(function(t,e){ii(this,V(this,t),e)}),extendSelectionsBy:dr(function(t,e){var n=g(this.sel.ranges,t);ii(this,V(this,n),e)}),setSelections:dr(function(t,e,n){var r=this;if(t.length){for(var i=[],o=0;o<t.length;o++)i[o]=new rs(B(r,t[o].anchor),B(r,t[o].head));null==e&&(e=Math.min(t.length-1,this.sel.primIndex)),ui(this,Er(i,e),n)}}),addSelection:dr(function(t,e,n){var r=this.sel.ranges.slice(0);r.push(new rs(B(this,t),B(this,e||t))),ui(this,Er(r,r.length-1),n)}),getSelection:function(t){for(var e,n=this,r=this.sel.ranges,i=0;i<r.length;i++){var o=_(n,r[i].from(),r[i].to());e=e?e.concat(o):o}return t===!1?e:e.join(t||this.lineSeparator())},getSelections:function(t){for(var e=this,n=[],r=this.sel.ranges,i=0;i<r.length;i++){var o=_(e,r[i].from(),r[i].to());t!==!1&&(o=o.join(t||e.lineSeparator())),n[i]=o}return n},replaceSelection:function(t,e,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=t;this.replaceSelections(r,e,n||"+input")},replaceSelections:dr(function(t,e,n){for(var r=this,i=[],o=this.sel,a=0;a<o.ranges.length;a++){var s=o.ranges[a];i[a]={from:s.from(),to:s.to(),text:r.splitLines(t[a]),origin:n}}for(var l=e&&"end"!=e&&Dr(this,i,e),u=i.length-1;u>=0;u--)xi(r,i[u]);l?li(this,l):this.cm&&Jn(this.cm)}),undo:dr(function(){wi(this,"undo")}),redo:dr(function(){wi(this,"redo")}),undoSelection:dr(function(){wi(this,"undo",!0)}),redoSelection:dr(function(){wi(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,n=0,r=0;r<t.done.length;r++)t.done[r].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++n;return{undo:e,redo:n}},clearHistory:function(){this.history=new Vr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:ei(this.history.done),undone:ei(this.history.undone)}},setHistory:function(t){var e=this.history=new Vr(this.history.maxGeneration);e.done=ei(t.done.slice(0),null,!0),e.undone=ei(t.undone.slice(0),null,!0)},setGutterMarker:dr(function(t,e,n){return Ti(this,t,"gutter",function(t){var r=t.gutterMarkers||(t.gutterMarkers={});return r[e]=n,!n&&w(r)&&(t.gutterMarkers=null),!0})}),clearGutter:dr(function(t){var e=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[t]&&Ti(e,n,"gutter",function(){return n.gutterMarkers[t]=null,w(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if("number"==typeof t){if(!P(this,t))return null;if(e=t,t=A(this,t),!t)return null}else if(e=E(t),null==e)return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:dr(function(e,n,r){return Ti(this,e,"gutter"==n?"gutter":"class",function(e){var i="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(e[i]){if(t(r).test(e[i]))return!1;e[i]+=" "+r}else e[i]=r;return!0})}),removeLineClass:dr(function(e,n,r){return Ti(this,e,"gutter"==n?"gutter":"class",function(e){var i="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",o=e[i];if(!o)return!1;if(null==r)e[i]=null;else{var a=o.match(t(r));if(!a)return!1;var s=a.index+a[0].length;e[i]=o.slice(0,a.index)+(a.index&&s!=o.length?" ":"")+o.slice(s)||null}return!0})}),addLineWidget:dr(function(t,e,n){return Ni(this,t,e,n)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,n){return Pi(this,B(this,t),B(this,e),n,n&&n.type||"range")},setBookmark:function(t,e){var n={replacedWith:e&&(null==e.nodeType?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return t=B(this,t),Pi(this,t,t,n,"bookmark")},findMarksAt:function(t){t=B(this,t);var e=[],n=A(this,t.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=t.ch)&&(null==i.to||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,n){t=B(this,t),e=B(this,e);var r=[],i=t.line;return this.iter(t.line,e.line+1,function(o){var a=o.markedSpans;if(a)for(var s=0;s<a.length;s++){var l=a[s];null!=l.to&&i==t.line&&t.ch>=l.to||null==l.from&&i!=t.line||null!=l.from&&i==e.line&&l.from>=e.ch||n&&!n(l.marker)||r.push(l.marker.parent||l.marker)}++i}),r},getAllMarks:function(){var t=[];return this.iter(function(e){var n=e.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&t.push(n[r].marker)}),t},posFromIndex:function(t){var e,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+r;return o>t?(e=t,!0):(t-=o,void++n)}),B(this,O(n,e))},indexFromPos:function(t){t=B(this,t);var e=t.ch;if(t.line<this.first||t.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,t.line,function(t){e+=t.text.length+n}),e},copy:function(t){var e=new fs(L(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,n=this.first+this.size;null!=t.from&&t.from>e&&(e=t.from),null!=t.to&&t.to<n&&(n=t.to);var r=new fs(L(this,e,n),t.mode||this.modeOption,e,this.lineSep);return t.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:t.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],Wi(r,Oi(this)),r},unlinkDoc:function(t){var e=this;if(t instanceof Co&&(t=t.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=e.linked[n];if(r.doc==t){e.linked.splice(n,1),t.unlinkDoc(e),Di(Oi(e));break}}if(t.history==this.history){var i=[t.id];Br(t,function(t){return i.push(t.id)},!0),t.history=new Vr(null),t.history.done=ei(this.history.done,i),t.history.undone=ei(this.history.undone,i)}},iterLinkedDocs:function(t){Br(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Oa(t)},lineSeparator:function(){return this.lineSep||"\n"}}),fs.prototype.eachLine=fs.prototype.iter;for(var ds=0,hs=!1,ps={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},gs=0;gs<10;gs++)ps[gs+48]=ps[gs+96]=String(gs);for(var vs=65;vs<=90;vs++)ps[vs]=String.fromCharCode(vs);for(var ms=1;ms<=12;ms++)ps[ms+111]=ps[ms+63235]="F"+ms;var ys={};ys.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},ys.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},ys.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},ys.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},ys.default=sa?ys.macDefault:ys.pcDefault;var xs,bs,ws={selectAll:mi,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),wa)},killLine:function(t){return Ki(t,function(e){if(e.empty()){var n=A(t.doc,e.head.line).text.length;return e.head.ch==n&&e.head.line<t.lastLine()?{from:e.head,to:O(e.head.line+1,0)}:{from:e.head,to:O(e.head.line,n)}}return{from:e.from(),to:e.to()}})},deleteLine:function(t){return Ki(t,function(e){return{from:O(e.from().line,0),to:B(t.doc,O(e.to().line+1,0))}})},delLineLeft:function(t){return Ki(t,function(t){return{from:O(t.from().line,0),to:t.from()}})},delWrappedLineLeft:function(t){return Ki(t,function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:0,top:n},"div");return{from:r,to:e.from()}})},delWrappedLineRight:function(t){return Ki(t,function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div");return{from:e.from(),to:r}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(O(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(O(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Qi(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return to(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return Ji(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:n},"div")},Ma)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:n},"div")},Ma)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var n=t.charCoords(e.head,"div").top+5,r=t.coordsChar({left:0,top:n},"div");return r.ch<t.getLine(r.line).search(/\S/)?to(t,e.head):r},Ma)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"char")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("\t")},insertSoftTab:function(t){for(var e=[],n=t.listSelections(),r=t.options.tabSize,i=0;i<n.length;i++){var o=n[i].from(),a=c(t.getLine(o.line),o.ch,r);e.push(h(r-a%r))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return ur(t,function(){for(var e=t.listSelections(),n=[],r=0;r<e.length;r++)if(e[r].empty()){var i=e[r].head,o=A(t.doc,i.line).text;if(o)if(i.ch==o.length&&(i=new O(i.line,i.ch-1)),i.ch>0)i=new O(i.line,i.ch+1),t.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),O(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var a=A(t.doc,i.line-1).text;a&&(i=new O(i.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+a.charAt(a.length-1),O(i.line-1,a.length-1),i,"+transpose"))}n.push(new rs(i,i))}t.setSelections(n)})},newlineAndIndent:function(t){return ur(t,function(){for(var e=t.listSelections(),n=e.length-1;n>=0;n--)t.replaceRange(t.doc.lineSeparator(),e[n].anchor,e[n].head,"+input");e=t.listSelections();for(var r=0;r<e.length;r++)t.indentLine(e[r].from().line,null,!0);Jn(t)})},openLine:function(t){return t.replaceSelection("\n","start")},toggleOverwrite:function(t){return t.toggleOverwrite()}},ks=new va,Ms=null,Cs={toString:function(){return"CodeMirror.Init"}},Ss={},As={};Co.defaults=Ss,Co.optionHandlers=As;var _s=[];Co.defineInitHook=function(t){return _s.push(t)};var Ls=null,Ts=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new va,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ts.prototype.init=function(t){function e(t){if(!Et(i,t)){if(i.somethingSelected())_o({lineWise:!1,text:i.getSelections()}),"cut"==t.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var e=No(i);_o({lineWise:!0,text:e.text}),"cut"==t.type&&i.operation(function(){i.setSelections(e.ranges,0,wa),i.replaceSelection("",null,"cut")})}if(t.clipboardData){t.clipboardData.clearData();var n=Ls.text.join("\n");if(t.clipboardData.setData("Text",n),t.clipboardData.getData("Text")==n)return void t.preventDefault()}var a=Fo(),s=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),s.value=Ls.text.join("\n");var l=document.activeElement;ga(s),setTimeout(function(){i.display.lineSpace.removeChild(a),
l.focus(),l==o&&r.showPrimarySelection()},50)}}var n=this,r=this,i=r.cm,o=r.div=t.lineDiv;Po(o,i.options.spellcheck),Pa(o,"paste",function(t){Et(i,t)||To(t,i)||Ko<=11&&setTimeout(cr(i,function(){r.pollContent()||hr(i)}),20)}),Pa(o,"compositionstart",function(t){n.composing={data:t.data,done:!1}}),Pa(o,"compositionupdate",function(t){n.composing||(n.composing={data:t.data,done:!1})}),Pa(o,"compositionend",function(t){n.composing&&(t.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),Pa(o,"touchstart",function(){return r.forceCompositionEnd()}),Pa(o,"input",function(){n.composing||n.readFromDOMSoon()}),Pa(o,"copy",e),Pa(o,"cut",e)},Ts.prototype.prepareSelection=function(){var t=An(this.cm,!1);return t.focus=this.cm.state.focused,t},Ts.prototype.showSelection=function(t,e){t&&this.cm.display.view.length&&((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},Ts.prototype.showPrimarySelection=function(){var t=window.getSelection(),e=this.cm.doc.sel.primary(),n=Ro(this.cm,t.anchorNode,t.anchorOffset),r=Ro(this.cm,t.focusNode,t.focusOffset);if(!n||n.bad||!r||r.bad||0!=W(I(n,r),e.from())||0!=W(H(n,r),e.to())){var i=zo(this.cm,e.from()),o=zo(this.cm,e.to());if(i||o){var a=this.cm.display.view,s=t.rangeCount&&t.getRangeAt(0);if(i){if(!o){var l=a[a.length-1].measure,u=l.maps?l.maps[l.maps.length-1]:l.map;o={node:u[u.length-1],offset:u[u.length-2]-u[u.length-3]}}}else i={node:a[0].measure.map[2],offset:0};var c;try{c=fa(i.node,i.offset,o.offset,o.node)}catch(t){}c&&(!Uo&&this.cm.state.focused?(t.collapse(i.node,i.offset),c.collapsed||(t.removeAllRanges(),t.addRange(c))):(t.removeAllRanges(),t.addRange(c)),s&&null==t.anchorNode?t.addRange(s):Uo&&this.startGracePeriod()),this.rememberSelection()}}},Ts.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},Ts.prototype.showMultipleSelections=function(t){n(this.cm.display.cursorDiv,t.cursors),n(this.cm.display.selectionDiv,t.selection)},Ts.prototype.rememberSelection=function(){var t=window.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},Ts.prototype.selectionInEditor=function(){var t=window.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return i(this.div,e)},Ts.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ts.prototype.blur=function(){this.div.blur()},Ts.prototype.getField=function(){return this.div},Ts.prototype.supportsTouch=function(){return!0},Ts.prototype.receivedFocus=function(){function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))}var e=this;this.selectionInEditor()?this.pollSelection():ur(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,t)},Ts.prototype.selectionChanged=function(){var t=window.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},Ts.prototype.pollSelection=function(){if(!this.composing&&null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var t=window.getSelection(),e=this.cm;this.rememberSelection();var n=Ro(e,t.anchorNode,t.anchorOffset),r=Ro(e,t.focusNode,t.focusOffset);n&&r&&ur(e,function(){ui(e.doc,Nr(n,r),wa),(n.bad||r.bad)&&(e.curOp.selectionChanged=!0)})}},Ts.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,e=t.display,n=t.doc.sel.primary(),r=n.from(),i=n.to();if(0==r.ch&&r.line>t.firstLine()&&(r=O(r.line-1,A(t.doc,r.line-1).length)),i.ch==A(t.doc,i.line).text.length&&i.line<t.lastLine()&&(i=O(i.line+1,0)),r.line<e.viewFrom||i.line>e.viewTo-1)return!1;var o,a,s;r.line==e.viewFrom||0==(o=Cn(t,r.line))?(a=E(e.view[0].line),s=e.view[0].node):(a=E(e.view[o].line),s=e.view[o-1].node.nextSibling);var l,u,c=Cn(t,i.line);if(c==e.view.length-1?(l=e.viewTo-1,u=e.lineDiv.lastChild):(l=E(e.view[c+1].line)-1,u=e.view[c+1].node.previousSibling),!s)return!1;for(var f=t.doc.splitLines(Io(t,s,u,a,l)),d=_(t.doc,O(a,0),O(l,A(t.doc,l).text.length));f.length>1&&d.length>1;)if(p(f)==p(d))f.pop(),d.pop(),l--;else{if(f[0]!=d[0])break;f.shift(),d.shift(),a++}for(var h=0,g=0,v=f[0],m=d[0],y=Math.min(v.length,m.length);h<y&&v.charCodeAt(h)==m.charCodeAt(h);)++h;for(var x=p(f),b=p(d),w=Math.min(x.length-(1==f.length?h:0),b.length-(1==d.length?h:0));g<w&&x.charCodeAt(x.length-g-1)==b.charCodeAt(b.length-g-1);)++g;f[f.length-1]=x.slice(0,x.length-g).replace(/^\u200b+/,""),f[0]=f[0].slice(h).replace(/\u200b+$/,"");var k=O(a,h),M=O(l,d.length?p(d).length-g:0);return f.length>1||f[0]||W(k,M)?(Si(t.doc,f,k,M,"+input"),!0):void 0},Ts.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ts.prototype.reset=function(){this.forceCompositionEnd()},Ts.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.pollContent()||hr(this.cm),this.div.blur(),this.div.focus())},Ts.prototype.readFromDOMSoon=function(){var t=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing){if(!t.composing.done)return;t.composing=null}!t.cm.isReadOnly()&&t.pollContent()||ur(t.cm,function(){return hr(t.cm)})},80))},Ts.prototype.setUneditable=function(t){t.contentEditable="false"},Ts.prototype.onKeyPress=function(t){0!=t.charCode&&(t.preventDefault(),this.cm.isReadOnly()||cr(this.cm,Lo)(this.cm,String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),0))},Ts.prototype.readOnlyChanged=function(t){this.div.contentEditable=String("nocursor"!=t)},Ts.prototype.onContextMenu=function(){},Ts.prototype.resetPosition=function(){},Ts.prototype.needsContentAttribute=!0;var Es=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new va,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null};Es.prototype.init=function(t){function e(t){if(!Et(i,t)){if(i.somethingSelected())_o({lineWise:!1,text:i.getSelections()}),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,a.value=Ls.text.join("\n"),ga(a));else{if(!i.options.lineWiseCopyCut)return;var e=No(i);_o({lineWise:!0,text:e.text}),"cut"==t.type?i.setSelections(e.ranges,null,wa):(r.prevInput="",a.value=e.text.join("\n"),ga(a))}"cut"==t.type&&(i.state.cutIncoming=!0)}}var n=this,r=this,i=this.cm,o=this.wrapper=Fo(),a=this.textarea=o.firstChild;t.wrapper.insertBefore(o,t.wrapper.firstChild),oa&&(a.style.width="0px"),Pa(a,"input",function(){Zo&&Ko>=9&&n.hasSelection&&(n.hasSelection=null),r.poll()}),Pa(a,"paste",function(t){Et(i,t)||To(t,i)||(i.state.pasteIncoming=!0,r.fastPoll())}),Pa(a,"cut",e),Pa(a,"copy",e),Pa(t.scroller,"paste",function(e){ze(t,e)||Et(i,e)||(i.state.pasteIncoming=!0,r.focus())}),Pa(t.lineSpace,"selectstart",function(e){ze(t,e)||Ot(e)}),Pa(a,"compositionstart",function(){var t=i.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:t,range:i.markText(t,i.getCursor("to"),{className:"CodeMirror-composing"})}}),Pa(a,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Es.prototype.prepareSelection=function(){var t=this.cm,e=t.display,n=t.doc,r=An(t);if(t.options.moveInputWithCursor){var i=cn(t,n.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),a=e.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+a.top-o.top)),r.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+a.left-o.left))}return r},Es.prototype.showSelection=function(t){var e=this.cm,r=e.display;n(r.cursorDiv,t.cursors),n(r.selectionDiv,t.selection),null!=t.teTop&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Es.prototype.reset=function(t){if(!this.contextMenuPending){var e,n,r=this.cm,i=r.doc;if(r.somethingSelected()){this.prevInput="";var o=i.sel.primary();e=Da&&(o.to().line-o.from().line>100||(n=r.getSelection()).length>1e3);var a=e?"-":n||r.getSelection();this.textarea.value=a,r.state.focused&&ga(this.textarea),Zo&&Ko>=9&&(this.hasSelection=a)}else t||(this.prevInput=this.textarea.value="",Zo&&Ko>=9&&(this.hasSelection=null));this.inaccurateSelection=e}},Es.prototype.getField=function(){return this.textarea},Es.prototype.supportsTouch=function(){return!1},Es.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!aa||o()!=this.textarea))try{this.textarea.focus()}catch(t){}},Es.prototype.blur=function(){this.textarea.blur()},Es.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Es.prototype.receivedFocus=function(){this.slowPoll()},Es.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},Es.prototype.fastPoll=function(){function t(){var r=n.poll();r||e?(n.pollingFast=!1,n.slowPoll()):(e=!0,n.polling.set(60,t))}var e=!1,n=this;n.pollingFast=!0,n.polling.set(20,t)},Es.prototype.poll=function(){var t=this,e=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!e.state.focused||Wa(n)&&!r&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=n.value;if(i==r&&!e.somethingSelected())return!1;if(Zo&&Ko>=9&&this.hasSelection===i||sa&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(8203!=o||r||(r=""),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var a=0,s=Math.min(r.length,i.length);a<s&&r.charCodeAt(a)==i.charCodeAt(a);)++a;return ur(e,function(){Lo(e,i.slice(a),r.length-a,null,t.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Es.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Es.prototype.onKeyPress=function(){Zo&&Ko>=9&&(this.hasSelection=null),this.fastPoll()},Es.prototype.onContextMenu=function(t){function e(){if(null!=a.selectionStart){var t=i.somethingSelected(),e=""+(t?a.value:"");a.value="",a.value=e,r.prevInput=t?"":"",a.selectionStart=1,a.selectionEnd=e.length,o.selForContextMenu=i.doc.sel}}function n(){if(r.contextMenuPending=!1,r.wrapper.style.cssText=f,a.style.cssText=c,Zo&&Ko<9&&o.scrollbars.setScrollTop(o.scroller.scrollTop=l),null!=a.selectionStart){(!Zo||Zo&&Ko<9)&&e();var t=0,n=function(){o.selForContextMenu==i.doc.sel&&0==a.selectionStart&&a.selectionEnd>0&&""==r.prevInput?cr(i,mi)(i):t++<10?o.detectingSelectAll=setTimeout(n,500):(o.selForContextMenu=null,o.input.reset())};o.detectingSelectAll=setTimeout(n,200)}}var r=this,i=r.cm,o=i.display,a=r.textarea,s=Mn(i,t),l=o.scroller.scrollTop;if(s&&!ea){var u=i.options.resetSelectionOnContextMenu;u&&i.doc.sel.contains(s)==-1&&cr(i,ui)(i.doc,Nr(s),wa);var c=a.style.cssText,f=r.wrapper.style.cssText;r.wrapper.style.cssText="position: absolute";var d=r.wrapper.getBoundingClientRect();a.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(t.clientY-d.top-5)+"px; left: "+(t.clientX-d.left-5)+"px;\n      z-index: 1000; background: "+(Zo?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var h;if(Qo&&(h=window.scrollY),o.input.focus(),Qo&&window.scrollTo(null,h),o.input.reset(),i.somethingSelected()||(a.value=r.prevInput=" "),r.contextMenuPending=!0,o.selForContextMenu=i.doc.sel,clearTimeout(o.detectingSelectAll),Zo&&Ko>=9&&e(),ha){zt(t);var p=function(){Lt(window,"mouseup",p),setTimeout(n,20)};Pa(window,"mouseup",p)}else setTimeout(n,50)}},Es.prototype.readOnlyChanged=function(t){t||this.reset()},Es.prototype.setUneditable=function(){},Es.prototype.needsContentAttribute=!1,bo(Co),Oo(Co);var Ns="iter insert remove copy getEditor constructor".split(" ");for(var Ps in fs.prototype)fs.prototype.hasOwnProperty(Ps)&&f(Ns,Ps)<0&&(Co.prototype[Ps]=function(t){return function(){return t.apply(this.doc,arguments)}}(fs.prototype[Ps]));return Ft(fs),Co.inputStyles={textarea:Es,contenteditable:Ts},Co.defineMode=function(t){Co.defaults.mode||"null"==t||(Co.defaults.mode=t),Vt.apply(this,arguments)},Co.defineMIME=qt,Co.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),Co.defineMIME("text/plain","null"),Co.defineExtension=function(t,e){Co.prototype[t]=e},Co.defineDocExtension=function(t,e){fs.prototype[t]=e},Co.fromTextArea=jo,Vo(Co),Co.version="5.24.2",Co}),angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective),uiCodemirrorDirective.$inject=["$timeout","uiCodemirrorConfig"];